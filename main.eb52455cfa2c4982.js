(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[179],{6637:(gi,mt,H)=>{"use strict";H.d(mt,{a:()=>He});var C=H(8484),l=H(5879);function ae(ne,Ge){1&ne&&l.Hsn(0)}const v=["*"];let He=(()=>{class ne{constructor(Pe,qe,Ue){this.componentFactoryResolver=Pe,this.injector=qe,this.appRef=Ue}ngAfterViewInit(){this.portalOutlet=new C.u0(document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items"),this.componentFactoryResolver,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}}return ne.\u0275fac=function(Pe){return new(Pe||ne)(l.Y36(l._Vd),l.Y36(l.zs3),l.Y36(l.z2F))},ne.\u0275cmp=l.Xpm({type:ne,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(Pe,qe){if(1&Pe&&l.Gf(C.ig,5),2&Pe){let Ue;l.iGM(Ue=l.CRH())&&(qe.portal=Ue.first)}},inputs:{position:"position"},ngContentSelectors:v,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(Pe,qe){1&Pe&&(l.F$t(),l.YNc(0,ae,1,0,"ng-template",0))},dependencies:[C.bH],encapsulation:2}),ne})()},2627:(gi,mt,H)=>{"use strict";H.d(mt,{$:()=>ne});var C=H(5879),l=H(8184),ae=H(1274),v=H(617),He=H(2296);let ne=(()=>{class Ge{}return Ge.\u0275fac=function(qe){return new(qe||Ge)},Ge.\u0275cmp=C.Xpm({type:Ge,selectors:[["ng-component"]],decls:18,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-icon-button","","routerLink","/"],["svgIcon","ngx-maplibre-gl"],["mat-button","","routerLink","/"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/maplibre/ngx-maplibre-gl"],["mat-icon-button","","href","https://github.com/maplibre/ngx-maplibre-gl"],["svgIcon","github"]],template:function(qe,Ue){1&qe&&(C.TgZ(0,"mat-toolbar",0)(1,"div"),C._UZ(2,"div",1),C.TgZ(3,"a",2),C._UZ(4,"mat-icon",3),C.qZA(),C.TgZ(5,"a",4),C._uU(6," ngx-maplibre-gl "),C.qZA(),C.TgZ(7,"a",5),C._uU(8," Demo "),C.qZA(),C.TgZ(9,"a",6),C._uU(10," Documentation "),C.qZA()(),C.TgZ(11,"div"),C._UZ(12,"div",7),C.TgZ(13,"a",8),C._uU(14," Github "),C.qZA(),C.TgZ(15,"a",9),C._UZ(16,"mat-icon",10),C.qZA()()(),C._UZ(17,"router-outlet"))},dependencies:[l.lC,l.rH,ae.Ye,v.Hw,He.zs,He.o6],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]}),Ge})()},877:(gi,mt,H)=>{"use strict";H.d(mt,{x:()=>it});var C=H(8484),l=H(6814),ae=H(2296),v=H(617),He=H(1274),ne=H(8184),qe=(H(6637),H(2627),H(5879));let it=(()=>{class Le{}return Le.\u0275fac=function(Xe){return new(Xe||Le)},Le.\u0275mod=qe.oAB({type:Le}),Le.\u0275inj=qe.cJS({imports:[l.ez,ne.Bz,He.g0,v.Ps,ae.ot,C.eL]}),Le})()},4772:(gi,mt,H)=>{"use strict";var C=H(6593),l=H(5879),ae=H(8184);let v=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-root"]],decls:1,vars:0,template:function(r,h){1&r&&l._UZ(0,"router-outlet")},dependencies:[ae.lC],encapsulation:2}),c})();var He=H(617),ne=H(6825);function Pe(c){return new l.vHH(3e3,!1)}function dt(c){switch(c.length){case 0:return new ne.ZN;case 1:return c[0];default:return new ne.ZE(c)}}function Me(c,m,r=new Map,h=new Map){const A=[],z=[];let re=-1,ye=null;if(m.forEach(We=>{const ct=We.get("offset"),$t=ct==re,Kt=$t&&ye||new Map;We.forEach((Oi,Ki)=>{let Ii=Ki,Hi=Oi;if("offset"!==Ki)switch(Ii=c.normalizePropertyName(Ii,A),Hi){case ne.k1:Hi=r.get(Ki);break;case ne.l3:Hi=h.get(Ki);break;default:Hi=c.normalizeStyleValue(Ki,Ii,Hi,A)}Kt.set(Ii,Hi)}),$t||z.push(Kt),ye=Kt,re=ct}),A.length)throw function Hn(c){return new l.vHH(3502,!1)}();return z}function ut(c,m,r,h){switch(m){case"start":c.onStart(()=>h(r&&Yt(r,"start",c)));break;case"done":c.onDone(()=>h(r&&Yt(r,"done",c)));break;case"destroy":c.onDestroy(()=>h(r&&Yt(r,"destroy",c)))}}function Yt(c,m,r){const z=Ut(c.element,c.triggerName,c.fromState,c.toState,m||c.phaseName,r.totalTime??c.totalTime,!!r.disabled),re=c._data;return null!=re&&(z._data=re),z}function Ut(c,m,r,h,A="",z=0,re){return{element:c,triggerName:m,fromState:r,toState:h,phaseName:A,totalTime:z,disabled:!!re}}function ti(c,m,r){let h=c.get(m);return h||c.set(m,h=r),h}function ot(c){const m=c.indexOf(":");return[c.substring(1,m),c.slice(m+1)]}const Dt=(()=>typeof document>"u"?null:document.documentElement)();function wi(c){const m=c.parentNode||c.host||null;return m===Dt?null:m}let Zi=null,Fn=!1;function ce(c,m){for(;m;){if(m===c)return!0;m=wi(m)}return!1}function Se(c,m,r){if(r)return Array.from(c.querySelectorAll(m));const h=c.querySelector(m);return h?[h]:[]}let he=(()=>{class c{validateStyleProperty(r){return function bn(c){Zi||(Zi=function pt(){return typeof document<"u"?document.body:null}()||{},Fn=!!Zi.style&&"WebkitAppearance"in Zi.style);let m=!0;return Zi.style&&!function yn(c){return"ebkit"==c.substring(1,6)}(c)&&(m=c in Zi.style,!m&&Fn&&(m="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in Zi.style)),m}(r)}matchesElement(r,h){return!1}containsElement(r,h){return ce(r,h)}getParentElement(r){return wi(r)}query(r,h,A){return Se(r,h,A)}computeStyle(r,h,A){return A||""}animate(r,h,A,z,re,ye=[],We){return new ne.ZN(A,z)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})(),de=(()=>{class c{}return c.NOOP=new he,c})();const Re=1e3,Ot="ng-enter",_i="ng-leave",hi="ng-trigger",Qi=".ng-trigger",tn="ng-animating",Ji=".ng-animating";function Vi(c){if("number"==typeof c)return c;const m=c.match(/^(-?[\.\d]+)(m?s)/);return!m||m.length<2?0:zt(parseFloat(m[1]),m[2])}function zt(c,m){return"s"===m?c*Re:c}function li(c,m,r){return c.hasOwnProperty("duration")?c:function vt(c,m,r){let A,z=0,re="";if("string"==typeof c){const ye=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ye)return m.push(Pe()),{duration:0,delay:0,easing:""};A=zt(parseFloat(ye[1]),ye[2]);const We=ye[3];null!=We&&(z=zt(parseFloat(We),ye[4]));const ct=ye[5];ct&&(re=ct)}else A=c;if(!r){let ye=!1,We=m.length;A<0&&(m.push(function qe(){return new l.vHH(3100,!1)}()),ye=!0),z<0&&(m.push(function Ue(){return new l.vHH(3101,!1)}()),ye=!0),ye&&m.splice(We,0,Pe())}return{duration:A,delay:z,easing:re}}(c,m,r)}function q(c,m={}){return Object.keys(c).forEach(r=>{m[r]=c[r]}),m}function V(c){const m=new Map;return Object.keys(c).forEach(r=>{m.set(r,c[r])}),m}function ge(c,m=new Map,r){if(r)for(let[h,A]of r)m.set(h,A);for(let[h,A]of c)m.set(h,A);return m}function Ae(c,m,r){m.forEach((h,A)=>{const z=ue(A);r&&!r.has(A)&&r.set(A,c.style[z]),c.style[z]=h})}function ve(c,m){m.forEach((r,h)=>{const A=ue(h);c.style[A]=""})}function se(c){return Array.isArray(c)?1==c.length?c[0]:(0,ne.vP)(c):c}const pe=new RegExp("{{\\s*(.+?)\\s*}}","g");function Qe(c){let m=[];if("string"==typeof c){let r;for(;r=pe.exec(c);)m.push(r[1]);pe.lastIndex=0}return m}function at(c,m,r){const h=c.toString(),A=h.replace(pe,(z,re)=>{let ye=m[re];return null==ye&&(r.push(function Le(c){return new l.vHH(3003,!1)}()),ye=""),ye.toString()});return A==h?c:A}function xe(c){const m=[];let r=c.next();for(;!r.done;)m.push(r.value),r=c.next();return m}const Te=/-+([a-z0-9])/g;function ue(c){return c.replace(Te,(...m)=>m[1].toUpperCase())}function Fe(c,m,r){switch(m.type){case 7:return c.visitTrigger(m,r);case 0:return c.visitState(m,r);case 1:return c.visitTransition(m,r);case 2:return c.visitSequence(m,r);case 3:return c.visitGroup(m,r);case 4:return c.visitAnimate(m,r);case 5:return c.visitKeyframes(m,r);case 6:return c.visitStyle(m,r);case 8:return c.visitReference(m,r);case 9:return c.visitAnimateChild(m,r);case 10:return c.visitAnimateRef(m,r);case 11:return c.visitQuery(m,r);case 12:return c.visitStagger(m,r);default:throw function et(c){return new l.vHH(3004,!1)}()}}function Ie(c,m){return window.getComputedStyle(c)[m]}const Ni="*";function $n(c,m){const r=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(h=>function Mo(c,m,r){if(":"==c[0]){const We=function Ar(c,m){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,h)=>parseFloat(h)>parseFloat(r);case":decrement":return(r,h)=>parseFloat(h)<parseFloat(r);default:return m.push(function vi(c){return new l.vHH(3016,!1)}()),"* => *"}}(c,r);if("function"==typeof We)return void m.push(We);c=We}const h=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return r.push(function fi(c){return new l.vHH(3015,!1)}()),m;const A=h[1],z=h[2],re=h[3];m.push(to(A,re));"<"==z[0]&&!(A==Ni&&re==Ni)&&m.push(to(re,A))}(h,r,m)):r.push(c),r}const In=new Set(["true","1"]),Fr=new Set(["false","0"]);function to(c,m){const r=In.has(c)||Fr.has(c),h=In.has(m)||Fr.has(m);return(A,z)=>{let re=c==Ni||c==A,ye=m==Ni||m==z;return!re&&r&&"boolean"==typeof A&&(re=A?In.has(c):Fr.has(c)),!ye&&h&&"boolean"==typeof z&&(ye=z?In.has(m):Fr.has(m)),re&&ye}}const fn=new RegExp("s*:selfs*,?","g");function Mr(c,m,r,h){return new Qn(c).build(m,r,h)}class Qn{constructor(m){this._driver=m}build(m,r,h){const A=new io(r);return this._resetContextStyleTimingState(A),Fe(this,se(m),A)}_resetContextStyleTimingState(m){m.currentQuerySelector="",m.collectedStyles=new Map,m.collectedStyles.set("",new Map),m.currentTime=0}visitTrigger(m,r){let h=r.queryCount=0,A=r.depCount=0;const z=[],re=[];return"@"==m.name.charAt(0)&&r.errors.push(function lt(){return new l.vHH(3006,!1)}()),m.definitions.forEach(ye=>{if(this._resetContextStyleTimingState(r),0==ye.type){const We=ye,ct=We.name;ct.toString().split(/\s*,\s*/).forEach($t=>{We.name=$t,z.push(this.visitState(We,r))}),We.name=ct}else if(1==ye.type){const We=this.visitTransition(ye,r);h+=We.queryCount,A+=We.depCount,re.push(We)}else r.errors.push(function bt(){return new l.vHH(3007,!1)}())}),{type:7,name:m.name,states:z,transitions:re,queryCount:h,depCount:A,options:null}}visitState(m,r){const h=this.visitStyle(m.styles,r),A=m.options&&m.options.params||null;if(h.containsDynamicStyles){const z=new Set,re=A||{};h.styles.forEach(ye=>{ye instanceof Map&&ye.forEach(We=>{Qe(We).forEach(ct=>{re.hasOwnProperty(ct)||z.add(ct)})})}),z.size&&(xe(z.values()),r.errors.push(function jt(c,m){return new l.vHH(3008,!1)}()))}return{type:0,name:m.name,style:h,options:A?{params:A}:null}}visitTransition(m,r){r.queryCount=0,r.depCount=0;const h=Fe(this,se(m.animation),r);return{type:1,matchers:$n(m.expr,r.errors),animation:h,queryCount:r.queryCount,depCount:r.depCount,options:ro(m.options)}}visitSequence(m,r){return{type:2,steps:m.steps.map(h=>Fe(this,h,r)),options:ro(m.options)}}visitGroup(m,r){const h=r.currentTime;let A=0;const z=m.steps.map(re=>{r.currentTime=h;const ye=Fe(this,re,r);return A=Math.max(A,r.currentTime),ye});return r.currentTime=A,{type:3,steps:z,options:ro(m.options)}}visitAnimate(m,r){const h=function mn(c,m){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return Po(li(c,m).duration,0,"");const r=c;if(r.split(/\s+/).some(z=>"{"==z.charAt(0)&&"{"==z.charAt(1))){const z=Po(0,0,"");return z.dynamic=!0,z.strValue=r,z}const A=li(r,m);return Po(A.duration,A.delay,A.easing)}(m.timings,r.errors);r.currentAnimateTimings=h;let A,z=m.styles?m.styles:(0,ne.oB)({});if(5==z.type)A=this.visitKeyframes(z,r);else{let re=m.styles,ye=!1;if(!re){ye=!0;const ct={};h.easing&&(ct.easing=h.easing),re=(0,ne.oB)(ct)}r.currentTime+=h.duration+h.delay;const We=this.visitStyle(re,r);We.isEmptyStep=ye,A=We}return r.currentAnimateTimings=null,{type:4,timings:h,style:A,options:null}}visitStyle(m,r){const h=this._makeStyleAst(m,r);return this._validateStyleAst(h,r),h}_makeStyleAst(m,r){const h=[],A=Array.isArray(m.styles)?m.styles:[m.styles];for(let ye of A)"string"==typeof ye?ye===ne.l3?h.push(ye):r.errors.push(new l.vHH(3002,!1)):h.push(V(ye));let z=!1,re=null;return h.forEach(ye=>{if(ye instanceof Map&&(ye.has("easing")&&(re=ye.get("easing"),ye.delete("easing")),!z))for(let We of ye.values())if(We.toString().indexOf("{{")>=0){z=!0;break}}),{type:6,styles:h,easing:re,offset:m.offset,containsDynamicStyles:z,options:null}}_validateStyleAst(m,r){const h=r.currentAnimateTimings;let A=r.currentTime,z=r.currentTime;h&&z>0&&(z-=h.duration+h.delay),m.styles.forEach(re=>{"string"!=typeof re&&re.forEach((ye,We)=>{const ct=r.collectedStyles.get(r.currentQuerySelector),$t=ct.get(We);let Kt=!0;$t&&(z!=A&&z>=$t.startTime&&A<=$t.endTime&&(r.errors.push(function qt(c,m,r,h,A){return new l.vHH(3010,!1)}()),Kt=!1),z=$t.startTime),Kt&&ct.set(We,{startTime:z,endTime:A}),r.options&&function X(c,m,r){const h=m.params||{},A=Qe(c);A.length&&A.forEach(z=>{h.hasOwnProperty(z)||r.push(function it(c){return new l.vHH(3001,!1)}())})}(ye,r.options,r.errors)})})}visitKeyframes(m,r){const h={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push(function Ne(){return new l.vHH(3011,!1)}()),h;let z=0;const re=[];let ye=!1,We=!1,ct=0;const $t=m.steps.map(qn=>{const cr=this._makeStyleAst(qn,r);let fo=null!=cr.offset?cr.offset:function no(c){if("string"==typeof c)return null;let m=null;if(Array.isArray(c))c.forEach(r=>{if(r instanceof Map&&r.has("offset")){const h=r;m=parseFloat(h.get("offset")),h.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const r=c;m=parseFloat(r.get("offset")),r.delete("offset")}return m}(cr.styles),Zr=0;return null!=fo&&(z++,Zr=cr.offset=fo),We=We||Zr<0||Zr>1,ye=ye||Zr<ct,ct=Zr,re.push(Zr),cr});We&&r.errors.push(function je(){return new l.vHH(3012,!1)}()),ye&&r.errors.push(function Oe(){return new l.vHH(3200,!1)}());const Kt=m.steps.length;let Oi=0;z>0&&z<Kt?r.errors.push(function Ft(){return new l.vHH(3202,!1)}()):0==z&&(Oi=1/(Kt-1));const Ki=Kt-1,Ii=r.currentTime,Hi=r.currentAnimateTimings,Cn=Hi.duration;return $t.forEach((qn,cr)=>{const fo=Oi>0?cr==Ki?1:Oi*cr:re[cr],Zr=fo*Cn;r.currentTime=Ii+Hi.delay+Zr,Hi.duration=Zr,this._validateStyleAst(qn,r),qn.offset=fo,h.styles.push(qn)}),h}visitReference(m,r){return{type:8,animation:Fe(this,se(m.animation),r),options:ro(m.options)}}visitAnimateChild(m,r){return r.depCount++,{type:9,options:ro(m.options)}}visitAnimateRef(m,r){return{type:10,animation:this.visitReference(m.animation,r),options:ro(m.options)}}visitQuery(m,r){const h=r.currentQuerySelector,A=m.options||{};r.queryCount++,r.currentQuery=m;const[z,re]=function hr(c){const m=!!c.split(/\s*,\s*/).find(r=>":self"==r);return m&&(c=c.replace(fn,"")),c=c.replace(/@\*/g,Qi).replace(/@\w+/g,r=>Qi+"-"+r.slice(1)).replace(/:animating/g,Ji),[c,m]}(m.selector);r.currentQuerySelector=h.length?h+" "+z:z,ti(r.collectedStyles,r.currentQuerySelector,new Map);const ye=Fe(this,se(m.animation),r);return r.currentQuery=null,r.currentQuerySelector=h,{type:11,selector:z,limit:A.limit||0,optional:!!A.optional,includeSelf:re,animation:ye,originalSelector:m.selector,options:ro(m.options)}}visitStagger(m,r){r.currentQuery||r.errors.push(function Pt(){return new l.vHH(3013,!1)}());const h="full"===m.timings?{duration:0,delay:0,easing:"full"}:li(m.timings,r.errors,!0);return{type:12,animation:Fe(this,se(m.animation),r),timings:h,options:null}}}class io{constructor(m){this.errors=m,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ro(c){return c?(c=q(c)).params&&(c.params=function Do(c){return c?q(c):null}(c.params)):c={},c}function Po(c,m,r){return{duration:c,delay:m,easing:r}}function os(c,m,r,h,A,z,re=null,ye=!1){return{type:1,element:c,keyframes:m,preStyleProps:r,postStyleProps:h,duration:A,delay:z,totalTime:A+z,easing:re,subTimeline:ye}}class xa{constructor(){this._map=new Map}get(m){return this._map.get(m)||[]}append(m,r){let h=this._map.get(m);h||this._map.set(m,h=[]),h.push(...r)}has(m){return this._map.has(m)}clear(){this._map.clear()}}const wa=new RegExp(":enter","g"),Ca=new RegExp(":leave","g");function Ea(c,m,r,h,A,z=new Map,re=new Map,ye,We,ct=[]){return(new Na).buildKeyframes(c,m,r,h,A,z,re,ye,We,ct)}class Na{buildKeyframes(m,r,h,A,z,re,ye,We,ct,$t=[]){ct=ct||new xa;const Kt=new Pr(m,r,ct,A,z,$t,[]);Kt.options=We;const Oi=We.delay?Vi(We.delay):0;Kt.currentTimeline.delayNextStep(Oi),Kt.currentTimeline.setStyles([re],null,Kt.errors,We),Fe(this,h,Kt);const Ki=Kt.timelines.filter(Ii=>Ii.containsAnimation());if(Ki.length&&ye.size){let Ii;for(let Hi=Ki.length-1;Hi>=0;Hi--){const Cn=Ki[Hi];if(Cn.element===r){Ii=Cn;break}}Ii&&!Ii.allowOnlyTimelineStyles()&&Ii.setStyles([ye],null,Kt.errors,We)}return Ki.length?Ki.map(Ii=>Ii.buildKeyframes()):[os(r,[],[],[],0,Oi,"",!1)]}visitTrigger(m,r){}visitState(m,r){}visitTransition(m,r){}visitAnimateChild(m,r){const h=r.subInstructions.get(r.element);if(h){const A=r.createSubContext(m.options),z=r.currentTimeline.currentTime,re=this._visitSubInstructions(h,A,A.options);z!=re&&r.transformIntoNewTimeline(re)}r.previousNode=m}visitAnimateRef(m,r){const h=r.createSubContext(m.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([m.options,m.animation.options],r,h),this.visitReference(m.animation,h),r.transformIntoNewTimeline(h.currentTimeline.currentTime),r.previousNode=m}_applyAnimationRefDelays(m,r,h){for(const A of m){const z=A?.delay;if(z){const re="number"==typeof z?z:Vi(at(z,A?.params??{},r.errors));h.delayNextStep(re)}}}_visitSubInstructions(m,r,h){let z=r.currentTimeline.currentTime;const re=null!=h.duration?Vi(h.duration):null,ye=null!=h.delay?Vi(h.delay):null;return 0!==re&&m.forEach(We=>{const ct=r.appendInstructionToTimeline(We,re,ye);z=Math.max(z,ct.duration+ct.delay)}),z}visitReference(m,r){r.updateOptions(m.options,!0),Fe(this,m.animation,r),r.previousNode=m}visitSequence(m,r){const h=r.subContextCount;let A=r;const z=m.options;if(z&&(z.params||z.delay)&&(A=r.createSubContext(z),A.transformIntoNewTimeline(),null!=z.delay)){6==A.previousNode.type&&(A.currentTimeline.snapshotCurrentStyles(),A.previousNode=cn);const re=Vi(z.delay);A.delayNextStep(re)}m.steps.length&&(m.steps.forEach(re=>Fe(this,re,A)),A.currentTimeline.applyStylesToKeyframe(),A.subContextCount>h&&A.transformIntoNewTimeline()),r.previousNode=m}visitGroup(m,r){const h=[];let A=r.currentTimeline.currentTime;const z=m.options&&m.options.delay?Vi(m.options.delay):0;m.steps.forEach(re=>{const ye=r.createSubContext(m.options);z&&ye.delayNextStep(z),Fe(this,re,ye),A=Math.max(A,ye.currentTimeline.currentTime),h.push(ye.currentTimeline)}),h.forEach(re=>r.currentTimeline.mergeTimelineCollectedStyles(re)),r.transformIntoNewTimeline(A),r.previousNode=m}_visitTiming(m,r){if(m.dynamic){const h=m.strValue;return li(r.params?at(h,r.params,r.errors):h,r.errors)}return{duration:m.duration,delay:m.delay,easing:m.easing}}visitAnimate(m,r){const h=r.currentAnimateTimings=this._visitTiming(m.timings,r),A=r.currentTimeline;h.delay&&(r.incrementTime(h.delay),A.snapshotCurrentStyles());const z=m.style;5==z.type?this.visitKeyframes(z,r):(r.incrementTime(h.duration),this.visitStyle(z,r),A.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=m}visitStyle(m,r){const h=r.currentTimeline,A=r.currentAnimateTimings;!A&&h.hasCurrentStyleProperties()&&h.forwardFrame();const z=A&&A.easing||m.easing;m.isEmptyStep?h.applyEmptyStep(z):h.setStyles(m.styles,z,r.errors,r.options),r.previousNode=m}visitKeyframes(m,r){const h=r.currentAnimateTimings,A=r.currentTimeline.duration,z=h.duration,ye=r.createSubContext().currentTimeline;ye.easing=h.easing,m.styles.forEach(We=>{ye.forwardTime((We.offset||0)*z),ye.setStyles(We.styles,We.easing,r.errors,r.options),ye.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(ye),r.transformIntoNewTimeline(A+z),r.previousNode=m}visitQuery(m,r){const h=r.currentTimeline.currentTime,A=m.options||{},z=A.delay?Vi(A.delay):0;z&&(6===r.previousNode.type||0==h&&r.currentTimeline.hasCurrentStyleProperties())&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=cn);let re=h;const ye=r.invokeQuery(m.selector,m.originalSelector,m.limit,m.includeSelf,!!A.optional,r.errors);r.currentQueryTotal=ye.length;let We=null;ye.forEach((ct,$t)=>{r.currentQueryIndex=$t;const Kt=r.createSubContext(m.options,ct);z&&Kt.delayNextStep(z),ct===r.element&&(We=Kt.currentTimeline),Fe(this,m.animation,Kt),Kt.currentTimeline.applyStylesToKeyframe(),re=Math.max(re,Kt.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(re),We&&(r.currentTimeline.mergeTimelineCollectedStyles(We),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=m}visitStagger(m,r){const h=r.parentContext,A=r.currentTimeline,z=m.timings,re=Math.abs(z.duration),ye=re*(r.currentQueryTotal-1);let We=re*r.currentQueryIndex;switch(z.duration<0?"reverse":z.easing){case"reverse":We=ye-We;break;case"full":We=h.currentStaggerTime}const $t=r.currentTimeline;We&&$t.delayNextStep(We);const Kt=$t.currentTime;Fe(this,m.animation,r),r.previousNode=m,h.currentStaggerTime=A.currentTime-Kt+(A.startTime-h.currentTimeline.startTime)}}const cn={};class Pr{constructor(m,r,h,A,z,re,ye,We){this._driver=m,this.element=r,this.subInstructions=h,this._enterClassName=A,this._leaveClassName=z,this.errors=re,this.timelines=ye,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=We||new Wr(this._driver,r,0),ye.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(m,r){if(!m)return;const h=m;let A=this.options;null!=h.duration&&(A.duration=Vi(h.duration)),null!=h.delay&&(A.delay=Vi(h.delay));const z=h.params;if(z){let re=A.params;re||(re=this.options.params={}),Object.keys(z).forEach(ye=>{(!r||!re.hasOwnProperty(ye))&&(re[ye]=at(z[ye],re,this.errors))})}}_copyOptions(){const m={};if(this.options){const r=this.options.params;if(r){const h=m.params={};Object.keys(r).forEach(A=>{h[A]=r[A]})}}return m}createSubContext(m=null,r,h){const A=r||this.element,z=new Pr(this._driver,A,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(A,h||0));return z.previousNode=this.previousNode,z.currentAnimateTimings=this.currentAnimateTimings,z.options=this._copyOptions(),z.updateOptions(m),z.currentQueryIndex=this.currentQueryIndex,z.currentQueryTotal=this.currentQueryTotal,z.parentContext=this,this.subContextCount++,z}transformIntoNewTimeline(m){return this.previousNode=cn,this.currentTimeline=this.currentTimeline.fork(this.element,m),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(m,r,h){const A={duration:r??m.duration,delay:this.currentTimeline.currentTime+(h??0)+m.delay,easing:""},z=new As(this._driver,m.element,m.keyframes,m.preStyleProps,m.postStyleProps,A,m.stretchStartingKeyframe);return this.timelines.push(z),A}incrementTime(m){this.currentTimeline.forwardTime(this.currentTimeline.duration+m)}delayNextStep(m){m>0&&this.currentTimeline.delayNextStep(m)}invokeQuery(m,r,h,A,z,re){let ye=[];if(A&&ye.push(this.element),m.length>0){m=(m=m.replace(wa,"."+this._enterClassName)).replace(Ca,"."+this._leaveClassName);let ct=this._driver.query(this.element,m,1!=h);0!==h&&(ct=h<0?ct.slice(ct.length+h,ct.length):ct.slice(0,h)),ye.push(...ct)}return!z&&0==ye.length&&re.push(function Nt(c){return new l.vHH(3014,!1)}()),ye}}class Wr{constructor(m,r,h,A){this._driver=m,this.element=r,this.startTime=h,this._elementTimelineStylesLookup=A,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(m){const r=1===this._keyframes.size&&this._pendingStyles.size;this.duration||r?(this.forwardTime(this.currentTime+m),r&&this.snapshotCurrentStyles()):this.startTime+=m}fork(m,r){return this.applyStylesToKeyframe(),new Wr(this._driver,m,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(m){this.applyStylesToKeyframe(),this.duration=m,this._loadKeyframe()}_updateStyle(m,r){this._localTimelineStyles.set(m,r),this._globalTimelineStyles.set(m,r),this._styleSummary.set(m,{time:this.currentTime,value:r})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(m){m&&this._previousKeyframe.set("easing",m);for(let[r,h]of this._globalTimelineStyles)this._backFill.set(r,h||ne.l3),this._currentKeyframe.set(r,ne.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(m,r,h,A){r&&this._previousKeyframe.set("easing",r);const z=A&&A.params||{},re=function ks(c,m){const r=new Map;let h;return c.forEach(A=>{if("*"===A){h=h||m.keys();for(let z of h)r.set(z,ne.l3)}else ge(A,r)}),r}(m,this._globalTimelineStyles);for(let[ye,We]of re){const ct=at(We,z,h);this._pendingStyles.set(ye,ct),this._localTimelineStyles.has(ye)||this._backFill.set(ye,this._globalTimelineStyles.get(ye)??ne.l3),this._updateStyle(ye,ct)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((m,r)=>{this._currentKeyframe.set(r,m)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((m,r)=>{this._currentKeyframe.has(r)||this._currentKeyframe.set(r,m)}))}snapshotCurrentStyles(){for(let[m,r]of this._localTimelineStyles)this._pendingStyles.set(m,r),this._updateStyle(m,r)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const m=[];for(let r in this._currentKeyframe)m.push(r);return m}mergeTimelineCollectedStyles(m){m._styleSummary.forEach((r,h)=>{const A=this._styleSummary.get(h);(!A||r.time>A.time)&&this._updateStyle(h,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const m=new Set,r=new Set,h=1===this._keyframes.size&&0===this.duration;let A=[];this._keyframes.forEach((ye,We)=>{const ct=ge(ye,new Map,this._backFill);ct.forEach(($t,Kt)=>{$t===ne.k1?m.add(Kt):$t===ne.l3&&r.add(Kt)}),h||ct.set("offset",We/this.duration),A.push(ct)});const z=m.size?xe(m.values()):[],re=r.size?xe(r.values()):[];if(h){const ye=A[0],We=new Map(ye);ye.set("offset",0),We.set("offset",1),A=[ye,We]}return os(this.element,A,z,re,this.duration,this.startTime,this.easing,!1)}}class As extends Wr{constructor(m,r,h,A,z,re,ye=!1){super(m,r,re.delay),this.keyframes=h,this.preStyleProps=A,this.postStyleProps=z,this._stretchStartingKeyframe=ye,this.timings={duration:re.duration,delay:re.delay,easing:re.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let m=this.keyframes,{delay:r,duration:h,easing:A}=this.timings;if(this._stretchStartingKeyframe&&r){const z=[],re=h+r,ye=r/re,We=ge(m[0]);We.set("offset",0),z.push(We);const ct=ge(m[0]);ct.set("offset",vr(ye)),z.push(ct);const $t=m.length-1;for(let Kt=1;Kt<=$t;Kt++){let Oi=ge(m[Kt]);const Ki=Oi.get("offset");Oi.set("offset",vr((r+Ki*h)/re)),z.push(Oi)}h=re,r=0,A="",m=z}return os(this.element,m,this.preStyleProps,this.postStyleProps,h,r,A,!0)}}function vr(c,m=3){const r=Math.pow(10,m-1);return Math.round(c*r)/r}class qo{}const Yo=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class gr extends qo{normalizePropertyName(m,r){return ue(m)}normalizeStyleValue(m,r,h,A){let z="";const re=h.toString().trim();if(Yo.has(r)&&0!==h&&"0"!==h)if("number"==typeof h)z="px";else{const ye=h.match(/^[+-]?[\d\.]+([a-z]*)$/);ye&&0==ye[1].length&&A.push(function Xe(c,m){return new l.vHH(3005,!1)}())}return re+z}}function Ai(c,m,r,h,A,z,re,ye,We,ct,$t,Kt,Oi){return{type:0,element:c,triggerName:m,isRemovalTransition:A,fromState:r,fromStyles:z,toState:h,toStyles:re,timelines:ye,queriedElements:We,preStyleProps:ct,postStyleProps:$t,totalTime:Kt,errors:Oi}}const rn={};class An{constructor(m,r,h){this._triggerName=m,this.ast=r,this._stateStyles=h}match(m,r,h,A){return function Lr(c,m,r,h,A){return c.some(z=>z(m,r,h,A))}(this.ast.matchers,m,r,h,A)}buildStyles(m,r,h){let A=this._stateStyles.get("*");return void 0!==m&&(A=this._stateStyles.get(m?.toString())||A),A?A.buildStyles(r,h):new Map}build(m,r,h,A,z,re,ye,We,ct,$t){const Kt=[],Oi=this.ast.options&&this.ast.options.params||rn,Ii=this.buildStyles(h,ye&&ye.params||rn,Kt),Hi=We&&We.params||rn,Cn=this.buildStyles(A,Hi,Kt),qn=new Set,cr=new Map,fo=new Map,Zr="void"===A,Ra={params:Yn(Hi,Oi),delay:this.ast.options?.delay},Ja=$t?[]:Ea(m,r,this.ast.animation,z,re,Ii,Cn,Ra,ct,Kt);let ps=0;if(Ja.forEach(is=>{ps=Math.max(is.duration+is.delay,ps)}),Kt.length)return Ai(r,this._triggerName,h,A,Zr,Ii,Cn,[],[],cr,fo,ps,Kt);Ja.forEach(is=>{const ns=is.element,Xm=ti(cr,ns,new Set);is.preStyleProps.forEach(Qr=>Xm.add(Qr));const lc=ti(fo,ns,new Set);is.postStyleProps.forEach(Qr=>lc.add(Qr)),ns!==r&&qn.add(ns)});const Qa=xe(qn.values());return Ai(r,this._triggerName,h,A,Zr,Ii,Cn,Ja,Qa,cr,fo,ps)}}function Yn(c,m){const r=q(m);for(const h in c)c.hasOwnProperty(h)&&null!=c[h]&&(r[h]=c[h]);return r}class Ko{constructor(m,r,h){this.styles=m,this.defaultParams=r,this.normalizer=h}buildStyles(m,r){const h=new Map,A=q(this.defaultParams);return Object.keys(m).forEach(z=>{const re=m[z];null!==re&&(A[z]=re)}),this.styles.styles.forEach(z=>{"string"!=typeof z&&z.forEach((re,ye)=>{re&&(re=at(re,A,r));const We=this.normalizer.normalizePropertyName(ye,r);re=this.normalizer.normalizeStyleValue(ye,We,re,r),h.set(ye,re)})}),h}}class jo{constructor(m,r,h){this.name=m,this.ast=r,this._normalizer=h,this.transitionFactories=[],this.states=new Map,r.states.forEach(A=>{this.states.set(A.name,new Ko(A.style,A.options&&A.options.params||{},h))}),sn(this.states,"true","1"),sn(this.states,"false","0"),r.transitions.forEach(A=>{this.transitionFactories.push(new An(m,A,this.states))}),this.fallbackTransition=function Oo(c,m,r){return new An(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(re,ye)=>!0],options:null,queryCount:0,depCount:0},m)}(m,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(m,r,h,A){return this.transitionFactories.find(re=>re.match(m,r,h,A))||null}matchStyles(m,r,h){return this.fallbackTransition.buildStyles(m,r,h)}}function sn(c,m,r){c.has(m)?c.has(r)||c.set(r,c.get(m)):c.has(r)&&c.set(m,c.get(r))}const Ro=new xa;class Js{constructor(m,r,h){this.bodyNode=m,this._driver=r,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(m,r){const h=[],z=Mr(this._driver,r,h,[]);if(h.length)throw function _n(c){return new l.vHH(3503,!1)}();this._animations.set(m,z)}_buildPlayer(m,r,h){const A=m.element,z=Me(this._normalizer,m.keyframes,r,h);return this._driver.animate(A,z,m.duration,m.delay,m.easing,[],!0)}create(m,r,h={}){const A=[],z=this._animations.get(m);let re;const ye=new Map;if(z?(re=Ea(this._driver,r,z,Ot,_i,new Map,new Map,h,Ro,A),re.forEach($t=>{const Kt=ti(ye,$t.element,new Map);$t.postStyleProps.forEach(Oi=>Kt.set(Oi,null))})):(A.push(function Vn(){return new l.vHH(3300,!1)}()),re=[]),A.length)throw function Sn(c){return new l.vHH(3504,!1)}();ye.forEach(($t,Kt)=>{$t.forEach((Oi,Ki)=>{$t.set(Ki,this._driver.computeStyle(Kt,Ki,ne.l3))})});const ct=dt(re.map($t=>{const Kt=ye.get($t.element);return this._buildPlayer($t,new Map,Kt)}));return this._playersById.set(m,ct),ct.onDestroy(()=>this.destroy(m)),this.players.push(ct),ct}destroy(m){const r=this._getPlayer(m);r.destroy(),this._playersById.delete(m);const h=this.players.indexOf(r);h>=0&&this.players.splice(h,1)}_getPlayer(m){const r=this._playersById.get(m);if(!r)throw function Et(c){return new l.vHH(3301,!1)}();return r}listen(m,r,h,A){const z=Ut(r,"","","");return ut(this._getPlayer(m),h,z,A),()=>{}}command(m,r,h,A){if("register"==h)return void this.register(m,A[0]);if("create"==h)return void this.create(m,r,A[0]||{});const z=this._getPlayer(m);switch(h){case"play":z.play();break;case"pause":z.pause();break;case"reset":z.reset();break;case"restart":z.restart();break;case"finish":z.finish();break;case"init":z.init();break;case"setPosition":z.setPosition(parseFloat(A[0]));break;case"destroy":this.destroy(m)}}}const un="ng-animate-queued",gs="ng-animate-disabled",za=[],_s={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ho={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vo="__ng_removed";class Ps{get params(){return this.options.params}constructor(m,r=""){this.namespaceId=r;const h=m&&m.hasOwnProperty("value");if(this.value=function ea(c){return c??null}(h?m.value:m),h){const z=q(m);delete z.value,this.options=z}else this.options={};this.options.params||(this.options.params={})}absorbOptions(m){const r=m.params;if(r){const h=this.options.params;Object.keys(r).forEach(A=>{null==h[A]&&(h[A]=r[A])})}}}const pn="void",as=new Ps(pn);class tl{constructor(m,r,h){this.id=m,this.hostElement=r,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+m,bo(r,this._hostClassName)}listen(m,r,h,A){if(!this._triggers.has(r))throw function ft(c,m){return new l.vHH(3302,!1)}();if(null==h||0==h.length)throw function Rt(c){return new l.vHH(3303,!1)}();if(!function br(c){return"start"==c||"done"==c}(h))throw function Vt(c,m){return new l.vHH(3400,!1)}();const z=ti(this._elementListeners,m,[]),re={name:r,phase:h,callback:A};z.push(re);const ye=ti(this._engine.statesByElement,m,new Map);return ye.has(r)||(bo(m,hi),bo(m,hi+"-"+r),ye.set(r,as)),()=>{this._engine.afterFlush(()=>{const We=z.indexOf(re);We>=0&&z.splice(We,1),this._triggers.has(r)||ye.delete(r)})}}register(m,r){return!this._triggers.has(m)&&(this._triggers.set(m,r),!0)}_getTrigger(m){const r=this._triggers.get(m);if(!r)throw function ei(c){return new l.vHH(3401,!1)}();return r}trigger(m,r,h,A=!0){const z=this._getTrigger(r),re=new co(this.id,r,m);let ye=this._engine.statesByElement.get(m);ye||(bo(m,hi),bo(m,hi+"-"+r),this._engine.statesByElement.set(m,ye=new Map));let We=ye.get(r);const ct=new Ps(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&We&&ct.absorbOptions(We.options),ye.set(r,ct),We||(We=as),ct.value!==pn&&We.value===ct.value){if(!function nl(c,m){const r=Object.keys(c),h=Object.keys(m);if(r.length!=h.length)return!1;for(let A=0;A<r.length;A++){const z=r[A];if(!m.hasOwnProperty(z)||c[z]!==m[z])return!1}return!0}(We.params,ct.params)){const Hi=[],Cn=z.matchStyles(We.value,We.params,Hi),qn=z.matchStyles(ct.value,ct.params,Hi);Hi.length?this._engine.reportError(Hi):this._engine.afterFlush(()=>{ve(m,Cn),Ae(m,qn)})}return}const Oi=ti(this._engine.playersByElement,m,[]);Oi.forEach(Hi=>{Hi.namespaceId==this.id&&Hi.triggerName==r&&Hi.queued&&Hi.destroy()});let Ki=z.matchTransition(We.value,ct.value,m,ct.params),Ii=!1;if(!Ki){if(!A)return;Ki=z.fallbackTransition,Ii=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:m,triggerName:r,transition:Ki,fromState:We,toState:ct,player:re,isFallbackTransition:Ii}),Ii||(bo(m,un),re.onStart(()=>{Vr(m,un)})),re.onDone(()=>{let Hi=this.players.indexOf(re);Hi>=0&&this.players.splice(Hi,1);const Cn=this._engine.playersByElement.get(m);if(Cn){let qn=Cn.indexOf(re);qn>=0&&Cn.splice(qn,1)}}),this.players.push(re),Oi.push(re),re}deregister(m){this._triggers.delete(m),this._engine.statesByElement.forEach(r=>r.delete(m)),this._elementListeners.forEach((r,h)=>{this._elementListeners.set(h,r.filter(A=>A.name!=m))})}clearElementCache(m){this._engine.statesByElement.delete(m),this._elementListeners.delete(m);const r=this._engine.playersByElement.get(m);r&&(r.forEach(h=>h.destroy()),this._engine.playersByElement.delete(m))}_signalRemovalForInnerTriggers(m,r){const h=this._engine.driver.query(m,Qi,!0);h.forEach(A=>{if(A[vo])return;const z=this._engine.fetchNamespacesByElement(A);z.size?z.forEach(re=>re.triggerLeaveAnimation(A,r,!1,!0)):this.clearElementCache(A)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(A=>this.clearElementCache(A)))}triggerLeaveAnimation(m,r,h,A){const z=this._engine.statesByElement.get(m),re=new Map;if(z){const ye=[];if(z.forEach((We,ct)=>{if(re.set(ct,We.value),this._triggers.has(ct)){const $t=this.trigger(m,ct,pn,A);$t&&ye.push($t)}}),ye.length)return this._engine.markElementAsRemoved(this.id,m,!0,r,re),h&&dt(ye).onDone(()=>this._engine.processLeaveNode(m)),!0}return!1}prepareLeaveAnimationListeners(m){const r=this._elementListeners.get(m),h=this._engine.statesByElement.get(m);if(r&&h){const A=new Set;r.forEach(z=>{const re=z.name;if(A.has(re))return;A.add(re);const We=this._triggers.get(re).fallbackTransition,ct=h.get(re)||as,$t=new Ps(pn),Kt=new co(this.id,re,m);this._engine.totalQueuedPlayers++,this._queue.push({element:m,triggerName:re,transition:We,fromState:ct,toState:$t,player:Kt,isFallbackTransition:!0})})}}removeNode(m,r){const h=this._engine;if(m.childElementCount&&this._signalRemovalForInnerTriggers(m,r),this.triggerLeaveAnimation(m,r,!0))return;let A=!1;if(h.totalAnimations){const z=h.players.length?h.playersByQueriedElement.get(m):[];if(z&&z.length)A=!0;else{let re=m;for(;re=re.parentNode;)if(h.statesByElement.get(re)){A=!0;break}}}if(this.prepareLeaveAnimationListeners(m),A)h.markElementAsRemoved(this.id,m,!1,r);else{const z=m[vo];(!z||z===_s)&&(h.afterFlush(()=>this.clearElementCache(m)),h.destroyInnerAnimations(m),h._onRemovalComplete(m,r))}}insertNode(m,r){bo(m,this._hostClassName)}drainQueuedTransitions(m){const r=[];return this._queue.forEach(h=>{const A=h.player;if(A.destroyed)return;const z=h.element,re=this._elementListeners.get(z);re&&re.forEach(ye=>{if(ye.name==h.triggerName){const We=Ut(z,h.triggerName,h.fromState.value,h.toState.value);We._data=m,ut(h.player,ye.phase,We,ye.callback)}}),A.markedForDestroy?this._engine.afterFlush(()=>{A.destroy()}):r.push(h)}),this._queue=[],r.sort((h,A)=>{const z=h.transition.ast.depCount,re=A.transition.ast.depCount;return 0==z||0==re?z-re:this._engine.driver.containsElement(h.element,A.element)?1:-1})}destroy(m){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,m)}}class Ba{_onRemovalComplete(m,r){this.onRemovalComplete(m,r)}constructor(m,r,h){this.bodyNode=m,this.driver=r,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(A,z)=>{}}get queuedPlayers(){const m=[];return this._namespaceList.forEach(r=>{r.players.forEach(h=>{h.queued&&m.push(h)})}),m}createNamespace(m,r){const h=new tl(m,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(h,r):(this.newHostElements.set(r,h),this.collectEnterElement(r)),this._namespaceLookup[m]=h}_balanceNamespaceList(m,r){const h=this._namespaceList,A=this.namespacesByHostElement;if(h.length-1>=0){let re=!1,ye=this.driver.getParentElement(r);for(;ye;){const We=A.get(ye);if(We){const ct=h.indexOf(We);h.splice(ct+1,0,m),re=!0;break}ye=this.driver.getParentElement(ye)}re||h.unshift(m)}else h.push(m);return A.set(r,m),m}register(m,r){let h=this._namespaceLookup[m];return h||(h=this.createNamespace(m,r)),h}registerTrigger(m,r,h){let A=this._namespaceLookup[m];A&&A.register(r,h)&&this.totalAnimations++}destroy(m,r){m&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const h=this._fetchNamespace(m);this.namespacesByHostElement.delete(h.hostElement);const A=this._namespaceList.indexOf(h);A>=0&&this._namespaceList.splice(A,1),h.destroy(r),delete this._namespaceLookup[m]}))}_fetchNamespace(m){return this._namespaceLookup[m]}fetchNamespacesByElement(m){const r=new Set,h=this.statesByElement.get(m);if(h)for(let A of h.values())if(A.namespaceId){const z=this._fetchNamespace(A.namespaceId);z&&r.add(z)}return r}trigger(m,r,h,A){if(Os(r)){const z=this._fetchNamespace(m);if(z)return z.trigger(r,h,A),!0}return!1}insertNode(m,r,h,A){if(!Os(r))return;const z=r[vo];if(z&&z.setForRemoval){z.setForRemoval=!1,z.setForMove=!0;const re=this.collectedLeaveElements.indexOf(r);re>=0&&this.collectedLeaveElements.splice(re,1)}if(m){const re=this._fetchNamespace(m);re&&re.insertNode(r,h)}A&&this.collectEnterElement(r)}collectEnterElement(m){this.collectedEnterElements.push(m)}markElementAsDisabled(m,r){r?this.disabledNodes.has(m)||(this.disabledNodes.add(m),bo(m,gs)):this.disabledNodes.has(m)&&(this.disabledNodes.delete(m),Vr(m,gs))}removeNode(m,r,h){if(Os(r)){const A=m?this._fetchNamespace(m):null;A?A.removeNode(r,h):this.markElementAsRemoved(m,r,!1,h);const z=this.namespacesByHostElement.get(r);z&&z.id!==m&&z.removeNode(r,h)}else this._onRemovalComplete(r,h)}markElementAsRemoved(m,r,h,A,z){this.collectedLeaveElements.push(r),r[vo]={namespaceId:m,setForRemoval:A,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:z}}listen(m,r,h,A,z){return Os(r)?this._fetchNamespace(m).listen(r,h,A,z):()=>{}}_buildInstruction(m,r,h,A,z){return m.transition.build(this.driver,m.element,m.fromState.value,m.toState.value,h,A,m.fromState.options,m.toState.options,r,z)}destroyInnerAnimations(m){let r=this.driver.query(m,Qi,!0);r.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(m,Ji,!0),r.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(m){const r=this.playersByElement.get(m);r&&r.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(m){const r=this.playersByQueriedElement.get(m);r&&r.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(m=>{if(this.players.length)return dt(this.players).onDone(()=>m());m()})}processLeaveNode(m){const r=m[vo];if(r&&r.setForRemoval){if(m[vo]=_s,r.namespaceId){this.destroyInnerAnimations(m);const h=this._fetchNamespace(r.namespaceId);h&&h.clearElementCache(m)}this._onRemovalComplete(m,r.setForRemoval)}m.classList?.contains(gs)&&this.markElementAsDisabled(m,!1),this.driver.query(m,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(m=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,A)=>this._balanceNamespaceList(h,A)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)bo(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{r=this._flushAnimations(h,m)}finally{for(let A=0;A<h.length;A++)h[A]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],r.length?dt(r).onDone(()=>{h.forEach(A=>A())}):h.forEach(A=>A())}}reportError(m){throw function Ct(c){return new l.vHH(3402,!1)}()}_flushAnimations(m,r){const h=new xa,A=[],z=new Map,re=[],ye=new Map,We=new Map,ct=new Map,$t=new Set;this.disabledNodes.forEach(ji=>{$t.add(ji);const ln=this.driver.query(ji,".ng-animate-queued",!0);for(let gn=0;gn<ln.length;gn++)$t.add(ln[gn])});const Kt=this.bodyNode,Oi=Array.from(this.statesByElement.keys()),Ki=Xn(Oi,this.collectedEnterElements),Ii=new Map;let Hi=0;Ki.forEach((ji,ln)=>{const gn=Ot+Hi++;Ii.set(ln,gn),ji.forEach(dr=>bo(dr,gn))});const Cn=[],qn=new Set,cr=new Set;for(let ji=0;ji<this.collectedLeaveElements.length;ji++){const ln=this.collectedLeaveElements[ji],gn=ln[vo];gn&&gn.setForRemoval&&(Cn.push(ln),qn.add(ln),gn.hasAnimation?this.driver.query(ln,".ng-star-inserted",!0).forEach(dr=>qn.add(dr)):cr.add(ln))}const fo=new Map,Zr=Xn(Oi,Array.from(qn));Zr.forEach((ji,ln)=>{const gn=_i+Hi++;fo.set(ln,gn),ji.forEach(dr=>bo(dr,gn))}),m.push(()=>{Ki.forEach((ji,ln)=>{const gn=Ii.get(ln);ji.forEach(dr=>Vr(dr,gn))}),Zr.forEach((ji,ln)=>{const gn=fo.get(ln);ji.forEach(dr=>Vr(dr,gn))}),Cn.forEach(ji=>{this.processLeaveNode(ji)})});const Ra=[],Ja=[];for(let ji=this._namespaceList.length-1;ji>=0;ji--)this._namespaceList[ji].drainQueuedTransitions(r).forEach(gn=>{const dr=gn.player,ur=gn.element;if(Ra.push(dr),this.collectedEnterElements.length){const Wo=ur[vo];if(Wo&&Wo.setForMove){if(Wo.previousTriggersValues&&Wo.previousTriggersValues.has(gn.triggerName)){const jl=Wo.previousTriggersValues.get(gn.triggerName),ba=this.statesByElement.get(gn.element);if(ba&&ba.has(gn.triggerName)){const Rd=ba.get(gn.triggerName);Rd.value=jl,ba.set(gn.triggerName,Rd)}}return void dr.destroy()}}const Fa=!Kt||!this.driver.containsElement(Kt,ur),fs=fo.get(ur),_l=Ii.get(ur),eo=this._buildInstruction(gn,h,_l,fs,Fa);if(eo.errors&&eo.errors.length)return void Ja.push(eo);if(Fa)return dr.onStart(()=>ve(ur,eo.fromStyles)),dr.onDestroy(()=>Ae(ur,eo.toStyles)),void A.push(dr);if(gn.isFallbackTransition)return dr.onStart(()=>ve(ur,eo.fromStyles)),dr.onDestroy(()=>Ae(ur,eo.toStyles)),void A.push(dr);const yl=[];eo.timelines.forEach(Wo=>{Wo.stretchStartingKeyframe=!0,this.disabledNodes.has(Wo.element)||yl.push(Wo)}),eo.timelines=yl,h.append(ur,eo.timelines),re.push({instruction:eo,player:dr,element:ur}),eo.queriedElements.forEach(Wo=>ti(ye,Wo,[]).push(dr)),eo.preStyleProps.forEach((Wo,jl)=>{if(Wo.size){let ba=We.get(jl);ba||We.set(jl,ba=new Set),Wo.forEach((Rd,Du)=>ba.add(Du))}}),eo.postStyleProps.forEach((Wo,jl)=>{let ba=ct.get(jl);ba||ct.set(jl,ba=new Set),Wo.forEach((Rd,Du)=>ba.add(Du))})});if(Ja.length){const ji=[];Ja.forEach(ln=>{ji.push(function ze(c,m){return new l.vHH(3505,!1)}())}),Ra.forEach(ln=>ln.destroy()),this.reportError(ji)}const ps=new Map,Qa=new Map;re.forEach(ji=>{const ln=ji.element;h.has(ln)&&(Qa.set(ln,ln),this._beforeAnimationBuild(ji.player.namespaceId,ji.instruction,ps))}),A.forEach(ji=>{const ln=ji.element;this._getPreviousPlayers(ln,!1,ji.namespaceId,ji.triggerName,null).forEach(dr=>{ti(ps,ln,[]).push(dr),dr.destroy()})});const is=Cn.filter(ji=>Rs(ji,We,ct)),ns=new Map;Dr(ns,this.driver,cr,ct,ne.l3).forEach(ji=>{Rs(ji,We,ct)&&is.push(ji)});const lc=new Map;Ki.forEach((ji,ln)=>{Dr(lc,this.driver,new Set(ji),We,ne.k1)}),is.forEach(ji=>{const ln=ns.get(ji),gn=lc.get(ji);ns.set(ji,new Map([...ln?.entries()??[],...gn?.entries()??[]]))});const Qr=[],Od=[],Bh={};re.forEach(ji=>{const{element:ln,player:gn,instruction:dr}=ji;if(h.has(ln)){if($t.has(ln))return gn.onDestroy(()=>Ae(ln,dr.toStyles)),gn.disabled=!0,gn.overrideTotalTime(dr.totalTime),void A.push(gn);let ur=Bh;if(Qa.size>1){let fs=ln;const _l=[];for(;fs=fs.parentNode;){const eo=Qa.get(fs);if(eo){ur=eo;break}_l.push(fs)}_l.forEach(eo=>Qa.set(eo,ur))}const Fa=this._buildAnimation(gn.namespaceId,dr,ps,z,lc,ns);if(gn.setRealPlayer(Fa),ur===Bh)Qr.push(gn);else{const fs=this.playersByElement.get(ur);fs&&fs.length&&(gn.parentPlayer=dt(fs)),A.push(gn)}}else ve(ln,dr.fromStyles),gn.onDestroy(()=>Ae(ln,dr.toStyles)),Od.push(gn),$t.has(ln)&&A.push(gn)}),Od.forEach(ji=>{const ln=z.get(ji.element);if(ln&&ln.length){const gn=dt(ln);ji.setRealPlayer(gn)}}),A.forEach(ji=>{ji.parentPlayer?ji.syncPlayerEvents(ji.parentPlayer):ji.destroy()});for(let ji=0;ji<Cn.length;ji++){const ln=Cn[ji],gn=ln[vo];if(Vr(ln,_i),gn&&gn.hasAnimation)continue;let dr=[];if(ye.size){let Fa=ye.get(ln);Fa&&Fa.length&&dr.push(...Fa);let fs=this.driver.query(ln,Ji,!0);for(let _l=0;_l<fs.length;_l++){let eo=ye.get(fs[_l]);eo&&eo.length&&dr.push(...eo)}}const ur=dr.filter(Fa=>!Fa.destroyed);ur.length?Gn(this,ln,ur):this.processLeaveNode(ln)}return Cn.length=0,Qr.forEach(ji=>{this.players.push(ji),ji.onDone(()=>{ji.destroy();const ln=this.players.indexOf(ji);this.players.splice(ln,1)}),ji.play()}),Qr}afterFlush(m){this._flushFns.push(m)}afterFlushAnimationsDone(m){this._whenQuietFns.push(m)}_getPreviousPlayers(m,r,h,A,z){let re=[];if(r){const ye=this.playersByQueriedElement.get(m);ye&&(re=ye)}else{const ye=this.playersByElement.get(m);if(ye){const We=!z||z==pn;ye.forEach(ct=>{ct.queued||!We&&ct.triggerName!=A||re.push(ct)})}}return(h||A)&&(re=re.filter(ye=>!(h&&h!=ye.namespaceId||A&&A!=ye.triggerName))),re}_beforeAnimationBuild(m,r,h){const z=r.element,re=r.isRemovalTransition?void 0:m,ye=r.isRemovalTransition?void 0:r.triggerName;for(const We of r.timelines){const ct=We.element,$t=ct!==z,Kt=ti(h,ct,[]);this._getPreviousPlayers(ct,$t,re,ye,r.toState).forEach(Ki=>{const Ii=Ki.getRealPlayer();Ii.beforeDestroy&&Ii.beforeDestroy(),Ki.destroy(),Kt.push(Ki)})}ve(z,r.fromStyles)}_buildAnimation(m,r,h,A,z,re){const ye=r.triggerName,We=r.element,ct=[],$t=new Set,Kt=new Set,Oi=r.timelines.map(Ii=>{const Hi=Ii.element;$t.add(Hi);const Cn=Hi[vo];if(Cn&&Cn.removedBeforeQueried)return new ne.ZN(Ii.duration,Ii.delay);const qn=Hi!==We,cr=function qr(c){const m=[];return Va(c,m),m}((h.get(Hi)||za).map(ps=>ps.getRealPlayer())).filter(ps=>!!ps.element&&ps.element===Hi),fo=z.get(Hi),Zr=re.get(Hi),Ra=Me(this._normalizer,Ii.keyframes,fo,Zr),Ja=this._buildPlayer(Ii,Ra,cr);if(Ii.subTimeline&&A&&Kt.add(Hi),qn){const ps=new co(m,ye,Hi);ps.setRealPlayer(Ja),ct.push(ps)}return Ja});ct.forEach(Ii=>{ti(this.playersByQueriedElement,Ii.element,[]).push(Ii),Ii.onDone(()=>function da(c,m,r){let h=c.get(m);if(h){if(h.length){const A=h.indexOf(r);h.splice(A,1)}0==h.length&&c.delete(m)}return h}(this.playersByQueriedElement,Ii.element,Ii))}),$t.forEach(Ii=>bo(Ii,tn));const Ki=dt(Oi);return Ki.onDestroy(()=>{$t.forEach(Ii=>Vr(Ii,tn)),Ae(We,r.toStyles)}),Kt.forEach(Ii=>{ti(A,Ii,[]).push(Ki)}),Ki}_buildPlayer(m,r,h){return r.length>0?this.driver.animate(m.element,r,m.duration,m.delay,m.easing,h):new ne.ZN(m.duration,m.delay)}}class co{constructor(m,r,h){this.namespaceId=m,this.triggerName=r,this.element=h,this._player=new ne.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(m){this._containsRealPlayer||(this._player=m,this._queuedCallbacks.forEach((r,h)=>{r.forEach(A=>ut(m,h,void 0,A))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(m.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(m){this.totalTime=m}syncPlayerEvents(m){const r=this._player;r.triggerCallback&&m.onStart(()=>r.triggerCallback("start")),m.onDone(()=>this.finish()),m.onDestroy(()=>this.destroy())}_queueEvent(m,r){ti(this._queuedCallbacks,m,[]).push(r)}onDone(m){this.queued&&this._queueEvent("done",m),this._player.onDone(m)}onStart(m){this.queued&&this._queueEvent("start",m),this._player.onStart(m)}onDestroy(m){this.queued&&this._queueEvent("destroy",m),this._player.onDestroy(m)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(m){this.queued||this._player.setPosition(m)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(m){const r=this._player;r.triggerCallback&&r.triggerCallback(m)}}function Os(c){return c&&1===c.nodeType}function il(c,m){const r=c.style.display;return c.style.display=m??"none",r}function Dr(c,m,r,h,A){const z=[];r.forEach(We=>z.push(il(We)));const re=[];h.forEach((We,ct)=>{const $t=new Map;We.forEach(Kt=>{const Oi=m.computeStyle(ct,Kt,A);$t.set(Kt,Oi),(!Oi||0==Oi.length)&&(ct[vo]=Ho,re.push(ct))}),c.set(ct,$t)});let ye=0;return r.forEach(We=>il(We,z[ye++])),re}function Xn(c,m){const r=new Map;if(c.forEach(ye=>r.set(ye,[])),0==m.length)return r;const A=new Set(m),z=new Map;function re(ye){if(!ye)return 1;let We=z.get(ye);if(We)return We;const ct=ye.parentNode;return We=r.has(ct)?ct:A.has(ct)?1:re(ct),z.set(ye,We),We}return m.forEach(ye=>{const We=re(ye);1!==We&&r.get(We).push(ye)}),r}function bo(c,m){c.classList?.add(m)}function Vr(c,m){c.classList?.remove(m)}function Gn(c,m,r){dt(r).onDone(()=>c.processLeaveNode(m))}function Va(c,m){for(let r=0;r<c.length;r++){const h=c[r];h instanceof ne.ZE?Va(h.players,m):m.push(h)}}function Rs(c,m,r){const h=r.get(c);if(!h)return!1;let A=m.get(c);return A?h.forEach(z=>A.add(z)):m.set(c,h),r.delete(c),!0}class bl{constructor(m,r,h){this.bodyNode=m,this._driver=r,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(A,z)=>{},this._transitionEngine=new Ba(m,r,h),this._timelineEngine=new Js(m,r,h),this._transitionEngine.onRemovalComplete=(A,z)=>this.onRemovalComplete(A,z)}registerTrigger(m,r,h,A,z){const re=m+"-"+A;let ye=this._triggerCache[re];if(!ye){const We=[],$t=Mr(this._driver,z,We,[]);if(We.length)throw function Dn(c,m){return new l.vHH(3404,!1)}();ye=function mr(c,m,r){return new jo(c,m,r)}(A,$t,this._normalizer),this._triggerCache[re]=ye}this._transitionEngine.registerTrigger(r,A,ye)}register(m,r){this._transitionEngine.register(m,r)}destroy(m,r){this._transitionEngine.destroy(m,r)}onInsert(m,r,h,A){this._transitionEngine.insertNode(m,r,h,A)}onRemove(m,r,h){this._transitionEngine.removeNode(m,r,h)}disableAnimations(m,r){this._transitionEngine.markElementAsDisabled(m,r)}process(m,r,h,A){if("@"==h.charAt(0)){const[z,re]=ot(h);this._timelineEngine.command(z,r,re,A)}else this._transitionEngine.trigger(m,r,h,A)}listen(m,r,h,A,z){if("@"==h.charAt(0)){const[re,ye]=ot(h);return this._timelineEngine.listen(re,r,ye,z)}return this._transitionEngine.listen(m,r,h,A,z)}flush(m=-1){this._transitionEngine.flush(m)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(m){this._transitionEngine.afterFlushAnimationsDone(m)}}let Fs=(()=>{class c{constructor(r,h,A){this._element=r,this._startStyles=h,this._endStyles=A,this._state=0;let z=c.initialStylesByElement.get(r);z||c.initialStylesByElement.set(r,z=new Map),this._initialStyles=z}start(){this._state<1&&(this._startStyles&&Ae(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ae(this._element,this._initialStyles),this._endStyles&&(Ae(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(ve(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ve(this._element,this._endStyles),this._endStyles=null),Ae(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function ua(c){let m=null;return c.forEach((r,h)=>{(function Hl(c){return"display"===c||"position"===c})(h)&&(m=m||new Map,m.set(h,r))}),m}class rl{constructor(m,r,h,A){this.element=m,this.keyframes=r,this.options=h,this._specialStyles=A,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(m=>m()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const m=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,m,this.options),this._finalKeyframe=m.length?m[m.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(m){const r=[];return m.forEach(h=>{r.push(Object.fromEntries(h))}),r}_triggerWebAnimation(m,r,h){return m.animate(this._convertKeyframesToObject(r),h)}onStart(m){this._originalOnStartFns.push(m),this._onStartFns.push(m)}onDone(m){this._originalOnDoneFns.push(m),this._onDoneFns.push(m)}onDestroy(m){this._onDestroyFns.push(m)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(m=>m()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(m=>m()),this._onDestroyFns=[])}setPosition(m){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=m*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const m=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,A)=>{"offset"!==A&&m.set(A,this._finished?h:Ie(this.element,A))}),this.currentSnapshot=m}triggerCallback(m){const r="start"===m?this._onStartFns:this._onDoneFns;r.forEach(h=>h()),r.length=0}}class Ma{validateStyleProperty(m){return!0}validateAnimatableStyleProperty(m){return!0}matchesElement(m,r){return!1}containsElement(m,r){return ce(m,r)}getParentElement(m){return wi(m)}query(m,r,h){return Se(m,r,h)}computeStyle(m,r,h){return window.getComputedStyle(m)[r]}animate(m,r,h,A,z,re=[]){const We={duration:h,delay:A,fill:0==A?"both":"forwards"};z&&(We.easing=z);const ct=new Map,$t=re.filter(Ki=>Ki instanceof rl);(function Je(c,m){return 0===c||0===m})(h,A)&&$t.forEach(Ki=>{Ki.currentSnapshot.forEach((Ii,Hi)=>ct.set(Hi,Ii))});let Kt=function j(c){return c.length?c[0]instanceof Map?c:c.map(m=>V(m)):[]}(r).map(Ki=>ge(Ki));Kt=function Tt(c,m,r){if(r.size&&m.length){let h=m[0],A=[];if(r.forEach((z,re)=>{h.has(re)||A.push(re),h.set(re,z)}),A.length)for(let z=1;z<m.length;z++){let re=m[z];A.forEach(ye=>re.set(ye,Ie(c,ye)))}}return m}(m,Kt,ct);const Oi=function Ac(c,m){let r=null,h=null;return Array.isArray(m)&&m.length?(r=ua(m[0]),m.length>1&&(h=ua(m[m.length-1]))):m instanceof Map&&(r=ua(m)),r||h?new Fs(c,r,h):null}(m,Kt);return new rl(m,Kt,We,Oi)}}var Bi=H(6814);let $l=(()=>{class c extends ne._j{constructor(r,h){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(h.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(r){const h=this._nextAnimationId.toString();this._nextAnimationId++;const A=Array.isArray(r)?(0,ne.vP)(r):r;return pr(this._renderer,null,h,"register",[A]),new kn(h,this._renderer)}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(l.FYo),l.LFG(Bi.K0))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();class kn extends ne.LC{constructor(m,r){super(),this._id=m,this._renderer=r}create(m,r){return new Ua(this._id,m,r||{},this._renderer)}}class Ua{constructor(m,r,h,A){this.id=m,this.element=r,this._renderer=A,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(m,r){return this._renderer.listen(this.element,`@@${this.id}:${m}`,r)}_command(m,...r){return pr(this._renderer,this.element,this.id,m,r)}onDone(m){this._listen("done",m)}onStart(m){this._listen("start",m)}onDestroy(m){this._listen("destroy",m)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(m){this._command("setPosition",m)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function pr(c,m,r,h,A){return c.setProperty(m,`@@${r}:${h}`,A)}const Y="@.disabled";let W=(()=>{class c{constructor(r,h,A){this.delegate=r,this.engine=h,this._zone=A,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,h.onRemovalComplete=(z,re)=>{const ye=re?.parentNode(z);ye&&re.removeChild(ye,z)}}createRenderer(r,h){const z=this.delegate.createRenderer(r,h);if(!(r&&h&&h.data&&h.data.animation)){let $t=this._rendererCache.get(z);return $t||($t=new G("",z,this.engine,()=>this._rendererCache.delete(z)),this._rendererCache.set(z,$t)),$t}const re=h.id,ye=h.id+"-"+this._currentId;this._currentId++,this.engine.register(ye,r);const We=$t=>{Array.isArray($t)?$t.forEach(We):this.engine.registerTrigger(re,ye,r,$t.name,$t)};return h.data.animation.forEach(We),new we(this,ye,z,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(r,h,A){r>=0&&r<this._microtaskId?this._zone.run(()=>h(A)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(z=>{const[re,ye]=z;re(ye)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,A]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(l.FYo),l.LFG(bl),l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();class G{constructor(m,r,h,A){this.namespaceId=m,this.delegate=r,this.engine=h,this._onDestroy=A}get data(){return this.delegate.data}destroyNode(m){this.delegate.destroyNode?.(m)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(m,r){return this.delegate.createElement(m,r)}createComment(m){return this.delegate.createComment(m)}createText(m){return this.delegate.createText(m)}appendChild(m,r){this.delegate.appendChild(m,r),this.engine.onInsert(this.namespaceId,r,m,!1)}insertBefore(m,r,h,A=!0){this.delegate.insertBefore(m,r,h),this.engine.onInsert(this.namespaceId,r,m,A)}removeChild(m,r,h){this.engine.onRemove(this.namespaceId,r,this.delegate)}selectRootElement(m,r){return this.delegate.selectRootElement(m,r)}parentNode(m){return this.delegate.parentNode(m)}nextSibling(m){return this.delegate.nextSibling(m)}setAttribute(m,r,h,A){this.delegate.setAttribute(m,r,h,A)}removeAttribute(m,r,h){this.delegate.removeAttribute(m,r,h)}addClass(m,r){this.delegate.addClass(m,r)}removeClass(m,r){this.delegate.removeClass(m,r)}setStyle(m,r,h,A){this.delegate.setStyle(m,r,h,A)}removeStyle(m,r,h){this.delegate.removeStyle(m,r,h)}setProperty(m,r,h){"@"==r.charAt(0)&&r==Y?this.disableAnimations(m,!!h):this.delegate.setProperty(m,r,h)}setValue(m,r){this.delegate.setValue(m,r)}listen(m,r,h){return this.delegate.listen(m,r,h)}disableAnimations(m,r){this.engine.disableAnimations(m,r)}}class we extends G{constructor(m,r,h,A,z){super(r,h,A,z),this.factory=m,this.namespaceId=r}setProperty(m,r,h){"@"==r.charAt(0)?"."==r.charAt(1)&&r==Y?this.disableAnimations(m,h=void 0===h||!!h):this.engine.process(this.namespaceId,m,r.slice(1),h):this.delegate.setProperty(m,r,h)}listen(m,r,h){if("@"==r.charAt(0)){const A=function Ht(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(m);let z=r.slice(1),re="";return"@"!=z.charAt(0)&&([z,re]=function Di(c){const m=c.indexOf(".");return[c.substring(0,m),c.slice(m+1)]}(z)),this.engine.listen(this.namespaceId,A,z,re,ye=>{this.factory.scheduleListenerCallback(ye._data||-1,h,ye)})}return this.delegate.listen(m,r,h)}}let Yr=(()=>{class c extends bl{constructor(r,h,A,z){super(r.body,h,A)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(Bi.K0),l.LFG(de),l.LFG(qo),l.LFG(l.z2F))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();const Da=[{provide:ne._j,useClass:$l},{provide:qo,useFactory:function uo(){return new gr}},{provide:bl,useClass:Yr},{provide:l.FYo,useFactory:function Ls(c,m,r){return new W(c,m,r)},deps:[C.se,bl,l.R0b]}],ja=[{provide:de,useFactory:()=>new Ma},{provide:l.QbO,useValue:"BrowserAnimations"},...Da],Gl=[{provide:de,useClass:he},{provide:l.QbO,useValue:"NoopAnimations"},...Da];let Ur=(()=>{class c{static withConfig(r){return{ngModule:c,providers:r.disableAnimations?Gl:ja}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:ja,imports:[C.b2]}),c})(),Ha=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Bi.ez]}),c})();function Fo(c,m,r,h,A,z,re){try{var ye=c[z](re),We=ye.value}catch(ct){return void r(ct)}ye.done?m(We):Promise.resolve(We).then(h,A)}function xr(c){return function(){var m=this,r=arguments;return new Promise(function(h,A){var z=c.apply(m,r);function re(We){Fo(z,h,A,re,ye,"next",We)}function ye(We){Fo(z,h,A,re,ye,"throw",We)}re(void 0)})}}var Pn=H(5624),wr=H(8645);class xl extends wr.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(m){const{hasError:r,_hasValue:h,_value:A,thrownError:z,isStopped:re,_isComplete:ye}=this;r?m.error(z):(re||ye)&&(h&&m.next(A),m.complete())}next(m){this.isStopped||(this._value=m,this._hasValue=!0)}complete(){const{_hasValue:m,_value:r,_isComplete:h}=this;h||(this._isComplete=!0,m&&super.next(r),super.complete())}}var zs=H(7394),Sa=H(1374);let Cr=(()=>{class c{constructor(r){this.zone=r,this.mapCreated=new xl,this.mapLoaded=new xl,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new zs.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(r){this.zone.onStable.pipe((0,Sa.P)()).subscribe(()=>{this.createMap(r.mapOptions),this.hookEvents(r.mapEvents),this.mapEvents=r.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),r.mapOptions.terrain&&this.mapInstance.on("load",()=>{this.updateTerrain(r.mapOptions.terrain)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(r)})}updateMaxZoom(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(r)})}updateMinPitch(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(r)})}updateMaxPitch(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(r)})}updateRenderWorldCopies(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(r)})}updateScrollZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(r)})}updateMaxBounds(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(r)})}updateTerrain(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setTerrain(r)})}getTerrain(){return this.zone.runOutsideAngular(()=>this.mapInstance.getTerrain())}changeCanvasCursor(r){this.mapInstance.getCanvasContainer().style.cursor=r}queryRenderedFeatures(r,h){return this.mapInstance.queryRenderedFeatures(r,h)}panTo(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(r,h)})}move(r,h,A,z,re,ye){return this.zone.runOutsideAngular(()=>{this.mapInstance[r]({...h,zoom:A??this.mapInstance.getZoom(),center:z??this.mapInstance.getCenter(),bearing:re??this.mapInstance.getBearing(),pitch:ye??this.mapInstance.getPitch()})})}addLayer(r,h,A){this.zone.runOutsideAngular(()=>{Object.keys(r.layerOptions).forEach(z=>{void 0===r.layerOptions[z]&&delete r.layerOptions[z]}),this.mapInstance.addLayer(r.layerOptions,A),h&&(r.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerClick.emit(z)})}),r.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerDblClick.emit(z)})}),r.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerMouseDown.emit(z)})}),r.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerMouseUp.emit(z)})}),r.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerMouseEnter.emit(z)})}),r.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerMouseLeave.emit(z)})}),r.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerMouseMove.emit(z)})}),r.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerMouseOver.emit(z)})}),r.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerMouseOut.emit(z)})}),r.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerContextMenu.emit(z)})}),r.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerTouchStart.emit(z)})}),r.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerTouchEnd.emit(z)})}),r.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",r.layerOptions.id,z=>{this.zone.run(()=>{r.layerEvents.layerTouchCancel.emit(z)})}))})}removeLayer(r){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(r)&&this.mapInstance.removeLayer(r)})}addMarker(r){const h={offset:r.markersOptions.offset,anchor:r.markersOptions.anchor,draggable:!!r.markersOptions.draggable,rotationAlignment:r.markersOptions.rotationAlignment,pitchAlignment:r.markersOptions.pitchAlignment,clickTolerance:r.markersOptions.clickTolerance};r.markersOptions.element.childNodes.length>0&&(h.element=r.markersOptions.element);const A=new Pn.Marker(h);return r.markersEvents.markerDragStart.observers.length&&A.on("dragstart",re=>{if(re){const{target:ye}=re;this.zone.run(()=>{r.markersEvents.markerDragStart.emit(ye)})}}),r.markersEvents.markerDrag.observers.length&&A.on("drag",re=>{if(re){const{target:ye}=re;this.zone.run(()=>{r.markersEvents.markerDrag.emit(ye)})}}),r.markersEvents.markerDragEnd.observers.length&&A.on("dragend",re=>{if(re){const{target:ye}=re;this.zone.run(()=>{r.markersEvents.markerDragEnd.emit(ye)})}}),A.setLngLat(r.markersOptions.feature?r.markersOptions.feature.geometry.coordinates:r.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(A.addTo(this.mapInstance),A))}removeMarker(r){this.markersToRemove.push(r)}createPopup(r,h){return this.zone.runOutsideAngular(()=>{Object.keys(r.popupOptions).forEach(z=>void 0===r.popupOptions[z]&&delete r.popupOptions[z]);const A=new Pn.Popup(r.popupOptions);return A.setDOMContent(h),r.popupEvents.popupClose.observers.length&&A.on("close",()=>{this.zone.run(()=>{r.popupEvents.popupClose.emit()})}),r.popupEvents.popupOpen.observers.length&&A.on("open",()=>{this.zone.run(()=>{r.popupEvents.popupOpen.emit()})}),A})}addPopupToMap(r,h,A=!1){return this.zone.runOutsideAngular(()=>{A&&r._listeners&&delete r._listeners.open,r.setLngLat(h),r.addTo(this.mapInstance)})}addPopupToMarker(r,h){return this.zone.runOutsideAngular(()=>{r.setPopup(h)})}removePopupFromMap(r,h=!1){h&&r._listeners&&delete r._listeners.close,this.popupsToRemove.push(r)}removePopupFromMarker(r){return this.zone.runOutsideAngular(()=>{r.setPopup(void 0)})}addControl(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(r,h)})}removeControl(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(r)})}loadAndAddImage(r,h,A){var z=this;return xr(function*(){return z.zone.runOutsideAngular(()=>new Promise((re,ye)=>{z.mapInstance.loadImage(h,(We,ct)=>{We?ye(We):(z.addImage(r,ct,A),re())})}))})()}addImage(r,h,A){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(r,h,A)})}removeImage(r){this.imageIdsToRemove.push(r)}addSource(r,h){return this.zone.runOutsideAngular(()=>{Object.keys(h).forEach(A=>void 0===h[A]&&delete h[A]),this.mapInstance.addSource(r,h)})}getSource(r){return this.mapInstance.getSource(r)}removeSource(r){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(r).forEach(h=>this.mapInstance.removeLayer(h.id)),this.mapInstance.removeSource(r)})}setAllLayerPaintProperty(r,h){return this.zone.runOutsideAngular(()=>{Object.keys(h).forEach(A=>{this.mapInstance.setPaintProperty(r,A,h[A])})})}setAllLayerLayoutProperty(r,h){return this.zone.runOutsideAngular(()=>{Object.keys(h).forEach(A=>{this.mapInstance.setLayoutProperty(r,A,h[A])})})}setLayerFilter(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(r,h)})}setLayerBefore(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(r,h)})}setLayerZoomRange(r,h,A){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(r,h||0,A||20)})}fitBounds(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(r,h)})}fitScreenCoordinates(r,h,A){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(r[0],r[1],h,A)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(r){l.R0b.assertNotInAngularZone(),Object.keys(r).forEach(A=>{void 0===r[A]&&delete r[A]}),this.mapInstance=new Pn.Map(r),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(r.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const r of this.markersToRemove)r.remove();this.markersToRemove=[]}removePopups(){for(const r of this.popupsToRemove)r.remove();this.popupsToRemove=[]}removeImages(){for(const r of this.imageIdsToRemove)this.mapInstance.removeImage(r);this.imageIdsToRemove=[]}findLayersBySourceId(r){const h=this.mapInstance.getStyle().layers;return null==h?[]:h.filter(A=>"source"in A&&A.source===r)}hookEvents(r){this.mapInstance.on("load",h=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{r.mapLoad.emit(h.target)})}),r.mapResize.observers.length&&this.mapInstance.on("resize",h=>this.zone.run(()=>{r.mapResize.emit(h)})),r.mapRemove.observers.length&&this.mapInstance.on("remove",h=>this.zone.run(()=>{r.mapRemove.emit(h)})),r.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",h=>this.zone.run(()=>{r.mapMouseDown.emit(h)})),r.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",h=>this.zone.run(()=>{r.mapMouseUp.emit(h)})),r.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",h=>this.zone.run(()=>{r.mapMouseMove.emit(h)})),r.mapClick.observers.length&&this.mapInstance.on("click",h=>this.zone.run(()=>{r.mapClick.emit(h)})),r.mapDblClick.observers.length&&this.mapInstance.on("dblclick",h=>this.zone.run(()=>{r.mapDblClick.emit(h)})),r.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",h=>this.zone.run(()=>{r.mapMouseOver.emit(h)})),r.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",h=>this.zone.run(()=>{r.mapMouseOut.emit(h)})),r.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",h=>this.zone.run(()=>{r.mapContextMenu.emit(h)})),r.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",h=>this.zone.run(()=>{r.mapTouchStart.emit(h)})),r.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",h=>this.zone.run(()=>{r.mapTouchEnd.emit(h)})),r.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",h=>this.zone.run(()=>{r.mapTouchMove.emit(h)})),r.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",h=>this.zone.run(()=>{r.mapTouchCancel.emit(h)})),r.mapWheel.observers.length&&this.mapInstance.on("wheel",h=>this.zone.run(()=>{r.mapWheel.emit(h)})),r.moveStart.observers.length&&this.mapInstance.on("movestart",h=>this.zone.run(()=>r.moveStart.emit(h))),r.move.observers.length&&this.mapInstance.on("move",h=>this.zone.run(()=>r.move.emit(h))),r.moveEnd.observers.length&&this.mapInstance.on("moveend",h=>this.zone.run(()=>r.moveEnd.emit(h))),r.mapDragStart.observers.length&&this.mapInstance.on("dragstart",h=>this.zone.run(()=>{r.mapDragStart.emit(h)})),r.mapDrag.observers.length&&this.mapInstance.on("drag",h=>this.zone.run(()=>{r.mapDrag.emit(h)})),r.mapDragEnd.observers.length&&this.mapInstance.on("dragend",h=>this.zone.run(()=>{r.mapDragEnd.emit(h)})),r.zoomStart.observers.length&&this.mapInstance.on("zoomstart",h=>this.zone.run(()=>r.zoomStart.emit(h))),r.zoomEvt.observers.length&&this.mapInstance.on("zoom",h=>this.zone.run(()=>r.zoomEvt.emit(h))),r.zoomEnd.observers.length&&this.mapInstance.on("zoomend",h=>this.zone.run(()=>r.zoomEnd.emit(h))),r.rotateStart.observers.length&&this.mapInstance.on("rotatestart",h=>this.zone.run(()=>r.rotateStart.emit(h))),r.rotate.observers.length&&this.mapInstance.on("rotate",h=>this.zone.run(()=>r.rotate.emit(h))),r.rotateEnd.observers.length&&this.mapInstance.on("rotateend",h=>this.zone.run(()=>r.rotateEnd.emit(h))),r.pitchStart.observers.length&&this.mapInstance.on("pitchstart",h=>this.zone.run(()=>r.pitchStart.emit(h))),r.pitchEvt.observers.length&&this.mapInstance.on("pitch",h=>this.zone.run(()=>r.pitchEvt.emit(h))),r.pitchEnd.observers.length&&this.mapInstance.on("pitchend",h=>this.zone.run(()=>r.pitchEnd.emit(h))),r.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",h=>this.zone.run(()=>r.boxZoomStart.emit(h))),r.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",h=>this.zone.run(()=>r.boxZoomEnd.emit(h))),r.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",h=>this.zone.run(()=>r.boxZoomCancel.emit(h))),r.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",h=>this.zone.run(()=>r.webGlContextLost.emit(h))),r.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",h=>this.zone.run(()=>r.webGlContextRestored.emit(h))),r.render.observers.length&&this.mapInstance.on("render",h=>this.zone.run(()=>r.render.emit(h))),r.mapError.observers.length&&this.mapInstance.on("error",h=>this.zone.run(()=>{r.mapError.emit(h)})),r.data.observers.length&&this.mapInstance.on("data",h=>this.zone.run(()=>r.data.emit(h))),r.styleData.observers.length&&this.mapInstance.on("styledata",h=>this.zone.run(()=>r.styleData.emit(h))),r.sourceData.observers.length&&this.mapInstance.on("sourcedata",h=>this.zone.run(()=>r.sourceData.emit(h))),r.dataLoading.observers.length&&this.mapInstance.on("dataloading",h=>this.zone.run(()=>r.dataLoading.emit(h))),r.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",h=>this.zone.run(()=>r.styleDataLoading.emit(h))),r.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",h=>this.zone.run(()=>r.sourceDataLoading.emit(h))),r.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",h=>this.zone.run(()=>r.styleImageMissing.emit(h))),r.idle.observers.length&&this.mapInstance.on("idle",h=>this.zone.run(()=>r.idle.emit(h)))}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();const Zl=["content"],Bs=["*"];class $a{constructor(m){this.container=m}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let Sr=(()=>{class c{constructor(r){this.mapService=r}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new $a(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position)}))}ngOnDestroy(){this.mapService.mapInstance.hasControl(this.control)&&this.mapService.removeControl(this.control)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-control"]],viewQuery:function(r,h){if(1&r&&l.Gf(Zl,7),2&r){let A;l.iGM(A=l.CRH())&&(h.content=A.first)}},inputs:{position:"position"},ngContentSelectors:Bs,decls:3,vars:0,consts:[[1,"maplibregl-ctrl"],["content",""]],template:function(r,h){1&r&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),c})();var ls=H(2438),jr=H(2181),Wl=H(9397),cs=H(4664),Or=H(9773),wl=H(8180),ys=H(3620);let Hr=(()=>{class c{constructor(r,h){this.mapService=r,this.zone=h,this.type="geojson",this.updateFeatureData=new wr.x,this.sub=new zs.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const r=this.mapService.mapLoaded$.subscribe(()=>{this.init();const h=(0,ls.R)(this.mapService.mapInstance,"styledata").pipe((0,jr.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(h)});this.sub.add(r)}ngOnChanges(r){if(this.sourceAdded&&((r.maxzoom&&!r.maxzoom.isFirstChange()||r.attribution&&!r.attribution.isFirstChange()||r.buffer&&!r.buffer.isFirstChange()||r.tolerance&&!r.tolerance.isFirstChange()||r.cluster&&!r.cluster.isFirstChange()||r.clusterRadius&&!r.clusterRadius.isFirstChange()||r.clusterMaxZoom&&!r.clusterMaxZoom.isFirstChange()||r.clusterMinPoints&&!r.clusterMinPoints.isFirstChange()||r.clusterProperties&&!r.clusterProperties.isFirstChange()||r.lineMetrics&&!r.lineMetrics.isFirstChange()||r.generateId&&!r.generateId.isFirstChange()||r.promoteId&&!r.promoteId.isFirstChange()||r.filter&&!r.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),r.data&&!r.data.isFirstChange())){const h=this.mapService.getSource(this.id);if(void 0===h)return;h.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(r){var h=this;return xr(function*(){const A=h.mapService.getSource(h.id);return h.zone.run(xr(function*(){return new Promise((z,re)=>{A.getClusterExpansionZoom(r,(ye,We)=>{ye?re(ye):z(We)})})}))})()}getClusterChildren(r){var h=this;return xr(function*(){const A=h.mapService.getSource(h.id);return h.zone.run(xr(function*(){return new Promise((z,re)=>{A.getClusterChildren(r,(ye,We)=>{ye?re(ye):z(We)})})}))})()}getClusterLeaves(r,h,A){var z=this;return xr(function*(){const re=z.mapService.getSource(z.id);return z.zone.run(xr(function*(){return new Promise((ye,We)=>{re.getClusterLeaves(r,h,A,(ct,$t)=>{ct?We(ct):ye($t)})})}))})()}_addFeature(r){this.data.features.push(r),this.updateFeatureData.next(void 0)}_removeFeature(r){const h=this.data,A=h.features.indexOf(r);A>-1&&h.features.splice(A,1),this.updateFeatureData.next(void 0)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const h=this.updateFeatureData.pipe((0,ys.b)(0)).subscribe(()=>{const A=this.mapService.getSource(this.id);void 0!==A&&A.setData(this.data)});this.sub.add(h),this.sourceAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[l.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})(),ha=(()=>{class c{constructor(r){this.geoJSONSourceComponent=r,this.type="Feature"}ngOnInit(){this.id||(this.id=this.geoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.geoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.geoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(r){this.feature.geometry.coordinates=r,this.geoJSONSourceComponent.updateFeatureData.next(void 0)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36((0,l.Gpc)(()=>Hr)))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})(),$r=(()=>{class c{constructor(r,h,A){this.mapService=r,this.ngZone=h,this.featureComponent=A,this.featureDragStart=new l.vpe,this.featureDragEnd=new l.vpe,this.featureDrag=new l.vpe,this.sub=new zs.w0}ngOnInit(){let r,h,A;if(!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(r=this.layer.layerMouseEnter,h=this.layer.layerMouseLeave,A=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(r,h,A)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(r,h,A){let z=!1,re=!1;this.mapService.mapCreated$.subscribe(()=>{const ye=(0,ls.R)(this.mapService.mapInstance,"mouseup"),We=r.pipe((0,jr.h)(()=>!z),(0,jr.h)(Kt=>this.filterFeature(Kt)),(0,Wl.b)(()=>{re=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,cs.w)(()=>(0,ls.R)(this.mapService.mapInstance,"mousedown").pipe((0,Or.R)(h)))),ct=We.pipe((0,cs.w)(()=>(0,ls.R)(this.mapService.mapInstance,"mousemove").pipe((0,Or.R)(ye)))),$t=We.pipe((0,cs.w)(()=>ye.pipe((0,wl.q)(1))));this.sub.add(We.subscribe(Kt=>{z=!0,this.featureDragStart.observers.length&&this.ngZone.run(()=>{this.featureDragStart.emit(Kt)})})),this.sub.add(ct.subscribe(Kt=>{A([Kt.lngLat.lng,Kt.lngLat.lat]),this.featureDrag.observers.length&&this.ngZone.run(()=>{this.featureDrag.emit(Kt)})})),this.sub.add($t.subscribe(Kt=>{z=!1,this.featureDragEnd.observers.length&&this.ngZone.run(()=>{this.featureDragEnd.emit(Kt)}),re||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(h.pipe((0,Wl.b)(()=>re=!1),(0,jr.h)(()=>!z)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(r){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(r.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(l.R0b),l.Y36(ha,9))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag"}}),c})();var $o=H(7398),Cl=H(7921);let oo=(()=>{class c{constructor(r){this.mapService=r,this.layerClick=new l.vpe,this.layerDblClick=new l.vpe,this.layerMouseDown=new l.vpe,this.layerMouseUp=new l.vpe,this.layerMouseEnter=new l.vpe,this.layerMouseLeave=new l.vpe,this.layerMouseMove=new l.vpe,this.layerMouseOver=new l.vpe,this.layerMouseOut=new l.vpe,this.layerContextMenu=new l.vpe,this.layerTouchStart=new l.vpe,this.layerTouchEnd=new l.vpe,this.layerTouchCancel=new l.vpe,this.layerAdded=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,cs.w)(()=>(0,ls.R)(this.mapService.mapInstance,"styledata").pipe((0,$o.U)(()=>!1),(0,jr.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,Cl.O)(!0)))).subscribe(r=>this.init(r))}ngOnChanges(r){this.layerAdded&&(r.paint&&!r.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,r.paint.currentValue),r.layout&&!r.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,r.layout.currentValue),r.filter&&!r.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,r.filter.currentValue),r.before&&!r.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,r.before.currentValue),(r.minzoom&&!r.minzoom.isFirstChange()||r.maxzoom&&!r.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&(this.mapService.removeLayer(this.id),void 0!==this.sourceIdAdded&&this.mapService.getSource(this.sourceIdAdded)&&this.mapService.removeSource(this.sourceIdAdded)),this.sub&&this.sub.unsubscribe()}init(r){const h={layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel}};this.removeSource&&"string"!=typeof this.source&&void 0===this.mapService.getSource(this.id)&&(this.sourceIdAdded=this.id),this.mapService.addLayer(h,r,this.before),void 0!==this.sourceIdAdded&&void 0===this.mapService.getSource(this.sourceIdAdded)&&(this.sourceIdAdded=void 0),this.layerAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",removeSource:"removeSource",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel"},features:[l.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2}),c})(),El=(()=>{class c{constructor(r,h){this.mapService=r,this.zone=h,this.imageError=new l.vpe,this.imageLoaded=new l.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,cs.w)(()=>(0,ls.R)(this.mapService.mapInstance,"styledata").pipe((0,Cl.O)(void 0),(0,jr.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(r){(r.data&&!r.data.isFirstChange()||r.options&&!r.options.isFirstChange()||r.url&&!r.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var r=this;return xr(function*(){if(r.isAdding=!0,r.data)r.mapService.addImage(r.id,r.data,r.options),r.isAdded=!0,r.isAdding=!1;else if(r.url)try{yield r.mapService.loadAndAddImage(r.id,r.url,r.options),r.isAdded=!0,r.isAdding=!1,r.zone.run(()=>{r.imageLoaded.emit()})}catch(h){r.zone.run(()=>{r.imageError.emit(h)})}})()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded"},features:[l.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2}),c})(),Ga=(()=>{class c{constructor(r){this.mapService=r,this.type="vector",this.sourceAdded=!1,this.sub=new zs.w0}ngOnInit(){const r=this.mapService.mapLoaded$.subscribe(()=>{this.init();const h=(0,ls.R)(this.mapService.mapInstance,"styledata").pipe((0,jr.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(h)});this.sub.add(r)}ngOnChanges(r){if(this.sourceAdded)if(r.bounds&&!r.bounds.isFirstChange()||r.scheme&&!r.scheme.isFirstChange()||r.minzoom&&!r.minzoom.isFirstChange()||r.maxzoom&&!r.maxzoom.isFirstChange()||r.attribution&&!r.attribution.isFirstChange()||r.promoteId&&!r.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(r.url&&!r.url.isFirstChange()||r.tiles&&!r.tiles.isFirstChange()){const h=this.mapService.getSource(this.id);if(void 0===h)return;r.url&&this.url&&h.setUrl(this.url),r.tiles&&this.tiles&&h.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[l.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})(),zi=(()=>{class c{constructor(r){this.mapService=r,this.type="image"}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(r){if(void 0===this.sourceId)return;const h=this.mapService.getSource(this.sourceId);void 0!==h&&h.updateImage({url:void 0===r.url?void 0:this.url,coordinates:void 0===r.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[l.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})(),Xo=(()=>{class c{constructor(r){this.mapService=r,this.type="raster-dem",this.sourceAdded=!1,this.sub=new zs.w0}ngOnInit(){const r=this.mapService.mapLoaded$.subscribe(()=>{this.init();const h=(0,ls.R)(this.mapService.mapInstance,"styledata").pipe((0,jr.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(h)});this.sub.add(r)}ngOnChanges(r){this.sourceAdded&&(r.url&&!r.url.isFirstChange()||r.tiles&&!r.tiles.isFirstChange()||r.bounds&&!r.bounds.isFirstChange()||r.minzoom&&!r.minzoom.isFirstChange()||r.maxzoom&&!r.maxzoom.isFirstChange()||r.tileSize&&!r.tileSize.isFirstChange()||r.attribution&&!r.attribution.isFirstChange()||r.encoding&&!r.encoding.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize,attribution:this.attribution,encoding:this.encoding}),this.sourceAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-raster-dem-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize",attribution:"attribution",encoding:"encoding"},features:[l.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})();const Us=["content"],_r=["*"];let mi=(()=>{class c{constructor(r){this.mapService=r,this.markerDragStart=new l.vpe,this.markerDragEnd=new l.vpe,this.markerDrag=new l.vpe}ngOnInit(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(r){r.lngLat&&!r.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),r.feature&&!r.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),r.draggable&&!r.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),r.popupShown&&!r.popupShown.isFirstChange()&&(r.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),r.pitchAlignment&&!r.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(r.pitchAlignment.currentValue),r.rotationAlignment&&!r.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(r.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(r){this.markerInstance.setLngLat(r)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-marker"]],viewQuery:function(r,h){if(1&r&&l.Gf(Us,7),2&r){let A;l.iGM(A=l.CRH())&&(h.content=A.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},features:[l.TTD],ngContentSelectors:_r,decls:3,vars:2,consts:[["content",""]],template:function(r,h){1&r&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA()),2&r&&l.Tol(h.className)},encapsulation:2,changeDetection:0}),c})();const F=["content"],Q=["*"];let $=(()=>{class c{constructor(r){this.mapService=r,this.popupClose=new l.vpe,this.popupOpen=new l.vpe}ngOnInit(){if(this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(r){if(r.feature&&!r.feature.isFirstChange()){const h=r.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const A=this.createPopup();this.mapService.addPopupToMap(A,h,this.popupInstance.isOpen()),this.popupInstance=A}if(r.lngLat&&!r.lngLat.isFirstChange()&&this.popupInstance.setLngLat(this.lngLat),r.marker&&!r.marker.isFirstChange()){const h=r.marker.previousValue;h.markerInstance&&this.mapService.removePopupFromMarker(h.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}r.offset&&!r.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(r){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(r,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,r)}})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-popup"]],viewQuery:function(r,h){if(1&r&&l.Gf(F,7),2&r){let A;l.iGM(A=l.CRH())&&(h.content=A.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},features:[l.TTD],ngContentSelectors:Q,decls:3,vars:0,consts:[["content",""]],template:function(r,h){1&r&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),c})(),fe=(()=>{class c{onFullscreen(){this.mapService.mapInstance.resize()}constructor(r,h){this.mapService=r,this.controlComponent=h}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new Pn.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(Sr,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglFullscreen",""]],hostBindings:function(r,h){1&r&&l.NdJ("webkitfullscreenchange",function(z){return h.onFullscreen(z.target)},!1,l.Jf7)},inputs:{container:"container"}}),c})(),Ye=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h,this.geolocate=new l.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation};Object.keys(r).forEach(h=>{void 0===r[h]&&delete r[h]}),this.controlComponent.control=new Pn.GeolocateControl(r),this.controlComponent.control.on("geolocate",h=>{this.geolocate.emit(h)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(Sr,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),c})(),It=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.showCompass&&(r.showCompass=this.showCompass),void 0!==this.showZoom&&(r.showZoom=this.showZoom),null!=this.visualizePitch&&(r.visualizePitch=this.visualizePitch),this.controlComponent.control=new Pn.NavigationControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(Sr,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom",visualizePitch:"visualizePitch"}}),c})(),Wt=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.compact&&(r.compact=this.compact),void 0!==this.customAttribution&&(r.customAttribution=this.customAttribution),this.controlComponent.control=new Pn.AttributionControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(Sr,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),c})(),Wi=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h}ngOnChanges(r){r.unit&&!r.unit.isFirstChange()&&this.controlComponent.control.setUnit(r.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.maxWidth&&(r.maxWidth=this.maxWidth),void 0!==this.unit&&(r.unit=this.unit),this.controlComponent.control=new Pn.ScaleControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(Sr,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l.TTD]}),c})();var er=H(3019);function Ln(c,m){1&c&&l.GkF(0)}const Nn=function(c){return{$implicit:c}};function En(c,m){if(1&c&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,Ln,1,0,"ng-container",4),l.qZA(),l.BQk()),2&c){const r=l.oxw().$implicit,h=l.oxw();l.xp6(1),l.Q6J("feature",r),l.xp6(1),l.Q6J("ngTemplateOutlet",h.clusterPointTpl)("ngTemplateOutletContext",l.VKq(3,Nn,r))}}function Zn(c,m){1&c&&l.GkF(0)}function On(c,m){if(1&c&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,Zn,1,0,"ng-container",4),l.qZA(),l.BQk()),2&c){const r=l.oxw().$implicit,h=l.oxw();l.xp6(1),l.Q6J("feature",r),l.xp6(1),l.Q6J("ngTemplateOutlet",h.pointTpl)("ngTemplateOutletContext",l.VKq(3,Nn,r))}}function Gr(c,m){if(1&c&&(l.ynx(0),l.YNc(1,En,3,5,"ng-container",2),l.YNc(2,On,3,5,"ng-container",2),l.BQk()),2&c){const r=m.$implicit;l.xp6(1),l.Q6J("ngIf",r.properties.cluster),l.xp6(1),l.Q6J("ngIf",!r.properties.cluster)}}const js=function(){return{"circle-radius":0}};let Yi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["ng-template","mglPoint",""]]}),c})(),vs=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["ng-template","mglClusterPoint",""]]}),c})(),bs=0,tr=(()=>{class c{constructor(r,h,A){this.mapService=r,this.changeDetectorRef=h,this.ngZone=A,this.layerId="mgl-markers-for-clusters-"+bs++,this.sub=new zs.w0}ngAfterContentInit(){const h=this.mapService.mapCreated$.pipe((0,cs.w)(()=>(0,ls.R)(this.mapService.mapInstance,"data").pipe((0,jr.h)(A=>A.sourceId===this.source&&"metadata"!==A.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,cs.w)(()=>(0,er.T)((0,ls.R)(this.mapService.mapInstance,"move"),(0,ls.R)(this.mapService.mapInstance,"moveend")).pipe((0,Cl.O)(void 0)))).subscribe(()=>{this.ngZone.run(()=>{this.updateCluster()})});this.sub.add(h)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(r,h){return h.id}updateCluster(){const r={layers:[this.layerId]};this.pointTpl||(r.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(r),this.changeDetectorRef.markForCheck()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(l.sBO),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(r,h,A){if(1&r&&(l.Suo(A,Yi,5,l.Rgc),l.Suo(A,vs,5,l.Rgc)),2&r){let z;l.iGM(z=l.CRH())&&(h.pointTpl=z.first),l.iGM(z=l.CRH())&&(h.clusterPointTpl=z.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,h){1&r&&(l._UZ(0,"mgl-layer",0),l.YNc(1,Gr,3,2,"ng-container",1)),2&r&&(l.Q6J("id",h.layerId)("source",h.source)("paint",l.DdM(5,js)),l.xp6(1),l.Q6J("ngForOf",h.clusterPoints)("ngForTrackBy",h.trackByClusterPoint))},dependencies:[Bi.sg,Bi.O5,Bi.tP,oo,mi],encapsulation:2,changeDetection:0}),c})(),ir=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new Pn.TerrainControl({source:this.source,exaggeration:this.exaggeration??1}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr),l.Y36(Sr,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglTerrain",""]],inputs:{source:"source",exaggeration:"exaggeration"}}),c})();const ds=["container"];let hn=(()=>{class c{get mapInstance(){return this.mapService.mapInstance}constructor(r){this.mapService=r,this.movingMethod="flyTo",this.mapResize=new l.vpe,this.mapRemove=new l.vpe,this.mapMouseDown=new l.vpe,this.mapMouseUp=new l.vpe,this.mapMouseMove=new l.vpe,this.mapClick=new l.vpe,this.mapDblClick=new l.vpe,this.mapMouseOver=new l.vpe,this.mapMouseOut=new l.vpe,this.mapContextMenu=new l.vpe,this.mapTouchStart=new l.vpe,this.mapTouchEnd=new l.vpe,this.mapTouchMove=new l.vpe,this.mapTouchCancel=new l.vpe,this.mapWheel=new l.vpe,this.moveStart=new l.vpe,this.move=new l.vpe,this.moveEnd=new l.vpe,this.mapDragStart=new l.vpe,this.mapDrag=new l.vpe,this.mapDragEnd=new l.vpe,this.zoomStart=new l.vpe,this.zoomEvt=new l.vpe,this.zoomEnd=new l.vpe,this.rotateStart=new l.vpe,this.rotate=new l.vpe,this.rotateEnd=new l.vpe,this.pitchStart=new l.vpe,this.pitchEvt=new l.vpe,this.pitchEnd=new l.vpe,this.boxZoomStart=new l.vpe,this.boxZoomEnd=new l.vpe,this.boxZoomCancel=new l.vpe,this.webGlContextLost=new l.vpe,this.webGlContextRestored=new l.vpe,this.mapLoad=new l.vpe,this.idle=new l.vpe,this.render=new l.vpe,this.mapError=new l.vpe,this.data=new l.vpe,this.styleData=new l.vpe,this.sourceData=new l.vpe,this.dataLoading=new l.vpe,this.styleDataLoading=new l.vpe,this.sourceDataLoading=new l.vpe,this.styleImageMissing=new l.vpe}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,terrain:this.terrain},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(r){var h=this;return xr(function*(){yield h.mapService.mapCreated$.toPromise(),r.cursorStyle&&!r.cursorStyle.isFirstChange()&&h.mapService.changeCanvasCursor(r.cursorStyle.currentValue),r.minZoom&&!r.minZoom.isFirstChange()&&h.mapService.updateMinZoom(r.minZoom.currentValue),r.maxZoom&&!r.maxZoom.isFirstChange()&&h.mapService.updateMaxZoom(r.maxZoom.currentValue),r.minPitch&&!r.minPitch.isFirstChange()&&h.mapService.updateMinPitch(r.minPitch.currentValue),r.maxPitch&&!r.maxPitch.isFirstChange()&&h.mapService.updateMaxPitch(r.maxPitch.currentValue),r.renderWorldCopies&&!r.renderWorldCopies.isFirstChange()&&h.mapService.updateRenderWorldCopies(r.renderWorldCopies.currentValue),r.scrollZoom&&!r.scrollZoom.isFirstChange()&&h.mapService.updateScrollZoom(r.scrollZoom.currentValue),r.dragRotate&&!r.dragRotate.isFirstChange()&&h.mapService.updateDragRotate(r.dragRotate.currentValue),r.touchPitch&&!r.touchPitch.isFirstChange()&&h.mapService.updateTouchPitch(r.touchPitch.currentValue),r.touchZoomRotate&&!r.touchZoomRotate.isFirstChange()&&h.mapService.updateTouchZoomRotate(r.touchZoomRotate.currentValue),r.doubleClickZoom&&!r.doubleClickZoom.isFirstChange()&&h.mapService.updateDoubleClickZoom(r.doubleClickZoom.currentValue),r.keyboard&&!r.keyboard.isFirstChange()&&h.mapService.updateKeyboard(r.keyboard.currentValue),r.dragPan&&!r.dragPan.isFirstChange()&&h.mapService.updateDragPan(r.dragPan.currentValue),r.boxZoom&&!r.boxZoom.isFirstChange()&&h.mapService.updateBoxZoom(r.boxZoom.currentValue),r.style&&!r.style.isFirstChange()&&h.mapService.updateStyle(r.style.currentValue),r.maxBounds&&!r.maxBounds.isFirstChange()&&h.mapService.updateMaxBounds(r.maxBounds.currentValue),r.fitBounds&&r.fitBounds.currentValue&&!r.fitBounds.isFirstChange()&&h.mapService.fitBounds(r.fitBounds.currentValue,h.fitBoundsOptions),r.fitScreenCoordinates&&r.fitScreenCoordinates.currentValue&&((h.center||h.zoom||h.pitch||h.fitBounds)&&r.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-maplibre-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),h.mapService.fitScreenCoordinates(r.fitScreenCoordinates.currentValue,h.bearing?h.bearing[0]:0,h.movingOptions)),!h.centerWithPanTo||!r.center||r.center.isFirstChange()||r.zoom||r.bearing||r.pitch?(r.center&&!r.center.isFirstChange()||r.zoom&&!r.zoom.isFirstChange()||r.bearing&&!r.bearing.isFirstChange()&&!r.fitScreenCoordinates||r.pitch&&!r.pitch.isFirstChange())&&h.mapService.move(h.movingMethod,h.movingOptions,r.zoom&&h.zoom?h.zoom[0]:void 0,r.center?h.center:void 0,r.bearing&&h.bearing?h.bearing[0]:void 0,r.pitch&&h.pitch?h.pitch[0]:void 0):h.mapService.panTo(h.center,h.panToOptions),r.terrain&&!r.terrain.isFirstChange()&&h.mapService.updateTerrain(r.terrain.currentValue)})()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cr))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-map"]],viewQuery:function(r,h){if(1&r&&l.Gf(ds,7),2&r){let A;l.iGM(A=l.CRH())&&(h.mapContainer=A.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",terrain:"terrain",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[l._Bn([Cr]),l.TTD],decls:2,vars:0,consts:[["container",""]],template:function(r,h){1&r&&l._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),c})();var Za=H(877);const Xc="object"==typeof global&&global&&global.Object===Object&&global;var Jc="object"==typeof self&&self&&self.Object===Object&&self;const Jo=Xc||Jc||Function("return this")(),pi=Jo.Symbol;var sl=Object.prototype,Hs=sl.hasOwnProperty,xo=sl.toString,So=pi?pi.toStringTag:void 0;var al=Object.prototype.toString;var us=pi?pi.toStringTag:void 0;const xs=function ta(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":us&&us in Object(c)?function Yl(c){var m=Hs.call(c,So),r=c[So];try{c[So]=void 0;var h=!0}catch{}var A=xo.call(c);return h&&(m?c[So]=r:delete c[So]),A}(c):function Nr(c){return al.call(c)}(c)},pa=function $s(c){var m=typeof c;return null!=c&&("object"==m||"function"==m)},Tl=function Kl(c){if(!pa(c))return!1;var m=xs(c);return"[object Function]"==m||"[object GeneratorFunction]"==m||"[object AsyncFunction]"==m||"[object Proxy]"==m};var c,Aa=Jo["__core-js_shared__"],Il=(c=/[^.]+$/.exec(Aa&&Aa.keys&&Aa.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";var Jn=Function.prototype.toString;const i=function E(c){if(null!=c){try{return Jn.call(c)}catch{}try{return c+""}catch{}}return""};var _=/^\[object .+?Constructor\]$/,y=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const k=function D(c){return!(!pa(c)||function Al(c){return!!Il&&Il in c}(c))&&(Tl(c)?y:_).test(i(c))},oe=function ee(c,m){var r=function R(c,m){return c?.[m]}(c,m);return k(r)?r:void 0};var Ee=function(){try{var c=oe(Object,"defineProperty");return c({},"",{}),c}catch{}}();const Ce=Ee,yt=function nt(c,m,r){"__proto__"==m&&Ce?Ce(c,m,{configurable:!0,enumerable:!0,value:r,writable:!0}):c[m]=r},gt=function $e(c,m,r,h){for(var A=-1,z=null==c?0:c.length;++A<z;){var re=c[A];m(h,re,r(re),c)}return h};var Zt=function kt(c){return function(m,r,h){for(var A=-1,z=Object(m),re=h(m),ye=re.length;ye--;){var We=re[c?ye:++A];if(!1===r(z[We],We,z))break}return m}}();const ri=Zt,vn=function Ui(c){return null!=c&&"object"==typeof c},ki=function en(c){return vn(c)&&"[object Arguments]"==xs(c)};var rr=Object.prototype,Kn=rr.hasOwnProperty,Tn=rr.propertyIsEnumerable,dn=ki(function(){return arguments}())?ki:function(c){return vn(c)&&Kn.call(c,"callee")&&!Tn.call(c,"callee")};const kr=dn,or=Array.isArray;var ia="object"==typeof exports&&exports&&!exports.nodeType&&exports,fa=ia&&"object"==typeof module&&module&&!module.nodeType&&module,ka=fa&&fa.exports===ia?Jo.Buffer:void 0;const ho=(ka?ka.isBuffer:void 0)||function Qo(){return!1};var Co=/^(?:0|[1-9]\d*)$/;const sr=function Zo(c,m){var r=typeof c;return!!(m=m??9007199254740991)&&("number"==r||"symbol"!=r&&Co.test(c))&&c>-1&&c%1==0&&c<m},Jl=function Zs(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991};var so={};so["[object Float32Array]"]=so["[object Float64Array]"]=so["[object Int8Array]"]=so["[object Int16Array]"]=so["[object Int32Array]"]=so["[object Uint8Array]"]=so["[object Uint8ClampedArray]"]=so["[object Uint16Array]"]=so["[object Uint32Array]"]=!0,so["[object Arguments]"]=so["[object Array]"]=so["[object ArrayBuffer]"]=so["[object Boolean]"]=so["[object DataView]"]=so["[object Date]"]=so["[object Error]"]=so["[object Function]"]=so["[object Map]"]=so["[object Number]"]=so["[object Object]"]=so["[object RegExp]"]=so["[object Set]"]=so["[object String]"]=so["[object WeakMap]"]=!1;const pc=function No(c){return function(m){return c(m)}};var ku="object"==typeof exports&&exports&&!exports.nodeType&&exports,mo=ku&&"object"==typeof module&&module&&!module.nodeType&&module,Oc=mo&&mo.exports===ku&&Xc.process;const ws=function(){try{return mo&&mo.require&&mo.require("util").types||Oc&&Oc.binding&&Oc.binding("util")}catch{}}();var Rc=ws&&ws.isTypedArray;const rd=Rc?pc(Rc):function Nf(c){return vn(c)&&Jl(c.length)&&!!so[xs(c)]};var $h=Object.prototype.hasOwnProperty;const Ou=function zf(c,m){var r=or(c),h=!r&&kr(c),A=!r&&!h&&ho(c),z=!r&&!h&&!A&&rd(c),re=r||h||A||z,ye=re?function ii(c,m){for(var r=-1,h=Array(c);++r<c;)h[r]=m(r);return h}(c.length,String):[],We=ye.length;for(var ct in c)(m||$h.call(c,ct))&&(!re||!("length"==ct||A&&("offset"==ct||"parent"==ct)||z&&("buffer"==ct||"byteLength"==ct||"byteOffset"==ct)||sr(ct,We)))&&ye.push(ct);return ye};var Ru=Object.prototype;const od=function ao(c){var m=c&&c.constructor;return c===("function"==typeof m&&m.prototype||Ru)},tp=function sd(c,m){return function(r){return c(m(r))}},Bf=tp(Object.keys,Object);var Uf=Object.prototype.hasOwnProperty;const dl=function np(c){return null!=c&&Jl(c.length)&&!Tl(c)},Vd=function fc(c){return dl(c)?Ou(c):function Gh(c){if(!od(c))return Bf(c);var m=[];for(var r in Object(c))Uf.call(c,r)&&"constructor"!=r&&m.push(r);return m}(c)};var rp=function Nu(c,m){return function(r,h){if(null==r)return r;if(!dl(r))return c(r,h);for(var A=r.length,z=m?A:-1,re=Object(r);(m?z--:++z<A)&&!1!==h(re[z],z,re););return r}}(function Lu(c,m){return c&&ri(c,m,Vd)});const Zh=rp,op=function ad(c,m,r,h){return Zh(c,function(A,z,re){m(h,A,r(A),re)}),h},Rl=function Br(c,m){return c===m||c!=c&&m!=m},cd=function sp(c,m){for(var r=c.length;r--;)if(Rl(c[r][0],m))return r;return-1};var jd=Array.prototype.splice;function Ql(c){var m=-1,r=null==c?0:c.length;for(this.clear();++m<r;){var h=c[m];this.set(h[0],h[1])}}Ql.prototype.clear=function ld(){this.__data__=[],this.size=0},Ql.prototype.delete=function $f(c){var m=this.__data__,r=cd(m,c);return!(r<0||(r==m.length-1?m.pop():jd.call(m,r,1),--this.size,0))},Ql.prototype.get=function Hd(c){var m=this.__data__,r=cd(m,c);return r<0?void 0:m[r][1]},Ql.prototype.has=function dd(c){return cd(this.__data__,c)>-1},Ql.prototype.set=function Gf(c,m){var r=this.__data__,h=cd(r,c);return h<0?(++this.size,r.push([c,m])):r[h][1]=m,this};const $d=Ql,Bu=oe(Jo,"Map"),Vu=oe(Object,"create");var ud=Object.prototype.hasOwnProperty;var Hu=Object.prototype.hasOwnProperty;function _c(c){var m=-1,r=null==c?0:c.length;for(this.clear();++m<r;){var h=c[m];this.set(h[0],h[1])}}_c.prototype.clear=function gc(){this.__data__=Vu?Vu(null):{},this.size=0},_c.prototype.delete=function Zd(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m},_c.prototype.get=function Xh(c){var m=this.__data__;if(Vu){var r=m[c];return"__lodash_hash_undefined__"===r?void 0:r}return ud.call(m,c)?m[c]:void 0},_c.prototype.has=function $u(c){var m=this.__data__;return Vu?void 0!==m[c]:Hu.call(m,c)},_c.prototype.set=function Wd(c,m){var r=this.__data__;return this.size+=this.has(c)?0:1,r[c]=Vu&&void 0===m?"__lodash_hash_undefined__":m,this};const hp=_c,Cs=function fp(c,m){var r=c.__data__;return function pp(c){var m=typeof c;return"string"==m||"number"==m||"symbol"==m||"boolean"==m?"__proto__"!==c:null===c}(m)?r["string"==typeof m?"string":"hash"]:r.map};function yc(c){var m=-1,r=null==c?0:c.length;for(this.clear();++m<r;){var h=c[m];this.set(h[0],h[1])}}yc.prototype.clear=function mp(){this.size=0,this.__data__={hash:new hp,map:new(Bu||$d),string:new hp}},yc.prototype.delete=function em(c){var m=Cs(this,c).delete(c);return this.size-=m?1:0,m},yc.prototype.get=function tm(c){return Cs(this,c).get(c)},yc.prototype.has=function Yd(c){return Cs(this,c).has(c)},yc.prototype.set=function Zu(c,m){var r=Cs(this,c),h=r.size;return r.set(c,m),this.size+=r.size==h?0:1,this};const Kd=yc;function Lc(c){var m=this.__data__=new $d(c);this.size=m.size}Lc.prototype.clear=function lp(){this.__data__=new $d,this.size=0},Lc.prototype.delete=function Kh(c){var m=this.__data__,r=m.delete(c);return this.size=m.size,r},Lc.prototype.get=function cp(c){return this.__data__.get(c)},Lc.prototype.has=function zu(c){return this.__data__.has(c)},Lc.prototype.set=function Wu(c,m){var r=this.__data__;if(r instanceof $d){var h=r.__data__;if(!Bu||h.length<199)return h.push([c,m]),this.size=++r.size,this;r=this.__data__=new Kd(h)}return r.set(c,m),this.size=r.size,this};const Xd=Lc;function vc(c){var m=-1,r=null==c?0:c.length;for(this.__data__=new Kd;++m<r;)this.add(c[m])}vc.prototype.add=vc.prototype.push=function rm(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this},vc.prototype.has=function Jd(c){return this.__data__.has(c)};const zo=vc,sm=function om(c,m){for(var r=-1,h=null==c?0:c.length;++r<h;)if(m(c[r],r,c))return!0;return!1},fr=function Nc(c,m){return c.has(m)},Fl=function Qd(c,m,r,h,A,z){var re=1&r,ye=c.length,We=m.length;if(ye!=We&&!(re&&We>ye))return!1;var ct=z.get(c),$t=z.get(m);if(ct&&$t)return ct==m&&$t==c;var Kt=-1,Oi=!0,Ki=2&r?new zo:void 0;for(z.set(c,m),z.set(m,c);++Kt<ye;){var Ii=c[Kt],Hi=m[Kt];if(h)var Cn=re?h(Hi,Ii,Kt,m,c,z):h(Ii,Hi,Kt,c,m,z);if(void 0!==Cn){if(Cn)continue;Oi=!1;break}if(Ki){if(!sm(m,function(qn,cr){if(!fr(Ki,cr)&&(Ii===qn||A(Ii,qn,r,h,z)))return Ki.push(cr)})){Oi=!1;break}}else if(Ii!==Hi&&!A(Ii,Hi,r,h,z)){Oi=!1;break}}return z.delete(c),z.delete(m),Oi},eu=Jo.Uint8Array,Jf=function Xf(c){var m=-1,r=Array(c.size);return c.forEach(function(h,A){r[++m]=[A,h]}),r},xp=function Qf(c){var m=-1,r=Array(c.size);return c.forEach(function(h){r[++m]=h}),r};var cm=pi?pi.prototype:void 0,tu=cm?cm.valueOf:void 0;const Ll=function eh(c,m){for(var r=-1,h=m.length,A=c.length;++r<h;)c[A+r]=m[r];return c},Nl=function xc(c,m,r){var h=m(c);return or(c)?h:Ll(h,r(c))},dm=function Vc(){return[]};var fd=Object.prototype.propertyIsEnumerable,Cp=Object.getOwnPropertySymbols,um=Cp?function(c){return null==c?[]:(c=Object(c),function Bc(c,m){for(var r=-1,h=null==c?0:c.length,A=0,z=[];++r<h;){var re=c[r];m(re,r,c)&&(z[A++]=re)}return z}(Cp(c),function(m){return fd.call(c,m)}))}:dm;const ih=um,iu=function hm(c){return Nl(c,Vd,ih)};var nu=Object.prototype.hasOwnProperty;const nh=oe(Jo,"DataView"),mm=oe(Jo,"Promise"),gd=oe(Jo,"Set"),_d=oe(Jo,"WeakMap");var yd="[object Map]",Cc="[object Promise]",oh="[object Set]",ec="[object WeakMap]",sh="[object DataView]",Sp=i(nh),ah=i(Bu),Tp=i(mm),ng=i(gd),tc=i(_d),Pa=xs;(nh&&Pa(new nh(new ArrayBuffer(1)))!=sh||Bu&&Pa(new Bu)!=yd||mm&&Pa(mm.resolve())!=Cc||gd&&Pa(new gd)!=oh||_d&&Pa(new _d)!=ec)&&(Pa=function(c){var m=xs(c),r="[object Object]"==m?c.constructor:void 0,h=r?i(r):"";if(h)switch(h){case Sp:return sh;case ah:return yd;case Tp:return Cc;case ng:return oh;case tc:return ec}return m});const ru=Pa;var Ip="[object Arguments]",Ap="[object Array]",vd="[object Object]",lh=Object.prototype.hasOwnProperty;const Pp=function kp(c,m,r,h,A,z){var re=or(c),ye=or(m),We=re?Ap:ru(c),ct=ye?Ap:ru(m),$t=(We=We==Ip?vd:We)==vd,Kt=(ct=ct==Ip?vd:ct)==vd,Oi=We==ct;if(Oi&&ho(c)){if(!ho(m))return!1;re=!0,$t=!1}if(Oi&&!$t)return z||(z=new Xd),re||rd(c)?Fl(c,m,r,h,A,z):function Ys(c,m,r,h,A,z,re){switch(r){case"[object DataView]":if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case"[object ArrayBuffer]":return!(c.byteLength!=m.byteLength||!z(new eu(c),new eu(m)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Rl(+c,+m);case"[object Error]":return c.name==m.name&&c.message==m.message;case"[object RegExp]":case"[object String]":return c==m+"";case"[object Map]":var ye=Jf;case"[object Set]":if(ye||(ye=xp),c.size!=m.size&&!(1&h))return!1;var ct=re.get(c);if(ct)return ct==m;h|=2,re.set(c,m);var $t=Fl(ye(c),ye(m),h,A,z,re);return re.delete(c),$t;case"[object Symbol]":if(tu)return tu.call(c)==tu.call(m)}return!1}(c,m,We,r,h,A,z);if(!(1&r)){var Ki=$t&&lh.call(c,"__wrapped__"),Ii=Kt&&lh.call(m,"__wrapped__");if(Ki||Ii){var Hi=Ki?c.value():c,Cn=Ii?m.value():m;return z||(z=new Xd),A(Hi,Cn,r,h,z)}}return!!Oi&&(z||(z=new Xd),function Uc(c,m,r,h,A,z){var re=1&r,ye=iu(c),We=ye.length;if(We!=iu(m).length&&!re)return!1;for(var Kt=We;Kt--;){var Oi=ye[Kt];if(!(re?Oi in m:nu.call(m,Oi)))return!1}var Ki=z.get(c),Ii=z.get(m);if(Ki&&Ii)return Ki==m&&Ii==c;var Hi=!0;z.set(c,m),z.set(m,c);for(var Cn=re;++Kt<We;){var qn=c[Oi=ye[Kt]],cr=m[Oi];if(h)var fo=re?h(cr,qn,Oi,m,c,z):h(qn,cr,Oi,c,m,z);if(!(void 0===fo?qn===cr||A(qn,cr,r,h,z):fo)){Hi=!1;break}Cn||(Cn="constructor"==Oi)}if(Hi&&!Cn){var Zr=c.constructor,Ra=m.constructor;Zr!=Ra&&"constructor"in c&&"constructor"in m&&!("function"==typeof Zr&&Zr instanceof Zr&&"function"==typeof Ra&&Ra instanceof Ra)&&(Hi=!1)}return z.delete(c),z.delete(m),Hi}(c,m,r,h,A,z))},gm=function fm(c,m,r,h,A){return c===m||(null==c||null==m||!vn(c)&&!vn(m)?c!=c&&m!=m:Pp(c,m,r,h,fm,A))},ra=function _m(c){return c==c&&!pa(c)},ou=function sg(c,m){return function(r){return null!=r&&r[c]===m&&(void 0!==m||c in Object(r))}},ag=function uh(c){var m=function dh(c){for(var m=Vd(c),r=m.length;r--;){var h=m[r],A=c[h];m[r]=[h,A,ra(A)]}return m}(c);return 1==m.length&&m[0][2]?ou(m[0][0],m[0][1]):function(r){return r===c||function xd(c,m,r,h){var A=r.length,z=A,re=!h;if(null==c)return!z;for(c=Object(c);A--;){var ye=r[A];if(re&&ye[2]?ye[1]!==c[ye[0]]:!(ye[0]in c))return!1}for(;++A<z;){var We=(ye=r[A])[0],ct=c[We],$t=ye[1];if(re&&ye[2]){if(void 0===ct&&!(We in c))return!1}else{var Kt=new Xd;if(h)var Oi=h(ct,$t,We,c,m,Kt);if(!(void 0===Oi?gm($t,ct,3,h,Kt):Oi))return!1}}return!0}(r,c,m)}},hh=function Op(c){return"symbol"==typeof c||vn(c)&&"[object Symbol]"==xs(c)};var Mc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rp=/^\w*$/;const su=function Fp(c,m){if(or(c))return!1;var r=typeof c;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=c&&!hh(c))||Rp.test(c)||!Mc.test(c)||null!=m&&c in Object(m)};function mh(c,m){if("function"!=typeof c||null!=m&&"function"!=typeof m)throw new TypeError("Expected a function");var r=function(){var h=arguments,A=m?m.apply(this,h):h[0],z=r.cache;if(z.has(A))return z.get(A);var re=c.apply(this,h);return r.cache=z.set(A,re)||z,re};return r.cache=new(mh.Cache||Kd),r}mh.Cache=Kd;const ym=mh;var ph=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bm=/\\(\\)?/g,lu=function qa(c){var m=ym(c,function(h){return 500===r.size&&r.clear(),h}),r=m.cache;return m}(function(c){var m=[];return 46===c.charCodeAt(0)&&m.push(""),c.replace(ph,function(r,h,A,z){m.push(A?z.replace(bm,"$1"):h||r)}),m});const fh=lu;var xm=pi?pi.prototype:void 0,ug=xm?xm.toString:void 0;const Hc=function wd(c){if("string"==typeof c)return c;if(or(c))return function gh(c,m){for(var r=-1,h=null==c?0:c.length,A=Array(h);++r<h;)A[r]=m(c[r],r,c);return A}(c,wd)+"";if(hh(c))return ug?ug.call(c):"";var m=c+"";return"0"==m&&1/c==-1/0?"-0":m},_h=function Np(c,m){return or(c)?c:su(c,m)?[c]:fh(function Er(c){return null==c?"":Hc(c)}(c))},cu=function Cm(c){if("string"==typeof c||hh(c))return c;var m=c+"";return"0"==m&&1/c==-1/0?"-0":m},du=function yh(c,m){for(var r=0,h=(m=_h(m,c)).length;null!=c&&r<h;)c=c[cu(m[r++])];return r&&r==h?c:void 0},zp=function uu(c,m){return null!=c&&m in Object(c)},ic=function Cd(c,m){return null!=c&&function hu(c,m,r){for(var h=-1,A=(m=_h(m,c)).length,z=!1;++h<A;){var re=cu(m[h]);if(!(z=null!=c&&r(c,re)))break;c=c[re]}return z||++h!=A?z:!!(A=null==c?0:c.length)&&Jl(A)&&sr(re,A)&&(or(c)||kr(c))}(c,m,zp)},o=function xh(c,m){return su(c)&&ra(m)?ou(cu(c),m):function(r){var h=function vh(c,m,r){var h=null==c?void 0:du(c,m);return void 0===h?r:h}(r,c);return void 0===h&&h===m?ic(r,c):gm(m,h,3)}},a=function t(c){return c},N=function O(c){return su(c)?function p(c){return function(m){return m?.[c]}}(cu(c)):function T(c){return function(m){return du(m,c)}}(c)};var be=Object.prototype.hasOwnProperty,Be=function te(c,m){return function(r,h){var A=or(r)?gt:op,z=m?m():{};return A(r,c,function Z(c){return"function"==typeof c?c:null==c?a:"object"==typeof c?or(c)?o(c[0],c[1]):ag(c):N(c)}(h),z)}}(function(c,m,r){be.call(c,r)?c[r].push(m):yt(c,r,[m])});const Ke=Be;var St=Object.prototype.hasOwnProperty;const Jt=function At(c,m,r){var h=c[m];(!St.call(c,m)||!Rl(h,r)||void 0===r&&!(m in c))&&yt(c,m,r)},Li=function Fi(c,m,r,h){var A=!r;r||(r={});for(var z=-1,re=m.length;++z<re;){var ye=m[z],We=h?h(r[ye],c[ye],ye,r,c):void 0;void 0===We&&(We=c[ye]),A?yt(r,ye,We):Jt(r,ye,We)}return r};var ci=Object.prototype.hasOwnProperty;const Gi=function Xi(c){if(!pa(c))return function xi(c){var m=[];if(null!=c)for(var r in Object(c))m.push(r);return m}(c);var m=od(c),r=[];for(var h in c)"constructor"==h&&(m||!ci.call(c,h))||r.push(h);return r},Tr=function Mn(c){return dl(c)?Ou(c,!0):Gi(c)};var ga="object"==typeof exports&&exports&&!exports.nodeType&&exports,es=ga&&"object"==typeof module&&module&&!module.nodeType&&module,ko=es&&es.exports===ga?Jo.Buffer:void 0,ts=ko?ko.allocUnsafe:void 0;const hs=tp(Object.getPrototypeOf,Object);var ms=Object.getOwnPropertySymbols?function(c){for(var m=[];c;)Ll(m,ih(c)),c=hs(c);return m}:dm;const Rn=ms,Oa=function Ds(c){return Nl(c,Tr,Rn)};var Ya=Object.prototype.hasOwnProperty;const Ts=function Ss(c){var m=new c.constructor(c.byteLength);return new eu(m).set(new eu(c)),m};var Bp=/\w*$/;var zl=pi?pi.prototype:void 0,Dm=zl?zl.valueOf:void 0;const rC=function nC(c,m,r){var h=c.constructor;switch(m){case"[object ArrayBuffer]":return Ts(c);case"[object Boolean]":case"[object Date]":return new h(+c);case"[object DataView]":return function _a(c,m){var r=m?Ts(c.buffer):c.buffer;return new c.constructor(r,c.byteOffset,c.byteLength)}(c,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function Eh(c,m){var r=m?Ts(c.buffer):c.buffer;return new c.constructor(r,c.byteOffset,c.length)}(c,r);case"[object Map]":case"[object Set]":return new h;case"[object Number]":case"[object String]":return new h(c);case"[object RegExp]":return function wh(c){var m=new c.constructor(c.source,Bp.exec(c));return m.lastIndex=c.lastIndex,m}(c);case"[object Symbol]":return function Ch(c){return Dm?Object(Dm.call(c)):{}}(c)}};var hg=Object.create,B_=function(){function c(){}return function(m){if(!pa(m))return{};if(hg)return hg(m);c.prototype=m;var r=new c;return c.prototype=void 0,r}}();const oC=B_;var zn=ws&&ws.isMap;const G_=zn?pc(zn):function j_(c){return vn(c)&&"[object Map]"==ru(c)};var W_=ws&&ws.isSet;const q_=W_?pc(W_):function t0(c){return vn(c)&&"[object Set]"==ru(c)};var K_="[object Arguments]",_u="[object Function]",yu="[object Object]",lo={};lo[K_]=lo["[object Array]"]=lo["[object ArrayBuffer]"]=lo["[object DataView]"]=lo["[object Boolean]"]=lo["[object Date]"]=lo["[object Float32Array]"]=lo["[object Float64Array]"]=lo["[object Int8Array]"]=lo["[object Int16Array]"]=lo["[object Int32Array]"]=lo["[object Map]"]=lo["[object Number]"]=lo[yu]=lo["[object RegExp]"]=lo["[object Set]"]=lo["[object String]"]=lo["[object Symbol]"]=lo["[object Uint8Array]"]=lo["[object Uint8ClampedArray]"]=lo["[object Uint16Array]"]=lo["[object Uint32Array]"]=!0,lo["[object Error]"]=lo[_u]=lo["[object WeakMap]"]=!1;const p0=function Am(c,m,r,h,A,z){var re,ye=1&m,We=2&m,ct=4&m;if(r&&(re=A?r(c,h,A,z):r(c)),void 0!==re)return re;if(!pa(c))return c;var $t=or(c);if($t){if(re=function Dc(c){var m=c.length,r=new c.constructor(m);return m&&"string"==typeof c[0]&&Ya.call(c,"index")&&(r.index=c.index,r.input=c.input),r}(c),!ye)return function Eo(c,m){var r=-1,h=c.length;for(m||(m=Array(h));++r<h;)m[r]=c[r];return m}(c,re)}else{var Kt=ru(c),Oi=Kt==_u||"[object GeneratorFunction]"==Kt;if(ho(c))return function oa(c,m){if(m)return c.slice();var r=c.length,h=ts?ts(r):new c.constructor(r);return c.copy(h),h}(c,ye);if(Kt==yu||Kt==K_||Oi&&!A){if(re=We||Oi?{}:function V_(c){return"function"!=typeof c.constructor||od(c)?{}:oC(hs(c))}(c),!ye)return We?function Ks(c,m){return Li(c,Rn(c),m)}(c,function Rr(c,m){return c&&Li(m,Tr(m),c)}(re,c)):function Ms(c,m){return Li(c,ih(c),m)}(c,function Pi(c,m){return c&&Li(m,Vd(m),c)}(re,c))}else{if(!lo[Kt])return A?c:{};re=rC(c,Kt,ye)}}z||(z=new Xd);var Ki=z.get(c);if(Ki)return Ki;z.set(c,re),q_(c)?c.forEach(function(Cn){re.add(Am(Cn,m,r,Cn,c,z))}):G_(c)&&c.forEach(function(Cn,qn){re.set(qn,Am(Cn,m,r,qn,c,z))});var Hi=$t?void 0:(ct?We?Oa:iu:We?Tr:Vd)(c);return function tt(c,m){for(var r=-1,h=null==c?0:c.length;++r<h&&!1!==m(c[r],r,c););}(Hi||c,function(Cn,qn){Hi&&(Cn=c[qn=Cn]),Jt(re,qn,Am(Cn,m,r,qn,c,z))}),re},y0=c=>"object"==typeof c&&null!=c&&1===c.nodeType,Zp=(c,m)=>(!m||"hidden"!==c)&&"visible"!==c&&"clip"!==c,Wp=(c,m)=>{if(c.clientHeight<c.scrollHeight||c.clientWidth<c.scrollWidth){const r=getComputedStyle(c,null);return Zp(r.overflowY,m)||Zp(r.overflowX,m)||(h=>{const A=(z=>{if(!z.ownerDocument||!z.ownerDocument.defaultView)return null;try{return z.ownerDocument.defaultView.frameElement}catch{return null}})(h);return!!A&&(A.clientHeight<h.scrollHeight||A.clientWidth<h.scrollWidth)})(c)}return!1},qp=(c,m,r,h,A,z,re,ye)=>z<c&&re>m||z>c&&re<m?0:z<=c&&ye<=r||re>=m&&ye>=r?z-c-h:re>m&&ye<r||z<c&&ye>r?re-m+A:0,v0=c=>c.parentElement??(c.getRootNode().host||null),ny=(c,m)=>{var r,h,A,z;if(typeof document>"u")return[];const{scrollMode:re,block:ye,inline:We,boundary:ct,skipOverflowHiddenElements:$t}=m,Kt="function"==typeof ct?ct:lc=>lc!==ct;if(!y0(c))throw new TypeError("Invalid target");const Oi=document.scrollingElement||document.documentElement,Ki=[];let Ii=c;for(;y0(Ii)&&Kt(Ii);){if(Ii=v0(Ii),Ii===Oi){Ki.push(Ii);break}null!=Ii&&Ii===document.body&&Wp(Ii)&&!Wp(document.documentElement)||null!=Ii&&Wp(Ii,$t)&&Ki.push(Ii)}const Hi=null!=(h=null==(r=window.visualViewport)?void 0:r.width)?h:innerWidth,Cn=null!=(z=null==(A=window.visualViewport)?void 0:A.height)?z:innerHeight,{scrollX:qn,scrollY:cr}=window,{height:fo,width:Zr,top:Ra,right:Ja,bottom:ps,left:Qa}=c.getBoundingClientRect();let is="start"===ye||"nearest"===ye?Ra:"end"===ye?ps:Ra+fo/2,ns="center"===We?Qa+Zr/2:"end"===We?Ja:Qa;const Xm=[];for(let lc=0;lc<Ki.length;lc++){const Qr=Ki[lc],{height:Od,width:Bh,top:ji,right:ln,bottom:gn,left:dr}=Qr.getBoundingClientRect();if("if-needed"===re&&Ra>=0&&Qa>=0&&ps<=Cn&&Ja<=Hi&&Ra>=ji&&ps<=gn&&Qa>=dr&&Ja<=ln)return Xm;const ur=getComputedStyle(Qr),Fa=parseInt(ur.borderLeftWidth,10),fs=parseInt(ur.borderTopWidth,10),_l=parseInt(ur.borderRightWidth,10),eo=parseInt(ur.borderBottomWidth,10);let yl=0,cc=0;const Wo="offsetWidth"in Qr?Qr.offsetWidth-Qr.clientWidth-Fa-_l:0,jl="offsetHeight"in Qr?Qr.offsetHeight-Qr.clientHeight-fs-eo:0,ba="offsetWidth"in Qr?0===Qr.offsetWidth?0:Bh/Qr.offsetWidth:0,Rd="offsetHeight"in Qr?0===Qr.offsetHeight?0:Od/Qr.offsetHeight:0;if(Oi===Qr)yl="start"===ye?is:"end"===ye?is-Cn:"nearest"===ye?qp(cr,cr+Cn,Cn,fs,eo,cr+is,cr+is+fo,fo):is-Cn/2,cc="start"===We?ns:"center"===We?ns-Hi/2:"end"===We?ns-Hi:qp(qn,qn+Hi,Hi,Fa,_l,qn+ns,qn+ns+Zr,Zr),yl=Math.max(0,yl+cr),cc=Math.max(0,cc+qn);else{yl="start"===ye?is-ji-fs:"end"===ye?is-gn+eo+jl:"nearest"===ye?qp(ji,gn,Od,fs,eo+jl,is,is+fo,fo):is-(ji+Od/2)+jl/2,cc="start"===We?ns-dr-Fa:"center"===We?ns-(dr+Bh/2)+Wo/2:"end"===We?ns-ln+_l+Wo:qp(dr,ln,Bh,Fa,_l+Wo,ns,ns+Zr,Zr);const{scrollLeft:Du,scrollTop:A_}=Qr;yl=Math.max(0,Math.min(A_+yl/Rd,Qr.scrollHeight-Od/Rd+jl)),cc=Math.max(0,Math.min(Du+cc/ba,Qr.scrollWidth-Bh/ba+Wo)),is+=A_-yl,ns+=Du-cc}Xm.push({el:Qr,top:yl,left:cc})}return Xm};let oy=(()=>{class c{constructor(){this.resize$=new wr.x}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var Xs=H(6223),x0=H(6637),Zc=H(2296),xn=H(2495),Bl=H(2831),Wn=H(3680),Vl=H(7131);let yg=(()=>{class c{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(r){this._vertical=(0,xn.Ig)(r)}get inset(){return this._inset}set inset(r){this._inset=(0,xn.Ig)(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,h){2&r&&(l.uIk("aria-orientation",h.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",h.vertical)("mat-divider-horizontal",!h.vertical)("mat-divider-inset",h.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(r,h){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),c})(),w0=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Wn.BQ,Wn.BQ]}),c})();var rc=H(7849),Yp=H(8337),Wc=H(6028);const Kp=["*"],Sh='@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}',Xp=["unscopedContent"],lC=["text"],sy=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],ay=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],uy=new l.OlP("ListOption");let xg=(()=>{class c{constructor(r){this._elementRef=r}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq))},c.\u0275dir=l.lG2({type:c,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]}),c})(),wg=(()=>{class c{constructor(r){this._elementRef=r}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq))},c.\u0275dir=l.lG2({type:c,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]}),c})(),I0=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]}),c})(),hy=(()=>{class c{constructor(r){this._listOption=r}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(uy,8))},c.\u0275dir=l.lG2({type:c,hostVars:4,hostBindings:function(r,h){2&r&&l.ekj("mdc-list-item__start",h._isAlignedAtStart())("mdc-list-item__end",!h._isAlignedAtStart())}}),c})(),my=(()=>{class c extends hy{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=l.n5z(c)))(h||c)}}(),c.\u0275dir=l.lG2({type:c,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[l.qOj]}),c})(),py=(()=>{class c extends hy{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=l.n5z(c)))(h||c)}}(),c.\u0275dir=l.lG2({type:c,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[l.qOj]}),c})();const Pm=new l.OlP("MAT_LIST_CONFIG");let Sd=(()=>{class c{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=(0,l.f3M)(Pm,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=(0,xn.Ig)(r)}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,xn.Ig)(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,hostVars:1,hostBindings:function(r,h){2&r&&l.uIk("aria-disabled",h.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}}),c})(),ef=(()=>{class c{set lines(r){this._explicitLines=(0,xn.su)(r,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(r){this._disableRipple=(0,xn.Ig)(r)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(r){this._disabled=(0,xn.Ig)(r)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(r,h,A,z,re,ye){this._elementRef=r,this._ngZone=h,this._listBase=A,this._platform=z,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new zs.w0,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=re||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===ye,A&&!A._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Wn.IR(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add((0,er.T)(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(r){if(!this._lines||!this._titles||!this._unscopedContent)return;r&&this._checkDomForUnscopedTextContent();const h=this._explicitLines??this._inferLinesFromContent(),A=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",h<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",h<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===h),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===h),this._hasUnscopedTextContent){const z=0===this._titles.length&&1===h;A.classList.toggle("mdc-list-item__primary-text",z),A.classList.toggle("mdc-list-item__secondary-text",!z)}else A.classList.remove("mdc-list-item__primary-text"),A.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let r=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(r+=1),r}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(r=>r.nodeType!==r.COMMENT_NODE).some(r=>!(!r.textContent||!r.textContent.trim()))}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(Sd,8),l.Y36(Bl.t4),l.Y36(Wn.Y2,8),l.Y36(l.QbO,8))},c.\u0275dir=l.lG2({type:c,contentQueries:function(r,h,A){if(1&r&&(l.Suo(A,my,4),l.Suo(A,py,4)),2&r){let z;l.iGM(z=l.CRH())&&(h._avatars=z),l.iGM(z=l.CRH())&&(h._icons=z)}},hostVars:4,hostBindings:function(r,h){2&r&&(l.uIk("aria-disabled",h.disabled)("disabled",h._isButtonElement&&h.disabled||null),l.ekj("mdc-list-item--disabled",h.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}}),c})(),Om=(()=>{class c extends Sd{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=l.n5z(c)))(h||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[l._Bn([{provide:Sd,useExisting:c}]),l.qOj],ngContentSelectors:Kp,decls:1,vars:0,template:function(r,h){1&r&&(l.F$t(),l.Hsn(0))},styles:[Sh],encapsulation:2,changeDetection:0}),c})(),fy=(()=>{class c extends ef{get activated(){return this._activated}set activated(r){this._activated=(0,xn.Ig)(r)}constructor(r,h,A,z,re,ye){super(r,h,A,z,re,ye),this._activated=!1}_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(Sd,8),l.Y36(Bl.t4),l.Y36(Wn.Y2,8),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,h,A){if(1&r&&(l.Suo(A,wg,5),l.Suo(A,xg,5),l.Suo(A,I0,5)),2&r){let z;l.iGM(z=l.CRH())&&(h._lines=z),l.iGM(z=l.CRH())&&(h._titles=z),l.iGM(z=l.CRH())&&(h._meta=z)}},viewQuery:function(r,h){if(1&r&&(l.Gf(Xp,5),l.Gf(lC,5)),2&r){let A;l.iGM(A=l.CRH())&&(h._unscopedContent=A.first),l.iGM(A=l.CRH())&&(h._itemText=A.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(r,h){2&r&&(l.uIk("aria-current",h._getAriaCurrent()),l.ekj("mdc-list-item--activated",h.activated)("mdc-list-item--with-leading-avatar",0!==h._avatars.length)("mdc-list-item--with-leading-icon",0!==h._icons.length)("mdc-list-item--with-trailing-meta",0!==h._meta.length)("_mat-animation-noopable",h._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[l.qOj],ngContentSelectors:ay,decls:10,vars:0,consts:[[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],[1,"mat-mdc-focus-indicator"]],template:function(r,h){1&r&&(l.F$t(sy),l.Hsn(0),l.TgZ(1,"span",0),l.Hsn(2,1),l.Hsn(3,2),l.TgZ(4,"span",1,2),l.NdJ("cdkObserveContent",function(){return h._updateItemLines(!0)}),l.Hsn(6,3),l.qZA()(),l.Hsn(7,4),l.Hsn(8,5),l._UZ(9,"div",3))},dependencies:[Vl.wD],encapsulation:2,changeDetection:0}),c})(),O0=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"]}),c})(),R0=(()=>{class c extends Sd{constructor(){super(...arguments),this._isNonInteractive=!1}}return c.\u0275fac=function(){let m;return function(h){return(m||(m=l.n5z(c)))(h||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[l._Bn([{provide:Sd,useExisting:c}]),l.qOj],ngContentSelectors:Kp,decls:1,vars:0,template:function(r,h){1&r&&(l.F$t(),l.Hsn(0))},styles:[Sh],encapsulation:2,changeDetection:0}),c})(),gy=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Vl.Q8,Bi.ez,Wn.BQ,Wn.si,Wn.us,w0]}),c})();var Cg=H(6232);const _y=(0,Bl.i$)({passive:!0});let tf=(()=>{class c{constructor(r,h){this._platform=r,this._ngZone=h,this._monitoredElements=new Map}monitor(r){if(!this._platform.isBrowser)return Cg.E;const h=(0,xn.fI)(r),A=this._monitoredElements.get(h);if(A)return A.subject;const z=new wr.x,re="cdk-text-field-autofilled",ye=We=>{"cdk-text-field-autofill-start"!==We.animationName||h.classList.contains(re)?"cdk-text-field-autofill-end"===We.animationName&&h.classList.contains(re)&&(h.classList.remove(re),this._ngZone.run(()=>z.next({target:We.target,isAutofilled:!1}))):(h.classList.add(re),this._ngZone.run(()=>z.next({target:We.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{h.addEventListener("animationstart",ye,_y),h.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(h,{subject:z,unlisten:()=>{h.removeEventListener("animationstart",ye,_y)}}),z}stopMonitoring(r){const h=(0,xn.fI)(r),A=this._monitoredElements.get(h);A&&(A.unlisten(),A.subject.complete(),h.classList.remove("cdk-text-field-autofill-monitored"),h.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(h))}ngOnDestroy(){this._monitoredElements.forEach((r,h)=>this.stopMonitoring(h))}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(Bl.t4),l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),z0=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({}),c})();var vu=H(4170);const B0=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),V0=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let yy=0;const vy=(0,Wn.FD)(class{constructor(c,m,r,h){this._defaultErrorStateMatcher=c,this._parentForm=m,this._parentFormGroup=r,this.ngControl=h,this.stateChanges=new wr.x}});let U0=(()=>{class c extends vy{get disabled(){return this._disabled}set disabled(r){this._disabled=(0,xn.Ig)(r),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(r){this._id=r||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Xs.kI.required)??!1}set required(r){this._required=(0,xn.Ig)(r)}get type(){return this._type}set type(r){this._type=r||"text",this._validateType(),!this._isTextarea&&(0,Bl.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(r){r!==this.value&&(this._inputValueAccessor.value=r,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(r){this._readonly=(0,xn.Ig)(r)}constructor(r,h,A,z,re,ye,We,ct,$t,Kt){super(ye,z,re,A),this._elementRef=r,this._platform=h,this._autofillMonitor=ct,this._formField=Kt,this._uid="mat-input-"+yy++,this.focused=!1,this.stateChanges=new wr.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(Ii=>(0,Bl.qK)().has(Ii)),this._iOSKeyupListener=Ii=>{const Hi=Ii.target;!Hi.value&&0===Hi.selectionStart&&0===Hi.selectionEnd&&(Hi.setSelectionRange(1,1),Hi.setSelectionRange(0,0))};const Oi=this._elementRef.nativeElement,Ki=Oi.nodeName.toLowerCase();this._inputValueAccessor=We||Oi,this._previousNativeValue=this.value,this.id=this.id,h.IOS&&$t.runOutsideAngular(()=>{r.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Ki,this._isTextarea="textarea"===Ki,this._isInFormField=!!Kt,this._isNativeSelect&&(this.controlType=Oi.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(r=>{this.autofilled=r.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(r){this._elementRef.nativeElement.focus(r)}_focusChanged(r){r!==this.focused&&(this.focused=r,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const r=this._elementRef.nativeElement.value;this._previousNativeValue!==r&&(this._previousNativeValue=r,this.stateChanges.next())}_dirtyCheckPlaceholder(){const r=this._getPlaceholder();if(r!==this._previousPlaceholder){const h=this._elementRef.nativeElement;this._previousPlaceholder=r,r?h.setAttribute("placeholder",r):h.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){V0.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let r=this._elementRef.nativeElement.validity;return r&&r.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const r=this._elementRef.nativeElement,h=r.options[0];return this.focused||r.multiple||!this.empty||!!(r.selectedIndex>-1&&h&&h.label)}return this.focused||!this.empty}setDescribedByIds(r){r.length?this._elementRef.nativeElement.setAttribute("aria-describedby",r.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const r=this._elementRef.nativeElement;return this._isNativeSelect&&(r.multiple||r.size>1)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(Bl.t4),l.Y36(Xs.a5,10),l.Y36(Xs.F,8),l.Y36(Xs.sg,8),l.Y36(Wn.rD),l.Y36(B0,10),l.Y36(tf),l.Y36(l.R0b),l.Y36(vu.G_,8))},c.\u0275dir=l.lG2({type:c,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,h){1&r&&l.NdJ("focus",function(){return h._focusChanged(!0)})("blur",function(){return h._focusChanged(!1)})("input",function(){return h._onInput()}),2&r&&(l.Ikx("id",h.id)("disabled",h.disabled)("required",h.required),l.uIk("name",h.name||null)("readonly",h.readonly&&!h._isNativeSelect||null)("aria-invalid",h.empty&&h.required?null:h.errorState)("aria-required",h.required)("id",h.id),l.ekj("mat-input-server",h._isServer)("mat-mdc-form-field-textarea-control",h._isInFormField&&h._isTextarea)("mat-mdc-form-field-input-control",h._isInFormField)("mdc-text-field__input",h._isInFormField)("mat-mdc-native-select-inline",h._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:vu.Eo,useExisting:c}]),l.qOj,l.TTD]}),c})(),_C=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Wn.BQ,vu.lN,vu.lN,z0,Wn.BQ]}),c})();var fl=H(799),Eg=H(9388),j0=H(975),nf=H(3997);const rf=["*"],H0=["content"];function Mg(c,m){if(1&c){const r=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(r);const A=l.oxw();return l.KtG(A._onBackdropClicked())}),l.qZA()}if(2&c){const r=l.oxw();l.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function $0(c,m){1&c&&(l.TgZ(0,"mat-drawer-content"),l.Hsn(1,2),l.qZA())}const Sc=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Rm=["mat-drawer","mat-drawer-content","*"];function ya(c,m){if(1&c){const r=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(r);const A=l.oxw();return l.KtG(A._onBackdropClicked())}),l.qZA()}if(2&c){const r=l.oxw();l.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function bu(c,m){1&c&&(l.TgZ(0,"mat-sidenav-content"),l.Hsn(1,2),l.qZA())}const sf=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Ul=["mat-sidenav","mat-sidenav-content","*"],xu={transformDrawer:(0,ne.X$)("transform",[(0,ne.SB)("open, open-instant",(0,ne.oB)({transform:"none",visibility:"visible"})),(0,ne.SB)("void",(0,ne.oB)({"box-shadow":"none",visibility:"hidden"})),(0,ne.eR)("void => open-instant",(0,ne.jt)("0ms")),(0,ne.eR)("void <=> open, open-instant => void",(0,ne.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Th=new l.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Ih(){return!1}}),Td=new l.OlP("MAT_DRAWER_CONTAINER");let Yc=(()=>{class c extends fl.PQ{constructor(r,h,A,z,re){super(A,z,re),this._changeDetectorRef=r,this._container=h}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>Cu)),l.Y36(l.SBq),l.Y36(fl.mF),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,h){2&r&&l.Udp("margin-left",h._container._contentMargins.left,"px")("margin-right",h._container._contentMargins.right,"px")},features:[l._Bn([{provide:fl.PQ,useExisting:c}]),l.qOj],ngContentSelectors:rf,decls:1,vars:0,template:function(r,h){1&r&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),wu=(()=>{class c{get position(){return this._position}set position(r){(r="end"===r?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(r),this._position=r,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(r){this._mode=r,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(r){this._disableClose=(0,xn.Ig)(r)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(r){("true"===r||"false"===r||null==r)&&(r=(0,xn.Ig)(r)),this._autoFocus=r}get opened(){return this._opened}set opened(r){this.toggle((0,xn.Ig)(r))}constructor(r,h,A,z,re,ye,We,ct){this._elementRef=r,this._focusTrapFactory=h,this._focusMonitor=A,this._platform=z,this._ngZone=re,this._interactivityChecker=ye,this._doc=We,this._container=ct,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new wr.x,this._animationEnd=new wr.x,this._animationState="void",this.openedChange=new l.vpe(!0),this._openedStream=this.openedChange.pipe((0,jr.h)($t=>$t),(0,$o.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,jr.h)($t=>$t.fromState!==$t.toState&&0===$t.toState.indexOf("open")),(0,j0.h)(void 0)),this._closedStream=this.openedChange.pipe((0,jr.h)($t=>!$t),(0,$o.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,jr.h)($t=>$t.fromState!==$t.toState&&"void"===$t.toState),(0,j0.h)(void 0)),this._destroyed=new wr.x,this.onPositionChanged=new l.vpe,this._modeChanged=new wr.x,this.openedChange.subscribe($t=>{$t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,ls.R)(this._elementRef.nativeElement,"keydown").pipe((0,jr.h)($t=>$t.keyCode===Wc.hY&&!this.disableClose&&!(0,Wc.Vb)($t)),(0,Or.R)(this._destroyed)).subscribe($t=>this._ngZone.run(()=>{this.close(),$t.stopPropagation(),$t.preventDefault()}))}),this._animationEnd.pipe((0,nf.x)(($t,Kt)=>$t.fromState===Kt.fromState&&$t.toState===Kt.toState)).subscribe($t=>{const{fromState:Kt,toState:Oi}=$t;(0===Oi.indexOf("open")&&"void"===Kt||"void"===Oi&&0===Kt.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(r,h){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const A=()=>{r.removeEventListener("blur",A),r.removeEventListener("mousedown",A),r.removeAttribute("tabindex")};r.addEventListener("blur",A),r.addEventListener("mousedown",A)})),r.focus(h)}_focusByCssSelector(r,h){let A=this._elementRef.nativeElement.querySelector(r);A&&this._forceFocus(A,h)}_takeFocus(){if(!this._focusTrap)return;const r=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(h=>{!h&&"function"==typeof this._elementRef.nativeElement.focus&&r.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(r){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,r):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const r=this._doc.activeElement;return!!r&&this._elementRef.nativeElement.contains(r)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(r){return this.toggle(!0,r)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(r=!this.opened,h){r&&h&&(this._openedVia=h);const A=this._setOpen(r,!r&&this._isFocusWithinDrawer(),this._openedVia||"program");return r||(this._openedVia=null),A}_setOpen(r,h,A){return this._opened=r,r?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",h&&this._restoreFocus(A)),this._updateFocusTrapState(),new Promise(z=>{this.openedChange.pipe((0,wl.q)(1)).subscribe(re=>z(re?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(r){const h=this._elementRef.nativeElement,A=h.parentNode;"end"===r?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),A.insertBefore(this._anchor,h)),A.appendChild(h)):this._anchor&&this._anchor.parentNode.insertBefore(h,this._anchor)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(rc.qV),l.Y36(rc.tE),l.Y36(Bl.t4),l.Y36(l.R0b),l.Y36(rc.ic),l.Y36(Bi.K0,8),l.Y36(Td,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer"]],viewQuery:function(r,h){if(1&r&&l.Gf(H0,5),2&r){let A;l.iGM(A=l.CRH())&&(h._content=A.first)}},hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer"],hostVars:12,hostBindings:function(r,h){1&r&&l.WFA("@transform.start",function(z){return h._animationStarted.next(z)})("@transform.done",function(z){return h._animationEnd.next(z)}),2&r&&(l.uIk("align",null),l.d8E("@transform",h._animationState),l.ekj("mat-drawer-end","end"===h.position)("mat-drawer-over","over"===h.mode)("mat-drawer-push","push"===h.mode)("mat-drawer-side","side"===h.mode)("mat-drawer-opened",h.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:rf,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,h){1&r&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[fl.PQ],encapsulation:2,data:{animation:[xu.transformDrawer]},changeDetection:0}),c})(),Cu=(()=>{class c{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(r){this._autosize=(0,xn.Ig)(r)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(r){this._backdropOverride=null==r?null:(0,xn.Ig)(r)}get scrollable(){return this._userContent||this._content}constructor(r,h,A,z,re,ye=!1,We){this._dir=r,this._element=h,this._ngZone=A,this._changeDetectorRef=z,this._animationMode=We,this._drawers=new l.n_E,this.backdropClick=new l.vpe,this._destroyed=new wr.x,this._doCheckSubject=new wr.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new wr.x,r&&r.change.pipe((0,Or.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),re.change().pipe((0,Or.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=ye}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Cl.O)(this._allDrawers),(0,Or.R)(this._destroyed)).subscribe(r=>{this._drawers.reset(r.filter(h=>!h._container||h._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Cl.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(r=>{this._watchDrawerToggle(r),this._watchDrawerPosition(r),this._watchDrawerMode(r)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,ys.b)(10),(0,Or.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(r=>r.open())}close(){this._drawers.forEach(r=>r.close())}updateContentMargins(){let r=0,h=0;if(this._left&&this._left.opened)if("side"==this._left.mode)r+=this._left._getWidth();else if("push"==this._left.mode){const A=this._left._getWidth();r+=A,h-=A}if(this._right&&this._right.opened)if("side"==this._right.mode)h+=this._right._getWidth();else if("push"==this._right.mode){const A=this._right._getWidth();h+=A,r-=A}r=r||null,h=h||null,(r!==this._contentMargins.left||h!==this._contentMargins.right)&&(this._contentMargins={left:r,right:h},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(r){r._animationStarted.pipe((0,jr.h)(h=>h.fromState!==h.toState),(0,Or.R)(this._drawers.changes)).subscribe(h=>{"open-instant"!==h.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==r.mode&&r.openedChange.pipe((0,Or.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(r.opened))}_watchDrawerPosition(r){r&&r.onPositionChanged.pipe((0,Or.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,wl.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(r){r&&r._modeChanged.pipe((0,Or.R)((0,er.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(r){const h=this._element.nativeElement.classList,A="mat-drawer-container-has-open";r?h.add(A):h.remove(A)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(r=>{"end"==r.position?this._end=r:this._start=r}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(r=>r&&!r.disableClose&&this._canHaveBackdrop(r)).forEach(r=>r._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(r){return"side"!==r.mode||!!this._backdropOverride}_isDrawerOpen(r){return null!=r&&r.opened}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Eg.Is,8),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(fl.rL),l.Y36(Th),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer-container"]],contentQueries:function(r,h,A){if(1&r&&(l.Suo(A,Yc,5),l.Suo(A,wu,5)),2&r){let z;l.iGM(z=l.CRH())&&(h._content=z.first),l.iGM(z=l.CRH())&&(h._allDrawers=z)}},viewQuery:function(r,h){if(1&r&&l.Gf(Yc,5),2&r){let A;l.iGM(A=l.CRH())&&(h._userContent=A.first)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,h){2&r&&l.ekj("mat-drawer-container-explicit-backdrop",h._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[l._Bn([{provide:Td,useExisting:c}])],ngContentSelectors:Rm,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,h){1&r&&(l.F$t(Sc),l.YNc(0,Mg,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,$0,2,0,"mat-drawer-content",1)),2&r&&(l.Q6J("ngIf",h.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!h._content))},dependencies:[Bi.O5,Yc],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),Id=(()=>{class c extends Yc{constructor(r,h,A,z,re){super(r,h,A,z,re)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>Tg)),l.Y36(l.SBq),l.Y36(fl.mF),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(r,h){2&r&&l.Udp("margin-left",h._container._contentMargins.left,"px")("margin-right",h._container._contentMargins.right,"px")},features:[l._Bn([{provide:fl.PQ,useExisting:c}]),l.qOj],ngContentSelectors:rf,decls:1,vars:0,template:function(r,h){1&r&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),Sg=(()=>{class c extends wu{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(r){this._fixedInViewport=(0,xn.Ig)(r)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(r){this._fixedTopGap=(0,xn.su)(r)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(r){this._fixedBottomGap=(0,xn.su)(r)}}return c.\u0275fac=function(){let m;return function(h){return(m||(m=l.n5z(c)))(h||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(r,h){2&r&&(l.uIk("align",null),l.Udp("top",h.fixedInViewport?h.fixedTopGap:null,"px")("bottom",h.fixedInViewport?h.fixedBottomGap:null,"px"),l.ekj("mat-drawer-end","end"===h.position)("mat-drawer-over","over"===h.mode)("mat-drawer-push","push"===h.mode)("mat-drawer-side","side"===h.mode)("mat-drawer-opened",h.opened)("mat-sidenav-fixed",h.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[l.qOj],ngContentSelectors:rf,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,h){1&r&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[fl.PQ],encapsulation:2,data:{animation:[xu.transformDrawer]},changeDetection:0}),c})(),Tg=(()=>{class c extends Cu{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}}return c.\u0275fac=function(){let m;return function(h){return(m||(m=l.n5z(c)))(h||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav-container"]],contentQueries:function(r,h,A){if(1&r&&(l.Suo(A,Id,5),l.Suo(A,Sg,5)),2&r){let z;l.iGM(z=l.CRH())&&(h._content=z.first),l.iGM(z=l.CRH())&&(h._allDrawers=z)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,h){2&r&&l.ekj("mat-drawer-container-explicit-backdrop",h._backdropOverride)},exportAs:["matSidenavContainer"],features:[l._Bn([{provide:Td,useExisting:c}]),l.qOj],ngContentSelectors:Ul,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,h){1&r&&(l.F$t(sf),l.YNc(0,ya,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,bu,2,0,"mat-sidenav-content",1)),2&r&&(l.Q6J("ngIf",h.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!h._content))},dependencies:[Bi.O5,Id],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),by=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Bi.ez,Wn.BQ,fl.ZD,fl.ZD,Wn.BQ]}),c})();const xy=["switch"],wy=["*"],Cy=new l.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})}),Ey={provide:Xs.JU,useExisting:(0,l.Gpc)(()=>Z0),multi:!0};class Ig{constructor(m,r){this.source=m,this.checked=r}}let My=0;const Ag=(0,Wn.sb)((0,Wn.pj)((0,Wn.Kr)((0,Wn.Id)(class{constructor(c){this._elementRef=c}}))));let G0=(()=>{class c extends Ag{get required(){return this._required}set required(r){this._required=(0,xn.Ig)(r)}get checked(){return this._checked}set checked(r){this._checked=(0,xn.Ig)(r),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(r,h,A,z,re,ye,We){super(r),this._focusMonitor=h,this._changeDetectorRef=A,this.defaults=re,this._onChange=ct=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new l.vpe,this.toggleChange=new l.vpe,this.tabIndex=parseInt(z)||0,this.color=this.defaultColor=re.color||"accent",this._noopAnimations="NoopAnimations"===ye,this.id=this._uniqueId=`${We}${++My}`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(r=>{"keyboard"===r||"program"===r?(this._focused=!0,this._changeDetectorRef.markForCheck()):r||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(r){this.checked=!!r}registerOnChange(r){this._onChange=r}registerOnTouched(r){this._onTouched=r}setDisabledState(r){this.disabled=r,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return c.\u0275fac=function(r){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[l.qOj]}),c})(),Z0=(()=>{class c extends G0{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(r,h,A,z,re,ye){super(r,h,A,z,re,ye,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new Ig(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(r){return new Ig(this,r)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(rc.tE),l.Y36(l.sBO),l.$8M("tabindex"),l.Y36(Cy),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-slide-toggle"]],viewQuery:function(r,h){if(1&r&&l.Gf(xy,5),2&r){let A;l.iGM(A=l.CRH())&&(h._switchElement=A.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(r,h){2&r&&(l.Ikx("id",h.id),l.uIk("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),l.ekj("mat-mdc-slide-toggle-focused",h._focused)("mat-mdc-slide-toggle-checked",h.checked)("_mat-animation-noopable",h._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[l._Bn([Ey]),l.qOj],ngContentSelectors:wy,decls:17,vars:24,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"],[1,"mdc-label",3,"for","click"]],template:function(r,h){if(1&r&&(l.F$t(),l.TgZ(0,"div",0)(1,"button",1,2),l.NdJ("click",function(){return h._handleClick()}),l._UZ(3,"div",3),l.TgZ(4,"div",4)(5,"div",5)(6,"div",6),l._UZ(7,"div",7),l.qZA(),l.TgZ(8,"div",8),l._UZ(9,"div",9),l.qZA(),l.TgZ(10,"div",10),l.O4$(),l.TgZ(11,"svg",11),l._UZ(12,"path",12),l.qZA(),l.TgZ(13,"svg",13),l._UZ(14,"path",14),l.qZA()()()()(),l.kcU(),l.TgZ(15,"label",15),l.NdJ("click",function(z){return z.stopPropagation()}),l.Hsn(16),l.qZA()()),2&r){const A=l.MAs(2);l.ekj("mdc-form-field--align-end","before"==h.labelPosition),l.xp6(1),l.ekj("mdc-switch--selected",h.checked)("mdc-switch--unselected",!h.checked)("mdc-switch--checked",h.checked)("mdc-switch--disabled",h.disabled),l.Q6J("tabIndex",h.tabIndex)("disabled",h.disabled),l.uIk("id",h.buttonId)("name",h.name)("aria-label",h.ariaLabel)("aria-labelledby",h._getAriaLabelledBy())("aria-describedby",h.ariaDescribedby)("aria-required",h.required||null)("aria-checked",h.checked),l.xp6(8),l.Q6J("matRippleTrigger",A)("matRippleDisabled",h.disableRipple||h.disabled)("matRippleCentered",!0),l.xp6(6),l.Q6J("for",h.buttonId),l.uIk("id",h._labelId)}},dependencies:[Wn.wG],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mdc-switch{width:var(--mdc-switch-track-width, 36px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, #616161)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color, var(--mdc-theme-surface, #fff))}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__focus-ring-wrapper,.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height, 20px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape, 10px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width, 20px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width, 20px))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 18px);height:var(--mdc-switch-selected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 18px);height:var(--mdc-switch-unselected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size, 48px);width:var(--mdc-switch-state-layer-size, 48px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height, 14px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape, 7px)}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0}),c})(),Dy=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({}),c})(),vC=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Dy,Wn.BQ,Wn.si,Bi.ez,Dy,Wn.BQ]}),c})();const q0=["exampleLink"];function bC(c,m){if(1&c){const r=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(r);const A=l.oxw();return l.KtG(A.clearSearch())}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA()()}}const Y0=function(c){return{_routerLinkActiveWakeUpHack_:c}};function K0(c,m){if(1&c&&(l.TgZ(0,"a",14,15),l._uU(2),l.qZA()),2&c){const r=l.oxw().$implicit,h=l.oxw(2);l.Q6J("routerLink","/demo/"+(h.isEditMode?"/edit/":"")+r.path)("routerLinkActiveOptions",l.VKq(3,Y0,h.isEditMode)),l.xp6(2),l.hij(" ",r.data.label," ")}}function X0(c,m){if(1&c&&(l.ynx(0),l.YNc(1,K0,3,5,"a",13),l.BQk()),2&c){const r=m.$implicit;l.xp6(1),l.Q6J("ngIf",r)}}function kg(c,m){if(1&c&&(l.ynx(0),l.TgZ(1,"h3",12),l._uU(2),l.qZA(),l.YNc(3,X0,2,1,"ng-container",9),l._UZ(4,"mat-divider"),l.BQk()),2&c){const r=m.$implicit,h=l.oxw();l.xp6(2),l.Oqu(r),l.xp6(1),l.Q6J("ngForOf",h.routes[r])}}let Lm=(()=>{class c{constructor(r,h,A,z){this.zone=r,this.router=h,this.activatedRoute=A,this.mapResizeService=z,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild.params.demoUrl,this.originalRoutes=Ke(Rf[0].children,re=>re.data?re.data.cat:null),this.categories=[wn.STYLES,wn.LAYERS,wn.SOURCES,wn.USER_INTERACTION,wn.CAMERA,wn.CONTROLS_AND_OVERLAYS,wn.TERRAIN]}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(r){const h=this.activatedRoute.snapshot.firstChild;this.router.navigate(r.checked?["demo","edit",h.url[0].path]:["demo",h.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function g0(c){return p0(c,5)}(this.originalRoutes),Object.values(this.routes).forEach(r=>{r.forEach((h,A)=>{h.data&&!h.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete r[A]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,Sa.P)()).subscribe(()=>{const r=this.exampleLinks.find(h=>h.nativeElement.classList.contains("active"));r&&function b0(c,m){if(!c.isConnected||!(h=>{let A=h;for(;A&&A.parentNode;){if(A.parentNode===document)return!0;A=A.parentNode instanceof ShadowRoot?A.parentNode.host:A.parentNode}return!1})(c))return;if("object"==typeof(h=m)&&"function"==typeof h.behavior)return m.behavior(ny(c,m));var h;const r="boolean"==typeof m||null==m?void 0:m.behavior;for(const{el:h,top:A,left:z}of ny(c,(c=>{return!1===c?{block:"end",inline:"nearest"}:(m=c)===Object(m)&&0!==Object.keys(m).length?c:{block:"start",inline:"nearest"};var m})(m)))h.scroll({top:A,left:z,behavior:r})}(r.nativeElement,{block:"center",scrollMode:"if-needed"})})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.R0b),l.Y36(ae.F0),l.Y36(ae.gz),l.Y36(oy))},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],viewQuery:function(r,h){if(1&r&&l.Gf(q0,5,l.SBq),2&r){let A;l.iGM(A=l.CRH())&&(h.exampleLinks=A)}},decls:18,vars:5,consts:[["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModel","ngModelChange","change"],["mode","side",3,"opened","openedChange"],["sidenav",""],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["exampleLink",""]],template:function(r,h){1&r&&(l.TgZ(0,"showcase-layout-toolbar-menu",0)(1,"button",1),l.NdJ("click",function(){return h.toggleSidenav()}),l.TgZ(2,"mat-icon"),l._uU(3,"menu"),l.qZA()()(),l.TgZ(4,"showcase-layout-toolbar-menu",2)(5,"mat-slide-toggle",3),l.NdJ("ngModelChange",function(z){return h.isEditMode=z})("change",function(z){return h.toggleEdit(z)}),l._uU(6," Edit! "),l.qZA()(),l.TgZ(7,"mat-sidenav-container")(8,"mat-sidenav",4,5),l.NdJ("openedChange",function(){return h.onSidenavChange()}),l.TgZ(10,"mat-form-field",6)(11,"input",7),l.NdJ("ngModelChange",function(z){return h.searchTerm=z})("ngModelChange",function(){return h.search()}),l.qZA(),l.YNc(12,bC,3,0,"button",8),l.qZA(),l.TgZ(13,"mat-nav-list"),l.YNc(14,kg,5,2,"ng-container",9),l.qZA()(),l.TgZ(15,"mat-sidenav-content")(16,"section",10),l._UZ(17,"router-outlet"),l.qZA()()()),2&r&&(l.xp6(5),l.Q6J("ngModel",h.isEditMode),l.xp6(3),l.Q6J("opened",h.sidenavIsOpen),l.xp6(3),l.Q6J("ngModel",h.searchTerm),l.xp6(1),l.Q6J("ngIf",h.searchTerm),l.xp6(2),l.Q6J("ngForOf",h.categories))},dependencies:[ae.lC,ae.rH,ae.Od,Bi.sg,Bi.O5,Xs.Fj,Xs.JJ,Xs.On,x0.a,Zc.lW,Zc.RK,R0,fy,O0,yg,U0,vu.KE,vu.R9,He.Hw,Sg,Tg,Id,Z0],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]}),c})(),Un=(()=>{class c{constructor(r,h){this.mapResizeService=r,this.map=h,this.sub=new zs.w0}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(oy),l.Y36(hn))},c.\u0275dir=l.lG2({type:c,selectors:[["mgl-map"]]}),c})(),Bn=(()=>{class c{constructor(r){this.map=r,null!=window.Cypress&&(console.info("Cypress detected. Setting preserveDrawingBuffer=true"),this.map.preserveDrawingBuffer=!0)}onMapIdle(r){window.mglMapTestHelper.map=r.target,window.mglMapTestHelper.idle=!0}onMapRender(r){window.mglMapTestHelper.map=r.target,window.mglMapTestHelper.idle=!1}onMapLoad(r){window.mglMapTestHelper.map=r.target,window.mglMapTestHelper.loaded=!0}ngOnInit(){window.mglMapTestHelper={mapComponent:this.map}}ngOnDestroy(){window.mglMapTestHelper=void 0}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(hn))},c.\u0275dir=l.lG2({type:c,selectors:[["mgl-map"]],hostBindings:function(r,h){1&r&&l.NdJ("idle",function(z){return h.onMapIdle(z)})("render",function(z){return h.onMapRender(z)})("mapLoad",function(z){return h.onMapLoad(z)})}}),c})();const Sy=function(c){return[c,40.7135]},Nm=function(){return["==","extrude","true"]},Pg=function(){return["linear"]},Ty=function(){return["zoom"]},zm=function(){return["get","height"]},Iy=function(c,m,r){return["interpolate",c,m,15,0,15.05,r]},J0=function(){return["get","min_height"]},Q0=function(c,m){return{"fill-extrusion-color":"#aaa","fill-extrusion-height":c,"fill-extrusion-base":m,"fill-extrusion-opacity":.6}};let ex=(()=>{class c{onLoad(r){const h=r.getStyle().layers;for(let A=0;A<h.length;A++)if("symbol"===h[A].type&&h[A].layout["text-field"]){this.labelLayerId=h[A].id;break}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:30,consts:[[3,"zoom","center","pitch","bearing","mapLoad"],["id","3d-buildings","source","openmaptiles","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(z){return h.onLoad(z)}),l._UZ(1,"mgl-layer",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",15.5)("center",l.VKq(10,Sy,-74.0066))("pitch",45)("bearing",-17.6),l.xp6(1),l.Q6J("filter",l.DdM(12,Nm))("minzoom",15)("paint",l.WLB(27,Q0,l.kEZ(16,Iy,l.DdM(13,Pg),l.DdM(14,Ty),l.DdM(15,zm)),l.kEZ(23,Iy,l.DdM(20,Pg),l.DdM(21,Ty),l.DdM(22,J0))))("before",h.labelLayerId))},dependencies:[hn,oo,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Og=function(c){return{width:64,height:64,data:c}},af=function(){return[0,0]},lf=function(c){return{type:"Point",coordinates:c}},xC=function(c){return{type:"Feature",geometry:c}},tx=function(c){return[c]},ix=function(c){return{type:"FeatureCollection",features:c}},Rg=function(c){return{type:"geojson",data:c}},nx=function(){return{"icon-image":"gradient"}};let Ay=(()=>{class c{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const A=new Uint8Array(16384);for(let z=0;z<64;z++)for(let re=0;re<64;re++){const ye=4*(64*re+z);A[ye+0]=re/64*255,A[ye+1]=z/64*255,A[ye+2]=128,A[ye+3]=255}return A}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:19,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-image",0)(2,"mgl-layer",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("data",l.VKq(5,Og,h.imageData)),l.xp6(1),l.Q6J("source",l.VKq(16,Rg,l.VKq(14,ix,l.VKq(12,tx,l.VKq(10,xC,l.VKq(8,lf,l.DdM(7,af)))))))("layout",l.DdM(18,nx)))},dependencies:[hn,oo,El,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function rx(c,m){if(1&c&&l._UZ(0,"mgl-image",3),2&c){const r=m.$implicit;l.Q6J("id",r.id)("data",r)}}const ox=function(){return[0,0]},cf=function(c){return{type:"Point",coordinates:c}},ky=function(){return{color:"255,0,0"}},df=function(c,m){return{type:"Feature",geometry:c,properties:m}},sx=function(){return[50,0]},ax=function(){return{color:"255,209,28"}},lx=function(c){return[c,0]},Py=function(){return{color:"242,127,32"}},Fg=function(c,m,r){return[c,m,r]},Lg=function(c){return{type:"FeatureCollection",features:c}},cx=function(c){return{type:"geojson",data:c}},uf=function(){return["get","color"]},hf=function(c){return["concat","square-rgb-",c]},Ng=function(c){return{"icon-image":c}};let Oy=(()=>{class c{constructor(){this.imagesData=[]}generateImage({id:r}){const h="square-rgb-";if(0!==r.indexOf(h))return;const A=r.replace(h,"").split(",").map(Number),ye=new Uint8Array(16384);for(let ct=0;ct<64;ct++)for(let $t=0;$t<64;$t++){const Kt=4*(64*$t+ct);ye[Kt+0]=A[0],ye[Kt+1]=A[1],ye[Kt+2]=A[2],ye[Kt+3]=255}this.imagesData=[...this.imagesData,{id:r,width:64,height:64,data:ye}]}trackByImage(r,h){return h.id}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("styleImageMissing",function(z){return h.generateImage(z)}),l.YNc(1,rx,1,2,"mgl-image",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngForOf",h.imagesData)("ngForTrackBy",h.trackByImage),l.xp6(1),l.Q6J("source",l.VKq(34,cx,l.VKq(32,Lg,l.kEZ(28,Fg,l.WLB(10,df,l.VKq(7,cf,l.DdM(6,ox)),l.DdM(9,ky)),l.WLB(17,df,l.VKq(14,cf,l.DdM(13,sx)),l.DdM(16,ax)),l.WLB(25,df,l.VKq(22,cf,l.VKq(20,lx,-50)),l.DdM(24,Py))))))("layout",l.VKq(39,Ng,l.VKq(37,hf,l.DdM(36,uf)))))},dependencies:[Bi.sg,hn,oo,El,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const dx=function(){return[0,0]},ux=function(c){return{type:"Point",coordinates:c}},hx=function(c){return{type:"Feature",geometry:c}},mf=function(c){return[c]},pf=function(c){return{type:"FeatureCollection",features:c}},zg=function(c){return{type:"geojson",data:c}},Ry=function(){return{"icon-image":"cat","icon-size":.25}};function mx(c,m){1&c&&l._UZ(0,"mgl-layer",2),2&c&&l.Q6J("source",l.VKq(11,zg,l.VKq(9,pf,l.VKq(7,mf,l.VKq(5,hx,l.VKq(3,ux,l.DdM(2,dx)))))))("layout",l.DdM(13,Ry))}let px=(()=>{class c{constructor(){this.imageLoaded=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map")(1,"mgl-image",0),l.NdJ("imageLoaded",function(){return h.imageLoaded=!0}),l.qZA(),l.YNc(2,mx,1,14,"mgl-layer",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(2),l.Q6J("ngIf",h.imageLoaded))},dependencies:[Bi.O5,hn,oo,El,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Fy=function(c){return[c,38.907]},Bg=function(){return[11.15]};let Ly=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(5,Fy,-77.04))("zoom",l.DdM(7,Bg))("attributionControl",!1))},dependencies:[hn,Sr,Wt,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Vg(c,m){1&c&&l._UZ(0,"mgl-feature",4),2&c&&l.Q6J("geometry",m.$implicit)}const Ug=function(){return[8]},fx=function(){return{"icon-image":"oneway"}};let Ny=(()=>{class c{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(r){this.center=r.features[0].geometry.coordinates}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle","mapLoad"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"geometry"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(z){return h.map=z}),l.TgZ(1,"mgl-geojson-source",1),l.YNc(2,Vg,1,1,"mgl-feature",2),l.qZA(),l.TgZ(3,"mgl-layer",3),l.NdJ("layerClick",function(z){return h.centerMapTo(z)})("layerMouseEnter",function(){return h.cursorStyle="pointer"})("layerMouseLeave",function(){return h.cursorStyle=""}),l.qZA()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Ug))("center",h.center)("cursorStyle",h.cursorStyle),l.xp6(2),l.Q6J("ngForOf",h.geometries),l.xp6(1),l.Q6J("layout",l.DdM(8,fx)))},dependencies:[Bi.sg,hn,oo,Hr,ha,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function zy(c,m){1&c&&l._UZ(0,"showcase-cluster-point",6),2&c&&l.Q6J("properties",m.$implicit.properties)}const By=function(){return[.3]},Vy=function(){return[0,20]},Uy=function(){return["!=","cluster",!0]},jy=function(c){return{fill:c}};function Hy(c,m){if(1&c&&(l.O4$(),l._UZ(0,"path",4)),2&c){const r=m.$implicit;l.Q6J("ngStyle",l.VKq(2,jy,r.fill)),l.uIk("d",r.d)}}const jg=function(c){return{font:c}},Ad=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let $y=(()=>{class c{constructor(){const r=["<",["get","mag"],2],h=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],A=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],z=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",r,1,0]],mag2:["+",["case",h,1,0]],mag3:["+",["case",A,1,0]],mag4:["+",["case",z,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",r,Ad[0],h,Ad[1],A,Ad[2],z,Ad[3],Ad[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://maplibre.org/maplibre-gl-js/docs/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-markers-for-clusters",2),l.YNc(3,zy,1,1,"ng-template",3),l.qZA(),l._UZ(4,"mgl-layer",4)(5,"mgl-layer",5),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(12,By))("center",l.DdM(13,Vy)),l.xp6(1),l.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",h.clusterProperties),l.xp6(3),l.Q6J("filter",l.DdM(14,Uy))("paint",h.circlePaint),l.xp6(1),l.Q6J("filter",l.DdM(15,Uy))("layout",h.labelLayout)("paint",h.labelPaint))},dependencies:function(){return[hn,oo,Hr,vs,tr,Un,Gy,Bn]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),Gy=(()=>{class c{ngOnInit(){const r=[],h=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let A=0;for(let re=0;re<h.length;re++)r.push(A),A+=h[re];this.font=(A>=1e3?22:A>=100?20:A>=10?18:16)+"px sans-serif",this.r=A>=1e3?50:A>=100?32:A>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let re=0;re<h.length;re++)this.segments.push(this.donutSegment(r[re]/A,(r[re]+h[re])/A,Ad[re]));this.totalString=A.toLocaleString()}donutSegment(r,h,A){h-r==1&&(h-=1e-5);const z=2*Math.PI*(r-.25),re=2*Math.PI*(h-.25),ye=Math.cos(z),We=Math.sin(z),ct=Math.cos(re),$t=Math.sin(re),Kt=h-r>.5?1:0;return{d:`M ${this.r+this.r0*ye} ${this.r+this.r0*We} L ${this.r+this.r*ye} ${this.r+this.r*We} A ${this.r} ${this.r} 0 ${Kt} 1 ${this.r+this.r*ct} ${this.r+this.r*$t} L ${this.r+this.r0*ct} ${this.r+this.r0*$t} A ${this.r0} ${this.r0} 0 ${Kt} 0 ${this.r+this.r0*ye} ${this.r+this.r0*We}`,fill:A}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(r,h){1&r&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,Hy,1,4,"path",1),l._UZ(2,"circle",2),l.TgZ(3,"text",3),l._uU(4),l.qZA()()),2&r&&(l.Q6J("ngStyle",l.VKq(10,jg,h.font)),l.uIk("width",h.w)("height",h.w)("viewbox",h.viewbox),l.xp6(1),l.Q6J("ngForOf",h.segments),l.xp6(1),l.uIk("cx",h.r)("cy",h.r)("r",h.r0),l.xp6(1),l.uIk("transform",h.textTransform),l.xp6(1),l.hij(" ",h.totalString," "))},dependencies:[Bi.sg,Bi.PC],encapsulation:2}),c})();const Hg=function(){return["has","point_count"]},Zy=function(){return[0,"#51bbd6"]},Wy=function(){return[100,"#f1f075"]},qy=function(){return[750,"#f28cb1"]},$g=function(c,m,r){return[c,m,r]},Gg=function(c){return{property:"point_count",type:"interval",stops:c}},ff=function(){return[0,20]},kd=function(){return[100,30]},gx=function(){return[750,40]},_x=function(c,m){return{"circle-color":c,"circle-radius":m}},Zg=function(){return["DIN Offc Pro Medium","Arial Unicode MS Bold"]},Eu=function(c){return{"text-field":"{point_count_abbreviated}","text-font":c,"text-size":12}},Wg=function(){return["!has","point_count"]},yx=function(){return{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}};function qg(c,m){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2)(2,"mgl-layer",3)(3,"mgl-layer",4)(4,"mgl-layer",5),l.BQk()),2&c){const r=l.oxw();l.xp6(1),l.Q6J("data",r.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),l.xp6(1),l.Q6J("filter",l.DdM(10,Hg))("paint",l.WLB(29,_x,l.VKq(18,Gg,l.kEZ(14,$g,l.DdM(11,Zy),l.DdM(12,Wy),l.DdM(13,qy))),l.VKq(27,Gg,l.kEZ(23,$g,l.DdM(20,ff),l.DdM(21,kd),l.DdM(22,gx))))),l.xp6(1),l.Q6J("filter",l.DdM(32,Hg))("layout",l.VKq(34,Eu,l.DdM(33,Zg))),l.xp6(1),l.Q6J("filter",l.DdM(36,Wg))("paint",l.DdM(37,yx))}}const wC=function(){return[3]},CC=function(c){return[c,40.66995747013945]};let vx=(()=>{class c{ngOnInit(){var r=this;return xr(function*(){r.earthquakes=yield H.e(45).then(H.t.bind(H,3045,19))})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,qg,5,38,"ng-container",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,wC))("center",l.VKq(6,CC,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",h.earthquakes))},dependencies:[Bi.O5,hn,oo,Hr,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const bx=function(c){return[c,38.907]},Yy=function(){return[11.15]},Is=function(){return['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"]};let Ky=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(6,bx,-77.04))("zoom",l.DdM(8,Yy))("attributionControl",!1),l.xp6(1),l.Q6J("customAttribution",l.DdM(9,Is)))},dependencies:[hn,Sr,Wt,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const wx=function(){return[36.235656,50.00387]},Cx=function(){return[11.15]};let Xy=(()=>{class c{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1)(2,"mgl-control",2)(3,"mgl-control",3)(4,"mgl-control",4),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.DdM(5,wx))("zoom",l.DdM(6,Cx))("locale",h.locale))},dependencies:[hn,Sr,fe,It,Ye,Wi,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Ex=function(c,m,r){return{"background-image":c,width:m,height:r}};function Jy(c,m){if(1&c){const r=l.EpF();l.TgZ(0,"mgl-marker",2)(1,"div",3),l.NdJ("click",function(){const z=l.CHM(r).$implicit,re=l.oxw();return l.KtG(re.alert(z.properties.message))}),l.qZA()()}if(2&c){const r=m.$implicit;l.Q6J("feature",r),l.xp6(1),l.Q6J("ngStyle",l.kEZ(2,Ex,"url(https://placekitten.com/g/"+r.properties.iconSize.join("/")+"/)",r.properties.iconSize[0]+"px",r.properties.iconSize[1]+"px"))}}const Qy=function(){return[5]},Ah=function(c,m){return[c,m]};let Mx=(()=>{class c{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(r){alert(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"ngStyle","click"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Jy,2,6,"mgl-marker",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Qy))("center",l.WLB(6,Ah,-65.017,-16.457)),l.xp6(1),l.Q6J("ngForOf",h.geojson.features))},dependencies:[Bi.sg,Bi.PC,hn,mi,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),c})();const Dx=function(){return[3]},ev=function(c){return[c,39]};let Sx=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(r,h){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Dx))("center",l.VKq(5,ev,-77.38)))},dependencies:[hn,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const tv=function(){return[9]},EC=function(c){return[c,40]};let Yg=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(r,h){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,tv))("center",l.VKq(5,EC,-74.5)))},dependencies:[hn,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Kg=["*"],sc=new l.OlP("MAT_CARD_CONFIG");let gl=(()=>{class c{constructor(r){this.appearance=r?.appearance||"raised"}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(sc,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,h){2&r&&l.ekj("mat-mdc-card-outlined","outlined"===h.appearance)("mdc-card--outlined","outlined"===h.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Kg,decls:1,vars:0,template:function(r,h){1&r&&(l.F$t(),l.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),c})(),_f=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Wn.BQ,Bi.ez,Wn.BQ]}),c})();function Rx(c,m){if(1&c&&(l.TgZ(0,"mgl-control",3)(1,"mat-card",4)(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"div"),l._uU(5),l.qZA()()()),2&c){const r=l.oxw();l.xp6(3),l.hij("Longitude:\xa0",r.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",r.coordinates[1],"")}}const rv=function(){return[2]},Xg=function(){return[0,0]};let ov=(()=>{class c{constructor(){this.color="#3887be"}onDragEnd(r){this.coordinates=r.getLngLat().toArray()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"lngLat","draggable","markerDragEnd"],["position","bottom-left",4,"ngIf"],["position","bottom-left"],["appearance","outlined"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1),l.NdJ("markerDragEnd",function(z){return h.onDragEnd(z)}),l.qZA(),l.YNc(2,Rx,6,2,"mgl-control",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,rv))("center",l.DdM(8,Xg)),l.xp6(1),l.Q6J("lngLat",l.DdM(9,Xg))("draggable",!0),l.xp6(1),l.Q6J("ngIf",h.coordinates))},dependencies:[Bi.O5,hn,mi,Sr,gl,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Fx=function(){return[13]},Lx=function(){return[11.255,43.77]};let Jg=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Fx))("center",l.DdM(5,Lx)))},dependencies:[hn,Sr,fe,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const yf=function(){return[15]},sv=function(c){return[c,37.830348]},av=function(){return{}},lv=function(c){return[c,37.83381888486939]},cv=function(c){return[c,37.83317489144141]},dv=function(c){return[c,37.83270036637107]},uv=function(c){return[c,37.832056363179625]},hv=function(c){return[c,37.83114119107971]},mv=function(c){return[c,37.83049717427869]},pv=function(c){return[c,37.829920943955045]},Nx=function(c){return[c,37.82954808664175]},zx=function(c){return[c,37.82944639795659]},Bx=function(c){return[c,37.82880236636284]},Vx=function(c){return[c,37.82931081282506]},Ux=function(c){return[c,37.83080223556934]},jx=function(c){return[c,37.83168351665737]},Hx=function(c){return[c,37.832158048267786]},$x=function(c){return[c,37.83297152392784]},Gx=function(c){return[c,37.83263257682617]},Zx=function(c){return[c,37.832937629287755]},Wx=function(c){return[c,37.832429207817725]},qx=function(c){return[c,37.832564787218985]},Yx=function(c){return[c,37.83337825839438]},Kx=function(c){return[c,37.83368330777276]},Xx=function(c,m,r,h,A,z,re,ye,We,ct,$t,Kt,Oi,Ki,Ii,Hi,Cn,qn,cr,fo,Zr){return[c,m,r,h,A,z,re,ye,We,ct,$t,Kt,Oi,Ki,Ii,Hi,Cn,qn,cr,fo,Zr]},Jx=function(c){return{type:"LineString",coordinates:c}},Qx=function(c,m){return{type:"Feature",properties:c,geometry:m}},fv=function(c){return{type:"geojson",data:c}},gv=function(){return{"line-join":"round","line-cap":"round"}},_v=function(){return{"line-color":"#888","line-width":8}};let yv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-layer",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,yf))("center",l.VKq(8,sv,-122.486052)),l.xp6(1),l.Q6J("source",l.VKq(80,fv,l.WLB(77,Qx,l.DdM(10,av),l.VKq(75,Jx,l.rFY(53,Xx,[l.VKq(11,lv,-122.48369693756104),l.VKq(13,cv,-122.48348236083984),l.VKq(15,dv,-122.48339653015138),l.VKq(17,uv,-122.48356819152832),l.VKq(19,hv,-122.48404026031496),l.VKq(21,mv,-122.48404026031496),l.VKq(23,pv,-122.48348236083984),l.VKq(25,Nx,-122.48356819152832),l.VKq(27,zx,-122.48507022857666),l.VKq(29,Bx,-122.48610019683838),l.VKq(31,Vx,-122.48695850372314),l.VKq(33,Ux,-122.48700141906738),l.VKq(35,jx,-122.48751640319824),l.VKq(37,Hx,-122.48803138732912),l.VKq(39,$x,-122.48888969421387),l.VKq(41,Gx,-122.48987674713133),l.VKq(43,Zx,-122.49043464660643),l.VKq(45,Wx,-122.49125003814696),l.VKq(47,qx,-122.49163627624512),l.VKq(49,Yx,-122.49223709106445),l.VKq(51,Kx,-122.49378204345702)])))))("layout",l.DdM(82,gv))("paint",l.DdM(83,_v)))},dependencies:[hn,oo,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function vv(c,m){if(1&c&&l._UZ(0,"mgl-layer",5),2&c){const r=m.$implicit;l.Q6J("id",r.id)("type",r.type)("filter",r.filter)("paint",r.paint)}}const bv=function(){return["!=","cluster",!0]},xv=function(){return{"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1}};function wv(c,m){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l.YNc(2,vv,1,4,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l.BQk()),2&c){const r=l.oxw();l.xp6(1),l.Q6J("data",r.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),l.xp6(1),l.Q6J("ngForOf",r.clusterLayers),l.xp6(1),l.Q6J("filter",l.DdM(7,bv))("paint",l.DdM(8,xv))}}const Cv=function(){return[3]},Qg=function(c){return[c,40.66995747013945]};let e_=(()=>{class c{ngOnInit(){var r=this;return xr(function*(){r.earthquakes=yield H.e(45).then(H.t.bind(H,3045,19));const h=[[0,"green"],[20,"orange"],[200,"red"]];r.clusterLayers=h.map((A,z)=>({type:"circle",id:`cluster-${z}`,paint:{"circle-color":A[1],"circle-radius":70,"circle-blur":1},filter:z===h.length-1?[">=","point_count",A[0]]:["all",[">=","point_count",A[0]],["<","point_count",h[z+1][0]]]}))})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"],["source","earthquakes",3,"id","type","filter","paint"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,wv,4,9,"ng-container",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Cv))("center",l.VKq(6,Qg,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",h.earthquakes))},dependencies:[Bi.sg,Bi.O5,hn,oo,Hr,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Mu=function(){return[2]},ew=function(c){return[c,37.830348]},tw=function(){return{"fill-color":"#627BC1","fill-opacity":.5}},kh=function(){return{"line-color":"#627BC1","line-width":2}},PC=function(){return{"fill-color":"#627BC1","fill-opacity":1}};let t_=(()=>{class c{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(r){this.hoverFilter=["==","name",r.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"paint","layerMouseMove","layerMouseLeave"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerMouseMove",function(z){return h.activateHoverOn(z)})("layerMouseLeave",function(){return h.disableHover()}),l.qZA(),l._UZ(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Mu))("center",l.VKq(9,ew,-100.486052)),l.xp6(2),l.Q6J("paint",l.DdM(11,tw)),l.xp6(1),l.Q6J("paint",l.DdM(12,kh)),l.xp6(1),l.Q6J("paint",l.DdM(13,PC))("filter",h.hoverFilter))},dependencies:[hn,oo,Hr,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const OC=function(){return[9]},Ev=function(c){return[c,40]};let Mv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(r,h){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,OC))("center",l.VKq(6,Ev,-74.5))("interactive",!1))},dependencies:[hn,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const RC=function(){return[2.9]},Ph=function(){return[16.05,48]};let iw=(()=>{class c{changeLangTo(r){this.map&&(this.map.setLayoutProperty("country_1","text-field","{name:"+r+"}"),this.map.setLayoutProperty("country_2","text-field","{name:"+r+"}"),this.map.setLayoutProperty("country_3","text-field","{name:"+r+"}"))}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:10,vars:6,consts:[[3,"zoom","center","mapLoad"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(z){return h.map=z}),l.TgZ(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return h.changeLangTo("fr")}),l._uU(3," French "),l.qZA(),l.TgZ(4,"button",1),l.NdJ("click",function(){return h.changeLangTo("ru")}),l._uU(5," Russian "),l.qZA(),l.TgZ(6,"button",1),l.NdJ("click",function(){return h.changeLangTo("de")}),l._uU(7," German "),l.qZA(),l.TgZ(8,"button",1),l.NdJ("click",function(){return h.changeLangTo("es")}),l._uU(9," Spanish "),l.qZA()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,RC))("center",l.DdM(5,Ph)))},dependencies:[hn,Sr,Zc.lW,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function nw(c,m){if(1&c&&l._UZ(0,"mgl-geojson-source",3),2&c){const r=l.oxw();l.Q6J("data",r.data)}}const rw=function(){return{"line-color":"yellow","line-opacity":.75,"line-width":5}};function Oh(c,m){1&c&&l._UZ(0,"mgl-layer",4),2&c&&l.Q6J("paint",l.DdM(1,rw))}let ow=(()=>{class c{constructor(){this.zoom=[0]}ngOnInit(){var r=this;return xr(function*(){const h=yield H.e(330).then(H.t.bind(H,3330,19)),A=h.features[0].geometry.coordinates;h.features[0].geometry.coordinates=[A[0]],r.data=h,r.center=A[0],r.zoom=[14],r.pitch=30;let z=0;r.timer=window.setInterval(()=>{z<A.length?(r.center=A[z],h.features[0].geometry.coordinates.push(A[z]),r.data={...r.data},z++):window.clearInterval(r.timer)},10)})()}ngOnDestroy(){window.clearInterval(this.timer)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:8,consts:[["movingMethod","jumpTo",3,"zoom","center","centerWithPanTo","pitch"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,nw,1,1,"mgl-geojson-source",1),l.YNc(2,Oh,1,2,"mgl-layer",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",h.zoom)("center",h.center)("centerWithPanTo",!0)("pitch",h.pitch),l.xp6(1),l.Q6J("ngIf",h.data),l.xp6(1),l.Q6J("ngIf",h.data))},dependencies:[Bi.O5,hn,oo,Hr,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();var vf=H(6321),bf=H(4825);const FC=function(){return[14]},Dv=function(){return{"raster-fade-duration":0}};let Sv=(()=>{class c{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){var r=this;return xr(function*(){const A=(yield H.e(330).then(H.t.bind(H,3330,19))).features[0].geometry.coordinates,z=A.map(ye=>r.makeRectangle(ye));r.center=A[0],r.coordinates=z[0];let re=0;r.sub=function Xa(c=0,m=vf.z){return c<0&&(c=0),(0,bf.H)(c,c,m)}(250).subscribe(()=>{r.url=Math.random()<.5?"assets/red.png":"assets/blue.png",r.coordinates=z[re],re=(re+1)%z.length})})()}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([r,h]){return[[r,h],[r+this.size,h],[r+this.size,h-this.size],[r,h-this.size]]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-image-source",1)(2,"mgl-layer",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",h.center)("zoom",l.DdM(7,FC)),l.xp6(1),l.Q6J("url",h.url)("coordinates",h.coordinates),l.xp6(1),l.Q6J("paint",l.DdM(8,Dv)))},dependencies:[hn,oo,zi,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const sw=function(){return{enableHighAccuracy:!0}};let Tv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:5,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("positionOptions",l.DdM(4,sw))("trackUserLocation",!0))},dependencies:[hn,Sr,Ye,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const i_=function(c){return[c]},Iv=function(){return[17]},Av=function(){return[4.577979,51.038189]},aw=function(){return[4.577979,51.03816]};let lw=(()=>{class c{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let r=0;setInterval(()=>{r+=.01,1===r&&(r=0),this.pitch=45+15*Math.cos(r),this.bearing=20*Math.sin(r)-103},20)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"polygon",4)(5,"polygon",5)(6,"polygon",6),l.qZA()()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("interactive",!1)("pitch",l.VKq(8,i_,h.pitch))("bearing",l.VKq(10,i_,h.bearing))("zoom",l.DdM(12,Iv))("center",l.DdM(13,Av)),l.xp6(1),l.Q6J("lngLat",l.DdM(14,aw)))},dependencies:[hn,mi,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]}),c})();const cw=function(){return[9]},Bm=function(c){return[c,40]};let dw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,cw))("center",l.VKq(5,Bm,-74.5)))},dependencies:[hn,Sr,It,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();var kv=H(8525),n_=H(3651),xf=H(8484);const Pv=["tooltip"],Rv=new l.OlP("mat-tooltip-scroll-strategy"),Um={provide:Rv,deps:[n_.aV],useFactory:function Vm(c){return()=>c.scrollStrategies.reposition({scrollThrottle:20})}},mw=new l.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function hw(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),r_="tooltip-panel",o_=(0,Bl.i$)({passive:!0});let NC=(()=>{class c{get position(){return this._position}set position(r){r!==this._position&&(this._position=r,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(r){this._positionAtOrigin=(0,xn.Ig)(r),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,xn.Ig)(r),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(r){this._showDelay=(0,xn.su)(r)}get hideDelay(){return this._hideDelay}set hideDelay(r){this._hideDelay=(0,xn.su)(r),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(r){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=r?String(r).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(r){this._tooltipClass=r,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(r,h,A,z,re,ye,We,ct,$t,Kt,Oi,Ki){this._overlay=r,this._elementRef=h,this._scrollDispatcher=A,this._viewContainerRef=z,this._ngZone=re,this._platform=ye,this._ariaDescriber=We,this._focusMonitor=ct,this._dir=Kt,this._defaultOptions=Oi,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new wr.x,this._scrollStrategy=$t,this._document=Ki,Oi&&(this._showDelay=Oi.showDelay,this._hideDelay=Oi.hideDelay,Oi.position&&(this.position=Oi.position),Oi.positionAtOrigin&&(this.positionAtOrigin=Oi.positionAtOrigin),Oi.touchGestures&&(this.touchGestures=Oi.touchGestures)),Kt.change.pipe((0,Or.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,Or.R)(this._destroyed)).subscribe(r=>{r?"keyboard"===r&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const r=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([h,A])=>{r.removeEventListener(h,A,o_)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(r,this.message,"tooltip"),this._focusMonitor.stopMonitoring(r)}show(r=this.showDelay,h){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const A=this._createOverlay(h);this._detach(),this._portal=this._portal||new xf.C5(this._tooltipComponent,this._viewContainerRef);const z=this._tooltipInstance=A.attach(this._portal).instance;z._triggerElement=this._elementRef.nativeElement,z._mouseLeaveHideDelay=this._hideDelay,z.afterHidden().pipe((0,Or.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),z.show(r)}hide(r=this.hideDelay){const h=this._tooltipInstance;h&&(h.isVisible()?h.hide(r):(h._cancelPendingAnimations(),this._detach()))}toggle(r){this._isTooltipVisible()?this.hide():this.show(void 0,r)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(r){if(this._overlayRef){const z=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!r)&&z._origin instanceof l.SBq)return this._overlayRef;this._detach()}const h=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),A=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&r||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(h);return A.positionChanges.pipe((0,Or.R)(this._destroyed)).subscribe(z=>{this._updateCurrentPositionClass(z.connectionPair),this._tooltipInstance&&z.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:A,panelClass:`${this._cssClassPrefix}-${r_}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,Or.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,Or.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,Or.R)(this._destroyed)).subscribe(z=>{this._isTooltipVisible()&&z.keyCode===Wc.hY&&!(0,Wc.Vb)(z)&&(z.preventDefault(),z.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(r){const h=r.getConfig().positionStrategy,A=this._getOrigin(),z=this._getOverlayPosition();h.withPositions([this._addOffset({...A.main,...z.main}),this._addOffset({...A.fallback,...z.fallback})])}_addOffset(r){return r}_getOrigin(){const r=!this._dir||"ltr"==this._dir.value,h=this.position;let A;"above"==h||"below"==h?A={originX:"center",originY:"above"==h?"top":"bottom"}:"before"==h||"left"==h&&r||"right"==h&&!r?A={originX:"start",originY:"center"}:("after"==h||"right"==h&&r||"left"==h&&!r)&&(A={originX:"end",originY:"center"});const{x:z,y:re}=this._invertPosition(A.originX,A.originY);return{main:A,fallback:{originX:z,originY:re}}}_getOverlayPosition(){const r=!this._dir||"ltr"==this._dir.value,h=this.position;let A;"above"==h?A={overlayX:"center",overlayY:"bottom"}:"below"==h?A={overlayX:"center",overlayY:"top"}:"before"==h||"left"==h&&r||"right"==h&&!r?A={overlayX:"end",overlayY:"center"}:("after"==h||"right"==h&&r||"left"==h&&!r)&&(A={overlayX:"start",overlayY:"center"});const{x:z,y:re}=this._invertPosition(A.overlayX,A.overlayY);return{main:A,fallback:{overlayX:z,overlayY:re}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,wl.q)(1),(0,Or.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(r){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=r,this._tooltipInstance._markForCheck())}_invertPosition(r,h){return"above"===this.position||"below"===this.position?"top"===h?h="bottom":"bottom"===h&&(h="top"):"end"===r?r="start":"start"===r&&(r="end"),{x:r,y:h}}_updateCurrentPositionClass(r){const{overlayY:h,originX:A,originY:z}=r;let re;if(re="center"===h?this._dir&&"rtl"===this._dir.value?"end"===A?"left":"right":"start"===A?"left":"right":"bottom"===h&&"top"===z?"above":"below",re!==this._currentPosition){const ye=this._overlayRef;if(ye){const We=`${this._cssClassPrefix}-${r_}-`;ye.removePanelClass(We+this._currentPosition),ye.addPanelClass(We+re)}this._currentPosition=re}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",r=>{let h;this._setupPointerExitEventsIfNeeded(),void 0!==r.x&&void 0!==r.y&&(h=r),this.show(void 0,h)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",r=>{const h=r.targetTouches?.[0],A=h?{x:h.clientX,y:h.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,A),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const r=[];if(this._platformSupportsMouseEvents())r.push(["mouseleave",h=>{const A=h.relatedTarget;(!A||!this._overlayRef?.overlayElement.contains(A))&&this.hide()}],["wheel",h=>this._wheelListener(h)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const h=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};r.push(["touchend",h],["touchcancel",h])}this._addListeners(r),this._passiveListeners.push(...r)}_addListeners(r){r.forEach(([h,A])=>{this._elementRef.nativeElement.addEventListener(h,A,o_)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(r){if(this._isTooltipVisible()){const h=this._document.elementFromPoint(r.clientX,r.clientY),A=this._elementRef.nativeElement;h!==A&&!A.contains(h)&&this.hide()}}_disableNativeGesturesIfNecessary(){const r=this.touchGestures;if("off"!==r){const h=this._elementRef.nativeElement,A=h.style;("on"===r||"INPUT"!==h.nodeName&&"TEXTAREA"!==h.nodeName)&&(A.userSelect=A.msUserSelect=A.webkitUserSelect=A.MozUserSelect="none"),("on"===r||!h.draggable)&&(A.webkitUserDrag="none"),A.touchAction="none",A.webkitTapHighlightColor="transparent"}}}return c.\u0275fac=function(r){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),c})(),zC=(()=>{class c extends NC{constructor(r,h,A,z,re,ye,We,ct,$t,Kt,Oi,Ki){super(r,h,A,z,re,ye,We,ct,$t,Kt,Oi,Ki),this._tooltipComponent=VC,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(r){const A=!this._dir||"ltr"==this._dir.value;return"top"===r.originY?r.offsetY=-8:"bottom"===r.originY?r.offsetY=8:"start"===r.originX?r.offsetX=A?-8:8:"end"===r.originX&&(r.offsetX=A?8:-8),r}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(n_.aV),l.Y36(l.SBq),l.Y36(fl.mF),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36(Bl.t4),l.Y36(rc.$s),l.Y36(rc.tE),l.Y36(Rv),l.Y36(Eg.Is,8),l.Y36(mw,8),l.Y36(Bi.K0))},c.\u0275dir=l.lG2({type:c,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(r,h){2&r&&l.ekj("mat-mdc-tooltip-disabled",h.disabled)},exportAs:["matTooltip"],features:[l.qOj]}),c})(),BC=(()=>{class c{constructor(r,h){this._changeDetectorRef=r,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new wr.x,this._animationsDisabled="NoopAnimations"===h}show(r){null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},r)}hide(r){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},r)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:r}){(!r||!this._triggerElement.contains(r))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:r}){(r===this._showAnimation||r===this._hideAnimation)&&this._finalizeAnimation(r===this._showAnimation)}_cancelPendingAnimations(){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(r){r?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(r){const h=this._tooltip.nativeElement,A=this._showAnimation,z=this._hideAnimation;if(h.classList.remove(r?z:A),h.classList.add(r?A:z),this._isVisible=r,r&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const re=getComputedStyle(h);("0s"===re.getPropertyValue("animation-duration")||"none"===re.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}r&&this._onShow(),this._animationsDisabled&&(h.classList.add("_mat-animation-noopable"),this._finalizeAnimation(r))}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO),l.Y36(l.QbO,8))},c.\u0275dir=l.lG2({type:c}),c})(),VC=(()=>{class c extends BC{constructor(r,h,A){super(r,A),this._elementRef=h,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const r=this._elementRef.nativeElement.getBoundingClientRect();return r.height>24&&r.width>=200}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-tooltip-component"]],viewQuery:function(r,h){if(1&r&&l.Gf(Pv,7),2&r){let A;l.iGM(A=l.CRH())&&(h._tooltip=A.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(r,h){1&r&&l.NdJ("mouseleave",function(z){return h._handleMouseLeave(z)}),2&r&&l.Udp("zoom",h.isVisible()?1:null)},features:[l.qOj],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(r,h){1&r&&(l.TgZ(0,"div",0,1),l.NdJ("animationend",function(z){return h._handleAnimationEnd(z)}),l.TgZ(2,"div",2),l._uU(3),l.qZA()()),2&r&&(l.ekj("mdc-tooltip--multiline",h._isMultiline),l.Q6J("ngClass",h.tooltipClass),l.xp6(3),l.Oqu(h.message))},dependencies:[Bi.mk],styles:['.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mat-mdc-tooltip{--mdc-plain-tooltip-container-shape:4px;--mdc-plain-tooltip-supporting-text-line-height:16px}.mat-mdc-tooltip .mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color)}.mat-mdc-tooltip .mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__caret-surface-top,.mat-mdc-tooltip .mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color)}.mat-mdc-tooltip .mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),c})(),wf=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[Um],imports:[rc.rt,Bi.ez,n_.U8,Wn.BQ,Wn.BQ,fl.ZD]}),c})();function yw(c,m){if(1&c&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&c){const r=m.$implicit;l.Q6J("value",r),l.xp6(1),l.hij(" ",r," ")}}function vw(c,m){if(1&c){const r=l.EpF();l.TgZ(0,"mat-form-field",16)(1,"mat-select",17),l.NdJ("selectionChange",function(A){l.CHM(r);const z=l.oxw(2);return l.KtG(z._changePageSize(A.value))}),l.YNc(2,yw,2,2,"mat-option",18),l.qZA()()}if(2&c){const r=l.oxw(2);l.Q6J("appearance",r._formFieldAppearance)("color",r.color),l.xp6(1),l.Q6J("value",r.pageSize)("disabled",r.disabled)("aria-labelledby",r._pageSizeLabelId)("panelClass",r.selectConfig.panelClass||"")("disableOptionCentering",r.selectConfig.disableOptionCentering),l.xp6(1),l.Q6J("ngForOf",r._displayedPageSizeOptions)}}function Nv(c,m){if(1&c&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&c){const r=l.oxw(2);l.xp6(1),l.Oqu(r.pageSize)}}function jm(c,m){if(1&c&&(l.TgZ(0,"div",12)(1,"div",13),l._uU(2),l.qZA(),l.YNc(3,vw,3,8,"mat-form-field",14),l.YNc(4,Nv,2,1,"div",15),l.qZA()),2&c){const r=l.oxw();l.xp6(1),l.s9C("id",r._pageSizeLabelId),l.xp6(1),l.hij(" ",r._intl.itemsPerPageLabel," "),l.xp6(1),l.Q6J("ngIf",r._displayedPageSizeOptions.length>1),l.xp6(1),l.Q6J("ngIf",r._displayedPageSizeOptions.length<=1)}}function bw(c,m){if(1&c){const r=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){l.CHM(r);const A=l.oxw();return l.KtG(A.firstPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",22),l.qZA()()}if(2&c){const r=l.oxw();l.Q6J("matTooltip",r._intl.firstPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("matTooltipPosition","above")("disabled",r._previousButtonsDisabled()),l.uIk("aria-label",r._intl.firstPageLabel)}}function xw(c,m){if(1&c){const r=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",23),l.NdJ("click",function(){l.CHM(r);const A=l.oxw();return l.KtG(A.lastPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",24),l.qZA()()}if(2&c){const r=l.oxw();l.Q6J("matTooltip",r._intl.lastPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("matTooltipPosition","above")("disabled",r._nextButtonsDisabled()),l.uIk("aria-label",r._intl.lastPageLabel)}}let Cf=(()=>{class c{constructor(){this.changes=new wr.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(r,h,A)=>{if(0==A||0==h)return`0 of ${A}`;const z=r*h;return`${z+1} \u2013 ${z<(A=Math.max(A,0))?Math.min(z+h,A):z+h} of ${A}`}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const UC={provide:Cf,deps:[[new l.FiY,new l.tp0,Cf]],useFactory:function ww(c){return c||new Cf}},Mw=new l.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),Dw=(0,Wn.Id)((0,Wn.dB)(class{}));let Hm=(()=>{class c extends Dw{get pageIndex(){return this._pageIndex}set pageIndex(r){this._pageIndex=Math.max((0,xn.su)(r),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(r){this._length=(0,xn.su)(r),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(r){this._pageSize=Math.max((0,xn.su)(r),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(r){this._pageSizeOptions=(r||[]).map(h=>(0,xn.su)(h)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(r){this._hidePageSize=(0,xn.Ig)(r)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(r){this._showFirstLastButtons=(0,xn.Ig)(r)}constructor(r,h,A){if(super(),this._intl=r,this._changeDetectorRef=h,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new l.vpe,this._intlChanges=r.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),A){const{pageSize:z,pageSizeOptions:re,hidePageSize:ye,showFirstLastButtons:We}=A;null!=z&&(this._pageSize=z),null!=re&&(this._pageSizeOptions=re),null!=ye&&(this._hidePageSize=ye),null!=We&&(this._showFirstLastButtons=We)}}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const r=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(r)}previousPage(){if(!this.hasPreviousPage())return;const r=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(r)}firstPage(){if(!this.hasPreviousPage())return;const r=this.pageIndex;this.pageIndex=0,this._emitPageEvent(r)}lastPage(){if(!this.hasNextPage())return;const r=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(r)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const r=this.getNumberOfPages()-1;return this.pageIndex<r&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(r){const A=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/r)||0,this.pageSize=r,this._emitPageEvent(A)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((r,h)=>r-h),this._changeDetectorRef.markForCheck())}_emitPageEvent(r){this.page.emit({previousPageIndex:r,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return c.\u0275fac=function(r){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[l.qOj]}),c})(),Sw=0,s_=(()=>{class c extends Hm{constructor(r,h,A){super(r,h,A),this._pageSizeLabelId="mat-paginator-page-size-label-"+Sw++,this._formFieldAppearance=A?.formFieldAppearance||"outline"}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Cf),l.Y36(l.sBO),l.Y36(Mw,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[l.qOj],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],["hideSingleSelectionIndicator","",3,"value","disabled","aria-labelledby","panelClass","disableOptionCentering","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(r,h){1&r&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,jm,5,4,"div",2),l.TgZ(3,"div",3)(4,"div",4),l._uU(5),l.qZA(),l.YNc(6,bw,3,5,"button",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return h.previousPage()}),l.O4$(),l.TgZ(8,"svg",7),l._UZ(9,"path",8),l.qZA()(),l.kcU(),l.TgZ(10,"button",9),l.NdJ("click",function(){return h.nextPage()}),l.O4$(),l.TgZ(11,"svg",7),l._UZ(12,"path",10),l.qZA()(),l.YNc(13,xw,3,5,"button",11),l.qZA()()()),2&r&&(l.xp6(2),l.Q6J("ngIf",!h.hidePageSize),l.xp6(3),l.hij(" ",h._intl.getRangeLabel(h.pageIndex,h.pageSize,h.length)," "),l.xp6(1),l.Q6J("ngIf",h.showFirstLastButtons),l.xp6(1),l.Q6J("matTooltip",h._intl.previousPageLabel)("matTooltipDisabled",h._previousButtonsDisabled())("matTooltipPosition","above")("disabled",h._previousButtonsDisabled()),l.uIk("aria-label",h._intl.previousPageLabel),l.xp6(3),l.Q6J("matTooltip",h._intl.nextPageLabel)("matTooltipDisabled",h._nextButtonsDisabled())("matTooltipPosition","above")("disabled",h._nextButtonsDisabled()),l.uIk("aria-label",h._intl.nextPageLabel),l.xp6(3),l.Q6J("ngIf",h.showFirstLastButtons))},dependencies:[Bi.sg,Bi.O5,Zc.RK,vu.KE,kv.gD,Wn.ey,zC],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),c})(),Tw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[UC],imports:[Bi.ez,Zc.ot,kv.LD,wf]}),c})();function zv(c,m){if(1&c&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&c){const r=m.$implicit;l.Q6J("title",r.properties["Secondary ID"]),l.xp6(1),l.hij(" ",r.properties["Primary ID"]," ")}}function Iw(c,m){if(1&c){const r=l.EpF();l.TgZ(0,"div",9),l.NdJ("click",function(A){const re=l.CHM(r).$implicit,ye=l.oxw(2);return l.KtG(ye.selectCluster(A,re))}),l._uU(1),l.qZA()}if(2&c){const r=m.$implicit;l.xp6(1),l.hij(" ",null==r.properties?null:r.properties.point_count," ")}}function Bv(c,m){if(1&c&&(l.TgZ(0,"mgl-popup",10),l._UZ(1,"showcase-cluster-popup",11),l.qZA()),2&c){l.oxw();const r=l.MAs(2),h=l.oxw();l.Q6J("feature",h.selectedCluster),l.xp6(1),l.Q6J("clusterComponent",r)("selectedCluster",h.selectedCluster)}}function Aw(c,m){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2,3),l.TgZ(3,"mgl-markers-for-clusters",4),l.YNc(4,zv,2,2,"ng-template",5),l.YNc(5,Iw,2,1,"ng-template",6),l.qZA(),l.YNc(6,Bv,2,3,"mgl-popup",7),l.BQk()),2&c){const r=l.oxw();l.xp6(1),l.Q6J("data",r.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),l.xp6(5),l.Q6J("ngIf",r.selectedCluster)}}const a_=function(){return[3]},kw=function(c){return[c,40.66995747013945]};function Vv(c,m){if(1&c&&(l.TgZ(0,"mat-list-item"),l._uU(1),l.qZA()),2&c){const r=m.$implicit;l.xp6(1),l.hij(" ",r.properties["Primary ID"]," ")}}let Uv=(()=>{class c{ngOnInit(){var r=this;return xr(function*(){const h=yield H.e(45).then(H.t.bind(H,3045,19));setInterval(()=>{h.features.length&&h.features.pop(),r.earthquakes={...h}},500)})()}selectCluster(r,h){r.stopPropagation(),this.selectedCluster={geometry:h.geometry,properties:h.properties}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["clusterComponent",""],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Aw,7,5,"ng-container",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,a_))("center",l.VKq(6,kw,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",h.earthquakes))},dependencies:function(){return[Bi.O5,hn,Hr,$,Yi,vs,tr,Un,Pw,Bn]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]}),c})(),Pw=(()=>{class c{ngOnChanges(r){this.changePage(),r.selectedCluster&&!r.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(r){var h=this;return xr(function*(){let A=0;r&&(A=5*r.pageIndex),h.leaves=yield h.clusterComponent.getClusterLeaves(h.selectedCluster.properties.cluster_id,5,A)})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-cluster-popup"]],viewQuery:function(r,h){if(1&r&&l.Gf(s_,7),2&r){let A;l.iGM(A=l.CRH())&&(h.paginator=A.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[l.TTD],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"length","pageSize","page"]],template:function(r,h){1&r&&(l.TgZ(0,"mat-list"),l.YNc(1,Vv,2,1,"mat-list-item",0),l.qZA(),l.TgZ(2,"mat-paginator",1),l.NdJ("page",function(z){return h.changePage(z)}),l.qZA()),2&r&&(l.xp6(1),l.Q6J("ngForOf",h.leaves),l.xp6(1),l.Q6J("length",null==h.selectedCluster.properties?null:h.selectedCluster.properties.point_count)("pageSize",5))},dependencies:[Bi.sg,Om,fy,s_],encapsulation:2}),c})();function Ow(c,m){if(1&c){const r=l.EpF();l.ynx(0),l.TgZ(1,"mgl-control")(2,"button",3),l.NdJ("click",function(){l.CHM(r);const A=l.oxw();return l.KtG(A.alert("Hello"))}),l._uU(3," Hello "),l.qZA()(),l._UZ(4,"mgl-control",4)(5,"mgl-control",5),l.TgZ(6,"mgl-control",6),l.NdJ("geolocate",function(A){l.CHM(r);const z=l.oxw();return l.KtG(z.onGeolocate(A))}),l.qZA(),l._UZ(7,"mgl-control",7)(8,"mgl-control",8),l.BQk()}}let Rw=(()=>{class c{constructor(){this.visible=!0}alert(r){alert(r)}onGeolocate(r){console.log("geolocate",r)}toggleControls(){this.visible=!this.visible}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:4,consts:[[4,"ngIf"],["position","bottom-right"],["mat-flat-button","","color","accent",3,"click"],["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map"),l.YNc(1,Ow,9,0,"ng-container",0),l.TgZ(2,"mgl-control",1)(3,"button",2),l.NdJ("click",function(){return h.toggleControls()}),l._uU(4),l.qZA()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngIf",h.visible),l.xp6(3),l.hij(" ",h.visible?"Hide Controls":"Show Controls"," "))},dependencies:[Bi.O5,hn,Sr,fe,It,Ye,Wt,Wi,Zc.lW,Zc.cs,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const l_=function(){return[5]},Ef=function(c,m){return[c,m]};let jv=(()=>{class c{alert(r){alert(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.NdJ("click",function(){return h.alert("Foo")}),l.qZA()(),l.TgZ(3,"mgl-marker",1)(4,"div",3),l.NdJ("click",function(){return h.alert("Bar")}),l.qZA()(),l.TgZ(5,"mgl-marker",1)(6,"div",4),l.NdJ("click",function(){return h.alert("Baz")}),l.qZA()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,l_))("center",l.WLB(8,Ef,-65.017,-16.457)),l.xp6(1),l.Q6J("lngLat",l.WLB(11,Ef,-66.324462890625,-16.024695711685304)),l.xp6(2),l.Q6J("lngLat",l.WLB(14,Ef,-61.2158203125,-15.97189158092897)),l.xp6(2),l.Q6J("lngLat",l.WLB(17,Ef,-63.29223632812499,-18.28151823530889)))},dependencies:[hn,mi,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),c})();const Fw=function(){return[2]},Hv=function(){return[0,0]},Lw=function(c){return{type:"Point",coordinates:c}};let Nw=(()=>{class c{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(r){console.log("onDragStart",r)}onDragEnd(r){console.log("onDragEnd",r)}onDrag(r){console.log("onDrag",r),this.coordinates=r.lngLat.toArray()}changeColor(r){this.layerPaint={...this.layerPaint,"circle-color":r}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[[3,"zoom","center"],["id","point"],[3,"properties","geometry","mglDraggable","featureDragStart","featureDragEnd","featureDrag"],["id","point","type","circle","source","point",3,"paint","layerMouseEnter","layerMouseLeave"],["targetLayer",""],["position","bottom-left"],["appearance","outlined"]],template:function(r,h){if(1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1)(2,"mgl-feature",2),l.NdJ("featureDragStart",function(z){return h.onDragStart(z)})("featureDragEnd",function(z){return h.onDragEnd(z)})("featureDrag",function(z){return h.onDrag(z)}),l.qZA()(),l.TgZ(3,"mgl-layer",3,4),l.NdJ("layerMouseEnter",function(){return h.changeColor("#3bb2d0")})("layerMouseLeave",function(){return h.changeColor("#3887be")}),l.qZA(),l.TgZ(5,"mgl-control",5)(6,"mat-card",6)(7,"div"),l._uU(8),l.qZA(),l.TgZ(9,"div"),l._uU(10),l.qZA()()()()),2&r){const A=l.MAs(4);l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(9,Fw))("center",l.DdM(10,Hv)),l.xp6(2),l.Q6J("geometry",l.VKq(12,Lw,l.DdM(11,Hv)))("mglDraggable",A),l.xp6(1),l.Q6J("paint",h.layerPaint),l.xp6(5),l.hij("Longitude:\xa0",h.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",h.coordinates[1],"")}},dependencies:[hn,oo,$r,Hr,ha,Sr,gl,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const zw=function(){return[15]},Bw=function(c){return[c,37.830348]},Vw=function(){return{"line-join":"round","line-cap":"round"}},Uw=function(){return{"line-color":"#888","line-width":8}};let $v=(()=>{class c{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1),l._UZ(2,"mgl-feature",2),l.qZA(),l._UZ(3,"mgl-layer",3),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,zw))("center",l.VKq(8,Bw,-122.486052)),l.xp6(2),l.Q6J("geometry",h.geometry),l.xp6(1),l.Q6J("layout",l.DdM(10,Vw))("paint",l.DdM(11,Uw)))},dependencies:[hn,oo,Hr,ha,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),Gv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&r&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},dependencies:[hn,Sr,Wi,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const jw=function(){return[12]},Hw=function(){return[11.39085,47.27574]};let Zv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:7,consts:[[3,"zoom","center","pitch"],["id","terrainSource","url","https://demotiles.maplibre.org/terrain-tiles/tiles.json","tileSize","256"],["mglNavigation","","showCompass","true","showZoom","true","visualizePitch","true"],["mglTerrain","","source","terrainSource","exaggeration","5","position","top-right"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-raster-dem-source",1)(2,"mgl-control",2)(3,"mgl-control",3),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,jw))("center",l.DdM(6,Hw))("pitch",52))},dependencies:[hn,Xo,Sr,It,ir,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function $w(c,m){if(1&c&&(l.TgZ(0,"mgl-popup",3),l._UZ(1,"span",4),l.qZA()),2&c){const r=l.oxw();l.Q6J("lngLat",r.selectedLngLat)("closeOnClick",!1),l.xp6(1),l.Q6J("innerHTML",null==r.selectedElement?null:r.selectedElement.name,l.oJD)}}const Gw=function(){return[3]},Zw=function(c){return[c,38.907]},d_=function(){return{type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}},Wv=function(){return{"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"}};let u_=(()=>{class c{onClick(r){this.selectedLngLat=r.lngLat,this.selectedElement=r.features[0].properties}onMapClick(){this.selectedElement=null}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle","mapClick"],["id","states-layer","type","fill",3,"source","paint","layerMouseEnter","layerMouseLeave","layerClick"],[3,"lngLat","closeOnClick",4,"ngIf"],[3,"lngLat","closeOnClick"],[3,"innerHTML"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapClick",function(){return h.onMapClick()}),l.TgZ(1,"mgl-layer",1),l.NdJ("layerMouseEnter",function(){return h.cursorStyle="pointer"})("layerMouseLeave",function(){return h.cursorStyle=""})("layerClick",function(z){return h.onClick(z)}),l.qZA(),l.YNc(2,$w,2,3,"mgl-popup",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Gw))("center",l.VKq(9,Zw,-100.04))("cursorStyle",h.cursorStyle),l.xp6(1),l.Q6J("source",l.DdM(11,d_))("paint",l.DdM(12,Wv)),l.xp6(1),l.Q6J("ngIf",h.selectedElement&&h.selectedLngLat))},dependencies:[Bi.O5,hn,oo,$,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Ww(c,m){if(1&c&&(l.TgZ(0,"mgl-popup",4),l._UZ(1,"span",5),l.qZA()),2&c){const r=l.oxw();l.Q6J("feature",r.selectedPoint),l.xp6(1),l.Q6J("innerHTML",null==r.selectedPoint.properties?null:r.selectedPoint.properties.description,l.oJD)}}const qw=function(){return[11.15]},h_=function(c){return[c,38.907]},Yw=function(){return["get","icon"]},qv=function(c){return{"icon-image":c,"icon-allow-overlap":!0}};let Rh=(()=>{class c{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar_15"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art_gallery_15"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle_15"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star_15"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(r){this.selectedPoint=r.features[0]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:14,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerClick",function(z){return h.onClick(z)})("layerMouseEnter",function(){return h.cursorStyle="pointer"})("layerMouseLeave",function(){return h.cursorStyle=""}),l.qZA(),l.YNc(3,Ww,2,2,"mgl-popup",3),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,qw))("center",l.VKq(9,h_,-77.04))("cursorStyle",h.cursorStyle),l.xp6(1),l.Q6J("data",h.points),l.xp6(1),l.Q6J("layout",l.VKq(12,qv,l.DdM(11,Yw))),l.xp6(1),l.Q6J("ngIf",h.selectedPoint))},dependencies:[Bi.O5,hn,oo,Hr,$,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Yv=function(){return[3]},Kv=function(c){return[c,37.8]};let jC=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-popup",1)(2,"h1"),l._uU(3,"Hello world !"),l.qZA()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Yv))("center",l.VKq(8,Kv,-96)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,Kv,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},dependencies:[hn,$,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]}),c})();const p_=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Kw=function(c){return{satellite:c}},Xv=function(){return{visibility:"visible"}},Jv=function(){return{"raster-opacity":1}},Xw=function(c,m){return{id:"satellite",layout:c,minzoom:0,paint:m,"raster-opacity":1,source:"satellite",type:"raster"}},Qv=function(c){return[c]},f_=function(c,m){return{version:8,sources:c,layers:m}},eb=function(){return[9]},tb=function(){return[137.9150899566626,36.25956997955441]};let ib=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:19,consts:[[3,"zoom","center"]],template:function(r,h){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn(l.WLB(14,f_,l.VKq(5,Kw,l.DdM(4,p_)),l.VKq(12,Qv,l.WLB(9,Xw,l.DdM(7,Xv),l.DdM(8,Jv))))),l.Q6J("zoom",l.DdM(17,eb))("center",l.DdM(18,tb)))},dependencies:[hn,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const nb=function(){return[15]},rb=function(c){return[c,38.8895]},Qw=function(){return{"background-image":"url(https://maplibre.org/maplibre-gl-js/docs/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"}};let e1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[[3,"zoom","center"],[3,"lngLat"],["myMarker",""],[3,"ngStyle"],[3,"marker"]],template:function(r,h){if(1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1,2),l._UZ(3,"div",3),l.qZA(),l.TgZ(4,"mgl-popup",4),l._uU(5," Construction on the Washington Monument began in 1848. "),l.qZA()()),2&r){const A=l.MAs(2);l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,nb))("center",l.VKq(8,rb,-77.0353)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,rb,-77.0353)),l.xp6(2),l.Q6J("ngStyle",l.DdM(12,Qw)),l.xp6(1),l.Q6J("marker",A)}},dependencies:[Bi.PC,hn,mi,$,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const ob=["input"],HC=["*"];let g_=0;class sb{constructor(m,r){this.source=m,this.value=r}}const t1={provide:Xs.JU,useExisting:(0,l.Gpc)(()=>ub),multi:!0},n1=new l.OlP("MatRadioGroup"),r1=new l.OlP("mat-radio-default-options",{providedIn:"root",factory:function o1(){return{color:"accent"}}});let ab=(()=>{class c{get name(){return this._name}set name(r){this._name=r,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(r){this._labelPosition="before"===r?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(r){this._selected=r,this.value=r?r.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,xn.Ig)(r),this._markRadiosForCheck()}get required(){return this._required}set required(r){this._required=(0,xn.Ig)(r),this._markRadiosForCheck()}constructor(r){this._changeDetector=r,this._value=null,this._name="mat-radio-group-"+g_++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.vpe}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(r=>r===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(r=>{r.name=this.name,r._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(h=>{h.checked=this.value===h.value,h.checked&&(this._selected=h)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new sb(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(r=>r._markForCheck())}writeValue(r){this.value=r,this._changeDetector.markForCheck()}registerOnChange(r){this._controlValueAccessorChangeFn=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r,this._changeDetector.markForCheck()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO))},c.\u0275dir=l.lG2({type:c,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),c})();class lb{constructor(m){this._elementRef=m}}const cb=(0,Wn.Kr)((0,Wn.sb)(lb));let db=(()=>{class c extends cb{get checked(){return this._checked}set checked(r){const h=(0,xn.Ig)(r);this._checked!==h&&(this._checked=h,h&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!h&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),h&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===r),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(r){this._labelPosition=r}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(r){this._setDisabled((0,xn.Ig)(r))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(r){this._required=(0,xn.Ig)(r)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(r){this._color=r}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(r,h,A,z,re,ye,We,ct){super(h),this._changeDetector=A,this._focusMonitor=z,this._radioDispatcher=re,this._providerOverride=We,this._uniqueId="mat-radio-"+ ++g_,this.id=this._uniqueId,this.change=new l.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=r,this._noopAnimations="NoopAnimations"===ye,ct&&(this.tabIndex=(0,xn.su)(ct,0))}focus(r,h){h?this._focusMonitor.focusVia(this._inputElement,h,r):this._inputElement.nativeElement.focus(r)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((r,h)=>{r!==this.id&&h===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(r=>{!r&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new sb(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(r){r.stopPropagation()}_onInputInteraction(r){if(r.stopPropagation(),!this.checked&&!this.disabled){const h=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),h&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(r){this._onInputInteraction(r),this.disabled||this._inputElement.nativeElement.focus()}_setDisabled(r){this._disabled!==r&&(this._disabled=r,this._changeDetector.markForCheck())}_updateTabIndex(){const r=this.radioGroup;let h;if(h=r&&r.selected&&!this.disabled?r.selected===this?this.tabIndex:-1:this.tabIndex,h!==this._previousTabIndex){const A=this._inputElement?.nativeElement;A&&(A.setAttribute("tabindex",h+""),this._previousTabIndex=h)}}}return c.\u0275fac=function(r){l.$Z()},c.\u0275dir=l.lG2({type:c,viewQuery:function(r,h){if(1&r&&l.Gf(ob,5),2&r){let A;l.iGM(A=l.CRH())&&(h._inputElement=A.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[l.qOj]}),c})(),ub=(()=>{class c extends ab{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=l.n5z(c)))(h||c)}}(),c.\u0275dir=l.lG2({type:c,selectors:[["mat-radio-group"]],contentQueries:function(r,h,A){if(1&r&&l.Suo(A,hb,5),2&r){let z;l.iGM(z=l.CRH())&&(h._radios=z)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],exportAs:["matRadioGroup"],features:[l._Bn([t1,{provide:n1,useExisting:c}]),l.qOj]}),c})(),hb=(()=>{class c extends db{constructor(r,h,A,z,re,ye,We,ct){super(r,h,A,z,re,ye,We,ct)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(n1,8),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(rc.tE),l.Y36(Yp.A8),l.Y36(l.QbO,8),l.Y36(r1,8),l.$8M("tabindex"))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-mdc-radio-button"],hostVars:15,hostBindings:function(r,h){1&r&&l.NdJ("focus",function(){return h._inputElement.nativeElement.focus()}),2&r&&(l.uIk("id",h.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.ekj("mat-primary","primary"===h.color)("mat-accent","accent"===h.color)("mat-warn","warn"===h.color)("mat-mdc-radio-checked",h.checked)("_mat-animation-noopable",h._noopAnimations))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[l.qOj],ngContentSelectors:HC,decls:13,vars:17,consts:[[1,"mdc-form-field"],["formField",""],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"id","checked","disabled","required","change"],["input",""],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(r,h){if(1&r&&(l.F$t(),l.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3),l.NdJ("click",function(z){return h._onTouchTargetClick(z)}),l.qZA(),l.TgZ(4,"input",4,5),l.NdJ("change",function(z){return h._onInputInteraction(z)}),l.qZA(),l.TgZ(6,"div",6),l._UZ(7,"div",7)(8,"div",8),l.qZA(),l.TgZ(9,"div",9),l._UZ(10,"div",10),l.qZA()(),l.TgZ(11,"label",11),l.Hsn(12),l.qZA()()),2&r){const A=l.MAs(1);l.ekj("mdc-form-field--align-end","before"==h.labelPosition),l.xp6(2),l.ekj("mdc-radio--disabled",h.disabled),l.xp6(2),l.Q6J("id",h.inputId)("checked",h.checked)("disabled",h.disabled)("required",h.required),l.uIk("name",h.name)("value",h.value)("aria-label",h.ariaLabel)("aria-labelledby",h.ariaLabelledby)("aria-describedby",h.ariaDescribedby),l.xp6(5),l.Q6J("matRippleTrigger",A)("matRippleDisabled",h._isRippleDisabled())("matRippleCentered",!0),l.xp6(2),l.Q6J("for",h.inputId)}},dependencies:[Wn.wG],styles:['.mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mdc-radio[hidden]{display:none}.mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mdc-radio__native-control:checked+.mdc-radio__background,.mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio--disabled{cursor:default;pointer-events:none}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:disabled+.mdc-radio__background,[aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-radio-button{--mdc-radio-disabled-selected-icon-opacity:0.38;--mdc-radio-disabled-unselected-icon-opacity:0.38;--mdc-radio-state-layer-size:40px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{padding:calc((var(--mdc-radio-state-layer-size) - 20px) / 2)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-disabled-selected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-focus-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{top:calc(-1 * (var(--mdc-radio-state-layer-size) - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size) - 20px) / 2);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control{top:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);right:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);left:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}[dir=rtl] .mat-mdc-radio-touch-target{left:0;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0}),c})(),s1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Wn.BQ,Bi.ez,Wn.si,Wn.BQ]}),c})();const a1=function(){return[13]},l1=function(){return[4.899,52.372]};let mb=(()=>{class c{constructor(){this.layerId="streets"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(r){this.style="streets"===r?"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL":{version:8,sources:{raster:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],minzoom:0,maxzoom:15,scheme:"xyz",tileSize:256}},layers:[{id:"some-raster-layer-id",type:"raster",source:"raster",layout:{visibility:"visible"},paint:{"raster-opacity":1}}]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:7,consts:[[3,"zoom","center"],[1,"radio-group",3,"ngModel","ngModelChange"],["value","streets"],["value","code"]],template:function(r,h){1&r&&(l._UZ(0,"mgl-map",0),l.TgZ(1,"mat-radio-group",1),l.NdJ("ngModelChange",function(z){return h.changeStyle(z)}),l.TgZ(2,"mat-radio-button",2),l._uU(3,"streets"),l.qZA(),l.TgZ(4,"mat-radio-button",3),l._uU(5,"from code"),l.qZA()()),2&r&&(l.Akn(h.style),l.Q6J("zoom",l.DdM(5,a1))("center",l.DdM(6,l1)),l.xp6(1),l.Q6J("ngModel",h.layerId))},dependencies:[Xs.JJ,Xs.On,hn,ub,hb,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]}),c})();const pb=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},gb=function(){return{type:"raster-dem",url:"https://demotiles.maplibre.org/terrain-tiles/tiles.json",tileSize:256}},_b=function(c,m){return{satelliteSource:c,terrainSource:m}},yb=function(){return{id:"satellite",type:"raster",source:"satelliteSource"}},vb=function(c){return[c]},c1=function(){return{source:"terrainSource",exaggeration:1}},$C=function(c,m,r){return{version:8,sources:c,layers:m,terrain:r}},GC=function(){return[12]},bb=function(){return[11.39085,47.27574]};let d1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:20,consts:[[3,"zoom","center","pitch"]],template:function(r,h){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn(l.kEZ(14,$C,l.WLB(7,_b,l.DdM(5,pb),l.DdM(6,gb)),l.VKq(11,vb,l.DdM(10,yb)),l.DdM(13,c1))),l.Q6J("zoom",l.DdM(18,GC))("center",l.DdM(19,bb))("pitch",52))},dependencies:[hn,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const u1=function(){return[12]},h1=function(){return[11.39085,47.27574]};let m1=(()=>{class c{constructor(){this.mapLibreExampleSource="https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",this.terrainSpec={source:"terrainSource",exaggeration:1}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center","pitch","terrain"],["id","terrainSource","url","https://demotiles.maplibre.org/terrain-tiles/tiles.json","tileSize","256"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-raster-dem-source",1),l.qZA()),2&r&&(l.Akn(h.mapLibreExampleSource),l.Q6J("zoom",l.DdM(6,u1))("center",l.DdM(7,h1))("pitch",52)("terrain",h.terrainSpec))},dependencies:[hn,Xo,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Gm=["button"],p1=["*"],Mf=new l.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),ac=new l.OlP("MatButtonToggleGroup");let Zm=0;class Fh{constructor(m,r){this.source=m,this.value=r}}const _1=(0,Wn.Kr)(class{});let xb=(()=>{class c extends _1{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(r){this._appearance=r}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(r){const h=(0,xn.Ig)(r);h!==this._checked&&(this._checked=h,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(r){this._disabled=(0,xn.Ig)(r)}constructor(r,h,A,z,re,ye){super(),this._changeDetectorRef=h,this._elementRef=A,this._focusMonitor=z,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.vpe;const We=Number(re);this.tabIndex=We||0===We?We:null,this.buttonToggleGroup=r,this.appearance=ye&&ye.appearance?ye.appearance:"standard"}ngOnInit(){const r=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+Zm++,r&&(r._isPrechecked(this)?this.checked=!0:r._isSelected(this)!==this._checked&&r._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const r=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),r&&r._isSelected(this)&&r._syncButtonToggle(this,!1,!1,!0)}focus(r){this._buttonElement.nativeElement.focus(r)}_onButtonClick(){const r=!!this._isSingleSelector()||!this._checked;r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new Fh(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(ac,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(rc.tE),l.$8M("tabindex"),l.Y36(Mf,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-button-toggle"]],viewQuery:function(r,h){if(1&r&&l.Gf(Gm,5),2&r){let A;l.iGM(A=l.CRH())&&(h._buttonElement=A.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(r,h){1&r&&l.NdJ("focus",function(){return h.focus()}),2&r&&(l.uIk("aria-label",null)("aria-labelledby",null)("id",h.id)("name",null),l.ekj("mat-button-toggle-standalone",!h.buttonToggleGroup)("mat-button-toggle-checked",h.checked)("mat-button-toggle-disabled",h.disabled)("mat-button-toggle-appearance-standard","standard"===h.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.qOj],ngContentSelectors:p1,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,h){if(1&r&&(l.F$t(),l.TgZ(0,"button",0,1),l.NdJ("click",function(){return h._onButtonClick()}),l.TgZ(2,"span",2),l.Hsn(3),l.qZA()(),l._UZ(4,"span",3)(5,"span",4)),2&r){const A=l.MAs(1);l.Q6J("id",h.buttonId)("disabled",h.disabled||null),l.uIk("tabindex",h.disabled?-1:h.tabIndex)("aria-pressed",h.checked)("name",h._getButtonName())("aria-label",h.ariaLabel)("aria-labelledby",h.ariaLabelledby),l.xp6(5),l.Q6J("matRippleTrigger",A)("matRippleDisabled",h.disableRipple||h.disabled)}},dependencies:[Wn.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{--mat-legacy-button-toggle-height:36px;--mat-legacy-button-toggle-shape:2px;--mat-legacy-button-toggle-focus-state-layer-opacity:1;position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{--mat-standard-button-toggle-shape:4px;--mat-standard-button-toggle-hover-state-layer-opacity:0.04;--mat-standard-button-toggle-focus-state-layer-opacity:0.12;border-radius:var(--mat-standard-button-toggle-shape);border:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-text-font)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard{--mat-standard-button-toggle-shape:4px;--mat-standard-button-toggle-hover-state-layer-opacity:0.04;--mat-standard-button-toggle-focus-state-layer-opacity:0.12;color:var(--mat-standard-button-toggle-text-color);background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-text-font)}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color)}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color);background-color:var(--mat-standard-button-toggle-selected-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color)}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity)}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity)}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),c})(),Df=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Wn.BQ,Wn.si,Wn.BQ]}),c})();const wb=function(){return[3]},y1=function(c,m){return[c,m]},__=function(){return["https://demotiles.maplibre.org/tiles/{z}/{x}/{y}.pbf"]},b1=function(){return{"line-color":"blue"}};let x1=(()=>{class c{constructor(){this.layouts={countries:{visibility:"none"},names:{visibility:"none","text-field":"{name:latin}","text-size":30}}}ngOnInit(){}toggleLayer(r){this.layouts[r.value]={...this.layouts[r.value],visibility:"visible"===this.layouts[r.value].visibility?"none":"visible"}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:10,vars:16,consts:[[3,"zoom","center"],["id","countries",3,"tiles"],["id","everything","url","https://api.maptiler.com/tiles/v3/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"],["id","countries-layer","type","line","source","countries","sourceLayer","countries",3,"layout","paint"],["id","names","type","symbol","source","everything","sourceLayer","place",3,"layout"],[1,"menu"],["value","names",3,"checked","change"],["value","countries",3,"checked","change"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-vector-source",1)(2,"mgl-vector-source",2)(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA(),l.TgZ(5,"div",5)(6,"mat-button-toggle",6),l.NdJ("change",function(z){return h.toggleLayer(z)}),l._uU(7,"countries names"),l.qZA(),l.TgZ(8,"mat-button-toggle",7),l.NdJ("change",function(z){return h.toggleLayer(z)}),l._uU(9,"countries border"),l.qZA()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(10,wb))("center",l.WLB(11,y1,-71.97722138410576,-13.517379300798098)),l.xp6(1),l.Q6J("tiles",l.DdM(14,__)),l.xp6(2),l.Q6J("layout",h.layouts.countries)("paint",l.DdM(15,b1)),l.xp6(1),l.Q6J("layout",h.layouts.names),l.xp6(2),l.Q6J("checked",!0),l.xp6(2),l.Q6J("checked",!0))},dependencies:[hn,oo,Ga,xb,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]}),c})();const Cb=function(){return[12]},w1=function(c){return[c,38.897]},C1=function(){return{padding:20}},Eb=function(){return{"line-color":"#BF93E4","line-width":5}},Sf=function(){return{"line-join":"round","line-cap":"round"}};let E1=(()=>{class c{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const r=this.source.data.features[0].geometry.coordinates;this.bounds=r.reduce((h,A)=>h.extend(A),new Pn.LngLatBounds(r[0],r[0]))}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:15,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return h.zoomToBounds()}),l._uU(3," Zoom to bounds "),l.qZA()(),l._UZ(4,"mgl-layer",2),l.qZA()),2&r&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(9,Cb))("center",l.VKq(10,w1,-77.0214))("fitBounds",h.bounds)("fitBoundsOptions",l.DdM(12,C1)),l.xp6(4),l.Q6J("source",h.source)("paint",l.DdM(13,Eb))("layout",l.DdM(14,Sf)))},dependencies:[hn,oo,Sr,Zc.lW,Un,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),Mb=(()=>{class c{constructor(r){this.router=r}canActivate(r){return!!Rf[0].children.some(h=>h.path===r.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(ae.F0))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const Tb="https://stackblitz.com",Ib=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],Ab=["project","search","ports","settings"],kb=["light","dark"],M1=["editor","preview"],Pb={clickToLoad:c=>Pd("ctl",c),devToolsHeight:c=>If("devtoolsheight",c),forceEmbedLayout:c=>Pd("embed",c),hideDevTools:c=>Pd("hidedevtools",c),hideExplorer:c=>Pd("hideExplorer",c),hideNavigation:c=>Pd("hideNavigation",c),openFile:c=>Rb("file",c),showSidebar:c=>function Ob(c,m){return"boolean"==typeof m?`${c}=${m?"1":"0"}`:""}("showSidebar",c),sidebarView:c=>Wm("sidebarView",c,Ab),startScript:c=>Rb("startScript",c),terminalHeight:c=>If("terminalHeight",c),theme:c=>Wm("theme",c,kb),view:c=>Wm("view",c,M1),zenMode:c=>Pd("zenMode",c)};function Tf(c={}){const m=Object.entries(c).map(([r,h])=>null!=h&&Pb.hasOwnProperty(r)?Pb[r](h):"").filter(Boolean);return m.length?`?${m.join("&")}`:""}function Pd(c,m){return!0===m?`${c}=1`:""}function If(c,m){if("number"==typeof m&&!Number.isNaN(m)){const r=Math.min(100,Math.max(0,m));return`${c}=${encodeURIComponent(Math.round(r))}`}return""}function Wm(c,m="",r=[]){return r.includes(m)?`${c}=${encodeURIComponent(m)}`:""}function Rb(c,m){return(Array.isArray(m)?m:[m]).filter(h=>"string"==typeof h&&""!==h.trim()).map(h=>`${c}=${encodeURIComponent(h)}`).join("&")}function Fb(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function b_(c,m){const r={forceEmbedLayout:!0};return m&&"object"==typeof m&&Object.assign(r,m),`${x_(r)}${c}${Tf(r)}`}function x_(c={}){return("string"==typeof c.origin?c.origin:Tb).replace(/\/$/,"")}function qm(c,m,r){if(!m||!c||!c.parentNode)throw new Error("Invalid Element");c.id&&(m.id=c.id),c.className&&(m.className=c.className),function Lb(c,m={}){const r=Object.hasOwnProperty.call(m,"height")?`${m.height}`:"300",h=Object.hasOwnProperty.call(m,"width")?`${m.width}`:void 0;c.setAttribute("height",r),h?c.setAttribute("width",h):c.setAttribute("style","width:100%;")}(m,r),c.replaceWith(m)}function Af(c){if("string"==typeof c){const m=document.getElementById(c);if(!m)throw new Error(`Could not find element with id '${c}'`);return m}if(c instanceof HTMLElement)return c;throw new Error(`Invalid element: ${c}`)}class Nb{constructor(m){this.pending={},this.port=m,this.port.onmessage=this.messageListener.bind(this)}request({type:m,payload:r}){return new Promise((h,A)=>{const z=Fb();this.pending[z]={resolve:h,reject:A},this.port.postMessage({type:m,payload:{...r,__reqid:z}})})}messageListener(m){if("string"!=typeof m.data.payload?.__reqid)return;const{type:r,payload:h}=m.data,{__reqid:A,__success:z,__error:re}=h;this.pending[A]&&(z?this.pending[A].resolve(this.cleanResult(h)):this.pending[A].reject(re?`${r}: ${re}`:r),delete this.pending[A])}cleanResult(m){const r={...m};return delete r.__reqid,delete r.__success,delete r.__error,Object.keys(r).length?r:null}}class D1{constructor(m,r){this.editor={openFile:h=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:h}}),setCurrentFile:h=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:h}}),setTheme:h=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:h}}),setView:h=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:h}}),showSidebar:(h=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:h}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(h=>h?.url??null),setUrl:(h="/")=>{if("string"!=typeof h||!h.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${h}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:h}})}},this._rdc=new Nb(m),Object.defineProperty(this.preview,"origin",{value:"string"==typeof r.previewOrigin?r.previewOrigin:null,writable:!1})}applyFsDiff(m){const r=h=>null!==h&&"object"==typeof h;if(!r(m)||!r(m.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(m.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:m})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}const Ym=[];class zb{constructor(m){this.id=Fb(),this.element=m,this.pending=new Promise((r,h)=>{const A=({data:ct,ports:$t})=>{"SDK_INIT_SUCCESS"===ct?.action&&ct.id===this.id&&(this.vm=new D1($t[0],ct.payload),r(this.vm),re())},z=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function re(){window.clearInterval(We),window.removeEventListener("message",A)}window.addEventListener("message",A),z();let ye=0;const We=window.setInterval(()=>{if(!this.vm)return ye>=20?(re(),h("Timeout: Unable to establish a connection with the StackBlitz VM"),void Ym.forEach((ct,$t)=>{ct.id===this.id&&Ym.splice($t,1)})):(ye++,void z());re()},500)}),Ym.push(this)}}function va({template:c,title:m,description:r,dependencies:h,files:A,settings:z}){if(!Ib.includes(c)){const ct=Ib.map($t=>`'${$t}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${ct}`)}const re=[],ye=(ct,$t,Kt="")=>{re.push(function Bb(c,m){const r=document.createElement("input");return r.type="hidden",r.name=c,r.value=m,r}(ct,"string"==typeof $t?$t:Kt))};ye("project[title]",m),"string"==typeof r&&r.length>0&&ye("project[description]",r),ye("project[template]",c,"javascript"),h&&("node"===c?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):ye("project[dependencies]",JSON.stringify(h))),z&&ye("project[settings]",JSON.stringify(z)),Object.entries(A).forEach(([ct,$t])=>{ye(`project[files][${function Vb(c){return c.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}(ct)}]`,$t)});const We=document.createElement("form");return We.method="POST",We.setAttribute("style","display:none!important;"),We.append(...re),We}function Pf(c){return c?.contentWindow?((c=>{const m=c instanceof Element?"element":"id";return Ym.find(r=>r[m]===c)??null})(c)??new zb(c)).pending:Promise.reject("Provided element is not an iframe.")}const C__embedProject=function w_(c,m,r){const h=Af(c),A=function Lh(c,m){const r=va(c);return r.action=b_("/run",m),r.id="sb_run",`<!doctype html>\n<html>\n<head><title></title></head>\n<body>\n  ${r.outerHTML}\n  <script>document.getElementById('${r.id}').submit();<\/script>\n</body>\n</html>`}(m,r),z=document.createElement("iframe");return qm(h,z,r),z.contentDocument?.write(A),Pf(z)};var E_=H(9315),M_=H(2096),A1=H(7715),D_=H(940),k1=H(4716);function S_(c){return c.replace(/(^\w|-\w)/g,jb)}function jb(c){return c.replace(/-/,"").toUpperCase()}var Nh=H(9862);const Of="app/demo/examples/";let qC=(()=>{class c{constructor(r){this.http=r,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(r){let h=this.fileCache.get(r);return h||(h=this.http.get(`${Of}${r}.component.ts`,{responseType:"text"}).pipe((0,cs.w)(A=>this.loadAdditionnalFilesIfNecessary(A)),(0,D_.d)(1)),this.fileCache.set(r,h),h)}loadAdditionnalFilesIfNecessary(r){const h=/'\.\/([\w-.]+\.\w+)'/g;let A;const z=[],re={"src/demo.ts":r};for(;A=h.exec(r);)z.push(this.loadFile(A[1]));return z.length?(0,E_.D)(z).pipe((0,$o.U)(ye=>({...Object.assign({},...ye),...re}))):(0,M_.of)(re)}loadFile(r){let h=this.fileCache.get(r);return h||(h=this.http.get(`${Of}${r}`,{responseType:"text"}).pipe((0,$o.U)(A=>({[`src/${r}`]:A})),(0,D_.d)(1)),this.fileCache.set(r,h),h)}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(Nh.eN))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const Hb=["determinateSpinner"];function O1(c,m){if(1&c&&(l.O4$(),l.TgZ(0,"svg",11),l._UZ(1,"circle",12),l.qZA()),2&c){const r=l.oxw();l.uIk("viewBox",r._viewBox()),l.xp6(1),l.Udp("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeCircumference()/2,"px")("stroke-width",r._circleStrokeWidth(),"%"),l.uIk("r",r._circleRadius())}}const $b=(0,Wn.pj)(class{constructor(c){this._elementRef=c}},"primary"),zh=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function R1(){return{diameter:T_}}}),T_=100;let YC=(()=>{class c extends $b{constructor(r,h,A){super(r),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=T_,this._noopAnimations="NoopAnimations"===h&&!!A&&!A._forceAnimations,A&&(A.color&&(this.color=this.defaultColor=A.color),A.diameter&&(this.diameter=A.diameter),A.strokeWidth&&(this.strokeWidth=A.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(r){this._value=Math.max(0,Math.min(100,(0,xn.su)(r)))}get diameter(){return this._diameter}set diameter(r){this._diameter=(0,xn.su)(r)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(r){this._strokeWidth=(0,xn.su)(r)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const r=2*this._circleRadius()+this.strokeWidth;return`0 0 ${r} ${r}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(l.QbO,8),l.Y36(zh))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,h){if(1&r&&l.Gf(Hb,5),2&r){let A;l.iGM(A=l.CRH())&&(h._determinateCircle=A.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:16,hostBindings:function(r,h){2&r&&(l.uIk("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===h.mode?h.value:null)("mode",h.mode),l.Udp("width",h.diameter,"px")("height",h.diameter,"px")("--mdc-circular-progress-size",h.diameter+"px")("--mdc-circular-progress-active-indicator-width",h.diameter+"px"),l.ekj("_mat-animation-noopable",h._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===h.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,h){if(1&r&&(l.YNc(0,O1,2,8,"ng-template",null,0,l.W1O),l.TgZ(2,"div",1,2),l.O4$(),l.TgZ(4,"svg",3),l._UZ(5,"circle",4),l.qZA()(),l.kcU(),l.TgZ(6,"div",5)(7,"div",6)(8,"div",7),l.GkF(9,8),l.qZA(),l.TgZ(10,"div",9),l.GkF(11,8),l.qZA(),l.TgZ(12,"div",10),l.GkF(13,8),l.qZA()()()),2&r){const A=l.MAs(1);l.xp6(4),l.uIk("viewBox",h._viewBox()),l.xp6(1),l.Udp("stroke-dasharray",h._strokeCircumference(),"px")("stroke-dashoffset",h._strokeDashOffset(),"px")("stroke-width",h._circleStrokeWidth(),"%"),l.uIk("r",h._circleRadius()),l.xp6(4),l.Q6J("ngTemplateOutlet",A),l.xp6(2),l.Q6J("ngTemplateOutlet",A),l.xp6(2),l.Q6J("ngTemplateOutlet",A)}},dependencies:[Bi.tP],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{--mdc-circular-progress-active-indicator-width:4px;--mdc-circular-progress-size:48px}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),c})(),XC=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Bi.ez,Wn.BQ]}),c})();const F1=["container"];function L1(c,m){1&c&&(l.TgZ(0,"div",2),l._UZ(1,"mat-spinner")(2,"div"),l.qZA())}let N1=(()=>{class c{constructor(r,h,A,z,re){this.zone=r,this.activatedRoute=h,this.demoFileLoaderService=A,this.http=z,this.ChangeDetectorRef=re,this.loading=!0,this.projectbase$=(0,E_.D)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe((0,D_.d)(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,Wl.b)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,cs.w)(r=>(0,E_.D)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(r.demoUrl),(0,M_.of)(r.demoUrl)])),(0,cs.w)(([r,h,A])=>(0,A1.D)(this.openExample(r,h,A)).pipe((0,k1.x)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(r,h,A){var z=this;return xr(function*(){if(z.vm)return void(yield z.vm.applyFsDiff({create:h,destroy:[]}));const re=function P1(c,m,r){return{files:{"src/main.ts":c[0].replace(/###/g,S_(r)+"Component"),"angular.json":c[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n",...m},title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","maplibre-gl":"*","@maplibre/maplibre-gl-style-spec":"*","@maplibre/ngx-maplibre-gl":"*","@angular/cdk":"^16","@angular/material":"^16","@angular/animations":"^16","@angular/forms":"^16","@angular/common":"^16","@angular/compiler":"^16","@angular/core":"^16","@angular/platform-browser":"^16","@angular/platform-browser-dynamic":"^16","@angular/router":"^16",url:"*",querystring:"*",events:"*","@types/supercluster":"*","@types/geojson":"*"}}}(r,h,A);yield z.zone.runOutsideAngular(xr(function*(){z.vm=yield C__embedProject(z.stackblitzContainer.nativeElement,re,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.R0b),l.Y36(ae.gz),l.Y36(qC),l.Y36(Nh.eN),l.Y36(l.sBO))},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],viewQuery:function(r,h){if(1&r&&l.Gf(F1,5),2&r){let A;l.iGM(A=l.CRH())&&(h.stackblitzContainer=A.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(r,h){1&r&&(l._UZ(0,"div",null,0),l.YNc(2,L1,3,0,"div",1)),2&r&&(l.xp6(2),l.Q6J("ngIf",h.loading))},dependencies:[Bi.O5,YC],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),c})();var wn=function(c){return c.STYLES="Styles",c.LAYERS="Layers",c.SOURCES="Sources",c.USER_INTERACTION="User interaction",c.CAMERA="Camera",c.CONTROLS_AND_OVERLAYS="Controls and overlays",c.TERRAIN="3D Terrain",c}(wn||{});const Rf=[{path:"",component:Lm,children:[{path:"edit/:demoUrl",component:N1,canActivate:[Mb]},{path:"display-map",component:Yg,data:{label:"Display a map",cat:wn.STYLES}},{path:"custom-style-id",component:Sx,data:{label:"Display a map with a custom style",cat:wn.STYLES}},{path:"set-style",component:mb,data:{label:"Change a map's style",cat:wn.STYLES}},{path:"satellite-map",component:ib,data:{label:"Display a satellite map",cat:wn.STYLES}},{path:"add-image-generated",component:Ay,data:{label:"Add a generated icon to the map",cat:wn.LAYERS}},{path:"add-image",component:px,data:{label:"Add an icon to the map",cat:wn.LAYERS}},{path:"toggle-layers",component:x1,data:{label:"Show and hide layers",cat:wn.LAYERS}},{path:"3d-buildings",component:ex,data:{label:"Display 3d buildings",cat:wn.LAYERS}},{path:"cluster",component:vx,data:{label:"Create and style clusters",cat:wn.LAYERS}},{path:"heatmap",component:e_,data:{label:"Create a heatmap layer",cat:wn.LAYERS}},{path:"geojson-line",component:yv,data:{label:"Add a GeoJSON line",cat:wn.LAYERS}},{path:"ngx-geojson-line",component:$v,data:{label:"[NGX] Add a GeoJSON line",cat:wn.LAYERS}},{path:"custom-marker-icons",component:Mx,data:{label:"Add custom icons with Markers",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:jv,data:{label:"[NGX] Add custom icons with Markers",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:ow,data:{label:"Update a feature in realtime",cat:wn.SOURCES}},{path:"live-update-image-source",component:Sv,data:{label:"Update an image source in realtime",cat:wn.SOURCES}},{path:"popup",component:jC,data:{label:"Display a popup",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:e1,data:{label:"Attach a popup to a marker instance",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:Jg,data:{label:"View a fullscreen map",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:dw,data:{label:"Display map navigation controls",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:Tv,data:{label:"Locate the user",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:Ly,data:{label:"Change the default position for attribution",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:Gv,data:{label:"[NGX] Show scale information",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:Rw,data:{label:"[NGX] Add a custom control",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:Mv,data:{label:"Display a non-interactive map",cat:wn.USER_INTERACTION}},{path:"language-switch",component:iw,data:{label:"Change a map's language",cat:wn.USER_INTERACTION}},{path:"center-on-symbol",component:Ny,data:{label:"Center the map on a clicked symbol",cat:wn.USER_INTERACTION}},{path:"ngx-drag-a-point",component:Nw,data:{label:"[NGX] Create a draggable point",cat:wn.USER_INTERACTION}},{path:"drag-a-marker",component:ov,data:{label:"Create a draggable marker",cat:wn.USER_INTERACTION}},{path:"hover-styles",component:t_,data:{label:"Create a hover effect",cat:wn.USER_INTERACTION}},{path:"popup-on-click",component:Rh,data:{label:"Display a popup on click",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:E1,data:{label:"Fit to the bounds of a LineString",cat:wn.USER_INTERACTION}},{path:"cluster-html",component:$y,data:{label:"Display HTML clusters with custom properties",cat:wn.LAYERS}},{path:"ngx-cluster-html",component:Uv,data:{label:"[NGX] Display HTML clusters with custom properties",cat:wn.LAYERS}},{path:"polygon-popup-on-click",component:u_,data:{label:"Show polygon information on click",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:Oy,data:{label:"Generate and add a missing icon to the map",cat:wn.STYLES}},{path:"custom-attribution",component:Ky,data:{label:"Add custom attributions",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:Xy,data:{label:"Add custom localization for controls",cat:wn.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:lw,data:{label:"Marker alignment options",cat:wn.CAMERA}},{path:"terrain-style",component:d1,data:{label:"Initialize 3D Terrain using style",cat:wn.TERRAIN}},{path:"terrain-control",component:Zv,data:{label:"Terrain Control",cat:wn.TERRAIN}},{path:"terrain",component:m1,data:{label:"[NGX] Initialize 3D Terrain declaratively",cat:wn.TERRAIN}},{path:"**",redirectTo:"display-map"}]}],z1=function(){return[2]},Gb=[{path:"",component:(()=>{class c{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:r=>r}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const r=this.center[0];0===r?this.center=[90,0]:90===r?this.center=[180,0]:180===r?this.center=[-90,0]:-90===r&&(this.center=[0,0])}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"zoom","center","centerWithPanTo","panToOptions","interactive","mapLoad","moveEnd"],[1,"main"],["svgIcon","ngx-maplibre-gl-red",1,"logo"]],template:function(r,h){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(){return h.moveCenter()})("moveEnd",function(){return h.moveCenter()}),l.qZA(),l.TgZ(1,"div",1),l._UZ(2,"mat-icon",2),l.TgZ(3,"h1"),l._uU(4,"Angular binding of maplibre-gl-js"),l.qZA()()),2&r&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,z1))("center",h.center)("centerWithPanTo",!0)("panToOptions",h.panToOptions)("interactive",!1))},dependencies:[hn,He.Hw],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]}),c})(),pathMatch:"full"}],U1=[{path:"",component:H(2627).$,children:[{path:"demo",children:Rf},...Gb,{path:"doc",loadChildren:()=>H.e(257).then(H.bind(H,3257)).then(c=>c.DocModule)}]},{path:"**",redirectTo:""}];let Zb=(()=>{class c{constructor(r,h){r.addSvgIcon("ngx-maplibre-gl",h.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl.svg")),r.addSvgIcon("ngx-maplibre-gl-red",h.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl-red.svg")),r.addSvgIcon("github",h.bypassSecurityTrustResourceUrl("assets/github.svg"))}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(He.jv),l.LFG(C.H7))},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[C.b2,Ur,He.Ps,ae.Bz.forRoot(U1,{}),Ha,Za.x]}),c})(),j1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[Mb],imports:[ae.Bz,Nh.JF,Bi.ez,Xs.u5,Ha,Za.x,s1,Df,Zc.ot,gy,_f,XC,_C,He.Ps,by,Tw,vC]}),c})(),Wb=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Ha,He.Ps]}),c})(),qb=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c,bootstrap:[v]}),c.\u0275inj=l.cJS({imports:[ae.Bz,Zb,Wb,j1]}),c})();(0,l.G48)(),C.q6().bootstrapModule(qb).catch(c=>console.log(c))},5619:(gi,mt,H)=>{"use strict";H.d(mt,{X:()=>l});var C=H(8645);class l extends C.x{constructor(v){super(),this._value=v}get value(){return this.getValue()}_subscribe(v){const He=super._subscribe(v);return!He.closed&&v.next(this._value),He}getValue(){const{hasError:v,thrownError:He,_value:ne}=this;if(v)throw He;return this._throwIfClosed(),ne}next(v){super.next(this._value=v)}}},5592:(gi,mt,H)=>{"use strict";H.d(mt,{y:()=>Pe});var C=H(305),l=H(7394),ae=H(4850),v=H(8407),He=H(2653),ne=H(4674),Ge=H(1441);let Pe=(()=>{class Le{constructor(Xe){Xe&&(this._subscribe=Xe)}lift(Xe){const lt=new Le;return lt.source=this,lt.operator=Xe,lt}subscribe(Xe,lt,bt){const jt=function it(Le){return Le&&Le instanceof C.Lv||function Ue(Le){return Le&&(0,ne.m)(Le.next)&&(0,ne.m)(Le.error)&&(0,ne.m)(Le.complete)}(Le)&&(0,l.Nn)(Le)}(Xe)?Xe:new C.Hp(Xe,lt,bt);return(0,Ge.x)(()=>{const{operator:ni,source:Ti}=this;jt.add(ni?ni.call(jt,Ti):Ti?this._subscribe(jt):this._trySubscribe(jt))}),jt}_trySubscribe(Xe){try{return this._subscribe(Xe)}catch(lt){Xe.error(lt)}}forEach(Xe,lt){return new(lt=qe(lt))((bt,jt)=>{const ni=new C.Hp({next:Ti=>{try{Xe(Ti)}catch(qt){jt(qt),ni.unsubscribe()}},error:jt,complete:bt});this.subscribe(ni)})}_subscribe(Xe){var lt;return null===(lt=this.source)||void 0===lt?void 0:lt.subscribe(Xe)}[ae.L](){return this}pipe(...Xe){return(0,v.U)(Xe)(this)}toPromise(Xe){return new(Xe=qe(Xe))((lt,bt)=>{let jt;this.subscribe(ni=>jt=ni,ni=>bt(ni),()=>lt(jt))})}}return Le.create=et=>new Le(et),Le})();function qe(Le){var et;return null!==(et=Le??He.config.Promise)&&void 0!==et?et:Promise}},8645:(gi,mt,H)=>{"use strict";H.d(mt,{x:()=>Ge});var C=H(5592),l=H(7394);const v=(0,H(2306).d)(qe=>function(){qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=H(9039),ne=H(1441);let Ge=(()=>{class qe extends C.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(it){const Le=new Pe(this,this);return Le.operator=it,Le}_throwIfClosed(){if(this.closed)throw new v}next(it){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Le of this.currentObservers)Le.next(it)}})}error(it){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=it;const{observers:Le}=this;for(;Le.length;)Le.shift().error(it)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:it}=this;for(;it.length;)it.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var it;return(null===(it=this.observers)||void 0===it?void 0:it.length)>0}_trySubscribe(it){return this._throwIfClosed(),super._trySubscribe(it)}_subscribe(it){return this._throwIfClosed(),this._checkFinalizedStatuses(it),this._innerSubscribe(it)}_innerSubscribe(it){const{hasError:Le,isStopped:et,observers:Xe}=this;return Le||et?l.Lc:(this.currentObservers=null,Xe.push(it),new l.w0(()=>{this.currentObservers=null,(0,He.P)(Xe,it)}))}_checkFinalizedStatuses(it){const{hasError:Le,thrownError:et,isStopped:Xe}=this;Le?it.error(et):Xe&&it.complete()}asObservable(){const it=new C.y;return it.source=this,it}}return qe.create=(Ue,it)=>new Pe(Ue,it),qe})();class Pe extends Ge{constructor(Ue,it){super(),this.destination=Ue,this.source=it}next(Ue){var it,Le;null===(Le=null===(it=this.destination)||void 0===it?void 0:it.next)||void 0===Le||Le.call(it,Ue)}error(Ue){var it,Le;null===(Le=null===(it=this.destination)||void 0===it?void 0:it.error)||void 0===Le||Le.call(it,Ue)}complete(){var Ue,it;null===(it=null===(Ue=this.destination)||void 0===Ue?void 0:Ue.complete)||void 0===it||it.call(Ue)}_subscribe(Ue){var it,Le;return null!==(Le=null===(it=this.source)||void 0===it?void 0:it.subscribe(Ue))&&void 0!==Le?Le:l.Lc}}},305:(gi,mt,H)=>{"use strict";H.d(mt,{Hp:()=>bt,Lv:()=>Le});var C=H(4674),l=H(7394),ae=H(2653),v=H(3894),He=H(2420);const ne=qe("C",void 0,void 0);function qe(Ne,je,Oe){return{kind:Ne,value:je,error:Oe}}var Ue=H(7599),it=H(1441);class Le extends l.w0{constructor(je){super(),this.isStopped=!1,je?(this.destination=je,(0,l.Nn)(je)&&je.add(this)):this.destination=qt}static create(je,Oe,Ft){return new bt(je,Oe,Ft)}next(je){this.isStopped?Ti(function Pe(Ne){return qe("N",Ne,void 0)}(je),this):this._next(je)}error(je){this.isStopped?Ti(function Ge(Ne){return qe("E",void 0,Ne)}(je),this):(this.isStopped=!0,this._error(je))}complete(){this.isStopped?Ti(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(je){this.destination.next(je)}_error(je){try{this.destination.error(je)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Xe(Ne,je){return et.call(Ne,je)}class lt{constructor(je){this.partialObserver=je}next(je){const{partialObserver:Oe}=this;if(Oe.next)try{Oe.next(je)}catch(Ft){jt(Ft)}}error(je){const{partialObserver:Oe}=this;if(Oe.error)try{Oe.error(je)}catch(Ft){jt(Ft)}else jt(je)}complete(){const{partialObserver:je}=this;if(je.complete)try{je.complete()}catch(Oe){jt(Oe)}}}class bt extends Le{constructor(je,Oe,Ft){let Pt;if(super(),(0,C.m)(je)||!je)Pt={next:je??void 0,error:Oe??void 0,complete:Ft??void 0};else{let Nt;this&&ae.config.useDeprecatedNextContext?(Nt=Object.create(je),Nt.unsubscribe=()=>this.unsubscribe(),Pt={next:je.next&&Xe(je.next,Nt),error:je.error&&Xe(je.error,Nt),complete:je.complete&&Xe(je.complete,Nt)}):Pt=je}this.destination=new lt(Pt)}}function jt(Ne){ae.config.useDeprecatedSynchronousErrorHandling?(0,it.O)(Ne):(0,v.h)(Ne)}function Ti(Ne,je){const{onStoppedNotification:Oe}=ae.config;Oe&&Ue.z.setTimeout(()=>Oe(Ne,je))}const qt={closed:!0,next:He.Z,error:function ni(Ne){throw Ne},complete:He.Z}},7394:(gi,mt,H)=>{"use strict";H.d(mt,{Lc:()=>ne,w0:()=>He,Nn:()=>Ge});var C=H(4674);const ae=(0,H(2306).d)(qe=>function(it){qe(this),this.message=it?`${it.length} errors occurred during unsubscription:\n${it.map((Le,et)=>`${et+1}) ${Le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=it});var v=H(9039);class He{constructor(Ue){this.initialTeardown=Ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ue;if(!this.closed){this.closed=!0;const{_parentage:it}=this;if(it)if(this._parentage=null,Array.isArray(it))for(const Xe of it)Xe.remove(this);else it.remove(this);const{initialTeardown:Le}=this;if((0,C.m)(Le))try{Le()}catch(Xe){Ue=Xe instanceof ae?Xe.errors:[Xe]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Xe of et)try{Pe(Xe)}catch(lt){Ue=Ue??[],lt instanceof ae?Ue=[...Ue,...lt.errors]:Ue.push(lt)}}if(Ue)throw new ae(Ue)}}add(Ue){var it;if(Ue&&Ue!==this)if(this.closed)Pe(Ue);else{if(Ue instanceof He){if(Ue.closed||Ue._hasParent(this))return;Ue._addParent(this)}(this._finalizers=null!==(it=this._finalizers)&&void 0!==it?it:[]).push(Ue)}}_hasParent(Ue){const{_parentage:it}=this;return it===Ue||Array.isArray(it)&&it.includes(Ue)}_addParent(Ue){const{_parentage:it}=this;this._parentage=Array.isArray(it)?(it.push(Ue),it):it?[it,Ue]:Ue}_removeParent(Ue){const{_parentage:it}=this;it===Ue?this._parentage=null:Array.isArray(it)&&(0,v.P)(it,Ue)}remove(Ue){const{_finalizers:it}=this;it&&(0,v.P)(it,Ue),Ue instanceof He&&Ue._removeParent(this)}}He.EMPTY=(()=>{const qe=new He;return qe.closed=!0,qe})();const ne=He.EMPTY;function Ge(qe){return qe instanceof He||qe&&"closed"in qe&&(0,C.m)(qe.remove)&&(0,C.m)(qe.add)&&(0,C.m)(qe.unsubscribe)}function Pe(qe){(0,C.m)(qe)?qe():qe.unsubscribe()}},2653:(gi,mt,H)=>{"use strict";H.d(mt,{config:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2572:(gi,mt,H)=>{"use strict";H.d(mt,{a:()=>Ue});var C=H(5592),l=H(7453),ae=H(7715),v=H(2737),He=H(7400),ne=H(9940),Ge=H(2714),Pe=H(8251),qe=H(7103);function Ue(...et){const Xe=(0,ne.yG)(et),lt=(0,ne.jO)(et),{args:bt,keys:jt}=(0,l.D)(et);if(0===bt.length)return(0,ae.D)([],Xe);const ni=new C.y(function it(et,Xe,lt=v.y){return bt=>{Le(Xe,()=>{const{length:jt}=et,ni=new Array(jt);let Ti=jt,qt=jt;for(let Ne=0;Ne<jt;Ne++)Le(Xe,()=>{const je=(0,ae.D)(et[Ne],Xe);let Oe=!1;je.subscribe((0,Pe.x)(bt,Ft=>{ni[Ne]=Ft,Oe||(Oe=!0,qt--),qt||bt.next(lt(ni.slice()))},()=>{--Ti||bt.complete()}))},bt)},bt)}}(bt,Xe,jt?Ti=>(0,Ge.n)(jt,Ti):v.y));return lt?ni.pipe((0,He.Z)(lt)):ni}function Le(et,Xe,lt){et?(0,qe.f)(lt,et,Xe):Xe()}},5211:(gi,mt,H)=>{"use strict";H.d(mt,{z:()=>He});var C=H(7537),ae=H(9940),v=H(7715);function He(...ne){return function l(){return(0,C.J)(1)}()((0,v.D)(ne,(0,ae.yG)(ne)))}},4911:(gi,mt,H)=>{"use strict";H.d(mt,{P:()=>ae});var C=H(5592),l=H(4829);function ae(v){return new C.y(He=>{(0,l.Xf)(v()).subscribe(He)})}},6232:(gi,mt,H)=>{"use strict";H.d(mt,{E:()=>l});const l=new(H(5592).y)(He=>He.complete())},9315:(gi,mt,H)=>{"use strict";H.d(mt,{D:()=>Pe});var C=H(5592),l=H(7453),ae=H(4829),v=H(9940),He=H(8251),ne=H(7400),Ge=H(2714);function Pe(...qe){const Ue=(0,v.jO)(qe),{args:it,keys:Le}=(0,l.D)(qe),et=new C.y(Xe=>{const{length:lt}=it;if(!lt)return void Xe.complete();const bt=new Array(lt);let jt=lt,ni=lt;for(let Ti=0;Ti<lt;Ti++){let qt=!1;(0,ae.Xf)(it[Ti]).subscribe((0,He.x)(Xe,Ne=>{qt||(qt=!0,ni--),bt[Ti]=Ne},()=>jt--,void 0,()=>{(!jt||!qt)&&(ni||Xe.next(Le?(0,Ge.n)(Le,bt):bt),Xe.complete())}))}});return Ue?et.pipe((0,ne.Z)(Ue)):et}},7715:(gi,mt,H)=>{"use strict";H.d(mt,{D:()=>Ft});var C=H(4829),l=H(7103),ae=H(9360),v=H(8251);function He(Pt,Nt=0){return(0,ae.e)((fi,vi)=>{fi.subscribe((0,v.x)(vi,Ri=>(0,l.f)(vi,Pt,()=>vi.next(Ri),Nt),()=>(0,l.f)(vi,Pt,()=>vi.complete(),Nt),Ri=>(0,l.f)(vi,Pt,()=>vi.error(Ri),Nt)))})}function ne(Pt,Nt=0){return(0,ae.e)((fi,vi)=>{vi.add(Pt.schedule(()=>fi.subscribe(vi),Nt))})}var qe=H(5592),it=H(4971),Le=H(4674);function Xe(Pt,Nt){if(!Pt)throw new Error("Iterable cannot be null");return new qe.y(fi=>{(0,l.f)(fi,Nt,()=>{const vi=Pt[Symbol.asyncIterator]();(0,l.f)(fi,Nt,()=>{vi.next().then(Ri=>{Ri.done?fi.complete():fi.next(Ri.value)})},0,!0)})})}var lt=H(8382),bt=H(4026),jt=H(4266),ni=H(3664),Ti=H(5726),qt=H(9853),Ne=H(541);function Ft(Pt,Nt){return Nt?function Oe(Pt,Nt){if(null!=Pt){if((0,lt.c)(Pt))return function Ge(Pt,Nt){return(0,C.Xf)(Pt).pipe(ne(Nt),He(Nt))}(Pt,Nt);if((0,jt.z)(Pt))return function Ue(Pt,Nt){return new qe.y(fi=>{let vi=0;return Nt.schedule(function(){vi===Pt.length?fi.complete():(fi.next(Pt[vi++]),fi.closed||this.schedule())})})}(Pt,Nt);if((0,bt.t)(Pt))return function Pe(Pt,Nt){return(0,C.Xf)(Pt).pipe(ne(Nt),He(Nt))}(Pt,Nt);if((0,Ti.D)(Pt))return Xe(Pt,Nt);if((0,ni.T)(Pt))return function et(Pt,Nt){return new qe.y(fi=>{let vi;return(0,l.f)(fi,Nt,()=>{vi=Pt[it.h](),(0,l.f)(fi,Nt,()=>{let Ri,qi;try{({value:Ri,done:qi}=vi.next())}catch(Dn){return void fi.error(Dn)}qi?fi.complete():fi.next(Ri)},0,!0)}),()=>(0,Le.m)(vi?.return)&&vi.return()})}(Pt,Nt);if((0,Ne.L)(Pt))return function je(Pt,Nt){return Xe((0,Ne.Q)(Pt),Nt)}(Pt,Nt)}throw(0,qt.z)(Pt)}(Pt,Nt):(0,C.Xf)(Pt)}},2438:(gi,mt,H)=>{"use strict";H.d(mt,{R:()=>Ue});var C=H(4829),l=H(5592),ae=H(1631),v=H(4266),He=H(4674),ne=H(7400);const Ge=["addListener","removeListener"],Pe=["addEventListener","removeEventListener"],qe=["on","off"];function Ue(lt,bt,jt,ni){if((0,He.m)(jt)&&(ni=jt,jt=void 0),ni)return Ue(lt,bt,jt).pipe((0,ne.Z)(ni));const[Ti,qt]=function Xe(lt){return(0,He.m)(lt.addEventListener)&&(0,He.m)(lt.removeEventListener)}(lt)?Pe.map(Ne=>je=>lt[Ne](bt,je,jt)):function Le(lt){return(0,He.m)(lt.addListener)&&(0,He.m)(lt.removeListener)}(lt)?Ge.map(it(lt,bt)):function et(lt){return(0,He.m)(lt.on)&&(0,He.m)(lt.off)}(lt)?qe.map(it(lt,bt)):[];if(!Ti&&(0,v.z)(lt))return(0,ae.z)(Ne=>Ue(Ne,bt,jt))((0,C.Xf)(lt));if(!Ti)throw new TypeError("Invalid event target");return new l.y(Ne=>{const je=(...Oe)=>Ne.next(1<Oe.length?Oe:Oe[0]);return Ti(je),()=>qt(je)})}function it(lt,bt){return jt=>ni=>lt[jt](bt,ni)}},4829:(gi,mt,H)=>{"use strict";H.d(mt,{Xf:()=>et});var C=H(7582),l=H(4266),ae=H(4026),v=H(5592),He=H(8382),ne=H(5726),Ge=H(9853),Pe=H(3664),qe=H(541),Ue=H(4674),it=H(3894),Le=H(4850);function et(Ne){if(Ne instanceof v.y)return Ne;if(null!=Ne){if((0,He.c)(Ne))return function Xe(Ne){return new v.y(je=>{const Oe=Ne[Le.L]();if((0,Ue.m)(Oe.subscribe))return Oe.subscribe(je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,l.z)(Ne))return function lt(Ne){return new v.y(je=>{for(let Oe=0;Oe<Ne.length&&!je.closed;Oe++)je.next(Ne[Oe]);je.complete()})}(Ne);if((0,ae.t)(Ne))return function bt(Ne){return new v.y(je=>{Ne.then(Oe=>{je.closed||(je.next(Oe),je.complete())},Oe=>je.error(Oe)).then(null,it.h)})}(Ne);if((0,ne.D)(Ne))return ni(Ne);if((0,Pe.T)(Ne))return function jt(Ne){return new v.y(je=>{for(const Oe of Ne)if(je.next(Oe),je.closed)return;je.complete()})}(Ne);if((0,qe.L)(Ne))return function Ti(Ne){return ni((0,qe.Q)(Ne))}(Ne)}throw(0,Ge.z)(Ne)}function ni(Ne){return new v.y(je=>{(function qt(Ne,je){var Oe,Ft,Pt,Nt;return(0,C.mG)(this,void 0,void 0,function*(){try{for(Oe=(0,C.KL)(Ne);!(Ft=yield Oe.next()).done;)if(je.next(Ft.value),je.closed)return}catch(fi){Pt={error:fi}}finally{try{Ft&&!Ft.done&&(Nt=Oe.return)&&(yield Nt.call(Oe))}finally{if(Pt)throw Pt.error}}je.complete()})})(Ne,je).catch(Oe=>je.error(Oe))})}},3019:(gi,mt,H)=>{"use strict";H.d(mt,{T:()=>ne});var C=H(7537),l=H(4829),ae=H(6232),v=H(9940),He=H(7715);function ne(...Ge){const Pe=(0,v.yG)(Ge),qe=(0,v._6)(Ge,1/0),Ue=Ge;return Ue.length?1===Ue.length?(0,l.Xf)(Ue[0]):(0,C.J)(qe)((0,He.D)(Ue,Pe)):ae.E}},2096:(gi,mt,H)=>{"use strict";H.d(mt,{of:()=>ae});var C=H(9940),l=H(7715);function ae(...v){const He=(0,C.yG)(v);return(0,l.D)(v,He)}},8504:(gi,mt,H)=>{"use strict";H.d(mt,{_:()=>ae});var C=H(5592),l=H(4674);function ae(v,He){const ne=(0,l.m)(v)?v:()=>v,Ge=Pe=>Pe.error(ne());return new C.y(He?Pe=>He.schedule(Ge,0,Pe):Ge)}},4825:(gi,mt,H)=>{"use strict";H.d(mt,{H:()=>He});var C=H(5592),l=H(6321),ae=H(671);function He(ne=0,Ge,Pe=l.P){let qe=-1;return null!=Ge&&((0,ae.K)(Ge)?Pe=Ge:qe=Ge),new C.y(Ue=>{let it=function v(ne){return ne instanceof Date&&!isNaN(ne)}(ne)?+ne-Pe.now():ne;it<0&&(it=0);let Le=0;return Pe.schedule(function(){Ue.closed||(Ue.next(Le++),0<=qe?this.schedule(void 0,qe):Ue.complete())},it)})}},8251:(gi,mt,H)=>{"use strict";H.d(mt,{x:()=>l});var C=H(305);function l(v,He,ne,Ge,Pe){return new ae(v,He,ne,Ge,Pe)}class ae extends C.Lv{constructor(He,ne,Ge,Pe,qe,Ue){super(He),this.onFinalize=qe,this.shouldUnsubscribe=Ue,this._next=ne?function(it){try{ne(it)}catch(Le){He.error(Le)}}:super._next,this._error=Pe?function(it){try{Pe(it)}catch(Le){He.error(Le)}finally{this.unsubscribe()}}:super._error,this._complete=Ge?function(){try{Ge()}catch(it){He.error(it)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var He;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(He=this.onFinalize)||void 0===He||He.call(this))}}}},6306:(gi,mt,H)=>{"use strict";H.d(mt,{K:()=>v});var C=H(4829),l=H(8251),ae=H(9360);function v(He){return(0,ae.e)((ne,Ge)=>{let Ue,Pe=null,qe=!1;Pe=ne.subscribe((0,l.x)(Ge,void 0,void 0,it=>{Ue=(0,C.Xf)(He(it,v(He)(ne))),Pe?(Pe.unsubscribe(),Pe=null,Ue.subscribe(Ge)):qe=!0})),qe&&(Pe.unsubscribe(),Pe=null,Ue.subscribe(Ge))})}},6328:(gi,mt,H)=>{"use strict";H.d(mt,{b:()=>ae});var C=H(1631),l=H(4674);function ae(v,He){return(0,l.m)(He)?(0,C.z)(v,He,1):(0,C.z)(v,1)}},3620:(gi,mt,H)=>{"use strict";H.d(mt,{b:()=>v});var C=H(6321),l=H(9360),ae=H(8251);function v(He,ne=C.z){return(0,l.e)((Ge,Pe)=>{let qe=null,Ue=null,it=null;const Le=()=>{if(qe){qe.unsubscribe(),qe=null;const Xe=Ue;Ue=null,Pe.next(Xe)}};function et(){const Xe=it+He,lt=ne.now();if(lt<Xe)return qe=this.schedule(void 0,Xe-lt),void Pe.add(qe);Le()}Ge.subscribe((0,ae.x)(Pe,Xe=>{Ue=Xe,it=ne.now(),qe||(qe=ne.schedule(et,He),Pe.add(qe))},()=>{Le(),Pe.complete()},void 0,()=>{Ue=qe=null}))})}},3572:(gi,mt,H)=>{"use strict";H.d(mt,{d:()=>ae});var C=H(9360),l=H(8251);function ae(v){return(0,C.e)((He,ne)=>{let Ge=!1;He.subscribe((0,l.x)(ne,Pe=>{Ge=!0,ne.next(Pe)},()=>{Ge||ne.next(v),ne.complete()}))})}},3997:(gi,mt,H)=>{"use strict";H.d(mt,{x:()=>v});var C=H(2737),l=H(9360),ae=H(8251);function v(ne,Ge=C.y){return ne=ne??He,(0,l.e)((Pe,qe)=>{let Ue,it=!0;Pe.subscribe((0,ae.x)(qe,Le=>{const et=Ge(Le);(it||!ne(Ue,et))&&(it=!1,Ue=et,qe.next(Le))}))})}function He(ne,Ge){return ne===Ge}},2181:(gi,mt,H)=>{"use strict";H.d(mt,{h:()=>ae});var C=H(9360),l=H(8251);function ae(v,He){return(0,C.e)((ne,Ge)=>{let Pe=0;ne.subscribe((0,l.x)(Ge,qe=>v.call(He,qe,Pe++)&&Ge.next(qe)))})}},4716:(gi,mt,H)=>{"use strict";H.d(mt,{x:()=>l});var C=H(9360);function l(ae){return(0,C.e)((v,He)=>{try{v.subscribe(He)}finally{He.add(ae)}})}},1374:(gi,mt,H)=>{"use strict";H.d(mt,{P:()=>Ge});var C=H(6973),l=H(2181),ae=H(8180),v=H(3572),He=H(3026),ne=H(2737);function Ge(Pe,qe){const Ue=arguments.length>=2;return it=>it.pipe(Pe?(0,l.h)((Le,et)=>Pe(Le,et,it)):ne.y,(0,ae.q)(1),Ue?(0,v.d)(qe):(0,He.T)(()=>new C.K))}},7398:(gi,mt,H)=>{"use strict";H.d(mt,{U:()=>ae});var C=H(9360),l=H(8251);function ae(v,He){return(0,C.e)((ne,Ge)=>{let Pe=0;ne.subscribe((0,l.x)(Ge,qe=>{Ge.next(v.call(He,qe,Pe++))}))})}},975:(gi,mt,H)=>{"use strict";H.d(mt,{h:()=>l});var C=H(7398);function l(ae){return(0,C.U)(()=>ae)}},7537:(gi,mt,H)=>{"use strict";H.d(mt,{J:()=>ae});var C=H(1631),l=H(2737);function ae(v=1/0){return(0,C.z)(l.y,v)}},1631:(gi,mt,H)=>{"use strict";H.d(mt,{z:()=>Pe});var C=H(7398),l=H(4829),ae=H(9360),v=H(7103),He=H(8251),Ge=H(4674);function Pe(qe,Ue,it=1/0){return(0,Ge.m)(Ue)?Pe((Le,et)=>(0,C.U)((Xe,lt)=>Ue(Le,Xe,et,lt))((0,l.Xf)(qe(Le,et))),it):("number"==typeof Ue&&(it=Ue),(0,ae.e)((Le,et)=>function ne(qe,Ue,it,Le,et,Xe,lt,bt){const jt=[];let ni=0,Ti=0,qt=!1;const Ne=()=>{qt&&!jt.length&&!ni&&Ue.complete()},je=Ft=>ni<Le?Oe(Ft):jt.push(Ft),Oe=Ft=>{Xe&&Ue.next(Ft),ni++;let Pt=!1;(0,l.Xf)(it(Ft,Ti++)).subscribe((0,He.x)(Ue,Nt=>{et?.(Nt),Xe?je(Nt):Ue.next(Nt)},()=>{Pt=!0},void 0,()=>{if(Pt)try{for(ni--;jt.length&&ni<Le;){const Nt=jt.shift();lt?(0,v.f)(Ue,lt,()=>Oe(Nt)):Oe(Nt)}Ne()}catch(Nt){Ue.error(Nt)}}))};return qe.subscribe((0,He.x)(Ue,je,()=>{qt=!0,Ne()})),()=>{bt?.()}}(Le,et,qe,it)))}},3020:(gi,mt,H)=>{"use strict";H.d(mt,{B:()=>He});var C=H(4829),l=H(8645),ae=H(305),v=H(9360);function He(Ge={}){const{connector:Pe=(()=>new l.x),resetOnError:qe=!0,resetOnComplete:Ue=!0,resetOnRefCountZero:it=!0}=Ge;return Le=>{let et,Xe,lt,bt=0,jt=!1,ni=!1;const Ti=()=>{Xe?.unsubscribe(),Xe=void 0},qt=()=>{Ti(),et=lt=void 0,jt=ni=!1},Ne=()=>{const je=et;qt(),je?.unsubscribe()};return(0,v.e)((je,Oe)=>{bt++,!ni&&!jt&&Ti();const Ft=lt=lt??Pe();Oe.add(()=>{bt--,0===bt&&!ni&&!jt&&(Xe=ne(Ne,it))}),Ft.subscribe(Oe),!et&&bt>0&&(et=new ae.Hp({next:Pt=>Ft.next(Pt),error:Pt=>{ni=!0,Ti(),Xe=ne(qt,qe,Pt),Ft.error(Pt)},complete:()=>{jt=!0,Ti(),Xe=ne(qt,Ue),Ft.complete()}}),(0,C.Xf)(je).subscribe(et))})(Le)}}function ne(Ge,Pe,...qe){if(!0===Pe)return void Ge();if(!1===Pe)return;const Ue=new ae.Hp({next:()=>{Ue.unsubscribe(),Ge()}});return(0,C.Xf)(Pe(...qe)).subscribe(Ue)}},940:(gi,mt,H)=>{"use strict";H.d(mt,{d:()=>He});var C=H(8645),l=H(4552);class ae extends C.x{constructor(Ge=1/0,Pe=1/0,qe=l.l){super(),this._bufferSize=Ge,this._windowTime=Pe,this._timestampProvider=qe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Pe===1/0,this._bufferSize=Math.max(1,Ge),this._windowTime=Math.max(1,Pe)}next(Ge){const{isStopped:Pe,_buffer:qe,_infiniteTimeWindow:Ue,_timestampProvider:it,_windowTime:Le}=this;Pe||(qe.push(Ge),!Ue&&qe.push(it.now()+Le)),this._trimBuffer(),super.next(Ge)}_subscribe(Ge){this._throwIfClosed(),this._trimBuffer();const Pe=this._innerSubscribe(Ge),{_infiniteTimeWindow:qe,_buffer:Ue}=this,it=Ue.slice();for(let Le=0;Le<it.length&&!Ge.closed;Le+=qe?1:2)Ge.next(it[Le]);return this._checkFinalizedStatuses(Ge),Pe}_trimBuffer(){const{_bufferSize:Ge,_timestampProvider:Pe,_buffer:qe,_infiniteTimeWindow:Ue}=this,it=(Ue?1:2)*Ge;if(Ge<1/0&&it<qe.length&&qe.splice(0,qe.length-it),!Ue){const Le=Pe.now();let et=0;for(let Xe=1;Xe<qe.length&&qe[Xe]<=Le;Xe+=2)et=Xe;et&&qe.splice(0,et+1)}}}var v=H(3020);function He(ne,Ge,Pe){let qe,Ue=!1;return ne&&"object"==typeof ne?({bufferSize:qe=1/0,windowTime:Ge=1/0,refCount:Ue=!1,scheduler:Pe}=ne):qe=ne??1/0,(0,v.B)({connector:()=>new ae(qe,Ge,Pe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ue})}},7921:(gi,mt,H)=>{"use strict";H.d(mt,{O:()=>v});var C=H(5211),l=H(9940),ae=H(9360);function v(...He){const ne=(0,l.yG)(He);return(0,ae.e)((Ge,Pe)=>{(ne?(0,C.z)(He,Ge,ne):(0,C.z)(He,Ge)).subscribe(Pe)})}},4664:(gi,mt,H)=>{"use strict";H.d(mt,{w:()=>v});var C=H(4829),l=H(9360),ae=H(8251);function v(He,ne){return(0,l.e)((Ge,Pe)=>{let qe=null,Ue=0,it=!1;const Le=()=>it&&!qe&&Pe.complete();Ge.subscribe((0,ae.x)(Pe,et=>{qe?.unsubscribe();let Xe=0;const lt=Ue++;(0,C.Xf)(He(et,lt)).subscribe(qe=(0,ae.x)(Pe,bt=>Pe.next(ne?ne(et,bt,lt,Xe++):bt),()=>{qe=null,Le()}))},()=>{it=!0,Le()}))})}},8180:(gi,mt,H)=>{"use strict";H.d(mt,{q:()=>v});var C=H(6232),l=H(9360),ae=H(8251);function v(He){return He<=0?()=>C.E:(0,l.e)((ne,Ge)=>{let Pe=0;ne.subscribe((0,ae.x)(Ge,qe=>{++Pe<=He&&(Ge.next(qe),He<=Pe&&Ge.complete())}))})}},9773:(gi,mt,H)=>{"use strict";H.d(mt,{R:()=>He});var C=H(9360),l=H(8251),ae=H(4829),v=H(2420);function He(ne){return(0,C.e)((Ge,Pe)=>{(0,ae.Xf)(ne).subscribe((0,l.x)(Pe,()=>Pe.complete(),v.Z)),!Pe.closed&&Ge.subscribe(Pe)})}},9397:(gi,mt,H)=>{"use strict";H.d(mt,{b:()=>He});var C=H(4674),l=H(9360),ae=H(8251),v=H(2737);function He(ne,Ge,Pe){const qe=(0,C.m)(ne)||Ge||Pe?{next:ne,error:Ge,complete:Pe}:ne;return qe?(0,l.e)((Ue,it)=>{var Le;null===(Le=qe.subscribe)||void 0===Le||Le.call(qe);let et=!0;Ue.subscribe((0,ae.x)(it,Xe=>{var lt;null===(lt=qe.next)||void 0===lt||lt.call(qe,Xe),it.next(Xe)},()=>{var Xe;et=!1,null===(Xe=qe.complete)||void 0===Xe||Xe.call(qe),it.complete()},Xe=>{var lt;et=!1,null===(lt=qe.error)||void 0===lt||lt.call(qe,Xe),it.error(Xe)},()=>{var Xe,lt;et&&(null===(Xe=qe.unsubscribe)||void 0===Xe||Xe.call(qe)),null===(lt=qe.finalize)||void 0===lt||lt.call(qe)}))}):v.y}},3026:(gi,mt,H)=>{"use strict";H.d(mt,{T:()=>v});var C=H(6973),l=H(9360),ae=H(8251);function v(ne=He){return(0,l.e)((Ge,Pe)=>{let qe=!1;Ge.subscribe((0,ae.x)(Pe,Ue=>{qe=!0,Pe.next(Ue)},()=>qe?Pe.complete():Pe.error(ne())))})}function He(){return new C.K}},1954:(gi,mt,H)=>{"use strict";H.d(mt,{o:()=>He});var C=H(7394);class l extends C.w0{constructor(Ge,Pe){super()}schedule(Ge,Pe=0){return this}}const ae={setInterval(ne,Ge,...Pe){const{delegate:qe}=ae;return qe?.setInterval?qe.setInterval(ne,Ge,...Pe):setInterval(ne,Ge,...Pe)},clearInterval(ne){const{delegate:Ge}=ae;return(Ge?.clearInterval||clearInterval)(ne)},delegate:void 0};var v=H(9039);class He extends l{constructor(Ge,Pe){super(Ge,Pe),this.scheduler=Ge,this.work=Pe,this.pending=!1}schedule(Ge,Pe=0){var qe;if(this.closed)return this;this.state=Ge;const Ue=this.id,it=this.scheduler;return null!=Ue&&(this.id=this.recycleAsyncId(it,Ue,Pe)),this.pending=!0,this.delay=Pe,this.id=null!==(qe=this.id)&&void 0!==qe?qe:this.requestAsyncId(it,this.id,Pe),this}requestAsyncId(Ge,Pe,qe=0){return ae.setInterval(Ge.flush.bind(Ge,this),qe)}recycleAsyncId(Ge,Pe,qe=0){if(null!=qe&&this.delay===qe&&!1===this.pending)return Pe;null!=Pe&&ae.clearInterval(Pe)}execute(Ge,Pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const qe=this._execute(Ge,Pe);if(qe)return qe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ge,Pe){let Ue,qe=!1;try{this.work(Ge)}catch(it){qe=!0,Ue=it||new Error("Scheduled action threw falsy error")}if(qe)return this.unsubscribe(),Ue}unsubscribe(){if(!this.closed){const{id:Ge,scheduler:Pe}=this,{actions:qe}=Pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,v.P)(qe,this),null!=Ge&&(this.id=this.recycleAsyncId(Pe,Ge,null)),this.delay=null,super.unsubscribe()}}}},2631:(gi,mt,H)=>{"use strict";H.d(mt,{v:()=>ae});var C=H(4552);class l{constructor(He,ne=l.now){this.schedulerActionCtor=He,this.now=ne}schedule(He,ne=0,Ge){return new this.schedulerActionCtor(this,He).schedule(Ge,ne)}}l.now=C.l.now;class ae extends l{constructor(He,ne=l.now){super(He,ne),this.actions=[],this._active=!1}flush(He){const{actions:ne}=this;if(this._active)return void ne.push(He);let Ge;this._active=!0;do{if(Ge=He.execute(He.state,He.delay))break}while(He=ne.shift());if(this._active=!1,Ge){for(;He=ne.shift();)He.unsubscribe();throw Ge}}}},6321:(gi,mt,H)=>{"use strict";H.d(mt,{P:()=>v,z:()=>ae});var C=H(1954);const ae=new(H(2631).v)(C.o),v=ae},4552:(gi,mt,H)=>{"use strict";H.d(mt,{l:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},7599:(gi,mt,H)=>{"use strict";H.d(mt,{z:()=>C});const C={setTimeout(l,ae,...v){const{delegate:He}=C;return He?.setTimeout?He.setTimeout(l,ae,...v):setTimeout(l,ae,...v)},clearTimeout(l){const{delegate:ae}=C;return(ae?.clearTimeout||clearTimeout)(l)},delegate:void 0}},4971:(gi,mt,H)=>{"use strict";H.d(mt,{h:()=>l});const l=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(gi,mt,H)=>{"use strict";H.d(mt,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(gi,mt,H)=>{"use strict";H.d(mt,{K:()=>l});const l=(0,H(2306).d)(ae=>function(){ae(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(gi,mt,H)=>{"use strict";H.d(mt,{_6:()=>ne,jO:()=>v,yG:()=>He});var C=H(4674),l=H(671);function ae(Ge){return Ge[Ge.length-1]}function v(Ge){return(0,C.m)(ae(Ge))?Ge.pop():void 0}function He(Ge){return(0,l.K)(ae(Ge))?Ge.pop():void 0}function ne(Ge,Pe){return"number"==typeof ae(Ge)?Ge.pop():Pe}},7453:(gi,mt,H)=>{"use strict";H.d(mt,{D:()=>He});const{isArray:C}=Array,{getPrototypeOf:l,prototype:ae,keys:v}=Object;function He(Ge){if(1===Ge.length){const Pe=Ge[0];if(C(Pe))return{args:Pe,keys:null};if(function ne(Ge){return Ge&&"object"==typeof Ge&&l(Ge)===ae}(Pe)){const qe=v(Pe);return{args:qe.map(Ue=>Pe[Ue]),keys:qe}}}return{args:Ge,keys:null}}},9039:(gi,mt,H)=>{"use strict";function C(l,ae){if(l){const v=l.indexOf(ae);0<=v&&l.splice(v,1)}}H.d(mt,{P:()=>C})},2306:(gi,mt,H)=>{"use strict";function C(l){const v=l(He=>{Error.call(He),He.stack=(new Error).stack});return v.prototype=Object.create(Error.prototype),v.prototype.constructor=v,v}H.d(mt,{d:()=>C})},2714:(gi,mt,H)=>{"use strict";function C(l,ae){return l.reduce((v,He,ne)=>(v[He]=ae[ne],v),{})}H.d(mt,{n:()=>C})},1441:(gi,mt,H)=>{"use strict";H.d(mt,{O:()=>v,x:()=>ae});var C=H(2653);let l=null;function ae(He){if(C.config.useDeprecatedSynchronousErrorHandling){const ne=!l;if(ne&&(l={errorThrown:!1,error:null}),He(),ne){const{errorThrown:Ge,error:Pe}=l;if(l=null,Ge)throw Pe}}else He()}function v(He){C.config.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=He)}},7103:(gi,mt,H)=>{"use strict";function C(l,ae,v,He=0,ne=!1){const Ge=ae.schedule(function(){v(),ne?l.add(this.schedule(null,He)):this.unsubscribe()},He);if(l.add(Ge),!ne)return Ge}H.d(mt,{f:()=>C})},2737:(gi,mt,H)=>{"use strict";function C(l){return l}H.d(mt,{y:()=>C})},4266:(gi,mt,H)=>{"use strict";H.d(mt,{z:()=>C});const C=l=>l&&"number"==typeof l.length&&"function"!=typeof l},5726:(gi,mt,H)=>{"use strict";H.d(mt,{D:()=>l});var C=H(4674);function l(ae){return Symbol.asyncIterator&&(0,C.m)(ae?.[Symbol.asyncIterator])}},4674:(gi,mt,H)=>{"use strict";function C(l){return"function"==typeof l}H.d(mt,{m:()=>C})},8382:(gi,mt,H)=>{"use strict";H.d(mt,{c:()=>ae});var C=H(4850),l=H(4674);function ae(v){return(0,l.m)(v[C.L])}},3664:(gi,mt,H)=>{"use strict";H.d(mt,{T:()=>ae});var C=H(4971),l=H(4674);function ae(v){return(0,l.m)(v?.[C.h])}},4026:(gi,mt,H)=>{"use strict";H.d(mt,{t:()=>l});var C=H(4674);function l(ae){return(0,C.m)(ae?.then)}},541:(gi,mt,H)=>{"use strict";H.d(mt,{L:()=>v,Q:()=>ae});var C=H(7582),l=H(4674);function ae(He){return(0,C.FC)(this,arguments,function*(){const Ge=He.getReader();try{for(;;){const{value:Pe,done:qe}=yield(0,C.qq)(Ge.read());if(qe)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(Pe)}}finally{Ge.releaseLock()}})}function v(He){return(0,l.m)(He?.getReader)}},671:(gi,mt,H)=>{"use strict";H.d(mt,{K:()=>l});var C=H(4674);function l(ae){return ae&&(0,C.m)(ae.schedule)}},9360:(gi,mt,H)=>{"use strict";H.d(mt,{A:()=>l,e:()=>ae});var C=H(4674);function l(v){return(0,C.m)(v?.lift)}function ae(v){return He=>{if(l(He))return He.lift(function(ne){try{return v(ne,this)}catch(Ge){this.error(Ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(gi,mt,H)=>{"use strict";H.d(mt,{Z:()=>v});var C=H(7398);const{isArray:l}=Array;function v(He){return(0,C.U)(ne=>function ae(He,ne){return l(ne)?He(...ne):He(ne)}(He,ne))}},2420:(gi,mt,H)=>{"use strict";function C(){}H.d(mt,{Z:()=>C})},8407:(gi,mt,H)=>{"use strict";H.d(mt,{U:()=>ae,z:()=>l});var C=H(2737);function l(...v){return ae(v)}function ae(v){return 0===v.length?C.y:1===v.length?v[0]:function(ne){return v.reduce((Ge,Pe)=>Pe(Ge),ne)}}},3894:(gi,mt,H)=>{"use strict";H.d(mt,{h:()=>ae});var C=H(2653),l=H(7599);function ae(v){l.z.setTimeout(()=>{const{onUnhandledError:He}=C.config;if(!He)throw v;He(v)})}},9853:(gi,mt,H)=>{"use strict";function C(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(mt,{z:()=>C})},5624:function(gi){gi.exports=function(){"use strict";var mt,H,C;function l(v,He){if(mt)if(H){var ne="var sharedChunk = {}; ("+mt+")(sharedChunk); ("+H+")(sharedChunk);",Ge={};mt(Ge),C=He(Ge),typeof window<"u"&&(C.workerUrl=window.URL.createObjectURL(new Blob([ne],{type:"text/javascript"})))}else H=He;else mt=He}return l(0,function(v){function He(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ne=Ge;function Ge(o,t){this.x=o,this.y=t}Ge.prototype={clone:function(){return new Ge(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,t){return this.clone()._rotateAround(o,t)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var t=o.x-this.x,a=o.y-this.y;return t*t+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,t){return Math.atan2(this.x*t-this.y*o,this.x*o+this.y*t)},_matMult:function(o){var t=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=t,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var t=Math.cos(o),a=Math.sin(o),p=a*this.x+t*this.y;return this.x=t*this.x-a*this.y,this.y=p,this},_rotateAround:function(o,t){var a=Math.cos(o),p=Math.sin(o),x=t.y+p*(this.x-t.x)+a*(this.y-t.y);return this.x=t.x+a*(this.x-t.x)-p*(this.y-t.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ge.convert=function(o){return o instanceof Ge?o:Array.isArray(o)?new Ge(o[0],o[1]):o};var Pe=He(ne),qe=Ue;function Ue(o,t,a,p){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(p-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=t,this.p2x=a,this.p2y=p}Ue.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,t){if(void 0===t&&(t=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,p=0;p<8;p++){var x=this.sampleCurveX(a)-o;if(Math.abs(x)<t)return a;var T=this.sampleCurveDerivativeX(a);if(Math.abs(T)<1e-6)break;a-=x/T}var I=0,O=1;for(a=o,p=0;p<20&&(x=this.sampleCurveX(a),!(Math.abs(x-o)<t));p++)o>x?I=a:O=a,a=.5*(O-I)+I;return a},solve:function(o,t){return this.sampleCurveY(this.solveCurveX(o,t))}};var it=He(qe);function Le(o,t,a,p){const x=new it(o,t,a,p);return function(T){return x.solve(T)}}const et=Le(.25,.1,.25,1);function Xe(o,t,a){return Math.min(a,Math.max(t,o))}function lt(o,t,a){const p=a-t,x=((o-t)%p+p)%p+t;return x===t?a:x}function bt(o,...t){for(const a of t)for(const p in a)o[p]=a[p];return o}let jt=1;function ni(o,t,a){const p={};for(const x in o)p[x]=t.call(a||this,o[x],x,o);return p}function Ti(o,t,a){const p={};for(const x in o)t.call(a||this,o[x],x,o)&&(p[x]=o[x]);return p}function qt(o){return Array.isArray(o)?o.map(qt):"object"==typeof o&&o?ni(o,qt):o}const Ne={};function je(o){Ne[o]||(typeof console<"u"&&console.warn(o),Ne[o]=!0)}function Oe(o,t,a){return(a.y-o.y)*(t.x-o.x)>(t.y-o.y)*(a.x-o.x)}function Ft(o){let t=0;for(let a,p,x=0,T=o.length,I=T-1;x<T;I=x++)a=o[x],p=o[I],t+=(p.x-a.x)*(a.y+p.y);return t}function Pt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Nt=null;function fi(o){if(null==Nt){const t=o.navigator?o.navigator.userAgent:null;Nt=!!o.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Nt}function vi(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Ri="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let qi,Dn;const Hn={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const t=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(o,t=0){return this.getImageCanvasContext(o).getImageData(-t,-t,o.width+2*t,o.height+2*t)},getImageCanvasContext(o){const t=window.document.createElement("canvas"),a=t.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return t.width=o.width,t.height=o.height,a.drawImage(o,0,0,o.width,o.height),a},resolveURL:o=>(qi||(qi=document.createElement("a")),qi.href=o,qi.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Dn&&(Dn=matchMedia("(prefers-reduced-motion: reduce)")),Dn.matches)}},_n={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Vn extends Error{constructor(t,a,p,x){super(`AJAXError: ${a} (${t}): ${p}`),this.status=t,this.statusText=a,this.url=p,this.body=x}}const Sn=Pt()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,Et=o=>_n.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function ft(o,t){const a=new AbortController,p=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:Sn(),signal:a.signal});let x=!1,T=!1;return"json"===o.type&&p.headers.set("Accept","application/json"),T||fetch(p).then(I=>{return I.ok?(O=I,void("arrayBuffer"===o.type||"image"===o.type?O.arrayBuffer():"json"===o.type?O.json():O.text()).then(N=>{T||(x=!0,t(null,N,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(N=>{T||t(new Error(N.message))})):I.blob().then(O=>t(new Vn(I.status,I.statusText,o.url,O)));var O}).catch(I=>{20!==I.code&&t(new Error(I.message))}),{cancel:()=>{T=!0,x||a.abort()}}}const Rt=function(o,t){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,t);if(!Pt())return(Et(o.url)||ft)(o,t)}if(!(/^file:/.test(a=o.url)||/^file:/.test(Sn())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ft(o,t);if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,t,void 0,!0)}var a;return function(p,x){const T=new XMLHttpRequest;T.open(p.method||"GET",p.url,!0),"arrayBuffer"!==p.type&&"image"!==p.type||(T.responseType="arraybuffer");for(const I in p.headers)T.setRequestHeader(I,p.headers[I]);return"json"===p.type&&(T.responseType="text",T.setRequestHeader("Accept","application/json")),T.withCredentials="include"===p.credentials,T.onerror=()=>{x(new Error(T.statusText))},T.onload=()=>{if((T.status>=200&&T.status<300||0===T.status)&&null!==T.response){let I=T.response;if("json"===p.type)try{I=JSON.parse(T.response)}catch(O){return x(O)}x(null,I,T.getResponseHeader("Cache-Control"),T.getResponseHeader("Expires"))}else{const I=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});x(new Vn(T.status,T.statusText,p.url,I))}},T.send(p.body),{cancel:()=>T.abort()}}(o,t)},Vt=function(o,t){return Rt(bt(o,{type:"arrayBuffer"}),t)};function ei(o){if(!o||o.indexOf("://")<=0||0===o.indexOf("data:image/")||0===o.indexOf("blob:"))return!0;const t=new URL(o),a=window.location;return t.protocol===a.protocol&&t.host===a.host}function Ct(o,t,a){a[o]&&-1!==a[o].indexOf(t)||(a[o]=a[o]||[],a[o].push(t))}function ai(o,t,a){if(a&&a[o]){const p=a[o].indexOf(t);-1!==p&&a[o].splice(p,1)}}class ze{constructor(t,a={}){bt(this,a),this.type=t}}class rt extends ze{constructor(t,a={}){super("error",bt({error:t},a))}}class dt{on(t,a){return this._listeners=this._listeners||{},Ct(t,a,this._listeners),this}off(t,a){return ai(t,a,this._listeners),ai(t,a,this._oneTimeListeners),this}once(t,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Ct(t,a,this._oneTimeListeners),this):new Promise(p=>this.once(t,p))}fire(t,a){"string"==typeof t&&(t=new ze(t,a||{}));const p=t.type;if(this.listens(p)){t.target=this;const x=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const O of x)O.call(this,t);const T=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const O of T)ai(p,O,this._oneTimeListeners),O.call(this,t);const I=this._eventedParent;I&&(bt(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),I.fire(t))}else t instanceof rt&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,a){return this._eventedParent=t,this._eventedParentData=a,this}}var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Yt(o,t){const a={};for(const p in o)"ref"!==p&&(a[p]=o[p]);return ut.forEach(p=>{p in t&&(a[p]=t[p])}),a}function Ut(o,t){if(Array.isArray(o)){if(!Array.isArray(t)||o.length!==t.length)return!1;for(let a=0;a<o.length;a++)if(!Ut(o[a],t[a]))return!1;return!0}if("object"==typeof o&&null!==o&&null!==t){if("object"!=typeof t||Object.keys(o).length!==Object.keys(t).length)return!1;for(const a in o)if(!Ut(o[a],t[a]))return!1;return!0}return o===t}const ti={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ot(o,t,a){a.push({command:ti.addSource,args:[o,t[o]]})}function Dt(o,t,a){t.push({command:ti.removeSource,args:[o]}),a[o]=!0}function wi(o,t,a,p){Dt(o,a,p),ot(o,t,a)}function yn(o,t,a){let p;for(p in o[a])if(Object.prototype.hasOwnProperty.call(o[a],p)&&"data"!==p&&!Ut(o[a][p],t[a][p]))return!1;for(p in t[a])if(Object.prototype.hasOwnProperty.call(t[a],p)&&"data"!==p&&!Ut(o[a][p],t[a][p]))return!1;return!0}function Zi(o,t,a,p,x,T){let I;for(I in t=t||{},o=o||{})Object.prototype.hasOwnProperty.call(o,I)&&(Ut(o[I],t[I])||a.push({command:T,args:[p,I,t[I],x]}));for(I in t)Object.prototype.hasOwnProperty.call(t,I)&&!Object.prototype.hasOwnProperty.call(o,I)&&(Ut(o[I],t[I])||a.push({command:T,args:[p,I,t[I],x]}))}function Fn(o){return o.id}function bn(o,t){return o[t.id]=t,o}class Qt{constructor(t,a,p,x){this.message=(t?`${t}: `:"")+p,x&&(this.identifier=x),null!=a&&a.__line__&&(this.line=a.__line__)}}function pt(o,...t){for(const a of t)for(const p in a)o[p]=a[p];return o}class ce extends Error{constructor(t,a){super(a),this.message=a,this.key=t}}class Se{constructor(t,a=[]){this.parent=t,this.bindings={};for(const[p,x]of a)this.bindings[p]=x}concat(t){return new Se(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ke={kind:"null"},he={kind:"number"},de={kind:"string"},Re={kind:"boolean"},xt={kind:"color"},Xt={kind:"object"},Ot={kind:"value"},_i={kind:"collator"},hi={kind:"formatted"},Qi={kind:"padding"},tn={kind:"resolvedImage"};function Ji(o,t){return{kind:"array",itemType:o,N:t}}function Vi(o){if("array"===o.kind){const t=Vi(o.itemType);return"number"==typeof o.N?`array<${t}, ${o.N}>`:"value"===o.itemType.kind?"array":`array<${t}>`}return o.kind}const zt=[ke,he,de,Re,xt,hi,Xt,Ji(Ot),Qi,tn];function li(o,t){if("error"===t.kind)return null;if("array"===o.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!li(o.itemType,t.itemType))&&("number"!=typeof o.N||o.N===t.N))return null}else{if(o.kind===t.kind)return null;if("value"===o.kind)for(const a of zt)if(!li(a,t))return null}return`Expected ${Vi(o)} but found ${Vi(t)} instead.`}function vt(o,t){return t.some(a=>a.kind===o.kind)}function q(o,t){return t.some(a=>"null"===a?null===o:"array"===a?Array.isArray(o):"object"===a?o&&!Array.isArray(o)&&"object"==typeof o:a===typeof o)}function V(o,t){return"array"===o.kind&&"array"===t.kind?o.itemType.kind===t.itemType.kind&&"number"==typeof o.N:o.kind===t.kind}const j=.96422,ge=4/29,Ae=6/29,ve=3*Ae*Ae,se=Ae*Ae*Ae,X=Math.PI/180,pe=180/Math.PI;function Qe(o){return(o%=360)<0&&(o+=360),o}function at([o,t,a,p]){let x,T;const I=Te((.2225045*(o=xe(o))+.7168786*(t=xe(t))+.0606169*(a=xe(a)))/1);o===t&&t===a?x=T=I:(x=Te((.4360747*o+.3850649*t+.1430804*a)/j),T=Te((.0139322*o+.0971045*t+.7141733*a)/.82521));const O=116*I-16;return[O<0?0:O,500*(x-I),200*(I-T),p]}function xe(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Te(o){return o>se?Math.pow(o,1/3):o/ve+ge}function ue([o,t,a,p]){let x=(o+16)/116,T=isNaN(t)?x:x+t/500,I=isNaN(a)?x:x-a/200;return x=1*Je(x),T=j*Je(T),I=.82521*Je(I),[De(3.1338561*T-1.6168667*x-.4906146*I),De(-.9787684*T+1.9161415*x+.033454*I),De(.0719453*T-.2289914*x+1.4052427*I),p]}function De(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Je(o){return o>Ae?o*o*o:ve*(o-ge)}function Tt(o){return parseInt(o.padEnd(2,o),16)/255}function Fe(o,t){return Ie(t?o/100:o,0,1)}function Ie(o,t,a){return Math.min(Math.max(t,o),a)}function Ze(o){return!o.some(Number.isNaN)}const Bt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Gt{constructor(t,a,p,x=1,T=!0){this.r=t,this.g=a,this.b=p,this.a=x,T||(this.r*=x,this.g*=x,this.b*=x,x||this.overwriteGetter("rgb",[t,a,p,x]))}static parse(t){if(t instanceof Gt)return t;if("string"!=typeof t)return;const a=function(p){if("transparent"===(p=p.toLowerCase().trim()))return[0,0,0,0];const x=Bt[p];if(x){const[I,O,N]=x;return[I/255,O/255,N/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const I=p.length<6?1:2;let O=1;return[Tt(p.slice(O,O+=I)),Tt(p.slice(O,O+=I)),Tt(p.slice(O,O+=I)),Tt(p.slice(O,O+I)||"ff")]}if(p.startsWith("rgb")){const I=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){const[O,N,Z,K,te,le,me,be,Be,Ke,tt,_t]=I,st=[K||" ",me||" ",Ke].join("");if("  "===st||"  /"===st||",,"===st||",,,"===st){const St=[Z,le,Be].join(""),At="%%%"===St?100:""===St?255:0;if(At){const Jt=[Ie(+N/At,0,1),Ie(+te/At,0,1),Ie(+be/At,0,1),tt?Fe(+tt,_t):1];if(Ze(Jt))return Jt}}return}}const T=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[I,O,N,Z,K,te,le,me,be]=T,Be=[N||" ",K||" ",le].join("");if("  "===Be||"  /"===Be||",,"===Be||",,,"===Be){const Ke=[+O,Ie(+Z,0,100),Ie(+te,0,100),me?Fe(+me,be):1];if(Ze(Ke))return function([tt,_t,st,St]){function At(Jt){const Fi=(Jt+tt/30)%12,Li=_t*Math.min(st,1-st);return st-Li*Math.max(-1,Math.min(Fi-3,9-Fi,1))}return tt=Qe(tt),_t/=100,st/=100,[At(0),At(8),At(4),St]}(Ke)}}}(t);return a?new Gt(...a,!1):void 0}get rgb(){const{r:t,g:a,b:p,a:x}=this,T=x||1/0;return this.overwriteGetter("rgb",[t/T,a/T,p/T,x])}get hcl(){return this.overwriteGetter("hcl",function(t){const[a,p,x,T]=at(t),I=Math.sqrt(p*p+x*x);return[Math.round(1e4*I)?Qe(Math.atan2(x,p)*pe):NaN,I,a,T]}(this.rgb))}get lab(){return this.overwriteGetter("lab",at(this.rgb))}overwriteGetter(t,a){return Object.defineProperty(this,t,{value:a}),a}toString(){const[t,a,p,x]=this.rgb;return`rgba(${[t,a,p].map(T=>Math.round(255*T)).join(",")},${x})`}}Gt.black=new Gt(0,0,0,1),Gt.white=new Gt(1,1,1,1),Gt.transparent=new Gt(0,0,0,0),Gt.red=new Gt(1,0,0,1);class di{constructor(t,a,p){this.sensitivity=t?a?"variant":"case":a?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,a){return this.collator.compare(t,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ui{constructor(t,a,p,x,T){this.text=t,this.image=a,this.scale=p,this.fontStack=x,this.textColor=T}}class nn{constructor(t){this.sections=t}static fromString(t){return new nn([new ui(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof nn?t:nn.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}}class Ni{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Ni)return t;if("number"==typeof t)return new Ni([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const a of t)if("number"!=typeof a)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Ni(t)}}toString(){return JSON.stringify(this.values)}}class $n{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new $n({name:t,available:!1}):null}}function Mo(o,t,a,p){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof a&&a>=0&&a<=255?void 0===p||"number"==typeof p&&p>=0&&p<=1?null:`Invalid rgba value [${[o,t,a,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof p?[o,t,a,p]:[o,t,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ar(o){if(null===o||"string"==typeof o||"boolean"==typeof o||"number"==typeof o||o instanceof Gt||o instanceof di||o instanceof nn||o instanceof Ni||o instanceof $n)return!0;if(Array.isArray(o)){for(const t of o)if(!Ar(t))return!1;return!0}if("object"==typeof o){for(const t in o)if(!Ar(o[t]))return!1;return!0}return!1}function In(o){if(null===o)return ke;if("string"==typeof o)return de;if("boolean"==typeof o)return Re;if("number"==typeof o)return he;if(o instanceof Gt)return xt;if(o instanceof di)return _i;if(o instanceof nn)return hi;if(o instanceof Ni)return Qi;if(o instanceof $n)return tn;if(Array.isArray(o)){const t=o.length;let a;for(const p of o){const x=In(p);if(a){if(a===x)continue;a=Ot;break}a=x}return Ji(a||Ot,t)}return Xt}function Fr(o){const t=typeof o;return null===o?"":"string"===t||"number"===t||"boolean"===t?String(o):o instanceof Gt||o instanceof nn||o instanceof Ni||o instanceof $n?o.toString():JSON.stringify(o)}class to{constructor(t,a){this.type=t,this.value=a}static parse(t,a){if(2!==t.length)return a.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ar(t[1]))return a.error("invalid value");const p=t[1];let x=In(p);const T=a.expectedType;return"array"!==x.kind||0!==x.N||!T||"array"!==T.kind||"number"==typeof T.N&&0!==T.N||(x=T),new to(x,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class on{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const fn={string:de,number:he,boolean:Re,object:Xt};class Mr{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");let p,x=1;const T=t[0];if("array"===T){let O,N;if(t.length>2){const Z=t[1];if("string"!=typeof Z||!(Z in fn)||"object"===Z)return a.error('The item type argument of "array" must be one of string, number, boolean',1);O=fn[Z],x++}else O=Ot;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return a.error('The length argument to "array" must be a positive integer literal',2);N=t[2],x++}p=Ji(O,N)}else{if(!fn[T])throw new Error(`Types doesn't contain name = ${T}`);p=fn[T]}const I=[];for(;x<t.length;x++){const O=a.parse(t[x],x,Ot);if(!O)return null;I.push(O)}return new Mr(p,I)}evaluate(t){for(let a=0;a<this.args.length;a++){const p=this.args[a].evaluate(t);if(!li(this.type,In(p)))return p;if(a===this.args.length-1)throw new on(`Expected value to be of type ${Vi(this.type)}, but found ${Vi(In(p))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const rs={"to-boolean":Re,"to-color":xt,"to-number":he,"to-string":de};class Qn{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const p=t[0];if(!rs[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if(("to-boolean"===p||"to-string"===p)&&2!==t.length)return a.error("Expected one argument.");const x=rs[p],T=[];for(let I=1;I<t.length;I++){const O=a.parse(t[I],I,Ot);if(!O)return null;T.push(O)}return new Qn(x,T)}evaluate(t){if("boolean"===this.type.kind)return!!this.args[0].evaluate(t);if("color"===this.type.kind){let a,p;for(const x of this.args){if(a=x.evaluate(t),p=null,a instanceof Gt)return a;if("string"==typeof a){const T=t.parseColor(a);if(T)return T}else if(Array.isArray(a)&&(p=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Mo(a[0],a[1],a[2],a[3]),!p))return new Gt(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new on(p||`Could not parse color from value '${"string"==typeof a?a:JSON.stringify(a)}'`)}if("padding"===this.type.kind){let a;for(const p of this.args){a=p.evaluate(t);const x=Ni.parse(a);if(x)return x}throw new on(`Could not parse padding from value '${"string"==typeof a?a:JSON.stringify(a)}'`)}if("number"===this.type.kind){let a=null;for(const p of this.args){if(a=p.evaluate(t),null===a)return 0;const x=Number(a);if(!isNaN(x))return x}throw new on(`Could not convert ${JSON.stringify(a)} to number.`)}return"formatted"===this.type.kind?nn.fromString(Fr(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?$n.fromString(Fr(this.args[0].evaluate(t))):Fr(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const hr=["Unknown","Point","LineString","Polygon"];class Do{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?hr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let a=this._parseColorCache[t];return a||(a=this._parseColorCache[t]=Gt.parse(t)),a}}class io{constructor(t,a,p=[],x,T=new Se,I=[]){this.registry=t,this.path=p,this.key=p.map(O=>`[${O}]`).join(""),this.scope=T,this.errors=I,this.expectedType=x,this._isConstant=a}parse(t,a,p,x,T={}){return a?this.concat(a,p,x)._parse(t,T):this._parse(t,T)}_parse(t,a){function p(x,T,I){return"assert"===I?new Mr(T,[x]):"coerce"===I?new Qn(T,[x]):x}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=t[0];if("string"!=typeof x)return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[x];if(T){let I=T.parse(t,this);if(!I)return null;if(this.expectedType){const O=this.expectedType,N=I.type;if("string"!==O.kind&&"number"!==O.kind&&"boolean"!==O.kind&&"object"!==O.kind&&"array"!==O.kind||"value"!==N.kind)if("color"!==O.kind&&"formatted"!==O.kind&&"resolvedImage"!==O.kind||"value"!==N.kind&&"string"!==N.kind)if("padding"!==O.kind||"value"!==N.kind&&"number"!==N.kind&&"array"!==N.kind){if(this.checkSubtype(O,N))return null}else I=p(I,O,a.typeAnnotation||"coerce");else I=p(I,O,a.typeAnnotation||"coerce");else I=p(I,O,a.typeAnnotation||"assert")}if(!(I instanceof to)&&"resolvedImage"!==I.type.kind&&this._isConstant(I)){const O=new Do;try{I=new to(I.type,I.evaluate(O))}catch(N){return this.error(N.message),null}}return I}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,a,p){const x="number"==typeof t?this.path.concat(t):this.path,T=p?this.scope.concat(p):this.scope;return new io(this.registry,this._isConstant,x,a||null,T,this.errors)}error(t,...a){const p=`${this.key}${a.map(x=>`[${x}]`).join("")}`;this.errors.push(new ce(p,t))}checkSubtype(t,a){const p=li(t,a);return p&&this.error(p),p}}class no{constructor(t,a,p){this.type=_i,this.locale=p,this.caseSensitive=t,this.diacriticSensitive=a}static parse(t,a){if(2!==t.length)return a.error("Expected one argument.");const p=t[1];if("object"!=typeof p||Array.isArray(p))return a.error("Collator options argument must be an object.");const x=a.parse(void 0!==p["case-sensitive"]&&p["case-sensitive"],1,Re);if(!x)return null;const T=a.parse(void 0!==p["diacritic-sensitive"]&&p["diacritic-sensitive"],1,Re);if(!T)return null;let I=null;return p.locale&&(I=a.parse(p.locale,1,de),!I)?null:new no(x,T,I)}evaluate(t){return new di(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const mn=8192;function ro(o,t){o[0]=Math.min(o[0],t[0]),o[1]=Math.min(o[1],t[1]),o[2]=Math.max(o[2],t[0]),o[3]=Math.max(o[3],t[1])}function Po(o,t){return!(o[0]<=t[0]||o[2]>=t[2]||o[1]<=t[1]||o[3]>=t[3])}function os(o,t){const a=(180+o[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,x=Math.pow(2,t.z);return[Math.round(a*x*mn),Math.round(p*x*mn)]}function xa(o,t,a){const p=o[0]-t[0],x=o[1]-t[1],T=o[0]-a[0],I=o[1]-a[1];return p*I-T*x==0&&p*T<=0&&x*I<=0}function La(o,t){let a=!1;for(let I=0,O=t.length;I<O;I++){const N=t[I];for(let Z=0,K=N.length;Z<K-1;Z++){if(xa(o,N[Z],N[Z+1]))return!1;(x=N[Z])[1]>(p=o)[1]!=(T=N[Z+1])[1]>p[1]&&p[0]<(T[0]-x[0])*(p[1]-x[1])/(T[1]-x[1])+x[0]&&(a=!a)}}var p,x,T;return a}function Ic(o,t){for(let a=0;a<t.length;a++)if(La(o,t[a]))return!0;return!1}function wa(o,t,a,p){const x=p[0]-a[0],T=p[1]-a[1],I=(o[0]-a[0])*T-x*(o[1]-a[1]),O=(t[0]-a[0])*T-x*(t[1]-a[1]);return I>0&&O<0||I<0&&O>0}function vl(o,t,a){for(const Z of a)for(let K=0;K<Z.length-1;++K)if((O=[(I=Z[K+1])[0]-(T=Z[K])[0],I[1]-T[1]])[0]*(N=[(x=t)[0]-(p=o)[0],x[1]-p[1]])[1]-O[1]*N[0]!=0&&wa(p,x,T,I)&&wa(T,I,p,x))return!0;var p,x,T,I,O,N;return!1}function Ca(o,t){for(let a=0;a<o.length;++a)if(!La(o[a],t))return!1;for(let a=0;a<o.length-1;++a)if(vl(o[a],o[a+1],t))return!1;return!0}function Ea(o,t){for(let a=0;a<t.length;a++)if(Ca(o,t[a]))return!0;return!1}function Na(o,t,a){const p=[];for(let x=0;x<o.length;x++){const T=[];for(let I=0;I<o[x].length;I++){const O=os(o[x][I],a);ro(t,O),T.push(O)}p.push(T)}return p}function cn(o,t,a){const p=[];for(let x=0;x<o.length;x++){const T=Na(o[x],t,a);p.push(T)}return p}function Pr(o,t,a,p){if(o[0]<a[0]||o[0]>a[2]){const x=.5*p;let T=o[0]-a[0]>x?-p:a[0]-o[0]>x?p:0;0===T&&(T=o[0]-a[2]>x?-p:a[2]-o[0]>x?p:0),o[0]+=T}ro(t,o)}function Wr(o,t,a,p){const x=Math.pow(2,p.z)*mn,T=[p.x*mn,p.y*mn],I=[];for(const O of o)for(const N of O){const Z=[N.x+T[0],N.y+T[1]];Pr(Z,t,a,x),I.push(Z)}return I}function As(o,t,a,p){const x=Math.pow(2,p.z)*mn,T=[p.x*mn,p.y*mn],I=[];for(const N of o){const Z=[];for(const K of N){const te=[K.x+T[0],K.y+T[1]];ro(t,te),Z.push(te)}I.push(Z)}if(t[2]-t[0]<=x/2){(O=t)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(const N of I)for(const Z of N)Pr(Z,t,a,x)}var O;return I}class vr{constructor(t,a){this.type=Re,this.geojson=t,this.geometries=a}static parse(t,a){if(2!==t.length)return a.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ar(t[1])){const p=t[1];if("FeatureCollection"===p.type)for(let x=0;x<p.features.length;++x){const T=p.features[x].geometry.type;if("Polygon"===T||"MultiPolygon"===T)return new vr(p,p.features[x].geometry)}else if("Feature"===p.type){const x=p.geometry.type;if("Polygon"===x||"MultiPolygon"===x)return new vr(p,p.geometry)}else if("Polygon"===p.type||"MultiPolygon"===p.type)return new vr(p,p)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(a,p){const x=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],I=a.canonicalID();if("Polygon"===p.type){const O=Na(p.coordinates,T,I),N=Wr(a.geometry(),x,T,I);if(!Po(x,T))return!1;for(const Z of N)if(!La(Z,O))return!1}if("MultiPolygon"===p.type){const O=cn(p.coordinates,T,I),N=Wr(a.geometry(),x,T,I);if(!Po(x,T))return!1;for(const Z of N)if(!Ic(Z,O))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(a,p){const x=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],I=a.canonicalID();if("Polygon"===p.type){const O=Na(p.coordinates,T,I),N=As(a.geometry(),x,T,I);if(!Po(x,T))return!1;for(const Z of N)if(!Ca(Z,O))return!1}if("MultiPolygon"===p.type){const O=cn(p.coordinates,T,I),N=As(a.geometry(),x,T,I);if(!Po(x,T))return!1;for(const Z of N)if(!Ea(Z,O))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class ks{constructor(t,a){this.type=a.type,this.name=t,this.boundExpression=a}static parse(t,a){if(2!==t.length||"string"!=typeof t[1])return a.error("'var' expression requires exactly one string literal argument.");const p=t[1];return a.scope.has(p)?new ks(p,a.scope.get(p)):a.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class go{constructor(t,a,p,x){this.name=t,this.type=a,this._evaluate=p,this.args=x}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,a){const p=t[0],x=go.definitions[p];if(!x)return a.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(x)?x[0]:x.type,I=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,O=I.filter(([Z])=>!Array.isArray(Z)||Z.length===t.length-1);let N=null;for(const[Z,K]of O){N=new io(a.registry,qo,a.path,null,a.scope);const te=[];let le=!1;for(let me=1;me<t.length;me++){const be=t[me],Be=Array.isArray(Z)?Z[me-1]:Z.type,Ke=N.parse(be,1+te.length,Be);if(!Ke){le=!0;break}te.push(Ke)}if(!le)if(Array.isArray(Z)&&Z.length!==te.length)N.error(`Expected ${Z.length} arguments, but found ${te.length} instead.`);else{for(let me=0;me<te.length;me++){const be=Array.isArray(Z)?Z[me]:Z.type,Be=te[me];N.concat(me+1).checkSubtype(be,Be.type)}if(0===N.errors.length)return new go(p,T,K,te)}}if(1===O.length)a.errors.push(...N.errors);else{const Z=(O.length?O:I).map(([te])=>{return le=te,Array.isArray(le)?`(${le.map(Vi).join(", ")})`:`(${Vi(le.type)}...)`;var le}).join(" | "),K=[];for(let te=1;te<t.length;te++){const le=a.parse(t[te],1+K.length);if(!le)return null;K.push(Vi(le.type))}a.error(`Expected arguments of type ${Z}, but found (${K.join(", ")}) instead.`)}return null}static register(t,a){go.definitions=a;for(const p in a)t[p]=go}}function qo(o){if(o instanceof ks)return qo(o.boundExpression);if(o instanceof go&&"error"===o.name||o instanceof no||o instanceof vr)return!1;const t=o instanceof Qn||o instanceof Mr;let a=!0;return o.eachChild(p=>{a=t?a&&qo(p):a&&p instanceof to}),!!a&&Uo(o)&&gr(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Uo(o){if(o instanceof go&&("get"===o.name&&1===o.args.length||"feature-state"===o.name||"has"===o.name&&1===o.args.length||"properties"===o.name||"geometry-type"===o.name||"id"===o.name||/^filter-/.test(o.name))||o instanceof vr)return!1;let t=!0;return o.eachChild(a=>{t&&!Uo(a)&&(t=!1)}),t}function Yo(o){if(o instanceof go&&"feature-state"===o.name)return!1;let t=!0;return o.eachChild(a=>{t&&!Yo(a)&&(t=!1)}),t}function gr(o,t){if(o instanceof go&&t.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(p=>{a&&!gr(p,t)&&(a=!1)}),a}function Ai(o,t){const a=o.length-1;let p,x,T=0,I=a,O=0;for(;T<=I;)if(O=Math.floor((T+I)/2),p=o[O],x=o[O+1],p<=t){if(O===a||t<x)return O;T=O+1}else{if(!(p>t))throw new on("Input is not a number.");I=O-1}return 0}class rn{constructor(t,a,p){this.type=t,this.input=a,this.labels=[],this.outputs=[];for(const[x,T]of p)this.labels.push(x),this.outputs.push(T)}static parse(t,a){if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");const p=a.parse(t[1],1,he);if(!p)return null;const x=[];let T=null;a.expectedType&&"value"!==a.expectedType.kind&&(T=a.expectedType);for(let I=1;I<t.length;I+=2){const O=1===I?-1/0:t[I],N=t[I+1],Z=I,K=I+1;if("number"!=typeof O)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(x.length&&x[x.length-1][0]>=O)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Z);const te=a.parse(N,K,T);if(!te)return null;T=T||te.type,x.push([O,te])}return new rn(T,p,x)}evaluate(t){const a=this.labels,p=this.outputs;if(1===a.length)return p[0].evaluate(t);const x=this.input.evaluate(t);if(x<=a[0])return p[0].evaluate(t);const T=a.length;return x>=a[T-1]?p[T-1].evaluate(t):p[Ai(a,x)].evaluate(t)}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function An(o,t,a){return o+a*(t-o)}function _o(o,t,a){return o.map((p,x)=>An(p,t[x],a))}const Lr={number:An,color:function(o,t,a,p="rgb"){switch(p){case"rgb":{const[x,T,I,O]=_o(o.rgb,t.rgb,a);return new Gt(x,T,I,O,!1)}case"hcl":{const[x,T,I,O]=o.hcl,[N,Z,K,te]=t.hcl;let le,me;if(isNaN(x)||isNaN(N))isNaN(x)?isNaN(N)?le=NaN:(le=N,1!==I&&0!==I||(me=Z)):(le=x,1!==K&&0!==K||(me=T));else{let _t=N-x;N>x&&_t>180?_t-=360:N<x&&x-N>180&&(_t+=360),le=x+a*_t}const[be,Be,Ke,tt]=function([_t,st,St,At]){return _t=isNaN(_t)?0:_t*X,ue([St,Math.cos(_t)*st,Math.sin(_t)*st,At])}([le,me??An(T,Z,a),An(I,K,a),An(O,te,a)]);return new Gt(be,Be,Ke,tt,!1)}case"lab":{const[x,T,I,O]=ue(_o(o.lab,t.lab,a));return new Gt(x,T,I,O,!1)}}},array:_o,padding:function(o,t,a){return new Ni(_o(o.values,t.values,a))}};class Yn{constructor(t,a,p,x,T){this.type=t,this.operator=a,this.interpolation=p,this.input=x,this.labels=[],this.outputs=[];for(const[I,O]of T)this.labels.push(I),this.outputs.push(O)}static interpolationFactor(t,a,p,x){let T=0;if("exponential"===t.name)T=Ko(a,t.base,p,x);else if("linear"===t.name)T=Ko(a,1,p,x);else if("cubic-bezier"===t.name){const I=t.controlPoints;T=new it(I[0],I[1],I[2],I[3]).solve(Ko(a,1,p,x))}return T}static parse(t,a){let[p,x,T,...I]=t;if(!Array.isArray(x)||0===x.length)return a.error("Expected an interpolation type expression.",1);if("linear"===x[0])x={name:"linear"};else if("exponential"===x[0]){const Z=x[1];if("number"!=typeof Z)return a.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:Z}}else{if("cubic-bezier"!==x[0])return a.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const Z=x.slice(1);if(4!==Z.length||Z.some(K=>"number"!=typeof K||K<0||K>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:Z}}}if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(T=a.parse(T,2,he),!T)return null;const O=[];let N=null;"interpolate-hcl"===p||"interpolate-lab"===p?N=xt:a.expectedType&&"value"!==a.expectedType.kind&&(N=a.expectedType);for(let Z=0;Z<I.length;Z+=2){const K=I[Z],te=I[Z+1],le=Z+3,me=Z+4;if("number"!=typeof K)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if(O.length&&O[O.length-1][0]>=K)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',le);const be=a.parse(te,me,N);if(!be)return null;N=N||be.type,O.push([K,be])}return V(N,he)||V(N,xt)||V(N,Qi)||V(N,Ji(he))?new Yn(N,p,x,T,O):a.error(`Type ${Vi(N)} is not interpolatable.`)}evaluate(t){const a=this.labels,p=this.outputs;if(1===a.length)return p[0].evaluate(t);const x=this.input.evaluate(t);if(x<=a[0])return p[0].evaluate(t);const T=a.length;if(x>=a[T-1])return p[T-1].evaluate(t);const I=Ai(a,x),O=Yn.interpolationFactor(this.interpolation,x,a[I],a[I+1]),N=p[I].evaluate(t),Z=p[I+1].evaluate(t);switch(this.operator){case"interpolate":return Lr[this.type.kind](N,Z,O);case"interpolate-hcl":return Lr.color(N,Z,O,"hcl");case"interpolate-lab":return Lr.color(N,Z,O,"lab")}}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Ko(o,t,a,p){const x=p-a,T=o-a;return 0===x?0:1===t?T/x:(Math.pow(t,T)-1)/(Math.pow(t,x)-1)}class mr{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expectected at least one argument.");let p=null;const x=a.expectedType;x&&"value"!==x.kind&&(p=x);const T=[];for(const O of t.slice(1)){const N=a.parse(O,1+T.length,p,void 0,{typeAnnotation:"omit"});if(!N)return null;p=p||N.type,T.push(N)}if(!p)throw new Error("No output type");const I=x&&T.some(O=>li(x,O.type));return new mr(I?Ot:p,T)}evaluate(t){let a,p=null,x=0;for(const T of this.args)if(x++,p=T.evaluate(t),p&&p instanceof $n&&!p.available&&(a||(a=p.name),p=null,x===this.args.length&&(p=a)),null!==p)break;return p}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}class jo{constructor(t,a){this.type=a.type,this.bindings=[].concat(t),this.result=a}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const a of this.bindings)t(a[1]);t(this.result)}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const p=[];for(let T=1;T<t.length-1;T+=2){const I=t[T];if("string"!=typeof I)return a.error(`Expected string, but found ${typeof I} instead.`,T);if(/[^a-zA-Z0-9_]/.test(I))return a.error("Variable names must contain only alphanumeric characters or '_'.",T);const O=a.parse(t[T+1],T+1);if(!O)return null;p.push([I,O])}const x=a.parse(t[t.length-1],t.length-1,a.expectedType,p);return x?new jo(p,x):null}outputDefined(){return this.result.outputDefined()}}class Oo{constructor(t,a,p){this.type=t,this.index=a,this.input=p}static parse(t,a){if(3!==t.length)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const p=a.parse(t[1],1,he),x=a.parse(t[2],2,Ji(a.expectedType||Ot));return p&&x?new Oo(x.type.itemType,p,x):null}evaluate(t){const a=this.index.evaluate(t),p=this.input.evaluate(t);if(a<0)throw new on(`Array index out of bounds: ${a} < 0.`);if(a>=p.length)throw new on(`Array index out of bounds: ${a} > ${p.length-1}.`);if(a!==Math.floor(a))throw new on(`Array index must be an integer, but found ${a} instead.`);return p[a]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class sn{constructor(t,a){this.type=Re,this.needle=t,this.haystack=a}static parse(t,a){if(3!==t.length)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const p=a.parse(t[1],1,Ot),x=a.parse(t[2],2,Ot);return p&&x?vt(p.type,[Re,de,he,ke,Ot])?new sn(p,x):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(p.type)} instead`):null}evaluate(t){const a=this.needle.evaluate(t),p=this.haystack.evaluate(t);if(!p)return!1;if(!q(a,["boolean","string","number","null"]))throw new on(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(In(a))} instead.`);if(!q(p,["string","array"]))throw new on(`Expected second argument to be of type array or string, but found ${Vi(In(p))} instead.`);return p.indexOf(a)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ro{constructor(t,a,p){this.type=he,this.needle=t,this.haystack=a,this.fromIndex=p}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const p=a.parse(t[1],1,Ot),x=a.parse(t[2],2,Ot);if(!p||!x)return null;if(!vt(p.type,[Re,de,he,ke,Ot]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(p.type)} instead`);if(4===t.length){const T=a.parse(t[3],3,he);return T?new Ro(p,x,T):null}return new Ro(p,x)}evaluate(t){const a=this.needle.evaluate(t),p=this.haystack.evaluate(t);if(!q(a,["boolean","string","number","null"]))throw new on(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(In(a))} instead.`);if(!q(p,["string","array"]))throw new on(`Expected second argument to be of type array or string, but found ${Vi(In(p))} instead.`);if(this.fromIndex){const x=this.fromIndex.evaluate(t);return p.indexOf(a,x)}return p.indexOf(a)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Js{constructor(t,a,p,x,T,I){this.inputType=t,this.type=a,this.input=p,this.cases=x,this.outputs=T,this.otherwise=I}static parse(t,a){if(t.length<5)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return a.error("Expected an even number of arguments.");let p,x;a.expectedType&&"value"!==a.expectedType.kind&&(x=a.expectedType);const T={},I=[];for(let Z=2;Z<t.length-1;Z+=2){let K=t[Z];const te=t[Z+1];Array.isArray(K)||(K=[K]);const le=a.concat(Z);if(0===K.length)return le.error("Expected at least one branch label.");for(const be of K){if("number"!=typeof be&&"string"!=typeof be)return le.error("Branch labels must be numbers or strings.");if("number"==typeof be&&Math.abs(be)>Number.MAX_SAFE_INTEGER)return le.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof be&&Math.floor(be)!==be)return le.error("Numeric branch labels must be integer values.");if(p){if(le.checkSubtype(p,In(be)))return null}else p=In(be);if(void 0!==T[String(be)])return le.error("Branch labels must be unique.");T[String(be)]=I.length}const me=a.parse(te,Z,x);if(!me)return null;x=x||me.type,I.push(me)}const O=a.parse(t[1],1,Ot);if(!O)return null;const N=a.parse(t[t.length-1],t.length-1,x);return N?"value"!==O.type.kind&&a.concat(1).checkSubtype(p,O.type)?null:new Js(p,x,O,T,I,N):null}evaluate(t){const a=this.input.evaluate(t);return(In(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class un{constructor(t,a,p){this.type=t,this.branches=a,this.otherwise=p}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return a.error("Expected an odd number of arguments.");let p;a.expectedType&&"value"!==a.expectedType.kind&&(p=a.expectedType);const x=[];for(let I=1;I<t.length-1;I+=2){const O=a.parse(t[I],I,Re);if(!O)return null;const N=a.parse(t[I+1],I+1,p);if(!N)return null;x.push([O,N]),p=p||N.type}const T=a.parse(t[t.length-1],t.length-1,p);if(!T)return null;if(!p)throw new Error("Can't infer output type");return new un(p,x,T)}evaluate(t){for(const[a,p]of this.branches)if(a.evaluate(t))return p.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[a,p]of this.branches)t(a),t(p);t(this.otherwise)}outputDefined(){return this.branches.every(([t,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class ar{constructor(t,a,p,x){this.type=t,this.input=a,this.beginIndex=p,this.endIndex=x}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const p=a.parse(t[1],1,Ot),x=a.parse(t[2],2,he);if(!p||!x)return null;if(!vt(p.type,[Ji(Ot),de,Ot]))return a.error(`Expected first argument to be of type array or string, but found ${Vi(p.type)} instead`);if(4===t.length){const T=a.parse(t[3],3,he);return T?new ar(p.type,p,x,T):null}return new ar(p.type,p,x)}evaluate(t){const a=this.input.evaluate(t),p=this.beginIndex.evaluate(t);if(!q(a,["string","array"]))throw new on(`Expected first argument to be of type array or string, but found ${Vi(In(a))} instead.`);if(this.endIndex){const x=this.endIndex.evaluate(t);return a.slice(p,x)}return a.slice(p)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function gs(o,t){return"=="===o||"!="===o?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function ss(o,t,a,p){return 0===p.compare(t,a)}function yo(o,t,a){const p="=="!==o&&"!="!==o;return class DE{constructor(T,I,O){this.type=Re,this.lhs=T,this.rhs=I,this.collator=O,this.hasUntypedArgument="value"===T.type.kind||"value"===I.type.kind}static parse(T,I){if(3!==T.length&&4!==T.length)return I.error("Expected two or three arguments.");const O=T[0];let N=I.parse(T[1],1,Ot);if(!N)return null;if(!gs(O,N.type))return I.concat(1).error(`"${O}" comparisons are not supported for type '${Vi(N.type)}'.`);let Z=I.parse(T[2],2,Ot);if(!Z)return null;if(!gs(O,Z.type))return I.concat(2).error(`"${O}" comparisons are not supported for type '${Vi(Z.type)}'.`);if(N.type.kind!==Z.type.kind&&"value"!==N.type.kind&&"value"!==Z.type.kind)return I.error(`Cannot compare types '${Vi(N.type)}' and '${Vi(Z.type)}'.`);p&&("value"===N.type.kind&&"value"!==Z.type.kind?N=new Mr(Z.type,[N]):"value"!==N.type.kind&&"value"===Z.type.kind&&(Z=new Mr(N.type,[Z])));let K=null;if(4===T.length){if("string"!==N.type.kind&&"string"!==Z.type.kind&&"value"!==N.type.kind&&"value"!==Z.type.kind)return I.error("Cannot use collator to compare non-string types.");if(K=I.parse(T[3],3,_i),!K)return null}return new DE(N,Z,K)}evaluate(T){const I=this.lhs.evaluate(T),O=this.rhs.evaluate(T);if(p&&this.hasUntypedArgument){const N=In(I),Z=In(O);if(N.kind!==Z.kind||"string"!==N.kind&&"number"!==N.kind)throw new on(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${N.kind}, ${Z.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const N=In(I),Z=In(O);if("string"!==N.kind||"string"!==Z.kind)return t(T,I,O)}return this.collator?a(T,I,O,this.collator.evaluate(T)):t(T,I,O)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const Qs=yo("==",function(o,t,a){return t===a},ss),za=yo("!=",function(o,t,a){return t!==a},function(o,t,a,p){return!ss(0,t,a,p)}),_s=yo("<",function(o,t,a){return t<a},function(o,t,a,p){return p.compare(t,a)<0}),Ho=yo(">",function(o,t,a){return t>a},function(o,t,a,p){return p.compare(t,a)>0}),vo=yo("<=",function(o,t,a){return t<=a},function(o,t,a,p){return p.compare(t,a)<=0}),Ps=yo(">=",function(o,t,a){return t>=a},function(o,t,a,p){return p.compare(t,a)>=0});class pn{constructor(t,a,p,x,T){this.type=de,this.number=t,this.locale=a,this.currency=p,this.minFractionDigits=x,this.maxFractionDigits=T}static parse(t,a){if(3!==t.length)return a.error("Expected two arguments.");const p=a.parse(t[1],1,he);if(!p)return null;const x=t[2];if("object"!=typeof x||Array.isArray(x))return a.error("NumberFormat options argument must be an object.");let T=null;if(x.locale&&(T=a.parse(x.locale,1,de),!T))return null;let I=null;if(x.currency&&(I=a.parse(x.currency,1,de),!I))return null;let O=null;if(x["min-fraction-digits"]&&(O=a.parse(x["min-fraction-digits"],1,he),!O))return null;let N=null;return x["max-fraction-digits"]&&(N=a.parse(x["max-fraction-digits"],1,he),!N)?null:new pn(p,T,I,O,N)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class as{constructor(t){this.type=hi,this.sections=t}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const p=t[1];if(!Array.isArray(p)&&"object"==typeof p)return a.error("First argument must be an image or text section.");const x=[];let T=!1;for(let I=1;I<=t.length-1;++I){const O=t[I];if(T&&"object"==typeof O&&!Array.isArray(O)){T=!1;let N=null;if(O["font-scale"]&&(N=a.parse(O["font-scale"],1,he),!N))return null;let Z=null;if(O["text-font"]&&(Z=a.parse(O["text-font"],1,Ji(de)),!Z))return null;let K=null;if(O["text-color"]&&(K=a.parse(O["text-color"],1,xt),!K))return null;const te=x[x.length-1];te.scale=N,te.font=Z,te.textColor=K}else{const N=a.parse(t[I],1,Ot);if(!N)return null;const Z=N.type.kind;if("string"!==Z&&"value"!==Z&&"null"!==Z&&"resolvedImage"!==Z)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,x.push({content:N,scale:null,font:null,textColor:null})}}return new as(x)}evaluate(t){return new nn(this.sections.map(a=>{const p=a.content.evaluate(t);return In(p)===tn?new ui("",p,null,null,null):new ui(Fr(p),null,a.scale?a.scale.evaluate(t):null,a.font?a.font.evaluate(t).join(","):null,a.textColor?a.textColor.evaluate(t):null)}))}eachChild(t){for(const a of this.sections)t(a.content),a.scale&&t(a.scale),a.font&&t(a.font),a.textColor&&t(a.textColor)}outputDefined(){return!1}}class tl{constructor(t){this.type=tn,this.input=t}static parse(t,a){if(2!==t.length)return a.error("Expected two arguments.");const p=a.parse(t[1],1,de);return p?new tl(p):a.error("No image name provided.")}evaluate(t){const a=this.input.evaluate(t),p=$n.fromString(a);return p&&t.availableImages&&(p.available=t.availableImages.indexOf(a)>-1),p}eachChild(t){t(this.input)}outputDefined(){return!1}}class Ba{constructor(t){this.type=he,this.input=t}static parse(t,a){if(2!==t.length)return a.error(`Expected 1 argument, but found ${t.length-1} instead.`);const p=a.parse(t[1],1);return p?"array"!==p.type.kind&&"string"!==p.type.kind&&"value"!==p.type.kind?a.error(`Expected argument of type string or array, but found ${Vi(p.type)} instead.`):new Ba(p):null}evaluate(t){const a=this.input.evaluate(t);if("string"==typeof a||Array.isArray(a))return a.length;throw new on(`Expected value to be of type string or array, but found ${Vi(In(a))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const co={"==":Qs,"!=":za,">":Ho,"<":_s,">=":Ps,"<=":vo,array:Mr,at:Oo,boolean:Mr,case:un,coalesce:mr,collator:no,format:as,image:tl,in:sn,"index-of":Ro,interpolate:Yn,"interpolate-hcl":Yn,"interpolate-lab":Yn,length:Ba,let:jo,literal:to,match:Js,number:Mr,"number-format":pn,object:Mr,slice:ar,step:rn,string:Mr,"to-boolean":Qn,"to-color":Qn,"to-number":Qn,"to-string":Qn,var:ks,within:vr};function da(o,[t,a,p,x]){t=t.evaluate(o),a=a.evaluate(o),p=p.evaluate(o);const T=x?x.evaluate(o):1,I=Mo(t,a,p,T);if(I)throw new on(I);return new Gt(t/255,a/255,p/255,T,!1)}function ea(o,t){return o in t}function Os(o,t){const a=t[o];return void 0===a?null:a}function br(o){return{type:o}}function il(o){return{result:"success",value:o}}function Dr(o){return{result:"error",value:o}}function Xn(o){return"data-driven"===o["property-type"]||"cross-faded-data-driven"===o["property-type"]}function bo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Vr(o){return!!o.expression&&o.expression.interpolated}function Gn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":null===o?"null":typeof o}function qr(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}function Va(o){return o}function nl(o,t){const a="color"===t.type,p=o.stops&&"object"==typeof o.stops[0][0],x=p||!(p||void 0!==o.property),T=o.type||(Vr(t)?"exponential":"interval");if(a||"padding"===t.type){const K=a?Gt.parse:Ni.parse;(o=pt({},o)).stops&&(o.stops=o.stops.map(te=>[te[0],K(te[1])])),o.default=K(o.default?o.default:t.default)}if(o.colorSpace&&"rgb"!==(I=o.colorSpace)&&"hcl"!==I&&"lab"!==I)throw new Error(`Unknown color space: "${o.colorSpace}"`);var I;let O,N,Z;if("exponential"===T)O=Fs;else if("interval"===T)O=Ac;else if("categorical"===T){O=bl,N=Object.create(null);for(const K of o.stops)N[K[0]]=K[1];Z=typeof o.stops[0][0]}else{if("identity"!==T)throw new Error(`Unknown function type "${T}"`);O=ua}if(p){const K={},te=[];for(let be=0;be<o.stops.length;be++){const Be=o.stops[be],Ke=Be[0].zoom;void 0===K[Ke]&&(K[Ke]={zoom:Ke,type:o.type,property:o.property,default:o.default,stops:[]},te.push(Ke)),K[Ke].stops.push([Be[0].value,Be[1]])}const le=[];for(const be of te)le.push([K[be].zoom,nl(K[be],t)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:Yn.interpolationFactor.bind(void 0,me),zoomStops:le.map(be=>be[0]),evaluate:({zoom:be},Be)=>Fs({stops:le,base:o.base},t,be).evaluate(be,Be)}}if(x){const K="exponential"===T?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:K,interpolationFactor:Yn.interpolationFactor.bind(void 0,K),zoomStops:o.stops.map(te=>te[0]),evaluate:({zoom:te})=>O(o,t,te,N,Z)}}return{kind:"source",evaluate(K,te){const le=te&&te.properties?te.properties[o.property]:void 0;return void 0===le?Rs(o.default,t.default):O(o,t,le,N,Z)}}}function Rs(o,t,a){return void 0!==o?o:void 0!==t?t:void 0!==a?a:void 0}function bl(o,t,a,p,x){return Rs(typeof a===x?p[a]:void 0,o.default,t.default)}function Ac(o,t,a){if("number"!==Gn(a))return Rs(o.default,t.default);const p=o.stops.length;if(1===p||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const x=Ai(o.stops.map(T=>T[0]),a);return o.stops[x][1]}function Fs(o,t,a){const p=void 0!==o.base?o.base:1;if("number"!==Gn(a))return Rs(o.default,t.default);const x=o.stops.length;if(1===x||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[x-1][0])return o.stops[x-1][1];const T=Ai(o.stops.map(K=>K[0]),a),I=function(K,te,le,me){const be=me-le,Be=K-le;return 0===be?0:1===te?Be/be:(Math.pow(te,Be)-1)/(Math.pow(te,be)-1)}(a,p,o.stops[T][0],o.stops[T+1][0]),O=o.stops[T][1],N=o.stops[T+1][1],Z=Lr[t.type]||Va;return"function"==typeof O.evaluate?{evaluate(...K){const te=O.evaluate.apply(void 0,K),le=N.evaluate.apply(void 0,K);if(void 0!==te&&void 0!==le)return Z(te,le,I,o.colorSpace)}}:Z(O,N,I,o.colorSpace)}function ua(o,t,a){switch(t.type){case"color":a=Gt.parse(a);break;case"formatted":a=nn.fromString(a.toString());break;case"resolvedImage":a=$n.fromString(a.toString());break;case"padding":a=Ni.parse(a);break;default:Gn(a)===t.type||"enum"===t.type&&t.values[a]||(a=void 0)}return Rs(a,o.default,t.default)}go.register(co,{error:[{kind:"error"},[de],(o,[t])=>{throw new on(t.evaluate(o))}],typeof:[de,[Ot],(o,[t])=>Vi(In(t.evaluate(o)))],"to-rgba":[Ji(he,4),[xt],(o,[t])=>{const[a,p,x,T]=t.evaluate(o).rgb;return[255*a,255*p,255*x,T]}],rgb:[xt,[he,he,he],da],rgba:[xt,[he,he,he,he],da],has:{type:Re,overloads:[[[de],(o,[t])=>ea(t.evaluate(o),o.properties())],[[de,Xt],(o,[t,a])=>ea(t.evaluate(o),a.evaluate(o))]]},get:{type:Ot,overloads:[[[de],(o,[t])=>Os(t.evaluate(o),o.properties())],[[de,Xt],(o,[t,a])=>Os(t.evaluate(o),a.evaluate(o))]]},"feature-state":[Ot,[de],(o,[t])=>Os(t.evaluate(o),o.featureState||{})],properties:[Xt,[],o=>o.properties()],"geometry-type":[de,[],o=>o.geometryType()],id:[Ot,[],o=>o.id()],zoom:[he,[],o=>o.globals.zoom],"heatmap-density":[he,[],o=>o.globals.heatmapDensity||0],"line-progress":[he,[],o=>o.globals.lineProgress||0],accumulated:[Ot,[],o=>void 0===o.globals.accumulated?null:o.globals.accumulated],"+":[he,br(he),(o,t)=>{let a=0;for(const p of t)a+=p.evaluate(o);return a}],"*":[he,br(he),(o,t)=>{let a=1;for(const p of t)a*=p.evaluate(o);return a}],"-":{type:he,overloads:[[[he,he],(o,[t,a])=>t.evaluate(o)-a.evaluate(o)],[[he],(o,[t])=>-t.evaluate(o)]]},"/":[he,[he,he],(o,[t,a])=>t.evaluate(o)/a.evaluate(o)],"%":[he,[he,he],(o,[t,a])=>t.evaluate(o)%a.evaluate(o)],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(o,[t,a])=>Math.pow(t.evaluate(o),a.evaluate(o))],sqrt:[he,[he],(o,[t])=>Math.sqrt(t.evaluate(o))],log10:[he,[he],(o,[t])=>Math.log(t.evaluate(o))/Math.LN10],ln:[he,[he],(o,[t])=>Math.log(t.evaluate(o))],log2:[he,[he],(o,[t])=>Math.log(t.evaluate(o))/Math.LN2],sin:[he,[he],(o,[t])=>Math.sin(t.evaluate(o))],cos:[he,[he],(o,[t])=>Math.cos(t.evaluate(o))],tan:[he,[he],(o,[t])=>Math.tan(t.evaluate(o))],asin:[he,[he],(o,[t])=>Math.asin(t.evaluate(o))],acos:[he,[he],(o,[t])=>Math.acos(t.evaluate(o))],atan:[he,[he],(o,[t])=>Math.atan(t.evaluate(o))],min:[he,br(he),(o,t)=>Math.min(...t.map(a=>a.evaluate(o)))],max:[he,br(he),(o,t)=>Math.max(...t.map(a=>a.evaluate(o)))],abs:[he,[he],(o,[t])=>Math.abs(t.evaluate(o))],round:[he,[he],(o,[t])=>{const a=t.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[he,[he],(o,[t])=>Math.floor(t.evaluate(o))],ceil:[he,[he],(o,[t])=>Math.ceil(t.evaluate(o))],"filter-==":[Re,[de,Ot],(o,[t,a])=>o.properties()[t.value]===a.value],"filter-id-==":[Re,[Ot],(o,[t])=>o.id()===t.value],"filter-type-==":[Re,[de],(o,[t])=>o.geometryType()===t.value],"filter-<":[Re,[de,Ot],(o,[t,a])=>{const p=o.properties()[t.value],x=a.value;return typeof p==typeof x&&p<x}],"filter-id-<":[Re,[Ot],(o,[t])=>{const a=o.id(),p=t.value;return typeof a==typeof p&&a<p}],"filter->":[Re,[de,Ot],(o,[t,a])=>{const p=o.properties()[t.value],x=a.value;return typeof p==typeof x&&p>x}],"filter-id->":[Re,[Ot],(o,[t])=>{const a=o.id(),p=t.value;return typeof a==typeof p&&a>p}],"filter-<=":[Re,[de,Ot],(o,[t,a])=>{const p=o.properties()[t.value],x=a.value;return typeof p==typeof x&&p<=x}],"filter-id-<=":[Re,[Ot],(o,[t])=>{const a=o.id(),p=t.value;return typeof a==typeof p&&a<=p}],"filter->=":[Re,[de,Ot],(o,[t,a])=>{const p=o.properties()[t.value],x=a.value;return typeof p==typeof x&&p>=x}],"filter-id->=":[Re,[Ot],(o,[t])=>{const a=o.id(),p=t.value;return typeof a==typeof p&&a>=p}],"filter-has":[Re,[Ot],(o,[t])=>t.value in o.properties()],"filter-has-id":[Re,[],o=>null!==o.id()&&void 0!==o.id()],"filter-type-in":[Re,[Ji(de)],(o,[t])=>t.value.indexOf(o.geometryType())>=0],"filter-id-in":[Re,[Ji(Ot)],(o,[t])=>t.value.indexOf(o.id())>=0],"filter-in-small":[Re,[de,Ji(Ot)],(o,[t,a])=>a.value.indexOf(o.properties()[t.value])>=0],"filter-in-large":[Re,[de,Ji(Ot)],(o,[t,a])=>function(p,x,T,I){for(;T<=I;){const O=T+I>>1;if(x[O]===p)return!0;x[O]>p?I=O-1:T=O+1}return!1}(o.properties()[t.value],a.value,0,a.value.length-1)],all:{type:Re,overloads:[[[Re,Re],(o,[t,a])=>t.evaluate(o)&&a.evaluate(o)],[br(Re),(o,t)=>{for(const a of t)if(!a.evaluate(o))return!1;return!0}]]},any:{type:Re,overloads:[[[Re,Re],(o,[t,a])=>t.evaluate(o)||a.evaluate(o)],[br(Re),(o,t)=>{for(const a of t)if(a.evaluate(o))return!0;return!1}]]},"!":[Re,[Re],(o,[t])=>!t.evaluate(o)],"is-supported-script":[Re,[de],(o,[t])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(t.evaluate(o))}],upcase:[de,[de],(o,[t])=>t.evaluate(o).toUpperCase()],downcase:[de,[de],(o,[t])=>t.evaluate(o).toLowerCase()],concat:[de,br(Ot),(o,t)=>t.map(a=>Fr(a.evaluate(o))).join("")],"resolved-locale":[de,[_i],(o,[t])=>t.evaluate(o).resolvedLocale()]});class Hl{constructor(t,a){var p;this.expression=t,this._warningHistory={},this._evaluator=new Do,this._defaultValue=a?"color"===(p=a).type&&qr(p.default)?new Gt(0,0,0,0):"color"===p.type?Gt.parse(p.default)||null:"padding"===p.type?Ni.parse(p.default)||null:void 0===p.default?null:p.default:null,this._enumValues=a&&"enum"===a.type?a.values:null}evaluateWithoutErrorHandling(t,a,p,x,T,I){return this._evaluator.globals=t,this._evaluator.feature=a,this._evaluator.featureState=p,this._evaluator.canonical=x,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(t,a,p,x,T,I){this._evaluator.globals=t,this._evaluator.feature=a||null,this._evaluator.featureState=p||null,this._evaluator.canonical=x,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=I||null;try{const O=this.expression.evaluate(this._evaluator);if(null==O||"number"==typeof O&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new on(`Expected value to be one of ${Object.keys(this._enumValues).map(N=>JSON.stringify(N)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}}}function rl(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in co}function Ma(o,t){const a=new io(co,qo,[],t?function(x){const T={color:xt,string:de,number:he,enum:de,boolean:Re,formatted:hi,padding:Qi,resolvedImage:tn};return"array"===x.type?Ji(T[x.value]||Ot,x.length):T[x.type]}(t):void 0),p=a.parse(o,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return p?il(new Hl(p,t)):Dr(a.errors)}class Bi{constructor(t,a){this.kind=t,this._styleExpression=a,this.isStateDependent="constant"!==t&&!Yo(a.expression)}evaluateWithoutErrorHandling(t,a,p,x,T,I){return this._styleExpression.evaluateWithoutErrorHandling(t,a,p,x,T,I)}evaluate(t,a,p,x,T,I){return this._styleExpression.evaluate(t,a,p,x,T,I)}}class $l{constructor(t,a,p,x){this.kind=t,this.zoomStops=p,this._styleExpression=a,this.isStateDependent="camera"!==t&&!Yo(a.expression),this.interpolationType=x}evaluateWithoutErrorHandling(t,a,p,x,T,I){return this._styleExpression.evaluateWithoutErrorHandling(t,a,p,x,T,I)}evaluate(t,a,p,x,T,I){return this._styleExpression.evaluate(t,a,p,x,T,I)}interpolationFactor(t,a,p){return this.interpolationType?Yn.interpolationFactor(this.interpolationType,t,a,p):0}}function kn(o,t){const a=Ma(o,t);if("error"===a.result)return a;const p=a.value.expression,x=Uo(p);if(!x&&!Xn(t))return Dr([new ce("","data expressions not supported")]);const T=gr(p,["zoom"]);if(!T&&!bo(t))return Dr([new ce("","zoom expressions not supported")]);const I=pr(p);return I||T?I instanceof ce?Dr([I]):I instanceof Yn&&!Vr(t)?Dr([new ce("",'"interpolate" expressions cannot be used with this property')]):il(I?new $l(x?"camera":"composite",a.value,I.labels,I instanceof Yn?I.interpolation:void 0):new Bi(x?"constant":"source",a.value)):Dr([new ce("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ua{constructor(t,a){this._parameters=t,this._specification=a,pt(this,nl(this._parameters,this._specification))}static deserialize(t){return new Ua(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function pr(o){let t=null;if(o instanceof jo)t=pr(o.result);else if(o instanceof mr){for(const a of o.args)if(t=pr(a),t)break}else(o instanceof rn||o instanceof Yn)&&o.input instanceof go&&"zoom"===o.input.name&&(t=o);return t instanceof ce||o.eachChild(a=>{const p=pr(a);p instanceof ce?t=p:!t&&p?t=new ce("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&p&&t!==p&&(t=new ce("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function lr(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const t of o.slice(1))if(!lr(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const Y={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function W(o){if(null==o)return{filter:()=>!0,needGeometry:!1};lr(o)||(o=Ht(o));const t=Ma(o,Y);if("error"===t.result)throw new Error(t.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,p,x)=>t.value.evaluate(a,p,{},x),needGeometry:we(o)}}function G(o,t){return o<t?-1:o>t?1:0}function we(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(let t=1;t<o.length;t++)if(we(o[t]))return!0;return!1}function Ht(o){if(!o)return!0;const t=o[0];return o.length<=1?"any"!==t:"=="===t?Di(o[1],o[2],"=="):"!="===t?Ls(Di(o[1],o[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Di(o[1],o[2],t):"any"===t?(a=o.slice(1),["any"].concat(a.map(Ht))):"all"===t?["all"].concat(o.slice(1).map(Ht)):"none"===t?["all"].concat(o.slice(1).map(Ht).map(Ls)):"in"===t?Yr(o[1],o.slice(2)):"!in"===t?Ls(Yr(o[1],o.slice(2))):"has"===t?uo(o[1]):"!has"===t?Ls(uo(o[1])):"within"!==t||o;var a}function Di(o,t,a){switch(o){case"$type":return[`filter-type-${a}`,t];case"$id":return[`filter-id-${a}`,t];default:return[`filter-${a}`,o,t]}}function Yr(o,t){if(0===t.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(a=>typeof a!=typeof t[0])?["filter-in-large",o,["literal",t.sort(G)]]:["filter-in-small",o,["literal",t]]}}function uo(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Ls(o){return["!",o]}function Da(o){const t=typeof o;if("number"===t||"boolean"===t||"string"===t||null==o)return JSON.stringify(o);if(Array.isArray(o)){let x="[";for(const T of o)x+=`${Da(T)},`;return`${x}]`}const a=Object.keys(o).sort();let p="{";for(let x=0;x<a.length;x++)p+=`${JSON.stringify(a[x])}:${Da(o[a[x]])},`;return`${p}}`}function ja(o){let t="";for(const a of ut)t+=`/${Da(o[a])}`;return t}function Gl(o){const t=o.value;return t?[new Qt(o.key,t,"constants have been deprecated as of v8")]:[]}function Ur(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ol(o){if(Array.isArray(o))return o.map(ol);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const t={};for(const a in o)t[a]=ol(o[a]);return t}return Ur(o)}function Ns(o){const t=o.key,a=o.value,p=o.valueSpec||{},x=o.objectElementValidators||{},T=o.style,I=o.styleSpec,O=o.validateSpec;let N=[];const Z=Gn(a);if("object"!==Z)return[new Qt(t,a,`object expected, ${Z} found`)];for(const K in a){const te=K.split(".")[0],le=p[te]||p["*"];let me;if(x[te])me=x[te];else if(p[te])me=O;else if(x["*"])me=x["*"];else{if(!p["*"]){N.push(new Qt(t,a[K],`unknown property "${K}"`));continue}me=O}N=N.concat(me({key:(t&&`${t}.`)+K,value:a[K],valueSpec:le,style:T,styleSpec:I,object:a,objectKey:K,validateSpec:O},a))}for(const K in p)x[K]||p[K].required&&void 0===p[K].default&&void 0===a[K]&&N.push(new Qt(t,a,`missing required property "${K}"`));return N}function Kc(o){const t=o.value,a=o.valueSpec,p=o.style,x=o.styleSpec,T=o.key,I=o.arrayElementValidator||o.validateSpec;if("array"!==Gn(t))return[new Qt(T,t,`array expected, ${Gn(t)} found`)];if(a.length&&t.length!==a.length)return[new Qt(T,t,`array length ${a.length} expected, length ${t.length} found`)];if(a["min-length"]&&t.length<a["min-length"])return[new Qt(T,t,`array length at least ${a["min-length"]} expected, length ${t.length} found`)];let O={type:a.value,values:a.values};x.$version<7&&(O.function=a.function),"object"===Gn(a.value)&&(O=a.value);let N=[];for(let Z=0;Z<t.length;Z++)N=N.concat(I({array:t,arrayIndex:Z,value:t[Z],valueSpec:O,validateSpec:o.validateSpec,style:p,styleSpec:x,key:`${T}[${Z}]`}));return N}function Ha(o){const t=o.key,a=o.value,p=o.valueSpec;let x=Gn(a);return"number"===x&&a!=a&&(x="NaN"),"number"!==x?[new Qt(t,a,`number expected, ${x} found`)]:"minimum"in p&&a<p.minimum?[new Qt(t,a,`${a} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&a>p.maximum?[new Qt(t,a,`${a} is greater than the maximum value ${p.maximum}`)]:[]}function Fo(o){const t=o.valueSpec,a=Ur(o.value.type);let p,x,T,I={};const O="categorical"!==a&&void 0===o.value.property,N=!O,Z="array"===Gn(o.value.stops)&&"array"===Gn(o.value.stops[0])&&"object"===Gn(o.value.stops[0][0]),K=Ns({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if("identity"===a)return[new Qt(me.key,me.value,'identity function may not have a "stops" property')];let be=[];const Be=me.value;return be=be.concat(Kc({key:me.key,value:Be,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:te})),"array"===Gn(Be)&&0===Be.length&&be.push(new Qt(me.key,Be,"array must have at least one stop")),be},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:t,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return"identity"===a&&O&&K.push(new Qt(o.key,o.value,'missing required property "property"')),"identity"===a||o.value.stops||K.push(new Qt(o.key,o.value,'missing required property "stops"')),"exponential"===a&&o.valueSpec.expression&&!Vr(o.valueSpec)&&K.push(new Qt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(N&&!Xn(o.valueSpec)?K.push(new Qt(o.key,o.value,"property functions not supported")):O&&!bo(o.valueSpec)&&K.push(new Qt(o.key,o.value,"zoom functions not supported"))),"categorical"!==a&&!Z||void 0!==o.value.property||K.push(new Qt(o.key,o.value,'"property" property is required')),K;function te(me){let be=[];const Be=me.value,Ke=me.key;if("array"!==Gn(Be))return[new Qt(Ke,Be,`array expected, ${Gn(Be)} found`)];if(2!==Be.length)return[new Qt(Ke,Be,`array length 2 expected, length ${Be.length} found`)];if(Z){if("object"!==Gn(Be[0]))return[new Qt(Ke,Be,`object expected, ${Gn(Be[0])} found`)];if(void 0===Be[0].zoom)return[new Qt(Ke,Be,"object stop key must have zoom")];if(void 0===Be[0].value)return[new Qt(Ke,Be,"object stop key must have value")];if(T&&T>Ur(Be[0].zoom))return[new Qt(Ke,Be[0].zoom,"stop zoom values must appear in ascending order")];Ur(Be[0].zoom)!==T&&(T=Ur(Be[0].zoom),x=void 0,I={}),be=be.concat(Ns({key:`${Ke}[0]`,value:Be[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:Ha,value:le}}))}else be=be.concat(le({key:`${Ke}[0]`,value:Be[0],valueSpec:{},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},Be));return rl(ol(Be[1]))?be.concat([new Qt(`${Ke}[1]`,Be[1],"expressions are not allowed in function stops.")]):be.concat(me.validateSpec({key:`${Ke}[1]`,value:Be[1],valueSpec:t,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function le(me,be){const Be=Gn(me.value),Ke=Ur(me.value),tt=null!==me.value?me.value:be;if(p){if(Be!==p)return[new Qt(me.key,tt,`${Be} stop domain type must match previous stop domain type ${p}`)]}else p=Be;if("number"!==Be&&"string"!==Be&&"boolean"!==Be)return[new Qt(me.key,tt,"stop domain value must be a number, string, or boolean")];if("number"!==Be&&"categorical"!==a){let _t=`number expected, ${Be} found`;return Xn(t)&&void 0===a&&(_t+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qt(me.key,tt,_t)]}return"categorical"!==a||"number"!==Be||isFinite(Ke)&&Math.floor(Ke)===Ke?"categorical"!==a&&"number"===Be&&void 0!==x&&Ke<x?[new Qt(me.key,tt,"stop domain values must appear in ascending order")]:(x=Ke,"categorical"===a&&Ke in I?[new Qt(me.key,tt,"stop domain values must be unique")]:(I[Ke]=!0,[])):[new Qt(me.key,tt,`integer expected, found ${Ke}`)]}}function xr(o){const t=("property"===o.expressionContext?kn:Ma)(ol(o.value),o.valueSpec);if("error"===t.result)return t.value.map(p=>new Qt(`${o.key}${p.key}`,o.value,p.message));const a=t.value.expression||t.value._styleExpression.expression;if("property"===o.expressionContext&&"text-font"===o.propertyKey&&!a.outputDefined())return[new Qt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===o.expressionContext&&"layout"===o.propertyType&&!Yo(a))return[new Qt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===o.expressionContext&&!Yo(a))return[new Qt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&0===o.expressionContext.indexOf("cluster")){if(!gr(a,["zoom","feature-state"]))return[new Qt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===o.expressionContext&&!Uo(a))return[new Qt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Pn(o){const t=o.key,a=o.value,p=o.valueSpec,x=[];return Array.isArray(p.values)?-1===p.values.indexOf(Ur(a))&&x.push(new Qt(t,a,`expected one of [${p.values.join(", ")}], ${JSON.stringify(a)} found`)):-1===Object.keys(p.values).indexOf(Ur(a))&&x.push(new Qt(t,a,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(a)} found`)),x}function wr(o){return lr(ol(o.value))?xr(pt({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xl(o)}function xl(o){const t=o.value,a=o.key;if("array"!==Gn(t))return[new Qt(a,t,`array expected, ${Gn(t)} found`)];const p=o.styleSpec;let x,T=[];if(t.length<1)return[new Qt(a,t,"filter array must have at least 1 element")];switch(T=T.concat(Pn({key:`${a}[0]`,value:t[0],valueSpec:p.filter_operator,style:o.style,styleSpec:o.styleSpec})),Ur(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Ur(t[1])&&T.push(new Qt(a,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&T.push(new Qt(a,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(x=Gn(t[1]),"string"!==x&&T.push(new Qt(`${a}[1]`,t[1],`string expected, ${x} found`)));for(let I=2;I<t.length;I++)x=Gn(t[I]),"$type"===Ur(t[1])?T=T.concat(Pn({key:`${a}[${I}]`,value:t[I],valueSpec:p.geometry_type,style:o.style,styleSpec:o.styleSpec})):"string"!==x&&"number"!==x&&"boolean"!==x&&T.push(new Qt(`${a}[${I}]`,t[I],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let I=1;I<t.length;I++)T=T.concat(xl({key:`${a}[${I}]`,value:t[I],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":x=Gn(t[1]),2!==t.length?T.push(new Qt(a,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==x&&T.push(new Qt(`${a}[1]`,t[1],`string expected, ${x} found`));break;case"within":x=Gn(t[1]),2!==t.length?T.push(new Qt(a,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==x&&T.push(new Qt(`${a}[1]`,t[1],`object expected, ${x} found`))}return T}function zs(o,t){const a=o.key,p=o.validateSpec,x=o.style,T=o.styleSpec,I=o.value,O=o.objectKey,N=T[`${t}_${o.layerType}`];if(!N)return[];const Z=O.match(/^(.*)-transition$/);if("paint"===t&&Z&&N[Z[1]]&&N[Z[1]].transition)return p({key:a,value:I,valueSpec:T.transition,style:x,styleSpec:T});const K=o.valueSpec||N[O];if(!K)return[new Qt(a,I,`unknown property "${O}"`)];let te;if("string"===Gn(I)&&Xn(K)&&!K.tokens&&(te=/^{([^}]+)}$/.exec(I)))return[new Qt(a,I,`"${O}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(te[1])} }\`.`)];const le=[];return"symbol"===o.layerType&&("text-field"===O&&x&&!x.glyphs&&le.push(new Qt(a,I,'use of "text-field" requires a style "glyphs" property')),"text-font"===O&&qr(ol(I))&&"identity"===Ur(I.type)&&le.push(new Qt(a,I,'"text-font" does not support identity functions'))),le.concat(p({key:o.key,value:I,valueSpec:K,style:x,styleSpec:T,expressionContext:"property",propertyType:t,propertyKey:O}))}function Sa(o){return zs(o,"paint")}function Cr(o){return zs(o,"layout")}function Zl(o){let t=[];const a=o.value,p=o.key,x=o.style,T=o.styleSpec;a.type||a.ref||t.push(new Qt(p,a,'either "type" or "ref" is required'));let I=Ur(a.type);const O=Ur(a.ref);if(a.id){const N=Ur(a.id);for(let Z=0;Z<o.arrayIndex;Z++){const K=x.layers[Z];Ur(K.id)===N&&t.push(new Qt(p,a.id,`duplicate layer id "${a.id}", previously used at line ${K.id.__line__}`))}}if("ref"in a){let N;["type","source","source-layer","filter","layout"].forEach(Z=>{Z in a&&t.push(new Qt(p,a[Z],`"${Z}" is prohibited for ref layers`))}),x.layers.forEach(Z=>{Ur(Z.id)===O&&(N=Z)}),N?N.ref?t.push(new Qt(p,a.ref,"ref cannot reference another ref layer")):I=Ur(N.type):t.push(new Qt(p,a.ref,`ref layer "${O}" not found`))}else if("background"!==I)if(a.source){const N=x.sources&&x.sources[a.source],Z=N&&Ur(N.type);N?"vector"===Z&&"raster"===I?t.push(new Qt(p,a.source,`layer "${a.id}" requires a raster source`)):"raster"===Z&&"raster"!==I?t.push(new Qt(p,a.source,`layer "${a.id}" requires a vector source`)):"vector"!==Z||a["source-layer"]?"raster-dem"===Z&&"hillshade"!==I?t.push(new Qt(p,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==I||!a.paint||!a.paint["line-gradient"]||"geojson"===Z&&N.lineMetrics||t.push(new Qt(p,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Qt(p,a,`layer "${a.id}" must specify a "source-layer"`)):t.push(new Qt(p,a.source,`source "${a.source}" not found`))}else t.push(new Qt(p,a,'missing required property "source"'));return t=t.concat(Ns({key:p,value:a,valueSpec:T.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${p}.type`,value:a.type,valueSpec:T.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:wr,layout:N=>Ns({layer:a,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":Z=>Cr(pt({layerType:I},Z))}}),paint:N=>Ns({layer:a,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":Z=>Sa(pt({layerType:I},Z))}})}})),t}function Bs(o){const t=o.value,a=o.key,p=Gn(t);return"string"!==p?[new Qt(a,t,`string expected, ${p} found`)]:[]}const $a={promoteId:function({key:o,value:t}){if("string"===Gn(t))return Bs({key:o,value:t});{const a=[];for(const p in t)a.push(...Bs({key:`${o}.${p}`,value:t[p]}));return a}}};function Sr(o){const t=o.value,a=o.key,p=o.styleSpec,x=o.style,T=o.validateSpec;if(!t.type)return[new Qt(a,t,'"type" is required')];const I=Ur(t.type);let O;switch(I){case"vector":case"raster":case"raster-dem":return O=Ns({key:a,value:t,valueSpec:p[`source_${I.replace("-","_")}`],style:o.style,styleSpec:p,objectElementValidators:$a,validateSpec:T}),O;case"geojson":if(O=Ns({key:a,value:t,valueSpec:p.source_geojson,style:x,styleSpec:p,validateSpec:T,objectElementValidators:$a}),t.cluster)for(const N in t.clusterProperties){const[Z,K]=t.clusterProperties[N],te="string"==typeof Z?[Z,["accumulated"],["get",N]]:Z;O.push(...xr({key:`${a}.${N}.map`,value:K,validateSpec:T,expressionContext:"cluster-map"})),O.push(...xr({key:`${a}.${N}.reduce`,value:te,validateSpec:T,expressionContext:"cluster-reduce"}))}return O;case"video":return Ns({key:a,value:t,valueSpec:p.source_video,style:x,validateSpec:T,styleSpec:p});case"image":return Ns({key:a,value:t,valueSpec:p.source_image,style:x,validateSpec:T,styleSpec:p});case"canvas":return[new Qt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pn({key:`${a}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:x,validateSpec:T,styleSpec:p})}}function ls(o){const t=o.value,a=o.styleSpec,p=a.light,x=o.style;let T=[];const I=Gn(t);if(void 0===t)return T;if("object"!==I)return T=T.concat([new Qt("light",t,`object expected, ${I} found`)]),T;for(const O in t){const N=O.match(/^(.*)-transition$/);T=T.concat(N&&p[N[1]]&&p[N[1]].transition?o.validateSpec({key:O,value:t[O],valueSpec:a.transition,validateSpec:o.validateSpec,style:x,styleSpec:a}):p[O]?o.validateSpec({key:O,value:t[O],valueSpec:p[O],validateSpec:o.validateSpec,style:x,styleSpec:a}):[new Qt(O,t[O],`unknown property "${O}"`)])}return T}function jr(o){const t=o.value,a=o.styleSpec,p=a.terrain,x=o.style;let T=[];const I=Gn(t);if(void 0===t)return T;if("object"!==I)return T=T.concat([new Qt("terrain",t,`object expected, ${I} found`)]),T;for(const O in t)T=T.concat(p[O]?o.validateSpec({key:O,value:t[O],valueSpec:p[O],validateSpec:o.validateSpec,style:x,styleSpec:a}):[new Qt(O,t[O],`unknown property "${O}"`)]);return T}function Wl(o){let t=[];const a=o.value,p=o.key;if(Array.isArray(a)){const x=[],T=[];for(const I in a)a[I].id&&x.includes(a[I].id)&&t.push(new Qt(p,a,`all the sprites' ids must be unique, but ${a[I].id} is duplicated`)),x.push(a[I].id),a[I].url&&T.includes(a[I].url)&&t.push(new Qt(p,a,`all the sprites' URLs must be unique, but ${a[I].url} is duplicated`)),T.push(a[I].url),t=t.concat(Ns({key:`${p}[${I}]`,value:a[I],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return t}return Bs({key:p,value:a})}const cs={"*":()=>[],array:Kc,boolean:function(o){const t=o.value,a=o.key,p=Gn(t);return"boolean"!==p?[new Qt(a,t,`boolean expected, ${p} found`)]:[]},number:Ha,color:function(o){const t=o.key,a=o.value,p=Gn(a);return"string"!==p?[new Qt(t,a,`color expected, ${p} found`)]:Gt.parse(String(a))?[]:[new Qt(t,a,`color expected, "${a}" found`)]},constants:Gl,enum:Pn,filter:wr,function:Fo,layer:Zl,object:Ns,source:Sr,light:ls,terrain:jr,string:Bs,formatted:function(o){return 0===Bs(o).length?[]:xr(o)},resolvedImage:function(o){return 0===Bs(o).length?[]:xr(o)},padding:function(o){const t=o.key,a=o.value;if("array"===Gn(a)){if(a.length<1||a.length>4)return[new Qt(t,a,`padding requires 1 to 4 values; ${a.length} values found`)];const p={type:"number"};let x=[];for(let T=0;T<a.length;T++)x=x.concat(o.validateSpec({key:`${t}[${T}]`,value:a[T],validateSpec:o.validateSpec,valueSpec:p}));return x}return Ha({key:t,value:a,valueSpec:{}})},sprite:Wl};function Or(o){const t=o.value,a=o.valueSpec,p=o.styleSpec;return o.validateSpec=Or,a.expression&&qr(Ur(t))?Fo(o):a.expression&&rl(ol(t))?xr(o):a.type&&cs[a.type]?cs[a.type](o):Ns(pt({},o,{valueSpec:a.type?p[a.type]:a}))}function wl(o){const t=o.value,a=o.key,p=Bs(o);return p.length||(-1===t.indexOf("{fontstack}")&&p.push(new Qt(a,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&p.push(new Qt(a,t,'"glyphs" url must include a "{range}" token'))),p}function ys(o,t=Me){let a=[];return a=a.concat(Or({key:"",value:o,valueSpec:t.$root,styleSpec:t,style:o,validateSpec:Or,objectElementValidators:{glyphs:wl,"*":()=>[]}})),o.constants&&(a=a.concat(Gl({key:"constants",value:o.constants,style:o,styleSpec:t,validateSpec:Or}))),ha(a)}function Hr(o){return function(t){return o({...t,validateSpec:Or})}}function ha(o){return[].concat(o).sort((t,a)=>t.line-a.line)}function $r(o){return function(...t){return ha(o.apply(this,t))}}ys.source=$r(Hr(Sr)),ys.sprite=$r(Hr(Wl)),ys.glyphs=$r(Hr(wl)),ys.light=$r(Hr(ls)),ys.terrain=$r(Hr(jr)),ys.layer=$r(Hr(Zl)),ys.filter=$r(Hr(wr)),ys.paintProperty=$r(Hr(Sa)),ys.layoutProperty=$r(Hr(Cr));const $o=ys,Cl=$o.light,oo=$o.paintProperty,El=$o.layoutProperty;function Ga(o,t){let a=!1;if(t&&t.length)for(const p of t)o.fire(new rt(new Error(p.message))),a=!0;return a}class ql{constructor(t,a,p){const x=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const I=new Int32Array(this.arrayBuffer);t=I[0],this.d=(a=I[1])+2*(p=I[2]);for(let N=0;N<this.d*this.d;N++){const Z=I[3+N],K=I[3+N+1];x.push(Z===K?null:I.subarray(Z,K))}const O=I[3+x.length+1];this.keys=I.subarray(I[3+x.length],O),this.bboxes=I.subarray(O),this.insert=this._insertReadonly}else{this.d=a+2*p;for(let I=0;I<this.d*this.d;I++)x.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=t,this.padding=p,this.scale=a/t,this.uid=0;const T=p/a*t;this.min=-T,this.max=t+T}insert(t,a,p,x,T){this._forEachCell(a,p,x,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(a),this.bboxes.push(p),this.bboxes.push(x),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,a,p,x,T,I){this.cells[T].push(I)}query(t,a,p,x,T){const I=this.min,O=this.max;if(t<=I&&a<=I&&O<=p&&O<=x&&!T)return Array.prototype.slice.call(this.keys);{const N=[];return this._forEachCell(t,a,p,x,this._queryCell,N,{},T),N}}_queryCell(t,a,p,x,T,I,O,N){const Z=this.cells[T];if(null!==Z){const K=this.keys,te=this.bboxes;for(let le=0;le<Z.length;le++){const me=Z[le];if(void 0===O[me]){const be=4*me;(N?N(te[be+0],te[be+1],te[be+2],te[be+3]):t<=te[be+2]&&a<=te[be+3]&&p>=te[be+0]&&x>=te[be+1])?(O[me]=!0,I.push(K[me])):O[me]=!1}}}}_forEachCell(t,a,p,x,T,I,O,N){const Z=this._convertToCellCoord(t),K=this._convertToCellCoord(a),te=this._convertToCellCoord(p),le=this._convertToCellCoord(x);for(let me=Z;me<=te;me++)for(let be=K;be<=le;be++){const Be=this.d*be+me;if((!N||N(this._convertFromCellCoord(me),this._convertFromCellCoord(be),this._convertFromCellCoord(me+1),this._convertFromCellCoord(be+1)))&&T.call(this,t,a,p,x,Be,I,O,N))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,a=3+this.cells.length+1+1;let p=0;for(let I=0;I<this.cells.length;I++)p+=this.cells[I].length;const x=new Int32Array(a+p+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;let T=a;for(let I=0;I<t.length;I++){const O=t[I];x[3+I]=T,x.set(O,T),T+=O.length}return x[3+t.length]=T,x.set(this.keys,T),T+=this.keys.length,x[3+t.length+1]=T,x.set(this.bboxes,T),T+=this.bboxes.length,x.buffer}static serialize(t,a){const p=t.toArrayBuffer();return a&&a.push(p),{buffer:p}}static deserialize(t){return new ql(t.buffer)}}const Vs={};function zi(o,t,a={}){if(Vs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:o,writeable:!1}),Vs[o]={klass:t,omit:a.omit||[],shallow:a.shallow||[]}}zi("Object",Object),zi("TransferableGridIndex",ql),zi("Color",Gt),zi("Error",Error),zi("AJAXError",Vn),zi("ResolvedImage",$n),zi("StylePropertyFunction",Ua),zi("StyleExpression",Hl,{omit:["_evaluator"]}),zi("ZoomDependentExpression",$l),zi("ZoomConstantExpression",Bi),zi("CompoundExpression",go,{omit:["_evaluate"]});for(const o in co)co[o]._classRegistryKey||zi(`Expression_${o}`,co[o]);function Xo(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&"ArrayBuffer"===o.constructor.name)}function Ml(o,t){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Xo(o)||vi(o))return t&&t.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return t&&t.push(a.buffer),a}if(o instanceof ImageData)return t&&t.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const p of o)a.push(Ml(p,t));return a}if("object"==typeof o){const a=o.constructor,p=a._classRegistryKey;if(!p)throw new Error("can't serialize object of unregistered class");if(!Vs[p])throw new Error(`${p} is not registered.`);const x=a.serialize?a.serialize(o,t):{};if(a.serialize){if(t&&x===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in o){if(!o.hasOwnProperty(T)||Vs[p].omit.indexOf(T)>=0)continue;const I=o[T];x[T]=Vs[p].shallow.indexOf(T)>=0?I:Ml(I,t)}o instanceof Error&&(x.message=o.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==p&&(x.$name=p),x}throw new Error("can't serialize object of type "+typeof o)}function Us(o){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Xo(o)||vi(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Us);if("object"==typeof o){const t=o.$name||"Object";if(!Vs[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:a}=Vs[t];if(!a)throw new Error(`can't deserialize unregistered class ${t}`);if(a.deserialize)return a.deserialize(o);const p=Object.create(a.prototype);for(const x of Object.keys(o)){if("$name"===x)continue;const T=o[x];p[x]=Vs[t].shallow.indexOf(x)>=0?T:Us(T)}return p}throw new Error("can't deserialize object of type "+typeof o)}class _r{constructor(){this.first=!0}update(t,a){const p=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=a),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=p,!0))}}const mi={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function F(o){for(const t of o)if(fe(t.charCodeAt(0)))return!0;return!1}function Q(o){for(const t of o)if(!$(t.charCodeAt(0)))return!1;return!0}function $(o){return!(mi.Arabic(o)||mi["Arabic Supplement"](o)||mi["Arabic Extended-A"](o)||mi["Arabic Presentation Forms-A"](o)||mi["Arabic Presentation Forms-B"](o))}function fe(o){return!(746!==o&&747!==o&&(o<4352||!(mi["Bopomofo Extended"](o)||mi.Bopomofo(o)||mi["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||mi["CJK Compatibility Ideographs"](o)||mi["CJK Compatibility"](o)||mi["CJK Radicals Supplement"](o)||mi["CJK Strokes"](o)||!(!mi["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||12336===o)||mi["CJK Unified Ideographs Extension A"](o)||mi["CJK Unified Ideographs"](o)||mi["Enclosed CJK Letters and Months"](o)||mi["Hangul Compatibility Jamo"](o)||mi["Hangul Jamo Extended-A"](o)||mi["Hangul Jamo Extended-B"](o)||mi["Hangul Jamo"](o)||mi["Hangul Syllables"](o)||mi.Hiragana(o)||mi["Ideographic Description Characters"](o)||mi.Kanbun(o)||mi["Kangxi Radicals"](o)||mi["Katakana Phonetic Extensions"](o)||mi.Katakana(o)&&12540!==o||!(!mi["Halfwidth and Fullwidth Forms"](o)||65288===o||65289===o||65293===o||o>=65306&&o<=65310||65339===o||65341===o||65343===o||o>=65371&&o<=65503||65507===o||o>=65512&&o<=65519)||!(!mi["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||mi["Unified Canadian Aboriginal Syllabics"](o)||mi["Unified Canadian Aboriginal Syllabics Extended"](o)||mi["Vertical Forms"](o)||mi["Yijing Hexagram Symbols"](o)||mi["Yi Syllables"](o)||mi["Yi Radicals"](o))))}function Ye(o){return!(fe(o)||(t=o,mi["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||mi["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||mi["Letterlike Symbols"](t)||mi["Number Forms"](t)||mi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||mi["Control Pictures"](t)&&9251!==t||mi["Optical Character Recognition"](t)||mi["Enclosed Alphanumerics"](t)||mi["Geometric Shapes"](t)||mi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||mi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||mi["CJK Symbols and Punctuation"](t)||mi.Katakana(t)||mi["Private Use Area"](t)||mi["CJK Compatibility Forms"](t)||mi["Small Form Variants"](t)||mi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t));var t}function It(o){return o>=1424&&o<=2303||mi["Arabic Presentation Forms-A"](o)||mi["Arabic Presentation Forms-B"](o)}function Wt(o,t){return!(!t&&It(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||mi.Khmer(o))}function Wi(o){for(const t of o)if(It(t.charCodeAt(0)))return!0;return!1}const er="deferred",Ln="loading",Nn="loaded";let En=null,Zn="unavailable",On=null;const Gr=function(o){o&&"string"==typeof o&&o.indexOf("NetworkError")>-1&&(Zn="error"),En&&En(o)};function js(){Yi.fire(new ze("pluginStateChange",{pluginStatus:Zn,pluginURL:On}))}const Yi=new dt,vs=function(){return Zn},bs=function(){if(Zn!==er||!On)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Zn=Ln,js(),On&&Vt({url:On},o=>{o?Gr(o):(Zn=Nn,js())})},tr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Zn===Nn||null!=tr.applyArabicShaping,isLoading:()=>Zn===Ln,setState(o){if(!Pt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Zn=o.pluginStatus,On=o.pluginURL},isParsed(){if(!Pt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=tr.applyArabicShaping&&null!=tr.processBidirectionalText&&null!=tr.processStyledBidirectionalText},getPluginURL(){if(!Pt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return On}};class ir{constructor(t,a){this.zoom=t,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _r,this.transition={})}isSupportedScript(t){return function(a,p){for(const x of a)if(!Wt(x.charCodeAt(0),p))return!1;return!0}(t,tr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,a=t-Math.floor(t),p=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*a}}}class ds{constructor(t,a){this.property=t,this.value=a,this.expression=function(p,x){if(qr(p))return new Ua(p,x);if(rl(p)){const T=kn(p,x);if("error"===T.result)throw new Error(T.value.map(I=>`${I.key}: ${I.message}`).join(", "));return T.value}{let T=p;return"color"===x.type&&"string"==typeof p?T=Gt.parse(p):"padding"!==x.type||"number"!=typeof p&&!Array.isArray(p)||(T=Ni.parse(p)),{kind:"constant",evaluate:()=>T}}}(void 0===a?t.specification.default:a,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,a,p){return this.property.possiblyEvaluate(this,t,a,p)}}class hn{constructor(t){this.property=t,this.value=new ds(t,void 0)}transitioned(t,a){return new Dl(this.property,this.value,a,bt({},t.transition,this.transition),t.now)}untransitioned(){return new Dl(this.property,this.value,null,{},0)}}class Za{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return qt(this._values[t].value.value)}setValue(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new hn(this._values[t].property)),this._values[t].value=new ds(this._values[t].property,null===a?void 0:qt(a))}getTransition(t){return qt(this._values[t].transition)}setTransition(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new hn(this._values[t].property)),this._values[t].transition=qt(a)||void 0}serialize(){const t={};for(const a of Object.keys(this._values)){const p=this.getValue(a);void 0!==p&&(t[a]=p);const x=this.getTransition(a);void 0!==x&&(t[`${a}-transition`]=x)}return t}transitioned(t,a){const p=new Xc(this._properties);for(const x of Object.keys(this._values))p._values[x]=this._values[x].transitioned(t,a._values[x]);return p}untransitioned(){const t=new Xc(this._properties);for(const a of Object.keys(this._values))t._values[a]=this._values[a].untransitioned();return t}}class Dl{constructor(t,a,p,x,T){this.property=t,this.value=a,this.begin=T+x.delay||0,this.end=this.begin+x.duration||0,t.specification.transition&&(x.delay||x.duration)&&(this.prior=p)}possiblyEvaluate(t,a,p){const x=t.now||0,T=this.value.possiblyEvaluate(t,a,p),I=this.prior;if(I){if(x>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(x<this.begin)return I.possiblyEvaluate(t,a,p);{const O=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(t,a,p),T,function(N){if(N<=0)return 0;if(N>=1)return 1;const Z=N*N,K=Z*N;return 4*(N<.5?K:3*(N-Z)+K-.75)}(O))}}return T}}class Xc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,a,p){const x=new Jo(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].possiblyEvaluate(t,a,p);return x}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Jc{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return qt(this._values[t].value)}setValue(t,a){this._values[t]=new ds(this._values[t].property,null===a?void 0:qt(a))}serialize(){const t={};for(const a of Object.keys(this._values)){const p=this.getValue(a);void 0!==p&&(t[a]=p)}return t}possiblyEvaluate(t,a,p){const x=new Jo(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].possiblyEvaluate(t,a,p);return x}}class ma{constructor(t,a,p){this.property=t,this.value=a,this.parameters=p}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,a,p,x){return this.property.evaluate(this.value,this.parameters,t,a,p,x)}}class Jo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class wt{constructor(t){this.specification=t}possiblyEvaluate(t,a){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(a)}interpolate(t,a,p){const x=Lr[this.specification.type];return x?x(t,a,p):t}}class pi{constructor(t,a){this.specification=t,this.overrides=a}possiblyEvaluate(t,a,p,x){return new ma(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(a,null,{},p,x)}:t.expression,a)}interpolate(t,a,p){if("constant"!==t.value.kind||"constant"!==a.value.kind)return t;if(void 0===t.value.value||void 0===a.value.value)return new ma(this,{kind:"constant",value:void 0},t.parameters);const x=Lr[this.specification.type];if(x){const T=x(t.value.value,a.value.value,p);return new ma(this,{kind:"constant",value:T},t.parameters)}return t}evaluate(t,a,p,x,T,I){return"constant"===t.kind?t.value:t.evaluate(a,p,x,T,I)}}class sl extends pi{possiblyEvaluate(t,a,p,x){if(void 0===t.value)return new ma(this,{kind:"constant",value:void 0},a);if("constant"===t.expression.kind){const T=t.expression.evaluate(a,null,{},p,x),I="resolvedImage"===t.property.specification.type&&"string"!=typeof T?T.name:T,O=this._calculate(I,I,I,a);return new ma(this,{kind:"constant",value:O},a)}if("camera"===t.expression.kind){const T=this._calculate(t.expression.evaluate({zoom:a.zoom-1}),t.expression.evaluate({zoom:a.zoom}),t.expression.evaluate({zoom:a.zoom+1}),a);return new ma(this,{kind:"constant",value:T},a)}return new ma(this,t.expression,a)}evaluate(t,a,p,x,T,I){if("source"===t.kind){const O=t.evaluate(a,p,x,T,I);return this._calculate(O,O,O,a)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(a.zoom)-1},p,x),t.evaluate({zoom:Math.floor(a.zoom)},p,x),t.evaluate({zoom:Math.floor(a.zoom)+1},p,x),a):t.value}_calculate(t,a,p,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:p,to:a}}interpolate(t){return t}}class Hs{constructor(t){this.specification=t}possiblyEvaluate(t,a,p,x){if(void 0!==t.value){if("constant"===t.expression.kind){const T=t.expression.evaluate(a,null,{},p,x);return this._calculate(T,T,T,a)}return this._calculate(t.expression.evaluate(new ir(Math.floor(a.zoom-1),a)),t.expression.evaluate(new ir(Math.floor(a.zoom),a)),t.expression.evaluate(new ir(Math.floor(a.zoom+1),a)),a)}}_calculate(t,a,p,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:p,to:a}}interpolate(t){return t}}class xo{constructor(t){this.specification=t}possiblyEvaluate(t,a,p,x){return!!t.expression.evaluate(a,null,{},p,x)}interpolate(){return!1}}class So{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in t){const p=t[a];p.specification.overridable&&this.overridableProperties.push(a);const x=this.defaultPropertyValues[a]=new ds(p,void 0),T=this.defaultTransitionablePropertyValues[a]=new hn(p);this.defaultTransitioningPropertyValues[a]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=x.possiblyEvaluate({})}}}zi("DataDrivenProperty",pi),zi("DataConstantProperty",wt),zi("CrossFadedDataDrivenProperty",sl),zi("CrossFadedProperty",Hs),zi("ColorRampProperty",xo);const Yl="-transition";class To extends dt{constructor(t,a){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),a.layout&&(this._unevaluatedLayout=new Jc(a.layout)),a.paint)){this._transitionablePaint=new Za(a.paint);for(const p in t.paint)this.setPaintProperty(p,t.paint[p],{validate:!1});for(const p in t.layout)this.setLayoutProperty(p,t.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Jo(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,a,p={}){null!=a&&this._validate(El,`layers.${this.id}.layout.${t}`,t,a,p)||("visibility"!==t?this._unevaluatedLayout.setValue(t,a):this.visibility=a)}getPaintProperty(t){return t.endsWith(Yl)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,a,p={}){if(null!=a&&this._validate(oo,`layers.${this.id}.paint.${t}`,t,a,p))return!1;if(t.endsWith(Yl))return this._transitionablePaint.setTransition(t.slice(0,-11),a||void 0),!1;{const x=this._transitionablePaint._values[t],T="cross-faded-data-driven"===x.property.specification["property-type"],I=x.value.isDataDriven(),O=x.value;this._transitionablePaint.setValue(t,a),this._handleSpecialPaintPropertyUpdate(t);const N=this._transitionablePaint._values[t].value;return N.isDataDriven()||I||T||this._handleOverridablePaintPropertyUpdate(t,O,N)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,a,p){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,a){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,a)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Ti(t,(a,p)=>!(void 0===a||"layout"===p&&!Object.keys(a).length||"paint"===p&&!Object.keys(a).length))}_validate(t,a,p,x,T={}){return(!T||!1!==T.validate)&&Ga(this,t.call($o,{key:a,layerType:this.type,objectKey:p,value:x,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const a=this.paint.get(t);if(a instanceof ma&&Xn(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1}}const Ta={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class al{constructor(t,a){this._structArray=t,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Nr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,a){return t._trim(),a&&(t.isTransferred=!0,a.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const a=Object.create(this.prototype);return a.arrayBuffer=t.arrayBuffer,a.length=t.length,a.capacity=t.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function wo(o,t=1){let a=0,p=0;return{members:o.map(x=>{const T=Ta[x.type].BYTES_PER_ELEMENT,I=a=dc(a,Math.max(t,T)),O=x.components||1;return p=Math.max(p,T),a+=T*O,{name:x.name,type:x.type,components:O,offset:I}}),size:dc(a,Math.max(p,t)),alignment:t}}function dc(o,t){return Math.ceil(o/t)*t}class Io extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a){const p=this.length;return this.resize(p+1),this.emplace(p,t,a)}emplace(t,a,p){const x=2*t;return this.int16[x+0]=a,this.int16[x+1]=p,t}}Io.prototype.bytesPerElement=4,zi("StructArrayLayout2i4",Io);class us extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,p){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,p)}emplace(t,a,p,x){const T=3*t;return this.int16[T+0]=a,this.int16[T+1]=p,this.int16[T+2]=x,t}}us.prototype.bytesPerElement=6,zi("StructArrayLayout3i6",us);class ta extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,t,a,p,x)}emplace(t,a,p,x,T){const I=4*t;return this.int16[I+0]=a,this.int16[I+1]=p,this.int16[I+2]=x,this.int16[I+3]=T,t}}ta.prototype.bytesPerElement=8,zi("StructArrayLayout4i8",ta);class xs extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T,I){const O=this.length;return this.resize(O+1),this.emplace(O,t,a,p,x,T,I)}emplace(t,a,p,x,T,I,O){const N=6*t;return this.int16[N+0]=a,this.int16[N+1]=p,this.int16[N+2]=x,this.int16[N+3]=T,this.int16[N+4]=I,this.int16[N+5]=O,t}}xs.prototype.bytesPerElement=12,zi("StructArrayLayout2i4i12",xs);class $s extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T,I){const O=this.length;return this.resize(O+1),this.emplace(O,t,a,p,x,T,I)}emplace(t,a,p,x,T,I,O){const N=4*t,Z=8*t;return this.int16[N+0]=a,this.int16[N+1]=p,this.uint8[Z+4]=x,this.uint8[Z+5]=T,this.uint8[Z+6]=I,this.uint8[Z+7]=O,t}}$s.prototype.bytesPerElement=8,zi("StructArrayLayout2i4ub8",$s);class pa extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a){const p=this.length;return this.resize(p+1),this.emplace(p,t,a)}emplace(t,a,p){const x=2*t;return this.float32[x+0]=a,this.float32[x+1]=p,t}}pa.prototype.bytesPerElement=8,zi("StructArrayLayout2f8",pa);class Sl extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T,I,O,N,Z,K){const te=this.length;return this.resize(te+1),this.emplace(te,t,a,p,x,T,I,O,N,Z,K)}emplace(t,a,p,x,T,I,O,N,Z,K,te){const le=10*t;return this.uint16[le+0]=a,this.uint16[le+1]=p,this.uint16[le+2]=x,this.uint16[le+3]=T,this.uint16[le+4]=I,this.uint16[le+5]=O,this.uint16[le+6]=N,this.uint16[le+7]=Z,this.uint16[le+8]=K,this.uint16[le+9]=te,t}}Sl.prototype.bytesPerElement=20,zi("StructArrayLayout10ui20",Sl);class Qc extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T,I,O,N,Z,K,te,le){const me=this.length;return this.resize(me+1),this.emplace(me,t,a,p,x,T,I,O,N,Z,K,te,le)}emplace(t,a,p,x,T,I,O,N,Z,K,te,le,me){const be=12*t;return this.int16[be+0]=a,this.int16[be+1]=p,this.int16[be+2]=x,this.int16[be+3]=T,this.uint16[be+4]=I,this.uint16[be+5]=O,this.uint16[be+6]=N,this.uint16[be+7]=Z,this.int16[be+8]=K,this.int16[be+9]=te,this.int16[be+10]=le,this.int16[be+11]=me,t}}Qc.prototype.bytesPerElement=24,zi("StructArrayLayout4i4ui4i24",Qc);class ll extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,p){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,p)}emplace(t,a,p,x){const T=3*t;return this.float32[T+0]=a,this.float32[T+1]=p,this.float32[T+2]=x,t}}ll.prototype.bytesPerElement=12,zi("StructArrayLayout3f12",ll);class Ia extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint32[1*t+0]=a,t}}Ia.prototype.bytesPerElement=4,zi("StructArrayLayout1ul4",Ia);class Kl extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T,I,O,N,Z){const K=this.length;return this.resize(K+1),this.emplace(K,t,a,p,x,T,I,O,N,Z)}emplace(t,a,p,x,T,I,O,N,Z,K){const te=10*t,le=5*t;return this.int16[te+0]=a,this.int16[te+1]=p,this.int16[te+2]=x,this.int16[te+3]=T,this.int16[te+4]=I,this.int16[te+5]=O,this.uint32[le+3]=N,this.uint16[te+8]=Z,this.uint16[te+9]=K,t}}Kl.prototype.bytesPerElement=20,zi("StructArrayLayout6i1ul2ui20",Kl);class Tl extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T,I){const O=this.length;return this.resize(O+1),this.emplace(O,t,a,p,x,T,I)}emplace(t,a,p,x,T,I,O){const N=6*t;return this.int16[N+0]=a,this.int16[N+1]=p,this.int16[N+2]=x,this.int16[N+3]=T,this.int16[N+4]=I,this.int16[N+5]=O,t}}Tl.prototype.bytesPerElement=12,zi("StructArrayLayout2i2i2i12",Tl);class Aa extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T){const I=this.length;return this.resize(I+1),this.emplace(I,t,a,p,x,T)}emplace(t,a,p,x,T,I){const O=4*t,N=8*t;return this.float32[O+0]=a,this.float32[O+1]=p,this.float32[O+2]=x,this.int16[N+6]=T,this.int16[N+7]=I,t}}Aa.prototype.bytesPerElement=16,zi("StructArrayLayout2f1f2i16",Aa);class Xl extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,t,a,p,x)}emplace(t,a,p,x,T){const I=12*t,O=3*t;return this.uint8[I+0]=a,this.uint8[I+1]=p,this.float32[O+1]=x,this.float32[O+2]=T,t}}Xl.prototype.bytesPerElement=12,zi("StructArrayLayout2ub2f12",Xl);class Il extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,p){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,p)}emplace(t,a,p,x){const T=3*t;return this.uint16[T+0]=a,this.uint16[T+1]=p,this.uint16[T+2]=x,t}}Il.prototype.bytesPerElement=6,zi("StructArrayLayout3ui6",Il);class Al extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T,I,O,N,Z,K,te,le,me,be,Be,Ke,tt){const _t=this.length;return this.resize(_t+1),this.emplace(_t,t,a,p,x,T,I,O,N,Z,K,te,le,me,be,Be,Ke,tt)}emplace(t,a,p,x,T,I,O,N,Z,K,te,le,me,be,Be,Ke,tt,_t){const st=24*t,St=12*t,At=48*t;return this.int16[st+0]=a,this.int16[st+1]=p,this.uint16[st+2]=x,this.uint16[st+3]=T,this.uint32[St+2]=I,this.uint32[St+3]=O,this.uint32[St+4]=N,this.uint16[st+10]=Z,this.uint16[st+11]=K,this.uint16[st+12]=te,this.float32[St+7]=le,this.float32[St+8]=me,this.uint8[At+36]=be,this.uint8[At+37]=Be,this.uint8[At+38]=Ke,this.uint32[St+10]=tt,this.int16[st+22]=_t,t}}Al.prototype.bytesPerElement=48,zi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Al);class uc extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,p,x,T,I,O,N,Z,K,te,le,me,be,Be,Ke,tt,_t,st,St,At,Jt,Fi,Li,Pi,Ci,xi,Si){const Mi=this.length;return this.resize(Mi+1),this.emplace(Mi,t,a,p,x,T,I,O,N,Z,K,te,le,me,be,Be,Ke,tt,_t,st,St,At,Jt,Fi,Li,Pi,Ci,xi,Si)}emplace(t,a,p,x,T,I,O,N,Z,K,te,le,me,be,Be,Ke,tt,_t,st,St,At,Jt,Fi,Li,Pi,Ci,xi,Si,Mi){const ci=34*t,Xi=17*t;return this.int16[ci+0]=a,this.int16[ci+1]=p,this.int16[ci+2]=x,this.int16[ci+3]=T,this.int16[ci+4]=I,this.int16[ci+5]=O,this.int16[ci+6]=N,this.int16[ci+7]=Z,this.uint16[ci+8]=K,this.uint16[ci+9]=te,this.uint16[ci+10]=le,this.uint16[ci+11]=me,this.uint16[ci+12]=be,this.uint16[ci+13]=Be,this.uint16[ci+14]=Ke,this.uint16[ci+15]=tt,this.uint16[ci+16]=_t,this.uint16[ci+17]=st,this.uint16[ci+18]=St,this.uint16[ci+19]=At,this.uint16[ci+20]=Jt,this.uint16[ci+21]=Fi,this.uint16[ci+22]=Li,this.uint32[Xi+12]=Pi,this.float32[Xi+13]=Ci,this.float32[Xi+14]=xi,this.float32[Xi+15]=Si,this.float32[Xi+16]=Mi,t}}uc.prototype.bytesPerElement=68,zi("StructArrayLayout8i15ui1ul4f68",uc);class kl extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.float32[1*t+0]=a,t}}kl.prototype.bytesPerElement=4,zi("StructArrayLayout1f4",kl);class Jn extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,p){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,p)}emplace(t,a,p,x){const T=4*t;return this.uint32[2*t+0]=a,this.uint16[T+2]=p,this.uint16[T+3]=x,t}}Jn.prototype.bytesPerElement=8,zi("StructArrayLayout1ul2ui8",Jn);class E extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a){const p=this.length;return this.resize(p+1),this.emplace(p,t,a)}emplace(t,a,p){const x=2*t;return this.uint16[x+0]=a,this.uint16[x+1]=p,t}}E.prototype.bytesPerElement=4,zi("StructArrayLayout2ui4",E);class i extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint16[1*t+0]=a,t}}i.prototype.bytesPerElement=2,zi("StructArrayLayout1ui2",i);class d extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,t,a,p,x)}emplace(t,a,p,x,T){const I=4*t;return this.float32[I+0]=a,this.float32[I+1]=p,this.float32[I+2]=x,this.float32[I+3]=T,t}}d.prototype.bytesPerElement=16,zi("StructArrayLayout4f16",d);class _ extends al{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Pe(this.anchorPointX,this.anchorPointY)}}_.prototype.size=20;class w extends Kl{get(t){return new _(this,t)}}zi("CollisionBoxArray",w);class S extends al{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}S.prototype.size=48;class f extends Al{get(t){return new S(this,t)}}zi("PlacedSymbolArray",f);class b extends al{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}b.prototype.size=68;class y extends uc{get(t){return new b(this,t)}}zi("SymbolInstanceArray",y);class D extends kl{getoffsetX(t){return this.float32[1*t+0]}}zi("GlyphOffsetArray",D);class k extends us{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}zi("SymbolLineVertexArray",k);class R extends al{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}R.prototype.size=8;class B extends Jn{get(t){return new R(this,t)}}zi("FeatureIndexArray",B);class ee extends Io{}class oe extends Io{}class Ee extends Io{}class Ce extends xs{}class nt extends $s{}class yt extends pa{}class $e extends Sl{}class gt extends Qc{}class kt extends ll{}class Lt extends Ia{}class Zt extends Tl{}class ri extends Xl{}class ii extends Il{}class Ei extends E{}const Ui=wo([{name:"a_pos",components:2,type:"Int16"}],4),{members:vn}=Ui;class bi{constructor(t=[]){this.segments=t}prepareSegment(t,a,p,x){let T=this.segments[this.segments.length-1];return t>bi.MAX_VERTEX_ARRAY_LENGTH&&je(`Max vertices per segment is ${bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!T||T.vertexLength+t>bi.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==x)&&(T={vertexOffset:a.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},void 0!==x&&(T.sortKey=x),this.segments.push(T)),T}get(){return this.segments}destroy(){for(const t of this.segments)for(const a in t.vaos)t.vaos[a].destroy()}static simpleSegment(t,a,p,x){return new bi([{vertexOffset:t,primitiveOffset:a,vertexLength:p,primitiveLength:x,vaos:{},sortKey:0}])}}function en(o,t){return 256*(o=Xe(Math.floor(o),0,255))+Xe(Math.floor(t),0,255)}bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zi("SegmentVector",bi);const ki=wo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var rr={exports:{}},kr=function(o,t){var a,p,x,T,I,O,N,Z;for(p=o.length-(a=3&o.length),x=t,I=3432918353,O=461845907,Z=0;Z<p;)N=255&o.charCodeAt(Z)|(255&o.charCodeAt(++Z))<<8|(255&o.charCodeAt(++Z))<<16|(255&o.charCodeAt(++Z))<<24,++Z,x=27492+(65535&(T=5*(65535&(x=(x^=N=(65535&(N=(N=(65535&N)*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*O+(((N>>>16)*O&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(N=0,a){case 3:N^=(255&o.charCodeAt(Z+2))<<16;case 2:N^=(255&o.charCodeAt(Z+1))<<8;case 1:x^=N=(65535&(N=(N=(65535&(N^=255&o.charCodeAt(Z)))*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*O+(((N>>>16)*O&65535)<<16)&4294967295}return x^=o.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0},Lo=function(o,t){for(var a,p=o.length,x=t^p,T=0;p>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(T)|(255&o.charCodeAt(++T))<<8|(255&o.charCodeAt(++T))<<16|(255&o.charCodeAt(++T))<<24))+((1540483477*(a>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),p-=4,++T;switch(p){case 3:x^=(255&o.charCodeAt(T+2))<<16;case 2:x^=(255&o.charCodeAt(T+1))<<8;case 1:x=1540483477*(65535&(x^=255&o.charCodeAt(T)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0};rr.exports=kr,rr.exports.murmur3=kr,rr.exports.murmur2=Lo;var or=He(rr.exports);class Qo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,a,p,x){this.ids.push(Gs(t)),this.positions.push(a,p,x)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Gs(t);let p=0,x=this.ids.length-1;for(;p<x;){const I=p+x>>1;this.ids[I]>=a?x=I:p=I+1}const T=[];for(;this.ids[p]===a;)T.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return T}static serialize(t,a){const p=new Float64Array(t.ids),x=new Uint32Array(t.positions);return ia(p,x,0,p.length-1),a&&a.push(p.buffer,x.buffer),{ids:p,positions:x}}static deserialize(t){const a=new Qo;return a.ids=t.ids,a.positions=t.positions,a.indexed=!0,a}}function Gs(o){const t=+o;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:or(String(o))}function ia(o,t,a,p){for(;a<p;){const x=o[a+p>>1];let T=a-1,I=p+1;for(;;){do{T++}while(o[T]<x);do{I--}while(o[I]>x);if(T>=I)break;fa(o,T,I),fa(t,3*T,3*I),fa(t,3*T+1,3*I+1),fa(t,3*T+2,3*I+2)}I-a<p-I?(ia(o,t,a,I),a=I+1):(ia(o,t,I+1,p),p=I)}}function fa(o,t,a){const p=o[t];o[t]=o[a],o[a]=p}zi("FeaturePositionMap",Qo);class Kr{constructor(t,a){this.gl=t.gl,this.location=a}}class ka extends Kr{constructor(t,a){super(t,a),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Pl extends Kr{constructor(t,a){super(t,a),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Go extends Kr{constructor(t,a){super(t,a),this.current=Gt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const ho=new Float32Array(16);function nr(o){return[en(255*o.r,255*o.g),en(255*o.b,255*o.a)]}class Co{constructor(t,a,p){this.value=t,this.uniformNames=a.map(x=>`u_${x}`),this.type=p}setUniform(t,a,p){t.set(p.constantOr(this.value))}getBinding(t,a,p){return"color"===this.type?new Go(t,a):new ka(t,a)}}class Zo{constructor(t,a){this.uniformNames=a.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=t.tlbr}setUniform(t,a,p,x){const T="u_pattern_to"===x?this.patternTo:"u_pattern_from"===x?this.patternFrom:"u_pixel_ratio_to"===x?this.pixelRatioTo:"u_pixel_ratio_from"===x?this.pixelRatioFrom:null;T&&t.set(T)}getBinding(t,a,p){return"u_pattern"===p.substr(0,9)?new Pl(t,a):new ka(t,a)}}class sr{constructor(t,a,p,x){this.expression=t,this.type=p,this.maxValue=0,this.paintVertexAttributes=a.map(T=>({name:`a_${T}`,type:"Float32",components:"color"===p?2:1,offset:0})),this.paintVertexArray=new x}populatePaintArray(t,a,p,x,T){const I=this.paintVertexArray.length,O=this.expression.evaluate(new ir(0),a,{},x,[],T);this.paintVertexArray.resize(t),this._setPaintValue(I,t,O)}updatePaintArray(t,a,p,x){const T=this.expression.evaluate({zoom:0},p,x);this._setPaintValue(t,a,T)}_setPaintValue(t,a,p){if("color"===this.type){const x=nr(p);for(let T=t;T<a;T++)this.paintVertexArray.emplace(T,x[0],x[1])}else{for(let x=t;x<a;x++)this.paintVertexArray.emplace(x,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ao{constructor(t,a,p,x,T,I){this.expression=t,this.uniformNames=a.map(O=>`u_${O}_t`),this.type=p,this.useIntegerZoom=x,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=a.map(O=>({name:`a_${O}`,type:"Float32",components:"color"===p?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(t,a,p,x,T){const I=this.expression.evaluate(new ir(this.zoom),a,{},x,[],T),O=this.expression.evaluate(new ir(this.zoom+1),a,{},x,[],T),N=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(N,t,I,O)}updatePaintArray(t,a,p,x){const T=this.expression.evaluate({zoom:this.zoom},p,x),I=this.expression.evaluate({zoom:this.zoom+1},p,x);this._setPaintValue(t,a,T,I)}_setPaintValue(t,a,p,x){if("color"===this.type){const T=nr(p),I=nr(x);for(let O=t;O<a;O++)this.paintVertexArray.emplace(O,T[0],T[1],I[0],I[1])}else{for(let T=t;T<a;T++)this.paintVertexArray.emplace(T,p,x);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(x))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,a){const p=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,x=Xe(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);t.set(x)}getBinding(t,a,p){return new ka(t,a)}}class Zs{constructor(t,a,p,x,T,I){this.expression=t,this.type=a,this.useIntegerZoom=p,this.zoom=x,this.layerId=I,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(t,a,p){const x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(x,t,a.patterns&&a.patterns[this.layerId],p)}updatePaintArray(t,a,p,x,T){this._setPaintValues(t,a,p.patterns&&p.patterns[this.layerId],T)}_setPaintValues(t,a,p,x){if(!x||!p)return;const{min:T,mid:I,max:O}=p,N=x[T],Z=x[I],K=x[O];if(N&&Z&&K)for(let te=t;te<a;te++)this.zoomInPaintVertexArray.emplace(te,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],Z.pixelRatio,N.pixelRatio),this.zoomOutPaintVertexArray.emplace(te,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],K.tl[0],K.tl[1],K.br[0],K.br[1],Z.pixelRatio,K.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,ki.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,ki.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Jl{constructor(t,a,p){this.binders={},this._buffers=[];const x=[];for(const T in t.paint._values){if(!p(T))continue;const I=t.paint.get(T);if(!(I instanceof ma&&Xn(I.property.specification)))continue;const O=ed(T,t.type),N=I.value,Z=I.property.specification.type,K=I.property.useIntegerZoom,te=I.property.specification["property-type"],le="cross-faded"===te||"cross-faded-data-driven"===te;if("constant"===N.kind)this.binders[T]=le?new Zo(N.value,O):new Co(N.value,O,Z),x.push(`/u_${T}`);else if("source"===N.kind||le){const me=Ol(T,Z,"source");this.binders[T]=le?new Zs(N,Z,K,a,me,t.id):new sr(N,O,Z,me),x.push(`/a_${T}`)}else{const me=Ol(T,Z,"composite");this.binders[T]=new Ao(N,O,Z,K,a,me),x.push(`/z_${T}`)}}this.cacheKey=x.sort().join("")}getMaxValue(t){const a=this.binders[t];return a instanceof sr||a instanceof Ao?a.maxValue:0}populatePaintArrays(t,a,p,x,T){for(const I in this.binders){const O=this.binders[I];(O instanceof sr||O instanceof Ao||O instanceof Zs)&&O.populatePaintArray(t,a,p,x,T)}}setConstantPatternPositions(t,a){for(const p in this.binders){const x=this.binders[p];x instanceof Zo&&x.setConstantPatternPositions(t,a)}}updatePaintArrays(t,a,p,x,T){let I=!1;for(const O in t){const N=a.getPositions(O);for(const Z of N){const K=p.feature(Z.index);for(const te in this.binders){const le=this.binders[te];if((le instanceof sr||le instanceof Ao||le instanceof Zs)&&!0===le.expression.isStateDependent){const me=x.paint.get(te);le.expression=me.value,le.updatePaintArray(Z.start,Z.end,K,t[O],T),I=!0}}}}return I}defines(){const t=[];for(const a in this.binders){const p=this.binders[a];(p instanceof Co||p instanceof Zo)&&t.push(...p.uniformNames.map(x=>`#define HAS_UNIFORM_${x}`))}return t}getBinderAttributes(){const t=[];for(const a in this.binders){const p=this.binders[a];if(p instanceof sr||p instanceof Ao)for(let x=0;x<p.paintVertexAttributes.length;x++)t.push(p.paintVertexAttributes[x].name);else if(p instanceof Zs)for(let x=0;x<ki.members.length;x++)t.push(ki.members[x].name)}return t}getBinderUniforms(){const t=[];for(const a in this.binders){const p=this.binders[a];if(p instanceof Co||p instanceof Zo||p instanceof Ao)for(const x of p.uniformNames)t.push(x)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,a){const p=[];for(const x in this.binders){const T=this.binders[x];if(T instanceof Co||T instanceof Zo||T instanceof Ao)for(const I of T.uniformNames)if(a[I]){const O=T.getBinding(t,a[I],I);p.push({name:I,property:x,binding:O})}}return p}setUniforms(t,a,p,x){for(const{name:T,property:I,binding:O}of a)this.binders[I].setUniform(O,x,p.get(I),T)}updatePaintBuffers(t){this._buffers=[];for(const a in this.binders){const p=this.binders[a];if(t&&p instanceof Zs){const x=2===t.fromScale?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(p instanceof sr||p instanceof Ao)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(t){for(const a in this.binders){const p=this.binders[a];(p instanceof sr||p instanceof Ao||p instanceof Zs)&&p.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const a=this.binders[t];(a instanceof sr||a instanceof Ao||a instanceof Zs)&&a.destroy()}}}class cl{constructor(t,a,p=(()=>!0)){this.programConfigurations={};for(const x of t)this.programConfigurations[x.id]=new Jl(x,a,p);this.needsUpload=!1,this._featureMap=new Qo,this._bufferOffset=0}populatePaintArrays(t,a,p,x,T,I){for(const O in this.programConfigurations)this.programConfigurations[O].populatePaintArrays(t,a,x,T,I);void 0!==a.id&&this._featureMap.add(a.id,p,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,a,p,x){for(const T of p)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(t,this._featureMap,a,T,x)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function ed(o,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${t}-`,"").replace(/-/g,"_")]}function Ol(o,t,a){const x={"line-pattern":{source:$e,composite:$e},"fill-pattern":{source:$e,composite:$e},"fill-extrusion-pattern":{source:$e,composite:$e}}[o];return x&&x[a]||{color:{source:pa,composite:d},number:{source:kl,composite:pa}}[t][a]}zi("ConstantBinder",Co),zi("CrossFadedConstantBinder",Zo),zi("SourceExpressionBinder",sr),zi("CrossFadedCompositeBinder",Zs),zi("CompositeExpressionBinder",Ao),zi("ProgramConfiguration",Jl,{omit:["_buffers"]}),zi("ProgramConfigurationSet",cl);const zr=8192,td=Math.pow(2,14)-1,hc=-td-1;function Ws(o){const t=zr/o.extent,a=o.loadGeometry();for(let p=0;p<a.length;p++){const x=a[p];for(let T=0;T<x.length;T++){const I=x[T],O=Math.round(I.x*t),N=Math.round(I.y*t);I.x=Xe(O,hc,td),I.y=Xe(N,hc,td),(O<I.x||O>I.x+1||N<I.y||N>I.y+1)&&je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function kc(o,t){return{type:o.type,id:o.id,properties:o.properties,geometry:t?Ws(o):[]}}function Fd(o,t,a,p,x){o.emplaceBack(2*t+(p+1)/2,2*a+(x+1)/2)}class Ld{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new oe,this.indexArray=new ii,this.segments=new bi,this.programConfigurations=new cl(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,p){const x=this.layers[0],T=[];let I=null,O=!1;"circle"===x.type&&(I=x.layout.get("circle-sort-key"),O=!I.isConstant());for(const{feature:N,id:Z,index:K,sourceLayerIndex:te}of t){const le=this.layers[0]._featureFilter.needGeometry,me=kc(N,le);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),me,p))continue;const be=O?I.evaluate(me,{},p):void 0,Be={id:Z,properties:N.properties,type:N.type,sourceLayerIndex:te,index:K,geometry:le?me.geometry:Ws(N),patterns:{},sortKey:be};T.push(Be)}O&&T.sort((N,Z)=>N.sortKey-Z.sortKey);for(const N of T){const{geometry:Z,index:K,sourceLayerIndex:te}=N,le=t[K].feature;this.addFeature(N,Z,K,p),a.featureIndex.insert(le,Z,K,te,this.index)}}update(t,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,vn),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,a,p,x){for(const T of a)for(const I of T){const O=I.x,N=I.y;if(O<0||O>=zr||N<0||N>=zr)continue;const Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),K=Z.vertexLength;Fd(this.layoutVertexArray,O,N,-1,-1),Fd(this.layoutVertexArray,O,N,1,-1),Fd(this.layoutVertexArray,O,N,1,1),Fd(this.layoutVertexArray,O,N,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+3,K+2),Z.vertexLength+=4,Z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,p,{},x)}}function Qm(o,t){for(let a=0;a<o.length;a++)if(Nd(t,o[a]))return!0;for(let a=0;a<t.length;a++)if(Nd(o,t[a]))return!0;return!!mc(o,t)}function ep(o,t,a){return!!Nd(o,t)||!!Tu(t,o,a)}function Su(o,t){if(1===o.length)return Pc(t,o[0]);for(let a=0;a<t.length;a++){const p=t[a];for(let x=0;x<p.length;x++)if(Nd(o,p[x]))return!0}for(let a=0;a<o.length;a++)if(Pc(t,o[a]))return!0;for(let a=0;a<t.length;a++)if(mc(o,t[a]))return!0;return!1}function id(o,t,a){if(o.length>1){if(mc(o,t))return!0;for(let p=0;p<t.length;p++)if(Tu(t[p],o,a))return!0}for(let p=0;p<o.length;p++)if(Tu(o[p],t,a))return!0;return!1}function mc(o,t){if(0===o.length||0===t.length)return!1;for(let a=0;a<o.length-1;a++){const p=o[a],x=o[a+1];for(let T=0;T<t.length-1;T++)if(nd(p,x,t[T],t[T+1]))return!0}return!1}function nd(o,t,a,p){return Oe(o,a,p)!==Oe(t,a,p)&&Oe(o,t,a)!==Oe(o,t,p)}function Tu(o,t,a){const p=a*a;if(1===t.length)return o.distSqr(t[0])<p;for(let x=1;x<t.length;x++)if(Iu(o,t[x-1],t[x])<p)return!0;return!1}function Iu(o,t,a){const p=t.distSqr(a);if(0===p)return o.distSqr(t);const x=((o.x-t.x)*(a.x-t.x)+(o.y-t.y)*(a.y-t.y))/p;return o.distSqr(x<0?t:x>1?a:a.sub(t)._mult(x)._add(t))}function Pc(o,t){let a,p,x,T=!1;for(let I=0;I<o.length;I++){a=o[I];for(let O=0,N=a.length-1;O<a.length;N=O++)p=a[O],x=a[N],p.y>t.y!=x.y>t.y&&t.x<(x.x-p.x)*(t.y-p.y)/(x.y-p.y)+p.x&&(T=!T)}return T}function Nd(o,t){let a=!1;for(let p=0,x=o.length-1;p<o.length;x=p++){const T=o[p],I=o[x];T.y>t.y!=I.y>t.y&&t.x<(I.x-T.x)*(t.y-T.y)/(I.y-T.y)+T.x&&(a=!a)}return a}function Lf(o,t,a){const p=a[0],x=a[2];if(o.x<p.x&&t.x<p.x||o.x>x.x&&t.x>x.x||o.y<p.y&&t.y<p.y||o.y>x.y&&t.y>x.y)return!1;const T=Oe(o,t,a[0]);return T!==Oe(o,t,a[1])||T!==Oe(o,t,a[2])||T!==Oe(o,t,a[3])}function Au(o,t,a){const p=t.paint.get(o).value;return"constant"===p.kind?p.value:a.programConfigurations.get(t.id).getMaxValue(o)}function Uh(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function jh(o,t,a,p,x){if(!t[0]&&!t[1])return o;const T=Pe.convert(t)._mult(x);"viewport"===a&&T._rotate(-p);const I=[];for(let O=0;O<o.length;O++)I.push(o[O].sub(T));return I}let so,Nf;zi("CircleBucket",Ld,{omit:["layers"]});var k_={get paint(){return Nf=Nf||new So({"circle-radius":new pi(Me.paint_circle["circle-radius"]),"circle-color":new pi(Me.paint_circle["circle-color"]),"circle-blur":new pi(Me.paint_circle["circle-blur"]),"circle-opacity":new pi(Me.paint_circle["circle-opacity"]),"circle-translate":new wt(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new wt(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wt(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wt(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pi(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pi(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pi(Me.paint_circle["circle-stroke-opacity"])})},get layout(){return so=so||new So({"circle-sort-key":new pi(Me.layout_circle["circle-sort-key"])})}},No=1e-6,pc=typeof Float32Array<"u"?Float32Array:Array;function ku(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function mo(o,t,a){var p=t[0],x=t[1],T=t[2],I=t[3],O=t[4],N=t[5],Z=t[6],K=t[7],te=t[8],le=t[9],me=t[10],be=t[11],Be=t[12],Ke=t[13],tt=t[14],_t=t[15],st=a[0],St=a[1],At=a[2],Jt=a[3];return o[0]=st*p+St*O+At*te+Jt*Be,o[1]=st*x+St*N+At*le+Jt*Ke,o[2]=st*T+St*Z+At*me+Jt*tt,o[3]=st*I+St*K+At*be+Jt*_t,o[4]=(st=a[4])*p+(St=a[5])*O+(At=a[6])*te+(Jt=a[7])*Be,o[5]=st*x+St*N+At*le+Jt*Ke,o[6]=st*T+St*Z+At*me+Jt*tt,o[7]=st*I+St*K+At*be+Jt*_t,o[8]=(st=a[8])*p+(St=a[9])*O+(At=a[10])*te+(Jt=a[11])*Be,o[9]=st*x+St*N+At*le+Jt*Ke,o[10]=st*T+St*Z+At*me+Jt*tt,o[11]=st*I+St*K+At*be+Jt*_t,o[12]=(st=a[12])*p+(St=a[13])*O+(At=a[14])*te+(Jt=a[15])*Be,o[13]=st*x+St*N+At*le+Jt*Ke,o[14]=st*T+St*Z+At*me+Jt*tt,o[15]=st*I+St*K+At*be+Jt*_t,o}Math.hypot||(Math.hypot=function(){for(var o=0,t=arguments.length;t--;)o+=arguments[t]*arguments[t];return Math.sqrt(o)});var zd,Oc=mo;function Pu(o,t,a){var p=t[0],x=t[1],T=t[2],I=t[3];return o[0]=a[0]*p+a[4]*x+a[8]*T+a[12]*I,o[1]=a[1]*p+a[5]*x+a[9]*T+a[13]*I,o[2]=a[2]*p+a[6]*x+a[10]*T+a[14]*I,o[3]=a[3]*p+a[7]*x+a[11]*T+a[15]*I,o}zd=new pc(4),pc!=Float32Array&&(zd[0]=0,zd[1]=0,zd[2]=0,zd[3]=0);class ws extends To{constructor(t){super(t,k_)}createBucket(t){return new Ld(t)}queryRadius(t){const a=t;return Au("circle-radius",this,a)+Au("circle-stroke-width",this,a)+Uh(this.paint.get("circle-translate"))}queryIntersectsFeature(t,a,p,x,T,I,O,N){const Z=jh(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,O),K=this.paint.get("circle-radius").evaluate(a,p)+this.paint.get("circle-stroke-width").evaluate(a,p),te="map"===this.paint.get("circle-pitch-alignment"),le=te?Z:(Be=N,Z.map(Ke=>Rc(Ke,Be))),me=te?K*O:K;var Be;for(const be of x)for(const Be of be){const Ke=te?Be:Rc(Be,N);let tt=me;const _t=Pu([],[Be.x,Be.y,0,1],N);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?tt*=_t[3]/I.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(tt*=I.cameraToCenterDistance/_t[3]),ep(le,Ke,tt))return!0}return!1}}function Rc(o,t){const a=Pu([],[o.x,o.y,0,1],t);return new Pe(a[0]/a[3],a[1]/a[3])}class Hh extends Ld{}let rd;zi("HeatmapBucket",Hh,{omit:["layers"]});var Bd={get paint(){return rd=rd||new So({"heatmap-radius":new pi(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pi(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wt(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xo(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wt(Me.paint_heatmap["heatmap-opacity"])})}};function $h(o,{width:t,height:a},p,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==t*a*p)throw new RangeError(`mismatched image size. expected: ${x.length} but got: ${t*a*p}`)}else x=new Uint8Array(t*a*p);return o.width=t,o.height=a,o.data=x,o}function zf(o,{width:t,height:a},p){if(t===o.width&&a===o.height)return;const x=$h({},{width:t,height:a},p);Ou(o,x,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,t),height:Math.min(o.height,a)},p),o.width=t,o.height=a,o.data=x.data}function Ou(o,t,a,p,x,T){if(0===x.width||0===x.height)return t;if(x.width>o.width||x.height>o.height||a.x>o.width-x.width||a.y>o.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>t.width||x.height>t.height||p.x>t.width-x.width||p.y>t.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const I=o.data,O=t.data;if(I===O)throw new Error("srcData equals dstData, so image is already copied");for(let N=0;N<x.height;N++){const Z=((a.y+N)*o.width+a.x)*T,K=((p.y+N)*t.width+p.x)*T;for(let te=0;te<x.width*T;te++)O[K+te]=I[Z+te]}return t}class Ru{constructor(t,a){$h(this,t,1,a)}resize(t){zf(this,t,1)}clone(){return new Ru({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,p,x,T){Ou(t,a,p,x,T,1)}}class ao{constructor(t,a){$h(this,t,4,a)}resize(t){zf(this,t,4)}replace(t,a){a?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ao({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,p,x,T){Ou(t,a,p,x,T,4)}}function od(o){const t={},a=o.resolution||256,p=o.clips?o.clips.length:1,x=o.image||new ao({width:a,height:p});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const T=(I,O,N)=>{t[o.evaluationKey]=N;const Z=o.expression.evaluate(t);x.data[I+O+0]=Math.floor(255*Z.r/Z.a),x.data[I+O+1]=Math.floor(255*Z.g/Z.a),x.data[I+O+2]=Math.floor(255*Z.b/Z.a),x.data[I+O+3]=Math.floor(255*Z.a)};if(o.clips)for(let I=0,O=0;I<p;++I,O+=4*a)for(let N=0,Z=0;N<a;N++,Z+=4){const K=N/(a-1),{start:te,end:le}=o.clips[I];T(O,Z,te*(1-K)+le*K)}else for(let I=0,O=0;I<a;I++,O+=4)T(0,O,I/(a-1));return x}zi("AlphaImage",Ru),zi("RGBAImage",ao);class sd extends To{createBucket(t){return new Hh(t)}constructor(t){super(t,Bd),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=od({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let tp;var ip={get paint(){return tp=tp||new So({"hillshade-illumination-direction":new wt(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wt(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wt(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wt(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wt(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wt(Me.paint_hillshade["hillshade-accent-color"])})}};class Bf extends To{constructor(t){super(t,ip)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const Vf=wo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Uf}=Vf;var Gh={exports:{}};function Fu(o,t,a){a=a||2;var p,x,T,I,O,N,Z,K=t&&t.length,te=K?t[0]*a:o.length,le=np(o,0,te,a,!0),me=[];if(!le||le.next===le.prev)return me;if(K&&(le=function(Be,Ke,tt,_t){var st,St,At,Jt=[];for(st=0,St=Ke.length;st<St;st++)(At=np(Be,Ke[st]*_t,st<St-1?Ke[st+1]*_t:Be.length,_t,!1))===At.next&&(At.steiner=!0),Jt.push(op(At));for(Jt.sort(P_),st=0;st<Jt.length;st++)tt=rp(Jt[st],tt);return tt}(o,t,le,a)),o.length>80*a){p=T=o[0],x=I=o[1];for(var be=a;be<te;be+=a)(O=o[be])<p&&(p=O),(N=o[be+1])<x&&(x=N),O>T&&(T=O),N>I&&(I=N);Z=0!==(Z=Math.max(T-p,I-x))?32767/Z:0}return fc(le,me,a,p,x,Z,0),me}function np(o,t,a,p,x){var T,I;if(x===dd(o,t,a,p)>0)for(T=t;T<a;T+=p)I=ap(T,o[T],o[T+1],I);else for(T=a-p;T>=t;T-=p)I=ap(T,o[T],o[T+1],I);return I&&Rl(I,I.next)&&(Hd(I),I=I.next),I}function dl(o,t){if(!o)return o;t||(t=o);var a,p=o;do{if(a=!1,p.steiner||!Rl(p,p.next)&&0!==Br(p.prev,p,p.next))p=p.next;else{if(Hd(p),(p=t=p.prev)===p.next)break;a=!0}}while(a||p!==t);return t}function fc(o,t,a,p,x,T,I){if(o){!I&&T&&function(K,te,le,me){var be=K;do{0===be.z&&(be.z=ad(be.x,be.y,te,le,me)),be.prevZ=be.prev,be.nextZ=be.next,be=be.next}while(be!==K);be.prevZ.nextZ=null,be.prevZ=null,function(Be){var Ke,tt,_t,st,St,At,Jt,Fi,Li=1;do{for(tt=Be,Be=null,St=null,At=0;tt;){for(At++,_t=tt,Jt=0,Ke=0;Ke<Li&&(Jt++,_t=_t.nextZ);Ke++);for(Fi=Li;Jt>0||Fi>0&&_t;)0!==Jt&&(0===Fi||!_t||tt.z<=_t.z)?(st=tt,tt=tt.nextZ,Jt--):(st=_t,_t=_t.nextZ,Fi--),St?St.nextZ=st:Be=st,st.prevZ=St,St=st;tt=_t}St.nextZ=null,Li*=2}while(At>1)}(be)}(o,p,x,T);for(var O,N,Z=o;o.prev!==o.next;)if(O=o.prev,N=o.next,T?Lu(o,p,x,T):Vd(o))t.push(O.i/a|0),t.push(o.i/a|0),t.push(N.i/a|0),Hd(o),o=N.next,Z=N.next;else if((o=N)===Z){I?1===I?fc(o=jf(dl(o),t,a),t,a,p,x,T,2):2===I&&Nu(o,t,a,p,x,T):fc(dl(o),t,a,p,x,T,1);break}}}function Vd(o){var t=o.prev,a=o,p=o.next;if(Br(t,a,p)>=0)return!1;for(var x=t.x,T=a.x,I=p.x,O=t.y,N=a.y,Z=p.y,K=x<T?x<I?x:I:T<I?T:I,te=O<N?O<Z?O:Z:N<Z?N:Z,le=x>T?x>I?x:I:T>I?T:I,me=O>N?O>Z?O:Z:N>Z?N:Z,be=p.next;be!==t;){if(be.x>=K&&be.x<=le&&be.y>=te&&be.y<=me&&ld(x,O,T,N,I,Z,be.x,be.y)&&Br(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function Lu(o,t,a,p){var x=o.prev,T=o,I=o.next;if(Br(x,T,I)>=0)return!1;for(var O=x.x,N=T.x,Z=I.x,K=x.y,te=T.y,le=I.y,me=O<N?O<Z?O:Z:N<Z?N:Z,be=K<te?K<le?K:le:te<le?te:le,Be=O>N?O>Z?O:Z:N>Z?N:Z,Ke=K>te?K>le?K:le:te>le?te:le,tt=ad(me,be,t,a,p),_t=ad(Be,Ke,t,a,p),st=o.prevZ,St=o.nextZ;st&&st.z>=tt&&St&&St.z<=_t;){if(st.x>=me&&st.x<=Be&&st.y>=be&&st.y<=Ke&&st!==x&&st!==I&&ld(O,K,N,te,Z,le,st.x,st.y)&&Br(st.prev,st,st.next)>=0||(st=st.prevZ,St.x>=me&&St.x<=Be&&St.y>=be&&St.y<=Ke&&St!==x&&St!==I&&ld(O,K,N,te,Z,le,St.x,St.y)&&Br(St.prev,St,St.next)>=0))return!1;St=St.nextZ}for(;st&&st.z>=tt;){if(st.x>=me&&st.x<=Be&&st.y>=be&&st.y<=Ke&&st!==x&&st!==I&&ld(O,K,N,te,Z,le,st.x,st.y)&&Br(st.prev,st,st.next)>=0)return!1;st=st.prevZ}for(;St&&St.z<=_t;){if(St.x>=me&&St.x<=Be&&St.y>=be&&St.y<=Ke&&St!==x&&St!==I&&ld(O,K,N,te,Z,le,St.x,St.y)&&Br(St.prev,St,St.next)>=0)return!1;St=St.nextZ}return!0}function jf(o,t,a){var p=o;do{var x=p.prev,T=p.next.next;!Rl(x,T)&&sp(x,p,p.next,T)&&jd(x,T)&&jd(T,x)&&(t.push(x.i/a|0),t.push(p.i/a|0),t.push(T.i/a|0),Hd(p),Hd(p.next),p=o=T),p=p.next}while(p!==o);return dl(p)}function Nu(o,t,a,p,x,T){var I=o;do{for(var O=I.next.next;O!==I.prev;){if(I.i!==O.i&&Hf(I,O)){var N=$f(I,O);return I=dl(I,I.next),N=dl(N,N.next),fc(I,t,a,p,x,T,0),void fc(N,t,a,p,x,T,0)}O=O.next}I=I.next}while(I!==o)}function P_(o,t){return o.x-t.x}function rp(o,t){var a=function(x,T){var I,O=T,N=x.x,Z=x.y,K=-1/0;do{if(Z<=O.y&&Z>=O.next.y&&O.next.y!==O.y){var te=O.x+(Z-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(te<=N&&te>K&&(K=te,I=O.x<O.next.x?O:O.next,te===N))return I}O=O.next}while(O!==T);if(!I)return null;var le,me=I,be=I.x,Be=I.y,Ke=1/0;O=I;do{N>=O.x&&O.x>=be&&N!==O.x&&ld(Z<Be?N:K,Z,be,Be,Z<Be?K:N,Z,O.x,O.y)&&(le=Math.abs(Z-O.y)/(N-O.x),jd(O,x)&&(le<Ke||le===Ke&&(O.x>I.x||O.x===I.x&&Zh(I,O)))&&(I=O,Ke=le)),O=O.next}while(O!==me);return I}(o,t);if(!a)return t;var p=$f(a,o);return dl(p,p.next),dl(a,a.next)}function Zh(o,t){return Br(o.prev,o,t.prev)<0&&Br(t.next,o,o.next)<0}function ad(o,t,a,p,x){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*x|0)|o<<8))|o<<4))|o<<2))|o<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-p)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function op(o){var t=o,a=o;do{(t.x<a.x||t.x===a.x&&t.y<a.y)&&(a=t),t=t.next}while(t!==o);return a}function ld(o,t,a,p,x,T,I,O){return(x-I)*(t-O)>=(o-I)*(T-O)&&(o-I)*(p-O)>=(a-I)*(t-O)&&(a-I)*(T-O)>=(x-I)*(p-O)}function Hf(o,t){return o.next.i!==t.i&&o.prev.i!==t.i&&!function(a,p){var x=a;do{if(x.i!==a.i&&x.next.i!==a.i&&x.i!==p.i&&x.next.i!==p.i&&sp(x,x.next,a,p))return!0;x=x.next}while(x!==a);return!1}(o,t)&&(jd(o,t)&&jd(t,o)&&function(a,p){var x=a,T=!1,I=(a.x+p.x)/2,O=(a.y+p.y)/2;do{x.y>O!=x.next.y>O&&x.next.y!==x.y&&I<(x.next.x-x.x)*(O-x.y)/(x.next.y-x.y)+x.x&&(T=!T),x=x.next}while(x!==a);return T}(o,t)&&(Br(o.prev,o,t.prev)||Br(o,t.prev,t))||Rl(o,t)&&Br(o.prev,o,o.next)>0&&Br(t.prev,t,t.next)>0)}function Br(o,t,a){return(t.y-o.y)*(a.x-t.x)-(t.x-o.x)*(a.y-t.y)}function Rl(o,t){return o.x===t.x&&o.y===t.y}function sp(o,t,a,p){var x=Ud(Br(o,t,a)),T=Ud(Br(o,t,p)),I=Ud(Br(a,p,o)),O=Ud(Br(a,p,t));return x!==T&&I!==O||!(0!==x||!cd(o,a,t))||!(0!==T||!cd(o,p,t))||!(0!==I||!cd(a,o,p))||!(0!==O||!cd(a,t,p))}function cd(o,t,a){return t.x<=Math.max(o.x,a.x)&&t.x>=Math.min(o.x,a.x)&&t.y<=Math.max(o.y,a.y)&&t.y>=Math.min(o.y,a.y)}function Ud(o){return o>0?1:o<0?-1:0}function jd(o,t){return Br(o.prev,o,o.next)<0?Br(o,t,o.next)>=0&&Br(o,o.prev,t)>=0:Br(o,t,o.prev)<0||Br(o,o.next,t)<0}function $f(o,t){var a=new Wh(o.i,o.x,o.y),p=new Wh(t.i,t.x,t.y),x=o.next,T=t.prev;return o.next=t,t.prev=o,a.next=x,x.prev=a,p.next=a,a.prev=p,T.next=p,p.prev=T,p}function ap(o,t,a,p){var x=new Wh(o,t,a);return p?(x.next=p.next,x.prev=p,p.next.prev=x,p.next=x):(x.prev=x,x.next=x),x}function Hd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Wh(o,t,a){this.i=o,this.x=t,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dd(o,t,a,p){for(var x=0,T=t,I=a-p;T<a;T+=p)x+=(o[I]-o[T])*(o[T+1]+o[I+1]),I=T;return x}Gh.exports=Fu,Gh.exports.default=Fu,Fu.deviation=function(o,t,a,p){var x=t&&t.length,T=Math.abs(dd(o,0,x?t[0]*a:o.length,a));if(x)for(var I=0,O=t.length;I<O;I++)T-=Math.abs(dd(o,t[I]*a,I<O-1?t[I+1]*a:o.length,a));var N=0;for(I=0;I<p.length;I+=3){var Z=p[I]*a,K=p[I+1]*a,te=p[I+2]*a;N+=Math.abs((o[Z]-o[te])*(o[K+1]-o[Z+1])-(o[Z]-o[K])*(o[te+1]-o[Z+1]))}return 0===T&&0===N?0:Math.abs((N-T)/T)},Fu.flatten=function(o){for(var t=o[0][0].length,a={vertices:[],holes:[],dimensions:t},p=0,x=0;x<o.length;x++){for(var T=0;T<o[x].length;T++)for(var I=0;I<t;I++)a.vertices.push(o[x][T][I]);x>0&&a.holes.push(p+=o[x-1].length)}return a};var qh=He(Gh.exports);function Gf(o,t,a,p,x){Yh(o,t,a||0,p||o.length-1,x||$d)}function Yh(o,t,a,p,x){for(;p>a;){if(p-a>600){var T=p-a+1,I=t-a+1,O=Math.log(T),N=.5*Math.exp(2*O/3),Z=.5*Math.sqrt(O*N*(T-N)/T)*(I-T/2<0?-1:1);Yh(o,t,Math.max(a,Math.floor(t-I*N/T+Z)),Math.min(p,Math.floor(t+(T-I)*N/T+Z)),x)}var K=o[t],te=a,le=p;for(Ql(o,a,t),x(o[p],K)>0&&Ql(o,a,p);te<le;){for(Ql(o,te,le),te++,le--;x(o[te],K)<0;)te++;for(;x(o[le],K)>0;)le--}0===x(o[a],K)?Ql(o,a,le):Ql(o,++le,p),le<=t&&(a=le+1),t<=le&&(p=le-1)}}function Ql(o,t,a){var p=o[t];o[t]=o[a],o[a]=p}function $d(o,t){return o<t?-1:o>t?1:0}function lp(o,t){const a=o.length;if(a<=1)return[o];const p=[];let x,T;for(let I=0;I<a;I++){const O=Ft(o[I]);0!==O&&(o[I].area=Math.abs(O),void 0===T&&(T=O<0),T===O<0?(x&&p.push(x),x=[o[I]]):x.push(o[I]))}if(x&&p.push(x),t>1)for(let I=0;I<p.length;I++)p[I].length<=t||(Gf(p[I],t,1,p[I].length-1,Zf),p[I]=p[I].slice(0,t));return p}function Zf(o,t){return t.area-o.area}function Kh(o,t,a){const p=a.patternDependencies;let x=!1;for(const T of t){const I=T.paint.get(`${o}-pattern`);I.isConstant()||(x=!0);const O=I.constantOr(null);O&&(x=!0,p[O.to]=!0,p[O.from]=!0)}return x}function Gd(o,t,a,p,x){const T=x.patternDependencies;for(const I of t){const O=I.paint.get(`${o}-pattern`).value;if("constant"!==O.kind){let N=O.evaluate({zoom:p-1},a,{},x.availableImages),Z=O.evaluate({zoom:p},a,{},x.availableImages),K=O.evaluate({zoom:p+1},a,{},x.availableImages);N=N&&N.name?N.name:N,Z=Z&&Z.name?Z.name:Z,K=K&&K.name?K.name:K,T[N]=!0,T[Z]=!0,T[K]=!0,a.patterns[I.id]={min:N,mid:Z,max:K}}}return a}class cp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ee,this.indexArray=new ii,this.indexArray2=new Ei,this.programConfigurations=new cl(t.layers,t.zoom),this.segments=new bi,this.segments2=new bi,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,p){this.hasPattern=Kh("fill",this.layers,a);const x=this.layers[0].layout.get("fill-sort-key"),T=!x.isConstant(),I=[];for(const{feature:O,id:N,index:Z,sourceLayerIndex:K}of t){const te=this.layers[0]._featureFilter.needGeometry,le=kc(O,te);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),le,p))continue;const me=T?x.evaluate(le,{},p,a.availableImages):void 0,be={id:N,properties:O.properties,type:O.type,sourceLayerIndex:K,index:Z,geometry:te?le.geometry:Ws(O),patterns:{},sortKey:me};I.push(be)}T&&I.sort((O,N)=>O.sortKey-N.sortKey);for(const O of I){const{geometry:N,index:Z,sourceLayerIndex:K}=O;if(this.hasPattern){const te=Gd("fill",this.layers,O,this.zoom,a);this.patternFeatures.push(te)}else this.addFeature(O,N,Z,p,{});a.featureIndex.insert(t[Z].feature,N,Z,K,this.index)}}update(t,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,p)}addFeatures(t,a,p){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,a,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Uf),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,a,p,x,T){for(const I of lp(a,500)){let O=0;for(const me of I)O+=me.length;const N=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray),Z=N.vertexLength,K=[],te=[];for(const me of I){if(0===me.length)continue;me!==I[0]&&te.push(K.length/2);const be=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Be=be.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Be+me.length-1,Be),K.push(me[0].x),K.push(me[0].y);for(let Ke=1;Ke<me.length;Ke++)this.layoutVertexArray.emplaceBack(me[Ke].x,me[Ke].y),this.indexArray2.emplaceBack(Be+Ke-1,Be+Ke),K.push(me[Ke].x),K.push(me[Ke].y);be.vertexLength+=me.length,be.primitiveLength+=me.length}const le=qh(K,te);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack(Z+le[me],Z+le[me+1],Z+le[me+2]);N.vertexLength+=O,N.primitiveLength+=le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,p,T,x)}}let Wf,zu;zi("FillBucket",cp,{omit:["layers","patternFeatures"]});var O_={get paint(){return zu=zu||new So({"fill-antialias":new wt(Me.paint_fill["fill-antialias"]),"fill-opacity":new pi(Me.paint_fill["fill-opacity"]),"fill-color":new pi(Me.paint_fill["fill-color"]),"fill-outline-color":new pi(Me.paint_fill["fill-outline-color"]),"fill-translate":new wt(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new wt(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new sl(Me.paint_fill["fill-pattern"])})},get layout(){return Wf=Wf||new So({"fill-sort-key":new pi(Me.layout_fill["fill-sort-key"])})}};class R_ extends To{constructor(t){super(t,O_)}recalculate(t,a){super.recalculate(t,a);const p=this.paint._values["fill-outline-color"];"constant"===p.value.kind&&void 0===p.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new cp(t)}queryRadius(){return Uh(this.paint.get("fill-translate"))}queryIntersectsFeature(t,a,p,x,T,I,O){return Su(jh(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,O),x)}isTileClipped(){return!0}}const Bu=wo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),F_=wo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Vu}=Bu;var gc={},Uu=ne,Zd=Fc;function Fc(o,t,a,p,x){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=p,this._values=x,o.readFields(dp,this,t)}function dp(o,t,a){1==o?t.id=a.readVarint():2==o?function(p,x){for(var T=p.readVarint()+p.pos;p.pos<T;){var I=x._keys[p.readVarint()],O=x._values[p.readVarint()];x.properties[I]=O}}(a,t):3==o?t.type=a.readVarint():4==o&&(t._geometry=a.pos)}function up(o){for(var t,a,p=0,x=0,T=o.length,I=T-1;x<T;I=x++)p+=((a=o[I]).x-(t=o[x]).x)*(t.y+a.y);return p}Fc.types=["Unknown","Point","LineString","Polygon"],Fc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var t,a=o.readVarint()+o.pos,p=1,x=0,T=0,I=0,O=[];o.pos<a;){if(x<=0){var N=o.readVarint();p=7&N,x=N>>3}if(x--,1===p||2===p)T+=o.readSVarint(),I+=o.readSVarint(),1===p&&(t&&O.push(t),t=[]),t.push(new Uu(T,I));else{if(7!==p)throw new Error("unknown command "+p);t&&t.push(t[0].clone())}}return t&&O.push(t),O},Fc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var t=o.readVarint()+o.pos,a=1,p=0,x=0,T=0,I=1/0,O=-1/0,N=1/0,Z=-1/0;o.pos<t;){if(p<=0){var K=o.readVarint();a=7&K,p=K>>3}if(p--,1===a||2===a)(x+=o.readSVarint())<I&&(I=x),x>O&&(O=x),(T+=o.readSVarint())<N&&(N=T),T>Z&&(Z=T);else if(7!==a)throw new Error("unknown command "+a)}return[I,N,O,Z]},Fc.prototype.toGeoJSON=function(o,t,a){var p,x,T=this.extent*Math.pow(2,a),I=this.extent*o,O=this.extent*t,N=this.loadGeometry(),Z=Fc.types[this.type];function K(me){for(var be=0;be<me.length;be++){var Be=me[be];me[be]=[360*(Be.x+I)/T-180,360/Math.PI*Math.atan(Math.exp((180-360*(Be.y+O)/T)*Math.PI/180))-90]}}switch(this.type){case 1:var te=[];for(p=0;p<N.length;p++)te[p]=N[p][0];K(N=te);break;case 2:for(p=0;p<N.length;p++)K(N[p]);break;case 3:for(N=function(me){var be=me.length;if(be<=1)return[me];for(var Be,Ke,tt=[],_t=0;_t<be;_t++){var st=up(me[_t]);0!==st&&(void 0===Ke&&(Ke=st<0),Ke===st<0?(Be&&tt.push(Be),Be=[me[_t]]):Be.push(me[_t]))}return Be&&tt.push(Be),tt}(N),p=0;p<N.length;p++)for(x=0;x<N[p].length;x++)K(N[p][x])}1===N.length?N=N[0]:Z="Multi"+Z;var le={type:"Feature",geometry:{type:Z,coordinates:N},properties:this.properties};return"id"in this&&(le.id=this.id),le};var ud=Zd,Xh=Jh;function Jh(o,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(ju,this,t),this.length=this._features.length}function ju(o,t,a){15===o?t.version=a.readVarint():1===o?t.name=a.readString():5===o?t.extent=a.readVarint():2===o?t._features.push(a.pos):3===o?t._keys.push(a.readString()):4===o&&t._values.push(function(p){for(var x=null,T=p.readVarint()+p.pos;p.pos<T;){var I=p.readVarint()>>3;x=1===I?p.readString():2===I?p.readFloat():3===I?p.readDouble():4===I?p.readVarint64():5===I?p.readVarint():6===I?p.readSVarint():7===I?p.readBoolean():null}return x}(a))}Jh.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var t=this._pbf.readVarint()+this._pbf.pos;return new ud(this._pbf,t,this.extent,this._keys,this._values)};var Hu=Xh;function $u(o,t,a){if(3===o){var p=new Hu(a,a.readVarint()+a.pos);p.length&&(t[p.name]=p)}}gc.VectorTile=function(o,t){this.layers=o.readFields($u,{},t)},gc.VectorTileFeature=Zd,gc.VectorTileLayer=Xh;const qf=gc.VectorTileFeature.types,Qh=Math.pow(2,13);function Wd(o,t,a,p,x,T,I,O){o.emplaceBack(t,a,2*Math.floor(p*Qh)+I,x*Qh*2,T*Qh*2,Math.round(O))}class Gu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ce,this.centroidVertexArray=new ee,this.indexArray=new ii,this.programConfigurations=new cl(t.layers,t.zoom),this.segments=new bi,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,p){this.features=[],this.hasPattern=Kh("fill-extrusion",this.layers,a);for(const{feature:x,id:T,index:I,sourceLayerIndex:O}of t){const N=this.layers[0]._featureFilter.needGeometry,Z=kc(x,N);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),Z,p))continue;const K={id:T,sourceLayerIndex:O,index:I,geometry:N?Z.geometry:Ws(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(Gd("fill-extrusion",this.layers,K,this.zoom,a)):this.addFeature(K,K.geometry,I,p,{}),a.featureIndex.insert(x,K.geometry,I,O,this.index,!0)}}addFeatures(t,a,p){for(const x of this.features){const{geometry:T}=x;this.addFeature(x,T,x.index,a,p)}}update(t,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,p)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Vu),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,F_.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,a,p,x,T){const I={x:0,y:0,vertexCount:0};for(const O of lp(a,500)){let N=0;for(const be of O)N+=be.length;let Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const be of O){if(0===be.length||((o=be).every(t=>t.x<0)||o.every(t=>t.x>zr)||o.every(t=>t.y<0)||o.every(t=>t.y>zr)))continue;let Be=0;for(let Ke=0;Ke<be.length;Ke++){const tt=be[Ke];if(Ke>=1){const _t=be[Ke-1];if(!_c(tt,_t)){Z.vertexLength+4>bi.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const st=tt.sub(_t)._perp()._unit(),St=_t.dist(tt);Be+St>32768&&(Be=0),Wd(this.layoutVertexArray,tt.x,tt.y,st.x,st.y,0,0,Be),Wd(this.layoutVertexArray,tt.x,tt.y,st.x,st.y,0,1,Be),I.x+=2*tt.x,I.y+=2*tt.y,I.vertexCount+=2,Be+=St,Wd(this.layoutVertexArray,_t.x,_t.y,st.x,st.y,0,0,Be),Wd(this.layoutVertexArray,_t.x,_t.y,st.x,st.y,0,1,Be),I.x+=2*_t.x,I.y+=2*_t.y,I.vertexCount+=2;const At=Z.vertexLength;this.indexArray.emplaceBack(At,At+2,At+1),this.indexArray.emplaceBack(At+1,At+2,At+3),Z.vertexLength+=4,Z.primitiveLength+=2}}}}if(Z.vertexLength+N>bi.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(N,this.layoutVertexArray,this.indexArray)),"Polygon"!==qf[t.type])continue;const K=[],te=[],le=Z.vertexLength;for(const be of O)if(0!==be.length){be!==O[0]&&te.push(K.length/2);for(let Be=0;Be<be.length;Be++){const Ke=be[Be];Wd(this.layoutVertexArray,Ke.x,Ke.y,0,0,1,1,0),I.x+=Ke.x,I.y+=Ke.y,I.vertexCount+=1,K.push(Ke.x),K.push(Ke.y)}}const me=qh(K,te);for(let be=0;be<me.length;be+=3)this.indexArray.emplaceBack(le+me[be],le+me[be+2],le+me[be+1]);Z.primitiveLength+=me.length/3,Z.vertexLength+=N}var o;for(let O=0;O<I.vertexCount;O++)this.centroidVertexArray.emplaceBack(Math.floor(I.x/I.vertexCount),Math.floor(I.y/I.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,p,T,x)}}function _c(o,t){return o.x===t.x&&(o.x<0||o.x>zr)||o.y===t.y&&(o.y<0||o.y>zr)}let mp;zi("FillExtrusionBucket",Gu,{omit:["layers","features"]});var Yf={get paint(){return mp=mp||new So({"fill-extrusion-opacity":new wt(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pi(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wt(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wt(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sl(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pi(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pi(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wt(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class pp extends To{constructor(t){super(t,Yf)}createBucket(t){return new Gu(t)}queryRadius(){return Uh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,a,p,x,T,I,O,N){const Z=jh(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,O),K=this.paint.get("fill-extrusion-height").evaluate(a,p),te=this.paint.get("fill-extrusion-base").evaluate(a,p),le=function(be,Be,Ke,tt){const _t=[];for(const st of be){const St=[st.x,st.y,0,1];Pu(St,St,Be),_t.push(new Pe(St[0]/St[3],St[1]/St[3]))}return _t}(Z,N),me=function(be,Be,Ke,tt){const _t=[],st=[],St=tt[8]*Be,At=tt[9]*Be,Jt=tt[10]*Be,Fi=tt[11]*Be,Li=tt[8]*Ke,Pi=tt[9]*Ke,Ci=tt[10]*Ke,xi=tt[11]*Ke;for(const Si of be){const Mi=[],ci=[];for(const Xi of Si){const Gi=Xi.x,Mn=Xi.y,Tr=tt[0]*Gi+tt[4]*Mn+tt[12],Rr=tt[1]*Gi+tt[5]*Mn+tt[13],po=tt[2]*Gi+tt[6]*Mn+tt[14],ga=tt[3]*Gi+tt[7]*Mn+tt[15],es=po+Jt,Xr=ga+Fi,ko=Tr+Li,ts=Rr+Pi,oa=po+Ci,Es=ga+xi,Eo=new Pe((Tr+St)/Xr,(Rr+At)/Xr);Eo.z=es/Xr,Mi.push(Eo);const Bo=new Pe(ko/Es,ts/Es);Bo.z=oa/Es,ci.push(Bo)}_t.push(Mi),st.push(ci)}return[_t,st]}(x,te,K,N);return function(be,Be,Ke){let tt=1/0;Su(Ke,Be)&&(tt=fp(Ke,Be[0]));for(let _t=0;_t<Be.length;_t++){const st=Be[_t],St=be[_t];for(let At=0;At<st.length-1;At++){const Jt=st[At],Fi=[Jt,st[At+1],St[At+1],St[At],Jt];Qm(Ke,Fi)&&(tt=Math.min(tt,fp(Ke,Fi)))}}return tt!==1/0&&tt}(me[0],me[1],le)}}function qd(o,t){return o.x*t.x+o.y*t.y}function fp(o,t){if(1===o.length){let a=0;const p=t[a++];let x;for(;!x||p.equals(x);)if(x=t[a++],!x)return 1/0;for(;a<t.length;a++){const T=t[a],I=o[0],O=x.sub(p),N=T.sub(p),Z=I.sub(p),K=qd(O,O),te=qd(O,N),le=qd(N,N),me=qd(Z,O),be=qd(Z,N),Be=K*le-te*te,Ke=(le*me-te*be)/Be,tt=(K*be-te*me)/Be,_t=p.z*(1-Ke-tt)+x.z*Ke+T.z*tt;if(isFinite(_t))return _t}return 1/0}{let a=1/0;for(const p of t)a=Math.min(a,p.z);return a}}const Cs=wo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:em}=Cs,gp=wo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:tm}=gp,qs=gc.VectorTileFeature.types,Yd=Math.cos(Math.PI/180*37.5),im=Math.pow(2,14)/.5;class Zu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new nt,this.layoutVertexArray2=new yt,this.indexArray=new ii,this.programConfigurations=new cl(t.layers,t.zoom),this.segments=new bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,p){this.hasPattern=Kh("line",this.layers,a);const x=this.layers[0].layout.get("line-sort-key"),T=!x.isConstant(),I=[];for(const{feature:O,id:N,index:Z,sourceLayerIndex:K}of t){const te=this.layers[0]._featureFilter.needGeometry,le=kc(O,te);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),le,p))continue;const me=T?x.evaluate(le,{},p):void 0,be={id:N,properties:O.properties,type:O.type,sourceLayerIndex:K,index:Z,geometry:te?le.geometry:Ws(O),patterns:{},sortKey:me};I.push(be)}T&&I.sort((O,N)=>O.sortKey-N.sortKey);for(const O of I){const{geometry:N,index:Z,sourceLayerIndex:K}=O;if(this.hasPattern){const te=Gd("line",this.layers,O,this.zoom,a);this.patternFeatures.push(te)}else this.addFeature(O,N,Z,p,{});a.featureIndex.insert(t[Z].feature,N,Z,K,this.index)}}update(t,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,p)}addFeatures(t,a,p){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,a,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,tm)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,em),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,a,p,x,T){const I=this.layers[0].layout,O=I.get("line-join").evaluate(t,{}),N=I.get("line-cap"),Z=I.get("line-miter-limit"),K=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const te of a)this.addLine(te,t,O,N,Z,K);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,p,T,x)}addLine(t,a,p,x,T,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let tt=0;tt<t.length-1;tt++)this.totalDistance+=t[tt].dist(t[tt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O="Polygon"===qs[a.type];let N=t.length;for(;N>=2&&t[N-1].equals(t[N-2]);)N--;let Z=0;for(;Z<N-1&&t[Z].equals(t[Z+1]);)Z++;if(N<(O?3:2))return;"bevel"===p&&(T=1.05);const K=this.overscaling<=16?15*zr/(512*this.overscaling):0,te=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let le,me,be,Be,Ke;this.e1=this.e2=-1,O&&(le=t[N-2],Ke=t[Z].sub(le)._unit()._perp());for(let tt=Z;tt<N;tt++){if(be=tt===N-1?O?t[Z+1]:void 0:t[tt+1],be&&t[tt].equals(be))continue;Ke&&(Be=Ke),le&&(me=le),le=t[tt],Ke=be?be.sub(le)._unit()._perp():Be,Be=Be||Ke;let _t=Be.add(Ke);0===_t.x&&0===_t.y||_t._unit();const st=Be.x*Ke.x+Be.y*Ke.y,St=_t.x*Ke.x+_t.y*Ke.y,At=0!==St?1/St:1/0,Jt=2*Math.sqrt(2-2*St),Fi=St<Yd&&me&&be,Li=Be.x*Ke.y-Be.y*Ke.x>0;if(Fi&&tt>Z){const xi=le.dist(me);if(xi>2*K){const Si=le.sub(le.sub(me)._mult(K/xi)._round());this.updateDistance(me,Si),this.addCurrentVertex(Si,Be,0,0,te),me=Si}}const Pi=me&&be;let Ci=Pi?p:O?"butt":x;if(Pi&&"round"===Ci&&(At<I?Ci="miter":At<=2&&(Ci="fakeround")),"miter"===Ci&&At>T&&(Ci="bevel"),"bevel"===Ci&&(At>2&&(Ci="flipbevel"),At<T&&(Ci="miter")),me&&this.updateDistance(me,le),"miter"===Ci)_t._mult(At),this.addCurrentVertex(le,_t,0,0,te);else if("flipbevel"===Ci){if(At>100)_t=Ke.mult(-1);else{const xi=At*Be.add(Ke).mag()/Be.sub(Ke).mag();_t._perp()._mult(xi*(Li?-1:1))}this.addCurrentVertex(le,_t,0,0,te),this.addCurrentVertex(le,_t.mult(-1),0,0,te)}else if("bevel"===Ci||"fakeround"===Ci){const xi=-Math.sqrt(At*At-1),Si=Li?xi:0,Mi=Li?0:xi;if(me&&this.addCurrentVertex(le,Be,Si,Mi,te),"fakeround"===Ci){const ci=Math.round(180*Jt/Math.PI/20);for(let Xi=1;Xi<ci;Xi++){let Gi=Xi/ci;if(.5!==Gi){const Tr=Gi-.5;Gi+=Gi*Tr*(Gi-1)*((1.0904+st*(st*(3.55645-1.43519*st)-3.2452))*Tr*Tr+(.848013+st*(.215638*st-1.06021)))}const Mn=Ke.sub(Be)._mult(Gi)._add(Be)._unit()._mult(Li?-1:1);this.addHalfVertex(le,Mn.x,Mn.y,!1,Li,0,te)}}be&&this.addCurrentVertex(le,Ke,-Si,-Mi,te)}else if("butt"===Ci)this.addCurrentVertex(le,_t,0,0,te);else if("square"===Ci){const xi=me?1:-1;this.addCurrentVertex(le,_t,xi,xi,te)}else"round"===Ci&&(me&&(this.addCurrentVertex(le,Be,0,0,te),this.addCurrentVertex(le,Be,1,1,te,!0)),be&&(this.addCurrentVertex(le,Ke,-1,-1,te,!0),this.addCurrentVertex(le,Ke,0,0,te)));if(Fi&&tt<N-1){const xi=le.dist(be);if(xi>2*K){const Si=le.add(be.sub(le)._mult(K/xi)._round());this.updateDistance(le,Si),this.addCurrentVertex(Si,Ke,0,0,te),le=Si}}}}addCurrentVertex(t,a,p,x,T,I=!1){const O=a.y*x-a.x,N=-a.y-a.x*x;this.addHalfVertex(t,a.x+a.y*p,a.y-a.x*p,I,!1,p,T),this.addHalfVertex(t,O,N,I,!0,-x,T),this.distance>im/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,a,p,x,T,I))}addHalfVertex({x:t,y:a},p,x,T,I,O,N){const Z=.5*(this.lineClips?this.scaledDistance*(im-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(T?1:0),(a<<1)+(I?1:0),Math.round(63*p)+128,Math.round(63*x)+128,1+(0===O?0:O<0?-1:1)|(63&Z)<<2,Z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const K=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,K),N.primitiveLength++),I?this.e2=K:this.e1=K}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,a){this.distance+=t.dist(a),this.updateScaledDistance()}}let _p,yc;zi("LineBucket",Zu,{omit:["layers","patternFeatures"]});var Kd={get paint(){return yc=yc||new So({"line-opacity":new pi(Me.paint_line["line-opacity"]),"line-color":new pi(Me.paint_line["line-color"]),"line-translate":new wt(Me.paint_line["line-translate"]),"line-translate-anchor":new wt(Me.paint_line["line-translate-anchor"]),"line-width":new pi(Me.paint_line["line-width"]),"line-gap-width":new pi(Me.paint_line["line-gap-width"]),"line-offset":new pi(Me.paint_line["line-offset"]),"line-blur":new pi(Me.paint_line["line-blur"]),"line-dasharray":new Hs(Me.paint_line["line-dasharray"]),"line-pattern":new sl(Me.paint_line["line-pattern"]),"line-gradient":new xo(Me.paint_line["line-gradient"])})},get layout(){return _p=_p||new So({"line-cap":new wt(Me.layout_line["line-cap"]),"line-join":new pi(Me.layout_line["line-join"]),"line-miter-limit":new wt(Me.layout_line["line-miter-limit"]),"line-round-limit":new wt(Me.layout_line["line-round-limit"]),"line-sort-key":new pi(Me.layout_line["line-sort-key"])})}};class yp extends pi{possiblyEvaluate(t,a){return a=new ir(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(t,a)}evaluate(t,a,p,x){return a=bt({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(t,a,p,x)}}let Wu;class vp extends To{constructor(t){super(t,Kd),this.gradientVersion=0,Wu||(Wu=new yp(Kd.paint.properties["line-width"].specification),Wu.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof rn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,a){super.recalculate(t,a),this.paint._values["line-floorwidth"]=Wu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Zu(t)}queryRadius(t){const a=t,p=Lc(Au("line-width",this,a),Au("line-gap-width",this,a)),x=Au("line-offset",this,a);return p/2+Math.abs(x)+Uh(this.paint.get("line-translate"))}queryIntersectsFeature(t,a,p,x,T,I,O){const N=jh(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,O),Z=O/2*Lc(this.paint.get("line-width").evaluate(a,p),this.paint.get("line-gap-width").evaluate(a,p)),K=this.paint.get("line-offset").evaluate(a,p);return K&&(x=function(te,le){const me=[];for(let be=0;be<te.length;be++){const Be=te[be],Ke=[];for(let tt=0;tt<Be.length;tt++){const _t=Be[tt-1],st=Be[tt],St=Be[tt+1],At=0===tt?new Pe(0,0):st.sub(_t)._unit()._perp(),Jt=tt===Be.length-1?new Pe(0,0):St.sub(st)._unit()._perp(),Fi=At._add(Jt)._unit(),Li=Fi.x*Jt.x+Fi.y*Jt.y;0!==Li&&Fi._mult(1/Li),Ke.push(Fi._mult(le)._add(st))}me.push(Ke)}return me}(x,K*O)),function(te,le,me){for(let be=0;be<le.length;be++){const Be=le[be];if(te.length>=3)for(let Ke=0;Ke<Be.length;Ke++)if(Nd(te,Be[Ke]))return!0;if(id(te,Be,me))return!0}return!1}(N,x,Z)}isTileClipped(){return!0}}function Lc(o,t){return t>0?t+2*o:o}const Xd=wo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nm=wo([{name:"a_projected_pos",components:3,type:"Float32"}],4);wo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rm=wo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);wo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bp=wo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Jd=wo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Kf(o,t,a){return o.sections.forEach(p=>{p.text=function(x,T,I){const O=T.layout.get("text-transform").evaluate(I,{});return"uppercase"===O?x=x.toLocaleUpperCase():"lowercase"===O&&(x=x.toLocaleLowerCase()),tr.applyArabicShaping&&(x=tr.applyArabicShaping(x)),x}(p.text,t,a)}),o}wo([{name:"triangle",components:3,type:"Uint16"}]),wo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wo([{type:"Float32",name:"offsetX"}]),wo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const vc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var zo=24,om=fr,sm=function(o,t,a,p,x){var T,I,O=8*x-p-1,N=(1<<O)-1,Z=N>>1,K=-7,te=a?x-1:0,le=a?-1:1,me=o[t+te];for(te+=le,T=me&(1<<-K)-1,me>>=-K,K+=O;K>0;T=256*T+o[t+te],te+=le,K-=8);for(I=T&(1<<-K)-1,T>>=-K,K+=p;K>0;I=256*I+o[t+te],te+=le,K-=8);if(0===T)T=1-Z;else{if(T===N)return I?NaN:1/0*(me?-1:1);I+=Math.pow(2,p),T-=Z}return(me?-1:1)*I*Math.pow(2,T-p)},Nc=function(o,t,a,p,x,T){var I,O,N,Z=8*T-x-1,K=(1<<Z)-1,te=K>>1,le=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,me=p?0:T-1,be=p?1:-1,Be=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(O=isNaN(t)?1:0,I=K):(I=Math.floor(Math.log(t)/Math.LN2),t*(N=Math.pow(2,-I))<1&&(I--,N*=2),(t+=I+te>=1?le/N:le*Math.pow(2,1-te))*N>=2&&(I++,N/=2),I+te>=K?(O=0,I=K):I+te>=1?(O=(t*N-1)*Math.pow(2,x),I+=te):(O=t*Math.pow(2,te-1)*Math.pow(2,x),I=0));x>=8;o[a+me]=255&O,me+=be,O/=256,x-=8);for(I=I<<x|O,Z+=x;Z>0;o[a+me]=255&I,me+=be,I/=256,Z-=8);o[a+me-be]|=128*Be};function fr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}fr.Varint=0,fr.Fixed64=1,fr.Bytes=2,fr.Fixed32=5;var qu=4294967296,Yu=1/qu,Qd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Fl(o){return o.type===fr.Bytes?o.readVarint()+o.pos:o.pos+1}function eu(o,t,a){var p=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));a.realloc(p);for(var x=a.pos-1;x>=o;x--)a.buf[x+p]=a.buf[x]}function Xf(o,t){for(var a=0;a<o.length;a++)t.writeVarint(o[a])}function Jf(o,t){for(var a=0;a<o.length;a++)t.writeSVarint(o[a])}function Qf(o,t){for(var a=0;a<o.length;a++)t.writeFloat(o[a])}function xp(o,t){for(var a=0;a<o.length;a++)t.writeDouble(o[a])}function am(o,t){for(var a=0;a<o.length;a++)t.writeBoolean(o[a])}function wp(o,t){for(var a=0;a<o.length;a++)t.writeFixed32(o[a])}function lm(o,t){for(var a=0;a<o.length;a++)t.writeSFixed32(o[a])}function eg(o,t){for(var a=0;a<o.length;a++)t.writeFixed64(o[a])}function tg(o,t){for(var a=0;a<o.length;a++)t.writeSFixed64(o[a])}function md(o,t){return(o[t]|o[t+1]<<8|o[t+2]<<16)+16777216*o[t+3]}function zc(o,t,a){o[a]=t,o[a+1]=t>>>8,o[a+2]=t>>>16,o[a+3]=t>>>24}function bc(o,t){return(o[t]|o[t+1]<<8|o[t+2]<<16)+(o[t+3]<<24)}fr.prototype={destroy:function(){this.buf=null},readFields:function(o,t,a){for(a=a||this.length;this.pos<a;){var p=this.readVarint(),x=p>>3,T=this.pos;this.type=7&p,o(x,t,this),this.pos===T&&this.skip(p)}return t},readMessage:function(o,t){return this.readFields(o,t,this.readVarint()+this.pos)},readFixed32:function(){var o=md(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=bc(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=md(this.buf,this.pos)+md(this.buf,this.pos+4)*qu;return this.pos+=8,o},readSFixed64:function(){var o=md(this.buf,this.pos)+bc(this.buf,this.pos+4)*qu;return this.pos+=8,o},readFloat:function(){var o=sm(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=sm(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var t,a,p=this.buf;return t=127&(a=p[this.pos++]),a<128?t:(t|=(127&(a=p[this.pos++]))<<7,a<128?t:(t|=(127&(a=p[this.pos++]))<<14,a<128?t:(t|=(127&(a=p[this.pos++]))<<21,a<128?t:function(x,T,I){var O,N,Z=I.buf;if(O=(112&(N=Z[I.pos++]))>>4,N<128||(O|=(127&(N=Z[I.pos++]))<<3,N<128)||(O|=(127&(N=Z[I.pos++]))<<10,N<128)||(O|=(127&(N=Z[I.pos++]))<<17,N<128)||(O|=(127&(N=Z[I.pos++]))<<24,N<128)||(O|=(1&(N=Z[I.pos++]))<<31,N<128))return function hd(o,t,a){return a?4294967296*t+(o>>>0):4294967296*(t>>>0)+(o>>>0)}(x,O,T);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(a=p[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,t=this.pos;return this.pos=o,o-t>=12&&Qd?Qd.decode(this.buf.subarray(t,o)):function(a,p,x){for(var T="",I=p;I<x;){var O,N,Z,K=a[I],te=null,le=K>239?4:K>223?3:K>191?2:1;if(I+le>x)break;1===le?K<128&&(te=K):2===le?128==(192&(O=a[I+1]))&&(te=(31&K)<<6|63&O)<=127&&(te=null):3===le?(N=a[I+2],128==(192&(O=a[I+1]))&&128==(192&N)&&((te=(15&K)<<12|(63&O)<<6|63&N)<=2047||te>=55296&&te<=57343)&&(te=null)):4===le&&(N=a[I+2],Z=a[I+3],128==(192&(O=a[I+1]))&&128==(192&N)&&128==(192&Z)&&((te=(15&K)<<18|(63&O)<<12|(63&N)<<6|63&Z)<=65535||te>=1114112)&&(te=null)),null===te?(te=65533,le=1):te>65535&&(te-=65536,T+=String.fromCharCode(te>>>10&1023|55296),te=56320|1023&te),T+=String.fromCharCode(te),I+=le}return T}(this.buf,t,o)},readBytes:function(){var o=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,o);return this.pos=o,t},readPackedVarint:function(o,t){if(this.type!==fr.Bytes)return o.push(this.readVarint(t));var a=Fl(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(t));return o},readPackedSVarint:function(o){if(this.type!==fr.Bytes)return o.push(this.readSVarint());var t=Fl(this);for(o=o||[];this.pos<t;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==fr.Bytes)return o.push(this.readBoolean());var t=Fl(this);for(o=o||[];this.pos<t;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==fr.Bytes)return o.push(this.readFloat());var t=Fl(this);for(o=o||[];this.pos<t;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==fr.Bytes)return o.push(this.readDouble());var t=Fl(this);for(o=o||[];this.pos<t;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==fr.Bytes)return o.push(this.readFixed32());var t=Fl(this);for(o=o||[];this.pos<t;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==fr.Bytes)return o.push(this.readSFixed32());var t=Fl(this);for(o=o||[];this.pos<t;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==fr.Bytes)return o.push(this.readFixed64());var t=Fl(this);for(o=o||[];this.pos<t;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==fr.Bytes)return o.push(this.readSFixed64());var t=Fl(this);for(o=o||[];this.pos<t;)o.push(this.readSFixed64());return o},skip:function(o){var t=7&o;if(t===fr.Varint)for(;this.buf[this.pos++]>127;);else if(t===fr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===fr.Fixed32)this.pos+=4;else{if(t!==fr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(o,t){this.writeVarint(o<<3|t)},realloc:function(o){for(var t=this.length||16;t<this.pos+o;)t*=2;if(t!==this.length){var a=new Uint8Array(t);a.set(this.buf),this.buf=a,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),zc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),zc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),zc(this.buf,-1&o,this.pos),zc(this.buf,Math.floor(o*Yu),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),zc(this.buf,-1&o,this.pos),zc(this.buf,Math.floor(o*Yu),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(t,a){var p,x,T,O;if(t>=0?(p=t%4294967296|0,x=t/4294967296|0):(x=~(-t/4294967296),4294967295^(p=~(-t%4294967296))?p=p+1|0:(p=0,x=x+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),T=p,(O=a).buf[O.pos++]=127&T|128,T>>>=7,O.buf[O.pos++]=127&T|128,T>>>=7,O.buf[O.pos++]=127&T|128,T>>>=7,O.buf[O.pos++]=127&T|128,O.buf[O.pos]=127&(T>>>=7),function(T,I){var O=(7&T)<<4;I.buf[I.pos++]|=O|((T>>>=3)?128:0),T&&(I.buf[I.pos++]=127&T|((T>>>=7)?128:0),T&&(I.buf[I.pos++]=127&T|((T>>>=7)?128:0),T&&(I.buf[I.pos++]=127&T|((T>>>=7)?128:0),T&&(I.buf[I.pos++]=127&T|((T>>>=7)?128:0),T&&(I.buf[I.pos++]=127&T)))))}(x,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var t=this.pos;this.pos=function(p,x,T){for(var I,O,N=0;N<x.length;N++){if((I=x.charCodeAt(N))>55295&&I<57344){if(!O){I>56319||N+1===x.length?(p[T++]=239,p[T++]=191,p[T++]=189):O=I;continue}if(I<56320){p[T++]=239,p[T++]=191,p[T++]=189,O=I;continue}I=O-55296<<10|I-56320|65536,O=null}else O&&(p[T++]=239,p[T++]=191,p[T++]=189,O=null);I<128?p[T++]=I:(I<2048?p[T++]=I>>6|192:(I<65536?p[T++]=I>>12|224:(p[T++]=I>>18|240,p[T++]=I>>12&63|128),p[T++]=I>>6&63|128),p[T++]=63&I|128)}return T}(this.buf,o,this.pos);var a=this.pos-t;a>=128&&eu(t,a,this),this.pos=t-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),Nc(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Nc(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var t=o.length;this.writeVarint(t),this.realloc(t);for(var a=0;a<t;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,t){this.pos++;var a=this.pos;o(t,this);var p=this.pos-a;p>=128&&eu(a,p,this),this.pos=a-1,this.writeVarint(p),this.pos+=p},writeMessage:function(o,t,a){this.writeTag(o,fr.Bytes),this.writeRawMessage(t,a)},writePackedVarint:function(o,t){t.length&&this.writeMessage(o,Xf,t)},writePackedSVarint:function(o,t){t.length&&this.writeMessage(o,Jf,t)},writePackedBoolean:function(o,t){t.length&&this.writeMessage(o,am,t)},writePackedFloat:function(o,t){t.length&&this.writeMessage(o,Qf,t)},writePackedDouble:function(o,t){t.length&&this.writeMessage(o,xp,t)},writePackedFixed32:function(o,t){t.length&&this.writeMessage(o,wp,t)},writePackedSFixed32:function(o,t){t.length&&this.writeMessage(o,lm,t)},writePackedFixed64:function(o,t){t.length&&this.writeMessage(o,eg,t)},writePackedSFixed64:function(o,t){t.length&&this.writeMessage(o,tg,t)},writeBytesField:function(o,t){this.writeTag(o,fr.Bytes),this.writeBytes(t)},writeFixed32Field:function(o,t){this.writeTag(o,fr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(o,t){this.writeTag(o,fr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(o,t){this.writeTag(o,fr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(o,t){this.writeTag(o,fr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(o,t){this.writeTag(o,fr.Varint),this.writeVarint(t)},writeSVarintField:function(o,t){this.writeTag(o,fr.Varint),this.writeSVarint(t)},writeStringField:function(o,t){this.writeTag(o,fr.Bytes),this.writeString(t)},writeFloatField:function(o,t){this.writeTag(o,fr.Fixed32),this.writeFloat(t)},writeDoubleField:function(o,t){this.writeTag(o,fr.Fixed64),this.writeDouble(t)},writeBooleanField:function(o,t){this.writeVarintField(o,!!t)}};var Ku=He(om);const Xu=3;function ig(o,t,a){1===o&&a.readMessage(L_,t)}function L_(o,t,a){if(3===o){const{id:p,bitmap:x,width:T,height:I,left:O,top:N,advance:Z}=a.readMessage(Ju,{});t.push({id:p,bitmap:new Ru({width:T+2*Xu,height:I+2*Xu},x),metrics:{width:T,height:I,left:O,top:N,advance:Z}})}}function Ju(o,t,a){1===o?t.id=a.readVarint():2===o?t.bitmap=a.readBytes():3===o?t.width=a.readVarint():4===o?t.height=a.readVarint():5===o?t.left=a.readSVarint():6===o?t.top=a.readSVarint():7===o&&(t.advance=a.readVarint())}const cm=Xu;function tu(o){let t=0,a=0;for(const I of o)t+=I.w*I.h,a=Math.max(a,I.w);o.sort((I,O)=>O.h-I.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),a),h:1/0}];let x=0,T=0;for(const I of o)for(let O=p.length-1;O>=0;O--){const N=p[O];if(!(I.w>N.w||I.h>N.h)){if(I.x=N.x,I.y=N.y,T=Math.max(T,I.y+I.h),x=Math.max(x,I.x+I.w),I.w===N.w&&I.h===N.h){const Z=p.pop();O<p.length&&(p[O]=Z)}else I.h===N.h?(N.x+=I.w,N.w-=I.w):I.w===N.w?(N.y+=I.h,N.h-=I.h):(p.push({x:N.x+I.w,y:N.y,w:N.w-I.w,h:I.h}),N.y+=I.h,N.h-=I.h);break}}return{w:x,h:T,fill:t/(x*T)||0}}const Ys=1;class Qu{constructor(t,{pixelRatio:a,version:p,stretchX:x,stretchY:T,content:I}){this.paddedRect=t,this.pixelRatio=a,this.stretchX=x,this.stretchY=T,this.content=I,this.version=p}get tl(){return[this.paddedRect.x+Ys,this.paddedRect.y+Ys]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ys,this.paddedRect.y+this.paddedRect.h-Ys]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ys)/this.pixelRatio,(this.paddedRect.h-2*Ys)/this.pixelRatio]}}class eh{constructor(t,a){const p={},x={};this.haveRenderCallbacks=[];const T=[];this.addImages(t,p,T),this.addImages(a,x,T);const{w:I,h:O}=tu(T),N=new ao({width:I||1,height:O||1});for(const Z in t){const K=t[Z],te=p[Z].paddedRect;ao.copy(K.data,N,{x:0,y:0},{x:te.x+Ys,y:te.y+Ys},K.data)}for(const Z in a){const K=a[Z],te=x[Z].paddedRect,le=te.x+Ys,me=te.y+Ys,be=K.data.width,Be=K.data.height;ao.copy(K.data,N,{x:0,y:0},{x:le,y:me},K.data),ao.copy(K.data,N,{x:0,y:Be-1},{x:le,y:me-1},{width:be,height:1}),ao.copy(K.data,N,{x:0,y:0},{x:le,y:me+Be},{width:be,height:1}),ao.copy(K.data,N,{x:be-1,y:0},{x:le-1,y:me},{width:1,height:Be}),ao.copy(K.data,N,{x:0,y:0},{x:le+be,y:me},{width:1,height:Be})}this.image=N,this.iconPositions=p,this.patternPositions=x}addImages(t,a,p){for(const x in t){const T=t[x],I={x:0,y:0,w:T.data.width+2*Ys,h:T.data.height+2*Ys};p.push(I),a[x]=new Qu(I,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(t,a){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in t.updatedImages)this.patchUpdatedImage(this.iconPositions[p],t.getImage(p),a),this.patchUpdatedImage(this.patternPositions[p],t.getImage(p),a)}patchUpdatedImage(t,a,p){if(!t||!a||t.version===a.version)return;t.version=a.version;const[x,T]=t.tl;p.update(a.data,void 0,{x,y:T})}}var Ll;zi("ImagePosition",Qu),zi("ImageAtlas",eh),v.WritingMode=void 0,(Ll=v.WritingMode||(v.WritingMode={}))[Ll.none=0]="none",Ll[Ll.horizontal=1]="horizontal",Ll[Ll.vertical=2]="vertical",Ll[Ll.horizontalOnly=3]="horizontalOnly";const xc=-17;class Nl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,a){const p=new Nl;return p.scale=t||1,p.fontStack=a,p}static forImage(t){const a=new Nl;return a.imageName=t,a}}class Bc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,a){const p=new Bc;for(let x=0;x<t.sections.length;x++){const T=t.sections[x];T.image?p.addImageSection(T):p.addTextSection(T,a)}return p}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let a="";for(let p=0;p<t.length;p++){const x=t.charCodeAt(p+1)||null,T=t.charCodeAt(p-1)||null;a+=x&&Ye(x)&&!vc[t[p+1]]||T&&Ye(T)&&!vc[t[p-1]]||!vc[t[p]]?t[p]:vc[t[p]]}return a}(this.text)}trim(){let t=0;for(let p=0;p<this.text.length&&Vc[this.text.charCodeAt(p)];p++)t++;let a=this.text.length;for(let p=this.text.length-1;p>=0&&p>=t&&Vc[this.text.charCodeAt(p)];p--)a--;this.text=this.text.substring(t,a),this.sectionIndex=this.sectionIndex.slice(t,a)}substring(t,a){const p=new Bc;return p.text=this.text.substring(t,a),p.sectionIndex=this.sectionIndex.slice(t,a),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,a)=>Math.max(t,this.sections[a].scale),0)}addTextSection(t,a){this.text+=t.text,this.sections.push(Nl.forText(t.scale,t.fontStack||a));const p=this.sections.length-1;for(let x=0;x<t.text.length;++x)this.sectionIndex.push(p)}addImageSection(t){const a=t.image?t.image.name:"";if(0===a.length)return void je("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Nl.forImage(a)),this.sectionIndex.push(this.sections.length-1)):je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pd(o,t,a,p,x,T,I,O,N,Z,K,te,le,me,be,Be){const Ke=Bc.fromFeature(o,x);let tt;te===v.WritingMode.vertical&&Ke.verticalizePunctuation();const{processBidirectionalText:_t,processStyledBidirectionalText:st}=tr;if(_t&&1===Ke.sections.length){tt=[];const Jt=_t(Ke.toString(),hm(Ke,Z,T,t,p,me,be));for(const Fi of Jt){const Li=new Bc;Li.text=Fi,Li.sections=Ke.sections;for(let Pi=0;Pi<Fi.length;Pi++)Li.sectionIndex.push(0);tt.push(Li)}}else if(st){tt=[];const Jt=st(Ke.text,Ke.sectionIndex,hm(Ke,Z,T,t,p,me,be));for(const Fi of Jt){const Li=new Bc;Li.text=Fi[0],Li.sectionIndex=Fi[1],Li.sections=Ke.sections,tt.push(Li)}}else tt=function(Jt,Fi){const Li=[],Pi=Jt.text;let Ci=0;for(const xi of Fi)Li.push(Jt.substring(Ci,xi)),Ci=xi;return Ci<Pi.length&&Li.push(Jt.substring(Ci,Pi.length)),Li}(Ke,hm(Ke,Z,T,t,p,me,be));const St=[],At={positionedLines:St,text:Ke.toString(),top:K[1],bottom:K[1],left:K[0],right:K[0],writingMode:te,iconsInText:!1,verticalizable:!1};return function(Jt,Fi,Li,Pi,Ci,xi,Si,Mi,ci,Xi,Gi,Mn){let Tr=0,Rr=xc,po=0,ga=0;const es="right"===Mi?1:"left"===Mi?0:.5;let Xr=0;for(const Eo of Ci){Eo.trim();const Bo=Eo.getMaxScale(),Ms=(Bo-1)*zo,sa={positionedGlyphs:[],lineOffset:0};Jt.positionedLines[Xr]=sa;const aa=sa.positionedGlyphs;let hs=0;if(!Eo.length()){Rr+=xi,++Xr;continue}for(let ms=0;ms<Eo.length();ms++){const Rn=Eo.getSection(ms),Ks=Eo.getSectionIndex(ms),Vo=Eo.getCharCode(ms);let Ds=0,Oa=null,ul=null,Ya=null,Dc=zo;const Ka=!(ci===v.WritingMode.horizontal||!Gi&&!fe(Vo)||Gi&&(Vc[Vo]||(ko=Vo,mi.Arabic(ko)||mi["Arabic Supplement"](ko)||mi["Arabic Extended-A"](ko)||mi["Arabic Presentation Forms-A"](ko)||mi["Arabic Presentation Forms-B"](ko))));if(Rn.imageName){const Ss=Pi[Rn.imageName];if(!Ss)continue;Ya=Rn.imageName,Jt.iconsInText=Jt.iconsInText||!0,ul=Ss.paddedRect;const Ts=Ss.displaySize;Rn.scale=Rn.scale*zo/Mn,Oa={width:Ts[0],height:Ts[1],left:Ys,top:-cm,advance:Ka?Ts[1]:Ts[0]},Ds=Ms+(zo-Ts[1]*Rn.scale),Dc=Oa.advance;const _a=Ka?Ts[0]*Rn.scale-zo*Bo:Ts[1]*Rn.scale-zo*Bo;_a>0&&_a>hs&&(hs=_a)}else{const Ss=Li[Rn.fontStack],Ts=Ss&&Ss[Vo];if(Ts&&Ts.rect)ul=Ts.rect,Oa=Ts.metrics;else{const _a=Fi[Rn.fontStack],nc=_a&&_a[Vo];if(!nc)continue;Oa=nc.metrics}Ds=(Bo-Rn.scale)*zo}Ka?(Jt.verticalizable=!0,aa.push({glyph:Vo,imageName:Ya,x:Tr,y:Rr+Ds,vertical:Ka,scale:Rn.scale,fontStack:Rn.fontStack,sectionIndex:Ks,metrics:Oa,rect:ul}),Tr+=Dc*Rn.scale+Xi):(aa.push({glyph:Vo,imageName:Ya,x:Tr,y:Rr+Ds,vertical:Ka,scale:Rn.scale,fontStack:Rn.fontStack,sectionIndex:Ks,metrics:Oa,rect:ul}),Tr+=Oa.advance*Rn.scale+Xi)}0!==aa.length&&(po=Math.max(Tr-Xi,po),Ep(aa,0,aa.length-1,es,hs)),Tr=0;const Jr=xi*Bo+hs;sa.lineOffset=Math.max(hs,Ms),Rr+=Jr,ga=Math.max(Jr,ga),++Xr}var ko;const ts=Rr-xc,{horizontalAlign:oa,verticalAlign:Es}=iu(Si);(function(Eo,Bo,Ms,sa,aa,hs,Jr,ms,Rn){const Ks=(Bo-Ms)*aa;let Vo=0;Vo=hs!==Jr?-ms*sa-xc:(-sa*Rn+.5)*Jr;for(const Ds of Eo)for(const Oa of Ds.positionedGlyphs)Oa.x+=Ks,Oa.y+=Vo})(Jt.positionedLines,es,oa,Es,po,ga,xi,ts,Ci.length),Jt.top+=-Es*ts,Jt.bottom=Jt.top+ts,Jt.left+=-oa*po,Jt.right=Jt.left+po}(At,t,a,p,tt,I,O,N,te,Z,le,Be),!function(Jt){for(const Fi of Jt)if(0!==Fi.positionedGlyphs.length)return!1;return!0}(St)&&At}const Vc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},dm={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function th(o,t,a,p,x,T){if(t.imageName){const I=p[t.imageName];return I?I.displaySize[0]*t.scale*zo/T+x:0}{const I=a[t.fontStack],O=I&&I[o];return O?O.metrics.advance*t.scale+x:0}}function fd(o,t,a,p){const x=Math.pow(o-t,2);return p?o<t?x/2:2*x:x+Math.abs(a)*a}function Cp(o,t,a){let p=0;return 10===o&&(p-=1e4),a&&(p+=150),40!==o&&65288!==o||(p+=50),41!==t&&65289!==t||(p+=50),p}function um(o,t,a,p,x,T){let I=null,O=fd(t,a,x,T);for(const N of p){const Z=fd(t-N.x,a,x,T)+N.badness;Z<=O&&(I=N,O=Z)}return{index:o,x:t,priorBreak:I,badness:O}}function ih(o){return o?ih(o.priorBreak).concat(o.index):[]}function hm(o,t,a,p,x,T,I){if("point"!==T)return[];if(!o)return[];const O=[],N=function(le,me,be,Be,Ke,tt){let _t=0;for(let st=0;st<le.length();st++){const St=le.getSection(st);_t+=th(le.getCharCode(st),St,Be,Ke,me,tt)}return _t/Math.max(1,Math.ceil(_t/be))}(o,t,a,p,x,I),Z=o.text.indexOf("\u200b")>=0;let K=0;for(let le=0;le<o.length();le++){const me=o.getSection(le),be=o.getCharCode(le);if(Vc[be]||(K+=th(be,me,p,x,t,I)),le<o.length()-1){const Be=!((te=be)<11904||!(mi["Bopomofo Extended"](te)||mi.Bopomofo(te)||mi["CJK Compatibility Forms"](te)||mi["CJK Compatibility Ideographs"](te)||mi["CJK Compatibility"](te)||mi["CJK Radicals Supplement"](te)||mi["CJK Strokes"](te)||mi["CJK Symbols and Punctuation"](te)||mi["CJK Unified Ideographs Extension A"](te)||mi["CJK Unified Ideographs"](te)||mi["Enclosed CJK Letters and Months"](te)||mi["Halfwidth and Fullwidth Forms"](te)||mi.Hiragana(te)||mi["Ideographic Description Characters"](te)||mi["Kangxi Radicals"](te)||mi["Katakana Phonetic Extensions"](te)||mi.Katakana(te)||mi["Vertical Forms"](te)||mi["Yi Radicals"](te)||mi["Yi Syllables"](te)));(dm[be]||Be||me.imageName)&&O.push(um(le+1,K,N,O,Cp(be,o.getCharCode(le+1),Be&&Z),!1))}}var te;return ih(um(o.length(),K,N,O,0,!0))}function iu(o){let t=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:t,verticalAlign:a}}function Ep(o,t,a,p,x){if(!p&&!x)return;const T=o[a],I=(o[a].x+T.metrics.advance*T.scale)*p;for(let O=t;O<=a;O++)o[O].x-=I,o[O].y+=x}function Mp(o,t,a){const{horizontalAlign:p,verticalAlign:x}=iu(a),T=t[0]-o.displaySize[0]*p,I=t[1]-o.displaySize[1]*x;return{image:o,top:I,bottom:I+o.displaySize[1],left:T,right:T+o.displaySize[0]}}function nu(o,t,a,p,x,T){const I=o.image;let O;if(I.content){const Ke=I.content,tt=I.pixelRatio||1;O=[Ke[0]/tt,Ke[1]/tt,I.displaySize[0]-Ke[2]/tt,I.displaySize[1]-Ke[3]/tt]}const N=t.left*T,Z=t.right*T;let K,te,le,me;"width"===a||"both"===a?(me=x[0]+N-p[3],te=x[0]+Z+p[1]):(me=x[0]+(N+Z-I.displaySize[0])/2,te=me+I.displaySize[0]);const be=t.top*T,Be=t.bottom*T;return"height"===a||"both"===a?(K=x[1]+be-p[0],le=x[1]+Be+p[2]):(K=x[1]+(be+Be-I.displaySize[1])/2,le=K+I.displaySize[1]),{image:I,top:K,right:te,bottom:le,left:me,collisionPadding:O}}const Uc=255,na=128,wc=Uc*na;function nh(o,t){const{expression:a}=t;if("constant"===a.kind)return{kind:"constant",layoutSize:a.evaluate(new ir(o+1))};if("source"===a.kind)return{kind:"source"};{const{zoomStops:p,interpolationType:x}=a;let T=0;for(;T<p.length&&p[T]<=o;)T++;T=Math.max(0,T-1);let I=T;for(;I<p.length&&p[I]<o+1;)I++;I=Math.min(p.length-1,I);const O=p[T],N=p[I];return"composite"===a.kind?{kind:"composite",minZoom:O,maxZoom:N,interpolationType:x}:{kind:"camera",minZoom:O,maxZoom:N,minSize:a.evaluate(new ir(O)),maxSize:a.evaluate(new ir(N)),interpolationType:x}}}function Dp(o,t,a){let p="never";const x=o.get(t);return x?p=x:o.get(a)&&(p="always"),p}const mm=gc.VectorTileFeature.types,pm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function gd(o,t,a,p,x,T,I,O,N,Z,K,te,le){const me=O?Math.min(wc,Math.round(O[0])):0,be=O?Math.min(wc,Math.round(O[1])):0;o.emplaceBack(t,a,Math.round(32*p),Math.round(32*x),T,I,(me<<1)+(N?1:0),be,16*Z,16*K,256*te,256*le)}function jc(o,t,a){o.emplaceBack(t.x,t.y,a),o.emplaceBack(t.x,t.y,a),o.emplaceBack(t.x,t.y,a),o.emplaceBack(t.x,t.y,a)}function _d(o){for(const t of o.sections)if(Wi(t.text))return!0;return!1}class yd{constructor(t){this.layoutVertexArray=new gt,this.indexArray=new ii,this.programConfigurations=t,this.segments=new bi,this.dynamicLayoutVertexArray=new kt,this.opacityVertexArray=new Lt,this.hasVisibleVertices=!1,this.placedSymbolArray=new f}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,a,p,x){this.isEmpty()||(p&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xd.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,nm.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,pm,!0),this.opacityVertexBuffer.itemSize=1),(p||x)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}zi("SymbolBuffers",yd);class rh{constructor(t,a,p){this.layoutVertexArray=new t,this.layoutAttributes=a,this.indexArray=new p,this.segments=new bi,this.collisionVertexArray=new ri}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,rm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}zi("CollisionBuffers",rh);class Cc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(I=>I.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ku([]),this.placementViewportMatrix=ku([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nh(this.zoom,a["text-size"]),this.iconSizeData=nh(this.zoom,a["icon-size"]);const p=this.layers[0].layout,x=p.get("symbol-sort-key"),T=p.get("symbol-z-order");this.canOverlap="never"!==Dp(p,"text-overlap","text-allow-overlap")||"never"!==Dp(p,"icon-overlap","icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==T&&!x.isConstant(),this.sortFeaturesByY=("viewport-y"===T||"auto"===T&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===p.get("symbol-placement")&&(this.writingModes=p.get("text-writing-mode").map(I=>v.WritingMode[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=t.sourceID}createArrays(){this.text=new yd(new cl(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new yd(new cl(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new D,this.lineVertexArray=new k,this.symbolInstances=new y}calculateGlyphDependencies(t,a,p,x,T){for(let I=0;I<t.length;I++)if(a[t.charCodeAt(I)]=!0,(p||x)&&T){const O=vc[t.charAt(I)];O&&(a[O.charCodeAt(0)]=!0)}}populate(t,a,p){const x=this.layers[0],T=x.layout,I=T.get("text-font"),O=T.get("text-field"),N=T.get("icon-image"),Z=("constant"!==O.value.kind||O.value.value instanceof nn&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&("constant"!==I.value.kind||I.value.value.length>0),K="constant"!==N.value.kind||!!N.value.value||Object.keys(N.parameters).length>0,te=T.get("symbol-sort-key");if(this.features=[],!Z&&!K)return;const le=a.iconDependencies,me=a.glyphDependencies,be=a.availableImages,Be=new ir(this.zoom);for(const{feature:Ke,id:tt,index:_t,sourceLayerIndex:st}of t){const St=x._featureFilter.needGeometry,At=kc(Ke,St);if(!x._featureFilter.filter(Be,At,p))continue;let Jt,Fi;if(St||(At.geometry=Ws(Ke)),Z){const Pi=x.getValueAndResolveTokens("text-field",At,p,be),Ci=nn.factory(Pi);_d(Ci)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===vs()||this.hasRTLText&&tr.isParsed())&&(Jt=Kf(Ci,x,At))}if(K){const Pi=x.getValueAndResolveTokens("icon-image",At,p,be);Fi=Pi instanceof $n?Pi:$n.fromString(Pi)}if(!Jt&&!Fi)continue;const Li=this.sortFeaturesByKey?te.evaluate(At,{},p):void 0;if(this.features.push({id:tt,text:Jt,icon:Fi,index:_t,sourceLayerIndex:st,geometry:At.geometry,properties:Ke.properties,type:mm[Ke.type],sortKey:Li}),Fi&&(le[Fi.name]=!0),Jt){const Pi=I.evaluate(At,{},p).join(","),Ci="viewport"!==T.get("text-rotation-alignment")&&"point"!==T.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.WritingMode.vertical)>=0;for(const xi of Jt.sections)if(xi.image)le[xi.image.name]=!0;else{const Si=F(Jt.toString()),Mi=xi.fontStack||Pi,ci=me[Mi]=me[Mi]||{};this.calculateGlyphDependencies(xi.text,ci,Ci,this.allowVerticalPlacement,Si)}}}"line"===T.get("symbol-placement")&&(this.features=function(Ke){const tt={},_t={},st=[];let St=0;function At(Pi){st.push(Ke[Pi]),St++}function Jt(Pi,Ci,xi){const Si=_t[Pi];return delete _t[Pi],_t[Ci]=Si,st[Si].geometry[0].pop(),st[Si].geometry[0]=st[Si].geometry[0].concat(xi[0]),Si}function Fi(Pi,Ci,xi){const Si=tt[Ci];return delete tt[Ci],tt[Pi]=Si,st[Si].geometry[0].shift(),st[Si].geometry[0]=xi[0].concat(st[Si].geometry[0]),Si}function Li(Pi,Ci,xi){const Si=xi?Ci[0][Ci[0].length-1]:Ci[0][0];return`${Pi}:${Si.x}:${Si.y}`}for(let Pi=0;Pi<Ke.length;Pi++){const Ci=Ke[Pi],xi=Ci.geometry,Si=Ci.text?Ci.text.toString():null;if(!Si){At(Pi);continue}const Mi=Li(Si,xi),ci=Li(Si,xi,!0);if(Mi in _t&&ci in tt&&_t[Mi]!==tt[ci]){const Xi=Fi(Mi,ci,xi),Gi=Jt(Mi,ci,st[Xi].geometry);delete tt[Mi],delete _t[ci],_t[Li(Si,st[Gi].geometry,!0)]=Gi,st[Xi].geometry=null}else Mi in _t?Jt(Mi,ci,xi):ci in tt?Fi(Mi,ci,xi):(At(Pi),tt[Mi]=St-1,_t[ci]=St-1)}return st.filter(Pi=>Pi.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ke,tt)=>Ke.sortKey-tt.sortKey)}update(t,a,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,a,this.layers,p),this.icon.programConfigurations.updatePaintArrays(t,a,this.layers,p))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,a){const p=this.lineVertexArray.length;if(void 0!==t.segment){let x=t.dist(a[t.segment+1]),T=t.dist(a[t.segment]);const I={};for(let O=t.segment+1;O<a.length;O++)I[O]={x:a[O].x,y:a[O].y,tileUnitDistanceFromAnchor:x},O<a.length-1&&(x+=a[O+1].dist(a[O]));for(let O=t.segment||0;O>=0;O--)I[O]={x:a[O].x,y:a[O].y,tileUnitDistanceFromAnchor:T},O>0&&(T+=a[O-1].dist(a[O]));for(let O=0;O<a.length;O++){const N=I[O];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(t,a,p,x,T,I,O,N,Z,K,te,le){const me=t.indexArray,be=t.layoutVertexArray,Be=t.segments.prepareSegment(4*a.length,be,me,this.canOverlap?I.sortKey:void 0),Ke=this.glyphOffsetArray.length,tt=Be.vertexLength,_t=this.allowVerticalPlacement&&O===v.WritingMode.vertical?Math.PI/2:0,st=I.text&&I.text.sections;for(let St=0;St<a.length;St++){const{tl:At,tr:Jt,bl:Fi,br:Li,tex:Pi,pixelOffsetTL:Ci,pixelOffsetBR:xi,minFontScaleX:Si,minFontScaleY:Mi,glyphOffset:ci,isSDF:Xi,sectionIndex:Gi}=a[St],Mn=Be.vertexLength,Tr=ci[1];gd(be,N.x,N.y,At.x,Tr+At.y,Pi.x,Pi.y,p,Xi,Ci.x,Ci.y,Si,Mi),gd(be,N.x,N.y,Jt.x,Tr+Jt.y,Pi.x+Pi.w,Pi.y,p,Xi,xi.x,Ci.y,Si,Mi),gd(be,N.x,N.y,Fi.x,Tr+Fi.y,Pi.x,Pi.y+Pi.h,p,Xi,Ci.x,xi.y,Si,Mi),gd(be,N.x,N.y,Li.x,Tr+Li.y,Pi.x+Pi.w,Pi.y+Pi.h,p,Xi,xi.x,xi.y,Si,Mi),jc(t.dynamicLayoutVertexArray,N,_t),me.emplaceBack(Mn,Mn+1,Mn+2),me.emplaceBack(Mn+1,Mn+2,Mn+3),Be.vertexLength+=4,Be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ci[0]),St!==a.length-1&&Gi===a[St+1].sectionIndex||t.programConfigurations.populatePaintArrays(be.length,I,I.index,{},le,st&&st[Gi])}t.placedSymbolArray.emplaceBack(N.x,N.y,Ke,this.glyphOffsetArray.length-Ke,tt,Z,K,N.segment,p?p[0]:0,p?p[1]:0,x[0],x[1],O,0,!1,0,te)}_addCollisionDebugVertex(t,a,p,x,T,I){return a.emplaceBack(0,0),t.emplaceBack(p.x,p.y,x,T,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(t,a,p,x,T,I,O){const N=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),Z=N.vertexLength,K=T.layoutVertexArray,te=T.collisionVertexArray,le=O.anchorX,me=O.anchorY;this._addCollisionDebugVertex(K,te,I,le,me,new Pe(t,a)),this._addCollisionDebugVertex(K,te,I,le,me,new Pe(p,a)),this._addCollisionDebugVertex(K,te,I,le,me,new Pe(p,x)),this._addCollisionDebugVertex(K,te,I,le,me,new Pe(t,x)),N.vertexLength+=4;const be=T.indexArray;be.emplaceBack(Z,Z+1),be.emplaceBack(Z+1,Z+2),be.emplaceBack(Z+2,Z+3),be.emplaceBack(Z+3,Z),N.primitiveLength+=4}addDebugCollisionBoxes(t,a,p,x){for(let T=t;T<a;T++){const I=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,x?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rh(Zt,bp.members,Ei),this.iconCollisionBox=new rh(Zt,bp.members,Ei);for(let t=0;t<this.symbolInstances.length;t++){const a=this.symbolInstances.get(t);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(t,a,p,x,T,I,O,N,Z){const K={};for(let te=a;te<p;te++){const le=t.get(te);K.textBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},K.textFeatureIndex=le.featureIndex;break}for(let te=x;te<T;te++){const le=t.get(te);K.verticalTextBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},K.verticalTextFeatureIndex=le.featureIndex;break}for(let te=I;te<O;te++){const le=t.get(te);K.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},K.iconFeatureIndex=le.featureIndex;break}for(let te=N;te<Z;te++){const le=t.get(te);K.verticalIconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},K.verticalIconFeatureIndex=le.featureIndex;break}return K}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const p=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,a){const p=t.placedSymbolArray.get(a),x=p.vertexStartIndex+4*p.numGlyphs;for(let T=p.vertexStartIndex;T<x;T+=4)t.indexArray.emplaceBack(T,T+1,T+2),t.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const a=Math.sin(t),p=Math.cos(t),x=[],T=[],I=[];for(let O=0;O<this.symbolInstances.length;++O){I.push(O);const N=this.symbolInstances.get(O);x.push(0|Math.round(a*N.anchorX+p*N.anchorY)),T.push(N.featureIndex)}return I.sort((O,N)=>x[O]-x[N]||T[N]-T[O]),I}addToSortKeyRanges(t,a){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===a?p.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const p=this.symbolInstances.get(a);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((x,T,I)=>{x>=0&&I.indexOf(x)===T&&this.addIndicesForPlacedSymbol(this.text,x)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let oh,ec;zi("SymbolBucket",Cc,{omit:["layers","collisionBoxArray","features","compareText"]}),Cc.MAX_GLYPHS=65535,Cc.addDynamicAttributes=jc;var sh={get paint(){return ec=ec||new So({"icon-opacity":new pi(Me.paint_symbol["icon-opacity"]),"icon-color":new pi(Me.paint_symbol["icon-color"]),"icon-halo-color":new pi(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new pi(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pi(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new wt(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new wt(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new pi(Me.paint_symbol["text-opacity"]),"text-color":new pi(Me.paint_symbol["text-color"],{runtimeType:xt,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new pi(Me.paint_symbol["text-halo-color"]),"text-halo-width":new pi(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new pi(Me.paint_symbol["text-halo-blur"]),"text-translate":new wt(Me.paint_symbol["text-translate"]),"text-translate-anchor":new wt(Me.paint_symbol["text-translate-anchor"])})},get layout(){return oh=oh||new So({"symbol-placement":new wt(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new wt(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wt(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pi(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wt(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wt(Me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new wt(Me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new wt(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new wt(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wt(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new pi(Me.layout_symbol["icon-size"]),"icon-text-fit":new wt(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wt(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new pi(Me.layout_symbol["icon-image"]),"icon-rotate":new pi(Me.layout_symbol["icon-rotate"]),"icon-padding":new pi(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new wt(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new pi(Me.layout_symbol["icon-offset"]),"icon-anchor":new pi(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wt(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wt(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wt(Me.layout_symbol["text-rotation-alignment"]),"text-field":new pi(Me.layout_symbol["text-field"]),"text-font":new pi(Me.layout_symbol["text-font"]),"text-size":new pi(Me.layout_symbol["text-size"]),"text-max-width":new pi(Me.layout_symbol["text-max-width"]),"text-line-height":new wt(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new pi(Me.layout_symbol["text-letter-spacing"]),"text-justify":new pi(Me.layout_symbol["text-justify"]),"text-radial-offset":new pi(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wt(Me.layout_symbol["text-variable-anchor"]),"text-anchor":new pi(Me.layout_symbol["text-anchor"]),"text-max-angle":new wt(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new wt(Me.layout_symbol["text-writing-mode"]),"text-rotate":new pi(Me.layout_symbol["text-rotate"]),"text-padding":new wt(Me.layout_symbol["text-padding"]),"text-keep-upright":new wt(Me.layout_symbol["text-keep-upright"]),"text-transform":new pi(Me.layout_symbol["text-transform"]),"text-offset":new pi(Me.layout_symbol["text-offset"]),"text-allow-overlap":new wt(Me.layout_symbol["text-allow-overlap"]),"text-overlap":new wt(Me.layout_symbol["text-overlap"]),"text-ignore-placement":new wt(Me.layout_symbol["text-ignore-placement"]),"text-optional":new wt(Me.layout_symbol["text-optional"])})}};class Sp{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ke,this.defaultValue=t}evaluate(t){if(t.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(t.formattedSection))return a.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zi("FormatSectionOverride",Sp,{omit:["defaultValue"]});class ah extends To{constructor(t){super(t,sh)}recalculate(t,a){if(super.recalculate(t,a),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const p=this.layout.get("text-writing-mode");if(p){const x=[];for(const T of p)x.indexOf(T)<0&&x.push(T);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,a,p,x){const T=this.layout.get(t).evaluate(a,{},p,x),I=this._unevaluatedLayout._values[t];return I.isDataDriven()||rl(I.value)||!T?T:(O=a.properties,T.replace(/{([^{}]+)}/g,(Z,K)=>K in O?String(O[K]):""));var O}createBucket(t){return new Cc(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of sh.paint.overridableProperties){if(!ah.hasPaintOverride(this.layout,t))continue;const a=this.paint.get(t),p=new Sp(a),x=new Hl(p,a.property.specification);let T=null;T="constant"===a.value.kind||"source"===a.value.kind?new Bi("source",x):new $l("composite",x,a.value.zoomStops),this.paint._values[t]=new ma(a.property,T,a.parameters)}}_handleOverridablePaintPropertyUpdate(t,a,p){return!(!this.layout||a.isDataDriven()||p.isDataDriven())&&ah.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,a){const p=t.get("text-field"),x=sh.paint.properties[a];let T=!1;const I=O=>{for(const N of O)if(x.overrides&&x.overrides.hasOverride(N))return void(T=!0)};if("constant"===p.value.kind&&p.value.value instanceof nn)I(p.value.value.sections);else if("source"===p.value.kind){const O=Z=>{T||(Z instanceof to&&In(Z.value)===hi?I(Z.value.sections):Z instanceof as?I(Z.sections):Z.eachChild(O))},N=p.value;N._styleExpression&&O(N._styleExpression.expression)}return T}}let Tp;var ng={get paint(){return Tp=Tp||new So({"background-color":new wt(Me.paint_background["background-color"]),"background-pattern":new Hs(Me.paint_background["background-pattern"]),"background-opacity":new wt(Me.paint_background["background-opacity"])})}};class tc extends To{constructor(t){super(t,ng)}}let Pa;var ru={get paint(){return Pa=Pa||new So({"raster-opacity":new wt(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new wt(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wt(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wt(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new wt(Me.paint_raster["raster-saturation"]),"raster-contrast":new wt(Me.paint_raster["raster-contrast"]),"raster-resampling":new wt(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new wt(Me.paint_raster["raster-fade-duration"])})}};class rg extends To{constructor(t){super(t,ru)}}class Ip extends To{constructor(t){super(t,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Ap{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const vd=6371008.8;class Ec{constructor(t,a){if(isNaN(t)||isNaN(a))throw new Error(`Invalid LngLat object: (${t}, ${a})`);if(this.lng=+t,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ec(lt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const a=Math.PI/180,p=this.lat*a,x=t.lat*a,T=Math.sin(p)*Math.sin(x)+Math.cos(p)*Math.cos(x)*Math.cos((t.lng-this.lng)*a);return vd*Math.acos(Math.min(T,1))}static convert(t){if(t instanceof Ec)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ec(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ec(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const lh=2*Math.PI*vd;function kp(o){return lh*Math.cos(o*Math.PI/180)}function Pp(o){return(180+o)/360}function fm(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function gm(o,t){return o/kp(t)}function bd(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Wa{constructor(t,a,p=0){this.x=+t,this.y=+a,this.z=+p}static fromLngLat(t,a=0){const p=Ec.convert(t);return new Wa(Pp(p.lng),fm(p.lat),gm(a,p.lat))}toLngLat(){return new Ec(360*this.x-180,bd(this.y))}toAltitude(){return this.z*kp(bd(this.y))}meterInMercatorCoordinateUnits(){return 1/lh*(t=bd(this.y),1/Math.cos(t*Math.PI/180));var t}}function xd(o,t,a){var p=2*Math.PI*6378137/256/Math.pow(2,a);return[o*p-2*Math.PI*6378137/2,t*p-2*Math.PI*6378137/2]}class ch{constructor(t,a,p){if(t<0||t>25||p<0||p>=Math.pow(2,t)||a<0||a>=Math.pow(2,t))throw new Error(`x=${a}, y=${p}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=a,this.y=p,this.key=dh(0,t,t,a,p)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,a,p){const x=(I=this.y,O=this.z,N=xd(256*(T=this.x),256*(I=Math.pow(2,O)-I-1),O),Z=xd(256*(T+1),256*(I+1),O),N[0]+","+N[1]+","+Z[0]+","+Z[1]);var T,I,O,N,Z;const K=function(te,le,me){let be,Be="";for(let Ke=te;Ke>0;Ke--)be=1<<Ke-1,Be+=(le&be?1:0)+(me&be?2:0);return Be}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===p?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,K).replace(/{bbox-epsg-3857}/g,x)}isChildOf(t){const a=this.z-t.z;return a>0&&t.x===this.x>>a&&t.y===this.y>>a}getTilePoint(t){const a=Math.pow(2,this.z);return new Pe((t.x*a-this.x)*zr,(t.y*a-this.y)*zr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class _m{constructor(t,a){this.wrap=t,this.canonical=a,this.key=dh(t,a.z,a.z,a.x,a.y)}}class ra{constructor(t,a,p,x,T){if(t<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${p}`);this.overscaledZ=t,this.wrap=a,this.canonical=new ch(p,+x,+T),this.key=dh(a,t,p,x,T)}clone(){return new ra(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-t;return t>this.canonical.z?new ra(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ra(t,this.wrap,t,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(t,a){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-t;return t>this.canonical.z?dh(this.wrap*+a,t,this.canonical.z,this.canonical.x,this.canonical.y):dh(this.wrap*+a,t,t,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const a=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>a&&t.canonical.y===this.canonical.y>>a}children(t){if(this.overscaledZ>=t)return[new ra(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,p=2*this.canonical.x,x=2*this.canonical.y;return[new ra(a,this.wrap,a,p,x),new ra(a,this.wrap,a,p+1,x),new ra(a,this.wrap,a,p,x+1),new ra(a,this.wrap,a,p+1,x+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new ra(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new ra(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new _m(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Wa(t.x-this.wrap,t.y))}}function dh(o,t,a,p,x){(o*=2)<0&&(o=-1*o-1);const T=1<<a;return(T*T*o+T*x+p).toString(36)+a.toString(36)+t.toString(36)}zi("CanonicalTileID",ch),zi("OverscaledTileID",ra,{omit:["posMatrix"]});class og{constructor(t,a,p){if(this.uid=t,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(p&&"mapbox"!==p&&"terrarium"!==p)return void je(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const x=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=p||"mapbox";for(let T=0;T<x;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(x,T)]=this.data[this._idx(x-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,x)]=this.data[this._idx(T,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)],this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)],this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let T=0;T<x;T++)for(let I=0;I<x;I++){const O=this.get(T,I);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(t,a){const p=new Uint8Array(this.data.buffer),x=4*this._idx(t,a);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(p[x],p[x+1],p[x+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,a){if(t<-1||t>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(t+1)}_unpackMapbox(t,a,p){return(256*t*256+256*a+p)/10-1e4}_unpackTerrarium(t,a,p){return 256*t+a+p/256-32768}getPixels(){return new ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,a,p){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let x=a*this.dim,T=a*this.dim+this.dim,I=p*this.dim,O=p*this.dim+this.dim;switch(a){case-1:x=T-1;break;case 1:T=x+1}switch(p){case-1:I=O-1;break;case 1:O=I+1}const N=-a*this.dim,Z=-p*this.dim;for(let K=I;K<O;K++)for(let te=x;te<T;te++)this.data[this._idx(te,K)]=t.data[this._idx(te+N,K+Z)]}}zi("DEMData",og);class sg{constructor(t){this._stringToNumber={},this._numberToString=[];for(let a=0;a<t.length;a++){const p=t[a];this._stringToNumber[p]=a,this._numberToString[a]=p}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class ou{constructor(t,a,p,x,T){this.type="Feature",this._vectorTileFeature=t,t._z=a,t._x=p,t._y=x,this.properties=t.properties,this.id=T}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const a in this)"_geometry"!==a&&"_vectorTileFeature"!==a&&(t[a]=this[a]);return t}}class uh{constructor(t,a){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ql(zr,16,0),this.grid3D=new ql(zr,16,0),this.featureIndexArray=new B,this.promoteId=a}insert(t,a,p,x,T,I){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,x,T);const N=I?this.grid3D:this.grid;for(let Z=0;Z<a.length;Z++){const K=a[Z],te=[1/0,1/0,-1/0,-1/0];for(let le=0;le<K.length;le++){const me=K[le];te[0]=Math.min(te[0],me.x),te[1]=Math.min(te[1],me.y),te[2]=Math.max(te[2],me.x),te[3]=Math.max(te[3],me.y)}te[0]<zr&&te[1]<zr&&te[2]>=0&&te[3]>=0&&N.insert(O,te[0],te[1],te[2],te[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new gc.VectorTile(new Ku(this.rawTileData)).layers,this.sourceLayerCoder=new sg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,a,p,x){this.loadVTLayers();const T=t.params||{},I=zr/t.tileSize/t.scale,O=W(T.filter),N=t.queryGeometry,Z=t.queryPadding*I,K=lg(N),te=this.grid.query(K.minX-Z,K.minY-Z,K.maxX+Z,K.maxY+Z),le=lg(t.cameraQueryGeometry),me=this.grid3D.query(le.minX-Z,le.minY-Z,le.maxX+Z,le.maxY+Z,(Ke,tt,_t,st)=>function(St,At,Jt,Fi,Li){for(const Ci of St)if(At<=Ci.x&&Jt<=Ci.y&&Fi>=Ci.x&&Li>=Ci.y)return!0;const Pi=[new Pe(At,Jt),new Pe(At,Li),new Pe(Fi,Li),new Pe(Fi,Jt)];if(St.length>2)for(const Ci of Pi)if(Nd(St,Ci))return!0;for(let Ci=0;Ci<St.length-1;Ci++)if(Lf(St[Ci],St[Ci+1],Pi))return!0;return!1}(t.cameraQueryGeometry,Ke-Z,tt-Z,_t+Z,st+Z));for(const Ke of me)te.push(Ke);te.sort(Op);const be={};let Be;for(let Ke=0;Ke<te.length;Ke++){const tt=te[Ke];if(tt===Be)continue;Be=tt;const _t=this.featureIndexArray.get(tt);let st=null;this.loadMatchingFeature(be,_t.bucketIndex,_t.sourceLayerIndex,_t.featureIndex,O,T.layers,T.availableImages,a,p,x,(St,At,Jt)=>(st||(st=Ws(St)),At.queryIntersectsFeature(N,St,Jt,st,this.z,t.transform,I,t.pixelPosMatrix)))}return be}loadMatchingFeature(t,a,p,x,T,I,O,N,Z,K,te){const le=this.bucketLayerIDs[a];if(I&&!function(Ke,tt){for(let _t=0;_t<Ke.length;_t++)if(tt.indexOf(Ke[_t])>=0)return!0;return!1}(I,le))return;const me=this.sourceLayerCoder.decode(p),be=this.vtLayers[me].feature(x);if(T.needGeometry){const Ke=kc(be,!0);if(!T.filter(new ir(this.tileID.overscaledZ),Ke,this.tileID.canonical))return}else if(!T.filter(new ir(this.tileID.overscaledZ),be))return;const Be=this.getId(be,me);for(let Ke=0;Ke<le.length;Ke++){const tt=le[Ke];if(I&&I.indexOf(tt)<0)continue;const _t=N[tt];if(!_t)continue;let st={};Be&&K&&(st=K.getState(_t.sourceLayer||"_geojsonTileLayer",Be));const St=bt({},Z[tt]);St.paint=ag(St.paint,_t.paint,be,st,O),St.layout=ag(St.layout,_t.layout,be,st,O);const At=!te||te(be,_t,st);if(!At)continue;const Jt=new ou(be,this.z,this.x,this.y,Be);Jt.layer=St;let Fi=t[tt];void 0===Fi&&(Fi=t[tt]=[]),Fi.push({featureIndex:x,feature:Jt,intersectionZ:At})}}lookupSymbolFeatures(t,a,p,x,T,I,O,N){const Z={};this.loadVTLayers();const K=W(T);for(const te of t)this.loadMatchingFeature(Z,p,x,te,K,I,O,N,a);return Z}hasLayer(t){for(const a of this.bucketLayerIDs)for(const p of a)if(t===p)return!0;return!1}getId(t,a){let p=t.id;return this.promoteId&&(p=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[a]],"boolean"==typeof p&&(p=Number(p))),p}}function ag(o,t,a,p,x){return ni(o,(T,I)=>{const O=t instanceof Jo?t.get(I):null;return O&&O.evaluate?O.evaluate(a,p,x):O})}function lg(o){let t=1/0,a=1/0,p=-1/0,x=-1/0;for(const T of o)t=Math.min(t,T.x),a=Math.min(a,T.y),p=Math.max(p,T.x),x=Math.max(x,T.y);return{minX:t,minY:a,maxX:p,maxY:x}}function Op(o,t){return t-o}function hh(o,t,a,p,x){const T=[];for(let I=0;I<o.length;I++){const O=o[I];let N;for(let Z=0;Z<O.length-1;Z++){let K=O[Z],te=O[Z+1];K.x<t&&te.x<t||(K.x<t?K=new Pe(t,K.y+(t-K.x)/(te.x-K.x)*(te.y-K.y))._round():te.x<t&&(te=new Pe(t,K.y+(t-K.x)/(te.x-K.x)*(te.y-K.y))._round()),K.y<a&&te.y<a||(K.y<a?K=new Pe(K.x+(a-K.y)/(te.y-K.y)*(te.x-K.x),a)._round():te.y<a&&(te=new Pe(K.x+(a-K.y)/(te.y-K.y)*(te.x-K.x),a)._round()),K.x>=p&&te.x>=p||(K.x>=p?K=new Pe(p,K.y+(p-K.x)/(te.x-K.x)*(te.y-K.y))._round():te.x>=p&&(te=new Pe(p,K.y+(p-K.x)/(te.x-K.x)*(te.y-K.y))._round()),K.y>=x&&te.y>=x||(K.y>=x?K=new Pe(K.x+(x-K.y)/(te.y-K.y)*(te.x-K.x),x)._round():te.y>=x&&(te=new Pe(K.x+(x-K.y)/(te.y-K.y)*(te.x-K.x),x)._round()),N&&K.equals(N[N.length-1])||(N=[K],T.push(N)),N.push(te)))))}}return T}zi("FeatureIndex",uh,{omit:["rawTileData","sourceLayerCoder"]});class Mc extends Pe{constructor(t,a,p,x){super(t,a),this.angle=p,void 0!==x&&(this.segment=x)}clone(){return new Mc(this.x,this.y,this.angle,this.segment)}}function Rp(o,t,a,p,x){if(void 0===t.segment||0===a)return!0;let T=t,I=t.segment+1,O=0;for(;O>-a/2;){if(I--,I<0)return!1;O-=o[I].dist(T),T=o[I]}O+=o[I].dist(o[I+1]),I++;const N=[];let Z=0;for(;O<a/2;){const K=o[I],te=o[I+1];if(!te)return!1;let le=o[I-1].angleTo(K)-K.angleTo(te);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:O,angleDelta:le}),Z+=le;O-N[0].distance>p;)Z-=N.shift().angleDelta;if(Z>x)return!1;I++,O+=K.dist(te)}return!0}function Fp(o){let t=0;for(let a=0;a<o.length-1;a++)t+=o[a].dist(o[a+1]);return t}function su(o,t,a){return o?.6*t*a:0}function au(o,t){return Math.max(o?o.right-o.left:0,t?t.right-t.left:0)}function mh(o,t,a,p,x,T){const I=su(a,x,T),O=au(a,p)*T;let N=0;const Z=Fp(o)/2;for(let K=0;K<o.length-1;K++){const te=o[K],le=o[K+1],me=te.dist(le);if(N+me>Z){const be=(Z-N)/me,Be=Lr.number(te.x,le.x,be),Ke=Lr.number(te.y,le.y,be),tt=new Mc(Be,Ke,le.angleTo(te),K);return tt._round(),!I||Rp(o,tt,O,I,t)?tt:void 0}N+=me}}function ym(o,t,a,p,x,T,I,O,N){const Z=su(p,T,I),K=au(p,x),te=K*I,le=0===o[0].x||o[0].x===N||0===o[0].y||o[0].y===N;return t-te<t/4&&(t=te+t/4),Lp(o,le?t/2*O%t:(K/2+2*T)*I*O%t,t,Z,a,te,le,!1,N)}function Lp(o,t,a,p,x,T,I,O,N){const Z=T/2,K=Fp(o);let te=0,le=t-a,me=[];for(let be=0;be<o.length-1;be++){const Be=o[be],Ke=o[be+1],tt=Be.dist(Ke),_t=Ke.angleTo(Be);for(;le+a<te+tt;){le+=a;const st=(le-te)/tt,St=Lr.number(Be.x,Ke.x,st),At=Lr.number(Be.y,Ke.y,st);if(St>=0&&St<N&&At>=0&&At<N&&le-Z>=0&&le+Z<=K){const Jt=new Mc(St,At,_t,be);Jt._round(),p&&!Rp(o,Jt,T,p,x)||me.push(Jt)}}te+=tt}return O||me.length||I||(me=Lp(o,te/2,a,p,x,T,I,!0,N)),me}zi("Anchor",Mc);const qa=Ys;function vm(o,t,a,p){const x=[],T=o.image,I=T.pixelRatio,O=T.paddedRect.w-2*qa,N=T.paddedRect.h-2*qa,Z=o.right-o.left,K=o.bottom-o.top,te=T.stretchX||[[0,O]],le=T.stretchY||[[0,N]],me=(xi,Si)=>xi+Si[1]-Si[0],be=te.reduce(me,0),Be=le.reduce(me,0),Ke=O-be,tt=N-Be;let _t=0,st=be,St=0,At=Be,Jt=0,Fi=Ke,Li=0,Pi=tt;if(T.content&&p){const xi=T.content;_t=ph(te,0,xi[0]),St=ph(le,0,xi[1]),st=ph(te,xi[0],xi[2]),At=ph(le,xi[1],xi[3]),Jt=xi[0]-_t,Li=xi[1]-St,Fi=xi[2]-xi[0]-st,Pi=xi[3]-xi[1]-At}const Ci=(xi,Si,Mi,ci)=>{const Xi=lu(xi.stretch-_t,st,Z,o.left),Gi=fh(xi.fixed-Jt,Fi,xi.stretch,be),Mn=lu(Si.stretch-St,At,K,o.top),Tr=fh(Si.fixed-Li,Pi,Si.stretch,Be),Rr=lu(Mi.stretch-_t,st,Z,o.left),po=fh(Mi.fixed-Jt,Fi,Mi.stretch,be),ga=lu(ci.stretch-St,At,K,o.top),es=fh(ci.fixed-Li,Pi,ci.stretch,Be),Xr=new Pe(Xi,Mn),ko=new Pe(Rr,Mn),ts=new Pe(Rr,ga),oa=new Pe(Xi,ga),Es=new Pe(Gi/I,Tr/I),Eo=new Pe(po/I,es/I),Bo=t*Math.PI/180;if(Bo){const aa=Math.sin(Bo),hs=Math.cos(Bo),Jr=[hs,-aa,aa,hs];Xr._matMult(Jr),ko._matMult(Jr),oa._matMult(Jr),ts._matMult(Jr)}const Ms=xi.stretch+xi.fixed,sa=Si.stretch+Si.fixed;return{tl:Xr,tr:ko,bl:oa,br:ts,tex:{x:T.paddedRect.x+qa+Ms,y:T.paddedRect.y+qa+sa,w:Mi.stretch+Mi.fixed-Ms,h:ci.stretch+ci.fixed-sa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Es,pixelOffsetBR:Eo,minFontScaleX:Fi/I/Z,minFontScaleY:Pi/I/K,isSDF:a}};if(p&&(T.stretchX||T.stretchY)){const xi=bm(te,Ke,be),Si=bm(le,tt,Be);for(let Mi=0;Mi<xi.length-1;Mi++){const ci=xi[Mi],Xi=xi[Mi+1];for(let Gi=0;Gi<Si.length-1;Gi++)x.push(Ci(ci,Si[Gi],Xi,Si[Gi+1]))}}else x.push(Ci({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:N+1}));return x}function ph(o,t,a){let p=0;for(const x of o)p+=Math.max(t,Math.min(a,x[1]))-Math.max(t,Math.min(a,x[0]));return p}function bm(o,t,a){const p=[{fixed:-qa,stretch:0}];for(const[x,T]of o){const I=p[p.length-1];p.push({fixed:x-I.stretch,stretch:I.stretch}),p.push({fixed:x-I.stretch,stretch:I.stretch+(T-x)})}return p.push({fixed:t+qa,stretch:a}),p}function lu(o,t,a,p){return o/t*a+p}function fh(o,t,a,p){return o-t*a/p}class gh{constructor(t,a,p,x,T,I,O,N,Z,K){if(this.boxStartIndex=t.length,Z){let te=I.top,le=I.bottom;const me=I.collisionPadding;me&&(te-=me[1],le+=me[3]);let be=le-te;be>0&&(be=Math.max(10,be),this.circleDiameter=be)}else{let te=I.top*O-N[0],le=I.bottom*O+N[2],me=I.left*O-N[3],be=I.right*O+N[1];const Be=I.collisionPadding;if(Be&&(me-=Be[0]*O,te-=Be[1]*O,be+=Be[2]*O,le+=Be[3]*O),K){const Ke=new Pe(me,te),tt=new Pe(be,te),_t=new Pe(me,le),st=new Pe(be,le),St=K*Math.PI/180;Ke._rotate(St),tt._rotate(St),_t._rotate(St),st._rotate(St),me=Math.min(Ke.x,tt.x,_t.x,st.x),be=Math.max(Ke.x,tt.x,_t.x,st.x),te=Math.min(Ke.y,tt.y,_t.y,st.y),le=Math.max(Ke.y,tt.y,_t.y,st.y)}t.emplaceBack(a.x,a.y,me,te,be,le,p,x,T)}this.boxEndIndex=t.length}}class cg{constructor(t=[],a=dg){if(this.data=t,this.length=this.data.length,this.compare=a,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:a,compare:p}=this,x=a[t];for(;t>0;){const T=t-1>>1,I=a[T];if(p(x,I)>=0)break;a[t]=I,t=T}a[t]=x}_down(t){const{data:a,compare:p}=this,x=this.length>>1,T=a[t];for(;t<x;){let I=1+(t<<1),O=a[I];const N=I+1;if(N<this.length&&p(a[N],O)<0&&(I=N,O=a[N]),p(O,T)>=0)break;a[t]=O,t=I}a[t]=T}}function dg(o,t){return o<t?-1:o>t?1:0}function xm(o,t=1,a=!1){let p=1/0,x=1/0,T=-1/0,I=-1/0;const O=o[0];for(let me=0;me<O.length;me++){const be=O[me];(!me||be.x<p)&&(p=be.x),(!me||be.y<x)&&(x=be.y),(!me||be.x>T)&&(T=be.x),(!me||be.y>I)&&(I=be.y)}const N=Math.min(T-p,I-x);let Z=N/2;const K=new cg([],ug);if(0===N)return new Pe(p,x);for(let me=p;me<T;me+=N)for(let be=x;be<I;be+=N)K.push(new wd(me+Z,be+Z,Z,o));let te=function(me){let be=0,Be=0,Ke=0;const tt=me[0];for(let _t=0,st=tt.length,St=st-1;_t<st;St=_t++){const At=tt[_t],Jt=tt[St],Fi=At.x*Jt.y-Jt.x*At.y;Be+=(At.x+Jt.x)*Fi,Ke+=(At.y+Jt.y)*Fi,be+=3*Fi}return new wd(Be/be,Ke/be,0,me)}(o),le=K.length;for(;K.length;){const me=K.pop();(me.d>te.d||!te.d)&&(te=me,a&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,le)),me.max-te.d<=t||(Z=me.h/2,K.push(new wd(me.p.x-Z,me.p.y-Z,Z,o)),K.push(new wd(me.p.x+Z,me.p.y-Z,Z,o)),K.push(new wd(me.p.x-Z,me.p.y+Z,Z,o)),K.push(new wd(me.p.x+Z,me.p.y+Z,Z,o)),le+=4)}return a&&(console.log(`num probes: ${le}`),console.log(`best distance: ${te.d}`)),te.p}function ug(o,t){return t.max-o.max}function wd(o,t,a,p){this.p=new Pe(o,t),this.h=a,this.d=function(x,T){let I=!1,O=1/0;for(let N=0;N<T.length;N++){const Z=T[N];for(let K=0,te=Z.length,le=te-1;K<te;le=K++){const me=Z[K],be=Z[le];me.y>x.y!=be.y>x.y&&x.x<(be.x-me.x)*(x.y-me.y)/(be.y-me.y)+me.x&&(I=!I),O=Math.min(O,Iu(x,me,be))}}return(I?1:-1)*Math.sqrt(O)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}const Hc=Number.POSITIVE_INFINITY;function Er(o,t){return t[1]!==Hc?function(a,p,x){let T=0,I=0;switch(p=Math.abs(p),x=Math.abs(x),a){case"top-right":case"top-left":case"top":I=x-7;break;case"bottom-right":case"bottom-left":case"bottom":I=7-x}switch(a){case"top-right":case"bottom-right":case"right":T=-p;break;case"top-left":case"bottom-left":case"left":T=p}return[T,I]}(o,t[0],t[1]):function(a,p){let x=0,T=0;p<0&&(p=0);const I=p/Math.sqrt(2);switch(a){case"top-right":case"top-left":T=I-7;break;case"bottom-right":case"bottom-left":T=7-I;break;case"bottom":T=7-p;break;case"top":T=p-7}switch(a){case"top-right":case"bottom-right":x=-I;break;case"top-left":case"bottom-left":x=I;break;case"left":x=p;break;case"right":x=-p}return[x,T]}(o,t[0])}function $c(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Np(o,t,a,p,x,T,I,O,N,Z,K){let te=T.textMaxSize.evaluate(t,{});void 0===te&&(te=I);const le=o.layers[0].layout,me=le.get("icon-offset").evaluate(t,{},K),be=wm(a.horizontal),Be=I/24,Ke=o.tilePixelRatio*Be,tt=o.tilePixelRatio*te/24,_t=o.tilePixelRatio*O,st=o.tilePixelRatio*le.get("symbol-spacing"),St=le.get("text-padding")*o.tilePixelRatio,At=function(ci,Xi,Gi,Mn=1){const Tr=ci.get("icon-padding").evaluate(Xi,{},Gi),Rr=Tr&&Tr.values;return[Rr[0]*Mn,Rr[1]*Mn,Rr[2]*Mn,Rr[3]*Mn]}(le,t,K,o.tilePixelRatio),Jt=le.get("text-max-angle")/180*Math.PI,Fi="viewport"!==le.get("text-rotation-alignment")&&"point"!==le.get("symbol-placement"),Li="map"===le.get("icon-rotation-alignment")&&"point"!==le.get("symbol-placement"),Pi=le.get("symbol-placement"),Ci=st/2,xi=le.get("icon-text-fit");let Si;p&&"none"!==xi&&(o.allowVerticalPlacement&&a.vertical&&(Si=nu(p,a.vertical,xi,le.get("icon-text-fit-padding"),me,Be)),be&&(p=nu(p,be,xi,le.get("icon-text-fit-padding"),me,Be)));const Mi=(ci,Xi)=>{Xi.x<0||Xi.x>=zr||Xi.y<0||Xi.y>=zr||function(Gi,Mn,Tr,Rr,po,ga,es,Xr,ko,ts,oa,Es,Eo,Bo,Ms,sa,aa,hs,Jr,ms,Rn,Ks,Vo,Ds,Oa){const ul=Gi.addToLineVertexArray(Mn,Tr);let Ya,Dc,Ka,Ss,Ts=0,_a=0,nc=0,Bp=0,wh=-1,Mm=-1;const zl={};let Dm=or(""),Ch=0,Sm=0;if(void 0===Xr._unevaluatedLayout.getValue("text-radial-offset")?[Ch,Sm]=Xr.layout.get("text-offset").evaluate(Rn,{},Ds).map(la=>la*zo):(Ch=Xr.layout.get("text-radial-offset").evaluate(Rn,{},Ds)*zo,Sm=Hc),Gi.allowVerticalPlacement&&Rr.vertical){const la=Xr.layout.get("text-rotate").evaluate(Rn,{},Ds)+90;Ka=new gh(ko,Mn,ts,oa,Es,Rr.vertical,Eo,Bo,Ms,la),es&&(Ss=new gh(ko,Mn,ts,oa,Es,es,aa,hs,Ms,la))}if(po){const la=Xr.layout.get("icon-rotate").evaluate(Rn,{}),ml="none"!==Xr.layout.get("icon-text-fit"),gu=vm(po,la,Vo,ml),Md=es?vm(es,la,Vo,ml):void 0;Dc=new gh(ko,Mn,ts,oa,Es,po,aa,hs,!1,la),Ts=4*gu.length;const Gc=Gi.iconSizeData;let ca=null;"source"===Gc.kind?(ca=[na*Xr.layout.get("icon-size").evaluate(Rn,{})],ca[0]>wc&&je(`${Gi.layerIds[0]}: Value for "icon-size" is >= ${Uc}. Reduce your "icon-size".`)):"composite"===Gc.kind&&(ca=[na*Ks.compositeIconSizes[0].evaluate(Rn,{},Ds),na*Ks.compositeIconSizes[1].evaluate(Rn,{},Ds)],(ca[0]>wc||ca[1]>wc)&&je(`${Gi.layerIds[0]}: Value for "icon-size" is >= ${Uc}. Reduce your "icon-size".`)),Gi.addSymbols(Gi.icon,gu,ca,ms,Jr,Rn,v.WritingMode.none,Mn,ul.lineStartIndex,ul.lineLength,-1,Ds),wh=Gi.icon.placedSymbolArray.length-1,Md&&(_a=4*Md.length,Gi.addSymbols(Gi.icon,Md,ca,ms,Jr,Rn,v.WritingMode.vertical,Mn,ul.lineStartIndex,ul.lineLength,-1,Ds),Mm=Gi.icon.placedSymbolArray.length-1)}const Eh=Object.keys(Rr.horizontal);for(const la of Eh){const ml=Rr.horizontal[la];if(!Ya){Dm=or(ml.text);const Md=Xr.layout.get("text-rotate").evaluate(Rn,{},Ds);Ya=new gh(ko,Mn,ts,oa,Es,ml,Eo,Bo,Ms,Md)}const gu=1===ml.positionedLines.length;if(nc+=_h(Gi,Mn,ml,ga,Xr,Ms,Rn,sa,ul,Rr.vertical?v.WritingMode.horizontal:v.WritingMode.horizontalOnly,gu?Eh:[la],zl,wh,Ks,Ds),gu)break}Rr.vertical&&(Bp+=_h(Gi,Mn,Rr.vertical,ga,Xr,Ms,Rn,sa,ul,v.WritingMode.vertical,["vertical"],zl,Mm,Ks,Ds));const fu=Ya?Ya.boxStartIndex:Gi.collisionBoxArray.length,Vp=Ya?Ya.boxEndIndex:Gi.collisionBoxArray.length,N_=Ka?Ka.boxStartIndex:Gi.collisionBoxArray.length,Tm=Ka?Ka.boxEndIndex:Gi.collisionBoxArray.length,Ed=Dc?Dc.boxStartIndex:Gi.collisionBoxArray.length,Mh=Dc?Dc.boxEndIndex:Gi.collisionBoxArray.length,Up=Ss?Ss.boxStartIndex:Gi.collisionBoxArray.length,jp=Ss?Ss.boxEndIndex:Gi.collisionBoxArray.length;let hl=-1;const Dh=(la,ml)=>la&&la.circleDiameter?Math.max(la.circleDiameter,ml):ml;hl=Dh(Ya,hl),hl=Dh(Ka,hl),hl=Dh(Dc,hl),hl=Dh(Ss,hl);const Hp=hl>-1?1:0;Hp&&(hl*=Oa/zo),Gi.glyphOffsetArray.length>=Cc.MAX_GLYPHS&&je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Rn.sortKey&&Gi.addToSortKeyRanges(Gi.symbolInstances.length,Rn.sortKey),Gi.symbolInstances.emplaceBack(Mn.x,Mn.y,zl.right>=0?zl.right:-1,zl.center>=0?zl.center:-1,zl.left>=0?zl.left:-1,zl.vertical||-1,wh,Mm,Dm,fu,Vp,N_,Tm,Ed,Mh,Up,jp,ts,nc,Bp,Ts,_a,Hp,0,Eo,Ch,Sm,hl)}(o,Xi,ci,a,p,x,Si,o.layers[0],o.collisionBoxArray,t.index,t.sourceLayerIndex,o.index,Ke,[St,St,St,St],Fi,N,_t,At,Li,me,t,T,Z,K,I)};if("line"===Pi)for(const ci of hh(t.geometry,0,0,zr,zr)){const Xi=ym(ci,st,Jt,a.vertical||be,p,24,tt,o.overscaling,zr);for(const Gi of Xi)be&&Cm(o,be.text,Ci,Gi)||Mi(ci,Gi)}else if("line-center"===Pi){for(const ci of t.geometry)if(ci.length>1){const Xi=mh(ci,Jt,a.vertical||be,p,24,tt);Xi&&Mi(ci,Xi)}}else if("Polygon"===t.type)for(const ci of lp(t.geometry,0)){const Xi=xm(ci,16);Mi(ci[0],new Mc(Xi.x,Xi.y,0))}else if("LineString"===t.type)for(const ci of t.geometry)Mi(ci,new Mc(ci[0].x,ci[0].y,0));else if("Point"===t.type)for(const ci of t.geometry)for(const Xi of ci)Mi([Xi],new Mc(Xi.x,Xi.y,0))}function _h(o,t,a,p,x,T,I,O,N,Z,K,te,le,me,be){const Be=function(_t,st,St,At,Jt,Fi,Li,Pi){const Ci=At.layout.get("text-rotate").evaluate(Fi,{})*Math.PI/180,xi=[];for(const Si of st.positionedLines)for(const Mi of Si.positionedGlyphs){if(!Mi.rect)continue;const ci=Mi.rect||{};let Xi=cm+1,Gi=!0,Mn=1,Tr=0;const Rr=(Jt||Pi)&&Mi.vertical,po=Mi.metrics.advance*Mi.scale/2;if(Pi&&st.verticalizable&&(Tr=Si.lineOffset/2-(Mi.imageName?-(zo-Mi.metrics.width*Mi.scale)/2:(Mi.scale-1)*zo)),Mi.imageName){const Jr=Li[Mi.imageName];Gi=Jr.sdf,Mn=Jr.pixelRatio,Xi=Ys/Mn}const ga=Jt?[Mi.x+po,Mi.y]:[0,0];let es=Jt?[0,0]:[Mi.x+po+St[0],Mi.y+St[1]-Tr],Xr=[0,0];Rr&&(Xr=es,es=[0,0]);const ko=(Mi.metrics.left-Xi)*Mi.scale-po+es[0],ts=(-Mi.metrics.top-Xi)*Mi.scale+es[1],oa=ko+ci.w*Mi.scale/Mn,Es=ts+ci.h*Mi.scale/Mn,Eo=new Pe(ko,ts),Bo=new Pe(oa,ts),Ms=new Pe(ko,Es),sa=new Pe(oa,Es);if(Rr){const Jr=new Pe(-po,po-xc),ms=-Math.PI/2,Rn=zo/2-po,Ks=new Pe(5-xc-Rn,-(Mi.imageName?Rn:0)),Vo=new Pe(...Xr);Eo._rotateAround(ms,Jr)._add(Ks)._add(Vo),Bo._rotateAround(ms,Jr)._add(Ks)._add(Vo),Ms._rotateAround(ms,Jr)._add(Ks)._add(Vo),sa._rotateAround(ms,Jr)._add(Ks)._add(Vo)}if(Ci){const Jr=Math.sin(Ci),ms=Math.cos(Ci),Rn=[ms,-Jr,Jr,ms];Eo._matMult(Rn),Bo._matMult(Rn),Ms._matMult(Rn),sa._matMult(Rn)}const aa=new Pe(0,0),hs=new Pe(0,0);xi.push({tl:Eo,tr:Bo,bl:Ms,br:sa,tex:ci,writingMode:st.writingMode,glyphOffset:ga,sectionIndex:Mi.sectionIndex,isSDF:Gi,pixelOffsetTL:aa,pixelOffsetBR:hs,minFontScaleX:0,minFontScaleY:0})}return xi}(0,a,O,x,T,I,p,o.allowVerticalPlacement),Ke=o.textSizeData;let tt=null;"source"===Ke.kind?(tt=[na*x.layout.get("text-size").evaluate(I,{})],tt[0]>wc&&je(`${o.layerIds[0]}: Value for "text-size" is >= ${Uc}. Reduce your "text-size".`)):"composite"===Ke.kind&&(tt=[na*me.compositeTextSizes[0].evaluate(I,{},be),na*me.compositeTextSizes[1].evaluate(I,{},be)],(tt[0]>wc||tt[1]>wc)&&je(`${o.layerIds[0]}: Value for "text-size" is >= ${Uc}. Reduce your "text-size".`)),o.addSymbols(o.text,Be,tt,O,T,I,Z,t,N.lineStartIndex,N.lineLength,le,be);for(const _t of K)te[_t]=o.text.placedSymbolArray.length-1;return 4*Be.length}function wm(o){for(const t in o)return o[t];return null}function Cm(o,t,a,p){const x=o.compareText;if(t in x){const T=x[t];for(let I=T.length-1;I>=0;I--)if(p.dist(T[I])<a)return!0}else x[t]=[];return x[t].push(p),!1}const cu=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class yh{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,p]=new Uint8Array(t,0,2);if(219!==a)throw new Error("Data does not appear to be in a KDBush format.");const x=p>>4;if(1!==x)throw new Error(`Got v${x} data when expected v1.`);const T=cu[15&p];if(!T)throw new Error("Unrecognized array type.");const[I]=new Uint16Array(t,2,1),[O]=new Uint32Array(t,4,1);return new yh(O,I,T,t)}constructor(t,a=64,p=Float64Array,x){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=p,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const T=cu.indexOf(this.ArrayType),I=2*t*this.ArrayType.BYTES_PER_ELEMENT,O=t*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-O%8)%8;if(T<0)throw new Error(`Unexpected typed array class: ${p}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+O+N,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+I+O+N),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+O+N,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+T]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=t)}add(t,a){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=t,this.coords[this._pos++]=a,p}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return du(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,a,p,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:I,nodeSize:O}=this,N=[0,T.length-1,0],Z=[];for(;N.length;){const K=N.pop()||0,te=N.pop()||0,le=N.pop()||0;if(te-le<=O){for(let Ke=le;Ke<=te;Ke++){const tt=I[2*Ke],_t=I[2*Ke+1];tt>=t&&tt<=p&&_t>=a&&_t<=x&&Z.push(T[Ke])}continue}const me=le+te>>1,be=I[2*me],Be=I[2*me+1];be>=t&&be<=p&&Be>=a&&Be<=x&&Z.push(T[me]),(0===K?t<=be:a<=Be)&&(N.push(le),N.push(me-1),N.push(1-K)),(0===K?p>=be:x>=Be)&&(N.push(me+1),N.push(te),N.push(1-K))}return Z}within(t,a,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:T,nodeSize:I}=this,O=[0,x.length-1,0],N=[],Z=p*p;for(;O.length;){const K=O.pop()||0,te=O.pop()||0,le=O.pop()||0;if(te-le<=I){for(let Ke=le;Ke<=te;Ke++)zp(T[2*Ke],T[2*Ke+1],t,a)<=Z&&N.push(x[Ke]);continue}const me=le+te>>1,be=T[2*me],Be=T[2*me+1];zp(be,Be,t,a)<=Z&&N.push(x[me]),(0===K?t-p<=be:a-p<=Be)&&(O.push(le),O.push(me-1),O.push(1-K)),(0===K?t+p>=be:a+p>=Be)&&(O.push(me+1),O.push(te),O.push(1-K))}return N}}function du(o,t,a,p,x,T){if(x-p<=a)return;const I=p+x>>1;vh(o,t,I,p,x,T),du(o,t,a,p,I-1,1-T),du(o,t,a,I+1,x,1-T)}function vh(o,t,a,p,x,T){for(;x>p;){if(x-p>600){const Z=x-p+1,K=a-p+1,te=Math.log(Z),le=.5*Math.exp(2*te/3),me=.5*Math.sqrt(te*le*(Z-le)/Z)*(K-Z/2<0?-1:1);vh(o,t,a,Math.max(p,Math.floor(a-K*le/Z+me)),Math.min(x,Math.floor(a+(Z-K)*le/Z+me)),T)}const I=t[2*a+T];let O=p,N=x;for(bh(o,t,p,a),t[2*x+T]>I&&bh(o,t,p,x);O<N;){for(bh(o,t,O,N),O++,N--;t[2*O+T]<I;)O++;for(;t[2*N+T]>I;)N--}t[2*p+T]===I?bh(o,t,p,N):(N++,bh(o,t,N,x)),N<=a&&(p=N+1),a<=N&&(x=N-1)}}function bh(o,t,a,p){uu(o,a,p),uu(t,2*a,2*p),uu(t,2*a+1,2*p+1)}function uu(o,t,a){const p=o[t];o[t]=o[a],o[a]=p}function zp(o,t,a,p){const x=o-a,T=t-p;return x*x+T*T}var hu;v.PerformanceMarkers=void 0,(hu=v.PerformanceMarkers||(v.PerformanceMarkers={})).create="create",hu.load="load",hu.fullLoad="fullLoad";let mu=null,Cd=[];const ic=1e3/60,Em="loadTime",pu="fullLoadTime",xh={mark(o){performance.mark(o)},frame(o){const t=o;null!=mu&&Cd.push(t-mu),mu=t},clearMetrics(){mu=null,Cd=[],performance.clearMeasures(Em),performance.clearMeasures(pu);for(const o in v.PerformanceMarkers)performance.clearMarks(v.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(Em,v.PerformanceMarkers.create,v.PerformanceMarkers.load),performance.measure(pu,v.PerformanceMarkers.create,v.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(Em)[0].duration,t=performance.getEntriesByName(pu)[0].duration,a=Cd.length,p=1/(Cd.reduce((T,I)=>T+I,0)/a/1e3),x=Cd.filter(T=>T>ic).reduce((T,I)=>T+(I-ic)/ic,0);return{loadTime:o,fullLoadTime:t,fps:p,percentDroppedFrames:x/(a+x)*100,totalFrames:a}}};v.AJAXError=Vn,v.ARRAY_TYPE=pc,v.Actor=class{constructor(o,t,a){this.receive=p=>{const x=p.data,T=x.id;if(T&&(!x.targetMapId||this.mapId===x.targetMapId))if("<cancel>"===x.type){delete this.tasks[T];const I=this.cancelCallbacks[T];delete this.cancelCallbacks[T],I&&I()}else Pt()||x.mustQueue?(this.tasks[T]=x,this.taskQueue.push(T),this.invoker.trigger()):this.processTask(T,x)},this.process=()=>{if(!this.taskQueue.length)return;const p=this.taskQueue.shift(),x=this.tasks[p];delete this.tasks[p],this.taskQueue.length&&this.invoker.trigger(),x&&this.processTask(p,x)},this.target=o,this.parent=t,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Ap(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Pt()?o:window}send(o,t,a,p,x=!1){const T=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[T]=a);const I=fi(this.globalScope)?void 0:[];return this.target.postMessage({id:T,type:o,hasCallback:!!a,targetMapId:p,mustQueue:x,sourceMapId:this.mapId,data:Ml(t,I)},I),{cancel:()=>{a&&delete this.callbacks[T],this.target.postMessage({id:T,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}processTask(o,t){if("<response>"===t.type){const a=this.callbacks[o];delete this.callbacks[o],a&&(t.error?a(Us(t.error)):a(null,Us(t.data)))}else{let a=!1;const p=fi(this.globalScope)?void 0:[],x=t.hasCallback?(O,N)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:O?Ml(O):null,data:Ml(N,p)},p)}:O=>{a=!0};let T=null;const I=Us(t.data);if(this.parent[t.type])T=this.parent[t.type](t.sourceMapId,I,x);else if(this.parent.getWorkerSource){const O=t.type.split(".");T=this.parent.getWorkerSource(t.sourceMapId,O[0],I.source)[O[1]](I,x)}else x(new Error(`Could not find function ${t.type}`));!a&&T&&T.cancel&&(this.cancelCallbacks[o]=T.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},v.AlphaImage=Ru,v.CanonicalTileID=ch,v.CollisionBoxArray=w,v.CollisionCircleLayoutArray=class extends Aa{},v.Color=Gt,v.DEMData=og,v.DataConstantProperty=wt,v.DictionaryCoder=sg,v.EXTENT=zr,v.ErrorEvent=rt,v.EvaluationParameters=ir,v.Event=ze,v.Evented=dt,v.FeatureIndex=uh,v.FillBucket=cp,v.FillExtrusionBucket=Gu,v.GeoJSONFeature=ou,v.ImageAtlas=eh,v.ImagePosition=Qu,v.KDBush=yh,v.LineBucket=Zu,v.LineStripIndexArray=class extends i{},v.LngLat=Ec,v.MercatorCoordinate=Wa,v.ONE_EM=zo,v.OverscaledTileID=ra,v.PerformanceUtils=xh,v.Point=Pe,v.Pos3dArray=class extends us{},v.PosArray=ee,v.Properties=So,v.Protobuf=Ku,v.QuadTriangleArray=class extends Il{},v.RGBAImage=ao,v.RasterBoundsArray=class extends ta{},v.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return 0===o.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},v.SegmentVector=bi,v.SymbolBucket=Cc,v.Transitionable=Za,v.TriangleIndexArray=ii,v.Uniform1f=ka,v.Uniform1i=class extends Kr{constructor(o,t){super(o,t),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},v.Uniform2f=class extends Kr{constructor(o,t){super(o,t),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},v.Uniform3f=class extends Kr{constructor(o,t){super(o,t),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},v.Uniform4f=Pl,v.UniformColor=Go,v.UniformMatrix4f=class extends Kr{constructor(o,t){super(o,t),this.current=ho}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let t=1;t<16;t++)if(o[t]!==this.current[t]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},v.UnwrappedTileID=_m,v.ValidationError=Qt,v.ZoomHistory=_r,v.addDynamicAttributes=jc,v.arrayBufferToImage=function(o,t){const a=new Image;a.onload=()=>{t(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=Ri})},a.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(o)],{type:"image/png"});a.src=o.byteLength?URL.createObjectURL(p):Ri},v.arrayBufferToImageBitmap=function(o,t){const a=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(a).then(p=>{t(null,p)}).catch(p=>{t(new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},v.asyncAll=function(o,t,a){if(!o.length)return a(null,[]);let p=o.length;const x=new Array(o.length);let T=null;o.forEach((I,O)=>{t(I,(N,Z)=>{N&&(T=N),x[O]=Z,0==--p&&a(T,x)})})},v.bezier=Le,v.browser=Hn,v.clamp=Xe,v.clipLine=hh,v.clone=function(o){var t=new pc(16);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t},v.clone$1=qt,v.collisionCircleLayout=Jd,v.config=_n,v.copy=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o},v.create=function(){var o=new pc(16);return pc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},v.createExpression=Ma,v.createFilter=W,v.createLayout=wo,v.createStyleLayer=function(o){if("custom"===o.type)return new Ip(o);switch(o.type){case"background":return new tc(o);case"circle":return new ws(o);case"fill":return new R_(o);case"fill-extrusion":return new pp(o);case"heatmap":return new sd(o);case"hillshade":return new Bf(o);case"line":return new vp(o);case"raster":return new rg(o);case"symbol":return new ah(o)}},v.deepEqual=function o(t,a){if(Array.isArray(t)){if(!Array.isArray(a)||t.length!==a.length)return!1;for(let p=0;p<t.length;p++)if(!o(t[p],a[p]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==a){if("object"!=typeof a||Object.keys(t).length!==Object.keys(a).length)return!1;for(const p in t)if(!o(t[p],a[p]))return!1;return!0}return t===a},v.defaultEasing=et,v.derefLayers=function(o){o=o.slice();const t=Object.create(null);for(let a=0;a<o.length;a++)t[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=Yt(o[a],t[o[a].ref]));return o},v.diffStyles=function(o,t){if(!o)return[{command:ti.setStyle,args:[t]}];let a=[];try{if(!Ut(o.version,t.version))return[{command:ti.setStyle,args:[t]}];Ut(o.center,t.center)||a.push({command:ti.setCenter,args:[t.center]}),Ut(o.zoom,t.zoom)||a.push({command:ti.setZoom,args:[t.zoom]}),Ut(o.bearing,t.bearing)||a.push({command:ti.setBearing,args:[t.bearing]}),Ut(o.pitch,t.pitch)||a.push({command:ti.setPitch,args:[t.pitch]}),Ut(o.sprite,t.sprite)||a.push({command:ti.setSprite,args:[t.sprite]}),Ut(o.glyphs,t.glyphs)||a.push({command:ti.setGlyphs,args:[t.glyphs]}),Ut(o.transition,t.transition)||a.push({command:ti.setTransition,args:[t.transition]}),Ut(o.light,t.light)||a.push({command:ti.setLight,args:[t.light]});const p={},x=[];!function(I,O,N,Z){let K;for(K in O=O||{},I=I||{})Object.prototype.hasOwnProperty.call(I,K)&&(Object.prototype.hasOwnProperty.call(O,K)||Dt(K,N,Z));for(K in O)Object.prototype.hasOwnProperty.call(O,K)&&(Object.prototype.hasOwnProperty.call(I,K)?Ut(I[K],O[K])||("geojson"===I[K].type&&"geojson"===O[K].type&&yn(I,O,K)?N.push({command:ti.setGeoJSONSourceData,args:[K,O[K].data]}):wi(K,O,N,Z)):ot(K,O,N))}(o.sources,t.sources,x,p);const T=[];o.layers&&o.layers.forEach(I=>{p[I.source]?a.push({command:ti.removeLayer,args:[I.id]}):T.push(I)}),a=a.concat(x),function(I,O,N){O=O||[];const Z=(I=I||[]).map(Fn),K=O.map(Fn),te=I.reduce(bn,{}),le=O.reduce(bn,{}),me=Z.slice(),be=Object.create(null);let Be,Ke,tt,_t,st,St,At;for(Be=0,Ke=0;Be<Z.length;Be++)tt=Z[Be],Object.prototype.hasOwnProperty.call(le,tt)?Ke++:(N.push({command:ti.removeLayer,args:[tt]}),me.splice(me.indexOf(tt,Ke),1));for(Be=0,Ke=0;Be<K.length;Be++)tt=K[K.length-1-Be],me[me.length-1-Be]!==tt&&(Object.prototype.hasOwnProperty.call(te,tt)?(N.push({command:ti.removeLayer,args:[tt]}),me.splice(me.lastIndexOf(tt,me.length-Ke),1)):Ke++,St=me[me.length-Be],N.push({command:ti.addLayer,args:[le[tt],St]}),me.splice(me.length-Be,0,tt),be[tt]=!0);for(Be=0;Be<K.length;Be++)if(tt=K[Be],_t=te[tt],st=le[tt],!be[tt]&&!Ut(_t,st))if(Ut(_t.source,st.source)&&Ut(_t["source-layer"],st["source-layer"])&&Ut(_t.type,st.type)){for(At in Zi(_t.layout,st.layout,N,tt,null,ti.setLayoutProperty),Zi(_t.paint,st.paint,N,tt,null,ti.setPaintProperty),Ut(_t.filter,st.filter)||N.push({command:ti.setFilter,args:[tt,st.filter]}),Ut(_t.minzoom,st.minzoom)&&Ut(_t.maxzoom,st.maxzoom)||N.push({command:ti.setLayerZoomRange,args:[tt,st.minzoom,st.maxzoom]}),_t)Object.prototype.hasOwnProperty.call(_t,At)&&"layout"!==At&&"paint"!==At&&"filter"!==At&&"metadata"!==At&&"minzoom"!==At&&"maxzoom"!==At&&(0===At.indexOf("paint.")?Zi(_t[At],st[At],N,tt,At.slice(6),ti.setPaintProperty):Ut(_t[At],st[At])||N.push({command:ti.setLayerProperty,args:[tt,At,st[At]]}));for(At in st)Object.prototype.hasOwnProperty.call(st,At)&&!Object.prototype.hasOwnProperty.call(_t,At)&&"layout"!==At&&"paint"!==At&&"filter"!==At&&"metadata"!==At&&"minzoom"!==At&&"maxzoom"!==At&&(0===At.indexOf("paint.")?Zi(_t[At],st[At],N,tt,At.slice(6),ti.setPaintProperty):Ut(_t[At],st[At])||N.push({command:ti.setLayerProperty,args:[tt,At,st[At]]}))}else N.push({command:ti.removeLayer,args:[tt]}),St=me[me.lastIndexOf(tt)+1],N.push({command:ti.addLayer,args:[st,St]})}(T,t.layers,a)}catch(p){console.warn("Unable to compute style diff:",p),a=[{command:ti.setStyle,args:[t]}]}return a},v.dot=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]*t[3]},v.earthRadius=vd,v.emitValidationErrors=Ga,v.emptyStyle=function(){const o={},t=Me.$version;for(const a in Me.$root){const p=Me.$root[a];if(p.required){let x=null;x="version"===a?t:"array"===p.type?[]:{},null!=x&&(o[a]=x)}}return o},v.equals=function(o,t){var a=o[0],p=o[1],x=o[2],T=o[3],I=o[4],O=o[5],N=o[6],Z=o[7],K=o[8],te=o[9],le=o[10],me=o[11],be=o[12],Be=o[13],Ke=o[14],tt=o[15],_t=t[0],st=t[1],St=t[2],At=t[3],Jt=t[4],Fi=t[5],Li=t[6],Pi=t[7],Ci=t[8],xi=t[9],Si=t[10],Mi=t[11],ci=t[12],Xi=t[13],Gi=t[14],Mn=t[15];return Math.abs(a-_t)<=No*Math.max(1,Math.abs(a),Math.abs(_t))&&Math.abs(p-st)<=No*Math.max(1,Math.abs(p),Math.abs(st))&&Math.abs(x-St)<=No*Math.max(1,Math.abs(x),Math.abs(St))&&Math.abs(T-At)<=No*Math.max(1,Math.abs(T),Math.abs(At))&&Math.abs(I-Jt)<=No*Math.max(1,Math.abs(I),Math.abs(Jt))&&Math.abs(O-Fi)<=No*Math.max(1,Math.abs(O),Math.abs(Fi))&&Math.abs(N-Li)<=No*Math.max(1,Math.abs(N),Math.abs(Li))&&Math.abs(Z-Pi)<=No*Math.max(1,Math.abs(Z),Math.abs(Pi))&&Math.abs(K-Ci)<=No*Math.max(1,Math.abs(K),Math.abs(Ci))&&Math.abs(te-xi)<=No*Math.max(1,Math.abs(te),Math.abs(xi))&&Math.abs(le-Si)<=No*Math.max(1,Math.abs(le),Math.abs(Si))&&Math.abs(me-Mi)<=No*Math.max(1,Math.abs(me),Math.abs(Mi))&&Math.abs(be-ci)<=No*Math.max(1,Math.abs(be),Math.abs(ci))&&Math.abs(Be-Xi)<=No*Math.max(1,Math.abs(Be),Math.abs(Xi))&&Math.abs(Ke-Gi)<=No*Math.max(1,Math.abs(Ke),Math.abs(Gi))&&Math.abs(tt-Mn)<=No*Math.max(1,Math.abs(tt),Math.abs(Mn))},v.evaluateSizeForFeature=function(o,{uSize:t,uSizeT:a},{lowerSize:p,upperSize:x}){return"source"===o.kind?p/na:"composite"===o.kind?Lr.number(p/na,x/na,a):t},v.evaluateSizeForZoom=function(o,t){let a=0,p=0;if("constant"===o.kind)p=o.layoutSize;else if("source"!==o.kind){const{interpolationType:x,minZoom:T,maxZoom:I}=o,O=x?Xe(Yn.interpolationFactor(x,t,T,I),0,1):0;"camera"===o.kind?p=Lr.number(o.minSize,o.maxSize,O):a=O}return{uSizeT:a,uSize:p}},v.evaluateVariableOffset=Er,v.evented=Yi,v.extend=bt,v.filterObject=Ti,v.findLineIntersection=function(o,t,a,p){const x=t.y-o.y,T=t.x-o.x,I=p.y-a.y,O=p.x-a.x,N=I*T-O*x;if(0===N)return null;const Z=(O*(o.y-a.y)-I*(o.x-a.x))/N;return new Pe(o.x+Z*T,o.y+Z*x)},v.fromScaling=function(o,t){return o[0]=t[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=t[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=t[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},v.getAnchorAlignment=iu,v.getAnchorJustification=$c,v.getArrayBuffer=Vt,v.getDefaultExportFromCjs=He,v.getJSON=function(o,t){return Rt(bt(o,{type:"json"}),t)},v.getOverlapMode=Dp,v.getProtocolAction=Et,v.getRTLTextPluginStatus=vs,v.getReferrer=Sn,v.getVideo=function(o,t){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){t(null,a)};for(let p=0;p<o.length;p++){const x=window.document.createElement("source");ei(o[p])||(a.crossOrigin="Anonymous"),x.src=o[p],a.appendChild(x)}return{cancel:()=>{}}},v.groupByLayout=function(o,t){const a={};for(let x=0;x<o.length;x++){const T=t&&t[o[x].id]||ja(o[x]);t&&(t[o[x].id]=T);let I=a[T];I||(I=a[T]=[]),I.push(o[x])}const p=[];for(const x in a)p.push(a[x]);return p},v.identity=ku,v.interpolate=Lr,v.invert=function(o,t){var a=t[0],p=t[1],x=t[2],T=t[3],I=t[4],O=t[5],N=t[6],Z=t[7],K=t[8],te=t[9],le=t[10],me=t[11],be=t[12],Be=t[13],Ke=t[14],tt=t[15],_t=a*O-p*I,st=a*N-x*I,St=a*Z-T*I,At=p*N-x*O,Jt=p*Z-T*O,Fi=x*Z-T*N,Li=K*Be-te*be,Pi=K*Ke-le*be,Ci=K*tt-me*be,xi=te*Ke-le*Be,Si=te*tt-me*Be,Mi=le*tt-me*Ke,ci=_t*Mi-st*Si+St*xi+At*Ci-Jt*Pi+Fi*Li;return ci?(o[0]=(O*Mi-N*Si+Z*xi)*(ci=1/ci),o[1]=(x*Si-p*Mi-T*xi)*ci,o[2]=(Be*Fi-Ke*Jt+tt*At)*ci,o[3]=(le*Jt-te*Fi-me*At)*ci,o[4]=(N*Ci-I*Mi-Z*Pi)*ci,o[5]=(a*Mi-x*Ci+T*Pi)*ci,o[6]=(Ke*St-be*Fi-tt*st)*ci,o[7]=(K*Fi-le*St+me*st)*ci,o[8]=(I*Si-O*Ci+Z*Li)*ci,o[9]=(p*Ci-a*Si-T*Li)*ci,o[10]=(be*Jt-Be*St+tt*_t)*ci,o[11]=(te*St-K*Jt-me*_t)*ci,o[12]=(O*Pi-I*xi-N*Li)*ci,o[13]=(a*xi-p*Pi+x*Li)*ci,o[14]=(Be*st-be*At-Ke*_t)*ci,o[15]=(K*At-te*st+le*_t)*ci,o):null},v.isImageBitmap=vi,v.isSafari=fi,v.isWorker=Pt,v.keysDifference=function(o,t){const a=[];for(const p in o)p in t||a.push(p);return a},v.lazyLoadRTLTextPlugin=function(){tr.isLoading()||tr.isLoaded()||"deferred"!==vs()||bs()},v.makeRequest=Rt,v.mapObject=ni,v.mercatorXfromLng=Pp,v.mercatorYfromLat=fm,v.mercatorZfromAltitude=gm,v.mul=Oc,v.mul$1=function(o,t,a){return o[0]=t[0]*a[0],o[1]=t[1]*a[1],o[2]=t[2]*a[2],o[3]=t[3]*a[3],o},v.multiply=mo,v.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},v.operations=ti,v.ortho=function(o,t,a,p,x,T,I){var O=1/(t-a),N=1/(p-x),Z=1/(T-I);return o[0]=-2*O,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*N,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*Z,o[11]=0,o[12]=(t+a)*O,o[13]=(x+p)*N,o[14]=(I+T)*Z,o[15]=1,o},v.parseCacheControl=function(o){const t={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,p,x,T)=>{const I=x||T;return t[p]=!I||I.toLowerCase(),""}),t["max-age"]){const a=parseInt(t["max-age"],10);isNaN(a)?delete t["max-age"]:t["max-age"]=a}return t},v.parseGlyphPbf=function(o){return new Ku(o).readFields(ig,[])},v.pbf=om,v.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=zr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const t=o.bucket.layers[0].layout,a=o.bucket.layers[0]._unevaluatedLayout._values,p={layoutIconSize:a["icon-size"].possiblyEvaluate(new ir(o.bucket.zoom+1),o.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new ir(o.bucket.zoom+1),o.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new ir(18))};if("composite"===o.bucket.textSizeData.kind){const{minZoom:N,maxZoom:Z}=o.bucket.textSizeData;p.compositeTextSizes=[a["text-size"].possiblyEvaluate(new ir(N),o.canonical),a["text-size"].possiblyEvaluate(new ir(Z),o.canonical)]}if("composite"===o.bucket.iconSizeData.kind){const{minZoom:N,maxZoom:Z}=o.bucket.iconSizeData;p.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new ir(N),o.canonical),a["icon-size"].possiblyEvaluate(new ir(Z),o.canonical)]}const x=t.get("text-line-height")*zo,T="viewport"!==t.get("text-rotation-alignment")&&"point"!==t.get("symbol-placement"),I=t.get("text-keep-upright"),O=t.get("text-size");for(const N of o.bucket.features){const Z=t.get("text-font").evaluate(N,{},o.canonical).join(","),K=O.evaluate(N,{},o.canonical),te=p.layoutTextSize.evaluate(N,{},o.canonical),le=p.layoutIconSize.evaluate(N,{},o.canonical),me={horizontal:{},vertical:void 0},be=N.text;let Be,Ke=[0,0];if(be){const st=be.toString(),St=t.get("text-letter-spacing").evaluate(N,{},o.canonical)*zo,At=Q(st)?St:0,Jt=t.get("text-anchor").evaluate(N,{},o.canonical),Fi=t.get("text-variable-anchor");if(!Fi){const Si=t.get("text-radial-offset").evaluate(N,{},o.canonical);Ke=Si?Er(Jt,[Si*zo,Hc]):t.get("text-offset").evaluate(N,{},o.canonical).map(Mi=>Mi*zo)}let Li=T?"center":t.get("text-justify").evaluate(N,{},o.canonical);const Pi=t.get("symbol-placement"),Ci="point"===Pi?t.get("text-max-width").evaluate(N,{},o.canonical)*zo:0,xi=()=>{o.bucket.allowVerticalPlacement&&F(st)&&(me.vertical=pd(be,o.glyphMap,o.glyphPositions,o.imagePositions,Z,Ci,x,Jt,"left",At,Ke,v.WritingMode.vertical,!0,Pi,te,K))};if(!T&&Fi){const Si="auto"===Li?Fi.map(ci=>$c(ci)):[Li];let Mi=!1;for(let ci=0;ci<Si.length;ci++){const Xi=Si[ci];if(!me.horizontal[Xi])if(Mi)me.horizontal[Xi]=me.horizontal[0];else{const Gi=pd(be,o.glyphMap,o.glyphPositions,o.imagePositions,Z,Ci,x,"center",Xi,At,Ke,v.WritingMode.horizontal,!1,Pi,te,K);Gi&&(me.horizontal[Xi]=Gi,Mi=1===Gi.positionedLines.length)}}xi()}else{"auto"===Li&&(Li=$c(Jt));const Si=pd(be,o.glyphMap,o.glyphPositions,o.imagePositions,Z,Ci,x,Jt,Li,At,Ke,v.WritingMode.horizontal,!1,Pi,te,K);Si&&(me.horizontal[Li]=Si),xi(),F(st)&&T&&I&&(me.vertical=pd(be,o.glyphMap,o.glyphPositions,o.imagePositions,Z,Ci,x,Jt,Li,At,Ke,v.WritingMode.vertical,!1,Pi,te,K))}}let tt=!1;if(N.icon&&N.icon.name){const st=o.imageMap[N.icon.name];st&&(Be=Mp(o.imagePositions[N.icon.name],t.get("icon-offset").evaluate(N,{},o.canonical),t.get("icon-anchor").evaluate(N,{},o.canonical)),tt=!!st.sdf,void 0===o.bucket.sdfIcons?o.bucket.sdfIcons=tt:o.bucket.sdfIcons!==tt&&je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(st.pixelRatio!==o.bucket.pixelRatio||0!==t.get("icon-rotate").constantOr(1))&&(o.bucket.iconsNeedLinear=!0))}const _t=wm(me.horizontal)||me.vertical;o.bucket.iconsInText=!!_t&&_t.iconsInText,(_t||Be)&&Np(o.bucket,N,me,Be,o.imageMap,p,te,le,Ke,tt,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},v.perspective=function(o,t,a,p,x){var T,I=1/Math.tan(t/2);return o[0]=I/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=I,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=x&&x!==1/0?(o[10]=(x+p)*(T=1/(p-x)),o[14]=2*x*p*T):(o[10]=-1,o[14]=-2*p),o},v.pick=function(o,t){const a={};for(let p=0;p<t.length;p++){const x=t[p];x in o&&(a[x]=o[x])}return a},v.plugin=tr,v.pointGeometry=ne,v.polygonIntersectsPolygon=Qm,v.potpack=tu,v.register=zi,v.registerForPluginStateChange=function(o){return o({pluginStatus:Zn,pluginURL:On}),Yi.on("pluginStateChange",o),o},v.renderColorRamp=od,v.rotateX=function(o,t,a){var p=Math.sin(a),x=Math.cos(a),T=t[4],I=t[5],O=t[6],N=t[7],Z=t[8],K=t[9],te=t[10],le=t[11];return t!==o&&(o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[4]=T*x+Z*p,o[5]=I*x+K*p,o[6]=O*x+te*p,o[7]=N*x+le*p,o[8]=Z*x-T*p,o[9]=K*x-I*p,o[10]=te*x-O*p,o[11]=le*x-N*p,o},v.rotateZ=function(o,t,a){var p=Math.sin(a),x=Math.cos(a),T=t[0],I=t[1],O=t[2],N=t[3],Z=t[4],K=t[5],te=t[6],le=t[7];return t!==o&&(o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=T*x+Z*p,o[1]=I*x+K*p,o[2]=O*x+te*p,o[3]=N*x+le*p,o[4]=Z*x-T*p,o[5]=K*x-I*p,o[6]=te*x-O*p,o[7]=le*x-N*p,o},v.sameOrigin=ei,v.scale=function(o,t,a){var p=a[0],x=a[1],T=a[2];return o[0]=t[0]*p,o[1]=t[1]*p,o[2]=t[2]*p,o[3]=t[3]*p,o[4]=t[4]*x,o[5]=t[5]*x,o[6]=t[6]*x,o[7]=t[7]*x,o[8]=t[8]*T,o[9]=t[9]*T,o[10]=t[10]*T,o[11]=t[11]*T,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o},v.setRTLTextPlugin=function(o,t,a=!1){if(Zn===er||Zn===Ln||Zn===Nn)throw new Error("setRTLTextPlugin cannot be called multiple times.");On=Hn.resolveURL(o),Zn=er,En=t,js(),a||bs()},v.sphericalToCartesian=function([o,t,a]){return t+=90,t*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(t)*Math.sin(a),y:o*Math.sin(t)*Math.sin(a),z:o*Math.cos(a)}},v.toEvaluationFeature=kc,v.transformMat4=Pu,v.translate=function(o,t,a){var p,x,T,I,O,N,Z,K,te,le,me,be,Be=a[0],Ke=a[1],tt=a[2];return t===o?(o[12]=t[0]*Be+t[4]*Ke+t[8]*tt+t[12],o[13]=t[1]*Be+t[5]*Ke+t[9]*tt+t[13],o[14]=t[2]*Be+t[6]*Ke+t[10]*tt+t[14],o[15]=t[3]*Be+t[7]*Ke+t[11]*tt+t[15]):(x=t[1],T=t[2],I=t[3],O=t[4],N=t[5],Z=t[6],K=t[7],te=t[8],le=t[9],me=t[10],be=t[11],o[0]=p=t[0],o[1]=x,o[2]=T,o[3]=I,o[4]=O,o[5]=N,o[6]=Z,o[7]=K,o[8]=te,o[9]=le,o[10]=me,o[11]=be,o[12]=p*Be+O*Ke+te*tt+t[12],o[13]=x*Be+N*Ke+le*tt+t[13],o[14]=T*Be+Z*Ke+me*tt+t[14],o[15]=I*Be+K*Ke+be*tt+t[15]),o},v.triggerPluginCompletionEvent=Gr,v.unicodeBlockLookup=mi,v.uniqueId=function(){return jt++},v.v8Spec=Me,v.validateCustomStyleLayer=function(o){const t=[],a=o.id;return void 0===a&&t.push({message:`layers.${a}: missing required property "id"`}),void 0===o.render&&t.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&"2d"!==o.renderingMode&&"3d"!==o.renderingMode&&t.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),t},v.validateLight=Cl,v.validateStyle=$o,v.vectorTile=gc,v.warnOnce=je,v.wrap=lt}),l(0,function(v){class He{constructor(V){this.keyCache={},V&&this.replace(V)}replace(V){this._layerConfigs={},this._layers={},this.update(V,[])}update(V,j){for(const ge of V){this._layerConfigs[ge.id]=ge;const Ae=this._layers[ge.id]=v.createStyleLayer(ge);Ae._featureFilter=v.createFilter(Ae.filter),this.keyCache[ge.id]&&delete this.keyCache[ge.id]}for(const ge of j)delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge];this.familiesBySource={};const ie=v.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const ge of ie){const Ae=ge.map(at=>this._layers[at.id]),ve=Ae[0];if("none"===ve.visibility)continue;const se=ve.source||"";let X=this.familiesBySource[se];X||(X=this.familiesBySource[se]={});const pe=ve.sourceLayer||"_geojsonTileLayer";let Qe=X[pe];Qe||(Qe=X[pe]=[]),Qe.push(Ae)}}}class ne{constructor(V){const j={},ie=[];for(const se in V){const X=V[se],pe=j[se]={};for(const Qe in X){const at=X[+Qe];if(!at||0===at.bitmap.width||0===at.bitmap.height)continue;const xe={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};ie.push(xe),pe[Qe]={rect:xe,metrics:at.metrics}}}const{w:ge,h:Ae}=v.potpack(ie),ve=new v.AlphaImage({width:ge||1,height:Ae||1});for(const se in V){const X=V[se];for(const pe in X){const Qe=X[+pe];if(!Qe||0===Qe.bitmap.width||0===Qe.bitmap.height)continue;const at=j[se][pe].rect;v.AlphaImage.copy(Qe.bitmap,ve,{x:0,y:0},{x:at.x+1,y:at.y+1},Qe.bitmap)}}this.image=ve,this.positions=j}}v.register("GlyphAtlas",ne);class Ge{constructor(V){this.tileID=new v.OverscaledTileID(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(V,j,ie,ge,Ae){this.status="parsing",this.data=V,this.collisionBoxArray=new v.CollisionBoxArray;const ve=new v.DictionaryCoder(Object.keys(V.layers).sort()),se=new v.FeatureIndex(this.tileID,this.promoteId);se.bucketLayerIDs=[];const X={},pe={featureIndex:se,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ie},Qe=j.familiesBySource[this.source];for(const Ze in Qe){const Bt=V.layers[Ze];if(!Bt)continue;1===Bt.version&&v.warnOnce(`Vector tile source "${this.source}" layer "${Ze}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gt=ve.encode(Ze),di=[];for(let ui=0;ui<Bt.length;ui++){const nn=Bt.feature(ui),Ni=se.getId(nn,Ze);di.push({feature:nn,id:Ni,index:ui,sourceLayerIndex:Gt})}for(const ui of Qe[Ze]){const nn=ui[0];nn.source!==this.source&&v.warnOnce(`layer.source = ${nn.source} does not equal this.source = ${this.source}`),nn.minzoom&&this.zoom<Math.floor(nn.minzoom)||nn.maxzoom&&this.zoom>=nn.maxzoom||"none"!==nn.visibility&&(Pe(ui,this.zoom,ie),(X[nn.id]=nn.createBucket({index:se.bucketLayerIDs.length,layers:ui,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gt,sourceID:this.source})).populate(di,pe,this.tileID.canonical),se.bucketLayerIDs.push(ui.map(Ni=>Ni.id)))}}let at,xe,Te,ue;const De=v.mapObject(pe.glyphDependencies,Ze=>Object.keys(Ze).map(Number));this.inFlightDependencies.forEach(Ze=>Ze?.cancel()),this.inFlightDependencies=[];const Je=++this.dependencySentinel;Object.keys(De).length?this.inFlightDependencies.push(ge.send("getGlyphs",{uid:this.uid,stacks:De,source:this.source,tileID:this.tileID,type:"glyphs"},(Ze,Bt)=>{Je===this.dependencySentinel&&(at||(at=Ze,xe=Bt,Ie.call(this)))})):xe={};const Tt=Object.keys(pe.iconDependencies);Tt.length?this.inFlightDependencies.push(ge.send("getImages",{icons:Tt,source:this.source,tileID:this.tileID,type:"icons"},(Ze,Bt)=>{Je===this.dependencySentinel&&(at||(at=Ze,Te=Bt,Ie.call(this)))})):Te={};const Fe=Object.keys(pe.patternDependencies);function Ie(){if(at)return Ae(at);if(xe&&Te&&ue){const Ze=new ne(xe),Bt=new v.ImageAtlas(Te,ue);for(const Gt in X){const di=X[Gt];di instanceof v.SymbolBucket?(Pe(di.layers,this.zoom,ie),v.performSymbolLayout({bucket:di,glyphMap:xe,glyphPositions:Ze.positions,imageMap:Te,imagePositions:Bt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):di.hasPattern&&(di instanceof v.LineBucket||di instanceof v.FillBucket||di instanceof v.FillExtrusionBucket)&&(Pe(di.layers,this.zoom,ie),di.addFeatures(pe,this.tileID.canonical,Bt.patternPositions))}this.status="done",Ae(null,{buckets:Object.values(X).filter(Gt=>!Gt.isEmpty()),featureIndex:se,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ze.image,imageAtlas:Bt,glyphMap:this.returnDependencies?xe:null,iconMap:this.returnDependencies?Te:null,glyphPositions:this.returnDependencies?Ze.positions:null})}}Fe.length?this.inFlightDependencies.push(ge.send("getImages",{icons:Fe,source:this.source,tileID:this.tileID,type:"patterns"},(Ze,Bt)=>{Je===this.dependencySentinel&&(at||(at=Ze,ue=Bt,Ie.call(this)))})):ue={},Ie.call(this)}}function Pe(q,V,j){const ie=new v.EvaluationParameters(V);for(const ge of q)ge.recalculate(ie,j)}function qe(q,V){const j=v.getArrayBuffer(q.request,(ie,ge,Ae,ve)=>{ie?V(ie):ge&&V(null,{vectorTile:new v.vectorTile.VectorTile(new v.Protobuf(ge)),rawData:ge,cacheControl:Ae,expires:ve})});return()=>{j.cancel(),V()}}class Ue{constructor(V,j,ie,ge){this.actor=V,this.layerIndex=j,this.availableImages=ie,this.loadVectorData=ge||qe,this.loading={},this.loaded={}}loadTile(V,j){const ie=V.uid;this.loading||(this.loading={});const ge=!!(V&&V.request&&V.request.collectResourceTiming)&&new v.RequestPerformance(V.request),Ae=this.loading[ie]=new Ge(V);Ae.abort=this.loadVectorData(V,(ve,se)=>{if(delete this.loading[ie],ve||!se)return Ae.status="done",this.loaded[ie]=Ae,j(ve);const X=se.rawData,pe={};se.expires&&(pe.expires=se.expires),se.cacheControl&&(pe.cacheControl=se.cacheControl);const Qe={};if(ge){const at=ge.finish();at&&(Qe.resourceTiming=JSON.parse(JSON.stringify(at)))}Ae.vectorTile=se.vectorTile,Ae.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,(at,xe)=>{if(at||!xe)return j(at);j(null,v.extend({rawTileData:X.slice(0)},xe,pe,Qe))}),this.loaded=this.loaded||{},this.loaded[ie]=Ae})}reloadTile(V,j){const ie=this.loaded,ge=V.uid;if(ie&&ie[ge]){const Ae=ie[ge];Ae.showCollisionBoxes=V.showCollisionBoxes,"parsing"===Ae.status?Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,j):"done"===Ae.status&&(Ae.vectorTile?Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,j):j())}}abortTile(V,j){const ie=this.loading,ge=V.uid;ie&&ie[ge]&&ie[ge].abort&&(ie[ge].abort(),delete ie[ge]),j()}removeTile(V,j){const ie=this.loaded,ge=V.uid;ie&&ie[ge]&&delete ie[ge],j()}}class it{constructor(){this.loaded={}}loadTile(V,j){const{uid:ie,encoding:ge,rawImageData:Ae}=V,ve=v.isImageBitmap(Ae)?this.getImageData(Ae):Ae,se=new v.DEMData(ie,ve,ge);this.loaded=this.loaded||{},this.loaded[ie]=se,j(null,se)}getImageData(V){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(V.width,V.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=V.width,this.offscreenCanvas.height=V.height,this.offscreenCanvasContext.drawImage(V,0,0,V.width,V.height);const j=this.offscreenCanvasContext.getImageData(-1,-1,V.width+2,V.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new v.RGBAImage({width:j.width,height:j.height},j.data)}removeTile(V){const j=this.loaded,ie=V.uid;j&&j[ie]&&delete j[ie]}}function Le(q,V){if(0!==q.length){et(q[0],V);for(var j=1;j<q.length;j++)et(q[j],!V)}}function et(q,V){for(var j=0,ie=0,ge=0,Ae=q.length,ve=Ae-1;ge<Ae;ve=ge++){var se=(q[ge][0]-q[ve][0])*(q[ve][1]+q[ge][1]),X=j+se;ie+=Math.abs(j)>=Math.abs(se)?j-X+se:se-X+j,j=X}j+ie>=0!=!!V&&q.reverse()}var Xe=v.getDefaultExportFromCjs(function q(V,j){var ie,ge=V&&V.type;if("FeatureCollection"===ge)for(ie=0;ie<V.features.length;ie++)q(V.features[ie],j);else if("GeometryCollection"===ge)for(ie=0;ie<V.geometries.length;ie++)q(V.geometries[ie],j);else if("Feature"===ge)q(V.geometry,j);else if("Polygon"===ge)Le(V.coordinates,j);else if("MultiPolygon"===ge)for(ie=0;ie<V.coordinates.length;ie++)Le(V.coordinates[ie],j);return V});const lt=v.vectorTile.VectorTileFeature.prototype.toGeoJSON;var bt={exports:{}},jt=v.pointGeometry,ni=v.vectorTile.VectorTileFeature,Ti=qt;function qt(q,V){this.options=V||{},this.features=q,this.length=q.length}function Ne(q,V){this.id="number"==typeof q.id?q.id:void 0,this.type=q.type,this.rawGeometry=1===q.type?[q.geometry]:q.geometry,this.properties=q.tags,this.extent=V||4096}qt.prototype.feature=function(q){return new Ne(this.features[q],this.options.extent)},Ne.prototype.loadGeometry=function(){var q=this.rawGeometry;this.geometry=[];for(var V=0;V<q.length;V++){for(var j=q[V],ie=[],ge=0;ge<j.length;ge++)ie.push(new jt(j[ge][0],j[ge][1]));this.geometry.push(ie)}return this.geometry},Ne.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var q=this.geometry,V=1/0,j=-1/0,ie=1/0,ge=-1/0,Ae=0;Ae<q.length;Ae++)for(var ve=q[Ae],se=0;se<ve.length;se++){var X=ve[se];V=Math.min(V,X.x),j=Math.max(j,X.x),ie=Math.min(ie,X.y),ge=Math.max(ge,X.y)}return[V,ie,j,ge]},Ne.prototype.toGeoJSON=ni.prototype.toGeoJSON;var je=v.pbf,Oe=Ti;function Ft(q){var V=new je;return function(j,ie){for(var ge in j.layers)ie.writeMessage(3,Pt,j.layers[ge])}(q,V),V.finish()}function Pt(q,V){var j;V.writeVarintField(15,q.version||1),V.writeStringField(1,q.name||""),V.writeVarintField(5,q.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<q.length;j++)ie.feature=q.feature(j),V.writeMessage(2,Nt,ie);var ge=ie.keys;for(j=0;j<ge.length;j++)V.writeStringField(3,ge[j]);var Ae=ie.values;for(j=0;j<Ae.length;j++)V.writeMessage(4,Dn,Ae[j])}function Nt(q,V){var j=q.feature;void 0!==j.id&&V.writeVarintField(1,j.id),V.writeMessage(2,fi,q),V.writeVarintField(3,j.type),V.writeMessage(4,qi,j)}function fi(q,V){var j=q.feature,ie=q.keys,ge=q.values,Ae=q.keycache,ve=q.valuecache;for(var se in j.properties){var X=j.properties[se],pe=Ae[se];if(null!==X){void 0===pe&&(ie.push(se),Ae[se]=pe=ie.length-1),V.writeVarint(pe);var Qe=typeof X;"string"!==Qe&&"boolean"!==Qe&&"number"!==Qe&&(X=JSON.stringify(X));var at=Qe+":"+X,xe=ve[at];void 0===xe&&(ge.push(X),ve[at]=xe=ge.length-1),V.writeVarint(xe)}}}function vi(q,V){return(V<<3)+(7&q)}function Ri(q){return q<<1^q>>31}function qi(q,V){for(var j=q.loadGeometry(),ie=q.type,ge=0,Ae=0,ve=j.length,se=0;se<ve;se++){var X=j[se],pe=1;1===ie&&(pe=X.length),V.writeVarint(vi(1,pe));for(var Qe=3===ie?X.length-1:X.length,at=0;at<Qe;at++){1===at&&1!==ie&&V.writeVarint(vi(2,Qe-1));var xe=X[at].x-ge,Te=X[at].y-Ae;V.writeVarint(Ri(xe)),V.writeVarint(Ri(Te)),ge+=xe,Ae+=Te}3===ie&&V.writeVarint(vi(7,1))}}function Dn(q,V){var j=typeof q;"string"===j?V.writeStringField(1,q):"boolean"===j?V.writeBooleanField(7,q):"number"===j&&(q%1!=0?V.writeDoubleField(3,q):q<0?V.writeSVarintField(6,q):V.writeVarintField(5,q))}bt.exports=Ft,bt.exports.fromVectorTileJs=Ft,bt.exports.fromGeojsonVt=function(q,V){V=V||{};var j={};for(var ie in q)j[ie]=new Oe(q[ie].features,V),j[ie].name=ie,j[ie].version=V.version,j[ie].extent=V.extent;return Ft({layers:j})},bt.exports.GeoJSONWrapper=Oe;var Hn=v.getDefaultExportFromCjs(bt.exports);const _n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:q=>q},Vn=Math.fround||(Sn=new Float32Array(1),q=>(Sn[0]=+q,Sn[0]));var Sn;const Et=3,ft=5,Rt=6;class Vt{constructor(V){this.options=Object.assign(Object.create(_n),V),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(V){const{log:j,minZoom:ie,maxZoom:ge}=this.options;j&&console.time("total time");const Ae=`prepare ${V.length} points`;j&&console.time(Ae),this.points=V;const ve=[];for(let X=0;X<V.length;X++){const pe=V[X];if(!pe.geometry)continue;const[Qe,at]=pe.geometry.coordinates,xe=Vn(ai(Qe)),Te=Vn(ze(at));ve.push(xe,Te,1/0,X,-1,1),this.options.reduce&&ve.push(0)}let se=this.trees[ge+1]=this._createTree(ve);j&&console.timeEnd(Ae);for(let X=ge;X>=ie;X--){const pe=+Date.now();se=this.trees[X]=this._createTree(this._cluster(se,X)),j&&console.log("z%d: %d clusters in %dms",X,se.numItems,+Date.now()-pe)}return j&&console.timeEnd("total time"),this}getClusters(V,j){let ie=((V[0]+180)%360+360)%360-180;const ge=Math.max(-90,Math.min(90,V[1]));let Ae=180===V[2]?180:((V[2]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)ie=-180,Ae=180;else if(ie>Ae){const at=this.getClusters([ie,ge,180,ve],j),xe=this.getClusters([-180,ge,Ae,ve],j);return at.concat(xe)}const se=this.trees[this._limitZoom(j)],X=se.range(ai(ie),ze(ve),ai(Ae),ze(ge)),pe=se.data,Qe=[];for(const at of X){const xe=this.stride*at;Qe.push(pe[xe+ft]>1?ei(pe,xe,this.clusterProps):this.points[pe[xe+Et]])}return Qe}getChildren(V){const j=this._getOriginId(V),ie=this._getOriginZoom(V),ge="No cluster with the specified id.",Ae=this.trees[ie];if(!Ae)throw new Error(ge);const ve=Ae.data;if(j*this.stride>=ve.length)throw new Error(ge);const se=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),X=Ae.within(ve[j*this.stride],ve[j*this.stride+1],se),pe=[];for(const Qe of X){const at=Qe*this.stride;ve[at+4]===V&&pe.push(ve[at+ft]>1?ei(ve,at,this.clusterProps):this.points[ve[at+Et]])}if(0===pe.length)throw new Error(ge);return pe}getLeaves(V,j,ie){const ge=[];return this._appendLeaves(ge,V,j=j||10,ie=ie||0,0),ge}getTile(V,j,ie){const ge=this.trees[this._limitZoom(V)],Ae=Math.pow(2,V),{extent:ve,radius:se}=this.options,X=se/ve,pe=(ie-X)/Ae,Qe=(ie+1+X)/Ae,at={features:[]};return this._addTileFeatures(ge.range((j-X)/Ae,pe,(j+1+X)/Ae,Qe),ge.data,j,ie,Ae,at),0===j&&this._addTileFeatures(ge.range(1-X/Ae,pe,1,Qe),ge.data,Ae,ie,Ae,at),j===Ae-1&&this._addTileFeatures(ge.range(0,pe,X/Ae,Qe),ge.data,-1,ie,Ae,at),at.features.length?at:null}getClusterExpansionZoom(V){let j=this._getOriginZoom(V)-1;for(;j<=this.options.maxZoom;){const ie=this.getChildren(V);if(j++,1!==ie.length)break;V=ie[0].properties.cluster_id}return j}_appendLeaves(V,j,ie,ge,Ae){const ve=this.getChildren(j);for(const se of ve){const X=se.properties;if(X&&X.cluster?Ae+X.point_count<=ge?Ae+=X.point_count:Ae=this._appendLeaves(V,X.cluster_id,ie,ge,Ae):Ae<ge?Ae++:V.push(se),V.length===ie)break}return Ae}_createTree(V){const j=new v.KDBush(V.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<V.length;ie+=this.stride)j.add(V[ie],V[ie+1]);return j.finish(),j.data=V,j}_addTileFeatures(V,j,ie,ge,Ae,ve){for(const se of V){const X=se*this.stride,pe=j[X+ft]>1;let Qe,at,xe;if(pe)Qe=Ct(j,X,this.clusterProps),at=j[X],xe=j[X+1];else{const De=this.points[j[X+Et]];Qe=De.properties;const[Je,Tt]=De.geometry.coordinates;at=ai(Je),xe=ze(Tt)}const Te={type:1,geometry:[[Math.round(this.options.extent*(at*Ae-ie)),Math.round(this.options.extent*(xe*Ae-ge))]],tags:Qe};let ue;ue=pe||this.options.generateId?j[X+Et]:this.points[j[X+Et]].id,void 0!==ue&&(Te.id=ue),ve.features.push(Te)}}_limitZoom(V){return Math.max(this.options.minZoom,Math.min(Math.floor(+V),this.options.maxZoom+1))}_cluster(V,j){const{radius:ie,extent:ge,reduce:Ae,minPoints:ve}=this.options,se=ie/(ge*Math.pow(2,j)),X=V.data,pe=[],Qe=this.stride;for(let at=0;at<X.length;at+=Qe){if(X[at+2]<=j)continue;X[at+2]=j;const xe=X[at],Te=X[at+1],ue=V.within(X[at],X[at+1],se),De=X[at+ft];let Je=De;for(const Tt of ue){const Fe=Tt*Qe;X[Fe+2]>j&&(Je+=X[Fe+ft])}if(Je>De&&Je>=ve){let Tt,Fe=xe*De,Ie=Te*De,Ze=-1;const Bt=((at/Qe|0)<<5)+(j+1)+this.points.length;for(const Gt of ue){const di=Gt*Qe;if(X[di+2]<=j)continue;X[di+2]=j;const ui=X[di+ft];Fe+=X[di]*ui,Ie+=X[di+1]*ui,X[di+4]=Bt,Ae&&(Tt||(Tt=this._map(X,at,!0),Ze=this.clusterProps.length,this.clusterProps.push(Tt)),Ae(Tt,this._map(X,di)))}X[at+4]=Bt,pe.push(Fe/Je,Ie/Je,1/0,Bt,-1,Je),Ae&&pe.push(Ze)}else{for(let Tt=0;Tt<Qe;Tt++)pe.push(X[at+Tt]);if(Je>1)for(const Tt of ue){const Fe=Tt*Qe;if(!(X[Fe+2]<=j)){X[Fe+2]=j;for(let Ie=0;Ie<Qe;Ie++)pe.push(X[Fe+Ie])}}}}return pe}_getOriginId(V){return V-this.points.length>>5}_getOriginZoom(V){return(V-this.points.length)%32}_map(V,j,ie){if(V[j+ft]>1){const ve=this.clusterProps[V[j+Rt]];return ie?Object.assign({},ve):ve}const ge=this.points[V[j+Et]].properties,Ae=this.options.map(ge);return ie&&Ae===ge?Object.assign({},Ae):Ae}}function ei(q,V,j){return{type:"Feature",id:q[V+Et],properties:Ct(q,V,j),geometry:{type:"Point",coordinates:[(ie=q[V],360*(ie-.5)),rt(q[V+1])]}};var ie}function Ct(q,V,j){const ie=q[V+ft],ge=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,Ae=q[V+Rt],ve=-1===Ae?{}:Object.assign({},j[Ae]);return Object.assign(ve,{cluster:!0,cluster_id:q[V+Et],point_count:ie,point_count_abbreviated:ge})}function ai(q){return q/360+.5}function ze(q){const V=Math.sin(q*Math.PI/180),j=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return j<0?0:j>1?1:j}function rt(q){const V=(180-360*q)*Math.PI/180;return 360*Math.atan(Math.exp(V))/Math.PI-90}function dt(q,V,j,ie){for(var ge,Ae=ie,ve=j-V>>1,se=j-V,X=q[V],pe=q[V+1],Qe=q[j],at=q[j+1],xe=V+3;xe<j;xe+=3){var Te=Me(q[xe],q[xe+1],X,pe,Qe,at);if(Te>Ae)ge=xe,Ae=Te;else if(Te===Ae){var ue=Math.abs(xe-ve);ue<se&&(ge=xe,se=ue)}}Ae>ie&&(ge-V>3&&dt(q,V,ge,ie),q[ge+2]=Ae,j-ge>3&&dt(q,ge,j,ie))}function Me(q,V,j,ie,ge,Ae){var ve=ge-j,se=Ae-ie;if(0!==ve||0!==se){var X=((q-j)*ve+(V-ie)*se)/(ve*ve+se*se);X>1?(j=ge,ie=Ae):X>0&&(j+=ve*X,ie+=se*X)}return(ve=q-j)*ve+(se=V-ie)*se}function ut(q,V,j,ie){var ge={id:void 0===q?null:q,type:V,geometry:j,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ae){var ve=Ae.geometry,se=Ae.type;if("Point"===se||"MultiPoint"===se||"LineString"===se)Yt(Ae,ve);else if("Polygon"===se||"MultiLineString"===se)for(var X=0;X<ve.length;X++)Yt(Ae,ve[X]);else if("MultiPolygon"===se)for(X=0;X<ve.length;X++)for(var pe=0;pe<ve[X].length;pe++)Yt(Ae,ve[X][pe])}(ge),ge}function Yt(q,V){for(var j=0;j<V.length;j+=3)q.minX=Math.min(q.minX,V[j]),q.minY=Math.min(q.minY,V[j+1]),q.maxX=Math.max(q.maxX,V[j]),q.maxY=Math.max(q.maxY,V[j+1])}function Ut(q,V,j,ie){if(V.geometry){var ge=V.geometry.coordinates,Ae=V.geometry.type,ve=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2),se=[],X=V.id;if(j.promoteId?X=V.properties[j.promoteId]:j.generateId&&(X=ie||0),"Point"===Ae)ti(ge,se);else if("MultiPoint"===Ae)for(var pe=0;pe<ge.length;pe++)ti(ge[pe],se);else if("LineString"===Ae)ot(ge,se,ve,!1);else if("MultiLineString"===Ae){if(j.lineMetrics){for(pe=0;pe<ge.length;pe++)ot(ge[pe],se=[],ve,!1),q.push(ut(X,"LineString",se,V.properties));return}Dt(ge,se,ve,!1)}else if("Polygon"===Ae)Dt(ge,se,ve,!0);else{if("MultiPolygon"!==Ae){if("GeometryCollection"===Ae){for(pe=0;pe<V.geometry.geometries.length;pe++)Ut(q,{id:X,geometry:V.geometry.geometries[pe],properties:V.properties},j,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(pe=0;pe<ge.length;pe++){var Qe=[];Dt(ge[pe],Qe,ve,!0),se.push(Qe)}}q.push(ut(X,Ae,se,V.properties))}}function ti(q,V){V.push(wi(q[0])),V.push(yn(q[1])),V.push(0)}function ot(q,V,j,ie){for(var ge,Ae,ve=0,se=0;se<q.length;se++){var X=wi(q[se][0]),pe=yn(q[se][1]);V.push(X),V.push(pe),V.push(0),se>0&&(ve+=ie?(ge*pe-X*Ae)/2:Math.sqrt(Math.pow(X-ge,2)+Math.pow(pe-Ae,2))),ge=X,Ae=pe}var Qe=V.length-3;V[2]=1,dt(V,0,Qe,j),V[Qe+2]=1,V.size=Math.abs(ve),V.start=0,V.end=V.size}function Dt(q,V,j,ie){for(var ge=0;ge<q.length;ge++){var Ae=[];ot(q[ge],Ae,j,ie),V.push(Ae)}}function wi(q){return q/360+.5}function yn(q){var V=Math.sin(q*Math.PI/180),j=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return j<0?0:j>1?1:j}function Zi(q,V,j,ie,ge,Ae,ve,se){if(ie/=V,Ae>=(j/=V)&&ve<ie)return q;if(ve<j||Ae>=ie)return null;for(var X=[],pe=0;pe<q.length;pe++){var Qe=q[pe],at=Qe.geometry,xe=Qe.type,Te=0===ge?Qe.minX:Qe.minY,ue=0===ge?Qe.maxX:Qe.maxY;if(Te>=j&&ue<ie)X.push(Qe);else if(!(ue<j||Te>=ie)){var De=[];if("Point"===xe||"MultiPoint"===xe)Fn(at,De,j,ie,ge);else if("LineString"===xe)bn(at,De,j,ie,ge,!1,se.lineMetrics);else if("MultiLineString"===xe)pt(at,De,j,ie,ge,!1);else if("Polygon"===xe)pt(at,De,j,ie,ge,!0);else if("MultiPolygon"===xe)for(var Je=0;Je<at.length;Je++){var Tt=[];pt(at[Je],Tt,j,ie,ge,!0),Tt.length&&De.push(Tt)}if(De.length){if(se.lineMetrics&&"LineString"===xe){for(Je=0;Je<De.length;Je++)X.push(ut(Qe.id,xe,De[Je],Qe.tags));continue}"LineString"!==xe&&"MultiLineString"!==xe||(1===De.length?(xe="LineString",De=De[0]):xe="MultiLineString"),"Point"!==xe&&"MultiPoint"!==xe||(xe=3===De.length?"Point":"MultiPoint"),X.push(ut(Qe.id,xe,De,Qe.tags))}}}return X.length?X:null}function Fn(q,V,j,ie,ge){for(var Ae=0;Ae<q.length;Ae+=3){var ve=q[Ae+ge];ve>=j&&ve<=ie&&(V.push(q[Ae]),V.push(q[Ae+1]),V.push(q[Ae+2]))}}function bn(q,V,j,ie,ge,Ae,ve){for(var se,X,pe=Qt(q),Qe=0===ge?Se:ke,at=q.start,xe=0;xe<q.length-3;xe+=3){var Te=q[xe],ue=q[xe+1],De=q[xe+2],Je=q[xe+3],Tt=q[xe+4],Fe=0===ge?Te:ue,Ie=0===ge?Je:Tt,Ze=!1;ve&&(se=Math.sqrt(Math.pow(Te-Je,2)+Math.pow(ue-Tt,2))),Fe<j?Ie>j&&(X=Qe(pe,Te,ue,Je,Tt,j),ve&&(pe.start=at+se*X)):Fe>ie?Ie<ie&&(X=Qe(pe,Te,ue,Je,Tt,ie),ve&&(pe.start=at+se*X)):ce(pe,Te,ue,De),Ie<j&&Fe>=j&&(X=Qe(pe,Te,ue,Je,Tt,j),Ze=!0),Ie>ie&&Fe<=ie&&(X=Qe(pe,Te,ue,Je,Tt,ie),Ze=!0),!Ae&&Ze&&(ve&&(pe.end=at+se*X),V.push(pe),pe=Qt(q)),ve&&(at+=se)}var Bt=q.length-3;Te=q[Bt],ue=q[Bt+1],De=q[Bt+2],(Fe=0===ge?Te:ue)>=j&&Fe<=ie&&ce(pe,Te,ue,De),Bt=pe.length-3,Ae&&Bt>=3&&(pe[Bt]!==pe[0]||pe[Bt+1]!==pe[1])&&ce(pe,pe[0],pe[1],pe[2]),pe.length&&V.push(pe)}function Qt(q){var V=[];return V.size=q.size,V.start=q.start,V.end=q.end,V}function pt(q,V,j,ie,ge,Ae){for(var ve=0;ve<q.length;ve++)bn(q[ve],V,j,ie,ge,Ae,!1)}function ce(q,V,j,ie){q.push(V),q.push(j),q.push(ie)}function Se(q,V,j,ie,ge,Ae){var ve=(Ae-V)/(ie-V);return q.push(Ae),q.push(j+(ge-j)*ve),q.push(1),ve}function ke(q,V,j,ie,ge,Ae){var ve=(Ae-j)/(ge-j);return q.push(V+(ie-V)*ve),q.push(Ae),q.push(1),ve}function he(q,V){for(var j=[],ie=0;ie<q.length;ie++){var ge,Ae=q[ie],ve=Ae.type;if("Point"===ve||"MultiPoint"===ve||"LineString"===ve)ge=de(Ae.geometry,V);else if("MultiLineString"===ve||"Polygon"===ve){ge=[];for(var se=0;se<Ae.geometry.length;se++)ge.push(de(Ae.geometry[se],V))}else if("MultiPolygon"===ve)for(ge=[],se=0;se<Ae.geometry.length;se++){for(var X=[],pe=0;pe<Ae.geometry[se].length;pe++)X.push(de(Ae.geometry[se][pe],V));ge.push(X)}j.push(ut(Ae.id,ve,ge,Ae.tags))}return j}function de(q,V){var j=[];j.size=q.size,void 0!==q.start&&(j.start=q.start,j.end=q.end);for(var ie=0;ie<q.length;ie+=3)j.push(q[ie]+V,q[ie+1],q[ie+2]);return j}function Re(q,V){if(q.transformed)return q;var j,ie,ge,Ae=1<<q.z,ve=q.x,se=q.y;for(j=0;j<q.features.length;j++){var X=q.features[j],pe=X.geometry,Qe=X.type;if(X.geometry=[],1===Qe)for(ie=0;ie<pe.length;ie+=2)X.geometry.push(xt(pe[ie],pe[ie+1],V,Ae,ve,se));else for(ie=0;ie<pe.length;ie++){var at=[];for(ge=0;ge<pe[ie].length;ge+=2)at.push(xt(pe[ie][ge],pe[ie][ge+1],V,Ae,ve,se));X.geometry.push(at)}}return q.transformed=!0,q}function xt(q,V,j,ie,ge,Ae){return[Math.round(j*(q*ie-ge)),Math.round(j*(V*ie-Ae))]}function Xt(q,V,j,ie,ge){for(var Ae=V===ge.maxZoom?0:ge.tolerance/((1<<V)*ge.extent),ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:j,y:ie,z:V,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},se=0;se<q.length;se++){ve.numFeatures++,Ot(ve,q[se],Ae,ge);var X=q[se].minX,pe=q[se].minY,Qe=q[se].maxX,at=q[se].maxY;X<ve.minX&&(ve.minX=X),pe<ve.minY&&(ve.minY=pe),Qe>ve.maxX&&(ve.maxX=Qe),at>ve.maxY&&(ve.maxY=at)}return ve}function Ot(q,V,j,ie){var ge=V.geometry,Ae=V.type,ve=[];if("Point"===Ae||"MultiPoint"===Ae)for(var se=0;se<ge.length;se+=3)ve.push(ge[se]),ve.push(ge[se+1]),q.numPoints++,q.numSimplified++;else if("LineString"===Ae)_i(ve,ge,q,j,!1,!1);else if("MultiLineString"===Ae||"Polygon"===Ae)for(se=0;se<ge.length;se++)_i(ve,ge[se],q,j,"Polygon"===Ae,0===se);else if("MultiPolygon"===Ae)for(var X=0;X<ge.length;X++){var pe=ge[X];for(se=0;se<pe.length;se++)_i(ve,pe[se],q,j,!0,0===se)}if(ve.length){var Qe=V.tags||null;if("LineString"===Ae&&ie.lineMetrics){for(var at in Qe={},V.tags)Qe[at]=V.tags[at];Qe.mapbox_clip_start=ge.start/ge.size,Qe.mapbox_clip_end=ge.end/ge.size}var xe={geometry:ve,type:"Polygon"===Ae||"MultiPolygon"===Ae?3:"LineString"===Ae||"MultiLineString"===Ae?2:1,tags:Qe};null!==V.id&&(xe.id=V.id),q.features.push(xe)}}function _i(q,V,j,ie,ge,Ae){var ve=ie*ie;if(ie>0&&V.size<(ge?ve:ie))j.numPoints+=V.length/3;else{for(var se=[],X=0;X<V.length;X+=3)(0===ie||V[X+2]>ve)&&(j.numSimplified++,se.push(V[X]),se.push(V[X+1])),j.numPoints++;ge&&function(pe,Qe){for(var at=0,xe=0,Te=pe.length,ue=Te-2;xe<Te;ue=xe,xe+=2)at+=(pe[xe]-pe[ue])*(pe[xe+1]+pe[ue+1]);if(at>0===Qe)for(xe=0,Te=pe.length;xe<Te/2;xe+=2){var De=pe[xe],Je=pe[xe+1];pe[xe]=pe[Te-2-xe],pe[xe+1]=pe[Te-1-xe],pe[Te-2-xe]=De,pe[Te-1-xe]=Je}}(se,Ae),q.push(se)}}function hi(q,V){var j=(V=this.options=function(ge,Ae){for(var ve in Ae)ge[ve]=Ae[ve];return ge}(Object.create(this.options),V)).debug;if(j&&console.time("preprocess data"),V.maxZoom<0||V.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(V.promoteId&&V.generateId)throw new Error("promoteId and generateId cannot be used together.");var ge,Ae,ve,se,X,pe,ie=function(ge,Ae){var ve=[];if("FeatureCollection"===ge.type)for(var se=0;se<ge.features.length;se++)Ut(ve,ge.features[se],Ae,se);else Ut(ve,"Feature"===ge.type?ge:{geometry:ge},Ae);return ve}(q,V);this.tiles={},this.tileCoords=[],j&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",V.indexMaxZoom,V.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=ge=ie,X=Zi(ge,1,-1-(ve=(Ae=V).buffer/Ae.extent),ve,0,-1,2,Ae),pe=Zi(ge,1,1-ve,2+ve,0,-1,2,Ae),(X||pe)&&(se=Zi(ge,1,-ve,1+ve,0,-1,2,Ae)||[],X&&(se=he(X,1).concat(se)),pe&&(se=se.concat(he(pe,-1)))),(ie=se).length&&this.splitTile(ie,0,0,0),j&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Qi(q,V,j){return 32*((1<<q)*j+V)+q}function tn(q,V){return V?q.properties[V]:q.id}function Ji(q,V){if(null==q)return!0;if("Feature"===q.type)return null!=tn(q,V);if("FeatureCollection"===q.type){const j=new Set;for(const ie of q.features){const ge=tn(ie,V);if(null==ge||j.has(ge))return!1;j.add(ge)}return!0}return!1}function Vi(q,V){const j=new Map;if(null!=q)if("Feature"===q.type)j.set(tn(q,V),q);else for(const ie of q.features)j.set(tn(ie,V),ie);return j}function zt(q,V){const j=q.tileID.canonical;if(!this._geoJSONIndex)return V(null,null);const ie=this._geoJSONIndex.getTile(j.z,j.x,j.y);if(!ie)return V(null,null);const ge=new class{constructor(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.EXTENT,this.length=ve.length,this._features=ve}feature(ve){return new class{constructor(se){this._feature=se,this.extent=v.EXTENT,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(1===this._feature.type){const se=[];for(const X of this._feature.geometry)se.push([new v.Point(X[0],X[1])]);return se}{const se=[];for(const X of this._feature.geometry){const pe=[];for(const Qe of X)pe.push(new v.Point(Qe[0],Qe[1]));se.push(pe)}return se}}toGeoJSON(se,X,pe){return lt.call(this,se,X,pe)}}(this._features[ve])}}(ie.features);let Ae=Hn(ge);0===Ae.byteOffset&&Ae.byteLength===Ae.buffer.byteLength||(Ae=new Uint8Array(Ae)),V(null,{vectorTile:ge,rawData:Ae.buffer})}hi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},hi.prototype.splitTile=function(q,V,j,ie,ge,Ae,ve){for(var se=[q,V,j,ie],X=this.options,pe=X.debug;se.length;){ie=se.pop(),j=se.pop(),V=se.pop(),q=se.pop();var Qe=1<<V,at=Qi(V,j,ie),xe=this.tiles[at];if(!xe&&(pe>1&&console.time("creation"),xe=this.tiles[at]=Xt(q,V,j,ie,X),this.tileCoords.push({z:V,x:j,y:ie}),pe)){pe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",V,j,ie,xe.numFeatures,xe.numPoints,xe.numSimplified),console.timeEnd("creation"));var Te="z"+V;this.stats[Te]=(this.stats[Te]||0)+1,this.total++}if(xe.source=q,ge){if(V===X.maxZoom||V===ge)continue;var ue=1<<ge-V;if(j!==Math.floor(Ae/ue)||ie!==Math.floor(ve/ue))continue}else if(V===X.indexMaxZoom||xe.numPoints<=X.indexMaxPoints)continue;if(xe.source=null,0!==q.length){pe>1&&console.time("clipping");var De,Je,Tt,Fe,Ie,Ze,Bt=.5*X.buffer/X.extent,Gt=.5-Bt,di=.5+Bt,ui=1+Bt;De=Je=Tt=Fe=null,Ie=Zi(q,Qe,j-Bt,j+di,0,xe.minX,xe.maxX,X),Ze=Zi(q,Qe,j+Gt,j+ui,0,xe.minX,xe.maxX,X),q=null,Ie&&(De=Zi(Ie,Qe,ie-Bt,ie+di,1,xe.minY,xe.maxY,X),Je=Zi(Ie,Qe,ie+Gt,ie+ui,1,xe.minY,xe.maxY,X),Ie=null),Ze&&(Tt=Zi(Ze,Qe,ie-Bt,ie+di,1,xe.minY,xe.maxY,X),Fe=Zi(Ze,Qe,ie+Gt,ie+ui,1,xe.minY,xe.maxY,X),Ze=null),pe>1&&console.timeEnd("clipping"),se.push(De||[],V+1,2*j,2*ie),se.push(Je||[],V+1,2*j,2*ie+1),se.push(Tt||[],V+1,2*j+1,2*ie),se.push(Fe||[],V+1,2*j+1,2*ie+1)}}},hi.prototype.getTile=function(q,V,j){var ie=this.options,ge=ie.extent,Ae=ie.debug;if(q<0||q>24)return null;var ve=1<<q,se=Qi(q,V=(V%ve+ve)%ve,j);if(this.tiles[se])return Re(this.tiles[se],ge);Ae>1&&console.log("drilling down to z%d-%d-%d",q,V,j);for(var X,pe=q,Qe=V,at=j;!X&&pe>0;)pe--,Qe=Math.floor(Qe/2),at=Math.floor(at/2),X=this.tiles[Qi(pe,Qe,at)];return X&&X.source?(Ae>1&&console.log("found parent tile z%d-%d-%d",pe,Qe,at),Ae>1&&console.time("drilling down"),this.splitTile(X.source,pe,Qe,at,q,V,j),Ae>1&&console.timeEnd("drilling down"),this.tiles[se]?Re(this.tiles[se],ge):null):null};class li extends Ue{constructor(V,j,ie,ge){super(V,j,ie,zt),this._dataUpdateable=new Map,this.loadGeoJSON=(Ae,ve)=>{const{promoteId:se}=Ae;if(Ae.request)return v.getJSON(Ae.request,(X,pe,Qe,at)=>{this._dataUpdateable=Ji(pe,se)?Vi(pe,se):void 0,ve(X,pe,Qe,at)});if("string"==typeof Ae.data)try{const X=JSON.parse(Ae.data);this._dataUpdateable=Ji(X,se)?Vi(X,se):void 0,ve(null,X)}catch{ve(new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`))}else Ae.dataDiff?this._dataUpdateable?(function(X,pe,Qe){var at,xe,Te,ue;if(pe.removeAll&&X.clear(),pe.remove)for(const De of pe.remove)X.delete(De);if(pe.add)for(const De of pe.add){const Je=tn(De,Qe);null!=Je&&X.set(Je,De)}if(pe.update)for(const De of pe.update){let Je=X.get(De.id);if(null==Je)continue;const Tt=!De.removeAllProperties&&((null===(at=De.removeProperties)||void 0===at?void 0:at.length)>0||(null===(xe=De.addOrUpdateProperties)||void 0===xe?void 0:xe.length)>0);if((De.newGeometry||De.removeAllProperties||Tt)&&(Je={...Je},X.set(De.id,Je),Tt&&(Je.properties={...Je.properties})),De.newGeometry&&(Je.geometry=De.newGeometry),De.removeAllProperties)Je.properties={};else if((null===(Te=De.removeProperties)||void 0===Te?void 0:Te.length)>0)for(const Fe of De.removeProperties)Object.prototype.hasOwnProperty.call(Je.properties,Fe)&&delete Je.properties[Fe];if((null===(ue=De.addOrUpdateProperties)||void 0===ue?void 0:ue.length)>0)for(const{key:Fe,value:Ie}of De.addOrUpdateProperties)Je.properties[Fe]=Ie}}(this._dataUpdateable,Ae.dataDiff,se),ve(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):ve(new Error(`Cannot update existing geojson data in ${Ae.source}`)):ve(new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},ge&&(this.loadGeoJSON=ge)}loadData(V,j){var ie;null===(ie=this._pendingRequest)||void 0===ie||ie.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ge=!!(V&&V.request&&V.request.collectResourceTiming)&&new v.RequestPerformance(V.request);this._pendingCallback=j,this._pendingRequest=this.loadGeoJSON(V,(Ae,ve)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ae||!ve)return j(Ae);if("object"!=typeof ve)return j(new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`));{Xe(ve,!0);try{if(V.filter){const X=v.createExpression(V.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===X.result)throw new Error(X.value.map(Qe=>`${Qe.key}: ${Qe.message}`).join(", "));ve={type:"FeatureCollection",features:ve.features.filter(Qe=>X.value.evaluate({zoom:0},Qe))}}this._geoJSONIndex=V.cluster?new Vt(function({superclusterOptions:X,clusterProperties:pe}){if(!pe||!X)return X;const Qe={},at={},xe={accumulated:null,zoom:0},Te={properties:null},ue=Object.keys(pe);for(const De of ue){const[Je,Tt]=pe[De],Fe=v.createExpression(Tt),Ie=v.createExpression("string"==typeof Je?[Je,["accumulated"],["get",De]]:Je);Qe[De]=Fe.value,at[De]=Ie.value}return X.map=De=>{Te.properties=De;const Je={};for(const Tt of ue)Je[Tt]=Qe[Tt].evaluate(xe,Te);return Je},X.reduce=(De,Je)=>{Te.properties=Je;for(const Tt of ue)xe.accumulated=De[Tt],De[Tt]=at[Tt].evaluate(xe,Te)},X}(V)).load(ve.features):new hi(X=ve,V.geojsonVtOptions)}catch(X){return j(X)}this.loaded={};const se={};if(ge){const X=ge.finish();X&&(se.resourceTiming={},se.resourceTiming[V.source]=JSON.parse(JSON.stringify(X)))}j(null,se)}var X})}reloadTile(V,j){const ie=this.loaded;return ie&&ie[V.uid]?super.reloadTile(V,j):this.loadTile(V,j)}removeSource(V,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),j()}getClusterExpansionZoom(V,j){try{j(null,this._geoJSONIndex.getClusterExpansionZoom(V.clusterId))}catch(ie){j(ie)}}getClusterChildren(V,j){try{j(null,this._geoJSONIndex.getChildren(V.clusterId))}catch(ie){j(ie)}}getClusterLeaves(V,j){try{j(null,this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset))}catch(ie){j(ie)}}}class vt{constructor(V){this.self=V,this.actor=new v.Actor(V,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Ue,geojson:li},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(j,ie)=>{if(this.workerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.workerSourceTypes[j]=ie},this.self.registerRTLTextPlugin=j=>{if(v.plugin.isParsed())throw new Error("RTL text plugin already registered.");v.plugin.applyArabicShaping=j.applyArabicShaping,v.plugin.processBidirectionalText=j.processBidirectionalText,v.plugin.processStyledBidirectionalText=j.processStyledBidirectionalText}}setReferrer(V,j){this.referrer=j}setImages(V,j,ie){this.availableImages[V]=j;for(const ge in this.workerSources[V]){const Ae=this.workerSources[V][ge];for(const ve in Ae)Ae[ve].availableImages=j}ie()}setLayers(V,j,ie){this.getLayerIndex(V).replace(j),ie()}updateLayers(V,j,ie){this.getLayerIndex(V).update(j.layers,j.removedIds),ie()}loadTile(V,j,ie){this.getWorkerSource(V,j.type,j.source).loadTile(j,ie)}loadDEMTile(V,j,ie){this.getDEMWorkerSource(V,j.source).loadTile(j,ie)}reloadTile(V,j,ie){this.getWorkerSource(V,j.type,j.source).reloadTile(j,ie)}abortTile(V,j,ie){this.getWorkerSource(V,j.type,j.source).abortTile(j,ie)}removeTile(V,j,ie){this.getWorkerSource(V,j.type,j.source).removeTile(j,ie)}removeDEMTile(V,j){this.getDEMWorkerSource(V,j.source).removeTile(j)}removeSource(V,j,ie){if(!this.workerSources[V]||!this.workerSources[V][j.type]||!this.workerSources[V][j.type][j.source])return;const ge=this.workerSources[V][j.type][j.source];delete this.workerSources[V][j.type][j.source],void 0!==ge.removeSource?ge.removeSource(j,ie):ie()}loadWorkerSource(V,j,ie){try{this.self.importScripts(j.url),ie()}catch(ge){ie(ge.toString())}}syncRTLPluginState(V,j,ie){try{v.plugin.setState(j);const ge=v.plugin.getPluginURL();if(v.plugin.isLoaded()&&!v.plugin.isParsed()&&null!=ge){this.self.importScripts(ge);const Ae=v.plugin.isParsed();ie(Ae?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ge}`),Ae)}}catch(ge){ie(ge.toString())}}getAvailableImages(V){let j=this.availableImages[V];return j||(j=[]),j}getLayerIndex(V){let j=this.layerIndexes[V];return j||(j=this.layerIndexes[V]=new He),j}getWorkerSource(V,j,ie){return this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][j]||(this.workerSources[V][j]={}),this.workerSources[V][j][ie]||(this.workerSources[V][j][ie]=new this.workerSourceTypes[j]({send:(Ae,ve,se)=>{this.actor.send(Ae,ve,se,V)}},this.getLayerIndex(V),this.getAvailableImages(V))),this.workerSources[V][j][ie]}getDEMWorkerSource(V,j){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][j]||(this.demWorkerSources[V][j]=new it),this.demWorkerSources[V][j]}}return v.isWorker()&&(self.worker=new vt(self)),vt}),l(0,function(v){class ne{static testProp(i){if(!ne.docStyle)return i[0];for(let d=0;d<i.length;d++)if(i[d]in ne.docStyle)return i[d];return i[0]}static create(i,d,_){const w=window.document.createElement(i);return void 0!==d&&(w.className=d),_&&_.appendChild(w),w}static createNS(i,d){return window.document.createElementNS(i,d)}static disableDrag(){ne.docStyle&&ne.selectProp&&(ne.userSelect=ne.docStyle[ne.selectProp],ne.docStyle[ne.selectProp]="none")}static enableDrag(){ne.docStyle&&ne.selectProp&&(ne.docStyle[ne.selectProp]=ne.userSelect)}static setTransform(i,d){i.style[ne.transformProp]=d}static addEventListener(i,d,_,w={}){i.addEventListener(d,_,"passive"in w?w:w.capture)}static removeEventListener(i,d,_,w={}){i.removeEventListener(d,_,"passive"in w?w:w.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",ne.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",ne.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",ne.suppressClickInternal,!0)},0)}static mousePos(i,d){const _=i.getBoundingClientRect();return new v.Point(d.clientX-_.left-i.clientLeft,d.clientY-_.top-i.clientTop)}static touchPos(i,d){const _=i.getBoundingClientRect(),w=[];for(let S=0;S<d.length;S++)w.push(new v.Point(d[S].clientX-_.left-i.clientLeft,d[S].clientY-_.top-i.clientTop));return w}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}ne.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,ne.selectProp=ne.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),ne.transformProp=ne.testProp(["transform","WebkitTransform"]);const Ge={supported:!1,testSupport:function(E){!Ue&&qe&&(it?Le(E):Pe=E)}};let Pe,qe,Ue=!1,it=!1;function Le(E){const i=E.createTexture();E.bindTexture(E.TEXTURE_2D,i);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,qe),E.isContextLost())return;Ge.supported=!0}catch{}E.deleteTexture(i),Ue=!0}var et,Xe,E;typeof document<"u"&&(qe=document.createElement("img"),qe.onload=function(){Pe&&Le(Pe),Pe=null,it=!0},qe.onerror=function(){Ue=!0,Pe=null},qe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(E){let i,d,_,w;E.resetRequestQueue=()=>{i=[],d=0,_=0,w={}},E.addThrottleControl=D=>{const k=_++;return w[k]=D,k},E.removeThrottleControl=D=>{delete w[D],b()},E.getImage=(D,k,R=!0)=>{Ge.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const B={requestParameters:D,supportImageRefresh:R,callback:k,cancelled:!1,completed:!1,cancel:()=>{B.completed||B.cancelled||(B.cancelled=!0,B.innerRequest&&(B.innerRequest.cancel(),d--),b())}};return i.push(B),b(),B};const S=D=>{const{requestParameters:k,supportImageRefresh:R,callback:B}=D;return v.extend(k,{type:"image"}),(!1!==R||v.isWorker()||v.getProtocolAction(k.url)||k.headers&&!Object.keys(k.headers).reduce((ee,oe)=>ee&&"accept"===oe,!0)?v.makeRequest:y)(k,(ee,oe,Ee,Ce)=>{f(D,B,ee,oe,Ee,Ce)})},f=(D,k,R,B,ee,oe)=>{var Ee,Ce;R?k(R):B instanceof HTMLImageElement||B instanceof ImageBitmap?k(null,B):B&&(Ee=B,Ce=(Ee,Ce)=>{null!=Ee?k(Ee):null!=Ce&&k(null,Ce,{cacheControl:ee,expires:oe})},"function"==typeof createImageBitmap?v.arrayBufferToImageBitmap(Ee,Ce):v.arrayBufferToImage(Ee,Ce)),D.cancelled||(D.completed=!0,d--,b())},b=()=>{const D=(()=>{const k=Object.keys(w);let R=!1;if(k.length>0)for(const B of k)if(R=w[B](),R)break;return R})()?v.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:v.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=d;k<D&&i.length>0;k++){const R=i.shift();if(R.cancelled){k--;continue}const B=S(R);d++,R.innerRequest=B}},y=(D,k)=>{const R=new Image,B=D.url;let ee=!1;const oe=D.credentials;return oe&&"include"===oe?R.crossOrigin="use-credentials":(oe&&"same-origin"===oe||!v.sameOrigin(B))&&(R.crossOrigin="anonymous"),R.fetchPriority="high",R.onload=()=>{k(null,R),R.onerror=R.onload=null},R.onerror=()=>{ee||k(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),R.onerror=R.onload=null},R.src=B,{cancel:()=>{ee=!0,R.src=""}}}}(et||(et={})),et.resetRequestQueue(),(E=Xe||(Xe={})).Glyphs="Glyphs",E.Image="Image",E.Source="Source",E.SpriteImage="SpriteImage",E.SpriteJSON="SpriteJSON",E.Style="Style",E.Tile="Tile",E.Unknown="Unknown";class lt{constructor(i){this._transformRequestFn=i}transformRequest(i,d){return this._transformRequestFn&&this._transformRequestFn(i,d)||{url:i}}normalizeSpriteURL(i,d,_){const w=function(S){const f=S.match(bt);if(!f)throw new Error(`Unable to parse URL "${S}"`);return{protocol:f[1],authority:f[2],path:f[3]||"/",params:f[4]?f[4].split("&"):[]}}(i);return w.path+=`${d}${_}`,function(S){const f=S.params.length?`?${S.params.join("&")}`:"";return`${S.protocol}://${S.authority}${S.path}${f}`}(w)}setTransformRequest(i){this._transformRequestFn=i}}const bt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function jt(E){var i=new v.ARRAY_TYPE(3);return i[0]=E[0],i[1]=E[1],i[2]=E[2],i}var ni,Ti=function(E,i,d){return E[0]=i[0]-d[0],E[1]=i[1]-d[1],E[2]=i[2]-d[2],E};ni=new v.ARRAY_TYPE(3),v.ARRAY_TYPE!=Float32Array&&(ni[0]=0,ni[1]=0,ni[2]=0);var qt=function(E){var i=E[0],d=E[1];return i*i+d*d};function Ne(E){const i=[];if("string"==typeof E)i.push({id:"default",url:E});else if(E&&E.length>0){const d=[];for(const{id:_,url:w}of E){const S=`${_}${w}`;-1===d.indexOf(S)&&(d.push(S),i.push({id:_,url:w}))}}return i}function je(E,i,d,_,w){if(_)return void E(_);if(w!==Object.values(i).length||w!==Object.values(d).length)return;const S={};for(const f in i){S[f]={};const b=v.browser.getImageCanvasContext(d[f]),y=i[f];for(const D in y){const{width:k,height:R,x:B,y:ee,sdf:oe,pixelRatio:Ee,stretchX:Ce,stretchY:nt,content:yt}=y[D];S[f][D]={data:null,pixelRatio:Ee,sdf:oe,stretchX:Ce,stretchY:nt,content:yt,spriteData:{width:k,height:R,x:B,y:ee,context:b}}}}E(null,S)}!function(){var E=new v.ARRAY_TYPE(2);v.ARRAY_TYPE!=Float32Array&&(E[0]=0,E[1]=0)}();class Oe{constructor(i,d,_,w){this.context=i,this.format=_,this.texture=i.gl.createTexture(),this.update(d,w)}update(i,d,_){const{width:w,height:S}=i,f=!(this.size&&this.size[0]===w&&this.size[1]===S||_),{context:b}=this,{gl:y}=b;if(this.useMipmap=!(!d||!d.useMipmap),y.bindTexture(y.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA&&(!d||!1!==d.premultiply)),f)this.size=[w,S],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||v.isImageBitmap(i)?y.texImage2D(y.TEXTURE_2D,0,this.format,this.format,y.UNSIGNED_BYTE,i):y.texImage2D(y.TEXTURE_2D,0,this.format,w,S,0,this.format,y.UNSIGNED_BYTE,i.data);else{const{x:D,y:k}=_||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||v.isImageBitmap(i)?y.texSubImage2D(y.TEXTURE_2D,0,D,k,y.RGBA,y.UNSIGNED_BYTE,i):y.texSubImage2D(y.TEXTURE_2D,0,D,k,w,S,y.RGBA,y.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&y.generateMipmap(y.TEXTURE_2D)}bind(i,d,_){const{context:w}=this,{gl:S}=w;S.bindTexture(S.TEXTURE_2D,this.texture),_!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=S.LINEAR),i!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,i),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,_||i),this.filter=i),d!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,d),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Ft(E){const{userImage:i}=E;return!!(i&&i.render&&i.render())&&(E.data.replace(new Uint8Array(i.data.buffer)),!0)}class Pt extends v.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new v.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:d,callback:_}of this.requestors)this._notify(d,_);this.requestors=[]}}getImage(i){const d=this.images[i];if(d&&!d.data&&d.spriteData){const _=d.spriteData;d.data=new v.RGBAImage({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),d.spriteData=null}return d}addImage(i,d){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,d)&&(this.images[i]=d)}_validate(i,d){let _=!0;const w=d.data||d.spriteData;return this._validateStretch(d.stretchX,w&&w.width)||(this.fire(new v.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),_=!1),this._validateStretch(d.stretchY,w&&w.height)||(this.fire(new v.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),_=!1),this._validateContent(d.content,d)||(this.fire(new v.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),_=!1),_}_validateStretch(i,d){if(!i)return!0;let _=0;for(const w of i){if(w[0]<_||w[1]<w[0]||d<w[1])return!1;_=w[1]}return!0}_validateContent(i,d){if(!i)return!0;if(4!==i.length)return!1;const _=d.spriteData,w=_&&_.width||d.data.width,S=_&&_.height||d.data.height;return!(i[0]<0||w<i[0]||i[1]<0||S<i[1]||i[2]<0||w<i[2]||i[3]<0||S<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,d,_=!0){const w=this.getImage(i);if(_&&(w.data.width!==d.data.width||w.data.height!==d.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=w.version+1,this.images[i]=d,this.updatedImages[i]=!0}removeImage(i){const d=this.images[i];delete this.images[i],delete this.patterns[i],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,d){let _=!0;if(!this.isLoaded())for(const w of i)this.images[w]||(_=!1);this.isLoaded()||_?this._notify(i,d):this.requestors.push({ids:i,callback:d})}_notify(i,d){const _={};for(const w of i){let S=this.getImage(w);S||(this.fire(new v.Event("styleimagemissing",{id:w})),S=this.getImage(w)),S?_[w]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:!(!S.userImage||!S.userImage.render)}:v.warnOnce(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,_)}getPixelSize(){const{width:i,height:d}=this.atlasImage;return{width:i,height:d}}getPattern(i){const d=this.patterns[i],_=this.getImage(i);if(!_)return null;if(d&&d.position.version===_.version)return d.position;if(d)d.position.version=_.version;else{const w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},S=new v.ImagePosition(w,_);this.patterns[i]={bin:w,position:S}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const d=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Oe(i,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const S in this.patterns)i.push(this.patterns[S].bin);const{w:d,h:_}=v.potpack(i),w=this.atlasImage;w.resize({width:d||1,height:_||1});for(const S in this.patterns){const{bin:f}=this.patterns[S],b=f.x+1,y=f.y+1,D=this.getImage(S).data,k=D.width,R=D.height;v.RGBAImage.copy(D,w,{x:0,y:0},{x:b,y},{width:k,height:R}),v.RGBAImage.copy(D,w,{x:0,y:R-1},{x:b,y:y-1},{width:k,height:1}),v.RGBAImage.copy(D,w,{x:0,y:0},{x:b,y:y+R},{width:k,height:1}),v.RGBAImage.copy(D,w,{x:k-1,y:0},{x:b-1,y},{width:1,height:R}),v.RGBAImage.copy(D,w,{x:0,y:0},{x:b+k,y},{width:1,height:R})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const d of i){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const _=this.getImage(d);_||v.warnOnce(`Image with ID: "${d}" was not found`),Ft(_)&&this.updateImage(d,_)}}}const Nt=1e20;function fi(E,i,d,_,w,S,f,b,y){for(let D=i;D<i+_;D++)vi(E,d*S+D,S,w,f,b,y);for(let D=d;D<d+w;D++)vi(E,D*S+i,1,_,f,b,y)}function vi(E,i,d,_,w,S,f){S[0]=0,f[0]=-Nt,f[1]=Nt,w[0]=E[i];for(let b=1,y=0,D=0;b<_;b++){w[b]=E[i+b*d];const k=b*b;do{const R=S[y];D=(w[b]-w[R]+k-R*R)/(b-R)/2}while(D<=f[y]&&--y>-1);y++,S[y]=b,f[y]=D,f[y+1]=Nt}for(let b=0,y=0;b<_;b++){for(;f[y+1]<b;)y++;const D=S[y],k=b-D;E[i+b*d]=w[D]+k*k}}class Ri{constructor(i,d){this.requestManager=i,this.localIdeographFontFamily=d,this.entries={}}setURL(i){this.url=i}getGlyphs(i,d){const _=[];for(const w in i)for(const S of i[w])_.push({stack:w,id:S});v.asyncAll(_,({stack:w,id:S},f)=>{let b=this.entries[w];b||(b=this.entries[w]={glyphs:{},requests:{},ranges:{}});let y=b.glyphs[S];if(void 0!==y)return void f(null,{stack:w,id:S,glyph:y});if(y=this._tinySDF(b,w,S),y)return b.glyphs[S]=y,void f(null,{stack:w,id:S,glyph:y});const D=Math.floor(S/256);if(256*D>65535)return void f(new Error("glyphs > 65535 not supported"));if(b.ranges[D])return void f(null,{stack:w,id:S,glyph:y});if(!this.url)return void f(new Error("glyphsUrl is not set"));let k=b.requests[D];k||(k=b.requests[D]=[],Ri.loadGlyphRange(w,D,this.url,this.requestManager,(R,B)=>{if(B){for(const ee in B)this._doesCharSupportLocalGlyph(+ee)||(b.glyphs[+ee]=B[+ee]);b.ranges[D]=!0}for(const ee of k)ee(R,B);delete b.requests[D]})),k.push((R,B)=>{R?f(R):B&&f(null,{stack:w,id:S,glyph:B[S]||null})})},(w,S)=>{if(w)d(w);else if(S){const f={};for(const{stack:b,id:y,glyph:D}of S)(f[b]||(f[b]={}))[y]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};d(null,f)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(v.unicodeBlockLookup["CJK Unified Ideographs"](i)||v.unicodeBlockLookup["Hangul Syllables"](i)||v.unicodeBlockLookup.Hiragana(i)||v.unicodeBlockLookup.Katakana(i))}_tinySDF(i,d,_){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(_))return;let S=i.tinySDF;if(!S){let b="400";/bold/i.test(d)?b="900":/medium/i.test(d)?b="500":/light/i.test(d)&&(b="200"),S=i.tinySDF=new Ri.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:w,fontWeight:b})}const f=S.draw(String.fromCharCode(_));return{id:_,bitmap:new v.AlphaImage({width:f.width||30,height:f.height||30},f.data),metrics:{width:f.glyphWidth||24,height:f.glyphHeight||24,left:f.glyphLeft||0,top:f.glyphTop-27||-8,advance:f.glyphAdvance||24}}}}Ri.loadGlyphRange=function(E,i,d,_,w){const S=256*i,f=S+255,b=_.transformRequest(d.replace("{fontstack}",E).replace("{range}",`${S}-${f}`),Xe.Glyphs);v.getArrayBuffer(b,(y,D)=>{if(y)w(y);else if(D){const k={};for(const R of v.parseGlyphPbf(D))k[R.id]=R;w(null,k)}})},Ri.TinySDF=class{constructor({fontSize:E=24,buffer:i=3,radius:d=8,cutoff:_=.25,fontFamily:w="sans-serif",fontWeight:S="normal",fontStyle:f="normal"}={}){this.buffer=i,this.cutoff=_,this.radius=d;const b=this.size=E+4*i,y=this._createCanvas(b),D=this.ctx=y.getContext("2d",{willReadFrequently:!0});D.font=`${f} ${S} ${E}px ${w}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(E){const i=document.createElement("canvas");return i.width=i.height=E,i}draw(E){const{width:i,actualBoundingBoxAscent:d,actualBoundingBoxDescent:_,actualBoundingBoxLeft:w,actualBoundingBoxRight:S}=this.ctx.measureText(E),f=Math.ceil(d),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-w))),y=Math.min(this.size-this.buffer,f+Math.ceil(_)),D=b+2*this.buffer,k=y+2*this.buffer,R=Math.max(D*k,0),B=new Uint8ClampedArray(R),ee={data:B,width:D,height:k,glyphWidth:b,glyphHeight:y,glyphTop:f,glyphLeft:0,glyphAdvance:i};if(0===b||0===y)return ee;const{ctx:oe,buffer:Ee,gridInner:Ce,gridOuter:nt}=this;oe.clearRect(Ee,Ee,b,y),oe.fillText(E,Ee,Ee+f);const yt=oe.getImageData(Ee,Ee,b,y);nt.fill(Nt,0,R),Ce.fill(0,0,R);for(let $e=0;$e<y;$e++)for(let gt=0;gt<b;gt++){const kt=yt.data[4*($e*b+gt)+3]/255;if(0===kt)continue;const Lt=($e+Ee)*D+gt+Ee;if(1===kt)nt[Lt]=0,Ce[Lt]=Nt;else{const Zt=.5-kt;nt[Lt]=Zt>0?Zt*Zt:0,Ce[Lt]=Zt<0?Zt*Zt:0}}fi(nt,0,0,D,k,D,this.f,this.v,this.z),fi(Ce,Ee,Ee,b,y,D,this.f,this.v,this.z);for(let $e=0;$e<R;$e++){const gt=Math.sqrt(nt[$e])-Math.sqrt(Ce[$e]);B[$e]=Math.round(255-255*(gt/this.radius+this.cutoff))}return ee}};class qi{constructor(){this.specification=v.v8Spec.light.position}possiblyEvaluate(i,d){return v.sphericalToCartesian(i.expression.evaluate(d))}interpolate(i,d,_){return{x:v.interpolate.number(i.x,d.x,_),y:v.interpolate.number(i.y,d.y,_),z:v.interpolate.number(i.z,d.z,_)}}}let Dn,Hn;class _n extends v.Evented{constructor(i){super(),Dn=Dn||new v.Properties({anchor:new v.DataConstantProperty(v.v8Spec.light.anchor),position:new qi,color:new v.DataConstantProperty(v.v8Spec.light.color),intensity:new v.DataConstantProperty(v.v8Spec.light.intensity)}),this._transitionable=new v.Transitionable(Dn),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,d={}){if(!this._validate(v.validateLight,i,d))for(const _ in i){const w=i[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,_){return(!_||!1!==_.validate)&&v.emitValidationErrors(this,i.call(v.validateStyle,v.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:v.v8Spec})))}}class Vn{constructor(i,d){this.width=i,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,d){const _=i.join(",")+String(d);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(i,d)),this.dashEntry[_]}getDashRanges(i,d,_){const w=[];let S=i.length%2==1?-i[i.length-1]*_:0,f=i[0]*_,b=!0;w.push({left:S,right:f,isDash:b,zeroLength:0===i[0]});let y=i[0];for(let D=1;D<i.length;D++){b=!b;const k=i[D];S=y*_,y+=k,f=y*_,w.push({left:S,right:f,isDash:b,zeroLength:0===k})}return w}addRoundDash(i,d,_){const w=d/2;for(let S=-_;S<=_;S++){const f=this.width*(this.nextRow+_+S);let b=0,y=i[b];for(let D=0;D<this.width;D++){D/y.right>1&&(y=i[++b]);const k=Math.abs(D-y.left),R=Math.abs(D-y.right),B=Math.min(k,R);let ee;const oe=S/_*(w+1);if(y.isDash){const Ee=w-Math.abs(oe);ee=Math.sqrt(B*B+Ee*Ee)}else ee=w-Math.sqrt(B*B+oe*oe);this.data[f+D]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(i){for(let b=i.length-1;b>=0;--b){const y=i[b],D=i[b+1];y.zeroLength?i.splice(b,1):D&&D.isDash===y.isDash&&(D.left=y.left,i.splice(b,1))}const d=i[0],_=i[i.length-1];d.isDash===_.isDash&&(d.left=_.left-this.width,_.right=d.right+this.width);const w=this.width*this.nextRow;let S=0,f=i[S];for(let b=0;b<this.width;b++){b/f.right>1&&(f=i[++S]);const y=Math.abs(b-f.left),D=Math.abs(b-f.right),k=Math.min(y,D);this.data[w+b]=Math.max(0,Math.min(255,(f.isDash?k:-k)+128))}}addDash(i,d){const _=d?7:0,w=2*_+1;if(this.nextRow+w>this.height)return v.warnOnce("LineAtlas out of space"),null;let S=0;for(let b=0;b<i.length;b++)S+=i[b];if(0!==S){const b=this.width/S,y=this.getDashRanges(i,this.width,b);d?this.addRoundDash(y,b,_):this.addRegularDash(y)}const f={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:S};return this.nextRow+=w,this.dirty=!0,f}bind(i){const d=i.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class Sn{constructor(i,d,_){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=_;const w=this.workerPool.acquire(_);for(let S=0;S<w.length;S++){const f=new Sn.Actor(w[S],d,_);f.name=`Worker ${S}`,this.actors.push(f)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,d,_){v.asyncAll(this.actors,(w,S)=>{w.send(i,d,S)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function Et(E,i,d){const _=function(w,S){if(w)return d(w);if(S){const f=v.pick(v.extend(S,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(f.vectorLayers=S.vector_layers,f.vectorLayerIds=f.vectorLayers.map(b=>b.id)),d(null,f)}};return E.url?v.getJSON(i.transformRequest(E.url,Xe.Source),_):v.browser.frame(()=>_(null,E))}Sn.Actor=v.Actor;class ft{constructor(i,d){i&&(d?this.setSouthWest(i).setNorthEast(d):Array.isArray(i)&&(4===i.length?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof v.LngLat?new v.LngLat(i.lng,i.lat):v.LngLat.convert(i),this}setSouthWest(i){return this._sw=i instanceof v.LngLat?new v.LngLat(i.lng,i.lat):v.LngLat.convert(i),this}extend(i){const d=this._sw,_=this._ne;let w,S;if(i instanceof v.LngLat)w=i,S=i;else{if(!(i instanceof ft))return Array.isArray(i)?4===i.length||i.every(Array.isArray)?this.extend(ft.convert(i)):this.extend(v.LngLat.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(v.LngLat.convert(i)):this;if(w=i._sw,S=i._ne,!w||!S)return this}return d||_?(d.lng=Math.min(w.lng,d.lng),d.lat=Math.min(w.lat,d.lat),_.lng=Math.max(S.lng,_.lng),_.lat=Math.max(S.lat,_.lat)):(this._sw=new v.LngLat(w.lng,w.lat),this._ne=new v.LngLat(S.lng,S.lat)),this}getCenter(){return new v.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new v.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new v.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:d,lat:_}=v.LngLat.convert(i);let w=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&w}static convert(i){return i instanceof ft?i:i&&new ft(i)}static fromLngLat(i,d=0){const _=360*d/40075017,w=_/Math.cos(Math.PI/180*i.lat);return new ft(new v.LngLat(i.lng-w,i.lat-_),new v.LngLat(i.lng+w,i.lat+_))}}class Rt{constructor(i,d,_){this.bounds=ft.convert(this.validateBounds(i)),this.minzoom=d||0,this.maxzoom=_||24}validateBounds(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const d=Math.pow(2,i.z),_=Math.floor(v.mercatorXfromLng(this.bounds.getWest())*d),w=Math.floor(v.mercatorYfromLat(this.bounds.getNorth())*d),S=Math.ceil(v.mercatorXfromLng(this.bounds.getEast())*d),f=Math.ceil(v.mercatorYfromLat(this.bounds.getSouth())*d);return i.x>=_&&i.x<S&&i.y>=w&&i.y<f}}class Vt extends v.Evented{constructor(i,d,_,w){if(super(),this.load=()=>{this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Et(this._options,this.map._requestManager,(S,f)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),S?this.fire(new v.ErrorEvent(S)):f&&(v.extend(this,f),f.bounds&&(this.tileBounds=new Rt(f.bounds,this.minzoom,this.maxzoom)),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>v.extend({},this._options),this.id=i,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,v.extend(this,v.pick(d,["url","scheme","tileSize","promoteId"])),this._options=v.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,d){const _=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w={request:this.map._requestManager.transformRequest(_,Xe.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(f,b){return delete i.request,i.aborted?d(null):f&&404!==f.status?d(f):(b&&b.resourceTiming&&(i.resourceTiming=b.resourceTiming),this.map._refreshExpiredTiles&&b&&i.setExpiryData(b),i.loadVectorData(b,this.map.painter),d(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,i.actor&&"expired"!==i.state?"loading"===i.state?i.reloadCallback=d:i.request=i.actor.send("reloadTile",w,S.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",w,S.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ei extends v.Evented{constructor(i,d,_,w){super(),this.id=i,this.dispatcher=_,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=v.extend({type:"raster"},d),v.extend(this,v.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Et(this._options,this.map._requestManager,(i,d)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new v.ErrorEvent(i)):d&&(v.extend(this,d),d.bounds&&(this.tileBounds=new Rt(d.bounds,this.minzoom,this.maxzoom)),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return v.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,d){const _=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=et.getImage(this.map._requestManager.transformRequest(_,Xe.Tile),(w,S,f)=>{if(delete i.request,i.aborted)i.state="unloaded",d(null);else if(w)i.state="errored",d(w);else if(S){this.map._refreshExpiredTiles&&f&&i.setExpiryData(f);const b=this.map.painter.context,y=b.gl;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new Oe(b,S,y.RGBA,{useMipmap:!0}),i.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),b.extTextureFilterAnisotropic&&y.texParameterf(y.TEXTURE_2D,b.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,b.extTextureFilterAnisotropicMax)),i.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(i,d){i.request&&(i.request.cancel(),delete i.request),d()}unloadTile(i,d){i.texture&&this.map.painter.saveTileTexture(i.texture),d()}hasTransition(){return!1}}class Ct extends ei{constructor(i,d,_,w){super(i,d,_,w),this.type="raster-dem",this.maxzoom=22,this._options=v.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}loadTile(i,d){const _=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function w(S,f){S&&(i.state="errored",d(S)),f&&(i.dem=f,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",d(null))}i.request=et.getImage(this.map._requestManager.transformRequest(_,Xe.Tile),function(S,f){if(delete i.request,i.aborted)i.state="unloaded",d(null);else if(S)i.state="errored",d(S);else if(f){this.map._refreshExpiredTiles&&i.setExpiryData(f),delete f.cacheControl,delete f.expires;const b=v.isImageBitmap(f)&&(null==Hn&&(Hn=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),Hn)?f:v.browser.getImageData(f,1),y={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:b,encoding:this.encoding};i.actor&&"expired"!==i.state||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",y,w.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const d=i.canonical,_=Math.pow(2,d.z),w=(d.x-1+_)%_,S=0===d.x?i.wrap-1:i.wrap,f=(d.x+1+_)%_,b=d.x+1===_?i.wrap+1:i.wrap,y={};return y[new v.OverscaledTileID(i.overscaledZ,S,d.z,w,d.y).key]={backfilled:!1},y[new v.OverscaledTileID(i.overscaledZ,b,d.z,f,d.y).key]={backfilled:!1},d.y>0&&(y[new v.OverscaledTileID(i.overscaledZ,S,d.z,w,d.y-1).key]={backfilled:!1},y[new v.OverscaledTileID(i.overscaledZ,i.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},y[new v.OverscaledTileID(i.overscaledZ,b,d.z,f,d.y-1).key]={backfilled:!1}),d.y+1<_&&(y[new v.OverscaledTileID(i.overscaledZ,S,d.z,w,d.y+1).key]={backfilled:!1},y[new v.OverscaledTileID(i.overscaledZ,i.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},y[new v.OverscaledTileID(i.overscaledZ,b,d.z,f,d.y+1).key]={backfilled:!1}),y}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class ai extends v.Evented{constructor(i,d,_,w){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>v.extend({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(w),this._data=d.data,this._options=v.extend({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const S=v.EXTENT/this.tileSize;this.workerOptions=v.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*S,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*S,extent:v.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:v.EXTENT,radius:(d.clusterRadius||50)*S,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(void 0!==i.clusterRadius&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),void 0!==i.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},d),this}getClusterChildren(i,d){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},d),this}getClusterLeaves(i,d,_,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:d,offset:_},w),this}_updateWorkerData(i){const d=v.extend({},this.workerOptions);i?d.dataDiff=i:"string"==typeof this._data?(d.request=this.map._requestManager.transformRequest(v.browser.resolveURL(this._data),Xe.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new v.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(_,w)=>{if(this._pendingLoads--,this._removed||w&&w.abandoned)return void this.fire(new v.Event("dataabort",{dataType:"source"}));let S=null;if(w&&w.resourceTiming&&w.resourceTiming[this.id]&&(S=w.resourceTiming[this.id].slice(0)),_)return void this.fire(new v.ErrorEvent(_));const f={dataType:"source"};this._collectResourceTiming&&S&&S.length>0&&v.extend(f,{resourceTiming:S}),this.fire(new v.Event("data",{...f,sourceDataType:"metadata"})),this.fire(new v.Event("data",{...f,sourceDataType:"content"}))})}loaded(){return 0===this._pendingLoads}loadTile(i,d){const _=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const w={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(_,w,(S,f)=>(delete i.request,i.unloadVectorData(),i.aborted?d(null):S?d(S):(i.loadVectorData(f,this.map.painter,"reloadTile"===_),d(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var ze=v.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class rt extends v.Evented{constructor(i,d,_,w){super(),this.load=(S,f)=>{this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=et.getImage(this.map._requestManager.transformRequest(this.url,Xe.Image),(b,y)=>{this._request=null,this._loaded=!0,b?this.fire(new v.ErrorEvent(b)):y&&(this.image=y,S&&(this.coordinates=S),f&&f(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||!this.image)return;const S=this.map.painter.context,f=S.gl;this.boundsBuffer||(this.boundsBuffer=S.createVertexBuffer(this._boundsArray,ze.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Oe(S,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let b=!1;for(const y in this.tiles){const D=this.tiles[y];"loaded"!==D.state&&(D.state="loaded",D.texture=this.texture,b=!0)}b&&this.fire(new v.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=_,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const d=i.map(v.MercatorCoordinate.fromLngLat);this.tileID=function(w){let S=1/0,f=1/0,b=-1/0,y=-1/0;for(const B of w)S=Math.min(S,B.x),f=Math.min(f,B.y),b=Math.max(b,B.x),y=Math.max(y,B.y);const D=Math.max(b-S,y-f),k=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),R=Math.pow(2,k);return new v.CanonicalTileID(k,Math.floor((S+b)/2*R),Math.floor((f+y)/2*R))}(d),this.minzoom=this.maxzoom=this.tileID.z;const _=d.map(w=>this.tileID.getTilePoint(w)._round());return this._boundsArray=new v.RasterBoundsArray,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,v.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,v.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,v.EXTENT,v.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,d){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},d(null)):(i.state="errored",d(null))}hasTransition(){return!1}}class dt extends rt{constructor(i,d,_,w){super(i,d,_,w),this.load=()=>{this._loaded=!1;const S=this.options;this.urls=[];for(const f of S.urls)this.urls.push(this.map._requestManager.transformRequest(f,Xe.Source).url);v.getVideo(this.urls,(f,b)=>{this._loaded=!0,f?this.fire(new v.ErrorEvent(f)):b&&(this.video=b,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const S=this.map.painter.context,f=S.gl;this.boundsBuffer||(this.boundsBuffer=S.createVertexBuffer(this._boundsArray,ze.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new Oe(S,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let b=!1;for(const y in this.tiles){const D=this.tiles[y];"loaded"!==D.state&&(D.state="loaded",D.texture=this.texture,b=!0)}b&&this.fire(new v.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const d=this.video.seekable;i<d.start(0)||i>d.end(0)?this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Me extends rt{constructor(i,d,_,w){super(i,d,_,w),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new v.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let S=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,S=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,S=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const f=this.map.painter.context,b=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,ze.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(S||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Oe(f,this.canvas,b.RGBA,{premultiply:!0});let y=!1;for(const D in this.tiles){const k=this.tiles[D];"loaded"!==k.state&&(k.state="loaded",k.texture=this.texture,y=!0)}y&&this.fire(new v.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(S=>!Array.isArray(S)||2!==S.length||S.some(f=>"number"!=typeof f))||this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof HTMLCanvasElement||this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const ut={},Yt=E=>{switch(E){case"geojson":return ai;case"image":return rt;case"raster":return ei;case"raster-dem":return Ct;case"vector":return Vt;case"video":return dt;case"canvas":return Me}return ut[E]};function Ut(E,i){const d=v.create();return v.translate(d,d,[1,1,0]),v.scale(d,d,[.5*E.width,.5*E.height,1]),v.multiply(d,d,E.calculatePosMatrix(i.toUnwrapped()))}function ti(E,i,d,_,w,S){const f=function(R,B,ee){if(R)for(const oe of R){const Ee=B[oe];if(Ee&&Ee.source===ee&&"fill-extrusion"===Ee.type)return!0}else for(const oe in B){const Ee=B[oe];if(Ee.source===ee&&"fill-extrusion"===Ee.type)return!0}return!1}(w&&w.layers,i,E.id),b=S.maxPitchScaleFactor(),y=E.tilesIn(_,b,f);y.sort(ot);const D=[];for(const R of y)D.push({wrappedTileID:R.tileID.wrapped().key,queryResults:R.tile.queryRenderedFeatures(i,d,E._state,R.queryGeometry,R.cameraQueryGeometry,R.scale,w,S,b,Ut(E.transform,R.tileID))});const k=function(R){const B={},ee={};for(const oe of R){const Ee=oe.queryResults,Ce=oe.wrappedTileID,nt=ee[Ce]=ee[Ce]||{};for(const yt in Ee){const $e=Ee[yt],gt=nt[yt]=nt[yt]||{},kt=B[yt]=B[yt]||[];for(const Lt of $e)gt[Lt.featureIndex]||(gt[Lt.featureIndex]=!0,kt.push(Lt))}}return B}(D);for(const R in k)k[R].forEach(B=>{const ee=B.feature,oe=E.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=oe});return k}function ot(E,i){const d=E.tileID,_=i.tileID;return d.overscaledZ-_.overscaledZ||d.canonical.y-_.canonical.y||d.wrap-_.wrap||d.canonical.x-_.canonical.x}class Dt{constructor(i,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=v.uniqueId(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const d=i+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,d,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(w,S){const f={};if(!S)return f;for(const b of w){const y=b.layerIds.map(D=>S.getLayer(D)).filter(Boolean);if(0!==y.length){b.layers=y,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(D=>y.filter(k=>k.id===D)[0]));for(const D of y)f[D.id]=b}}return f}(i.buckets,d.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const S=this.buckets[w];if(S instanceof v.SymbolBucket){if(this.hasSymbolBuckets=!0,!_)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const S=this.buckets[w];if(S instanceof v.SymbolBucket&&S.hasRTLText){this.hasRTLText=!0,v.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const w in this.buckets){const S=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(w).queryRadius(S))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new v.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const _ in this.buckets){const w=this.buckets[_];w.uploadPending()&&w.upload(i)}const d=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Oe(i,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Oe(i,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,d,_,w,S,f,b,y,D,k){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:S,scale:f,tileSize:this.tileSize,pixelPosMatrix:k,transform:y,params:b,queryPadding:this.queryPadding*D},i,d,_):{}}querySourceFeatures(i,d){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const w=_.loadVTLayers(),S=d&&d.sourceLayer?d.sourceLayer:"",f=w._geojsonTileLayer||w[S];if(!f)return;const b=v.createFilter(d&&d.filter),{z:y,x:D,y:k}=this.tileID.canonical,R={z:y,x:D,y:k};for(let B=0;B<f.length;B++){const ee=f.feature(B);if(b.needGeometry){const Ce=v.toEvaluationFeature(ee,!0);if(!b.filter(new v.EvaluationParameters(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!b.filter(new v.EvaluationParameters(this.tileID.overscaledZ),ee))continue;const oe=_.getId(ee,S),Ee=new v.GeoJSONFeature(ee,y,D,k,oe);Ee.tile=R,i.push(Ee)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const d=this.expirationTime;if(i.cacheControl){const _=v.parseCacheControl(i.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const _=Date.now();let w=!1;if(this.expirationTime>_)w=!1;else if(d)if(this.expirationTime<d)w=!0;else{const S=this.expirationTime-d;S?this.expirationTime=_+Math.max(S,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(i,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(i).length)return;const _=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!d.style.hasLayer(w))continue;const S=this.buckets[w],f=S.layers[0].sourceLayer||"_geojsonTileLayer",b=_[f],y=i[f];if(!b||!y||0===Object.keys(y).length)continue;S.update(y,b,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=d&&d.style&&d.style.getLayer(w);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(S)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<v.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=v.browser.now()+i}setDependencies(i,d){const _={};for(const w of d)_[w]=!0;this.dependencies[i]=_}hasDependency(i,d){for(const _ of i){const w=this.dependencies[_];if(w)for(const S of d)if(w[S])return!0}return!1}}class wi{constructor(i,d){this.max=i,this.onRemove=d,this.reset()}reset(){for(const i in this.data)for(const d of this.data[i])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(i,d,_){const w=i.wrapped().key;void 0===this.data[w]&&(this.data[w]=[]);const S={value:d,timeout:void 0};if(void 0!==_&&(S.timeout=setTimeout(()=>{this.remove(i,S)},_)),this.data[w].push(S),this.order.push(w),this.order.length>this.max){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const d=this.data[i].shift();return d.timeout&&clearTimeout(d.timeout),0===this.data[i].length&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),d.value}getByKey(i){const d=this.data[i];return d?d[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,d){if(!this.has(i))return this;const _=i.wrapped().key,w=void 0===d?0:this.data[_].indexOf(d),S=this.data[_][w];return this.data[_].splice(w,1),S.timeout&&clearTimeout(S.timeout),0===this.data[_].length&&delete this.data[_],this.onRemove(S.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(i){const d=[];for(const _ in this.data)for(const w of this.data[_])i(w.value)||d.push(w);for(const _ of d)this.remove(_.value.tileID,_)}}class yn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,d,_){const w=String(d);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][w]=this.stateChanges[i][w]||{},v.extend(this.stateChanges[i][w],_),null===this.deletedStates[i]){this.deletedStates[i]={};for(const S in this.state[i])S!==w&&(this.deletedStates[i][S]=null)}else if(this.deletedStates[i]&&null===this.deletedStates[i][w]){this.deletedStates[i][w]={};for(const S in this.state[i][w])_[S]||(this.deletedStates[i][w][S]=null)}else for(const S in _)this.deletedStates[i]&&this.deletedStates[i][w]&&null===this.deletedStates[i][w][S]&&delete this.deletedStates[i][w][S]}removeFeatureState(i,d,_){if(null===this.deletedStates[i])return;const w=String(d);if(this.deletedStates[i]=this.deletedStates[i]||{},_&&void 0!==d)null!==this.deletedStates[i][w]&&(this.deletedStates[i][w]=this.deletedStates[i][w]||{},this.deletedStates[i][w][_]=null);else if(void 0!==d)if(this.stateChanges[i]&&this.stateChanges[i][w])for(_ in this.deletedStates[i][w]={},this.stateChanges[i][w])this.deletedStates[i][w][_]=null;else this.deletedStates[i][w]=null;else this.deletedStates[i]=null}getState(i,d){const _=String(d),w=v.extend({},(this.state[i]||{})[_],(this.stateChanges[i]||{})[_]);if(null===this.deletedStates[i])return{};if(this.deletedStates[i]){const S=this.deletedStates[i][d];if(null===S)return{};for(const f in S)delete w[f]}return w}initializeTileState(i,d){i.setFeatureState(this.state,d)}coalesceChanges(i,d){const _={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const S={};for(const f in this.stateChanges[w])this.state[w][f]||(this.state[w][f]={}),v.extend(this.state[w][f],this.stateChanges[w][f]),S[f]=this.state[w][f];_[w]=S}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const S={};if(null===this.deletedStates[w])for(const f in this.state[w])S[f]={},this.state[w][f]={};else for(const f in this.deletedStates[w]){if(null===this.deletedStates[w][f])this.state[w][f]={};else for(const b of Object.keys(this.deletedStates[w][f]))delete this.state[w][f][b];S[f]=this.state[w][f]}_[w]=_[w]||{},v.extend(_[w],S)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(_).length)for(const w in i)i[w].setFeatureState(_,d)}}class Zi extends v.Evented{constructor(i,d,_){super(),this.id=i,this.dispatcher=_,this.on("data",w=>{"source"===w.dataType&&"metadata"===w.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===w.dataType&&"content"===w.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,S,f,b)=>{const y=new(Yt(S.type))(w,S,f,b);if(y.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${y.id}`);return y})(i,d,_,this),this._tiles={},this._cache=new wi(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new yn,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const d=this._tiles[i];if("loaded"!==d.state&&"errored"!==d.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,d){return this._source.loadTile(i,d)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new v.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const _=this._tiles[d];_.upload(i),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Fn).map(i=>i.key)}getRenderableIds(i){const d=[];for(const _ in this._tiles)this._isIdRenderable(_,i)&&d.push(this._tiles[_]);return i?d.sort((_,w)=>{const S=_.tileID,f=w.tileID,b=new v.Point(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),y=new v.Point(f.canonical.x,f.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-f.overscaledZ||y.y-b.y||y.x-b.x}).map(_=>_.tileID.key):d.map(_=>_.tileID).sort(Fn).map(_=>_.key)}hasRenderableParent(i){const d=this.findLoadedParent(i,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(i,d){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(d||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)"errored"!==this._tiles[i].state&&this._reloadTile(i,"reloading")}}_reloadTile(i,d){const _=this._tiles[i];_&&("loading"!==_.state&&(_.state=d),this._loadTile(_,this._tileLoaded.bind(this,_,i,d)))}_tileLoaded(i,d,_,w){if(w)return i.state="errored",void(404!==w.status?this._source.fire(new v.ErrorEvent(w,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=v.browser.now(),"expired"===_&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(d,i),"raster-dem"===this.getSource().type&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new v.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const d=this.getRenderableIds();for(let w=0;w<d.length;w++){const S=d[w];if(i.neighboringTiles&&i.neighboringTiles[S]){const f=this.getTileByID(S);_(i,f),_(f,i)}}function _(w,S){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let f=S.tileID.canonical.x-w.tileID.canonical.x;const b=S.tileID.canonical.y-w.tileID.canonical.y,y=Math.pow(2,w.tileID.canonical.z),D=S.tileID.key;0===f&&0===b||Math.abs(b)>1||(Math.abs(f)>1&&(1===Math.abs(f+y)?f+=y:1===Math.abs(f-y)&&(f-=y)),S.dem&&w.dem&&(w.dem.backfillBorder(S.dem,f,b),w.neighboringTiles&&w.neighboringTiles[D]&&(w.neighboringTiles[D].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,d,_,w){for(const S in this._tiles){let f=this._tiles[S];if(w[S]||!f.hasData()||f.tileID.overscaledZ<=d||f.tileID.overscaledZ>_)continue;let b=f.tileID;for(;f&&f.tileID.overscaledZ>d+1;){const D=f.tileID.scaledTo(f.tileID.overscaledZ-1);f=this._tiles[D.key],f&&f.hasData()&&(b=D)}let y=b;for(;y.overscaledZ>d;)if(y=y.scaledTo(y.overscaledZ-1),i[y.key]){w[b.key]=b;break}}}findLoadedParent(i,d){if(i.key in this._loadedParentTiles){const _=this._loadedParentTiles[i.key];return _&&_.tileID.overscaledZ>=d?_:null}for(let _=i.overscaledZ-1;_>=d;_--){const w=i.scaledTo(_),S=this._getLoadedTile(w);if(S)return S}}_getLoadedTile(i){const d=this._tiles[i.key];return d&&d.hasData()?d:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const d=Math.ceil(i.width/this._source.tileSize)+1,_=Math.ceil(i.height/this._source.tileSize)+1,w=Math.floor(d*_*(null===this._maxTileCacheZoomLevels?v.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(S)}handleWrapJump(i){const d=Math.round((i-(void 0===this._prevLng?i:this._prevLng))/360);if(this._prevLng=i,d){const _={};for(const w in this._tiles){const S=this._tiles[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+d),_[S.tileID.key]=S}this._tiles=_;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(i,d){if(this.transform=i,this.terrain=d,!this._sourceLoaded||this._paused)return;let _;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new v.OverscaledTileID(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(_=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(_=_.filter(k=>this._source.hasTile(k)))):_=[];const w=i.coveringZoomLevel(this._source),S=Math.max(w-Zi.maxOverzooming,this._source.minzoom),f=Math.max(w+Zi.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const k={};for(const R of _)if(R.canonical.z>this._source.minzoom){const B=R.scaledTo(R.canonical.z-1);k[B.key]=B;const ee=R.scaledTo(Math.max(this._source.minzoom,Math.min(R.canonical.z,5)));k[ee.key]=ee}_=_.concat(Object.values(k))}const b=0===_.length&&!this._updated&&this._didEmitContent;this._updated=!0,b&&this.fire(new v.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const y=this._updateRetainedTiles(_,w);if(bn(this._source.type)){const k={},R={},B=Object.keys(y),ee=v.browser.now();for(const oe of B){const Ee=y[oe],Ce=this._tiles[oe];if(!Ce||0!==Ce.fadeEndTime&&Ce.fadeEndTime<=ee)continue;const nt=this.findLoadedParent(Ee,S);nt&&(this._addTile(nt.tileID),k[nt.tileID.key]=nt.tileID),R[oe]=Ee}this._retainLoadedChildren(R,w,f,y);for(const oe in k)y[oe]||(this._coveredTiles[oe]=!0,y[oe]=k[oe]);if(d){const oe={},Ee={};for(const Ce of _)this._tiles[Ce.key].hasData()?oe[Ce.key]=Ce:Ee[Ce.key]=Ce;for(const Ce in Ee){const nt=Ee[Ce].children(this._source.maxzoom);this._tiles[nt[0].key]&&this._tiles[nt[1].key]&&this._tiles[nt[2].key]&&this._tiles[nt[3].key]&&(oe[nt[0].key]=y[nt[0].key]=nt[0],oe[nt[1].key]=y[nt[1].key]=nt[1],oe[nt[2].key]=y[nt[2].key]=nt[2],oe[nt[3].key]=y[nt[3].key]=nt[3],delete Ee[Ce])}for(const Ce in Ee){const nt=this.findLoadedParent(Ee[Ce],this._source.minzoom);if(nt){oe[nt.tileID.key]=y[nt.tileID.key]=nt.tileID;for(const yt in oe)oe[yt].isChildOf(nt.tileID)&&delete oe[yt]}}for(const Ce in this._tiles)oe[Ce]||(this._coveredTiles[Ce]=!0)}}for(const k in y)this._tiles[k].clearFadeHold();const D=v.keysDifference(this._tiles,y);for(const k of D){const R=this._tiles[k];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(k)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,d){const _={},w={},S=Math.max(d-Zi.maxOverzooming,this._source.minzoom),f=Math.max(d+Zi.maxUnderzooming,this._source.minzoom),b={};for(const y of i){const D=this._addTile(y);_[y.key]=y,D.hasData()||d<this._source.maxzoom&&(b[y.key]=y)}this._retainLoadedChildren(b,d,f,_);for(const y of i){let D=this._tiles[y.key];if(D.hasData())continue;if(d+1>this._source.maxzoom){const R=y.children(this._source.maxzoom)[0],B=this.getTile(R);if(B&&B.hasData()){_[R.key]=R;continue}}else{const R=y.children(this._source.maxzoom);if(_[R[0].key]&&_[R[1].key]&&_[R[2].key]&&_[R[3].key])continue}let k=D.wasRequested();for(let R=y.overscaledZ-1;R>=S;--R){const B=y.scaledTo(R);if(w[B.key])break;if(w[B.key]=!0,D=this.getTile(B),!D&&k&&(D=this._addTile(B)),D){const ee=D.hasData();if((k||ee)&&(_[B.key]=B),k=D.wasRequested(),ee)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const d=[];let _,w=this._tiles[i].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){_=this._loadedParentTiles[w.key];break}d.push(w.key);const S=w.scaledTo(w.overscaledZ-1);if(_=this._getLoadedTile(S),_)break;w=S}for(const S of d)this._loadedParentTiles[S]=_}}_addTile(i){let d=this._tiles[i.key];if(d)return d;d=this._cache.getAndRemove(i),d&&(this._setTileReloadTimer(i.key,d),d.tileID=i,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,d)));const _=d;return d||(d=new Dt(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,i.key,d.state))),d.uses++,this._tiles[i.key]=d,_||this._source.fire(new v.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(i,d){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const _=d.getExpiryTimeout();_&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},_))}_removeTile(i){const d=this._tiles[i];d&&(d.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),d.uses>0||(d.hasData()&&"reloading"!==d.state?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,d,_){const w=[],S=this.transform;if(!S)return w;const f=_?S.getCameraQueryGeometry(i):i,b=i.map(oe=>S.pointCoordinate(oe,this.terrain)),y=f.map(oe=>S.pointCoordinate(oe,this.terrain)),D=this.getIds();let k=1/0,R=1/0,B=-1/0,ee=-1/0;for(const oe of y)k=Math.min(k,oe.x),R=Math.min(R,oe.y),B=Math.max(B,oe.x),ee=Math.max(ee,oe.y);for(let oe=0;oe<D.length;oe++){const Ee=this._tiles[D[oe]];if(Ee.holdingForFade())continue;const Ce=Ee.tileID,nt=Math.pow(2,S.zoom-Ee.tileID.overscaledZ),yt=d*Ee.queryPadding*v.EXTENT/Ee.tileSize/nt,$e=[Ce.getTilePoint(new v.MercatorCoordinate(k,R)),Ce.getTilePoint(new v.MercatorCoordinate(B,ee))];if($e[0].x-yt<v.EXTENT&&$e[0].y-yt<v.EXTENT&&$e[1].x+yt>=0&&$e[1].y+yt>=0){const gt=b.map(Lt=>Ce.getTilePoint(Lt)),kt=y.map(Lt=>Ce.getTilePoint(Lt));w.push({tile:Ee,tileID:Ce,queryGeometry:gt,cameraQueryGeometry:kt,scale:nt})}}return w}getVisibleCoordinates(i){const d=this.getRenderableIds(i).map(_=>this._tiles[_].tileID);for(const _ of d)_.posMatrix=this.transform.calculatePosMatrix(_.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(bn(this._source.type)){const i=v.browser.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=i)return!0}return!1}setFeatureState(i,d,_){this._state.updateState(i=i||"_geojsonTileLayer",d,_)}removeFeatureState(i,d,_){this._state.removeFeatureState(i=i||"_geojsonTileLayer",d,_)}getFeatureState(i,d){return this._state.getState(i=i||"_geojsonTileLayer",d)}setDependencies(i,d,_){const w=this._tiles[i];w&&w.setDependencies(d,_)}reloadTilesForDependencies(i,d){for(const _ in this._tiles)this._tiles[_].hasDependency(i,d)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(i,d))}}function Fn(E,i){const d=Math.abs(2*E.wrap)-+(E.wrap<0),_=Math.abs(2*i.wrap)-+(i.wrap<0);return E.overscaledZ-i.overscaledZ||_-d||i.canonical.y-E.canonical.y||i.canonical.x-E.canonical.x}function bn(E){return"raster"===E||"image"===E||"video"===E}Zi.maxOverzooming=10,Zi.maxUnderzooming=3;const Qt="mapboxgl_preloaded_worker_pool";class pt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<pt.workerCount;)this.workers.push(new Worker(v.config.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Qt]}numActive(){return Object.keys(this.active).length}}const ce=Math.floor(v.browser.hardwareConcurrency/2);let Se;function ke(){return Se||(Se=new pt),Se}pt.workerCount=v.isSafari(globalThis)?Math.max(Math.min(ce,3),1):1;class he{constructor(i,d){this.reset(i,d)}reset(i,d){this.points=i||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(1===this.points.length)return this.points[0];i=v.clamp(i,0,1);let d=1,_=this._distances[d];const w=i*this.paddedLength+this.padding;for(;_<w&&d<this._distances.length;)_=this._distances[++d];const S=d-1,f=this._distances[S],b=_-f,y=b>0?(w-f)/b:0;return this.points[S].mult(1-y).add(this.points[d].mult(y))}}function de(E,i){let d=!0;return"always"===E||"never"!==E&&"never"!==i||(d=!1),d}class Re{constructor(i,d,_){const w=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(i/_),this.yCellCount=Math.ceil(d/_);for(let f=0;f<this.xCellCount*this.yCellCount;f++)w.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=d,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,d,_,w,S){this._forEachCell(d,_,w,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(w),this.bboxes.push(S)}insertCircle(i,d,_,w){this._forEachCell(d-w,_-w,d+w,_+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(d),this.circles.push(_),this.circles.push(w)}_insertBoxCell(i,d,_,w,S,f){this.boxCells[S].push(f)}_insertCircleCell(i,d,_,w,S,f){this.circleCells[S].push(f)}_query(i,d,_,w,S,f,b){if(_<0||i>this.width||w<0||d>this.height)return[];const y=[];if(i<=0&&d<=0&&this.width<=_&&this.height<=w){if(S)return[{key:null,x1:i,y1:d,x2:_,y2:w}];for(let D=0;D<this.boxKeys.length;D++)y.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const k=this.circles[3*D],R=this.circles[3*D+1],B=this.circles[3*D+2];y.push({key:this.circleKeys[D],x1:k-B,y1:R-B,x2:k+B,y2:R+B})}}else this._forEachCell(i,d,_,w,this._queryCell,y,{hitTest:S,overlapMode:f,seenUids:{box:{},circle:{}}},b);return y}query(i,d,_,w){return this._query(i,d,_,w,!1,null)}hitTest(i,d,_,w,S,f){return this._query(i,d,_,w,!0,S,f).length>0}hitTestCircle(i,d,_,w,S){const f=i-_,b=i+_,y=d-_,D=d+_;if(b<0||f>this.width||D<0||y>this.height)return!1;const k=[];return this._forEachCell(f,y,b,D,this._queryCellCircle,k,{hitTest:!0,overlapMode:w,circle:{x:i,y:d,radius:_},seenUids:{box:{},circle:{}}},S),k.length>0}_queryCell(i,d,_,w,S,f,b,y){const{seenUids:D,hitTest:k,overlapMode:R}=b,B=this.boxCells[S];if(null!==B){const oe=this.bboxes;for(const Ee of B)if(!D.box[Ee]){D.box[Ee]=!0;const Ce=4*Ee,nt=this.boxKeys[Ee];if(i<=oe[Ce+2]&&d<=oe[Ce+3]&&_>=oe[Ce+0]&&w>=oe[Ce+1]&&(!y||y(nt))&&(!k||!de(R,nt.overlapMode))&&(f.push({key:nt,x1:oe[Ce],y1:oe[Ce+1],x2:oe[Ce+2],y2:oe[Ce+3]}),k))return!0}}const ee=this.circleCells[S];if(null!==ee){const oe=this.circles;for(const Ee of ee)if(!D.circle[Ee]){D.circle[Ee]=!0;const Ce=3*Ee,nt=this.circleKeys[Ee];if(this._circleAndRectCollide(oe[Ce],oe[Ce+1],oe[Ce+2],i,d,_,w)&&(!y||y(nt))&&(!k||!de(R,nt.overlapMode))){const yt=oe[Ce],$e=oe[Ce+1],gt=oe[Ce+2];if(f.push({key:nt,x1:yt-gt,y1:$e-gt,x2:yt+gt,y2:$e+gt}),k)return!0}}}return!1}_queryCellCircle(i,d,_,w,S,f,b,y){const{circle:D,seenUids:k,overlapMode:R}=b,B=this.boxCells[S];if(null!==B){const oe=this.bboxes;for(const Ee of B)if(!k.box[Ee]){k.box[Ee]=!0;const Ce=4*Ee,nt=this.boxKeys[Ee];if(this._circleAndRectCollide(D.x,D.y,D.radius,oe[Ce+0],oe[Ce+1],oe[Ce+2],oe[Ce+3])&&(!y||y(nt))&&!de(R,nt.overlapMode))return f.push(!0),!0}}const ee=this.circleCells[S];if(null!==ee){const oe=this.circles;for(const Ee of ee)if(!k.circle[Ee]){k.circle[Ee]=!0;const Ce=3*Ee,nt=this.circleKeys[Ee];if(this._circlesCollide(oe[Ce],oe[Ce+1],oe[Ce+2],D.x,D.y,D.radius)&&(!y||y(nt))&&!de(R,nt.overlapMode))return f.push(!0),!0}}}_forEachCell(i,d,_,w,S,f,b,y){const D=this._convertToXCellCoord(i),k=this._convertToYCellCoord(d),R=this._convertToXCellCoord(_),B=this._convertToYCellCoord(w);for(let ee=D;ee<=R;ee++)for(let oe=k;oe<=B;oe++)if(S.call(this,i,d,_,w,this.xCellCount*oe+ee,f,b,y))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,d,_,w,S,f){const b=w-i,y=S-d,D=_+f;return D*D>b*b+y*y}_circleAndRectCollide(i,d,_,w,S,f,b){const y=(f-w)/2,D=Math.abs(i-(w+y));if(D>y+_)return!1;const k=(b-S)/2,R=Math.abs(d-(S+k));if(R>k+_)return!1;if(D<=y||R<=k)return!0;const B=D-y,ee=R-k;return B*B+ee*ee<=_*_}}function xt(E,i,d,_,w){const S=v.create();return i?(v.scale(S,S,[1/w,1/w,1]),d||v.rotateZ(S,S,_.angle)):v.multiply(S,_.labelPlaneMatrix,E),S}function Xt(E,i,d,_,w){if(i){const S=v.clone(E);return v.scale(S,S,[w,w,1]),d||v.rotateZ(S,S,-_.angle),S}return _.glCoordMatrix}function Ot(E,i,d){let _;d?(_=[E.x,E.y,d(E.x,E.y),1],v.transformMat4(_,_,i)):(_=[E.x,E.y,0,1],ge(_,_,i));const w=_[3];return{point:new v.Point(_[0]/w,_[1]/w),signedDistanceFromCamera:w}}function _i(E,i){return.5+E/i*.5}function hi(E,i){const d=E[0]/E[3],_=E[1]/E[3];return d>=-i[0]&&d<=i[0]&&_>=-i[1]&&_<=i[1]}function Qi(E,i,d,_,w,S,f,b,y,D){const k=_?E.textSizeData:E.iconSizeData,R=v.evaluateSizeForZoom(k,d.transform.zoom),B=[256/d.width*2+1,256/d.height*2+1],ee=_?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;ee.clear();const oe=E.lineVertexArray,Ee=_?E.text.placedSymbolArray:E.icon.placedSymbolArray,Ce=d.transform.width/d.transform.height;let nt=!1;for(let yt=0;yt<Ee.length;yt++){const $e=Ee.get(yt);if($e.hidden||$e.writingMode===v.WritingMode.vertical&&!nt){ie($e.numGlyphs,ee);continue}let gt;if(nt=!1,D?(gt=[$e.anchorX,$e.anchorY,D($e.anchorX,$e.anchorY),1],v.transformMat4(gt,gt,i)):(gt=[$e.anchorX,$e.anchorY,0,1],ge(gt,gt,i)),!hi(gt,B)){ie($e.numGlyphs,ee);continue}const kt=_i(d.transform.cameraToCenterDistance,gt[3]),Lt=v.evaluateSizeForFeature(k,R,$e),Zt=f?Lt/kt:Lt*kt,ri=new v.Point($e.anchorX,$e.anchorY),ii=Ot(ri,w,D).point,Ei={projections:{},offsets:{}},Ui=Vi($e,Zt,!1,b,i,w,S,E.glyphOffsetArray,oe,ee,ii,ri,Ei,Ce,y,D);nt=Ui.useVertical,(Ui.notEnoughRoom||nt||Ui.needsFlipping&&Vi($e,Zt,!0,b,i,w,S,E.glyphOffsetArray,oe,ee,ii,ri,Ei,Ce,y,D).notEnoughRoom)&&ie($e.numGlyphs,ee)}_?E.text.dynamicLayoutVertexBuffer.updateData(ee):E.icon.dynamicLayoutVertexBuffer.updateData(ee)}function tn(E,i,d,_,w,S,f,b,y,D,k,R,B){const ee=b.glyphStartIndex+b.numGlyphs,oe=b.lineStartIndex,Ee=b.lineStartIndex+b.lineLength,Ce=i.getoffsetX(b.glyphStartIndex),nt=i.getoffsetX(ee-1),yt=V(E*Ce,d,_,w,S,f,b.segment,oe,Ee,y,D,k,R,B);if(!yt)return null;const $e=V(E*nt,d,_,w,S,f,b.segment,oe,Ee,y,D,k,R,B);return $e?{first:yt,last:$e}:null}function Ji(E,i,d,_){return E===v.WritingMode.horizontal&&Math.abs(d.y-i.y)>Math.abs(d.x-i.x)*_?{useVertical:!0}:(E===v.WritingMode.vertical?i.y<d.y:i.x>d.x)?{needsFlipping:!0}:null}function Vi(E,i,d,_,w,S,f,b,y,D,k,R,B,ee,oe,Ee){const Ce=i/24,nt=E.lineOffsetX*Ce,yt=E.lineOffsetY*Ce;let $e;if(E.numGlyphs>1){const gt=E.glyphStartIndex+E.numGlyphs,kt=E.lineStartIndex,Lt=E.lineStartIndex+E.lineLength,Zt=tn(Ce,b,nt,yt,d,k,R,E,y,S,B,oe,Ee);if(!Zt)return{notEnoughRoom:!0};const ri=Ot(Zt.first.point,f,Ee).point,ii=Ot(Zt.last.point,f,Ee).point;if(_&&!d){const Ei=Ji(E.writingMode,ri,ii,ee);if(Ei)return Ei}$e=[Zt.first];for(let Ei=E.glyphStartIndex+1;Ei<gt-1;Ei++)$e.push(V(Ce*b.getoffsetX(Ei),nt,yt,d,k,R,E.segment,kt,Lt,y,S,B,oe,Ee));$e.push(Zt.last)}else{if(_&&!d){const kt=Ot(R,w,Ee).point,Lt=E.lineStartIndex+E.segment+1,Zt=new v.Point(y.getx(Lt),y.gety(Lt)),ri=Ot(Zt,w,Ee),ii=ri.signedDistanceFromCamera>0?ri.point:zt(R,Zt,kt,1,w,Ee),Ei=Ji(E.writingMode,kt,ii,ee);if(Ei)return Ei}const gt=V(Ce*b.getoffsetX(E.glyphStartIndex),nt,yt,d,k,R,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,y,S,B,oe,Ee);if(!gt)return{notEnoughRoom:!0};$e=[gt]}for(const gt of $e)v.addDynamicAttributes(D,gt.point,gt.angle);return{}}function zt(E,i,d,_,w,S){const f=Ot(E.add(E.sub(i)._unit()),w,S).point,b=d.sub(f);return d.add(b._mult(_/b.mag()))}function li(E,i){const{projectionCache:d,lineVertexArray:_,labelPlaneMatrix:w,tileAnchorPoint:S,distanceFromAnchor:f,getElevation:b,previousVertex:y,direction:D,absOffsetX:k}=i;if(d.projections[E])return d.projections[E];const R=new v.Point(_.getx(E),_.gety(E)),B=Ot(R,w,b);if(B.signedDistanceFromCamera>0)return d.projections[E]=B.point,B.point;const ee=E-D;return zt(0===f?S:new v.Point(_.getx(ee),_.gety(ee)),R,y,k-f+1,w,b)}function vt(E,i,d){return E._unit()._perp()._mult(i*d)}function q(E,i,d,_,w,S,f,b){const{projectionCache:y,direction:D}=b;if(y.offsets[E])return y.offsets[E];const k=d.add(i);if(E+D<_||E+D>=w)return y.offsets[E]=k,k;const R=li(E+D,b),B=vt(R.sub(d),f,D),ee=d.add(B),oe=R.add(B);return y.offsets[E]=v.findLineIntersection(S,k,ee,oe)||k,y.offsets[E]}function V(E,i,d,_,w,S,f,b,y,D,k,R,B,ee){const oe=_?E-i:E+i;let Ee=oe>0?1:-1,Ce=0;_&&(Ee*=-1,Ce=Math.PI),Ee<0&&(Ce+=Math.PI);let nt,yt,$e=Ee>0?b+f:b+f+1,gt=w,kt=w,Lt=0,Zt=0;const ri=Math.abs(oe),ii=[];let Ei;for(;Lt+Zt<=ri;){if($e+=Ee,$e<b||$e>=y)return null;Lt+=Zt,kt=gt,yt=nt;const bi={projectionCache:R,lineVertexArray:D,labelPlaneMatrix:k,tileAnchorPoint:S,distanceFromAnchor:Lt,getElevation:ee,previousVertex:kt,direction:Ee,absOffsetX:ri};if(gt=li($e,bi),0===d)ii.push(kt),Ei=gt.sub(kt);else{let en;const ki=gt.sub(kt);en=0===ki.mag()?vt(li($e+Ee,bi).sub(gt),d,Ee):vt(ki,d,Ee),yt||(yt=kt.add(en)),nt=q($e,en,gt,b,y,yt,d,bi),ii.push(yt),Ei=nt.sub(yt)}Zt=Ei.mag()}const Ui=Ei._mult((ri-Lt)/Zt)._add(yt||kt),vn=Ce+Math.atan2(gt.y-kt.y,gt.x-kt.x);return ii.push(Ui),{point:Ui,angle:B?vn:0,path:ii}}const j=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ie(E,i){for(let d=0;d<E;d++){const _=i.length;i.resize(_+4),i.float32.set(j,3*_)}}function ge(E,i,d){const _=i[0],w=i[1];return E[0]=d[0]*_+d[4]*w+d[12],E[1]=d[1]*_+d[5]*w+d[13],E[3]=d[3]*_+d[7]*w+d[15],E}const Ae=100;class ve{constructor(i,d=new Re(i.width+200,i.height+200,25),_=new Re(i.width+200,i.height+200,25)){this.transform=i,this.grid=d,this.ignoredGrid=_,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Ae,this.screenBottomBoundary=i.height+Ae,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,d,_,w,S,f){const b=this.projectAndGetPerspectiveRatio(w,i.anchorPointX,i.anchorPointY,f),y=_*b.perspectiveRatio,D=i.x1*y+b.point.x,k=i.y1*y+b.point.y,R=i.x2*y+b.point.x,B=i.y2*y+b.point.y;return!this.isInsideGrid(D,k,R,B)||"always"!==d&&this.grid.hitTest(D,k,R,B,d,S)||b.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,k,R,B],offscreen:this.isOffscreen(D,k,R,B)}}placeCollisionCircles(i,d,_,w,S,f,b,y,D,k,R,B,ee,oe){const Ee=[],Ce=new v.Point(d.anchorX,d.anchorY),nt=Ot(Ce,f,oe),yt=_i(this.transform.cameraToCenterDistance,nt.signedDistanceFromCamera),$e=(k?S/yt:S*yt)/v.ONE_EM,gt=Ot(Ce,b,oe).point,kt=tn($e,w,d.lineOffsetX*$e,d.lineOffsetY*$e,!1,gt,Ce,d,_,b,{projections:{},offsets:{}},!1,oe);let Lt=!1,Zt=!1,ri=!0;if(kt){const ii=.5*B*yt+ee,Ei=new v.Point(-100,-100),Ui=new v.Point(this.screenRightBoundary,this.screenBottomBoundary),vn=new he,bi=kt.first,en=kt.last;let ki=[];for(let Tn=bi.path.length-1;Tn>=1;Tn--)ki.push(bi.path[Tn]);for(let Tn=1;Tn<en.path.length;Tn++)ki.push(en.path[Tn]);const rr=2.5*ii;if(y){const Tn=ki.map(dn=>Ot(dn,y,oe));ki=Tn.some(dn=>dn.signedDistanceFromCamera<=0)?[]:Tn.map(dn=>dn.point)}let Kn=[];if(ki.length>0){const Tn=ki[0].clone(),dn=ki[0].clone();for(let kr=1;kr<ki.length;kr++)Tn.x=Math.min(Tn.x,ki[kr].x),Tn.y=Math.min(Tn.y,ki[kr].y),dn.x=Math.max(dn.x,ki[kr].x),dn.y=Math.max(dn.y,ki[kr].y);Kn=Tn.x>=Ei.x&&dn.x<=Ui.x&&Tn.y>=Ei.y&&dn.y<=Ui.y?[ki]:dn.x<Ei.x||Tn.x>Ui.x||dn.y<Ei.y||Tn.y>Ui.y?[]:v.clipLine([ki],Ei.x,Ei.y,Ui.x,Ui.y)}for(const Tn of Kn){vn.reset(Tn,.25*ii);let dn=0;dn=vn.length<=.5*ii?1:Math.ceil(vn.paddedLength/rr)+1;for(let kr=0;kr<dn;kr++){const Lo=kr/Math.max(dn-1,1),or=vn.lerp(Lo),Qo=or.x+Ae,Gs=or.y+Ae;Ee.push(Qo,Gs,ii,0);const ia=Qo-ii,fa=Gs-ii,Kr=Qo+ii,ka=Gs+ii;if(ri=ri&&this.isOffscreen(ia,fa,Kr,ka),Zt=Zt||this.isInsideGrid(ia,fa,Kr,ka),"always"!==i&&this.grid.hitTestCircle(Qo,Gs,ii,i,R)&&(Lt=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Lt}}}}return{circles:!D&&Lt||!Zt||yt<this.perspectiveRatioCutoff?[]:Ee,offscreen:ri,collisionDetected:Lt}}queryRenderedSymbols(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let _=1/0,w=1/0,S=-1/0,f=-1/0;for(const k of i){const R=new v.Point(k.x+Ae,k.y+Ae);_=Math.min(_,R.x),w=Math.min(w,R.y),S=Math.max(S,R.x),f=Math.max(f,R.y),d.push(R)}const b=this.grid.query(_,w,S,f).concat(this.ignoredGrid.query(_,w,S,f)),y={},D={};for(const k of b){const R=k.key;if(void 0===y[R.bucketInstanceId]&&(y[R.bucketInstanceId]={}),y[R.bucketInstanceId][R.featureIndex])continue;const B=[new v.Point(k.x1,k.y1),new v.Point(k.x2,k.y1),new v.Point(k.x2,k.y2),new v.Point(k.x1,k.y2)];v.polygonIntersectsPolygon(d,B)&&(y[R.bucketInstanceId][R.featureIndex]=!0,void 0===D[R.bucketInstanceId]&&(D[R.bucketInstanceId]=[]),D[R.bucketInstanceId].push(R.featureIndex))}return D}insertCollisionBox(i,d,_,w,S,f){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:S,collisionGroupID:f,overlapMode:d},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,d,_,w,S,f){const b=_?this.ignoredGrid:this.grid,y={bucketInstanceId:w,featureIndex:S,collisionGroupID:f,overlapMode:d};for(let D=0;D<i.length;D+=4)b.insertCircle(y,i[D],i[D+1],i[D+2])}projectAndGetPerspectiveRatio(i,d,_,w){let S;return w?(S=[d,_,w(d,_),1],v.transformMat4(S,S,i)):(S=[d,_,0,1],ge(S,S,i)),{point:new v.Point((S[0]/S[3]+1)/2*this.transform.width+Ae,(-S[1]/S[3]+1)/2*this.transform.height+Ae),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S[3]*.5}}isOffscreen(i,d,_,w){return _<Ae||i>=this.screenRightBoundary||w<Ae||d>this.screenBottomBoundary}isInsideGrid(i,d,_,w){return _>=0&&i<this.gridRightBoundary&&w>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const i=v.identity([]);return v.translate(i,i,[-100,-100,0]),i}}function se(E,i,d){return i*(v.EXTENT/(E.tileSize*Math.pow(2,d-E.tileID.overscaledZ)))}class X{constructor(i,d,_,w){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?d:-d))):w&&_?1:0,this.placed=_}isHidden(){return 0===this.opacity&&!this.placed}}class pe{constructor(i,d,_,w,S){this.text=new X(i?i.text:null,d,_,S),this.icon=new X(i?i.icon:null,d,w,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Qe{constructor(i,d,_){this.text=i,this.icon=d,this.skipFade=_}}class at{constructor(){this.invProjMatrix=v.create(),this.viewportMatrix=v.create(),this.circles=[]}}class xe{constructor(i,d,_,w,S){this.bucketInstanceId=i,this.featureIndex=d,this.sourceLayerIndex=_,this.bucketIndex=w,this.tileID=S}}class Te{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const d=++this.maxGroupID;this.collisionGroups[i]={ID:d,predicate:_=>_.collisionGroupID===d}}return this.collisionGroups[i]}}function ue(E,i,d,_,w){const{horizontalAlign:S,verticalAlign:f}=v.getAnchorAlignment(E),b=-(S-.5)*i,y=-(f-.5)*d,D=v.evaluateVariableOffset(E,_);return new v.Point(b+D[0]*w,y+D[1]*w)}function De(E,i,d,_,w,S){const{x1:f,x2:b,y1:y,y2:D,anchorPointX:k,anchorPointY:R}=E,B=new v.Point(i,d);return _&&B._rotate(w?S:-S),{x1:f+B.x,y1:y+B.y,x2:b+B.x,y2:D+B.y,anchorPointX:k,anchorPointY:R}}class Je{constructor(i,d,_,w,S){this.transform=i.clone(),this.terrain=d,this.collisionIndex=new ve(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new Te(w),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,d,_,w){const S=_.getBucket(d),f=_.latestFeatureIndex;if(!S||!f||d.id!==S.layerIds[0])return;const b=_.collisionBoxArray,y=S.layers[0].layout,D=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),k=_.tileSize/v.EXTENT,R=this.transform.calculatePosMatrix(_.tileID.toUnwrapped()),B="map"===y.get("text-pitch-alignment"),ee="map"===y.get("text-rotation-alignment"),oe=se(_,1,this.transform.zoom),Ee=xt(R,B,ee,this.transform,oe);let Ce=null;if(B){const yt=Xt(R,B,ee,this.transform,oe);Ce=v.multiply([],this.transform.labelPlaneMatrix,yt)}this.retainedQueryData[S.bucketInstanceId]=new xe(S.bucketInstanceId,f,S.sourceLayerIndex,S.index,_.tileID);const nt={bucket:S,layout:y,posMatrix:R,textLabelPlaneMatrix:Ee,labelToScreenMatrix:Ce,scale:D,textPixelRatio:k,holdingForFade:_.holdingForFade(),collisionBoxArray:b,partiallyEvaluatedTextSize:v.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(w)for(const yt of S.sortKeyRanges){const{sortKey:$e,symbolInstanceStart:gt,symbolInstanceEnd:kt}=yt;i.push({sortKey:$e,symbolInstanceStart:gt,symbolInstanceEnd:kt,parameters:nt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:nt})}attemptAnchorPlacement(i,d,_,w,S,f,b,y,D,k,R,B,ee,oe,Ee,Ce){const nt=[B.textOffset0,B.textOffset1],yt=ue(i,_,w,nt,S),$e=this.collisionIndex.placeCollisionBox(De(d,yt.x,yt.y,f,b,this.transform.angle),R,y,D,k.predicate,Ce);if((!Ee||0!==this.collisionIndex.placeCollisionBox(De(Ee,yt.x,yt.y,f,b,this.transform.angle),R,y,D,k.predicate,Ce).box.length)&&$e.box.length>0){let gt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID].text&&(gt=this.prevPlacement.variableOffsets[B.crossTileID].anchor),0===B.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[B.crossTileID]={textOffset:nt,width:_,height:w,anchor:i,textBoxScale:S,prevAnchor:gt},this.markUsedJustification(ee,i,B,oe),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,oe,B),this.placedOrientations[B.crossTileID]=oe),{shift:yt,placedGlyphBoxes:$e}}}placeLayerBucketPart(i,d,_){const{bucket:w,layout:S,posMatrix:f,textLabelPlaneMatrix:b,labelToScreenMatrix:y,textPixelRatio:D,holdingForFade:k,collisionBoxArray:R,partiallyEvaluatedTextSize:B,collisionGroup:ee}=i.parameters,oe=S.get("text-optional"),Ee=S.get("icon-optional"),Ce=v.getOverlapMode(S,"text-overlap","text-allow-overlap"),nt="always"===Ce,yt=v.getOverlapMode(S,"icon-overlap","icon-allow-overlap"),$e="always"===yt,gt="map"===S.get("text-rotation-alignment"),kt="map"===S.get("text-pitch-alignment"),Lt="none"!==S.get("icon-text-fit"),Zt="viewport-y"===S.get("symbol-z-order"),ri=nt&&($e||!w.hasIconData()||Ee),ii=$e&&(nt||!w.hasTextData()||oe);!w.collisionArrays&&R&&w.deserializeCollisionBoxes(R);const Ei=this.retainedQueryData[w.bucketInstanceId].tileID,Ui=this.terrain?(bi,en)=>this.terrain.getElevation(Ei,bi,en):null,vn=(bi,en)=>{if(d[bi.crossTileID])return;if(k)return void(this.placements[bi.crossTileID]=new Qe(!1,!1,!1));let ki=!1,rr=!1,Kn=!0,Tn=null,dn={box:null,offscreen:null},kr={box:null,offscreen:null},Lo=null,or=null,Qo=null,Gs=0,ia=0,fa=0;en.textFeatureIndex?Gs=en.textFeatureIndex:bi.useRuntimeCollisionCircles&&(Gs=bi.featureIndex),en.verticalTextFeatureIndex&&(ia=en.verticalTextFeatureIndex);const Kr=en.textBox;if(Kr){const Go=nr=>{let Co=v.WritingMode.horizontal;if(w.allowVerticalPlacement&&!nr&&this.prevPlacement){const Zo=this.prevPlacement.placedOrientations[bi.crossTileID];Zo&&(this.placedOrientations[bi.crossTileID]=Zo,Co=Zo,this.markUsedOrientation(w,Co,bi))}return Co},ho=(nr,Co)=>{if(w.allowVerticalPlacement&&bi.numVerticalGlyphVertices>0&&en.verticalTextBox){for(const Zo of w.writingModes)if(Zo===v.WritingMode.vertical?(dn=Co(),kr=dn):dn=nr(),dn&&dn.box&&dn.box.length)break}else dn=nr()};if(S.get("text-variable-anchor")){let nr=S.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[bi.crossTileID]){const sr=this.prevPlacement.variableOffsets[bi.crossTileID];nr.indexOf(sr.anchor)>0&&(nr=nr.filter(Ao=>Ao!==sr.anchor),nr.unshift(sr.anchor))}const Co=(sr,Ao,Zs)=>{const Jl=sr.x2-sr.x1,cl=sr.y2-sr.y1,ed=bi.textBoxScale,Ol=Lt&&"never"===yt?Ao:null;let zr={box:[],offscreen:!1};const td="never"!==Ce?2*nr.length:nr.length;for(let hc=0;hc<td;++hc){const Ws=this.attemptAnchorPlacement(nr[hc%nr.length],sr,Jl,cl,ed,gt,kt,D,f,ee,hc>=nr.length?Ce:"never",bi,w,Zs,Ol,Ui);if(Ws&&(zr=Ws.placedGlyphBoxes,zr&&zr.box&&zr.box.length)){ki=!0,Tn=Ws.shift;break}}return zr};ho(()=>Co(Kr,en.iconBox,v.WritingMode.horizontal),()=>{const sr=en.verticalTextBox;return w.allowVerticalPlacement&&!(dn&&dn.box&&dn.box.length)&&bi.numVerticalGlyphVertices>0&&sr?Co(sr,en.verticalIconBox,v.WritingMode.vertical):{box:null,offscreen:null}}),dn&&(ki=dn.box,Kn=dn.offscreen);const Zo=Go(dn&&dn.box);if(!ki&&this.prevPlacement){const sr=this.prevPlacement.variableOffsets[bi.crossTileID];sr&&(this.variableOffsets[bi.crossTileID]=sr,this.markUsedJustification(w,sr.anchor,bi,Zo))}}else{const nr=(Co,Zo)=>{const sr=this.collisionIndex.placeCollisionBox(Co,Ce,D,f,ee.predicate,Ui);return sr&&sr.box&&sr.box.length&&(this.markUsedOrientation(w,Zo,bi),this.placedOrientations[bi.crossTileID]=Zo),sr};ho(()=>nr(Kr,v.WritingMode.horizontal),()=>{const Co=en.verticalTextBox;return w.allowVerticalPlacement&&bi.numVerticalGlyphVertices>0&&Co?nr(Co,v.WritingMode.vertical):{box:null,offscreen:null}}),Go(dn&&dn.box&&dn.box.length)}}if(Lo=dn,ki=Lo&&Lo.box&&Lo.box.length>0,Kn=Lo&&Lo.offscreen,bi.useRuntimeCollisionCircles){const Go=w.text.placedSymbolArray.get(bi.centerJustifiedTextSymbolIndex),ho=v.evaluateSizeForFeature(w.textSizeData,B,Go),nr=S.get("text-padding");or=this.collisionIndex.placeCollisionCircles(Ce,Go,w.lineVertexArray,w.glyphOffsetArray,ho,f,b,y,_,kt,ee.predicate,bi.collisionCircleDiameter,nr,Ui),or.circles.length&&or.collisionDetected&&!_&&v.warnOnce("Collisions detected, but collision boxes are not shown"),ki=nt||or.circles.length>0&&!or.collisionDetected,Kn=Kn&&or.offscreen}if(en.iconFeatureIndex&&(fa=en.iconFeatureIndex),en.iconBox){const Go=ho=>{const nr=Lt&&Tn?De(ho,Tn.x,Tn.y,gt,kt,this.transform.angle):ho;return this.collisionIndex.placeCollisionBox(nr,yt,D,f,ee.predicate,Ui)};kr&&kr.box&&kr.box.length&&en.verticalIconBox?(Qo=Go(en.verticalIconBox),rr=Qo.box.length>0):(Qo=Go(en.iconBox),rr=Qo.box.length>0),Kn=Kn&&Qo.offscreen}const ka=oe||0===bi.numHorizontalGlyphVertices&&0===bi.numVerticalGlyphVertices,Pl=Ee||0===bi.numIconVertices;if(ka||Pl?Pl?ka||(rr=rr&&ki):ki=rr&&ki:rr=ki=rr&&ki,ki&&Lo&&Lo.box&&this.collisionIndex.insertCollisionBox(Lo.box,Ce,S.get("text-ignore-placement"),w.bucketInstanceId,kr&&kr.box&&ia?ia:Gs,ee.ID),rr&&Qo&&this.collisionIndex.insertCollisionBox(Qo.box,yt,S.get("icon-ignore-placement"),w.bucketInstanceId,fa,ee.ID),or&&(ki&&this.collisionIndex.insertCollisionCircles(or.circles,Ce,S.get("text-ignore-placement"),w.bucketInstanceId,Gs,ee.ID),_)){const Go=w.bucketInstanceId;let ho=this.collisionCircleArrays[Go];void 0===ho&&(ho=this.collisionCircleArrays[Go]=new at);for(let nr=0;nr<or.circles.length;nr+=4)ho.circles.push(or.circles[nr+0]),ho.circles.push(or.circles[nr+1]),ho.circles.push(or.circles[nr+2]),ho.circles.push(or.collisionDetected?1:0)}if(0===bi.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===w.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[bi.crossTileID]=new Qe(ki||ri,rr||ii,Kn||w.justReloaded),d[bi.crossTileID]=!0};if(Zt){if(0!==i.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const bi=w.getSortedSymbolIndexes(this.transform.angle);for(let en=bi.length-1;en>=0;--en){const ki=bi[en];vn(w.symbolInstances.get(ki),w.collisionArrays[ki])}}else for(let bi=i.symbolInstanceStart;bi<i.symbolInstanceEnd;bi++)vn(w.symbolInstances.get(bi),w.collisionArrays[bi]);if(_&&w.bucketInstanceId in this.collisionCircleArrays){const bi=this.collisionCircleArrays[w.bucketInstanceId];v.invert(bi.invProjMatrix,f),bi.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(i,d,_,w){let S;S=w===v.WritingMode.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[v.getAnchorJustification(d)];const f=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const b of f)b>=0&&(i.text.placedSymbolArray.get(b).crossTileID=S>=0&&b!==S?0:_.crossTileID)}markUsedOrientation(i,d,_){const w=d===v.WritingMode.horizontal||d===v.WritingMode.horizontalOnly?d:0,S=d===v.WritingMode.vertical?d:0,f=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const b of f)i.text.placedSymbolArray.get(b).placedOrientation=w;_.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let _=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const w=d?d.symbolFadeChange(i):1,S=d?d.opacities:{},f=d?d.variableOffsets:{},b=d?d.placedOrientations:{};for(const y in this.placements){const D=this.placements[y],k=S[y];k?(this.opacities[y]=new pe(k,w,D.text,D.icon),_=_||D.text!==k.text.placed||D.icon!==k.icon.placed):(this.opacities[y]=new pe(null,w,D.text,D.icon,D.skipFade),_=_||D.text||D.icon)}for(const y in S){const D=S[y];if(!this.opacities[y]){const k=new pe(D,w,!1,!1);k.isHidden()||(this.opacities[y]=k,_=_||D.text.placed||D.icon.placed)}}for(const y in f)this.variableOffsets[y]||!this.opacities[y]||this.opacities[y].isHidden()||(this.variableOffsets[y]=f[y]);for(const y in b)this.placedOrientations[y]||!this.opacities[y]||this.opacities[y].isHidden()||(this.placedOrientations[y]=b[y]);if(d&&void 0===d.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:i)}updateLayerOpacities(i,d){const _={};for(const w of d){const S=w.getBucket(i);S&&w.latestFeatureIndex&&i.id===S.layerIds[0]&&this.updateBucketOpacities(S,_,w.collisionBoxArray)}}updateBucketOpacities(i,d,_){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const w=i.layers[0].layout,S=new pe(null,0,!1,!1,!0),f=w.get("text-allow-overlap"),b=w.get("icon-allow-overlap"),y=w.get("text-variable-anchor"),D="map"===w.get("text-rotation-alignment"),k="map"===w.get("text-pitch-alignment"),R="none"!==w.get("icon-text-fit"),B=new pe(null,0,f&&(b||!i.hasIconData()||w.get("icon-optional")),b&&(f||!i.hasTextData()||w.get("text-optional")),!0);!i.collisionArrays&&_&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(_);const ee=(oe,Ee,Ce)=>{for(let nt=0;nt<Ee/4;nt++)oe.opacityVertexArray.emplaceBack(Ce);oe.hasVisibleVertices=oe.hasVisibleVertices||Ce!==Ni};for(let oe=0;oe<i.symbolInstances.length;oe++){const Ee=i.symbolInstances.get(oe),{numHorizontalGlyphVertices:Ce,numVerticalGlyphVertices:nt,crossTileID:yt}=Ee;let $e=this.opacities[yt];d[yt]?$e=S:$e||($e=B,this.opacities[yt]=$e),d[yt]=!0;const gt=Ee.numIconVertices>0,kt=this.placedOrientations[Ee.crossTileID],Lt=kt===v.WritingMode.vertical,Zt=kt===v.WritingMode.horizontal||kt===v.WritingMode.horizontalOnly;if(Ce>0||nt>0){const ri=nn($e.text);ee(i.text,Ce,Lt?Ni:ri),ee(i.text,nt,Zt?Ni:ri);const ii=$e.text.isHidden();[Ee.rightJustifiedTextSymbolIndex,Ee.centerJustifiedTextSymbolIndex,Ee.leftJustifiedTextSymbolIndex].forEach(vn=>{vn>=0&&(i.text.placedSymbolArray.get(vn).hidden=ii||Lt?1:0)}),Ee.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Ee.verticalPlacedTextSymbolIndex).hidden=ii||Zt?1:0);const Ei=this.variableOffsets[Ee.crossTileID];Ei&&this.markUsedJustification(i,Ei.anchor,Ee,kt);const Ui=this.placedOrientations[Ee.crossTileID];Ui&&(this.markUsedJustification(i,"left",Ee,Ui),this.markUsedOrientation(i,Ui,Ee))}if(gt){const ri=nn($e.icon),ii=!(R&&Ee.verticalPlacedIconSymbolIndex&&Lt);Ee.placedIconSymbolIndex>=0&&(ee(i.icon,Ee.numIconVertices,ii?ri:Ni),i.icon.placedSymbolArray.get(Ee.placedIconSymbolIndex).hidden=$e.icon.isHidden()),Ee.verticalPlacedIconSymbolIndex>=0&&(ee(i.icon,Ee.numVerticalIconVertices,ii?Ni:ri),i.icon.placedSymbolArray.get(Ee.verticalPlacedIconSymbolIndex).hidden=$e.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const ri=i.collisionArrays[oe];if(ri){let ii=new v.Point(0,0);if(ri.textBox||ri.verticalTextBox){let Ui=!0;if(y){const vn=this.variableOffsets[yt];vn?(ii=ue(vn.anchor,vn.width,vn.height,vn.textOffset,vn.textBoxScale),D&&ii._rotate(k?this.transform.angle:-this.transform.angle)):Ui=!1}ri.textBox&&Tt(i.textCollisionBox.collisionVertexArray,$e.text.placed,!Ui||Lt,ii.x,ii.y),ri.verticalTextBox&&Tt(i.textCollisionBox.collisionVertexArray,$e.text.placed,!Ui||Zt,ii.x,ii.y)}const Ei=!(Zt||!ri.verticalIconBox);ri.iconBox&&Tt(i.iconCollisionBox.collisionVertexArray,$e.icon.placed,Ei,R?ii.x:0,R?ii.y:0),ri.verticalIconBox&&Tt(i.iconCollisionBox.collisionVertexArray,$e.icon.placed,!Ei,R?ii.x:0,R?ii.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const oe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=oe.invProjMatrix,i.placementViewportMatrix=oe.viewportMatrix,i.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,d){const _=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*_>i}setStale(){this.stale=!0}}function Tt(E,i,d,_,w){E.emplaceBack(i?1:0,d?1:0,_||0,w||0),E.emplaceBack(i?1:0,d?1:0,_||0,w||0),E.emplaceBack(i?1:0,d?1:0,_||0,w||0),E.emplaceBack(i?1:0,d?1:0,_||0,w||0)}const Fe=Math.pow(2,25),Ie=Math.pow(2,24),Ze=Math.pow(2,17),Bt=Math.pow(2,16),Gt=Math.pow(2,9),di=Math.pow(2,8),ui=Math.pow(2,1);function nn(E){if(0===E.opacity&&!E.placed)return 0;if(1===E.opacity&&E.placed)return 4294967295;const i=E.placed?1:0,d=Math.floor(127*E.opacity);return d*Fe+i*Ie+d*Ze+i*Bt+d*Gt+i*di+d*ui+i}const Ni=0;class $n{constructor(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,d,_,w,S){const f=this._bucketParts;for(;this._currentTileIndex<i.length;)if(d.getBucketParts(f,w,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,f.sort((b,y)=>b.sortKey-y.sortKey));this._currentPartIndex<f.length;)if(d.placeLayerBucketPart(f[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,S())return!0;return!1}}class Mo{constructor(i,d,_,w,S,f,b,y){this.placement=new Je(i,d,f,b,y),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(i,d,_){const w=v.browser.now(),S=()=>!this._forceFullPlacement&&v.browser.now()-w>2;for(;this._currentPlacementIndex>=0;){const f=d[i[this._currentPlacementIndex]],b=this.placement.collisionIndex.transform.zoom;if("symbol"===f.type&&(!f.minzoom||f.minzoom<=b)&&(!f.maxzoom||f.maxzoom>b)){if(this._inProgressLayer||(this._inProgressLayer=new $n(f)),this._inProgressLayer.continuePlacement(_[f.source],this.placement,this._showCollisionBoxes,f,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Ar=512/v.EXTENT/2;class In{constructor(i,d,_){this.tileID=i,this.bucketInstanceId=_,this._symbolsByKey={};const w=new Map;for(let S=0;S<d.length;S++){const f=d.get(S),b=f.key,y=w.get(b);y?y.push(f):w.set(b,[f])}for(const[S,f]of w){const b={positions:f.map(y=>({x:Math.floor(y.anchorX*Ar),y:Math.floor(y.anchorY*Ar)})),crossTileIDs:f.map(y=>y.crossTileID)};if(b.positions.length>128){const y=new v.KDBush(b.positions.length,16,Uint16Array);for(const{x:D,y:k}of b.positions)y.add(D,k);y.finish(),delete b.positions,b.index=y}this._symbolsByKey[S]=b}}getScaledCoordinates(i,d){const{x:_,y:w,z:S}=this.tileID.canonical,{x:f,y:b,z:y}=d.canonical,D=Ar/Math.pow(2,y-S),k=(b*v.EXTENT+i.anchorY)*D,R=w*v.EXTENT*Ar;return{x:Math.floor((f*v.EXTENT+i.anchorX)*D-_*v.EXTENT*Ar),y:Math.floor(k-R)}}findMatches(i,d,_){const w=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let S=0;S<i.length;S++){const f=i.get(S);if(f.crossTileID)continue;const b=this._symbolsByKey[f.key];if(!b)continue;const y=this.getScaledCoordinates(f,d);if(b.index){const D=b.index.range(y.x-w,y.y-w,y.x+w,y.y+w).sort();for(const k of D){const R=b.crossTileIDs[k];if(!_[R]){_[R]=!0,f.crossTileID=R;break}}}else if(b.positions)for(let D=0;D<b.positions.length;D++){const k=b.positions[D],R=b.crossTileIDs[D];if(Math.abs(k.x-y.x)<=w&&Math.abs(k.y-y.y)<=w&&!_[R]){_[R]=!0,f.crossTileID=R;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Fr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class to{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const d=Math.round((i-this.lng)/360);if(0!==d)for(const _ in this.indexes){const w=this.indexes[_],S={};for(const f in w){const b=w[f];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+d),S[b.tileID.key]=b}this.indexes[_]=S}this.lng=i}addBucket(i,d,_){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let S=0;S<d.symbolInstances.length;S++)d.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const w=this.usedCrossTileIDs[i.overscaledZ];for(const S in this.indexes){const f=this.indexes[S];if(Number(S)>i.overscaledZ)for(const b in f){const y=f[b];y.tileID.isChildOf(i)&&y.findMatches(d.symbolInstances,i,w)}else{const b=f[i.scaledTo(Number(S)).key];b&&b.findMatches(d.symbolInstances,i,w)}}for(let S=0;S<d.symbolInstances.length;S++){const f=d.symbolInstances.get(S);f.crossTileID||(f.crossTileID=_.generate(),w[f.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new In(i,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(i,d){for(const _ of d.getCrossTileIDsLists())for(const w of _)delete this.usedCrossTileIDs[i][w]}removeStaleBuckets(i){let d=!1;for(const _ in this.indexes){const w=this.indexes[_];for(const S in w)i[w[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,w[S]),delete w[S],d=!0)}return d}}class on{constructor(){this.layerIndexes={},this.crossTileIDs=new Fr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,d,_){let w=this.layerIndexes[i.id];void 0===w&&(w=this.layerIndexes[i.id]=new to);let S=!1;const f={};w.handleWrapJump(_);for(const b of d){const y=b.getBucket(i);y&&i.id===y.layerIds[0]&&(y.bucketInstanceId||(y.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(b.tileID,y,this.crossTileIDs)&&(S=!0),f[y.bucketInstanceId]=!0)}return w.removeStaleBuckets(f)&&(S=!0),S}pruneUnusedLayers(i){const d={};i.forEach(_=>{d[_]=!0});for(const _ in this.layerIndexes)d[_]||delete this.layerIndexes[_]}}const fn=(E,i)=>v.emitValidationErrors(E,i&&i.filter(d=>"source.canvas"!==d.identifier)),Mr=v.pick(v.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),rs=v.pick(v.operations,["setCenter","setZoom","setBearing","setPitch"]),Qn=v.emptyStyle();class hr extends v.Evented{constructor(i,d={}){super(),this.map=i,this.dispatcher=new Sn(ke(),this,i._getMapId()),this.imageManager=new Pt,this.imageManager.setEventedParent(this),this.glyphManager=new Ri(i._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Vn(256,512),this.crossTileSymbolIndex=new on,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new v.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",v.getReferrer());const _=this;this._rtlTextPluginCallback=hr.registerForPluginStateChange(w=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},(S,f)=>{if(v.triggerPluginCompletionEvent(S),f&&f.every(b=>b))for(const b in _.sourceCaches){const y=_.sourceCaches[b].getSource().type;"vector"!==y&&"geojson"!==y||_.sourceCaches[b].reload()}})}),this.on("data",w=>{if("source"!==w.dataType||"metadata"!==w.sourceDataType)return;const S=this.sourceCaches[w.sourceId];if(!S)return;const f=S.getSource();if(f&&f.vectorLayerIds)for(const b in this._layers){const y=this._layers[b];y.source===f.id&&this._validateLayer(y)}})}loadURL(i,d={},_){this.fire(new v.Event("dataloading",{dataType:"style"})),d.validate="boolean"!=typeof d.validate||d.validate;const w=this.map._requestManager.transformRequest(i,Xe.Style);this._request=v.getJSON(w,(S,f)=>{this._request=null,S?this.fire(new v.ErrorEvent(S)):f&&this._load(f,d,_)})}loadJSON(i,d={},_){this.fire(new v.Event("dataloading",{dataType:"style"})),this._request=v.browser.frame(()=>{this._request=null,d.validate=!1!==d.validate,this._load(i,d,_)})}loadEmpty(){this.fire(new v.Event("dataloading",{dataType:"style"})),this._load(Qn,{validate:!1})}_load(i,d,_){const w=d.transformStyle?d.transformStyle(_,i):i;if(!d.validate||!fn(this,v.validateStyle(w))){this._loaded=!0,this.stylesheet=w;for(const S in w.sources)this.addSource(S,w.sources[S],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new _n(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new v.Event("data",{dataType:"style"})),this.fire(new v.Event("style.load"))}}_createLayers(){const i=v.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of i){const _=v.createStyleLayer(d);_.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=_}}_loadSprite(i,d=!1,_=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(w,S,f,b){const y=Ne(w),D=y.length,k=f>1?"@2x":"",R={},B={},ee={};for(const{id:oe,url:Ee}of y){const Ce=S.transformRequest(S.normalizeSpriteURL(Ee,k,".json"),Xe.SpriteJSON),nt=`${oe}_${Ce.url}`;R[nt]=v.getJSON(Ce,(gt,kt)=>{delete R[nt],B[oe]=kt,je(b,B,ee,gt,D)});const yt=S.transformRequest(S.normalizeSpriteURL(Ee,k,".png"),Xe.SpriteImage),$e=`${oe}_${yt.url}`;R[$e]=et.getImage(yt,(gt,kt)=>{delete R[$e],ee[oe]=kt,je(b,B,ee,gt,D)})}return{cancel(){for(const oe of Object.values(R))oe.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(w,S)=>{if(this._spriteRequest=null,w)this.fire(new v.ErrorEvent(w));else if(S)for(const f in S){this._spritesImagesIds[f]=[];const b=this._spritesImagesIds[f]?this._spritesImagesIds[f].filter(y=>!(y in S)):[];for(const y of b)this.imageManager.removeImage(y),this._changedImages[y]=!0;for(const y in S[f]){const D="default"===f?y:`${f}:${y}`;this._spritesImagesIds[f].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,S[f][y],!1):this.imageManager.addImage(D,S[f][y]),d&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"})),_&&_(w)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))}_validateLayer(i){const d=this.sourceCaches[i.source];if(!d)return;const _=i.sourceLayer;if(!_)return;const w=d.getSource();("geojson"===w.type||w.vectorLayerIds&&-1===w.vectorLayerIds.indexOf(_))&&this.fire(new v.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${w.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const d=this._serializedAllLayers();if(!i||0===i.length)return Object.values(d);const _=[];for(const w of i)d[w]&&_.push(d[w]);return _}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const d=Object.keys(this._layers);for(const _ of d){const w=this._layers[_];"custom"!==w.type&&(i[_]=w.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const d=this._changed;if(this._changed){const w=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(w.length||S.length)&&this._updateWorkerLayers(w,S);for(const f in this._updatedSources){const b=this._updatedSources[f];if("reload"===b)this._reloadSource(f);else{if("clear"!==b)throw new Error(`Invalid action ${b}`);this._clearSource(f)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const f in this._updatedPaintProps)this._layers[f].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const _={};for(const w in this.sourceCaches){const S=this.sourceCaches[w];_[w]=S.used,S.used=!1}for(const w of this._order){const S=this._layers[w];S.recalculate(i,this._availableImages),!S.isHidden(i.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const w in _){const S=this.sourceCaches[w];_[w]!==S.used&&S.fire(new v.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(i),this.z=i.zoom,d&&this.fire(new v.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,d={}){this._checkLoaded();const _=this.serialize();if(i=d.transformStyle?d.transformStyle(_,i):i,fn(this,v.validateStyle(i)))return!1;(i=v.clone$1(i)).layers=v.derefLayers(i.layers);const w=v.diffStyles(_,i).filter(f=>!(f.command in rs));if(0===w.length)return!1;const S=w.filter(f=>!(f.command in Mr));if(S.length>0)throw new Error(`Unimplemented: ${S.map(f=>f.command).join(", ")}.`);for(const f of w)"setTransition"!==f.command&&this[f.command].apply(this,f.args);return this.stylesheet=i,!0}addImage(i,d){if(this.getImage(i))return this.fire(new v.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,d),this._afterImageUpdated(i)}updateImage(i,d){this.imageManager.updateImage(i,d)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new v.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,d,_={}){if(this._checkLoaded(),void 0!==this.sourceCaches[i])throw new Error(`Source "${i}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(v.validateStyle.source,`sources.${i}`,d,null,_))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const w=this.sourceCaches[i]=new Zi(i,d,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:i})),w.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),void 0===this.sourceCaches[i])throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===i)return this.fire(new v.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${_}" is using it.`)));const d=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],d.fire(new v.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,d){if(this._checkLoaded(),void 0===this.sourceCaches[i])throw new Error(`There is no source with this ID=${i}`);const _=this.sourceCaches[i].getSource();if("geojson"!==_.type)throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(d),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,d,_={}){this._checkLoaded();const w=i.id;if(this.getLayer(w))return void this.fire(new v.ErrorEvent(new Error(`Layer "${w}" already exists on this map.`)));let S;if("custom"===i.type){if(fn(this,v.validateCustomStyleLayer(i)))return;S=v.createStyleLayer(i)}else{if("object"==typeof i.source&&(this.addSource(w,i.source),i=v.clone$1(i),i=v.extend(i,{source:w})),this._validate(v.validateStyle.layer,`layers.${w}`,i,{arrayIndex:-1},_))return;S=v.createStyleLayer(i),this._validateLayer(S),S.setEventedParent(this,{layer:{id:w}})}const f=d?this._order.indexOf(d):this._order.length;if(d&&-1===f)this.fire(new v.ErrorEvent(new Error(`Cannot add layer "${w}" before non-existing layer "${d}".`)));else{if(this._order.splice(f,0,w),this._layerOrderChanged=!0,this._layers[w]=S,this._removedLayers[w]&&S.source&&"custom"!==S.type){const b=this._removedLayers[w];delete this._removedLayers[w],b.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(i,d){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new v.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===d)return;const _=this._order.indexOf(i);this._order.splice(_,1);const w=d?this._order.indexOf(d):this._order.length;d&&-1===w?this.fire(new v.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${d}".`))):(this._order.splice(w,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const d=this._layers[i];if(!d)return void this.fire(new v.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));d.setEventedParent(null);const _=this._order.indexOf(i);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=d,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],d.onRemove&&d.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,d,_){this._checkLoaded();const w=this.getLayer(i);w?w.minzoom===d&&w.maxzoom===_||(null!=d&&(w.minzoom=d),null!=_&&(w.maxzoom=_),this._updateLayer(w)):this.fire(new v.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,d,_={}){this._checkLoaded();const w=this.getLayer(i);if(w){if(!v.deepEqual(w.filter,d))return null==d?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(v.validateStyle.filter,`layers.${w.id}.filter`,d,null,_)||(w.filter=v.clone$1(d),this._updateLayer(w)))}else this.fire(new v.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return v.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,d,_,w={}){this._checkLoaded();const S=this.getLayer(i);S?v.deepEqual(S.getLayoutProperty(d),_)||(S.setLayoutProperty(d,_,w),this._updateLayer(S)):this.fire(new v.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,d){const _=this.getLayer(i);if(_)return _.getLayoutProperty(d);this.fire(new v.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,d,_,w={}){this._checkLoaded();const S=this.getLayer(i);S?v.deepEqual(S.getPaintProperty(d),_)||(S.setPaintProperty(d,_,w)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new v.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,d){return this.getLayer(i).getPaintProperty(d)}setFeatureState(i,d){this._checkLoaded();const _=i.source,w=i.sourceLayer,S=this.sourceCaches[_];if(void 0===S)return void this.fire(new v.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const f=S.getSource().type;"geojson"===f&&w?this.fire(new v.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==f||w?(void 0===i.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),S.setFeatureState(w,i.id,d)):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,d){this._checkLoaded();const _=i.source,w=this.sourceCaches[_];if(void 0===w)return void this.fire(new v.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const S=w.getSource().type,f="vector"===S?i.sourceLayer:void 0;"vector"!==S||f?d&&"string"!=typeof i.id&&"number"!=typeof i.id?this.fire(new v.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(f,i.id,d):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const d=i.source,_=i.sourceLayer,w=this.sourceCaches[d];if(void 0!==w)return"vector"!==w.getSource().type||_?(void 0===i.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(_,i.id)):void this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new v.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return v.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=v.mapObject(this.sourceCaches,w=>w.serialize()),d=this._serializeByIds(this._order),_=this.stylesheet;return v.filterObject({version:_.version,name:_.name,metadata:_.metadata,light:_.light,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,sources:i,layers:d},w=>void 0!==w)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&"raster"!==this.sourceCaches[i.source].getSource().type&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const d=f=>"fill-extrusion"===this._layers[f].type,_={},w=[];for(let f=this._order.length-1;f>=0;f--){const b=this._order[f];if(d(b)){_[b]=f;for(const y of i){const D=y[b];if(D)for(const k of D)w.push(k)}}}w.sort((f,b)=>b.intersectionZ-f.intersectionZ);const S=[];for(let f=this._order.length-1;f>=0;f--){const b=this._order[f];if(d(b))for(let y=w.length-1;y>=0;y--){const D=w[y].feature;if(_[D.layer.id]<f)break;S.push(D),w.pop()}else for(const y of i){const D=y[b];if(D)for(const k of D)S.push(k.feature)}}return S}queryRenderedFeatures(i,d,_){d&&d.filter&&this._validate(v.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);const w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new v.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const b of d.layers){const y=this._layers[b];if(!y)return this.fire(new v.ErrorEvent(new Error(`The layer '${b}' does not exist in the map's style and cannot be queried for features.`))),[];w[y.source]=!0}}const S=[];d.availableImages=this._availableImages;const f=this._serializedAllLayers();for(const b in this.sourceCaches)d.layers&&!w[b]||S.push(ti(this.sourceCaches[b],this._layers,f,i,d,_));return this.placement&&S.push(function(b,y,D,k,R,B,ee){const oe={},Ee=B.queryRenderedSymbols(k),Ce=[];for(const nt of Object.keys(Ee).map(Number))Ce.push(ee[nt]);Ce.sort(ot);for(const nt of Ce){const yt=nt.featureIndex.lookupSymbolFeatures(Ee[nt.bucketInstanceId],y,nt.bucketIndex,nt.sourceLayerIndex,R.filter,R.layers,R.availableImages,b);for(const $e in yt){const gt=oe[$e]=oe[$e]||[],kt=yt[$e];kt.sort((Lt,Zt)=>{const ri=nt.featureSortOrder;if(ri){const ii=ri.indexOf(Lt.featureIndex);return ri.indexOf(Zt.featureIndex)-ii}return Zt.featureIndex-Lt.featureIndex});for(const Lt of kt)gt.push(Lt)}}for(const nt in oe)oe[nt].forEach(yt=>{const $e=yt.feature,gt=D[b[nt].source].getFeatureState($e.layer["source-layer"],$e.id);$e.source=$e.layer.source,$e.layer["source-layer"]&&($e.sourceLayer=$e.layer["source-layer"]),$e.state=gt});return oe}(this._layers,f,this.sourceCaches,i,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(i,d){d&&d.filter&&this._validate(v.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);const _=this.sourceCaches[i];return _?function(w,S){const f=w.getRenderableIds().map(D=>w.getTileByID(D)),b=[],y={};for(let D=0;D<f.length;D++){const k=f[D],R=k.tileID.canonical.key;y[R]||(y[R]=!0,k.querySourceFeatures(b,S))}return b}(_,d):[]}addSourceType(i,d,_){return Yt(i)?_(new Error(`A source type called "${i}" already exists.`)):(ut[i]=d,d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:d.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(i,d={}){this._checkLoaded();const _=this.light.getLight();let w=!1;for(const f in i)if(!v.deepEqual(i[f],_[f])){w=!0;break}if(!w)return;const S={now:v.browser.now(),transition:v.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,d),this.light.updateTransitions(S)}_validate(i,d,_,w,S={}){return(!S||!1!==S.validate)&&fn(this,i.call(v.validateStyle,v.extend({key:d,style:this.serialize(),value:_,styleSpec:v.v8Spec},w)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),v.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const _=this.sourceCaches[d];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const d in this.sourceCaches)this.sourceCaches[d].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,d,_,w,S=!1){let f=!1,b=!1;const y={};for(const D of this._order){const k=this._layers[D];if("symbol"!==k.type)continue;if(!y[k.source]){const B=this.sourceCaches[k.source];y[k.source]=B.getRenderableIds(!0).map(ee=>B.getTileByID(ee)).sort((ee,oe)=>oe.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(oe.tileID)?-1:1))}const R=this.crossTileSymbolIndex.addLayer(k,y[k.source],i.center.lng);f=f||R}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||0===_)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.browser.now(),i.zoom))&&(this.pauseablePlacement=new Mo(i,this.map.terrain,this._order,S,d,_,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,y),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.browser.now()),b=!0),f&&this.pauseablePlacement.placement.setStale()),b||f)for(const D of this._order){const k=this._layers[D];"symbol"===k.type&&this.placement.updateLayerOpacities(k,y[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.browser.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,d,_){this.imageManager.getImages(d.icons,_),this._updateTilesForChangedImages();const w=this.sourceCaches[d.source];w&&w.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(i,d,_){this.glyphManager.getGlyphs(d.stacks,_);const w=this.sourceCaches[d.source];w&&w.setDependencies(d.tileID.key,d.type,[""])}getResource(i,d,_){return v.makeRequest(d,_)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,d={}){this._checkLoaded(),i&&this._validate(v.validateStyle.glyphs,"glyphs",i,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,d,_={},w){this._checkLoaded();const S=[{id:i,url:d}],f=[...Ne(this.stylesheet.sprite),...S];this._validate(v.validateStyle.sprite,"sprite",f,null,_)||(this.stylesheet.sprite=f,this._loadSprite(S,!0,w))}removeSprite(i){this._checkLoaded();const d=Ne(this.stylesheet.sprite);if(d.find(_=>_.id===i)){if(this._spritesImagesIds[i])for(const _ of this._spritesImagesIds[i])this.imageManager.removeImage(_),this._changedImages[_]=!0;d.splice(d.findIndex(_=>_.id===i),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))}else this.fire(new v.ErrorEvent(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Ne(this.stylesheet.sprite)}setSprite(i,d={},_){this._checkLoaded(),i&&this._validate(v.validateStyle.sprite,"sprite",i,null,d)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,_):(this._unloadSprite(),_&&_(null)))}}hr.registerForPluginStateChange=v.registerForPluginStateChange;var Do=v.createLayout([{name:"a_pos",type:"Int16",components:2}]),io="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const no={prelude:mn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:mn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:mn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:mn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:mn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:mn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:mn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:mn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:mn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:mn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:mn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:mn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:mn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:mn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:mn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:mn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:mn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:mn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:mn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:mn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:mn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",io),terrainDepth:mn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",io),terrainCoords:mn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",io)};function mn(E,i){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=i.match(/attribute ([\w]+) ([\w]+)/g),w=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),f=S?S.concat(w):w,b={};return{fragmentSource:E=E.replace(d,(y,D,k,R,B)=>(b[B]=!0,"define"===D?`\n#ifndef HAS_UNIFORM_u_${B}\nvarying ${k} ${R} ${B};\n#else\nuniform ${k} ${R} u_${B};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${B}\n    ${k} ${R} ${B} = u_${B};\n#endif\n`)),vertexSource:i=i.replace(d,(y,D,k,R,B)=>{const ee="float"===R?"vec2":"vec4",oe=B.match(/color/)?"color":ee;return b[B]?"define"===D?`\n#ifndef HAS_UNIFORM_u_${B}\nuniform lowp float u_${B}_t;\nattribute ${k} ${ee} a_${B};\nvarying ${k} ${R} ${B};\n#else\nuniform ${k} ${R} u_${B};\n#endif\n`:"vec4"===oe?`\n#ifndef HAS_UNIFORM_u_${B}\n    ${B} = a_${B};\n#else\n    ${k} ${R} ${B} = u_${B};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${B}\n    ${B} = unpack_mix_${oe}(a_${B}, u_${B}_t);\n#else\n    ${k} ${R} ${B} = u_${B};\n#endif\n`:"define"===D?`\n#ifndef HAS_UNIFORM_u_${B}\nuniform lowp float u_${B}_t;\nattribute ${k} ${ee} a_${B};\n#else\nuniform ${k} ${R} u_${B};\n#endif\n`:"vec4"===oe?`\n#ifndef HAS_UNIFORM_u_${B}\n    ${k} ${R} ${B} = a_${B};\n#else\n    ${k} ${R} ${B} = u_${B};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${B}\n    ${k} ${R} ${B} = unpack_mix_${oe}(a_${B}, u_${B}_t);\n#else\n    ${k} ${R} ${B} = u_${B};\n#endif\n`}),staticAttributes:_,staticUniforms:f}}class ro{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,d,_,w,S,f,b,y,D){this.context=i;let k=this.boundPaintVertexBuffers.length!==w.length;for(let R=0;!k&&R<w.length;R++)this.boundPaintVertexBuffers[R]!==w[R]&&(k=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==_||k||this.boundIndexBuffer!==S||this.boundVertexOffset!==f||this.boundDynamicVertexBuffer!==b||this.boundDynamicVertexBuffer2!==y||this.boundDynamicVertexBuffer3!==D?this.freshBind(d,_,w,S,f,b,y,D):(i.bindVertexArray.set(this.vao),b&&b.bind(),S&&S.dynamicDraw&&S.bind(),y&&y.bind(),D&&D.bind())}freshBind(i,d,_,w,S,f,b,y){const D=i.numAttributes,k=this.context,R=k.gl;this.vao&&this.destroy(),this.vao=k.createVertexArray(),k.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=w,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=f,this.boundDynamicVertexBuffer2=b,this.boundDynamicVertexBuffer3=y,d.enableAttributes(R,i);for(const B of _)B.enableAttributes(R,i);f&&f.enableAttributes(R,i),b&&b.enableAttributes(R,i),y&&y.enableAttributes(R,i),d.bind(),d.setVertexAttribPointers(R,i,S);for(const B of _)B.bind(),B.setVertexAttribPointers(R,i,S);f&&(f.bind(),f.setVertexAttribPointers(R,i,S)),w&&w.bind(),b&&(b.bind(),b.setVertexAttribPointers(R,i,S)),y&&(y.bind(),y.setVertexAttribPointers(R,i,S)),k.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Po(E){const i=[];for(let d=0;d<E.length;d++){if(null===E[d])continue;const _=E[d].split(" ");i.push(_.pop())}return i}class os{constructor(i,d,_,w,S,f){const b=i.gl;this.program=b.createProgram();const y=Po(d.staticAttributes),D=_?_.getBinderAttributes():[],k=y.concat(D),R=no.prelude.staticUniforms?Po(no.prelude.staticUniforms):[],B=d.staticUniforms?Po(d.staticUniforms):[],ee=_?_.getBinderUniforms():[],oe=R.concat(B).concat(ee),Ee=[];for(const Lt of oe)Ee.indexOf(Lt)<0&&Ee.push(Lt);const Ce=_?_.defines():[];S&&Ce.push("#define OVERDRAW_INSPECTOR;"),f&&Ce.push("#define TERRAIN3D;");const nt=Ce.concat(no.prelude.fragmentSource,d.fragmentSource).join("\n"),yt=Ce.concat(no.prelude.vertexSource,d.vertexSource).join("\n"),$e=b.createShader(b.FRAGMENT_SHADER);if(b.isContextLost())return void(this.failedToCreate=!0);b.shaderSource($e,nt),b.compileShader($e),b.attachShader(this.program,$e);const gt=b.createShader(b.VERTEX_SHADER);if(b.isContextLost())return void(this.failedToCreate=!0);b.shaderSource(gt,yt),b.compileShader(gt),b.attachShader(this.program,gt),this.attributes={};const kt={};this.numAttributes=k.length;for(let Lt=0;Lt<this.numAttributes;Lt++)k[Lt]&&(b.bindAttribLocation(this.program,Lt,k[Lt]),this.attributes[k[Lt]]=Lt);b.linkProgram(this.program),b.deleteShader(gt),b.deleteShader($e);for(let Lt=0;Lt<Ee.length;Lt++){const Zt=Ee[Lt];if(Zt&&!kt[Zt]){const ri=b.getUniformLocation(this.program,Zt);ri&&(kt[Zt]=ri)}}var Lt,Zt;this.fixedUniforms=w(i,kt),this.terrainUniforms={u_depth:new v.Uniform1i(Lt=i,(Zt=kt).u_depth),u_terrain:new v.Uniform1i(Lt,Zt.u_terrain),u_terrain_dim:new v.Uniform1f(Lt,Zt.u_terrain_dim),u_terrain_matrix:new v.UniformMatrix4f(Lt,Zt.u_terrain_matrix),u_terrain_unpack:new v.Uniform4f(Lt,Zt.u_terrain_unpack),u_terrain_exaggeration:new v.Uniform1f(Lt,Zt.u_terrain_exaggeration)},this.binderUniforms=_?_.getUniforms(i,kt):[]}draw(i,d,_,w,S,f,b,y,D,k,R,B,ee,oe,Ee,Ce,nt,yt){const $e=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(_),i.setStencilMode(w),i.setColorMode(S),i.setCullFace(f),y){i.activeTexture.set($e.TEXTURE2),$e.bindTexture($e.TEXTURE_2D,y.depthTexture),i.activeTexture.set($e.TEXTURE3),$e.bindTexture($e.TEXTURE_2D,y.texture);for(const kt in this.terrainUniforms)this.terrainUniforms[kt].set(y[kt])}for(const kt in this.fixedUniforms)this.fixedUniforms[kt].set(b[kt]);Ee&&Ee.setUniforms(i,this.binderUniforms,ee,{zoom:oe});let gt=0;switch(d){case $e.LINES:gt=2;break;case $e.TRIANGLES:gt=3;break;case $e.LINE_STRIP:gt=1}for(const kt of B.get()){const Lt=kt.vaos||(kt.vaos={});(Lt[D]||(Lt[D]=new ro)).bind(i,this,k,Ee?Ee.getPaintVertexBuffers():[],R,kt.vertexOffset,Ce,nt,yt),$e.drawElements(d,kt.primitiveLength*gt,$e.UNSIGNED_SHORT,kt.primitiveOffset*gt*2)}}}function xa(E,i,d){const _=1/se(d,1,i.transform.tileZoom),w=Math.pow(2,d.tileID.overscaledZ),S=d.tileSize*Math.pow(2,i.transform.tileZoom)/w,f=S*(d.tileID.canonical.x+d.tileID.wrap*w),b=S*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[_,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[f>>16,b>>16],u_pixel_coord_lower:[65535&f,65535&b]}}const La=(E,i,d,_)=>{const w=i.style.light,S=w.properties.get("position"),f=[S.x,S.y,S.z],b=(D=new v.ARRAY_TYPE(9),v.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D);var D;"viewport"===w.properties.get("anchor")&&function(D,k){var R=Math.sin(k),B=Math.cos(k);D[0]=B,D[1]=R,D[2]=0,D[3]=-R,D[4]=B,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(b,-i.transform.angle),function(D,k,R){var B=k[0],ee=k[1],oe=k[2];D[0]=B*R[0]+ee*R[3]+oe*R[6],D[1]=B*R[1]+ee*R[4]+oe*R[7],D[2]=B*R[2]+ee*R[5]+oe*R[8]}(f,f,b);const y=w.properties.get("color");return{u_matrix:E,u_lightpos:f,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[y.r,y.g,y.b],u_vertical_gradient:+d,u_opacity:_}},Ic=(E,i,d,_,w,S,f)=>v.extend(La(E,i,d,_),xa(S,i,f),{u_height_factor:-Math.pow(2,w.overscaledZ)/f.tileSize/8}),wa=E=>({u_matrix:E}),vl=(E,i,d,_)=>v.extend(wa(E),xa(d,i,_)),Ca=(E,i)=>({u_matrix:E,u_world:i}),Ea=(E,i,d,_,w)=>v.extend(vl(E,i,d,_),{u_world:w}),Na=(E,i,d,_)=>{const w=E.transform;let S,f;if("map"===_.paint.get("circle-pitch-alignment")){const b=se(d,1,w.zoom);S=!0,f=[b,b]}else S=!1,f=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+("map"===_.paint.get("circle-pitch-scale")),u_matrix:E.translatePosMatrix(i.posMatrix,d,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:f}},cn=(E,i,d)=>{const _=se(d,1,i.zoom),w=Math.pow(2,i.zoom-d.tileID.overscaledZ),S=d.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:_,u_extrude_scale:[i.pixelsToGLUnits[0]/(_*w),i.pixelsToGLUnits[1]/(_*w)],u_overscale_factor:S}},Pr=(E,i,d=1)=>({u_matrix:E,u_color:i,u_overlay:0,u_overlay_scale:d}),Wr=E=>({u_matrix:E}),As=(E,i,d,_)=>({u_matrix:E,u_extrude_scale:se(i,1,d),u_intensity:_});function vr(E,i){const d=Math.pow(2,i.canonical.z),_=i.canonical.y;return[new v.MercatorCoordinate(0,_/d).toLngLat().lat,new v.MercatorCoordinate(0,(_+1)/d).toLngLat().lat]}const ks=(E,i,d,_)=>{const w=E.transform;return{u_matrix:gr(E,i,d,_),u_ratio:1/se(i,1,w.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},go=(E,i,d,_,w)=>v.extend(ks(E,i,d,w),{u_image:0,u_image_height:_}),qo=(E,i,d,_,w)=>{const S=E.transform,f=Yo(i,S);return{u_matrix:gr(E,i,d,w),u_texsize:i.imageAtlasTexture.size,u_ratio:1/se(i,1,S.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[f,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Uo=(E,i,d,_,w,S)=>{const f=E.lineAtlas,b=Yo(i,E.transform),y="round"===d.layout.get("line-cap"),D=f.getDash(_.from,y),k=f.getDash(_.to,y),R=D.width*w.fromScale,B=k.width*w.toScale;return v.extend(ks(E,i,d,S),{u_patternscale_a:[b/R,-D.height/2],u_patternscale_b:[b/B,-k.height/2],u_sdfgamma:f.width/(256*Math.min(R,B)*E.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:k.y,u_mix:w.t})};function Yo(E,i){return 1/se(E,1,i.tileZoom)}function gr(E,i,d,_){return E.translatePosMatrix(_?_.posMatrix:i.tileID.posMatrix,i,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Ai=(E,i,d,_,w)=>{return{u_matrix:E,u_tl_parent:i,u_scale_parent:d,u_buffer_scale:1,u_fade_t:_.mix,u_opacity:_.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(f=w.paint.get("raster-saturation"),f>0?1-1/(1.001-f):-f),u_contrast_factor:(S=w.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:rn(w.paint.get("raster-hue-rotate"))};var S,f};function rn(E){E*=Math.PI/180;const i=Math.sin(E),d=Math.cos(E);return[(2*d+1)/3,(-Math.sqrt(3)*i-d+1)/3,(Math.sqrt(3)*i-d+1)/3]}const An=(E,i,d,_,w,S,f,b,y,D)=>{const k=w.transform;return{u_is_size_zoom_constant:+("constant"===E||"source"===E),u_is_size_feature_constant:+("constant"===E||"camera"===E),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:k.cameraToCenterDistance,u_pitch:k.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:k.width/k.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:f,u_coord_matrix:b,u_is_text:+y,u_pitch_with_map:+_,u_texsize:D,u_texture:0}},_o=(E,i,d,_,w,S,f,b,y,D,k)=>{const R=w.transform;return v.extend(An(E,i,d,_,w,S,f,b,y,D),{u_gamma_scale:_?Math.cos(R._pitch)*R.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+k})},Lr=(E,i,d,_,w,S,f,b,y,D)=>v.extend(_o(E,i,d,_,w,S,f,b,!0,y,!0),{u_texsize_icon:D,u_texture_icon:1}),Yn=(E,i,d)=>({u_matrix:E,u_opacity:i,u_color:d}),Ko=(E,i,d,_,w,S)=>v.extend(function(f,b,y,D){const k=y.imageManager.getPattern(f.from.toString()),R=y.imageManager.getPattern(f.to.toString()),{width:B,height:ee}=y.imageManager.getPixelSize(),oe=Math.pow(2,D.tileID.overscaledZ),Ee=D.tileSize*Math.pow(2,y.transform.tileZoom)/oe,Ce=Ee*(D.tileID.canonical.x+D.tileID.wrap*oe),nt=Ee*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:k.tl,u_pattern_br_a:k.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[B,ee],u_mix:b.t,u_pattern_size_a:k.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/se(D,1,y.transform.tileZoom),u_pixel_coord_upper:[Ce>>16,nt>>16],u_pixel_coord_lower:[65535&Ce,65535&nt]}}(_,S,d,w),{u_matrix:E,u_opacity:i}),mr={fillExtrusion:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_lightpos:new v.Uniform3f(E,i.u_lightpos),u_lightintensity:new v.Uniform1f(E,i.u_lightintensity),u_lightcolor:new v.Uniform3f(E,i.u_lightcolor),u_vertical_gradient:new v.Uniform1f(E,i.u_vertical_gradient),u_opacity:new v.Uniform1f(E,i.u_opacity)}),fillExtrusionPattern:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_lightpos:new v.Uniform3f(E,i.u_lightpos),u_lightintensity:new v.Uniform1f(E,i.u_lightintensity),u_lightcolor:new v.Uniform3f(E,i.u_lightcolor),u_vertical_gradient:new v.Uniform1f(E,i.u_vertical_gradient),u_height_factor:new v.Uniform1f(E,i.u_height_factor),u_image:new v.Uniform1i(E,i.u_image),u_texsize:new v.Uniform2f(E,i.u_texsize),u_pixel_coord_upper:new v.Uniform2f(E,i.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(E,i.u_pixel_coord_lower),u_scale:new v.Uniform3f(E,i.u_scale),u_fade:new v.Uniform1f(E,i.u_fade),u_opacity:new v.Uniform1f(E,i.u_opacity)}),fill:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix)}),fillPattern:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_image:new v.Uniform1i(E,i.u_image),u_texsize:new v.Uniform2f(E,i.u_texsize),u_pixel_coord_upper:new v.Uniform2f(E,i.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(E,i.u_pixel_coord_lower),u_scale:new v.Uniform3f(E,i.u_scale),u_fade:new v.Uniform1f(E,i.u_fade)}),fillOutline:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_world:new v.Uniform2f(E,i.u_world)}),fillOutlinePattern:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_world:new v.Uniform2f(E,i.u_world),u_image:new v.Uniform1i(E,i.u_image),u_texsize:new v.Uniform2f(E,i.u_texsize),u_pixel_coord_upper:new v.Uniform2f(E,i.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(E,i.u_pixel_coord_lower),u_scale:new v.Uniform3f(E,i.u_scale),u_fade:new v.Uniform1f(E,i.u_fade)}),circle:(E,i)=>({u_camera_to_center_distance:new v.Uniform1f(E,i.u_camera_to_center_distance),u_scale_with_map:new v.Uniform1i(E,i.u_scale_with_map),u_pitch_with_map:new v.Uniform1i(E,i.u_pitch_with_map),u_extrude_scale:new v.Uniform2f(E,i.u_extrude_scale),u_device_pixel_ratio:new v.Uniform1f(E,i.u_device_pixel_ratio),u_matrix:new v.UniformMatrix4f(E,i.u_matrix)}),collisionBox:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_camera_to_center_distance:new v.Uniform1f(E,i.u_camera_to_center_distance),u_pixels_to_tile_units:new v.Uniform1f(E,i.u_pixels_to_tile_units),u_extrude_scale:new v.Uniform2f(E,i.u_extrude_scale),u_overscale_factor:new v.Uniform1f(E,i.u_overscale_factor)}),collisionCircle:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_inv_matrix:new v.UniformMatrix4f(E,i.u_inv_matrix),u_camera_to_center_distance:new v.Uniform1f(E,i.u_camera_to_center_distance),u_viewport_size:new v.Uniform2f(E,i.u_viewport_size)}),debug:(E,i)=>({u_color:new v.UniformColor(E,i.u_color),u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_overlay:new v.Uniform1i(E,i.u_overlay),u_overlay_scale:new v.Uniform1f(E,i.u_overlay_scale)}),clippingMask:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix)}),heatmap:(E,i)=>({u_extrude_scale:new v.Uniform1f(E,i.u_extrude_scale),u_intensity:new v.Uniform1f(E,i.u_intensity),u_matrix:new v.UniformMatrix4f(E,i.u_matrix)}),heatmapTexture:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_world:new v.Uniform2f(E,i.u_world),u_image:new v.Uniform1i(E,i.u_image),u_color_ramp:new v.Uniform1i(E,i.u_color_ramp),u_opacity:new v.Uniform1f(E,i.u_opacity)}),hillshade:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_image:new v.Uniform1i(E,i.u_image),u_latrange:new v.Uniform2f(E,i.u_latrange),u_light:new v.Uniform2f(E,i.u_light),u_shadow:new v.UniformColor(E,i.u_shadow),u_highlight:new v.UniformColor(E,i.u_highlight),u_accent:new v.UniformColor(E,i.u_accent)}),hillshadePrepare:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_image:new v.Uniform1i(E,i.u_image),u_dimension:new v.Uniform2f(E,i.u_dimension),u_zoom:new v.Uniform1f(E,i.u_zoom),u_unpack:new v.Uniform4f(E,i.u_unpack)}),line:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_ratio:new v.Uniform1f(E,i.u_ratio),u_device_pixel_ratio:new v.Uniform1f(E,i.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(E,i.u_units_to_pixels)}),lineGradient:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_ratio:new v.Uniform1f(E,i.u_ratio),u_device_pixel_ratio:new v.Uniform1f(E,i.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(E,i.u_units_to_pixels),u_image:new v.Uniform1i(E,i.u_image),u_image_height:new v.Uniform1f(E,i.u_image_height)}),linePattern:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_texsize:new v.Uniform2f(E,i.u_texsize),u_ratio:new v.Uniform1f(E,i.u_ratio),u_device_pixel_ratio:new v.Uniform1f(E,i.u_device_pixel_ratio),u_image:new v.Uniform1i(E,i.u_image),u_units_to_pixels:new v.Uniform2f(E,i.u_units_to_pixels),u_scale:new v.Uniform3f(E,i.u_scale),u_fade:new v.Uniform1f(E,i.u_fade)}),lineSDF:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_ratio:new v.Uniform1f(E,i.u_ratio),u_device_pixel_ratio:new v.Uniform1f(E,i.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(E,i.u_units_to_pixels),u_patternscale_a:new v.Uniform2f(E,i.u_patternscale_a),u_patternscale_b:new v.Uniform2f(E,i.u_patternscale_b),u_sdfgamma:new v.Uniform1f(E,i.u_sdfgamma),u_image:new v.Uniform1i(E,i.u_image),u_tex_y_a:new v.Uniform1f(E,i.u_tex_y_a),u_tex_y_b:new v.Uniform1f(E,i.u_tex_y_b),u_mix:new v.Uniform1f(E,i.u_mix)}),raster:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_tl_parent:new v.Uniform2f(E,i.u_tl_parent),u_scale_parent:new v.Uniform1f(E,i.u_scale_parent),u_buffer_scale:new v.Uniform1f(E,i.u_buffer_scale),u_fade_t:new v.Uniform1f(E,i.u_fade_t),u_opacity:new v.Uniform1f(E,i.u_opacity),u_image0:new v.Uniform1i(E,i.u_image0),u_image1:new v.Uniform1i(E,i.u_image1),u_brightness_low:new v.Uniform1f(E,i.u_brightness_low),u_brightness_high:new v.Uniform1f(E,i.u_brightness_high),u_saturation_factor:new v.Uniform1f(E,i.u_saturation_factor),u_contrast_factor:new v.Uniform1f(E,i.u_contrast_factor),u_spin_weights:new v.Uniform3f(E,i.u_spin_weights)}),symbolIcon:(E,i)=>({u_is_size_zoom_constant:new v.Uniform1i(E,i.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(E,i.u_is_size_feature_constant),u_size_t:new v.Uniform1f(E,i.u_size_t),u_size:new v.Uniform1f(E,i.u_size),u_camera_to_center_distance:new v.Uniform1f(E,i.u_camera_to_center_distance),u_pitch:new v.Uniform1f(E,i.u_pitch),u_rotate_symbol:new v.Uniform1i(E,i.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(E,i.u_aspect_ratio),u_fade_change:new v.Uniform1f(E,i.u_fade_change),u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(E,i.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(E,i.u_coord_matrix),u_is_text:new v.Uniform1i(E,i.u_is_text),u_pitch_with_map:new v.Uniform1i(E,i.u_pitch_with_map),u_texsize:new v.Uniform2f(E,i.u_texsize),u_texture:new v.Uniform1i(E,i.u_texture)}),symbolSDF:(E,i)=>({u_is_size_zoom_constant:new v.Uniform1i(E,i.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(E,i.u_is_size_feature_constant),u_size_t:new v.Uniform1f(E,i.u_size_t),u_size:new v.Uniform1f(E,i.u_size),u_camera_to_center_distance:new v.Uniform1f(E,i.u_camera_to_center_distance),u_pitch:new v.Uniform1f(E,i.u_pitch),u_rotate_symbol:new v.Uniform1i(E,i.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(E,i.u_aspect_ratio),u_fade_change:new v.Uniform1f(E,i.u_fade_change),u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(E,i.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(E,i.u_coord_matrix),u_is_text:new v.Uniform1i(E,i.u_is_text),u_pitch_with_map:new v.Uniform1i(E,i.u_pitch_with_map),u_texsize:new v.Uniform2f(E,i.u_texsize),u_texture:new v.Uniform1i(E,i.u_texture),u_gamma_scale:new v.Uniform1f(E,i.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(E,i.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(E,i.u_is_halo)}),symbolTextAndIcon:(E,i)=>({u_is_size_zoom_constant:new v.Uniform1i(E,i.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(E,i.u_is_size_feature_constant),u_size_t:new v.Uniform1f(E,i.u_size_t),u_size:new v.Uniform1f(E,i.u_size),u_camera_to_center_distance:new v.Uniform1f(E,i.u_camera_to_center_distance),u_pitch:new v.Uniform1f(E,i.u_pitch),u_rotate_symbol:new v.Uniform1i(E,i.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(E,i.u_aspect_ratio),u_fade_change:new v.Uniform1f(E,i.u_fade_change),u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(E,i.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(E,i.u_coord_matrix),u_is_text:new v.Uniform1i(E,i.u_is_text),u_pitch_with_map:new v.Uniform1i(E,i.u_pitch_with_map),u_texsize:new v.Uniform2f(E,i.u_texsize),u_texsize_icon:new v.Uniform2f(E,i.u_texsize_icon),u_texture:new v.Uniform1i(E,i.u_texture),u_texture_icon:new v.Uniform1i(E,i.u_texture_icon),u_gamma_scale:new v.Uniform1f(E,i.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(E,i.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(E,i.u_is_halo)}),background:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_opacity:new v.Uniform1f(E,i.u_opacity),u_color:new v.UniformColor(E,i.u_color)}),backgroundPattern:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_opacity:new v.Uniform1f(E,i.u_opacity),u_image:new v.Uniform1i(E,i.u_image),u_pattern_tl_a:new v.Uniform2f(E,i.u_pattern_tl_a),u_pattern_br_a:new v.Uniform2f(E,i.u_pattern_br_a),u_pattern_tl_b:new v.Uniform2f(E,i.u_pattern_tl_b),u_pattern_br_b:new v.Uniform2f(E,i.u_pattern_br_b),u_texsize:new v.Uniform2f(E,i.u_texsize),u_mix:new v.Uniform1f(E,i.u_mix),u_pattern_size_a:new v.Uniform2f(E,i.u_pattern_size_a),u_pattern_size_b:new v.Uniform2f(E,i.u_pattern_size_b),u_scale_a:new v.Uniform1f(E,i.u_scale_a),u_scale_b:new v.Uniform1f(E,i.u_scale_b),u_pixel_coord_upper:new v.Uniform2f(E,i.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(E,i.u_pixel_coord_lower),u_tile_units_to_pixels:new v.Uniform1f(E,i.u_tile_units_to_pixels)}),terrain:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_texture:new v.Uniform1i(E,i.u_texture),u_ele_delta:new v.Uniform1f(E,i.u_ele_delta)}),terrainDepth:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_ele_delta:new v.Uniform1f(E,i.u_ele_delta)}),terrainCoords:(E,i)=>({u_matrix:new v.UniformMatrix4f(E,i.u_matrix),u_texture:new v.Uniform1i(E,i.u_texture),u_terrain_coords_id:new v.Uniform1f(E,i.u_terrain_coords_id),u_ele_delta:new v.Uniform1f(E,i.u_ele_delta)})};class jo{constructor(i,d,_){this.context=i;const w=i.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Oo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sn{constructor(i,d,_,w){this.length=d.length,this.attributes=_,this.itemSize=d.bytesPerElement,this.dynamicDraw=w,this.context=i;const S=i.gl;this.buffer=S.createBuffer(),i.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,d){for(let _=0;_<this.attributes.length;_++){const w=d.attributes[this.attributes[_].name];void 0!==w&&i.enableVertexAttribArray(w)}}setVertexAttribPointers(i,d,_){for(let w=0;w<this.attributes.length;w++){const S=this.attributes[w],f=d.attributes[S.name];void 0!==f&&i.vertexAttribPointer(f,S.components,i[Oo[S.type]],!1,this.itemSize,S.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ro=new WeakMap;function Js(E){if(Ro.has(E))return Ro.get(E);{const i=E.getParameter(E.VERSION).startsWith("WebGL 2.0");return Ro.set(E,i),i}}class un{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ar extends un{getDefault(){return v.Color.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class gs extends un{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class ss extends un{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class yo extends un{getDefault(){return[!0,!0,!0,!0]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Qs extends un{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class za extends un{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class _s extends un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const d=this.current;(i.func!==d.func||i.ref!==d.ref||i.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Ho extends un{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class vo extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ps extends un{getDefault(){return[0,1]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class pn extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=i,this.dirty=!1}}class as extends un{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class tl extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.BLEND):d.disable(d.BLEND),this.current=i,this.dirty=!1}}class Ba extends un{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class co extends un{getDefault(){return v.Color.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class da extends un{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class ea extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=i,this.dirty=!1}}class Os extends un{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class br extends un{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class il extends un{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Dr extends un{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Xn extends un{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class bo extends un{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Vr extends un{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Gn extends un{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class qr extends un{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Va extends un{getDefault(){return null}set(i){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class nl extends un{getDefault(){return null}set(i){var d;if(i===this.current&&!this.dirty)return;const _=this.gl;Js(_)?_.bindVertexArray(i):null===(d=_.getExtension("OES_vertex_array_object"))||void 0===d||d.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Rs extends un{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class bl extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Ac extends un{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Fs extends un{constructor(i,d){super(i),this.context=i,this.parent=d}getDefault(){return null}}class ua extends Fs{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Hl extends Fs{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class rl extends Fs{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ma{constructor(i,d,_,w,S){this.context=i,this.width=d,this.height=_;const f=i.gl,b=this.framebuffer=f.createFramebuffer();if(this.colorAttachment=new ua(i,b),w)this.depthAttachment=S?new rl(i,b):new Hl(i,b);else if(S)throw new Error("Stencil cannot be setted without depth");if(f.checkFramebufferStatus(f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,d=this.colorAttachment.get();if(d&&i.deleteTexture(d),this.depthAttachment){const _=this.depthAttachment.get();_&&i.deleteRenderbuffer(_)}i.deleteFramebuffer(this.framebuffer)}}class Bi{constructor(i,d,_){this.blendFunction=i,this.blendColor=d,this.mask=_}}Bi.Replace=[1,0],Bi.disabled=new Bi(Bi.Replace,v.Color.transparent,[!1,!1,!1,!1]),Bi.unblended=new Bi(Bi.Replace,v.Color.transparent,[!0,!0,!0,!0]),Bi.alphaBlended=new Bi([1,771],v.Color.transparent,[!0,!0,!0,!0]);class $l{constructor(i){var d,_;if(this.gl=i,this.clearColor=new ar(this),this.clearDepth=new gs(this),this.clearStencil=new ss(this),this.colorMask=new yo(this),this.depthMask=new Qs(this),this.stencilMask=new za(this),this.stencilFunc=new _s(this),this.stencilOp=new Ho(this),this.stencilTest=new vo(this),this.depthRange=new Ps(this),this.depthTest=new pn(this),this.depthFunc=new as(this),this.blend=new tl(this),this.blendFunc=new Ba(this),this.blendColor=new co(this),this.blendEquation=new da(this),this.cullFace=new ea(this),this.cullFaceSide=new Os(this),this.frontFace=new br(this),this.program=new il(this),this.activeTexture=new Dr(this),this.viewport=new Xn(this),this.bindFramebuffer=new bo(this),this.bindRenderbuffer=new Vr(this),this.bindTexture=new Gn(this),this.bindVertexBuffer=new qr(this),this.bindElementBuffer=new Va(this),this.bindVertexArray=new nl(this),this.pixelStoreUnpack=new Rs(this),this.pixelStoreUnpackPremultiplyAlpha=new bl(this),this.pixelStoreUnpackFlipY=new Ac(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Js(i)){this.HALF_FLOAT=i.HALF_FLOAT;const w=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(d=i.RGBA16F)&&void 0!==d?d:w?.RGBA16F_EXT,this.RGB16F=null!==(_=i.RGB16F)&&void 0!==_?_:w?.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const w=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=w?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,d){return new jo(this,i,d)}createVertexBuffer(i,d,_){return new sn(this,i,d,_)}createRenderbuffer(i,d,_){const w=this.gl,S=w.createRenderbuffer();return this.bindRenderbuffer.set(S),w.renderbufferStorage(w.RENDERBUFFER,i,d,_),this.bindRenderbuffer.set(null),S}createFramebuffer(i,d,_,w){return new Ma(this,i,d,_,w)}clear({color:i,depth:d,stencil:_}){const w=this.gl;let S=0;i&&(S|=w.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(S|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==_&&(S|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),w.clear(S)}setCullFace(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){v.deepEqual(i.blendFunction,Bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Js(this.gl)?this.gl.createVertexArray():null===(i=this.gl.getExtension("OES_vertex_array_object"))||void 0===i?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var d;return Js(this.gl)?this.gl.deleteVertexArray(i):null===(d=this.gl.getExtension("OES_vertex_array_object"))||void 0===d?void 0:d.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class kn{constructor(i,d,_){this.func=i,this.mask=d,this.range=_}}kn.ReadOnly=!1,kn.ReadWrite=!0,kn.disabled=new kn(519,kn.ReadOnly,[0,1]);class pr{constructor(i,d,_,w,S,f){this.test=i,this.ref=d,this.mask=_,this.fail=w,this.depthFail=S,this.pass=f}}pr.disabled=new pr({func:519,mask:0},0,0,7680,7680,7680);class lr{constructor(i,d,_){this.enable=i,this.mode=d,this.frontFace=_}}let Y;function W(E,i,d,_,w,S,f){const b=E.context,y=b.gl,D=E.useProgram("collisionBox"),k=[];let R=0,B=0;for(let $e=0;$e<_.length;$e++){const gt=_[$e],kt=i.getTile(gt),Lt=kt.getBucket(d);if(!Lt)continue;let Zt=gt.posMatrix;0===w[0]&&0===w[1]||(Zt=E.translatePosMatrix(gt.posMatrix,kt,w,S));const ri=f?Lt.textCollisionBox:Lt.iconCollisionBox,ii=Lt.collisionCircleArray;if(ii.length>0){const Ei=v.create(),Ui=Zt;v.mul(Ei,Lt.placementInvProjMatrix,E.transform.glCoordMatrix),v.mul(Ei,Ei,Lt.placementViewportMatrix),k.push({circleArray:ii,circleOffset:B,transform:Ui,invTransform:Ei,coord:gt}),R+=ii.length/4,B=R}ri&&D.draw(b,y.LINES,kn.disabled,pr.disabled,E.colorModeForRenderPass(),lr.disabled,cn(Zt,E.transform,kt),E.style.map.terrain&&E.style.map.terrain.getTerrainData(gt),d.id,ri.layoutVertexBuffer,ri.indexBuffer,ri.segments,null,E.transform.zoom,null,null,ri.collisionVertexBuffer)}if(!f||!k.length)return;const ee=E.useProgram("collisionCircle"),oe=new v.CollisionCircleLayoutArray;oe.resize(4*R),oe._trim();let Ee=0;for(const $e of k)for(let gt=0;gt<$e.circleArray.length/4;gt++){const kt=4*gt,Lt=$e.circleArray[kt+0],Zt=$e.circleArray[kt+1],ri=$e.circleArray[kt+2],ii=$e.circleArray[kt+3];oe.emplace(Ee++,Lt,Zt,ri,ii,0),oe.emplace(Ee++,Lt,Zt,ri,ii,1),oe.emplace(Ee++,Lt,Zt,ri,ii,2),oe.emplace(Ee++,Lt,Zt,ri,ii,3)}(!Y||Y.length<2*R)&&(Y=function($e){const gt=2*$e,kt=new v.QuadTriangleArray;kt.resize(gt),kt._trim();for(let Lt=0;Lt<gt;Lt++){const Zt=6*Lt;kt.uint16[Zt+0]=4*Lt+0,kt.uint16[Zt+1]=4*Lt+1,kt.uint16[Zt+2]=4*Lt+2,kt.uint16[Zt+3]=4*Lt+2,kt.uint16[Zt+4]=4*Lt+3,kt.uint16[Zt+5]=4*Lt+0}return kt}(R));const Ce=b.createIndexBuffer(Y,!0),nt=b.createVertexBuffer(oe,v.collisionCircleLayout.members,!0);for(const $e of k){const gt={u_matrix:$e.transform,u_inv_matrix:$e.invTransform,u_camera_to_center_distance:(yt=E.transform).cameraToCenterDistance,u_viewport_size:[yt.width,yt.height]};ee.draw(b,y.TRIANGLES,kn.disabled,pr.disabled,E.colorModeForRenderPass(),lr.disabled,gt,E.style.map.terrain&&E.style.map.terrain.getTerrainData($e.coord),d.id,nt,Ce,v.SegmentVector.simpleSegment(0,2*$e.circleOffset,$e.circleArray.length,$e.circleArray.length/2),null,E.transform.zoom,null,null,null)}var yt;nt.destroy(),Ce.destroy()}lr.disabled=new lr(!1,1029,2305),lr.backCCW=new lr(!0,1029,2305);const G=v.identity(new Float32Array(16));function we(E,i,d,_,w,S){const{horizontalAlign:f,verticalAlign:b}=v.getAnchorAlignment(E),y=-(f-.5)*i,D=-(b-.5)*d,k=v.evaluateVariableOffset(E,_);return new v.Point((y/w+k[0])*S,(D/w+k[1])*S)}function Ht(E,i,d,_,w,S,f,b,y,D,k){const R=E.text.placedSymbolArray,B=E.text.dynamicLayoutVertexArray,ee=E.icon.dynamicLayoutVertexArray,oe={};B.clear();for(let Ee=0;Ee<R.length;Ee++){const Ce=R.get(Ee),nt=Ce.hidden||!Ce.crossTileID||E.allowVerticalPlacement&&!Ce.placedOrientation?null:_[Ce.crossTileID];if(nt){const yt=new v.Point(Ce.anchorX,Ce.anchorY),$e=Ot(yt,d?f:S,k),gt=_i(w.cameraToCenterDistance,$e.signedDistanceFromCamera);let kt=v.evaluateSizeForFeature(E.textSizeData,y,Ce)*gt/v.ONE_EM;d&&(kt*=E.tilePixelRatio/b);const{width:Lt,height:Zt,anchor:ri,textOffset:ii,textBoxScale:Ei}=nt,Ui=we(ri,Lt,Zt,ii,Ei,kt),vn=d?Ot(yt.add(Ui),S,k).point:$e.point.add(i?Ui.rotate(-w.angle):Ui),bi=E.allowVerticalPlacement&&Ce.placedOrientation===v.WritingMode.vertical?Math.PI/2:0;for(let en=0;en<Ce.numGlyphs;en++)v.addDynamicAttributes(B,vn,bi);D&&Ce.associatedIconIndex>=0&&(oe[Ce.associatedIconIndex]={shiftedAnchor:vn,angle:bi})}else ie(Ce.numGlyphs,B)}if(D){ee.clear();const Ee=E.icon.placedSymbolArray;for(let Ce=0;Ce<Ee.length;Ce++){const nt=Ee.get(Ce);if(nt.hidden)ie(nt.numGlyphs,ee);else{const yt=oe[Ce];if(yt)for(let $e=0;$e<nt.numGlyphs;$e++)v.addDynamicAttributes(ee,yt.shiftedAnchor,yt.angle);else ie(nt.numGlyphs,ee)}}E.icon.dynamicLayoutVertexBuffer.updateData(ee)}E.text.dynamicLayoutVertexBuffer.updateData(B)}function Di(E,i,d){return d.iconsInText&&i?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Yr(E,i,d,_,w,S,f,b,y,D,k,R){const B=E.context,ee=B.gl,oe=E.transform,Ee="map"===b,Ce="map"===y,nt="viewport"!==b&&"point"!==d.layout.get("symbol-placement"),yt=Ee&&!Ce&&!nt,$e=!d.layout.get("symbol-sort-key").isConstant();let gt=!1;const kt=E.depthModeForSublayer(0,kn.ReadOnly),Lt=d.layout.get("text-variable-anchor"),Zt=[];for(const ri of _){const ii=i.getTile(ri),Ei=ii.getBucket(d);if(!Ei)continue;const Ui=w?Ei.text:Ei.icon;if(!Ui||!Ui.segments.get().length||!Ui.hasVisibleVertices)continue;const vn=Ui.programConfigurations.get(d.id),bi=w||Ei.sdfIcons,en=w?Ei.textSizeData:Ei.iconSizeData,ki=Ce||0!==oe.pitch,rr=E.useProgram(Di(bi,w,Ei),vn),Kn=v.evaluateSizeForZoom(en,oe.zoom),Tn=E.style.map.terrain&&E.style.map.terrain.getTerrainData(ri);let dn,kr,Lo,or,Qo=[0,0],Gs=null;if(w)kr=ii.glyphAtlasTexture,Lo=ee.LINEAR,dn=ii.glyphAtlasTexture.size,Ei.iconsInText&&(Qo=ii.imageAtlasTexture.size,Gs=ii.imageAtlasTexture,or=ki||E.options.rotating||E.options.zooming||"composite"===en.kind||"camera"===en.kind?ee.LINEAR:ee.NEAREST);else{const Ao=1!==d.layout.get("icon-size").constantOr(0)||Ei.iconsNeedLinear;kr=ii.imageAtlasTexture,Lo=bi||E.options.rotating||E.options.zooming||Ao||ki?ee.LINEAR:ee.NEAREST,dn=ii.imageAtlasTexture.size}const ia=se(ii,1,E.transform.zoom),fa=xt(ri.posMatrix,Ce,Ee,E.transform,ia),Kr=Xt(ri.posMatrix,Ce,Ee,E.transform,ia),ka=Lt&&Ei.hasTextData(),Pl="none"!==d.layout.get("icon-text-fit")&&ka&&Ei.hasIconData();if(nt){const Ao=E.style.map.terrain?(Jl,cl)=>E.style.map.terrain.getElevation(ri,Jl,cl):null,Zs="map"===d.layout.get("text-rotation-alignment");Qi(Ei,ri.posMatrix,E,w,fa,Kr,Ce,D,Zs,Ao)}const Go=E.translatePosMatrix(ri.posMatrix,ii,S,f),ho=nt||w&&Lt||Pl?G:fa,nr=E.translatePosMatrix(Kr,ii,S,f,!0),Co=bi&&0!==d.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1);let Zo;Zo=bi?Ei.iconsInText?Lr(en.kind,Kn,yt,Ce,E,Go,ho,nr,dn,Qo):_o(en.kind,Kn,yt,Ce,E,Go,ho,nr,w,dn,!0):An(en.kind,Kn,yt,Ce,E,Go,ho,nr,w,dn);const sr={program:rr,buffers:Ui,uniformValues:Zo,atlasTexture:kr,atlasTextureIcon:Gs,atlasInterpolation:Lo,atlasInterpolationIcon:or,isSDF:bi,hasHalo:Co};if($e&&Ei.canOverlap){gt=!0;const Ao=Ui.segments.get();for(const Zs of Ao)Zt.push({segments:new v.SegmentVector([Zs]),sortKey:Zs.sortKey,state:sr,terrainData:Tn})}else Zt.push({segments:Ui.segments,sortKey:0,state:sr,terrainData:Tn})}gt&&Zt.sort((ri,ii)=>ri.sortKey-ii.sortKey);for(const ri of Zt){const ii=ri.state;if(B.activeTexture.set(ee.TEXTURE0),ii.atlasTexture.bind(ii.atlasInterpolation,ee.CLAMP_TO_EDGE),ii.atlasTextureIcon&&(B.activeTexture.set(ee.TEXTURE1),ii.atlasTextureIcon&&ii.atlasTextureIcon.bind(ii.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),ii.isSDF){const Ei=ii.uniformValues;ii.hasHalo&&(Ei.u_is_halo=1,uo(ii.buffers,ri.segments,d,E,ii.program,kt,k,R,Ei,ri.terrainData)),Ei.u_is_halo=0}uo(ii.buffers,ri.segments,d,E,ii.program,kt,k,R,ii.uniformValues,ri.terrainData)}}function uo(E,i,d,_,w,S,f,b,y,D){const k=_.context;w.draw(k,k.gl.TRIANGLES,S,f,b,lr.disabled,y,D,d.id,E.layoutVertexBuffer,E.indexBuffer,i,d.paint,_.transform.zoom,E.programConfigurations.get(d.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function Ls(E,i,d,_,w){if(!d||!_||!_.imageAtlas)return;const S=_.imageAtlas.patternPositions;let f=S[d.to.toString()],b=S[d.from.toString()];if(!f||!b){const y=w.getPaintProperty(i);f=S[y],b=S[y]}f&&b&&E.setConstantPatternPositions(f,b)}function Da(E,i,d,_,w,S,f){const b=E.context.gl,y="fill-pattern",D=d.paint.get(y),k=D&&D.constantOr(1),R=d.getCrossfadeParameters();let B,ee,oe,Ee,Ce;f?(ee=k&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=b.LINES):(ee=k?"fillPattern":"fill",B=b.TRIANGLES);const nt=D.constantOr(null);for(const yt of _){const $e=i.getTile(yt);if(k&&!$e.patternsLoaded())continue;const gt=$e.getBucket(d);if(!gt)continue;const kt=gt.programConfigurations.get(d.id),Lt=E.useProgram(ee,kt),Zt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(yt);k&&(E.context.activeTexture.set(b.TEXTURE0),$e.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),kt.updatePaintBuffers(R)),Ls(kt,y,nt,$e,d);const ri=Zt?yt:null,ii=E.translatePosMatrix(ri?ri.posMatrix:yt.posMatrix,$e,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(f){Ee=gt.indexBuffer2,Ce=gt.segments2;const Ei=[b.drawingBufferWidth,b.drawingBufferHeight];oe="fillOutlinePattern"===ee&&k?Ea(ii,E,R,$e,Ei):Ca(ii,Ei)}else Ee=gt.indexBuffer,Ce=gt.segments,oe=k?vl(ii,E,R,$e):wa(ii);Lt.draw(E.context,B,w,E.stencilModeForClipping(yt),S,lr.disabled,oe,Zt,d.id,gt.layoutVertexBuffer,Ee,Ce,d.paint,E.transform.zoom,kt)}}function ja(E,i,d,_,w,S,f){const b=E.context,y=b.gl,D="fill-extrusion-pattern",k=d.paint.get(D),R=k.constantOr(1),B=d.getCrossfadeParameters(),ee=d.paint.get("fill-extrusion-opacity"),oe=k.constantOr(null);for(const Ee of _){const Ce=i.getTile(Ee),nt=Ce.getBucket(d);if(!nt)continue;const yt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ee),$e=nt.programConfigurations.get(d.id),gt=E.useProgram(R?"fillExtrusionPattern":"fillExtrusion",$e);R&&(E.context.activeTexture.set(y.TEXTURE0),Ce.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),$e.updatePaintBuffers(B)),Ls($e,D,oe,Ce,d);const kt=E.translatePosMatrix(Ee.posMatrix,Ce,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Lt=d.paint.get("fill-extrusion-vertical-gradient"),Zt=R?Ic(kt,E,Lt,ee,Ee,B,Ce):La(kt,E,Lt,ee);gt.draw(b,b.gl.TRIANGLES,w,S,f,lr.backCCW,Zt,yt,d.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,d.paint,E.transform.zoom,$e,E.style.map.terrain&&nt.centroidVertexBuffer)}}function Gl(E,i,d,_,w,S,f){const b=E.context,y=b.gl,D=d.fbo;if(!D)return;const k=E.useProgram("hillshade"),R=E.style.map.terrain&&E.style.map.terrain.getTerrainData(i);b.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,D.colorAttachment.get()),k.draw(b,y.TRIANGLES,w,S,f,lr.disabled,((B,ee,oe,Ee)=>{const Ce=oe.paint.get("hillshade-shadow-color"),nt=oe.paint.get("hillshade-highlight-color"),yt=oe.paint.get("hillshade-accent-color");let $e=oe.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===oe.paint.get("hillshade-illumination-anchor")&&($e-=B.transform.angle);const gt=!B.options.moving;return{u_matrix:Ee?Ee.posMatrix:B.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),gt),u_image:0,u_latrange:vr(0,ee.tileID),u_light:[oe.paint.get("hillshade-exaggeration"),$e],u_shadow:Ce,u_highlight:nt,u_accent:yt}})(E,d,_,R?i:null),R,_.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function Ur(E,i,d,_,w,S){const f=E.context,b=f.gl,y=i.dem;if(y&&y.data){const D=y.dim,k=y.stride,R=y.getPixels();if(f.activeTexture.set(b.TEXTURE1),f.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||E.getTileTexture(k),i.demTexture){const ee=i.demTexture;ee.update(R,{premultiply:!1}),ee.bind(b.NEAREST,b.CLAMP_TO_EDGE)}else i.demTexture=new Oe(f,R,b.RGBA,{premultiply:!1}),i.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE);f.activeTexture.set(b.TEXTURE0);let B=i.fbo;if(!B){const ee=new Oe(f,{width:D,height:D,data:null},b.RGBA);ee.bind(b.LINEAR,b.CLAMP_TO_EDGE),B=i.fbo=f.createFramebuffer(D,D,!0,!1),B.colorAttachment.set(ee.texture)}f.bindFramebuffer.set(B.framebuffer),f.viewport.set([0,0,D,D]),E.useProgram("hillshadePrepare").draw(f,b.TRIANGLES,_,w,S,lr.disabled,((ee,oe)=>{const Ee=oe.stride,Ce=v.create();return v.ortho(Ce,0,v.EXTENT,-v.EXTENT,0,0,1),v.translate(Ce,Ce,[0,-v.EXTENT,0]),{u_matrix:Ce,u_image:1,u_dimension:[Ee,Ee],u_zoom:ee.overscaledZ,u_unpack:oe.getUnpackVector()}})(i.tileID,y),null,d.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function ol(E,i,d,_,w,S){const f=_.paint.get("raster-fade-duration");if(!S&&f>0){const b=v.browser.now(),y=(b-E.timeAdded)/f,D=i?(b-i.timeAdded)/f:-1,k=d.getSource(),R=w.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),B=!i||Math.abs(i.tileID.overscaledZ-R)>Math.abs(E.tileID.overscaledZ-R),ee=B&&E.refreshedUponExpiration?1:v.clamp(B?y:1-D,0,1);return E.refreshedUponExpiration&&y>=1&&(E.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const Ns=new v.Color(1,0,0,1),Kc=new v.Color(0,1,0,1),Ha=new v.Color(0,0,1,1),Fo=new v.Color(1,0,1,1),xr=new v.Color(0,1,1,1);function Pn(E,i,d,_){xl(E,0,i+d/2,E.transform.width,d,_)}function wr(E,i,d,_){xl(E,i-d/2,0,d,E.transform.height,_)}function xl(E,i,d,_,w,S){const f=E.context,b=f.gl;b.enable(b.SCISSOR_TEST),b.scissor(i*E.pixelRatio,d*E.pixelRatio,_*E.pixelRatio,w*E.pixelRatio),f.clear({color:S}),b.disable(b.SCISSOR_TEST)}function zs(E,i,d){const _=E.context,w=_.gl,S=d.posMatrix,f=E.useProgram("debug"),b=kn.disabled,y=pr.disabled,D=E.colorModeForRenderPass(),k="$debug",R=E.style.map.terrain&&E.style.map.terrain.getTerrainData(d);_.activeTexture.set(w.TEXTURE0);const B=i.getTileByID(d.key).latestRawTileData,ee=Math.floor((B&&B.byteLength||0)/1024),oe=i.getTile(d).tileSize,Ee=512/Math.min(oe,512)*(d.overscaledZ/E.transform.zoom)*.5;let Ce=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Ce+=` => ${d.overscaledZ}`),function(nt,yt){nt.initDebugOverlayCanvas();const $e=nt.debugOverlayCanvas,gt=nt.context.gl,kt=nt.debugOverlayCanvas.getContext("2d");kt.clearRect(0,0,$e.width,$e.height),kt.shadowColor="white",kt.shadowBlur=2,kt.lineWidth=1.5,kt.strokeStyle="white",kt.textBaseline="top",kt.font="bold 36px Open Sans, sans-serif",kt.fillText(yt,5,5),kt.strokeText(yt,5,5),nt.debugOverlayTexture.update($e),nt.debugOverlayTexture.bind(gt.LINEAR,gt.CLAMP_TO_EDGE)}(E,`${Ce} ${ee}kB`),f.draw(_,w.TRIANGLES,b,y,Bi.alphaBlended,lr.disabled,Pr(S,v.Color.transparent,Ee),null,k,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),f.draw(_,w.LINE_STRIP,b,y,D,lr.disabled,Pr(S,v.Color.red),R,k,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function Sa(E,i,d){const _=E.context,w=_.gl,S=E.colorModeForRenderPass(),f=new kn(w.LEQUAL,kn.ReadWrite,E.depthRangeFor3D),b=E.useProgram("terrain"),y=i.getTerrainMesh();_.bindFramebuffer.set(null),_.viewport.set([0,0,E.width,E.height]);for(const D of d){const k=E.renderToTexture.getTexture(D),R=i.getTerrainData(D.tileID);_.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,k.texture);const B={u_matrix:E.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(E.transform.zoom)};b.draw(_,w.TRIANGLES,f,pr.disabled,S,lr.backCCW,B,R,"terrain",y.vertexBuffer,y.indexBuffer,y.segments)}}class Cr{constructor(i,d){this.context=new $l(i),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:v.create(),renderTime:0},this.setup(),this.numSublayers=Zi.maxUnderzooming+Zi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new on}resize(i,d,_){if(this.width=Math.floor(i*_),this.height=Math.floor(d*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const i=this.context,d=new v.PosArray;d.emplaceBack(0,0),d.emplaceBack(v.EXTENT,0),d.emplaceBack(0,v.EXTENT),d.emplaceBack(v.EXTENT,v.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(d,Do.members),this.tileExtentSegments=v.SegmentVector.simpleSegment(0,0,4,2);const _=new v.PosArray;_.emplaceBack(0,0),_.emplaceBack(v.EXTENT,0),_.emplaceBack(0,v.EXTENT),_.emplaceBack(v.EXTENT,v.EXTENT),this.debugBuffer=i.createVertexBuffer(_,Do.members),this.debugSegments=v.SegmentVector.simpleSegment(0,0,4,5);const w=new v.RasterBoundsArray;w.emplaceBack(0,0,0,0),w.emplaceBack(v.EXTENT,0,v.EXTENT,0),w.emplaceBack(0,v.EXTENT,0,v.EXTENT),w.emplaceBack(v.EXTENT,v.EXTENT,v.EXTENT,v.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(w,ze.members),this.rasterBoundsSegments=v.SegmentVector.simpleSegment(0,0,4,2);const S=new v.PosArray;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(S,Do.members),this.viewportSegments=v.SegmentVector.simpleSegment(0,0,4,2);const f=new v.LineStripIndexArray;f.emplaceBack(0),f.emplaceBack(1),f.emplaceBack(3),f.emplaceBack(2),f.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(f);const b=new v.TriangleIndexArray;b.emplaceBack(0,1,2),b.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(b);const y=this.context.gl;this.stencilClearMode=new pr({func:y.ALWAYS,mask:0},0,255,y.ZERO,y.ZERO,y.ZERO)}clearStencil(){const i=this.context,d=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=v.create();v.ortho(_,0,this.width,this.height,0,0,1),v.scale(_,_,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,d.TRIANGLES,kn.disabled,this.stencilClearMode,Bi.disabled,lr.disabled,Wr(_),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,d){if(this.currentStencilSource===i.source||!i.isTileClipped()||!d||!d.length)return;this.currentStencilSource=i.source;const _=this.context,w=_.gl;this.nextStencilID+d.length>256&&this.clearStencil(),_.setColorMode(Bi.disabled),_.setDepthMode(kn.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const f of d){const b=this._tileClippingMaskIDs[f.key]=this.nextStencilID++,y=this.style.map.terrain&&this.style.map.terrain.getTerrainData(f);S.draw(_,w.TRIANGLES,kn.disabled,new pr({func:w.ALWAYS,mask:0},b,255,w.KEEP,w.KEEP,w.REPLACE),Bi.disabled,lr.disabled,Wr(f.posMatrix),y,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,d=this.context.gl;return new pr({func:d.NOTEQUAL,mask:255},i,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(i){const d=this.context.gl;return new pr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(i){const d=this.context.gl,_=i.sort((f,b)=>b.overscaledZ-f.overscaledZ),w=_[_.length-1].overscaledZ,S=_[0].overscaledZ-w+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const f={};for(let b=0;b<S;b++)f[b+w]=new pr({func:d.GEQUAL,mask:255},b+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=S,[f,_]}return[{[w]:pr.disabled},_]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Bi([i.CONSTANT_COLOR,i.ONE],new v.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Bi.unblended:Bi.alphaBlended}depthModeForSublayer(i,d,_){if(!this.opaquePassEnabledForLayer())return kn.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new kn(_||this.context.gl.LEQUAL,d,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,d){this.style=i,this.options=d,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(v.browser.now()),this.imageManager.beginFrame();const _=this.style._order,w=this.style.sourceCaches,S={},f={},b={};for(const y in w){const D=w[y];D.used&&D.prepare(this.context),S[y]=D.getVisibleCoordinates(),f[y]=S[y].slice().reverse(),b[y]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let y=0;y<_.length;y++)if(this.style._layers[_[y]].is3D()){this.opaquePassCutoff=y;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!v.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||y.length)&&(v.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,k){const R=D.context,B=R.gl,ee=Bi.unblended,oe=new kn(B.LEQUAL,kn.ReadWrite,[0,1]),Ee=k.getTerrainMesh(),Ce=k.sourceCache.getRenderableTiles(),nt=D.useProgram("terrainDepth");R.bindFramebuffer.set(k.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),R.clear({color:v.Color.transparent,depth:1});for(const yt of Ce){const $e=k.getTerrainData(yt.tileID),gt={u_matrix:D.transform.calculatePosMatrix(yt.tileID.toUnwrapped()),u_ele_delta:k.getMeshFrameDelta(D.transform.zoom)};nt.draw(R,B.TRIANGLES,oe,pr.disabled,ee,lr.backCCW,gt,$e,"terrain",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,k){const R=D.context,B=R.gl,ee=Bi.unblended,oe=new kn(B.LEQUAL,kn.ReadWrite,[0,1]),Ee=k.getTerrainMesh(),Ce=k.getCoordsTexture(),nt=k.sourceCache.getRenderableTiles(),yt=D.useProgram("terrainCoords");R.bindFramebuffer.set(k.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),R.clear({color:v.Color.transparent,depth:1}),k.coordsIndex=[];for(const $e of nt){const gt=k.getTerrainData($e.tileID);R.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,Ce.texture);const kt={u_matrix:D.transform.calculatePosMatrix($e.tileID.toUnwrapped()),u_terrain_coords_id:(255-k.coordsIndex.length)/255,u_texture:0,u_ele_delta:k.getMeshFrameDelta(D.transform.zoom)};yt.draw(R,B.TRIANGLES,oe,pr.disabled,ee,lr.backCCW,kt,gt,"terrain",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments),k.coordsIndex.push($e.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const y of _){const D=this.style._layers[y];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const k=f[D.source];("custom"===D.type||k.length)&&this.renderLayer(this,w[D.source],D,k)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?v.Color.black:v.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const y=this.style._layers[_[this.currentLayer]],D=w[y.source],k=S[y.source];this._renderTileClippingMasks(y,k),this.renderLayer(this,D,y,k)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const y=this.style._layers[_[this.currentLayer]],D=w[y.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(y))continue;const k=("symbol"===y.type?b:f)[y.source];this._renderTileClippingMasks(y,S[y.source]),this.renderLayer(this,D,y,k)}if(this.options.showTileBoundaries){const y=function(D,k){let R=null;const B=Object.values(D._layers).flatMap(Ce=>Ce.source&&!Ce.isHidden(k)?[D.sourceCaches[Ce.source]]:[]),ee=B.filter(Ce=>"vector"===Ce.getSource().type),oe=B.filter(Ce=>"vector"!==Ce.getSource().type),Ee=Ce=>{(!R||R.getSource().maxzoom<Ce.getSource().maxzoom)&&(R=Ce)};return ee.forEach(Ce=>Ee(Ce)),R||oe.forEach(Ce=>Ee(Ce)),R}(this.style,this.transform.zoom);y&&function(D,k,R){for(let B=0;B<R.length;B++)zs(D,k,R[B])}(this,y,y.getVisibleCoordinates())}this.options.showPadding&&function(y){const D=y.transform.padding;Pn(y,y.transform.height-(D.top||0),3,Ns),Pn(y,D.bottom||0,3,Kc),wr(y,D.left||0,3,Ha),wr(y,y.transform.width-(D.right||0),3,Fo);const k=y.transform.centerPoint;var R,B,ee,oe;xl(R=y,(B=k.x)-1,(ee=y.transform.height-k.y)-10,2,20,oe=xr),xl(R,B-10,ee-1,20,2,oe)}(this),this.context.setDefault()}renderLayer(i,d,_,w){if(!_.isHidden(this.transform.zoom)&&("background"===_.type||"custom"===_.type||(w||[]).length))switch(this.id=_.id,_.type){case"symbol":!function(S,f,b,y,D){if("translucent"!==S.renderPass)return;const k=pr.disabled,R=S.colorModeForRenderPass();b.layout.get("text-variable-anchor")&&function(B,ee,oe,Ee,Ce,nt,yt){const $e=ee.transform,gt="map"===Ce,kt="map"===nt;for(const Lt of B){const Zt=Ee.getTile(Lt),ri=Zt.getBucket(oe);if(!ri||!ri.text||!ri.text.segments.get().length)continue;const ii=v.evaluateSizeForZoom(ri.textSizeData,$e.zoom),Ei=se(Zt,1,ee.transform.zoom),Ui=xt(Lt.posMatrix,kt,gt,ee.transform,Ei),vn="none"!==oe.layout.get("icon-text-fit")&&ri.hasIconData();if(ii){const bi=Math.pow(2,$e.zoom-Zt.tileID.overscaledZ);Ht(ri,gt,kt,yt,$e,Ui,Lt.posMatrix,bi,ii,vn,ee.style.map.terrain?(en,ki)=>ee.style.map.terrain.getElevation(Lt,en,ki):null)}}}(y,S,b,f,b.layout.get("text-rotation-alignment"),b.layout.get("text-pitch-alignment"),D),0!==b.paint.get("icon-opacity").constantOr(1)&&Yr(S,f,b,y,!1,b.paint.get("icon-translate"),b.paint.get("icon-translate-anchor"),b.layout.get("icon-rotation-alignment"),b.layout.get("icon-pitch-alignment"),b.layout.get("icon-keep-upright"),k,R),0!==b.paint.get("text-opacity").constantOr(1)&&Yr(S,f,b,y,!0,b.paint.get("text-translate"),b.paint.get("text-translate-anchor"),b.layout.get("text-rotation-alignment"),b.layout.get("text-pitch-alignment"),b.layout.get("text-keep-upright"),k,R),f.map.showCollisionBoxes&&(W(S,f,b,y,b.paint.get("text-translate"),b.paint.get("text-translate-anchor"),!0),W(S,f,b,y,b.paint.get("icon-translate"),b.paint.get("icon-translate-anchor"),!1))}(i,d,_,w,this.style.placement.variableOffsets);break;case"circle":!function(S,f,b,y){if("translucent"!==S.renderPass)return;const D=b.paint.get("circle-opacity"),k=b.paint.get("circle-stroke-width"),R=b.paint.get("circle-stroke-opacity"),B=!b.layout.get("circle-sort-key").isConstant();if(0===D.constantOr(1)&&(0===k.constantOr(1)||0===R.constantOr(1)))return;const ee=S.context,oe=ee.gl,Ee=S.depthModeForSublayer(0,kn.ReadOnly),Ce=pr.disabled,nt=S.colorModeForRenderPass(),yt=[];for(let $e=0;$e<y.length;$e++){const gt=y[$e],kt=f.getTile(gt),Lt=kt.getBucket(b);if(!Lt)continue;const Zt=Lt.programConfigurations.get(b.id),ri=S.useProgram("circle",Zt),ii=Lt.layoutVertexBuffer,Ei=Lt.indexBuffer,Ui=S.style.map.terrain&&S.style.map.terrain.getTerrainData(gt),vn={programConfiguration:Zt,program:ri,layoutVertexBuffer:ii,indexBuffer:Ei,uniformValues:Na(S,gt,kt,b),terrainData:Ui};if(B){const bi=Lt.segments.get();for(const en of bi)yt.push({segments:new v.SegmentVector([en]),sortKey:en.sortKey,state:vn})}else yt.push({segments:Lt.segments,sortKey:0,state:vn})}B&&yt.sort(($e,gt)=>$e.sortKey-gt.sortKey);for(const $e of yt){const{programConfiguration:gt,program:kt,layoutVertexBuffer:Lt,indexBuffer:Zt,uniformValues:ri,terrainData:ii}=$e.state;kt.draw(ee,oe.TRIANGLES,Ee,Ce,nt,lr.disabled,ri,ii,b.id,Lt,Zt,$e.segments,b.paint,S.transform.zoom,gt)}}(i,d,_,w);break;case"heatmap":!function(S,f,b,y){if(0!==b.paint.get("heatmap-opacity"))if("offscreen"===S.renderPass){const D=S.context,k=D.gl,R=pr.disabled,B=new Bi([k.ONE,k.ONE],v.Color.transparent,[!0,!0,!0,!0]);(function(ee,oe,Ee){const Ce=ee.gl;ee.activeTexture.set(Ce.TEXTURE1),ee.viewport.set([0,0,oe.width/4,oe.height/4]);let nt=Ee.heatmapFbo;if(nt)Ce.bindTexture(Ce.TEXTURE_2D,nt.colorAttachment.get()),ee.bindFramebuffer.set(nt.framebuffer);else{const yt=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,yt),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),nt=Ee.heatmapFbo=ee.createFramebuffer(oe.width/4,oe.height/4,!1,!1),function($e,gt,kt,Lt){var Zt,ri;const ii=$e.gl,Ei=null!==(Zt=$e.HALF_FLOAT)&&void 0!==Zt?Zt:ii.UNSIGNED_BYTE,Ui=null!==(ri=$e.RGBA16F)&&void 0!==ri?ri:ii.RGBA;ii.texImage2D(ii.TEXTURE_2D,0,Ui,gt.width/4,gt.height/4,0,ii.RGBA,Ei,null),Lt.colorAttachment.set(kt)}(ee,oe,yt,nt)}})(D,S,b),D.clear({color:v.Color.transparent});for(let ee=0;ee<y.length;ee++){const oe=y[ee];if(f.hasRenderableParent(oe))continue;const Ee=f.getTile(oe),Ce=Ee.getBucket(b);if(!Ce)continue;const nt=Ce.programConfigurations.get(b.id),yt=S.useProgram("heatmap",nt),{zoom:$e}=S.transform;yt.draw(D,k.TRIANGLES,kn.disabled,R,B,lr.disabled,As(oe.posMatrix,Ee,$e,b.paint.get("heatmap-intensity")),null,b.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,b.paint,S.transform.zoom,nt)}D.viewport.set([0,0,S.width,S.height])}else"translucent"===S.renderPass&&(S.context.setColorMode(S.colorModeForRenderPass()),function(D,k){const R=D.context,B=R.gl,ee=k.heatmapFbo;if(!ee)return;R.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,ee.colorAttachment.get()),R.activeTexture.set(B.TEXTURE1);let oe=k.colorRampTexture;oe||(oe=k.colorRampTexture=new Oe(R,k.colorRamp,B.RGBA)),oe.bind(B.LINEAR,B.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(R,B.TRIANGLES,kn.disabled,pr.disabled,D.colorModeForRenderPass(),lr.disabled,((Ee,Ce,nt,yt)=>{const $e=v.create();v.ortho($e,0,Ee.width,Ee.height,0,0,1);const gt=Ee.context.gl;return{u_matrix:$e,u_world:[gt.drawingBufferWidth,gt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}})(D,k),null,k.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,k.paint,D.transform.zoom)}(S,b))}(i,d,_,w);break;case"line":!function(S,f,b,y){if("translucent"!==S.renderPass)return;const D=b.paint.get("line-opacity"),k=b.paint.get("line-width");if(0===D.constantOr(1)||0===k.constantOr(1))return;const R=S.depthModeForSublayer(0,kn.ReadOnly),B=S.colorModeForRenderPass(),ee=b.paint.get("line-dasharray"),oe=b.paint.get("line-pattern"),Ee=oe.constantOr(1),Ce=b.paint.get("line-gradient"),nt=b.getCrossfadeParameters(),yt=Ee?"linePattern":ee?"lineSDF":Ce?"lineGradient":"line",$e=S.context,gt=$e.gl;let kt=!0;for(const Lt of y){const Zt=f.getTile(Lt);if(Ee&&!Zt.patternsLoaded())continue;const ri=Zt.getBucket(b);if(!ri)continue;const ii=ri.programConfigurations.get(b.id),Ei=S.context.program.get(),Ui=S.useProgram(yt,ii),vn=kt||Ui.program!==Ei,bi=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Lt),en=oe.constantOr(null);if(en&&Zt.imageAtlas){const Kn=Zt.imageAtlas,Tn=Kn.patternPositions[en.to.toString()],dn=Kn.patternPositions[en.from.toString()];Tn&&dn&&ii.setConstantPatternPositions(Tn,dn)}const ki=bi?Lt:null,rr=Ee?qo(S,Zt,b,nt,ki):ee?Uo(S,Zt,b,ee,nt,ki):Ce?go(S,Zt,b,ri.lineClipsArray.length,ki):ks(S,Zt,b,ki);if(Ee)$e.activeTexture.set(gt.TEXTURE0),Zt.imageAtlasTexture.bind(gt.LINEAR,gt.CLAMP_TO_EDGE),ii.updatePaintBuffers(nt);else if(ee&&(vn||S.lineAtlas.dirty))$e.activeTexture.set(gt.TEXTURE0),S.lineAtlas.bind($e);else if(Ce){const Kn=ri.gradients[b.id];let Tn=Kn.texture;if(b.gradientVersion!==Kn.version){let dn=256;if(b.stepInterpolant){const kr=f.getSource().maxzoom,Lo=Lt.canonical.z===kr?Math.ceil(1<<S.transform.maxZoom-Lt.canonical.z):1;dn=v.clamp(v.nextPowerOfTwo(ri.maxLineLength/v.EXTENT*1024*Lo),256,$e.maxTextureSize)}Kn.gradient=v.renderColorRamp({expression:b.gradientExpression(),evaluationKey:"lineProgress",resolution:dn,image:Kn.gradient||void 0,clips:ri.lineClipsArray}),Kn.texture?Kn.texture.update(Kn.gradient):Kn.texture=new Oe($e,Kn.gradient,gt.RGBA),Kn.version=b.gradientVersion,Tn=Kn.texture}$e.activeTexture.set(gt.TEXTURE0),Tn.bind(b.stepInterpolant?gt.NEAREST:gt.LINEAR,gt.CLAMP_TO_EDGE)}Ui.draw($e,gt.TRIANGLES,R,S.stencilModeForClipping(Lt),B,lr.disabled,rr,bi,b.id,ri.layoutVertexBuffer,ri.indexBuffer,ri.segments,b.paint,S.transform.zoom,ii,ri.layoutVertexBuffer2),kt=!1}}(i,d,_,w);break;case"fill":!function(S,f,b,y){const D=b.paint.get("fill-color"),k=b.paint.get("fill-opacity");if(0===k.constantOr(1))return;const R=S.colorModeForRenderPass(),B=b.paint.get("fill-pattern"),ee=S.opaquePassEnabledForLayer()&&!B.constantOr(1)&&1===D.constantOr(v.Color.transparent).a&&1===k.constantOr(0)?"opaque":"translucent";if(S.renderPass===ee){const oe=S.depthModeForSublayer(1,"opaque"===S.renderPass?kn.ReadWrite:kn.ReadOnly);Da(S,f,b,y,oe,R,!1)}if("translucent"===S.renderPass&&b.paint.get("fill-antialias")){const oe=S.depthModeForSublayer(b.getPaintProperty("fill-outline-color")?2:0,kn.ReadOnly);Da(S,f,b,y,oe,R,!0)}}(i,d,_,w);break;case"fill-extrusion":!function(S,f,b,y){const D=b.paint.get("fill-extrusion-opacity");if(0!==D&&"translucent"===S.renderPass){const k=new kn(S.context.gl.LEQUAL,kn.ReadWrite,S.depthRangeFor3D);if(1!==D||b.paint.get("fill-extrusion-pattern").constantOr(1))ja(S,f,b,y,k,pr.disabled,Bi.disabled),ja(S,f,b,y,k,S.stencilModeFor3D(),S.colorModeForRenderPass());else{const R=S.colorModeForRenderPass();ja(S,f,b,y,k,pr.disabled,R)}}}(i,d,_,w);break;case"hillshade":!function(S,f,b,y){if("offscreen"!==S.renderPass&&"translucent"!==S.renderPass)return;const D=S.context,k=S.depthModeForSublayer(0,kn.ReadOnly),R=S.colorModeForRenderPass(),[B,ee]="translucent"===S.renderPass?S.stencilConfigForOverlap(y):[{},y];for(const oe of ee){const Ee=f.getTile(oe);void 0!==Ee.needsHillshadePrepare&&Ee.needsHillshadePrepare&&"offscreen"===S.renderPass?Ur(S,Ee,b,k,pr.disabled,R):"translucent"===S.renderPass&&Gl(S,oe,Ee,b,k,B[oe.overscaledZ],R)}D.viewport.set([0,0,S.width,S.height])}(i,d,_,w);break;case"raster":!function(S,f,b,y){if("translucent"!==S.renderPass||0===b.paint.get("raster-opacity")||!y.length)return;const D=S.context,k=D.gl,R=f.getSource(),B=S.useProgram("raster"),ee=S.colorModeForRenderPass(),[oe,Ee]=R instanceof rt?[{},y]:S.stencilConfigForOverlap(y),Ce=Ee[Ee.length-1].overscaledZ,nt=!S.options.moving;for(const yt of Ee){const $e=S.depthModeForSublayer(yt.overscaledZ-Ce,1===b.paint.get("raster-opacity")?kn.ReadWrite:kn.ReadOnly,k.LESS),gt=f.getTile(yt);gt.registerFadeDuration(b.paint.get("raster-fade-duration"));const kt=f.findLoadedParent(yt,0),Lt=ol(gt,kt,f,b,S.transform,S.style.map.terrain);let Zt,ri;const ii="nearest"===b.paint.get("raster-resampling")?k.NEAREST:k.LINEAR;D.activeTexture.set(k.TEXTURE0),gt.texture.bind(ii,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(k.TEXTURE1),kt?(kt.texture.bind(ii,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),Zt=Math.pow(2,kt.tileID.overscaledZ-gt.tileID.overscaledZ),ri=[gt.tileID.canonical.x*Zt%1,gt.tileID.canonical.y*Zt%1]):gt.texture.bind(ii,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST);const Ei=S.style.map.terrain&&S.style.map.terrain.getTerrainData(yt),Ui=Ei?yt:null,vn=Ui?Ui.posMatrix:S.transform.calculatePosMatrix(yt.toUnwrapped(),nt),bi=Ai(vn,ri||[0,0],Zt||1,Lt,b);R instanceof rt?B.draw(D,k.TRIANGLES,$e,pr.disabled,ee,lr.disabled,bi,Ei,b.id,R.boundsBuffer,S.quadTriangleIndexBuffer,R.boundsSegments):B.draw(D,k.TRIANGLES,$e,oe[yt.overscaledZ],ee,lr.disabled,bi,Ei,b.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}}(i,d,_,w);break;case"background":!function(S,f,b,y){const D=b.paint.get("background-color"),k=b.paint.get("background-opacity");if(0===k)return;const R=S.context,B=R.gl,ee=S.transform,oe=ee.tileSize,Ee=b.paint.get("background-pattern");if(S.isPatternMissing(Ee))return;const Ce=!Ee&&1===D.a&&1===k&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==Ce)return;const nt=pr.disabled,yt=S.depthModeForSublayer(0,"opaque"===Ce?kn.ReadWrite:kn.ReadOnly),$e=S.colorModeForRenderPass(),gt=S.useProgram(Ee?"backgroundPattern":"background"),kt=y||ee.coveringTiles({tileSize:oe,terrain:S.style.map.terrain});Ee&&(R.activeTexture.set(B.TEXTURE0),S.imageManager.bind(S.context));const Lt=b.getCrossfadeParameters();for(const Zt of kt){const ri=y?Zt.posMatrix:S.transform.calculatePosMatrix(Zt.toUnwrapped()),ii=Ee?Ko(ri,k,S,Ee,{tileID:Zt,tileSize:oe},Lt):Yn(ri,k,D),Ei=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Zt);gt.draw(R,B.TRIANGLES,yt,nt,$e,lr.disabled,ii,Ei,b.id,S.tileExtentBuffer,S.quadTriangleIndexBuffer,S.tileExtentSegments)}}(i,0,_,w);break;case"custom":!function(S,f,b){const y=S.context,D=b.implementation;if("offscreen"===S.renderPass){const k=D.prerender;k&&(S.setCustomLayerDefaults(),y.setColorMode(S.colorModeForRenderPass()),k.call(D,y.gl,S.transform.customLayerMatrix()),y.setDirty(),S.setBaseState())}else if("translucent"===S.renderPass){S.setCustomLayerDefaults(),y.setColorMode(S.colorModeForRenderPass()),y.setStencilMode(pr.disabled);const k="3d"===D.renderingMode?new kn(S.context.gl.LEQUAL,kn.ReadWrite,S.depthRangeFor3D):S.depthModeForSublayer(0,kn.ReadOnly);y.setDepthMode(k),D.render(y.gl,S.transform.customLayerMatrix()),y.setDirty(),S.setBaseState(),y.bindFramebuffer.set(null)}}(i,0,_)}}translatePosMatrix(i,d,_,w,S){if(!_[0]&&!_[1])return i;const f=S?"map"===w?this.transform.angle:0:"viewport"===w?-this.transform.angle:0;if(f){const D=Math.sin(f),k=Math.cos(f);_=[_[0]*k-_[1]*D,_[0]*D+_[1]*k]}const b=[S?_[0]:se(d,_[0],this.transform.zoom),S?_[1]:se(d,_[1],this.transform.zoom),0],y=new Float32Array(16);return v.translate(y,i,b),y}saveTileTexture(i){const d=this._tileTextures[i.size[0]];d?d.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const d=this._tileTextures[i];return d&&d.length>0?d.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const d=this.imageManager.getPattern(i.from.toString()),_=this.imageManager.getPattern(i.to.toString());return!d||!_}useProgram(i,d){this.cache=this.cache||{};const _=i+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[_]||(this.cache[_]=new os(this.context,no[i],d,mr[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[_]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:d}=this.context.gl;return this.width!==i||this.height!==d}}class Zl{constructor(i,d){this.points=i,this.planes=d}static fromInvProjectionMatrix(i,d,_){const w=Math.pow(2,_),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(b=>{const y=1/(b=v.transformMat4([],b,i))[3]/d*w;return v.mul$1(b,b,[y,y,1/b[3],y])}),f=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(b=>{const y=function(B,ee){var oe=ee[0],Ee=ee[1],Ce=ee[2],nt=oe*oe+Ee*Ee+Ce*Ce;return nt>0&&(nt=1/Math.sqrt(nt)),B[0]=ee[0]*nt,B[1]=ee[1]*nt,B[2]=ee[2]*nt,B}([],(B=[],ee=Ti([],S[b[0]],S[b[1]]),oe=Ti([],S[b[2]],S[b[1]]),Ee=ee[0],yt=oe[0],B[0]=(Ce=ee[1])*(gt=oe[2])-(nt=ee[2])*($e=oe[1]),B[1]=nt*yt-Ee*gt,B[2]=Ee*$e-Ce*yt,B)),D=-((k=y)[0]*(R=S[b[1]])[0]+k[1]*R[1]+k[2]*R[2]);var B,ee,oe,Ee,Ce,nt,yt,$e,gt,k,R;return y.concat(D)});return new Zl(S,f)}}class Bs{constructor(i,d){var _,w,S;this.min=i,this.max=d,this.center=function(_,w,S){return _[0]=.5*w[0],_[1]=.5*w[1],_[2]=.5*w[2],_}([],((_=[])[0]=(w=this.min)[0]+(S=this.max)[0],_[1]=w[1]+S[1],_[2]=w[2]+S[2],_))}quadrant(i){const d=[i%2==0,i<2],_=jt(this.min),w=jt(this.max);for(let S=0;S<d.length;S++)_[S]=d[S]?this.min[S]:this.center[S],w[S]=d[S]?this.center[S]:this.max[S];return w[2]=this.max[2],new Bs(_,w)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let _=!0;for(let w=0;w<i.planes.length;w++){const S=i.planes[w];let f=0;for(let b=0;b<d.length;b++)v.dot(S,d[b])>=0&&f++;if(0===f)return 0;f!==d.length&&(_=!1)}if(_)return 2;for(let w=0;w<3;w++){let S=Number.MAX_VALUE,f=-Number.MAX_VALUE;for(let b=0;b<i.points.length;b++){const y=i.points[b][w]-this.min[w];S=Math.min(S,y),f=Math.max(f,y)}if(f<0||S>this.max[w]-this.min[w])return 0}return 1}}class $a{constructor(i=0,d=0,_=0,w=0){if(isNaN(i)||i<0||isNaN(d)||d<0||isNaN(_)||_<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=d,this.left=_,this.right=w}interpolate(i,d,_){return null!=d.top&&null!=i.top&&(this.top=v.interpolate.number(i.top,d.top,_)),null!=d.bottom&&null!=i.bottom&&(this.bottom=v.interpolate.number(i.bottom,d.bottom,_)),null!=d.left&&null!=i.left&&(this.left=v.interpolate.number(i.left,d.left,_)),null!=d.right&&null!=i.right&&(this.right=v.interpolate.number(i.right,d.right,_)),this}getCenter(i,d){const _=v.clamp((this.left+i-this.right)/2,0,i),w=v.clamp((this.top+d-this.bottom)/2,0,d);return new v.Point(_,w)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new $a(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Sr{constructor(i,d,_,w,S){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===S||!!S,this._minZoom=i||0,this._maxZoom=d||22,this._minPitch=_??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new v.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new $a,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Sr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new v.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const d=-v.wrap(i,-180,180)*Math.PI/180;var _;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(_=new v.ARRAY_TYPE(4),v.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(_,w,S){var f=w[0],b=w[1],y=w[2],D=w[3],k=Math.sin(S),R=Math.cos(S);_[0]=f*R+y*k,_[1]=b*R+D*k,_[2]=f*-k+y*R,_[3]=b*-k+D*R}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const d=v.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const d=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,d,_){this._unmodified=!1,this._edgeInsets.interpolate(i,d,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const d=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(i){const d=[new v.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const _=this.pointCoordinate(new v.Point(0,0)),w=this.pointCoordinate(new v.Point(this.width,0)),S=this.pointCoordinate(new v.Point(this.width,this.height)),f=this.pointCoordinate(new v.Point(0,this.height)),b=Math.floor(Math.min(_.x,w.x,S.x,f.x)),y=Math.floor(Math.max(_.x,w.x,S.x,f.x)),D=1;for(let k=b-D;k<=y+D;k++)0!==k&&d.push(new v.UnwrappedTileID(k,i))}return d}coveringTiles(i){var d,_;let w=this.coveringZoomLevel(i);const S=w;if(void 0!==i.minzoom&&w<i.minzoom)return[];void 0!==i.maxzoom&&w>i.maxzoom&&(w=i.maxzoom);const f=this.pointCoordinate(this.getCameraPoint()),b=v.MercatorCoordinate.fromLngLat(this.center),y=Math.pow(2,w),D=[y*f.x,y*f.y,0],k=[y*b.x,y*b.y,0],R=Zl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w);let B=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(B=w);const ee=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,oe=$e=>({aabb:new Bs([$e*y,0,0],[($e+1)*y,y,0]),zoom:0,x:0,y:0,wrap:$e,fullyVisible:!1}),Ee=[],Ce=[],nt=w,yt=i.reparseOverscaled?S:w;if(this._renderWorldCopies)for(let $e=1;$e<=3;$e++)Ee.push(oe(-$e)),Ee.push(oe($e));for(Ee.push(oe(0));Ee.length>0;){const $e=Ee.pop(),gt=$e.x,kt=$e.y;let Lt=$e.fullyVisible;if(!Lt){const Ui=$e.aabb.intersects(R);if(0===Ui)continue;Lt=2===Ui}const Zt=i.terrain?D:k,ri=$e.aabb.distanceX(Zt),ii=$e.aabb.distanceY(Zt),Ei=Math.max(Math.abs(ri),Math.abs(ii));if($e.zoom===nt||Ei>ee+(1<<nt-$e.zoom)-2&&$e.zoom>=B){const Ui=nt-$e.zoom,vn=D[0]-.5-(gt<<Ui),bi=D[1]-.5-(kt<<Ui);Ce.push({tileID:new v.OverscaledTileID($e.zoom===nt?yt:$e.zoom,$e.wrap,$e.zoom,gt,kt),distanceSq:qt([k[0]-.5-gt,k[1]-.5-kt]),tileDistanceToCamera:Math.sqrt(vn*vn+bi*bi)})}else for(let Ui=0;Ui<4;Ui++){const vn=(gt<<1)+Ui%2,bi=(kt<<1)+(Ui>>1),en=$e.zoom+1;let ki=$e.aabb.quadrant(Ui);if(i.terrain){const rr=new v.OverscaledTileID(en,$e.wrap,en,vn,bi),Kn=i.terrain.getMinMaxElevation(rr),Tn=null!==(d=Kn.minElevation)&&void 0!==d?d:this.elevation,dn=null!==(_=Kn.maxElevation)&&void 0!==_?_:this.elevation;ki=new Bs([ki.min[0],ki.min[1],Tn],[ki.max[0],ki.max[1],dn])}Ee.push({aabb:ki,zoom:en,x:vn,y:bi,wrap:$e.wrap,fullyVisible:Lt})}}return Ce.sort(($e,gt)=>$e.distanceSq-gt.distanceSq).map($e=>$e.tileID)}resize(i,d){this.width=i,this.height=d,this.pixelsToGLUnits=[2/i,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const d=v.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new v.Point(v.mercatorXfromLng(i.lng)*this.worldSize,v.mercatorYfromLat(d)*this.worldSize)}unproject(i){return new v.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const d=this.pointLocation(this.centerPoint,i),_=i.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-_))return;const w=this.getCameraPosition(),S=v.MercatorCoordinate.fromLngLat(w.lngLat,w.altitude),f=v.MercatorCoordinate.fromLngLat(d,_),b=S.x-f.x,y=S.y-f.y,D=S.z-f.z,k=Math.sqrt(b*b+y*y+D*D),R=this.scaleZoom(this.cameraToCenterDistance/k/this.tileSize);this._elevation=_,this._center=d,this.zoom=R}setLocationAtPoint(i,d){const _=this.pointCoordinate(d),w=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(i),f=new v.MercatorCoordinate(S.x-(_.x-w.x),S.y-(_.y-w.y));this.center=this.coordinateLocation(f),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,d){return d?this.coordinatePoint(this.locationCoordinate(i),d.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,d){return this.coordinateLocation(this.pointCoordinate(i,d))}locationCoordinate(i){return v.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,d){if(d){const B=d.pointCoordinate(i);if(null!=B)return B}const _=[i.x,i.y,0,1],w=[i.x,i.y,1,1];v.transformMat4(_,_,this.pixelMatrixInverse),v.transformMat4(w,w,this.pixelMatrixInverse);const S=_[3],f=w[3],b=_[1]/S,y=w[1]/f,D=_[2]/S,k=w[2]/f,R=D===k?0:(0-D)/(k-D);return new v.MercatorCoordinate(v.interpolate.number(_[0]/S,w[0]/f,R)/this.worldSize,v.interpolate.number(b,y,R)/this.worldSize)}coordinatePoint(i,d=0,_=this.pixelMatrix){const w=[i.x*this.worldSize,i.y*this.worldSize,d,1];return v.transformMat4(w,w,_),new v.Point(w[0]/w[3],w[1]/w[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return(new ft).extend(this.pointLocation(new v.Point(0,i))).extend(this.pointLocation(new v.Point(this.width,i))).extend(this.pointLocation(new v.Point(this.width,this.height))).extend(this.pointLocation(new v.Point(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new ft([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,d=!1){const _=i.key,w=d?this._alignedPosMatrixCache:this._posMatrixCache;if(w[_])return w[_];const S=i.canonical,f=this.worldSize/this.zoomScale(S.z),b=S.x+Math.pow(2,S.z)*i.wrap,y=v.identity(new Float64Array(16));return v.translate(y,y,[b*f,S.y*f,0]),v.scale(y,y,[f/v.EXTENT,f/v.EXTENT,1]),v.multiply(y,d?this.alignedProjMatrix:this.projMatrix,y),w[_]=new Float32Array(y),w[_]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,d,_,w,S=-90,f=90,b=-180,y=180;const D=this.size,k=this._unmodified;if(this.latRange){const ee=this.latRange;S=v.mercatorYfromLat(ee[1])*this.worldSize,f=v.mercatorYfromLat(ee[0])*this.worldSize,i=f-S<D.y?D.y/(f-S):0}if(this.lngRange){const ee=this.lngRange;b=v.wrap(v.mercatorXfromLng(ee[0])*this.worldSize,0,this.worldSize),y=v.wrap(v.mercatorXfromLng(ee[1])*this.worldSize,0,this.worldSize),y<b&&(y+=this.worldSize),d=y-b<D.x?D.x/(y-b):0}const R=this.point,B=Math.max(d||0,i||0);if(B)return this.center=this.unproject(new v.Point(d?(y+b)/2:R.x,i?(f+S)/2:R.y)),this.zoom+=this.scaleZoom(B),this._unmodified=k,void(this._constraining=!1);if(this.latRange){const ee=R.y,oe=D.y/2;ee-oe<S&&(w=S+oe),ee+oe>f&&(w=f-oe)}if(this.lngRange){const ee=(b+y)/2,oe=v.wrap(R.x,ee-this.worldSize/2,ee+this.worldSize/2),Ee=D.x/2;oe-Ee<b&&(_=b+Ee),oe+Ee>y&&(_=y-Ee)}void 0===_&&void 0===w||(this.center=this.unproject(new v.Point(void 0!==_?_:R.x,void 0!==w?w:R.y)).wrap()),this._unmodified=k,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,d=this.point.x,_=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=v.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let w=v.identity(new Float64Array(16));v.scale(w,w,[this.width/2,-this.height/2,1]),v.translate(w,w,[1,-1,0]),this.labelPlaneMatrix=w,w=v.identity(new Float64Array(16)),v.scale(w,w,[1,-1,1]),v.translate(w,w,[-1,-1,0]),v.scale(w,w,[2/this.width,2/this.height,1]),this.glCoordMatrix=w;const S=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),f=Math.min(this.elevation,this._minEleveationForCurrentTile),b=S-f*this._pixelPerMeter/Math.cos(this._pitch),y=f<0?b:S,D=Math.PI/2+this._pitch,k=this._fov*(.5+i.y/this.height),R=Math.sin(k)*y/Math.sin(v.clamp(Math.PI-D-k,.01,Math.PI-.01)),B=this.getHorizon(),ee=2*Math.atan(B/this.cameraToCenterDistance)*(.5+i.y/(2*B)),oe=Math.sin(ee)*y/Math.sin(v.clamp(Math.PI-D-ee,.01,Math.PI-.01)),Ee=Math.min(R,oe),Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*Ee+y),nt=this.height/50;w=new Float64Array(16),v.perspective(w,this._fov,this.width/this.height,nt,Ce),w[8]=2*-i.x/this.width,w[9]=2*i.y/this.height,v.scale(w,w,[1,-1,1]),v.translate(w,w,[0,0,-this.cameraToCenterDistance]),v.rotateX(w,w,this._pitch),v.rotateZ(w,w,this.angle),v.translate(w,w,[-d,-_,0]),this.mercatorMatrix=v.scale([],w,[this.worldSize,this.worldSize,this.worldSize]),v.scale(w,w,[1,1,this._pixelPerMeter]),this.pixelMatrix=v.multiply(new Float64Array(16),this.labelPlaneMatrix,w),v.translate(w,w,[0,0,-this.elevation]),this.projMatrix=w,this.invProjMatrix=v.invert([],w),this.pixelMatrix3D=v.multiply(new Float64Array(16),this.labelPlaneMatrix,w);const yt=this.width%2/2,$e=this.height%2/2,gt=Math.cos(this.angle),kt=Math.sin(this.angle),Lt=d-Math.round(d)+gt*yt+kt*$e,Zt=_-Math.round(_)+gt*$e+kt*yt,ri=new Float64Array(w);if(v.translate(ri,ri,[Lt>.5?Lt-1:Lt,Zt>.5?Zt-1:Zt,0]),this.alignedProjMatrix=ri,w=v.invert(new Float64Array(16),this.pixelMatrix),!w)throw new Error("failed to invert matrix");this.pixelMatrixInverse=w,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new v.Point(0,0)),d=[i.x*this.worldSize,i.y*this.worldSize,0,1];return v.transformMat4(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new v.Point(0,i))}getCameraQueryGeometry(i){const d=this.getCameraPoint();if(1===i.length)return[i[0],d];{let _=d.x,w=d.y,S=d.x,f=d.y;for(const b of i)_=Math.min(_,b.x),w=Math.min(w,b.y),S=Math.max(S,b.x),f=Math.max(f,b.y);return[new v.Point(_,w),new v.Point(S,w),new v.Point(S,f),new v.Point(_,f),new v.Point(_,w)]}}}class ls{constructor(i){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let _;return d.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(_=w)}),(_&&_[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(_=>isNaN(_))){const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:_,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=function(d,_){let w=!1,S=null;const f=()=>{S=null,w&&(d(),S=setTimeout(f,300),w=!1)};return()=>(w=!0,S||f(),S)}(this._updateHashUnthrottled),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const d=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,w=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,w),f=Math.round(d.lng*S)/S,b=Math.round(d.lat*S)/S,y=this._map.getBearing(),D=this._map.getPitch();let k="";if(k+=i?`/${f}/${b}/${_}`:`${_}/${b}/${f}`,(y||D)&&(k+="/"+Math.round(10*y)/10),D&&(k+=`/${Math.round(D)}`),this._hashName){const R=this._hashName;let B=!1;const ee=window.location.hash.slice(1).split("&").map(oe=>{const Ee=oe.split("=")[0];return Ee===R?(B=!0,`${Ee}=${k}`):oe}).filter(oe=>oe);return B||ee.push(`${R}=${k}`),`#${ee.join("&")}`}return`#${k}`}}const jr={linearity:.3,easing:v.bezier(0,0,.3,1)},Wl=v.extend({deceleration:2500,maxSpeed:1400},jr),cs=v.extend({deceleration:20,maxSpeed:1400},jr),Or=v.extend({deceleration:1e3,maxSpeed:360},jr),wl=v.extend({deceleration:1e3,maxSpeed:90},jr);class ys{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.browser.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,d=v.browser.now();for(;i.length>0&&d-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new v.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)d.zoom+=S.zoomDelta||0,d.bearing+=S.bearingDelta||0,d.pitch+=S.pitchDelta||0,S.panDelta&&d.pan._add(S.panDelta),S.around&&(d.around=S.around),S.pinchAround&&(d.pinchAround=S.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(d.pan.mag()){const S=ha(d.pan.mag(),_,v.extend({},Wl,i||{}));w.offset=d.pan.mult(S.amount/d.pan.mag()),w.center=this._map.transform.center,Hr(w,S)}if(d.zoom){const S=ha(d.zoom,_,cs);w.zoom=this._map.transform.zoom+S.amount,Hr(w,S)}if(d.bearing){const S=ha(d.bearing,_,Or);w.bearing=this._map.transform.bearing+v.clamp(S.amount,-179,179),Hr(w,S)}if(d.pitch){const S=ha(d.pitch,_,wl);w.pitch=this._map.transform.pitch+S.amount,Hr(w,S)}if(w.zoom||w.bearing){const S=void 0===d.pinchAround?d.around:d.pinchAround;w.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),v.extend(w,{noMoveStart:!0})}}function Hr(E,i){(!E.duration||E.duration<i.duration)&&(E.duration=i.duration,E.easing=i.easing)}function ha(E,i,d){const{maxSpeed:_,linearity:w,deceleration:S}=d,f=v.clamp(E*w/(i/1e3),-_,_),b=Math.abs(f)/(S*w);return{easing:d.easing,duration:1e3*b,amount:f*(b/2)}}class $r extends v.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,_,w={}){const S=ne.mousePos(d.getCanvasContainer(),_),f=d.unproject(S);super(i,v.extend({point:S,lngLat:f,originalEvent:_},w)),this._defaultPrevented=!1,this.target=d}}class $o extends v.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,_){const w="touchend"===i?_.changedTouches:_.touches,S=ne.touchPos(d.getCanvasContainer(),w),f=S.map(y=>d.unproject(y)),b=S.reduce((y,D,k,R)=>y.add(D.div(R.length)),new v.Point(0,0));super(i,{points:S,point:b,lngLats:f,lngLat:d.unproject(b),originalEvent:_}),this._defaultPrevented=!1}}class Cl extends v.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,_){super(i,{originalEvent:_}),this._defaultPrevented=!1}}class oo{constructor(i,d){this._map=i,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Cl(i.type,this._map,i))}mousedown(i,d){return this._mousedownPos=d,this._firePreventable(new $r(i.type,this._map,i))}mouseup(i){this._map.fire(new $r(i.type,this._map,i))}click(i,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new $r(i.type,this._map,i))}dblclick(i){return this._firePreventable(new $r(i.type,this._map,i))}mouseover(i){this._map.fire(new $r(i.type,this._map,i))}mouseout(i){this._map.fire(new $r(i.type,this._map,i))}touchstart(i){return this._firePreventable(new $o(i.type,this._map,i))}touchmove(i){this._map.fire(new $o(i.type,this._map,i))}touchend(i){this._map.fire(new $o(i.type,this._map,i))}touchcancel(i){this._map.fire(new $o(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class El{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new $r(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $r("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new $r(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ga{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(v.Point.convert(i),this._map.terrain)}}class ql{constructor(i,d){this._map=i,this._tr=new Ga(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,d){this.isEnabled()&&i.shiftKey&&0===i.button&&(ne.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(i,d){if(!this._active)return;const _=d;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=_,this._box||(this._box=ne.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const S=Math.min(w.x,_.x),f=Math.max(w.x,_.x),b=Math.min(w.y,_.y),y=Math.max(w.y,_.y);ne.setTransform(this._box,`translate(${S}px,${b}px)`),this._box.style.width=f-S+"px",this._box.style.height=y-b+"px"}mouseupWindow(i,d){if(!this._active||0!==i.button)return;const _=this._startPos,w=d;if(this.reset(),ne.suppressClick(),_.x!==w.x||_.y!==w.y)return this._map.fire(new v.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:S=>S.fitScreenCoordinates(_,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(ne.remove(this._box),this._box=null),ne.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,d){return this._map.fire(new v.Event(i,{originalEvent:d}))}}function Vs(E,i){if(E.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${i.length}`);const d={};for(let _=0;_<E.length;_++)d[E[_].identifier]=i[_];return d}class zi{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,d,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=i.timeStamp),_.length===this.numTouches&&(this.centroid=function(w){const S=new v.Point(0,0);for(const f of w)S._add(f);return S.div(w.length)}(d),this.touches=Vs(_,d)))}touchmove(i,d,_){if(this.aborted||!this.centroid)return;const w=Vs(_,d);for(const S in this.touches){const f=w[S];(!f||f.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(i,d,_){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===_.length){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class Xo{constructor(i){this.singleTap=new zi(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,d,_){this.singleTap.touchstart(i,d,_)}touchmove(i,d,_){this.singleTap.touchmove(i,d,_)}touchend(i,d,_){const w=this.singleTap.touchend(i,d,_);if(w){const S=i.timeStamp-this.lastTime<500,f=!this.lastTap||this.lastTap.dist(w)<30;if(S&&f||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class Ml{constructor(i){this._tr=new Ga(i),this._zoomIn=new Xo({numTouches:1,numTaps:2}),this._zoomOut=new Xo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,d,_){this._zoomIn.touchstart(i,d,_),this._zoomOut.touchstart(i,d,_)}touchmove(i,d,_){this._zoomIn.touchmove(i,d,_),this._zoomOut.touchmove(i,d,_)}touchend(i,d,_){const w=this._zoomIn.touchend(i,d,_),S=this._zoomOut.touchend(i,d,_),f=this._tr;return w?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:b=>b.easeTo({duration:300,zoom:f.zoom+1,around:f.unproject(w)},{originalEvent:i})}):S?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:b=>b.easeTo({duration:300,zoom:f.zoom-1,around:f.unproject(S)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Us{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const d=this._moveFunction(...i);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(i,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,d){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const w=d.length?d[0]:d;return!this._moved&&w.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(_,w))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&ne.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _r={0:1,2:2};class mi{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const d=ne.mouseButton(i);this._eventButton=d}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(d,_){const w=_r[_];return void 0===d.buttons||(d.buttons&w)!==w}(i,this._eventButton)}isValidEndEvent(i){return ne.mouseButton(i)===this._eventButton}}class F{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return 1===i.targetTouches.length}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Q=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=function(i){i.preventDefault()}},$=({enable:E,clickTolerance:i,bearingDegreesPerPixelMoved:d=.8})=>{const _=new mi({checkCorrectEvent:w=>0===ne.mouseButton(w)&&w.ctrlKey||2===ne.mouseButton(w)});return new Us({clickTolerance:i,move:(w,S)=>({bearingDelta:(S.x-w.x)*d}),moveStateManager:_,enable:E,assignEvents:Q})},fe=({enable:E,clickTolerance:i,pitchDegreesPerPixelMoved:d=-.5})=>{const _=new mi({checkCorrectEvent:w=>0===ne.mouseButton(w)&&w.ctrlKey||2===ne.mouseButton(w)});return new Us({clickTolerance:i,move:(w,S)=>({pitchDelta:(S.y-w.y)*d}),moveStateManager:_,enable:E,assignEvents:Q})};class Ye{constructor(i,d){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new v.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,d,_){return this._calculateTransform(i,d,_)}touchmove(i,d,_){if(this._map._cooperativeGestures&&(2===this._minTouches&&_.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,_.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(_.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,d,_)}touchend(i,d,_){this._calculateTransform(i,d,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,d,_){_.length>0&&(this._active=!0);const w=Vs(_,d),S=new v.Point(0,0),f=new v.Point(0,0);let b=0;for(const D in w){const k=w[D],R=this._touches[D];R&&(S._add(k),f._add(k.sub(R)),b++,w[D]=k)}if(this._touches=w,b<this._minTouches||!f.mag())return;const y=f.div(b);return this._sum._add(y),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(b),panDelta:y}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class It{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,d,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([d[0],d[1]]))}touchmove(i,d,_){if(!this._firstTwoTouches)return;i.preventDefault();const[w,S]=this._firstTwoTouches,f=Wt(_,d,w),b=Wt(_,d,S);if(!f||!b)return;const y=this._aroundCenter?null:f.add(b).div(2);return this._move([f,b],y,i)}touchend(i,d,_){if(!this._firstTwoTouches)return;const[w,S]=this._firstTwoTouches,f=Wt(_,d,w),b=Wt(_,d,S);f&&b||(this._active&&ne.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Wt(E,i,d){for(let _=0;_<E.length;_++)if(E[_].identifier===d)return i[_]}function Wi(E,i){return Math.log(E/i)/Math.LN2}class er extends It{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,d){const _=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Wi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wi(this._distance,_),pinchAround:d}}}function Ln(E,i){return 180*E.angleWith(i)/Math.PI}class Nn extends It{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,d){const _=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ln(this._vector,_),pinchAround:d}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const d=25/(Math.PI*this._minDiameter)*360,_=Ln(i,this._startVector);return Math.abs(_)<d}}function En(E){return Math.abs(E.y)>Math.abs(E.x)}class Zn extends It{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,d,_){super.touchstart(i,d,_),this._currentTouchCount=_.length}_start(i){this._lastPoints=i,En(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,d,_){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const w=i[0].sub(this._lastPoints[0]),S=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,S,_.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(w.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(i,d,_){if(void 0!==this._valid)return this._valid;const w=i.mag()>=2,S=d.mag()>=2;if(!w&&!S)return;if(!w||!S)return void 0===this._firstMove&&(this._firstMove=_),_-this._firstMove<100&&void 0;const f=i.y>0==d.y>0;return En(i)&&En(d)&&f}}const On={panStep:100,bearingStep:15,pitchStep:10};class Gr{constructor(i){this._tr=new Ga(i);const d=On;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let d=0,_=0,w=0,S=0,f=0;switch(i.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:i.shiftKey?_=-1:(i.preventDefault(),S=-1);break;case 39:i.shiftKey?_=1:(i.preventDefault(),S=1);break;case 38:i.shiftKey?w=1:(i.preventDefault(),f=-1);break;case 40:i.shiftKey?w=-1:(i.preventDefault(),f=1);break;default:return}return this._rotationDisabled&&(_=0,w=0),{cameraAnimation:b=>{const y=this._tr;b.easeTo({duration:300,easeId:"keyboardHandler",easing:js,zoom:d?Math.round(y.zoom)+d*(i.shiftKey?2:1):y.zoom,bearing:y.bearing+_*this._bearingStep,pitch:y.pitch+w*this._pitchStep,offset:[-S*this._panStep,-f*this._panStep],center:y.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function js(E){return E*(2-E)}const Yi=4.000244140625;class vs{constructor(i,d){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=i,this._tr=new Ga(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let d=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const _=v.browser.now(),w=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,0!==d&&d%Yi==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(w*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),i.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=i,this._delta-=d,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ne.mousePos(this._el,i),_=this._tr;this._around=v.LngLat.convert(this._aroundCenter?_.center:_.unproject(d)),this._aroundPoint=_.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(0!==this._delta){const b="wheel"===this._type&&Math.abs(this._delta)>Yi?this._wheelZoomRate:this._defaultZoomRate;let y=2/(1+Math.exp(-Math.abs(this._delta*b)));this._delta<0&&0!==y&&(y=1/y);const D="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(D*y))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d="number"==typeof this._targetZoom?this._targetZoom:i.zoom,_=this._startZoom,w=this._easing;let S,f=!1;if("wheel"===this._type&&_&&w){const b=Math.min((v.browser.now()-this._lastWheelEventTime)/200,1),y=w(b);S=v.interpolate.number(_,d,y),b<1?this._frameId||(this._frameId=!0):f=!0}else S=d,f=!0;return this._active=!0,f&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!f,zoomDelta:S-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let d=v.defaultEasing;if(this._prevEase){const _=this._prevEase,w=(v.browser.now()-_.start)/_.duration,S=_.easing(w+.01)-_.easing(w),f=.27/Math.sqrt(S*S+1e-4)*.01,b=Math.sqrt(.0729-f*f);d=v.bezier(f,b,.25,1)}return this._prevEase={start:v.browser.now(),duration:i,easing:d},d}reset(){this._active=!1}}class bs{constructor(i,d){this._clickZoom=i,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class tr{constructor(i){this._tr=new Ga(i),this.reset()}reset(){this._active=!1}dblclick(i,d){return i.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ir{constructor(){this._tap=new Xo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,d,_){if(!this._swipePoint)if(this._tapTime){const w=d[0],S=i.timeStamp-this._tapTime<500,f=this._tapPoint.dist(w)<30;S&&f?_.length>0&&(this._swipePoint=w,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(i,d,_)}touchmove(i,d,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const w=d[0],S=w.y-this._swipePoint.y;return this._swipePoint=w,i.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(i,d,_)}touchend(i,d,_){if(this._tapTime)this._swipePoint&&0===_.length&&this.reset();else{const w=this._tap.touchend(i,d,_);w&&(this._tapTime=i.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ds{constructor(i,d,_){this._el=i,this._mousePan=d,this._touchPan=_}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class hn{constructor(i,d,_){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=d,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Za{constructor(i,d,_,w){this._el=i,this._touchZoom=d,this._touchRotate=_,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Dl=E=>E.zoom||E.drag||E.pitch||E.rotate;class Xc extends v.Event{}function Jc(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class ma{constructor(i,d){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,S)=>{if("blur"===w.type)return void this.stop(!0);this._updatingCamera=!0;const f="renderFrame"===w.type?void 0:w,b={needsRenderFrame:!1},y={},D={},k=w.touches,R=k?this._getMapTouches(k):void 0,B=R?ne.touchPos(this._el,R):ne.mousePos(this._el,w);for(const{handlerName:Ee,handler:Ce,allowed:nt}of this._handlers){if(!Ce.isEnabled())continue;let yt;this._blockedByActive(D,nt,Ee)?Ce.reset():Ce[S||w.type]&&(yt=Ce[S||w.type](w,B,R),this.mergeHandlerResult(b,y,yt,Ee,f),yt&&yt.needsRenderFrame&&this._triggerRenderFrame()),(yt||Ce.isActive())&&(D[Ee]=Ce)}const ee={};for(const Ee in this._previousActiveHandlers)D[Ee]||(ee[Ee]=f);this._previousActiveHandlers=D,(Object.keys(ee).length||Jc(b))&&(this._changes.push([b,y,ee]),this._triggerRenderFrame()),(Object.keys(D).length||Jc(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:oe}=b;oe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],oe(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ys(i),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,S,f]of this._listeners)ne.addEventListener(w,S,w===document?this.handleWindowEvent:this.handleEvent,f)}destroy(){for(const[i,d,_]of this._listeners)ne.removeEventListener(i,d,i===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(i){const d=this._map,_=d.getCanvasContainer();this._add("mapEvent",new oo(d,i));const w=d.boxZoom=new ql(d,i);this._add("boxZoom",w),i.interactive&&i.boxZoom&&w.enable();const S=new Ml(d),f=new tr(d);d.doubleClickZoom=new bs(f,S),this._add("tapZoom",S),this._add("clickZoom",f),i.interactive&&i.doubleClickZoom&&d.doubleClickZoom.enable();const b=new ir;this._add("tapDragZoom",b);const y=d.touchPitch=new Zn(d);this._add("touchPitch",y),i.interactive&&i.touchPitch&&d.touchPitch.enable(i.touchPitch);const D=$(i),k=fe(i);d.dragRotate=new hn(i,D,k),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",k,["mouseRotate"]),i.interactive&&i.dragRotate&&d.dragRotate.enable();const R=(({enable:nt,clickTolerance:yt})=>{const $e=new mi({checkCorrectEvent:gt=>0===ne.mouseButton(gt)&&!gt.ctrlKey});return new Us({clickTolerance:yt,move:(gt,kt)=>({around:kt,panDelta:kt.sub(gt)}),activateOnStart:!0,moveStateManager:$e,enable:nt,assignEvents:Q})})(i),B=new Ye(i,d);d.dragPan=new ds(_,R,B),this._add("mousePan",R),this._add("touchPan",B,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&d.dragPan.enable(i.dragPan);const ee=new Nn,oe=new er;d.touchZoomRotate=new Za(_,oe,ee,b),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&d.touchZoomRotate.enable(i.touchZoomRotate);const Ee=d.scrollZoom=new vs(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Ee,["mousePan"]),i.interactive&&i.scrollZoom&&d.scrollZoom.enable(i.scrollZoom);const Ce=d.keyboard=new Gr(d);this._add("keyboard",Ce),i.interactive&&i.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new El(d))}_add(i,d,_){this._handlers.push({handlerName:i,handler:d,allowed:_}),this._handlersById[i]=d}stop(i){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Dl(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,d,_){for(const w in i)if(w!==_&&(!d||d.indexOf(w)<0))return!0;return!1}_getMapTouches(i){const d=[];for(const _ of i)this._el.contains(_.target)&&d.push(_);return d}mergeHandlerResult(i,d,_,w,S){if(!_)return;v.extend(i,_);const f={handlerName:w,originalEvent:_.originalEvent||S};void 0!==_.zoomDelta&&(d.zoom=f),void 0!==_.panDelta&&(d.drag=f),void 0!==_.pitchDelta&&(d.pitch=f),void 0!==_.bearingDelta&&(d.rotate=f)}_applyChanges(){const i={},d={},_={};for(const[w,S,f]of this._changes)w.panDelta&&(i.panDelta=(i.panDelta||new v.Point(0,0))._add(w.panDelta)),w.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+w.pitchDelta),void 0!==w.around&&(i.around=w.around),void 0!==w.pinchAround&&(i.pinchAround=w.pinchAround),w.noInertia&&(i.noInertia=w.noInertia),v.extend(d,S),v.extend(_,f);this._updateMapTransform(i,d,_),this._changes=[]}_updateMapTransform(i,d,_){const w=this._map,S=w._getTransformForUpdate(),f=w.terrain;if(!(Jc(i)||f&&this._terrainMovement))return this._fireEvents(d,_,!0);let{panDelta:b,zoomDelta:y,bearingDelta:D,pitchDelta:k,around:R,pinchAround:B}=i;void 0!==B&&(R=B),w._stop(!0),R=R||w.transform.centerPoint;const ee=S.pointLocation(b?R.sub(b):R);D&&(S.bearing+=D),k&&(S.pitch+=k),y&&(S.zoom+=y),f?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?S.center=S.pointLocation(S.centerPoint.sub(b)):S.setLocationAtPoint(ee,R):(this._terrainMovement=!0,this._map._elevationFreeze=!0,S.setLocationAtPoint(ee,R),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,S.recalculateZoom(w.terrain)})):S.setLocationAtPoint(ee,R),w._applyUpdatedTransform(S),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(d,_,!0)}_fireEvents(i,d,_){const w=Dl(this._eventsInProgress),S=Dl(i),f={};for(const k in i){const{originalEvent:R}=i[k];this._eventsInProgress[k]||(f[`${k}start`]=R),this._eventsInProgress[k]=i[k]}!w&&S&&this._fireEvent("movestart",S.originalEvent);for(const k in f)this._fireEvent(k,f[k]);S&&this._fireEvent("move",S.originalEvent);for(const k in i){const{originalEvent:R}=i[k];this._fireEvent(k,R)}const b={};let y;for(const k in this._eventsInProgress){const{handlerName:R,originalEvent:B}=this._eventsInProgress[k];this._handlersById[R].isActive()||(delete this._eventsInProgress[k],y=d[R]||B,b[`${k}end`]=y)}for(const k in b)this._fireEvent(k,b[k]);const D=Dl(this._eventsInProgress);if(_&&(w||S)&&!D){this._updatingCamera=!0;const k=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),R=B=>0!==B&&-this._bearingSnap<B&&B<this._bearingSnap;k?(R(k.bearing||this._map.getBearing())&&(k.bearing=0),k.freezeElevation=!0,this._map.easeTo(k,{originalEvent:y})):(this._map.fire(new v.Event("moveend",{originalEvent:y})),R(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,d){this._map.fire(new v.Event(i,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Xc("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Jo extends v.Evented{constructor(i,d){super(),this._renderFrameCallback=()=>{const _=Math.min((v.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new v.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,d){return this.jumpTo({center:i},d)}panBy(i,d,_){return i=v.Point.convert(i).mult(-1),this.panTo(this.transform.center,v.extend({offset:i},d),_)}panTo(i,d,_){return this.easeTo(v.extend({center:i},d),_)}getZoom(){return this.transform.zoom}setZoom(i,d){return this.jumpTo({zoom:i},d),this}zoomTo(i,d,_){return this.easeTo(v.extend({zoom:i},d),_)}zoomIn(i,d){return this.zoomTo(this.getZoom()+1,i,d),this}zoomOut(i,d){return this.zoomTo(this.getZoom()-1,i,d),this}getBearing(){return this.transform.bearing}setBearing(i,d){return this.jumpTo({bearing:i},d),this}getPadding(){return this.transform.padding}setPadding(i,d){return this.jumpTo({padding:i},d),this}rotateTo(i,d,_){return this.easeTo(v.extend({bearing:i},d),_)}resetNorth(i,d){return this.rotateTo(0,v.extend({duration:1e3},i),d),this}resetNorthPitch(i,d){return this.easeTo(v.extend({bearing:0,pitch:0,duration:1e3},i),d),this}snapToNorth(i,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,d):this}getPitch(){return this.transform.pitch}setPitch(i,d){return this.jumpTo({pitch:i},d),this}cameraForBounds(i,d){i=ft.convert(i);const _=d&&d.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),_,d)}_cameraForBoxAndBearing(i,d,_,w){const S={top:0,bottom:0,right:0,left:0};if("number"==typeof(w=v.extend({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding){const kt=w.padding;w.padding={top:kt,bottom:kt,right:kt,left:kt}}w.padding=v.extend(S,w.padding);const f=this.transform,b=f.padding,y=f.project(v.LngLat.convert(i)),D=f.project(v.LngLat.convert(d)),k=y.rotate(-_*Math.PI/180),R=D.rotate(-_*Math.PI/180),B=new v.Point(Math.max(k.x,R.x),Math.max(k.y,R.y)),ee=new v.Point(Math.min(k.x,R.x),Math.min(k.y,R.y)),oe=B.sub(ee),Ee=(f.width-(b.left+b.right+w.padding.left+w.padding.right))/oe.x,Ce=(f.height-(b.top+b.bottom+w.padding.top+w.padding.bottom))/oe.y;if(Ce<0||Ee<0)return void v.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const nt=Math.min(f.scaleZoom(f.scale*Math.min(Ee,Ce)),w.maxZoom),yt=v.Point.convert(w.offset),$e=new v.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(_*Math.PI/180),gt=yt.add($e).mult(f.scale/f.zoomScale(nt));return{center:f.unproject(y.add(D).div(2).sub(gt)),zoom:nt,bearing:_}}fitBounds(i,d,_){return this._fitInternal(this.cameraForBounds(i,d),d,_)}fitScreenCoordinates(i,d,_,w,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(v.Point.convert(i)),this.transform.pointLocation(v.Point.convert(d)),_,w),w,S)}_fitInternal(i,d,_){return i?(delete(d=v.extend(i,d)).padding,d.linear?this.easeTo(d,_):this.flyTo(d,_)):this}jumpTo(i,d){this.stop();const _=this._getTransformForUpdate();let w=!1,S=!1,f=!1;return"zoom"in i&&_.zoom!==+i.zoom&&(w=!0,_.zoom=+i.zoom),void 0!==i.center&&(_.center=v.LngLat.convert(i.center)),"bearing"in i&&_.bearing!==+i.bearing&&(S=!0,_.bearing=+i.bearing),"pitch"in i&&_.pitch!==+i.pitch&&(f=!0,_.pitch=+i.pitch),null==i.padding||_.isPaddingEqual(i.padding)||(_.padding=i.padding),this._applyUpdatedTransform(_),this.fire(new v.Event("movestart",d)).fire(new v.Event("move",d)),w&&this.fire(new v.Event("zoomstart",d)).fire(new v.Event("zoom",d)).fire(new v.Event("zoomend",d)),S&&this.fire(new v.Event("rotatestart",d)).fire(new v.Event("rotate",d)).fire(new v.Event("rotateend",d)),f&&this.fire(new v.Event("pitchstart",d)).fire(new v.Event("pitch",d)).fire(new v.Event("pitchend",d)),this.fire(new v.Event("moveend",d))}calculateCameraOptionsFromTo(i,d,_,w=0){const S=v.MercatorCoordinate.fromLngLat(i,d),f=v.MercatorCoordinate.fromLngLat(_,w),b=f.x-S.x,y=f.y-S.y,D=f.z-S.z,k=Math.hypot(b,y,D);if(0===k)throw new Error("Can't calculate camera options with same From and To");const R=Math.hypot(b,y),B=this.transform.scaleZoom(this.transform.cameraToCenterDistance/k/this.transform.tileSize),ee=180*Math.atan2(b,-y)/Math.PI;let oe=180*Math.acos(R/k)/Math.PI;return oe=D<0?90-oe:90+oe,{center:f.toLngLat(),zoom:B,pitch:oe,bearing:ee}}easeTo(i,d){this._stop(!1,i.easeId),(!1===(i=v.extend({offset:[0,0],duration:500,easing:v.defaultEasing},i)).animate||!i.essential&&v.browser.prefersReducedMotion)&&(i.duration=0);const _=this._getTransformForUpdate(),w=this.getZoom(),S=this.getBearing(),f=this.getPitch(),b=this.getPadding(),y="zoom"in i?+i.zoom:w,D="bearing"in i?this._normalizeBearing(i.bearing,S):S,k="pitch"in i?+i.pitch:f,R="padding"in i?i.padding:_.padding,B=v.Point.convert(i.offset);let ee=_.centerPoint.add(B);const oe=_.pointLocation(ee),Ee=v.LngLat.convert(i.center||oe);this._normalizeCenter(Ee);const Ce=_.project(oe),nt=_.project(Ee).sub(Ce),yt=_.zoomScale(y-w);let $e,gt;i.around&&($e=v.LngLat.convert(i.around),gt=_.locationPoint($e));const kt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||y!==w,this._rotating=this._rotating||S!==D,this._pitching=this._pitching||k!==f,this._padding=!_.isPaddingEqual(R),this._easeId=i.easeId,this._prepareEase(d,i.noMoveStart,kt),this.terrain&&this._prepareElevation(Ee),this._ease(Lt=>{if(this._zooming&&(_.zoom=v.interpolate.number(w,y,Lt)),this._rotating&&(_.bearing=v.interpolate.number(S,D,Lt)),this._pitching&&(_.pitch=v.interpolate.number(f,k,Lt)),this._padding&&(_.interpolatePadding(b,R,Lt),ee=_.centerPoint.add(B)),this.terrain&&!i.freezeElevation&&this._updateElevation(Lt),$e)_.setLocationAtPoint($e,gt);else{const Zt=_.zoomScale(_.zoom-w),ri=y>w?Math.min(2,yt):Math.max(.5,yt),ii=Math.pow(ri,1-Lt),Ei=_.unproject(Ce.add(nt.mult(Lt*ii)).mult(Zt));_.setLocationAtPoint(_.renderWorldCopies?Ei.wrap():Ei,ee)}this._applyUpdatedTransform(_),this._fireMoveEvents(d)},Lt=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,Lt)},i),this}_prepareEase(i,d,_={}){this._moving=!0,d||_.moving||this.fire(new v.Event("movestart",i)),this._zooming&&!_.zooming&&this.fire(new v.Event("zoomstart",i)),this._rotating&&!_.rotating&&this.fire(new v.Event("rotatestart",i)),this._pitching&&!_.pitching&&this.fire(new v.Event("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&d!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(_-(d-(_*i+this._elevationStart))/(1-i)),this._elevationTarget=d}this.transform.elevation=v.interpolate.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const d=i.clone(),{center:_,zoom:w,pitch:S,bearing:f,elevation:b}=this.transformCameraUpdate(d);_&&(d.center=_),void 0!==w&&(d.zoom=w),void 0!==S&&(d.pitch=S),void 0!==f&&(d.bearing=f),void 0!==b&&(d.elevation=b),this.transform.apply(d)}_fireMoveEvents(i){this.fire(new v.Event("move",i)),this._zooming&&this.fire(new v.Event("zoom",i)),this._rotating&&this.fire(new v.Event("rotate",i)),this._pitching&&this.fire(new v.Event("pitch",i))}_afterEase(i,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const _=this._zooming,w=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new v.Event("zoomend",i)),w&&this.fire(new v.Event("rotateend",i)),S&&this.fire(new v.Event("pitchend",i)),this.fire(new v.Event("moveend",i))}flyTo(i,d){if(!i.essential&&v.browser.prefersReducedMotion){const ki=v.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ki,d)}this.stop(),i=v.extend({offset:[0,0],speed:1.2,curve:1.42,easing:v.defaultEasing},i);const _=this._getTransformForUpdate(),w=this.getZoom(),S=this.getBearing(),f=this.getPitch(),b=this.getPadding(),y="zoom"in i?v.clamp(+i.zoom,_.minZoom,_.maxZoom):w,D="bearing"in i?this._normalizeBearing(i.bearing,S):S,k="pitch"in i?+i.pitch:f,R="padding"in i?i.padding:_.padding,B=_.zoomScale(y-w),ee=v.Point.convert(i.offset);let oe=_.centerPoint.add(ee);const Ee=_.pointLocation(oe),Ce=v.LngLat.convert(i.center||Ee);this._normalizeCenter(Ce);const nt=_.project(Ee),yt=_.project(Ce).sub(nt);let $e=i.curve;const gt=Math.max(_.width,_.height),kt=gt/B,Lt=yt.mag();if("minZoom"in i){const ki=v.clamp(Math.min(i.minZoom,w,y),_.minZoom,_.maxZoom),rr=gt/_.zoomScale(ki-w);$e=Math.sqrt(rr/Lt*2)}const Zt=$e*$e;function ri(ki){const rr=(kt*kt-gt*gt+(ki?-1:1)*Zt*Zt*Lt*Lt)/(2*(ki?kt:gt)*Zt*Lt);return Math.log(Math.sqrt(rr*rr+1)-rr)}function ii(ki){return(Math.exp(ki)-Math.exp(-ki))/2}function Ei(ki){return(Math.exp(ki)+Math.exp(-ki))/2}const Ui=ri(!1);let vn=function(ki){return Ei(Ui)/Ei(Ui+$e*ki)},bi=function(ki){return gt*((Ei(Ui)*(ii(rr=Ui+$e*ki)/Ei(rr))-ii(Ui))/Zt)/Lt;var rr},en=(ri(!0)-Ui)/$e;if(Math.abs(Lt)<1e-6||!isFinite(en)){if(Math.abs(gt-kt)<1e-6)return this.easeTo(i,d);const ki=kt<gt?-1:1;en=Math.abs(Math.log(kt/gt))/$e,bi=function(){return 0},vn=function(rr){return Math.exp(ki*$e*rr)}}return i.duration="duration"in i?+i.duration:1e3*en/("screenSpeed"in i?+i.screenSpeed/$e:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==D,this._pitching=k!==f,this._padding=!_.isPaddingEqual(R),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(Ce),this._ease(ki=>{const rr=ki*en,Kn=1/vn(rr);_.zoom=1===ki?y:w+_.scaleZoom(Kn),this._rotating&&(_.bearing=v.interpolate.number(S,D,ki)),this._pitching&&(_.pitch=v.interpolate.number(f,k,ki)),this._padding&&(_.interpolatePadding(b,R,ki),oe=_.centerPoint.add(ee)),this.terrain&&!i.freezeElevation&&this._updateElevation(ki);const Tn=1===ki?Ce:_.unproject(nt.add(yt.mult(bi(rr))).mult(Kn));_.setLocationAtPoint(_.renderWorldCopies?Tn.wrap():Tn,oe),this._applyUpdatedTransform(_),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,d)}if(!i){const _=this.handlers;_&&_.stop(!1)}return this}_ease(i,d,_){!1===_.animate||0===_.duration?(i(1),d()):(this._easeStart=v.browser.now(),this._easeOptions=_,this._onEaseFrame=i,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,d){i=v.wrap(i,-180,180);const _=Math.abs(i-d);return Math.abs(i-360-d)<_&&(i-=360),Math.abs(i+360-d)<_&&(i+=360),i}_normalizeCenter(i){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const _=i.lng-d.center.lng;i.lng+=_>180?-360:_<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(v.LngLat.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class wt{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType&&"terrain"!==d.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=ne.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=ne.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ne.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){ne.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,d){const _=this._map._getUIString(`AttributionControl.${d}`);i.title=_,i.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(w=>"string"!=typeof w?"":w)):"string"==typeof this.options.customAttribution&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const d=this._map.style.sourceCaches;for(const w in d){const S=d[w];if(S.used||S.usedForTerrain){const f=S.getSource();f.attribution&&i.indexOf(f.attribution)<0&&i.push(f.attribution)}}i=i.filter(w=>String(w).trim()),i.sort((w,S)=>w.length-S.length),i=i.filter((w,S)=>{for(let f=S+1;f<i.length;f++)if(i[f].indexOf(w)>=0)return!1;return!0});const _=i.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,i.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class pi{constructor(i={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const _=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=ne.create("div","maplibregl-ctrl");const d=ne.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){ne.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class sl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const d=++this._id;return this._queue.push({callback:i,id:d,cancelled:!1}),d}remove(i){const d=this._currentlyRunning,_=d?this._queue.concat(d):this._queue;for(const w of _)if(w.id===i)return void(w.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const _ of d)if(!_.cancelled&&(_.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Hs={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var xo=v.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class So extends v.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,d){this.sourceCache.update(i,d),this._renderableTilesKeys=[];const _={};for(const w of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))_[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.posMatrix=new Float64Array(16),v.ortho(w.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),this._tiles[w.key]=new Dt(w,this.tileSize));for(const w in this._tiles)_[w]||delete this._tiles[w]}freeRtt(i){for(const d in this._tiles){const _=this._tiles[d];(!i||_.tileID.equals(i)||_.tileID.isChildOf(i)||i.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const d={};for(const _ of this._renderableTilesKeys){const w=this._tiles[_].tileID;if(w.canonical.equals(i.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16),v.ortho(S.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),d[_]=S}else if(w.canonical.isChildOf(i.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16);const f=w.canonical.z-i.canonical.z,b=w.canonical.x-(w.canonical.x>>f<<f),y=w.canonical.y-(w.canonical.y>>f<<f),D=v.EXTENT>>f;v.ortho(S.posMatrix,0,D,0,D,0,1),v.translate(S.posMatrix,S.posMatrix,[-b*D,-y*D,0]),d[_]=S}else if(i.canonical.isChildOf(w.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16);const f=i.canonical.z-w.canonical.z,b=i.canonical.x-(i.canonical.x>>f<<f),y=i.canonical.y-(i.canonical.y>>f<<f),D=v.EXTENT>>f;v.ortho(S.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),v.translate(S.posMatrix,S.posMatrix,[b*D,y*D,0]),v.scale(S.posMatrix,S.posMatrix,[1/2**f,1/2**f,0]),d[_]=S}}return d}getSourceTile(i,d){const _=this.sourceCache._source;let w=i.overscaledZ-this.deltaZoom;if(w>_.maxzoom&&(w=_.maxzoom),w<_.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(w).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!S||!S.dem)&&d)for(;w>=_.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(i.scaledTo(w--).key);return S}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=i)}}class Yl{constructor(i,d,_){this.painter=i,this.sourceCache=new So(d),this.options=_,this.exaggeration="number"==typeof _.exaggeration?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,d,_,w=v.EXTENT){var S;if(!(d>=0&&d<w&&_>=0&&_<w))return 0;const f=this.getTerrainData(i),b=null===(S=f.tile)||void 0===S?void 0:S.dem;if(!b)return 0;const y=((oe=[])[0]=(Ce=f.u_terrain_matrix)[0]*(nt=(Ee=[d/w*v.EXTENT,_/w*v.EXTENT])[0])+Ce[4]*(yt=Ee[1])+Ce[12],oe[1]=Ce[1]*nt+Ce[5]*yt+Ce[13],oe),D=[y[0]*b.dim,y[1]*b.dim],k=Math.floor(D[0]),R=Math.floor(D[1]),B=D[0]-k,ee=D[1]-R;var oe,Ee,Ce,nt,yt;return b.get(k,R)*(1-B)*(1-ee)+b.get(k+1,R)*B*(1-ee)+b.get(k,R+1)*(1-B)*ee+b.get(k+1,R+1)*B*ee}getElevationForLngLatZoom(i,d){const{tileID:_,mercatorX:w,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(i,d);return this.getElevation(_,w%v.EXTENT,S%v.EXTENT,v.EXTENT)}getElevation(i,d,_,w=v.EXTENT){return this.getDEMElevation(i,d,_,w)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const w=this.painter.context,S=new v.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Oe(w,S,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Oe(w,new v.RGBAImage({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=v.identity([])}const d=this.sourceCache.getSourceTile(i,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const w=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new Oe(w,d.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),d.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const _=d&&d+d.tileID.key+i.key;if(_&&!this._demMatrixCache[_]){const w=this.sourceCache.sourceCache._source.maxzoom;let S=i.canonical.z-d.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=w?S=i.canonical.z-w:v.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const f=i.canonical.x-(i.canonical.x>>S<<S),b=i.canonical.y-(i.canonical.y>>S<<S),y=v.fromScaling(new Float64Array(16),[1/(v.EXTENT<<S),1/(v.EXTENT<<S),0]);v.translate(y,y,[f*v.EXTENT,b*v.EXTENT,0]),this._demMatrixCache[i.key]={matrix:y,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(i){const d=this.painter,_=d.width/devicePixelRatio,w=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Oe(d.context,{width:_,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Oe(d.context,{width:_,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(_,w,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,_,w))),this._fbo.colorAttachment.set("coords"===i?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,f=0;S<this._coordsTextureSize;S++)for(let b=0;b<this._coordsTextureSize;b++,f+=4)d[f+0]=255&b,d[f+1]=255&S,d[f+2]=b>>8<<4|S>>8,d[f+3]=0;const _=new v.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),w=new Oe(i,_,i.gl.RGBA,{premultiply:!1});return w.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(i){const d=new Uint8Array(4),_=this.painter.context,w=_.gl;_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,d),_.bindFramebuffer.set(null);const S=d[0]+(d[2]>>4<<8),f=d[1]+((15&d[2])<<8),b=this.coordsIndex[255-d[3]],y=b&&this.sourceCache.getTileByID(b);if(!y)return null;const D=this._coordsTextureSize,k=(1<<y.tileID.canonical.z)*D;return new v.MercatorCoordinate((y.tileID.canonical.x*D+S)/k,(y.tileID.canonical.y*D+f)/k,this.getElevation(y.tileID,S,f,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,d=new v.Pos3dArray,_=new v.TriangleIndexArray,w=this.meshSize,S=v.EXTENT/w,f=w*w;for(let R=0;R<=w;R++)for(let B=0;B<=w;B++)d.emplaceBack(B*S,R*S,0);for(let R=0;R<f;R+=w+1)for(let B=0;B<w;B++)_.emplaceBack(B+R,w+B+R+1,w+B+R+2),_.emplaceBack(B+R,w+B+R+2,B+R+1);const b=d.length,y=b+2*(w+1);for(const R of[0,1])for(let B=0;B<=w;B++)for(const ee of[0,1])d.emplaceBack(B*S,R*v.EXTENT,ee);for(let R=0;R<2*w;R+=2)_.emplaceBack(y+R,y+R+1,y+R+3),_.emplaceBack(y+R,y+R+3,y+R+2),_.emplaceBack(b+R,b+R+3,b+R+1),_.emplaceBack(b+R,b+R+2,b+R+3);const D=d.length,k=D+2*(w+1);for(const R of[0,1])for(let B=0;B<=w;B++)for(const ee of[0,1])d.emplaceBack(R*v.EXTENT,B*S,ee);for(let R=0;R<2*w;R+=2)_.emplaceBack(D+R,D+R+1,D+R+3),_.emplaceBack(D+R,D+R+3,D+R+2),_.emplaceBack(k+R,k+R+3,k+R+1),_.emplaceBack(k+R,k+R+2,k+R+3);return this._mesh={indexBuffer:i.createIndexBuffer(_),vertexBuffer:i.createVertexBuffer(d,xo.members),segments:v.SegmentVector.simpleSegment(0,0,d.length,_.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*v.earthRadius/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,d){var _;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(i,d);return null!==(_=this.getMinMaxElevation(w).minElevation)&&void 0!==_?_:0}getMinMaxElevation(i){const d=this.getTerrainData(i).tile,_={minElevation:null,maxElevation:null};return d&&d.dem&&(_.minElevation=d.dem.min*this.exaggeration,_.maxElevation=d.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(i,d){const _=v.MercatorCoordinate.fromLngLat(i.wrap()),w=(1<<d)*v.EXTENT,S=_.x*w,f=_.y*w,b=Math.floor(S/v.EXTENT),y=Math.floor(f/v.EXTENT);return{tileID:new v.OverscaledTileID(d,0,d,b,y),mercatorX:S,mercatorY:f}}}class To{constructor(i,d,_){this._context=i,this._size=d,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new Oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(_.texture),{id:i,fbo:d,texture:_,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>i.id!==d),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(i=>!i.inUse)}}const Ta={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class al{constructor(i,d){this.painter=i,this.terrain=d,this.pool=new To(i.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(_=>!i._layers[_].isHidden(d)),this._coordsDescendingInv={};for(const _ in i.sourceCaches){this._coordsDescendingInv[_]={};const w=i.sourceCaches[_].getVisibleCoordinates();for(const S of w){const f=this.terrain.sourceCache.getTerrainCoords(S);for(const b in f)this._coordsDescendingInv[_][b]||(this._coordsDescendingInv[_][b]=[]),this._coordsDescendingInv[_][b].push(f[b])}}this._coordsDescendingInvStr={};for(const _ of i._order){const w=i._layers[_],S=w.source;if(Ta[w.type]&&!this._coordsDescendingInvStr[S]){this._coordsDescendingInvStr[S]={};for(const f in this._coordsDescendingInv[S])this._coordsDescendingInvStr[S][f]=this._coordsDescendingInv[S][f].map(b=>b.key).sort().join()}}for(const _ of this._renderableTiles)for(const w in this._coordsDescendingInvStr){const S=this._coordsDescendingInvStr[w][_.tileID.key];S&&S!==_.rttCoords[w]&&(_.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const d=i.type,_=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Ta[d]&&(this._prevType&&Ta[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(i.id),!w))return!0;if(Ta[this._prevType]||Ta[d]&&w){this._prevType=d;const S=this._stacks.length-1,f=this._stacks[S]||[];for(const b of this._renderableTiles){if(this.pool.isFull()&&(Sa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(b),b.rtt[S]){const D=this.pool.getObjectForId(b.rtt[S].id);if(D.stamp===b.rtt[S].stamp){this.pool.useObject(D);continue}}const y=this.pool.getOrCreateFreeObject();this.pool.useObject(y),this.pool.stampObject(y),b.rtt[S]={id:y.id,stamp:y.stamp},_.context.bindFramebuffer.set(y.fbo.framebuffer),_.context.clear({color:v.Color.transparent,stencil:0}),_.currentStencilSource=void 0;for(let D=0;D<f.length;D++){const k=_.style._layers[f[D]],R=k.source?this._coordsDescendingInv[k.source][b.tileID.key]:[b.tileID];_.context.viewport.set([0,0,y.fbo.width,y.fbo.height]),_._renderTileClippingMasks(k,R),_.renderLayer(_,_.style.sourceCaches[k.source],k,R),k.source&&(b.rttCoords[k.source]=this._coordsDescendingInvStr[k.source][b.tileID.key])}}return Sa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ta[d]}return!1}}const wo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:v.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},dc=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},Io={showCompass:!0,showZoom:!0,visualizePitch:!1};class us{constructor(i,d,_=!1){this.mousedown=f=>{this.startMouse(v.extend({},f,{ctrlKey:!0,preventDefault:()=>f.preventDefault()}),ne.mousePos(this.element,f)),ne.addEventListener(window,"mousemove",this.mousemove),ne.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=f=>{this.moveMouse(f,ne.mousePos(this.element,f))},this.mouseup=f=>{this.mouseRotate.dragEnd(f),this.mousePitch&&this.mousePitch.dragEnd(f),this.offTemp()},this.touchstart=f=>{1!==f.targetTouches.length?this.reset():(this._startPos=this._lastPos=ne.touchPos(this.element,f.targetTouches)[0],this.startTouch(f,this._startPos),ne.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),ne.addEventListener(window,"touchend",this.touchend))},this.touchmove=f=>{1!==f.targetTouches.length?this.reset():(this._lastPos=ne.touchPos(this.element,f.targetTouches)[0],this.moveTouch(f,this._lastPos))},this.touchend=f=>{0===f.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const w=i.dragRotate._mouseRotate.getClickTolerance(),S=i.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=$({clickTolerance:w,enable:!0}),this.touchRotate=(({enable:f,clickTolerance:b,bearingDegreesPerPixelMoved:y=.8})=>{const D=new F;return new Us({clickTolerance:b,move:(k,R)=>({bearingDelta:(R.x-k.x)*y}),moveStateManager:D,enable:f,assignEvents:dc})})({clickTolerance:w,enable:!0}),this.map=i,_&&(this.mousePitch=fe({clickTolerance:S,enable:!0}),this.touchPitch=(({enable:f,clickTolerance:b,pitchDegreesPerPixelMoved:y=-.5})=>{const D=new F;return new Us({clickTolerance:b,move:(k,R)=>({pitchDelta:(R.y-k.y)*y}),moveStateManager:D,enable:f,assignEvents:dc})})({clickTolerance:S,enable:!0})),ne.addEventListener(d,"mousedown",this.mousedown),ne.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),ne.addEventListener(d,"touchcancel",this.reset)}startMouse(i,d){this.mouseRotate.dragStart(i,d),this.mousePitch&&this.mousePitch.dragStart(i,d),ne.disableDrag()}startTouch(i,d){this.touchRotate.dragStart(i,d),this.touchPitch&&this.touchPitch.dragStart(i,d),ne.disableDrag()}moveMouse(i,d){const _=this.map,{bearingDelta:w}=this.mouseRotate.dragMove(i,d)||{};if(w&&_.setBearing(_.getBearing()+w),this.mousePitch){const{pitchDelta:S}=this.mousePitch.dragMove(i,d)||{};S&&_.setPitch(_.getPitch()+S)}}moveTouch(i,d){const _=this.map,{bearingDelta:w}=this.touchRotate.dragMove(i,d)||{};if(w&&_.setBearing(_.getBearing()+w),this.touchPitch){const{pitchDelta:S}=this.touchPitch.dragMove(i,d)||{};S&&_.setPitch(_.getPitch()+S)}}off(){const i=this.element;ne.removeEventListener(i,"mousedown",this.mousedown),ne.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),ne.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),ne.removeEventListener(window,"touchend",this.touchend),ne.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){ne.enableDrag(),ne.removeEventListener(window,"mousemove",this.mousemove),ne.removeEventListener(window,"mouseup",this.mouseup),ne.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),ne.removeEventListener(window,"touchend",this.touchend)}}let ta;function xs(E,i,d){if(E=new v.LngLat(E.lng,E.lat),i){const _=new v.LngLat(E.lng-360,E.lat),w=new v.LngLat(E.lng+360,E.lat),S=d.locationPoint(E).distSqr(i);d.locationPoint(_).distSqr(i)<S?E=_:d.locationPoint(w).distSqr(i)<S&&(E=w)}for(;Math.abs(E.lng-d.center.lng)>180;){const _=d.locationPoint(E);if(_.x>=0&&_.y>=0&&_.x<=d.width&&_.y<=d.height)break;E.lng>d.center.lng?E.lng-=360:E.lng+=360}return E}const $s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function pa(E,i,d){const _=E.classList;for(const w in $s)_.remove(`maplibregl-${d}-anchor-${w}`);_.add(`maplibregl-${d}-anchor-${i}`)}class Sl extends v.Evented{constructor(i){if(super(),this._onKeyPress=d=>{const _=d.code,w=d.charCode||d.keyCode;"Space"!==_&&"Enter"!==_&&32!==w&&13!==w||this.togglePopup()},this._onMapClick=d=>{const _=d.originalEvent.target,w=this._element;this._popup&&(_===w||w.contains(_))&&this.togglePopup()},this._update=d=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=xs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let _="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?_=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?w="rotateX(0deg)":"map"===this._pitchAlignment&&(w=`rotateX(${this._map.getPitch()}deg)`),d&&"moveend"!==d.type||(this._pos=this._pos.round()),ne.setTransform(this._element,`${$s[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${_}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const S=this._map.unproject(this._pos),f=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=S.distanceTo(this._lngLat)>20*f?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new v.Event("dragstart"))),this.fire(new v.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new v.Event("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=v.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=ne.create("div"),this._element.setAttribute("aria-label","Map marker");const d=ne.createNS("http://www.w3.org/2000/svg","svg"),_=41,w=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${_}px`),d.setAttributeNS(null,"width",`${w}px`),d.setAttributeNS(null,"viewBox",`0 0 ${w} ${_}`);const S=ne.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const f=ne.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill-rule","nonzero");const b=ne.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(3.0, 29.0)"),b.setAttributeNS(null,"fill","#000000");const y=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const nt of y){const yt=ne.createNS("http://www.w3.org/2000/svg","ellipse");yt.setAttributeNS(null,"opacity","0.04"),yt.setAttributeNS(null,"cx","10.5"),yt.setAttributeNS(null,"cy","5.80029008"),yt.setAttributeNS(null,"rx",nt.rx),yt.setAttributeNS(null,"ry",nt.ry),b.appendChild(yt)}const D=ne.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const k=ne.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(k);const R=ne.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"opacity","0.25"),R.setAttributeNS(null,"fill","#000000");const B=ne.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),R.appendChild(B);const ee=ne.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const oe=ne.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ee=ne.createNS("http://www.w3.org/2000/svg","circle");Ee.setAttributeNS(null,"fill","#000000"),Ee.setAttributeNS(null,"opacity","0.25"),Ee.setAttributeNS(null,"cx","5.5"),Ee.setAttributeNS(null,"cy","5.5"),Ee.setAttributeNS(null,"r","5.4999962");const Ce=ne.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),oe.appendChild(Ee),oe.appendChild(Ce),f.appendChild(b),f.appendChild(D),f.appendChild(R),f.appendChild(ee),f.appendChild(oe),d.appendChild(f),d.setAttributeNS(null,"height",_*this._scale+"px"),d.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(d),this._offset=v.Point.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),pa(this._element,this._anchor,"marker"),i&&i.className)for(const d of i.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),ne.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=v.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const w=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(24.6+w)],"bottom-right":[-w,-1*(24.6+w)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=v.Point.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&"auto"!==i?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Qc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ll=0,Ia=!1;const Kl={maxWidth:100,unit:"metric"};function Tl(E,i,d){const _=d&&d.maxWidth||100,w=E._container.clientHeight/2,S=E.unproject([0,w]),f=E.unproject([_,w]),b=S.distanceTo(f);if(d&&"imperial"===d.unit){const y=3.2808*b;y>5280?Aa(i,_,y/5280,E._getUIString("ScaleControl.Miles")):Aa(i,_,y,E._getUIString("ScaleControl.Feet"))}else d&&"nautical"===d.unit?Aa(i,_,b/1852,E._getUIString("ScaleControl.NauticalMiles")):b>=1e3?Aa(i,_,b/1e3,E._getUIString("ScaleControl.Kilometers")):Aa(i,_,b,E._getUIString("ScaleControl.Meters"))}function Aa(E,i,d,_){const w=function(S){const f=Math.pow(10,`${Math.floor(S)}`.length-1);let b=S/f;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:function(y){const D=Math.pow(10,Math.ceil(-Math.log(y)/Math.LN10));return Math.round(y*D)/D}(b),f*b}(d);E.style.width=i*(w/d)+"px",E.innerHTML=`${w}&nbsp;${_}`}const Xl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Il=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Al(E){if(E){if("number"==typeof E){const i=Math.round(Math.sqrt(.5*Math.pow(E,2)));return{center:new v.Point(0,0),top:new v.Point(0,E),"top-left":new v.Point(i,i),"top-right":new v.Point(-i,i),bottom:new v.Point(0,-E),"bottom-left":new v.Point(i,-i),"bottom-right":new v.Point(-i,-i),left:new v.Point(E,0),right:new v.Point(-E,0)}}if(E instanceof v.Point||Array.isArray(E)){const i=v.Point.convert(E);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:v.Point.convert(E.center||[0,0]),top:v.Point.convert(E.top||[0,0]),"top-left":v.Point.convert(E["top-left"]||[0,0]),"top-right":v.Point.convert(E["top-right"]||[0,0]),bottom:v.Point.convert(E.bottom||[0,0]),"bottom-left":v.Point.convert(E["bottom-left"]||[0,0]),"bottom-right":v.Point.convert(E["bottom-right"]||[0,0]),left:v.Point.convert(E.left||[0,0]),right:v.Point.convert(E.right||[0,0])}}return Al(new v.Point(0,0))}const uc={extend:(E,...i)=>v.extend(E,...i),run(E){E()},logToElement(E,i=!1,d="log"){const _=window.document.getElementById(d);_&&(i&&(_.innerHTML=""),_.innerHTML+=`<br>${E}`)}};class Jn{static get version(){return"3.2.1"}static get workerCount(){return pt.workerCount}static set workerCount(i){pt.workerCount=i}static get maxParallelImageRequests(){return v.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){v.config.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return v.config.WORKER_URL}static set workerUrl(i){v.config.WORKER_URL=i}static addProtocol(i,d){v.config.REGISTERED_PROTOCOLS[i]=d}static removeProtocol(i){delete v.config.REGISTERED_PROTOCOLS[i]}}return Jn.Map=class extends Jo{constructor(E){if(v.PerformanceUtils.mark(v.PerformanceMarkers.create),null!=(E=v.extend({},wo,E)).minZoom&&null!=E.maxZoom&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=E.minPitch&&null!=E.maxPitch&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=E.minPitch&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=E.maxPitch&&E.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Sr(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies),{bearingSnap:E.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new v.Event("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new v.Event("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=E.interactive,this._cooperativeGestures=E.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=E.maxTileCacheSize,this._maxTileCacheZoomLevels=E.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new sl,this._controls=[],this._mapId=v.uniqueId(),this._locale=v.extend({},Hs,E.locale),this._clickTolerance=E.clickTolerance,this._overridePixelRatio=E.pixelRatio,this._maxCanvasSize=E.maxCanvasSize,this.transformCameraUpdate=E.transformCameraUpdate,this._imageQueueHandle=et.addThrottleControl(()=>this.isMoving()),this._requestManager=new lt(E.transformRequest),"string"==typeof E.container){if(this._container=document.getElementById(E.container),!this._container)throw new Error(`Container '${E.container}' not found.`)}else{if(!(E.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;this._resizeObserver=new ResizeObserver(d=>{i?this._trackResize&&this.resize(d)._update():i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ma(this,E),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=E.hash&&new ls("string"==typeof E.hash&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,v.extend({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,this._validateStyle=E.validateStyle,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new wt({customAttribution:E.customAttribution})),E.maplibreLogo&&this.addControl(new pi,E.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update("style"===i.dataType),this.fire(new v.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new v.Event(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new v.Event("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(E,i){if(void 0===i&&(i=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=E.onAdd(this);this._controls.push(E);const _=this._controlPositions[i];return-1!==i.indexOf("bottom")?_.insertBefore(d,_.firstChild):_.appendChild(d),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(E);return i>-1&&this._controls.splice(i,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,i,d,_){return null==_&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,i,d,_)}resize(E){var i;const d=this._containerDimensions(),_=d[0],w=d[1],S=this._getClampedPixelRatio(_,w);if(this._resizeCanvas(_,w,S),this.painter.resize(_,w,S),this.painter.overLimit()){const b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];const y=this._getClampedPixelRatio(_,w);this._resizeCanvas(_,w,y),this.painter.resize(_,w,y)}this.transform.resize(_,w),null===(i=this._requestedCameraState)||void 0===i||i.resize(_,w);const f=!this._moving;return f&&(this.stop(),this.fire(new v.Event("movestart",E)).fire(new v.Event("move",E))),this.fire(new v.Event("resize",E)),f&&this.fire(new v.Event("moveend",E)),this}_getClampedPixelRatio(E,i){const{0:d,1:_}=this._maxCanvasSize,w=this.getPixelRatio(),S=E*w,f=i*w;return Math.min(S>d?d/S:1,f>_?_/f:1)*w}getPixelRatio(){var E;return null!==(E=this._overridePixelRatio)&&void 0!==E?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(ft.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(E){return this._cooperativeGestures=E,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(E){return this.transform.locationPoint(v.LngLat.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(v.Point.convert(E),this.terrain)}isMoving(){var E;return this._moving||(null===(E=this.handlers)||void 0===E?void 0:E.isMoving())}isZooming(){var E;return this._zooming||(null===(E=this.handlers)||void 0===E?void 0:E.isZooming())}isRotating(){var E;return this._rotating||(null===(E=this.handlers)||void 0===E?void 0:E.isRotating())}_createDelegatedListener(E,i,d){if("mouseenter"===E||"mouseover"===E){let _=!1;return{layer:i,listener:d,delegates:{mousemove:S=>{const f=this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[];f.length?_||(_=!0,d.call(this,new $r(E,this,S.originalEvent,{features:f}))):_=!1},mouseout:()=>{_=!1}}}}if("mouseleave"===E||"mouseout"===E){let _=!1;return{layer:i,listener:d,delegates:{mousemove:f=>{(this.getLayer(i)?this.queryRenderedFeatures(f.point,{layers:[i]}):[]).length?_=!0:_&&(_=!1,d.call(this,new $r(E,this,f.originalEvent)))},mouseout:f=>{_&&(_=!1,d.call(this,new $r(E,this,f.originalEvent)))}}}}{const _=w=>{const S=this.getLayer(i)?this.queryRenderedFeatures(w.point,{layers:[i]}):[];S.length&&(w.features=S,d.call(this,w),delete w.features)};return{layer:i,listener:d,delegates:{[E]:_}}}}on(E,i,d){if(void 0===d)return super.on(E,i);const _=this._createDelegatedListener(E,i,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(_);for(const w in _.delegates)this.on(w,_.delegates[w]);return this}once(E,i,d){if(void 0===d)return super.once(E,i);const _=this._createDelegatedListener(E,i,d);for(const w in _.delegates)this.once(w,_.delegates[w]);return this}off(E,i,d){return void 0===d?super.off(E,i):(this._delegatedListeners&&this._delegatedListeners[E]&&(_=>{const w=this._delegatedListeners[E];for(let S=0;S<w.length;S++){const f=w[S];if(f.layer===i&&f.listener===d){for(const b in f.delegates)this.off(b,f.delegates[b]);return w.splice(S,1),this}}})(),this)}queryRenderedFeatures(E,i){if(!this.style)return[];let d;const _=E instanceof v.Point||Array.isArray(E),w=_?E:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(_?{}:E)||{},w instanceof v.Point||"number"==typeof w[0])d=[v.Point.convert(w)];else{const S=v.Point.convert(w[0]),f=v.Point.convert(w[1]);d=[S,new v.Point(f.x,S.y),f,new v.Point(S.x,f.y),S]}return this.style.queryRenderedFeatures(d,i,this.transform)}querySourceFeatures(E,i){return this.style.querySourceFeatures(E,i)}setStyle(E,i){return!1!==(i=v.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(E,i))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const i=this._locale[E];if(null==i)throw new Error(`Missing UI string '${E}'`);return i}_updateStyle(E,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(E,i));const d=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new hr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof E?this.style.loadURL(E,i,d):this.style.loadJSON(E,i,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,i){if("string"==typeof E){const d=this._requestManager.transformRequest(E,Xe.Style);v.getJSON(d,(_,w)=>{_?this.fire(new v.ErrorEvent(_)):w&&this._updateDiff(w,i)})}else"object"==typeof E&&this._updateDiff(E,i)}_updateDiff(E,i){try{this.style.setState(E,i)&&this._update(!0)}catch(d){v.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(E,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():v.warnOnce("There is no style added to the map.")}addSource(E,i){return this._lazyInitEmptyStyle(),this.style.addSource(E,i),this._update(!0)}isSourceLoaded(E){const i=this.style&&this.style.sourceCaches[E];if(void 0!==i)return i.loaded();this.fire(new v.ErrorEvent(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){const i=this.style.sourceCaches[E.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);for(const d in this.style._layers){const _=this.style._layers[d];"hillshade"===_.type&&_.source===E.source&&v.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Yl(this.painter,i,E),this.painter.renderToTexture=new al(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{"style"===d.dataType?this.terrain.sourceCache.freeRtt():"source"===d.dataType&&d.tile&&(d.sourceId!==E.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new v.Event("terrain",{terrain:E})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const i in E){const d=E[i]._tiles;for(const _ in d){const w=d[_];if("loaded"!==w.state&&"errored"!==w.state)return!1}}return!0}addSourceType(E,i,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,i,d)}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,i,d={}){const{pixelRatio:_=1,sdf:w=!1,stretchX:S,stretchY:f,content:b}=d;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||v.isImageBitmap(i))){if(void 0===i.width||void 0===i.height)return this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:y,height:D,data:k}=i,R=i;return this.style.addImage(E,{data:new v.RGBAImage({width:y,height:D},new Uint8Array(k)),pixelRatio:_,stretchX:S,stretchY:f,content:b,sdf:w,version:0,userImage:R}),R.onAdd&&R.onAdd(this,E),this}}{const{width:y,height:D,data:k}=v.browser.getImageData(i);this.style.addImage(E,{data:new v.RGBAImage({width:y,height:D},k),pixelRatio:_,stretchX:S,stretchY:f,content:b,sdf:w,version:0})}}updateImage(E,i){const d=this.style.getImage(E);if(!d)return this.fire(new v.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=i instanceof HTMLImageElement||v.isImageBitmap(i)?v.browser.getImageData(i):i,{width:w,height:S,data:f}=_;if(void 0===w||void 0===S)return this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==d.data.width||S!==d.data.height)return this.fire(new v.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const b=!(i instanceof HTMLImageElement||v.isImageBitmap(i));return d.data.replace(f,b),this.style.updateImage(E,d),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new v.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E,i){et.getImage(this._requestManager.transformRequest(E,Xe.Image),i)}listImages(){return this.style.listImages()}addLayer(E,i){return this._lazyInitEmptyStyle(),this.style.addLayer(E,i),this._update(!0)}moveLayer(E,i){return this.style.moveLayer(E,i),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}setLayerZoomRange(E,i,d){return this.style.setLayerZoomRange(E,i,d),this._update(!0)}setFilter(E,i,d={}){return this.style.setFilter(E,i,d),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,i,d,_={}){return this.style.setPaintProperty(E,i,d,_),this._update(!0)}getPaintProperty(E,i){return this.style.getPaintProperty(E,i)}setLayoutProperty(E,i,d,_={}){return this.style.setLayoutProperty(E,i,d,_),this._update(!0)}getLayoutProperty(E,i){return this.style.getLayoutProperty(E,i)}setGlyphs(E,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,i,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,i,d,_=>{_||this._update(!0)}),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,i,d=>{d||this._update(!0)}),this}setLight(E,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(E,i){return this.style.setFeatureState(E,i),this._update()}removeFeatureState(E,i){return this.style.removeFeatureState(E,i),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,i=0;return this._container&&(E=this._container.clientWidth||400,i=this._container.clientHeight||300),[E,i]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map");const i=this._canvasContainer=ne.create("div","maplibregl-canvas-container",E);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=ne.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),_=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],_);const w=this._controlContainer=ne.create("div","maplibregl-control-container",E),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(f=>{S[f]=ne.create("div",`maplibregl-ctrl-${f} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=ne.create("div","maplibregl-cooperative-gesture-screen",this._container);let E="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(E="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${E}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){ne.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(E,i,d){this._canvas.width=Math.floor(d*E),this._canvas.height=Math.floor(d*i),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",_=>{i={requestedAttributes:E},_&&(i.statusMessage=_.statusMessage,i.type=_.type)},{once:!0});const d=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!d){const _="Failed to initialize WebGL";throw i?(i.message=_,new Error(JSON.stringify(i))):new Error(_)}this.painter=new Cr(d,this.transform),Ge.testSupport(d)}_onCooperativeGesture(E,i,d){return!i&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const w=this.transform.zoom,S=v.browser.now();this.style.zoomHistory.update(w,S);const f=new v.EvaluationParameters(w,{now:S,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),b=f.crossFadingFactor();1===b&&b===this._crossFadingFactor||(d=!0,this._crossFadingFactor=b),this.style.update(f)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new v.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,v.PerformanceUtils.mark(v.PerformanceMarkers.load),this.fire(new v.Event("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const _=this._sourcesDirty||this._styleDirty||this._placementDirty;return _||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new v.Event("idle")),!this._loaded||this._fullyLoaded||_||(this._fullyLoaded=!0,v.PerformanceUtils.mark(v.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),et.removeThrottleControl(this._imageQueueHandle),null===(E=this._resizeObserver)||void 0===E||E.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),ne.remove(this._canvasContainer),ne.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),v.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new v.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=v.browser.frame(E=>{v.PerformanceUtils.frame(E),this._frame=null,this._render(E)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return"3.2.1"}getCameraTargetElevation(){return this.transform.elevation}},Jn.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{const i=this._map.getZoom(),d=i===this._map.getMaxZoom(),_=i===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,d)=>{const _=this._map._getUIString(`NavigationControl.${d}`);i.title=_,i.setAttribute("aria-label",_)},this.options=v.extend({},Io,E),this._container=ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),ne.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),ne.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=ne.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new us(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){ne.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,i){const d=ne.create("button",E,this._container);return d.type="button",d.addEventListener("click",i),d}},Jn.GeolocateControl=class extends v.Evented{constructor(E){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new v.Event("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(i),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new v.Event("geolocate",i)),this._finish()}},this._updateCamera=i=>{const d=new v.LngLat(i.coords.longitude,i.coords.latitude),_=i.coords.accuracy,w=this._map.getBearing(),S=v.extend({bearing:w},this.options.fitBoundsOptions),f=ft.fromLngLat(d,_);this._map.fitBounds(f,S,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const d=new v.LngLat(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(1===i.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===i.code&&Ia)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new v.Event("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=ne.create("button","maplibregl-ctrl-geolocate",this._container),ne.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===i){v.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ne.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Sl({element:this._dotElement}),this._circleElement=ne.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Sl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||"ACTIVE_LOCK"!==this._watchState||d.originalEvent&&"resize"===d.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new v.Event("trackuserlocationend")))})}},this.options=v.extend({},Qc,E)}onAdd(E){return this._map=E,this._container=ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,d=!1){void 0===ta||d?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(_=>{ta="denied"!==_.state,i(ta)}).catch(()=>{ta=!!window.navigator.geolocation,i(ta)}):(ta=!!window.navigator.geolocation,i(ta)):i(ta)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),ne.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ll=0,Ia=!1}_isOutOfMapMaxBounds(E){const i=this._map.getMaxBounds(),d=E.coords;return i&&(d.longitude<i.getWest()||d.longitude>i.getEast()||d.latitude<i.getSouth()||d.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const E=this._map.getBounds(),i=E.getSouthEast(),d=E.getNorthEast(),_=i.distanceTo(d),w=Math.ceil(this._accuracy/(_/this._map._container.clientHeight)*2);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}trigger(){if(!this._setup)return v.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new v.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ll--,Ia=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new v.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new v.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ll++,ll>1?(E={maximumAge:6e5,timeout:0},Ia=!0):(E=this.options.positionOptions,Ia=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Jn.AttributionControl=wt,Jn.LogoControl=pi,Jn.ScaleControl=class{constructor(E){this._onMove=()=>{Tl(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Tl(this._map,this._container,this.options)},this.options=v.extend({},Kl,E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=ne.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){ne.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Jn.FullscreenControl=class extends v.Evented{constructor(E={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:v.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){ne.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const E=this._fullscreenButton=ne.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);ne.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new v.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new v.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Jn.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=E}onAdd(E){return this._map=E,this._container=ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=ne.create("button","maplibregl-ctrl-terrain",this._container),ne.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){ne.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Jn.Popup=class extends v.Evented{constructor(E){super(),this.remove=()=>(this._content&&ne.remove(this._content),this._container&&(ne.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new v.Event("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=ne.create("div","maplibregl-popup",this._map.getContainer()),this._tip=ne.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const f of this.options.className.split(" "))this._container.classList.add(f);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=xs(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const d=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let _=this.options.anchor;const w=Al(this.options.offset);if(!_){const f=this._container.offsetWidth,b=this._container.offsetHeight;let y;y=d.y+w.bottom.y<b?["top"]:d.y>this._map.transform.height-b?["bottom"]:[],d.x<f/2?y.push("left"):d.x>this._map.transform.width-f/2&&y.push("right"),_=0===y.length?"bottom":y.join("-")}const S=d.add(w[_]).round();ne.setTransform(this._container,`${$s[_]} translate(${S.x}px,${S.y}px)`),pa(this._container,_,"popup")},this._onClose=()=>{this.remove()},this.options=v.extend(Object.create(Xl),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new v.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=v.LngLat.convert(E),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const i=document.createDocumentFragment(),d=document.createElement("body");let _;for(d.innerHTML=E;_=d.firstChild,_;)i.appendChild(_);return this.setDOMContent(i)}getMaxWidth(){var E;return null===(E=this._container)||void 0===E?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=ne.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){this._container&&this._container.classList.add(E)}removeClassName(E){this._container&&this._container.classList.remove(E)}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}_createCloseButton(){this.options.closeButton&&(this._closeButton=ne.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(Il);E&&E.focus()}},Jn.Marker=Sl,Jn.Style=hr,Jn.LngLat=v.LngLat,Jn.LngLatBounds=ft,Jn.Point=v.Point,Jn.MercatorCoordinate=v.MercatorCoordinate,Jn.Evented=v.Evented,Jn.AJAXError=v.AJAXError,Jn.config=v.config,Jn.CanvasSource=Me,Jn.GeoJSONSource=ai,Jn.ImageSource=rt,Jn.RasterDEMTileSource=Ct,Jn.RasterTileSource=ei,Jn.VectorTileSource=Vt,Jn.VideoSource=dt,Jn.setRTLTextPlugin=v.setRTLTextPlugin,Jn.getRTLTextPluginStatus=v.getRTLTextPluginStatus,Jn.prewarm=function(){ke().acquire(Qt)},Jn.clearPrewarmedResources=function(){const E=Se;E&&(E.isPreloaded()&&1===E.numActive()?(E.release(Qt),Se=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},uc.extend(Jn,{isSafari:v.isSafari,getPerformanceMetrics:v.PerformanceUtils.getPerformanceMetrics}),Jn}),C}()},6825:(gi,mt,H)=>{"use strict";H.d(mt,{IO:()=>lt,LC:()=>l,SB:()=>qe,X$:()=>v,ZE:()=>ni,ZN:()=>jt,_j:()=>C,eR:()=>it,jt:()=>He,k1:()=>Ti,l3:()=>ae,oB:()=>Pe,pV:()=>et,vP:()=>Ge});class C{}class l{}const ae="*";function v(qt,Ne){return{type:7,name:qt,definitions:Ne,options:{}}}function He(qt,Ne=null){return{type:4,styles:Ne,timings:qt}}function Ge(qt,Ne=null){return{type:2,steps:qt,options:Ne}}function Pe(qt){return{type:6,styles:qt,offset:null}}function qe(qt,Ne,je){return{type:0,name:qt,styles:Ne,options:je}}function it(qt,Ne,je=null){return{type:1,expr:qt,animation:Ne,options:je}}function et(qt=null){return{type:9,options:qt}}function lt(qt,Ne,je=null){return{type:11,selector:qt,animation:Ne,options:je}}class jt{constructor(Ne=0,je=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ne+je}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ne=>Ne()),this._onDoneFns=[])}onStart(Ne){this._originalOnStartFns.push(Ne),this._onStartFns.push(Ne)}onDone(Ne){this._originalOnDoneFns.push(Ne),this._onDoneFns.push(Ne)}onDestroy(Ne){this._onDestroyFns.push(Ne)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ne=>Ne()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ne=>Ne()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ne){this._position=this.totalTime?Ne*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ne){const je="start"==Ne?this._onStartFns:this._onDoneFns;je.forEach(Oe=>Oe()),je.length=0}}class ni{constructor(Ne){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ne;let je=0,Oe=0,Ft=0;const Pt=this.players.length;0==Pt?queueMicrotask(()=>this._onFinish()):this.players.forEach(Nt=>{Nt.onDone(()=>{++je==Pt&&this._onFinish()}),Nt.onDestroy(()=>{++Oe==Pt&&this._onDestroy()}),Nt.onStart(()=>{++Ft==Pt&&this._onStart()})}),this.totalTime=this.players.reduce((Nt,fi)=>Math.max(Nt,fi.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ne=>Ne()),this._onDoneFns=[])}init(){this.players.forEach(Ne=>Ne.init())}onStart(Ne){this._onStartFns.push(Ne)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ne=>Ne()),this._onStartFns=[])}onDone(Ne){this._onDoneFns.push(Ne)}onDestroy(Ne){this._onDestroyFns.push(Ne)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ne=>Ne.play())}pause(){this.players.forEach(Ne=>Ne.pause())}restart(){this.players.forEach(Ne=>Ne.restart())}finish(){this._onFinish(),this.players.forEach(Ne=>Ne.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ne=>Ne.destroy()),this._onDestroyFns.forEach(Ne=>Ne()),this._onDestroyFns=[])}reset(){this.players.forEach(Ne=>Ne.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ne){const je=Ne*this.totalTime;this.players.forEach(Oe=>{const Ft=Oe.totalTime?Math.min(1,je/Oe.totalTime):1;Oe.setPosition(Ft)})}getPosition(){const Ne=this.players.reduce((je,Oe)=>null===je||Oe.totalTime>je.totalTime?Oe:je,null);return null!=Ne?Ne.getPosition():0}beforeDestroy(){this.players.forEach(Ne=>{Ne.beforeDestroy&&Ne.beforeDestroy()})}triggerCallback(Ne){const je="start"==Ne?this._onStartFns:this._onDoneFns;je.forEach(Oe=>Oe()),je.length=0}}const Ti="!"},7849:(gi,mt,H)=>{"use strict";H.d(mt,{rt:()=>at,s1:()=>rt,$s:()=>ei,Em:()=>dt,tE:()=>Ae,qV:()=>Se,qm:()=>Qe,ic:()=>ut,Kd:()=>V,Zf:()=>_n,X6:()=>Ot,yG:()=>_i,iD:()=>Vn});var C=H(6814),l=H(5879),ae=H(2831),v=H(8645),He=H(7394),ne=H(5619),Ge=H(2096),Pe=H(6028),qe=H(9397),Ue=H(3620),it=H(2181),Le=H(7398),et=H(8180);function Xe(xe){return(0,it.h)((Te,ue)=>xe<=ue)}var lt=H(3997),bt=H(9773),jt=H(2495),ni=H(7131),Ti=H(2572),qt=H(5211),Ne=H(5592),je=H(7921);const Ft=new Set;let Pt,Nt=(()=>{class xe{constructor(ue,De){this._platform=ue,this._nonce=De,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):vi}matchMedia(ue){return(this._platform.WEBKIT||this._platform.BLINK)&&function fi(xe,Te){if(!Ft.has(xe))try{Pt||(Pt=document.createElement("style"),Te&&(Pt.nonce=Te),Pt.setAttribute("type","text/css"),document.head.appendChild(Pt)),Pt.sheet&&(Pt.sheet.insertRule(`@media ${xe} {body{ }}`,0),Ft.add(xe))}catch(ue){console.error(ue)}}(ue,this._nonce),this._matchMedia(ue)}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(ae.t4),l.LFG(l.Ojb,8))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();function vi(xe){return{matches:"all"===xe||""===xe,media:xe,addListener:()=>{},removeListener:()=>{}}}let Ri=(()=>{class xe{constructor(ue,De){this._mediaMatcher=ue,this._zone=De,this._queries=new Map,this._destroySubject=new v.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(ue){return qi((0,jt.Eq)(ue)).some(Je=>this._registerQuery(Je).mql.matches)}observe(ue){const Je=qi((0,jt.Eq)(ue)).map(Fe=>this._registerQuery(Fe).observable);let Tt=(0,Ti.a)(Je);return Tt=(0,qt.z)(Tt.pipe((0,et.q)(1)),Tt.pipe(Xe(1),(0,Ue.b)(0))),Tt.pipe((0,Le.U)(Fe=>{const Ie={matches:!1,breakpoints:{}};return Fe.forEach(({matches:Ze,query:Bt})=>{Ie.matches=Ie.matches||Ze,Ie.breakpoints[Bt]=Ze}),Ie}))}_registerQuery(ue){if(this._queries.has(ue))return this._queries.get(ue);const De=this._mediaMatcher.matchMedia(ue),Tt={observable:new Ne.y(Fe=>{const Ie=Ze=>this._zone.run(()=>Fe.next(Ze));return De.addListener(Ie),()=>{De.removeListener(Ie)}}).pipe((0,je.O)(De),(0,Le.U)(({matches:Fe})=>({query:ue,matches:Fe})),(0,bt.R)(this._destroySubject)),mql:De};return this._queries.set(ue,Tt),Tt}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(Nt),l.LFG(l.R0b))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();function qi(xe){return xe.map(Te=>Te.split(",")).reduce((Te,ue)=>Te.concat(ue)).map(Te=>Te.trim())}const Hn=" ";function _n(xe,Te,ue){const De=Sn(xe,Te);De.some(Je=>Je.trim()==ue.trim())||(De.push(ue.trim()),xe.setAttribute(Te,De.join(Hn)))}function Vn(xe,Te,ue){const Je=Sn(xe,Te).filter(Tt=>Tt!=ue.trim());Je.length?xe.setAttribute(Te,Je.join(Hn)):xe.removeAttribute(Te)}function Sn(xe,Te){return(xe.getAttribute(Te)||"").match(/\S+/g)||[]}const ft="cdk-describedby-message",Rt="cdk-describedby-host";let Vt=0,ei=(()=>{class xe{constructor(ue,De){this._platform=De,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+Vt++,this._document=ue,this._id=(0,l.f3M)(l.AFp)+"-"+Vt++}describe(ue,De,Je){if(!this._canBeDescribed(ue,De))return;const Tt=Ct(De,Je);"string"!=typeof De?(ai(De,this._id),this._messageRegistry.set(Tt,{messageElement:De,referenceCount:0})):this._messageRegistry.has(Tt)||this._createMessageElement(De,Je),this._isElementDescribedByMessage(ue,Tt)||this._addMessageReference(ue,Tt)}removeDescription(ue,De,Je){if(!De||!this._isElementNode(ue))return;const Tt=Ct(De,Je);if(this._isElementDescribedByMessage(ue,Tt)&&this._removeMessageReference(ue,Tt),"string"==typeof De){const Fe=this._messageRegistry.get(Tt);Fe&&0===Fe.referenceCount&&this._deleteMessageElement(Tt)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const ue=this._document.querySelectorAll(`[${Rt}="${this._id}"]`);for(let De=0;De<ue.length;De++)this._removeCdkDescribedByReferenceIds(ue[De]),ue[De].removeAttribute(Rt);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(ue,De){const Je=this._document.createElement("div");ai(Je,this._id),Je.textContent=ue,De&&Je.setAttribute("role",De),this._createMessagesContainer(),this._messagesContainer.appendChild(Je),this._messageRegistry.set(Ct(ue,De),{messageElement:Je,referenceCount:0})}_deleteMessageElement(ue){this._messageRegistry.get(ue)?.messageElement?.remove(),this._messageRegistry.delete(ue)}_createMessagesContainer(){if(this._messagesContainer)return;const ue="cdk-describedby-message-container",De=this._document.querySelectorAll(`.${ue}[platform="server"]`);for(let Tt=0;Tt<De.length;Tt++)De[Tt].remove();const Je=this._document.createElement("div");Je.style.visibility="hidden",Je.classList.add(ue),Je.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&Je.setAttribute("platform","server"),this._document.body.appendChild(Je),this._messagesContainer=Je}_removeCdkDescribedByReferenceIds(ue){const De=Sn(ue,"aria-describedby").filter(Je=>0!=Je.indexOf(ft));ue.setAttribute("aria-describedby",De.join(" "))}_addMessageReference(ue,De){const Je=this._messageRegistry.get(De);_n(ue,"aria-describedby",Je.messageElement.id),ue.setAttribute(Rt,this._id),Je.referenceCount++}_removeMessageReference(ue,De){const Je=this._messageRegistry.get(De);Je.referenceCount--,Vn(ue,"aria-describedby",Je.messageElement.id),ue.removeAttribute(Rt)}_isElementDescribedByMessage(ue,De){const Je=Sn(ue,"aria-describedby"),Tt=this._messageRegistry.get(De),Fe=Tt&&Tt.messageElement.id;return!!Fe&&-1!=Je.indexOf(Fe)}_canBeDescribed(ue,De){if(!this._isElementNode(ue))return!1;if(De&&"object"==typeof De)return!0;const Je=null==De?"":`${De}`.trim(),Tt=ue.getAttribute("aria-label");return!(!Je||Tt&&Tt.trim()===Je)}_isElementNode(ue){return ue.nodeType===this._document.ELEMENT_NODE}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(C.K0),l.LFG(ae.t4))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();function Ct(xe,Te){return"string"==typeof xe?`${Te||""}/${xe}`:xe}function ai(xe,Te){xe.id||(xe.id=`${ft}-${Te}-${Vt++}`)}class ze{constructor(Te){this._items=Te,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new v.x,this._typeaheadSubscription=He.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=ue=>ue.disabled,this._pressedLetters=[],this.tabOut=new v.x,this.change=new v.x,Te instanceof l.n_E&&(this._itemChangesSubscription=Te.changes.subscribe(ue=>{if(this._activeItem){const Je=ue.toArray().indexOf(this._activeItem);Je>-1&&Je!==this._activeItemIndex&&(this._activeItemIndex=Je)}}))}skipPredicate(Te){return this._skipPredicateFn=Te,this}withWrap(Te=!0){return this._wrap=Te,this}withVerticalOrientation(Te=!0){return this._vertical=Te,this}withHorizontalOrientation(Te){return this._horizontal=Te,this}withAllowedModifierKeys(Te){return this._allowedModifierKeys=Te,this}withTypeAhead(Te=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,qe.b)(ue=>this._pressedLetters.push(ue)),(0,Ue.b)(Te),(0,it.h)(()=>this._pressedLetters.length>0),(0,Le.U)(()=>this._pressedLetters.join(""))).subscribe(ue=>{const De=this._getItemsArray();for(let Je=1;Je<De.length+1;Je++){const Tt=(this._activeItemIndex+Je)%De.length,Fe=De[Tt];if(!this._skipPredicateFn(Fe)&&0===Fe.getLabel().toUpperCase().trim().indexOf(ue)){this.setActiveItem(Tt);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(Te=!0){return this._homeAndEnd=Te,this}withPageUpDown(Te=!0,ue=10){return this._pageUpAndDown={enabled:Te,delta:ue},this}setActiveItem(Te){const ue=this._activeItem;this.updateActiveItem(Te),this._activeItem!==ue&&this.change.next(this._activeItemIndex)}onKeydown(Te){const ue=Te.keyCode,Je=["altKey","ctrlKey","metaKey","shiftKey"].every(Tt=>!Te[Tt]||this._allowedModifierKeys.indexOf(Tt)>-1);switch(ue){case Pe.Mf:return void this.tabOut.next();case Pe.JH:if(this._vertical&&Je){this.setNextItemActive();break}return;case Pe.LH:if(this._vertical&&Je){this.setPreviousItemActive();break}return;case Pe.SV:if(this._horizontal&&Je){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Pe.oh:if(this._horizontal&&Je){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Pe.Sd:if(this._homeAndEnd&&Je){this.setFirstItemActive();break}return;case Pe.uR:if(this._homeAndEnd&&Je){this.setLastItemActive();break}return;case Pe.Ku:if(this._pageUpAndDown.enabled&&Je){const Tt=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(Tt>0?Tt:0,1);break}return;case Pe.VM:if(this._pageUpAndDown.enabled&&Je){const Tt=this._activeItemIndex+this._pageUpAndDown.delta,Fe=this._getItemsArray().length;this._setActiveItemByIndex(Tt<Fe?Tt:Fe-1,-1);break}return;default:return void((Je||(0,Pe.Vb)(Te,"shiftKey"))&&(Te.key&&1===Te.key.length?this._letterKeyStream.next(Te.key.toLocaleUpperCase()):(ue>=Pe.A&&ue<=Pe.Z||ue>=Pe.xE&&ue<=Pe.aO)&&this._letterKeyStream.next(String.fromCharCode(ue))))}this._pressedLetters=[],Te.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Te){const ue=this._getItemsArray(),De="number"==typeof Te?Te:ue.indexOf(Te);this._activeItem=ue[De]??null,this._activeItemIndex=De}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(Te){this._wrap?this._setActiveInWrapMode(Te):this._setActiveInDefaultMode(Te)}_setActiveInWrapMode(Te){const ue=this._getItemsArray();for(let De=1;De<=ue.length;De++){const Je=(this._activeItemIndex+Te*De+ue.length)%ue.length;if(!this._skipPredicateFn(ue[Je]))return void this.setActiveItem(Je)}}_setActiveInDefaultMode(Te){this._setActiveItemByIndex(this._activeItemIndex+Te,Te)}_setActiveItemByIndex(Te,ue){const De=this._getItemsArray();if(De[Te]){for(;this._skipPredicateFn(De[Te]);)if(!De[Te+=ue])return;this.setActiveItem(Te)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class rt extends ze{setActiveItem(Te){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Te),this.activeItem&&this.activeItem.setActiveStyles()}}class dt extends ze{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Te){return this._origin=Te,this}setActiveItem(Te){super.setActiveItem(Te),this.activeItem&&this.activeItem.focus(this._origin)}}let ut=(()=>{class xe{constructor(ue){this._platform=ue}isDisabled(ue){return ue.hasAttribute("disabled")}isVisible(ue){return function Ut(xe){return!!(xe.offsetWidth||xe.offsetHeight||"function"==typeof xe.getClientRects&&xe.getClientRects().length)}(ue)&&"visible"===getComputedStyle(ue).visibility}isTabbable(ue){if(!this._platform.isBrowser)return!1;const De=function Yt(xe){try{return xe.frameElement}catch{return null}}(function pt(xe){return xe.ownerDocument&&xe.ownerDocument.defaultView||window}(ue));if(De&&(-1===Fn(De)||!this.isVisible(De)))return!1;let Je=ue.nodeName.toLowerCase(),Tt=Fn(ue);return ue.hasAttribute("contenteditable")?-1!==Tt:!("iframe"===Je||"object"===Je||this._platform.WEBKIT&&this._platform.IOS&&!function bn(xe){let Te=xe.nodeName.toLowerCase(),ue="input"===Te&&xe.type;return"text"===ue||"password"===ue||"select"===Te||"textarea"===Te}(ue))&&("audio"===Je?!!ue.hasAttribute("controls")&&-1!==Tt:"video"===Je?-1!==Tt&&(null!==Tt||this._platform.FIREFOX||ue.hasAttribute("controls")):ue.tabIndex>=0)}isFocusable(ue,De){return function Qt(xe){return!function ot(xe){return function wi(xe){return"input"==xe.nodeName.toLowerCase()}(xe)&&"hidden"==xe.type}(xe)&&(function ti(xe){let Te=xe.nodeName.toLowerCase();return"input"===Te||"select"===Te||"button"===Te||"textarea"===Te}(xe)||function Dt(xe){return function yn(xe){return"a"==xe.nodeName.toLowerCase()}(xe)&&xe.hasAttribute("href")}(xe)||xe.hasAttribute("contenteditable")||Zi(xe))}(ue)&&!this.isDisabled(ue)&&(De?.ignoreVisibility||this.isVisible(ue))}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(ae.t4))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();function Zi(xe){if(!xe.hasAttribute("tabindex")||void 0===xe.tabIndex)return!1;let Te=xe.getAttribute("tabindex");return!(!Te||isNaN(parseInt(Te,10)))}function Fn(xe){if(!Zi(xe))return null;const Te=parseInt(xe.getAttribute("tabindex")||"",10);return isNaN(Te)?-1:Te}class ce{get enabled(){return this._enabled}set enabled(Te){this._enabled=Te,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Te,this._startAnchor),this._toggleAnchorTabIndex(Te,this._endAnchor))}constructor(Te,ue,De,Je,Tt=!1){this._element=Te,this._checker=ue,this._ngZone=De,this._document=Je,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Tt||this.attachAnchors()}destroy(){const Te=this._startAnchor,ue=this._endAnchor;Te&&(Te.removeEventListener("focus",this.startAnchorListener),Te.remove()),ue&&(ue.removeEventListener("focus",this.endAnchorListener),ue.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Te){return new Promise(ue=>{this._executeOnStable(()=>ue(this.focusInitialElement(Te)))})}focusFirstTabbableElementWhenReady(Te){return new Promise(ue=>{this._executeOnStable(()=>ue(this.focusFirstTabbableElement(Te)))})}focusLastTabbableElementWhenReady(Te){return new Promise(ue=>{this._executeOnStable(()=>ue(this.focusLastTabbableElement(Te)))})}_getRegionBoundary(Te){const ue=this._element.querySelectorAll(`[cdk-focus-region-${Te}], [cdkFocusRegion${Te}], [cdk-focus-${Te}]`);return"start"==Te?ue.length?ue[0]:this._getFirstTabbableElement(this._element):ue.length?ue[ue.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Te){const ue=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(ue){if(!this._checker.isFocusable(ue)){const De=this._getFirstTabbableElement(ue);return De?.focus(Te),!!De}return ue.focus(Te),!0}return this.focusFirstTabbableElement(Te)}focusFirstTabbableElement(Te){const ue=this._getRegionBoundary("start");return ue&&ue.focus(Te),!!ue}focusLastTabbableElement(Te){const ue=this._getRegionBoundary("end");return ue&&ue.focus(Te),!!ue}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Te){if(this._checker.isFocusable(Te)&&this._checker.isTabbable(Te))return Te;const ue=Te.children;for(let De=0;De<ue.length;De++){const Je=ue[De].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(ue[De]):null;if(Je)return Je}return null}_getLastTabbableElement(Te){if(this._checker.isFocusable(Te)&&this._checker.isTabbable(Te))return Te;const ue=Te.children;for(let De=ue.length-1;De>=0;De--){const Je=ue[De].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(ue[De]):null;if(Je)return Je}return null}_createAnchor(){const Te=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Te),Te.classList.add("cdk-visually-hidden"),Te.classList.add("cdk-focus-trap-anchor"),Te.setAttribute("aria-hidden","true"),Te}_toggleAnchorTabIndex(Te,ue){Te?ue.setAttribute("tabindex","0"):ue.removeAttribute("tabindex")}toggleAnchors(Te){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Te,this._startAnchor),this._toggleAnchorTabIndex(Te,this._endAnchor))}_executeOnStable(Te){this._ngZone.isStable?Te():this._ngZone.onStable.pipe((0,et.q)(1)).subscribe(Te)}}let Se=(()=>{class xe{constructor(ue,De,Je){this._checker=ue,this._ngZone=De,this._document=Je}create(ue,De=!1){return new ce(ue,this._checker,this._ngZone,this._document,De)}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(ut),l.LFG(l.R0b),l.LFG(C.K0))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();function Ot(xe){return 0===xe.buttons||0===xe.offsetX&&0===xe.offsetY}function _i(xe){const Te=xe.touches&&xe.touches[0]||xe.changedTouches&&xe.changedTouches[0];return!(!Te||-1!==Te.identifier||null!=Te.radiusX&&1!==Te.radiusX||null!=Te.radiusY&&1!==Te.radiusY)}const hi=new l.OlP("cdk-input-modality-detector-options"),Qi={ignoreKeys:[Pe.zL,Pe.jx,Pe.b2,Pe.MW,Pe.JU]},Ji=(0,ae.i$)({passive:!0,capture:!0});let Vi=(()=>{class xe{get mostRecentModality(){return this._modality.value}constructor(ue,De,Je,Tt){this._platform=ue,this._mostRecentTarget=null,this._modality=new ne.X(null),this._lastTouchMs=0,this._onKeydown=Fe=>{this._options?.ignoreKeys?.some(Ie=>Ie===Fe.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,ae.sA)(Fe))},this._onMousedown=Fe=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ot(Fe)?"keyboard":"mouse"),this._mostRecentTarget=(0,ae.sA)(Fe))},this._onTouchstart=Fe=>{_i(Fe)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,ae.sA)(Fe))},this._options={...Qi,...Tt},this.modalityDetected=this._modality.pipe(Xe(1)),this.modalityChanged=this.modalityDetected.pipe((0,lt.x)()),ue.isBrowser&&De.runOutsideAngular(()=>{Je.addEventListener("keydown",this._onKeydown,Ji),Je.addEventListener("mousedown",this._onMousedown,Ji),Je.addEventListener("touchstart",this._onTouchstart,Ji)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ji),document.removeEventListener("mousedown",this._onMousedown,Ji),document.removeEventListener("touchstart",this._onTouchstart,Ji))}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(ae.t4),l.LFG(l.R0b),l.LFG(C.K0),l.LFG(hi,8))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();const zt=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function li(){return null}}),vt=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let q=0,V=(()=>{class xe{constructor(ue,De,Je,Tt){this._ngZone=De,this._defaultOptions=Tt,this._document=Je,this._liveElement=ue||this._createLiveElement()}announce(ue,...De){const Je=this._defaultOptions;let Tt,Fe;return 1===De.length&&"number"==typeof De[0]?Fe=De[0]:[Tt,Fe]=De,this.clear(),clearTimeout(this._previousTimeout),Tt||(Tt=Je&&Je.politeness?Je.politeness:"polite"),null==Fe&&Je&&(Fe=Je.duration),this._liveElement.setAttribute("aria-live",Tt),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(Ie=>this._currentResolve=Ie)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=ue,"number"==typeof Fe&&(this._previousTimeout=setTimeout(()=>this.clear(),Fe)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const ue="cdk-live-announcer-element",De=this._document.getElementsByClassName(ue),Je=this._document.createElement("div");for(let Tt=0;Tt<De.length;Tt++)De[Tt].remove();return Je.classList.add(ue),Je.classList.add("cdk-visually-hidden"),Je.setAttribute("aria-atomic","true"),Je.setAttribute("aria-live","polite"),Je.id="cdk-live-announcer-"+q++,this._document.body.appendChild(Je),Je}_exposeAnnouncerToModals(ue){const De=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let Je=0;Je<De.length;Je++){const Tt=De[Je],Fe=Tt.getAttribute("aria-owns");Fe?-1===Fe.indexOf(ue)&&Tt.setAttribute("aria-owns",Fe+" "+ue):Tt.setAttribute("aria-owns",ue)}}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(zt,8),l.LFG(l.R0b),l.LFG(C.K0),l.LFG(vt,8))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();const ie=new l.OlP("cdk-focus-monitor-default-options"),ge=(0,ae.i$)({passive:!0,capture:!0});let Ae=(()=>{class xe{constructor(ue,De,Je,Tt,Fe){this._ngZone=ue,this._platform=De,this._inputModalityDetector=Je,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new v.x,this._rootNodeFocusAndBlurListener=Ie=>{for(let Bt=(0,ae.sA)(Ie);Bt;Bt=Bt.parentElement)"focus"===Ie.type?this._onFocus(Ie,Bt):this._onBlur(Ie,Bt)},this._document=Tt,this._detectionMode=Fe?.detectionMode||0}monitor(ue,De=!1){const Je=(0,jt.fI)(ue);if(!this._platform.isBrowser||1!==Je.nodeType)return(0,Ge.of)();const Tt=(0,ae.kV)(Je)||this._getDocument(),Fe=this._elementInfo.get(Je);if(Fe)return De&&(Fe.checkChildren=!0),Fe.subject;const Ie={checkChildren:De,subject:new v.x,rootNode:Tt};return this._elementInfo.set(Je,Ie),this._registerGlobalListeners(Ie),Ie.subject}stopMonitoring(ue){const De=(0,jt.fI)(ue),Je=this._elementInfo.get(De);Je&&(Je.subject.complete(),this._setClasses(De),this._elementInfo.delete(De),this._removeGlobalListeners(Je))}focusVia(ue,De,Je){const Tt=(0,jt.fI)(ue);Tt===this._getDocument().activeElement?this._getClosestElementsInfo(Tt).forEach(([Ie,Ze])=>this._originChanged(Ie,De,Ze)):(this._setOrigin(De),"function"==typeof Tt.focus&&Tt.focus(Je))}ngOnDestroy(){this._elementInfo.forEach((ue,De)=>this.stopMonitoring(De))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(ue){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(ue)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:ue&&this._isLastInteractionFromInputLabel(ue)?"mouse":"program"}_shouldBeAttributedToTouch(ue){return 1===this._detectionMode||!!ue?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(ue,De){ue.classList.toggle("cdk-focused",!!De),ue.classList.toggle("cdk-touch-focused","touch"===De),ue.classList.toggle("cdk-keyboard-focused","keyboard"===De),ue.classList.toggle("cdk-mouse-focused","mouse"===De),ue.classList.toggle("cdk-program-focused","program"===De)}_setOrigin(ue,De=!1){this._ngZone.runOutsideAngular(()=>{this._origin=ue,this._originFromTouchInteraction="touch"===ue&&De,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(ue,De){const Je=this._elementInfo.get(De),Tt=(0,ae.sA)(ue);!Je||!Je.checkChildren&&De!==Tt||this._originChanged(De,this._getFocusOrigin(Tt),Je)}_onBlur(ue,De){const Je=this._elementInfo.get(De);!Je||Je.checkChildren&&ue.relatedTarget instanceof Node&&De.contains(ue.relatedTarget)||(this._setClasses(De),this._emitOrigin(Je,null))}_emitOrigin(ue,De){ue.subject.observers.length&&this._ngZone.run(()=>ue.subject.next(De))}_registerGlobalListeners(ue){if(!this._platform.isBrowser)return;const De=ue.rootNode,Je=this._rootNodeFocusListenerCount.get(De)||0;Je||this._ngZone.runOutsideAngular(()=>{De.addEventListener("focus",this._rootNodeFocusAndBlurListener,ge),De.addEventListener("blur",this._rootNodeFocusAndBlurListener,ge)}),this._rootNodeFocusListenerCount.set(De,Je+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,bt.R)(this._stopInputModalityDetector)).subscribe(Tt=>{this._setOrigin(Tt,!0)}))}_removeGlobalListeners(ue){const De=ue.rootNode;if(this._rootNodeFocusListenerCount.has(De)){const Je=this._rootNodeFocusListenerCount.get(De);Je>1?this._rootNodeFocusListenerCount.set(De,Je-1):(De.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ge),De.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ge),this._rootNodeFocusListenerCount.delete(De))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(ue,De,Je){this._setClasses(ue,De),this._emitOrigin(Je,De),this._lastFocusOrigin=De}_getClosestElementsInfo(ue){const De=[];return this._elementInfo.forEach((Je,Tt)=>{(Tt===ue||Je.checkChildren&&Tt.contains(ue))&&De.push([Tt,Je])}),De}_isLastInteractionFromInputLabel(ue){const{_mostRecentTarget:De,mostRecentModality:Je}=this._inputModalityDetector;if("mouse"!==Je||!De||De===ue||"INPUT"!==ue.nodeName&&"TEXTAREA"!==ue.nodeName||ue.disabled)return!1;const Tt=ue.labels;if(Tt)for(let Fe=0;Fe<Tt.length;Fe++)if(Tt[Fe].contains(De))return!0;return!1}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(l.R0b),l.LFG(ae.t4),l.LFG(Vi),l.LFG(C.K0,8),l.LFG(ie,8))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();const se="cdk-high-contrast-black-on-white",X="cdk-high-contrast-white-on-black",pe="cdk-high-contrast-active";let Qe=(()=>{class xe{constructor(ue,De){this._platform=ue,this._document=De,this._breakpointSubscription=(0,l.f3M)(Ri).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const ue=this._document.createElement("div");ue.style.backgroundColor="rgb(1,2,3)",ue.style.position="absolute",this._document.body.appendChild(ue);const De=this._document.defaultView||window,Je=De&&De.getComputedStyle?De.getComputedStyle(ue):null,Tt=(Je&&Je.backgroundColor||"").replace(/ /g,"");switch(ue.remove(),Tt){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const ue=this._document.body.classList;ue.remove(pe,se,X),this._hasCheckedHighContrastMode=!0;const De=this.getHighContrastMode();1===De?ue.add(pe,se):2===De&&ue.add(pe,X)}}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(ae.t4),l.LFG(C.K0))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})(),at=(()=>{class xe{constructor(ue){ue._applyBodyHighContrastModeCssClasses()}}return xe.\u0275fac=function(ue){return new(ue||xe)(l.LFG(Qe))},xe.\u0275mod=l.oAB({type:xe}),xe.\u0275inj=l.cJS({imports:[ni.Q8]}),xe})()},9388:(gi,mt,H)=>{"use strict";H.d(mt,{Is:()=>Ge,vT:()=>qe});var C=H(5879),l=H(6814);const ae=new C.OlP("cdk-dir-doc",{providedIn:"root",factory:function v(){return(0,C.f3M)(l.K0)}}),He=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ge=(()=>{class Ue{constructor(Le){this.value="ltr",this.change=new C.vpe,Le&&(this.value=function ne(Ue){const it=Ue?.toLowerCase()||"";return"auto"===it&&typeof navigator<"u"&&navigator?.language?He.test(navigator.language)?"rtl":"ltr":"rtl"===it?"rtl":"ltr"}((Le.body?Le.body.dir:null)||(Le.documentElement?Le.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return Ue.\u0275fac=function(Le){return new(Le||Ue)(C.LFG(ae,8))},Ue.\u0275prov=C.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})(),qe=(()=>{class Ue{}return Ue.\u0275fac=function(Le){return new(Le||Ue)},Ue.\u0275mod=C.oAB({type:Ue}),Ue.\u0275inj=C.cJS({}),Ue})()},2495:(gi,mt,H)=>{"use strict";H.d(mt,{Eq:()=>He,HM:()=>ne,Ig:()=>l,fI:()=>Ge,su:()=>ae});var C=H(5879);function l(qe){return null!=qe&&"false"!=`${qe}`}function ae(qe,Ue=0){return function v(qe){return!isNaN(parseFloat(qe))&&!isNaN(Number(qe))}(qe)?Number(qe):Ue}function He(qe){return Array.isArray(qe)?qe:[qe]}function ne(qe){return null==qe?"":"string"==typeof qe?qe:`${qe}px`}function Ge(qe){return qe instanceof C.SBq?qe.nativeElement:qe}},8337:(gi,mt,H)=>{"use strict";H.d(mt,{A8:()=>Ue,Ov:()=>Pe});var C=H(8645),l=H(5879);class Pe{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(et=!1,Xe,lt=!0,bt){this._multiple=et,this._emitChanges=lt,this.compareWith=bt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new C.x,Xe&&Xe.length&&(et?Xe.forEach(jt=>this._markSelected(jt)):this._markSelected(Xe[0]),this._selectedToEmit.length=0)}select(...et){this._verifyValueAssignment(et),et.forEach(lt=>this._markSelected(lt));const Xe=this._hasQueuedChanges();return this._emitChangeEvent(),Xe}deselect(...et){this._verifyValueAssignment(et),et.forEach(lt=>this._unmarkSelected(lt));const Xe=this._hasQueuedChanges();return this._emitChangeEvent(),Xe}setSelection(...et){this._verifyValueAssignment(et);const Xe=this.selected,lt=new Set(et);et.forEach(jt=>this._markSelected(jt)),Xe.filter(jt=>!lt.has(jt)).forEach(jt=>this._unmarkSelected(jt));const bt=this._hasQueuedChanges();return this._emitChangeEvent(),bt}toggle(et){return this.isSelected(et)?this.deselect(et):this.select(et)}clear(et=!0){this._unmarkAll();const Xe=this._hasQueuedChanges();return et&&this._emitChangeEvent(),Xe}isSelected(et){return this._selection.has(this._getConcreteValue(et))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(et){this._multiple&&this.selected&&this._selected.sort(et)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(et){et=this._getConcreteValue(et),this.isSelected(et)||(this._multiple||this._unmarkAll(),this.isSelected(et)||this._selection.add(et),this._emitChanges&&this._selectedToEmit.push(et))}_unmarkSelected(et){et=this._getConcreteValue(et),this.isSelected(et)&&(this._selection.delete(et),this._emitChanges&&this._deselectedToEmit.push(et))}_unmarkAll(){this.isEmpty()||this._selection.forEach(et=>this._unmarkSelected(et))}_verifyValueAssignment(et){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(et){if(this.compareWith){for(let Xe of this._selection)if(this.compareWith(et,Xe))return Xe;return et}return et}}let Ue=(()=>{class Le{constructor(){this._listeners=[]}notify(Xe,lt){for(let bt of this._listeners)bt(Xe,lt)}listen(Xe){return this._listeners.push(Xe),()=>{this._listeners=this._listeners.filter(lt=>Xe!==lt)}}ngOnDestroy(){this._listeners=[]}}return Le.\u0275fac=function(Xe){return new(Xe||Le)},Le.\u0275prov=l.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})()},6028:(gi,mt,H)=>{"use strict";H.d(mt,{A:()=>Vt,JH:()=>qt,JU:()=>ne,K5:()=>He,Ku:()=>et,LH:()=>ni,L_:()=>Le,MW:()=>Re,Mf:()=>ae,SV:()=>Ti,Sd:()=>bt,VM:()=>Xe,Vb:()=>mn,Z:()=>de,aO:()=>Vn,b2:()=>no,hY:()=>it,jx:()=>Ge,oh:()=>jt,uR:()=>lt,xE:()=>Pt,zL:()=>Pe});const ae=9,He=13,ne=16,Ge=17,Pe=18,it=27,Le=32,et=33,Xe=34,lt=35,bt=36,jt=37,ni=38,Ti=39,qt=40,Pt=48,Vn=57,Vt=65,de=90,Re=91,no=224;function mn(ro,...Po){return Po.length?Po.some(os=>ro[os]):ro.altKey||ro.shiftKey||ro.ctrlKey||ro.metaKey}},7131:(gi,mt,H)=>{"use strict";H.d(mt,{Q8:()=>qe,wD:()=>Pe});var C=H(2495),l=H(5879),ae=H(5592),v=H(8645),He=H(3620);let ne=(()=>{class Ue{create(Le){return typeof MutationObserver>"u"?null:new MutationObserver(Le)}}return Ue.\u0275fac=function(Le){return new(Le||Ue)},Ue.\u0275prov=l.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})(),Ge=(()=>{class Ue{constructor(Le){this._mutationObserverFactory=Le,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Le,et)=>this._cleanupObserver(et))}observe(Le){const et=(0,C.fI)(Le);return new ae.y(Xe=>{const bt=this._observeElement(et).subscribe(Xe);return()=>{bt.unsubscribe(),this._unobserveElement(et)}})}_observeElement(Le){if(this._observedElements.has(Le))this._observedElements.get(Le).count++;else{const et=new v.x,Xe=this._mutationObserverFactory.create(lt=>et.next(lt));Xe&&Xe.observe(Le,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Le,{observer:Xe,stream:et,count:1})}return this._observedElements.get(Le).stream}_unobserveElement(Le){this._observedElements.has(Le)&&(this._observedElements.get(Le).count--,this._observedElements.get(Le).count||this._cleanupObserver(Le))}_cleanupObserver(Le){if(this._observedElements.has(Le)){const{observer:et,stream:Xe}=this._observedElements.get(Le);et&&et.disconnect(),Xe.complete(),this._observedElements.delete(Le)}}}return Ue.\u0275fac=function(Le){return new(Le||Ue)(l.LFG(ne))},Ue.\u0275prov=l.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})(),Pe=(()=>{class Ue{get disabled(){return this._disabled}set disabled(Le){this._disabled=(0,C.Ig)(Le),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Le){this._debounce=(0,C.su)(Le),this._subscribe()}constructor(Le,et,Xe){this._contentObserver=Le,this._elementRef=et,this._ngZone=Xe,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Le=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Le.pipe((0,He.b)(this.debounce)):Le).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return Ue.\u0275fac=function(Le){return new(Le||Ue)(l.Y36(Ge),l.Y36(l.SBq),l.Y36(l.R0b))},Ue.\u0275dir=l.lG2({type:Ue,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Ue})(),qe=(()=>{class Ue{}return Ue.\u0275fac=function(Le){return new(Le||Ue)},Ue.\u0275mod=l.oAB({type:Ue}),Ue.\u0275inj=l.cJS({providers:[ne]}),Ue})()},3651:(gi,mt,H)=>{"use strict";H.d(mt,{pI:()=>yn,xu:()=>wi,aV:()=>ti,U8:()=>bn});var C=H(799),l=H(6814),ae=H(5879),v=H(2495),He=H(2831),ne=H(2181),Ge=H(8180),Pe=H(9773),qe=H(9360),Ue=H(8251),Le=H(9388),et=H(8484),Xe=H(8645),lt=H(7394),bt=H(3019),jt=H(6028);const ni=(0,He.Mq)();class Ti{constructor(ce,Se){this._viewportRuler=ce,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=Se}attach(){}enable(){if(this._canBeEnabled()){const ce=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=ce.style.left||"",this._previousHTMLStyles.top=ce.style.top||"",ce.style.left=(0,v.HM)(-this._previousScrollPosition.left),ce.style.top=(0,v.HM)(-this._previousScrollPosition.top),ce.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const ce=this._document.documentElement,ke=ce.style,he=this._document.body.style,de=ke.scrollBehavior||"",Re=he.scrollBehavior||"";this._isEnabled=!1,ke.left=this._previousHTMLStyles.left,ke.top=this._previousHTMLStyles.top,ce.classList.remove("cdk-global-scrollblock"),ni&&(ke.scrollBehavior=he.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ni&&(ke.scrollBehavior=de,he.scrollBehavior=Re)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const Se=this._document.body,ke=this._viewportRuler.getViewportSize();return Se.scrollHeight>ke.height||Se.scrollWidth>ke.width}}class Ne{constructor(ce,Se,ke,he){this._scrollDispatcher=ce,this._ngZone=Se,this._viewportRuler=ke,this._config=he,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(ce){this._overlayRef=ce}enable(){if(this._scrollSubscription)return;const ce=this._scrollDispatcher.scrolled(0).pipe((0,ne.h)(Se=>!Se||!this._overlayRef.overlayElement.contains(Se.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=ce.subscribe(()=>{const Se=this._viewportRuler.getViewportScrollPosition().top;Math.abs(Se-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=ce.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class je{enable(){}disable(){}attach(){}}function Oe(pt,ce){return ce.some(Se=>pt.bottom<Se.top||pt.top>Se.bottom||pt.right<Se.left||pt.left>Se.right)}function Ft(pt,ce){return ce.some(Se=>pt.top<Se.top||pt.bottom>Se.bottom||pt.left<Se.left||pt.right>Se.right)}class Pt{constructor(ce,Se,ke,he){this._scrollDispatcher=ce,this._viewportRuler=Se,this._ngZone=ke,this._config=he,this._scrollSubscription=null}attach(ce){this._overlayRef=ce}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const Se=this._overlayRef.overlayElement.getBoundingClientRect(),{width:ke,height:he}=this._viewportRuler.getViewportSize();Oe(Se,[{width:ke,height:he,bottom:he,right:ke,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Nt=(()=>{class pt{constructor(Se,ke,he,de){this._scrollDispatcher=Se,this._viewportRuler=ke,this._ngZone=he,this.noop=()=>new je,this.close=Re=>new Ne(this._scrollDispatcher,this._ngZone,this._viewportRuler,Re),this.block=()=>new Ti(this._viewportRuler,this._document),this.reposition=Re=>new Pt(this._scrollDispatcher,this._viewportRuler,this._ngZone,Re),this._document=de}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.LFG(C.mF),ae.LFG(C.rL),ae.LFG(ae.R0b),ae.LFG(l.K0))},pt.\u0275prov=ae.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})();class fi{constructor(ce){if(this.scrollStrategy=new je,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,ce){const Se=Object.keys(ce);for(const ke of Se)void 0!==ce[ke]&&(this[ke]=ce[ke])}}}class qi{constructor(ce,Se){this.connectionPair=ce,this.scrollableViewProperties=Se}}let _n=(()=>{class pt{constructor(Se){this._attachedOverlays=[],this._document=Se}ngOnDestroy(){this.detach()}add(Se){this.remove(Se),this._attachedOverlays.push(Se)}remove(Se){const ke=this._attachedOverlays.indexOf(Se);ke>-1&&this._attachedOverlays.splice(ke,1),0===this._attachedOverlays.length&&this.detach()}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.LFG(l.K0))},pt.\u0275prov=ae.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})(),Vn=(()=>{class pt extends _n{constructor(Se,ke){super(Se),this._ngZone=ke,this._keydownListener=he=>{const de=this._attachedOverlays;for(let Re=de.length-1;Re>-1;Re--)if(de[Re]._keydownEvents.observers.length>0){const xt=de[Re]._keydownEvents;this._ngZone?this._ngZone.run(()=>xt.next(he)):xt.next(he);break}}}add(Se){super.add(Se),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.LFG(l.K0),ae.LFG(ae.R0b,8))},pt.\u0275prov=ae.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})(),Sn=(()=>{class pt extends _n{constructor(Se,ke,he){super(Se),this._platform=ke,this._ngZone=he,this._cursorStyleIsSet=!1,this._pointerDownListener=de=>{this._pointerDownEventTarget=(0,He.sA)(de)},this._clickListener=de=>{const Re=(0,He.sA)(de),xt="click"===de.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Re;this._pointerDownEventTarget=null;const Xt=this._attachedOverlays.slice();for(let Ot=Xt.length-1;Ot>-1;Ot--){const _i=Xt[Ot];if(_i._outsidePointerEvents.observers.length<1||!_i.hasAttached())continue;if(_i.overlayElement.contains(Re)||_i.overlayElement.contains(xt))break;const hi=_i._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>hi.next(de)):hi.next(de)}}}add(Se){if(super.add(Se),!this._isAttached){const ke=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(ke)):this._addEventListeners(ke),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=ke.style.cursor,ke.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const Se=this._document.body;Se.removeEventListener("pointerdown",this._pointerDownListener,!0),Se.removeEventListener("click",this._clickListener,!0),Se.removeEventListener("auxclick",this._clickListener,!0),Se.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(Se.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(Se){Se.addEventListener("pointerdown",this._pointerDownListener,!0),Se.addEventListener("click",this._clickListener,!0),Se.addEventListener("auxclick",this._clickListener,!0),Se.addEventListener("contextmenu",this._clickListener,!0)}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.LFG(l.K0),ae.LFG(He.t4),ae.LFG(ae.R0b,8))},pt.\u0275prov=ae.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})(),Et=(()=>{class pt{constructor(Se,ke){this._platform=ke,this._document=Se}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Se="cdk-overlay-container";if(this._platform.isBrowser||(0,He.Oy)()){const he=this._document.querySelectorAll(`.${Se}[platform="server"], .${Se}[platform="test"]`);for(let de=0;de<he.length;de++)he[de].remove()}const ke=this._document.createElement("div");ke.classList.add(Se),(0,He.Oy)()?ke.setAttribute("platform","test"):this._platform.isBrowser||ke.setAttribute("platform","server"),this._document.body.appendChild(ke),this._containerElement=ke}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.LFG(l.K0),ae.LFG(He.t4))},pt.\u0275prov=ae.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})();class ft{constructor(ce,Se,ke,he,de,Re,xt,Xt,Ot,_i=!1){this._portalOutlet=ce,this._host=Se,this._pane=ke,this._config=he,this._ngZone=de,this._keyboardDispatcher=Re,this._document=xt,this._location=Xt,this._outsideClickDispatcher=Ot,this._animationsDisabled=_i,this._backdropElement=null,this._backdropClick=new Xe.x,this._attachments=new Xe.x,this._detachments=new Xe.x,this._locationChanges=lt.w0.EMPTY,this._backdropClickHandler=hi=>this._backdropClick.next(hi),this._backdropTransitionendHandler=hi=>{this._disposeBackdrop(hi.target)},this._keydownEvents=new Xe.x,this._outsidePointerEvents=new Xe.x,he.scrollStrategy&&(this._scrollStrategy=he.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=he.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(ce){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const Se=this._portalOutlet.attach(ce);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Ge.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof Se?.onDestroy&&Se.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),Se}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const ce=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),ce}dispose(){const ce=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,ce&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(ce){ce!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=ce,this.hasAttached()&&(ce.attach(this),this.updatePosition()))}updateSize(ce){this._config={...this._config,...ce},this._updateElementSize()}setDirection(ce){this._config={...this._config,direction:ce},this._updateElementDirection()}addPanelClass(ce){this._pane&&this._toggleClasses(this._pane,ce,!0)}removePanelClass(ce){this._pane&&this._toggleClasses(this._pane,ce,!1)}getDirection(){const ce=this._config.direction;return ce?"string"==typeof ce?ce:ce.value:"ltr"}updateScrollStrategy(ce){ce!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=ce,this.hasAttached()&&(ce.attach(this),ce.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const ce=this._pane.style;ce.width=(0,v.HM)(this._config.width),ce.height=(0,v.HM)(this._config.height),ce.minWidth=(0,v.HM)(this._config.minWidth),ce.minHeight=(0,v.HM)(this._config.minHeight),ce.maxWidth=(0,v.HM)(this._config.maxWidth),ce.maxHeight=(0,v.HM)(this._config.maxHeight)}_togglePointerEvents(ce){this._pane.style.pointerEvents=ce?"":"none"}_attachBackdrop(){const ce="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(ce)})}):this._backdropElement.classList.add(ce)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const ce=this._backdropElement;if(ce){if(this._animationsDisabled)return void this._disposeBackdrop(ce);ce.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{ce.addEventListener("transitionend",this._backdropTransitionendHandler)}),ce.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(ce)},500))}}_toggleClasses(ce,Se,ke){const he=(0,v.Eq)(Se||[]).filter(de=>!!de);he.length&&(ke?ce.classList.add(...he):ce.classList.remove(...he))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const ce=this._ngZone.onStable.pipe((0,Pe.R)((0,bt.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),ce.unsubscribe())})})}_disposeScrollStrategy(){const ce=this._scrollStrategy;ce&&(ce.disable(),ce.detach&&ce.detach())}_disposeBackdrop(ce){ce&&(ce.removeEventListener("click",this._backdropClickHandler),ce.removeEventListener("transitionend",this._backdropTransitionendHandler),ce.remove(),this._backdropElement===ce&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Rt="cdk-overlay-connected-position-bounding-box",Vt=/([A-Za-z%]+)$/;class ei{get positions(){return this._preferredPositions}constructor(ce,Se,ke,he,de){this._viewportRuler=Se,this._document=ke,this._platform=he,this._overlayContainer=de,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Xe.x,this._resizeSubscription=lt.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(ce)}attach(ce){this._validatePositions(),ce.hostElement.classList.add(Rt),this._overlayRef=ce,this._boundingBox=ce.hostElement,this._pane=ce.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const ce=this._originRect,Se=this._overlayRect,ke=this._viewportRect,he=this._containerRect,de=[];let Re;for(let xt of this._preferredPositions){let Xt=this._getOriginPoint(ce,he,xt),Ot=this._getOverlayPoint(Xt,Se,xt),_i=this._getOverlayFit(Ot,Se,ke,xt);if(_i.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(xt,Xt);this._canFitWithFlexibleDimensions(_i,Ot,ke)?de.push({position:xt,origin:Xt,overlayRect:Se,boundingBoxRect:this._calculateBoundingBoxRect(Xt,xt)}):(!Re||Re.overlayFit.visibleArea<_i.visibleArea)&&(Re={overlayFit:_i,overlayPoint:Ot,originPoint:Xt,position:xt,overlayRect:Se})}if(de.length){let xt=null,Xt=-1;for(const Ot of de){const _i=Ot.boundingBoxRect.width*Ot.boundingBoxRect.height*(Ot.position.weight||1);_i>Xt&&(Xt=_i,xt=Ot)}return this._isPushed=!1,void this._applyPosition(xt.position,xt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Re.position,Re.originPoint);this._applyPosition(Re.position,Re.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ct(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Rt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const ce=this._lastPosition;if(ce){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Se=this._getOriginPoint(this._originRect,this._containerRect,ce);this._applyPosition(ce,Se)}else this.apply()}withScrollableContainers(ce){return this._scrollables=ce,this}withPositions(ce){return this._preferredPositions=ce,-1===ce.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(ce){return this._viewportMargin=ce,this}withFlexibleDimensions(ce=!0){return this._hasFlexibleDimensions=ce,this}withGrowAfterOpen(ce=!0){return this._growAfterOpen=ce,this}withPush(ce=!0){return this._canPush=ce,this}withLockedPosition(ce=!0){return this._positionLocked=ce,this}setOrigin(ce){return this._origin=ce,this}withDefaultOffsetX(ce){return this._offsetX=ce,this}withDefaultOffsetY(ce){return this._offsetY=ce,this}withTransformOriginOn(ce){return this._transformOriginSelector=ce,this}_getOriginPoint(ce,Se,ke){let he,de;if("center"==ke.originX)he=ce.left+ce.width/2;else{const Re=this._isRtl()?ce.right:ce.left,xt=this._isRtl()?ce.left:ce.right;he="start"==ke.originX?Re:xt}return Se.left<0&&(he-=Se.left),de="center"==ke.originY?ce.top+ce.height/2:"top"==ke.originY?ce.top:ce.bottom,Se.top<0&&(de-=Se.top),{x:he,y:de}}_getOverlayPoint(ce,Se,ke){let he,de;return he="center"==ke.overlayX?-Se.width/2:"start"===ke.overlayX?this._isRtl()?-Se.width:0:this._isRtl()?0:-Se.width,de="center"==ke.overlayY?-Se.height/2:"top"==ke.overlayY?0:-Se.height,{x:ce.x+he,y:ce.y+de}}_getOverlayFit(ce,Se,ke,he){const de=ze(Se);let{x:Re,y:xt}=ce,Xt=this._getOffset(he,"x"),Ot=this._getOffset(he,"y");Xt&&(Re+=Xt),Ot&&(xt+=Ot);let Qi=0-xt,tn=xt+de.height-ke.height,Ji=this._subtractOverflows(de.width,0-Re,Re+de.width-ke.width),Vi=this._subtractOverflows(de.height,Qi,tn),zt=Ji*Vi;return{visibleArea:zt,isCompletelyWithinViewport:de.width*de.height===zt,fitsInViewportVertically:Vi===de.height,fitsInViewportHorizontally:Ji==de.width}}_canFitWithFlexibleDimensions(ce,Se,ke){if(this._hasFlexibleDimensions){const he=ke.bottom-Se.y,de=ke.right-Se.x,Re=ai(this._overlayRef.getConfig().minHeight),xt=ai(this._overlayRef.getConfig().minWidth);return(ce.fitsInViewportVertically||null!=Re&&Re<=he)&&(ce.fitsInViewportHorizontally||null!=xt&&xt<=de)}return!1}_pushOverlayOnScreen(ce,Se,ke){if(this._previousPushAmount&&this._positionLocked)return{x:ce.x+this._previousPushAmount.x,y:ce.y+this._previousPushAmount.y};const he=ze(Se),de=this._viewportRect,Re=Math.max(ce.x+he.width-de.width,0),xt=Math.max(ce.y+he.height-de.height,0),Xt=Math.max(de.top-ke.top-ce.y,0),Ot=Math.max(de.left-ke.left-ce.x,0);let _i=0,hi=0;return _i=he.width<=de.width?Ot||-Re:ce.x<this._viewportMargin?de.left-ke.left-ce.x:0,hi=he.height<=de.height?Xt||-xt:ce.y<this._viewportMargin?de.top-ke.top-ce.y:0,this._previousPushAmount={x:_i,y:hi},{x:ce.x+_i,y:ce.y+hi}}_applyPosition(ce,Se){if(this._setTransformOrigin(ce),this._setOverlayElementStyles(Se,ce),this._setBoundingBoxStyles(Se,ce),ce.panelClass&&this._addPanelClasses(ce.panelClass),this._lastPosition=ce,this._positionChanges.observers.length){const ke=this._getScrollVisibility(),he=new qi(ce,ke);this._positionChanges.next(he)}this._isInitialRender=!1}_setTransformOrigin(ce){if(!this._transformOriginSelector)return;const Se=this._boundingBox.querySelectorAll(this._transformOriginSelector);let ke,he=ce.overlayY;ke="center"===ce.overlayX?"center":this._isRtl()?"start"===ce.overlayX?"right":"left":"start"===ce.overlayX?"left":"right";for(let de=0;de<Se.length;de++)Se[de].style.transformOrigin=`${ke} ${he}`}_calculateBoundingBoxRect(ce,Se){const ke=this._viewportRect,he=this._isRtl();let de,Re,xt,_i,hi,Qi;if("top"===Se.overlayY)Re=ce.y,de=ke.height-Re+this._viewportMargin;else if("bottom"===Se.overlayY)xt=ke.height-ce.y+2*this._viewportMargin,de=ke.height-xt+this._viewportMargin;else{const tn=Math.min(ke.bottom-ce.y+ke.top,ce.y),Ji=this._lastBoundingBoxSize.height;de=2*tn,Re=ce.y-tn,de>Ji&&!this._isInitialRender&&!this._growAfterOpen&&(Re=ce.y-Ji/2)}if("end"===Se.overlayX&&!he||"start"===Se.overlayX&&he)Qi=ke.width-ce.x+this._viewportMargin,_i=ce.x-this._viewportMargin;else if("start"===Se.overlayX&&!he||"end"===Se.overlayX&&he)hi=ce.x,_i=ke.right-ce.x;else{const tn=Math.min(ke.right-ce.x+ke.left,ce.x),Ji=this._lastBoundingBoxSize.width;_i=2*tn,hi=ce.x-tn,_i>Ji&&!this._isInitialRender&&!this._growAfterOpen&&(hi=ce.x-Ji/2)}return{top:Re,left:hi,bottom:xt,right:Qi,width:_i,height:de}}_setBoundingBoxStyles(ce,Se){const ke=this._calculateBoundingBoxRect(ce,Se);!this._isInitialRender&&!this._growAfterOpen&&(ke.height=Math.min(ke.height,this._lastBoundingBoxSize.height),ke.width=Math.min(ke.width,this._lastBoundingBoxSize.width));const he={};if(this._hasExactPosition())he.top=he.left="0",he.bottom=he.right=he.maxHeight=he.maxWidth="",he.width=he.height="100%";else{const de=this._overlayRef.getConfig().maxHeight,Re=this._overlayRef.getConfig().maxWidth;he.height=(0,v.HM)(ke.height),he.top=(0,v.HM)(ke.top),he.bottom=(0,v.HM)(ke.bottom),he.width=(0,v.HM)(ke.width),he.left=(0,v.HM)(ke.left),he.right=(0,v.HM)(ke.right),he.alignItems="center"===Se.overlayX?"center":"end"===Se.overlayX?"flex-end":"flex-start",he.justifyContent="center"===Se.overlayY?"center":"bottom"===Se.overlayY?"flex-end":"flex-start",de&&(he.maxHeight=(0,v.HM)(de)),Re&&(he.maxWidth=(0,v.HM)(Re))}this._lastBoundingBoxSize=ke,Ct(this._boundingBox.style,he)}_resetBoundingBoxStyles(){Ct(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ct(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(ce,Se){const ke={},he=this._hasExactPosition(),de=this._hasFlexibleDimensions,Re=this._overlayRef.getConfig();if(he){const _i=this._viewportRuler.getViewportScrollPosition();Ct(ke,this._getExactOverlayY(Se,ce,_i)),Ct(ke,this._getExactOverlayX(Se,ce,_i))}else ke.position="static";let xt="",Xt=this._getOffset(Se,"x"),Ot=this._getOffset(Se,"y");Xt&&(xt+=`translateX(${Xt}px) `),Ot&&(xt+=`translateY(${Ot}px)`),ke.transform=xt.trim(),Re.maxHeight&&(he?ke.maxHeight=(0,v.HM)(Re.maxHeight):de&&(ke.maxHeight="")),Re.maxWidth&&(he?ke.maxWidth=(0,v.HM)(Re.maxWidth):de&&(ke.maxWidth="")),Ct(this._pane.style,ke)}_getExactOverlayY(ce,Se,ke){let he={top:"",bottom:""},de=this._getOverlayPoint(Se,this._overlayRect,ce);return this._isPushed&&(de=this._pushOverlayOnScreen(de,this._overlayRect,ke)),"bottom"===ce.overlayY?he.bottom=this._document.documentElement.clientHeight-(de.y+this._overlayRect.height)+"px":he.top=(0,v.HM)(de.y),he}_getExactOverlayX(ce,Se,ke){let Re,he={left:"",right:""},de=this._getOverlayPoint(Se,this._overlayRect,ce);return this._isPushed&&(de=this._pushOverlayOnScreen(de,this._overlayRect,ke)),Re=this._isRtl()?"end"===ce.overlayX?"left":"right":"end"===ce.overlayX?"right":"left","right"===Re?he.right=this._document.documentElement.clientWidth-(de.x+this._overlayRect.width)+"px":he.left=(0,v.HM)(de.x),he}_getScrollVisibility(){const ce=this._getOriginRect(),Se=this._pane.getBoundingClientRect(),ke=this._scrollables.map(he=>he.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ft(ce,ke),isOriginOutsideView:Oe(ce,ke),isOverlayClipped:Ft(Se,ke),isOverlayOutsideView:Oe(Se,ke)}}_subtractOverflows(ce,...Se){return Se.reduce((ke,he)=>ke-Math.max(he,0),ce)}_getNarrowedViewportRect(){const ce=this._document.documentElement.clientWidth,Se=this._document.documentElement.clientHeight,ke=this._viewportRuler.getViewportScrollPosition();return{top:ke.top+this._viewportMargin,left:ke.left+this._viewportMargin,right:ke.left+ce-this._viewportMargin,bottom:ke.top+Se-this._viewportMargin,width:ce-2*this._viewportMargin,height:Se-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(ce,Se){return"x"===Se?null==ce.offsetX?this._offsetX:ce.offsetX:null==ce.offsetY?this._offsetY:ce.offsetY}_validatePositions(){}_addPanelClasses(ce){this._pane&&(0,v.Eq)(ce).forEach(Se=>{""!==Se&&-1===this._appliedPanelClasses.indexOf(Se)&&(this._appliedPanelClasses.push(Se),this._pane.classList.add(Se))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(ce=>{this._pane.classList.remove(ce)}),this._appliedPanelClasses=[])}_getOriginRect(){const ce=this._origin;if(ce instanceof ae.SBq)return ce.nativeElement.getBoundingClientRect();if(ce instanceof Element)return ce.getBoundingClientRect();const Se=ce.width||0,ke=ce.height||0;return{top:ce.y,bottom:ce.y+ke,left:ce.x,right:ce.x+Se,height:ke,width:Se}}}function Ct(pt,ce){for(let Se in ce)ce.hasOwnProperty(Se)&&(pt[Se]=ce[Se]);return pt}function ai(pt){if("number"!=typeof pt&&null!=pt){const[ce,Se]=pt.split(Vt);return Se&&"px"!==Se?null:parseFloat(ce)}return pt||null}function ze(pt){return{top:Math.floor(pt.top),right:Math.floor(pt.right),bottom:Math.floor(pt.bottom),left:Math.floor(pt.left),width:Math.floor(pt.width),height:Math.floor(pt.height)}}const Me="cdk-global-overlay-wrapper";class ut{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(ce){const Se=ce.getConfig();this._overlayRef=ce,this._width&&!Se.width&&ce.updateSize({width:this._width}),this._height&&!Se.height&&ce.updateSize({height:this._height}),ce.hostElement.classList.add(Me),this._isDisposed=!1}top(ce=""){return this._bottomOffset="",this._topOffset=ce,this._alignItems="flex-start",this}left(ce=""){return this._xOffset=ce,this._xPosition="left",this}bottom(ce=""){return this._topOffset="",this._bottomOffset=ce,this._alignItems="flex-end",this}right(ce=""){return this._xOffset=ce,this._xPosition="right",this}start(ce=""){return this._xOffset=ce,this._xPosition="start",this}end(ce=""){return this._xOffset=ce,this._xPosition="end",this}width(ce=""){return this._overlayRef?this._overlayRef.updateSize({width:ce}):this._width=ce,this}height(ce=""){return this._overlayRef?this._overlayRef.updateSize({height:ce}):this._height=ce,this}centerHorizontally(ce=""){return this.left(ce),this._xPosition="center",this}centerVertically(ce=""){return this.top(ce),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const ce=this._overlayRef.overlayElement.style,Se=this._overlayRef.hostElement.style,ke=this._overlayRef.getConfig(),{width:he,height:de,maxWidth:Re,maxHeight:xt}=ke,Xt=!("100%"!==he&&"100vw"!==he||Re&&"100%"!==Re&&"100vw"!==Re),Ot=!("100%"!==de&&"100vh"!==de||xt&&"100%"!==xt&&"100vh"!==xt),_i=this._xPosition,hi=this._xOffset,Qi="rtl"===this._overlayRef.getConfig().direction;let tn="",Ji="",Vi="";Xt?Vi="flex-start":"center"===_i?(Vi="center",Qi?Ji=hi:tn=hi):Qi?"left"===_i||"end"===_i?(Vi="flex-end",tn=hi):("right"===_i||"start"===_i)&&(Vi="flex-start",Ji=hi):"left"===_i||"start"===_i?(Vi="flex-start",tn=hi):("right"===_i||"end"===_i)&&(Vi="flex-end",Ji=hi),ce.position=this._cssPosition,ce.marginLeft=Xt?"0":tn,ce.marginTop=Ot?"0":this._topOffset,ce.marginBottom=this._bottomOffset,ce.marginRight=Xt?"0":Ji,Se.justifyContent=Vi,Se.alignItems=Ot?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const ce=this._overlayRef.overlayElement.style,Se=this._overlayRef.hostElement,ke=Se.style;Se.classList.remove(Me),ke.justifyContent=ke.alignItems=ce.marginTop=ce.marginBottom=ce.marginLeft=ce.marginRight=ce.position="",this._overlayRef=null,this._isDisposed=!0}}let Yt=(()=>{class pt{constructor(Se,ke,he,de){this._viewportRuler=Se,this._document=ke,this._platform=he,this._overlayContainer=de}global(){return new ut}flexibleConnectedTo(Se){return new ei(Se,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.LFG(C.rL),ae.LFG(l.K0),ae.LFG(He.t4),ae.LFG(Et))},pt.\u0275prov=ae.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})(),Ut=0,ti=(()=>{class pt{constructor(Se,ke,he,de,Re,xt,Xt,Ot,_i,hi,Qi,tn){this.scrollStrategies=Se,this._overlayContainer=ke,this._componentFactoryResolver=he,this._positionBuilder=de,this._keyboardDispatcher=Re,this._injector=xt,this._ngZone=Xt,this._document=Ot,this._directionality=_i,this._location=hi,this._outsideClickDispatcher=Qi,this._animationsModuleType=tn}create(Se){const ke=this._createHostElement(),he=this._createPaneElement(ke),de=this._createPortalOutlet(he),Re=new fi(Se);return Re.direction=Re.direction||this._directionality.value,new ft(de,ke,he,Re,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(Se){const ke=this._document.createElement("div");return ke.id="cdk-overlay-"+Ut++,ke.classList.add("cdk-overlay-pane"),Se.appendChild(ke),ke}_createHostElement(){const Se=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(Se),Se}_createPortalOutlet(Se){return this._appRef||(this._appRef=this._injector.get(ae.z2F)),new et.u0(Se,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.LFG(Nt),ae.LFG(Et),ae.LFG(ae._Vd),ae.LFG(Yt),ae.LFG(Vn),ae.LFG(ae.zs3),ae.LFG(ae.R0b),ae.LFG(l.K0),ae.LFG(Le.Is),ae.LFG(l.Ye),ae.LFG(Sn),ae.LFG(ae.QbO,8))},pt.\u0275prov=ae.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})();const ot=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Dt=new ae.OlP("cdk-connected-overlay-scroll-strategy");let wi=(()=>{class pt{constructor(Se){this.elementRef=Se}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.Y36(ae.SBq))},pt.\u0275dir=ae.lG2({type:pt,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),pt})(),yn=(()=>{class pt{get offsetX(){return this._offsetX}set offsetX(Se){this._offsetX=Se,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(Se){this._offsetY=Se,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(Se){this._hasBackdrop=(0,v.Ig)(Se)}get lockPosition(){return this._lockPosition}set lockPosition(Se){this._lockPosition=(0,v.Ig)(Se)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(Se){this._flexibleDimensions=(0,v.Ig)(Se)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(Se){this._growAfterOpen=(0,v.Ig)(Se)}get push(){return this._push}set push(Se){this._push=(0,v.Ig)(Se)}constructor(Se,ke,he,de,Re){this._overlay=Se,this._dir=Re,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=lt.w0.EMPTY,this._attachSubscription=lt.w0.EMPTY,this._detachSubscription=lt.w0.EMPTY,this._positionSubscription=lt.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new ae.vpe,this.positionChange=new ae.vpe,this.attach=new ae.vpe,this.detach=new ae.vpe,this.overlayKeydown=new ae.vpe,this.overlayOutsideClick=new ae.vpe,this._templatePortal=new et.UE(ke,he),this._scrollStrategyFactory=de,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(Se){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),Se.origin&&this.open&&this._position.apply()),Se.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=ot);const Se=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=Se.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=Se.detachments().subscribe(()=>this.detach.emit()),Se.keydownEvents().subscribe(ke=>{this.overlayKeydown.next(ke),ke.keyCode===jt.hY&&!this.disableClose&&!(0,jt.Vb)(ke)&&(ke.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(ke=>{this.overlayOutsideClick.next(ke)})}_buildConfig(){const Se=this._position=this.positionStrategy||this._createPositionStrategy(),ke=new fi({direction:this._dir,positionStrategy:Se,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(ke.width=this.width),(this.height||0===this.height)&&(ke.height=this.height),(this.minWidth||0===this.minWidth)&&(ke.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(ke.minHeight=this.minHeight),this.backdropClass&&(ke.backdropClass=this.backdropClass),this.panelClass&&(ke.panelClass=this.panelClass),ke}_updatePositionStrategy(Se){const ke=this.positions.map(he=>({originX:he.originX,originY:he.originY,overlayX:he.overlayX,overlayY:he.overlayY,offsetX:he.offsetX||this.offsetX,offsetY:he.offsetY||this.offsetY,panelClass:he.panelClass||void 0}));return Se.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(ke).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const Se=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(Se),Se}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof wi?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(Se=>{this.backdropClick.emit(Se)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function it(pt,ce=!1){return(0,qe.e)((Se,ke)=>{let he=0;Se.subscribe((0,Ue.x)(ke,de=>{const Re=pt(de,he++);(Re||ce)&&ke.next(de),!Re&&ke.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(Se=>{this.positionChange.emit(Se),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return pt.\u0275fac=function(Se){return new(Se||pt)(ae.Y36(ti),ae.Y36(ae.Rgc),ae.Y36(ae.s_b),ae.Y36(Dt),ae.Y36(Le.Is,8))},pt.\u0275dir=ae.lG2({type:pt,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[ae.TTD]}),pt})();const Fn={provide:Dt,deps:[ti],useFactory:function Zi(pt){return()=>pt.scrollStrategies.reposition()}};let bn=(()=>{class pt{}return pt.\u0275fac=function(Se){return new(Se||pt)},pt.\u0275mod=ae.oAB({type:pt}),pt.\u0275inj=ae.cJS({providers:[ti,Fn],imports:[Le.vT,et.eL,C.Cl,C.Cl]}),pt})()},2831:(gi,mt,H)=>{"use strict";H.d(mt,{Mq:()=>Xe,Oy:()=>Ne,_i:()=>lt,ht:()=>Ti,i$:()=>it,kV:()=>ni,qK:()=>Pe,sA:()=>qt,t4:()=>v});var C=H(5879),l=H(6814);let ae;try{ae=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ae=!1}let ne,v=(()=>{class je{constructor(Ft){this._platformId=Ft,this.isBrowser=this._platformId?(0,l.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ae)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return je.\u0275fac=function(Ft){return new(Ft||je)(C.LFG(C.Lbi))},je.\u0275prov=C.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();const Ge=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Pe(){if(ne)return ne;if("object"!=typeof document||!document)return ne=new Set(Ge),ne;let je=document.createElement("input");return ne=new Set(Ge.filter(Oe=>(je.setAttribute("type",Oe),je.type===Oe))),ne}let qe,Le,et,bt;function it(je){return function Ue(){if(null==qe&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>qe=!0}))}finally{qe=qe||!1}return qe}()?je:!!je.capture}function Xe(){if(null==et){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return et=!1,et;if("scrollBehavior"in document.documentElement.style)et=!0;else{const je=Element.prototype.scrollTo;et=!!je&&!/\{\s*\[native code\]\s*\}/.test(je.toString())}}return et}function lt(){if("object"!=typeof document||!document)return 0;if(null==Le){const je=document.createElement("div"),Oe=je.style;je.dir="rtl",Oe.width="1px",Oe.overflow="auto",Oe.visibility="hidden",Oe.pointerEvents="none",Oe.position="absolute";const Ft=document.createElement("div"),Pt=Ft.style;Pt.width="2px",Pt.height="1px",je.appendChild(Ft),document.body.appendChild(je),Le=0,0===je.scrollLeft&&(je.scrollLeft=1,Le=0===je.scrollLeft?1:2),je.remove()}return Le}function ni(je){if(function jt(){if(null==bt){const je=typeof document<"u"?document.head:null;bt=!(!je||!je.createShadowRoot&&!je.attachShadow)}return bt}()){const Oe=je.getRootNode?je.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&Oe instanceof ShadowRoot)return Oe}return null}function Ti(){let je=typeof document<"u"&&document?document.activeElement:null;for(;je&&je.shadowRoot;){const Oe=je.shadowRoot.activeElement;if(Oe===je)break;je=Oe}return je}function qt(je){return je.composedPath?je.composedPath()[0]:je.target}function Ne(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},8484:(gi,mt,H)=>{"use strict";H.d(mt,{C5:()=>qe,UE:()=>Ue,bH:()=>jt,eL:()=>qt,ig:()=>bt,u0:()=>Xe});var C=H(5879);class Pe{attach(Oe){return this._attachedHost=Oe,Oe.attach(this)}detach(){let Oe=this._attachedHost;null!=Oe&&(this._attachedHost=null,Oe.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(Oe){this._attachedHost=Oe}}class qe extends Pe{constructor(Oe,Ft,Pt,Nt,fi){super(),this.component=Oe,this.viewContainerRef=Ft,this.injector=Pt,this.componentFactoryResolver=Nt,this.projectableNodes=fi}}class Ue extends Pe{constructor(Oe,Ft,Pt,Nt){super(),this.templateRef=Oe,this.viewContainerRef=Ft,this.context=Pt,this.injector=Nt}get origin(){return this.templateRef.elementRef}attach(Oe,Ft=this.context){return this.context=Ft,super.attach(Oe)}detach(){return this.context=void 0,super.detach()}}class it extends Pe{constructor(Oe){super(),this.element=Oe instanceof C.SBq?Oe.nativeElement:Oe}}class Le{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(Oe){return Oe instanceof qe?(this._attachedPortal=Oe,this.attachComponentPortal(Oe)):Oe instanceof Ue?(this._attachedPortal=Oe,this.attachTemplatePortal(Oe)):this.attachDomPortal&&Oe instanceof it?(this._attachedPortal=Oe,this.attachDomPortal(Oe)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(Oe){this._disposeFn=Oe}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Xe extends Le{constructor(Oe,Ft,Pt,Nt,fi){super(),this.outletElement=Oe,this._componentFactoryResolver=Ft,this._appRef=Pt,this._defaultInjector=Nt,this.attachDomPortal=vi=>{const Ri=vi.element,qi=this._document.createComment("dom-portal");Ri.parentNode.insertBefore(qi,Ri),this.outletElement.appendChild(Ri),this._attachedPortal=vi,super.setDisposeFn(()=>{qi.parentNode&&qi.parentNode.replaceChild(Ri,qi)})},this._document=fi}attachComponentPortal(Oe){const Pt=(Oe.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Oe.component);let Nt;return Oe.viewContainerRef?(Nt=Oe.viewContainerRef.createComponent(Pt,Oe.viewContainerRef.length,Oe.injector||Oe.viewContainerRef.injector,Oe.projectableNodes||void 0),this.setDisposeFn(()=>Nt.destroy())):(Nt=Pt.create(Oe.injector||this._defaultInjector||C.zs3.NULL),this._appRef.attachView(Nt.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(Nt.hostView),Nt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Nt)),this._attachedPortal=Oe,Nt}attachTemplatePortal(Oe){let Ft=Oe.viewContainerRef,Pt=Ft.createEmbeddedView(Oe.templateRef,Oe.context,{injector:Oe.injector});return Pt.rootNodes.forEach(Nt=>this.outletElement.appendChild(Nt)),Pt.detectChanges(),this.setDisposeFn(()=>{let Nt=Ft.indexOf(Pt);-1!==Nt&&Ft.remove(Nt)}),this._attachedPortal=Oe,Pt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(Oe){return Oe.hostView.rootNodes[0]}}let bt=(()=>{class je extends Ue{constructor(Ft,Pt){super(Ft,Pt)}}return je.\u0275fac=function(Ft){return new(Ft||je)(C.Y36(C.Rgc),C.Y36(C.s_b))},je.\u0275dir=C.lG2({type:je,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[C.qOj]}),je})(),jt=(()=>{class je extends bt{}return je.\u0275fac=function(){let Oe;return function(Pt){return(Oe||(Oe=C.n5z(je)))(Pt||je)}}(),je.\u0275dir=C.lG2({type:je,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[C._Bn([{provide:bt,useExisting:je}]),C.qOj]}),je})(),qt=(()=>{class je{}return je.\u0275fac=function(Ft){return new(Ft||je)},je.\u0275mod=C.oAB({type:je}),je.\u0275inj=C.cJS({}),je})()},799:(gi,mt,H)=>{"use strict";H.d(mt,{PQ:()=>Yt,ZD:()=>ce,mF:()=>ut,Cl:()=>Se,rL:()=>ti});var C=H(2495),l=H(5879),ae=H(8645),v=H(2096),He=H(5592),ne=H(2438),Ge=H(1954),Pe=H(7394);const qe={schedule(ke){let he=requestAnimationFrame,de=cancelAnimationFrame;const{delegate:Re}=qe;Re&&(he=Re.requestAnimationFrame,de=Re.cancelAnimationFrame);const xt=he(Xt=>{de=void 0,ke(Xt)});return new Pe.w0(()=>de?.(xt))},requestAnimationFrame(...ke){const{delegate:he}=qe;return(he?.requestAnimationFrame||requestAnimationFrame)(...ke)},cancelAnimationFrame(...ke){const{delegate:he}=qe;return(he?.cancelAnimationFrame||cancelAnimationFrame)(...ke)},delegate:void 0};var it=H(2631);new class Le extends it.v{flush(he){this._active=!0;const de=this._scheduled;this._scheduled=void 0;const{actions:Re}=this;let xt;he=he||Re.shift();do{if(xt=he.execute(he.state,he.delay))break}while((he=Re[0])&&he.id===de&&Re.shift());if(this._active=!1,xt){for(;(he=Re[0])&&he.id===de&&Re.shift();)he.unsubscribe();throw xt}}}(class Ue extends Ge.o{constructor(he,de){super(he,de),this.scheduler=he,this.work=de}requestAsyncId(he,de,Re=0){return null!==Re&&Re>0?super.requestAsyncId(he,de,Re):(he.actions.push(this),he._scheduled||(he._scheduled=qe.requestAnimationFrame(()=>he.flush(void 0))))}recycleAsyncId(he,de,Re=0){var xt;if(null!=Re?Re>0:this.delay>0)return super.recycleAsyncId(he,de,Re);const{actions:Xt}=he;null!=de&&(null===(xt=Xt[Xt.length-1])||void 0===xt?void 0:xt.id)!==de&&(qe.cancelAnimationFrame(de),he._scheduled=void 0)}});let bt,lt=1;const jt={};function ni(ke){return ke in jt&&(delete jt[ke],!0)}const Ti={setImmediate(ke){const he=lt++;return jt[he]=!0,bt||(bt=Promise.resolve()),bt.then(()=>ni(he)&&ke()),he},clearImmediate(ke){ni(ke)}},{setImmediate:Ne,clearImmediate:je}=Ti,Oe={setImmediate(...ke){const{delegate:he}=Oe;return(he?.setImmediate||Ne)(...ke)},clearImmediate(ke){const{delegate:he}=Oe;return(he?.clearImmediate||je)(ke)},delegate:void 0};new class Pt extends it.v{flush(he){this._active=!0;const de=this._scheduled;this._scheduled=void 0;const{actions:Re}=this;let xt;he=he||Re.shift();do{if(xt=he.execute(he.state,he.delay))break}while((he=Re[0])&&he.id===de&&Re.shift());if(this._active=!1,xt){for(;(he=Re[0])&&he.id===de&&Re.shift();)he.unsubscribe();throw xt}}}(class Ft extends Ge.o{constructor(he,de){super(he,de),this.scheduler=he,this.work=de}requestAsyncId(he,de,Re=0){return null!==Re&&Re>0?super.requestAsyncId(he,de,Re):(he.actions.push(this),he._scheduled||(he._scheduled=Oe.setImmediate(he.flush.bind(he,void 0))))}recycleAsyncId(he,de,Re=0){var xt;if(null!=Re?Re>0:this.delay>0)return super.recycleAsyncId(he,de,Re);const{actions:Xt}=he;null!=de&&(null===(xt=Xt[Xt.length-1])||void 0===xt?void 0:xt.id)!==de&&(Oe.clearImmediate(de),he._scheduled===de&&(he._scheduled=void 0))}});var vi=H(6321),Ri=H(9360),qi=H(4829),Dn=H(8251),_n=H(4825);function Vn(ke,he=vi.z){return function Hn(ke){return(0,Ri.e)((he,de)=>{let Re=!1,xt=null,Xt=null,Ot=!1;const _i=()=>{if(Xt?.unsubscribe(),Xt=null,Re){Re=!1;const Qi=xt;xt=null,de.next(Qi)}Ot&&de.complete()},hi=()=>{Xt=null,Ot&&de.complete()};he.subscribe((0,Dn.x)(de,Qi=>{Re=!0,xt=Qi,Xt||(0,qi.Xf)(ke(Qi)).subscribe(Xt=(0,Dn.x)(de,_i,hi))},()=>{Ot=!0,(!Re||!Xt||Xt.closed)&&de.complete()}))})}(()=>(0,_n.H)(ke,he))}var Sn=H(2181),Et=H(9773),ft=H(2831),Rt=H(6814),Vt=H(9388);let ut=(()=>{class ke{constructor(de,Re,xt){this._ngZone=de,this._platform=Re,this._scrolled=new ae.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=xt}register(de){this.scrollContainers.has(de)||this.scrollContainers.set(de,de.elementScrolled().subscribe(()=>this._scrolled.next(de)))}deregister(de){const Re=this.scrollContainers.get(de);Re&&(Re.unsubscribe(),this.scrollContainers.delete(de))}scrolled(de=20){return this._platform.isBrowser?new He.y(Re=>{this._globalSubscription||this._addGlobalListener();const xt=de>0?this._scrolled.pipe(Vn(de)).subscribe(Re):this._scrolled.subscribe(Re);return this._scrolledCount++,()=>{xt.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,v.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((de,Re)=>this.deregister(Re)),this._scrolled.complete()}ancestorScrolled(de,Re){const xt=this.getAncestorScrollContainers(de);return this.scrolled(Re).pipe((0,Sn.h)(Xt=>!Xt||xt.indexOf(Xt)>-1))}getAncestorScrollContainers(de){const Re=[];return this.scrollContainers.forEach((xt,Xt)=>{this._scrollableContainsElement(Xt,de)&&Re.push(Xt)}),Re}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(de,Re){let xt=(0,C.fI)(Re),Xt=de.getElementRef().nativeElement;do{if(xt==Xt)return!0}while(xt=xt.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const de=this._getWindow();return(0,ne.R)(de.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return ke.\u0275fac=function(de){return new(de||ke)(l.LFG(l.R0b),l.LFG(ft.t4),l.LFG(Rt.K0,8))},ke.\u0275prov=l.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})(),Yt=(()=>{class ke{constructor(de,Re,xt,Xt){this.elementRef=de,this.scrollDispatcher=Re,this.ngZone=xt,this.dir=Xt,this._destroyed=new ae.x,this._elementScrolled=new He.y(Ot=>this.ngZone.runOutsideAngular(()=>(0,ne.R)(this.elementRef.nativeElement,"scroll").pipe((0,Et.R)(this._destroyed)).subscribe(Ot)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(de){const Re=this.elementRef.nativeElement,xt=this.dir&&"rtl"==this.dir.value;null==de.left&&(de.left=xt?de.end:de.start),null==de.right&&(de.right=xt?de.start:de.end),null!=de.bottom&&(de.top=Re.scrollHeight-Re.clientHeight-de.bottom),xt&&0!=(0,ft._i)()?(null!=de.left&&(de.right=Re.scrollWidth-Re.clientWidth-de.left),2==(0,ft._i)()?de.left=de.right:1==(0,ft._i)()&&(de.left=de.right?-de.right:de.right)):null!=de.right&&(de.left=Re.scrollWidth-Re.clientWidth-de.right),this._applyScrollToOptions(de)}_applyScrollToOptions(de){const Re=this.elementRef.nativeElement;(0,ft.Mq)()?Re.scrollTo(de):(null!=de.top&&(Re.scrollTop=de.top),null!=de.left&&(Re.scrollLeft=de.left))}measureScrollOffset(de){const Re="left",Xt=this.elementRef.nativeElement;if("top"==de)return Xt.scrollTop;if("bottom"==de)return Xt.scrollHeight-Xt.clientHeight-Xt.scrollTop;const Ot=this.dir&&"rtl"==this.dir.value;return"start"==de?de=Ot?"right":Re:"end"==de&&(de=Ot?Re:"right"),Ot&&2==(0,ft._i)()?de==Re?Xt.scrollWidth-Xt.clientWidth-Xt.scrollLeft:Xt.scrollLeft:Ot&&1==(0,ft._i)()?de==Re?Xt.scrollLeft+Xt.scrollWidth-Xt.clientWidth:-Xt.scrollLeft:de==Re?Xt.scrollLeft:Xt.scrollWidth-Xt.clientWidth-Xt.scrollLeft}}return ke.\u0275fac=function(de){return new(de||ke)(l.Y36(l.SBq),l.Y36(ut),l.Y36(l.R0b),l.Y36(Vt.Is,8))},ke.\u0275dir=l.lG2({type:ke,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),ke})(),ti=(()=>{class ke{constructor(de,Re,xt){this._platform=de,this._change=new ae.x,this._changeListener=Xt=>{this._change.next(Xt)},this._document=xt,Re.runOutsideAngular(()=>{if(de.isBrowser){const Xt=this._getWindow();Xt.addEventListener("resize",this._changeListener),Xt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const de=this._getWindow();de.removeEventListener("resize",this._changeListener),de.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const de={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),de}getViewportRect(){const de=this.getViewportScrollPosition(),{width:Re,height:xt}=this.getViewportSize();return{top:de.top,left:de.left,bottom:de.top+xt,right:de.left+Re,height:xt,width:Re}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const de=this._document,Re=this._getWindow(),xt=de.documentElement,Xt=xt.getBoundingClientRect();return{top:-Xt.top||de.body.scrollTop||Re.scrollY||xt.scrollTop||0,left:-Xt.left||de.body.scrollLeft||Re.scrollX||xt.scrollLeft||0}}change(de=20){return de>0?this._change.pipe(Vn(de)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const de=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:de.innerWidth,height:de.innerHeight}:{width:0,height:0}}}return ke.\u0275fac=function(de){return new(de||ke)(l.LFG(ft.t4),l.LFG(l.R0b),l.LFG(Rt.K0,8))},ke.\u0275prov=l.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})(),ce=(()=>{class ke{}return ke.\u0275fac=function(de){return new(de||ke)},ke.\u0275mod=l.oAB({type:ke}),ke.\u0275inj=l.cJS({}),ke})(),Se=(()=>{class ke{}return ke.\u0275fac=function(de){return new(de||ke)},ke.\u0275mod=l.oAB({type:ke}),ke.\u0275inj=l.cJS({imports:[Vt.vT,ce,Vt.vT,ce]}),ke})()},6814:(gi,mt,H)=>{"use strict";H.d(mt,{Do:()=>bt,ED:()=>La,EM:()=>Ba,HT:()=>v,JF:()=>br,K0:()=>ne,Mx:()=>Fr,NF:()=>vo,O5:()=>no,Ov:()=>ks,PC:()=>Ca,PM:()=>Ps,RF:()=>os,S$:()=>et,V_:()=>Pe,Ye:()=>jt,b0:()=>lt,bD:()=>Qs,ez:()=>yo,mk:()=>fn,n9:()=>xa,q:()=>ae,sg:()=>hr,tP:()=>Ea,w_:()=>He});var C=H(5879);let l=null;function ae(){return l}function v(F){l||(l=F)}class He{}const ne=new C.OlP("DocumentToken");let Ge=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=C.Yz7({token:F,factory:function(){return(0,C.f3M)(qe)},providedIn:"platform"}),F})();const Pe=new C.OlP("Location Initialized");let qe=(()=>{class F extends Ge{constructor(){super(),this._doc=(0,C.f3M)(ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ae().getBaseHref(this._doc)}onPopState($){const fe=ae().getGlobalEventTarget(this._doc,"window");return fe.addEventListener("popstate",$,!1),()=>fe.removeEventListener("popstate",$)}onHashChange($){const fe=ae().getGlobalEventTarget(this._doc,"window");return fe.addEventListener("hashchange",$,!1),()=>fe.removeEventListener("hashchange",$)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname($){this._location.pathname=$}pushState($,fe,Ye){this._history.pushState($,fe,Ye)}replaceState($,fe,Ye){this._history.replaceState($,fe,Ye)}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=C.Yz7({token:F,factory:function(){return new F},providedIn:"platform"}),F})();function Ue(F,Q){if(0==F.length)return Q;if(0==Q.length)return F;let $=0;return F.endsWith("/")&&$++,Q.startsWith("/")&&$++,2==$?F+Q.substring(1):1==$?F+Q:F+"/"+Q}function it(F){const Q=F.match(/#|\?|$/),$=Q&&Q.index||F.length;return F.slice(0,$-("/"===F[$-1]?1:0))+F.slice($)}function Le(F){return F&&"?"!==F[0]?"?"+F:F}let et=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=C.Yz7({token:F,factory:function(){return(0,C.f3M)(lt)},providedIn:"root"}),F})();const Xe=new C.OlP("appBaseHref");let lt=(()=>{class F extends et{constructor($,fe){super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=fe??this._platformLocation.getBaseHrefFromDOM()??(0,C.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Ue(this._baseHref,$)}path($=!1){const fe=this._platformLocation.pathname+Le(this._platformLocation.search),Ye=this._platformLocation.hash;return Ye&&$?`${fe}${Ye}`:fe}pushState($,fe,Ye,It){const Wt=this.prepareExternalUrl(Ye+Le(It));this._platformLocation.pushState($,fe,Wt)}replaceState($,fe,Ye,It){const Wt=this.prepareExternalUrl(Ye+Le(It));this._platformLocation.replaceState($,fe,Wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return F.\u0275fac=function($){return new($||F)(C.LFG(Ge),C.LFG(Xe,8))},F.\u0275prov=C.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),bt=(()=>{class F extends et{constructor($,fe){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=fe&&(this._baseHref=fe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let fe=this._platformLocation.hash;return null==fe&&(fe="#"),fe.length>0?fe.substring(1):fe}prepareExternalUrl($){const fe=Ue(this._baseHref,$);return fe.length>0?"#"+fe:fe}pushState($,fe,Ye,It){let Wt=this.prepareExternalUrl(Ye+Le(It));0==Wt.length&&(Wt=this._platformLocation.pathname),this._platformLocation.pushState($,fe,Wt)}replaceState($,fe,Ye,It){let Wt=this.prepareExternalUrl(Ye+Le(It));0==Wt.length&&(Wt=this._platformLocation.pathname),this._platformLocation.replaceState($,fe,Wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return F.\u0275fac=function($){return new($||F)(C.LFG(Ge),C.LFG(Xe,8))},F.\u0275prov=C.Yz7({token:F,factory:F.\u0275fac}),F})(),jt=(()=>{class F{constructor($){this._subject=new C.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const fe=this._locationStrategy.getBaseHref();this._basePath=function Ne(F){if(new RegExp("^(https?:)?//").test(F)){const[,$]=F.split(/\/\/[^\/]+/);return $}return F}(it(qt(fe))),this._locationStrategy.onPopState(Ye=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ye.state,type:Ye.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,fe=""){return this.path()==this.normalize($+Le(fe))}normalize($){return F.stripTrailingSlash(function Ti(F,Q){if(!F||!Q.startsWith(F))return Q;const $=Q.substring(F.length);return""===$||["/",";","?","#"].includes($[0])?$:Q}(this._basePath,qt($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,fe="",Ye=null){this._locationStrategy.pushState(Ye,"",$,fe),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Le(fe)),Ye)}replaceState($,fe="",Ye=null){this._locationStrategy.replaceState(Ye,"",$,fe),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Le(fe)),Ye)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){this._locationStrategy.historyGo?.($)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(fe=>{this._notifyUrlChangeListeners(fe.url,fe.state)})),()=>{const fe=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(fe,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",fe){this._urlChangeListeners.forEach(Ye=>Ye($,fe))}subscribe($,fe,Ye){return this._subject.subscribe({next:$,error:fe,complete:Ye})}}return F.normalizeQueryParams=Le,F.joinWithSlash=Ue,F.stripTrailingSlash=it,F.\u0275fac=function($){return new($||F)(C.LFG(et))},F.\u0275prov=C.Yz7({token:F,factory:function(){return function ni(){return new jt((0,C.LFG)(et))}()},providedIn:"root"}),F})();function qt(F){return F.replace(/\/index.html$/,"")}function Fr(F,Q){Q=encodeURIComponent(Q);for(const $ of F.split(";")){const fe=$.indexOf("="),[Ye,It]=-1==fe?[$,""]:[$.slice(0,fe),$.slice(fe+1)];if(Ye.trim()===Q)return decodeURIComponent(It)}return null}const to=/\s+/,on=[];let fn=(()=>{class F{constructor($,fe,Ye,It){this._iterableDiffers=$,this._keyValueDiffers=fe,this._ngEl=Ye,this._renderer=It,this.initialClasses=on,this.stateMap=new Map}set klass($){this.initialClasses=null!=$?$.trim().split(to):on}set ngClass($){this.rawClass="string"==typeof $?$.trim().split(to):$}ngDoCheck(){for(const fe of this.initialClasses)this._updateState(fe,!0);const $=this.rawClass;if(Array.isArray($)||$ instanceof Set)for(const fe of $)this._updateState(fe,!0);else if(null!=$)for(const fe of Object.keys($))this._updateState(fe,!!$[fe]);this._applyStateDiff()}_updateState($,fe){const Ye=this.stateMap.get($);void 0!==Ye?(Ye.enabled!==fe&&(Ye.changed=!0,Ye.enabled=fe),Ye.touched=!0):this.stateMap.set($,{enabled:fe,changed:!0,touched:!0})}_applyStateDiff(){for(const $ of this.stateMap){const fe=$[0],Ye=$[1];Ye.changed?(this._toggleClass(fe,Ye.enabled),Ye.changed=!1):Ye.touched||(Ye.enabled&&this._toggleClass(fe,!1),this.stateMap.delete(fe)),Ye.touched=!1}}_toggleClass($,fe){($=$.trim()).length>0&&$.split(to).forEach(Ye=>{fe?this._renderer.addClass(this._ngEl.nativeElement,Ye):this._renderer.removeClass(this._ngEl.nativeElement,Ye)})}}return F.\u0275fac=function($){return new($||F)(C.Y36(C.ZZ4),C.Y36(C.aQg),C.Y36(C.SBq),C.Y36(C.Qsj))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),F})();class Qn{constructor(Q,$,fe,Ye){this.$implicit=Q,this.ngForOf=$,this.index=fe,this.count=Ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hr=(()=>{class F{set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}constructor($,fe,Ye){this._viewContainer=$,this._template=fe,this._differs=Ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const fe=this._viewContainer;$.forEachOperation((Ye,It,Wt)=>{if(null==Ye.previousIndex)fe.createEmbeddedView(this._template,new Qn(Ye.item,this._ngForOf,-1,-1),null===Wt?void 0:Wt);else if(null==Wt)fe.remove(null===It?void 0:It);else if(null!==It){const Wi=fe.get(It);fe.move(Wi,Wt),Do(Wi,Ye)}});for(let Ye=0,It=fe.length;Ye<It;Ye++){const Wi=fe.get(Ye).context;Wi.index=Ye,Wi.count=It,Wi.ngForOf=this._ngForOf}$.forEachIdentityChange(Ye=>{Do(fe.get(Ye.currentIndex),Ye)})}static ngTemplateContextGuard($,fe){return!0}}return F.\u0275fac=function($){return new($||F)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function Do(F,Q){F.context.$implicit=Q.item}let no=(()=>{class F{constructor($,fe){this._viewContainer=$,this._context=new mn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=fe}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){ro("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){ro("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,fe){return!0}}return F.\u0275fac=function($){return new($||F)(C.Y36(C.s_b),C.Y36(C.Rgc))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class mn{constructor(){this.$implicit=null,this.ngIf=null}}function ro(F,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,C.AaK)(Q)}'.`)}class Po{constructor(Q,$){this._viewContainerRef=Q,this._templateRef=$,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Q){Q&&!this._created?this.create():!Q&&this._created&&this.destroy()}}let os=(()=>{class F{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch($){this._ngSwitch=$,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault($){this._defaultViews.push($)}_matchCase($){const fe=$==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||fe,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),fe}_updateDefaultCases($){if(this._defaultViews.length>0&&$!==this._defaultUsed){this._defaultUsed=$;for(const fe of this._defaultViews)fe.enforceState($)}}}return F.\u0275fac=function($){return new($||F)},F.\u0275dir=C.lG2({type:F,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),F})(),xa=(()=>{class F{constructor($,fe,Ye){this.ngSwitch=Ye,Ye._addCase(),this._view=new Po($,fe)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return F.\u0275fac=function($){return new($||F)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(os,9))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),F})(),La=(()=>{class F{constructor($,fe,Ye){Ye._addDefault(new Po($,fe))}}return F.\u0275fac=function($){return new($||F)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(os,9))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngSwitchDefault",""]],standalone:!0}),F})(),Ca=(()=>{class F{constructor($,fe,Ye){this._ngEl=$,this._differs=fe,this._renderer=Ye,this._ngStyle=null,this._differ=null}set ngStyle($){this._ngStyle=$,!this._differ&&$&&(this._differ=this._differs.find($).create())}ngDoCheck(){if(this._differ){const $=this._differ.diff(this._ngStyle);$&&this._applyChanges($)}}_setStyle($,fe){const[Ye,It]=$.split("."),Wt=-1===Ye.indexOf("-")?void 0:C.JOm.DashCase;null!=fe?this._renderer.setStyle(this._ngEl.nativeElement,Ye,It?`${fe}${It}`:fe,Wt):this._renderer.removeStyle(this._ngEl.nativeElement,Ye,Wt)}_applyChanges($){$.forEachRemovedItem(fe=>this._setStyle(fe.key,null)),$.forEachAddedItem(fe=>this._setStyle(fe.key,fe.currentValue)),$.forEachChangedItem(fe=>this._setStyle(fe.key,fe.currentValue))}}return F.\u0275fac=function($){return new($||F)(C.Y36(C.SBq),C.Y36(C.aQg),C.Y36(C.Qsj))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),F})(),Ea=(()=>{class F{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const fe=this._viewContainerRef;if(this._viewRef&&fe.remove(fe.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ye,ngTemplateOutletContext:It,ngTemplateOutletInjector:Wt}=this;this._viewRef=fe.createEmbeddedView(Ye,It,Wt?{injector:Wt}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function($){return new($||F)(C.Y36(C.s_b))},F.\u0275dir=C.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[C.TTD]}),F})();class Pr{createSubscription(Q,$){return(0,C.rg0)(()=>Q.subscribe({next:$,error:fe=>{throw fe}}))}dispose(Q){(0,C.rg0)(()=>Q.unsubscribe())}}class Wr{createSubscription(Q,$){return Q.then($,fe=>{throw fe})}dispose(Q){}}const As=new Wr,vr=new Pr;let ks=(()=>{class F{constructor($){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=$}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform($){return this._obj?$!==this._obj?(this._dispose(),this.transform($)):this._latestValue:($&&this._subscribe($),this._latestValue)}_subscribe($){this._obj=$,this._strategy=this._selectStrategy($),this._subscription=this._strategy.createSubscription($,fe=>this._updateLatestValue($,fe))}_selectStrategy($){if((0,C.QGY)($))return As;if((0,C.F4k)($))return vr;throw function cn(F,Q){return new C.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue($,fe){$===this._obj&&(this._latestValue=fe,this._ref.markForCheck())}}return F.\u0275fac=function($){return new($||F)(C.Y36(C.sBO,16))},F.\u0275pipe=C.Yjl({name:"async",type:F,pure:!1,standalone:!0}),F})(),yo=(()=>{class F{}return F.\u0275fac=function($){return new($||F)},F.\u0275mod=C.oAB({type:F}),F.\u0275inj=C.cJS({}),F})();const Qs="browser",za="server";function vo(F){return F===Qs}function Ps(F){return F===za}let Ba=(()=>{class F{}return F.\u0275prov=(0,C.Yz7)({token:F,providedIn:"root",factory:()=>new co((0,C.LFG)(ne),window)}),F})();class co{constructor(Q,$){this.document=Q,this.window=$,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const $=function ea(F,Q){const $=F.getElementById(Q)||F.getElementsByName(Q)[0];if($)return $;if("function"==typeof F.createTreeWalker&&F.body&&"function"==typeof F.body.attachShadow){const fe=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Ye=fe.currentNode;for(;Ye;){const It=Ye.shadowRoot;if(It){const Wt=It.getElementById(Q)||It.querySelector(`[name="${Q}"]`);if(Wt)return Wt}Ye=fe.nextNode()}}return null}(this.document,Q);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=Q)}}scrollToElement(Q){const $=Q.getBoundingClientRect(),fe=$.left+this.window.pageXOffset,Ye=$.top+this.window.pageYOffset,It=this.offset();this.window.scrollTo(fe-It[0],Ye-It[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=da(this.window.history)||da(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function da(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class br{}},9862:(gi,mt,H)=>{"use strict";H.d(mt,{JF:()=>pe,eN:()=>Et});var C=H(5879),l=H(2096),ae=H(7715),v=H(5592),He=H(6328),ne=H(2181),Ge=H(7398),Pe=H(4716),qe=H(4664),Ue=H(6814);class it{}class Le{}class et{constructor(Ie){this.normalizedNames=new Map,this.lazyUpdate=null,Ie?"string"==typeof Ie?this.lazyInit=()=>{this.headers=new Map,Ie.split("\n").forEach(Ze=>{const Bt=Ze.indexOf(":");if(Bt>0){const Gt=Ze.slice(0,Bt),di=Gt.toLowerCase(),ui=Ze.slice(Bt+1).trim();this.maybeSetNormalizedName(Gt,di),this.headers.has(di)?this.headers.get(di).push(ui):this.headers.set(di,[ui])}})}:typeof Headers<"u"&&Ie instanceof Headers?(this.headers=new Map,Ie.forEach((Ze,Bt)=>{this.setHeaderEntries(Bt,Ze)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(Ie).forEach(([Ze,Bt])=>{this.setHeaderEntries(Ze,Bt)})}:this.headers=new Map}has(Ie){return this.init(),this.headers.has(Ie.toLowerCase())}get(Ie){this.init();const Ze=this.headers.get(Ie.toLowerCase());return Ze&&Ze.length>0?Ze[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ie){return this.init(),this.headers.get(Ie.toLowerCase())||null}append(Ie,Ze){return this.clone({name:Ie,value:Ze,op:"a"})}set(Ie,Ze){return this.clone({name:Ie,value:Ze,op:"s"})}delete(Ie,Ze){return this.clone({name:Ie,value:Ze,op:"d"})}maybeSetNormalizedName(Ie,Ze){this.normalizedNames.has(Ze)||this.normalizedNames.set(Ze,Ie)}init(){this.lazyInit&&(this.lazyInit instanceof et?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ie=>this.applyUpdate(Ie)),this.lazyUpdate=null))}copyFrom(Ie){Ie.init(),Array.from(Ie.headers.keys()).forEach(Ze=>{this.headers.set(Ze,Ie.headers.get(Ze)),this.normalizedNames.set(Ze,Ie.normalizedNames.get(Ze))})}clone(Ie){const Ze=new et;return Ze.lazyInit=this.lazyInit&&this.lazyInit instanceof et?this.lazyInit:this,Ze.lazyUpdate=(this.lazyUpdate||[]).concat([Ie]),Ze}applyUpdate(Ie){const Ze=Ie.name.toLowerCase();switch(Ie.op){case"a":case"s":let Bt=Ie.value;if("string"==typeof Bt&&(Bt=[Bt]),0===Bt.length)return;this.maybeSetNormalizedName(Ie.name,Ze);const Gt=("a"===Ie.op?this.headers.get(Ze):void 0)||[];Gt.push(...Bt),this.headers.set(Ze,Gt);break;case"d":const di=Ie.value;if(di){let ui=this.headers.get(Ze);if(!ui)return;ui=ui.filter(nn=>-1===di.indexOf(nn)),0===ui.length?(this.headers.delete(Ze),this.normalizedNames.delete(Ze)):this.headers.set(Ze,ui)}else this.headers.delete(Ze),this.normalizedNames.delete(Ze)}}setHeaderEntries(Ie,Ze){const Bt=(Array.isArray(Ze)?Ze:[Ze]).map(di=>di.toString()),Gt=Ie.toLowerCase();this.headers.set(Gt,Bt),this.maybeSetNormalizedName(Ie,Gt)}forEach(Ie){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ze=>Ie(this.normalizedNames.get(Ze),this.headers.get(Ze)))}}class lt{encodeKey(Ie){return Ti(Ie)}encodeValue(Ie){return Ti(Ie)}decodeKey(Ie){return decodeURIComponent(Ie)}decodeValue(Ie){return decodeURIComponent(Ie)}}const jt=/%(\d[a-f0-9])/gi,ni={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ti(Fe){return encodeURIComponent(Fe).replace(jt,(Ie,Ze)=>ni[Ze]??Ie)}function qt(Fe){return`${Fe}`}class Ne{constructor(Ie={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ie.encoder||new lt,Ie.fromString){if(Ie.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function bt(Fe,Ie){const Ze=new Map;return Fe.length>0&&Fe.replace(/^\?/,"").split("&").forEach(Gt=>{const di=Gt.indexOf("="),[ui,nn]=-1==di?[Ie.decodeKey(Gt),""]:[Ie.decodeKey(Gt.slice(0,di)),Ie.decodeValue(Gt.slice(di+1))],Ni=Ze.get(ui)||[];Ni.push(nn),Ze.set(ui,Ni)}),Ze}(Ie.fromString,this.encoder)}else Ie.fromObject?(this.map=new Map,Object.keys(Ie.fromObject).forEach(Ze=>{const Bt=Ie.fromObject[Ze],Gt=Array.isArray(Bt)?Bt.map(qt):[qt(Bt)];this.map.set(Ze,Gt)})):this.map=null}has(Ie){return this.init(),this.map.has(Ie)}get(Ie){this.init();const Ze=this.map.get(Ie);return Ze?Ze[0]:null}getAll(Ie){return this.init(),this.map.get(Ie)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ie,Ze){return this.clone({param:Ie,value:Ze,op:"a"})}appendAll(Ie){const Ze=[];return Object.keys(Ie).forEach(Bt=>{const Gt=Ie[Bt];Array.isArray(Gt)?Gt.forEach(di=>{Ze.push({param:Bt,value:di,op:"a"})}):Ze.push({param:Bt,value:Gt,op:"a"})}),this.clone(Ze)}set(Ie,Ze){return this.clone({param:Ie,value:Ze,op:"s"})}delete(Ie,Ze){return this.clone({param:Ie,value:Ze,op:"d"})}toString(){return this.init(),this.keys().map(Ie=>{const Ze=this.encoder.encodeKey(Ie);return this.map.get(Ie).map(Bt=>Ze+"="+this.encoder.encodeValue(Bt)).join("&")}).filter(Ie=>""!==Ie).join("&")}clone(Ie){const Ze=new Ne({encoder:this.encoder});return Ze.cloneFrom=this.cloneFrom||this,Ze.updates=(this.updates||[]).concat(Ie),Ze}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ie=>this.map.set(Ie,this.cloneFrom.map.get(Ie))),this.updates.forEach(Ie=>{switch(Ie.op){case"a":case"s":const Ze=("a"===Ie.op?this.map.get(Ie.param):void 0)||[];Ze.push(qt(Ie.value)),this.map.set(Ie.param,Ze);break;case"d":if(void 0===Ie.value){this.map.delete(Ie.param);break}{let Bt=this.map.get(Ie.param)||[];const Gt=Bt.indexOf(qt(Ie.value));-1!==Gt&&Bt.splice(Gt,1),Bt.length>0?this.map.set(Ie.param,Bt):this.map.delete(Ie.param)}}}),this.cloneFrom=this.updates=null)}}class Oe{constructor(){this.map=new Map}set(Ie,Ze){return this.map.set(Ie,Ze),this}get(Ie){return this.map.has(Ie)||this.map.set(Ie,Ie.defaultValue()),this.map.get(Ie)}delete(Ie){return this.map.delete(Ie),this}has(Ie){return this.map.has(Ie)}keys(){return this.map.keys()}}function Pt(Fe){return typeof ArrayBuffer<"u"&&Fe instanceof ArrayBuffer}function Nt(Fe){return typeof Blob<"u"&&Fe instanceof Blob}function fi(Fe){return typeof FormData<"u"&&Fe instanceof FormData}class Ri{constructor(Ie,Ze,Bt,Gt){let di;if(this.url=Ze,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ie.toUpperCase(),function Ft(Fe){switch(Fe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Gt?(this.body=void 0!==Bt?Bt:null,di=Gt):di=Bt,di&&(this.reportProgress=!!di.reportProgress,this.withCredentials=!!di.withCredentials,di.responseType&&(this.responseType=di.responseType),di.headers&&(this.headers=di.headers),di.context&&(this.context=di.context),di.params&&(this.params=di.params)),this.headers||(this.headers=new et),this.context||(this.context=new Oe),this.params){const ui=this.params.toString();if(0===ui.length)this.urlWithParams=Ze;else{const nn=Ze.indexOf("?");this.urlWithParams=Ze+(-1===nn?"?":nn<Ze.length-1?"&":"")+ui}}else this.params=new Ne,this.urlWithParams=Ze}serializeBody(){return null===this.body?null:Pt(this.body)||Nt(this.body)||fi(this.body)||function vi(Fe){return typeof URLSearchParams<"u"&&Fe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ne?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||fi(this.body)?null:Nt(this.body)?this.body.type||null:Pt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ne?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ie={}){const Ze=Ie.method||this.method,Bt=Ie.url||this.url,Gt=Ie.responseType||this.responseType,di=void 0!==Ie.body?Ie.body:this.body,ui=void 0!==Ie.withCredentials?Ie.withCredentials:this.withCredentials,nn=void 0!==Ie.reportProgress?Ie.reportProgress:this.reportProgress;let Ni=Ie.headers||this.headers,$n=Ie.params||this.params;const Mo=Ie.context??this.context;return void 0!==Ie.setHeaders&&(Ni=Object.keys(Ie.setHeaders).reduce((Ar,In)=>Ar.set(In,Ie.setHeaders[In]),Ni)),Ie.setParams&&($n=Object.keys(Ie.setParams).reduce((Ar,In)=>Ar.set(In,Ie.setParams[In]),$n)),new Ri(Ze,Bt,di,{params:$n,headers:Ni,context:Mo,reportProgress:nn,responseType:Gt,withCredentials:ui})}}var qi=function(Fe){return Fe[Fe.Sent=0]="Sent",Fe[Fe.UploadProgress=1]="UploadProgress",Fe[Fe.ResponseHeader=2]="ResponseHeader",Fe[Fe.DownloadProgress=3]="DownloadProgress",Fe[Fe.Response=4]="Response",Fe[Fe.User=5]="User",Fe}(qi||{});class Dn{constructor(Ie,Ze=200,Bt="OK"){this.headers=Ie.headers||new et,this.status=void 0!==Ie.status?Ie.status:Ze,this.statusText=Ie.statusText||Bt,this.url=Ie.url||null,this.ok=this.status>=200&&this.status<300}}class Hn extends Dn{constructor(Ie={}){super(Ie),this.type=qi.ResponseHeader}clone(Ie={}){return new Hn({headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class _n extends Dn{constructor(Ie={}){super(Ie),this.type=qi.Response,this.body=void 0!==Ie.body?Ie.body:null}clone(Ie={}){return new _n({body:void 0!==Ie.body?Ie.body:this.body,headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class Vn extends Dn{constructor(Ie){super(Ie,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ie.url||"(unknown url)"}`:`Http failure response for ${Ie.url||"(unknown url)"}: ${Ie.status} ${Ie.statusText}`,this.error=Ie.error||null}}function Sn(Fe,Ie){return{body:Ie,headers:Fe.headers,context:Fe.context,observe:Fe.observe,params:Fe.params,reportProgress:Fe.reportProgress,responseType:Fe.responseType,withCredentials:Fe.withCredentials}}let Et=(()=>{class Fe{constructor(Ze){this.handler=Ze}request(Ze,Bt,Gt={}){let di;if(Ze instanceof Ri)di=Ze;else{let Ni,$n;Ni=Gt.headers instanceof et?Gt.headers:new et(Gt.headers),Gt.params&&($n=Gt.params instanceof Ne?Gt.params:new Ne({fromObject:Gt.params})),di=new Ri(Ze,Bt,void 0!==Gt.body?Gt.body:null,{headers:Ni,context:Gt.context,params:$n,reportProgress:Gt.reportProgress,responseType:Gt.responseType||"json",withCredentials:Gt.withCredentials})}const ui=(0,l.of)(di).pipe((0,He.b)(Ni=>this.handler.handle(Ni)));if(Ze instanceof Ri||"events"===Gt.observe)return ui;const nn=ui.pipe((0,ne.h)(Ni=>Ni instanceof _n));switch(Gt.observe||"body"){case"body":switch(di.responseType){case"arraybuffer":return nn.pipe((0,Ge.U)(Ni=>{if(null!==Ni.body&&!(Ni.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ni.body}));case"blob":return nn.pipe((0,Ge.U)(Ni=>{if(null!==Ni.body&&!(Ni.body instanceof Blob))throw new Error("Response is not a Blob.");return Ni.body}));case"text":return nn.pipe((0,Ge.U)(Ni=>{if(null!==Ni.body&&"string"!=typeof Ni.body)throw new Error("Response is not a string.");return Ni.body}));default:return nn.pipe((0,Ge.U)(Ni=>Ni.body))}case"response":return nn;default:throw new Error(`Unreachable: unhandled observe type ${Gt.observe}}`)}}delete(Ze,Bt={}){return this.request("DELETE",Ze,Bt)}get(Ze,Bt={}){return this.request("GET",Ze,Bt)}head(Ze,Bt={}){return this.request("HEAD",Ze,Bt)}jsonp(Ze,Bt){return this.request("JSONP",Ze,{params:(new Ne).append(Bt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ze,Bt={}){return this.request("OPTIONS",Ze,Bt)}patch(Ze,Bt,Gt={}){return this.request("PATCH",Ze,Sn(Gt,Bt))}post(Ze,Bt,Gt={}){return this.request("POST",Ze,Sn(Gt,Bt))}put(Ze,Bt,Gt={}){return this.request("PUT",Ze,Sn(Gt,Bt))}}return Fe.\u0275fac=function(Ze){return new(Ze||Fe)(C.LFG(it))},Fe.\u0275prov=C.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();function rt(Fe,Ie){return Ie(Fe)}function dt(Fe,Ie){return(Ze,Bt)=>Ie.intercept(Ze,{handle:Gt=>Fe(Gt,Bt)})}const ut=new C.OlP(""),Yt=new C.OlP(""),Ut=new C.OlP("");function ti(){let Fe=null;return(Ie,Ze)=>{null===Fe&&(Fe=((0,C.f3M)(ut,{optional:!0})??[]).reduceRight(dt,rt));const Bt=(0,C.f3M)(C.HDt),Gt=Bt.add();return Fe(Ie,Ze).pipe((0,Pe.x)(()=>Bt.remove(Gt)))}}let ot=(()=>{class Fe extends it{constructor(Ze,Bt){super(),this.backend=Ze,this.injector=Bt,this.chain=null,this.pendingTasks=(0,C.f3M)(C.HDt)}handle(Ze){if(null===this.chain){const Gt=Array.from(new Set([...this.injector.get(Yt),...this.injector.get(Ut,[])]));this.chain=Gt.reduceRight((di,ui)=>function Me(Fe,Ie,Ze){return(Bt,Gt)=>Ze.runInContext(()=>Ie(Bt,di=>Fe(di,Gt)))}(di,ui,this.injector),rt)}const Bt=this.pendingTasks.add();return this.chain(Ze,Gt=>this.backend.handle(Gt)).pipe((0,Pe.x)(()=>this.pendingTasks.remove(Bt)))}}return Fe.\u0275fac=function(Ze){return new(Ze||Fe)(C.LFG(Le),C.LFG(C.lqb))},Fe.\u0275prov=C.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const he=/^\)\]\}',?\n/;let Re=(()=>{class Fe{constructor(Ze){this.xhrFactory=Ze}handle(Ze){if("JSONP"===Ze.method)throw new C.vHH(-2800,!1);const Bt=this.xhrFactory;return(Bt.\u0275loadImpl?(0,ae.D)(Bt.\u0275loadImpl()):(0,l.of)(null)).pipe((0,qe.w)(()=>new v.y(di=>{const ui=Bt.build();if(ui.open(Ze.method,Ze.urlWithParams),Ze.withCredentials&&(ui.withCredentials=!0),Ze.headers.forEach((on,fn)=>ui.setRequestHeader(on,fn.join(","))),Ze.headers.has("Accept")||ui.setRequestHeader("Accept","application/json, text/plain, */*"),!Ze.headers.has("Content-Type")){const on=Ze.detectContentTypeHeader();null!==on&&ui.setRequestHeader("Content-Type",on)}if(Ze.responseType){const on=Ze.responseType.toLowerCase();ui.responseType="json"!==on?on:"text"}const nn=Ze.serializeBody();let Ni=null;const $n=()=>{if(null!==Ni)return Ni;const on=ui.statusText||"OK",fn=new et(ui.getAllResponseHeaders()),Mr=function de(Fe){return"responseURL"in Fe&&Fe.responseURL?Fe.responseURL:/^X-Request-URL:/m.test(Fe.getAllResponseHeaders())?Fe.getResponseHeader("X-Request-URL"):null}(ui)||Ze.url;return Ni=new Hn({headers:fn,status:ui.status,statusText:on,url:Mr}),Ni},Mo=()=>{let{headers:on,status:fn,statusText:Mr,url:rs}=$n(),Qn=null;204!==fn&&(Qn=typeof ui.response>"u"?ui.responseText:ui.response),0===fn&&(fn=Qn?200:0);let hr=fn>=200&&fn<300;if("json"===Ze.responseType&&"string"==typeof Qn){const Do=Qn;Qn=Qn.replace(he,"");try{Qn=""!==Qn?JSON.parse(Qn):null}catch(io){Qn=Do,hr&&(hr=!1,Qn={error:io,text:Qn})}}hr?(di.next(new _n({body:Qn,headers:on,status:fn,statusText:Mr,url:rs||void 0})),di.complete()):di.error(new Vn({error:Qn,headers:on,status:fn,statusText:Mr,url:rs||void 0}))},Ar=on=>{const{url:fn}=$n(),Mr=new Vn({error:on,status:ui.status||0,statusText:ui.statusText||"Unknown Error",url:fn||void 0});di.error(Mr)};let In=!1;const Fr=on=>{In||(di.next($n()),In=!0);let fn={type:qi.DownloadProgress,loaded:on.loaded};on.lengthComputable&&(fn.total=on.total),"text"===Ze.responseType&&ui.responseText&&(fn.partialText=ui.responseText),di.next(fn)},to=on=>{let fn={type:qi.UploadProgress,loaded:on.loaded};on.lengthComputable&&(fn.total=on.total),di.next(fn)};return ui.addEventListener("load",Mo),ui.addEventListener("error",Ar),ui.addEventListener("timeout",Ar),ui.addEventListener("abort",Ar),Ze.reportProgress&&(ui.addEventListener("progress",Fr),null!==nn&&ui.upload&&ui.upload.addEventListener("progress",to)),ui.send(nn),di.next({type:qi.Sent}),()=>{ui.removeEventListener("error",Ar),ui.removeEventListener("abort",Ar),ui.removeEventListener("load",Mo),ui.removeEventListener("timeout",Ar),Ze.reportProgress&&(ui.removeEventListener("progress",Fr),null!==nn&&ui.upload&&ui.upload.removeEventListener("progress",to)),ui.readyState!==ui.DONE&&ui.abort()}})))}}return Fe.\u0275fac=function(Ze){return new(Ze||Fe)(C.LFG(Ue.JF))},Fe.\u0275prov=C.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const xt=new C.OlP("XSRF_ENABLED"),Ot=new C.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),hi=new C.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Qi{}let tn=(()=>{class Fe{constructor(Ze,Bt,Gt){this.doc=Ze,this.platform=Bt,this.cookieName=Gt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ze=this.doc.cookie||"";return Ze!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,Ue.Mx)(Ze,this.cookieName),this.lastCookieString=Ze),this.lastToken}}return Fe.\u0275fac=function(Ze){return new(Ze||Fe)(C.LFG(Ue.K0),C.LFG(C.Lbi),C.LFG(Ot))},Fe.\u0275prov=C.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();function Ji(Fe,Ie){const Ze=Fe.url.toLowerCase();if(!(0,C.f3M)(xt)||"GET"===Fe.method||"HEAD"===Fe.method||Ze.startsWith("http://")||Ze.startsWith("https://"))return Ie(Fe);const Bt=(0,C.f3M)(Qi).getToken(),Gt=(0,C.f3M)(hi);return null!=Bt&&!Fe.headers.has(Gt)&&(Fe=Fe.clone({headers:Fe.headers.set(Gt,Bt)})),Ie(Fe)}var zt=function(Fe){return Fe[Fe.Interceptors=0]="Interceptors",Fe[Fe.LegacyInterceptors=1]="LegacyInterceptors",Fe[Fe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Fe[Fe.NoXsrfProtection=3]="NoXsrfProtection",Fe[Fe.JsonpSupport=4]="JsonpSupport",Fe[Fe.RequestsMadeViaParent=5]="RequestsMadeViaParent",Fe[Fe.Fetch=6]="Fetch",Fe}(zt||{});function li(Fe,Ie){return{\u0275kind:Fe,\u0275providers:Ie}}function vt(...Fe){const Ie=[Et,Re,ot,{provide:it,useExisting:ot},{provide:Le,useExisting:Re},{provide:Yt,useValue:Ji,multi:!0},{provide:xt,useValue:!0},{provide:Qi,useClass:tn}];for(const Ze of Fe)Ie.push(...Ze.\u0275providers);return(0,C.MR2)(Ie)}const V=new C.OlP("LEGACY_INTERCEPTOR_FN");let pe=(()=>{class Fe{}return Fe.\u0275fac=function(Ze){return new(Ze||Fe)},Fe.\u0275mod=C.oAB({type:Fe}),Fe.\u0275inj=C.cJS({providers:[vt(li(zt.LegacyInterceptors,[{provide:V,useFactory:ti},{provide:Yt,useExisting:V,multi:!0}]))]}),Fe})()},5879:(gi,mt,H)=>{"use strict";H.d(mt,{$8M:()=>Su,$WT:()=>As,$Z:()=>Q_,AFp:()=>be,ALo:()=>vb,AaK:()=>Le,Akn:()=>oc,BQk:()=>pf,CHM:()=>sl,CRH:()=>Nb,DdM:()=>ab,EJc:()=>fo,EiD:()=>mh,EpF:()=>Fy,F$t:()=>jy,F4k:()=>Ly,FYo:()=>wh,FiY:()=>Lu,G48:()=>BE,Gf:()=>kf,GfV:()=>Ch,GkF:()=>zg,Gpc:()=>lt,Gre:()=>pv,HDt:()=>ps,Hsn:()=>Hy,Ikx:()=>Qg,JOm:()=>$u,JVY:()=>rg,JZr:()=>qt,Jf7:()=>ml,KtG:()=>Hs,L6k:()=>Ip,LAX:()=>vd,LFG:()=>j,Lbi:()=>tt,Lck:()=>Kv,MAs:()=>Py,MMx:()=>Jv,MR2:()=>Cm,NdJ:()=>Vg,O4$:()=>b,Ojb:()=>St,OlP:()=>Er,Oqu:()=>Jg,P3R:()=>xm,PXZ:()=>kE,Q6J:()=>Fg,QGY:()=>Bg,QbO:()=>st,Qsj:()=>Mm,R0b:()=>ur,RDi:()=>gd,Rgc:()=>Fh,SBq:()=>nc,Sil:()=>is,Suo:()=>Lb,TTD:()=>$r,TgZ:()=>uf,Tol:()=>iv,Udp:()=>Yg,VKq:()=>lb,VuI:()=>uM,W1O:()=>Vb,WFA:()=>Ug,WLB:()=>cb,XFs:()=>pt,Xpm:()=>os,Xq5:()=>Eg,Xts:()=>$c,Y36:()=>_u,YKP:()=>Yv,YNc:()=>cf,Yjl:()=>Na,Yz7:()=>ut,Z0I:()=>ot,ZZ4:()=>J1,_Bn:()=>qv,_UZ:()=>Ng,_Vd:()=>Ss,_c5:()=>tM,_uU:()=>Xg,aQg:()=>Q1,c2e:()=>Cn,cJS:()=>Ut,cg1:()=>t_,d8E:()=>e_,dDg:()=>SE,dqk:()=>Re,eBb:()=>Ap,eFA:()=>iE,eJc:()=>w_,ekj:()=>Kg,eoX:()=>JC,f3M:()=>ge,g9A:()=>Ke,h0i:()=>Rh,hGG:()=>iM,hij:()=>yf,iGM:()=>Af,ifc:()=>Te,ip1:()=>Ii,jDz:()=>Qv,kEZ:()=>db,kL8:()=>Ev,kcU:()=>D,lG2:()=>Ea,lcZ:()=>bb,lqb:()=>p,lri:()=>Du,mCW:()=>bd,n5z:()=>Fd,n_E:()=>Zm,oAB:()=>wa,oJD:()=>vm,oxw:()=>Vy,pB0:()=>Ec,q3G:()=>qa,qFp:()=>mM,qLn:()=>Ed,qOj:()=>Cg,qZA:()=>hf,qzn:()=>Pa,rFY:()=>mb,rWj:()=>A_,rg0:()=>wl,s9C:()=>jg,sBO:()=>VE,s_b:()=>Sf,soG:()=>cr,tb:()=>Z1,tp0:()=>Nu,uIk:()=>Dg,vHH:()=>Ne,vpe:()=>ac,wAp:()=>Ph,xp6:()=>$_,ynx:()=>mf,z2F:()=>Ff,z3N:()=>tc,zSh:()=>pu,zs3:()=>Dd});var C=H(8645),l=H(7394),ae=H(5619),v=H(5592),He=H(3019),ne=H(2096),Ge=H(3020),Pe=H(4664),qe=H(3997);function Ue(e){for(let n in e)if(e[n]===Ue)return n;throw Error("Could not find renamed property on target object.")}function it(e,n){for(const s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=n[s])}function Le(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Le).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const s=n.indexOf("\n");return-1===s?n:n.substring(0,s)}function et(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Xe=Ue({__forward_ref__:Ue});function lt(e){return e.__forward_ref__=lt,e.toString=function(){return Le(this())},e}function bt(e){return jt(e)?e():e}function jt(e){return"function"==typeof e&&e.hasOwnProperty(Xe)&&e.__forward_ref__===lt}function ni(e){return e&&!!e.\u0275providers}const qt="https://g.co/ng/security#xss";class Ne extends Error{constructor(n,s){super(function je(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,s)),this.code=n}}function Oe(e){return"string"==typeof e?e:null==e?"":String(e)}function vi(e,n){throw new Ne(-201,!1)}function ai(e,n){null==e&&function ze(e,n,s,u){throw new Error(`ASSERTION ERROR: ${e}`+(null==u?"":` [Expected=> ${s} ${u} ${n} <=Actual]`))}(n,e,null,"!=")}function ut(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ut(e){return{providers:e.providers||[],imports:e.imports||[]}}function ti(e){return Dt(e,Zi)||Dt(e,bn)}function ot(e){return null!==ti(e)}function Dt(e,n){return e.hasOwnProperty(n)?e[n]:null}function yn(e){return e&&(e.hasOwnProperty(Fn)||e.hasOwnProperty(Qt))?e[Fn]:null}const Zi=Ue({\u0275prov:Ue}),Fn=Ue({\u0275inj:Ue}),bn=Ue({ngInjectableDef:Ue}),Qt=Ue({ngInjectorDef:Ue});var pt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(pt||{});let ce;function ke(e){const n=ce;return ce=e,n}function he(e,n,s){const u=ti(e);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:s&pt.Optional?null:void 0!==n?n:void vi(Le(e))}const Re=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_i={},hi="__NG_DI_FLAG__",Qi="ngTempTokenPath",Ji=/\n/gm,zt="__source";let li;function q(e){const n=li;return li=e,n}function V(e,n=pt.Default){if(void 0===li)throw new Ne(-203,!1);return null===li?he(e,void 0,n):li.get(e,n&pt.Optional?null:void 0,n)}function j(e,n=pt.Default){return(function Se(){return ce}()||V)(bt(e),n)}function ge(e,n=pt.Default){return j(e,Ae(n))}function Ae(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ve(e){const n=[];for(let s=0;s<e.length;s++){const u=bt(e[s]);if(Array.isArray(u)){if(0===u.length)throw new Ne(900,!1);let g,M=pt.Default;for(let P=0;P<u.length;P++){const L=u[P],U=X(L);"number"==typeof U?-1===U?g=L.token:M|=U:g=L}n.push(j(g,M))}else n.push(j(u))}return n}function se(e,n){return e[hi]=n,e.prototype[hi]=n,e}function X(e){return e[hi]}function at(e){return{toString:e}.toString()}var xe=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(xe||{}),Te=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Te||{});const ue={},De=[],Je=Ue({\u0275cmp:Ue}),Tt=Ue({\u0275dir:Ue}),Fe=Ue({\u0275pipe:Ue}),Ie=Ue({\u0275mod:Ue}),Ze=Ue({\u0275fac:Ue}),Bt=Ue({__NG_ELEMENT_ID__:Ue}),Gt=Ue({__NG_ENV_ID__:Ue});function di(e,n,s){let u=e.length;for(;;){const g=e.indexOf(n,s);if(-1===g)return g;if(0===g||e.charCodeAt(g-1)<=32){const M=n.length;if(g+M===u||e.charCodeAt(g+M)<=32)return g}s=g+1}}function ui(e,n,s){let u=0;for(;u<s.length;){const g=s[u];if("number"==typeof g){if(0!==g)break;u++;const M=s[u++],P=s[u++],L=s[u++];e.setAttribute(n,P,L,M)}else{const M=g,P=s[++u];Ni(M)?e.setProperty(n,M,P):e.setAttribute(n,M,P),u++}}return u}function nn(e){return 3===e||4===e||6===e}function Ni(e){return 64===e.charCodeAt(0)}function $n(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let s=-1;for(let u=0;u<n.length;u++){const g=n[u];"number"==typeof g?s=g:0===s||Mo(e,s,g,null,-1===s||2===s?n[++u]:null)}}return e}function Mo(e,n,s,u,g){let M=0,P=e.length;if(-1===n)P=-1;else for(;M<e.length;){const L=e[M++];if("number"==typeof L){if(L===n){P=-1;break}if(L>n){P=M-1;break}}}for(;M<e.length;){const L=e[M];if("number"==typeof L)break;if(L===s){if(null===u)return void(null!==g&&(e[M+1]=g));if(u===e[M+1])return void(e[M+2]=g)}M++,null!==u&&M++,null!==g&&M++}-1!==P&&(e.splice(P,0,n),M=P+1),e.splice(M++,0,s),null!==u&&e.splice(M++,0,u),null!==g&&e.splice(M++,0,g)}const Ar="ng-template";function In(e,n,s){let u=0,g=!0;for(;u<e.length;){let M=e[u++];if("string"==typeof M&&g){const P=e[u++];if(s&&"class"===M&&-1!==di(P.toLowerCase(),n,0))return!0}else{if(1===M){for(;u<e.length&&"string"==typeof(M=e[u++]);)if(M.toLowerCase()===n)return!0;return!1}"number"==typeof M&&(g=!1)}}return!1}function Fr(e){return 4===e.type&&e.value!==Ar}function to(e,n,s){return n===(4!==e.type||s?e.value:Ar)}function on(e,n,s){let u=4;const g=e.attrs||[],M=function hr(e){for(let n=0;n<e.length;n++)if(nn(e[n]))return n;return e.length}(g);let P=!1;for(let L=0;L<n.length;L++){const U=n[L];if("number"!=typeof U){if(!P)if(4&u){if(u=2|1&u,""!==U&&!to(e,U,s)||""===U&&1===n.length){if(fn(u))return!1;P=!0}}else{const J=8&u?U:n[++L];if(8&u&&null!==e.attrs){if(!In(e.attrs,J,s)){if(fn(u))return!1;P=!0}continue}const Ve=Mr(8&u?"class":U,g,Fr(e),s);if(-1===Ve){if(fn(u))return!1;P=!0;continue}if(""!==J){let ht;ht=Ve>M?"":g[Ve+1].toLowerCase();const Mt=8&u?ht:null;if(Mt&&-1!==di(Mt,J,0)||2&u&&J!==ht){if(fn(u))return!1;P=!0}}}}else{if(!P&&!fn(u)&&!fn(U))return!1;if(P&&fn(U))continue;P=!1,u=U|1&u}}return fn(u)||P}function fn(e){return 0==(1&e)}function Mr(e,n,s,u){if(null===n)return-1;let g=0;if(u||!s){let M=!1;for(;g<n.length;){const P=n[g];if(P===e)return g;if(3===P||6===P)M=!0;else{if(1===P||2===P){let L=n[++g];for(;"string"==typeof L;)L=n[++g];continue}if(4===P)break;if(0===P){g+=4;continue}}g+=M?1:2}return-1}return function Do(e,n){let s=e.indexOf(4);if(s>-1)for(s++;s<e.length;){const u=e[s];if("number"==typeof u)return-1;if(u===n)return s;s++}return-1}(n,e)}function rs(e,n,s=!1){for(let u=0;u<n.length;u++)if(on(e,n[u],s))return!0;return!1}function io(e,n){e:for(let s=0;s<n.length;s++){const u=n[s];if(e.length===u.length){for(let g=0;g<e.length;g++)if(e[g]!==u[g])continue e;return!0}}return!1}function no(e,n){return e?":not("+n.trim()+")":n}function mn(e){let n=e[0],s=1,u=2,g="",M=!1;for(;s<e.length;){let P=e[s];if("string"==typeof P)if(2&u){const L=e[++s];g+="["+P+(L.length>0?'="'+L+'"':"")+"]"}else 8&u?g+="."+P:4&u&&(g+=" "+P);else""!==g&&!fn(P)&&(n+=no(M,g),g=""),u=P,M=M||!fn(u);s++}return""!==g&&(n+=no(M,g)),n}function os(e){return at(()=>{const n=ks(e),s={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===xe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Te.Emulated,styles:e.styles||De,_:null,schemas:e.schemas||null,tView:null,id:""};go(s);const u=e.dependencies;return s.directiveDefs=qo(u,!1),s.pipeDefs=qo(u,!0),s.id=function Yo(e){let n=0;const s=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const g of s)n=Math.imul(31,n)+g.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(s),s})}function La(e){return cn(e)||Pr(e)}function Ic(e){return null!==e}function wa(e){return at(()=>({type:e.type,bootstrap:e.bootstrap||De,declarations:e.declarations||De,imports:e.imports||De,exports:e.exports||De,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Ca(e,n){if(null==e)return ue;const s={};for(const u in e)if(e.hasOwnProperty(u)){let g=e[u],M=g;Array.isArray(g)&&(M=g[1],g=g[0]),s[g]=u,n&&(n[g]=M)}return s}function Ea(e){return at(()=>{const n=ks(e);return go(n),n})}function Na(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function cn(e){return e[Je]||null}function Pr(e){return e[Tt]||null}function Wr(e){return e[Fe]||null}function As(e){const n=cn(e)||Pr(e)||Wr(e);return null!==n&&n.standalone}function vr(e,n){const s=e[Ie]||null;if(!s&&!0===n)throw new Error(`Type ${Le(e)} does not have '\u0275mod' property.`);return s}function ks(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||ue,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||De,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ca(e.inputs,n),outputs:Ca(e.outputs)}}function go(e){e.features?.forEach(n=>n(e))}function qo(e,n){if(!e)return null;const s=n?Wr:La;return()=>("function"==typeof e?e():e).map(u=>s(u)).filter(Ic)}const gr=0,Ai=1,rn=2,An=3,_o=4,Lr=5,Yn=6,Ko=7,mr=8,jo=9,Oo=10,sn=11,Ro=12,Js=13,un=14,ar=15,gs=16,ss=17,yo=18,Qs=19,za=20,_s=21,Ho=22,vo=23,Ps=24,pn=25,tl=1,Ba=2,co=7,ea=9,br=11;function Dr(e){return Array.isArray(e)&&"object"==typeof e[tl]}function Xn(e){return Array.isArray(e)&&!0===e[tl]}function bo(e){return 0!=(4&e.flags)}function Vr(e){return e.componentOffset>-1}function Gn(e){return 1==(1&e.flags)}function qr(e){return!!e.template}function Va(e){return 0!=(512&e[rn])}function uo(e,n){return e.hasOwnProperty(Ze)?e[Ze]:null}let ol=Re.WeakRef??class Ur{constructor(n){this.ref=n}deref(){return this.ref}},Ha=0,Fo=null,xr=!1;function Pn(e){const n=Fo;return Fo=e,n}class wr{constructor(){this.id=Ha++,this.ref=function Ns(e){return new ol(e)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[n,s]of this.producers){const u=s.producerNode.deref();if(null!=u&&s.atTrackingVersion===this.trackingVersion){if(u.producerPollStatus(s.seenValueVersion))return!0}else this.producers.delete(n),u?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const n=xr;xr=!0;try{for(const[s,u]of this.consumers){const g=u.consumerNode.deref();null!=g&&g.trackingVersion===u.atTrackingVersion?g.onConsumerDependencyMayHaveChanged():(this.consumers.delete(s),g?.producers.delete(this.id))}}finally{xr=n}}producerAccessed(){if(xr)throw new Error("");if(null===Fo)return;let n=Fo.producers.get(this.id);void 0===n?(n={consumerNode:Fo.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Fo.trackingVersion},Fo.producers.set(this.id,n),this.consumers.set(Fo.id,n)):(n.seenValueVersion=this.valueVersion,n.atTrackingVersion=Fo.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Fo?.consumerAllowSignalWrites}producerPollStatus(n){return this.valueVersion!==n||(this.onProducerUpdateValueVersion(),this.valueVersion!==n)}}let $a=null;function wl(e){const n=Pn(null);try{return e()}finally{Pn(n)}}const ys=()=>{};class Hr extends wr{constructor(n,s,u){super(),this.watch=n,this.schedule=s,this.dirty=!1,this.cleanupFn=ys,this.registerOnCleanup=g=>{this.cleanupFn=g},this.consumerAllowSignalWrites=u}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const n=Pn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ys,this.watch(this.registerOnCleanup)}finally{Pn(n)}}cleanup(){this.cleanupFn()}}class ha{constructor(n,s,u){this.previousValue=n,this.currentValue=s,this.firstChange=u}isFirstChange(){return this.firstChange}}function $r(){return $o}function $o(e){return e.type.prototype.ngOnChanges&&(e.setInput=oo),Cl}function Cl(){const e=Ga(this),n=e?.current;if(n){const s=e.previous;if(s===ue)e.previous=n;else for(let u in n)s[u]=n[u];e.current=null,this.ngOnChanges(n)}}function oo(e,n,s,u){const g=this.declaredInputs[s],M=Ga(e)||function ql(e,n){return e[El]=n}(e,{previous:ue,current:null}),P=M.current||(M.current={}),L=M.previous,U=L[g];P[g]=new ha(U&&U.currentValue,n,L===ue),e[u]=n}$r.ngInherit=!0;const El="__ngSimpleChanges__";function Ga(e){return e[El]||null}const Xo=function(e,n,s){},Ml="svg";function _r(e){for(;Array.isArray(e);)e=e[gr];return e}function F(e,n){return _r(n[e])}function Q(e,n){return _r(n[e.index])}function fe(e,n){return e.data[n]}function Ye(e,n){return e[n]}function It(e,n){const s=n[e];return Dr(s)?s:s[gr]}function Ln(e,n){return null==n?null:e[n]}function Nn(e){e[ss]=0}function En(e){1024&e[rn]||(e[rn]|=1024,On(e,1))}function Zn(e){1024&e[rn]&&(e[rn]&=-1025,On(e,-1))}function On(e,n){let s=e[An];if(null===s)return;s[Lr]+=n;let u=s;for(s=s[An];null!==s&&(1===n&&1===u[Lr]||-1===n&&0===u[Lr]);)s[Lr]+=n,u=s,s=s[An]}const Yi={lFrame:kl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function hn(){return Yi.bindingsEnabled}function Za(){return null!==Yi.skipHydrationRootTNode}function wt(){return Yi.lFrame.lView}function pi(){return Yi.lFrame.tView}function sl(e){return Yi.lFrame.contextLView=e,e[mr]}function Hs(e){return Yi.lFrame.contextLView=null,e}function xo(){let e=So();for(;null!==e&&64===e.type;)e=e.parent;return e}function So(){return Yi.lFrame.currentTNode}function To(e,n){const s=Yi.lFrame;s.currentTNode=e,s.isParent=n}function Ta(){return Yi.lFrame.isParent}function al(){Yi.lFrame.isParent=!1}function Io(){const e=Yi.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function xs(){return Yi.lFrame.bindingIndex++}function $s(e){const n=Yi.lFrame,s=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,s}function Qc(e,n){const s=Yi.lFrame;s.bindingIndex=s.bindingRootIndex=e,Ia(n)}function Ia(e){Yi.lFrame.currentDirectiveIndex=e}function Kl(e){const n=Yi.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}function Tl(){return Yi.lFrame.currentQueryIndex}function Aa(e){Yi.lFrame.currentQueryIndex=e}function Xl(e){const n=e[Ai];return 2===n.type?n.declTNode:1===n.type?e[Yn]:null}function Il(e,n,s){if(s&pt.SkipSelf){let g=n,M=e;for(;!(g=g.parent,null!==g||s&pt.Host||(g=Xl(M),null===g||(M=M[un],10&g.type))););if(null===g)return!1;n=g,e=M}const u=Yi.lFrame=uc();return u.currentTNode=n,u.lView=e,!0}function Al(e){const n=uc(),s=e[Ai];Yi.lFrame=n,n.currentTNode=s.firstChild,n.lView=e,n.tView=s,n.contextLView=e,n.bindingIndex=s.bindingStartIndex,n.inI18n=!1}function uc(){const e=Yi.lFrame,n=null===e?null:e.child;return null===n?kl(e):n}function kl(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Jn(){const e=Yi.lFrame;return Yi.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const E=Jn;function i(){const e=Jn();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function w(){return Yi.lFrame.selectedIndex}function S(e){Yi.lFrame.selectedIndex=e}function f(){const e=Yi.lFrame;return fe(e.tView,e.selectedIndex)}function b(){Yi.lFrame.currentNamespace=Ml}function D(){!function k(){Yi.lFrame.currentNamespace=null}()}let B=!0;function ee(){return B}function oe(e){B=e}function Ce(e,n){for(let s=n.directiveStart,u=n.directiveEnd;s<u;s++){const M=e.data[s].type.prototype,{ngAfterContentInit:P,ngAfterContentChecked:L,ngAfterViewInit:U,ngAfterViewChecked:J,ngOnDestroy:_e}=M;P&&(e.contentHooks??=[]).push(-s,P),L&&((e.contentHooks??=[]).push(s,L),(e.contentCheckHooks??=[]).push(s,L)),U&&(e.viewHooks??=[]).push(-s,U),J&&((e.viewHooks??=[]).push(s,J),(e.viewCheckHooks??=[]).push(s,J)),null!=_e&&(e.destroyHooks??=[]).push(s,_e)}}function nt(e,n,s){gt(e,n,3,s)}function yt(e,n,s,u){(3&e[rn])===s&&gt(e,n,s,u)}function $e(e,n){let s=e[rn];(3&s)===n&&(s&=8191,s+=1,e[rn]=s)}function gt(e,n,s,u){const M=u??-1,P=n.length-1;let L=0;for(let U=void 0!==u?65535&e[ss]:0;U<P;U++)if("number"==typeof n[U+1]){if(L=n[U],null!=u&&L>=u)break}else n[U]<0&&(e[ss]+=65536),(L<M||-1==M)&&(Lt(e,s,n,U),e[ss]=(4294901760&e[ss])+U+2),U++}function kt(e,n){Xo(4,e,n);const s=Pn(null);try{n.call(e)}finally{Pn(s),Xo(5,e,n)}}function Lt(e,n,s,u){const g=s[u]<0,M=s[u+1],L=e[g?-s[u]:s[u]];g?e[rn]>>13<e[ss]>>16&&(3&e[rn])===n&&(e[rn]+=8192,kt(L,M)):kt(L,M)}const Zt=-1;class ri{constructor(n,s,u){this.factory=n,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=u}}function Kn(e){return e!==Zt}function Tn(e){return 32767&e}function kr(e,n){let s=function dn(e){return e>>16}(e),u=n;for(;s>0;)u=u[un],s--;return u}let Lo=!0;function or(e){const n=Lo;return Lo=e,n}const Gs=255,ia=5;let fa=0;const Kr={};function Pl(e,n){const s=ho(e,n);if(-1!==s)return s;const u=n[Ai];u.firstCreatePass&&(e.injectorIndex=n.length,Go(u.data,e),Go(n,null),Go(u.blueprint,null));const g=nr(e,n),M=e.injectorIndex;if(Kn(g)){const P=Tn(g),L=kr(g,n),U=L[Ai].data;for(let J=0;J<8;J++)n[M+J]=L[P+J]|U[P+J]}return n[M+8]=g,M}function Go(e,n){e.push(0,0,0,0,0,0,0,0,n)}function ho(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function nr(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let s=0,u=null,g=n;for(;null!==g;){if(u=ep(g),null===u)return Zt;if(s++,g=g[un],-1!==u.injectorIndex)return u.injectorIndex|s<<16}return Zt}function Co(e,n,s){!function ka(e,n,s){let u;"string"==typeof s?u=s.charCodeAt(0)||0:s.hasOwnProperty(Bt)&&(u=s[Bt]),null==u&&(u=s[Bt]=fa++);const g=u&Gs;n.data[e+(g>>ia)]|=1<<g}(e,n,s)}function sr(e,n,s){if(s&pt.Optional||void 0!==e)return e;vi()}function Ao(e,n,s,u){if(s&pt.Optional&&void 0===u&&(u=null),!(s&(pt.Self|pt.Host))){const g=e[jo],M=ke(void 0);try{return g?g.get(n,u,s&pt.Optional):he(n,u,s&pt.Optional)}finally{ke(M)}}return sr(u,0,s)}function Zs(e,n,s,u=pt.Default,g){if(null!==e){if(2048&n[rn]&&!(u&pt.Self)){const P=function Qm(e,n,s,u,g){let M=e,P=n;for(;null!==M&&null!==P&&2048&P[rn]&&!(512&P[rn]);){const L=Jl(M,P,s,u|pt.Self,Kr);if(L!==Kr)return L;let U=M.parent;if(!U){const J=P[za];if(J){const _e=J.get(s,Kr,u);if(_e!==Kr)return _e}U=ep(P),P=P[un]}M=U}return g}(e,n,s,u,Kr);if(P!==Kr)return P}const M=Jl(e,n,s,u,Kr);if(M!==Kr)return M}return Ao(n,s,u,g)}function Jl(e,n,s,u,g){const M=function zr(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Bt)?e[Bt]:void 0;return"number"==typeof n?n>=0?n&Gs:kc:n}(s);if("function"==typeof M){if(!Il(n,e,u))return u&pt.Host?sr(g,0,u):Ao(n,s,u,g);try{const P=M(u);if(null!=P||u&pt.Optional)return P;vi()}finally{E()}}else if("number"==typeof M){let P=null,L=ho(e,n),U=Zt,J=u&pt.Host?n[ar][Yn]:null;for((-1===L||u&pt.SkipSelf)&&(U=-1===L?nr(e,n):n[L+8],U!==Zt&&hc(u,!1)?(P=n[Ai],L=Tn(U),n=kr(U,n)):L=-1);-1!==L;){const _e=n[Ai];if(td(M,L,_e.data)){const Ve=cl(L,n,s,P,u,J);if(Ve!==Kr)return Ve}U=n[L+8],U!==Zt&&hc(u,n[Ai].data[L+8]===J)&&td(M,L,n)?(P=_e,L=Tn(U),n=kr(U,n)):L=-1}}return g}function cl(e,n,s,u,g,M){const P=n[Ai],L=P.data[e+8],_e=ed(L,P,s,null==u?Vr(L)&&Lo:u!=P&&0!=(3&L.type),g&pt.Host&&M===L);return null!==_e?Ol(n,P,_e,L):Kr}function ed(e,n,s,u,g){const M=e.providerIndexes,P=n.data,L=1048575&M,U=e.directiveStart,_e=M>>20,ht=g?L+_e:e.directiveEnd;for(let Mt=u?L:L+_e;Mt<ht;Mt++){const oi=P[Mt];if(Mt<U&&s===oi||Mt>=U&&oi.type===s)return Mt}if(g){const Mt=P[U];if(Mt&&qr(Mt)&&Mt.type===s)return U}return null}function Ol(e,n,s,u){let g=e[s];const M=n.data;if(function ii(e){return e instanceof ri}(g)){const P=g;P.resolving&&function Pt(e,n){const s=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${e}${s}`)}(function Ft(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Oe(e)}(M[s]));const L=or(P.canSeeViewProviders);P.resolving=!0;const U=P.injectImpl?ke(P.injectImpl):null;Il(e,u,pt.Default);try{g=e[s]=P.factory(void 0,M,e,u),n.firstCreatePass&&s>=u.directiveStart&&function Ee(e,n,s){const{ngOnChanges:u,ngOnInit:g,ngDoCheck:M}=n.type.prototype;if(u){const P=$o(n);(s.preOrderHooks??=[]).push(e,P),(s.preOrderCheckHooks??=[]).push(e,P)}g&&(s.preOrderHooks??=[]).push(0-e,g),M&&((s.preOrderHooks??=[]).push(e,M),(s.preOrderCheckHooks??=[]).push(e,M))}(s,M[s],n)}finally{null!==U&&ke(U),or(L),P.resolving=!1,E()}}return g}function td(e,n,s){return!!(s[n+(e>>ia)]&1<<e)}function hc(e,n){return!(e&pt.Self||e&pt.Host&&n)}class Ws{constructor(n,s){this._tNode=n,this._lView=s}get(n,s,u){return Zs(this._tNode,this._lView,n,Ae(u),s)}}function kc(){return new Ws(xo(),wt())}function Fd(e){return at(()=>{const n=e.prototype.constructor,s=n[Ze]||Ld(n),u=Object.prototype;let g=Object.getPrototypeOf(e.prototype).constructor;for(;g&&g!==u;){const M=g[Ze]||Ld(g);if(M&&M!==s)return M;g=Object.getPrototypeOf(g)}return M=>new M})}function Ld(e){return jt(e)?()=>{const n=Ld(bt(e));return n&&n()}:uo(e)}function ep(e){const n=e[Ai],s=n.type;return 2===s?n.declTNode:1===s?e[Yn]:null}function Su(e){return function Zo(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const s=e.attrs;if(s){const u=s.length;let g=0;for(;g<u;){const M=s[g];if(nn(M))break;if(0===M)g+=2;else if("number"==typeof M)for(g++;g<u&&"string"==typeof s[g];)g++;else{if(M===n)return s[g+1];g+=2}}}return null}(xo(),e)}const mc="__parameters__";function Pc(e,n,s){return at(()=>{const u=function Iu(e){return function(...s){if(e){const u=e(...s);for(const g in u)this[g]=u[g]}}}(n);function g(...M){if(this instanceof g)return u.apply(this,M),this;const P=new g(...M);return L.annotation=P,L;function L(U,J,_e){const Ve=U.hasOwnProperty(mc)?U[mc]:Object.defineProperty(U,mc,{value:[]})[mc];for(;Ve.length<=_e;)Ve.push(null);return(Ve[_e]=Ve[_e]||[]).push(P),U}}return s&&(g.prototype=Object.create(s.prototype)),g.prototype.ngMetadataName=e,g.annotationCls=g,g})}function Rc(e,n){e.forEach(s=>Array.isArray(s)?Rc(s,n):n(s))}function Hh(e,n,s){n>=e.length?e.push(s):e.splice(n,0,s)}function rd(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Bd(e,n){const s=[];for(let u=0;u<e;u++)s.push(n);return s}function ao(e,n,s){let u=sd(e,n);return u>=0?e[1|u]=s:(u=~u,function Ou(e,n,s,u){let g=e.length;if(g==n)e.push(s,u);else if(1===g)e.push(u,e[0]),e[0]=s;else{for(g--,e.push(e[g-1],e[g]);g>n;)e[g]=e[g-2],g--;e[n]=s,e[n+1]=u}}(e,u,n,s)),u}function od(e,n){const s=sd(e,n);if(s>=0)return e[1|s]}function sd(e,n){return function ip(e,n,s){let u=0,g=e.length>>s;for(;g!==u;){const M=u+(g-u>>1),P=e[M<<s];if(n===P)return M<<s;P>n?g=M:u=M+1}return~(g<<s)}(e,n,1)}const Lu=se(Pc("Optional"),8),Nu=se(Pc("SkipSelf"),4);function ju(e){return 128==(128&e.flags)}var $u=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}($u||{});const qf=/^>|^->|<!--|-->|--!>|<!-$/g,Qh=/(<|>)/,Wd="\u200b$1\u200b";const _c=new Map;let hp=0;const tm="__ngContext__";function qs(e,n){Dr(n)?(e[tm]=n[Qs],function Yf(e){_c.set(e[Qs],e)}(n)):e[tm]=n}let nm;function rm(e,n){return nm(e,n)}function Jd(e){const n=e[An];return Xn(n)?n[An]:n}function zo(e){return sm(e[Ro])}function om(e){return sm(e[_o])}function sm(e){for(;null!==e&&!Xn(e);)e=e[_o];return e}function Nc(e,n,s,u,g){if(null!=u){let M,P=!1;Xn(u)?M=u:Dr(u)&&(P=!0,u=u[gr]);const L=_r(u);0===e&&null!==s?null==g?Ku(n,s,L):bc(n,s,L,g||null,!0):1===e&&null!==s?bc(n,s,L,g||null,!0):2===e?function Vc(e,n,s){const u=Ju(e,n);u&&function ig(e,n,s,u){e.removeChild(n,s,u)}(e,u,n,s)}(n,L,P):3===e&&n.destroyNode(L),null!=M&&function ih(e,n,s,u,g){const M=s[co];M!==_r(s)&&Nc(n,e,u,M,g);for(let L=br;L<s.length;L++){const U=s[L];fd(U[Ai],U,e,n,u,M)}}(n,e,M,s,g)}}function Yu(e,n){return e.createComment(function Gu(e){return e.replace(qf,n=>n.replace(Qh,Wd))}(n))}function Qd(e,n,s){return e.createElement(n,s)}function xp(e,n){const s=e[ea],u=s.indexOf(n);Zn(n),s.splice(u,1)}function am(e,n){if(e.length<=br)return;const s=br+n,u=e[s];if(u){const g=u[gs];null!==g&&g!==e&&xp(g,u),n>0&&(e[s-1][_o]=u[_o]);const M=rd(e,br+n);!function Fl(e,n){fd(e,n,n[sn],2,null,null),n[gr]=null,n[Yn]=null}(u[Ai],u);const P=M[yo];null!==P&&P.detachView(M[Ai]),u[An]=null,u[_o]=null,u[rn]&=-129}return u}function wp(e,n){if(!(256&n[rn])){const s=n[sn];n[vo]?.destroy(),n[Ps]?.destroy(),s.destroyNode&&fd(e,n,s,3,null,null),function Xf(e){let n=e[Ro];if(!n)return lm(e[Ai],e);for(;n;){let s=null;if(Dr(n))s=n[Ro];else{const u=n[br];u&&(s=u)}if(!s){for(;n&&!n[_o]&&n!==e;)Dr(n)&&lm(n[Ai],n),n=n[An];null===n&&(n=e),Dr(n)&&lm(n[Ai],n),s=n&&n[_o]}n=s}}(n)}}function lm(e,n){if(!(256&n[rn])){n[rn]&=-129,n[rn]|=256,function tg(e,n){let s;if(null!=e&&null!=(s=e.destroyHooks))for(let u=0;u<s.length;u+=2){const g=n[s[u]];if(!(g instanceof ri)){const M=s[u+1];if(Array.isArray(M))for(let P=0;P<M.length;P+=2){const L=g[M[P]],U=M[P+1];Xo(4,L,U);try{U.call(L)}finally{Xo(5,L,U)}}else{Xo(4,g,M);try{M.call(g)}finally{Xo(5,g,M)}}}}}(e,n),function eg(e,n){const s=e.cleanup,u=n[Ko];if(null!==s)for(let M=0;M<s.length-1;M+=2)if("string"==typeof s[M]){const P=s[M+3];P>=0?u[P]():u[-P].unsubscribe(),M+=2}else s[M].call(u[s[M+1]]);null!==u&&(n[Ko]=null);const g=n[_s];if(null!==g){n[_s]=null;for(let M=0;M<g.length;M++)(0,g[M])()}}(e,n),1===n[Ai].type&&n[sn].destroy();const s=n[gs];if(null!==s&&Xn(n[An])){s!==n[An]&&xp(s,n);const u=n[yo];null!==u&&u.detachView(e)}!function qd(e){_c.delete(e[Qs])}(n)}}function md(e,n,s){return function zc(e,n,s){let u=n;for(;null!==u&&40&u.type;)u=(n=u).parent;if(null===u)return s[gr];{const{componentOffset:g}=u;if(g>-1){const{encapsulation:M}=e.data[u.directiveStart+g];if(M===Te.None||M===Te.Emulated)return null}return Q(u,s)}}(e,n.parent,s)}function bc(e,n,s,u,g){e.insertBefore(n,s,u,g)}function Ku(e,n,s){e.appendChild(n,s)}function Xu(e,n,s,u,g){null!==u?bc(e,n,s,u,g):Ku(e,n,s)}function Ju(e,n){return e.parentNode(n)}function tu(e,n,s){return Qu(e,n,s)}let eh,nu,pm,_d,Qu=function Ys(e,n,s){return 40&e.type?Q(e,s):null};function xc(e,n,s,u){const g=md(e,u,n),M=n[sn],L=tu(u.parent||n[Yn],u,n);if(null!=g)if(Array.isArray(s))for(let U=0;U<s.length;U++)Xu(M,g,s[U],L,!1);else Xu(M,g,s,L,!1);void 0!==eh&&eh(M,u,n,s,g)}function Nl(e,n){if(null!==n){const s=n.type;if(3&s)return Q(n,e);if(4&s)return pd(-1,e[n.index]);if(8&s){const u=n.child;if(null!==u)return Nl(e,u);{const g=e[n.index];return Xn(g)?pd(-1,g):_r(g)}}if(32&s)return rm(n,e)()||_r(e[n.index]);{const u=Bc(e,n);return null!==u?Array.isArray(u)?u[0]:Nl(Jd(e[ar]),u):Nl(e,n.next)}}return null}function Bc(e,n){return null!==n?e[ar][Yn].projection[n.projection]:null}function pd(e,n){const s=br+e+1;if(s<n.length){const u=n[s],g=u[Ai].firstChild;if(null!==g)return Nl(u,g)}return n[co]}function th(e,n,s,u,g,M,P){for(;null!=s;){const L=u[s.index],U=s.type;if(P&&0===n&&(L&&qs(_r(L),u),s.flags|=2),32!=(32&s.flags))if(8&U)th(e,n,s.child,u,g,M,!1),Nc(n,e,g,L,M);else if(32&U){const J=rm(s,u);let _e;for(;_e=J();)Nc(n,e,g,_e,M);Nc(n,e,g,L,M)}else 16&U?um(e,n,u,s,g,M):Nc(n,e,g,L,M);s=P?s.projectionNext:s.next}}function fd(e,n,s,u,g,M){th(s,u,e.firstChild,n,g,M,!1)}function um(e,n,s,u,g,M){const P=s[ar],U=P[Yn].projection[u.projection];if(Array.isArray(U))for(let J=0;J<U.length;J++)Nc(n,e,g,U[J],M);else{let J=U;const _e=P[An];ju(u)&&(J.flags|=128),th(e,n,J,_e,g,M,!0)}}function Ep(e,n,s){""===s?e.removeAttribute(n,"class"):e.setAttribute(n,"class",s)}function Mp(e,n,s){const{mergedAttrs:u,classes:g,styles:M}=s;null!==u&&ui(e,n,u),null!==g&&Ep(e,n,g),null!==M&&function iu(e,n,s){e.setAttribute(n,"style",s)}(e,n,M)}function na(e){return function Uc(){if(void 0===nu&&(nu=null,Re.trustedTypes))try{nu=Re.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return nu}()?.createHTML(e)||e}function gd(e){pm=e}function jc(){if(void 0!==pm)return pm;if(typeof document<"u")return document;throw new Ne(210,!1)}function yd(){if(void 0===_d&&(_d=null,Re.trustedTypes))try{_d=Re.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return _d}function rh(e){return yd()?.createHTML(e)||e}function oh(e){return yd()?.createScriptURL(e)||e}class ec{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qt})`}}class sh extends ec{getTypeName(){return"HTML"}}class Sp extends ec{getTypeName(){return"Style"}}class ah extends ec{getTypeName(){return"Script"}}class Tp extends ec{getTypeName(){return"URL"}}class ng extends ec{getTypeName(){return"ResourceURL"}}function tc(e){return e instanceof ec?e.changingThisBreaksApplicationSecurity:e}function Pa(e,n){const s=function ru(e){return e instanceof ec&&e.getTypeName()||null}(e);if(null!=s&&s!==n){if("ResourceURL"===s&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${s} (see ${qt})`)}return s===n}function rg(e){return new sh(e)}function Ip(e){return new Sp(e)}function Ap(e){return new ah(e)}function vd(e){return new Tp(e)}function Ec(e){return new ng(e)}class kp{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const s=(new window.DOMParser).parseFromString(na(n),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(n):(s.removeChild(s.firstChild),s)}catch{return null}}}class Pp{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const s=this.inertDocument.createElement("template");return s.innerHTML=na(n),s}}const gm=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bd(e){return(e=String(e)).match(gm)?e:"unsafe:"+e}function Wa(e){const n={};for(const s of e.split(","))n[s]=!0;return n}function xd(...e){const n={};for(const s of e)for(const u in s)s.hasOwnProperty(u)&&(n[u]=!0);return n}const ch=Wa("area,br,col,hr,img,wbr"),_m=Wa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ra=Wa("rp,rt"),ou=xd(ch,xd(_m,Wa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xd(ra,Wa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xd(ra,_m)),uh=Wa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Op=xd(uh,Wa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hh=Wa("script,style,template");class Mc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let s=n.firstChild,u=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?u=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,u&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let g=this.checkClobberedElement(s,s.nextSibling);if(g){s=g;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(n){const s=n.nodeName.toLowerCase();if(!ou.hasOwnProperty(s))return this.sanitizedSomething=!0,!hh.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const u=n.attributes;for(let g=0;g<u.length;g++){const M=u.item(g),P=M.name,L=P.toLowerCase();if(!Op.hasOwnProperty(L)){this.sanitizedSomething=!0;continue}let U=M.value;uh[L]&&(U=bd(U)),this.buf.push(" ",P,'="',su(U),'"')}return this.buf.push(">"),!0}endElement(n){const s=n.nodeName.toLowerCase();ou.hasOwnProperty(s)&&!ch.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(n){this.buf.push(su(n))}checkClobberedElement(n,s){if(s&&(n.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return s}}const Rp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fp=/([^\#-~ |!])/g;function su(e){return e.replace(/&/g,"&amp;").replace(Rp,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Fp,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let au;function mh(e,n){let s=null;try{au=au||function lh(e){const n=new Pp(e);return function fm(){try{return!!(new window.DOMParser).parseFromString(na(""),"text/html")}catch{return!1}}()?new kp(n):n}(e);let u=n?String(n):"";s=au.getInertBodyElement(u);let g=5,M=u;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,u=M,M=s.innerHTML,s=au.getInertBodyElement(u)}while(u!==M);return na((new Mc).sanitizeChildren(ym(s)||s))}finally{if(s){const u=ym(s)||s;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function ym(e){return"content"in e&&function Lp(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var qa=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(qa||{});function vm(e){const n=Hc();return n?rh(n.sanitize(qa.HTML,e)||""):Pa(e,"HTML")?rh(tc(e)):mh(jc(),Oe(e))}function bm(e){const n=Hc();return n?n.sanitize(qa.URL,e)||"":Pa(e,"URL")?tc(e):bd(Oe(e))}function lu(e){const n=Hc();if(n)return oh(n.sanitize(qa.RESOURCE_URL,e)||"");if(Pa(e,"ResourceURL"))return oh(tc(e));throw new Ne(904,!1)}function xm(e,n,s){return function dg(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?lu:bm}(n,s)(e)}function Hc(){const e=wt();return e&&e[Oo].sanitizer}class Er{constructor(n,s){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=ut({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const $c=new Er("ENVIRONMENT_INITIALIZER"),Np=new Er("INJECTOR",-1),_h=new Er("INJECTOR_DEF_TYPES");class wm{get(n,s=_i){if(s===_i){const u=new Error(`NullInjectorError: No provider for ${Le(n)}!`);throw u.name="NullInjectorError",u}return s}}function Cm(e){return{\u0275providers:e}}function cu(...e){return{\u0275providers:yh(0,e),\u0275fromNgModule:!0}}function yh(e,...n){const s=[],u=new Set;let g;return Rc(n,M=>{const P=M;vh(P,s,[],u)&&(g||=[],g.push(P))}),void 0!==g&&du(g,s),s}function du(e,n){for(let s=0;s<e.length;s++){const{providers:g}=e[s];uu(g,M=>{n.push(M)})}}function vh(e,n,s,u){if(!(e=bt(e)))return!1;let g=null,M=yn(e);const P=!M&&cn(e);if(M||P){if(P&&!P.standalone)return!1;g=e}else{const U=e.ngModule;if(M=yn(U),!M)return!1;g=U}const L=u.has(g);if(P){if(L)return!1;if(u.add(g),P.dependencies){const U="function"==typeof P.dependencies?P.dependencies():P.dependencies;for(const J of U)vh(J,n,s,u)}}else{if(!M)return!1;{if(null!=M.imports&&!L){let J;u.add(g);try{Rc(M.imports,_e=>{vh(_e,n,s,u)&&(J||=[],J.push(_e))})}finally{}void 0!==J&&du(J,n)}if(!L){const J=uo(g)||(()=>new g);n.push({provide:g,useFactory:J,deps:De},{provide:_h,useValue:g,multi:!0},{provide:$c,useValue:()=>j(g),multi:!0})}const U=M.providers;null==U||L||uu(U,_e=>{n.push(_e)})}}return g!==e&&void 0!==e.providers}function uu(e,n){for(let s of e)ni(s)&&(s=s.\u0275providers),Array.isArray(s)?uu(s,n):n(s)}const zp=Ue({provide:String,useValue:Ue});function hu(e){return null!==e&&"object"==typeof e&&zp in e}function ic(e){return"function"==typeof e}const pu=new Er("Set Injector scope."),xh={},o={};let t;function a(){return void 0===t&&(t=new wm),t}class p{}class x extends p{get destroyed(){return this._destroyed}constructor(n,s,u,g){super(),this.parent=s,this.source=u,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,me(n,P=>this.processProvider(P)),this.records.set(Np,Z(void 0,this)),g.has("environment")&&this.records.set(p,Z(void 0,this));const M=this.records.get(pu);null!=M&&"string"==typeof M.value&&this.scopes.add(M.value),this.injectorDefTypes=new Set(this.get(_h.multi,De,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of n)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const s=q(this),u=ke(void 0);try{return n()}finally{q(s),ke(u)}}get(n,s=_i,u=pt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Gt))return n[Gt](this);u=Ae(u);const g=q(this),M=ke(void 0);try{if(!(u&pt.SkipSelf)){let L=this.records.get(n);if(void 0===L){const U=function le(e){return"function"==typeof e||"object"==typeof e&&e instanceof Er}(n)&&ti(n);L=U&&this.injectableDefInScope(U)?Z(T(n),xh):null,this.records.set(n,L)}if(null!=L)return this.hydrate(n,L)}return(u&pt.Self?a():this.parent).get(n,s=u&pt.Optional&&s===_i?null:s)}catch(P){if("NullInjectorError"===P.name){if((P[Qi]=P[Qi]||[]).unshift(Le(n)),g)throw P;return function pe(e,n,s,u){const g=e[Qi];throw n[zt]&&g.unshift(n[zt]),e.message=function Qe(e,n,s,u=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let g=Le(n);if(Array.isArray(n))g=n.map(Le).join(" -> ");else if("object"==typeof n){let M=[];for(let P in n)if(n.hasOwnProperty(P)){let L=n[P];M.push(P+":"+("string"==typeof L?JSON.stringify(L):Le(L)))}g=`{${M.join(", ")}}`}return`${s}${u?"("+u+")":""}[${g}]: ${e.replace(Ji,"\n  ")}`}("\n"+e.message,g,s,u),e.ngTokenPath=g,e[Qi]=null,e}(P,n,"R3InjectorError",this.source)}throw P}finally{ke(M),q(g)}}resolveInjectorInitializers(){const n=q(this),s=ke(void 0);try{const u=this.get($c.multi,De,pt.Self);for(const g of u)g()}finally{q(n),ke(s)}}toString(){const n=[],s=this.records;for(const u of s.keys())n.push(Le(u));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processProvider(n){let s=ic(n=bt(n))?n:bt(n&&n.provide);const u=function O(e){return hu(e)?Z(void 0,e.useValue):Z(N(e),xh)}(n);if(ic(n)||!0!==n.multi)this.records.get(s);else{let g=this.records.get(s);g||(g=Z(void 0,xh,!0),g.factory=()=>ve(g.multi),this.records.set(s,g)),s=n,g.multi.push(n)}this.records.set(s,u)}hydrate(n,s){return s.value===xh&&(s.value=o,s.value=s.factory()),"object"==typeof s.value&&s.value&&function te(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(n){if(!n.providedIn)return!1;const s=bt(n.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(n){const s=this._onDestroyHooks.indexOf(n);-1!==s&&this._onDestroyHooks.splice(s,1)}}function T(e){const n=ti(e),s=null!==n?n.factory:uo(e);if(null!==s)return s;if(e instanceof Er)throw new Ne(204,!1);if(e instanceof Function)return function I(e){const n=e.length;if(n>0)throw Bd(n,"?"),new Ne(204,!1);const s=function wi(e){return e&&(e[Zi]||e[bn])||null}(e);return null!==s?()=>s.factory(e):()=>new e}(e);throw new Ne(204,!1)}function N(e,n,s){let u;if(ic(e)){const g=bt(e);return uo(g)||T(g)}if(hu(e))u=()=>bt(e.useValue);else if(function Cd(e){return!(!e||!e.useFactory)}(e))u=()=>e.useFactory(...ve(e.deps||[]));else if(function mu(e){return!(!e||!e.useExisting)}(e))u=()=>j(bt(e.useExisting));else{const g=bt(e&&(e.useClass||e.provide));if(!function K(e){return!!e.deps}(e))return uo(g)||T(g);u=()=>new g(...ve(e.deps))}return u}function Z(e,n,s=!1){return{factory:e,value:n,multi:s?[]:void 0}}function me(e,n){for(const s of e)Array.isArray(s)?me(s,n):s&&ni(s)?me(s.\u0275providers,n):n(s)}const be=new Er("AppId",{providedIn:"root",factory:()=>Be}),Be="ng",Ke=new Er("Platform Initializer"),tt=new Er("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),st=new Er("AnimationModuleType"),St=new Er("CSP nonce",{providedIn:"root",factory:()=>jc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ko=(e,n)=>null;function Es(e,n){return ko(e,n)}class Ds{}class Oa{}class Ka{resolveComponentFactory(n){throw function ul(e){const n=Error(`No component factory found for ${Le(e)}.`);return n.ngComponent=e,n}(n)}}let Ss=(()=>{class e{}return e.NULL=new Ka,e})();function Ts(){return _a(xo(),wt())}function _a(e,n){return new nc(Q(e,n))}let nc=(()=>{class e{constructor(s){this.nativeElement=s}}return e.__NG_ELEMENT_ID__=Ts,e})();function Bp(e){return e instanceof nc?e.nativeElement:e}class wh{}let Mm=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function zl(){const e=wt(),s=It(xo().index,e);return(Dr(s)?s:e)[sn]}(),e})(),Dm=(()=>{class e{}return e.\u0275prov=ut({token:e,providedIn:"root",factory:()=>null}),e})();class Ch{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Sm=new Ch("16.1.7"),Eh={};function fu(e){for(;e;){e[rn]|=64;const n=Jd(e);if(Va(e)&&!n)return e;e=n}return null}function Tm(e){return e.ngOriginalError}class Ed{constructor(){this._console=console}handleError(n){const s=this._findOriginalError(n);this._console.error("ERROR",n),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(n){let s=n&&Tm(n);for(;s&&Tm(s);)s=Tm(s);return s||null}}const jp=new Er("",{providedIn:"root",factory:()=>!1});function ml(e){return e.ownerDocument.defaultView}function ca(e){return e instanceof Function?e():e}class V_ extends wr{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(n){this._lView=n}onConsumerDependencyMayHaveChanged(){fu(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(n,s,u){const g=Pn(this);this.trackingVersion++;try{n(s,u)}finally{Pn(g)}}destroy(){this.trackingVersion++}}let $p=null;function U_(){return $p??=new V_,$p}function j_(e,n){return e[n]??U_()}function H_(e,n){const s=U_();s.hasReadASignal&&(e[n]=$p,s.lView=e,$p=new V_)}const zn={};function $_(e){G_(pi(),wt(),w()+e,!1)}function G_(e,n,s,u){if(!u)if(3==(3&n[rn])){const M=e.preOrderCheckHooks;null!==M&&nt(n,M,s)}else{const M=e.preOrderHooks;null!==M&&yt(n,M,0,s)}S(s)}function X_(e,n=null,s=null,u){const g=J_(e,n,s,u);return g.resolveInjectorInitializers(),g}function J_(e,n=null,s=null,u,g=new Set){const M=[s||De,cu(e)];return u=u||("object"==typeof e?void 0:Le(e)),new x(M,n||a(),u||null,g)}let Dd=(()=>{class e{static create(s,u){if(Array.isArray(s))return X_({name:""},u,s,"");{const g=s.name??"";return X_({name:g},s.parent,s.providers,g)}}}return e.THROW_IF_NOT_FOUND=_i,e.NULL=new wm,e.\u0275prov=ut({token:e,providedIn:"any",factory:()=>j(Np)}),e.__NG_ELEMENT_ID__=-1,e})();function _u(e,n=pt.Default){const s=wt();return null===s?j(e,n):Zs(xo(),s,bt(e),n)}function Q_(){throw new Error("invalid")}function Gp(e,n,s,u,g,M,P,L,U,J,_e){const Ve=n.blueprint.slice();return Ve[gr]=g,Ve[rn]=140|u,(null!==J||e&&2048&e[rn])&&(Ve[rn]|=2048),Nn(Ve),Ve[An]=Ve[un]=e,Ve[mr]=s,Ve[Oo]=P||e&&e[Oo],Ve[sn]=L||e&&e[sn],Ve[jo]=U||e&&e[jo]||null,Ve[Yn]=M,Ve[Qs]=function mp(){return hp++}(),Ve[Ho]=_e,Ve[za]=J,Ve[ar]=2==n.type?e[ar]:Ve,Ve}function yu(e,n,s,u,g){let M=e.data[n];if(null===M)M=function mg(e,n,s,u,g){const M=So(),P=Ta(),U=e.data[n]=function m0(e,n,s,u,g,M){let P=n?n.injectorIndex:-1,L=0;return Za()&&(L|=128),{type:s,index:u,insertBeforeIndex:null,injectorIndex:P,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:L,providerIndexes:0,value:g,attrs:M,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,P?M:M&&M.parent,s,n,u,g);return null===e.firstChild&&(e.firstChild=U),null!==M&&(P?null==M.child&&null!==U.parent&&(M.child=U):null===M.next&&(M.next=U,U.prev=M)),U}(e,n,s,u,g),function pa(){return Yi.lFrame.inI18n}()&&(M.flags|=32);else if(64&M.type){M.type=s,M.value=u,M.attrs=g;const P=function Yl(){const e=Yi.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();M.injectorIndex=null===P?-1:P.injectorIndex}return To(M,!0),M}function Im(e,n,s,u){if(0===s)return-1;const g=n.length;for(let M=0;M<s;M++)n.push(u),e.blueprint.push(u),e.data.push(null);return g}function ey(e,n,s,u,g){const M=j_(n,vo),P=w(),L=2&u;try{if(S(-1),L&&n.length>pn&&G_(e,n,pn,!1),Xo(L?2:0,g),L)M.runInContext(s,u,g);else{const J=Pn(null);try{s(u,g)}finally{Pn(J)}}}finally{L&&null===n[vo]&&H_(n,vo),S(P),Xo(L?3:1,g)}}function pg(e,n,s){if(bo(n)){const u=Pn(null);try{const M=n.directiveEnd;for(let P=n.directiveStart;P<M;P++){const L=e.data[P];L.contentQueries&&L.contentQueries(1,s[P],P)}}finally{Pn(u)}}}function fg(e,n,s){hn()&&(function ny(e,n,s,u){const g=s.directiveStart,M=s.directiveEnd;Vr(s)&&function Wn(e,n,s){const u=Q(n,e),g=ty(s);let P=16;s.signals?P=4096:s.onPush&&(P=64);const L=Sh(e,Gp(e,g,null,P,u,n,null,e[Oo].rendererFactory.createRenderer(u,s),null,null,null));e[n.index]=L}(n,s,e.data[g+s.componentOffset]),e.firstCreatePass||Pl(s,n),qs(u,n);const P=s.initialInputs;for(let L=g;L<M;L++){const U=e.data[L],J=Ol(n,e,L,s);qs(J,n),null!==P&&w0(0,L-g,J,U,0,P),qr(U)&&(It(s.index,n)[mr]=Ol(n,e,L,s))}}(e,n,s,Q(s,n)),64==(64&s.flags)&&ry(e,n,s))}function gg(e,n,s=Q){const u=n.localNames;if(null!==u){let g=n.index+1;for(let M=0;M<u.length;M+=2){const P=u[M+1],L=-1===P?s(n,e):e[P];e[g++]=L}}}function ty(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=_g(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function _g(e,n,s,u,g,M,P,L,U,J,_e){const Ve=pn+u,ht=Ve+g,Mt=function a0(e,n){const s=[];for(let u=0;u<n;u++)s.push(u<e?null:zn);return s}(Ve,ht),oi="function"==typeof J?J():J;return Mt[Ai]={type:e,blueprint:Mt,template:s,queries:null,viewQuery:L,declTNode:n,data:Mt.slice().fill(null,Ve),bindingStartIndex:Ve,expandoStartIndex:ht,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof M?M():M,pipeRegistry:"function"==typeof P?P():P,firstChild:null,schemas:U,consts:oi,incompleteFirstPass:!1,ssrId:_e}}let iy=e=>null;function lo(e,n,s,u){for(let g in e)if(e.hasOwnProperty(g)){s=null===s?{}:s;const M=e[g];null===u?Am(s,n,g,M):u.hasOwnProperty(g)&&Am(s,n,u[g],M)}return s}function Am(e,n,s,u){e.hasOwnProperty(s)?e[s].push(n,u):e[s]=[n,u]}function pl(e,n,s,u,g,M,P,L){const U=Q(n,s);let _e,J=n.inputs;!L&&null!=J&&(_e=J[u])?(vg(e,s,_e,u,g),Vr(n)&&function g0(e,n){const s=It(n,e);16&s[rn]||(s[rn]|=64)}(s,n.index)):3&n.type&&(u=function f0(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(u),g=null!=P?P(g,n.value||"",u):g,M.setProperty(U,u,g))}function Zp(e,n,s,u){if(hn()){const g=null===u?null:{"":-1},M=function oy(e,n){const s=e.directiveRegistry;let u=null,g=null;if(s)for(let M=0;M<s.length;M++){const P=s[M];if(rs(n,P.selectors,!1))if(u||(u=[]),qr(P))if(null!==P.findHostDirectiveDefs){const L=[];g=g||new Map,P.findHostDirectiveDefs(P,L,g),u.unshift(...L,P),Xs(e,n,L.length)}else u.unshift(P),Xs(e,n,0);else g=g||new Map,P.findHostDirectiveDefs?.(P,u,g),u.push(P)}return null===u?null:[u,g]}(e,s);let P,L;null===M?P=L=null:[P,L]=M,null!==P&&Wp(e,n,s,P,g,L),g&&function x0(e,n,s){if(n){const u=e.localNames=[];for(let g=0;g<n.length;g+=2){const M=s[n[g+1]];if(null==M)throw new Ne(-301,!1);u.push(n[g],M)}}}(s,u,g)}s.mergedAttrs=$n(s.mergedAttrs,s.attrs)}function Wp(e,n,s,u,g,M){for(let J=0;J<u.length;J++)Co(Pl(s,n),e,u[J].type);!function xn(e,n,s){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+s,e.providerIndexes=n}(s,e.data.length,u.length);for(let J=0;J<u.length;J++){const _e=u[J];_e.providersResolver&&_e.providersResolver(_e)}let P=!1,L=!1,U=Im(e,n,u.length,null);for(let J=0;J<u.length;J++){const _e=u[J];s.mergedAttrs=$n(s.mergedAttrs,_e.hostAttrs),Bl(e,s,n,U,_e),Zc(U,_e,g),null!==_e.contentQueries&&(s.flags|=4),(null!==_e.hostBindings||null!==_e.hostAttrs||0!==_e.hostVars)&&(s.flags|=64);const Ve=_e.type.prototype;!P&&(Ve.ngOnChanges||Ve.ngOnInit||Ve.ngDoCheck)&&((e.preOrderHooks??=[]).push(s.index),P=!0),!L&&(Ve.ngOnChanges||Ve.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(s.index),L=!0),U++}!function p0(e,n,s){const g=n.directiveEnd,M=e.data,P=n.attrs,L=[];let U=null,J=null;for(let _e=n.directiveStart;_e<g;_e++){const Ve=M[_e],ht=s?s.get(Ve):null,oi=ht?ht.outputs:null;U=lo(Ve.inputs,_e,U,ht?ht.inputs:null),J=lo(Ve.outputs,_e,J,oi);const yi=null===U||null===P||Fr(n)?null:Yp(U,_e,P);L.push(yi)}null!==U&&(U.hasOwnProperty("class")&&(n.flags|=8),U.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=L,n.inputs=U,n.outputs=J}(e,s,M)}function ry(e,n,s){const u=s.directiveStart,g=s.directiveEnd,M=s.index,P=function ll(){return Yi.lFrame.currentDirectiveIndex}();try{S(M);for(let L=u;L<g;L++){const U=e.data[L],J=n[L];Ia(L),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&b0(U,J)}}finally{S(-1),Ia(P)}}function b0(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Xs(e,n,s){n.componentOffset=s,(e.components??=[]).push(n.index)}function Zc(e,n,s){if(s){if(n.exportAs)for(let u=0;u<n.exportAs.length;u++)s[n.exportAs[u]]=e;qr(n)&&(s[""]=e)}}function Bl(e,n,s,u,g){e.data[u]=g;const M=g.factory||(g.factory=uo(g.type)),P=new ri(M,qr(g),_u);e.blueprint[u]=P,s[u]=P,function qp(e,n,s,u,g){const M=g.hostBindings;if(M){let P=e.hostBindingOpCodes;null===P&&(P=e.hostBindingOpCodes=[]);const L=~n.index;(function v0(e){let n=e.length;for(;n>0;){const s=e[--n];if("number"==typeof s&&s<0)return s}return 0})(P)!=L&&P.push(L),P.push(s,u,M)}}(e,n,u,Im(e,s,g.hostVars,zn),g)}function Vl(e,n,s,u,g,M){const P=Q(e,n);!function yg(e,n,s,u,g,M,P){if(null==M)e.removeAttribute(n,g,s);else{const L=null==P?Oe(M):P(M,u||"",g);e.setAttribute(n,g,L,s)}}(n[sn],P,M,e.value,s,u,g)}function w0(e,n,s,u,g,M){const P=M[n];if(null!==P)for(let L=0;L<P.length;)rc(u,s,P[L++],P[L++],P[L++])}function rc(e,n,s,u,g){const M=Pn(null);try{const P=e.inputTransforms;null!==P&&P.hasOwnProperty(u)&&(g=P[u].call(n,g)),null!==e.setInput?e.setInput(n,g,s,u):n[u]=g}finally{Pn(M)}}function Yp(e,n,s){let u=null,g=0;for(;g<s.length;){const M=s[g];if(0!==M)if(5!==M){if("number"==typeof M)break;if(e.hasOwnProperty(M)){null===u&&(u=[]);const P=e[M];for(let L=0;L<P.length;L+=2)if(P[L]===n){u.push(M,P[L+1],s[g+1]);break}}g+=2}else g+=2;else g+=4}return u}function Wc(e,n,s,u){return[e,!0,!1,n,null,0,u,s,null,null,null]}function Kp(e,n){const s=e.contentQueries;if(null!==s)for(let u=0;u<s.length;u+=2){const M=s[u+1];if(-1!==M){const P=e.data[M];Aa(s[u]),P.contentQueries(2,n[M],M)}}}function Sh(e,n){return e[Ro]?e[Js][_o]=n:e[Ro]=n,e[Js]=n,n}function Xp(e,n,s){Aa(0);const u=Pn(null);try{n(e,s)}finally{Pn(u)}}function sy(e){return e[Ko]||(e[Ko]=[])}function ay(e){return e.cleanup||(e.cleanup=[])}function ly(e,n,s){return(null===e||qr(e))&&(s=function mi(e){for(;Array.isArray(e);){if("object"==typeof e[tl])return e;e=e[gr]}return null}(s[n.index])),s[sn]}function cy(e,n){const s=e[jo],u=s?s.get(Ed,null):null;u&&u.handleError(n)}function vg(e,n,s,u,g){for(let M=0;M<s.length;){const P=s[M++],L=s[M++];rc(e.data[P],n[P],u,L,g)}}function C0(e,n){const s=It(n,e),u=s[Ai];!function E0(e,n){for(let s=n.length;s<e.blueprint.length;s++)n.push(e.blueprint[s])}(u,s);const g=s[gr];null!==g&&null===s[Ho]&&(s[Ho]=Es(g,s[jo])),bg(u,s,s[mr])}function bg(e,n,s){Al(n);try{const u=e.viewQuery;null!==u&&Xp(1,u,s);const g=e.template;null!==g&&ey(e,n,g,1,s),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Kp(e,n),e.staticViewQueries&&Xp(2,e.viewQuery,s);const M=e.components;null!==M&&function M0(e,n){for(let s=0;s<n.length;s++)C0(e,n[s])}(n,M)}catch(u){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),u}finally{n[rn]&=-5,i()}}let dy=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(s,u,g){const M=typeof Zone>"u"?null:Zone.current,P=new Hr(s,J=>{this.all.has(J)&&this.queue.set(J,M)},g);let L;this.all.add(P),P.notify();const U=()=>{P.cleanup(),L?.(),this.all.delete(P),this.queue.delete(P)};return L=u?.onDestroy(U),{destroy:U}}flush(){if(0!==this.queue.size)for(const[s,u]of this.queue)this.queue.delete(s),u?u.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}}return e.\u0275prov=ut({token:e,providedIn:"root",factory:()=>new e}),e})();function Jp(e,n,s){let u=s?e.styles:null,g=s?e.classes:null,M=0;if(null!==n)for(let P=0;P<n.length;P++){const L=n[P];"number"==typeof L?M=L:1==M?g=et(g,L):2==M&&(u=et(u,L+": "+n[++P]+";"))}s?e.styles=u:e.stylesWithoutHost=u,s?e.classes=g:e.classesWithoutHost=g}function km(e,n,s,u,g=!1){for(;null!==s;){const M=n[s.index];if(null!==M&&u.push(_r(M)),Xn(M)){for(let L=br;L<M.length;L++){const U=M[L],J=U[Ai].firstChild;null!==J&&km(U[Ai],U,J,u)}M[co]!==M[gr]&&u.push(M[co])}const P=s.type;if(8&P)km(e,n,s.child,u);else if(32&P){const L=rm(s,n);let U;for(;U=L();)u.push(U)}else if(16&P){const L=Bc(n,s);if(Array.isArray(L))u.push(...L);else{const U=Jd(n[ar]);km(U[Ai],U,L,u,!0)}}s=g?s.projectionNext:s.next}return u}function Qp(e,n,s,u=!0){const g=n[Oo].rendererFactory;g.begin&&g.begin();try{xg(e,n,e.template,s)}catch(P){throw u&&cy(n,P),P}finally{g.end&&g.end(),n[Oo].effectManager?.flush()}}function xg(e,n,s,u){const g=n[rn];if(256!=(256&g)){n[Oo].effectManager?.flush(),Al(n);try{Nn(n),function ta(e){return Yi.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==s&&ey(e,n,s,2,u);const P=3==(3&g);if(P){const J=e.preOrderCheckHooks;null!==J&&nt(n,J,null)}else{const J=e.preOrderHooks;null!==J&&yt(n,J,0,null),$e(n,0)}if(function I0(e){for(let n=zo(e);null!==n;n=om(n)){if(!n[Ba])continue;const s=n[ea];for(let u=0;u<s.length;u++){En(s[u])}}}(n),wg(n,2),null!==e.contentQueries&&Kp(e,n),P){const J=e.contentCheckHooks;null!==J&&nt(n,J)}else{const J=e.contentHooks;null!==J&&yt(n,J,1),$e(n,1)}!function s0(e,n){const s=e.hostBindingOpCodes;if(null===s)return;const u=j_(n,Ps);try{for(let g=0;g<s.length;g++){const M=s[g];if(M<0)S(~M);else{const P=M,L=s[++g],U=s[++g];Qc(L,P),u.runInContext(U,2,n[P])}}}finally{null===n[Ps]&&H_(n,Ps),S(-1)}}(e,n);const L=e.components;null!==L&&py(n,L,0);const U=e.viewQuery;if(null!==U&&Xp(2,U,u),P){const J=e.viewCheckHooks;null!==J&&nt(n,J)}else{const J=e.viewHooks;null!==J&&yt(n,J,2),$e(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[rn]&=-73,Zn(n)}finally{i()}}}function wg(e,n){for(let s=zo(e);null!==s;s=om(s))for(let u=br;u<s.length;u++)my(s[u],n)}function hy(e,n,s){my(It(n,e),s)}function my(e,n){if(!function Wi(e){return 128==(128&e[rn])}(e))return;const s=e[Ai];if(80&e[rn]&&0===n||1024&e[rn]||2===n)xg(s,e,s.template,e[mr]);else if(e[Lr]>0){wg(e,1);const g=e[Ai].components;null!==g&&py(e,g,1)}}function py(e,n,s){for(let u=0;u<n.length;u++)hy(e,n[u],s)}class Pm{get rootNodes(){const n=this._lView,s=n[Ai];return km(s,n,s.firstChild,[])}constructor(n,s){this._lView=n,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mr]}set context(n){this._lView[mr]=n}get destroyed(){return 256==(256&this._lView[rn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[An];if(Xn(n)){const s=n[8],u=s?s.indexOf(this):-1;u>-1&&(am(n,u),rd(s,u))}this._attachedToViewContainer=!1}wp(this._lView[Ai],this._lView)}onDestroy(n){!function Gr(e,n){if(256==(256&e[rn]))throw new Ne(911,!1);null===e[_s]&&(e[_s]=[]),e[_s].push(n)}(this._lView,n)}markForCheck(){fu(this._cdRefInjectingView||this._lView)}detach(){this._lView[rn]&=-129}reattach(){this._lView[rn]|=128}detectChanges(){Qp(this._lView[Ai],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function eu(e,n){fd(e,n,n[sn],2,null,null)}(this._lView[Ai],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=n}}class Sd extends Pm{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Qp(n[Ai],n,n[mr],!1)}checkNoChanges(){}get context(){return null}}class ef extends Ss{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const s=cn(n);return new Om(s,this.ngModule)}}function A0(e){const n=[];for(let s in e)e.hasOwnProperty(s)&&n.push({propName:e[s],templateName:s});return n}class hC{constructor(n,s){this.injector=n,this.parentInjector=s}get(n,s,u){u=Ae(u);const g=this.injector.get(n,Eh,u);return g!==Eh||s===Eh?g:this.parentInjector.get(n,s,u)}}class Om extends Oa{get inputs(){const n=this.componentDef,s=n.inputTransforms,u=A0(n.inputs);if(null!==s)for(const g of u)s.hasOwnProperty(g.propName)&&(g.transform=s[g.propName]);return u}get outputs(){return A0(this.componentDef.outputs)}constructor(n,s){super(),this.componentDef=n,this.ngModule=s,this.componentType=n.type,this.selector=function ro(e){return e.map(mn).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!s}create(n,s,u,g){let M=(g=g||this.ngModule)instanceof p?g:g?.injector;M&&null!==this.componentDef.getStandaloneInjector&&(M=this.componentDef.getStandaloneInjector(M)||M);const P=M?new hC(n,M):n,L=P.get(wh,null);if(null===L)throw new Ne(407,!1);const _e={rendererFactory:L,sanitizer:P.get(Dm,null),effectManager:P.get(dy,null)},Ve=L.createRenderer(null,this.componentDef),ht=this.componentDef.selectors[0][0]||"div",Mt=u?function l0(e,n,s,u){const M=u.get(jp,!1)||s===Te.ShadowDom,P=e.selectRootElement(n,M);return function c0(e){iy(e)}(P),P}(Ve,u,this.componentDef.encapsulation,P):Qd(Ve,ht,function uC(e){const n=e.toLowerCase();return"svg"===n?Ml:"math"===n?"math":null}(ht)),$i=this.componentDef.signals?4608:this.componentDef.onPush?576:528,an=_g(0,null,null,1,0,null,null,null,null,null,null),si=Gp(null,an,null,$i,null,null,_e,Ve,P,null,null);let jn,yr;Al(si);try{const Ir=this.componentDef;let el,Qb=null;Ir.findHostDirectiveDefs?(el=[],Qb=new Map,Ir.findHostDirectiveDefs(Ir,el,Qb),el.push(Ir)):el=[Ir];const pM=function P0(e,n){const s=e[Ai],u=pn;return e[u]=n,yu(s,u,2,"#host",null)}(si,Mt),fM=function O0(e,n,s,u,g,M,P){const L=g[Ai];!function mC(e,n,s,u){for(const g of e)n.mergedAttrs=$n(n.mergedAttrs,g.hostAttrs);null!==n.mergedAttrs&&(Jp(n,n.mergedAttrs,!0),null!==s&&Mp(u,s,n))}(u,e,n,P);let U=null;null!==n&&(U=Es(n,g[jo]));const J=M.rendererFactory.createRenderer(n,s);let _e=16;s.signals?_e=4096:s.onPush&&(_e=64);const Ve=Gp(g,ty(s),null,_e,g[e.index],e,M,J,null,null,U);return L.firstCreatePass&&Xs(L,e,u.length-1),Sh(g,Ve),g[e.index]=Ve}(pM,Mt,Ir,el,si,_e,Ve);yr=fe(an,pn),Mt&&function F0(e,n,s,u){if(u)ui(e,s,["ng-version",Sm.full]);else{const{attrs:g,classes:M}=function Po(e){const n=[],s=[];let u=1,g=2;for(;u<e.length;){let M=e[u];if("string"==typeof M)2===g?""!==M&&n.push(M,e[++u]):8===g&&s.push(M);else{if(!fn(g))break;g=M}u++}return{attrs:n,classes:s}}(n.selectors[0]);g&&ui(e,s,g),M&&M.length>0&&Ep(e,s,M.join(" "))}}(Ve,Ir,Mt,u),void 0!==s&&function L0(e,n,s){const u=e.projection=[];for(let g=0;g<n.length;g++){const M=s[g];u.push(null!=M?Array.from(M):null)}}(yr,this.ngContentSelectors,s),jn=function R0(e,n,s,u,g,M){const P=xo(),L=g[Ai],U=Q(P,g);Wp(L,g,P,s,null,u);for(let _e=0;_e<s.length;_e++)qs(Ol(g,L,P.directiveStart+_e,P),g);ry(L,g,P),U&&qs(U,g);const J=Ol(g,L,P.directiveStart+P.componentOffset,P);if(e[mr]=g[mr]=J,null!==M)for(const _e of M)_e(J,n);return pg(L,P,e),J}(fM,Ir,el,Qb,si,[N0]),bg(an,si,null)}finally{i()}return new fy(this.componentType,jn,_a(yr,si),si,yr)}}class fy extends Ds{constructor(n,s,u,g,M){super(),this.location=u,this._rootLView=g,this._tNode=M,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Sd(g),this.componentType=n}setInput(n,s){const u=this._tNode.inputs;let g;if(null!==u&&(g=u[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),s))return;const M=this._rootLView;vg(M[Ai],M,g,n,s),this.previousInputValues.set(n,s),fu(It(this._tNode.index,M))}}get injector(){return new Ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function N0(){const e=xo();Ce(wt()[Ai],e)}function Cg(e){let n=function gy(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),s=!0;const u=[e];for(;n;){let g;if(qr(e))g=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ne(903,!1);g=n.\u0275dir}if(g){if(s){u.push(g);const P=e;P.inputs=tf(e.inputs),P.inputTransforms=tf(e.inputTransforms),P.declaredInputs=tf(e.declaredInputs),P.outputs=tf(e.outputs);const L=g.hostBindings;L&&z0(e,L);const U=g.viewQuery,J=g.contentQueries;if(U&&pC(e,U),J&&fC(e,J),it(e.inputs,g.inputs),it(e.declaredInputs,g.declaredInputs),it(e.outputs,g.outputs),null!==g.inputTransforms&&(null===P.inputTransforms&&(P.inputTransforms={}),it(P.inputTransforms,g.inputTransforms)),qr(g)&&g.data.animation){const _e=e.data;_e.animation=(_e.animation||[]).concat(g.data.animation)}}const M=g.features;if(M)for(let P=0;P<M.length;P++){const L=M[P];L&&L.ngInherit&&L(e),L===Cg&&(s=!1)}}n=Object.getPrototypeOf(n)}!function _y(e){let n=0,s=null;for(let u=e.length-1;u>=0;u--){const g=e[u];g.hostVars=n+=g.hostVars,g.hostAttrs=$n(g.hostAttrs,s=$n(s,g.hostAttrs))}}(u)}function tf(e){return e===ue?{}:e===De?[]:e}function pC(e,n){const s=e.viewQuery;e.viewQuery=s?(u,g)=>{n(u,g),s(u,g)}:n}function fC(e,n){const s=e.contentQueries;e.contentQueries=s?(u,g,M)=>{n(u,g,M),s(u,g,M)}:n}function z0(e,n){const s=e.hostBindings;e.hostBindings=s?(u,g)=>{n(u,g),s(u,g)}:n}function Eg(e){const n=e.inputConfig,s={};for(const u in n)if(n.hasOwnProperty(u)){const g=n[u];Array.isArray(g)&&g[2]&&(s[u]=g[2])}e.inputTransforms=s}function nf(e){return!!Mg(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Mg(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Sc(e,n,s){return e[n]=s}function ya(e,n,s){return!Object.is(e[n],s)&&(e[n]=s,!0)}function bu(e,n,s,u){const g=ya(e,n,s);return ya(e,n+1,u)||g}function Dg(e,n,s,u){const g=wt();return ya(g,xs(),n)&&(pi(),Vl(f(),g,e,n,s,u)),Dg}function Fm(e,n,s,u){return ya(e,xs(),s)?n+Oe(s)+u:zn}function cf(e,n,s,u,g,M,P,L){const U=wt(),J=pi(),_e=e+pn,Ve=J.firstCreatePass?function ox(e,n,s,u,g,M,P,L,U){const J=n.consts,_e=yu(n,e,4,P||null,Ln(J,L));Zp(n,s,_e,Ln(J,U)),Ce(n,_e);const Ve=_e.tView=_g(2,_e,u,g,M,n.directiveRegistry,n.pipeRegistry,null,n.schemas,J,null);return null!==n.queries&&(n.queries.template(n,_e),Ve.queries=n.queries.embeddedTView(_e)),_e}(_e,J,U,n,s,u,g,M,P):J.data[_e];To(Ve,!1);const ht=ky(J,U,Ve,e);ee()&&xc(J,U,ht,Ve),qs(ht,U),Sh(U,U[_e]=Wc(ht,U,ht,Ve)),Gn(Ve)&&fg(J,U,Ve),null!=P&&gg(U,Ve,L)}let ky=function df(e,n,s,u){return oe(!0),n[sn].createComment("")};function Py(e){return Ye(function Nr(){return Yi.lFrame.contextLView}(),pn+e)}function Fg(e,n,s){const u=wt();return ya(u,xs(),n)&&pl(pi(),f(),u,e,n,u[sn],s,!1),Fg}function Lg(e,n,s,u,g){const P=g?"class":"style";vg(e,s,n.inputs[P],P,u)}function uf(e,n,s,u){const g=wt(),M=pi(),P=pn+e,L=g[sn],U=M.firstCreatePass?function cx(e,n,s,u,g,M){const P=n.consts,U=yu(n,e,2,u,Ln(P,g));return Zp(n,s,U,Ln(P,M)),null!==U.attrs&&Jp(U,U.attrs,!1),null!==U.mergedAttrs&&Jp(U,U.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,U),U}(P,M,g,n,s,u):M.data[P],J=Oy(M,g,U,L,n,e);g[P]=J;const _e=Gn(U);return To(U,!0),Mp(L,J,U),32!=(32&U.flags)&&ee()&&xc(M,g,J,U),0===function tr(){return Yi.lFrame.elementDepthCount}()&&qs(J,g),function ir(){Yi.lFrame.elementDepthCount++}(),_e&&(fg(M,g,U),pg(M,U,g)),null!==u&&gg(g,U),uf}function hf(){let e=xo();Ta()?al():(e=e.parent,To(e,!1));const n=e;(function Dl(e){return Yi.skipHydrationRootTNode===e})(n)&&function Jo(){Yi.skipHydrationRootTNode=null}(),function ds(){Yi.lFrame.elementDepthCount--}();const s=pi();return s.firstCreatePass&&(Ce(s,e),bo(e)&&s.queries.elementEnd(e)),null!=n.classesWithoutHost&&function bi(e){return 0!=(8&e.flags)}(n)&&Lg(s,n,wt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function en(e){return 0!=(16&e.flags)}(n)&&Lg(s,n,wt(),n.stylesWithoutHost,!1),hf}function Ng(e,n,s,u){return uf(e,n,s,u),hf(),Ng}let Oy=(e,n,s,u,g,M)=>(oe(!0),Qd(u,g,function R(){return Yi.lFrame.currentNamespace}()));function mf(e,n,s){const u=wt(),g=pi(),M=e+pn,P=g.firstCreatePass?function hx(e,n,s,u,g){const M=n.consts,P=Ln(M,u),L=yu(n,e,8,"ng-container",P);return null!==P&&Jp(L,P,!0),Zp(n,s,L,Ln(M,g)),null!==n.queries&&n.queries.elementStart(n,L),L}(M,g,u,n,s):g.data[M];To(P,!0);const L=Ry(g,u,P,e);return u[M]=L,ee()&&xc(g,u,L,P),qs(L,u),Gn(P)&&(fg(g,u,P),pg(g,P,u)),null!=s&&gg(u,P),mf}function pf(){let e=xo();const n=pi();return Ta()?al():(e=e.parent,To(e,!1)),n.firstCreatePass&&(Ce(n,e),bo(e)&&n.queries.elementEnd(e)),pf}function zg(e,n,s){return mf(e,n,s),pf(),zg}let Ry=(e,n,s,u)=>(oe(!0),Yu(n[sn],""));function Fy(){return wt()}function Bg(e){return!!e&&"function"==typeof e.then}function Ly(e){return!!e&&"function"==typeof e.subscribe}function Vg(e,n,s,u){const g=wt(),M=pi(),P=xo();return Ny(M,g,g[sn],P,e,n,u),Vg}function Ug(e,n){const s=xo(),u=wt(),g=pi();return Ny(g,u,ly(Kl(g.data),s,u),s,e,n),Ug}function Ny(e,n,s,u,g,M,P){const L=Gn(u),J=e.firstCreatePass&&ay(e),_e=n[mr],Ve=sy(n);let ht=!0;if(3&u.type||P){const yi=Q(u,n),$i=P?P(yi):yi,an=Ve.length,si=P?yr=>P(_r(yr[u.index])):u.index;let jn=null;if(!P&&L&&(jn=function fx(e,n,s,u){const g=e.cleanup;if(null!=g)for(let M=0;M<g.length-1;M+=2){const P=g[M];if(P===s&&g[M+1]===u){const L=n[Ko],U=g[M+2];return L.length>U?L[U]:null}"string"==typeof P&&(M+=2)}return null}(e,n,g,u.index)),null!==jn)(jn.__ngLastListenerFn__||jn).__ngNextListenerFn__=M,jn.__ngLastListenerFn__=M,ht=!1;else{M=By(u,n,_e,M,!1);const yr=s.listen($i,g,M);Ve.push(M,yr),J&&J.push(g,si,an,an+1)}}else M=By(u,n,_e,M,!1);const Mt=u.outputs;let oi;if(ht&&null!==Mt&&(oi=Mt[g])){const yi=oi.length;if(yi)for(let $i=0;$i<yi;$i+=2){const Ir=n[oi[$i]][oi[$i+1]].subscribe(M),el=Ve.length;Ve.push(M,Ir),J&&J.push(g,u.index,el,-(el+1))}}}function zy(e,n,s,u){try{return Xo(6,n,s),!1!==s(u)}catch(g){return cy(e,g),!1}finally{Xo(7,n,s)}}function By(e,n,s,u,g){return function M(P){if(P===Function)return u;fu(e.componentOffset>-1?It(e.index,n):n);let U=zy(n,s,u,P),J=M.__ngNextListenerFn__;for(;J;)U=zy(n,s,J,P)&&U,J=J.__ngNextListenerFn__;return g&&!1===U&&P.preventDefault(),U}}function Vy(e=1){return function d(e){return(Yi.lFrame.contextLView=function _(e,n){for(;e>0;)n=n[un],e--;return n}(e,Yi.lFrame.contextLView))[mr]}(e)}function Uy(e,n){let s=null;const u=function Qn(e){const n=e.attrs;if(null!=n){const s=n.indexOf(5);if(!(1&s))return n[s+1]}return null}(e);for(let g=0;g<n.length;g++){const M=n[g];if("*"!==M){if(null===u?rs(e,M,!0):io(u,M))return g}else s=g}return s}function jy(e){const n=wt()[ar][Yn];if(!n.projection){const u=n.projection=Bd(e?e.length:1,null),g=u.slice();let M=n.child;for(;null!==M;){const P=e?Uy(M,e):0;null!==P&&(g[P]?g[P].projectionNext=M:u[P]=M,g[P]=M),M=M.next}}}function Hy(e,n=0,s){const u=wt(),g=pi(),M=yu(g,pn+e,16,null,s||null);null===M.projection&&(M.projection=n),al(),(!u[Ho]||Za())&&32!=(32&M.flags)&&function Cp(e,n,s){um(n[sn],0,n,s,md(e,s,n),tu(s.parent||n[Yn],s,n))}(g,u,M)}function jg(e,n,s){return Ad(e,"",n,"",s),jg}function Ad(e,n,s,u,g){const M=wt(),P=Fm(M,n,s,u);return P!==zn&&pl(pi(),f(),M,e,P,M[sn],g,!1),Ad}function ff(e,n){return e<<17|n<<2}function kd(e){return e>>17&32767}function Zg(e){return 2|e}function Eu(e){return(131068&e)>>2}function Wg(e,n){return-131069&e|n<<2}function qg(e){return 1|e}function Yy(e,n,s,u,g){const M=e[s+1],P=null===n;let L=u?kd(M):Eu(M),U=!1;for(;0!==L&&(!1===U||P);){const _e=e[L+1];xx(e[L],n)&&(U=!0,e[L+1]=u?qg(_e):Zg(_e)),L=u?kd(_e):Eu(_e)}U&&(e[s+1]=u?Zg(M):qg(M))}function xx(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&sd(e,n)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ky(e){return e.substring(Is.key,Is.keyEnd)}function wx(e){return e.substring(Is.value,Is.valueEnd)}function Xy(e,n){const s=Is.textEnd;return s===n?-1:(n=Is.keyEnd=function Mx(e,n,s){for(;n<s&&e.charCodeAt(n)>32;)n++;return n}(e,Is.key=n,s),Ah(e,n,s))}function Jy(e,n){const s=Is.textEnd;let u=Is.key=Ah(e,n,s);return s===u?-1:(u=Is.keyEnd=function Dx(e,n,s){let u;for(;n<s&&(45===(u=e.charCodeAt(n))||95===u||(-33&u)>=65&&(-33&u)<=90||u>=48&&u<=57);)n++;return n}(e,u,s),u=ev(e,u,s),u=Is.value=Ah(e,u,s),u=Is.valueEnd=function Sx(e,n,s){let u=-1,g=-1,M=-1,P=n,L=P;for(;P<s;){const U=e.charCodeAt(P++);if(59===U)return L;34===U||39===U?L=P=tv(e,U,P,s):n===P-4&&85===M&&82===g&&76===u&&40===U?L=P=tv(e,41,P,s):U>32&&(L=P),M=g,g=u,u=-33&U}return L}(e,u,s),ev(e,u,s))}function Qy(e){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=e.length}function Ah(e,n,s){for(;n<s&&e.charCodeAt(n)<=32;)n++;return n}function ev(e,n,s,u){return(n=Ah(e,n,s))<s&&n++,n}function tv(e,n,s,u){let g=-1,M=s;for(;M<u;){const P=e.charCodeAt(M++);if(P==n&&92!==g)return M;g=92==P&&92===g?0:P}throw new Error}function Yg(e,n,s){return sc(e,n,s,!1),Yg}function Kg(e,n){return sc(e,n,null,!0),Kg}function oc(e){gl(kx,Tx,e,!1)}function Tx(e,n){for(let s=function Ex(e){return Qy(e),Jy(e,Ah(e,0,Is.textEnd))}(n);s>=0;s=Jy(n,s))kx(e,Ky(n),wx(n))}function iv(e){gl(AC,Tc,e,!0)}function Tc(e,n){for(let s=function Cx(e){return Qy(e),Xy(e,Ah(e,0,Is.textEnd))}(n);s>=0;s=Xy(n,s))ao(e,Ky(n),!0)}function sc(e,n,s,u){const g=wt(),M=pi(),P=$s(2);M.firstUpdatePass&&Ax(M,e,P,u),n!==zn&&ya(g,P,n)&&Px(M,M.data[w()],g,g[sn],e,g[P+1]=function Rx(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Le(tc(e)))),e}(n,s),u,P)}function gl(e,n,s,u){const g=pi(),M=$s(2);g.firstUpdatePass&&Ax(g,null,M,u);const P=wt();if(s!==zn&&ya(P,M,s)){const L=g.data[w()];if(rv(L,u)&&!Ix(g,M)){let U=u?L.classesWithoutHost:L.stylesWithoutHost;null!==U&&(s=et(U,s||"")),Lg(g,L,P,s,u)}else!function kC(e,n,s,u,g,M,P,L){g===zn&&(g=De);let U=0,J=0,_e=0<g.length?g[0]:null,Ve=0<M.length?M[0]:null;for(;null!==_e||null!==Ve;){const ht=U<g.length?g[U+1]:void 0,Mt=J<M.length?M[J+1]:void 0;let yi,oi=null;_e===Ve?(U+=2,J+=2,ht!==Mt&&(oi=Ve,yi=Mt)):null===Ve||null!==_e&&_e<Ve?(U+=2,oi=_e):(J+=2,oi=Ve,yi=Mt),null!==oi&&Px(e,n,s,u,oi,yi,P,L),_e=U<g.length?g[U]:null,Ve=J<M.length?M[J]:null}}(g,L,P,P[sn],P[M+1],P[M+1]=function IC(e,n,s){if(null==s||""===s)return De;const u=[],g=tc(s);if(Array.isArray(g))for(let M=0;M<g.length;M++)e(u,g[M],!0);else if("object"==typeof g)for(const M in g)g.hasOwnProperty(M)&&e(u,M,g[M]);else"string"==typeof g&&n(u,g);return u}(e,n,s),u,M)}}function Ix(e,n){return n>=e.expandoStartIndex}function Ax(e,n,s,u){const g=e.data;if(null===g[s+1]){const M=g[w()],P=Ix(e,s);rv(M,u)&&null===n&&!P&&(n=!1),n=function MC(e,n,s,u){const g=Kl(e);let M=u?n.residualClasses:n.residualStyles;if(null===g)0===(u?n.classBindings:n.styleBindings)&&(s=gf(s=nv(null,e,n,s,u),n.attrs,u),M=null);else{const P=n.directiveStylingLast;if(-1===P||e[P]!==g)if(s=nv(g,e,n,s,u),null===M){let U=function DC(e,n,s){const u=s?n.classBindings:n.styleBindings;if(0!==Eu(u))return e[kd(u)]}(e,n,u);void 0!==U&&Array.isArray(U)&&(U=nv(null,e,n,U[1],u),U=gf(U,n.attrs,u),function SC(e,n,s,u){e[kd(s?n.classBindings:n.styleBindings)]=u}(e,n,u,U))}else M=function TC(e,n,s){let u;const g=n.directiveEnd;for(let M=1+n.directiveStylingLast;M<g;M++)u=gf(u,e[M].hostAttrs,s);return gf(u,n.attrs,s)}(e,n,u)}return void 0!==M&&(u?n.residualClasses=M:n.residualStyles=M),s}(g,M,n,u),function vx(e,n,s,u,g,M){let P=M?n.classBindings:n.styleBindings,L=kd(P),U=Eu(P);e[u]=s;let _e,J=!1;if(Array.isArray(s)?(_e=s[1],(null===_e||sd(s,_e)>0)&&(J=!0)):_e=s,g)if(0!==U){const ht=kd(e[L+1]);e[u+1]=ff(ht,L),0!==ht&&(e[ht+1]=Wg(e[ht+1],u)),e[L+1]=function _x(e,n){return 131071&e|n<<17}(e[L+1],u)}else e[u+1]=ff(L,0),0!==L&&(e[L+1]=Wg(e[L+1],u)),L=u;else e[u+1]=ff(U,0),0===L?L=u:e[U+1]=Wg(e[U+1],u),U=u;J&&(e[u+1]=Zg(e[u+1])),Yy(e,_e,u,!0),Yy(e,_e,u,!1),function bx(e,n,s,u,g){const M=g?e.residualClasses:e.residualStyles;null!=M&&"string"==typeof n&&sd(M,n)>=0&&(s[u+1]=qg(s[u+1]))}(n,_e,e,u,M),P=ff(L,U),M?n.classBindings=P:n.styleBindings=P}(g,M,n,s,P,u)}}function nv(e,n,s,u,g){let M=null;const P=s.directiveEnd;let L=s.directiveStylingLast;for(-1===L?L=s.directiveStart:L++;L<P&&(M=n[L],u=gf(u,M.hostAttrs,g),M!==e);)L++;return null!==e&&(s.directiveStylingLast=L),u}function gf(e,n,s){const u=s?1:2;let g=-1;if(null!==n)for(let M=0;M<n.length;M++){const P=n[M];"number"==typeof P?g=P:g===u&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ao(e,P,!!s||n[++M]))}return void 0===e?null:e}function kx(e,n,s){ao(e,n,tc(s))}function AC(e,n,s){const u=String(n);""!==u&&!u.includes(" ")&&ao(e,u,s)}function Px(e,n,s,u,g,M,P,L){if(!(3&n.type))return;const U=e.data,J=U[L+1],_e=function yx(e){return 1==(1&e)}(J)?Ox(U,n,s,g,Eu(J),P):void 0;_f(_e)||(_f(M)||function gx(e){return 2==(2&e)}(J)&&(M=Ox(U,null,s,g,L,P)),function hm(e,n,s,u,g){if(n)g?e.addClass(s,u):e.removeClass(s,u);else{let M=-1===u.indexOf("-")?void 0:$u.DashCase;null==g?e.removeStyle(s,u,M):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),M|=$u.Important),e.setStyle(s,u,g,M))}}(u,P,F(w(),s),g,M))}function Ox(e,n,s,u,g,M){const P=null===n;let L;for(;g>0;){const U=e[g],J=Array.isArray(U),_e=J?U[1]:U,Ve=null===_e;let ht=s[g+1];ht===zn&&(ht=Ve?De:void 0);let Mt=Ve?od(ht,u):_e===u?ht:void 0;if(J&&!_f(Mt)&&(Mt=od(U,u)),_f(Mt)&&(L=Mt,P))return L;const oi=e[g+1];g=P?kd(oi):Eu(oi)}if(null!==n){let U=M?n.residualClasses:n.residualStyles;null!=U&&(L=od(U,u))}return L}function _f(e){return void 0!==e}function rv(e,n){return 0!=(e.flags&(n?8:16))}function Xg(e,n=""){const s=wt(),u=pi(),g=e+pn,M=u.firstCreatePass?yu(u,g,1,n,null):u.data[g],P=ov(u,s,M,n,e);s[g]=P,ee()&&xc(u,s,P,M),To(M,!1)}let ov=(e,n,s,u,g)=>(oe(!0),function fr(e,n){return e.createText(n)}(n[sn],u));function Jg(e){return yf("",e,""),Jg}function yf(e,n,s){const u=wt(),g=Fm(u,e,n,s);return g!==zn&&function qc(e,n,s){const u=F(n,e);!function qu(e,n,s){e.setValue(n,s)}(e[sn],u,s)}(u,w(),g),yf}function pv(e,n,s){gl(ao,Tc,Fm(wt(),e,n,s),!0)}function Qg(e,n,s){const u=wt();return ya(u,xs(),n)&&pl(pi(),f(),u,e,n,u[sn],s,!0),Qg}function e_(e,n,s){const u=wt();if(ya(u,xs(),n)){const M=pi(),P=f();pl(M,P,u,e,n,ly(Kl(M.data),P,u),s,!0)}return e_}const Mu=void 0;var tw=["en",[["a","p"],["AM","PM"],Mu],[["AM","PM"],Mu,Mu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mu,"{1} 'at' {0}",Mu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ew(e){const s=Math.floor(Math.abs(e)),u=e.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===u?1:5}];let kh={};function t_(e){const n=function iw(e){return e.toLowerCase().replace(/_/g,"-")}(e);let s=Mv(n);if(s)return s;const u=n.split("-")[0];if(s=Mv(u),s)return s;if("en"===u)return tw;throw new Ne(701,!1)}function Ev(e){return t_(e)[Ph.PluralCase]}function Mv(e){return e in kh||(kh[e]=Re.ng&&Re.ng.common&&Re.ng.common.locales&&Re.ng.common.locales[e]),kh[e]}var Ph=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Ph||{});const Oh="en-US";let Dv=Oh;function c_(e,n,s,u,g){if(e=bt(e),Array.isArray(e))for(let M=0;M<e.length;M++)c_(e[M],n,s,u,g);else{const M=pi(),P=wt();let L=ic(e)?e:bt(e.provide),U=N(e);const J=xo(),_e=1048575&J.providerIndexes,Ve=J.directiveStart,ht=J.providerIndexes>>20;if(ic(e)||!e.multi){const Mt=new ri(U,g,_u),oi=u_(L,n,g?_e:_e+ht,Ve);-1===oi?(Co(Pl(J,P),M,L),d_(M,e,n.length),n.push(L),J.directiveStart++,J.directiveEnd++,g&&(J.providerIndexes+=1048576),s.push(Mt),P.push(Mt)):(s[oi]=Mt,P[oi]=Mt)}else{const Mt=u_(L,n,_e+ht,Ve),oi=u_(L,n,_e,_e+ht),$i=oi>=0&&s[oi];if(g&&!$i||!g&&!(Mt>=0&&s[Mt])){Co(Pl(J,P),M,L);const an=function Yw(e,n,s,u,g){const M=new ri(e,s,_u);return M.multi=[],M.index=n,M.componentProviders=0,Wv(M,g,u&&!s),M}(g?qw:Ww,s.length,g,u,U);!g&&$i&&(s[oi].providerFactory=an),d_(M,e,n.length,0),n.push(L),J.directiveStart++,J.directiveEnd++,g&&(J.providerIndexes+=1048576),s.push(an),P.push(an)}else d_(M,e,Mt>-1?Mt:oi,Wv(s[g?oi:Mt],U,!g&&u));!g&&u&&$i&&s[oi].componentProviders++}}}function d_(e,n,s,u){const g=ic(n),M=function Em(e){return!!e.useClass}(n);if(g||M){const U=(M?bt(n.useClass):n).prototype.ngOnDestroy;if(U){const J=e.destroyHooks||(e.destroyHooks=[]);if(!g&&n.multi){const _e=J.indexOf(s);-1===_e?J.push(s,[u,U]):J[_e+1].push(u,U)}else J.push(s,U)}}}function Wv(e,n,s){return s&&e.componentProviders++,e.multi.push(n)-1}function u_(e,n,s,u){for(let g=s;g<u;g++)if(n[g]===e)return g;return-1}function Ww(e,n,s,u){return h_(this.multi,[])}function qw(e,n,s,u){const g=this.multi;let M;if(this.providerFactory){const P=this.providerFactory.componentProviders,L=Ol(s,s[Ai],this.providerFactory.index,u);M=L.slice(0,P),h_(g,M);for(let U=P;U<L.length;U++)M.push(L[U])}else M=[],h_(g,M);return M}function h_(e,n){for(let s=0;s<e.length;s++)n.push((0,e[s])());return n}function qv(e,n=[]){return s=>{s.providersResolver=(u,g)=>function Zw(e,n,s){const u=pi();if(u.firstCreatePass){const g=qr(e);c_(s,u.data,u.blueprint,g,!0),c_(n,u.data,u.blueprint,g,!1)}}(u,g?g(e):e,n)}}class Rh{}class Yv{}function Kv(e,n){return new m_(e,n??null,[])}class m_ extends Rh{constructor(n,s,u){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ef(this);const g=vr(n);this._bootstrapComponents=ca(g.bootstrap),this._r3Injector=J_(n,s,[{provide:Rh,useValue:this},{provide:Ss,useValue:this.componentFactoryResolver},...u],Le(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class p_ extends Yv{constructor(n){super(),this.moduleType=n}create(n){return new m_(this.moduleType,n,[])}}class Xv extends Rh{constructor(n){super(),this.componentFactoryResolver=new ef(this),this.instance=null;const s=new x([...n.providers,{provide:Rh,useValue:this},{provide:Ss,useValue:this.componentFactoryResolver}],n.parent||a(),n.debugName,new Set(["environment"]));this.injector=s,n.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Jv(e,n,s=null){return new Xv({providers:e,parent:n,debugName:s,runEnvironmentInitializers:!0}).injector}let Xw=(()=>{class e{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const u=yh(0,s.type),g=u.length>0?Jv([u],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,g)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=ut({token:e,providedIn:"environment",factory:()=>new e(j(p))}),e})();function Qv(e){e.getStandaloneInjector=n=>n.get(Xw).getOrCreateStandaloneInjector(e)}function ab(e,n,s){const u=Io()+e,g=wt();return g[u]===zn?Sc(g,u,s?n.call(s):n()):function Rm(e,n){return e[n]}(g,u)}function lb(e,n,s,u){return pb(wt(),Io(),e,n,s,u)}function cb(e,n,s,u,g){return function fb(e,n,s,u,g,M,P){const L=n+s;return bu(e,L,g,M)?Sc(e,L+2,P?u.call(P,g,M):u(g,M)):$m(e,L+2)}(wt(),Io(),e,n,s,u,g)}function db(e,n,s,u,g,M){return function gb(e,n,s,u,g,M,P,L){const U=n+s;return function sf(e,n,s,u,g){const M=bu(e,n,s,u);return ya(e,n+2,g)||M}(e,U,g,M,P)?Sc(e,U+3,L?u.call(L,g,M,P):u(g,M,P)):$m(e,U+3)}(wt(),Io(),e,n,s,u,g,M)}function mb(e,n,s,u){return function yb(e,n,s,u,g,M){let P=n+s,L=!1;for(let U=0;U<g.length;U++)ya(e,P++,g[U])&&(L=!0);return L?Sc(e,P,u.apply(M,g)):$m(e,P)}(wt(),Io(),e,n,s,u)}function $m(e,n){const s=e[n];return s===zn?void 0:s}function pb(e,n,s,u,g,M){const P=n+s;return ya(e,P,g)?Sc(e,P+1,M?u.call(M,g):u(g)):$m(e,P+1)}function vb(e,n){const s=pi();let u;const g=e+pn;s.firstCreatePass?(u=function c1(e,n){if(n)for(let s=n.length-1;s>=0;s--){const u=n[s];if(e===u.name)return u}}(n,s.pipeRegistry),s.data[g]=u,u.onDestroy&&(s.destroyHooks??=[]).push(g,u.onDestroy)):u=s.data[g];const M=u.factory||(u.factory=uo(u.type)),P=ke(_u);try{const L=or(!1),U=M();return or(L),function lx(e,n,s,u){s>=e.data.length&&(e.data[s]=null,e.blueprint[s]=null),n[s]=u}(s,wt(),g,U),U}finally{ke(P)}}function bb(e,n,s){const u=e+pn,g=wt(),M=Ye(g,u);return function Gm(e,n){return e[Ai].data[n].pure}(g,u)?pb(g,Io(),n,M.transform,s,M):M.transform(s)}function Mf(e){return n=>{setTimeout(e,void 0,n)}}const ac=class p1 extends C.x{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,s,u){let g=n,M=s||(()=>null),P=u;if(n&&"object"==typeof n){const U=n;g=U.next?.bind(U),M=U.error?.bind(U),P=U.complete?.bind(U)}this.__isAsync&&(M=Mf(M),g&&(g=Mf(g)),P&&(P=Mf(P)));const L=super.subscribe({next:g,error:M,complete:P});return n instanceof l.w0&&n.add(L),L}};function f1(){return this._results[Symbol.iterator]()}class Zm{get changes(){return this._changes||(this._changes=new ac)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Zm.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=f1)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,s){return this._results.reduce(n,s)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,s){const u=this;u.dirty=!1;const g=function ws(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Pu(e,n,s){if(e.length!==n.length)return!1;for(let u=0;u<e.length;u++){let g=e[u],M=n[u];if(s&&(g=s(g),M=s(M)),M!==g)return!1}return!0}(u._results,g,s))&&(u._results=g,u.length=g.length,u.last=g[this.length-1],u.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Fh=(()=>{class e{}return e.__NG_ELEMENT_ID__=xb,e})();const g1=Fh,_1=class extends g1{constructor(n,s,u){super(),this._declarationLView=n,this._declarationTContainer=s,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,s){return this.createEmbeddedViewImpl(n,s,null)}createEmbeddedViewImpl(n,s,u){const P=this._declarationTContainer.tView,L=Gp(this._declarationLView,P,n,4096&this._declarationLView[rn]?4096:16,null,P.declTNode,null,null,null,s||null,u||null);L[gs]=this._declarationLView[this._declarationTContainer.index];const J=this._declarationLView[yo];return null!==J&&(L[yo]=J.createEmbeddedView(P)),bg(P,L,n),new Pm(L)}};function xb(){return Df(xo(),wt())}function Df(e,n){return 4&e.type?new _1(n,e,_a(e,n)):null}let Sf=(()=>{class e{}return e.__NG_ELEMENT_ID__=E1,e})();function E1(){return Tb(xo(),wt())}const Mb=Sf,Db=class extends Mb{constructor(n,s,u){super(),this._lContainer=n,this._hostTNode=s,this._hostLView=u}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new Ws(this._hostTNode,this._hostLView)}get parentInjector(){const n=nr(this._hostTNode,this._hostLView);if(Kn(n)){const s=kr(n,this._hostLView),u=Tn(n);return new Ws(s[Ai].data[u+8],s)}return new Ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const s=Sb(this._lContainer);return null!==s&&s[n]||null}get length(){return this._lContainer.length-br}createEmbeddedView(n,s,u){let g,M;"number"==typeof u?g=u:null!=u&&(g=u.index,M=u.injector);const L=n.createEmbeddedViewImpl(s||{},M,null);return this.insertImpl(L,g,false),L}createComponent(n,s,u,g,M){const P=n&&!function Oc(e){return"function"==typeof e}(n);let L;if(P)L=s;else{const yi=s||{};L=yi.index,u=yi.injector,g=yi.projectableNodes,M=yi.environmentInjector||yi.ngModuleRef}const U=P?n:new Om(cn(n)),J=u||this.parentInjector;if(!M&&null==U.ngModule){const $i=(P?J:this.parentInjector).get(p,null);$i&&(M=$i)}cn(U.componentType??{});const Mt=U.create(J,g,null,M);return this.insertImpl(Mt.hostView,L,false),Mt}insert(n,s){return this.insertImpl(n,s,!1)}insertImpl(n,s,u){const g=n._lView,M=g[Ai];if(function er(e){return Xn(e[An])}(g)){const U=this.indexOf(n);if(-1!==U)this.detach(U);else{const J=g[An],_e=new Db(J,J[Yn],J[An]);_e.detach(_e.indexOf(n))}}const P=this._adjustIndex(s),L=this._lContainer;if(function Jf(e,n,s,u){const g=br+u,M=s.length;u>0&&(s[g-1][_o]=n),u<M-br?(n[_o]=s[g],Hh(s,br+u,n)):(s.push(n),n[_o]=null),n[An]=s;const P=n[gs];null!==P&&s!==P&&function Qf(e,n){const s=e[ea];n[ar]!==n[An][An][ar]&&(e[Ba]=!0),null===s?e[ea]=[n]:s.push(n)}(P,n);const L=n[yo];null!==L&&L.insertView(e),n[rn]|=128}(M,g,L,P),!u){const U=pd(P,L),J=g[sn],_e=Ju(J,L[co]);null!==_e&&function hd(e,n,s,u,g,M){u[gr]=g,u[Yn]=n,fd(e,u,s,1,g,M)}(M,L[Yn],J,g,_e,U)}return n.attachToViewContainerRef(),Hh(y_(L),P,n),n}move(n,s){return this.insert(n,s)}indexOf(n){const s=Sb(this._lContainer);return null!==s?s.indexOf(n):-1}remove(n){const s=this._adjustIndex(n,-1),u=am(this._lContainer,s);u&&(rd(y_(this._lContainer),s),wp(u[Ai],u))}detach(n){const s=this._adjustIndex(n,-1),u=am(this._lContainer,s);return u&&null!=rd(y_(this._lContainer),s)?new Pm(u):null}_adjustIndex(n,s=0){return n??this.length+s}};function Sb(e){return e[8]}function y_(e){return e[8]||(e[8]=[])}function Tb(e,n){let s;const u=n[e.index];return Xn(u)?s=u:(s=Wc(u,n,null,e),n[e.index]=s,Sh(n,s)),Ab(s,n,e,u),new Db(s,e,n)}let Ab=function kb(e,n,s,u){if(e[co])return;let g;g=8&s.type?_r(u):function Ib(e,n){const s=e[sn],u=s.createComment(""),g=Q(n,e);return bc(s,Ju(s,g),u,function cm(e,n){return e.nextSibling(n)}(s,g),!1),u}(n,s),e[co]=g};class Tf{constructor(n){this.queryList=n,this.matches=null}clone(){return new Tf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pd{constructor(n=[]){this.queries=n}createEmbeddedView(n){const s=n.queries;if(null!==s){const u=null!==n.contentQueries?n.contentQueries[0]:s.length,g=[];for(let M=0;M<u;M++){const P=s.getByIndex(M);g.push(this.queries[P.indexInDeclarationView].clone())}return new Pd(g)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let s=0;s<this.queries.length;s++)null!==Bb(n,s).matches&&this.queries[s].setDirty()}}class Ob{constructor(n,s,u=null){this.predicate=n,this.flags=s,this.read=u}}class If{constructor(n=[]){this.queries=n}elementStart(n,s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(n,s)}elementEnd(n){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(n)}embeddedTView(n){let s=null;for(let u=0;u<this.length;u++){const g=null!==s?s.length:0,M=this.getByIndex(u).embeddedTView(n,g);M&&(M.indexInDeclarationView=u,null!==s?s.push(M):s=[M])}return null!==s?new If(s):null}template(n,s){for(let u=0;u<this.queries.length;u++)this.queries[u].template(n,s)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Wm{constructor(n,s=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(n,s){this.isApplyingToNode(s)&&this.matchTNode(n,s)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,s){this.elementStart(n,s)}embeddedTView(n,s){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,s),new Wm(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let u=n.parent;for(;null!==u&&8&u.type&&u.index!==s;)u=u.parent;return s===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(n,s){const u=this.metadata.predicate;if(Array.isArray(u))for(let g=0;g<u.length;g++){const M=u[g];this.matchTNodeWithReadOption(n,s,Rb(s,M)),this.matchTNodeWithReadOption(n,s,ed(s,n,M,!1,!1))}else u===Fh?4&s.type&&this.matchTNodeWithReadOption(n,s,-1):this.matchTNodeWithReadOption(n,s,ed(s,n,u,!1,!1))}matchTNodeWithReadOption(n,s,u){if(null!==u){const g=this.metadata.read;if(null!==g)if(g===nc||g===Sf||g===Fh&&4&s.type)this.addMatch(s.index,-2);else{const M=ed(s,n,g,!1,!1);null!==M&&this.addMatch(s.index,M)}else this.addMatch(s.index,u)}}addMatch(n,s){null===this.matches?this.matches=[n,s]:this.matches.push(n,s)}}function Rb(e,n){const s=e.localNames;if(null!==s)for(let u=0;u<s.length;u+=2)if(s[u]===n)return s[u+1];return null}function v_(e,n,s,u){return-1===s?function Fb(e,n){return 11&e.type?_a(e,n):4&e.type?Df(e,n):null}(n,e):-2===s?function b_(e,n,s){return s===nc?_a(n,e):s===Fh?Df(n,e):s===Sf?Tb(n,e):void 0}(e,n,u):Ol(e,e[Ai],s,n)}function x_(e,n,s,u){const g=n[yo].queries[u];if(null===g.matches){const M=e.data,P=s.matches,L=[];for(let U=0;U<P.length;U+=2){const J=P[U];L.push(J<0?null:v_(n,M[J],P[U+1],s.metadata.read))}g.matches=L}return g.matches}function qm(e,n,s,u){const g=e.queries.getByIndex(s),M=g.matches;if(null!==M){const P=x_(e,n,g,s);for(let L=0;L<M.length;L+=2){const U=M[L];if(U>0)u.push(P[L/2]);else{const J=M[L+1],_e=n[-U];for(let Ve=br;Ve<_e.length;Ve++){const ht=_e[Ve];ht[gs]===ht[An]&&qm(ht[Ai],ht,J,u)}if(null!==_e[ea]){const Ve=_e[ea];for(let ht=0;ht<Ve.length;ht++){const Mt=Ve[ht];qm(Mt[Ai],Mt,J,u)}}}}}return u}function Af(e){const n=wt(),s=pi(),u=Tl();Aa(u+1);const g=Bb(s,u);if(e.dirty&&function Wt(e){return 4==(4&e[rn])}(n)===(2==(2&g.metadata.flags))){if(null===g.matches)e.reset([]);else{const M=g.crossesNgTemplate?qm(s,n,u,[]):x_(s,n,g,u);e.reset(M,Bp),e.notifyOnChanges()}return!0}return!1}function kf(e,n,s){const u=pi();u.firstCreatePass&&(zb(u,new Ob(e,n,s),-1),2==(2&n)&&(u.staticViewQueries=!0)),Ym(u,wt(),n)}function Lb(e,n,s,u){const g=pi();if(g.firstCreatePass){const M=xo();zb(g,new Ob(n,s,u),M.index),function S1(e,n){const s=e.contentQueries||(e.contentQueries=[]);n!==(s.length?s[s.length-1]:-1)&&s.push(e.queries.length-1,n)}(g,e),2==(2&s)&&(g.staticContentQueries=!0)}Ym(g,wt(),s)}function Nb(){return function D1(e,n){return e[yo].queries[n].queryList}(wt(),Tl())}function Ym(e,n,s){const u=new Zm(4==(4&s));(function h0(e,n,s,u){const g=sy(n);g.push(s),e.firstCreatePass&&ay(e).push(u,g.length-1)})(e,n,u,u.destroy),null===n[yo]&&(n[yo]=new Pd),n[yo].queries.push(new Tf(u))}function zb(e,n,s){null===e.queries&&(e.queries=new If),e.queries.track(new Wm(n,s))}function Bb(e,n){return e.queries.getByIndex(n)}function Vb(e,n){return Df(e,n)}function w_(e){return!!vr(e)}const Ii=new Er("Application Initializer");let Hi=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,u)=>{this.resolve=s,this.reject=u}),this.appInits=ge(Ii,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const g of this.appInits){const M=g();if(Bg(M))s.push(M);else if(Ly(M)){const P=new Promise((L,U)=>{M.subscribe({complete:L,error:U})});s.push(P)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{u()}).catch(g=>{this.reject(g)}),0===s.length&&u(),this.initialized=!0}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ut({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Cn=(()=>{class e{log(s){console.log(s)}warn(s){console.warn(s)}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ut({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const cr=new Er("LocaleId",{providedIn:"root",factory:()=>ge(cr,pt.Optional|pt.SkipSelf)||function qn(){return typeof $localize<"u"&&$localize.locale||Oh}()}),fo=new Er("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let ps=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ae.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ut({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Qa{constructor(n,s){this.ngModuleFactory=n,this.componentFactories=s}}let is=(()=>{class e{compileModuleSync(s){return new p_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const u=this.compileModuleSync(s),M=ca(vr(s).declarations).reduce((P,L)=>{const U=cn(L);return U&&P.push(new Om(U)),P},[]);return new Qa(u,M)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ut({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ln(...e){}class ur{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ac(!1),this.onMicrotaskEmpty=new ac(!1),this.onStable=new ac(!1),this.onError=new ac(!1),typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!u&&s,g.shouldCoalesceRunChangeDetection=u,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function gn(){const e="function"==typeof Re.requestAnimationFrame;let n=Re[e?"requestAnimationFrame":"setTimeout"],s=Re[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&s){const u=n[Zone.__symbol__("OriginalDelegate")];u&&(n=u);const g=s[Zone.__symbol__("OriginalDelegate")];g&&(s=g)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function eo(e){const n=()=>{!function _l(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Re,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,yl(e),e.isCheckStableRunning=!0,fs(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),yl(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,u,g,M,P,L)=>{try{return cc(e),s.invokeTask(g,M,P,L)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===M.type||e.shouldCoalesceRunChangeDetection)&&n(),Wo(e)}},onInvoke:(s,u,g,M,P,L,U)=>{try{return cc(e),s.invoke(g,M,P,L,U)}finally{e.shouldCoalesceRunChangeDetection&&n(),Wo(e)}},onHasTask:(s,u,g,M)=>{s.hasTask(g,M),u===g&&("microTask"==M.change?(e._hasPendingMicrotasks=M.microTask,yl(e),fs(e)):"macroTask"==M.change&&(e.hasPendingMacrotasks=M.macroTask))},onHandleError:(s,u,g,M)=>(s.handleError(g,M),e.runOutsideAngular(()=>e.onError.emit(M)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ur.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if(ur.isInAngularZone())throw new Ne(909,!1)}run(n,s,u){return this._inner.run(n,s,u)}runTask(n,s,u,g){const M=this._inner,P=M.scheduleEventTask("NgZoneEvent: "+g,n,Fa,ln,ln);try{return M.runTask(P,s,u)}finally{M.cancelTask(P)}}runGuarded(n,s,u){return this._inner.runGuarded(n,s,u)}runOutsideAngular(n){return this._outer.run(n)}}const Fa={};function fs(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function yl(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function cc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Wo(e){e._nesting--,fs(e)}class jl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ac,this.onMicrotaskEmpty=new ac,this.onStable=new ac,this.onError=new ac}run(n,s,u){return n.apply(s,u)}runGuarded(n,s,u){return n.apply(s,u)}runOutsideAngular(n){return n()}runTask(n,s,u,g){return n.apply(s,u)}}const ba=new Er("",{providedIn:"root",factory:Rd});function Rd(){const e=ge(ur);let n=!0;const s=new v.y(g=>{n=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{g.next(n),g.complete()})}),u=new v.y(g=>{let M;e.runOutsideAngular(()=>{M=e.onStable.subscribe(()=>{ur.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(n=!0,g.next(!0))})})});const P=e.onUnstable.subscribe(()=>{ur.assertInAngularZone(),n&&(n=!1,e.runOutsideAngular(()=>{g.next(!1)}))});return()=>{M.unsubscribe(),P.unsubscribe()}});return(0,He.T)(s,u.pipe((0,Ge.B)()))}const Du=new Er(""),A_=new Er("");let $1,SE=(()=>{class e{constructor(s,u,g){this._ngZone=s,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$1||(function TE(e){$1=e}(g),g.addToWindow(u)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ur.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(s)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,u,g){let M=-1;u&&u>0&&(M=setTimeout(()=>{this._callbacks=this._callbacks.filter(P=>P.timeoutId!==M),s(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:s,timeoutId:M,updateCb:g})}whenStable(s,u,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,u,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,u,g){return[]}}return e.\u0275fac=function(s){return new(s||e)(j(ur),j(JC),j(A_))},e.\u0275prov=ut({token:e,factory:e.\u0275fac}),e})(),JC=(()=>{class e{constructor(){this._applications=new Map}registerApplication(s,u){this._applications.set(s,u)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,u=!0){return $1?.findTestabilityInTree(this,s,u)??null}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ut({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Vh=null;const QC=new Er("AllowMultipleToken"),G1=new Er("PlatformDestroyListeners"),Z1=new Er("appBootstrapListener");class kE{constructor(n,s){this.name=n,this.token=s}}function iE(e,n,s=[]){const u=`Platform: ${n}`,g=new Er(u);return(M=[])=>{let P=W1();if(!P||P.injector.get(QC,!1)){const L=[...s,...M,{provide:g,useValue:!0}];e?e(L):function PE(e){if(Vh&&!Vh.get(QC,!1))throw new Ne(400,!1);(function eE(){!function ls(e){$a=e}(()=>{throw new Ne(600,!1)})})(),Vh=e;const n=e.get(rE);(function tE(e){e.get(Ke,null)?.forEach(s=>s())})(e)}(function nE(e=[],n){return Dd.create({name:n,providers:[{provide:pu,useValue:"platform"},{provide:G1,useValue:new Set([()=>Vh=null])},...e]})}(L,u))}return function RE(e){const n=W1();if(!n)throw new Ne(401,!1);return n}()}}function W1(){return Vh?.get(rE)??null}let rE=(()=>{class e{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,u){const g=function FE(e="zone.js",n){return"noop"===e?new jl:"zone.js"===e?new ur(n):e}(u?.ngZone,function oE(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:u?.ngZoneEventCoalescing,runCoalescing:u?.ngZoneRunCoalescing}));return g.run(()=>{const M=function Kw(e,n,s){return new m_(e,n,s)}(s.moduleType,this.injector,function dE(e){return[{provide:ur,useFactory:e},{provide:$c,multi:!0,useFactory:()=>{const n=ge(NE,{optional:!0});return()=>n.initialize()}},{provide:cE,useFactory:LE},{provide:ba,useFactory:Rd}]}(()=>g)),P=M.injector.get(Ed,null);return g.runOutsideAngular(()=>{const L=g.onError.subscribe({next:U=>{P.handleError(U)}});M.onDestroy(()=>{Yb(this._modules,M),L.unsubscribe()})}),function sE(e,n,s){try{const u=s();return Bg(u)?u.catch(g=>{throw n.runOutsideAngular(()=>e.handleError(g)),g}):u}catch(u){throw n.runOutsideAngular(()=>e.handleError(u)),u}}(P,g,()=>{const L=M.injector.get(Hi);return L.runInitializers(),L.donePromise.then(()=>(function Sv(e){ai(e,"Expected localeId to be defined"),"string"==typeof e&&(Dv=e.toLowerCase().replace(/_/g,"-"))}(M.injector.get(cr,Oh)||Oh),this._moduleDoBootstrap(M),M))})})}bootstrapModule(s,u=[]){const g=aE({},u);return function IE(e,n,s){const u=new p_(s);return Promise.resolve(u)}(0,0,s).then(M=>this.bootstrapModuleFactory(M,g))}_moduleDoBootstrap(s){const u=s.injector.get(Ff);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(g=>u.bootstrap(g));else{if(!s.instance.ngDoBootstrap)throw new Ne(-403,!1);s.instance.ngDoBootstrap(u)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const s=this._injector.get(G1,null);s&&(s.forEach(u=>u()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(s){return new(s||e)(j(Dd))},e.\u0275prov=ut({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function aE(e,n){return Array.isArray(n)?n.reduce(aE,e):{...e,...n}}let Ff=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ge(cE),this.zoneIsStable=ge(ba),this.componentTypes=[],this.components=[],this.isStable=ge(ps).hasPendingTasks.pipe((0,Pe.w)(s=>s?(0,ne.of)(!1):this.zoneIsStable),(0,qe.x)(),(0,Ge.B)()),this._injector=ge(p)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,u){const g=s instanceof Oa;if(!this._injector.get(Hi).done)throw!g&&As(s),new Ne(405,!1);let P;P=g?s:this._injector.get(Ss).resolveComponentFactory(s),this.componentTypes.push(P.componentType);const L=function AE(e){return e.isBoundToModule}(P)?void 0:this._injector.get(Rh),J=P.create(Dd.NULL,[],u||P.selector,L),_e=J.location.nativeElement,Ve=J.injector.get(Du,null);return Ve?.registerApplication(_e),J.onDestroy(()=>{this.detachView(J.hostView),Yb(this.components,J),Ve?.unregisterApplication(_e)}),this._loadComponent(J),J}tick(){if(this._runningTick)throw new Ne(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const u=s;this._views.push(u),u.attachToAppRef(this)}detachView(s){const u=s;Yb(this._views,u),u.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const u=this._injector.get(Z1,[]);u.push(...this._bootstrapListeners),u.forEach(g=>g(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Yb(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ne(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ut({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Yb(e,n){const s=e.indexOf(n);s>-1&&e.splice(s,1)}const cE=new Er("",{providedIn:"root",factory:()=>ge(Ed).handleError.bind(void 0)});function LE(){const e=ge(ur),n=ge(Ed);return s=>e.runOutsideAngular(()=>n.handleError(s))}let NE=(()=>{class e{constructor(){this.zone=ge(ur),this.applicationRef=ge(Ff)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ut({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function BE(){}let VE=(()=>{class e{}return e.__NG_ELEMENT_ID__=UE,e})();function UE(e){return function jE(e,n,s){if(Vr(e)&&!s){const u=It(e.index,n);return new Pm(u,u)}return 47&e.type?new Pm(n[ar],n):null}(xo(),wt(),16==(16&e))}class pE{constructor(){}supports(n){return nf(n)}create(n){return new qE(n)}}const WE=(e,n)=>n;class qE{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||WE}forEachItem(n){let s;for(s=this._itHead;null!==s;s=s._next)n(s)}forEachOperation(n){let s=this._itHead,u=this._removalsHead,g=0,M=null;for(;s||u;){const P=!u||s&&s.currentIndex<gE(u,g,M)?s:u,L=gE(P,g,M),U=P.currentIndex;if(P===u)g--,u=u._nextRemoved;else if(s=s._next,null==P.previousIndex)g++;else{M||(M=[]);const J=L-g,_e=U-g;if(J!=_e){for(let ht=0;ht<J;ht++){const Mt=ht<M.length?M[ht]:M[ht]=0,oi=Mt+ht;_e<=oi&&oi<J&&(M[ht]=Mt+1)}M[P.previousIndex]=_e-J}}L!==U&&n(P,L,U)}}forEachPreviousItem(n){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)n(s)}forEachAddedItem(n){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)n(s)}forEachMovedItem(n){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)n(s)}forEachRemovedItem(n){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)n(s)}forEachIdentityChange(n){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)n(s)}diff(n){if(null==n&&(n=[]),!nf(n))throw new Ne(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let g,M,P,s=this._itHead,u=!1;if(Array.isArray(n)){this.length=n.length;for(let L=0;L<this.length;L++)M=n[L],P=this._trackByFn(L,M),null!==s&&Object.is(s.trackById,P)?(u&&(s=this._verifyReinsertion(s,M,P,L)),Object.is(s.item,M)||this._addIdentityChange(s,M)):(s=this._mismatch(s,M,P,L),u=!0),s=s._next}else g=0,function H0(e,n){if(Array.isArray(e))for(let s=0;s<e.length;s++)n(e[s]);else{const s=e[Symbol.iterator]();let u;for(;!(u=s.next()).done;)n(u.value)}}(n,L=>{P=this._trackByFn(g,L),null!==s&&Object.is(s.trackById,P)?(u&&(s=this._verifyReinsertion(s,L,P,g)),Object.is(s.item,L)||this._addIdentityChange(s,L)):(s=this._mismatch(s,L,P,g),u=!0),s=s._next,g++}),this.length=g;return this._truncate(s),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,s,u,g){let M;return null===n?M=this._itTail:(M=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(n.item,s)||this._addIdentityChange(n,s),this._reinsertAfter(n,M,g)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(u,g))?(Object.is(n.item,s)||this._addIdentityChange(n,s),this._moveAfter(n,M,g)):n=this._addAfter(new YE(s,u),M,g),n}_verifyReinsertion(n,s,u,g){let M=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==M?n=this._reinsertAfter(M,n._prev,g):n.currentIndex!=g&&(n.currentIndex=g,this._addToMoves(n,g)),n}_truncate(n){for(;null!==n;){const s=n._next;this._addToRemovals(this._unlink(n)),n=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,s,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const g=n._prevRemoved,M=n._nextRemoved;return null===g?this._removalsHead=M:g._nextRemoved=M,null===M?this._removalsTail=g:M._prevRemoved=g,this._insertAfter(n,s,u),this._addToMoves(n,u),n}_moveAfter(n,s,u){return this._unlink(n),this._insertAfter(n,s,u),this._addToMoves(n,u),n}_addAfter(n,s,u){return this._insertAfter(n,s,u),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,s,u){const g=null===s?this._itHead:s._next;return n._next=g,n._prev=s,null===g?this._itTail=n:g._prev=n,null===s?this._itHead=n:s._next=n,null===this._linkedRecords&&(this._linkedRecords=new fE),this._linkedRecords.put(n),n.currentIndex=u,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const s=n._prev,u=n._next;return null===s?this._itHead=u:s._next=u,null===u?this._itTail=s:u._prev=s,n}_addToMoves(n,s){return n.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,s){return n.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class YE{constructor(n,s){this.item=n,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KE{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,s){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===s||s<=u.currentIndex)&&Object.is(u.trackById,n))return u;return null}remove(n){const s=n._prevDup,u=n._nextDup;return null===s?this._head=u:s._nextDup=u,null===u?this._tail=s:u._prevDup=s,null===this._head}}class fE{constructor(){this.map=new Map}put(n){const s=n.trackById;let u=this.map.get(s);u||(u=new KE,this.map.set(s,u)),u.add(n)}get(n,s){const g=this.map.get(n);return g?g.get(n,s):null}remove(n){const s=n.trackById;return this.map.get(s).remove(n)&&this.map.delete(s),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gE(e,n,s){const u=e.previousIndex;if(null===u)return u;let g=0;return s&&u<s.length&&(g=s[u]),u+n+g}class _E{constructor(){}supports(n){return n instanceof Map||Mg(n)}create(){return new XE}}class XE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let s;for(s=this._mapHead;null!==s;s=s._next)n(s)}forEachPreviousItem(n){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)n(s)}forEachChangedItem(n){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)n(s)}forEachAddedItem(n){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)n(s)}forEachRemovedItem(n){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)n(s)}diff(n){if(n){if(!(n instanceof Map||Mg(n)))throw new Ne(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(n,(u,g)=>{if(s&&s.key===g)this._maybeAddToChanges(s,u),this._appendAfter=s,s=s._next;else{const M=this._getOrCreateRecordForKey(g,u);s=this._insertBeforeOrAppend(s,M)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let u=s;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,s){if(n){const u=n._prev;return s._next=n,s._prev=u,n._prev=s,u&&(u._next=s),n===this._mapHead&&(this._mapHead=s),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(n,s){if(this._records.has(n)){const g=this._records.get(n);this._maybeAddToChanges(g,s);const M=g._prev,P=g._next;return M&&(M._next=P),P&&(P._prev=M),g._next=null,g._prev=null,g}const u=new JE(n);return this._records.set(n,u),u.currentValue=s,this._addToAdditions(u),u}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,s){Object.is(s,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=s,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,s){n instanceof Map?n.forEach(s):Object.keys(n).forEach(u=>s(n[u],u))}}class JE{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yE(){return new J1([new pE])}let J1=(()=>{class e{constructor(s){this.factories=s}static create(s,u){if(null!=u){const g=u.factories.slice();s=s.concat(g)}return new e(s)}static extend(s){return{provide:e,useFactory:u=>e.create(s,u||yE()),deps:[[e,new Nu,new Lu]]}}find(s){const u=this.factories.find(g=>g.supports(s));if(null!=u)return u;throw new Ne(901,!1)}}return e.\u0275prov=ut({token:e,providedIn:"root",factory:yE}),e})();function vE(){return new Q1([new _E])}let Q1=(()=>{class e{constructor(s){this.factories=s}static create(s,u){if(u){const g=u.factories.slice();s=s.concat(g)}return new e(s)}static extend(s){return{provide:e,useFactory:u=>e.create(s,u||vE()),deps:[[e,new Nu,new Lu]]}}find(s){const u=this.factories.find(g=>g.supports(s));if(u)return u;throw new Ne(901,!1)}}return e.\u0275prov=ut({token:e,providedIn:"root",factory:vE}),e})();const tM=iE(null,"core",[]);let iM=(()=>{class e{constructor(s){}}return e.\u0275fac=function(s){return new(s||e)(j(Ff))},e.\u0275mod=wa({type:e}),e.\u0275inj=Ut({}),e})();function uM(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function mM(e){const n=cn(e);if(!n)return null;const s=new Om(n);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},6223:(gi,mt,H)=>{"use strict";H.d(mt,{Cf:()=>jt,F:()=>Do,Fj:()=>Xe,JJ:()=>wi,JU:()=>Pe,On:()=>cn,Zs:()=>il,a5:()=>Ut,kI:()=>qt,sg:()=>Lr,u5:()=>pr});var C=H(5879),l=H(6814),ae=H(7715),v=H(9315),He=H(7398);let ne=(()=>{class Y{constructor(G,we){this._renderer=G,this._elementRef=we,this.onChange=Ht=>{},this.onTouched=()=>{}}setProperty(G,we){this._renderer.setProperty(this._elementRef.nativeElement,G,we)}registerOnTouched(G){this.onTouched=G}registerOnChange(G){this.onChange=G}setDisabledState(G){this.setProperty("disabled",G)}}return Y.\u0275fac=function(G){return new(G||Y)(C.Y36(C.Qsj),C.Y36(C.SBq))},Y.\u0275dir=C.lG2({type:Y}),Y})(),Ge=(()=>{class Y extends ne{}return Y.\u0275fac=function(){let W;return function(we){return(W||(W=C.n5z(Y)))(we||Y)}}(),Y.\u0275dir=C.lG2({type:Y,features:[C.qOj]}),Y})();const Pe=new C.OlP("NgValueAccessor"),it={provide:Pe,useExisting:(0,C.Gpc)(()=>Xe),multi:!0},et=new C.OlP("CompositionEventMode");let Xe=(()=>{class Y extends ne{constructor(G,we,Ht){super(G,we),this._compositionMode=Ht,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Le(){const Y=(0,l.q)()?(0,l.q)().getUserAgent():"";return/android (\d+)/.test(Y.toLowerCase())}())}writeValue(G){this.setProperty("value",G??"")}_handleInput(G){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(G)}_compositionStart(){this._composing=!0}_compositionEnd(G){this._composing=!1,this._compositionMode&&this.onChange(G)}}return Y.\u0275fac=function(G){return new(G||Y)(C.Y36(C.Qsj),C.Y36(C.SBq),C.Y36(et,8))},Y.\u0275dir=C.lG2({type:Y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(G,we){1&G&&C.NdJ("input",function(Di){return we._handleInput(Di.target.value)})("blur",function(){return we.onTouched()})("compositionstart",function(){return we._compositionStart()})("compositionend",function(Di){return we._compositionEnd(Di.target.value)})},features:[C._Bn([it]),C.qOj]}),Y})();function lt(Y){return null==Y||("string"==typeof Y||Array.isArray(Y))&&0===Y.length}function bt(Y){return null!=Y&&"number"==typeof Y.length}const jt=new C.OlP("NgValidators"),ni=new C.OlP("NgAsyncValidators"),Ti=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qt{static min(W){return function Ne(Y){return W=>{if(lt(W.value)||lt(Y))return null;const G=parseFloat(W.value);return!isNaN(G)&&G<Y?{min:{min:Y,actual:W.value}}:null}}(W)}static max(W){return function je(Y){return W=>{if(lt(W.value)||lt(Y))return null;const G=parseFloat(W.value);return!isNaN(G)&&G>Y?{max:{max:Y,actual:W.value}}:null}}(W)}static required(W){return Oe(W)}static requiredTrue(W){return Ft(W)}static email(W){return function Pt(Y){return lt(Y.value)||Ti.test(Y.value)?null:{email:!0}}(W)}static minLength(W){return function Nt(Y){return W=>lt(W.value)||!bt(W.value)?null:W.value.length<Y?{minlength:{requiredLength:Y,actualLength:W.value.length}}:null}(W)}static maxLength(W){return function fi(Y){return W=>bt(W.value)&&W.value.length>Y?{maxlength:{requiredLength:Y,actualLength:W.value.length}}:null}(W)}static pattern(W){return function vi(Y){if(!Y)return Ri;let W,G;return"string"==typeof Y?(G="","^"!==Y.charAt(0)&&(G+="^"),G+=Y,"$"!==Y.charAt(Y.length-1)&&(G+="$"),W=new RegExp(G)):(G=Y.toString(),W=Y),we=>{if(lt(we.value))return null;const Ht=we.value;return W.test(Ht)?null:{pattern:{requiredPattern:G,actualValue:Ht}}}}(W)}static nullValidator(W){return null}static compose(W){return Et(W)}static composeAsync(W){return Rt(W)}}function Oe(Y){return lt(Y.value)?{required:!0}:null}function Ft(Y){return!0===Y.value?null:{required:!0}}function Ri(Y){return null}function qi(Y){return null!=Y}function Dn(Y){return(0,C.QGY)(Y)?(0,ae.D)(Y):Y}function Hn(Y){let W={};return Y.forEach(G=>{W=null!=G?{...W,...G}:W}),0===Object.keys(W).length?null:W}function _n(Y,W){return W.map(G=>G(Y))}function Sn(Y){return Y.map(W=>function Vn(Y){return!Y.validate}(W)?W:G=>W.validate(G))}function Et(Y){if(!Y)return null;const W=Y.filter(qi);return 0==W.length?null:function(G){return Hn(_n(G,W))}}function ft(Y){return null!=Y?Et(Sn(Y)):null}function Rt(Y){if(!Y)return null;const W=Y.filter(qi);return 0==W.length?null:function(G){const we=_n(G,W).map(Dn);return(0,v.D)(we).pipe((0,He.U)(Hn))}}function Vt(Y){return null!=Y?Rt(Sn(Y)):null}function ei(Y,W){return null===Y?[W]:Array.isArray(Y)?[...Y,W]:[Y,W]}function Ct(Y){return Y._rawValidators}function ai(Y){return Y._rawAsyncValidators}function ze(Y){return Y?Array.isArray(Y)?Y:[Y]:[]}function rt(Y,W){return Array.isArray(Y)?Y.includes(W):Y===W}function dt(Y,W){const G=ze(W);return ze(Y).forEach(Ht=>{rt(G,Ht)||G.push(Ht)}),G}function Me(Y,W){return ze(W).filter(G=>!rt(Y,G))}class ut{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(W){this._rawValidators=W||[],this._composedValidatorFn=ft(this._rawValidators)}_setAsyncValidators(W){this._rawAsyncValidators=W||[],this._composedAsyncValidatorFn=Vt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(W){this._onDestroyCallbacks.push(W)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(W=>W()),this._onDestroyCallbacks=[]}reset(W=void 0){this.control&&this.control.reset(W)}hasError(W,G){return!!this.control&&this.control.hasError(W,G)}getError(W,G){return this.control?this.control.getError(W,G):null}}class Yt extends ut{get formDirective(){return null}get path(){return null}}class Ut extends ut{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ti{constructor(W){this._cd=W}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wi=(()=>{class Y extends ti{constructor(G){super(G)}}return Y.\u0275fac=function(G){return new(G||Y)(C.Y36(Ut,2))},Y.\u0275dir=C.lG2({type:Y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(G,we){2&G&&C.ekj("ng-untouched",we.isUntouched)("ng-touched",we.isTouched)("ng-pristine",we.isPristine)("ng-dirty",we.isDirty)("ng-valid",we.isValid)("ng-invalid",we.isInvalid)("ng-pending",we.isPending)},features:[C.qOj]}),Y})();const tn="VALID",Ji="INVALID",Vi="PENDING",zt="DISABLED";function li(Y){return(j(Y)?Y.validators:Y)||null}function q(Y,W){return(j(W)?W.asyncValidators:Y)||null}function j(Y){return null!=Y&&!Array.isArray(Y)&&"object"==typeof Y}class Ae{constructor(W,G){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(W),this._assignAsyncValidators(G)}get validator(){return this._composedValidatorFn}set validator(W){this._rawValidators=this._composedValidatorFn=W}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(W){this._rawAsyncValidators=this._composedAsyncValidatorFn=W}get parent(){return this._parent}get valid(){return this.status===tn}get invalid(){return this.status===Ji}get pending(){return this.status==Vi}get disabled(){return this.status===zt}get enabled(){return this.status!==zt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(W){this._assignValidators(W)}setAsyncValidators(W){this._assignAsyncValidators(W)}addValidators(W){this.setValidators(dt(W,this._rawValidators))}addAsyncValidators(W){this.setAsyncValidators(dt(W,this._rawAsyncValidators))}removeValidators(W){this.setValidators(Me(W,this._rawValidators))}removeAsyncValidators(W){this.setAsyncValidators(Me(W,this._rawAsyncValidators))}hasValidator(W){return rt(this._rawValidators,W)}hasAsyncValidator(W){return rt(this._rawAsyncValidators,W)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(W={}){this.touched=!0,this._parent&&!W.onlySelf&&this._parent.markAsTouched(W)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(W=>W.markAllAsTouched())}markAsUntouched(W={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(G=>{G.markAsUntouched({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}markAsDirty(W={}){this.pristine=!1,this._parent&&!W.onlySelf&&this._parent.markAsDirty(W)}markAsPristine(W={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(G=>{G.markAsPristine({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}markAsPending(W={}){this.status=Vi,!1!==W.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!W.onlySelf&&this._parent.markAsPending(W)}disable(W={}){const G=this._parentMarkedDirty(W.onlySelf);this.status=zt,this.errors=null,this._forEachChild(we=>{we.disable({...W,onlySelf:!0})}),this._updateValue(),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...W,skipPristineCheck:G}),this._onDisabledChange.forEach(we=>we(!0))}enable(W={}){const G=this._parentMarkedDirty(W.onlySelf);this.status=tn,this._forEachChild(we=>{we.enable({...W,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent}),this._updateAncestors({...W,skipPristineCheck:G}),this._onDisabledChange.forEach(we=>we(!1))}_updateAncestors(W){this._parent&&!W.onlySelf&&(this._parent.updateValueAndValidity(W),W.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(W){this._parent=W}getRawValue(){return this.value}updateValueAndValidity(W={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tn||this.status===Vi)&&this._runAsyncValidator(W.emitEvent)),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!W.onlySelf&&this._parent.updateValueAndValidity(W)}_updateTreeValidity(W={emitEvent:!0}){this._forEachChild(G=>G._updateTreeValidity(W)),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zt:tn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(W){if(this.asyncValidator){this.status=Vi,this._hasOwnPendingAsyncValidator=!0;const G=Dn(this.asyncValidator(this));this._asyncValidationSubscription=G.subscribe(we=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(we,{emitEvent:W})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(W,G={}){this.errors=W,this._updateControlsErrors(!1!==G.emitEvent)}get(W){let G=W;return null==G||(Array.isArray(G)||(G=G.split(".")),0===G.length)?null:G.reduce((we,Ht)=>we&&we._find(Ht),this)}getError(W,G){const we=G?this.get(G):this;return we&&we.errors?we.errors[W]:null}hasError(W,G){return!!this.getError(W,G)}get root(){let W=this;for(;W._parent;)W=W._parent;return W}_updateControlsErrors(W){this.status=this._calculateStatus(),W&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(W)}_initObservables(){this.valueChanges=new C.vpe,this.statusChanges=new C.vpe}_calculateStatus(){return this._allControlsDisabled()?zt:this.errors?Ji:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vi)?Vi:this._anyControlsHaveStatus(Ji)?Ji:tn}_anyControlsHaveStatus(W){return this._anyControls(G=>G.status===W)}_anyControlsDirty(){return this._anyControls(W=>W.dirty)}_anyControlsTouched(){return this._anyControls(W=>W.touched)}_updatePristine(W={}){this.pristine=!this._anyControlsDirty(),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}_updateTouched(W={}){this.touched=this._anyControlsTouched(),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}_registerOnCollectionChange(W){this._onCollectionChange=W}_setUpdateStrategy(W){j(W)&&null!=W.updateOn&&(this._updateOn=W.updateOn)}_parentMarkedDirty(W){return!W&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(W){return null}_assignValidators(W){this._rawValidators=Array.isArray(W)?W.slice():W,this._composedValidatorFn=function vt(Y){return Array.isArray(Y)?ft(Y):Y||null}(this._rawValidators)}_assignAsyncValidators(W){this._rawAsyncValidators=Array.isArray(W)?W.slice():W,this._composedAsyncValidatorFn=function V(Y){return Array.isArray(Y)?Vt(Y):Y||null}(this._rawAsyncValidators)}}class ve extends Ae{constructor(W,G,we){super(li(G),q(we,G)),this.controls=W,this._initObservables(),this._setUpdateStrategy(G),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(W,G){return this.controls[W]?this.controls[W]:(this.controls[W]=G,G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange),G)}addControl(W,G,we={}){this.registerControl(W,G),this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}removeControl(W,G={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],this.updateValueAndValidity({emitEvent:G.emitEvent}),this._onCollectionChange()}setControl(W,G,we={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],G&&this.registerControl(W,G),this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}contains(W){return this.controls.hasOwnProperty(W)&&this.controls[W].enabled}setValue(W,G={}){(function ge(Y,W,G){Y._forEachChild((we,Ht)=>{if(void 0===G[Ht])throw new C.vHH(1002,"")})})(this,0,W),Object.keys(W).forEach(we=>{(function ie(Y,W,G){const we=Y.controls;if(!(W?Object.keys(we):we).length)throw new C.vHH(1e3,"");if(!we[G])throw new C.vHH(1001,"")})(this,!0,we),this.controls[we].setValue(W[we],{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G)}patchValue(W,G={}){null!=W&&(Object.keys(W).forEach(we=>{const Ht=this.controls[we];Ht&&Ht.patchValue(W[we],{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G))}reset(W={},G={}){this._forEachChild((we,Ht)=>{we.reset(W[Ht],{onlySelf:!0,emitEvent:G.emitEvent})}),this._updatePristine(G),this._updateTouched(G),this.updateValueAndValidity(G)}getRawValue(){return this._reduceChildren({},(W,G,we)=>(W[we]=G.getRawValue(),W))}_syncPendingControls(){let W=this._reduceChildren(!1,(G,we)=>!!we._syncPendingControls()||G);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){Object.keys(this.controls).forEach(G=>{const we=this.controls[G];we&&W(we,G)})}_setUpControls(){this._forEachChild(W=>{W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(W){for(const[G,we]of Object.entries(this.controls))if(this.contains(G)&&W(we))return!0;return!1}_reduceValue(){return this._reduceChildren({},(G,we,Ht)=>((we.enabled||this.disabled)&&(G[Ht]=we.value),G))}_reduceChildren(W,G){let we=W;return this._forEachChild((Ht,Di)=>{we=G(we,Ht,Di)}),we}_allControlsDisabled(){for(const W of Object.keys(this.controls))if(this.controls[W].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(W){return this.controls.hasOwnProperty(W)?this.controls[W]:null}}const at=new C.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>xe}),xe="always";function ue(Y,W,G=xe){Fe(Y,W),W.valueAccessor.writeValue(Y.value),(Y.disabled||"always"===G)&&W.valueAccessor.setDisabledState?.(Y.disabled),function Ze(Y,W){W.valueAccessor.registerOnChange(G=>{Y._pendingValue=G,Y._pendingChange=!0,Y._pendingDirty=!0,"change"===Y.updateOn&&Gt(Y,W)})}(Y,W),function di(Y,W){const G=(we,Ht)=>{W.valueAccessor.writeValue(we),Ht&&W.viewToModelUpdate(we)};Y.registerOnChange(G),W._registerOnDestroy(()=>{Y._unregisterOnChange(G)})}(Y,W),function Bt(Y,W){W.valueAccessor.registerOnTouched(()=>{Y._pendingTouched=!0,"blur"===Y.updateOn&&Y._pendingChange&&Gt(Y,W),"submit"!==Y.updateOn&&Y.markAsTouched()})}(Y,W),function Tt(Y,W){if(W.valueAccessor.setDisabledState){const G=we=>{W.valueAccessor.setDisabledState(we)};Y.registerOnDisabledChange(G),W._registerOnDestroy(()=>{Y._unregisterOnDisabledChange(G)})}}(Y,W)}function De(Y,W,G=!0){const we=()=>{};W.valueAccessor&&(W.valueAccessor.registerOnChange(we),W.valueAccessor.registerOnTouched(we)),Ie(Y,W),Y&&(W._invokeOnDestroyCallbacks(),Y._registerOnCollectionChange(()=>{}))}function Je(Y,W){Y.forEach(G=>{G.registerOnValidatorChange&&G.registerOnValidatorChange(W)})}function Fe(Y,W){const G=Ct(Y);null!==W.validator?Y.setValidators(ei(G,W.validator)):"function"==typeof G&&Y.setValidators([G]);const we=ai(Y);null!==W.asyncValidator?Y.setAsyncValidators(ei(we,W.asyncValidator)):"function"==typeof we&&Y.setAsyncValidators([we]);const Ht=()=>Y.updateValueAndValidity();Je(W._rawValidators,Ht),Je(W._rawAsyncValidators,Ht)}function Ie(Y,W){let G=!1;if(null!==Y){if(null!==W.validator){const Ht=Ct(Y);if(Array.isArray(Ht)&&Ht.length>0){const Di=Ht.filter(Yr=>Yr!==W.validator);Di.length!==Ht.length&&(G=!0,Y.setValidators(Di))}}if(null!==W.asyncValidator){const Ht=ai(Y);if(Array.isArray(Ht)&&Ht.length>0){const Di=Ht.filter(Yr=>Yr!==W.asyncValidator);Di.length!==Ht.length&&(G=!0,Y.setAsyncValidators(Di))}}}const we=()=>{};return Je(W._rawValidators,we),Je(W._rawAsyncValidators,we),G}function Gt(Y,W){Y._pendingDirty&&Y.markAsDirty(),Y.setValue(Y._pendingValue,{emitModelToViewChange:!1}),W.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1}function ui(Y,W){Fe(Y,W)}function on(Y,W){Y._syncPendingControls(),W.forEach(G=>{const we=G.control;"submit"===we.updateOn&&we._pendingChange&&(G.viewToModelUpdate(we._pendingValue),we._pendingChange=!1)})}const Qn={provide:Yt,useExisting:(0,C.Gpc)(()=>Do)},hr=(()=>Promise.resolve())();let Do=(()=>{class Y extends Yt{constructor(G,we,Ht){super(),this.callSetDisabledState=Ht,this.submitted=!1,this._directives=new Set,this.ngSubmit=new C.vpe,this.form=new ve({},ft(G),Vt(we))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(G){hr.then(()=>{const we=this._findContainer(G.path);G.control=we.registerControl(G.name,G.control),ue(G.control,G,this.callSetDisabledState),G.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(G)})}getControl(G){return this.form.get(G.path)}removeControl(G){hr.then(()=>{const we=this._findContainer(G.path);we&&we.removeControl(G.name),this._directives.delete(G)})}addFormGroup(G){hr.then(()=>{const we=this._findContainer(G.path),Ht=new ve({});ui(Ht,G),we.registerControl(G.name,Ht),Ht.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(G){hr.then(()=>{const we=this._findContainer(G.path);we&&we.removeControl(G.name)})}getFormGroup(G){return this.form.get(G.path)}updateModel(G,we){hr.then(()=>{this.form.get(G.path).setValue(we)})}setValue(G){this.control.setValue(G)}onSubmit(G){return this.submitted=!0,on(this.form,this._directives),this.ngSubmit.emit(G),"dialog"===G?.target?.method}onReset(){this.resetForm()}resetForm(G=void 0){this.form.reset(G),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(G){return G.pop(),G.length?this.form.get(G):this.form}}return Y.\u0275fac=function(G){return new(G||Y)(C.Y36(jt,10),C.Y36(ni,10),C.Y36(at,8))},Y.\u0275dir=C.lG2({type:Y,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(G,we){1&G&&C.NdJ("submit",function(Di){return we.onSubmit(Di)})("reset",function(){return we.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[C._Bn([Qn]),C.qOj]}),Y})();function io(Y,W){const G=Y.indexOf(W);G>-1&&Y.splice(G,1)}function no(Y){return"object"==typeof Y&&null!==Y&&2===Object.keys(Y).length&&"value"in Y&&"disabled"in Y}const mn=class extends Ae{constructor(W=null,G,we){super(li(G),q(we,G)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(W),this._setUpdateStrategy(G),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),j(G)&&(G.nonNullable||G.initialValueIsDefault)&&(this.defaultValue=no(W)?W.value:W)}setValue(W,G={}){this.value=this._pendingValue=W,this._onChange.length&&!1!==G.emitModelToViewChange&&this._onChange.forEach(we=>we(this.value,!1!==G.emitViewToModelChange)),this.updateValueAndValidity(G)}patchValue(W,G={}){this.setValue(W,G)}reset(W=this.defaultValue,G={}){this._applyFormState(W),this.markAsPristine(G),this.markAsUntouched(G),this.setValue(this.value,G),this._pendingChange=!1}_updateValue(){}_anyControls(W){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(W){this._onChange.push(W)}_unregisterOnChange(W){io(this._onChange,W)}registerOnDisabledChange(W){this._onDisabledChange.push(W)}_unregisterOnDisabledChange(W){io(this._onDisabledChange,W)}_forEachChild(W){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(W){no(W)?(this.value=this._pendingValue=W.value,W.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=W}},Ea={provide:Ut,useExisting:(0,C.Gpc)(()=>cn)},Na=(()=>Promise.resolve())();let cn=(()=>{class Y extends Ut{constructor(G,we,Ht,Di,Yr,uo){super(),this._changeDetectorRef=Yr,this.callSetDisabledState=uo,this.control=new mn,this._registered=!1,this.name="",this.update=new C.vpe,this._parent=G,this._setValidators(we),this._setAsyncValidators(Ht),this.valueAccessor=function fn(Y,W){if(!W)return null;let G,we,Ht;return Array.isArray(W),W.forEach(Di=>{Di.constructor===Xe?G=Di:function to(Y){return Object.getPrototypeOf(Y.constructor)===Ge}(Di)?we=Di:Ht=Di}),Ht||we||G||null}(0,Di)}ngOnChanges(G){if(this._checkForErrors(),!this._registered||"name"in G){if(this._registered&&(this._checkName(),this.formDirective)){const we=G.name.previousValue;this.formDirective.removeControl({name:we,path:this._getPath(we)})}this._setUpControl()}"isDisabled"in G&&this._updateDisabled(G),function Fr(Y,W){if(!Y.hasOwnProperty("model"))return!1;const G=Y.model;return!!G.isFirstChange()||!Object.is(W,G.currentValue)}(G,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(G){this.viewModel=G,this.update.emit(G)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ue(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(G){Na.then(()=>{this.control.setValue(G,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(G){const we=G.isDisabled.currentValue,Ht=0!==we&&(0,C.VuI)(we);Na.then(()=>{Ht&&!this.control.disabled?this.control.disable():!Ht&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(G){return this._parent?function Te(Y,W){return[...W.path,Y]}(G,this._parent):[G]}}return Y.\u0275fac=function(G){return new(G||Y)(C.Y36(Yt,9),C.Y36(jt,10),C.Y36(ni,10),C.Y36(Pe,10),C.Y36(C.sBO,8),C.Y36(at,8))},Y.\u0275dir=C.lG2({type:Y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[C._Bn([Ea]),C.qOj,C.TTD]}),Y})(),go=(()=>{class Y{}return Y.\u0275fac=function(G){return new(G||Y)},Y.\u0275mod=C.oAB({type:Y}),Y.\u0275inj=C.cJS({}),Y})();const _o={provide:Yt,useExisting:(0,C.Gpc)(()=>Lr)};let Lr=(()=>{class Y extends Yt{constructor(G,we,Ht){super(),this.callSetDisabledState=Ht,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new C.vpe,this._setValidators(G),this._setAsyncValidators(we)}ngOnChanges(G){this._checkFormPresent(),G.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ie(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(G){const we=this.form.get(G.path);return ue(we,G,this.callSetDisabledState),we.updateValueAndValidity({emitEvent:!1}),this.directives.push(G),we}getControl(G){return this.form.get(G.path)}removeControl(G){De(G.control||null,G,!1),function Mr(Y,W){const G=Y.indexOf(W);G>-1&&Y.splice(G,1)}(this.directives,G)}addFormGroup(G){this._setUpFormContainer(G)}removeFormGroup(G){this._cleanUpFormContainer(G)}getFormGroup(G){return this.form.get(G.path)}addFormArray(G){this._setUpFormContainer(G)}removeFormArray(G){this._cleanUpFormContainer(G)}getFormArray(G){return this.form.get(G.path)}updateModel(G,we){this.form.get(G.path).setValue(we)}onSubmit(G){return this.submitted=!0,on(this.form,this.directives),this.ngSubmit.emit(G),"dialog"===G?.target?.method}onReset(){this.resetForm()}resetForm(G=void 0){this.form.reset(G),this.submitted=!1}_updateDomValue(){this.directives.forEach(G=>{const we=G.control,Ht=this.form.get(G.path);we!==Ht&&(De(we||null,G),(Y=>Y instanceof mn)(Ht)&&(ue(Ht,G,this.callSetDisabledState),G.control=Ht))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(G){const we=this.form.get(G.path);ui(we,G),we.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(G){if(this.form){const we=this.form.get(G.path);we&&function nn(Y,W){return Ie(Y,W)}(we,G)&&we.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fe(this.form,this),this._oldForm&&Ie(this._oldForm,this)}_checkFormPresent(){}}return Y.\u0275fac=function(G){return new(G||Y)(C.Y36(jt,10),C.Y36(ni,10),C.Y36(at,8))},Y.\u0275dir=C.lG2({type:Y,selectors:[["","formGroup",""]],hostBindings:function(G,we){1&G&&C.NdJ("submit",function(Di){return we.onSubmit(Di)})("reset",function(){return we.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[C._Bn([_o]),C.qOj,C.TTD]}),Y})(),as=(()=>{class Y{constructor(){this._validator=Ri}ngOnChanges(G){if(this.inputName in G){const we=this.normalizeInput(G[this.inputName].currentValue);this._enabled=this.enabled(we),this._validator=this._enabled?this.createValidator(we):Ri,this._onChange&&this._onChange()}}validate(G){return this._validator(G)}registerOnValidatorChange(G){this._onChange=G}enabled(G){return null!=G}}return Y.\u0275fac=function(G){return new(G||Y)},Y.\u0275dir=C.lG2({type:Y,features:[C.TTD]}),Y})();const ea={provide:jt,useExisting:(0,C.Gpc)(()=>br),multi:!0},Os={provide:jt,useExisting:(0,C.Gpc)(()=>il),multi:!0};let br=(()=>{class Y extends as{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=C.VuI,this.createValidator=G=>Oe}enabled(G){return G}}return Y.\u0275fac=function(){let W;return function(we){return(W||(W=C.n5z(Y)))(we||Y)}}(),Y.\u0275dir=C.lG2({type:Y,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(G,we){2&G&&C.uIk("required",we._enabled?"":null)},inputs:{required:"required"},features:[C._Bn([ea]),C.qOj]}),Y})(),il=(()=>{class Y extends br{constructor(){super(...arguments),this.createValidator=G=>Ft}}return Y.\u0275fac=function(){let W;return function(we){return(W||(W=C.n5z(Y)))(we||Y)}}(),Y.\u0275dir=C.lG2({type:Y,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(G,we){2&G&&C.uIk("required",we._enabled?"":null)},features:[C._Bn([Os]),C.qOj]}),Y})(),Fs=(()=>{class Y{}return Y.\u0275fac=function(G){return new(G||Y)},Y.\u0275mod=C.oAB({type:Y}),Y.\u0275inj=C.cJS({imports:[go]}),Y})(),pr=(()=>{class Y{static withConfig(G){return{ngModule:Y,providers:[{provide:at,useValue:G.callSetDisabledState??xe}]}}}return Y.\u0275fac=function(G){return new(G||Y)},Y.\u0275mod=C.oAB({type:Y}),Y.\u0275inj=C.cJS({imports:[Fs]}),Y})()},2296:(gi,mt,H)=>{"use strict";H.d(mt,{RK:()=>Ct,cs:()=>ft,lW:()=>Dn,o6:()=>ai,ot:()=>ze,zs:()=>Hn});var C=H(2831),l=H(5879),ae=H(7849),v=H(3680),He=H(6814),ne=H(2495);const Ge=["mat-button",""],Pe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],qe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],it=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}",Le=["mat-fab",""],lt=["mat-icon-button",""],bt=["*"],ni={capture:!0},Ti=["focus","click","mouseenter","touchstart"],qt="mat-button-ripple-uninitialized";let Ne=(()=>{class rt{constructor(){this._document=(0,l.f3M)(He.K0,{optional:!0}),this._animationMode=(0,l.f3M)(l.QbO,{optional:!0}),this._globalRippleOptions=(0,l.f3M)(v.Y2,{optional:!0}),this._platform=(0,l.f3M)(C.t4),this._ngZone=(0,l.f3M)(l.R0b),this._onInteraction=Me=>{if(Me.target===this._document)return;const Yt=Me.target.closest(`[${qt}]`);Yt&&(Yt.removeAttribute(qt),this._appendRipple(Yt))},this._ngZone.runOutsideAngular(()=>{for(const Me of Ti)this._document?.addEventListener(Me,this._onInteraction,ni)})}ngOnDestroy(){for(const Me of Ti)this._document?.removeEventListener(Me,this._onInteraction,ni)}_appendRipple(Me){if(!this._document)return;const ut=this._document.createElement("span");ut.classList.add("mat-mdc-button-ripple");const Yt=new je(Me,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);Yt.rippleConfig.centered=Me.hasAttribute("mat-icon-button"),new v.IR(Yt,this._ngZone,ut,this._platform).setupTriggerEvents(Me),Me.append(ut)}_createMatRipple(Me){if(!this._document)return;Me.querySelector(".mat-mdc-button-ripple")?.remove(),Me.removeAttribute(qt);const ut=this._document.createElement("span");ut.classList.add("mat-mdc-button-ripple");const Yt=new v.wG(new l.SBq(ut),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return Yt._isInitialized=!0,Yt.trigger=Me,Me.append(ut),Yt}}return rt.\u0275fac=function(Me){return new(Me||rt)},rt.\u0275prov=l.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})();class je{constructor(dt,Me,ut){this._button=dt,this._globalRippleOptions=Me,this._setRippleConfig(Me,ut)}_setRippleConfig(dt,Me){this.rippleConfig=dt||{},"NoopAnimations"===Me&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const Pt=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Nt=(0,v.pj)((0,v.Id)((0,v.Kr)(class{constructor(rt){this._elementRef=rt}})));let fi=(()=>{class rt extends Nt{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(Me){this._ripple=Me}constructor(Me,ut,Yt,Ut){super(Me),this._platform=ut,this._ngZone=Yt,this._animationMode=Ut,this._focusMonitor=(0,l.f3M)(ae.tE),this._rippleLoader=(0,l.f3M)(Ne),this._isFab=!1;const ti=Me.nativeElement.classList;for(const ot of Pt)this._hasHostAttributes(ot.selector)&&ot.mdcClasses.forEach(Dt=>{ti.add(Dt)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Me="program",ut){Me?this._focusMonitor.focusVia(this._elementRef.nativeElement,Me,ut):this._elementRef.nativeElement.focus(ut)}_hasHostAttributes(...Me){return Me.some(ut=>this._elementRef.nativeElement.hasAttribute(ut))}}return rt.\u0275fac=function(Me){l.$Z()},rt.\u0275dir=l.lG2({type:rt,features:[l.qOj,l.TTD]}),rt})(),qi=(()=>{class rt extends fi{constructor(Me,ut,Yt,Ut){super(Me,ut,Yt,Ut),this._haltDisabledEvents=ti=>{this.disabled&&(ti.preventDefault(),ti.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return rt.\u0275fac=function(Me){l.$Z()},rt.\u0275dir=l.lG2({type:rt,features:[l.qOj]}),rt})(),Dn=(()=>{class rt extends fi{constructor(Me,ut,Yt,Ut){super(Me,ut,Yt,Ut)}}return rt.\u0275fac=function(Me){return new(Me||rt)(l.Y36(l.SBq),l.Y36(C.t4),l.Y36(l.R0b),l.Y36(l.QbO,8))},rt.\u0275cmp=l.Xpm({type:rt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(Me,ut){2&Me&&(l.uIk("disabled",ut.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===ut._animationMode)("mat-unthemed",!ut.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:Ge,ngContentSelectors:qe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(Me,ut){1&Me&&(l.F$t(Pe),l._UZ(0,"span",0),l.Hsn(1),l.TgZ(2,"span",1),l.Hsn(3,1),l.qZA(),l.Hsn(4,2),l._UZ(5,"span",2)(6,"span",3)),2&Me&&l.ekj("mdc-button__ripple",!ut._isFab)("mdc-fab__ripple",ut._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),rt})(),Hn=(()=>{class rt extends qi{constructor(Me,ut,Yt,Ut){super(Me,ut,Yt,Ut)}}return rt.\u0275fac=function(Me){return new(Me||rt)(l.Y36(l.SBq),l.Y36(C.t4),l.Y36(l.R0b),l.Y36(l.QbO,8))},rt.\u0275cmp=l.Xpm({type:rt,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:9,hostBindings:function(Me,ut){2&Me&&(l.uIk("disabled",ut.disabled||null)("tabindex",ut.disabled?-1:ut.tabIndex)("aria-disabled",ut.disabled.toString()),l.ekj("_mat-animation-noopable","NoopAnimations"===ut._animationMode)("mat-unthemed",!ut.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[l.qOj],attrs:Ge,ngContentSelectors:qe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(Me,ut){1&Me&&(l.F$t(Pe),l._UZ(0,"span",0),l.Hsn(1),l.TgZ(2,"span",1),l.Hsn(3,1),l.qZA(),l.Hsn(4,2),l._UZ(5,"span",2)(6,"span",3)),2&Me&&l.ekj("mdc-button__ripple",!ut._isFab)("mdc-fab__ripple",ut._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',it],encapsulation:2,changeDetection:0}),rt})();const _n=new l.OlP("mat-mdc-fab-default-options",{providedIn:"root",factory:Vn});function Vn(){return{color:"accent"}}const Sn=Vn();let ft=(()=>{class rt extends fi{get extended(){return this._extended}set extended(Me){this._extended=(0,ne.Ig)(Me)}constructor(Me,ut,Yt,Ut,ti){super(Me,ut,Yt,Ut),this._options=ti,this._isFab=!0,this._options=this._options||Sn,this.color=this.defaultColor=this._options.color||Sn.color}}return rt.\u0275fac=function(Me){return new(Me||rt)(l.Y36(l.SBq),l.Y36(C.t4),l.Y36(l.R0b),l.Y36(l.QbO,8),l.Y36(_n,8))},rt.\u0275cmp=l.Xpm({type:rt,selectors:[["button","mat-fab",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:11,hostBindings:function(Me,ut){2&Me&&(l.uIk("disabled",ut.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===ut._animationMode)("mat-unthemed",!ut.color)("mat-mdc-button-base",!0)("mdc-fab--extended",ut.extended)("mat-mdc-extended-fab",ut.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[l.qOj],attrs:Le,ngContentSelectors:qe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(Me,ut){1&Me&&(l.F$t(Pe),l._UZ(0,"span",0),l.Hsn(1),l.TgZ(2,"span",1),l.Hsn(3,1),l.qZA(),l.Hsn(4,2),l._UZ(5,"span",2)(6,"span",3)),2&Me&&l.ekj("mdc-button__ripple",!ut._isFab)("mdc-fab__ripple",ut._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),rt})(),Ct=(()=>{class rt extends fi{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement),this._ripple.centered=!0),this._ripple}constructor(Me,ut,Yt,Ut){super(Me,ut,Yt,Ut)}}return rt.\u0275fac=function(Me){return new(Me||rt)(l.Y36(l.SBq),l.Y36(C.t4),l.Y36(l.R0b),l.Y36(l.QbO,8))},rt.\u0275cmp=l.Xpm({type:rt,selectors:[["button","mat-icon-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(Me,ut){2&Me&&(l.uIk("disabled",ut.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===ut._animationMode)("mat-unthemed",!ut.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:lt,ngContentSelectors:bt,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(Me,ut){1&Me&&(l.F$t(),l._UZ(0,"span",0),l.Hsn(1),l._UZ(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',it],encapsulation:2,changeDetection:0}),rt})(),ai=(()=>{class rt extends qi{constructor(Me,ut,Yt,Ut){super(Me,ut,Yt,Ut)}}return rt.\u0275fac=function(Me){return new(Me||rt)(l.Y36(l.SBq),l.Y36(C.t4),l.Y36(l.R0b),l.Y36(l.QbO,8))},rt.\u0275cmp=l.Xpm({type:rt,selectors:[["a","mat-icon-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:9,hostBindings:function(Me,ut){2&Me&&(l.uIk("disabled",ut.disabled||null)("tabindex",ut.disabled?-1:ut.tabIndex)("aria-disabled",ut.disabled.toString()),l.ekj("_mat-animation-noopable","NoopAnimations"===ut._animationMode)("mat-unthemed",!ut.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[l.qOj],attrs:lt,ngContentSelectors:qe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(Me,ut){1&Me&&(l.F$t(Pe),l._UZ(0,"span",0),l.Hsn(1),l.TgZ(2,"span",1),l.Hsn(3,1),l.qZA(),l.Hsn(4,2),l._UZ(5,"span",2)(6,"span",3)),2&Me&&l.ekj("mdc-button__ripple",!ut._isFab)("mdc-fab__ripple",ut._isFab)},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',it],encapsulation:2,changeDetection:0}),rt})(),ze=(()=>{class rt{}return rt.\u0275fac=function(Me){return new(Me||rt)},rt.\u0275mod=l.oAB({type:rt}),rt.\u0275inj=l.cJS({imports:[v.BQ,v.si,v.BQ]}),rt})()},3680:(gi,mt,H)=>{"use strict";H.d(mt,{rD:()=>dt,K7:()=>_i,HF:()=>Re,Y2:()=>ce,BQ:()=>Ft,ey:()=>Vi,Ng:()=>vt,us:()=>de,wG:()=>Se,si:()=>ke,IR:()=>Qt,CB:()=>zt,jH:()=>li,pj:()=>Ri,Kr:()=>qi,Id:()=>vi,FD:()=>Hn,dB:()=>_n,sb:()=>Dn});var C=H(5879),l=H(7849),ae=H(9388),He=H(6814),ne=H(2831),Ge=H(2495),Pe=H(5592),qe=H(8645),Ue=H(6028);const et=["text"];function Xe(q,V){if(1&q&&C._UZ(0,"mat-pseudo-checkbox",6),2&q){const j=C.oxw();C.Q6J("disabled",j.disabled)("state",j.selected?"checked":"unchecked")}}function lt(q,V){if(1&q&&C._UZ(0,"mat-pseudo-checkbox",7),2&q){const j=C.oxw();C.Q6J("disabled",j.disabled)}}function bt(q,V){if(1&q&&(C.TgZ(0,"span",8),C._uU(1),C.qZA()),2&q){const j=C.oxw();C.xp6(1),C.hij("(",j.group.label,")")}}const jt=[[["mat-icon"]],"*"],ni=["mat-icon","*"],Oe=new C.OlP("mat-sanity-checks",{providedIn:"root",factory:function je(){return!0}});let Ft=(()=>{class q{constructor(j,ie,ge){this._sanityChecks=ie,this._document=ge,this._hasDoneGlobalChecks=!1,j._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(j){return!(0,ne.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[j])}}return q.\u0275fac=function(j){return new(j||q)(C.LFG(l.qm),C.LFG(Oe,8),C.LFG(He.K0))},q.\u0275mod=C.oAB({type:q}),q.\u0275inj=C.cJS({imports:[ae.vT,ae.vT]}),q})();function vi(q){return class extends q{get disabled(){return this._disabled}set disabled(V){this._disabled=(0,Ge.Ig)(V)}constructor(...V){super(...V),this._disabled=!1}}}function Ri(q,V){return class extends q{get color(){return this._color}set color(j){const ie=j||this.defaultColor;ie!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),ie&&this._elementRef.nativeElement.classList.add(`mat-${ie}`),this._color=ie)}constructor(...j){super(...j),this.defaultColor=V,this.color=V}}}function qi(q){return class extends q{get disableRipple(){return this._disableRipple}set disableRipple(V){this._disableRipple=(0,Ge.Ig)(V)}constructor(...V){super(...V),this._disableRipple=!1}}}function Dn(q,V=0){return class extends q{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(j){this._tabIndex=null!=j?(0,Ge.su)(j):this.defaultTabIndex}constructor(...j){super(...j),this._tabIndex=V,this.defaultTabIndex=V}}}function Hn(q){return class extends q{updateErrorState(){const V=this.errorState,Ae=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Ae!==V&&(this.errorState=Ae,this.stateChanges.next())}constructor(...V){super(...V),this.errorState=!1}}}function _n(q){return class extends q{constructor(...V){super(...V),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Pe.y(j=>{this._isInitialized?this._notifySubscriber(j):this._pendingSubscribers.push(j)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(V){V.next(),V.complete()}}}let dt=(()=>{class q{isErrorState(j,ie){return!!(j&&j.invalid&&(j.touched||ie&&ie.submitted))}}return q.\u0275fac=function(j){return new(j||q)},q.\u0275prov=C.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();class ti{constructor(V,j,ie,ge=!1){this._renderer=V,this.element=j,this.config=ie,this._animationForciblyDisabledThroughCss=ge,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ot=(0,ne.i$)({passive:!0,capture:!0});class Dt{constructor(){this._events=new Map,this._delegateEventHandler=V=>{const j=(0,ne.sA)(V);j&&this._events.get(V.type)?.forEach((ie,ge)=>{(ge===j||ge.contains(j))&&ie.forEach(Ae=>Ae.handleEvent(V))})}}addHandler(V,j,ie,ge){const Ae=this._events.get(j);if(Ae){const ve=Ae.get(ie);ve?ve.add(ge):Ae.set(ie,new Set([ge]))}else this._events.set(j,new Map([[ie,new Set([ge])]])),V.runOutsideAngular(()=>{document.addEventListener(j,this._delegateEventHandler,ot)})}removeHandler(V,j,ie){const ge=this._events.get(V);if(!ge)return;const Ae=ge.get(j);Ae&&(Ae.delete(ie),0===Ae.size&&ge.delete(j),0===ge.size&&(this._events.delete(V),document.removeEventListener(V,this._delegateEventHandler,ot)))}}const wi={enterDuration:225,exitDuration:150},Zi=(0,ne.i$)({passive:!0,capture:!0}),Fn=["mousedown","touchstart"],bn=["mouseup","mouseleave","touchend","touchcancel"];class Qt{constructor(V,j,ie,ge){this._target=V,this._ngZone=j,this._platform=ge,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,ge.isBrowser&&(this._containerElement=(0,Ge.fI)(ie))}fadeInRipple(V,j,ie={}){const ge=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Ae={...wi,...ie.animation};ie.centered&&(V=ge.left+ge.width/2,j=ge.top+ge.height/2);const ve=ie.radius||function pt(q,V,j){const ie=Math.max(Math.abs(q-j.left),Math.abs(q-j.right)),ge=Math.max(Math.abs(V-j.top),Math.abs(V-j.bottom));return Math.sqrt(ie*ie+ge*ge)}(V,j,ge),se=V-ge.left,X=j-ge.top,pe=Ae.enterDuration,Qe=document.createElement("div");Qe.classList.add("mat-ripple-element"),Qe.style.left=se-ve+"px",Qe.style.top=X-ve+"px",Qe.style.height=2*ve+"px",Qe.style.width=2*ve+"px",null!=ie.color&&(Qe.style.backgroundColor=ie.color),Qe.style.transitionDuration=`${pe}ms`,this._containerElement.appendChild(Qe);const at=window.getComputedStyle(Qe),Te=at.transitionDuration,ue="none"===at.transitionProperty||"0s"===Te||"0s, 0s"===Te||0===ge.width&&0===ge.height,De=new ti(this,Qe,ie,ue);Qe.style.transform="scale3d(1, 1, 1)",De.state=0,ie.persistent||(this._mostRecentTransientRipple=De);let Je=null;return!ue&&(pe||Ae.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Tt=()=>this._finishRippleTransition(De),Fe=()=>this._destroyRipple(De);Qe.addEventListener("transitionend",Tt),Qe.addEventListener("transitioncancel",Fe),Je={onTransitionEnd:Tt,onTransitionCancel:Fe}}),this._activeRipples.set(De,Je),(ue||!pe)&&this._finishRippleTransition(De),De}fadeOutRipple(V){if(2===V.state||3===V.state)return;const j=V.element,ie={...wi,...V.config.animation};j.style.transitionDuration=`${ie.exitDuration}ms`,j.style.opacity="0",V.state=2,(V._animationForciblyDisabledThroughCss||!ie.exitDuration)&&this._finishRippleTransition(V)}fadeOutAll(){this._getActiveRipples().forEach(V=>V.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(V=>{V.config.persistent||V.fadeOut()})}setupTriggerEvents(V){const j=(0,Ge.fI)(V);!this._platform.isBrowser||!j||j===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=j,Fn.forEach(ie=>{Qt._eventManager.addHandler(this._ngZone,ie,j,this)}))}handleEvent(V){"mousedown"===V.type?this._onMousedown(V):"touchstart"===V.type?this._onTouchStart(V):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{bn.forEach(j=>{this._triggerElement.addEventListener(j,this,Zi)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(V){0===V.state?this._startFadeOutTransition(V):2===V.state&&this._destroyRipple(V)}_startFadeOutTransition(V){const j=V===this._mostRecentTransientRipple,{persistent:ie}=V.config;V.state=1,!ie&&(!j||!this._isPointerDown)&&V.fadeOut()}_destroyRipple(V){const j=this._activeRipples.get(V)??null;this._activeRipples.delete(V),this._activeRipples.size||(this._containerRect=null),V===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),V.state=3,null!==j&&(V.element.removeEventListener("transitionend",j.onTransitionEnd),V.element.removeEventListener("transitioncancel",j.onTransitionCancel)),V.element.remove()}_onMousedown(V){const j=(0,l.X6)(V),ie=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!j&&!ie&&(this._isPointerDown=!0,this.fadeInRipple(V.clientX,V.clientY,this._target.rippleConfig))}_onTouchStart(V){if(!this._target.rippleDisabled&&!(0,l.yG)(V)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const j=V.changedTouches;if(j)for(let ie=0;ie<j.length;ie++)this.fadeInRipple(j[ie].clientX,j[ie].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(V=>{!V.config.persistent&&(1===V.state||V.config.terminateOnPointerUp&&0===V.state)&&V.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const V=this._triggerElement;V&&(Fn.forEach(j=>Qt._eventManager.removeHandler(j,V,this)),this._pointerUpEventsRegistered&&bn.forEach(j=>V.removeEventListener(j,this,Zi)))}}Qt._eventManager=new Dt;const ce=new C.OlP("mat-ripple-global-options");let Se=(()=>{class q{get disabled(){return this._disabled}set disabled(j){j&&this.fadeOutAllNonPersistent(),this._disabled=j,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(j){this._trigger=j,this._setupTriggerEventsIfEnabled()}constructor(j,ie,ge,Ae,ve){this._elementRef=j,this._animationMode=ve,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Ae||{},this._rippleRenderer=new Qt(this,ie,j,ge)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(j,ie=0,ge){return"number"==typeof j?this._rippleRenderer.fadeInRipple(j,ie,{...this.rippleConfig,...ge}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...j})}}return q.\u0275fac=function(j){return new(j||q)(C.Y36(C.SBq),C.Y36(C.R0b),C.Y36(ne.t4),C.Y36(ce,8),C.Y36(C.QbO,8))},q.\u0275dir=C.lG2({type:q,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(j,ie){2&j&&C.ekj("mat-ripple-unbounded",ie.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),q})(),ke=(()=>{class q{}return q.\u0275fac=function(j){return new(j||q)},q.\u0275mod=C.oAB({type:q}),q.\u0275inj=C.cJS({imports:[Ft,Ft]}),q})(),he=(()=>{class q{constructor(j){this._animationMode=j,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return q.\u0275fac=function(j){return new(j||q)(C.Y36(C.QbO,8))},q.\u0275cmp=C.Xpm({type:q,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(j,ie){2&j&&C.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===ie.state)("mat-pseudo-checkbox-checked","checked"===ie.state)("mat-pseudo-checkbox-disabled",ie.disabled)("mat-pseudo-checkbox-minimal","minimal"===ie.appearance)("mat-pseudo-checkbox-full","full"===ie.appearance)("_mat-animation-noopable","NoopAnimations"===ie._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(j,ie){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),q})(),de=(()=>{class q{}return q.\u0275fac=function(j){return new(j||q)},q.\u0275mod=C.oAB({type:q}),q.\u0275inj=C.cJS({imports:[Ft]}),q})();const Re=new C.OlP("MAT_OPTION_PARENT_COMPONENT"),_i=new C.OlP("MatOptgroup");let Qi=0;class tn{constructor(V,j=!1){this.source=V,this.isUserInput=j}}let Ji=(()=>{class q{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(j){this._disabled=(0,Ge.Ig)(j)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(j,ie,ge,Ae){this._element=j,this._changeDetectorRef=ie,this._parent=ge,this.group=Ae,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Qi++,this.onSelectionChange=new C.vpe,this._stateChanges=new qe.x}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(j=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),j&&this._emitSelectionChangeEvent())}deselect(j=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),j&&this._emitSelectionChangeEvent())}focus(j,ie){const ge=this._getHostElement();"function"==typeof ge.focus&&ge.focus(ie)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(j){(j.keyCode===Ue.K5||j.keyCode===Ue.L_)&&!(0,Ue.Vb)(j)&&(this._selectViaInteraction(),j.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const j=this.viewValue;j!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=j)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(j=!1){this.onSelectionChange.emit(new tn(this,j))}}return q.\u0275fac=function(j){C.$Z()},q.\u0275dir=C.lG2({type:q,viewQuery:function(j,ie){if(1&j&&C.Gf(et,7),2&j){let ge;C.iGM(ge=C.CRH())&&(ie._text=ge.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),q})(),Vi=(()=>{class q extends Ji{constructor(j,ie,ge,Ae){super(j,ie,ge,Ae)}}return q.\u0275fac=function(j){return new(j||q)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(Re,8),C.Y36(_i,8))},q.\u0275cmp=C.Xpm({type:q,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(j,ie){1&j&&C.NdJ("click",function(){return ie._selectViaInteraction()})("keydown",function(Ae){return ie._handleKeydown(Ae)}),2&j&&(C.Ikx("id",ie.id),C.uIk("aria-selected",ie.selected)("aria-disabled",ie.disabled.toString()),C.ekj("mdc-list-item--selected",ie.selected)("mat-mdc-option-multiple",ie.multiple)("mat-mdc-option-active",ie.active)("mdc-list-item--disabled",ie.disabled))},exportAs:["matOption"],features:[C.qOj],ngContentSelectors:ni,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox","aria-hidden","true",3,"disabled","state",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","aria-hidden","true","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(j,ie){1&j&&(C.F$t(jt),C.YNc(0,Xe,1,2,"mat-pseudo-checkbox",0),C.Hsn(1),C.TgZ(2,"span",1,2),C.Hsn(4,1),C.qZA(),C.YNc(5,lt,1,1,"mat-pseudo-checkbox",3),C.YNc(6,bt,2,1,"span",4),C._UZ(7,"div",5)),2&j&&(C.Q6J("ngIf",ie.multiple),C.xp6(5),C.Q6J("ngIf",!ie.multiple&&ie.selected&&!ie.hideSingleSelectionIndicator),C.xp6(1),C.Q6J("ngIf",ie.group&&ie.group._inert),C.xp6(1),C.Q6J("matRippleTrigger",ie._getHostElement())("matRippleDisabled",ie.disabled||ie.disableRipple))},dependencies:[Se,He.O5,he],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),q})();function zt(q,V,j){if(j.length){let ie=V.toArray(),ge=j.toArray(),Ae=0;for(let ve=0;ve<q+1;ve++)ie[ve].group&&ie[ve].group===ge[Ae]&&Ae++;return Ae}return 0}function li(q,V,j,ie){return q<j?q:q+V>j+ie?Math.max(0,q-ie+V):j}let vt=(()=>{class q{}return q.\u0275fac=function(j){return new(j||q)},q.\u0275mod=C.oAB({type:q}),q.\u0275inj=C.cJS({imports:[ke,He.ez,Ft,de]}),q})()},4170:(gi,mt,H)=>{"use strict";H.d(mt,{G_:()=>xt,KE:()=>Ji,Eo:()=>ke,lN:()=>Vi,R9:()=>wi});var C=H(5879),l=H(9388),ae=H(2831),v=H(7394),He=H(8645),ne=H(3019),Ge=H(9773),Pe=H(5592),qe=H(2181),Ue=H(940);class Le{constructor(li){this._box=li,this._destroyed=new He.x,this._resizeSubject=new He.x,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(vt=>this._resizeSubject.next(vt)))}observe(li){return this._elementObservables.has(li)||this._elementObservables.set(li,new Pe.y(vt=>{const q=this._resizeSubject.subscribe(vt);return this._resizeObserver?.observe(li,{box:this._box}),()=>{this._resizeObserver?.unobserve(li),q.unsubscribe(),this._elementObservables.delete(li)}}).pipe((0,qe.h)(vt=>vt.some(q=>q.target===li)),(0,Ue.d)({bufferSize:1,refCount:!0}),(0,Ge.R)(this._destroyed))),this._elementObservables.get(li)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let et=(()=>{class zt{constructor(){this._observers=new Map,this._ngZone=(0,C.f3M)(C.R0b)}ngOnDestroy(){for(const[,vt]of this._observers)vt.destroy();this._observers.clear()}observe(vt,q){const V=q?.box||"content-box";return this._observers.has(V)||this._observers.set(V,new Le(V)),this._observers.get(V).observe(vt)}}return zt.\u0275fac=function(vt){return new(vt||zt)},zt.\u0275prov=C.Yz7({token:zt,factory:zt.\u0275fac,providedIn:"root"}),zt})();var Xe=H(2495),lt=H(6825),bt=H(6814),jt=H(7131),ni=H(3680);const Ti=["notch"],qt=["matFormFieldNotchedOutline",""],Ne=["*"],je=["textField"],Oe=["iconPrefixContainer"],Ft=["textPrefixContainer"];function Pt(zt,li){1&zt&&C._UZ(0,"span",19)}function Nt(zt,li){if(1&zt&&(C.TgZ(0,"label",17),C.Hsn(1,1),C.YNc(2,Pt,1,0,"span",18),C.qZA()),2&zt){const vt=C.oxw(2);C.Q6J("floating",vt._shouldLabelFloat())("monitorResize",vt._hasOutline())("id",vt._labelId),C.uIk("for",vt._control.id),C.xp6(2),C.Q6J("ngIf",!vt.hideRequiredMarker&&vt._control.required)}}function fi(zt,li){if(1&zt&&C.YNc(0,Nt,3,5,"label",16),2&zt){const vt=C.oxw();C.Q6J("ngIf",vt._hasFloatingLabel())}}function vi(zt,li){1&zt&&C._UZ(0,"div",20)}function Ri(zt,li){}function qi(zt,li){if(1&zt&&C.YNc(0,Ri,0,0,"ng-template",22),2&zt){C.oxw(2);const vt=C.MAs(1);C.Q6J("ngTemplateOutlet",vt)}}function Dn(zt,li){if(1&zt&&(C.TgZ(0,"div",21),C.YNc(1,qi,1,1,"ng-template",9),C.qZA()),2&zt){const vt=C.oxw();C.Q6J("matFormFieldNotchedOutlineOpen",vt._shouldLabelFloat()),C.xp6(1),C.Q6J("ngIf",!vt._forceDisplayInfixLabel())}}function Hn(zt,li){1&zt&&(C.TgZ(0,"div",23,24),C.Hsn(2,2),C.qZA())}function _n(zt,li){1&zt&&(C.TgZ(0,"div",25,26),C.Hsn(2,3),C.qZA())}function Vn(zt,li){}function Sn(zt,li){if(1&zt&&C.YNc(0,Vn,0,0,"ng-template",22),2&zt){C.oxw();const vt=C.MAs(1);C.Q6J("ngTemplateOutlet",vt)}}function Et(zt,li){1&zt&&(C.TgZ(0,"div",27),C.Hsn(1,4),C.qZA())}function ft(zt,li){1&zt&&(C.TgZ(0,"div",28),C.Hsn(1,5),C.qZA())}function Rt(zt,li){1&zt&&C._UZ(0,"div",29)}function Vt(zt,li){if(1&zt&&(C.TgZ(0,"div",30),C.Hsn(1,6),C.qZA()),2&zt){const vt=C.oxw();C.Q6J("@transitionMessages",vt._subscriptAnimationState)}}function ei(zt,li){if(1&zt&&(C.TgZ(0,"mat-hint",34),C._uU(1),C.qZA()),2&zt){const vt=C.oxw(2);C.Q6J("id",vt._hintLabelId),C.xp6(1),C.Oqu(vt.hintLabel)}}function Ct(zt,li){if(1&zt&&(C.TgZ(0,"div",31),C.YNc(1,ei,2,2,"mat-hint",32),C.Hsn(2,7),C._UZ(3,"div",33),C.Hsn(4,8),C.qZA()),2&zt){const vt=C.oxw();C.Q6J("@transitionMessages",vt._subscriptAnimationState),C.xp6(1),C.Q6J("ngIf",vt.hintLabel)}}const ai=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],ze=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let rt=(()=>{class zt{}return zt.\u0275fac=function(vt){return new(vt||zt)},zt.\u0275dir=C.lG2({type:zt,selectors:[["mat-label"]]}),zt})();const Me=new C.OlP("MatError");let Yt=0,Ut=(()=>{class zt{constructor(){this.align="start",this.id="mat-mdc-hint-"+Yt++}}return zt.\u0275fac=function(vt){return new(vt||zt)},zt.\u0275dir=C.lG2({type:zt,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(vt,q){2&vt&&(C.Ikx("id",q.id),C.uIk("align",null),C.ekj("mat-mdc-form-field-hint-end","end"===q.align))},inputs:{align:"align",id:"id"}}),zt})();const ti=new C.OlP("MatPrefix"),Dt=new C.OlP("MatSuffix");let wi=(()=>{class zt{constructor(){this._isText=!1}set _isTextSelector(vt){this._isText=!0}}return zt.\u0275fac=function(vt){return new(vt||zt)},zt.\u0275dir=C.lG2({type:zt,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[C._Bn([{provide:Dt,useExisting:zt}])]}),zt})();const yn=new C.OlP("FloatingLabelParent");let Zi=(()=>{class zt{get floating(){return this._floating}set floating(vt){this._floating=vt,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(vt){this._monitorResize=vt,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(vt){this._elementRef=vt,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,C.f3M)(et),this._ngZone=(0,C.f3M)(C.R0b),this._parent=(0,C.f3M)(yn),this._resizeSubscription=new v.w0}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function Fn(zt){if(null!==zt.offsetParent)return zt.scrollWidth;const vt=zt.cloneNode(!0);vt.style.setProperty("position","absolute"),vt.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(vt);const q=vt.scrollWidth;return vt.remove(),q}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}}return zt.\u0275fac=function(vt){return new(vt||zt)(C.Y36(C.SBq))},zt.\u0275dir=C.lG2({type:zt,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(vt,q){2&vt&&C.ekj("mdc-floating-label--float-above",q.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}}),zt})();const bn="mdc-line-ripple--active",Qt="mdc-line-ripple--deactivating";let pt=(()=>{class zt{constructor(vt,q){this._elementRef=vt,this._handleTransitionEnd=V=>{const j=this._elementRef.nativeElement.classList,ie=j.contains(Qt);"opacity"===V.propertyName&&ie&&j.remove(bn,Qt)},q.runOutsideAngular(()=>{vt.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const vt=this._elementRef.nativeElement.classList;vt.remove(Qt),vt.add(bn)}deactivate(){this._elementRef.nativeElement.classList.add(Qt)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return zt.\u0275fac=function(vt){return new(vt||zt)(C.Y36(C.SBq),C.Y36(C.R0b))},zt.\u0275dir=C.lG2({type:zt,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),zt})(),ce=(()=>{class zt{constructor(vt,q){this._elementRef=vt,this._ngZone=q,this.open=!1}ngAfterViewInit(){const vt=this._elementRef.nativeElement.querySelector(".mdc-floating-label");vt?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(vt.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>vt.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(vt){this._notch.nativeElement.style.width=this.open&&vt?`calc(${vt}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}}return zt.\u0275fac=function(vt){return new(vt||zt)(C.Y36(C.SBq),C.Y36(C.R0b))},zt.\u0275cmp=C.Xpm({type:zt,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(vt,q){if(1&vt&&C.Gf(Ti,5),2&vt){let V;C.iGM(V=C.CRH())&&(q._notch=V.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(vt,q){2&vt&&C.ekj("mdc-notched-outline--notched",q.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:qt,ngContentSelectors:Ne,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(vt,q){1&vt&&(C.F$t(),C._UZ(0,"div",0),C.TgZ(1,"div",1,2),C.Hsn(3),C.qZA(),C._UZ(4,"div",3))},encapsulation:2,changeDetection:0}),zt})();const Se={transitionMessages:(0,lt.X$)("transitionMessages",[(0,lt.SB)("enter",(0,lt.oB)({opacity:1,transform:"translateY(0%)"})),(0,lt.eR)("void => enter",[(0,lt.oB)({opacity:0,transform:"translateY(-5px)"}),(0,lt.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let ke=(()=>{class zt{}return zt.\u0275fac=function(vt){return new(vt||zt)},zt.\u0275dir=C.lG2({type:zt}),zt})();const xt=new C.OlP("MatFormField"),Xt=new C.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Ot=0,Ji=(()=>{class zt{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(vt){this._hideRequiredMarker=(0,Xe.Ig)(vt)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(vt){vt!==this._floatLabel&&(this._floatLabel=vt,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(vt){const q=this._appearance;this._appearance=vt||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==q&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(vt){this._subscriptSizing=vt||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(vt){this._hintLabel=vt,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(vt){this._explicitFormFieldControl=vt}constructor(vt,q,V,j,ie,ge,Ae,ve){this._elementRef=vt,this._changeDetectorRef=q,this._ngZone=V,this._dir=j,this._platform=ie,this._defaults=ge,this._animationMode=Ae,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Ot++,this._hintLabelId="mat-mdc-hint-"+Ot++,this._subscriptAnimationState="",this._destroyed=new He.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,ge&&(ge.appearance&&(this.appearance=ge.appearance),this._hideRequiredMarker=!!ge?.hideRequiredMarker,ge.color&&(this.color=ge.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const vt=this._control;vt.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${vt.controlType}`),vt.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),vt.ngControl&&vt.ngControl.valueChanges&&vt.ngControl.valueChanges.pipe((0,Ge.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(vt=>!vt._isText),this._hasTextPrefix=!!this._prefixChildren.find(vt=>vt._isText),this._hasIconSuffix=!!this._suffixChildren.find(vt=>!vt._isText),this._hasTextSuffix=!!this._suffixChildren.find(vt=>vt._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,ne.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Ge.R)(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe((0,Ge.R)(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(vt){const q=this._control?this._control.ngControl:null;return q&&q[vt]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let vt=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&vt.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const q=this._hintChildren?this._hintChildren.find(j=>"start"===j.align):null,V=this._hintChildren?this._hintChildren.find(j=>"end"===j.align):null;q?vt.push(q.id):this._hintLabel&&vt.push(this._hintLabelId),V&&vt.push(V.id)}else this._errorChildren&&vt.push(...this._errorChildren.map(q=>q.id));this._control.setDescribedByIds(vt)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const vt=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(vt.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const q=this._iconPrefixContainer?.nativeElement,V=this._textPrefixContainer?.nativeElement,j=q?.getBoundingClientRect().width??0,ie=V?.getBoundingClientRect().width??0;vt.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${j+ie}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const vt=this._elementRef.nativeElement;if(vt.getRootNode){const q=vt.getRootNode();return q&&q!==vt}return document.documentElement.contains(vt)}}return zt.\u0275fac=function(vt){return new(vt||zt)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(C.R0b),C.Y36(l.Is),C.Y36(ae.t4),C.Y36(Xt,8),C.Y36(C.QbO,8),C.Y36(bt.K0))},zt.\u0275cmp=C.Xpm({type:zt,selectors:[["mat-form-field"]],contentQueries:function(vt,q,V){if(1&vt&&(C.Suo(V,rt,5),C.Suo(V,rt,7),C.Suo(V,ke,5),C.Suo(V,ti,5),C.Suo(V,Dt,5),C.Suo(V,Me,5),C.Suo(V,Ut,5)),2&vt){let j;C.iGM(j=C.CRH())&&(q._labelChildNonStatic=j.first),C.iGM(j=C.CRH())&&(q._labelChildStatic=j.first),C.iGM(j=C.CRH())&&(q._formFieldControl=j.first),C.iGM(j=C.CRH())&&(q._prefixChildren=j),C.iGM(j=C.CRH())&&(q._suffixChildren=j),C.iGM(j=C.CRH())&&(q._errorChildren=j),C.iGM(j=C.CRH())&&(q._hintChildren=j)}},viewQuery:function(vt,q){if(1&vt&&(C.Gf(je,5),C.Gf(Oe,5),C.Gf(Ft,5),C.Gf(Zi,5),C.Gf(ce,5),C.Gf(pt,5)),2&vt){let V;C.iGM(V=C.CRH())&&(q._textField=V.first),C.iGM(V=C.CRH())&&(q._iconPrefixContainer=V.first),C.iGM(V=C.CRH())&&(q._textPrefixContainer=V.first),C.iGM(V=C.CRH())&&(q._floatingLabel=V.first),C.iGM(V=C.CRH())&&(q._notchedOutline=V.first),C.iGM(V=C.CRH())&&(q._lineRipple=V.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(vt,q){2&vt&&C.ekj("mat-mdc-form-field-label-always-float",q._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",q._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",q._hasIconSuffix)("mat-form-field-invalid",q._control.errorState)("mat-form-field-disabled",q._control.disabled)("mat-form-field-autofilled",q._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===q._animationMode)("mat-form-field-appearance-fill","fill"==q.appearance)("mat-form-field-appearance-outline","outline"==q.appearance)("mat-form-field-hide-placeholder",q._hasFloatingLabel()&&!q._shouldLabelFloat())("mat-focused",q._control.focused)("mat-primary","accent"!==q.color&&"warn"!==q.color)("mat-accent","accent"===q.color)("mat-warn","warn"===q.color)("ng-untouched",q._shouldForward("untouched"))("ng-touched",q._shouldForward("touched"))("ng-pristine",q._shouldForward("pristine"))("ng-dirty",q._shouldForward("dirty"))("ng-valid",q._shouldForward("valid"))("ng-invalid",q._shouldForward("invalid"))("ng-pending",q._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[C._Bn([{provide:xt,useExisting:zt},{provide:yn,useExisting:zt}])],ngContentSelectors:ze,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(vt,q){1&vt&&(C.F$t(ai),C.YNc(0,fi,1,1,"ng-template",null,0,C.W1O),C.TgZ(2,"div",1,2),C.NdJ("click",function(j){return q._control.onContainerClick(j)}),C.YNc(4,vi,1,0,"div",3),C.TgZ(5,"div",4),C.YNc(6,Dn,2,2,"div",5),C.YNc(7,Hn,3,0,"div",6),C.YNc(8,_n,3,0,"div",7),C.TgZ(9,"div",8),C.YNc(10,Sn,1,1,"ng-template",9),C.Hsn(11),C.qZA(),C.YNc(12,Et,2,0,"div",10),C.YNc(13,ft,2,0,"div",11),C.qZA(),C.YNc(14,Rt,1,0,"div",12),C.qZA(),C.TgZ(15,"div",13),C.YNc(16,Vt,2,1,"div",14),C.YNc(17,Ct,5,2,"div",15),C.qZA()),2&vt&&(C.xp6(2),C.ekj("mdc-text-field--filled",!q._hasOutline())("mdc-text-field--outlined",q._hasOutline())("mdc-text-field--no-label",!q._hasFloatingLabel())("mdc-text-field--disabled",q._control.disabled)("mdc-text-field--invalid",q._control.errorState),C.xp6(2),C.Q6J("ngIf",!q._hasOutline()&&!q._control.disabled),C.xp6(2),C.Q6J("ngIf",q._hasOutline()),C.xp6(1),C.Q6J("ngIf",q._hasIconPrefix),C.xp6(1),C.Q6J("ngIf",q._hasTextPrefix),C.xp6(2),C.Q6J("ngIf",!q._hasOutline()||q._forceDisplayInfixLabel()),C.xp6(2),C.Q6J("ngIf",q._hasTextSuffix),C.xp6(1),C.Q6J("ngIf",q._hasIconSuffix),C.xp6(1),C.Q6J("ngIf",!q._hasOutline()),C.xp6(1),C.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===q.subscriptSizing),C.Q6J("ngSwitch",q._getDisplayedMessages()),C.xp6(1),C.Q6J("ngSwitchCase","error"),C.xp6(1),C.Q6J("ngSwitchCase","hint"))},dependencies:[bt.O5,bt.tP,bt.RF,bt.n9,Ut,Zi,ce,pt],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Se.transitionMessages]},changeDetection:0}),zt})(),Vi=(()=>{class zt{}return zt.\u0275fac=function(vt){return new(vt||zt)},zt.\u0275mod=C.oAB({type:zt}),zt.\u0275inj=C.cJS({imports:[ni.BQ,bt.ez,jt.Q8,ni.BQ]}),zt})()},617:(gi,mt,H)=>{"use strict";H.d(mt,{Hw:()=>Vt,Ps:()=>ei,jv:()=>Nt});var C=H(5879),l=H(3680),ae=H(2495),v=H(6814),He=H(2096),ne=H(8504),Ge=H(9315),Pe=H(7394),qe=H(9397),Ue=H(7398),it=H(6306),Le=H(4716),et=H(3020),Xe=H(8180),lt=H(9862),bt=H(6593);const jt=["*"];let ni;function qt(Ct){return function Ti(){if(void 0===ni&&(ni=null,typeof window<"u")){const Ct=window;void 0!==Ct.trustedTypes&&(ni=Ct.trustedTypes.createPolicy("angular#components",{createHTML:ai=>ai}))}return ni}()?.createHTML(Ct)||Ct}function Ne(Ct){return Error(`Unable to find icon with the name "${Ct}"`)}function Oe(Ct){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Ct}".`)}function Ft(Ct){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Ct}".`)}class Pt{constructor(ai,ze,rt){this.url=ai,this.svgText=ze,this.options=rt}}let Nt=(()=>{class Ct{constructor(ze,rt,dt,Me){this._httpClient=ze,this._sanitizer=rt,this._errorHandler=Me,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=dt}addSvgIcon(ze,rt,dt){return this.addSvgIconInNamespace("",ze,rt,dt)}addSvgIconLiteral(ze,rt,dt){return this.addSvgIconLiteralInNamespace("",ze,rt,dt)}addSvgIconInNamespace(ze,rt,dt,Me){return this._addSvgIconConfig(ze,rt,new Pt(dt,null,Me))}addSvgIconResolver(ze){return this._resolvers.push(ze),this}addSvgIconLiteralInNamespace(ze,rt,dt,Me){const ut=this._sanitizer.sanitize(C.q3G.HTML,dt);if(!ut)throw Ft(dt);const Yt=qt(ut);return this._addSvgIconConfig(ze,rt,new Pt("",Yt,Me))}addSvgIconSet(ze,rt){return this.addSvgIconSetInNamespace("",ze,rt)}addSvgIconSetLiteral(ze,rt){return this.addSvgIconSetLiteralInNamespace("",ze,rt)}addSvgIconSetInNamespace(ze,rt,dt){return this._addSvgIconSetConfig(ze,new Pt(rt,null,dt))}addSvgIconSetLiteralInNamespace(ze,rt,dt){const Me=this._sanitizer.sanitize(C.q3G.HTML,rt);if(!Me)throw Ft(rt);const ut=qt(Me);return this._addSvgIconSetConfig(ze,new Pt("",ut,dt))}registerFontClassAlias(ze,rt=ze){return this._fontCssClassesByAlias.set(ze,rt),this}classNameForFontAlias(ze){return this._fontCssClassesByAlias.get(ze)||ze}setDefaultFontSetClass(...ze){return this._defaultFontSetClass=ze,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(ze){const rt=this._sanitizer.sanitize(C.q3G.RESOURCE_URL,ze);if(!rt)throw Oe(ze);const dt=this._cachedIconsByUrl.get(rt);return dt?(0,He.of)(Ri(dt)):this._loadSvgIconFromConfig(new Pt(ze,null)).pipe((0,qe.b)(Me=>this._cachedIconsByUrl.set(rt,Me)),(0,Ue.U)(Me=>Ri(Me)))}getNamedSvgIcon(ze,rt=""){const dt=qi(rt,ze);let Me=this._svgIconConfigs.get(dt);if(Me)return this._getSvgFromConfig(Me);if(Me=this._getIconConfigFromResolvers(rt,ze),Me)return this._svgIconConfigs.set(dt,Me),this._getSvgFromConfig(Me);const ut=this._iconSetConfigs.get(rt);return ut?this._getSvgFromIconSetConfigs(ze,ut):(0,ne._)(Ne(dt))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(ze){return ze.svgText?(0,He.of)(Ri(this._svgElementFromConfig(ze))):this._loadSvgIconFromConfig(ze).pipe((0,Ue.U)(rt=>Ri(rt)))}_getSvgFromIconSetConfigs(ze,rt){const dt=this._extractIconWithNameFromAnySet(ze,rt);if(dt)return(0,He.of)(dt);const Me=rt.filter(ut=>!ut.svgText).map(ut=>this._loadSvgIconSetFromConfig(ut).pipe((0,it.K)(Yt=>{const ti=`Loading icon set URL: ${this._sanitizer.sanitize(C.q3G.RESOURCE_URL,ut.url)} failed: ${Yt.message}`;return this._errorHandler.handleError(new Error(ti)),(0,He.of)(null)})));return(0,Ge.D)(Me).pipe((0,Ue.U)(()=>{const ut=this._extractIconWithNameFromAnySet(ze,rt);if(!ut)throw Ne(ze);return ut}))}_extractIconWithNameFromAnySet(ze,rt){for(let dt=rt.length-1;dt>=0;dt--){const Me=rt[dt];if(Me.svgText&&Me.svgText.toString().indexOf(ze)>-1){const ut=this._svgElementFromConfig(Me),Yt=this._extractSvgIconFromSet(ut,ze,Me.options);if(Yt)return Yt}}return null}_loadSvgIconFromConfig(ze){return this._fetchIcon(ze).pipe((0,qe.b)(rt=>ze.svgText=rt),(0,Ue.U)(()=>this._svgElementFromConfig(ze)))}_loadSvgIconSetFromConfig(ze){return ze.svgText?(0,He.of)(null):this._fetchIcon(ze).pipe((0,qe.b)(rt=>ze.svgText=rt))}_extractSvgIconFromSet(ze,rt,dt){const Me=ze.querySelector(`[id="${rt}"]`);if(!Me)return null;const ut=Me.cloneNode(!0);if(ut.removeAttribute("id"),"svg"===ut.nodeName.toLowerCase())return this._setSvgAttributes(ut,dt);if("symbol"===ut.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(ut),dt);const Yt=this._svgElementFromString(qt("<svg></svg>"));return Yt.appendChild(ut),this._setSvgAttributes(Yt,dt)}_svgElementFromString(ze){const rt=this._document.createElement("DIV");rt.innerHTML=ze;const dt=rt.querySelector("svg");if(!dt)throw Error("<svg> tag not found");return dt}_toSvgElement(ze){const rt=this._svgElementFromString(qt("<svg></svg>")),dt=ze.attributes;for(let Me=0;Me<dt.length;Me++){const{name:ut,value:Yt}=dt[Me];"id"!==ut&&rt.setAttribute(ut,Yt)}for(let Me=0;Me<ze.childNodes.length;Me++)ze.childNodes[Me].nodeType===this._document.ELEMENT_NODE&&rt.appendChild(ze.childNodes[Me].cloneNode(!0));return rt}_setSvgAttributes(ze,rt){return ze.setAttribute("fit",""),ze.setAttribute("height","100%"),ze.setAttribute("width","100%"),ze.setAttribute("preserveAspectRatio","xMidYMid meet"),ze.setAttribute("focusable","false"),rt&&rt.viewBox&&ze.setAttribute("viewBox",rt.viewBox),ze}_fetchIcon(ze){const{url:rt,options:dt}=ze,Me=dt?.withCredentials??!1;if(!this._httpClient)throw function je(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==rt)throw Error(`Cannot fetch icon from URL "${rt}".`);const ut=this._sanitizer.sanitize(C.q3G.RESOURCE_URL,rt);if(!ut)throw Oe(rt);const Yt=this._inProgressUrlFetches.get(ut);if(Yt)return Yt;const Ut=this._httpClient.get(ut,{responseType:"text",withCredentials:Me}).pipe((0,Ue.U)(ti=>qt(ti)),(0,Le.x)(()=>this._inProgressUrlFetches.delete(ut)),(0,et.B)());return this._inProgressUrlFetches.set(ut,Ut),Ut}_addSvgIconConfig(ze,rt,dt){return this._svgIconConfigs.set(qi(ze,rt),dt),this}_addSvgIconSetConfig(ze,rt){const dt=this._iconSetConfigs.get(ze);return dt?dt.push(rt):this._iconSetConfigs.set(ze,[rt]),this}_svgElementFromConfig(ze){if(!ze.svgElement){const rt=this._svgElementFromString(ze.svgText);this._setSvgAttributes(rt,ze.options),ze.svgElement=rt}return ze.svgElement}_getIconConfigFromResolvers(ze,rt){for(let dt=0;dt<this._resolvers.length;dt++){const Me=this._resolvers[dt](rt,ze);if(Me)return Dn(Me)?new Pt(Me.url,null,Me.options):new Pt(Me,null)}}}return Ct.\u0275fac=function(ze){return new(ze||Ct)(C.LFG(lt.eN,8),C.LFG(bt.H7),C.LFG(v.K0,8),C.LFG(C.qLn))},Ct.\u0275prov=C.Yz7({token:Ct,factory:Ct.\u0275fac,providedIn:"root"}),Ct})();function Ri(Ct){return Ct.cloneNode(!0)}function qi(Ct,ai){return Ct+":"+ai}function Dn(Ct){return!(!Ct.url||!Ct.options)}const Hn=(0,l.pj)(class{constructor(Ct){this._elementRef=Ct}}),_n=new C.OlP("MAT_ICON_DEFAULT_OPTIONS"),Vn=new C.OlP("mat-icon-location",{providedIn:"root",factory:function Sn(){const Ct=(0,C.f3M)(v.K0),ai=Ct?Ct.location:null;return{getPathname:()=>ai?ai.pathname+ai.search:""}}}),Et=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ft=Et.map(Ct=>`[${Ct}]`).join(", "),Rt=/^url\(['"]?#(.*?)['"]?\)$/;let Vt=(()=>{class Ct extends Hn{get inline(){return this._inline}set inline(ze){this._inline=(0,ae.Ig)(ze)}get svgIcon(){return this._svgIcon}set svgIcon(ze){ze!==this._svgIcon&&(ze?this._updateSvgIcon(ze):this._svgIcon&&this._clearSvgElement(),this._svgIcon=ze)}get fontSet(){return this._fontSet}set fontSet(ze){const rt=this._cleanupFontValue(ze);rt!==this._fontSet&&(this._fontSet=rt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(ze){const rt=this._cleanupFontValue(ze);rt!==this._fontIcon&&(this._fontIcon=rt,this._updateFontIconClasses())}constructor(ze,rt,dt,Me,ut,Yt){super(ze),this._iconRegistry=rt,this._location=Me,this._errorHandler=ut,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Pe.w0.EMPTY,Yt&&(Yt.color&&(this.color=this.defaultColor=Yt.color),Yt.fontSet&&(this.fontSet=Yt.fontSet)),dt||ze.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(ze){if(!ze)return["",""];const rt=ze.split(":");switch(rt.length){case 1:return["",rt[0]];case 2:return rt;default:throw Error(`Invalid icon name: "${ze}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const ze=this._elementsWithExternalReferences;if(ze&&ze.size){const rt=this._location.getPathname();rt!==this._previousPath&&(this._previousPath=rt,this._prependPathToReferences(rt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(ze){this._clearSvgElement();const rt=this._location.getPathname();this._previousPath=rt,this._cacheChildrenWithExternalReferences(ze),this._prependPathToReferences(rt),this._elementRef.nativeElement.appendChild(ze)}_clearSvgElement(){const ze=this._elementRef.nativeElement;let rt=ze.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();rt--;){const dt=ze.childNodes[rt];(1!==dt.nodeType||"svg"===dt.nodeName.toLowerCase())&&dt.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const ze=this._elementRef.nativeElement,rt=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(dt=>dt.length>0);this._previousFontSetClass.forEach(dt=>ze.classList.remove(dt)),rt.forEach(dt=>ze.classList.add(dt)),this._previousFontSetClass=rt,this.fontIcon!==this._previousFontIconClass&&!rt.includes("mat-ligature-font")&&(this._previousFontIconClass&&ze.classList.remove(this._previousFontIconClass),this.fontIcon&&ze.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(ze){return"string"==typeof ze?ze.trim().split(" ")[0]:ze}_prependPathToReferences(ze){const rt=this._elementsWithExternalReferences;rt&&rt.forEach((dt,Me)=>{dt.forEach(ut=>{Me.setAttribute(ut.name,`url('${ze}#${ut.value}')`)})})}_cacheChildrenWithExternalReferences(ze){const rt=ze.querySelectorAll(ft),dt=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Me=0;Me<rt.length;Me++)Et.forEach(ut=>{const Yt=rt[Me],Ut=Yt.getAttribute(ut),ti=Ut?Ut.match(Rt):null;if(ti){let ot=dt.get(Yt);ot||(ot=[],dt.set(Yt,ot)),ot.push({name:ut,value:ti[1]})}})}_updateSvgIcon(ze){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),ze){const[rt,dt]=this._splitIconName(ze);rt&&(this._svgNamespace=rt),dt&&(this._svgName=dt),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(dt,rt).pipe((0,Xe.q)(1)).subscribe(Me=>this._setSvgElement(Me),Me=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${rt}:${dt}! ${Me.message}`))})}}}return Ct.\u0275fac=function(ze){return new(ze||Ct)(C.Y36(C.SBq),C.Y36(Nt),C.$8M("aria-hidden"),C.Y36(Vn),C.Y36(C.qLn),C.Y36(_n,8))},Ct.\u0275cmp=C.Xpm({type:Ct,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(ze,rt){2&ze&&(C.uIk("data-mat-icon-type",rt._usingFontIcon()?"font":"svg")("data-mat-icon-name",rt._svgName||rt.fontIcon)("data-mat-icon-namespace",rt._svgNamespace||rt.fontSet)("fontIcon",rt._usingFontIcon()?rt.fontIcon:null),C.ekj("mat-icon-inline",rt.inline)("mat-icon-no-color","primary"!==rt.color&&"accent"!==rt.color&&"warn"!==rt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[C.qOj],ngContentSelectors:jt,decls:1,vars:0,template:function(ze,rt){1&ze&&(C.F$t(),C.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),Ct})(),ei=(()=>{class Ct{}return Ct.\u0275fac=function(ze){return new(ze||Ct)},Ct.\u0275mod=C.oAB({type:Ct}),Ct.\u0275inj=C.cJS({imports:[l.BQ,l.BQ]}),Ct})()},8525:(gi,mt,H)=>{"use strict";H.d(mt,{LD:()=>Yt,gD:()=>ut});var C=H(3651),l=H(6814),ae=H(5879),v=H(3680),He=H(4170),ne=H(799),Ge=H(7849),Pe=H(9388),qe=H(2495),Ue=H(8337),it=H(6028),Le=H(6223),et=H(8645),Xe=H(4911),lt=H(3019),bt=H(7921),jt=H(4664),ni=H(8180),Ti=H(2181),qt=H(7398),Ne=H(3997),je=H(9773),Oe=H(6825);const Ft=["trigger"],Pt=["panel"];function Nt(Ut,ti){if(1&Ut&&(ae.TgZ(0,"span",10),ae._uU(1),ae.qZA()),2&Ut){const ot=ae.oxw();ae.xp6(1),ae.Oqu(ot.placeholder)}}function fi(Ut,ti){if(1&Ut&&(ae.TgZ(0,"span",14),ae._uU(1),ae.qZA()),2&Ut){const ot=ae.oxw(2);ae.xp6(1),ae.Oqu(ot.triggerValue)}}function vi(Ut,ti){1&Ut&&ae.Hsn(0,0,["*ngSwitchCase","true"])}function Ri(Ut,ti){if(1&Ut&&(ae.TgZ(0,"span",11),ae.YNc(1,fi,2,1,"span",12),ae.YNc(2,vi,1,0,"ng-content",13),ae.qZA()),2&Ut){const ot=ae.oxw();ae.Q6J("ngSwitch",!!ot.customTrigger),ae.xp6(2),ae.Q6J("ngSwitchCase",!0)}}function qi(Ut,ti){if(1&Ut){const ot=ae.EpF();ae.O4$(),ae.kcU(),ae.TgZ(0,"div",15,16),ae.NdJ("@transformPanel.done",function(wi){ae.CHM(ot);const yn=ae.oxw();return ae.KtG(yn._panelDoneAnimatingStream.next(wi.toState))})("keydown",function(wi){ae.CHM(ot);const yn=ae.oxw();return ae.KtG(yn._handleKeydown(wi))}),ae.Hsn(2,1),ae.qZA()}if(2&Ut){const ot=ae.oxw();ae.Gre("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",ot._getPanelTheme(),""),ae.Q6J("ngClass",ot.panelClass)("@transformPanel","showing"),ae.uIk("id",ot.id+"-panel")("aria-multiselectable",ot.multiple)("aria-label",ot.ariaLabel||null)("aria-labelledby",ot._getPanelAriaLabelledby())}}const Dn=[[["mat-select-trigger"]],"*"],Hn=["mat-select-trigger","*"],_n={transformPanelWrap:(0,Oe.X$)("transformPanelWrap",[(0,Oe.eR)("* => void",(0,Oe.IO)("@transformPanel",[(0,Oe.pV)()],{optional:!0}))]),transformPanel:(0,Oe.X$)("transformPanel",[(0,Oe.SB)("void",(0,Oe.oB)({opacity:0,transform:"scale(1, 0.8)"})),(0,Oe.eR)("void => showing",(0,Oe.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Oe.oB)({opacity:1,transform:"scale(1, 1)"}))),(0,Oe.eR)("* => void",(0,Oe.jt)("100ms linear",(0,Oe.oB)({opacity:0})))])};let ft=0;const Rt=new ae.OlP("mat-select-scroll-strategy"),ei=new ae.OlP("MAT_SELECT_CONFIG"),Ct={provide:Rt,deps:[C.aV],useFactory:function Vt(Ut){return()=>Ut.scrollStrategies.reposition()}},ai=new ae.OlP("MatSelectTrigger");class ze{constructor(ti,ot){this.source=ti,this.value=ot}}const rt=(0,v.Kr)((0,v.sb)((0,v.Id)((0,v.FD)(class{constructor(Ut,ti,ot,Dt,wi){this._elementRef=Ut,this._defaultErrorStateMatcher=ti,this._parentForm=ot,this._parentFormGroup=Dt,this.ngControl=wi,this.stateChanges=new et.x}}))));let dt=(()=>{class Ut extends rt{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(ot){this._placeholder=ot,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Le.kI.required)??!1}set required(ot){this._required=(0,qe.Ig)(ot),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(ot){this._multiple=(0,qe.Ig)(ot)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(ot){this._disableOptionCentering=(0,qe.Ig)(ot)}get compareWith(){return this._compareWith}set compareWith(ot){this._compareWith=ot,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(ot){this._assignValue(ot)&&this._onChange(ot)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(ot){this._typeaheadDebounceInterval=(0,qe.su)(ot)}get id(){return this._id}set id(ot){this._id=ot||this._uid,this.stateChanges.next()}constructor(ot,Dt,wi,yn,Zi,Fn,bn,Qt,pt,ce,Se,ke,he,de){super(Zi,yn,bn,Qt,ce),this._viewportRuler=ot,this._changeDetectorRef=Dt,this._ngZone=wi,this._dir=Fn,this._parentFormField=pt,this._liveAnnouncer=he,this._defaultOptions=de,this._panelOpen=!1,this._compareWith=(Re,xt)=>Re===xt,this._uid="mat-select-"+ft++,this._triggerAriaLabelledBy=null,this._destroy=new et.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+ft++,this._panelDoneAnimatingStream=new et.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,Xe.P)(()=>{const Re=this.options;return Re?Re.changes.pipe((0,bt.O)(Re),(0,jt.w)(()=>(0,lt.T)(...Re.map(xt=>xt.onSelectionChange)))):this._ngZone.onStable.pipe((0,ni.q)(1),(0,jt.w)(()=>this.optionSelectionChanges))}),this.openedChange=new ae.vpe,this._openedStream=this.openedChange.pipe((0,Ti.h)(Re=>Re),(0,qt.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,Ti.h)(Re=>!Re),(0,qt.U)(()=>{})),this.selectionChange=new ae.vpe,this.valueChange=new ae.vpe,this._trackedModal=null,this.ngControl&&(this.ngControl.valueAccessor=this),null!=de?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=de.typeaheadDebounceInterval),this._scrollStrategyFactory=ke,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Se)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Ue.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,Ne.x)(),(0,je.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,je.R)(this._destroy)).subscribe(ot=>{ot.added.forEach(Dt=>Dt.select()),ot.removed.forEach(Dt=>Dt.deselect())}),this.options.changes.pipe((0,bt.O)(null),(0,je.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const ot=this._getTriggerAriaLabelledby(),Dt=this.ngControl;if(ot!==this._triggerAriaLabelledBy){const wi=this._elementRef.nativeElement;this._triggerAriaLabelledBy=ot,ot?wi.setAttribute("aria-labelledby",ot):wi.removeAttribute("aria-labelledby")}Dt&&(this._previousControl!==Dt.control&&(void 0!==this._previousControl&&null!==Dt.disabled&&Dt.disabled!==this.disabled&&(this.disabled=Dt.disabled),this._previousControl=Dt.control),this.updateErrorState())}ngOnChanges(ot){(ot.disabled||ot.userAriaDescribedBy)&&this.stateChanges.next(),ot.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}_applyModalPanelOwnership(){const ot=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!ot)return;const Dt=`${this.id}-panel`;this._trackedModal&&(0,Ge.iD)(this._trackedModal,"aria-owns",Dt),(0,Ge.Zf)(ot,"aria-owns",Dt),this._trackedModal=ot}_clearFromModal(){this._trackedModal&&((0,Ge.iD)(this._trackedModal,"aria-owns",`${this.id}-panel`),this._trackedModal=null)}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(ot){this._assignValue(ot)}registerOnChange(ot){this._onChange=ot}registerOnTouched(ot){this._onTouched=ot}setDisabledState(ot){this.disabled=ot,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const ot=this._selectionModel.selected.map(Dt=>Dt.viewValue);return this._isRtl()&&ot.reverse(),ot.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(ot){this.disabled||(this.panelOpen?this._handleOpenKeydown(ot):this._handleClosedKeydown(ot))}_handleClosedKeydown(ot){const Dt=ot.keyCode,wi=Dt===it.JH||Dt===it.LH||Dt===it.oh||Dt===it.SV,yn=Dt===it.K5||Dt===it.L_,Zi=this._keyManager;if(!Zi.isTyping()&&yn&&!(0,it.Vb)(ot)||(this.multiple||ot.altKey)&&wi)ot.preventDefault(),this.open();else if(!this.multiple){const Fn=this.selected;Zi.onKeydown(ot);const bn=this.selected;bn&&Fn!==bn&&this._liveAnnouncer.announce(bn.viewValue,1e4)}}_handleOpenKeydown(ot){const Dt=this._keyManager,wi=ot.keyCode,yn=wi===it.JH||wi===it.LH,Zi=Dt.isTyping();if(yn&&ot.altKey)ot.preventDefault(),this.close();else if(Zi||wi!==it.K5&&wi!==it.L_||!Dt.activeItem||(0,it.Vb)(ot))if(!Zi&&this._multiple&&wi===it.A&&ot.ctrlKey){ot.preventDefault();const Fn=this.options.some(bn=>!bn.disabled&&!bn.selected);this.options.forEach(bn=>{bn.disabled||(Fn?bn.select():bn.deselect())})}else{const Fn=Dt.activeItemIndex;Dt.onKeydown(ot),this._multiple&&yn&&ot.shiftKey&&Dt.activeItem&&Dt.activeItemIndex!==Fn&&Dt.activeItem._selectViaInteraction()}else ot.preventDefault(),Dt.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,ni.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(ot){if(this.options.forEach(Dt=>Dt.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&ot)Array.isArray(ot),ot.forEach(Dt=>this._selectOptionByValue(Dt)),this._sortValues();else{const Dt=this._selectOptionByValue(ot);Dt?this._keyManager.updateActiveItem(Dt):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(ot){const Dt=this.options.find(wi=>{if(this._selectionModel.isSelected(wi))return!1;try{return null!=wi.value&&this._compareWith(wi.value,ot)}catch{return!1}});return Dt&&this._selectionModel.select(Dt),Dt}_assignValue(ot){return!!(ot!==this._value||this._multiple&&Array.isArray(ot))&&(this.options&&this._setSelectionByValue(ot),this._value=ot,!0)}_skipPredicate(ot){return ot.disabled}_initKeyManager(){this._keyManager=new Ge.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const ot=(0,lt.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,je.R)(ot)).subscribe(Dt=>{this._onSelect(Dt.source,Dt.isUserInput),Dt.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,lt.T)(...this.options.map(Dt=>Dt._stateChanges)).pipe((0,je.R)(ot)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(ot,Dt){const wi=this._selectionModel.isSelected(ot);null!=ot.value||this._multiple?(wi!==ot.selected&&(ot.selected?this._selectionModel.select(ot):this._selectionModel.deselect(ot)),Dt&&this._keyManager.setActiveItem(ot),this.multiple&&(this._sortValues(),Dt&&this.focus())):(ot.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(ot.value)),wi!==this._selectionModel.isSelected(ot)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const ot=this.options.toArray();this._selectionModel.sort((Dt,wi)=>this.sortComparator?this.sortComparator(Dt,wi,ot):ot.indexOf(Dt)-ot.indexOf(wi)),this.stateChanges.next()}}_propagateChanges(ot){let Dt=null;Dt=this.multiple?this.selected.map(wi=>wi.value):this.selected?this.selected.value:ot,this._value=Dt,this.valueChange.emit(Dt),this._onChange(Dt),this.selectionChange.emit(this._getChangeEvent(Dt)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let ot=-1;for(let Dt=0;Dt<this.options.length;Dt++)if(!this.options.get(Dt).disabled){ot=Dt;break}this._keyManager.setActiveItem(ot)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(ot){this._elementRef.nativeElement.focus(ot)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const ot=this._parentFormField?.getLabelId();return this.ariaLabelledby?(ot?ot+" ":"")+this.ariaLabelledby:ot}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const ot=this._parentFormField?.getLabelId();let Dt=(ot?ot+" ":"")+this._valueId;return this.ariaLabelledby&&(Dt+=" "+this.ariaLabelledby),Dt}_panelDoneAnimating(ot){this.openedChange.emit(ot)}setDescribedByIds(ot){ot.length?this._elementRef.nativeElement.setAttribute("aria-describedby",ot.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Ut.\u0275fac=function(ot){return new(ot||Ut)(ae.Y36(ne.rL),ae.Y36(ae.sBO),ae.Y36(ae.R0b),ae.Y36(v.rD),ae.Y36(ae.SBq),ae.Y36(Pe.Is,8),ae.Y36(Le.F,8),ae.Y36(Le.sg,8),ae.Y36(He.G_,8),ae.Y36(Le.a5,10),ae.$8M("tabindex"),ae.Y36(Rt),ae.Y36(Ge.Kd),ae.Y36(ei,8))},Ut.\u0275dir=ae.lG2({type:Ut,viewQuery:function(ot,Dt){if(1&ot&&(ae.Gf(Ft,5),ae.Gf(Pt,5),ae.Gf(C.pI,5)),2&ot){let wi;ae.iGM(wi=ae.CRH())&&(Dt.trigger=wi.first),ae.iGM(wi=ae.CRH())&&(Dt.panel=wi.first),ae.iGM(wi=ae.CRH())&&(Dt._overlayDir=wi.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[ae.qOj,ae.TTD]}),Ut})(),ut=(()=>{class Ut extends dt{constructor(){super(...arguments),this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._skipPredicate=ot=>!this.panelOpen&&ot.disabled}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,je.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}open(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(ot){const Dt=this.options.toArray()[ot];if(Dt){const wi=this.panel.nativeElement,yn=(0,v.CB)(ot,this.options,this.optionGroups),Zi=Dt._getHostElement();wi.scrollTop=0===ot&&1===yn?0:(0,v.jH)(Zi.offsetTop,Zi.offsetHeight,wi.scrollTop,wi.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(ot){return new ze(this,ot)}_getOverlayWidth(ot){return"auto"===this.panelWidth?(ot instanceof C.xu?ot.elementRef:ot||this._elementRef).nativeElement.getBoundingClientRect().width:null===this.panelWidth?"":this.panelWidth}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(ot){this._hideSingleSelectionIndicator=(0,qe.Ig)(ot),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const ot of this.options)ot._changeDetectorRef.markForCheck()}}return Ut.\u0275fac=function(){let ti;return function(Dt){return(ti||(ti=ae.n5z(Ut)))(Dt||Ut)}}(),Ut.\u0275cmp=ae.Xpm({type:Ut,selectors:[["mat-select"]],contentQueries:function(ot,Dt,wi){if(1&ot&&(ae.Suo(wi,ai,5),ae.Suo(wi,v.ey,5),ae.Suo(wi,v.K7,5)),2&ot){let yn;ae.iGM(yn=ae.CRH())&&(Dt.customTrigger=yn.first),ae.iGM(yn=ae.CRH())&&(Dt.options=yn),ae.iGM(yn=ae.CRH())&&(Dt.optionGroups=yn)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox","ngSkipHydration","",1,"mat-mdc-select"],hostVars:19,hostBindings:function(ot,Dt){1&ot&&ae.NdJ("keydown",function(yn){return Dt._handleKeydown(yn)})("focus",function(){return Dt._onFocus()})("blur",function(){return Dt._onBlur()}),2&ot&&(ae.uIk("id",Dt.id)("tabindex",Dt.tabIndex)("aria-controls",Dt.panelOpen?Dt.id+"-panel":null)("aria-expanded",Dt.panelOpen)("aria-label",Dt.ariaLabel||null)("aria-required",Dt.required.toString())("aria-disabled",Dt.disabled.toString())("aria-invalid",Dt.errorState)("aria-activedescendant",Dt._getAriaActiveDescendant()),ae.ekj("mat-mdc-select-disabled",Dt.disabled)("mat-mdc-select-invalid",Dt.errorState)("mat-mdc-select-required",Dt.required)("mat-mdc-select-empty",Dt.empty)("mat-mdc-select-multiple",Dt.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",panelWidth:"panelWidth",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[ae._Bn([{provide:He.Eo,useExisting:Ut},{provide:v.HF,useExisting:Ut}]),ae.qOj],ngContentSelectors:Hn,decls:11,vars:10,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(ot,Dt){if(1&ot&&(ae.F$t(Dn),ae.TgZ(0,"div",0,1),ae.NdJ("click",function(){return Dt.toggle()}),ae.TgZ(3,"div",2),ae.YNc(4,Nt,2,1,"span",3),ae.YNc(5,Ri,3,2,"span",4),ae.qZA(),ae.TgZ(6,"div",5)(7,"div",6),ae.O4$(),ae.TgZ(8,"svg",7),ae._UZ(9,"path",8),ae.qZA()()()(),ae.YNc(10,qi,3,9,"ng-template",9),ae.NdJ("backdropClick",function(){return Dt.close()})("attach",function(){return Dt._onAttached()})("detach",function(){return Dt.close()})),2&ot){const wi=ae.MAs(1);ae.xp6(3),ae.Q6J("ngSwitch",Dt.empty),ae.uIk("id",Dt._valueId),ae.xp6(1),ae.Q6J("ngSwitchCase",!0),ae.xp6(1),ae.Q6J("ngSwitchCase",!1),ae.xp6(5),ae.Q6J("cdkConnectedOverlayPanelClass",Dt._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",Dt._scrollStrategy)("cdkConnectedOverlayOrigin",Dt._preferredOverlayOrigin||wi)("cdkConnectedOverlayOpen",Dt.panelOpen)("cdkConnectedOverlayPositions",Dt._positions)("cdkConnectedOverlayWidth",Dt._overlayWidth)}},dependencies:[l.mk,l.RF,l.n9,l.ED,C.pI,C.xu],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[_n.transformPanel]},changeDetection:0}),Ut})(),Yt=(()=>{class Ut{}return Ut.\u0275fac=function(ot){return new(ot||Ut)},Ut.\u0275mod=ae.oAB({type:Ut}),Ut.\u0275inj=ae.cJS({providers:[Ct],imports:[l.ez,C.U8,v.Ng,v.BQ,ne.ZD,He.lN,v.Ng,v.BQ]}),Ut})()},1274:(gi,mt,H)=>{"use strict";H.d(mt,{Ye:()=>qe,g0:()=>it});var C=H(5879),l=H(3680),ae=H(2831),v=H(6814);const He=["*",[["mat-toolbar-row"]]],ne=["*","mat-toolbar-row"],Ge=(0,l.pj)(class{constructor(Le){this._elementRef=Le}});let Pe=(()=>{class Le{}return Le.\u0275fac=function(Xe){return new(Xe||Le)},Le.\u0275dir=C.lG2({type:Le,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),Le})(),qe=(()=>{class Le extends Ge{constructor(Xe,lt,bt){super(Xe),this._platform=lt,this._document=bt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return Le.\u0275fac=function(Xe){return new(Xe||Le)(C.Y36(C.SBq),C.Y36(ae.t4),C.Y36(v.K0))},Le.\u0275cmp=C.Xpm({type:Le,selectors:[["mat-toolbar"]],contentQueries:function(Xe,lt,bt){if(1&Xe&&C.Suo(bt,Pe,5),2&Xe){let jt;C.iGM(jt=C.CRH())&&(lt._toolbarRows=jt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(Xe,lt){2&Xe&&C.ekj("mat-toolbar-multiple-rows",lt._toolbarRows.length>0)("mat-toolbar-single-row",0===lt._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[C.qOj],ngContentSelectors:ne,decls:2,vars:0,template:function(Xe,lt){1&Xe&&(C.F$t(He),C.Hsn(0),C.Hsn(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0}),Le})(),it=(()=>{class Le{}return Le.\u0275fac=function(Xe){return new(Xe||Le)},Le.\u0275mod=C.oAB({type:Le}),Le.\u0275inj=C.cJS({imports:[l.BQ,l.BQ]}),Le})()},6593:(gi,mt,H)=>{"use strict";H.d(mt,{Dx:()=>Fn,H7:()=>Ji,b2:()=>ot,q6:()=>ut,se:()=>Nt});var C=H(5879),l=H(6814);class ae extends l.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class v extends ae{static makeCurrent(){(0,l.HT)(new v)}onAndCancel(se,X,pe){return se.addEventListener(X,pe),()=>{se.removeEventListener(X,pe)}}dispatchEvent(se,X){se.dispatchEvent(X)}remove(se){se.parentNode&&se.parentNode.removeChild(se)}createElement(se,X){return(X=X||this.getDefaultDocument()).createElement(se)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(se){return se.nodeType===Node.ELEMENT_NODE}isShadowRoot(se){return se instanceof DocumentFragment}getGlobalEventTarget(se,X){return"window"===X?window:"document"===X?se:"body"===X?se.body:null}getBaseHref(se){const X=function ne(){return He=He||document.querySelector("base"),He?He.getAttribute("href"):null}();return null==X?null:function Pe(ve){Ge=Ge||document.createElement("a"),Ge.setAttribute("href",ve);const se=Ge.pathname;return"/"===se.charAt(0)?se:`/${se}`}(X)}resetBaseElement(){He=null}getUserAgent(){return window.navigator.userAgent}getCookie(se){return(0,l.Mx)(document.cookie,se)}}let Ge,He=null,Ue=(()=>{class ve{build(){return new XMLHttpRequest}}return ve.\u0275fac=function(X){return new(X||ve)},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const it=new C.OlP("EventManagerPlugins");let Le=(()=>{class ve{constructor(X,pe){this._zone=pe,this._eventNameToPlugin=new Map,X.forEach(Qe=>{Qe.manager=this}),this._plugins=X.slice().reverse()}addEventListener(X,pe,Qe){return this._findPluginFor(pe).addEventListener(X,pe,Qe)}getZone(){return this._zone}_findPluginFor(X){let pe=this._eventNameToPlugin.get(X);if(pe)return pe;if(pe=this._plugins.find(at=>at.supports(X)),!pe)throw new C.vHH(5101,!1);return this._eventNameToPlugin.set(X,pe),pe}}return ve.\u0275fac=function(X){return new(X||ve)(C.LFG(it),C.LFG(C.R0b))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class et{constructor(se){this._doc=se}}const Xe="ng-app-id";let lt=(()=>{class ve{constructor(X,pe,Qe,at={}){this.doc=X,this.appId=pe,this.nonce=Qe,this.platformId=at,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,l.PM)(at),this.resetHostNodes()}addStyles(X){for(const pe of X)1===this.changeUsageCount(pe,1)&&this.onStyleAdded(pe)}removeStyles(X){for(const pe of X)this.changeUsageCount(pe,-1)<=0&&this.onStyleRemoved(pe)}ngOnDestroy(){const X=this.styleNodesInDOM;X&&(X.forEach(pe=>pe.remove()),X.clear());for(const pe of this.getAllStyles())this.onStyleRemoved(pe);this.resetHostNodes()}addHost(X){this.hostNodes.add(X);for(const pe of this.getAllStyles())this.addStyleToHost(X,pe)}removeHost(X){this.hostNodes.delete(X)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(X){for(const pe of this.hostNodes)this.addStyleToHost(pe,X)}onStyleRemoved(X){const pe=this.styleRef;pe.get(X)?.elements?.forEach(Qe=>Qe.remove()),pe.delete(X)}collectServerRenderedStyles(){const X=this.doc.head?.querySelectorAll(`style[${Xe}="${this.appId}"]`);if(X?.length){const pe=new Map;return X.forEach(Qe=>{null!=Qe.textContent&&pe.set(Qe.textContent,Qe)}),pe}return null}changeUsageCount(X,pe){const Qe=this.styleRef;if(Qe.has(X)){const at=Qe.get(X);return at.usage+=pe,at.usage}return Qe.set(X,{usage:pe,elements:[]}),pe}getStyleElement(X,pe){const Qe=this.styleNodesInDOM,at=Qe?.get(pe);if(at?.parentNode===X)return Qe.delete(pe),at.removeAttribute(Xe),at;{const xe=this.doc.createElement("style");return this.nonce&&xe.setAttribute("nonce",this.nonce),xe.textContent=pe,this.platformIsServer&&xe.setAttribute(Xe,this.appId),xe}}addStyleToHost(X,pe){const Qe=this.getStyleElement(X,pe);X.appendChild(Qe);const at=this.styleRef,xe=at.get(pe)?.elements;xe?xe.push(Qe):at.set(pe,{elements:[Qe],usage:1})}resetHostNodes(){const X=this.hostNodes;X.clear(),X.add(this.doc.head)}}return ve.\u0275fac=function(X){return new(X||ve)(C.LFG(l.K0),C.LFG(C.AFp),C.LFG(C.Ojb,8),C.LFG(C.Lbi))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jt=/%COMP%/g,je=new C.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Pt(ve,se){return se.map(X=>X.replace(jt,ve))}let Nt=(()=>{class ve{constructor(X,pe,Qe,at,xe,Te,ue,De=null){this.eventManager=X,this.sharedStylesHost=pe,this.appId=Qe,this.removeStylesOnCompDestroy=at,this.doc=xe,this.platformId=Te,this.ngZone=ue,this.nonce=De,this.rendererByCompId=new Map,this.platformIsServer=(0,l.PM)(Te),this.defaultRenderer=new fi(X,xe,ue,this.platformIsServer)}createRenderer(X,pe){if(!X||!pe)return this.defaultRenderer;this.platformIsServer&&pe.encapsulation===C.ifc.ShadowDom&&(pe={...pe,encapsulation:C.ifc.Emulated});const Qe=this.getOrCreateRenderer(X,pe);return Qe instanceof _n?Qe.applyToHost(X):Qe instanceof Hn&&Qe.applyStyles(),Qe}getOrCreateRenderer(X,pe){const Qe=this.rendererByCompId;let at=Qe.get(pe.id);if(!at){const xe=this.doc,Te=this.ngZone,ue=this.eventManager,De=this.sharedStylesHost,Je=this.removeStylesOnCompDestroy,Tt=this.platformIsServer;switch(pe.encapsulation){case C.ifc.Emulated:at=new _n(ue,De,pe,this.appId,Je,xe,Te,Tt);break;case C.ifc.ShadowDom:return new Dn(ue,De,X,pe,xe,Te,this.nonce,Tt);default:at=new Hn(ue,De,pe,Je,xe,Te,Tt)}Qe.set(pe.id,at)}return at}ngOnDestroy(){this.rendererByCompId.clear()}}return ve.\u0275fac=function(X){return new(X||ve)(C.LFG(Le),C.LFG(lt),C.LFG(C.AFp),C.LFG(je),C.LFG(l.K0),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(C.Ojb))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class fi{constructor(se,X,pe,Qe){this.eventManager=se,this.doc=X,this.ngZone=pe,this.platformIsServer=Qe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(se,X){return X?this.doc.createElementNS(bt[X]||X,se):this.doc.createElement(se)}createComment(se){return this.doc.createComment(se)}createText(se){return this.doc.createTextNode(se)}appendChild(se,X){(qi(se)?se.content:se).appendChild(X)}insertBefore(se,X,pe){se&&(qi(se)?se.content:se).insertBefore(X,pe)}removeChild(se,X){se&&se.removeChild(X)}selectRootElement(se,X){let pe="string"==typeof se?this.doc.querySelector(se):se;if(!pe)throw new C.vHH(-5104,!1);return X||(pe.textContent=""),pe}parentNode(se){return se.parentNode}nextSibling(se){return se.nextSibling}setAttribute(se,X,pe,Qe){if(Qe){X=Qe+":"+X;const at=bt[Qe];at?se.setAttributeNS(at,X,pe):se.setAttribute(X,pe)}else se.setAttribute(X,pe)}removeAttribute(se,X,pe){if(pe){const Qe=bt[pe];Qe?se.removeAttributeNS(Qe,X):se.removeAttribute(`${pe}:${X}`)}else se.removeAttribute(X)}addClass(se,X){se.classList.add(X)}removeClass(se,X){se.classList.remove(X)}setStyle(se,X,pe,Qe){Qe&(C.JOm.DashCase|C.JOm.Important)?se.style.setProperty(X,pe,Qe&C.JOm.Important?"important":""):se.style[X]=pe}removeStyle(se,X,pe){pe&C.JOm.DashCase?se.style.removeProperty(X):se.style[X]=""}setProperty(se,X,pe){se[X]=pe}setValue(se,X){se.nodeValue=X}listen(se,X,pe){if("string"==typeof se&&!(se=(0,l.q)().getGlobalEventTarget(this.doc,se)))throw new Error(`Unsupported event target ${se} for event ${X}`);return this.eventManager.addEventListener(se,X,this.decoratePreventDefault(pe))}decoratePreventDefault(se){return X=>{if("__ngUnwrap__"===X)return se;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>se(X)):se(X))&&X.preventDefault()}}}function qi(ve){return"TEMPLATE"===ve.tagName&&void 0!==ve.content}class Dn extends fi{constructor(se,X,pe,Qe,at,xe,Te,ue){super(se,at,xe,ue),this.sharedStylesHost=X,this.hostEl=pe,this.shadowRoot=pe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const De=Pt(Qe.id,Qe.styles);for(const Je of De){const Tt=document.createElement("style");Te&&Tt.setAttribute("nonce",Te),Tt.textContent=Je,this.shadowRoot.appendChild(Tt)}}nodeOrShadowRoot(se){return se===this.hostEl?this.shadowRoot:se}appendChild(se,X){return super.appendChild(this.nodeOrShadowRoot(se),X)}insertBefore(se,X,pe){return super.insertBefore(this.nodeOrShadowRoot(se),X,pe)}removeChild(se,X){return super.removeChild(this.nodeOrShadowRoot(se),X)}parentNode(se){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(se)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Hn extends fi{constructor(se,X,pe,Qe,at,xe,Te,ue){super(se,at,xe,Te),this.sharedStylesHost=X,this.removeStylesOnCompDestroy=Qe,this.styles=ue?Pt(ue,pe.styles):pe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class _n extends Hn{constructor(se,X,pe,Qe,at,xe,Te,ue){const De=Qe+"-"+pe.id;super(se,X,pe,at,xe,Te,ue,De),this.contentAttr=function Oe(ve){return"_ngcontent-%COMP%".replace(jt,ve)}(De),this.hostAttr=function Ft(ve){return"_nghost-%COMP%".replace(jt,ve)}(De)}applyToHost(se){this.applyStyles(),this.setAttribute(se,this.hostAttr,"")}createElement(se,X){const pe=super.createElement(se,X);return super.setAttribute(pe,this.contentAttr,""),pe}}let Vn=(()=>{class ve extends et{constructor(X){super(X)}supports(X){return!0}addEventListener(X,pe,Qe){return X.addEventListener(pe,Qe,!1),()=>this.removeEventListener(X,pe,Qe)}removeEventListener(X,pe,Qe){return X.removeEventListener(pe,Qe)}}return ve.\u0275fac=function(X){return new(X||ve)(C.LFG(l.K0))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Sn=["alt","control","meta","shift"],Et={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ft={alt:ve=>ve.altKey,control:ve=>ve.ctrlKey,meta:ve=>ve.metaKey,shift:ve=>ve.shiftKey};let Rt=(()=>{class ve extends et{constructor(X){super(X)}supports(X){return null!=ve.parseEventName(X)}addEventListener(X,pe,Qe){const at=ve.parseEventName(pe),xe=ve.eventCallback(at.fullKey,Qe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,l.q)().onAndCancel(X,at.domEventName,xe))}static parseEventName(X){const pe=X.toLowerCase().split("."),Qe=pe.shift();if(0===pe.length||"keydown"!==Qe&&"keyup"!==Qe)return null;const at=ve._normalizeKey(pe.pop());let xe="",Te=pe.indexOf("code");if(Te>-1&&(pe.splice(Te,1),xe="code."),Sn.forEach(De=>{const Je=pe.indexOf(De);Je>-1&&(pe.splice(Je,1),xe+=De+".")}),xe+=at,0!=pe.length||0===at.length)return null;const ue={};return ue.domEventName=Qe,ue.fullKey=xe,ue}static matchEventFullKeyCode(X,pe){let Qe=Et[X.key]||X.key,at="";return pe.indexOf("code.")>-1&&(Qe=X.code,at="code."),!(null==Qe||!Qe)&&(Qe=Qe.toLowerCase()," "===Qe?Qe="space":"."===Qe&&(Qe="dot"),Sn.forEach(xe=>{xe!==Qe&&(0,ft[xe])(X)&&(at+=xe+".")}),at+=Qe,at===pe)}static eventCallback(X,pe,Qe){return at=>{ve.matchEventFullKeyCode(at,X)&&Qe.runGuarded(()=>pe(at))}}static _normalizeKey(X){return"esc"===X?"escape":X}}return ve.\u0275fac=function(X){return new(X||ve)(C.LFG(l.K0))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const ut=(0,C.eFA)(C._c5,"browser",[{provide:C.Lbi,useValue:l.bD},{provide:C.g9A,useValue:function ze(){v.makeCurrent()},multi:!0},{provide:l.K0,useFactory:function dt(){return(0,C.RDi)(document),document},deps:[]}]),Yt=new C.OlP(""),Ut=[{provide:C.rWj,useClass:class qe{addToWindow(se){C.dqk.getAngularTestability=(pe,Qe=!0)=>{const at=se.findTestabilityInTree(pe,Qe);if(null==at)throw new C.vHH(5103,!1);return at},C.dqk.getAllAngularTestabilities=()=>se.getAllTestabilities(),C.dqk.getAllAngularRootElements=()=>se.getAllRootElements(),C.dqk.frameworkStabilizers||(C.dqk.frameworkStabilizers=[]),C.dqk.frameworkStabilizers.push(pe=>{const Qe=C.dqk.getAllAngularTestabilities();let at=Qe.length,xe=!1;const Te=function(ue){xe=xe||ue,at--,0==at&&pe(xe)};Qe.forEach(ue=>{ue.whenStable(Te)})})}findTestabilityInTree(se,X,pe){return null==X?null:se.getTestability(X)??(pe?(0,l.q)().isShadowRoot(X)?this.findTestabilityInTree(se,X.host,!0):this.findTestabilityInTree(se,X.parentElement,!0):null)}},deps:[]},{provide:C.lri,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]},{provide:C.dDg,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]}],ti=[{provide:C.zSh,useValue:"root"},{provide:C.qLn,useFactory:function rt(){return new C.qLn},deps:[]},{provide:it,useClass:Vn,multi:!0,deps:[l.K0,C.R0b,C.Lbi]},{provide:it,useClass:Rt,multi:!0,deps:[l.K0]},Nt,lt,Le,{provide:C.FYo,useExisting:Nt},{provide:l.JF,useClass:Ue,deps:[]},[]];let ot=(()=>{class ve{constructor(X){}static withServerTransition(X){return{ngModule:ve,providers:[{provide:C.AFp,useValue:X.appId}]}}}return ve.\u0275fac=function(X){return new(X||ve)(C.LFG(Yt,12))},ve.\u0275mod=C.oAB({type:ve}),ve.\u0275inj=C.cJS({providers:[...ti,...Ut],imports:[l.ez,C.hGG]}),ve})(),Fn=(()=>{class ve{constructor(X){this._doc=X}getTitle(){return this._doc.title}setTitle(X){this._doc.title=X||""}}return ve.\u0275fac=function(X){return new(X||ve)(C.LFG(l.K0))},ve.\u0275prov=C.Yz7({token:ve,factory:function(X){let pe=null;return pe=X?new X:function Zi(){return new Fn((0,C.LFG)(l.K0))}(),pe},providedIn:"root"}),ve})();typeof window<"u"&&window;let Ji=(()=>{class ve{}return ve.\u0275fac=function(X){return new(X||ve)},ve.\u0275prov=C.Yz7({token:ve,factory:function(X){let pe=null;return pe=X?new(X||ve):C.LFG(zt),pe},providedIn:"root"}),ve})(),zt=(()=>{class ve extends Ji{constructor(X){super(),this._doc=X}sanitize(X,pe){if(null==pe)return null;switch(X){case C.q3G.NONE:return pe;case C.q3G.HTML:return(0,C.qzn)(pe,"HTML")?(0,C.z3N)(pe):(0,C.EiD)(this._doc,String(pe)).toString();case C.q3G.STYLE:return(0,C.qzn)(pe,"Style")?(0,C.z3N)(pe):pe;case C.q3G.SCRIPT:if((0,C.qzn)(pe,"Script"))return(0,C.z3N)(pe);throw new C.vHH(5200,!1);case C.q3G.URL:return(0,C.qzn)(pe,"URL")?(0,C.z3N)(pe):(0,C.mCW)(String(pe));case C.q3G.RESOURCE_URL:if((0,C.qzn)(pe,"ResourceURL"))return(0,C.z3N)(pe);throw new C.vHH(5201,!1);default:throw new C.vHH(5202,!1)}}bypassSecurityTrustHtml(X){return(0,C.JVY)(X)}bypassSecurityTrustStyle(X){return(0,C.L6k)(X)}bypassSecurityTrustScript(X){return(0,C.eBb)(X)}bypassSecurityTrustUrl(X){return(0,C.LAX)(X)}bypassSecurityTrustResourceUrl(X){return(0,C.pB0)(X)}}return ve.\u0275fac=function(X){return new(X||ve)(C.LFG(l.K0))},ve.\u0275prov=C.Yz7({token:ve,factory:function(X){let pe=null;return pe=X?new X:function Vi(ve){return new zt(ve.get(l.K0))}(C.LFG(C.zs3)),pe},providedIn:"root"}),ve})()},8184:(gi,mt,H)=>{"use strict";H.d(mt,{gz:()=>An,F0:()=>tr,rH:()=>ds,Od:()=>hn,Bz:()=>Tl,lC:()=>Ro});var C=H(5879),l=H(5592),ae=H(4674),He=H(7715),ne=H(2096),Ge=H(5619),Pe=H(2572),qe=H(6973),Ue=H(5211),it=H(4911),Le=H(8407),et=H(8504),Xe=H(6232),lt=H(7394),bt=H(9360),jt=H(8251);function ni(){return(0,bt.e)((f,b)=>{let y=null;f._refCount++;const D=(0,jt.x)(b,void 0,void 0,void 0,()=>{if(!f||f._refCount<=0||0<--f._refCount)return void(y=null);const k=f._connection,R=y;y=null,k&&(!R||k===R)&&k.unsubscribe(),b.unsubscribe()});f.subscribe(D),D.closed||(y=f.connect())})}class Ti extends l.y{constructor(b,y){super(),this.source=b,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,bt.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new lt.w0;const y=this.getSubject();b.add(this.source.subscribe((0,jt.x)(y,void 0,()=>{this._teardown(),y.complete()},D=>{this._teardown(),y.error(D)},()=>this._teardown()))),b.closed&&(this._connection=null,b=lt.w0.EMPTY)}return b}refCount(){return ni()(this)}}var qt=H(8645),Ne=H(6814),je=H(7398),Oe=H(4664),Ft=H(8180),Pt=H(7921),Nt=H(2181),fi=H(1631),vi=H(1374),Ri=H(6328),qi=H(9397),Dn=H(6306);var Vn=H(3572);function Sn(f){return f<=0?()=>Xe.E:(0,bt.e)((b,y)=>{let D=[];b.subscribe((0,jt.x)(y,k=>{D.push(k),f<D.length&&D.shift()},()=>{for(const k of D)y.next(k);y.complete()},void 0,()=>{D=null}))})}var Et=H(3026),ft=H(2737),Vt=H(975),ei=H(4716),Ct=H(7537),ai=H(6593);const ze="primary",rt=Symbol("RouteTitle");class dt{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const y=this.params[b];return Array.isArray(y)?y[0]:y}return null}getAll(b){if(this.has(b)){const y=this.params[b];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Me(f){return new dt(f)}function ut(f,b,y){const D=y.path.split("/");if(D.length>f.length||"full"===y.pathMatch&&(b.hasChildren()||D.length<f.length))return null;const k={};for(let R=0;R<D.length;R++){const B=D[R],ee=f[R];if(B.startsWith(":"))k[B.substring(1)]=ee;else if(B!==ee.path)return null}return{consumed:f.slice(0,D.length),posParams:k}}function Ut(f,b){const y=f?Object.keys(f):void 0,D=b?Object.keys(b):void 0;if(!y||!D||y.length!=D.length)return!1;let k;for(let R=0;R<y.length;R++)if(k=y[R],!ti(f[k],b[k]))return!1;return!0}function ti(f,b){if(Array.isArray(f)&&Array.isArray(b)){if(f.length!==b.length)return!1;const y=[...f].sort(),D=[...b].sort();return y.every((k,R)=>D[R]===k)}return f===b}function ot(f){return f.length>0?f[f.length-1]:null}function Dt(f){return function v(f){return!!f&&(f instanceof l.y||(0,ae.m)(f.lift)&&(0,ae.m)(f.subscribe))}(f)?f:(0,C.QGY)(f)?(0,He.D)(Promise.resolve(f)):(0,ne.of)(f)}const wi={exact:function bn(f,b,y){if(!xt(f.segments,b.segments)||!Se(f.segments,b.segments,y)||f.numberOfChildren!==b.numberOfChildren)return!1;for(const D in b.children)if(!f.children[D]||!bn(f.children[D],b.children[D],y))return!1;return!0},subset:pt},yn={exact:function Fn(f,b){return Ut(f,b)},subset:function Qt(f,b){return Object.keys(b).length<=Object.keys(f).length&&Object.keys(b).every(y=>ti(f[y],b[y]))},ignored:()=>!0};function Zi(f,b,y){return wi[y.paths](f.root,b.root,y.matrixParams)&&yn[y.queryParams](f.queryParams,b.queryParams)&&!("exact"===y.fragment&&f.fragment!==b.fragment)}function pt(f,b,y){return ce(f,b,b.segments,y)}function ce(f,b,y,D){if(f.segments.length>y.length){const k=f.segments.slice(0,y.length);return!(!xt(k,y)||b.hasChildren()||!Se(k,y,D))}if(f.segments.length===y.length){if(!xt(f.segments,y)||!Se(f.segments,y,D))return!1;for(const k in b.children)if(!f.children[k]||!pt(f.children[k],b.children[k],D))return!1;return!0}{const k=y.slice(0,f.segments.length),R=y.slice(f.segments.length);return!!(xt(f.segments,k)&&Se(f.segments,k,D)&&f.children[ze])&&ce(f.children[ze],b,R,D)}}function Se(f,b,y){return b.every((D,k)=>yn[y](f[k].parameters,D.parameters))}class ke{constructor(b=new he([],{}),y={},D=null){this.root=b,this.queryParams=y,this.fragment=D}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Me(this.queryParams)),this._queryParamMap}toString(){return hi.serialize(this)}}class he{constructor(b,y){this.segments=b,this.children=y,this.parent=null,Object.values(y).forEach(D=>D.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qi(this)}}class de{constructor(b,y){this.path=b,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Me(this.parameters)),this._parameterMap}toString(){return V(this)}}function xt(f,b){return f.length===b.length&&f.every((y,D)=>y.path===b[D].path)}let Ot=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:function(){return new _i},providedIn:"root"}),f})();class _i{parse(b){const y=new xe(b);return new ke(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(b){const y=`/${tn(b.root,!0)}`,D=function ie(f){const b=Object.keys(f).map(y=>{const D=f[y];return Array.isArray(D)?D.map(k=>`${Vi(y)}=${Vi(k)}`).join("&"):`${Vi(y)}=${Vi(D)}`}).filter(y=>!!y);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${y}${D}${"string"==typeof b.fragment?`#${function zt(f){return encodeURI(f)}(b.fragment)}`:""}`}}const hi=new _i;function Qi(f){return f.segments.map(b=>V(b)).join("/")}function tn(f,b){if(!f.hasChildren())return Qi(f);if(b){const y=f.children[ze]?tn(f.children[ze],!1):"",D=[];return Object.entries(f.children).forEach(([k,R])=>{k!==ze&&D.push(`${k}:${tn(R,!1)}`)}),D.length>0?`${y}(${D.join("//")})`:y}{const y=function Xt(f,b){let y=[];return Object.entries(f.children).forEach(([D,k])=>{D===ze&&(y=y.concat(b(k,D)))}),Object.entries(f.children).forEach(([D,k])=>{D!==ze&&(y=y.concat(b(k,D)))}),y}(f,(D,k)=>k===ze?[tn(f.children[ze],!1)]:[`${k}:${tn(D,!1)}`]);return 1===Object.keys(f.children).length&&null!=f.children[ze]?`${Qi(f)}/${y[0]}`:`${Qi(f)}/(${y.join("//")})`}}function Ji(f){return encodeURIComponent(f).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vi(f){return Ji(f).replace(/%3B/gi,";")}function li(f){return Ji(f).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vt(f){return decodeURIComponent(f)}function q(f){return vt(f.replace(/\+/g,"%20"))}function V(f){return`${li(f.path)}${function j(f){return Object.keys(f).map(b=>`;${li(b)}=${li(f[b])}`).join("")}(f.parameters)}`}const ge=/^[^\/()?;#]+/;function Ae(f){const b=f.match(ge);return b?b[0]:""}const ve=/^[^\/()?;=#]+/,X=/^[^=?&#]+/,Qe=/^[^&#]+/;class xe{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let D={};return this.peekStartsWith("(")&&(D=this.parseParens(!1)),(b.length>0||Object.keys(y).length>0)&&(D[ze]=new he(b,y)),D}parseSegment(){const b=Ae(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new C.vHH(4009,!1);return this.capture(b),new de(vt(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const y=function se(f){const b=f.match(ve);return b?b[0]:""}(this.remaining);if(!y)return;this.capture(y);let D="";if(this.consumeOptional("=")){const k=Ae(this.remaining);k&&(D=k,this.capture(D))}b[vt(y)]=vt(D)}parseQueryParam(b){const y=function pe(f){const b=f.match(X);return b?b[0]:""}(this.remaining);if(!y)return;this.capture(y);let D="";if(this.consumeOptional("=")){const B=function at(f){const b=f.match(Qe);return b?b[0]:""}(this.remaining);B&&(D=B,this.capture(D))}const k=q(y),R=q(D);if(b.hasOwnProperty(k)){let B=b[k];Array.isArray(B)||(B=[B],b[k]=B),B.push(R)}else b[k]=R}parseParens(b){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const D=Ae(this.remaining),k=this.remaining[D.length];if("/"!==k&&")"!==k&&";"!==k)throw new C.vHH(4010,!1);let R;D.indexOf(":")>-1?(R=D.slice(0,D.indexOf(":")),this.capture(R),this.capture(":")):b&&(R=ze);const B=this.parseChildren();y[R]=1===Object.keys(B).length?B[ze]:new he([],B),this.consumeOptional("//")}return y}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new C.vHH(4011,!1)}}function Te(f){return f.segments.length>0?new he([],{[ze]:f}):f}function ue(f){const b={};for(const D of Object.keys(f.children)){const R=ue(f.children[D]);if(D===ze&&0===R.segments.length&&R.hasChildren())for(const[B,ee]of Object.entries(R.children))b[B]=ee;else(R.segments.length>0||R.hasChildren())&&(b[D]=R)}return function De(f){if(1===f.numberOfChildren&&f.children[ze]){const b=f.children[ze];return new he(f.segments.concat(b.segments),b.children)}return f}(new he(f.segments,b))}function Je(f){return f instanceof ke}function Fe(f){let b;const k=Te(function y(R){const B={};for(const oe of R.children){const Ee=y(oe);B[oe.outlet]=Ee}const ee=new he(R.url,B);return R===f&&(b=ee),ee}(f.root));return b??k}function Ie(f,b,y,D){let k=f;for(;k.parent;)k=k.parent;if(0===b.length)return Gt(k,k,k,y,D);const R=function nn(f){if("string"==typeof f[0]&&1===f.length&&"/"===f[0])return new ui(!0,0,f);let b=0,y=!1;const D=f.reduce((k,R,B)=>{if("object"==typeof R&&null!=R){if(R.outlets){const ee={};return Object.entries(R.outlets).forEach(([oe,Ee])=>{ee[oe]="string"==typeof Ee?Ee.split("/"):Ee}),[...k,{outlets:ee}]}if(R.segmentPath)return[...k,R.segmentPath]}return"string"!=typeof R?[...k,R]:0===B?(R.split("/").forEach((ee,oe)=>{0==oe&&"."===ee||(0==oe&&""===ee?y=!0:".."===ee?b++:""!=ee&&k.push(ee))}),k):[...k,R]},[]);return new ui(y,b,D)}(b);if(R.toRoot())return Gt(k,k,new he([],{}),y,D);const B=function $n(f,b,y){if(f.isAbsolute)return new Ni(b,!0,0);if(!y)return new Ni(b,!1,NaN);if(null===y.parent)return new Ni(y,!0,0);const D=Ze(f.commands[0])?0:1;return function Mo(f,b,y){let D=f,k=b,R=y;for(;R>k;){if(R-=k,D=D.parent,!D)throw new C.vHH(4005,!1);k=D.segments.length}return new Ni(D,!1,k-R)}(y,y.segments.length-1+D,f.numberOfDoubleDots)}(R,k,f),ee=B.processChildren?Fr(B.segmentGroup,B.index,R.commands):In(B.segmentGroup,B.index,R.commands);return Gt(k,B.segmentGroup,ee,y,D)}function Ze(f){return"object"==typeof f&&null!=f&&!f.outlets&&!f.segmentPath}function Bt(f){return"object"==typeof f&&null!=f&&f.outlets}function Gt(f,b,y,D,k){let B,R={};D&&Object.entries(D).forEach(([oe,Ee])=>{R[oe]=Array.isArray(Ee)?Ee.map(Ce=>`${Ce}`):`${Ee}`}),B=f===b?y:di(f,b,y);const ee=Te(ue(B));return new ke(ee,R,k)}function di(f,b,y){const D={};return Object.entries(f.children).forEach(([k,R])=>{D[k]=R===b?y:di(R,b,y)}),new he(f.segments,D)}class ui{constructor(b,y,D){if(this.isAbsolute=b,this.numberOfDoubleDots=y,this.commands=D,b&&D.length>0&&Ze(D[0]))throw new C.vHH(4003,!1);const k=D.find(Bt);if(k&&k!==ot(D))throw new C.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ni{constructor(b,y,D){this.segmentGroup=b,this.processChildren=y,this.index=D}}function In(f,b,y){if(f||(f=new he([],{})),0===f.segments.length&&f.hasChildren())return Fr(f,b,y);const D=function to(f,b,y){let D=0,k=b;const R={match:!1,pathIndex:0,commandIndex:0};for(;k<f.segments.length;){if(D>=y.length)return R;const B=f.segments[k],ee=y[D];if(Bt(ee))break;const oe=`${ee}`,Ee=D<y.length-1?y[D+1]:null;if(k>0&&void 0===oe)break;if(oe&&Ee&&"object"==typeof Ee&&void 0===Ee.outlets){if(!rs(oe,Ee,B))return R;D+=2}else{if(!rs(oe,{},B))return R;D++}k++}return{match:!0,pathIndex:k,commandIndex:D}}(f,b,y),k=y.slice(D.commandIndex);if(D.match&&D.pathIndex<f.segments.length){const R=new he(f.segments.slice(0,D.pathIndex),{});return R.children[ze]=new he(f.segments.slice(D.pathIndex),f.children),Fr(R,0,k)}return D.match&&0===k.length?new he(f.segments,{}):D.match&&!f.hasChildren()?on(f,b,y):D.match?Fr(f,0,k):on(f,b,y)}function Fr(f,b,y){if(0===y.length)return new he(f.segments,{});{const D=function Ar(f){return Bt(f[0])?f[0].outlets:{[ze]:f}}(y),k={};if(!D[ze]&&f.children[ze]&&1===f.numberOfChildren&&0===f.children[ze].segments.length){const R=Fr(f.children[ze],b,y);return new he(f.segments,R.children)}return Object.entries(D).forEach(([R,B])=>{"string"==typeof B&&(B=[B]),null!==B&&(k[R]=In(f.children[R],b,B))}),Object.entries(f.children).forEach(([R,B])=>{void 0===D[R]&&(k[R]=B)}),new he(f.segments,k)}}function on(f,b,y){const D=f.segments.slice(0,b);let k=0;for(;k<y.length;){const R=y[k];if(Bt(R)){const oe=fn(R.outlets);return new he(D,oe)}if(0===k&&Ze(y[0])){D.push(new de(f.segments[b].path,Mr(y[0]))),k++;continue}const B=Bt(R)?R.outlets[ze]:`${R}`,ee=k<y.length-1?y[k+1]:null;B&&ee&&Ze(ee)?(D.push(new de(B,Mr(ee))),k+=2):(D.push(new de(B,{})),k++)}return new he(D,{})}function fn(f){const b={};return Object.entries(f).forEach(([y,D])=>{"string"==typeof D&&(D=[D]),null!==D&&(b[y]=on(new he([],{}),0,D))}),b}function Mr(f){const b={};return Object.entries(f).forEach(([y,D])=>b[y]=`${D}`),b}function rs(f,b,y){return f==y.path&&Ut(b,y.parameters)}const Qn="imperative";class hr{constructor(b,y){this.id=b,this.url=y}}class Do extends hr{constructor(b,y,D="imperative",k=null){super(b,y),this.type=0,this.navigationTrigger=D,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class io extends hr{constructor(b,y,D){super(b,y),this.urlAfterRedirects=D,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class no extends hr{constructor(b,y,D,k){super(b,y),this.reason=D,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mn extends hr{constructor(b,y,D,k){super(b,y),this.reason=D,this.code=k,this.type=16}}class ro extends hr{constructor(b,y,D,k){super(b,y),this.error=D,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Po extends hr{constructor(b,y,D,k){super(b,y),this.urlAfterRedirects=D,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class os extends hr{constructor(b,y,D,k){super(b,y),this.urlAfterRedirects=D,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xa extends hr{constructor(b,y,D,k,R){super(b,y),this.urlAfterRedirects=D,this.state=k,this.shouldActivate=R,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class La extends hr{constructor(b,y,D,k){super(b,y),this.urlAfterRedirects=D,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ic extends hr{constructor(b,y,D,k){super(b,y),this.urlAfterRedirects=D,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wa{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vl{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ca{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ea{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Na{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cn{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pr{constructor(b,y,D){this.routerEvent=b,this.position=y,this.anchor=D,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class As{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vr,this.attachRef=null}}let vr=(()=>{class f{constructor(){this.contexts=new Map}onChildOutletCreated(y,D){const k=this.getOrCreateContext(y);k.outlet=D,this.contexts.set(y,k)}onChildOutletDestroyed(y){const D=this.getContext(y);D&&(D.outlet=null,D.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let D=this.getContext(y);return D||(D=new As,this.contexts.set(y,D)),D}getContext(y){return this.contexts.get(y)||null}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();class ks{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const y=this.pathFromRoot(b);return y.length>1?y[y.length-2]:null}children(b){const y=go(b,this._root);return y?y.children.map(D=>D.value):[]}firstChild(b){const y=go(b,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(b){const y=qo(b,this._root);return y.length<2?[]:y[y.length-2].children.map(k=>k.value).filter(k=>k!==b)}pathFromRoot(b){return qo(b,this._root).map(y=>y.value)}}function go(f,b){if(f===b.value)return b;for(const y of b.children){const D=go(f,y);if(D)return D}return null}function qo(f,b){if(f===b.value)return[b];for(const y of b.children){const D=qo(f,y);if(D.length)return D.unshift(b),D}return[]}class Uo{constructor(b,y){this.value=b,this.children=y}toString(){return`TreeNode(${this.value})`}}function Yo(f){const b={};return f&&f.children.forEach(y=>b[y.value.outlet]=y),b}class gr extends ks{constructor(b,y){super(b),this.snapshot=y,mr(this,b)}toString(){return this.snapshot.toString()}}function Ai(f,b){const y=function rn(f,b){const B=new Yn([],{},{},"",{},ze,b,null,{});return new Ko("",new Uo(B,[]))}(0,b),D=new Ge.X([new de("",{})]),k=new Ge.X({}),R=new Ge.X({}),B=new Ge.X({}),ee=new Ge.X(""),oe=new An(D,k,B,ee,R,ze,b,y.root);return oe.snapshot=y.root,new gr(new Uo(oe,[]),y)}class An{constructor(b,y,D,k,R,B,ee,oe){this.urlSubject=b,this.paramsSubject=y,this.queryParamsSubject=D,this.fragmentSubject=k,this.dataSubject=R,this.outlet=B,this.component=ee,this._futureSnapshot=oe,this.title=this.dataSubject?.pipe((0,je.U)(Ee=>Ee[rt]))??(0,ne.of)(void 0),this.url=b,this.params=y,this.queryParams=D,this.fragment=k,this.data=R}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,je.U)(b=>Me(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,je.U)(b=>Me(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _o(f,b="emptyOnly"){const y=f.pathFromRoot;let D=0;if("always"!==b)for(D=y.length-1;D>=1;){const k=y[D],R=y[D-1];if(k.routeConfig&&""===k.routeConfig.path)D--;else{if(R.component)break;D--}}return function Lr(f){return f.reduce((b,y)=>({params:{...b.params,...y.params},data:{...b.data,...y.data},resolve:{...y.data,...b.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(D))}class Yn{get title(){return this.data?.[rt]}constructor(b,y,D,k,R,B,ee,oe,Ee){this.url=b,this.params=y,this.queryParams=D,this.fragment=k,this.data=R,this.outlet=B,this.component=ee,this.routeConfig=oe,this._resolve=Ee}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Me(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Me(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(D=>D.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ko extends ks{constructor(b,y){super(y),this.url=b,mr(this,y)}toString(){return jo(this._root)}}function mr(f,b){b.value._routerState=f,b.children.forEach(y=>mr(f,y))}function jo(f){const b=f.children.length>0?` { ${f.children.map(jo).join(", ")} } `:"";return`${f.value}${b}`}function Oo(f){if(f.snapshot){const b=f.snapshot,y=f._futureSnapshot;f.snapshot=y,Ut(b.queryParams,y.queryParams)||f.queryParamsSubject.next(y.queryParams),b.fragment!==y.fragment&&f.fragmentSubject.next(y.fragment),Ut(b.params,y.params)||f.paramsSubject.next(y.params),function Yt(f,b){if(f.length!==b.length)return!1;for(let y=0;y<f.length;++y)if(!Ut(f[y],b[y]))return!1;return!0}(b.url,y.url)||f.urlSubject.next(y.url),Ut(b.data,y.data)||f.dataSubject.next(y.data)}else f.snapshot=f._futureSnapshot,f.dataSubject.next(f._futureSnapshot.data)}function sn(f,b){const y=Ut(f.params,b.params)&&function Re(f,b){return xt(f,b)&&f.every((y,D)=>Ut(y.parameters,b[D].parameters))}(f.url,b.url);return y&&!(!f.parent!=!b.parent)&&(!f.parent||sn(f.parent,b.parent))}let Ro=(()=>{class f{constructor(){this.activated=null,this._activatedRoute=null,this.name=ze,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.parentContexts=(0,C.f3M)(vr),this.location=(0,C.f3M)(C.s_b),this.changeDetector=(0,C.f3M)(C.sBO),this.environmentInjector=(0,C.f3M)(C.lqb),this.inputBinder=(0,C.f3M)(un,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(y){if(y.name){const{firstChange:D,previousValue:k}=y.name;if(D)return;this.isTrackedInParentContexts(k)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(k)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(y){return this.parentContexts.getContext(y)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const y=this.parentContexts.getContext(this.name);y?.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C.vHH(4012,!1);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,D){this.activated=y,this._activatedRoute=D,this.location.insert(y.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,D){if(this.isActivated)throw new C.vHH(4013,!1);this._activatedRoute=y;const k=this.location,B=y.snapshot.component,ee=this.parentContexts.getOrCreateContext(this.name).children,oe=new Js(y,ee,k.injector);this.activated=k.createComponent(B,{index:k.length,injector:oe,environmentInjector:D??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275dir=C.lG2({type:f,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[C.TTD]}),f})();class Js{constructor(b,y,D){this.route=b,this.childContexts=y,this.parent=D}get(b,y){return b===An?this.route:b===vr?this.childContexts:this.parent.get(b,y)}}const un=new C.OlP("");let ar=(()=>{class f{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(y){this.unsubscribeFromRouteData(y),this.subscribeToRouteData(y)}unsubscribeFromRouteData(y){this.outletDataSubscriptions.get(y)?.unsubscribe(),this.outletDataSubscriptions.delete(y)}subscribeToRouteData(y){const{activatedRoute:D}=y,k=(0,Pe.a)([D.queryParams,D.params,D.data]).pipe((0,Oe.w)(([R,B,ee],oe)=>(ee={...R,...B,...ee},0===oe?(0,ne.of)(ee):Promise.resolve(ee)))).subscribe(R=>{if(!y.isActivated||!y.activatedComponentRef||y.activatedRoute!==D||null===D.component)return void this.unsubscribeFromRouteData(y);const B=(0,C.qFp)(D.component);if(B)for(const{templateName:ee}of B.inputs)y.activatedComponentRef.setInput(ee,R[ee]);else this.unsubscribeFromRouteData(y)});this.outletDataSubscriptions.set(y,k)}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac}),f})();function ss(f,b,y){if(y&&f.shouldReuseRoute(b.value,y.value.snapshot)){const D=y.value;D._futureSnapshot=b.value;const k=function yo(f,b,y){return b.children.map(D=>{for(const k of y.children)if(f.shouldReuseRoute(D.value,k.value.snapshot))return ss(f,D,k);return ss(f,D)})}(f,b,y);return new Uo(D,k)}{if(f.shouldAttach(b.value)){const R=f.retrieve(b.value);if(null!==R){const B=R.route;return B.value._futureSnapshot=b.value,B.children=b.children.map(ee=>ss(f,ee)),B}}const D=function Qs(f){return new An(new Ge.X(f.url),new Ge.X(f.params),new Ge.X(f.queryParams),new Ge.X(f.fragment),new Ge.X(f.data),f.outlet,f.component,f)}(b.value),k=b.children.map(R=>ss(f,R));return new Uo(D,k)}}const za="ngNavigationCancelingError";function _s(f,b){const{redirectTo:y,navigationBehaviorOptions:D}=Je(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,k=Ho(!1,0,b);return k.url=y,k.navigationBehaviorOptions=D,k}function Ho(f,b,y){const D=new Error("NavigationCancelingError: "+(f||""));return D[za]=!0,D.cancellationCode=b,y&&(D.url=y),D}function vo(f){return Ps(f)&&Je(f.url)}function Ps(f){return f&&f[za]}let pn=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275cmp=C.Xpm({type:f,selectors:[["ng-component"]],standalone:!0,features:[C.jDz],decls:1,vars:0,template:function(y,D){1&y&&C._UZ(0,"router-outlet")},dependencies:[Ro],encapsulation:2}),f})();function Dr(f){const b=f.children&&f.children.map(Dr),y=b?{...f,children:b}:{...f};return!y.component&&!y.loadComponent&&(b||y.loadChildren)&&y.outlet&&y.outlet!==ze&&(y.component=pn),y}function Xn(f){return f.outlet||ze}function Vr(f){if(!f)return null;if(f.routeConfig?._injector)return f.routeConfig._injector;for(let b=f.parent;b;b=b.parent){const y=b.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class Va{constructor(b,y,D,k,R){this.routeReuseStrategy=b,this.futureState=y,this.currState=D,this.forwardEvent=k,this.inputBindingEnabled=R}activate(b){const y=this.futureState._root,D=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,D,b),Oo(this.futureState.root),this.activateChildRoutes(y,D,b)}deactivateChildRoutes(b,y,D){const k=Yo(y);b.children.forEach(R=>{const B=R.value.outlet;this.deactivateRoutes(R,k[B],D),delete k[B]}),Object.values(k).forEach(R=>{this.deactivateRouteAndItsChildren(R,D)})}deactivateRoutes(b,y,D){const k=b.value,R=y?y.value:null;if(k===R)if(k.component){const B=D.getContext(k.outlet);B&&this.deactivateChildRoutes(b,y,B.children)}else this.deactivateChildRoutes(b,y,D);else R&&this.deactivateRouteAndItsChildren(y,D)}deactivateRouteAndItsChildren(b,y){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,y):this.deactivateRouteAndOutlet(b,y)}detachAndStoreRouteSubtree(b,y){const D=y.getContext(b.value.outlet),k=D&&b.value.component?D.children:y,R=Yo(b);for(const B of Object.keys(R))this.deactivateRouteAndItsChildren(R[B],k);if(D&&D.outlet){const B=D.outlet.detach(),ee=D.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:B,route:b,contexts:ee})}}deactivateRouteAndOutlet(b,y){const D=y.getContext(b.value.outlet),k=D&&b.value.component?D.children:y,R=Yo(b);for(const B of Object.keys(R))this.deactivateRouteAndItsChildren(R[B],k);D&&(D.outlet&&(D.outlet.deactivate(),D.children.onOutletDeactivated()),D.attachRef=null,D.route=null)}activateChildRoutes(b,y,D){const k=Yo(y);b.children.forEach(R=>{this.activateRoutes(R,k[R.value.outlet],D),this.forwardEvent(new cn(R.value.snapshot))}),b.children.length&&this.forwardEvent(new Ea(b.value.snapshot))}activateRoutes(b,y,D){const k=b.value,R=y?y.value:null;if(Oo(k),k===R)if(k.component){const B=D.getOrCreateContext(k.outlet);this.activateChildRoutes(b,y,B.children)}else this.activateChildRoutes(b,y,D);else if(k.component){const B=D.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const ee=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),B.children.onOutletReAttached(ee.contexts),B.attachRef=ee.componentRef,B.route=ee.route.value,B.outlet&&B.outlet.attach(ee.componentRef,ee.route.value),Oo(ee.route.value),this.activateChildRoutes(b,null,B.children)}else{const ee=Vr(k.snapshot);B.attachRef=null,B.route=k,B.injector=ee,B.outlet&&B.outlet.activateWith(k,B.injector),this.activateChildRoutes(b,null,B.children)}}else this.activateChildRoutes(b,null,D)}}class nl{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class Rs{constructor(b,y){this.component=b,this.route=y}}function bl(f,b,y){const D=f._root;return ua(D,b?b._root:null,y,[D.value])}function Fs(f,b){const y=Symbol(),D=b.get(f,y);return D===y?"function"!=typeof f||(0,C.Z0I)(f)?b.get(f):f:D}function ua(f,b,y,D,k={canDeactivateChecks:[],canActivateChecks:[]}){const R=Yo(b);return f.children.forEach(B=>{(function Hl(f,b,y,D,k={canDeactivateChecks:[],canActivateChecks:[]}){const R=f.value,B=b?b.value:null,ee=y?y.getContext(f.value.outlet):null;if(B&&R.routeConfig===B.routeConfig){const oe=function rl(f,b,y){if("function"==typeof y)return y(f,b);switch(y){case"pathParamsChange":return!xt(f.url,b.url);case"pathParamsOrQueryParamsChange":return!xt(f.url,b.url)||!Ut(f.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sn(f,b)||!Ut(f.queryParams,b.queryParams);default:return!sn(f,b)}}(B,R,R.routeConfig.runGuardsAndResolvers);oe?k.canActivateChecks.push(new nl(D)):(R.data=B.data,R._resolvedData=B._resolvedData),ua(f,b,R.component?ee?ee.children:null:y,D,k),oe&&ee&&ee.outlet&&ee.outlet.isActivated&&k.canDeactivateChecks.push(new Rs(ee.outlet.component,B))}else B&&Ma(b,ee,k),k.canActivateChecks.push(new nl(D)),ua(f,null,R.component?ee?ee.children:null:y,D,k)})(B,R[B.value.outlet],y,D.concat([B.value]),k),delete R[B.value.outlet]}),Object.entries(R).forEach(([B,ee])=>Ma(ee,y.getContext(B),k)),k}function Ma(f,b,y){const D=Yo(f),k=f.value;Object.entries(D).forEach(([R,B])=>{Ma(B,k.component?b?b.children.getContext(R):null:b,y)}),y.canDeactivateChecks.push(new Rs(k.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,k))}function Bi(f){return"function"==typeof f}function we(f){return f instanceof qe.K||"EmptyError"===f?.name}const Ht=Symbol("INITIAL_VALUE");function Di(){return(0,Oe.w)(f=>(0,Pe.a)(f.map(b=>b.pipe((0,Ft.q)(1),(0,Pt.O)(Ht)))).pipe((0,je.U)(b=>{for(const y of b)if(!0!==y){if(y===Ht)return Ht;if(!1===y||y instanceof ke)return y}return!0}),(0,Nt.h)(b=>b!==Ht),(0,Ft.q)(1)))}function Kc(f){return(0,Le.z)((0,qi.b)(b=>{if(Je(b))throw _s(0,b)}),(0,je.U)(b=>!0===b))}class Fo{constructor(b){this.segmentGroup=b||null}}class xr{constructor(b){this.urlTree=b}}function Pn(f){return(0,et._)(new Fo(f))}function wr(f){return(0,et._)(new xr(f))}class Sa{constructor(b,y){this.urlSerializer=b,this.urlTree=y}noMatchError(b){return new C.vHH(4002,!1)}lineralizeSegments(b,y){let D=[],k=y.root;for(;;){if(D=D.concat(k.segments),0===k.numberOfChildren)return(0,ne.of)(D);if(k.numberOfChildren>1||!k.children[ze])return(0,et._)(new C.vHH(4e3,!1));k=k.children[ze]}}applyRedirectCommands(b,y,D){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),b,D)}applyRedirectCreateUrlTree(b,y,D,k){const R=this.createSegmentGroup(b,y.root,D,k);return new ke(R,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(b,y){const D={};return Object.entries(b).forEach(([k,R])=>{if("string"==typeof R&&R.startsWith(":")){const ee=R.substring(1);D[k]=y[ee]}else D[k]=R}),D}createSegmentGroup(b,y,D,k){const R=this.createSegments(b,y.segments,D,k);let B={};return Object.entries(y.children).forEach(([ee,oe])=>{B[ee]=this.createSegmentGroup(b,oe,D,k)}),new he(R,B)}createSegments(b,y,D,k){return y.map(R=>R.path.startsWith(":")?this.findPosParam(b,R,k):this.findOrReturn(R,D))}findPosParam(b,y,D){const k=D[y.path.substring(1)];if(!k)throw new C.vHH(4001,!1);return k}findOrReturn(b,y){let D=0;for(const k of y){if(k.path===b.path)return y.splice(D),k;D++}return b}}const Cr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zl(f,b,y,D,k){const R=Bs(f,b,y);return R.matched?(D=function as(f,b){return f.providers&&!f._injector&&(f._injector=(0,C.MMx)(f.providers,b,`Route: ${f.path}`)),f._injector??b}(b,D),function Ha(f,b,y,D){const k=b.canMatch;if(!k||0===k.length)return(0,ne.of)(!0);const R=k.map(B=>{const ee=Fs(B,f);return Dt(function Y(f){return f&&Bi(f.canMatch)}(ee)?ee.canMatch(b,y):f.runInContext(()=>ee(b,y)))});return(0,ne.of)(R).pipe(Di(),Kc())}(D,b,y).pipe((0,je.U)(B=>!0===B?R:{...Cr}))):(0,ne.of)(R)}function Bs(f,b,y){if(""===b.path)return"full"===b.pathMatch&&(f.hasChildren()||y.length>0)?{...Cr}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const k=(b.matcher||ut)(y,f,b);if(!k)return{...Cr};const R={};Object.entries(k.posParams??{}).forEach(([ee,oe])=>{R[ee]=oe.path});const B=k.consumed.length>0?{...R,...k.consumed[k.consumed.length-1].parameters}:R;return{matched:!0,consumedSegments:k.consumed,remainingSegments:y.slice(k.consumed.length),parameters:B,positionalParamSegments:k.posParams??{}}}function $a(f,b,y,D){return y.length>0&&function jr(f,b,y){return y.some(D=>cs(f,b,D)&&Xn(D)!==ze)}(f,y,D)?{segmentGroup:new he(b,ls(D,new he(y,f.children))),slicedSegments:[]}:0===y.length&&function Wl(f,b,y){return y.some(D=>cs(f,b,D))}(f,y,D)?{segmentGroup:new he(f.segments,Sr(f,0,y,D,f.children)),slicedSegments:y}:{segmentGroup:new he(f.segments,f.children),slicedSegments:y}}function Sr(f,b,y,D,k){const R={};for(const B of D)if(cs(f,y,B)&&!k[Xn(B)]){const ee=new he([],{});R[Xn(B)]=ee}return{...k,...R}}function ls(f,b){const y={};y[ze]=b;for(const D of f)if(""===D.path&&Xn(D)!==ze){const k=new he([],{});y[Xn(D)]=k}return y}function cs(f,b,y){return(!(f.hasChildren()||b.length>0)||"full"!==y.pathMatch)&&""===y.path}class Hr{constructor(b,y,D,k,R,B,ee){this.injector=b,this.configLoader=y,this.rootComponentType=D,this.config=k,this.urlTree=R,this.paramsInheritanceStrategy=B,this.urlSerializer=ee,this.allowRedirects=!0,this.applyRedirects=new Sa(this.urlSerializer,this.urlTree)}noMatchError(b){return new C.vHH(4002,!1)}recognize(){const b=$a(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,ze).pipe((0,Dn.K)(y=>{if(y instanceof xr)return this.allowRedirects=!1,this.urlTree=y.urlTree,this.match(y.urlTree);throw y instanceof Fo?this.noMatchError(y):y}),(0,je.U)(y=>{const D=new Yn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ze,this.rootComponentType,null,{}),k=new Uo(D,y),R=new Ko("",k),B=function Tt(f,b,y=null,D=null){return Ie(Fe(f),b,y,D)}(D,[],this.urlTree.queryParams,this.urlTree.fragment);return B.queryParams=this.urlTree.queryParams,R.url=this.urlSerializer.serialize(B),this.inheritParamsAndData(R._root),{state:R,tree:B}}))}match(b){return this.processSegmentGroup(this.injector,this.config,b.root,ze).pipe((0,Dn.K)(D=>{throw D instanceof Fo?this.noMatchError(D):D}))}inheritParamsAndData(b){const y=b.value,D=_o(y,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),b.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(b,y,D,k){return 0===D.segments.length&&D.hasChildren()?this.processChildren(b,y,D):this.processSegment(b,y,D,D.segments,k,!0)}processChildren(b,y,D){const k=[];for(const R of Object.keys(D.children))"primary"===R?k.unshift(R):k.push(R);return(0,He.D)(k).pipe((0,Ri.b)(R=>{const B=D.children[R],ee=function bo(f,b){const y=f.filter(D=>Xn(D)===b);return y.push(...f.filter(D=>Xn(D)!==b)),y}(y,R);return this.processSegmentGroup(b,ee,B,R)}),function _n(f,b){return(0,bt.e)(function Hn(f,b,y,D,k){return(R,B)=>{let ee=y,oe=b,Ee=0;R.subscribe((0,jt.x)(B,Ce=>{const nt=Ee++;oe=ee?f(oe,Ce,nt):(ee=!0,Ce),D&&B.next(oe)},k&&(()=>{ee&&B.next(oe),B.complete()})))}}(f,b,arguments.length>=2,!0))}((R,B)=>(R.push(...B),R)),(0,Vn.d)(null),function Rt(f,b){const y=arguments.length>=2;return D=>D.pipe(f?(0,Nt.h)((k,R)=>f(k,R,D)):ft.y,Sn(1),y?(0,Vn.d)(b):(0,Et.T)(()=>new qe.K))}(),(0,fi.z)(R=>{if(null===R)return Pn(D);const B=$o(R);return function ha(f){f.sort((b,y)=>b.value.outlet===ze?-1:y.value.outlet===ze?1:b.value.outlet.localeCompare(y.value.outlet))}(B),(0,ne.of)(B)}))}processSegment(b,y,D,k,R,B){return(0,He.D)(y).pipe((0,Ri.b)(ee=>this.processSegmentAgainstRoute(ee._injector??b,y,ee,D,k,R,B).pipe((0,Dn.K)(oe=>{if(oe instanceof Fo)return(0,ne.of)(null);throw oe}))),(0,vi.P)(ee=>!!ee),(0,Dn.K)(ee=>{if(we(ee))return function wl(f,b,y){return 0===b.length&&!f.children[y]}(D,k,R)?(0,ne.of)([]):Pn(D);throw ee}))}processSegmentAgainstRoute(b,y,D,k,R,B,ee){return function Or(f,b,y,D){return!!(Xn(f)===D||D!==ze&&cs(b,y,f))&&("**"===f.path||Bs(b,f,y).matched)}(D,k,R,B)?void 0===D.redirectTo?this.matchSegmentAgainstRoute(b,k,D,R,B,ee):ee&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,k,y,D,R,B):Pn(k):Pn(k)}expandSegmentAgainstRouteUsingRedirect(b,y,D,k,R,B){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,D,k,B):this.expandRegularSegmentAgainstRouteUsingRedirect(b,y,D,k,R,B)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,y,D,k){const R=this.applyRedirects.applyRedirectCommands([],D.redirectTo,{});return D.redirectTo.startsWith("/")?wr(R):this.applyRedirects.lineralizeSegments(D,R).pipe((0,fi.z)(B=>{const ee=new he(B,{});return this.processSegment(b,y,ee,B,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,y,D,k,R,B){const{matched:ee,consumedSegments:oe,remainingSegments:Ee,positionalParamSegments:Ce}=Bs(y,k,R);if(!ee)return Pn(y);const nt=this.applyRedirects.applyRedirectCommands(oe,k.redirectTo,Ce);return k.redirectTo.startsWith("/")?wr(nt):this.applyRedirects.lineralizeSegments(k,nt).pipe((0,fi.z)(yt=>this.processSegment(b,D,y,yt.concat(Ee),B,!1)))}matchSegmentAgainstRoute(b,y,D,k,R,B){let ee;if("**"===D.path){const oe=k.length>0?ot(k).parameters:{},Ee=new Yn(k,oe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oo(D),Xn(D),D.component??D._loadedComponent??null,D,El(D));ee=(0,ne.of)({snapshot:Ee,consumedSegments:[],remainingSegments:[]}),y.children={}}else ee=Zl(y,D,k,b).pipe((0,je.U)(({matched:oe,consumedSegments:Ee,remainingSegments:Ce,parameters:nt})=>oe?{snapshot:new Yn(Ee,nt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oo(D),Xn(D),D.component??D._loadedComponent??null,D,El(D)),consumedSegments:Ee,remainingSegments:Ce}:null));return ee.pipe((0,Oe.w)(oe=>null===oe?Pn(y):this.getChildConfig(b=D._injector??b,D,k).pipe((0,Oe.w)(({routes:Ee})=>{const Ce=D._loadedInjector??b,{snapshot:nt,consumedSegments:yt,remainingSegments:$e}=oe,{segmentGroup:gt,slicedSegments:kt}=$a(y,yt,$e,Ee);if(0===kt.length&&gt.hasChildren())return this.processChildren(Ce,Ee,gt).pipe((0,je.U)(Zt=>null===Zt?null:[new Uo(nt,Zt)]));if(0===Ee.length&&0===kt.length)return(0,ne.of)([new Uo(nt,[])]);const Lt=Xn(D)===R;return this.processSegment(Ce,Ee,gt,kt,Lt?ze:R,!0).pipe((0,je.U)(Zt=>[new Uo(nt,Zt)]))}))))}getChildConfig(b,y,D){return y.children?(0,ne.of)({routes:y.children,injector:b}):y.loadChildren?void 0!==y._loadedRoutes?(0,ne.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function Ns(f,b,y,D){const k=b.canLoad;if(void 0===k||0===k.length)return(0,ne.of)(!0);const R=k.map(B=>{const ee=Fs(B,f);return Dt(function kn(f){return f&&Bi(f.canLoad)}(ee)?ee.canLoad(b,y):f.runInContext(()=>ee(b,y)))});return(0,ne.of)(R).pipe(Di(),Kc())}(b,y,D).pipe((0,fi.z)(k=>k?this.configLoader.loadChildren(b,y).pipe((0,qi.b)(R=>{y._loadedRoutes=R.routes,y._loadedInjector=R.injector})):function zs(f){return(0,et._)(Ho(!1,3))}())):(0,ne.of)({routes:[],injector:b})}}function $r(f){const b=f.value.routeConfig;return b&&""===b.path}function $o(f){const b=[],y=new Set;for(const D of f){if(!$r(D)){b.push(D);continue}const k=b.find(R=>D.value.routeConfig===R.value.routeConfig);void 0!==k?(k.children.push(...D.children),y.add(k)):b.push(D)}for(const D of y){const k=$o(D.children);b.push(new Uo(D.value,k))}return b.filter(D=>!y.has(D))}function oo(f){return f.data||{}}function El(f){return f.resolve||{}}function Us(f){return"string"==typeof f.title||null===f.title}function _r(f){return(0,Oe.w)(b=>{const y=f(b);return y?(0,He.D)(y).pipe((0,je.U)(()=>b)):(0,ne.of)(b)})}const mi=new C.OlP("ROUTES");let F=(()=>{class f{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,C.f3M)(C.Sil)}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,ne.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const D=Dt(y.loadComponent()).pipe((0,je.U)($),(0,qi.b)(R=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=R}),(0,ei.x)(()=>{this.componentLoaders.delete(y)})),k=new Ti(D,()=>new qt.x).pipe(ni());return this.componentLoaders.set(y,k),k}loadChildren(y,D){if(this.childrenLoaders.get(D))return this.childrenLoaders.get(D);if(D._loadedRoutes)return(0,ne.of)({routes:D._loadedRoutes,injector:D._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(D);const R=this.loadModuleFactoryOrRoutes(D.loadChildren).pipe((0,je.U)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(D);let oe,Ee;return Array.isArray(ee)?Ee=ee:(oe=ee.create(y).injector,Ee=oe.get(mi,[],C.XFs.Self|C.XFs.Optional).flat()),{routes:Ee.map(Dr),injector:oe}}),(0,ei.x)(()=>{this.childrenLoaders.delete(D)})),B=new Ti(R,()=>new qt.x).pipe(ni());return this.childrenLoaders.set(D,B),B}loadModuleFactoryOrRoutes(y){return Dt(y()).pipe((0,je.U)($),(0,fi.z)(D=>D instanceof C.YKP||Array.isArray(D)?(0,ne.of)(D):(0,He.D)(this.compiler.compileModuleAsync(D))))}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();function $(f){return function Q(f){return f&&"object"==typeof f&&"default"in f}(f)?f.default:f}let fe=(()=>{class f{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new qt.x,this.configLoader=(0,C.f3M)(F),this.environmentInjector=(0,C.f3M)(C.lqb),this.urlSerializer=(0,C.f3M)(Ot),this.rootContexts=(0,C.f3M)(vr),this.inputBindingEnabled=null!==(0,C.f3M)(un,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ne.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=k=>this.events.next(new vl(k)),this.configLoader.onLoadStartListener=k=>this.events.next(new wa(k))}complete(){this.transitions?.complete()}handleNavigationRequest(y){const D=++this.navigationId;this.transitions?.next({...this.transitions.value,...y,id:D})}setupNavigations(y){return this.transitions=new Ge.X({id:0,currentUrlTree:y.currentUrlTree,currentRawUrl:y.currentUrlTree,extractedUrl:y.urlHandlingStrategy.extract(y.currentUrlTree),urlAfterRedirects:y.urlHandlingStrategy.extract(y.currentUrlTree),rawUrl:y.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qn,restoredState:null,currentSnapshot:y.routerState.snapshot,targetSnapshot:null,currentRouterState:y.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Nt.h)(D=>0!==D.id),(0,je.U)(D=>({...D,extractedUrl:y.urlHandlingStrategy.extract(D.rawUrl)})),(0,Oe.w)(D=>{let k=!1,R=!1;return(0,ne.of)(D).pipe((0,qi.b)(B=>{this.currentNavigation={id:B.id,initialUrl:B.rawUrl,extractedUrl:B.extractedUrl,trigger:B.source,extras:B.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Oe.w)(B=>{const ee=y.browserUrlTree.toString(),oe=!y.navigated||B.extractedUrl.toString()!==ee||ee!==y.currentUrlTree.toString();if(!oe&&"reload"!==(B.extras.onSameUrlNavigation??y.onSameUrlNavigation)){const Ce="";return this.events.next(new mn(B.id,y.serializeUrl(D.rawUrl),Ce,0)),y.rawUrlTree=B.rawUrl,B.resolve(null),Xe.E}if(y.urlHandlingStrategy.shouldProcessUrl(B.rawUrl))return Ye(B.source)&&(y.browserUrlTree=B.extractedUrl),(0,ne.of)(B).pipe((0,Oe.w)(Ce=>{const nt=this.transitions?.getValue();return this.events.next(new Do(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),Ce.source,Ce.restoredState)),nt!==this.transitions?.getValue()?Xe.E:Promise.resolve(Ce)}),function Ga(f,b,y,D,k,R){return(0,fi.z)(B=>function ys(f,b,y,D,k,R,B="emptyOnly"){return new Hr(f,b,y,D,k,B,R).recognize()}(f,b,y,D,B.extractedUrl,k,R).pipe((0,je.U)(({state:ee,tree:oe})=>({...B,targetSnapshot:ee,urlAfterRedirects:oe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,y.config,this.urlSerializer,y.paramsInheritanceStrategy),(0,qi.b)(Ce=>{if(D.targetSnapshot=Ce.targetSnapshot,D.urlAfterRedirects=Ce.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Ce.urlAfterRedirects},"eager"===y.urlUpdateStrategy){if(!Ce.extras.skipLocationChange){const yt=y.urlHandlingStrategy.merge(Ce.urlAfterRedirects,Ce.rawUrl);y.setBrowserUrl(yt,Ce)}y.browserUrlTree=Ce.urlAfterRedirects}const nt=new Po(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),this.urlSerializer.serialize(Ce.urlAfterRedirects),Ce.targetSnapshot);this.events.next(nt)}));if(oe&&y.urlHandlingStrategy.shouldProcessUrl(y.rawUrlTree)){const{id:Ce,extractedUrl:nt,source:yt,restoredState:$e,extras:gt}=B,kt=new Do(Ce,this.urlSerializer.serialize(nt),yt,$e);this.events.next(kt);const Lt=Ai(0,this.rootComponentType).snapshot;return D={...B,targetSnapshot:Lt,urlAfterRedirects:nt,extras:{...gt,skipLocationChange:!1,replaceUrl:!1}},(0,ne.of)(D)}{const Ce="";return this.events.next(new mn(B.id,y.serializeUrl(D.extractedUrl),Ce,1)),y.rawUrlTree=B.rawUrl,B.resolve(null),Xe.E}}),(0,qi.b)(B=>{const ee=new os(B.id,this.urlSerializer.serialize(B.extractedUrl),this.urlSerializer.serialize(B.urlAfterRedirects),B.targetSnapshot);this.events.next(ee)}),(0,je.U)(B=>D={...B,guards:bl(B.targetSnapshot,B.currentSnapshot,this.rootContexts)}),function Yr(f,b){return(0,fi.z)(y=>{const{targetSnapshot:D,currentSnapshot:k,guards:{canActivateChecks:R,canDeactivateChecks:B}}=y;return 0===B.length&&0===R.length?(0,ne.of)({...y,guardsResult:!0}):function uo(f,b,y,D){return(0,He.D)(f).pipe((0,fi.z)(k=>function ol(f,b,y,D,k){const R=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!R||0===R.length)return(0,ne.of)(!0);const B=R.map(ee=>{const oe=Vr(b)??k,Ee=Fs(ee,oe);return Dt(function lr(f){return f&&Bi(f.canDeactivate)}(Ee)?Ee.canDeactivate(f,b,y,D):oe.runInContext(()=>Ee(f,b,y,D))).pipe((0,vi.P)())});return(0,ne.of)(B).pipe(Di())}(k.component,k.route,y,b,D)),(0,vi.P)(k=>!0!==k,!0))}(B,D,k,f).pipe((0,fi.z)(ee=>ee&&function $l(f){return"boolean"==typeof f}(ee)?function Ls(f,b,y,D){return(0,He.D)(b).pipe((0,Ri.b)(k=>(0,Ue.z)(function ja(f,b){return null!==f&&b&&b(new Ca(f)),(0,ne.of)(!0)}(k.route.parent,D),function Da(f,b){return null!==f&&b&&b(new Na(f)),(0,ne.of)(!0)}(k.route,D),function Ur(f,b,y){const D=b[b.length-1],R=b.slice(0,b.length-1).reverse().map(B=>function Ac(f){const b=f.routeConfig?f.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:f,guards:b}:null}(B)).filter(B=>null!==B).map(B=>(0,it.P)(()=>{const ee=B.guards.map(oe=>{const Ee=Vr(B.node)??y,Ce=Fs(oe,Ee);return Dt(function pr(f){return f&&Bi(f.canActivateChild)}(Ce)?Ce.canActivateChild(D,f):Ee.runInContext(()=>Ce(D,f))).pipe((0,vi.P)())});return(0,ne.of)(ee).pipe(Di())}));return(0,ne.of)(R).pipe(Di())}(f,k.path,y),function Gl(f,b,y){const D=b.routeConfig?b.routeConfig.canActivate:null;if(!D||0===D.length)return(0,ne.of)(!0);const k=D.map(R=>(0,it.P)(()=>{const B=Vr(b)??y,ee=Fs(R,B);return Dt(function Ua(f){return f&&Bi(f.canActivate)}(ee)?ee.canActivate(b,f):B.runInContext(()=>ee(b,f))).pipe((0,vi.P)())}));return(0,ne.of)(k).pipe(Di())}(f,k.route,y))),(0,vi.P)(k=>!0!==k,!0))}(D,R,f,b):(0,ne.of)(ee)),(0,je.U)(ee=>({...y,guardsResult:ee})))})}(this.environmentInjector,B=>this.events.next(B)),(0,qi.b)(B=>{if(D.guardsResult=B.guardsResult,Je(B.guardsResult))throw _s(0,B.guardsResult);const ee=new xa(B.id,this.urlSerializer.serialize(B.extractedUrl),this.urlSerializer.serialize(B.urlAfterRedirects),B.targetSnapshot,!!B.guardsResult);this.events.next(ee)}),(0,Nt.h)(B=>!!B.guardsResult||(y.restoreHistory(B),this.cancelNavigationTransition(B,"",3),!1)),_r(B=>{if(B.guards.canActivateChecks.length)return(0,ne.of)(B).pipe((0,qi.b)(ee=>{const oe=new La(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot);this.events.next(oe)}),(0,Oe.w)(ee=>{let oe=!1;return(0,ne.of)(ee).pipe(function ql(f,b){return(0,fi.z)(y=>{const{targetSnapshot:D,guards:{canActivateChecks:k}}=y;if(!k.length)return(0,ne.of)(y);let R=0;return(0,He.D)(k).pipe((0,Ri.b)(B=>function Vs(f,b,y,D){const k=f.routeConfig,R=f._resolve;return void 0!==k?.title&&!Us(k)&&(R[rt]=k.title),function zi(f,b,y,D){const k=function Xo(f){return[...Object.keys(f),...Object.getOwnPropertySymbols(f)]}(f);if(0===k.length)return(0,ne.of)({});const R={};return(0,He.D)(k).pipe((0,fi.z)(B=>function Ml(f,b,y,D){const k=Vr(b)??D,R=Fs(f,k);return Dt(R.resolve?R.resolve(b,y):k.runInContext(()=>R(b,y)))}(f[B],b,y,D).pipe((0,vi.P)(),(0,qi.b)(ee=>{R[B]=ee}))),Sn(1),(0,Vt.h)(R),(0,Dn.K)(B=>we(B)?Xe.E:(0,et._)(B)))}(R,f,b,D).pipe((0,je.U)(B=>(f._resolvedData=B,f.data=_o(f,y).resolve,k&&Us(k)&&(f.data[rt]=k.title),null)))}(B.route,D,f,b)),(0,qi.b)(()=>R++),Sn(1),(0,fi.z)(B=>R===k.length?(0,ne.of)(y):Xe.E))})}(y.paramsInheritanceStrategy,this.environmentInjector),(0,qi.b)({next:()=>oe=!0,complete:()=>{oe||(y.restoreHistory(ee),this.cancelNavigationTransition(ee,"",2))}}))}),(0,qi.b)(ee=>{const oe=new Ic(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot);this.events.next(oe)}))}),_r(B=>{const ee=oe=>{const Ee=[];oe.routeConfig?.loadComponent&&!oe.routeConfig._loadedComponent&&Ee.push(this.configLoader.loadComponent(oe.routeConfig).pipe((0,qi.b)(Ce=>{oe.component=Ce}),(0,je.U)(()=>{})));for(const Ce of oe.children)Ee.push(...ee(Ce));return Ee};return(0,Pe.a)(ee(B.targetSnapshot.root)).pipe((0,Vn.d)(),(0,Ft.q)(1))}),_r(()=>this.afterPreactivation()),(0,je.U)(B=>{const ee=function gs(f,b,y){const D=ss(f,b._root,y?y._root:void 0);return new gr(D,b)}(y.routeReuseStrategy,B.targetSnapshot,B.currentRouterState);return D={...B,targetRouterState:ee}}),(0,qi.b)(B=>{y.currentUrlTree=B.urlAfterRedirects,y.rawUrlTree=y.urlHandlingStrategy.merge(B.urlAfterRedirects,B.rawUrl),y.routerState=B.targetRouterState,"deferred"===y.urlUpdateStrategy&&(B.extras.skipLocationChange||y.setBrowserUrl(y.rawUrlTree,B),y.browserUrlTree=B.urlAfterRedirects)}),((f,b,y,D)=>(0,je.U)(k=>(new Va(b,k.targetRouterState,k.currentRouterState,y,D).activate(f),k)))(this.rootContexts,y.routeReuseStrategy,B=>this.events.next(B),this.inputBindingEnabled),(0,Ft.q)(1),(0,qi.b)({next:B=>{k=!0,this.lastSuccessfulNavigation=this.currentNavigation,y.navigated=!0,this.events.next(new io(B.id,this.urlSerializer.serialize(B.extractedUrl),this.urlSerializer.serialize(y.currentUrlTree))),y.titleStrategy?.updateTitle(B.targetRouterState.snapshot),B.resolve(!0)},complete:()=>{k=!0}}),(0,ei.x)(()=>{k||R||this.cancelNavigationTransition(D,"",1),this.currentNavigation?.id===D.id&&(this.currentNavigation=null)}),(0,Dn.K)(B=>{if(R=!0,Ps(B)){vo(B)||(y.navigated=!0,y.restoreHistory(D,!0));const ee=new no(D.id,this.urlSerializer.serialize(D.extractedUrl),B.message,B.cancellationCode);if(this.events.next(ee),vo(B)){const oe=y.urlHandlingStrategy.merge(B.url,y.rawUrlTree),Ee={skipLocationChange:D.extras.skipLocationChange,replaceUrl:"eager"===y.urlUpdateStrategy||Ye(D.source)};y.scheduleNavigation(oe,Qn,null,Ee,{resolve:D.resolve,reject:D.reject,promise:D.promise})}else D.resolve(!1)}else{y.restoreHistory(D,!0);const ee=new ro(D.id,this.urlSerializer.serialize(D.extractedUrl),B,D.targetSnapshot??void 0);this.events.next(ee);try{D.resolve(y.errorHandler(B))}catch(oe){D.reject(oe)}}return Xe.E}))}))}cancelNavigationTransition(y,D,k){const R=new no(y.id,this.urlSerializer.serialize(y.extractedUrl),D,k);this.events.next(R),y.resolve(!1)}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();function Ye(f){return f!==Qn}let It=(()=>{class f{buildTitle(y){let D,k=y.root;for(;void 0!==k;)D=this.getResolvedTitleForRoute(k)??D,k=k.children.find(R=>R.outlet===ze);return D}getResolvedTitleForRoute(y){return y.data[rt]}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:function(){return(0,C.f3M)(Wt)},providedIn:"root"}),f})(),Wt=(()=>{class f extends It{constructor(y){super(),this.title=y}updateTitle(y){const D=this.buildTitle(y);void 0!==D&&this.title.setTitle(D)}}return f.\u0275fac=function(y){return new(y||f)(C.LFG(ai.Dx))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})(),Wi=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:function(){return(0,C.f3M)(Ln)},providedIn:"root"}),f})();class er{shouldDetach(b){return!1}store(b,y){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,y){return b.routeConfig===y.routeConfig}}let Ln=(()=>{class f extends er{}return f.\u0275fac=function(){let b;return function(D){return(b||(b=C.n5z(f)))(D||f)}}(),f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();const Nn=new C.OlP("",{providedIn:"root",factory:()=>({})});let En=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:function(){return(0,C.f3M)(Zn)},providedIn:"root"}),f})(),Zn=(()=>{class f{shouldProcessUrl(y){return!0}extract(y){return y}merge(y,D){return y}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();var On=function(f){return f[f.COMPLETE=0]="COMPLETE",f[f.FAILED=1]="FAILED",f[f.REDIRECTING=2]="REDIRECTING",f}(On||{});function Gr(f,b){f.events.pipe((0,Nt.h)(y=>y instanceof io||y instanceof no||y instanceof ro||y instanceof mn),(0,je.U)(y=>y instanceof io||y instanceof mn?On.COMPLETE:y instanceof no&&(0===y.code||1===y.code)?On.REDIRECTING:On.FAILED),(0,Nt.h)(y=>y!==On.REDIRECTING),(0,Ft.q)(1)).subscribe(()=>{b()})}function js(f){throw f}function Yi(f,b,y){return b.parse("/")}const vs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let tr=(()=>{class f{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,C.f3M)(C.c2e),this.isNgZoneEnabled=!1,this.options=(0,C.f3M)(Nn,{optional:!0})||{},this.pendingTasks=(0,C.f3M)(C.HDt),this.errorHandler=this.options.errorHandler||js,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Yi,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,C.f3M)(En),this.routeReuseStrategy=(0,C.f3M)(Wi),this.titleStrategy=(0,C.f3M)(It),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,C.f3M)(mi,{optional:!0})?.flat()??[],this.navigationTransitions=(0,C.f3M)(fe),this.urlSerializer=(0,C.f3M)(Ot),this.location=(0,C.f3M)(Ne.Ye),this.componentInputBindingEnabled=!!(0,C.f3M)(un,{optional:!0}),this.isNgZoneEnabled=(0,C.f3M)(C.R0b)instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ke,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ai(0,null),this.navigationTransitions.setupNavigations(this).subscribe(y=>{this.lastSuccessfulId=y.id,this.currentPageId=this.browserPageId??0},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}resetRootComponentType(y){this.routerState.root.component=y,this.navigationTransitions.rootComponentType=y}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const y=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Qn,y)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const D="popstate"===y.type?"popstate":"hashchange";"popstate"===D&&setTimeout(()=>{this.navigateToSyncWithBrowser(y.url,D,y.state)},0)}))}navigateToSyncWithBrowser(y,D,k){const R={replaceUrl:!0},B=k?.navigationId?k:null;if(k){const oe={...k};delete oe.navigationId,delete oe.\u0275routerPageId,0!==Object.keys(oe).length&&(R.state=oe)}const ee=this.parseUrl(y);this.scheduleNavigation(ee,D,B,R)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(y){this.config=y.map(Dr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,D={}){const{relativeTo:k,queryParams:R,fragment:B,queryParamsHandling:ee,preserveFragment:oe}=D,Ee=oe?this.currentUrlTree.fragment:B;let nt,Ce=null;switch(ee){case"merge":Ce={...this.currentUrlTree.queryParams,...R};break;case"preserve":Ce=this.currentUrlTree.queryParams;break;default:Ce=R||null}null!==Ce&&(Ce=this.removeEmptyProps(Ce));try{nt=Fe(k?k.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof y[0]||!y[0].startsWith("/"))&&(y=[]),nt=this.currentUrlTree.root}return Ie(nt,y,Ce,Ee??null)}navigateByUrl(y,D={skipLocationChange:!1}){const k=Je(y)?y:this.parseUrl(y),R=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation(R,Qn,null,D)}navigate(y,D={skipLocationChange:!1}){return function ir(f){for(let b=0;b<f.length;b++)if(null==f[b])throw new C.vHH(4008,!1)}(y),this.navigateByUrl(this.createUrlTree(y,D),D)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let D;try{D=this.urlSerializer.parse(y)}catch(k){D=this.malformedUriErrorHandler(k,this.urlSerializer,y)}return D}isActive(y,D){let k;if(k=!0===D?{...vs}:!1===D?{...bs}:D,Je(y))return Zi(this.currentUrlTree,y,k);const R=this.parseUrl(y);return Zi(this.currentUrlTree,R,k)}removeEmptyProps(y){return Object.keys(y).reduce((D,k)=>{const R=y[k];return null!=R&&(D[k]=R),D},{})}scheduleNavigation(y,D,k,R,B){if(this.disposed)return Promise.resolve(!1);let ee,oe,Ee;B?(ee=B.resolve,oe=B.reject,Ee=B.promise):Ee=new Promise((nt,yt)=>{ee=nt,oe=yt});const Ce=this.pendingTasks.add();return Gr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Ce))}),this.navigationTransitions.handleNavigationRequest({source:D,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:y,extras:R,resolve:ee,reject:oe,promise:Ee,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ee.catch(nt=>Promise.reject(nt))}setBrowserUrl(y,D){const k=this.urlSerializer.serialize(y);if(this.location.isCurrentPathEqualTo(k)||D.extras.replaceUrl){const B={...D.extras.state,...this.generateNgRouterState(D.id,this.browserPageId)};this.location.replaceState(k,"",B)}else{const R={...D.extras.state,...this.generateNgRouterState(D.id,(this.browserPageId??0)+1)};this.location.go(k,"",R)}}restoreHistory(y,D=!1){if("computed"===this.canceledNavigationResolution){const R=this.currentPageId-(this.browserPageId??this.currentPageId);0!==R?this.location.historyGo(R):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===R&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(D&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(y,D){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:D}:{navigationId:y}}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})(),ds=(()=>{class f{constructor(y,D,k,R,B,ee){this.router=y,this.route=D,this.tabIndexAttribute=k,this.renderer=R,this.el=B,this.locationStrategy=ee,this.href=null,this.commands=null,this.onChanges=new qt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const oe=B.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===oe||"area"===oe,this.isAnchorElement?this.subscription=y.events.subscribe(Ee=>{Ee instanceof io&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(y){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",y)}ngOnChanges(y){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(y,D,k,R,B){return!!(null===this.urlTree||this.isAnchorElement&&(0!==y||D||k||R||B||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const y=null===this.href?null:(0,C.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",y)}applyAttributeValue(y,D){const k=this.renderer,R=this.el.nativeElement;null!==D?k.setAttribute(R,y,D):k.removeAttribute(R,y)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return f.\u0275fac=function(y){return new(y||f)(C.Y36(tr),C.Y36(An),C.$8M("tabindex"),C.Y36(C.Qsj),C.Y36(C.SBq),C.Y36(Ne.S$))},f.\u0275dir=C.lG2({type:f,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(y,D){1&y&&C.NdJ("click",function(R){return D.onClick(R.button,R.ctrlKey,R.shiftKey,R.altKey,R.metaKey)}),2&y&&C.uIk("target",D.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",C.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",C.VuI],replaceUrl:["replaceUrl","replaceUrl",C.VuI],routerLink:"routerLink"},standalone:!0,features:[C.Xq5,C.TTD]}),f})(),hn=(()=>{class f{get isActive(){return this._isActive}constructor(y,D,k,R,B){this.router=y,this.element=D,this.renderer=k,this.cdr=R,this.link=B,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new C.vpe,this.routerEventsSubscription=y.events.subscribe(ee=>{ee instanceof io&&this.update()})}ngAfterContentInit(){(0,ne.of)(this.links.changes,(0,ne.of)(null)).pipe((0,Ct.J)()).subscribe(y=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const y=[...this.links.toArray(),this.link].filter(D=>!!D).map(D=>D.onChanges);this.linkInputChangesSubscription=(0,He.D)(y).pipe((0,Ct.J)()).subscribe(D=>{this._isActive!==this.isLinkActive(this.router)(D)&&this.update()})}set routerLinkActive(y){const D=Array.isArray(y)?y:y.split(" ");this.classes=D.filter(k=>!!k)}ngOnChanges(y){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const y=this.hasActiveLinks();this._isActive!==y&&(this._isActive=y,this.cdr.markForCheck(),this.classes.forEach(D=>{y?this.renderer.addClass(this.element.nativeElement,D):this.renderer.removeClass(this.element.nativeElement,D)}),y&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(y))})}isLinkActive(y){const D=function Za(f){return!!f.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return k=>!!k.urlTree&&y.isActive(k.urlTree,D)}hasActiveLinks(){const y=this.isLinkActive(this.router);return this.link&&y(this.link)||this.links.some(y)}}return f.\u0275fac=function(y){return new(y||f)(C.Y36(tr),C.Y36(C.SBq),C.Y36(C.Qsj),C.Y36(C.sBO),C.Y36(ds,8))},f.\u0275dir=C.lG2({type:f,selectors:[["","routerLinkActive",""]],contentQueries:function(y,D,k){if(1&y&&C.Suo(k,ds,5),2&y){let R;C.iGM(R=C.CRH())&&(D.links=R)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[C.TTD]}),f})();class Dl{}let ma=(()=>{class f{constructor(y,D,k,R,B){this.router=y,this.injector=k,this.preloadingStrategy=R,this.loader=B}setUpPreloading(){this.subscription=this.router.events.pipe((0,Nt.h)(y=>y instanceof io),(0,Ri.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,D){const k=[];for(const R of D){R.providers&&!R._injector&&(R._injector=(0,C.MMx)(R.providers,y,`Route: ${R.path}`));const B=R._injector??y,ee=R._loadedInjector??B;(R.loadChildren&&!R._loadedRoutes&&void 0===R.canLoad||R.loadComponent&&!R._loadedComponent)&&k.push(this.preloadConfig(B,R)),(R.children||R._loadedRoutes)&&k.push(this.processRoutes(ee,R.children??R._loadedRoutes))}return(0,He.D)(k).pipe((0,Ct.J)())}preloadConfig(y,D){return this.preloadingStrategy.preload(D,()=>{let k;k=D.loadChildren&&void 0===D.canLoad?this.loader.loadChildren(y,D):(0,ne.of)(null);const R=k.pipe((0,fi.z)(B=>null===B?(0,ne.of)(void 0):(D._loadedRoutes=B.routes,D._loadedInjector=B.injector,this.processRoutes(B.injector??y,B.routes))));if(D.loadComponent&&!D._loadedComponent){const B=this.loader.loadComponent(D);return(0,He.D)([R,B]).pipe((0,Ct.J)())}return R})}}return f.\u0275fac=function(y){return new(y||f)(C.LFG(tr),C.LFG(C.Sil),C.LFG(C.lqb),C.LFG(Dl),C.LFG(F))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();const Jo=new C.OlP("");let wt=(()=>{class f{constructor(y,D,k,R,B={}){this.urlSerializer=y,this.transitions=D,this.viewportScroller=k,this.zone=R,this.options=B,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},B.scrollPositionRestoration=B.scrollPositionRestoration||"disabled",B.anchorScrolling=B.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof Do?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof io?(this.lastId=y.id,this.scheduleScrollEvent(y,this.urlSerializer.parse(y.urlAfterRedirects).fragment)):y instanceof mn&&0===y.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(y,this.urlSerializer.parse(y.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof Pr&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,D){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Pr(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,D))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return f.\u0275fac=function(y){C.$Z()},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac}),f})();function Hs(f,b){return{\u0275kind:f,\u0275providers:b}}function Ta(){const f=(0,C.f3M)(C.zs3);return b=>{const y=f.get(C.z2F);if(b!==y.components[0])return;const D=f.get(tr),k=f.get(al);1===f.get(Nr)&&D.initialNavigation(),f.get(us,null,C.XFs.Optional)?.setUpPreloading(),f.get(Jo,null,C.XFs.Optional)?.init(),D.resetRootComponentType(y.componentTypes[0]),k.closed||(k.next(),k.complete(),k.unsubscribe())}}const al=new C.OlP("",{factory:()=>new qt.x}),Nr=new C.OlP("",{providedIn:"root",factory:()=>1}),us=new C.OlP("");function ta(f){return Hs(0,[{provide:us,useExisting:ma},{provide:Dl,useExisting:f}])}const ll=new C.OlP("ROUTER_FORROOT_GUARD"),Ia=[Ne.Ye,{provide:Ot,useClass:_i},tr,vr,{provide:An,useFactory:function sl(f){return f.routerState.root},deps:[tr]},F,[]];function Kl(){return new C.PXZ("Router",tr)}let Tl=(()=>{class f{constructor(y){}static forRoot(y,D){return{ngModule:f,providers:[Ia,[],{provide:mi,multi:!0,useValue:y},{provide:ll,useFactory:Al,deps:[[tr,new C.FiY,new C.tp0]]},{provide:Nn,useValue:D||{}},D?.useHash?{provide:Ne.S$,useClass:Ne.Do}:{provide:Ne.S$,useClass:Ne.b0},{provide:Jo,useFactory:()=>{const f=(0,C.f3M)(Ne.EM),b=(0,C.f3M)(C.R0b),y=(0,C.f3M)(Nn),D=(0,C.f3M)(fe),k=(0,C.f3M)(Ot);return y.scrollOffset&&f.setOffset(y.scrollOffset),new wt(k,D,f,b,y)}},D?.preloadingStrategy?ta(D.preloadingStrategy).\u0275providers:[],{provide:C.PXZ,multi:!0,useFactory:Kl},D?.initialNavigation?uc(D):[],D?.bindToComponentInputs?Hs(8,[ar,{provide:un,useExisting:ar}]).\u0275providers:[],[{provide:kl,useFactory:Ta},{provide:C.tb,multi:!0,useExisting:kl}]]}}static forChild(y){return{ngModule:f,providers:[{provide:mi,multi:!0,useValue:y}]}}}return f.\u0275fac=function(y){return new(y||f)(C.LFG(ll,8))},f.\u0275mod=C.oAB({type:f}),f.\u0275inj=C.cJS({}),f})();function Al(f){return"guarded"}function uc(f){return["disabled"===f.initialNavigation?Hs(3,[{provide:C.ip1,multi:!0,useFactory:()=>{const b=(0,C.f3M)(tr);return()=>{b.setUpLocationChangeListener()}}},{provide:Nr,useValue:2}]).\u0275providers:[],"enabledBlocking"===f.initialNavigation?Hs(2,[{provide:Nr,useValue:0},{provide:C.ip1,multi:!0,deps:[C.zs3],useFactory:b=>{const y=b.get(Ne.V_,Promise.resolve());return()=>y.then(()=>new Promise(D=>{const k=b.get(tr),R=b.get(al);Gr(k,()=>{D(!0)}),b.get(fe).afterPreactivation=()=>(D(!0),R.closed?(0,ne.of)(void 0):R),k.initialNavigation()}))}}]).\u0275providers:[]]}const kl=new C.OlP("")},7582:(gi,mt,H)=>{"use strict";function Le(Et,ft,Rt,Vt){return new(Rt||(Rt=Promise))(function(Ct,ai){function ze(Me){try{dt(Vt.next(Me))}catch(ut){ai(ut)}}function rt(Me){try{dt(Vt.throw(Me))}catch(ut){ai(ut)}}function dt(Me){Me.done?Ct(Me.value):function ei(Ct){return Ct instanceof Rt?Ct:new Rt(function(ai){ai(Ct)})}(Me.value).then(ze,rt)}dt((Vt=Vt.apply(Et,ft||[])).next())})}function Ne(Et){return this instanceof Ne?(this.v=Et,this):new Ne(Et)}function je(Et,ft,Rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ei,Vt=Rt.apply(Et,ft||[]),Ct=[];return ei={},ai("next"),ai("throw"),ai("return"),ei[Symbol.asyncIterator]=function(){return this},ei;function ai(Yt){Vt[Yt]&&(ei[Yt]=function(Ut){return new Promise(function(ti,ot){Ct.push([Yt,Ut,ti,ot])>1||ze(Yt,Ut)})})}function ze(Yt,Ut){try{!function rt(Yt){Yt.value instanceof Ne?Promise.resolve(Yt.value.v).then(dt,Me):ut(Ct[0][2],Yt)}(Vt[Yt](Ut))}catch(ti){ut(Ct[0][3],ti)}}function dt(Yt){ze("next",Yt)}function Me(Yt){ze("throw",Yt)}function ut(Yt,Ut){Yt(Ut),Ct.shift(),Ct.length&&ze(Ct[0][0],Ct[0][1])}}function Ft(Et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Rt,ft=Et[Symbol.asyncIterator];return ft?ft.call(Et):(Et=function bt(Et){var ft="function"==typeof Symbol&&Symbol.iterator,Rt=ft&&Et[ft],Vt=0;if(Rt)return Rt.call(Et);if(Et&&"number"==typeof Et.length)return{next:function(){return Et&&Vt>=Et.length&&(Et=void 0),{value:Et&&Et[Vt++],done:!Et}}};throw new TypeError(ft?"Object is not iterable.":"Symbol.iterator is not defined.")}(Et),Rt={},Vt("next"),Vt("throw"),Vt("return"),Rt[Symbol.asyncIterator]=function(){return this},Rt);function Vt(Ct){Rt[Ct]=Et[Ct]&&function(ai){return new Promise(function(ze,rt){!function ei(Ct,ai,ze,rt){Promise.resolve(rt).then(function(dt){Ct({value:dt,done:ze})},ai)}(ze,rt,(ai=Et[Ct](ai)).done,ai.value)})}}}H.d(mt,{FC:()=>je,KL:()=>Ft,mG:()=>Le,qq:()=>Ne}),"function"==typeof SuppressedError&&SuppressedError}},gi=>{gi(gi.s=4772)}]);