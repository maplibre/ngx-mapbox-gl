(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[179],{3619:(sn,ut,j)=>{"use strict";j.d(ut,{a:()=>Ge});var T=j(4080),l=j(4650);function Z(_e,Ze){1&_e&&l.Hsn(0)}const g=["*"];let Ge=(()=>{class _e{constructor(Ae,Ue,je){this.componentFactoryResolver=Ae,this.injector=Ue,this.appRef=je}ngAfterViewInit(){this.portalOutlet=new T.u0(document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items"),this.componentFactoryResolver,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}}return _e.\u0275fac=function(Ae){return new(Ae||_e)(l.Y36(l._Vd),l.Y36(l.zs3),l.Y36(l.z2F))},_e.\u0275cmp=l.Xpm({type:_e,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(Ae,Ue){if(1&Ae&&l.Gf(T.ig,5),2&Ae){let je;l.iGM(je=l.CRH())&&(Ue.portal=je.first)}},inputs:{position:"position"},ngContentSelectors:g,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(Ae,Ue){1&Ae&&(l.F$t(),l.YNc(0,Z,1,0,"ng-template",0))},dependencies:[T.bH],encapsulation:2}),_e})()},6449:(sn,ut,j)=>{"use strict";j.d(ut,{$:()=>_e});var T=j(4650),l=j(2510),Z=j(3683),g=j(7392),Ge=j(4859);let _e=(()=>{class Ze{}return Ze.\u0275fac=function(Ue){return new(Ue||Ze)},Ze.\u0275cmp=T.Xpm({type:Ze,selectors:[["ng-component"]],decls:16,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-button","","routerLink","/"],["svgIcon","ngx-maplibre-gl"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/maplibre/ngx-maplibre-gl"],["svgIcon","github"]],template:function(Ue,je){1&Ue&&(T.TgZ(0,"mat-toolbar",0)(1,"div"),T._UZ(2,"div",1),T.TgZ(3,"a",2),T._UZ(4,"mat-icon",3),T._uU(5," ngx-maplibre-gl "),T.qZA(),T.TgZ(6,"a",4),T._uU(7," Demo "),T.qZA(),T.TgZ(8,"a",5),T._uU(9," Documentation "),T.qZA()(),T.TgZ(10,"div"),T._UZ(11,"div",6),T.TgZ(12,"a",7),T._UZ(13,"mat-icon",8),T._uU(14," GitHub "),T.qZA()()(),T._UZ(15,"router-outlet"))},dependencies:[l.lC,l.yS,Z.Ye,g.Hw,Ge.zs],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]}),Ze})()},6838:(sn,ut,j)=>{"use strict";j.d(ut,{x:()=>Je});var T=j(4080),l=j(6895),Z=j(4859),g=j(7392),Ge=j(3683),_e=j(2510),Ue=(j(3619),j(6449),j(4650));let Je=(()=>{class Le{}return Le.\u0275fac=function(qe){return new(qe||Le)},Le.\u0275mod=Ue.oAB({type:Le}),Le.\u0275inj=Ue.cJS({imports:[l.ez,_e.Bz,Ge.g0,g.Ps,Z.ot,T.eL]}),Le})()},3932:(sn,ut,j)=>{"use strict";var T=j(1481),l=j(4650),Z=j(2510);let g=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-root"]],decls:1,vars:0,template:function(i,f){1&i&&l._UZ(0,"router-outlet")},dependencies:[Z.lC],encapsulation:2}),u})();var Ge=j(7392),_e=j(7340);function Ae(u){return new l.vHH(3e3,!1)}function Kt(){return typeof window<"u"&&typeof window.document<"u"}function Qt(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function xn(u){switch(u.length){case 0:return new _e.ZN;case 1:return u[0];default:return new _e.ZE(u)}}function Vn(u,h,i,f,I=new Map,N=new Map){const pe=[],Me=[];let We=-1,ht=null;if(f.forEach(Nt=>{const Vt=Nt.get("offset"),Dn=Vt==We,Wn=Dn&&ht||new Map;Nt.forEach((An,Nn)=>{let fi=Nn,Mi=An;if("offset"!==Nn)switch(fi=h.normalizePropertyName(fi,pe),Mi){case _e.k1:Mi=I.get(Nn);break;case _e.l3:Mi=N.get(Nn);break;default:Mi=h.normalizeStyleValue(Nn,fi,Mi,pe)}Wn.set(fi,Mi)}),Dn||Me.push(Wn),ht=Wn,We=Vt}),pe.length)throw function Yt(u){return new l.vHH(3502,!1)}();return Me}function Qn(u,h,i,f){switch(h){case"start":u.onStart(()=>f(i&&pi(i,"start",u)));break;case"done":u.onDone(()=>f(i&&pi(i,"done",u)));break;case"destroy":u.onDestroy(()=>f(i&&pi(i,"destroy",u)))}}function pi(u,h,i){const N=Fi(u.element,u.triggerName,u.fromState,u.toState,h||u.phaseName,i.totalTime??u.totalTime,!!i.disabled),pe=u._data;return null!=pe&&(N._data=pe),N}function Fi(u,h,i,f,I="",N=0,pe){return{element:u,triggerName:h,fromState:i,toState:f,phaseName:I,totalTime:N,disabled:!!pe}}function _i(u,h,i){let f=u.get(h);return f||u.set(h,f=i),f}function yi(u){const h=u.indexOf(":");return[u.substring(1,h),u.slice(h+1)]}let un=(u,h)=>!1,Rn=(u,h,i)=>[],Xe=null;function Y(u){const h=u.parentNode||u.host;return h===Xe?null:h}(Qt()||typeof Element<"u")&&(Kt()?(Xe=(()=>document.documentElement)(),un=(u,h)=>{for(;h;){if(h===u)return!0;h=Y(h)}return!1}):un=(u,h)=>u.contains(h),Rn=(u,h,i)=>{if(i)return Array.from(u.querySelectorAll(h));const f=u.querySelector(h);return f?[f]:[]});let Ke=null,me=!1;const Pe=un,rt=Rn;let ln=(()=>{class u{validateStyleProperty(i){return function ye(u){Ke||(Ke=function ge(){return typeof document<"u"?document.body:null}()||{},me=!!Ke.style&&"WebkitAppearance"in Ke.style);let h=!0;return Ke.style&&!function Se(u){return"ebkit"==u.substring(1,6)}(u)&&(h=u in Ke.style,!h&&me&&(h="Webkit"+u.charAt(0).toUpperCase()+u.slice(1)in Ke.style)),h}(i)}matchesElement(i,f){return!1}containsElement(i,f){return Pe(i,f)}getParentElement(i){return Y(i)}query(i,f,I){return rt(i,f,I)}computeStyle(i,f,I){return I||""}animate(i,f,I,N,pe,Me=[],We){return new _e.ZN(I,N)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})(),Rt=(()=>{class u{}return u.NOOP=new ln,u})();const Lt="ng-enter",ft="ng-leave",ie="ng-trigger",V=".ng-trigger",U="ng-animating",$=".ng-animating";function X(u){if("number"==typeof u)return u;const h=u.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:ce(parseFloat(h[1]),h[2])}function ce(u,h){return"s"===h?1e3*u:u}function Ce(u,h,i){return u.hasOwnProperty("duration")?u:function ke(u,h,i){let I,N=0,pe="";if("string"==typeof u){const Me=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Me)return h.push(Ae()),{duration:0,delay:0,easing:""};I=ce(parseFloat(Me[1]),Me[2]);const We=Me[3];null!=We&&(N=ce(parseFloat(We),Me[4]));const ht=Me[5];ht&&(pe=ht)}else I=u;if(!i){let Me=!1,We=h.length;I<0&&(h.push(function Ue(){return new l.vHH(3100,!1)}()),Me=!0),N<0&&(h.push(function je(){return new l.vHH(3101,!1)}()),Me=!0),Me&&h.splice(We,0,Ae())}return{duration:I,delay:N,easing:pe}}(u,h,i)}function Ie(u,h={}){return Object.keys(u).forEach(i=>{h[i]=u[i]}),h}function Qe(u){const h=new Map;return Object.keys(u).forEach(i=>{h.set(i,u[i])}),h}function Pt(u,h=new Map,i){if(i)for(let[f,I]of i)h.set(f,I);for(let[f,I]of u)h.set(f,I);return h}function nn(u,h,i){return i?h+":"+i+";":""}function dn(u){let h="";for(let i=0;i<u.style.length;i++){const f=u.style.item(i);h+=nn(0,f,u.style.getPropertyValue(f))}for(const i in u.style)u.style.hasOwnProperty(i)&&!i.startsWith("_")&&(h+=nn(0,Ji(i),u.style[i]));u.setAttribute("style",h)}function on(u,h,i){u.style&&(h.forEach((f,I)=>{const N=Bn(I);i&&!i.has(I)&&i.set(I,u.style[N]),u.style[N]=f}),Qt()&&dn(u))}function cn(u,h){u.style&&(h.forEach((i,f)=>{const I=Bn(f);u.style[I]=""}),Qt()&&dn(u))}function Fe(u){return Array.isArray(u)?1==u.length?u[0]:(0,_e.vP)(u):u}const Te=new RegExp("{{\\s*(.+?)\\s*}}","g");function ot(u){let h=[];if("string"==typeof u){let i;for(;i=Te.exec(u);)h.push(i[1]);Te.lastIndex=0}return h}function St(u,h,i){const f=u.toString(),I=f.replace(Te,(N,pe)=>{let Me=h[pe];return null==Me&&(i.push(function Le(u){return new l.vHH(3003,!1)}()),Me=""),Me.toString()});return I==f?u:I}function rn(u){const h=[];let i=u.next();for(;!i.done;)h.push(i.value),i=u.next();return h}const Ln=/-+([a-z0-9])/g;function Bn(u){return u.replace(Ln,(...h)=>h[1].toUpperCase())}function Ji(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Qi(u,h,i){switch(h.type){case 7:return u.visitTrigger(h,i);case 0:return u.visitState(h,i);case 1:return u.visitTransition(h,i);case 2:return u.visitSequence(h,i);case 3:return u.visitGroup(h,i);case 4:return u.visitAnimate(h,i);case 5:return u.visitKeyframes(h,i);case 6:return u.visitStyle(h,i);case 8:return u.visitReference(h,i);case 9:return u.visitAnimateChild(h,i);case 10:return u.visitAnimateRef(h,i);case 11:return u.visitQuery(h,i);case 12:return u.visitStagger(h,i);default:throw function et(u){return new l.vHH(3004,!1)}()}}function Xr(u,h){return window.getComputedStyle(u)[h]}function mi(u,h){const i=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(f=>function Nr(u,h,i){if(":"==u[0]){const We=function cs(u,h){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(i,f)=>parseFloat(f)>parseFloat(i);case":decrement":return(i,f)=>parseFloat(f)<parseFloat(i);default:return h.push(function nt(u){return new l.vHH(3016,!1)}()),"* => *"}}(u,i);if("function"==typeof We)return void h.push(We);u=We}const f=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==f||f.length<4)return i.push(function jt(u){return new l.vHH(3015,!1)}()),h;const I=f[1],N=f[2],pe=f[3];h.push(Gr(I,pe));"<"==N[0]&&!("*"==I&&"*"==pe)&&h.push(Gr(pe,I))}(f,i,h)):i.push(u),i}const Br=new Set(["true","1"]),Pi=new Set(["false","0"]);function Gr(u,h){const i=Br.has(u)||Pi.has(u),f=Br.has(h)||Pi.has(h);return(I,N)=>{let pe="*"==u||u==I,Me="*"==h||h==N;return!pe&&i&&"boolean"==typeof I&&(pe=I?Br.has(u):Pi.has(u)),!Me&&f&&"boolean"==typeof N&&(Me=N?Br.has(h):Pi.has(h)),pe&&Me}}const Ii=new RegExp("s*:selfs*,?","g");function Zn(u,h,i,f){return new cr(u).build(h,i,f)}class cr{constructor(h){this._driver=h}build(h,i,f){const I=new $s(i);return this._resetContextStyleTimingState(I),Qi(this,Fe(h),I)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,i){let f=i.queryCount=0,I=i.depCount=0;const N=[],pe=[];return"@"==h.name.charAt(0)&&i.errors.push(function $e(){return new l.vHH(3006,!1)}()),h.definitions.forEach(Me=>{if(this._resetContextStyleTimingState(i),0==Me.type){const We=Me,ht=We.name;ht.toString().split(/\s*,\s*/).forEach(Nt=>{We.name=Nt,N.push(this.visitState(We,i))}),We.name=ht}else if(1==Me.type){const We=this.visitTransition(Me,i);f+=We.queryCount,I+=We.depCount,pe.push(We)}else i.errors.push(function mt(){return new l.vHH(3007,!1)}())}),{type:7,name:h.name,states:N,transitions:pe,queryCount:f,depCount:I,options:null}}visitState(h,i){const f=this.visitStyle(h.styles,i),I=h.options&&h.options.params||null;if(f.containsDynamicStyles){const N=new Set,pe=I||{};f.styles.forEach(Me=>{Me instanceof Map&&Me.forEach(We=>{ot(We).forEach(ht=>{pe.hasOwnProperty(ht)||N.add(ht)})})}),N.size&&(rn(N.values()),i.errors.push(function pt(u,h){return new l.vHH(3008,!1)}()))}return{type:0,name:h.name,style:f,options:I?{params:I}:null}}visitTransition(h,i){i.queryCount=0,i.depCount=0;const f=Qi(this,Fe(h.animation),i);return{type:1,matchers:mi(h.expr,i.errors),animation:f,queryCount:i.queryCount,depCount:i.depCount,options:Zr(h.options)}}visitSequence(h,i){return{type:2,steps:h.steps.map(f=>Qi(this,f,i)),options:Zr(h.options)}}visitGroup(h,i){const f=i.currentTime;let I=0;const N=h.steps.map(pe=>{i.currentTime=f;const Me=Qi(this,pe,i);return I=Math.max(I,i.currentTime),Me});return i.currentTime=I,{type:3,steps:N,options:Zr(h.options)}}visitAnimate(h,i){const f=function Jr(u,h){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return pa(Ce(u,h).duration,0,"");const i=u;if(i.split(/\s+/).some(N=>"{"==N.charAt(0)&&"{"==N.charAt(1))){const N=pa(0,0,"");return N.dynamic=!0,N.strValue=i,N}const I=Ce(i,h);return pa(I.duration,I.delay,I.easing)}(h.timings,i.errors);i.currentAnimateTimings=f;let I,N=h.styles?h.styles:(0,_e.oB)({});if(5==N.type)I=this.visitKeyframes(N,i);else{let pe=h.styles,Me=!1;if(!pe){Me=!0;const ht={};f.easing&&(ht.easing=f.easing),pe=(0,_e.oB)(ht)}i.currentTime+=f.duration+f.delay;const We=this.visitStyle(pe,i);We.isEmptyStep=Me,I=We}return i.currentAnimateTimings=null,{type:4,timings:f,style:I,options:null}}visitStyle(h,i){const f=this._makeStyleAst(h,i);return this._validateStyleAst(f,i),f}_makeStyleAst(h,i){const f=[],I=Array.isArray(h.styles)?h.styles:[h.styles];for(let Me of I)"string"==typeof Me?Me===_e.l3?f.push(Me):i.errors.push(new l.vHH(3002,!1)):f.push(Qe(Me));let N=!1,pe=null;return f.forEach(Me=>{if(Me instanceof Map&&(Me.has("easing")&&(pe=Me.get("easing"),Me.delete("easing")),!N))for(let We of Me.values())if(We.toString().indexOf("{{")>=0){N=!0;break}}),{type:6,styles:f,easing:pe,offset:h.offset,containsDynamicStyles:N,options:null}}_validateStyleAst(h,i){const f=i.currentAnimateTimings;let I=i.currentTime,N=i.currentTime;f&&N>0&&(N-=f.duration+f.delay),h.styles.forEach(pe=>{"string"!=typeof pe&&pe.forEach((Me,We)=>{const ht=i.collectedStyles.get(i.currentQuerySelector),Nt=ht.get(We);let Vt=!0;Nt&&(N!=I&&N>=Nt.startTime&&I<=Nt.endTime&&(i.errors.push(function Zt(u,h,i,f,I){return new l.vHH(3010,!1)}()),Vt=!1),N=Nt.startTime),Vt&&ht.set(We,{startTime:N,endTime:I}),i.options&&function Ne(u,h,i){const f=h.params||{},I=ot(u);I.length&&I.forEach(N=>{f.hasOwnProperty(N)||i.push(function Je(u){return new l.vHH(3001,!1)}())})}(Me,i.options,i.errors)})})}visitKeyframes(h,i){const f={type:5,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push(function bt(){return new l.vHH(3011,!1)}()),f;let N=0;const pe=[];let Me=!1,We=!1,ht=0;const Nt=h.steps.map(Mi=>{const sr=this._makeStyleAst(Mi,i);let yo=null!=sr.offset?sr.offset:function us(u){if("string"==typeof u)return null;let h=null;if(Array.isArray(u))u.forEach(i=>{if(i instanceof Map&&i.has("offset")){const f=i;h=parseFloat(f.get("offset")),f.delete("offset")}});else if(u instanceof Map&&u.has("offset")){const i=u;h=parseFloat(i.get("offset")),i.delete("offset")}return h}(sr.styles),Or=0;return null!=yo&&(N++,Or=sr.offset=yo),We=We||Or<0||Or>1,Me=Me||Or<ht,ht=Or,pe.push(Or),sr});We&&i.errors.push(function Re(){return new l.vHH(3012,!1)}()),Me&&i.errors.push(function ze(){return new l.vHH(3200,!1)}());const Vt=h.steps.length;let Dn=0;N>0&&N<Vt?i.errors.push(function It(){return new l.vHH(3202,!1)}()):0==N&&(Dn=1/(Vt-1));const Wn=Vt-1,An=i.currentTime,Nn=i.currentAnimateTimings,fi=Nn.duration;return Nt.forEach((Mi,sr)=>{const yo=Dn>0?sr==Wn?1:Dn*sr:pe[sr],Or=yo*fi;i.currentTime=An+Nn.delay+Or,Nn.duration=Or,this._validateStyleAst(Mi,i),Mi.offset=yo,f.styles.push(Mi)}),f}visitReference(h,i){return{type:8,animation:Qi(this,Fe(h.animation),i),options:Zr(h.options)}}visitAnimateChild(h,i){return i.depCount++,{type:9,options:Zr(h.options)}}visitAnimateRef(h,i){return{type:10,animation:this.visitReference(h.animation,i),options:Zr(h.options)}}visitQuery(h,i){const f=i.currentQuerySelector,I=h.options||{};i.queryCount++,i.currentQuery=h;const[N,pe]=function br(u){const h=!!u.split(/\s*,\s*/).find(i=>":self"==i);return h&&(u=u.replace(Ii,"")),u=u.replace(/@\*/g,V).replace(/@\w+/g,i=>V+"-"+i.slice(1)).replace(/:animating/g,$),[u,h]}(h.selector);i.currentQuerySelector=f.length?f+" "+N:N,_i(i.collectedStyles,i.currentQuerySelector,new Map);const Me=Qi(this,Fe(h.animation),i);return i.currentQuery=null,i.currentQuerySelector=f,{type:11,selector:N,limit:I.limit||0,optional:!!I.optional,includeSelf:pe,animation:Me,originalSelector:h.selector,options:Zr(h.options)}}visitStagger(h,i){i.currentQuery||i.errors.push(function At(){return new l.vHH(3013,!1)}());const f="full"===h.timings?{duration:0,delay:0,easing:"full"}:Ce(h.timings,i.errors,!0);return{type:12,animation:Qi(this,Fe(h.animation),i),timings:f,options:null}}}class $s{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Zr(u){return u?(u=Ie(u)).params&&(u.params=function Hs(u){return u?Ie(u):null}(u.params)):u={},u}function pa(u,h,i){return{duration:u,delay:h,easing:i}}function es(u,h,i,f,I,N,pe=null,Me=!1){return{type:1,element:u,keyframes:h,preStyleProps:i,postStyleProps:f,duration:I,delay:N,totalTime:I+N,easing:pe,subTimeline:Me}}class fa{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,i){let f=this._map.get(h);f||this._map.set(h,f=[]),f.push(...i)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const Pl=new RegExp(":enter","g"),kl=new RegExp(":leave","g");function Gs(u,h,i,f,I,N=new Map,pe=new Map,Me,We,ht=[]){return(new Ia).buildKeyframes(u,h,i,f,I,N,pe,Me,We,ht)}class Ia{buildKeyframes(h,i,f,I,N,pe,Me,We,ht,Nt=[]){ht=ht||new fa;const Vt=new Co(h,i,ht,I,N,Nt,[]);Vt.options=We;const Dn=We.delay?X(We.delay):0;Vt.currentTimeline.delayNextStep(Dn),Vt.currentTimeline.setStyles([pe],null,Vt.errors,We),Qi(this,f,Vt);const Wn=Vt.timelines.filter(An=>An.containsAnimation());if(Wn.length&&Me.size){let An;for(let Nn=Wn.length-1;Nn>=0;Nn--){const fi=Wn[Nn];if(fi.element===i){An=fi;break}}An&&!An.allowOnlyTimelineStyles()&&An.setStyles([Me],null,Vt.errors,We)}return Wn.length?Wn.map(An=>An.buildKeyframes()):[es(i,[],[],[],0,Dn,"",!1)]}visitTrigger(h,i){}visitState(h,i){}visitTransition(h,i){}visitAnimateChild(h,i){const f=i.subInstructions.get(i.element);if(f){const I=i.createSubContext(h.options),N=i.currentTimeline.currentTime,pe=this._visitSubInstructions(f,I,I.options);N!=pe&&i.transformIntoNewTimeline(pe)}i.previousNode=h}visitAnimateRef(h,i){const f=i.createSubContext(h.options);f.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],i,f),this.visitReference(h.animation,f),i.transformIntoNewTimeline(f.currentTimeline.currentTime),i.previousNode=h}_applyAnimationRefDelays(h,i,f){for(const I of h){const N=I?.delay;if(N){const pe="number"==typeof N?N:X(St(N,I?.params??{},i.errors));f.delayNextStep(pe)}}}_visitSubInstructions(h,i,f){let N=i.currentTimeline.currentTime;const pe=null!=f.duration?X(f.duration):null,Me=null!=f.delay?X(f.delay):null;return 0!==pe&&h.forEach(We=>{const ht=i.appendInstructionToTimeline(We,pe,Me);N=Math.max(N,ht.duration+ht.delay)}),N}visitReference(h,i){i.updateOptions(h.options,!0),Qi(this,h.animation,i),i.previousNode=h}visitSequence(h,i){const f=i.subContextCount;let I=i;const N=h.options;if(N&&(N.params||N.delay)&&(I=i.createSubContext(N),I.transformIntoNewTimeline(),null!=N.delay)){6==I.previousNode.type&&(I.currentTimeline.snapshotCurrentStyles(),I.previousNode=Cs);const pe=X(N.delay);I.delayNextStep(pe)}h.steps.length&&(h.steps.forEach(pe=>Qi(this,pe,I)),I.currentTimeline.applyStylesToKeyframe(),I.subContextCount>f&&I.transformIntoNewTimeline()),i.previousNode=h}visitGroup(h,i){const f=[];let I=i.currentTimeline.currentTime;const N=h.options&&h.options.delay?X(h.options.delay):0;h.steps.forEach(pe=>{const Me=i.createSubContext(h.options);N&&Me.delayNextStep(N),Qi(this,pe,Me),I=Math.max(I,Me.currentTimeline.currentTime),f.push(Me.currentTimeline)}),f.forEach(pe=>i.currentTimeline.mergeTimelineCollectedStyles(pe)),i.transformIntoNewTimeline(I),i.previousNode=h}_visitTiming(h,i){if(h.dynamic){const f=h.strValue;return Ce(i.params?St(f,i.params,i.errors):f,i.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,i){const f=i.currentAnimateTimings=this._visitTiming(h.timings,i),I=i.currentTimeline;f.delay&&(i.incrementTime(f.delay),I.snapshotCurrentStyles());const N=h.style;5==N.type?this.visitKeyframes(N,i):(i.incrementTime(f.duration),this.visitStyle(N,i),I.applyStylesToKeyframe()),i.currentAnimateTimings=null,i.previousNode=h}visitStyle(h,i){const f=i.currentTimeline,I=i.currentAnimateTimings;!I&&f.hasCurrentStyleProperties()&&f.forwardFrame();const N=I&&I.easing||h.easing;h.isEmptyStep?f.applyEmptyStep(N):f.setStyles(h.styles,N,i.errors,i.options),i.previousNode=h}visitKeyframes(h,i){const f=i.currentAnimateTimings,I=i.currentTimeline.duration,N=f.duration,Me=i.createSubContext().currentTimeline;Me.easing=f.easing,h.styles.forEach(We=>{Me.forwardTime((We.offset||0)*N),Me.setStyles(We.styles,We.easing,i.errors,i.options),Me.applyStylesToKeyframe()}),i.currentTimeline.mergeTimelineCollectedStyles(Me),i.transformIntoNewTimeline(I+N),i.previousNode=h}visitQuery(h,i){const f=i.currentTimeline.currentTime,I=h.options||{},N=I.delay?X(I.delay):0;N&&(6===i.previousNode.type||0==f&&i.currentTimeline.hasCurrentStyleProperties())&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Cs);let pe=f;const Me=i.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!I.optional,i.errors);i.currentQueryTotal=Me.length;let We=null;Me.forEach((ht,Nt)=>{i.currentQueryIndex=Nt;const Vt=i.createSubContext(h.options,ht);N&&Vt.delayNextStep(N),ht===i.element&&(We=Vt.currentTimeline),Qi(this,h.animation,Vt),Vt.currentTimeline.applyStylesToKeyframe(),pe=Math.max(pe,Vt.currentTimeline.currentTime)}),i.currentQueryIndex=0,i.currentQueryTotal=0,i.transformIntoNewTimeline(pe),We&&(i.currentTimeline.mergeTimelineCollectedStyles(We),i.currentTimeline.snapshotCurrentStyles()),i.previousNode=h}visitStagger(h,i){const f=i.parentContext,I=i.currentTimeline,N=h.timings,pe=Math.abs(N.duration),Me=pe*(i.currentQueryTotal-1);let We=pe*i.currentQueryIndex;switch(N.duration<0?"reverse":N.easing){case"reverse":We=Me-We;break;case"full":We=f.currentStaggerTime}const Nt=i.currentTimeline;We&&Nt.delayNextStep(We);const Vt=Nt.currentTime;Qi(this,h.animation,i),i.previousNode=h,f.currentStaggerTime=I.currentTime-Vt+(I.startTime-f.currentTimeline.startTime)}}const Cs={};class Co{constructor(h,i,f,I,N,pe,Me,We){this._driver=h,this.element=i,this.subInstructions=f,this._enterClassName=I,this._leaveClassName=N,this.errors=pe,this.timelines=Me,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Cs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=We||new Io(this._driver,i,0),Me.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,i){if(!h)return;const f=h;let I=this.options;null!=f.duration&&(I.duration=X(f.duration)),null!=f.delay&&(I.delay=X(f.delay));const N=f.params;if(N){let pe=I.params;pe||(pe=this.options.params={}),Object.keys(N).forEach(Me=>{(!i||!pe.hasOwnProperty(Me))&&(pe[Me]=St(N[Me],pe,this.errors))})}}_copyOptions(){const h={};if(this.options){const i=this.options.params;if(i){const f=h.params={};Object.keys(i).forEach(I=>{f[I]=i[I]})}}return h}createSubContext(h=null,i,f){const I=i||this.element,N=new Co(this._driver,I,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(I,f||0));return N.previousNode=this.previousNode,N.currentAnimateTimings=this.currentAnimateTimings,N.options=this._copyOptions(),N.updateOptions(h),N.currentQueryIndex=this.currentQueryIndex,N.currentQueryTotal=this.currentQueryTotal,N.parentContext=this,this.subContextCount++,N}transformIntoNewTimeline(h){return this.previousNode=Cs,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,i,f){const I={duration:i??h.duration,delay:this.currentTimeline.currentTime+(f??0)+h.delay,easing:""},N=new Za(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,I,h.stretchStartingKeyframe);return this.timelines.push(N),I}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,i,f,I,N,pe){let Me=[];if(I&&Me.push(this.element),h.length>0){h=(h=h.replace(Pl,"."+this._enterClassName)).replace(kl,"."+this._leaveClassName);let ht=this._driver.query(this.element,h,1!=f);0!==f&&(ht=f<0?ht.slice(ht.length+f,ht.length):ht.slice(0,f)),Me.push(...ht)}return!N&&0==Me.length&&pe.push(function kt(u){return new l.vHH(3014,!1)}()),Me}}class Io{constructor(h,i,f,I){this._driver=h,this.element=i,this.startTime=f,this._elementTimelineStylesLookup=I,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const i=1===this._keyframes.size&&this._pendingStyles.size;this.duration||i?(this.forwardTime(this.currentTime+h),i&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,i){return this.applyStylesToKeyframe(),new Io(this._driver,h,i||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,i){this._localTimelineStyles.set(h,i),this._globalTimelineStyles.set(h,i),this._styleSummary.set(h,{time:this.currentTime,value:i})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[i,f]of this._globalTimelineStyles)this._backFill.set(i,f||_e.l3),this._currentKeyframe.set(i,_e.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,i,f,I){i&&this._previousKeyframe.set("easing",i);const N=I&&I.params||{},pe=function Zs(u,h){const i=new Map;let f;return u.forEach(I=>{if("*"===I){f=f||h.keys();for(let N of f)i.set(N,_e.l3)}else Pt(I,i)}),i}(h,this._globalTimelineStyles);for(let[Me,We]of pe){const ht=St(We,N,f);this._pendingStyles.set(Me,ht),this._localTimelineStyles.has(Me)||this._backFill.set(Me,this._globalTimelineStyles.get(Me)??_e.l3),this._updateStyle(Me,ht)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,i)=>{this._currentKeyframe.set(i,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,i)=>{this._currentKeyframe.has(i)||this._currentKeyframe.set(i,h)}))}snapshotCurrentStyles(){for(let[h,i]of this._localTimelineStyles)this._pendingStyles.set(h,i),this._updateStyle(h,i)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let i in this._currentKeyframe)h.push(i);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((i,f)=>{const I=this._styleSummary.get(f);(!I||i.time>I.time)&&this._updateStyle(f,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,i=new Set,f=1===this._keyframes.size&&0===this.duration;let I=[];this._keyframes.forEach((Me,We)=>{const ht=Pt(Me,new Map,this._backFill);ht.forEach((Nt,Vt)=>{Nt===_e.k1?h.add(Vt):Nt===_e.l3&&i.add(Vt)}),f||ht.set("offset",We/this.duration),I.push(ht)});const N=h.size?rn(h.values()):[],pe=i.size?rn(i.values()):[];if(f){const Me=I[0],We=new Map(Me);Me.set("offset",0),We.set("offset",1),I=[Me,We]}return es(this.element,I,N,pe,this.duration,this.startTime,this.easing,!1)}}class Za extends Io{constructor(h,i,f,I,N,pe,Me=!1){super(h,i,pe.delay),this.keyframes=f,this.preStyleProps=I,this.postStyleProps=N,this._stretchStartingKeyframe=Me,this.timings={duration:pe.duration,delay:pe.delay,easing:pe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:i,duration:f,easing:I}=this.timings;if(this._stretchStartingKeyframe&&i){const N=[],pe=f+i,Me=i/pe,We=Pt(h[0]);We.set("offset",0),N.push(We);const ht=Pt(h[0]);ht.set("offset",Aa(Me)),N.push(ht);const Nt=h.length-1;for(let Vt=1;Vt<=Nt;Vt++){let Dn=Pt(h[Vt]);const Wn=Dn.get("offset");Dn.set("offset",Aa((i+Wn*f)/pe)),N.push(Dn)}f=pe,i=0,I="",h=N}return es(this.element,h,this.preStyleProps,this.postStyleProps,f,i,I,!0)}}function Aa(u,h=3){const i=Math.pow(10,h-1);return Math.round(u*i)/i}class zr{}const Ws=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ds extends zr{normalizePropertyName(h,i){return Bn(h)}normalizeStyleValue(h,i,f,I){let N="";const pe=f.toString().trim();if(Ws.has(i)&&0!==f&&"0"!==f)if("number"==typeof f)N="px";else{const Me=f.match(/^[+-]?[\d\.]+([a-z]*)$/);Me&&0==Me[1].length&&I.push(function qe(u,h){return new l.vHH(3005,!1)}())}return pe+N}}function Ms(u,h,i,f,I,N,pe,Me,We,ht,Nt,Vt,Dn){return{type:0,element:u,triggerName:h,isRemovalTransition:I,fromState:i,fromStyles:N,toState:f,toStyles:pe,timelines:Me,queriedElements:We,preStyleProps:ht,postStyleProps:Nt,totalTime:Vt,errors:Dn}}const uo={};class ts{constructor(h,i,f){this._triggerName=h,this.ast=i,this._stateStyles=f}match(h,i,f,I){return function Ai(u,h,i,f,I){return u.some(N=>N(h,i,f,I))}(this.ast.matchers,h,i,f,I)}buildStyles(h,i,f){let I=this._stateStyles.get("*");return void 0!==h&&(I=this._stateStyles.get(h?.toString())||I),I?I.buildStyles(i,f):new Map}build(h,i,f,I,N,pe,Me,We,ht,Nt){const Vt=[],Dn=this.ast.options&&this.ast.options.params||uo,An=this.buildStyles(f,Me&&Me.params||uo,Vt),Nn=We&&We.params||uo,fi=this.buildStyles(I,Nn,Vt),Mi=new Set,sr=new Map,yo=new Map,Or="void"===I,Ma={params:Dr(Nn,Dn),delay:this.ast.options?.delay},Sa=Nt?[]:Gs(h,i,this.ast.animation,N,pe,An,fi,Ma,ht,Vt);let $r=0;if(Sa.forEach(Il=>{$r=Math.max(Il.duration+Il.delay,$r)}),Vt.length)return Ms(i,this._triggerName,f,I,Or,An,fi,[],[],sr,yo,$r,Vt);Sa.forEach(Il=>{const Al=Il.element,ha=_i(sr,Al,new Set);Il.preStyleProps.forEach(ec=>ha.add(ec));const Ql=_i(yo,Al,new Set);Il.postStyleProps.forEach(ec=>Ql.add(ec)),Al!==i&&Mi.add(Al)});const Xo=rn(Mi.values());return Ms(i,this._triggerName,f,I,Or,An,fi,Sa,Xo,sr,yo,$r)}}function Dr(u,h){const i=Ie(h);for(const f in u)u.hasOwnProperty(f)&&null!=u[f]&&(i[f]=u[f]);return i}class Vr{constructor(h,i,f){this.styles=h,this.defaultParams=i,this.normalizer=f}buildStyles(h,i){const f=new Map,I=Ie(this.defaultParams);return Object.keys(h).forEach(N=>{const pe=h[N];null!==pe&&(I[N]=pe)}),this.styles.styles.forEach(N=>{"string"!=typeof N&&N.forEach((pe,Me)=>{pe&&(pe=St(pe,I,i));const We=this.normalizer.normalizePropertyName(Me,i);pe=this.normalizer.normalizeStyleValue(Me,We,pe,i),f.set(We,pe)})}),f}}class qs{constructor(h,i,f){this.name=h,this.ast=i,this._normalizer=f,this.transitionFactories=[],this.states=new Map,i.states.forEach(I=>{this.states.set(I.name,new Vr(I.style,I.options&&I.options.params||{},f))}),hs(this.states,"true","1"),hs(this.states,"false","0"),i.transitions.forEach(I=>{this.transitionFactories.push(new ts(h,I,this.states))}),this.fallbackTransition=function Ks(u,h,i){return new ts(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(pe,Me)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,i,f,I){return this.transitionFactories.find(pe=>pe.match(h,i,f,I))||null}matchStyles(h,i,f){return this.fallbackTransition.buildStyles(h,i,f)}}function hs(u,h,i){u.has(h)?u.has(i)||u.set(i,u.get(h)):u.has(i)&&u.set(h,u.get(i))}const Wa=new fa;class Lr{constructor(h,i,f){this.bodyNode=h,this._driver=i,this._normalizer=f,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,i){const f=[],N=Zn(this._driver,i,f,[]);if(f.length)throw function qt(u){return new l.vHH(3503,!1)}();this._animations.set(h,N)}_buildPlayer(h,i,f){const I=h.element,N=Vn(0,this._normalizer,0,h.keyframes,i,f);return this._driver.animate(I,N,h.duration,h.delay,h.easing,[],!0)}create(h,i,f={}){const I=[],N=this._animations.get(h);let pe;const Me=new Map;if(N?(pe=Gs(this._driver,i,N,Lt,ft,new Map,new Map,f,Wa,I),pe.forEach(Nt=>{const Vt=_i(Me,Nt.element,new Map);Nt.postStyleProps.forEach(Dn=>Vt.set(Dn,null))})):(I.push(function On(){return new l.vHH(3300,!1)}()),pe=[]),I.length)throw function Jn(u){return new l.vHH(3504,!1)}();Me.forEach((Nt,Vt)=>{Nt.forEach((Dn,Wn)=>{Nt.set(Wn,this._driver.computeStyle(Vt,Wn,_e.l3))})});const ht=xn(pe.map(Nt=>{const Vt=Me.get(Nt.element);return this._buildPlayer(Nt,new Map,Vt)}));return this._playersById.set(h,ht),ht.onDestroy(()=>this.destroy(h)),this.players.push(ht),ht}destroy(h){const i=this._getPlayer(h);i.destroy(),this._playersById.delete(h);const f=this.players.indexOf(i);f>=0&&this.players.splice(f,1)}_getPlayer(h){const i=this._playersById.get(h);if(!i)throw function hi(u){return new l.vHH(3301,!1)}();return i}listen(h,i,f,I){const N=Fi(i,"","","");return Qn(this._getPlayer(h),f,N,I),()=>{}}command(h,i,f,I){if("register"==f)return void this.register(h,I[0]);if("create"==f)return void this.create(h,i,I[0]||{});const N=this._getPlayer(h);switch(f){case"play":N.play();break;case"pause":N.pause();break;case"reset":N.reset();break;case"restart":N.restart();break;case"finish":N.finish();break;case"init":N.init();break;case"setPosition":N.setPosition(parseFloat(I[0]));break;case"destroy":this.destroy(h)}}}const Ys="ng-animate-queued",Ao="ng-animate-disabled",qa=[],Ka={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Oa={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ur="__ng_removed";class Ya{constructor(h,i=""){this.namespaceId=i;const f=h&&h.hasOwnProperty("value");if(this.value=function vr(u){return u??null}(f?h.value:h),f){const N=Ie(h);delete N.value,this.options=N}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(h){const i=h.params;if(i){const f=this.options.params;Object.keys(i).forEach(I=>{null==f[I]&&(f[I]=i[I])})}}}const fs="void",Po=new Ya(fs);class Bi{constructor(h,i,f){this.id=h,this.hostElement=i,this._engine=f,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,dr(i,this._hostClassName)}listen(h,i,f,I){if(!this._triggers.has(i))throw function Xt(u,h){return new l.vHH(3302,!1)}();if(null==f||0==f.length)throw function ui(u){return new l.vHH(3303,!1)}();if(!function Uo(u){return"start"==u||"done"==u}(f))throw function Xn(u,h){return new l.vHH(3400,!1)}();const N=_i(this._elementListeners,h,[]),pe={name:i,phase:f,callback:I};N.push(pe);const Me=_i(this._engine.statesByElement,h,new Map);return Me.has(i)||(dr(h,ie),dr(h,ie+"-"+i),Me.set(i,Po)),()=>{this._engine.afterFlush(()=>{const We=N.indexOf(pe);We>=0&&N.splice(We,1),this._triggers.has(i)||Me.delete(i)})}}register(h,i){return!this._triggers.has(h)&&(this._triggers.set(h,i),!0)}_getTrigger(h){const i=this._triggers.get(h);if(!i)throw function ai(u){return new l.vHH(3401,!1)}();return i}trigger(h,i,f,I=!0){const N=this._getTrigger(i),pe=new Oo(this.id,i,h);let Me=this._engine.statesByElement.get(h);Me||(dr(h,ie),dr(h,ie+"-"+i),this._engine.statesByElement.set(h,Me=new Map));let We=Me.get(i);const ht=new Ya(f,this.id);if(!(f&&f.hasOwnProperty("value"))&&We&&ht.absorbOptions(We.options),Me.set(i,ht),We||(We=Po),ht.value!==fs&&We.value===ht.value){if(!function xr(u,h){const i=Object.keys(u),f=Object.keys(h);if(i.length!=f.length)return!1;for(let I=0;I<i.length;I++){const N=i[I];if(!h.hasOwnProperty(N)||u[N]!==h[N])return!1}return!0}(We.params,ht.params)){const Nn=[],fi=N.matchStyles(We.value,We.params,Nn),Mi=N.matchStyles(ht.value,ht.params,Nn);Nn.length?this._engine.reportError(Nn):this._engine.afterFlush(()=>{cn(h,fi),on(h,Mi)})}return}const Dn=_i(this._engine.playersByElement,h,[]);Dn.forEach(Nn=>{Nn.namespaceId==this.id&&Nn.triggerName==i&&Nn.queued&&Nn.destroy()});let Wn=N.matchTransition(We.value,ht.value,h,ht.params),An=!1;if(!Wn){if(!I)return;Wn=N.fallbackTransition,An=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:i,transition:Wn,fromState:We,toState:ht,player:pe,isFallbackTransition:An}),An||(dr(h,Ys),pe.onStart(()=>{Is(h,Ys)})),pe.onDone(()=>{let Nn=this.players.indexOf(pe);Nn>=0&&this.players.splice(Nn,1);const fi=this._engine.playersByElement.get(h);if(fi){let Mi=fi.indexOf(pe);Mi>=0&&fi.splice(Mi,1)}}),this.players.push(pe),Dn.push(pe),pe}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(i=>i.delete(h)),this._elementListeners.forEach((i,f)=>{this._elementListeners.set(f,i.filter(I=>I.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const i=this._engine.playersByElement.get(h);i&&(i.forEach(f=>f.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,i){const f=this._engine.driver.query(h,V,!0);f.forEach(I=>{if(I[ur])return;const N=this._engine.fetchNamespacesByElement(I);N.size?N.forEach(pe=>pe.triggerLeaveAnimation(I,i,!1,!0)):this.clearElementCache(I)}),this._engine.afterFlushAnimationsDone(()=>f.forEach(I=>this.clearElementCache(I)))}triggerLeaveAnimation(h,i,f,I){const N=this._engine.statesByElement.get(h),pe=new Map;if(N){const Me=[];if(N.forEach((We,ht)=>{if(pe.set(ht,We.value),this._triggers.has(ht)){const Nt=this.trigger(h,ht,fs,I);Nt&&Me.push(Nt)}}),Me.length)return this._engine.markElementAsRemoved(this.id,h,!0,i,pe),f&&xn(Me).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const i=this._elementListeners.get(h),f=this._engine.statesByElement.get(h);if(i&&f){const I=new Set;i.forEach(N=>{const pe=N.name;if(I.has(pe))return;I.add(pe);const We=this._triggers.get(pe).fallbackTransition,ht=f.get(pe)||Po,Nt=new Ya(fs),Vt=new Oo(this.id,pe,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:pe,transition:We,fromState:ht,toState:Nt,player:Vt,isFallbackTransition:!0})})}}removeNode(h,i){const f=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,i),this.triggerLeaveAnimation(h,i,!0))return;let I=!1;if(f.totalAnimations){const N=f.players.length?f.playersByQueriedElement.get(h):[];if(N&&N.length)I=!0;else{let pe=h;for(;pe=pe.parentNode;)if(f.statesByElement.get(pe)){I=!0;break}}}if(this.prepareLeaveAnimationListeners(h),I)f.markElementAsRemoved(this.id,h,!1,i);else{const N=h[ur];(!N||N===Ka)&&(f.afterFlush(()=>this.clearElementCache(h)),f.destroyInnerAnimations(h),f._onRemovalComplete(h,i))}}insertNode(h,i){dr(h,this._hostClassName)}drainQueuedTransitions(h){const i=[];return this._queue.forEach(f=>{const I=f.player;if(I.destroyed)return;const N=f.element,pe=this._elementListeners.get(N);pe&&pe.forEach(Me=>{if(Me.name==f.triggerName){const We=Fi(N,f.triggerName,f.fromState.value,f.toState.value);We._data=h,Qn(f.player,Me.phase,We,Me.callback)}}),I.markedForDestroy?this._engine.afterFlush(()=>{I.destroy()}):i.push(f)}),this._queue=[],i.sort((f,I)=>{const N=f.transition.ast.depCount,pe=I.transition.ast.depCount;return 0==N||0==pe?N-pe:this._engine.driver.containsElement(f.element,I.element)?1:-1})}destroy(h){this.players.forEach(i=>i.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}elementContainsData(h){let i=!1;return this._elementListeners.has(h)&&(i=!0),i=!!this._queue.find(f=>f.element===h)||i,i}}class gl{constructor(h,i,f){this.bodyNode=h,this.driver=i,this._normalizer=f,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(I,N)=>{}}_onRemovalComplete(h,i){this.onRemovalComplete(h,i)}get queuedPlayers(){const h=[];return this._namespaceList.forEach(i=>{i.players.forEach(f=>{f.queued&&h.push(f)})}),h}createNamespace(h,i){const f=new Bi(h,i,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,i)?this._balanceNamespaceList(f,i):(this.newHostElements.set(i,f),this.collectEnterElement(i)),this._namespaceLookup[h]=f}_balanceNamespaceList(h,i){const f=this._namespaceList,I=this.namespacesByHostElement;if(f.length-1>=0){let pe=!1,Me=this.driver.getParentElement(i);for(;Me;){const We=I.get(Me);if(We){const ht=f.indexOf(We);f.splice(ht+1,0,h),pe=!0;break}Me=this.driver.getParentElement(Me)}pe||f.unshift(h)}else f.push(h);return I.set(i,h),h}register(h,i){let f=this._namespaceLookup[h];return f||(f=this.createNamespace(h,i)),f}registerTrigger(h,i,f){let I=this._namespaceLookup[h];I&&I.register(i,f)&&this.totalAnimations++}destroy(h,i){if(!h)return;const f=this._fetchNamespace(h);this.afterFlush(()=>{this.namespacesByHostElement.delete(f.hostElement),delete this._namespaceLookup[h];const I=this._namespaceList.indexOf(f);I>=0&&this._namespaceList.splice(I,1)}),this.afterFlushAnimationsDone(()=>f.destroy(i))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const i=new Set,f=this.statesByElement.get(h);if(f)for(let I of f.values())if(I.namespaceId){const N=this._fetchNamespace(I.namespaceId);N&&i.add(N)}return i}trigger(h,i,f,I){if(Ts(i)){const N=this._fetchNamespace(h);if(N)return N.trigger(i,f,I),!0}return!1}insertNode(h,i,f,I){if(!Ts(i))return;const N=i[ur];if(N&&N.setForRemoval){N.setForRemoval=!1,N.setForMove=!0;const pe=this.collectedLeaveElements.indexOf(i);pe>=0&&this.collectedLeaveElements.splice(pe,1)}if(h){const pe=this._fetchNamespace(h);pe&&pe.insertNode(i,f)}I&&this.collectEnterElement(i)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,i){i?this.disabledNodes.has(h)||(this.disabledNodes.add(h),dr(h,Ao)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),Is(h,Ao))}removeNode(h,i,f,I){if(Ts(i)){const N=h?this._fetchNamespace(h):null;if(N?N.removeNode(i,I):this.markElementAsRemoved(h,i,!1,I),f){const pe=this.namespacesByHostElement.get(i);pe&&pe.id!==h&&pe.removeNode(i,I)}}else this._onRemovalComplete(i,I)}markElementAsRemoved(h,i,f,I,N){this.collectedLeaveElements.push(i),i[ur]={namespaceId:h,setForRemoval:I,hasAnimation:f,removedBeforeQueried:!1,previousTriggersValues:N}}listen(h,i,f,I,N){return Ts(i)?this._fetchNamespace(h).listen(i,f,I,N):()=>{}}_buildInstruction(h,i,f,I,N){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,f,I,h.fromState.options,h.toState.options,i,N)}destroyInnerAnimations(h){let i=this.driver.query(h,V,!0);i.forEach(f=>this.destroyActiveAnimationsForElement(f)),0!=this.playersByQueriedElement.size&&(i=this.driver.query(h,$,!0),i.forEach(f=>this.finishActiveQueriedAnimationOnElement(f)))}destroyActiveAnimationsForElement(h){const i=this.playersByElement.get(h);i&&i.forEach(f=>{f.queued?f.markedForDestroy=!0:f.destroy()})}finishActiveQueriedAnimationOnElement(h){const i=this.playersByQueriedElement.get(h);i&&i.forEach(f=>f.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return xn(this.players).onDone(()=>h());h()})}processLeaveNode(h){const i=h[ur];if(i&&i.setForRemoval){if(h[ur]=Ka,i.namespaceId){this.destroyInnerAnimations(h);const f=this._fetchNamespace(i.namespaceId);f&&f.clearElementCache(h)}this._onRemovalComplete(h,i.setForRemoval)}h.classList?.contains(Ao)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(f=>{this.markElementAsDisabled(f,!1)})}flush(h=-1){let i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((f,I)=>this._balanceNamespaceList(f,I)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let f=0;f<this.collectedEnterElements.length;f++)dr(this.collectedEnterElements[f],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const f=[];try{i=this._flushAnimations(f,h)}finally{for(let I=0;I<f.length;I++)f[I]()}}else for(let f=0;f<this.collectedLeaveElements.length;f++)this.processLeaveNode(this.collectedLeaveElements[f]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(f=>f()),this._flushFns=[],this._whenQuietFns.length){const f=this._whenQuietFns;this._whenQuietFns=[],i.length?xn(i).onDone(()=>{f.forEach(I=>I())}):f.forEach(I=>I())}}reportError(h){throw function an(u){return new l.vHH(3402,!1)}()}_flushAnimations(h,i){const f=new fa,I=[],N=new Map,pe=[],Me=new Map,We=new Map,ht=new Map,Nt=new Set;this.disabledNodes.forEach(Kn=>{Nt.add(Kn);const ci=this.driver.query(Kn,".ng-animate-queued",!0);for(let si=0;si<ci.length;si++)Nt.add(ci[si])});const Vt=this.bodyNode,Dn=Array.from(this.statesByElement.keys()),Wn=ma(Dn,this.collectedEnterElements),An=new Map;let Nn=0;Wn.forEach((Kn,ci)=>{const si=Lt+Nn++;An.set(ci,si),Kn.forEach(Gi=>dr(Gi,si))});const fi=[],Mi=new Set,sr=new Set;for(let Kn=0;Kn<this.collectedLeaveElements.length;Kn++){const ci=this.collectedLeaveElements[Kn],si=ci[ur];si&&si.setForRemoval&&(fi.push(ci),Mi.add(ci),si.hasAnimation?this.driver.query(ci,".ng-star-inserted",!0).forEach(Gi=>Mi.add(Gi)):sr.add(ci))}const yo=new Map,Or=ma(Dn,Array.from(Mi));Or.forEach((Kn,ci)=>{const si=ft+Nn++;yo.set(ci,si),Kn.forEach(Gi=>dr(Gi,si))}),h.push(()=>{Wn.forEach((Kn,ci)=>{const si=An.get(ci);Kn.forEach(Gi=>Is(Gi,si))}),Or.forEach((Kn,ci)=>{const si=yo.get(ci);Kn.forEach(Gi=>Is(Gi,si))}),fi.forEach(Kn=>{this.processLeaveNode(Kn)})});const Ma=[],Sa=[];for(let Kn=this._namespaceList.length-1;Kn>=0;Kn--)this._namespaceList[Kn].drainQueuedTransitions(i).forEach(si=>{const Gi=si.player,oo=si.element;if(Ma.push(Gi),this.collectedEnterElements.length){const Jo=oo[ur];if(Jo&&Jo.setForMove){if(Jo.previousTriggersValues&&Jo.previousTriggersValues.has(si.triggerName)){const Jc=Jo.previousTriggersValues.get(si.triggerName),Ga=this.statesByElement.get(si.element);if(Ga&&Ga.has(si.triggerName)){const fd=Ga.get(si.triggerName);fd.value=Jc,Ga.set(si.triggerName,fd)}}return void Gi.destroy()}}const js=!Vt||!this.driver.containsElement(Vt,oo),ws=yo.get(oo),Ta=An.get(oo),ar=this._buildInstruction(si,f,Ta,ws,js);if(ar.errors&&ar.errors.length)return void Sa.push(ar);if(js)return Gi.onStart(()=>cn(oo,ar.fromStyles)),Gi.onDestroy(()=>on(oo,ar.toStyles)),void I.push(Gi);if(si.isFallbackTransition)return Gi.onStart(()=>cn(oo,ar.fromStyles)),Gi.onDestroy(()=>on(oo,ar.toStyles)),void I.push(Gi);const ml=[];ar.timelines.forEach(Jo=>{Jo.stretchStartingKeyframe=!0,this.disabledNodes.has(Jo.element)||ml.push(Jo)}),ar.timelines=ml,f.append(oo,ar.timelines),pe.push({instruction:ar,player:Gi,element:oo}),ar.queriedElements.forEach(Jo=>_i(Me,Jo,[]).push(Gi)),ar.preStyleProps.forEach((Jo,Jc)=>{if(Jo.size){let Ga=We.get(Jc);Ga||We.set(Jc,Ga=new Set),Jo.forEach((fd,m_)=>Ga.add(m_))}}),ar.postStyleProps.forEach((Jo,Jc)=>{let Ga=ht.get(Jc);Ga||ht.set(Jc,Ga=new Set),Jo.forEach((fd,m_)=>Ga.add(m_))})});if(Sa.length){const Kn=[];Sa.forEach(ci=>{Kn.push(function dt(u,h){return new l.vHH(3505,!1)}())}),Ma.forEach(ci=>ci.destroy()),this.reportError(Kn)}const $r=new Map,Xo=new Map;pe.forEach(Kn=>{const ci=Kn.element;f.has(ci)&&(Xo.set(ci,ci),this._beforeAnimationBuild(Kn.player.namespaceId,Kn.instruction,$r))}),I.forEach(Kn=>{const ci=Kn.element;this._getPreviousPlayers(ci,!1,Kn.namespaceId,Kn.triggerName,null).forEach(Gi=>{_i($r,ci,[]).push(Gi),Gi.destroy()})});const Il=fi.filter(Kn=>Wt(Kn,We,ht)),Al=new Map;_l(Al,this.driver,sr,ht,_e.l3).forEach(Kn=>{Wt(Kn,We,ht)&&Il.push(Kn)});const Ql=new Map;Wn.forEach((Kn,ci)=>{_l(Ql,this.driver,new Set(Kn),We,_e.k1)}),Il.forEach(Kn=>{const ci=Al.get(Kn),si=Ql.get(Kn);Al.set(Kn,new Map([...Array.from(ci?.entries()??[]),...Array.from(si?.entries()??[])]))});const ec=[],Xc=[],pd={};pe.forEach(Kn=>{const{element:ci,player:si,instruction:Gi}=Kn;if(f.has(ci)){if(Nt.has(ci))return si.onDestroy(()=>on(ci,Gi.toStyles)),si.disabled=!0,si.overrideTotalTime(Gi.totalTime),void I.push(si);let oo=pd;if(Xo.size>1){let ws=ci;const Ta=[];for(;ws=ws.parentNode;){const ar=Xo.get(ws);if(ar){oo=ar;break}Ta.push(ws)}Ta.forEach(ar=>Xo.set(ar,oo))}const js=this._buildAnimation(si.namespaceId,Gi,$r,N,Ql,Al);if(si.setRealPlayer(js),oo===pd)ec.push(si);else{const ws=this.playersByElement.get(oo);ws&&ws.length&&(si.parentPlayer=xn(ws)),I.push(si)}}else cn(ci,Gi.fromStyles),si.onDestroy(()=>on(ci,Gi.toStyles)),Xc.push(si),Nt.has(ci)&&I.push(si)}),Xc.forEach(Kn=>{const ci=N.get(Kn.element);if(ci&&ci.length){const si=xn(ci);Kn.setRealPlayer(si)}}),I.forEach(Kn=>{Kn.parentPlayer?Kn.syncPlayerEvents(Kn.parentPlayer):Kn.destroy()});for(let Kn=0;Kn<fi.length;Kn++){const ci=fi[Kn],si=ci[ur];if(Is(ci,ft),si&&si.hasAnimation)continue;let Gi=[];if(Me.size){let js=Me.get(ci);js&&js.length&&Gi.push(...js);let ws=this.driver.query(ci,$,!0);for(let Ta=0;Ta<ws.length;Ta++){let ar=Me.get(ws[Ta]);ar&&ar.length&&Gi.push(...ar)}}const oo=Gi.filter(js=>!js.destroyed);oo.length?yl(this,ci,oo):this.processLeaveNode(ci)}return fi.length=0,ec.forEach(Kn=>{this.players.push(Kn),Kn.onDone(()=>{Kn.destroy();const ci=this.players.indexOf(Kn);this.players.splice(ci,1)}),Kn.play()}),ec}elementContainsData(h,i){let f=!1;const I=i[ur];return I&&I.setForRemoval&&(f=!0),this.playersByElement.has(i)&&(f=!0),this.playersByQueriedElement.has(i)&&(f=!0),this.statesByElement.has(i)&&(f=!0),this._fetchNamespace(h).elementContainsData(i)||f}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,i,f,I,N){let pe=[];if(i){const Me=this.playersByQueriedElement.get(h);Me&&(pe=Me)}else{const Me=this.playersByElement.get(h);if(Me){const We=!N||N==fs;Me.forEach(ht=>{ht.queued||!We&&ht.triggerName!=I||pe.push(ht)})}}return(f||I)&&(pe=pe.filter(Me=>!(f&&f!=Me.namespaceId||I&&I!=Me.triggerName))),pe}_beforeAnimationBuild(h,i,f){const N=i.element,pe=i.isRemovalTransition?void 0:h,Me=i.isRemovalTransition?void 0:i.triggerName;for(const We of i.timelines){const ht=We.element,Nt=ht!==N,Vt=_i(f,ht,[]);this._getPreviousPlayers(ht,Nt,pe,Me,i.toState).forEach(Wn=>{const An=Wn.getRealPlayer();An.beforeDestroy&&An.beforeDestroy(),Wn.destroy(),Vt.push(Wn)})}cn(N,i.fromStyles)}_buildAnimation(h,i,f,I,N,pe){const Me=i.triggerName,We=i.element,ht=[],Nt=new Set,Vt=new Set,Dn=i.timelines.map(An=>{const Nn=An.element;Nt.add(Nn);const fi=Nn[ur];if(fi&&fi.removedBeforeQueried)return new _e.ZN(An.duration,An.delay);const Mi=Nn!==We,sr=function Ei(u){const h=[];return ms(u,h),h}((f.get(Nn)||qa).map($r=>$r.getRealPlayer())).filter($r=>!!$r.element&&$r.element===Nn),yo=N.get(Nn),Or=pe.get(Nn),Ma=Vn(0,this._normalizer,0,An.keyframes,yo,Or),Sa=this._buildPlayer(An,Ma,sr);if(An.subTimeline&&I&&Vt.add(Nn),Mi){const $r=new Oo(h,Me,Nn);$r.setRealPlayer(Sa),ht.push($r)}return Sa});ht.forEach(An=>{_i(this.playersByQueriedElement,An.element,[]).push(An),An.onDone(()=>function Ss(u,h,i){let f=u.get(h);if(f){if(f.length){const I=f.indexOf(i);f.splice(I,1)}0==f.length&&u.delete(h)}return f}(this.playersByQueriedElement,An.element,An))}),Nt.forEach(An=>dr(An,U));const Wn=xn(Dn);return Wn.onDestroy(()=>{Nt.forEach(An=>Is(An,U)),on(We,i.toStyles)}),Vt.forEach(An=>{_i(I,An,[]).push(Wn)}),Wn}_buildPlayer(h,i,f){return i.length>0?this.driver.animate(h.element,i,h.duration,h.delay,h.easing,f):new _e.ZN(h.duration,h.delay)}}class Oo{constructor(h,i,f){this.namespaceId=h,this.triggerName=i,this.element=f,this._player=new _e.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((i,f)=>{i.forEach(I=>Qn(h,f,void 0,I))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const i=this._player;i.triggerCallback&&h.onStart(()=>i.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,i){_i(this._queuedCallbacks,h,[]).push(i)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const i=this._player;i.triggerCallback&&i.triggerCallback(h)}}function Ts(u){return u&&1===u.nodeType}function oi(u,h){const i=u.style.display;return u.style.display=h??"none",i}function _l(u,h,i,f,I){const N=[];i.forEach(We=>N.push(oi(We)));const pe=[];f.forEach((We,ht)=>{const Nt=new Map;We.forEach(Vt=>{const Dn=h.computeStyle(ht,Vt,I);Nt.set(Vt,Dn),(!Dn||0==Dn.length)&&(ht[ur]=Oa,pe.push(ht))}),u.set(ht,Nt)});let Me=0;return i.forEach(We=>oi(We,N[Me++])),pe}function ma(u,h){const i=new Map;if(u.forEach(Me=>i.set(Me,[])),0==h.length)return i;const I=new Set(h),N=new Map;function pe(Me){if(!Me)return 1;let We=N.get(Me);if(We)return We;const ht=Me.parentNode;return We=i.has(ht)?ht:I.has(ht)?1:pe(ht),N.set(Me,We),We}return h.forEach(Me=>{const We=pe(Me);1!==We&&i.get(We).push(Me)}),i}function dr(u,h){u.classList?.add(h)}function Is(u,h){u.classList?.remove(h)}function yl(u,h,i){xn(i).onDone(()=>u.processLeaveNode(h))}function ms(u,h){for(let i=0;i<u.length;i++){const f=u[i];f instanceof _e.ZE?ms(f.players,h):h.push(f)}}function Wt(u,h,i){const f=i.get(u);if(!f)return!1;let I=h.get(u);return I?f.forEach(N=>I.add(N)):h.set(u,f),i.delete(u),!0}class yn{constructor(h,i,f){this.bodyNode=h,this._driver=i,this._normalizer=f,this._triggerCache={},this.onRemovalComplete=(I,N)=>{},this._transitionEngine=new gl(h,i,f),this._timelineEngine=new Lr(h,i,f),this._transitionEngine.onRemovalComplete=(I,N)=>this.onRemovalComplete(I,N)}registerTrigger(h,i,f,I,N){const pe=h+"-"+I;let Me=this._triggerCache[pe];if(!Me){const We=[],Nt=Zn(this._driver,N,We,[]);if(We.length)throw function _t(u,h){return new l.vHH(3404,!1)}();Me=function Pa(u,h,i){return new qs(u,h,i)}(I,Nt,this._normalizer),this._triggerCache[pe]=Me}this._transitionEngine.registerTrigger(i,I,Me)}register(h,i){this._transitionEngine.register(h,i)}destroy(h,i){this._transitionEngine.destroy(h,i)}onInsert(h,i,f,I){this._transitionEngine.insertNode(h,i,f,I)}onRemove(h,i,f,I){this._transitionEngine.removeNode(h,i,I||!1,f)}disableAnimations(h,i){this._transitionEngine.markElementAsDisabled(h,i)}process(h,i,f,I){if("@"==f.charAt(0)){const[N,pe]=yi(f);this._timelineEngine.command(N,i,pe,I)}else this._transitionEngine.trigger(h,i,f,I)}listen(h,i,f,I,N){if("@"==f.charAt(0)){const[pe,Me]=yi(f);return this._timelineEngine.listen(pe,i,Me,N)}return this._transitionEngine.listen(h,i,f,I,N)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let er=(()=>{class u{constructor(i,f,I){this._element=i,this._startStyles=f,this._endStyles=I,this._state=0;let N=u.initialStylesByElement.get(i);N||u.initialStylesByElement.set(i,N=new Map),this._initialStyles=N}start(){this._state<1&&(this._startStyles&&on(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(on(this._element,this._initialStyles),this._endStyles&&(on(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(cn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(cn(this._element,this._endStyles),this._endStyles=null),on(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function gi(u){let h=null;return u.forEach((i,f)=>{(function ne(u){return"display"===u||"position"===u})(f)&&(h=h||new Map,h.set(f,i))}),h}class Q{constructor(h,i,f,I){this.element=h,this.keyframes=i,this.options=f,this._specialStyles=I,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=f.duration,this._delay=f.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const i=[];return h.forEach(f=>{i.push(Object.fromEntries(f))}),i}_triggerWebAnimation(h,i,f){return h.animate(this._convertKeyframesToObject(i),f)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((f,I)=>{"offset"!==I&&h.set(I,this._finished?f:Xr(this.element,I))}),this.currentSnapshot=h}triggerCallback(h){const i="start"===h?this._onStartFns:this._onDoneFns;i.forEach(f=>f()),i.length=0}}class q{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,i){return!1}containsElement(h,i){return Pe(h,i)}getParentElement(h){return Y(h)}query(h,i,f){return rt(h,i,f)}computeStyle(h,i,f){return window.getComputedStyle(h)[i]}animate(h,i,f,I,N,pe=[]){const We={duration:f,delay:I,fill:0==I?"both":"forwards"};N&&(We.easing=N);const ht=new Map,Nt=pe.filter(Wn=>Wn instanceof Q);(function Qo(u,h){return 0===u||0===h})(f,I)&&Nt.forEach(Wn=>{Wn.currentSnapshot.forEach((An,Nn)=>ht.set(Nn,An))});let Vt=function Ft(u){return u.length?u[0]instanceof Map?u:u.map(h=>Qe(h)):[]}(i).map(Wn=>Pt(Wn));Vt=function ri(u,h,i){if(i.size&&h.length){let f=h[0],I=[];if(i.forEach((N,pe)=>{f.has(pe)||I.push(pe),f.set(pe,N)}),I.length)for(let N=1;N<h.length;N++){let pe=h[N];I.forEach(Me=>pe.set(Me,Xr(u,Me)))}}return h}(h,Vt,ht);const Dn=function Xs(u,h){let i=null,f=null;return Array.isArray(h)&&h.length?(i=gi(h[0]),h.length>1&&(f=gi(h[h.length-1]))):h instanceof Map&&(i=gi(h)),i||f?new er(u,i,f):null}(h,Vt);return new Q(h,Vt,We,Dn)}}var be=j(6895);let Bt=(()=>{class u extends _e._j{constructor(i,f){super(),this._nextAnimationId=0,this._renderer=i.createRenderer(f.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(i){const f=this._nextAnimationId.toString();this._nextAnimationId++;const I=Array.isArray(i)?(0,_e.vP)(i):i;return ho(this._renderer,null,f,"register",[I]),new Yn(f,this._renderer)}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(l.FYo),l.LFG(be.K0))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})();class Yn extends _e.LC{constructor(h,i){super(),this._id=h,this._renderer=i}create(h,i){return new wr(this._id,h,i||{},this._renderer)}}class wr{constructor(h,i,f,I){this.id=h,this.element=i,this._renderer=I,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",f)}_listen(h,i){return this._renderer.listen(this.element,`@@${this.id}:${h}`,i)}_command(h,...i){return ho(this._renderer,this.element,this.id,h,i)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ho(u,h,i,f,I){return u.setProperty(h,`@@${i}:${f}`,I)}const qi="@.disabled";let jo=(()=>{class u{constructor(i,f,I){this.delegate=i,this.engine=f,this._zone=I,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),f.onRemovalComplete=(N,pe)=>{const Me=pe?.parentNode(N);Me&&pe.removeChild(Me,N)}}createRenderer(i,f){const N=this.delegate.createRenderer(i,f);if(!(i&&f&&f.data&&f.data.animation)){let Nt=this._rendererCache.get(N);return Nt||(Nt=new ka("",N,this.engine),this._rendererCache.set(N,Nt)),Nt}const pe=f.id,Me=f.id+"-"+this._currentId;this._currentId++,this.engine.register(Me,i);const We=Nt=>{Array.isArray(Nt)?Nt.forEach(We):this.engine.registerTrigger(pe,Me,i,Nt.name,Nt)};return f.data.animation.forEach(We),new Xa(this,Me,N,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(i,f,I){i>=0&&i<this._microtaskId?this._zone.run(()=>f(I)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(N=>{const[pe,Me]=N;pe(Me)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([f,I]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(l.FYo),l.LFG(yn),l.LFG(l.R0b))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})();class ka{constructor(h,i,f){this.namespaceId=h,this.delegate=i,this.engine=f,this.destroyNode=this.delegate.destroyNode?I=>i.destroyNode(I):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(h,i){return this.delegate.createElement(h,i)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,i){this.delegate.appendChild(h,i),this.engine.onInsert(this.namespaceId,i,h,!1)}insertBefore(h,i,f,I=!0){this.delegate.insertBefore(h,i,f),this.engine.onInsert(this.namespaceId,i,h,I)}removeChild(h,i,f){this.engine.onRemove(this.namespaceId,i,this.delegate,f)}selectRootElement(h,i){return this.delegate.selectRootElement(h,i)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,i,f,I){this.delegate.setAttribute(h,i,f,I)}removeAttribute(h,i,f){this.delegate.removeAttribute(h,i,f)}addClass(h,i){this.delegate.addClass(h,i)}removeClass(h,i){this.delegate.removeClass(h,i)}setStyle(h,i,f,I){this.delegate.setStyle(h,i,f,I)}removeStyle(h,i,f){this.delegate.removeStyle(h,i,f)}setProperty(h,i,f){"@"==i.charAt(0)&&i==qi?this.disableAnimations(h,!!f):this.delegate.setProperty(h,i,f)}setValue(h,i){this.delegate.setValue(h,i)}listen(h,i,f){return this.delegate.listen(h,i,f)}disableAnimations(h,i){this.engine.disableAnimations(h,i)}}class Xa extends ka{constructor(h,i,f,I){super(i,f,I),this.factory=h,this.namespaceId=i}setProperty(h,i,f){"@"==i.charAt(0)?"."==i.charAt(1)&&i==qi?this.disableAnimations(h,f=void 0===f||!!f):this.engine.process(this.namespaceId,h,i.slice(1),f):this.delegate.setProperty(h,i,f)}listen(h,i,f){if("@"==i.charAt(0)){const I=function As(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(h);let N=i.slice(1),pe="";return"@"!=N.charAt(0)&&([N,pe]=function Rl(u){const h=u.indexOf(".");return[u.substring(0,h),u.slice(h+1)]}(N)),this.engine.listen(this.namespaceId,I,N,pe,Me=>{this.factory.scheduleListenerCallback(Me._data||-1,f,Me)})}return this.delegate.listen(h,i,f)}}let Ll=(()=>{class u extends yn{constructor(i,f,I,N){super(i.body,f,I)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(be.K0),l.LFG(Rt),l.LFG(zr),l.LFG(l.z2F))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})();const ga=[{provide:_e._j,useClass:Bt},{provide:zr,useFactory:function Sc(){return new Ds}},{provide:yn,useClass:Ll},{provide:l.FYo,useFactory:function Tc(u,h,i){return new jo(u,h,i)},deps:[T.se,yn,l.R0b]}],Js=[{provide:Rt,useFactory:()=>new q},{provide:l.QbO,useValue:"BrowserAnimations"},...ga],Ja=[{provide:Rt,useClass:ln},{provide:l.QbO,useValue:"NoopAnimations"},...ga];let Qs=(()=>{class u{static withConfig(i){return{ngModule:u,providers:i.disableAnimations?Ja:Js}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:Js,imports:[T.b2]}),u})(),vl=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[be.ez]}),u})();function Ra(u,h,i,f,I,N,pe){try{var Me=u[N](pe),We=Me.value}catch(ht){return void i(ht)}Me.done?h(We):Promise.resolve(We).then(f,I)}function Sr(u){return function(){var h=this,i=arguments;return new Promise(function(f,I){var N=u.apply(h,i);function pe(We){Ra(N,f,I,pe,Me,"next",We)}function Me(We){Ra(N,f,I,pe,Me,"throw",We)}pe(void 0)})}}var H=j(1943),ue=j(7579);class K extends ue.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(h){const{hasError:i,_hasValue:f,_value:I,thrownError:N,isStopped:pe,_isComplete:Me}=this;i?h.error(N):(pe||Me)&&(f&&h.next(I),h.complete())}next(h){this.isStopped||(this._value=h,this._hasValue=!0)}complete(){const{_hasValue:h,_value:i,_isComplete:f}=this;f||(this._isComplete=!0,h&&super.next(i),super.complete())}}var we=j(727),Ye=j(590);let Ct=(()=>{class u{constructor(i){this.zone=i,this.mapCreated=new K,this.mapLoaded=new K,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new we.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(i){this.zone.onStable.pipe((0,Ye.P)()).subscribe(()=>{this.createMap(i.mapOptions),this.hookEvents(i.mapEvents),this.mapEvents=i.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),i.mapOptions.terrain&&this.mapInstance.on("load",()=>{this.updateTerrain(i.mapOptions.terrain)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(i)})}updateMaxZoom(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(i)})}updateMinPitch(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(i)})}updateMaxPitch(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(i)})}updateRenderWorldCopies(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(i)})}updateScrollZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(i)})}updateMaxBounds(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(i)})}updateTerrain(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setTerrain(i)})}getTerrain(){return this.zone.runOutsideAngular(()=>this.mapInstance.getTerrain())}changeCanvasCursor(i){this.mapInstance.getCanvasContainer().style.cursor=i}queryRenderedFeatures(i,f){return this.mapInstance.queryRenderedFeatures(i,f)}panTo(i,f){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(i,f)})}move(i,f,I,N,pe,Me){return this.zone.runOutsideAngular(()=>{this.mapInstance[i]({...f,zoom:I??this.mapInstance.getZoom(),center:N??this.mapInstance.getCenter(),bearing:pe??this.mapInstance.getBearing(),pitch:Me??this.mapInstance.getPitch()})})}addLayer(i,f,I){this.zone.runOutsideAngular(()=>{Object.keys(i.layerOptions).forEach(N=>{void 0===i.layerOptions[N]&&delete i.layerOptions[N]}),this.mapInstance.addLayer(i.layerOptions,I),f&&(i.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerClick.emit(N)})}),i.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerDblClick.emit(N)})}),i.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseDown.emit(N)})}),i.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseUp.emit(N)})}),i.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseEnter.emit(N)})}),i.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseLeave.emit(N)})}),i.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseMove.emit(N)})}),i.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseOver.emit(N)})}),i.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseOut.emit(N)})}),i.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerContextMenu.emit(N)})}),i.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerTouchStart.emit(N)})}),i.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerTouchEnd.emit(N)})}),i.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerTouchCancel.emit(N)})}))})}removeLayer(i){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(i)&&this.mapInstance.removeLayer(i)})}addMarker(i){const f={offset:i.markersOptions.offset,anchor:i.markersOptions.anchor,draggable:!!i.markersOptions.draggable,rotationAlignment:i.markersOptions.rotationAlignment,pitchAlignment:i.markersOptions.pitchAlignment,clickTolerance:i.markersOptions.clickTolerance};i.markersOptions.element.childNodes.length>0&&(f.element=i.markersOptions.element);const I=new H.Marker(f);return i.markersEvents.markerDragStart.observers.length&&I.on("dragstart",pe=>{if(pe){const{target:Me}=pe;this.zone.run(()=>{i.markersEvents.markerDragStart.emit(Me)})}}),i.markersEvents.markerDrag.observers.length&&I.on("drag",pe=>{if(pe){const{target:Me}=pe;this.zone.run(()=>{i.markersEvents.markerDrag.emit(Me)})}}),i.markersEvents.markerDragEnd.observers.length&&I.on("dragend",pe=>{if(pe){const{target:Me}=pe;this.zone.run(()=>{i.markersEvents.markerDragEnd.emit(Me)})}}),I.setLngLat(i.markersOptions.feature?i.markersOptions.feature.geometry.coordinates:i.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(I.addTo(this.mapInstance),I))}removeMarker(i){this.markersToRemove.push(i)}createPopup(i,f){return this.zone.runOutsideAngular(()=>{Object.keys(i.popupOptions).forEach(N=>void 0===i.popupOptions[N]&&delete i.popupOptions[N]);const I=new H.Popup(i.popupOptions);return I.setDOMContent(f),i.popupEvents.popupClose.observers.length&&I.on("close",()=>{this.zone.run(()=>{i.popupEvents.popupClose.emit()})}),i.popupEvents.popupOpen.observers.length&&I.on("open",()=>{this.zone.run(()=>{i.popupEvents.popupOpen.emit()})}),I})}addPopupToMap(i,f,I=!1){return this.zone.runOutsideAngular(()=>{I&&i._listeners&&delete i._listeners.open,i.setLngLat(f),i.addTo(this.mapInstance)})}addPopupToMarker(i,f){return this.zone.runOutsideAngular(()=>{i.setPopup(f)})}removePopupFromMap(i,f=!1){f&&i._listeners&&delete i._listeners.close,this.popupsToRemove.push(i)}removePopupFromMarker(i){return this.zone.runOutsideAngular(()=>{i.setPopup(void 0)})}addControl(i,f){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(i,f)})}removeControl(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(i)})}loadAndAddImage(i,f,I){var N=this;return Sr(function*(){return N.zone.runOutsideAngular(()=>new Promise((pe,Me)=>{N.mapInstance.loadImage(f,(We,ht)=>{We?Me(We):(N.addImage(i,ht,I),pe())})}))})()}addImage(i,f,I){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(i,f,I)})}removeImage(i){this.imageIdsToRemove.push(i)}addSource(i,f){return this.zone.runOutsideAngular(()=>{Object.keys(f).forEach(I=>void 0===f[I]&&delete f[I]),this.mapInstance.addSource(i,f)})}getSource(i){return this.mapInstance.getSource(i)}removeSource(i){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(i).forEach(f=>this.mapInstance.removeLayer(f.id)),this.mapInstance.removeSource(i)})}setAllLayerPaintProperty(i,f){return this.zone.runOutsideAngular(()=>{Object.keys(f).forEach(I=>{this.mapInstance.setPaintProperty(i,I,f[I])})})}setAllLayerLayoutProperty(i,f){return this.zone.runOutsideAngular(()=>{Object.keys(f).forEach(I=>{this.mapInstance.setLayoutProperty(i,I,f[I])})})}setLayerFilter(i,f){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(i,f)})}setLayerBefore(i,f){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(i,f)})}setLayerZoomRange(i,f,I){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(i,f||0,I||20)})}fitBounds(i,f){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(i,f)})}fitScreenCoordinates(i,f,I){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(i[0],i[1],f,I)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(i){l.R0b.assertNotInAngularZone(),Object.keys(i).forEach(I=>{void 0===i[I]&&delete i[I]}),this.mapInstance=new H.Map(i),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(i.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const i of this.markersToRemove)i.remove();this.markersToRemove=[]}removePopups(){for(const i of this.popupsToRemove)i.remove();this.popupsToRemove=[]}removeImages(){for(const i of this.imageIdsToRemove)this.mapInstance.removeImage(i);this.imageIdsToRemove=[]}findLayersBySourceId(i){const f=this.mapInstance.getStyle().layers;return null==f?[]:f.filter(I=>"source"in I&&I.source===i)}hookEvents(i){this.mapInstance.on("load",f=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{i.mapLoad.emit(f.target)})}),i.mapResize.observers.length&&this.mapInstance.on("resize",f=>this.zone.run(()=>{i.mapResize.emit(f)})),i.mapRemove.observers.length&&this.mapInstance.on("remove",f=>this.zone.run(()=>{i.mapRemove.emit(f)})),i.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",f=>this.zone.run(()=>{i.mapMouseDown.emit(f)})),i.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",f=>this.zone.run(()=>{i.mapMouseUp.emit(f)})),i.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",f=>this.zone.run(()=>{i.mapMouseMove.emit(f)})),i.mapClick.observers.length&&this.mapInstance.on("click",f=>this.zone.run(()=>{i.mapClick.emit(f)})),i.mapDblClick.observers.length&&this.mapInstance.on("dblclick",f=>this.zone.run(()=>{i.mapDblClick.emit(f)})),i.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",f=>this.zone.run(()=>{i.mapMouseOver.emit(f)})),i.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",f=>this.zone.run(()=>{i.mapMouseOut.emit(f)})),i.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",f=>this.zone.run(()=>{i.mapContextMenu.emit(f)})),i.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",f=>this.zone.run(()=>{i.mapTouchStart.emit(f)})),i.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",f=>this.zone.run(()=>{i.mapTouchEnd.emit(f)})),i.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",f=>this.zone.run(()=>{i.mapTouchMove.emit(f)})),i.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",f=>this.zone.run(()=>{i.mapTouchCancel.emit(f)})),i.mapWheel.observers.length&&this.mapInstance.on("wheel",f=>this.zone.run(()=>{i.mapWheel.emit(f)})),i.moveStart.observers.length&&this.mapInstance.on("movestart",f=>this.zone.run(()=>i.moveStart.emit(f))),i.move.observers.length&&this.mapInstance.on("move",f=>this.zone.run(()=>i.move.emit(f))),i.moveEnd.observers.length&&this.mapInstance.on("moveend",f=>this.zone.run(()=>i.moveEnd.emit(f))),i.mapDragStart.observers.length&&this.mapInstance.on("dragstart",f=>this.zone.run(()=>{i.mapDragStart.emit(f)})),i.mapDrag.observers.length&&this.mapInstance.on("drag",f=>this.zone.run(()=>{i.mapDrag.emit(f)})),i.mapDragEnd.observers.length&&this.mapInstance.on("dragend",f=>this.zone.run(()=>{i.mapDragEnd.emit(f)})),i.zoomStart.observers.length&&this.mapInstance.on("zoomstart",f=>this.zone.run(()=>i.zoomStart.emit(f))),i.zoomEvt.observers.length&&this.mapInstance.on("zoom",f=>this.zone.run(()=>i.zoomEvt.emit(f))),i.zoomEnd.observers.length&&this.mapInstance.on("zoomend",f=>this.zone.run(()=>i.zoomEnd.emit(f))),i.rotateStart.observers.length&&this.mapInstance.on("rotatestart",f=>this.zone.run(()=>i.rotateStart.emit(f))),i.rotate.observers.length&&this.mapInstance.on("rotate",f=>this.zone.run(()=>i.rotate.emit(f))),i.rotateEnd.observers.length&&this.mapInstance.on("rotateend",f=>this.zone.run(()=>i.rotateEnd.emit(f))),i.pitchStart.observers.length&&this.mapInstance.on("pitchstart",f=>this.zone.run(()=>i.pitchStart.emit(f))),i.pitchEvt.observers.length&&this.mapInstance.on("pitch",f=>this.zone.run(()=>i.pitchEvt.emit(f))),i.pitchEnd.observers.length&&this.mapInstance.on("pitchend",f=>this.zone.run(()=>i.pitchEnd.emit(f))),i.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",f=>this.zone.run(()=>i.boxZoomStart.emit(f))),i.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",f=>this.zone.run(()=>i.boxZoomEnd.emit(f))),i.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",f=>this.zone.run(()=>i.boxZoomCancel.emit(f))),i.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",f=>this.zone.run(()=>i.webGlContextLost.emit(f))),i.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",f=>this.zone.run(()=>i.webGlContextRestored.emit(f))),i.render.observers.length&&this.mapInstance.on("render",f=>this.zone.run(()=>i.render.emit(f))),i.mapError.observers.length&&this.mapInstance.on("error",f=>this.zone.run(()=>{i.mapError.emit(f)})),i.data.observers.length&&this.mapInstance.on("data",f=>this.zone.run(()=>i.data.emit(f))),i.styleData.observers.length&&this.mapInstance.on("styledata",f=>this.zone.run(()=>i.styleData.emit(f))),i.sourceData.observers.length&&this.mapInstance.on("sourcedata",f=>this.zone.run(()=>i.sourceData.emit(f))),i.dataLoading.observers.length&&this.mapInstance.on("dataloading",f=>this.zone.run(()=>i.dataLoading.emit(f))),i.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",f=>this.zone.run(()=>i.styleDataLoading.emit(f))),i.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",f=>this.zone.run(()=>i.sourceDataLoading.emit(f))),i.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",f=>this.zone.run(()=>i.styleImageMissing.emit(f))),i.idle.observers.length&&this.mapInstance.on("idle",f=>this.zone.run(()=>i.idle.emit(f)))}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(l.R0b))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})();const zt=["content"],kn=["*"];class Ni{constructor(h){this.container=h}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let ni=(()=>{class u{constructor(i){this.mapService=i}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new Ni(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position)}))}ngOnDestroy(){this.mapService.mapInstance.hasControl(this.control)&&this.mapService.removeControl(this.control)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-control"]],viewQuery:function(i,f){if(1&i&&l.Gf(zt,7),2&i){let I;l.iGM(I=l.CRH())&&(f.content=I.first)}},inputs:{position:"position"},ngContentSelectors:kn,decls:3,vars:0,consts:[[1,"maplibregl-ctrl"],["content",""]],template:function(i,f){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),u})();var vi=j(4968),$n=j(9300),tr=j(8505),Di=j(3900),bi=j(2722),Qr=j(5698),Wr=j(8372);let Ki=(()=>{class u{constructor(i,f){this.mapService=i,this.zone=f,this.type="geojson",this.updateFeatureData=new ue.x,this.sub=new we.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const i=this.mapService.mapLoaded$.subscribe(()=>{this.init();const f=(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,$n.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(f)});this.sub.add(i)}ngOnChanges(i){if(this.sourceAdded&&((i.maxzoom&&!i.maxzoom.isFirstChange()||i.attribution&&!i.attribution.isFirstChange()||i.buffer&&!i.buffer.isFirstChange()||i.tolerance&&!i.tolerance.isFirstChange()||i.cluster&&!i.cluster.isFirstChange()||i.clusterRadius&&!i.clusterRadius.isFirstChange()||i.clusterMaxZoom&&!i.clusterMaxZoom.isFirstChange()||i.clusterMinPoints&&!i.clusterMinPoints.isFirstChange()||i.clusterProperties&&!i.clusterProperties.isFirstChange()||i.lineMetrics&&!i.lineMetrics.isFirstChange()||i.generateId&&!i.generateId.isFirstChange()||i.promoteId&&!i.promoteId.isFirstChange()||i.filter&&!i.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),i.data&&!i.data.isFirstChange())){const f=this.mapService.getSource(this.id);if(void 0===f)return;f.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(i){var f=this;return Sr(function*(){const I=f.mapService.getSource(f.id);return f.zone.run(Sr(function*(){return new Promise((N,pe)=>{I.getClusterExpansionZoom(i,(Me,We)=>{Me?pe(Me):N(We)})})}))})()}getClusterChildren(i){var f=this;return Sr(function*(){const I=f.mapService.getSource(f.id);return f.zone.run(Sr(function*(){return new Promise((N,pe)=>{I.getClusterChildren(i,(Me,We)=>{Me?pe(Me):N(We)})})}))})()}getClusterLeaves(i,f,I){var N=this;return Sr(function*(){const pe=N.mapService.getSource(N.id);return N.zone.run(Sr(function*(){return new Promise((Me,We)=>{pe.getClusterLeaves(i,f,I,(ht,Nt)=>{ht?We(ht):Me(Nt)})})}))})()}_addFeature(i){this.data.features.push(i),this.updateFeatureData.next(void 0)}_removeFeature(i){const f=this.data,I=f.features.indexOf(i);I>-1&&f.features.splice(I,1),this.updateFeatureData.next(void 0)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const f=this.updateFeatureData.pipe((0,Wr.b)(0)).subscribe(()=>{const I=this.mapService.getSource(this.id);void 0!==I&&I.setData(this.data)});this.sub.add(f),this.sourceAdded=!0}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[l.TTD],decls:0,vars:0,template:function(i,f){},encapsulation:2,changeDetection:0}),u})(),Tr=(()=>{class u{constructor(i){this.geoJSONSourceComponent=i,this.type="Feature"}ngOnInit(){this.id||(this.id=this.geoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.geoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.geoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(i){this.feature.geometry.coordinates=i,this.geoJSONSourceComponent.updateFeatureData.next(void 0)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36((0,l.Gpc)(()=>Ki)))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(i,f){},encapsulation:2,changeDetection:0}),u})(),Ho=(()=>{class u{constructor(i,f,I){this.mapService=i,this.ngZone=f,this.featureComponent=I,this.featureDragStart=new l.vpe,this.featureDragEnd=new l.vpe,this.featureDrag=new l.vpe,this.sub=new we.w0}ngOnInit(){let i,f,I;if(!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(i=this.layer.layerMouseEnter,f=this.layer.layerMouseLeave,I=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(i,f,I)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(i,f,I){let N=!1,pe=!1;this.mapService.mapCreated$.subscribe(()=>{const Me=(0,vi.R)(this.mapService.mapInstance,"mouseup"),We=i.pipe((0,$n.h)(()=>!N),(0,$n.h)(Vt=>this.filterFeature(Vt)),(0,tr.b)(()=>{pe=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,Di.w)(()=>(0,vi.R)(this.mapService.mapInstance,"mousedown").pipe((0,bi.R)(f)))),ht=We.pipe((0,Di.w)(()=>(0,vi.R)(this.mapService.mapInstance,"mousemove").pipe((0,bi.R)(Me)))),Nt=We.pipe((0,Di.w)(()=>Me.pipe((0,Qr.q)(1))));this.sub.add(We.subscribe(Vt=>{N=!0,this.featureDragStart.observers.length&&this.ngZone.run(()=>{this.featureDragStart.emit(Vt)})})),this.sub.add(ht.subscribe(Vt=>{I([Vt.lngLat.lng,Vt.lngLat.lat]),this.featureDrag.observers.length&&this.ngZone.run(()=>{this.featureDrag.emit(Vt)})})),this.sub.add(Nt.subscribe(Vt=>{N=!1,this.featureDragEnd.observers.length&&this.ngZone.run(()=>{this.featureDragEnd.emit(Vt)}),pe||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(f.pipe((0,tr.b)(()=>pe=!1),(0,$n.h)(()=>!N)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(i){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(i.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(l.R0b),l.Y36(Tr,9))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag"}}),u})();var Ir=j(4004),$o=j(8675);let Ar=(()=>{class u{constructor(i){this.mapService=i,this.layerClick=new l.vpe,this.layerDblClick=new l.vpe,this.layerMouseDown=new l.vpe,this.layerMouseUp=new l.vpe,this.layerMouseEnter=new l.vpe,this.layerMouseLeave=new l.vpe,this.layerMouseMove=new l.vpe,this.layerMouseOver=new l.vpe,this.layerMouseOut=new l.vpe,this.layerContextMenu=new l.vpe,this.layerTouchStart=new l.vpe,this.layerTouchEnd=new l.vpe,this.layerTouchCancel=new l.vpe,this.layerAdded=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,Di.w)(()=>(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,Ir.U)(()=>!1),(0,$n.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,$o.O)(!0)))).subscribe(i=>this.init(i))}ngOnChanges(i){!this.layerAdded||(i.paint&&!i.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,i.paint.currentValue),i.layout&&!i.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,i.layout.currentValue),i.filter&&!i.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,i.filter.currentValue),i.before&&!i.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,i.before.currentValue),(i.minzoom&&!i.minzoom.isFirstChange()||i.maxzoom&&!i.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&(this.mapService.removeLayer(this.id),void 0!==this.sourceIdAdded&&this.mapService.getSource(this.sourceIdAdded)&&this.mapService.removeSource(this.sourceIdAdded)),this.sub&&this.sub.unsubscribe()}init(i){const f={layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel}};this.removeSource&&"string"!=typeof this.source&&void 0===this.mapService.getSource(this.id)&&(this.sourceIdAdded=this.id),this.mapService.addLayer(f,i,this.before),void 0!==this.sourceIdAdded&&void 0===this.mapService.getSource(this.sourceIdAdded)&&(this.sourceIdAdded=void 0),this.layerAdded=!0}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",removeSource:"removeSource",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel"},features:[l.TTD],decls:0,vars:0,template:function(i,f){},encapsulation:2}),u})(),La=(()=>{class u{constructor(i,f){this.mapService=i,this.zone=f,this.imageError=new l.vpe,this.imageLoaded=new l.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,Di.w)(()=>(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,$o.O)(void 0),(0,$n.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(i){(i.data&&!i.data.isFirstChange()||i.options&&!i.options.isFirstChange()||i.url&&!i.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var i=this;return Sr(function*(){if(i.isAdding=!0,i.data)i.mapService.addImage(i.id,i.data,i.options),i.isAdded=!0,i.isAdding=!1;else if(i.url)try{yield i.mapService.loadAndAddImage(i.id,i.url,i.options),i.isAdded=!0,i.isAdding=!1,i.zone.run(()=>{i.imageLoaded.emit()})}catch(f){i.zone.run(()=>{i.imageError.emit(f)})}})()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded"},features:[l.TTD],decls:0,vars:0,template:function(i,f){},encapsulation:2}),u})(),bl=(()=>{class u{constructor(i){this.mapService=i,this.type="vector",this.sourceAdded=!1,this.sub=new we.w0}ngOnInit(){const i=this.mapService.mapLoaded$.subscribe(()=>{this.init();const f=(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,$n.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(f)});this.sub.add(i)}ngOnChanges(i){if(this.sourceAdded)if(i.bounds&&!i.bounds.isFirstChange()||i.scheme&&!i.scheme.isFirstChange()||i.minzoom&&!i.minzoom.isFirstChange()||i.maxzoom&&!i.maxzoom.isFirstChange()||i.attribution&&!i.attribution.isFirstChange()||i.promoteId&&!i.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(i.url&&!i.url.isFirstChange()||i.tiles&&!i.tiles.isFirstChange()){const f=this.mapService.getSource(this.id);if(void 0===f)return;i.url&&this.url&&f.setUrl(this.url),i.tiles&&this.tiles&&f.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[l.TTD],decls:0,vars:0,template:function(i,f){},encapsulation:2,changeDetection:0}),u})(),_a=(()=>{class u{constructor(i){this.mapService=i,this.type="image"}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(i){if(void 0===this.sourceId)return;const f=this.mapService.getSource(this.sourceId);void 0!==f&&f.updateImage({url:void 0===i.url?void 0:this.url,coordinates:void 0===i.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[l.TTD],decls:0,vars:0,template:function(i,f){},encapsulation:2,changeDetection:0}),u})(),Tn=(()=>{class u{constructor(i){this.mapService=i,this.type="raster-dem",this.sourceAdded=!1,this.sub=new we.w0}ngOnInit(){const i=this.mapService.mapLoaded$.subscribe(()=>{this.init();const f=(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,$n.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(f)});this.sub.add(i)}ngOnChanges(i){!this.sourceAdded||(i.url&&!i.url.isFirstChange()||i.tiles&&!i.tiles.isFirstChange()||i.bounds&&!i.bounds.isFirstChange()||i.minzoom&&!i.minzoom.isFirstChange()||i.maxzoom&&!i.maxzoom.isFirstChange()||i.tileSize&&!i.tileSize.isFirstChange()||i.attribution&&!i.attribution.isFirstChange()||i.encoding&&!i.encoding.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize,attribution:this.attribution,encoding:this.encoding}),this.sourceAdded=!0}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-raster-dem-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize",attribution:"attribution",encoding:"encoding"},features:[l.TTD],decls:0,vars:0,template:function(i,f){},encapsulation:2,changeDetection:0}),u})();const Fa=["content"],ya=["*"];let Ps=(()=>{class u{constructor(i){this.mapService=i,this.markerDragStart=new l.vpe,this.markerDragEnd=new l.vpe,this.markerDrag=new l.vpe}ngOnInit(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(i){i.lngLat&&!i.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),i.feature&&!i.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),i.draggable&&!i.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),i.popupShown&&!i.popupShown.isFirstChange()&&(i.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),i.pitchAlignment&&!i.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(i.pitchAlignment.currentValue),i.rotationAlignment&&!i.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(i.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(i){this.markerInstance.setLngLat(i)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-marker"]],viewQuery:function(i,f){if(1&i&&l.Gf(Fa,7),2&i){let I;l.iGM(I=l.CRH())&&(f.content=I.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},features:[l.TTD],ngContentSelectors:ya,decls:3,vars:2,consts:[["content",""]],template:function(i,f){1&i&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA()),2&i&&l.Tol(f.className)},encapsulation:2,changeDetection:0}),u})();const bn=["content"],xl=["*"];let _s=(()=>{class u{constructor(i){this.mapService=i,this.popupClose=new l.vpe,this.popupOpen=new l.vpe}ngOnInit(){if(this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(i){if(i.feature&&!i.feature.isFirstChange()){const f=i.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const I=this.createPopup();this.mapService.addPopupToMap(I,f,this.popupInstance.isOpen()),this.popupInstance=I}if(i.lngLat&&!i.lngLat.isFirstChange()&&this.popupInstance.setLngLat(this.lngLat),i.marker&&!i.marker.isFirstChange()){const f=i.marker.previousValue;f.markerInstance&&this.mapService.removePopupFromMarker(f.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}i.offset&&!i.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(i){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(i,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,i)}})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-popup"]],viewQuery:function(i,f){if(1&i&&l.Gf(bn,7),2&i){let I;l.iGM(I=l.CRH())&&(f.content=I.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},features:[l.TTD],ngContentSelectors:xl,decls:3,vars:0,consts:[["content",""]],template:function(i,f){1&i&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),u})(),wl=(()=>{class u{constructor(i,f){this.mapService=i,this.controlComponent=f}onFullscreen(){this.mapService.mapInstance.resize()}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new H.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(ni,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglFullscreen",""]],hostBindings:function(i,f){1&i&&l.NdJ("webkitfullscreenchange",function(N){return f.onFullscreen(N.target)},!1,l.Jf7)},inputs:{container:"container"}}),u})(),Os=(()=>{class u{constructor(i,f){this.mapService=i,this.controlComponent=f,this.geolocate=new l.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation};Object.keys(i).forEach(f=>{void 0===i[f]&&delete i[f]}),this.controlComponent.control=new H.GeolocateControl(i),this.controlComponent.control.on("geolocate",f=>{this.geolocate.emit(f)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(ni,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),u})(),Cl=(()=>{class u{constructor(i,f){this.mapService=i,this.controlComponent=f}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.showCompass&&(i.showCompass=this.showCompass),void 0!==this.showZoom&&(i.showZoom=this.showZoom),null!=this.visualizePitch&&(i.visualizePitch=this.visualizePitch),this.controlComponent.control=new H.NavigationControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(ni,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom",visualizePitch:"visualizePitch"}}),u})(),el=(()=>{class u{constructor(i,f){this.mapService=i,this.controlComponent=f}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.compact&&(i.compact=this.compact),void 0!==this.customAttribution&&(i.customAttribution=this.customAttribution),this.controlComponent.control=new H.AttributionControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(ni,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),u})(),Qc=(()=>{class u{constructor(i,f){this.mapService=i,this.controlComponent=f}ngOnChanges(i){i.unit&&!i.unit.isFirstChange()&&this.controlComponent.control.setUnit(i.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.maxWidth&&(i.maxWidth=this.maxWidth),void 0!==this.unit&&(i.unit=this.unit),this.controlComponent.control=new H.ScaleControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(ni,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l.TTD]}),u})();var ic=j(6451);function rc(u,h){1&u&&l.GkF(0)}const tl=function(u){return{$implicit:u}};function is(u,h){if(1&u&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,rc,1,0,"ng-container",4),l.qZA(),l.BQk()),2&u){const i=l.oxw().$implicit,f=l.oxw();l.xp6(1),l.Q6J("feature",i),l.xp6(1),l.Q6J("ngTemplateOutlet",f.clusterPointTpl)("ngTemplateOutletContext",l.VKq(3,tl,i))}}function Fl(u,h){1&u&&l.GkF(0)}function qr(u,h){if(1&u&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,Fl,1,0,"ng-container",4),l.qZA(),l.BQk()),2&u){const i=l.oxw().$implicit,f=l.oxw();l.xp6(1),l.Q6J("feature",i),l.xp6(1),l.Q6J("ngTemplateOutlet",f.pointTpl)("ngTemplateOutletContext",l.VKq(3,tl,i))}}function ea(u,h){if(1&u&&(l.ynx(0),l.YNc(1,is,3,5,"ng-container",2),l.YNc(2,qr,3,5,"ng-container",2),l.BQk()),2&u){const i=h.$implicit;l.xp6(1),l.Q6J("ngIf",i.properties.cluster),l.xp6(1),l.Q6J("ngIf",!i.properties.cluster)}}const oc=function(){return{"circle-radius":0}};let rs=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["ng-template","mglPoint",""]]}),u})(),Na=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["ng-template","mglClusterPoint",""]]}),u})(),Nl=0,sc=(()=>{class u{constructor(i,f,I){this.mapService=i,this.changeDetectorRef=f,this.ngZone=I,this.layerId="mgl-markers-for-clusters-"+Nl++,this.sub=new we.w0}ngAfterContentInit(){const f=this.mapService.mapCreated$.pipe((0,Di.w)(()=>(0,vi.R)(this.mapService.mapInstance,"data").pipe((0,$n.h)(I=>I.sourceId===this.source&&"metadata"!==I.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,Di.w)(()=>(0,ic.T)((0,vi.R)(this.mapService.mapInstance,"move"),(0,vi.R)(this.mapService.mapInstance,"moveend")).pipe((0,$o.O)(void 0)))).subscribe(()=>{this.ngZone.run(()=>{this.updateCluster()})});this.sub.add(f)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(i,f){return f.id}updateCluster(){const i={layers:[this.layerId]};this.pointTpl||(i.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(i),this.changeDetectorRef.markForCheck()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(l.sBO),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(i,f,I){if(1&i&&(l.Suo(I,rs,5,l.Rgc),l.Suo(I,Na,5,l.Rgc)),2&i){let N;l.iGM(N=l.CRH())&&(f.pointTpl=N.first),l.iGM(N=l.CRH())&&(f.clusterPointTpl=N.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,f){1&i&&(l._UZ(0,"mgl-layer",0),l.YNc(1,ea,3,2,"ng-container",1)),2&i&&(l.Q6J("id",f.layerId)("source",f.source)("paint",l.DdM(5,oc)),l.xp6(1),l.Q6J("ngForOf",f.clusterPoints)("ngForTrackBy",f.trackByClusterPoint))},dependencies:[be.sg,be.O5,be.tP,Ar,Ps],encapsulation:2,changeDetection:0}),u})(),os=(()=>{class u{constructor(i,f){this.mapService=i,this.controlComponent=f}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new H.TerrainControl({source:this.source,exaggeration:this.exaggeration??1}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct),l.Y36(ni,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglTerrain",""]],inputs:{source:"source",exaggeration:"exaggeration"}}),u})();const hr=["container"];let di=(()=>{class u{constructor(i){this.mapService=i,this.movingMethod="flyTo",this.mapResize=new l.vpe,this.mapRemove=new l.vpe,this.mapMouseDown=new l.vpe,this.mapMouseUp=new l.vpe,this.mapMouseMove=new l.vpe,this.mapClick=new l.vpe,this.mapDblClick=new l.vpe,this.mapMouseOver=new l.vpe,this.mapMouseOut=new l.vpe,this.mapContextMenu=new l.vpe,this.mapTouchStart=new l.vpe,this.mapTouchEnd=new l.vpe,this.mapTouchMove=new l.vpe,this.mapTouchCancel=new l.vpe,this.mapWheel=new l.vpe,this.moveStart=new l.vpe,this.move=new l.vpe,this.moveEnd=new l.vpe,this.mapDragStart=new l.vpe,this.mapDrag=new l.vpe,this.mapDragEnd=new l.vpe,this.zoomStart=new l.vpe,this.zoomEvt=new l.vpe,this.zoomEnd=new l.vpe,this.rotateStart=new l.vpe,this.rotate=new l.vpe,this.rotateEnd=new l.vpe,this.pitchStart=new l.vpe,this.pitchEvt=new l.vpe,this.pitchEnd=new l.vpe,this.boxZoomStart=new l.vpe,this.boxZoomEnd=new l.vpe,this.boxZoomCancel=new l.vpe,this.webGlContextLost=new l.vpe,this.webGlContextRestored=new l.vpe,this.mapLoad=new l.vpe,this.idle=new l.vpe,this.render=new l.vpe,this.mapError=new l.vpe,this.data=new l.vpe,this.styleData=new l.vpe,this.sourceData=new l.vpe,this.dataLoading=new l.vpe,this.styleDataLoading=new l.vpe,this.sourceDataLoading=new l.vpe,this.styleImageMissing=new l.vpe}get mapInstance(){return this.mapService.mapInstance}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,terrain:this.terrain},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(i){var f=this;return Sr(function*(){yield f.mapService.mapCreated$.toPromise(),i.cursorStyle&&!i.cursorStyle.isFirstChange()&&f.mapService.changeCanvasCursor(i.cursorStyle.currentValue),i.minZoom&&!i.minZoom.isFirstChange()&&f.mapService.updateMinZoom(i.minZoom.currentValue),i.maxZoom&&!i.maxZoom.isFirstChange()&&f.mapService.updateMaxZoom(i.maxZoom.currentValue),i.minPitch&&!i.minPitch.isFirstChange()&&f.mapService.updateMinPitch(i.minPitch.currentValue),i.maxPitch&&!i.maxPitch.isFirstChange()&&f.mapService.updateMaxPitch(i.maxPitch.currentValue),i.renderWorldCopies&&!i.renderWorldCopies.isFirstChange()&&f.mapService.updateRenderWorldCopies(i.renderWorldCopies.currentValue),i.scrollZoom&&!i.scrollZoom.isFirstChange()&&f.mapService.updateScrollZoom(i.scrollZoom.currentValue),i.dragRotate&&!i.dragRotate.isFirstChange()&&f.mapService.updateDragRotate(i.dragRotate.currentValue),i.touchPitch&&!i.touchPitch.isFirstChange()&&f.mapService.updateTouchPitch(i.touchPitch.currentValue),i.touchZoomRotate&&!i.touchZoomRotate.isFirstChange()&&f.mapService.updateTouchZoomRotate(i.touchZoomRotate.currentValue),i.doubleClickZoom&&!i.doubleClickZoom.isFirstChange()&&f.mapService.updateDoubleClickZoom(i.doubleClickZoom.currentValue),i.keyboard&&!i.keyboard.isFirstChange()&&f.mapService.updateKeyboard(i.keyboard.currentValue),i.dragPan&&!i.dragPan.isFirstChange()&&f.mapService.updateDragPan(i.dragPan.currentValue),i.boxZoom&&!i.boxZoom.isFirstChange()&&f.mapService.updateBoxZoom(i.boxZoom.currentValue),i.style&&!i.style.isFirstChange()&&f.mapService.updateStyle(i.style.currentValue),i.maxBounds&&!i.maxBounds.isFirstChange()&&f.mapService.updateMaxBounds(i.maxBounds.currentValue),i.fitBounds&&i.fitBounds.currentValue&&!i.fitBounds.isFirstChange()&&f.mapService.fitBounds(i.fitBounds.currentValue,f.fitBoundsOptions),i.fitScreenCoordinates&&i.fitScreenCoordinates.currentValue&&((f.center||f.zoom||f.pitch||f.fitBounds)&&i.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-maplibre-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),f.mapService.fitScreenCoordinates(i.fitScreenCoordinates.currentValue,f.bearing?f.bearing[0]:0,f.movingOptions)),!f.centerWithPanTo||!i.center||i.center.isFirstChange()||i.zoom||i.bearing||i.pitch?(i.center&&!i.center.isFirstChange()||i.zoom&&!i.zoom.isFirstChange()||i.bearing&&!i.bearing.isFirstChange()&&!i.fitScreenCoordinates||i.pitch&&!i.pitch.isFirstChange())&&f.mapService.move(f.movingMethod,f.movingOptions,i.zoom&&f.zoom?f.zoom[0]:void 0,i.center?f.center:void 0,i.bearing&&f.bearing?f.bearing[0]:void 0,i.pitch&&f.pitch?f.pitch[0]:void 0):f.mapService.panTo(f.center,f.panToOptions),i.terrain&&!i.terrain.isFirstChange()&&f.mapService.updateTerrain(i.terrain.currentValue)})()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ct))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-map"]],viewQuery:function(i,f){if(1&i&&l.Gf(hr,7),2&i){let I;l.iGM(I=l.CRH())&&(f.mapContainer=I.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",terrain:"terrain",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[l._Bn([Ct]),l.TTD],decls:2,vars:0,consts:[["container",""]],template:function(i,f){1&i&&l._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),u})();var Fr=j(6838);const Ba="object"==typeof global&&global&&global.Object===Object&&global;var ac="object"==typeof self&&self&&self.Object===Object&&self;const Ur=Ba||ac||Function("return this")(),Cn=Ur.Symbol;var ei=Object.prototype,Vl=ei.hasOwnProperty,Ac=ei.toString,ks=Cn?Cn.toStringTag:void 0;var za=Object.prototype.toString;var ta=Cn?Cn.toStringTag:void 0;const nl=function zi(u){return null==u?void 0===u?"[object Undefined]":"[object Null]":ta&&ta in Object(u)?function bo(u){var h=Vl.call(u,ks),i=u[ks];try{u[ks]=void 0;var f=!0}catch{}var I=Ac.call(u);return f&&(h?u[ks]=i:delete u[ks]),I}(u):function vs(u){return za.call(u)}(u)},Rs=function Pc(u){var h=typeof u;return null!=u&&("object"==h||"function"==h)},v=function il(u){if(!Rs(u))return!1;var h=nl(u);return"[object Function]"==h||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h};var u,t=Ur["__core-js_shared__"],m=(u=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"";var B=Function.prototype.toString;const W=function z(u){if(null!=u){try{return B.call(u)}catch{}try{return u+""}catch{}}return""};var ae=/^\[object .+?Constructor\]$/,R=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const fe=function ee(u){return!(!Rs(u)||function b(u){return!!m&&m in u}(u))&&(v(u)?R:ae).test(W(u))},Et=function tt(u,h){var i=function oe(u,h){return u?.[h]}(u,h);return fe(i)?i:void 0};var vt=function(){try{var u=Et(Object,"defineProperty");return u({},"",{}),u}catch{}}();const Ut=vt,pn=function $t(u,h,i){"__proto__"==h&&Ut?Ut(u,h,{configurable:!0,enumerable:!0,value:i,writable:!0}):u[h]=i},Gn=function zn(u,h,i,f){for(var I=-1,N=null==u?0:u.length;++I<N;){var pe=u[I];h(f,pe,i(pe),u)}return f};var In=function Sn(u){return function(h,i,f){for(var I=-1,N=Object(h),pe=f(h),Me=pe.length;Me--;){var We=pe[u?Me:++I];if(!1===i(N[We],We,N))break}return h}}();const Hi=In,fr=function xi(u){return null!=u&&"object"==typeof u},eo=function $i(u){return fr(u)&&"[object Arguments]"==nl(u)};var to=Object.prototype,na=to.hasOwnProperty,mr=to.propertyIsEnumerable,Va=eo(function(){return arguments}())?eo:function(u){return fr(u)&&na.call(u,"callee")&&!mr.call(u,"callee")};const Ua=Va,ir=Array.isArray;var Ro="object"==typeof exports&&exports&&!exports.nodeType&&exports,Eo=Ro&&"object"==typeof module&&module&&!module.nodeType&&module,Lo=Eo&&Eo.exports===Ro?Ur.Buffer:void 0;const El=(Lo?Lo.isBuffer:void 0)||function po(){return!1};var lc=/^(?:0|[1-9]\d*)$/;const $l=function ja(u,h){var i=typeof u;return!!(h=h??9007199254740991)&&("number"==i||"symbol"!=i&&lc.test(u))&&u>-1&&u%1==0&&u<h},ra=function Do(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=9007199254740991};var rr={};rr["[object Float32Array]"]=rr["[object Float64Array]"]=rr["[object Int8Array]"]=rr["[object Int16Array]"]=rr["[object Int32Array]"]=rr["[object Uint8Array]"]=rr["[object Uint8ClampedArray]"]=rr["[object Uint16Array]"]=rr["[object Uint32Array]"]=!0,rr["[object Arguments]"]=rr["[object Array]"]=rr["[object ArrayBuffer]"]=rr["[object Boolean]"]=rr["[object DataView]"]=rr["[object Date]"]=rr["[object Error]"]=rr["[object Function]"]=rr["[object Map]"]=rr["[object Number]"]=rr["[object Object]"]=rr["[object RegExp]"]=rr["[object Set]"]=rr["[object String]"]=rr["[object WeakMap]"]=!1;const Fo=function jp(u){return function(h){return u(h)}};var ba="object"==typeof exports&&exports&&!exports.nodeType&&exports,Rc=ba&&"object"==typeof module&&module&&!module.nodeType&&module,Lc=Rc&&Rc.exports===ba&&Ba.process;const Gl=function(){try{return Rc&&Rc.require&&Rc.require("util").types||Lc&&Lc.binding&&Lc.binding("util")}catch{}}();var ol=Gl&&Gl.isTypedArray;const Ih=ol?Fo(ol):function _d(u){return fr(u)&&ra(u.length)&&!!rr[nl(u)]};var Ah=Object.prototype.hasOwnProperty;const yd=function $p(u,h){var i=ir(u),f=!i&&Ua(u),I=!i&&!f&&El(u),N=!i&&!f&&!I&&Ih(u),pe=i||f||I||N,Me=pe?function Kr(u,h){for(var i=-1,f=Array(u);++i<u;)f[i]=h(i);return f}(u.length,String):[],We=Me.length;for(var ht in u)(h||Ah.call(u,ht))&&(!pe||!("length"==ht||I&&("offset"==ht||"parent"==ht)||N&&("buffer"==ht||"byteLength"==ht||"byteOffset"==ht)||$l(ht,We)))&&Me.push(ht);return Me};var Lu=Object.prototype;const vd=function oa(u){var h=u&&u.constructor;return u===("function"==typeof h&&h.prototype||Lu)},Zp=function Gp(u,h){return function(i){return u(h(i))}},bd=Zp(Object.keys,Object);var cc=Object.prototype.hasOwnProperty;const Wp=function ou(u){return null!=u&&ra(u.length)&&!v(u)},xd=function y_(u){return Wp(u)?yd(u):function Ph(u){if(!vd(u))return bd(u);var h=[];for(var i in Object(u))cc.call(u,i)&&"constructor"!=i&&h.push(i);return h}(u)};var wd=function v_(u,h){return function(i,f){if(null==i)return i;if(!Wp(i))return u(i,f);for(var I=i.length,N=h?I:-1,pe=Object(i);(h?N--:++N<I)&&!1!==f(pe[N],N,pe););return i}}(function Oh(u,h){return u&&Hi(u,h,xd)});const bm=wd,xm=function su(u,h,i,f){return bm(u,function(I,N,pe){h(f,I,i(I),pe)}),f},Nc=function Nu(u,h){return u===h||u!=u&&h!=h},dc=function au(u,h){for(var i=u.length;i--;)if(Nc(u[i][0],h))return i;return-1};var Rh=Array.prototype.splice;function Bc(u){var h=-1,i=null==u?0:u.length;for(this.clear();++h<i;){var f=u[h];this.set(f[0],f[1])}}Bc.prototype.clear=function no(){this.__data__=[],this.size=0},Bc.prototype.delete=function Bu(u){var h=this.__data__,i=dc(h,u);return!(i<0||(i==h.length-1?h.pop():Rh.call(h,i,1),--this.size,0))},Bc.prototype.get=function Cd(u){var h=this.__data__,i=dc(h,u);return i<0?void 0:h[i][1]},Bc.prototype.has=function wm(u){return dc(this.__data__,u)>-1},Bc.prototype.set=function Vu(u,h){var i=this.__data__,f=dc(i,u);return f<0?(++this.size,i.push([u,h])):i[f][1]=h,this};const Lh=Bc,al=Et(Ur,"Map"),hc=Et(Object,"create");var Sm=Object.prototype.hasOwnProperty;var Sd=Object.prototype.hasOwnProperty;function lu(u){var h=-1,i=null==u?0:u.length;for(this.clear();++h<i;){var f=u[h];this.set(f[0],f[1])}}lu.prototype.clear=function Vc(){this.__data__=hc?hc(null):{},this.size=0},lu.prototype.delete=function Uc(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h},lu.prototype.get=function zh(u){var h=this.__data__;if(hc){var i=h[u];return"__lodash_hash_undefined__"===i?void 0:i}return Sm.call(h,u)?h[u]:void 0},lu.prototype.has=function Hc(u){var h=this.__data__;return hc?void 0!==h[u]:Sd.call(h,u)},lu.prototype.set=function Qp(u,h){var i=this.__data__;return this.size+=this.has(u)?0:1,i[u]=hc&&void 0===h?"__lodash_hash_undefined__":h,this};const cu=lu,Td=function tf(u,h){var i=u.__data__;return function Uh(u){var h=typeof u;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==u:null===u}(h)?i["string"==typeof h?"string":"hash"]:i.map};function du(u){var h=-1,i=null==u?0:u.length;for(this.clear();++h<i;){var f=u[h];this.set(f[0],f[1])}}du.prototype.clear=function ef(){this.size=0,this.__data__={hash:new cu,map:new(al||Lh),string:new cu}},du.prototype.delete=function nf(u){var h=Td(this,u).delete(u);return this.size-=h?1:0,h},du.prototype.get=function jh(u){return Td(this,u).get(u)},du.prototype.has=function rf(u){return Td(this,u).has(u)},du.prototype.set=function Hu(u,h){var i=Td(this,u),f=i.size;return i.set(u,h),this.size+=i.size==f?0:1,this};const $u=du;function Zc(u){var h=this.__data__=new Lh(u);this.size=h.size}Zc.prototype.clear=function zc(){this.__data__=new Lh,this.size=0},Zc.prototype.delete=function Ed(u){var h=this.__data__,i=h.delete(u);return this.size=h.size,i},Zc.prototype.get=function Nh(u){return this.__data__.get(u)},Zc.prototype.has=function Yp(u){return this.__data__.has(u)},Zc.prototype.set=function km(u,h){var i=this.__data__;if(i instanceof Lh){var f=i.__data__;if(!al||f.length<199)return f.push([u,h]),this.size=++i.size,this;i=this.__data__=new $u(f)}return i.set(u,h),this.size=i.size,this};const Gu=Zc;function Xi(u){var h=-1,i=null==u?0:u.length;for(this.__data__=new $u;++h<i;)this.add(u[h])}Xi.prototype.add=Xi.prototype.push=function No(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this},Xi.prototype.has=function Ad(u){return this.__data__.has(u)};const Zu=Xi,Fm=function Lm(u,h){for(var i=-1,f=null==u?0:u.length;++i<f;)if(h(u[i],i,u))return!0;return!1},Wu=function pc(u,h){return u.has(h)},Pd=function lf(u,h,i,f,I,N){var pe=1&i,Me=u.length,We=h.length;if(Me!=We&&!(pe&&We>Me))return!1;var ht=N.get(u),Nt=N.get(h);if(ht&&Nt)return ht==h&&Nt==u;var Vt=-1,Dn=!0,Wn=2&i?new Zu:void 0;for(N.set(u,h),N.set(h,u);++Vt<Me;){var An=u[Vt],Nn=h[Vt];if(f)var fi=pe?f(Nn,An,Vt,h,u,N):f(An,Nn,Vt,u,h,N);if(void 0!==fi){if(fi)continue;Dn=!1;break}if(Wn){if(!Fm(h,function(Mi,sr){if(!Wu(Wn,sr)&&(An===Mi||I(An,Mi,i,f,N)))return Wn.push(sr)})){Dn=!1;break}}else if(An!==Nn&&!I(An,Nn,i,f,N)){Dn=!1;break}}return N.delete(u),N.delete(h),Dn},qu=Ur.Uint8Array,Hh=function uf(u){var h=-1,i=Array(u.size);return u.forEach(function(f,I){i[++h]=[I,f]}),i},$h=function zm(u){var h=-1,i=Array(u.size);return u.forEach(function(f){i[++h]=f}),i};var gc=Cn?Cn.prototype:void 0,pu=gc?gc.valueOf:void 0;const Fd=function Ld(u,h){for(var i=-1,f=h.length,I=u.length;++i<f;)u[I+i]=h[i];return u},Go=function Gh(u,h,i){var f=h(u);return ir(u)?f:Fd(f,i(u))},ff=function Zh(){return[]};var gf=Object.prototype.propertyIsEnumerable,ll=Object.getOwnPropertySymbols,_c=ll?function(u){return null==u?[]:(u=Object(u),function fu(u,h){for(var i=-1,f=null==u?0:u.length,I=0,N=[];++i<f;){var pe=u[i];h(pe,i,u)&&(N[I++]=pe)}return N}(ll(u),function(h){return gf.call(u,h)}))}:ff;const Xu=_c,qh=function Wh(u){return Go(u,xd,Xu)};var Kh=Object.prototype.hasOwnProperty;const yc=Et(Ur,"DataView"),Xh=Et(Ur,"Promise"),Jh=Et(Ur,"Set"),gu=Et(Ur,"WeakMap");var Vd="[object Map]",Qh="[object Promise]",vf="[object Set]",_u="[object WeakMap]",bf="[object DataView]",ep=W(yc),Ml=W(al),Ud=W(Xh),tp=W(Jh),$m=W(gu),wa=nl;(yc&&wa(new yc(new ArrayBuffer(1)))!=bf||al&&wa(new al)!=Vd||Xh&&wa(Xh.resolve())!=Qh||Jh&&wa(new Jh)!=vf||gu&&wa(new gu)!=_u)&&(wa=function(u){var h=nl(u),i="[object Object]"==h?u.constructor:void 0,f=i?W(i):"";if(f)switch(f){case ep:return bf;case Ml:return Vd;case Ud:return Qh;case tp:return vf;case $m:return _u}return h});const vc=wa;var Ju="[object Arguments]",Qu="[object Array]",yu="[object Object]",sa=Object.prototype.hasOwnProperty;const wf=function ed(u,h,i,f,I,N){var pe=ir(u),Me=ir(h),We=pe?Qu:vc(u),ht=Me?Qu:vc(h),Nt=(We=We==Ju?yu:We)==yu,Vt=(ht=ht==Ju?yu:ht)==yu,Dn=We==ht;if(Dn&&El(u)){if(!El(h))return!1;pe=!0,Nt=!1}if(Dn&&!Nt)return N||(N=new Gu),pe||Ih(u)?Pd(u,h,i,f,I,N):function Rd(u,h,i,f,I,N,pe){switch(i){case"[object DataView]":if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case"[object ArrayBuffer]":return!(u.byteLength!=h.byteLength||!N(new qu(u),new qu(h)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Nc(+u,+h);case"[object Error]":return u.name==h.name&&u.message==h.message;case"[object RegExp]":case"[object String]":return u==h+"";case"[object Map]":var Me=Hh;case"[object Set]":if(Me||(Me=$h),u.size!=h.size&&!(1&f))return!1;var ht=pe.get(u);if(ht)return ht==h;f|=2,pe.set(u,h);var Nt=Pd(Me(u),Me(h),f,I,N,pe);return pe.delete(u),Nt;case"[object Symbol]":if(pu)return pu.call(u)==pu.call(h)}return!1}(u,h,We,i,f,I,N);if(!(1&i)){var Wn=Nt&&sa.call(u,"__wrapped__"),An=Vt&&sa.call(h,"__wrapped__");if(Wn||An){var Nn=Wn?u.value():u,fi=An?h.value():h;return N||(N=new Gu),I(Nn,fi,i,f,N)}}return!!Dn&&(N||(N=new Gu),function mu(u,h,i,f,I,N){var pe=1&i,Me=qh(u),We=Me.length;if(We!=qh(h).length&&!pe)return!1;for(var Vt=We;Vt--;){var Dn=Me[Vt];if(!(pe?Dn in h:Kh.call(h,Dn)))return!1}var Wn=N.get(u),An=N.get(h);if(Wn&&An)return Wn==h&&An==u;var Nn=!0;N.set(u,h),N.set(h,u);for(var fi=pe;++Vt<We;){var Mi=u[Dn=Me[Vt]],sr=h[Dn];if(f)var yo=pe?f(sr,Mi,Dn,h,u,N):f(Mi,sr,Dn,u,h,N);if(!(void 0===yo?Mi===sr||I(Mi,sr,i,f,N):yo)){Nn=!1;break}fi||(fi="constructor"==Dn)}if(Nn&&!fi){var Or=u.constructor,Ma=h.constructor;Or!=Ma&&"constructor"in u&&"constructor"in h&&!("function"==typeof Or&&Or instanceof Or&&"function"==typeof Ma&&Ma instanceof Ma)&&(Nn=!1)}return N.delete(u),N.delete(h),Nn}(u,h,i,f,I,N))},Hd=function np(u,h,i,f,I){return u===h||(null==u||null==h||!fr(u)&&!fr(h)?u!=u&&h!=h:wf(u,h,i,f,np,I))},Sl=function Cf(u){return u==u&&!Rs(u)},Zd=function op(u,h){return function(i){return null!=i&&i[u]===h&&(void 0!==h||u in Object(i))}},b_=function Zm(u){var h=function rp(u){for(var h=xd(u),i=h.length;i--;){var f=h[i],I=u[f];h[i]=[f,I,Sl(I)]}return h}(u);return 1==h.length&&h[0][2]?Zd(h[0][0],h[0][1]):function(i){return i===u||function Gd(u,h,i,f){var I=i.length,N=I,pe=!f;if(null==u)return!N;for(u=Object(u);I--;){var Me=i[I];if(pe&&Me[2]?Me[1]!==u[Me[0]]:!(Me[0]in u))return!1}for(;++I<N;){var We=(Me=i[I])[0],ht=u[We],Nt=Me[1];if(pe&&Me[2]){if(void 0===ht&&!(We in u))return!1}else{var Vt=new Gu;if(f)var Dn=f(ht,Nt,We,u,h,Vt);if(!(void 0===Dn?Hd(Nt,ht,3,f,Vt):Dn))return!1}}return!0}(i,u,h)}},qc=function Ef(u){return"symbol"==typeof u||fr(u)&&"[object Symbol]"==nl(u)};var sp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nd=/^\w*$/;const Kc=function vu(u,h){if(ir(u))return!1;var i=typeof u;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=u&&!qc(u))||nd.test(u)||!sp.test(u)||null!=h&&u in Object(h)};function bu(u,h){if("function"!=typeof u||null!=h&&"function"!=typeof h)throw new TypeError("Expected a function");var i=function(){var f=arguments,I=h?h.apply(this,f):f[0],N=i.cache;if(N.has(I))return N.get(I);var pe=u.apply(this,f);return i.cache=N.set(I,pe)||N,pe};return i.cache=new(bu.Cache||$u),i}bu.Cache=$u;const Df=bu;var xu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lp=/\\(\\)?/g,Mf=function Yc(u){var h=Df(u,function(f){return 500===i.size&&i.clear(),f}),i=h.cache;return h}(function(u){var h=[];return 46===u.charCodeAt(0)&&h.push(""),u.replace(xu,function(i,f,I,N){h.push(I?N.replace(lp,"$1"):f||i)}),h});const Sf=Mf;var rd=Cn?Cn.prototype:void 0,cp=rd?rd.toString:void 0;const od=function Kd(u){if("string"==typeof u)return u;if(ir(u))return function Tf(u,h){for(var i=-1,f=null==u?0:u.length,I=Array(f);++i<f;)I[i]=h(u[i],i,u);return I}(u,Kd)+"";if(qc(u))return cp?cp.call(u):"";var h=u+"";return"0"==h&&1/u==-1/0?"-0":h},Ns=function up(u,h){return ir(u)?u:Kc(u,h)?[u]:Sf(function Yd(u){return null==u?"":od(u)}(u))},wu=function Xd(u){if("string"==typeof u||qc(u))return u;var h=u+"";return"0"==h&&1/u==-1/0?"-0":h},Pf=function dp(u,h){for(var i=0,f=(h=Ns(h,u)).length;null!=u&&i<f;)u=u[wu(h[i++])];return i&&i==f?u:void 0},p=function a(u,h){return null!=u&&h in Object(u)},O=function D(u,h){return null!=u&&function y(u,h,i){for(var f=-1,I=(h=Ns(h,u)).length,N=!1;++f<I;){var pe=wu(h[f]);if(!(N=null!=u&&i(u,pe)))break;u=u[pe]}return N||++f!=I?N:!!(I=null==u?0:u.length)&&ra(I)&&$l(pe,I)&&(ir(u)||Ua(u))}(u,h,p)},de=function re(u,h){return Kc(u)&&Sl(h)?Zd(wu(u),h):function(i){var f=function o(u,h,i){var f=null==u?void 0:Pf(u,h);return void 0===f?i:f}(i,u);return void 0===f&&f===h?O(i,u):Hd(h,f,3)}},xe=function ve(u){return u},it=function gt(u){return Kc(u)?function De(u){return function(h){return h?.[u]}}(wu(u)):function Ve(u){return function(h){return Pf(h,u)}}(u)};var Mn=Object.prototype.hasOwnProperty,vn=function Ht(u,h){return function(i,f){var I=ir(i)?Gn:xm,N=h?h():{};return I(i,u,function Dt(u){return"function"==typeof u?u:null==u?xe:"object"==typeof u?ir(u)?de(u[0],u[1]):b_(u):it(u)}(f),N)}}(function(u,h,i){Mn.call(u,i)?u[i].push(h):pn(u,i,[h])});const fn=vn;var jn=Object.prototype.hasOwnProperty;const ki=function Hn(u,h,i){var f=u[h];(!jn.call(u,h)||!Nc(f,i)||void 0===i&&!(h in u))&&pn(u,h,i)},gr=function or(u,h,i,f){var I=!i;i||(i={});for(var N=-1,pe=h.length;++N<pe;){var Me=h[N],We=f?f(i[Me],u[Me],Me,i,u):void 0;void 0===We&&(We=u[Me]),I?pn(i,Me,We):ki(i,Me,We)}return i};var Wo=Object.prototype.hasOwnProperty;const Bs=function qo(u){if(!Rs(u))return function Zo(u){var h=[];if(null!=u)for(var i in Object(u))h.push(i);return h}(u);var h=vd(u),i=[];for(var f in u)"constructor"==f&&(h||!Wo.call(u,f))||i.push(f);return i},xo=function io(u){return Wp(u)?yd(u,!0):Bs(u)};var Ko="object"==typeof exports&&exports&&!exports.nodeType&&exports,bs=Ko&&"object"==typeof module&&module&&!module.nodeType&&module,Yr=bs&&bs.exports===Ko?Ur.Buffer:void 0,Ri=Yr?Yr.allocUnsafe:void 0;const Us=Zp(Object.getPrototypeOf,Object);var ls=Object.getOwnPropertySymbols?function(u){for(var h=[];u;)Fd(h,Xu(u)),u=Us(u);return h}:ff;const Zl=ls,Du=function Eu(u){return Go(u,xo,Zl)};var Jd=Object.prototype.hasOwnProperty;const hp=function kf(u){var h=new u.constructor(u.byteLength);return new qu(h).set(new qu(u)),h};var Rf=/\w*$/;var Xm=Cn?Cn.prototype:void 0,pp=Xm?Xm.valueOf:void 0;const P0=function A0(u,h,i){var f=u.constructor;switch(h){case"[object ArrayBuffer]":return hp(u);case"[object Boolean]":case"[object Date]":return new f(+u);case"[object DataView]":return function qm(u,h){var i=h?hp(u.buffer):u.buffer;return new u.constructor(i,u.byteOffset,u.byteLength)}(u,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function eh(u,h){var i=h?hp(u.buffer):u.buffer;return new u.constructor(i,u.byteOffset,u.length)}(u,i);case"[object Map]":case"[object Set]":return new f;case"[object Number]":case"[object String]":return new f(u);case"[object RegExp]":return function x_(u){var h=new u.constructor(u.source,Rf.exec(u));return h.lastIndex=u.lastIndex,h}(u);case"[object Symbol]":return function Ha(u){return pp?Object(pp.call(u)):{}}(u)}};var ng=Object.create,O0=function(){function u(){}return function(h){if(!Rs(h))return{};if(ng)return ng(h);u.prototype=h;var i=new u;return u.prototype=void 0,i}}();const k0=O0;var fp=Gl&&Gl.isMap;const M_=fp?Fo(fp):function rh(u){return fr(u)&&"[object Map]"==vc(u)};var Ff=Gl&&Gl.isSet;const m1=Ff?Fo(Ff):function sg(u){return fr(u)&&"[object Set]"==vc(u)};var ag="[object Arguments]",P_="[object Function]",cg="[object Object]",Hr={};Hr[ag]=Hr["[object Array]"]=Hr["[object ArrayBuffer]"]=Hr["[object DataView]"]=Hr["[object Boolean]"]=Hr["[object Date]"]=Hr["[object Float32Array]"]=Hr["[object Float64Array]"]=Hr["[object Int8Array]"]=Hr["[object Int16Array]"]=Hr["[object Int32Array]"]=Hr["[object Map]"]=Hr["[object Number]"]=Hr[cg]=Hr["[object RegExp]"]=Hr["[object Set]"]=Hr["[object String]"]=Hr["[object Symbol]"]=Hr["[object Uint8Array]"]=Hr["[object Uint8ClampedArray]"]=Hr["[object Uint16Array]"]=Hr["[object Uint32Array]"]=!0,Hr["[object Error]"]=Hr[P_]=Hr["[object WeakMap]"]=!1;const q0=function Nf(u,h,i,f,I,N){var pe,Me=1&h,We=2&h,ht=4&h;if(i&&(pe=I?i(u,f,I,N):i(u)),void 0!==pe)return pe;if(!Rs(u))return u;var Nt=ir(u);if(Nt){if(pe=function ad(u){var h=u.length,i=new u.constructor(h);return h&&"string"==typeof u[0]&&Jd.call(u,"index")&&(i.index=u.index,i.input=u.input),i}(u),!Me)return function Pr(u,h){var i=-1,f=u.length;for(h||(h=Array(f));++i<f;)h[i]=u[i];return h}(u,pe)}else{var Vt=vc(u),Dn=Vt==P_||"[object GeneratorFunction]"==Vt;if(El(u))return function Vs(u,h){if(h)return u.slice();var i=u.length,f=Ri?Ri(i):new u.constructor(i);return u.copy(f),f}(u,Me);if(Vt==cg||Vt==ag||Dn&&!I){if(pe=We||Dn?{}:function Lf(u){return"function"!=typeof u.constructor||vd(u)?{}:k0(Us(u))}(u),!Me)return We?function Cu(u,h){return gr(u,Zl(u),h)}(u,function Bo(u,h){return u&&gr(h,xo(h),u)}(pe,u)):function ul(u,h){return gr(u,Xu(u),h)}(u,function mo(u,h){return u&&gr(h,xd(h),u)}(pe,u))}else{if(!Hr[Vt])return I?u:{};pe=P0(u,Vt,Me)}}N||(N=new Gu);var Wn=N.get(u);if(Wn)return Wn;N.set(u,pe),m1(u)?u.forEach(function(fi){pe.add(Nf(fi,h,i,fi,u,N))}):M_(u)&&u.forEach(function(fi,Mi){pe.set(Mi,Nf(fi,h,i,Mi,u,N))});var Nn=Nt?void 0:(ht?We?Du:qh:We?xo:xd)(u);return function En(u,h){for(var i=-1,f=null==u?0:u.length;++i<f&&!1!==h(u[i],i,u););}(Nn||u,function(fi,Mi){Nn&&(fi=u[Mi=fi]),ki(pe,Mi,Nf(fi,h,i,Mi,u,N))}),pe};function mp(u){return"object"==typeof u&&null!=u&&1===u.nodeType}function Bf(u,h){return(!h||"hidden"!==u)&&"visible"!==u&&"clip"!==u}function oh(u,h){if(u.clientHeight<u.scrollHeight||u.clientWidth<u.scrollWidth){var i=getComputedStyle(u,null);return Bf(i.overflowY,h)||Bf(i.overflowX,h)||!!(I=function(N){if(!N.ownerDocument||!N.ownerDocument.defaultView)return null;try{return N.ownerDocument.defaultView.frameElement}catch{return null}}(f=u))&&(I.clientHeight<f.scrollHeight||I.clientWidth<f.scrollWidth)}var f,I;return!1}function hg(u,h,i,f,I,N,pe,Me){return N<u&&pe>h||N>u&&pe<h?0:N<=u&&Me<=i||pe>=h&&Me>=i?N-u-f:pe>h&&Me<i||N<u&&Me>i?pe-h+I:0}function zf(u,h){var i=window,f=h.scrollMode,I=h.block,N=h.inline,pe=h.boundary,Me=h.skipOverflowHiddenElements,We="function"==typeof pe?pe:function(fd){return fd!==pe};if(!mp(u))throw new TypeError("Invalid target");for(var ht=document.scrollingElement||document.documentElement,Nt=[],Vt=u;mp(Vt)&&We(Vt);){if((Vt=Vt.parentElement)===ht){Nt.push(Vt);break}null!=Vt&&Vt===document.body&&oh(Vt)&&!oh(document.documentElement)||null!=Vt&&oh(Vt,Me)&&Nt.push(Vt)}for(var Dn=i.visualViewport?i.visualViewport.width:innerWidth,Wn=i.visualViewport?i.visualViewport.height:innerHeight,An=window.scrollX||pageXOffset,Nn=window.scrollY||pageYOffset,fi=u.getBoundingClientRect(),Mi=fi.height,sr=fi.width,yo=fi.top,Or=fi.right,Ma=fi.bottom,Sa=fi.left,$r="start"===I||"nearest"===I?yo:"end"===I?Ma:yo+Mi/2,Xo="center"===N?Sa+sr/2:"end"===N?Or:Sa,Il=[],Al=0;Al<Nt.length;Al++){var ha=Nt[Al],Ql=ha.getBoundingClientRect(),ec=Ql.height,Xc=Ql.width,pd=Ql.top,Kn=Ql.right,ci=Ql.bottom,si=Ql.left;if("if-needed"===f&&yo>=0&&Sa>=0&&Ma<=Wn&&Or<=Dn&&yo>=pd&&Ma<=ci&&Sa>=si&&Or<=Kn)return Il;var Gi=getComputedStyle(ha),oo=parseInt(Gi.borderLeftWidth,10),js=parseInt(Gi.borderTopWidth,10),ws=parseInt(Gi.borderRightWidth,10),Ta=parseInt(Gi.borderBottomWidth,10),ar=0,ml=0,Fp="offsetWidth"in ha?ha.offsetWidth-ha.clientWidth-oo-ws:0,Jo="offsetHeight"in ha?ha.offsetHeight-ha.clientHeight-js-Ta:0;if(ht===ha)ar="start"===I?$r:"end"===I?$r-Wn:"nearest"===I?hg(Nn,Nn+Wn,Wn,js,Ta,Nn+$r,Nn+$r+Mi,Mi):$r-Wn/2,ml="start"===N?Xo:"center"===N?Xo-Dn/2:"end"===N?Xo-Dn:hg(An,An+Dn,Dn,oo,ws,An+Xo,An+Xo+sr,sr),ar=Math.max(0,ar+Nn),ml=Math.max(0,ml+An);else{ar="start"===I?$r-pd-js:"end"===I?$r-ci+Ta+Jo:"nearest"===I?hg(pd,ci,ec,js,Ta+Jo,$r,$r+Mi,Mi):$r-(pd+ec/2)+Jo/2,ml="start"===N?Xo-si-oo:"center"===N?Xo-(si+Xc/2)+Fp/2:"end"===N?Xo-Kn+ws+Fp:hg(si,Kn,Xc,oo,ws+Fp,Xo,Xo+sr,sr);var Jc=ha.scrollLeft,Ga=ha.scrollTop;$r+=Ga-(ar=Math.max(0,Math.min(Ga+ar,ha.scrollHeight-ec+Jo))),Xo+=Jc-(ml=Math.max(0,Math.min(Jc+ml,ha.scrollWidth-Xc+Fp)))}Il.push({el:ha,top:ar,left:ml})}return Il}function J0(u){return u===Object(u)&&0!==Object.keys(u).length}let Vf=(()=>{class u{constructor(){this.resize$=new ue.x}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var _o=j(4006),Uf=j(3619),wc=j(4859),ii=j(3238),Li=j(1281),pl=j(2687),gp=j(5017),ql=j(9521);let Q0=(()=>{class u{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(i){this._vertical=(0,Li.Ig)(i)}get inset(){return this._inset}set inset(i){this._inset=(0,Li.Ig)(i)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,f){2&i&&(l.uIk("aria-orientation",f.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",f.vertical)("mat-divider-horizontal",!f.vertical)("mat-divider-inset",f.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,f){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),u})(),_p=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[ii.BQ,ii.BQ]}),u})();const pg=["*"],tb=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],y1=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],jf=(0,ii.Id)((0,ii.Kr)(class{})),ob=(0,ii.Kr)(class{}),Hf=new l.OlP("MatList"),U_=new l.OlP("MatNavList");let sb=(()=>{class u extends jf{constructor(){super(...arguments),this._stateChanges=new ue.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return u.\u0275fac=function(){let h;return function(f){return(h||(h=l.n5z(u)))(f||u)}}(),u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[l._Bn([{provide:U_,useExisting:u}]),l.qOj,l.TTD],ngContentSelectors:pg,decls:1,vars:0,template:function(i,f){1&i&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),u})(),ab=(()=>{class u extends jf{constructor(i){super(),this._elementRef=i,this._stateChanges=new ue.x,"action-list"===this._getListType()&&(i.nativeElement.classList.add("mat-action-list"),i.nativeElement.setAttribute("role","group"))}_getListType(){const i=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===i?"list":"mat-action-list"===i?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[l._Bn([{provide:Hf,useExisting:u}]),l.qOj,l.TTD],ngContentSelectors:pg,decls:1,vars:0,template:function(i,f){1&i&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),u})(),j_=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),u})(),H_=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),u})(),lb=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-subheader"]}),u})(),yp=(()=>{class u extends ob{constructor(i,f,I,N){super(),this._element=i,this._isInteractiveList=!1,this._destroyed=new ue.x,this._disabled=!1,this._isInteractiveList=!!(I||N&&"action-list"===N._getListType()),this._list=I||N;const pe=this._getHostElement();"button"===pe.nodeName.toLowerCase()&&!pe.hasAttribute("type")&&pe.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,bi.R)(this._destroyed)).subscribe(()=>{f.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(i){this._disabled=(0,Li.Ig)(i)}ngAfterContentInit(){(0,ii.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(U_,8),l.Y36(Hf,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,f,I){if(1&i&&(l.Suo(I,j_,5),l.Suo(I,H_,5),l.Suo(I,ii.X2,5)),2&i){let N;l.iGM(N=l.CRH())&&(f._avatar=N.first),l.iGM(N=l.CRH())&&(f._icon=N.first),l.iGM(N=l.CRH())&&(f._lines=N)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(i,f){2&i&&l.ekj("mat-list-item-disabled",f.disabled)("mat-list-item-with-avatar",f._avatar||f._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[l.qOj],ngContentSelectors:y1,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(i,f){1&i&&(l.F$t(tb),l.TgZ(0,"span",0),l._UZ(1,"span",1),l.Hsn(2),l.TgZ(3,"span",2),l.Hsn(4,1),l.qZA(),l.Hsn(5,2),l.qZA()),2&i&&(l.xp6(1),l.Q6J("matRippleTrigger",f._getHostElement())("matRippleDisabled",f._isRippleDisabled()))},dependencies:[ii.wG],encapsulation:2,changeDetection:0}),u})(),db=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[ii.uc,ii.si,ii.BQ,ii.us,be.ez,ii.uc,ii.BQ,ii.us,_p]}),u})();var ca=j(9549),$a=j(3353),ua=j(515);const Iu=(0,$a.i$)({passive:!0});let Gf=(()=>{class u{constructor(i,f){this._platform=i,this._ngZone=f,this._monitoredElements=new Map}monitor(i){if(!this._platform.isBrowser)return ua.E;const f=(0,Li.fI)(i),I=this._monitoredElements.get(f);if(I)return I.subject;const N=new ue.x,pe="cdk-text-field-autofilled",Me=We=>{"cdk-text-field-autofill-start"!==We.animationName||f.classList.contains(pe)?"cdk-text-field-autofill-end"===We.animationName&&f.classList.contains(pe)&&(f.classList.remove(pe),this._ngZone.run(()=>N.next({target:We.target,isAutofilled:!1}))):(f.classList.add(pe),this._ngZone.run(()=>N.next({target:We.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{f.addEventListener("animationstart",Me,Iu),f.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(f,{subject:N,unlisten:()=>{f.removeEventListener("animationstart",Me,Iu)}}),N}stopMonitoring(i){const f=(0,Li.fI)(i),I=this._monitoredElements.get(f);I&&(I.unlisten(),I.subject.complete(),f.classList.remove("cdk-text-field-autofill-monitored"),f.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(f))}ngOnDestroy(){this._monitoredElements.forEach((i,f)=>this.stopMonitoring(f))}}return u.\u0275fac=function(i){return new(i||u)(l.LFG($a.t4),l.LFG(l.R0b))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})(),cd=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({}),u})();const sh=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),ah=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let lh=0;const ch=(0,ii.FD)(class{constructor(u,h,i,f){this._defaultErrorStateMatcher=u,this._parentForm=h,this._parentFormGroup=i,this.ngControl=f,this.stateChanges=new ue.x}});let uh=(()=>{class u extends ch{constructor(i,f,I,N,pe,Me,We,ht,Nt,Vt){super(Me,N,pe,I),this._elementRef=i,this._platform=f,this._autofillMonitor=ht,this._formField=Vt,this._uid="mat-input-"+lh++,this.focused=!1,this.stateChanges=new ue.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(An=>(0,$a.qK)().has(An)),this._iOSKeyupListener=An=>{const Nn=An.target;!Nn.value&&0===Nn.selectionStart&&0===Nn.selectionEnd&&(Nn.setSelectionRange(1,1),Nn.setSelectionRange(0,0))};const Dn=this._elementRef.nativeElement,Wn=Dn.nodeName.toLowerCase();this._inputValueAccessor=We||Dn,this._previousNativeValue=this.value,this.id=this.id,f.IOS&&Nt.runOutsideAngular(()=>{i.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Wn,this._isTextarea="textarea"===Wn,this._isInFormField=!!Vt,this._isNativeSelect&&(this.controlType=Dn.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(i){this._disabled=(0,Li.Ig)(i),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(i){this._id=i||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(_o.kI.required)??!1}set required(i){this._required=(0,Li.Ig)(i)}get type(){return this._type}set type(i){this._type=i||"text",this._validateType(),!this._isTextarea&&(0,$a.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(i){i!==this.value&&(this._inputValueAccessor.value=i,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(i){this._readonly=(0,Li.Ig)(i)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(i=>{this.autofilled=i.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(i){this._elementRef.nativeElement.focus(i)}_focusChanged(i){i!==this.focused&&(this.focused=i,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const i=this._formField,f=i&&"legacy"===i.appearance&&!i._hasLabel?.()?null:this.placeholder;if(f!==this._previousPlaceholder){const I=this._elementRef.nativeElement;this._previousPlaceholder=f,f?I.setAttribute("placeholder",f):I.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const i=this._elementRef.nativeElement.value;this._previousNativeValue!==i&&(this._previousNativeValue=i,this.stateChanges.next())}_validateType(){ah.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let i=this._elementRef.nativeElement.validity;return i&&i.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const i=this._elementRef.nativeElement,f=i.options[0];return this.focused||i.multiple||!this.empty||!!(i.selectedIndex>-1&&f&&f.label)}return this.focused||!this.empty}setDescribedByIds(i){i.length?this._elementRef.nativeElement.setAttribute("aria-describedby",i.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const i=this._elementRef.nativeElement;return this._isNativeSelect&&(i.multiple||i.size>1)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq),l.Y36($a.t4),l.Y36(_o.a5,10),l.Y36(_o.F,8),l.Y36(_o.sg,8),l.Y36(ii.rD),l.Y36(sh,10),l.Y36(Gf),l.Y36(l.R0b),l.Y36(ca.G_,8))},u.\u0275dir=l.lG2({type:u,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(i,f){1&i&&l.NdJ("focus",function(){return f._focusChanged(!0)})("blur",function(){return f._focusChanged(!1)})("input",function(){return f._onInput()}),2&i&&(l.Ikx("disabled",f.disabled)("required",f.required),l.uIk("id",f.id)("data-placeholder",f.placeholder)("name",f.name||null)("readonly",f.readonly&&!f._isNativeSelect||null)("aria-invalid",f.empty&&f.required?null:f.errorState)("aria-required",f.required),l.ekj("mat-input-server",f._isServer)("mat-native-select-inline",f._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:ca.Eo,useExisting:u}]),l.qOj,l.TTD]}),u})(),dh=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:[ii.rD],imports:[cd,ca.lN,ii.BQ,cd,ca.lN]}),u})();var xs=j(8605),fg=j(445),mg=j(9718),G_=j(1884);const xp=["*"],Z_=["content"];function W_(u,h){if(1&u){const i=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I._onBackdropClicked())}),l.qZA()}if(2&u){const i=l.oxw();l.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function q_(u,h){1&u&&(l.TgZ(0,"mat-drawer-content"),l.Hsn(1,2),l.qZA())}const K_=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Y_=["mat-drawer","mat-drawer-content","*"];function hb(u,h){if(1&u){const i=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I._onBackdropClicked())}),l.qZA()}if(2&u){const i=l.oxw();l.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function pb(u,h){1&u&&(l.TgZ(0,"mat-sidenav-content"),l.Hsn(1,2),l.qZA())}const X_=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],fb=["mat-sidenav","mat-sidenav-content","*"],Zf={transformDrawer:(0,_e.X$)("transform",[(0,_e.SB)("open, open-instant",(0,_e.oB)({transform:"none",visibility:"visible"})),(0,_e.SB)("void",(0,_e.oB)({"box-shadow":"none",visibility:"hidden"})),(0,_e.eR)("void => open-instant",(0,_e.jt)("0ms")),(0,_e.eR)("void <=> open, open-instant => void",(0,_e.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},mb=new l.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Wf(){return!1}}),hh=new l.OlP("MAT_DRAWER_CONTAINER");let ph=(()=>{class u extends xs.PQ{constructor(i,f,I,N,pe){super(I,N,pe),this._changeDetectorRef=i,this._container=f}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>wp)),l.Y36(l.SBq),l.Y36(xs.mF),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,f){2&i&&l.Udp("margin-left",f._container._contentMargins.left,"px")("margin-right",f._container._contentMargins.right,"px")},features:[l._Bn([{provide:xs.PQ,useExisting:u}]),l.qOj],ngContentSelectors:xp,decls:1,vars:0,template:function(i,f){1&i&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),u})(),ey=(()=>{class u{constructor(i,f,I,N,pe,Me,We,ht){this._elementRef=i,this._focusTrapFactory=f,this._focusMonitor=I,this._platform=N,this._ngZone=pe,this._interactivityChecker=Me,this._doc=We,this._container=ht,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ue.x,this._animationEnd=new ue.x,this._animationState="void",this.openedChange=new l.vpe(!0),this._openedStream=this.openedChange.pipe((0,$n.h)(Nt=>Nt),(0,Ir.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,$n.h)(Nt=>Nt.fromState!==Nt.toState&&0===Nt.toState.indexOf("open")),(0,mg.h)(void 0)),this._closedStream=this.openedChange.pipe((0,$n.h)(Nt=>!Nt),(0,Ir.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,$n.h)(Nt=>Nt.fromState!==Nt.toState&&"void"===Nt.toState),(0,mg.h)(void 0)),this._destroyed=new ue.x,this.onPositionChanged=new l.vpe,this._modeChanged=new ue.x,this.openedChange.subscribe(Nt=>{Nt?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,vi.R)(this._elementRef.nativeElement,"keydown").pipe((0,$n.h)(Nt=>Nt.keyCode===ql.hY&&!this.disableClose&&!(0,ql.Vb)(Nt)),(0,bi.R)(this._destroyed)).subscribe(Nt=>this._ngZone.run(()=>{this.close(),Nt.stopPropagation(),Nt.preventDefault()}))}),this._animationEnd.pipe((0,G_.x)((Nt,Vt)=>Nt.fromState===Vt.fromState&&Nt.toState===Vt.toState)).subscribe(Nt=>{const{fromState:Vt,toState:Dn}=Nt;(0===Dn.indexOf("open")&&"void"===Vt||"void"===Dn&&0===Vt.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(i){(i="end"===i?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(i),this._position=i,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(i){this._mode=i,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(i){this._disableClose=(0,Li.Ig)(i)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(i){("true"===i||"false"===i||null==i)&&(i=(0,Li.Ig)(i)),this._autoFocus=i}get opened(){return this._opened}set opened(i){this.toggle((0,Li.Ig)(i))}_forceFocus(i,f){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const I=()=>{i.removeEventListener("blur",I),i.removeEventListener("mousedown",I),i.removeAttribute("tabindex")};i.addEventListener("blur",I),i.addEventListener("mousedown",I)})),i.focus(f)}_focusByCssSelector(i,f){let I=this._elementRef.nativeElement.querySelector(i);I&&this._forceFocus(I,f)}_takeFocus(){if(!this._focusTrap)return;const i=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(f=>{!f&&"function"==typeof this._elementRef.nativeElement.focus&&i.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(i){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,i):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const i=this._doc.activeElement;return!!i&&this._elementRef.nativeElement.contains(i)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(i){return this.toggle(!0,i)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(i=!this.opened,f){i&&f&&(this._openedVia=f);const I=this._setOpen(i,!i&&this._isFocusWithinDrawer(),this._openedVia||"program");return i||(this._openedVia=null),I}_setOpen(i,f,I){return this._opened=i,i?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",f&&this._restoreFocus(I)),this._updateFocusTrapState(),new Promise(N=>{this.openedChange.pipe((0,Qr.q)(1)).subscribe(pe=>N(pe?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(i){const f=this._elementRef.nativeElement,I=f.parentNode;"end"===i?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),I.insertBefore(this._anchor,f)),I.appendChild(f)):this._anchor&&this._anchor.parentNode.insertBefore(f,this._anchor)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq),l.Y36(pl.qV),l.Y36(pl.tE),l.Y36($a.t4),l.Y36(l.R0b),l.Y36(pl.ic),l.Y36(be.K0,8),l.Y36(hh,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-drawer"]],viewQuery:function(i,f){if(1&i&&l.Gf(Z_,5),2&i){let I;l.iGM(I=l.CRH())&&(f._content=I.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,f){1&i&&l.WFA("@transform.start",function(N){return f._animationStarted.next(N)})("@transform.done",function(N){return f._animationEnd.next(N)}),2&i&&(l.uIk("align",null),l.d8E("@transform",f._animationState),l.ekj("mat-drawer-end","end"===f.position)("mat-drawer-over","over"===f.mode)("mat-drawer-push","push"===f.mode)("mat-drawer-side","side"===f.mode)("mat-drawer-opened",f.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:xp,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,f){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[xs.PQ],encapsulation:2,data:{animation:[Zf.transformDrawer]},changeDetection:0}),u})(),wp=(()=>{class u{constructor(i,f,I,N,pe,Me=!1,We){this._dir=i,this._element=f,this._ngZone=I,this._changeDetectorRef=N,this._animationMode=We,this._drawers=new l.n_E,this.backdropClick=new l.vpe,this._destroyed=new ue.x,this._doCheckSubject=new ue.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ue.x,i&&i.change.pipe((0,bi.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),pe.change().pipe((0,bi.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Me}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(i){this._autosize=(0,Li.Ig)(i)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(i){this._backdropOverride=null==i?null:(0,Li.Ig)(i)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,$o.O)(this._allDrawers),(0,bi.R)(this._destroyed)).subscribe(i=>{this._drawers.reset(i.filter(f=>!f._container||f._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,$o.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(i=>{this._watchDrawerToggle(i),this._watchDrawerPosition(i),this._watchDrawerMode(i)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Wr.b)(10),(0,bi.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(i=>i.open())}close(){this._drawers.forEach(i=>i.close())}updateContentMargins(){let i=0,f=0;if(this._left&&this._left.opened)if("side"==this._left.mode)i+=this._left._getWidth();else if("push"==this._left.mode){const I=this._left._getWidth();i+=I,f-=I}if(this._right&&this._right.opened)if("side"==this._right.mode)f+=this._right._getWidth();else if("push"==this._right.mode){const I=this._right._getWidth();f+=I,i-=I}i=i||null,f=f||null,(i!==this._contentMargins.left||f!==this._contentMargins.right)&&(this._contentMargins={left:i,right:f},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(i){i._animationStarted.pipe((0,$n.h)(f=>f.fromState!==f.toState),(0,bi.R)(this._drawers.changes)).subscribe(f=>{"open-instant"!==f.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==i.mode&&i.openedChange.pipe((0,bi.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(i.opened))}_watchDrawerPosition(i){!i||i.onPositionChanged.pipe((0,bi.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Qr.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(i){i&&i._modeChanged.pipe((0,bi.R)((0,ic.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(i){const f=this._element.nativeElement.classList,I="mat-drawer-container-has-open";i?f.add(I):f.remove(I)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(i=>{"end"==i.position?this._end=i:this._start=i}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(i=>i&&!i.disableClose&&this._canHaveBackdrop(i)).forEach(i=>i._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(i){return"side"!==i.mode||!!this._backdropOverride}_isDrawerOpen(i){return null!=i&&i.opened}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(fg.Is,8),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(xs.rL),l.Y36(mb),l.Y36(l.QbO,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-drawer-container"]],contentQueries:function(i,f,I){if(1&i&&(l.Suo(I,ph,5),l.Suo(I,ey,5)),2&i){let N;l.iGM(N=l.CRH())&&(f._content=N.first),l.iGM(N=l.CRH())&&(f._allDrawers=N)}},viewQuery:function(i,f){if(1&i&&l.Gf(ph,5),2&i){let I;l.iGM(I=l.CRH())&&(f._userContent=I.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,f){2&i&&l.ekj("mat-drawer-container-explicit-backdrop",f._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[l._Bn([{provide:hh,useExisting:u}])],ngContentSelectors:Y_,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,f){1&i&&(l.F$t(K_),l.YNc(0,W_,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,q_,2,0,"mat-drawer-content",1)),2&i&&(l.Q6J("ngIf",f.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!f._content))},dependencies:[be.O5,ph],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),u})(),fh=(()=>{class u extends ph{constructor(i,f,I,N,pe){super(i,f,I,N,pe)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>gg)),l.Y36(l.SBq),l.Y36(xs.mF),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(i,f){2&i&&l.Udp("margin-left",f._container._contentMargins.left,"px")("margin-right",f._container._contentMargins.right,"px")},features:[l._Bn([{provide:xs.PQ,useExisting:u}]),l.qOj],ngContentSelectors:xp,decls:1,vars:0,template:function(i,f){1&i&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),u})(),qf=(()=>{class u extends ey{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(i){this._fixedInViewport=(0,Li.Ig)(i)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(i){this._fixedTopGap=(0,Li.su)(i)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(i){this._fixedBottomGap=(0,Li.su)(i)}}return u.\u0275fac=function(){let h;return function(f){return(h||(h=l.n5z(u)))(f||u)}}(),u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(i,f){2&i&&(l.uIk("align",null),l.Udp("top",f.fixedInViewport?f.fixedTopGap:null,"px")("bottom",f.fixedInViewport?f.fixedBottomGap:null,"px"),l.ekj("mat-drawer-end","end"===f.position)("mat-drawer-over","over"===f.mode)("mat-drawer-push","push"===f.mode)("mat-drawer-side","side"===f.mode)("mat-drawer-opened",f.opened)("mat-sidenav-fixed",f.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[l.qOj],ngContentSelectors:xp,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,f){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[xs.PQ],encapsulation:2,data:{animation:[Zf.transformDrawer]},changeDetection:0}),u})(),gg=(()=>{class u extends wp{}return u.\u0275fac=function(){let h;return function(f){return(h||(h=l.n5z(u)))(f||u)}}(),u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-sidenav-container"]],contentQueries:function(i,f,I){if(1&i&&(l.Suo(I,fh,5),l.Suo(I,qf,5)),2&i){let N;l.iGM(N=l.CRH())&&(f._content=N.first),l.iGM(N=l.CRH())&&(f._allDrawers=N)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,f){2&i&&l.ekj("mat-drawer-container-explicit-backdrop",f._backdropOverride)},exportAs:["matSidenavContainer"],features:[l._Bn([{provide:hh,useExisting:u}]),l.qOj],ngContentSelectors:fb,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,f){1&i&&(l.F$t(X_),l.YNc(0,hb,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,pb,2,0,"mat-sidenav-content",1)),2&i&&(l.Q6J("ngIf",f.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!f._content))},dependencies:[be.O5,fh],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),u})(),_g=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[be.ez,ii.BQ,xs.ZD,xs.ZD,ii.BQ]}),u})();var yg=j(9643);const ty=["input"],vg=function(u){return{enterDuration:u}},bg=["*"],gb=new l.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let ny=0;const iy={provide:_o.JU,useExisting:(0,l.Gpc)(()=>xg),multi:!0};class ry{constructor(h,i){this.source=h,this.checked=i}}const oy=(0,ii.sb)((0,ii.pj)((0,ii.Kr)((0,ii.Id)(class{constructor(u){this._elementRef=u}}))));let _b=(()=>{class u extends oy{constructor(i,f,I,N,pe,Me,We){super(i),this._focusMonitor=f,this._changeDetectorRef=I,this.defaults=pe,this._onChange=ht=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new l.vpe,this.toggleChange=new l.vpe,this.tabIndex=parseInt(N)||0,this.color=this.defaultColor=pe.color||"accent",this._noopAnimations="NoopAnimations"===Me,this.id=this._uniqueId=`${We}${++ny}`}get required(){return this._required}set required(i){this._required=(0,Li.Ig)(i)}get checked(){return this._checked}set checked(i){this._checked=(0,Li.Ig)(i),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{"keyboard"===i||"program"===i?this._focused=!0:i||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(i){this.checked=!!i}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return u.\u0275fac=function(i){l.$Z()},u.\u0275dir=l.lG2({type:u,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[l.qOj]}),u})(),xg=(()=>{class u extends _b{constructor(i,f,I,N,pe,Me){super(i,f,I,N,pe,Me,"mat-slide-toggle-")}_createChangeEvent(i){return new ry(this,i)}_onChangeEvent(i){i.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(i){i.stopPropagation()}focus(i,f){f?this._focusMonitor.focusVia(this._inputElement,f,i):this._inputElement.nativeElement.focus(i)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq),l.Y36(pl.tE),l.Y36(l.sBO),l.$8M("tabindex"),l.Y36(gb),l.Y36(l.QbO,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-slide-toggle"]],viewQuery:function(i,f){if(1&i&&l.Gf(ty,5),2&i){let I;l.iGM(I=l.CRH())&&(f._inputElement=I.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(i,f){2&i&&(l.Ikx("id",f.id),l.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),l.ekj("mat-checked",f.checked)("mat-disabled",f.disabled)("mat-slide-toggle-label-before","before"==f.labelPosition)("_mat-animation-noopable",f._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[l._Bn([iy]),l.qOj],ngContentSelectors:bg,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(i,f){if(1&i&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),l.NdJ("change",function(N){return f._onChangeEvent(N)})("click",function(N){return f._onInputClick(N)}),l.qZA(),l.TgZ(5,"span",5),l._UZ(6,"span",6),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA()()(),l.TgZ(9,"span",9,10),l.NdJ("cdkObserveContent",function(){return f._onLabelTextChange()}),l.TgZ(11,"span",11),l._uU(12,"\xa0"),l.qZA(),l.Hsn(13),l.qZA()()),2&i){const I=l.MAs(1),N=l.MAs(10);l.uIk("for",f.inputId),l.xp6(2),l.ekj("mat-slide-toggle-bar-no-side-margin",!N.textContent||!N.textContent.trim()),l.xp6(1),l.Q6J("id",f.inputId)("required",f.required)("tabIndex",f.tabIndex)("checked",f.checked)("disabled",f.disabled),l.uIk("name",f.name)("aria-checked",f.checked)("aria-label",f.ariaLabel)("aria-labelledby",f.ariaLabelledby)("aria-describedby",f.ariaDescribedby),l.xp6(4),l.Q6J("matRippleTrigger",I)("matRippleDisabled",f.disableRipple||f.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,vg,f._noopAnimations?0:150))}},dependencies:[ii.wG,yg.wD],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),u})(),Kf=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({}),u})(),ly=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[Kf,ii.si,ii.BQ,yg.Q8,Kf,ii.BQ]}),u})();const cy=["exampleLink"];function uy(u,h){if(1&u){const i=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I.clearSearch())}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA()()}}const dy=function(u){return{_routerLinkActiveWakeUpHack_:u}};function hy(u,h){if(1&u&&(l.TgZ(0,"a",14,15),l._uU(2),l.qZA()),2&u){const i=l.oxw().$implicit,f=l.oxw(2);l.Q6J("routerLink","/demo/"+(f.isEditMode?"/edit/":"")+i.path)("routerLinkActiveOptions",l.VKq(3,dy,f.isEditMode)),l.xp6(2),l.hij(" ",i.data.label," ")}}function py(u,h){if(1&u&&(l.ynx(0),l.YNc(1,hy,3,5,"a",13),l.BQk()),2&u){const i=h.$implicit;l.xp6(1),l.Q6J("ngIf",i)}}function fy(u,h){if(1&u&&(l.ynx(0),l.TgZ(1,"h3",12),l._uU(2),l.qZA(),l.YNc(3,py,2,1,"ng-container",9),l._UZ(4,"mat-divider"),l.BQk()),2&u){const i=h.$implicit,f=l.oxw();l.xp6(2),l.Oqu(i),l.xp6(1),l.Q6J("ngForOf",f.routes[i])}}let my=(()=>{class u{constructor(i,f,I,N){this.zone=i,this.router=f,this.activatedRoute=I,this.mapResizeService=N,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild.params.demoUrl,this.originalRoutes=fn(fm[0].children,pe=>pe.data?pe.data.cat:null),this.categories=[li.STYLES,li.LAYERS,li.SOURCES,li.USER_INTERACTION,li.CAMERA,li.CONTROLS_AND_OVERLAYS,li.TERRAIN]}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(i){const f=this.activatedRoute.snapshot.firstChild;this.router.navigate(i.checked?["demo","edit",f.url[0].path]:["demo",f.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function Y0(u){return q0(u,5)}(this.originalRoutes),Object.values(this.routes).forEach(i=>{i.forEach((f,I)=>{f.data&&!f.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete i[I]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,Ye.P)()).subscribe(()=>{const i=this.exampleLinks.find(f=>f.nativeElement.classList.contains("active"));i&&function B_(u,h){var i=!u.ownerDocument.documentElement.contains(u);if(J0(h)&&"function"==typeof h.behavior)return h.behavior(i?[]:zf(u,h));if(!i){var f=function N_(u){return!1===u?{block:"end",inline:"nearest"}:J0(u)?u:{block:"start",inline:"nearest"}}(h);(function F_(u,h){void 0===h&&(h="auto");var i="scrollBehavior"in document.body.style;u.forEach(function(f){var I=f.el,N=f.top,pe=f.left;I.scroll&&i?I.scroll({top:N,left:pe,behavior:h}):(I.scrollTop=N,I.scrollLeft=pe)})})(zf(u,f),f.behavior)}}(i.nativeElement,{block:"center",scrollMode:"if-needed"})})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.R0b),l.Y36(Z.F0),l.Y36(Z.gz),l.Y36(Vf))},u.\u0275cmp=l.Xpm({type:u,selectors:[["ng-component"]],viewQuery:function(i,f){if(1&i&&l.Gf(cy,5,l.SBq),2&i){let I;l.iGM(I=l.CRH())&&(f.exampleLinks=I)}},decls:18,vars:5,consts:[["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModel","ngModelChange","change"],["mode","side",3,"opened","openedChange"],["sidenav",""],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["exampleLink",""]],template:function(i,f){1&i&&(l.TgZ(0,"showcase-layout-toolbar-menu",0)(1,"button",1),l.NdJ("click",function(){return f.toggleSidenav()}),l.TgZ(2,"mat-icon"),l._uU(3,"menu"),l.qZA()()(),l.TgZ(4,"showcase-layout-toolbar-menu",2)(5,"mat-slide-toggle",3),l.NdJ("ngModelChange",function(N){return f.isEditMode=N})("change",function(N){return f.toggleEdit(N)}),l._uU(6," Edit! "),l.qZA()(),l.TgZ(7,"mat-sidenav-container")(8,"mat-sidenav",4,5),l.NdJ("openedChange",function(){return f.onSidenavChange()}),l.TgZ(10,"mat-form-field",6)(11,"input",7),l.NdJ("ngModelChange",function(N){return f.searchTerm=N})("ngModelChange",function(){return f.search()}),l.qZA(),l.YNc(12,uy,3,0,"button",8),l.qZA(),l.TgZ(13,"mat-nav-list"),l.YNc(14,fy,5,2,"ng-container",9),l.qZA()(),l.TgZ(15,"mat-sidenav-content")(16,"section",10),l._UZ(17,"router-outlet"),l.qZA()()()),2&i&&(l.xp6(5),l.Q6J("ngModel",f.isEditMode),l.xp6(3),l.Q6J("opened",f.sidenavIsOpen),l.xp6(3),l.Q6J("ngModel",f.searchTerm),l.xp6(1),l.Q6J("ngIf",f.searchTerm),l.xp6(2),l.Q6J("ngForOf",f.categories))},dependencies:[Z.lC,Z.yS,Z.Od,be.sg,be.O5,_o.Fj,_o.JJ,_o.On,Uf.a,wc.lW,sb,yp,lb,Q0,ca.KE,ca.R9,uh,Ge.Hw,qf,gg,fh,xg],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]}),u})(),Ui=(()=>{class u{constructor(i,f){this.mapResizeService=i,this.map=f,this.sub=new we.w0}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Vf),l.Y36(di))},u.\u0275dir=l.lG2({type:u,selectors:[["mgl-map"]]}),u})(),Vi=(()=>{class u{constructor(i){this.map=i,null!=window.Cypress&&(console.info("Cypress detected. Setting preserveDrawingBuffer=true"),this.map.preserveDrawingBuffer=!0)}onMapIdle(i){window.mglMapTestHelper.map=i.target,window.mglMapTestHelper.idle=!0}onMapRender(i){window.mglMapTestHelper.map=i.target,window.mglMapTestHelper.idle=!1}onMapLoad(i){window.mglMapTestHelper.map=i.target,window.mglMapTestHelper.loaded=!0}ngOnInit(){window.mglMapTestHelper={mapComponent:this.map}}ngOnDestroy(){window.mglMapTestHelper=void 0}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(di))},u.\u0275dir=l.lG2({type:u,selectors:[["mgl-map"]],hostBindings:function(i,f){1&i&&l.NdJ("idle",function(N){return f.onMapIdle(N)})("render",function(N){return f.onMapRender(N)})("mapLoad",function(N){return f.onMapLoad(N)})}}),u})();const yb=function(u){return[u,40.7135]},gy=function(){return["==","extrude","true"]},_y=function(){return["linear"]},Yo=function(){return["zoom"]},yy=function(){return["get","height"]},vy=function(u,h,i){return["interpolate",u,h,15,0,15.05,i]},vb=function(){return["get","min_height"]},by=function(u,h){return{"fill-extrusion-color":"#aaa","fill-extrusion-height":u,"fill-extrusion-base":h,"fill-extrusion-opacity":.6}};let bb=(()=>{class u{onLoad(i){const f=i.getStyle().layers;for(let I=0;I<f.length;I++)if("symbol"===f[I].type&&f[I].layout["text-field"]){this.labelLayerId=f[I].id;break}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:30,consts:[[3,"zoom","center","pitch","bearing","mapLoad"],["id","3d-buildings","source","openmaptiles","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(N){return f.onLoad(N)}),l._UZ(1,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",15.5)("center",l.VKq(10,yb,-74.0066))("pitch",45)("bearing",-17.6),l.xp6(1),l.Q6J("filter",l.DdM(12,gy))("minzoom",15)("paint",l.WLB(27,by,l.kEZ(16,vy,l.DdM(13,_y),l.DdM(14,Yo),l.DdM(15,yy)),l.kEZ(23,vy,l.DdM(20,_y),l.DdM(21,Yo),l.DdM(22,vb))))("before",f.labelLayerId))},dependencies:[di,Ar,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const xy=function(u){return{width:64,height:64,data:u}},wy=function(){return[0,0]},mh=function(u){return{type:"Point",coordinates:u}},xb=function(u){return{type:"Feature",geometry:u}},wb=function(u){return[u]},Cy=function(u){return{type:"FeatureCollection",features:u}},Cb=function(u){return{type:"geojson",data:u}},Ey=function(){return{"icon-image":"gradient"}};let b1=(()=>{class u{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const I=new Uint8Array(16384);for(let N=0;N<64;N++)for(let pe=0;pe<64;pe++){const Me=4*(64*pe+N);I[Me+0]=pe/64*255,I[Me+1]=N/64*255,I[Me+2]=128,I[Me+3]=255}return I}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:19,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-image",0)(2,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("data",l.VKq(5,xy,f.imageData)),l.xp6(1),l.Q6J("source",l.VKq(16,Cb,l.VKq(14,Cy,l.VKq(12,wb,l.VKq(10,xb,l.VKq(8,mh,l.DdM(7,wy)))))))("layout",l.DdM(18,Ey)))},dependencies:[di,Ar,La,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function wg(u,h){if(1&u&&l._UZ(0,"mgl-image",3),2&u){const i=h.$implicit;l.Q6J("id",i.id)("data",i)}}const Cg=function(){return[0,0]},fl=function(u){return{type:"Point",coordinates:u}},Eb=function(){return{color:"255,0,0"}},Yf=function(u,h){return{type:"Feature",geometry:u,properties:h}},Cc=function(){return[50,0]},Yl=function(){return{color:"255,209,28"}},Xl=function(u){return[u,0]},Dy=function(){return{color:"242,127,32"}},My=function(u,h,i){return[u,h,i]},Db=function(u){return{type:"FeatureCollection",features:u}},Mb=function(u){return{type:"geojson",data:u}},Sb=function(){return["get","color"]},Tb=function(u){return["concat","square-rgb-",u]},Eg=function(u){return{"icon-image":u}};let Cp=(()=>{class u{constructor(){this.imagesData=[]}generateImage({id:i}){const f="square-rgb-";if(0!==i.indexOf(f))return;const I=i.replace(f,"").split(",").map(Number),Me=new Uint8Array(16384);for(let ht=0;ht<64;ht++)for(let Nt=0;Nt<64;Nt++){const Vt=4*(64*Nt+ht);Me[Vt+0]=I[0],Me[Vt+1]=I[1],Me[Vt+2]=I[2],Me[Vt+3]=255}this.imagesData=[...this.imagesData,{id:i,width:64,height:64,data:Me}]}trackByImage(i,f){return f.id}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("styleImageMissing",function(N){return f.generateImage(N)}),l.YNc(1,wg,1,2,"mgl-image",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngForOf",f.imagesData)("ngForTrackBy",f.trackByImage),l.xp6(1),l.Q6J("source",l.VKq(34,Mb,l.VKq(32,Db,l.kEZ(28,My,l.WLB(10,Yf,l.VKq(7,fl,l.DdM(6,Cg)),l.DdM(9,Eb)),l.WLB(17,Yf,l.VKq(14,fl,l.DdM(13,Cc)),l.DdM(16,Yl)),l.WLB(25,Yf,l.VKq(22,fl,l.VKq(20,Xl,-50)),l.DdM(24,Dy))))))("layout",l.VKq(39,Eg,l.VKq(37,Tb,l.DdM(36,Sb)))))},dependencies:[be.sg,di,Ar,La,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Ib=function(){return[0,0]},Sy=function(u){return{type:"Point",coordinates:u}},Ab=function(u){return{type:"Feature",geometry:u}},Ty=function(u){return[u]},Iy=function(u){return{type:"FeatureCollection",features:u}},Xf=function(u){return{type:"geojson",data:u}},Pb=function(){return{"icon-image":"cat","icon-size":.25}};function Ay(u,h){1&u&&l._UZ(0,"mgl-layer",2),2&u&&l.Q6J("source",l.VKq(11,Xf,l.VKq(9,Iy,l.VKq(7,Ty,l.VKq(5,Ab,l.VKq(3,Sy,l.DdM(2,Ib)))))))("layout",l.DdM(13,Pb))}let Py=(()=>{class u{constructor(){this.imageLoaded=!1}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map")(1,"mgl-image",0),l.NdJ("imageLoaded",function(){return f.imageLoaded=!0}),l.qZA(),l.YNc(2,Ay,1,14,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(2),l.Q6J("ngIf",f.imageLoaded))},dependencies:[be.O5,di,Ar,La,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Dg=function(u){return[u,38.907]},Jf=function(){return[11.15]};let Oy=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(5,Dg,-77.04))("zoom",l.DdM(7,Jf))("attributionControl",!1))},dependencies:[di,ni,el,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function ky(u,h){1&u&&l._UZ(0,"mgl-feature",4),2&u&&l.Q6J("geometry",h.$implicit)}const Ry=function(){return[8]},Ly=function(){return{"icon-image":"oneway"}};let Fy=(()=>{class u{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(i){this.center=i.features[0].geometry.coordinates}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle","mapLoad"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"geometry"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(N){return f.map=N}),l.TgZ(1,"mgl-geojson-source",1),l.YNc(2,ky,1,1,"mgl-feature",2),l.qZA(),l.TgZ(3,"mgl-layer",3),l.NdJ("layerClick",function(N){return f.centerMapTo(N)})("layerMouseEnter",function(){return f.cursorStyle="pointer"})("layerMouseLeave",function(){return f.cursorStyle=""}),l.qZA()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Ry))("center",f.center)("cursorStyle",f.cursorStyle),l.xp6(2),l.Q6J("ngForOf",f.geometries),l.xp6(1),l.Q6J("layout",l.DdM(8,Ly)))},dependencies:[be.sg,di,Ar,Ki,Tr,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function Ny(u,h){1&u&&l._UZ(0,"showcase-cluster-point",6),2&u&&l.Q6J("properties",h.$implicit.properties)}const By=function(){return[.3]},zy=function(){return[0,20]},Mg=function(){return["!=","cluster",!0]},Ob=function(u){return{fill:u}};function kb(u,h){if(1&u&&(l.O4$(),l._UZ(0,"path",4)),2&u){const i=h.$implicit;l.Q6J("ngStyle",l.VKq(2,Ob,i.fill)),l.uIk("d",i.d)}}const Rb=function(u){return{font:u}},gh=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let Lb=(()=>{class u{constructor(){const i=["<",["get","mag"],2],f=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],I=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],N=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",i,1,0]],mag2:["+",["case",f,1,0]],mag3:["+",["case",I,1,0]],mag4:["+",["case",N,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",i,gh[0],f,gh[1],I,gh[2],N,gh[3],gh[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://maplibre.org/maplibre-gl-js-docs/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-markers-for-clusters",2),l.YNc(3,Ny,1,1,"ng-template",3),l.qZA(),l._UZ(4,"mgl-layer",4)(5,"mgl-layer",5),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(12,By))("center",l.DdM(13,zy)),l.xp6(1),l.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",f.clusterProperties),l.xp6(3),l.Q6J("filter",l.DdM(14,Mg))("paint",f.circlePaint),l.xp6(1),l.Q6J("filter",l.DdM(15,Mg))("layout",f.labelLayout)("paint",f.labelPaint))},dependencies:function(){return[di,Ar,Ki,Na,sc,Ui,Fb,Vi]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})(),Fb=(()=>{class u{ngOnInit(){const i=[],f=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let I=0;for(let pe=0;pe<f.length;pe++)i.push(I),I+=f[pe];this.font=(I>=1e3?22:I>=100?20:I>=10?18:16)+"px sans-serif",this.r=I>=1e3?50:I>=100?32:I>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let pe=0;pe<f.length;pe++)this.segments.push(this.donutSegment(i[pe]/I,(i[pe]+f[pe])/I,gh[pe]));this.totalString=I.toLocaleString()}donutSegment(i,f,I){f-i==1&&(f-=1e-5);const N=2*Math.PI*(i-.25),pe=2*Math.PI*(f-.25),Me=Math.cos(N),We=Math.sin(N),ht=Math.cos(pe),Nt=Math.sin(pe),Vt=f-i>.5?1:0;return{d:`M ${this.r+this.r0*Me} ${this.r+this.r0*We} L ${this.r+this.r*Me} ${this.r+this.r*We} A ${this.r} ${this.r} 0 ${Vt} 1 ${this.r+this.r*ht} ${this.r+this.r*Nt} L ${this.r+this.r0*ht} ${this.r+this.r0*Nt} A ${this.r0} ${this.r0} 0 ${Vt} 0 ${this.r+this.r0*Me} ${this.r+this.r0*We}`,fill:I}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(i,f){1&i&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,kb,1,4,"path",1),l._UZ(2,"circle",2),l.TgZ(3,"text",3),l._uU(4),l.qZA()()),2&i&&(l.Q6J("ngStyle",l.VKq(10,Rb,f.font)),l.uIk("width",f.w)("height",f.w)("viewbox",f.viewbox),l.xp6(1),l.Q6J("ngForOf",f.segments),l.xp6(1),l.uIk("cx",f.r)("cy",f.r)("r",f.r0),l.xp6(1),l.uIk("transform",f.textTransform),l.xp6(1),l.hij(" ",f.totalString," "))},dependencies:[be.sg,be.PC],encapsulation:2}),u})();const Vy=function(){return["has","point_count"]},Nb=function(){return[0,"#51bbd6"]},Bb=function(){return[100,"#f1f075"]},zb=function(){return[750,"#f28cb1"]},Uy=function(u,h,i){return[u,h,i]},jy=function(u){return{property:"point_count",type:"interval",stops:u}},Vb=function(){return[0,20]},Ub=function(){return[100,30]},jb=function(){return[750,40]},Hb=function(u,h){return{"circle-color":u,"circle-radius":h}},$b=function(){return["DIN Offc Pro Medium","Arial Unicode MS Bold"]},Hy=function(u){return{"text-field":"{point_count_abbreviated}","text-font":u,"text-size":12}},$y=function(){return["!has","point_count"]},Gy=function(){return{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}};function Zy(u,h){if(1&u&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2)(2,"mgl-layer",3)(3,"mgl-layer",4)(4,"mgl-layer",5),l.BQk()),2&u){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),l.xp6(1),l.Q6J("filter",l.DdM(10,Vy))("paint",l.WLB(29,Hb,l.VKq(18,jy,l.kEZ(14,Uy,l.DdM(11,Nb),l.DdM(12,Bb),l.DdM(13,zb))),l.VKq(27,jy,l.kEZ(23,Uy,l.DdM(20,Vb),l.DdM(21,Ub),l.DdM(22,jb))))),l.xp6(1),l.Q6J("filter",l.DdM(32,Vy))("layout",l.VKq(34,Hy,l.DdM(33,$b))),l.xp6(1),l.Q6J("filter",l.DdM(36,$y))("paint",l.DdM(37,Gy))}}const Wy=function(){return[3]},qy=function(u){return[u,40.66995747013945]};let Ky=(()=>{class u{ngOnInit(){var i=this;return Sr(function*(){i.earthquakes=yield j.e(45).then(j.t.bind(j,3045,19))})()}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Zy,5,38,"ng-container",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Wy))("center",l.VKq(6,qy,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",f.earthquakes))},dependencies:[be.O5,di,Ar,Ki,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Yy=function(u){return[u,38.907]},Xy=function(){return[11.15]},Tg=function(){return['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"]};let ud=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(6,Yy,-77.04))("zoom",l.DdM(8,Xy))("attributionControl",!1),l.xp6(1),l.Q6J("customAttribution",l.DdM(9,Tg)))},dependencies:[di,ni,el,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Gb=function(){return[36.235656,50.00387]},Zb=function(){return[11.15]};let _h=(()=>{class u{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1)(2,"mgl-control",2)(3,"mgl-control",3)(4,"mgl-control",4),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.DdM(5,Gb))("zoom",l.DdM(6,Zb))("locale",f.locale))},dependencies:[di,ni,wl,Cl,Os,Qc,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const x1=function(u,h,i){return{"background-image":u,width:h,height:i}};function Ig(u,h){if(1&u){const i=l.EpF();l.TgZ(0,"mgl-marker",2)(1,"div",3),l.NdJ("click",function(){const N=l.CHM(i).$implicit,pe=l.oxw();return l.KtG(pe.alert(N.properties.message))}),l.qZA()()}if(2&u){const i=h.$implicit;l.Q6J("feature",i),l.xp6(1),l.Q6J("ngStyle",l.kEZ(2,x1,"url(https://placekitten.com/g/"+i.properties.iconSize.join("/")+"/)",i.properties.iconSize[0]+"px",i.properties.iconSize[1]+"px"))}}const w1=function(){return[5]},Jy=function(u,h){return[u,h]};let Qy=(()=>{class u{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(i){alert(i)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"ngStyle","click"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Ig,2,6,"mgl-marker",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,w1))("center",l.WLB(6,Jy,-65.017,-16.457)),l.xp6(1),l.Q6J("ngForOf",f.geojson.features))},dependencies:[be.sg,be.PC,di,Ps,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),u})();const C1=function(){return[3]},wi=function(u){return[u,39]};let Wb=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(i,f){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,C1))("center",l.VKq(5,wi,-77.38)))},dependencies:[di,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const qb=function(){return[9]},Kb=function(u){return[u,40]};let yh=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(i,f){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,qb))("center",l.VKq(5,Kb,-74.5)))},dependencies:[di,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Yb=["*",[["mat-card-footer"]]],Qf=["*","mat-card-footer"];let ev=(()=>{class u{constructor(i){this._animationMode=i}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.QbO,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(i,f){2&i&&l.ekj("_mat-animation-noopable","NoopAnimations"===f._animationMode)},exportAs:["matCard"],ngContentSelectors:Qf,decls:2,vars:0,template:function(i,f){1&i&&(l.F$t(Yb),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),u})(),tv=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[ii.BQ,ii.BQ]}),u})();function nv(u,h){if(1&u&&(l.TgZ(0,"mgl-control",3)(1,"mat-card")(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"div"),l._uU(5),l.qZA()()()),2&u){const i=l.oxw();l.xp6(3),l.hij("Longitude:\xa0",i.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",i.coordinates[1],"")}}const iv=function(){return[2]},rv=function(){return[0,0]};let Ep=(()=>{class u{constructor(){this.color="#3887be"}onDragEnd(i){this.coordinates=i.getLngLat().toArray()}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"lngLat","draggable","markerDragEnd"],["position","bottom-left",4,"ngIf"],["position","bottom-left"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1),l.NdJ("markerDragEnd",function(N){return f.onDragEnd(N)}),l.qZA(),l.YNc(2,nv,6,2,"mgl-control",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,iv))("center",l.DdM(8,rv)),l.xp6(1),l.Q6J("lngLat",l.DdM(9,rv))("draggable",!0),l.xp6(1),l.Q6J("ngIf",f.coordinates))},dependencies:[be.O5,di,Ps,ni,ev,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Dp=function(){return[13]},ix=function(){return[11.255,43.77]};let rx=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Dp))("center",l.DdM(5,ix)))},dependencies:[di,ni,wl,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const ox=function(){return[15]},ov=function(u){return[u,37.830348]},sv=function(){return{}},av=function(u){return[u,37.83381888486939]},sx=function(u){return[u,37.83317489144141]},lv=function(u){return[u,37.83270036637107]},ax=function(u){return[u,37.832056363179625]},lx=function(u){return[u,37.83114119107971]},A1=function(u){return[u,37.83049717427869]},P1=function(u){return[u,37.829920943955045]},O1=function(u){return[u,37.82954808664175]},k1=function(u){return[u,37.82944639795659]},cv=function(u){return[u,37.82880236636284]},tm=function(u){return[u,37.82931081282506]},cx=function(u){return[u,37.83080223556934]},ux=function(u){return[u,37.83168351665737]},uv=function(u){return[u,37.832158048267786]},Mp=function(u){return[u,37.83297152392784]},dx=function(u){return[u,37.83263257682617]},hx=function(u){return[u,37.832937629287755]},px=function(u){return[u,37.832429207817725]},fx=function(u){return[u,37.832564787218985]},mx=function(u){return[u,37.83337825839438]},dv=function(u){return[u,37.83368330777276]},gx=function(u,h,i,f,I,N,pe,Me,We,ht,Nt,Vt,Dn,Wn,An,Nn,fi,Mi,sr,yo,Or){return[u,h,i,f,I,N,pe,Me,We,ht,Nt,Vt,Dn,Wn,An,Nn,fi,Mi,sr,yo,Or]},_x=function(u){return{type:"LineString",coordinates:u}},Sp=function(u,h){return{type:"Feature",properties:u,geometry:h}},yx=function(u){return{type:"geojson",data:u}},hv=function(){return{"line-join":"round","line-cap":"round"}},vx=function(){return{"line-color":"#888","line-width":8}};let pv=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,ox))("center",l.VKq(8,ov,-122.486052)),l.xp6(1),l.Q6J("source",l.VKq(80,yx,l.WLB(77,Sp,l.DdM(10,sv),l.VKq(75,_x,l.rFY(53,gx,[l.VKq(11,av,-122.48369693756104),l.VKq(13,sx,-122.48348236083984),l.VKq(15,lv,-122.48339653015138),l.VKq(17,ax,-122.48356819152832),l.VKq(19,lx,-122.48404026031496),l.VKq(21,A1,-122.48404026031496),l.VKq(23,P1,-122.48348236083984),l.VKq(25,O1,-122.48356819152832),l.VKq(27,k1,-122.48507022857666),l.VKq(29,cv,-122.48610019683838),l.VKq(31,tm,-122.48695850372314),l.VKq(33,cx,-122.48700141906738),l.VKq(35,ux,-122.48751640319824),l.VKq(37,uv,-122.48803138732912),l.VKq(39,Mp,-122.48888969421387),l.VKq(41,dx,-122.48987674713133),l.VKq(43,hx,-122.49043464660643),l.VKq(45,px,-122.49125003814696),l.VKq(47,fx,-122.49163627624512),l.VKq(49,mx,-122.49223709106445),l.VKq(51,dv,-122.49378204345702)])))))("layout",l.DdM(82,hv))("paint",l.DdM(83,vx)))},dependencies:[di,Ar,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function bx(u,h){if(1&u&&l._UZ(0,"mgl-layer",5),2&u){const i=h.$implicit;l.Q6J("id",i.id)("type",i.type)("filter",i.filter)("paint",i.paint)}}const fv=function(){return["!=","cluster",!0]},xx=function(){return{"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1}};function Og(u,h){if(1&u&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l.YNc(2,bx,1,4,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l.BQk()),2&u){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),l.xp6(1),l.Q6J("ngForOf",i.clusterLayers),l.xp6(1),l.Q6J("filter",l.DdM(7,fv))("paint",l.DdM(8,xx))}}const wx=function(){return[3]},mv=function(u){return[u,40.66995747013945]};let gv=(()=>{class u{ngOnInit(){var i=this;return Sr(function*(){i.earthquakes=yield j.e(45).then(j.t.bind(j,3045,19));const f=[[0,"green"],[20,"orange"],[200,"red"]];i.clusterLayers=f.map((I,N)=>({type:"circle",id:`cluster-${N}`,paint:{"circle-color":I[1],"circle-radius":70,"circle-blur":1},filter:N===f.length-1?[">=","point_count",I[0]]:["all",[">=","point_count",I[0]],["<","point_count",f[N+1][0]]]}))})()}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"],["source","earthquakes",3,"id","type","filter","paint"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Og,4,9,"ng-container",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,wx))("center",l.VKq(6,mv,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",f.earthquakes))},dependencies:[be.sg,be.O5,di,Ar,Ki,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Cx=function(){return[2]},Ex=function(u){return[u,37.830348]},Dx=function(){return{"fill-color":"#627BC1","fill-opacity":.5}},kg=function(){return{"line-color":"#627BC1","line-width":2}},Mx=function(){return{"fill-color":"#627BC1","fill-opacity":1}};let _v=(()=>{class u{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(i){this.hoverFilter=["==","name",i.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"paint","layerMouseMove","layerMouseLeave"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerMouseMove",function(N){return f.activateHoverOn(N)})("layerMouseLeave",function(){return f.disableHover()}),l.qZA(),l._UZ(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Cx))("center",l.VKq(9,Ex,-100.486052)),l.xp6(2),l.Q6J("paint",l.DdM(11,Dx)),l.xp6(1),l.Q6J("paint",l.DdM(12,kg)),l.xp6(1),l.Q6J("paint",l.DdM(13,Mx))("filter",f.hoverFilter))},dependencies:[di,Ar,Ki,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Sx=function(){return[9]},Tx=function(u){return[u,40]};let Ix=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(i,f){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Sx))("center",l.VKq(6,Tx,-74.5))("interactive",!1))},dependencies:[di,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Ax=function(){return[2.9]},Px=function(){return[16.05,48]};let Ox=(()=>{class u{changeLangTo(i){!this.map||(this.map.setLayoutProperty("country_1","text-field","{name:"+i+"}"),this.map.setLayoutProperty("country_2","text-field","{name:"+i+"}"),this.map.setLayoutProperty("country_3","text-field","{name:"+i+"}"))}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:10,vars:6,consts:[[3,"zoom","center","mapLoad"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(N){return f.map=N}),l.TgZ(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return f.changeLangTo("fr")}),l._uU(3," French "),l.qZA(),l.TgZ(4,"button",1),l.NdJ("click",function(){return f.changeLangTo("ru")}),l._uU(5," Russian "),l.qZA(),l.TgZ(6,"button",1),l.NdJ("click",function(){return f.changeLangTo("de")}),l._uU(7," German "),l.qZA(),l.TgZ(8,"button",1),l.NdJ("click",function(){return f.changeLangTo("es")}),l._uU(9," Spanish "),l.qZA()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Ax))("center",l.DdM(5,Px)))},dependencies:[di,ni,wc.lW,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function kx(u,h){if(1&u&&l._UZ(0,"mgl-geojson-source",3),2&u){const i=l.oxw();l.Q6J("data",i.data)}}const Rx=function(){return{"line-color":"yellow","line-opacity":.75,"line-width":5}};function yv(u,h){1&u&&l._UZ(0,"mgl-layer",4),2&u&&l.Q6J("paint",l.DdM(1,Rx))}let vv=(()=>{class u{constructor(){this.zoom=[0]}ngOnInit(){var i=this;return Sr(function*(){const f=yield j.e(330).then(j.t.bind(j,3330,19)),I=f.features[0].geometry.coordinates;f.features[0].geometry.coordinates=[I[0]],i.data=f,i.center=I[0],i.zoom=[14],i.pitch=30;let N=0;i.timer=window.setInterval(()=>{N<I.length?(i.center=I[N],f.features[0].geometry.coordinates.push(I[N]),i.data={...i.data},N++):window.clearInterval(i.timer)},10)})()}ngOnDestroy(){window.clearInterval(this.timer)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:8,consts:[["movingMethod","jumpTo",3,"zoom","center","centerWithPanTo","pitch"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,kx,1,1,"mgl-geojson-source",1),l.YNc(2,yv,1,2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",f.zoom)("center",f.center)("centerWithPanTo",!0)("pitch",f.pitch),l.xp6(1),l.Q6J("ngIf",f.data),l.xp6(1),l.Q6J("ngIf",f.data))},dependencies:[be.O5,di,Ar,Ki,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();var Lx=j(4986),Fx=j(5963);const Nx=function(){return[14]},Bx=function(){return{"raster-fade-duration":0}};let zx=(()=>{class u{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){var i=this;return Sr(function*(){const I=(yield j.e(330).then(j.t.bind(j,3330,19))).features[0].geometry.coordinates,N=I.map(Me=>i.makeRectangle(Me));i.center=I[0],i.coordinates=N[0];let pe=0;i.sub=function bv(u=0,h=Lx.z){return u<0&&(u=0),(0,Fx.H)(u,u,h)}(250).subscribe(()=>{i.url=Math.random()<.5?"assets/red.png":"assets/blue.png",i.coordinates=N[pe],pe=(pe+1)%N.length})})()}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([i,f]){return[[i,f],[i+this.size,f],[i+this.size,f-this.size],[i,f-this.size]]}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-image-source",1)(2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",f.center)("zoom",l.DdM(7,Nx)),l.xp6(1),l.Q6J("url",f.url)("coordinates",f.coordinates),l.xp6(1),l.Q6J("paint",l.DdM(8,Bx)))},dependencies:[di,Ar,_a,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Rg=function(){return{enableHighAccuracy:!0}};let Lg=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:5,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("positionOptions",l.DdM(4,Rg))("trackUserLocation",!0))},dependencies:[di,ni,Os,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Fg=function(u){return[u]},Ng=function(){return[17]},Vx=function(){return[4.577979,51.038189]},Ux=function(){return[4.577979,51.03816]};let Bg=(()=>{class u{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let i=0;setInterval(()=>{i+=.01,1===i&&(i=0),this.pitch=45+15*Math.cos(i),this.bearing=20*Math.sin(i)-103},20)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"polygon",4)(5,"polygon",5)(6,"polygon",6),l.qZA()()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("interactive",!1)("pitch",l.VKq(8,Fg,f.pitch))("bearing",l.VKq(10,Fg,f.bearing))("zoom",l.DdM(12,Ng))("center",l.DdM(13,Vx)),l.xp6(1),l.Q6J("lngLat",l.DdM(14,Ux)))},dependencies:[di,Ps,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]}),u})();const jx=function(){return[9]},xv=function(u){return[u,40]};let vh=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,jx))("center",l.VKq(5,xv,-74.5)))},dependencies:[di,ni,Cl,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();var zg=j(4385),Vg=j(8184),Hx=j(2289),wv=j(4080);const Ug=["tooltip"],Ev="tooltip-panel",jg=(0,$a.i$)({passive:!0}),$g=new l.OlP("mat-tooltip-scroll-strategy"),Mv={provide:$g,deps:[Vg.aV],useFactory:function Dv(u){return()=>u.scrollStrategies.reposition({scrollThrottle:20})}},Zx=new l.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function Wx(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let qx=(()=>{class u{constructor(i,f,I,N,pe,Me,We,ht,Nt,Vt,Dn,Wn){this._overlay=i,this._elementRef=f,this._scrollDispatcher=I,this._viewContainerRef=N,this._ngZone=pe,this._platform=Me,this._ariaDescriber=We,this._focusMonitor=ht,this._dir=Vt,this._defaultOptions=Dn,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new ue.x,this._scrollStrategy=Nt,this._document=Wn,Dn&&(Dn.position&&(this.position=Dn.position),Dn.touchGestures&&(this.touchGestures=Dn.touchGestures)),Vt.change.pipe((0,bi.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(i){i!==this._position&&(this._position=i,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(i){this._disabled=(0,Li.Ig)(i),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(i){this._showDelay=(0,Li.su)(i)}get hideDelay(){return this._hideDelay}set hideDelay(i){this._hideDelay=(0,Li.su)(i),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(i){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=i?String(i).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(i){this._tooltipClass=i,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,bi.R)(this._destroyed)).subscribe(i=>{i?"keyboard"===i&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const i=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([f,I])=>{i.removeEventListener(f,I,jg)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(i,this.message,"tooltip"),this._focusMonitor.stopMonitoring(i)}show(i=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const f=this._createOverlay();this._detach(),this._portal=this._portal||new wv.C5(this._tooltipComponent,this._viewContainerRef);const I=this._tooltipInstance=f.attach(this._portal).instance;I._triggerElement=this._elementRef.nativeElement,I._mouseLeaveHideDelay=this._hideDelay,I.afterHidden().pipe((0,bi.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),I.show(i)}hide(i=this.hideDelay){const f=this._tooltipInstance;f&&(f.isVisible()?f.hide(i):(f._cancelPendingAnimations(),this._detach()))}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),f=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return f.positionChanges.pipe((0,bi.R)(this._destroyed)).subscribe(I=>{this._updateCurrentPositionClass(I.connectionPair),this._tooltipInstance&&I.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:f,panelClass:`${this._cssClassPrefix}-${Ev}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,bi.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,bi.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,bi.R)(this._destroyed)).subscribe(I=>{this._isTooltipVisible()&&I.keyCode===ql.hY&&!(0,ql.Vb)(I)&&(I.preventDefault(),I.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(i){const f=i.getConfig().positionStrategy,I=this._getOrigin(),N=this._getOverlayPosition();f.withPositions([this._addOffset({...I.main,...N.main}),this._addOffset({...I.fallback,...N.fallback})])}_addOffset(i){return i}_getOrigin(){const i=!this._dir||"ltr"==this._dir.value,f=this.position;let I;"above"==f||"below"==f?I={originX:"center",originY:"above"==f?"top":"bottom"}:"before"==f||"left"==f&&i||"right"==f&&!i?I={originX:"start",originY:"center"}:("after"==f||"right"==f&&i||"left"==f&&!i)&&(I={originX:"end",originY:"center"});const{x:N,y:pe}=this._invertPosition(I.originX,I.originY);return{main:I,fallback:{originX:N,originY:pe}}}_getOverlayPosition(){const i=!this._dir||"ltr"==this._dir.value,f=this.position;let I;"above"==f?I={overlayX:"center",overlayY:"bottom"}:"below"==f?I={overlayX:"center",overlayY:"top"}:"before"==f||"left"==f&&i||"right"==f&&!i?I={overlayX:"end",overlayY:"center"}:("after"==f||"right"==f&&i||"left"==f&&!i)&&(I={overlayX:"start",overlayY:"center"});const{x:N,y:pe}=this._invertPosition(I.overlayX,I.overlayY);return{main:I,fallback:{overlayX:N,overlayY:pe}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,Qr.q)(1),(0,bi.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(i){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=i,this._tooltipInstance._markForCheck())}_invertPosition(i,f){return"above"===this.position||"below"===this.position?"top"===f?f="bottom":"bottom"===f&&(f="top"):"end"===i?i="start":"start"===i&&(i="end"),{x:i,y:f}}_updateCurrentPositionClass(i){const{overlayY:f,originX:I,originY:N}=i;let pe;if(pe="center"===f?this._dir&&"rtl"===this._dir.value?"end"===I?"left":"right":"start"===I?"left":"right":"bottom"===f&&"top"===N?"above":"below",pe!==this._currentPosition){const Me=this._overlayRef;if(Me){const We=`${this._cssClassPrefix}-${Ev}-`;Me.removePanelClass(We+this._currentPosition),Me.addPanelClass(We+pe)}this._currentPosition=pe}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const i=[];if(this._platformSupportsMouseEvents())i.push(["mouseleave",f=>{const I=f.relatedTarget;(!I||!this._overlayRef?.overlayElement.contains(I))&&this.hide()}],["wheel",f=>this._wheelListener(f)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const f=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};i.push(["touchend",f],["touchcancel",f])}this._addListeners(i),this._passiveListeners.push(...i)}_addListeners(i){i.forEach(([f,I])=>{this._elementRef.nativeElement.addEventListener(f,I,jg)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(i){if(this._isTooltipVisible()){const f=this._document.elementFromPoint(i.clientX,i.clientY),I=this._elementRef.nativeElement;f!==I&&!I.contains(f)&&this.hide()}}_disableNativeGesturesIfNecessary(){const i=this.touchGestures;if("off"!==i){const f=this._elementRef.nativeElement,I=f.style;("on"===i||"INPUT"!==f.nodeName&&"TEXTAREA"!==f.nodeName)&&(I.userSelect=I.msUserSelect=I.webkitUserSelect=I.MozUserSelect="none"),("on"===i||!f.draggable)&&(I.webkitUserDrag="none"),I.touchAction="none",I.webkitTapHighlightColor="transparent"}}}return u.\u0275fac=function(i){l.$Z()},u.\u0275dir=l.lG2({type:u,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),u})(),Kx=(()=>{class u extends qx{constructor(i,f,I,N,pe,Me,We,ht,Nt,Vt,Dn,Wn){super(i,f,I,N,pe,Me,We,ht,Nt,Vt,Dn,Wn),this._tooltipComponent=R1}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Vg.aV),l.Y36(l.SBq),l.Y36(xs.mF),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36($a.t4),l.Y36(pl.$s),l.Y36(pl.tE),l.Y36($g),l.Y36(fg.Is,8),l.Y36(Zx,8),l.Y36(be.K0))},u.\u0275dir=l.lG2({type:u,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[l.qOj]}),u})(),Sv=(()=>{class u{constructor(i,f){this._changeDetectorRef=i,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new ue.x,this._animationsDisabled="NoopAnimations"===f}show(i){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},i)}hide(i){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},i)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:i}){(!i||!this._triggerElement.contains(i))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:i}){(i===this._showAnimation||i===this._hideAnimation)&&this._finalizeAnimation(i===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(i){i?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(i){const f=this._tooltip.nativeElement,I=this._showAnimation,N=this._hideAnimation;if(f.classList.remove(i?N:I),f.classList.add(i?I:N),this._isVisible=i,i&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const pe=getComputedStyle(f);("0s"===pe.getPropertyValue("animation-duration")||"none"===pe.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}i&&this._onShow(),this._animationsDisabled&&(f.classList.add("_mat-animation-noopable"),this._finalizeAnimation(i))}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO),l.Y36(l.QbO,8))},u.\u0275dir=l.lG2({type:u}),u})(),R1=(()=>{class u extends Sv{constructor(i,f,I){super(i,I),this._breakpointObserver=f,this._isHandset=this._breakpointObserver.observe(Hx.u3.Handset),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO),l.Y36(Hx.Yg),l.Y36(l.QbO,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-tooltip-component"]],viewQuery:function(i,f){if(1&i&&l.Gf(Ug,7),2&i){let I;l.iGM(I=l.CRH())&&(f._tooltip=I.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(i,f){1&i&&l.NdJ("mouseleave",function(N){return f._handleMouseLeave(N)}),2&i&&l.Udp("zoom",f.isVisible()?1:null)},features:[l.qOj],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(i,f){if(1&i&&(l.TgZ(0,"div",0,1),l.NdJ("animationend",function(N){return f._handleAnimationEnd(N)}),l.ALo(2,"async"),l._uU(3),l.qZA()),2&i){let I;l.ekj("mat-tooltip-handset",null==(I=l.lcZ(2,4,f._isHandset))?null:I.matches),l.Q6J("ngClass",f.tooltipClass),l.xp6(3),l.Oqu(f.message)}},dependencies:[be.mk,be.Ov],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),u})(),Tv=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:[Mv],imports:[pl.rt,be.ez,Vg.U8,ii.BQ,ii.BQ,xs.ZD]}),u})();function Yx(u,h){if(1&u&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&u){const i=h.$implicit;l.Q6J("value",i),l.xp6(1),l.hij(" ",i," ")}}function F1(u,h){if(1&u){const i=l.EpF();l.TgZ(0,"mat-form-field",16)(1,"mat-select",17),l.NdJ("selectionChange",function(I){l.CHM(i);const N=l.oxw(2);return l.KtG(N._changePageSize(I.value))}),l.YNc(2,Yx,2,2,"mat-option",18),l.qZA()()}if(2&u){const i=l.oxw(2);l.Q6J("appearance",i._formFieldAppearance)("color",i.color),l.xp6(1),l.Q6J("value",i.pageSize)("disabled",i.disabled)("panelClass",i.selectConfig.panelClass||"")("disableOptionCentering",i.selectConfig.disableOptionCentering)("aria-label",i._intl.itemsPerPageLabel),l.xp6(1),l.Q6J("ngForOf",i._displayedPageSizeOptions)}}function N1(u,h){if(1&u&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&u){const i=l.oxw(2);l.xp6(1),l.Oqu(i.pageSize)}}function Xx(u,h){if(1&u&&(l.TgZ(0,"div",12)(1,"div",13),l._uU(2),l.qZA(),l.YNc(3,F1,3,8,"mat-form-field",14),l.YNc(4,N1,2,1,"div",15),l.qZA()),2&u){const i=l.oxw();l.xp6(2),l.hij(" ",i._intl.itemsPerPageLabel," "),l.xp6(1),l.Q6J("ngIf",i._displayedPageSizeOptions.length>1),l.xp6(1),l.Q6J("ngIf",i._displayedPageSizeOptions.length<=1)}}function Jx(u,h){if(1&u){const i=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I.firstPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",22),l.qZA()()}if(2&u){const i=l.oxw();l.Q6J("matTooltip",i._intl.firstPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),l.uIk("aria-label",i._intl.firstPageLabel)}}function Iv(u,h){if(1&u){const i=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",23),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I.lastPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",24),l.qZA()()}if(2&u){const i=l.oxw();l.Q6J("matTooltip",i._intl.lastPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),l.uIk("aria-label",i._intl.lastPageLabel)}}let Tp=(()=>{class u{constructor(){this.changes=new ue.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(i,f,I)=>{if(0==I||0==f)return`0 of ${I}`;const N=i*f;return`${N+1} \u2013 ${N<(I=Math.max(I,0))?Math.min(N+f,I):N+f} of ${I}`}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const Pv={provide:Tp,deps:[[new l.FiY,new l.tp0,Tp]],useFactory:function Av(u){return u||new Tp}},ew=new l.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),tw=(0,ii.Id)((0,ii.dB)(class{}));let nw=(()=>{class u extends tw{constructor(i,f,I){if(super(),this._intl=i,this._changeDetectorRef=f,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new l.vpe,this._intlChanges=i.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),I){const{pageSize:N,pageSizeOptions:pe,hidePageSize:Me,showFirstLastButtons:We}=I;null!=N&&(this._pageSize=N),null!=pe&&(this._pageSizeOptions=pe),null!=Me&&(this._hidePageSize=Me),null!=We&&(this._showFirstLastButtons=We)}}get pageIndex(){return this._pageIndex}set pageIndex(i){this._pageIndex=Math.max((0,Li.su)(i),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(i){this._length=(0,Li.su)(i),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(i){this._pageSize=Math.max((0,Li.su)(i),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(i){this._pageSizeOptions=(i||[]).map(f=>(0,Li.su)(f)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(i){this._hidePageSize=(0,Li.Ig)(i)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(i){this._showFirstLastButtons=(0,Li.Ig)(i)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const i=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(i)}previousPage(){if(!this.hasPreviousPage())return;const i=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(i)}firstPage(){if(!this.hasPreviousPage())return;const i=this.pageIndex;this.pageIndex=0,this._emitPageEvent(i)}lastPage(){if(!this.hasNextPage())return;const i=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(i)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const i=this.getNumberOfPages()-1;return this.pageIndex<i&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(i){const I=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/i)||0,this.pageSize=i,this._emitPageEvent(I)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((i,f)=>i-f),this._changeDetectorRef.markForCheck())}_emitPageEvent(i){this.page.emit({previousPageIndex:i,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return u.\u0275fac=function(i){l.$Z()},u.\u0275dir=l.lG2({type:u,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[l.qOj]}),u})(),Gg=(()=>{class u extends nw{constructor(i,f,I){super(i,f,I),I&&null!=I.formFieldAppearance&&(this._formFieldAppearance=I.formFieldAppearance)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tp),l.Y36(l.sBO),l.Y36(ew,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[l.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(i,f){1&i&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,Xx,5,3,"div",2),l.TgZ(3,"div",3)(4,"div",4),l._uU(5),l.qZA(),l.YNc(6,Jx,3,5,"button",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return f.previousPage()}),l.O4$(),l.TgZ(8,"svg",7),l._UZ(9,"path",8),l.qZA()(),l.kcU(),l.TgZ(10,"button",9),l.NdJ("click",function(){return f.nextPage()}),l.O4$(),l.TgZ(11,"svg",7),l._UZ(12,"path",10),l.qZA()(),l.YNc(13,Iv,3,5,"button",11),l.qZA()()()),2&i&&(l.xp6(2),l.Q6J("ngIf",!f.hidePageSize),l.xp6(3),l.hij(" ",f._intl.getRangeLabel(f.pageIndex,f.pageSize,f.length)," "),l.xp6(1),l.Q6J("ngIf",f.showFirstLastButtons),l.xp6(1),l.Q6J("matTooltip",f._intl.previousPageLabel)("matTooltipDisabled",f._previousButtonsDisabled())("matTooltipPosition","above")("disabled",f._previousButtonsDisabled()),l.uIk("aria-label",f._intl.previousPageLabel),l.xp6(3),l.Q6J("matTooltip",f._intl.nextPageLabel)("matTooltipDisabled",f._nextButtonsDisabled())("matTooltipPosition","above")("disabled",f._nextButtonsDisabled()),l.uIk("aria-label",f._intl.nextPageLabel),l.xp6(3),l.Q6J("ngIf",f.showFirstLastButtons))},dependencies:[be.sg,be.O5,wc.lW,ca.KE,zg.gD,ii.ey,Kx],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{display:inline-block;width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),u})(),Ip=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:[Pv],imports:[be.ez,wc.ot,zg.LD,Tv,ii.BQ]}),u})();function Ov(u,h){if(1&u&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&u){const i=h.$implicit;l.Q6J("title",i.properties["Secondary ID"]),l.xp6(1),l.hij(" ",i.properties["Primary ID"]," ")}}function kv(u,h){if(1&u){const i=l.EpF();l.TgZ(0,"div",9),l.NdJ("click",function(I){const pe=l.CHM(i).$implicit,Me=l.oxw(2);return l.KtG(Me.selectCluster(I,pe))}),l._uU(1),l.qZA()}if(2&u){const i=h.$implicit;l.xp6(1),l.hij(" ",null==i.properties?null:i.properties.point_count," ")}}function Rv(u,h){if(1&u&&(l.TgZ(0,"mgl-popup",10),l._UZ(1,"showcase-cluster-popup",11),l.qZA()),2&u){l.oxw();const i=l.MAs(2),f=l.oxw();l.Q6J("feature",f.selectedCluster),l.xp6(1),l.Q6J("clusterComponent",i)("selectedCluster",f.selectedCluster)}}function Lv(u,h){if(1&u&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2,3),l.TgZ(3,"mgl-markers-for-clusters",4),l.YNc(4,Ov,2,2,"ng-template",5),l.YNc(5,kv,2,1,"ng-template",6),l.qZA(),l.YNc(6,Rv,2,3,"mgl-popup",7),l.BQk()),2&u){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),l.xp6(5),l.Q6J("ngIf",i.selectedCluster)}}const Fv=function(){return[3]},Nv=function(u){return[u,40.66995747013945]};function iw(u,h){if(1&u&&(l.TgZ(0,"mat-list-item"),l._uU(1),l.qZA()),2&u){const i=h.$implicit;l.xp6(1),l.hij(" ",i.properties["Primary ID"]," ")}}let z1=(()=>{class u{ngOnInit(){var i=this;return Sr(function*(){const f=yield j.e(45).then(j.t.bind(j,3045,19));setInterval(()=>{f.features.length&&f.features.pop(),i.earthquakes={...f}},500)})()}selectCluster(i,f){i.stopPropagation(),this.selectedCluster={geometry:f.geometry,properties:f.properties}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["clusterComponent",""],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Lv,7,5,"ng-container",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Fv))("center",l.VKq(6,Nv,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",f.earthquakes))},dependencies:function(){return[be.O5,di,Ki,_s,rs,Na,sc,Ui,Bv,Vi]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]}),u})(),Bv=(()=>{class u{ngOnChanges(i){this.changePage(),i.selectedCluster&&!i.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(i){var f=this;return Sr(function*(){let I=0;i&&(I=5*i.pageIndex),f.leaves=yield f.clusterComponent.getClusterLeaves(f.selectedCluster.properties.cluster_id,5,I)})()}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-cluster-popup"]],viewQuery:function(i,f){if(1&i&&l.Gf(Gg,7),2&i){let I;l.iGM(I=l.CRH())&&(f.paginator=I.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[l.TTD],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"length","pageSize","page"]],template:function(i,f){1&i&&(l.TgZ(0,"mat-list"),l.YNc(1,iw,2,1,"mat-list-item",0),l.qZA(),l.TgZ(2,"mat-paginator",1),l.NdJ("page",function(N){return f.changePage(N)}),l.qZA()),2&i&&(l.xp6(1),l.Q6J("ngForOf",f.leaves),l.xp6(1),l.Q6J("length",null==f.selectedCluster.properties?null:f.selectedCluster.properties.point_count)("pageSize",5))},dependencies:[be.sg,ab,yp,Gg],encapsulation:2}),u})();function rw(u,h){if(1&u){const i=l.EpF();l.ynx(0),l.TgZ(1,"mgl-control")(2,"button",3),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I.alert("Hello"))}),l._uU(3," Hello "),l.qZA()(),l._UZ(4,"mgl-control",4)(5,"mgl-control",5),l.TgZ(6,"mgl-control",6),l.NdJ("geolocate",function(I){l.CHM(i);const N=l.oxw();return l.KtG(N.onGeolocate(I))}),l.qZA(),l._UZ(7,"mgl-control",7)(8,"mgl-control",8),l.BQk()}}let ow=(()=>{class u{constructor(){this.visible=!0}alert(i){alert(i)}onGeolocate(i){console.log("geolocate",i)}toggleControls(){this.visible=!this.visible}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:5,vars:4,consts:[[4,"ngIf"],["position","bottom-right"],["mat-flat-button","","color","accent",3,"click"],["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map"),l.YNc(1,rw,9,0,"ng-container",0),l.TgZ(2,"mgl-control",1)(3,"button",2),l.NdJ("click",function(){return f.toggleControls()}),l._uU(4),l.qZA()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngIf",f.visible),l.xp6(3),l.hij(" ",f.visible?"Hide Controls":"Show Controls"," "))},dependencies:[be.O5,di,ni,wl,Cl,Os,el,Qc,wc.lW,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const sw=function(){return[5]},nm=function(u,h){return[u,h]};let Ap=(()=>{class u{alert(i){alert(i)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.NdJ("click",function(){return f.alert("Foo")}),l.qZA()(),l.TgZ(3,"mgl-marker",1)(4,"div",3),l.NdJ("click",function(){return f.alert("Bar")}),l.qZA()(),l.TgZ(5,"mgl-marker",1)(6,"div",4),l.NdJ("click",function(){return f.alert("Baz")}),l.qZA()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,sw))("center",l.WLB(8,nm,-65.017,-16.457)),l.xp6(1),l.Q6J("lngLat",l.WLB(11,nm,-66.324462890625,-16.024695711685304)),l.xp6(2),l.Q6J("lngLat",l.WLB(14,nm,-61.2158203125,-15.97189158092897)),l.xp6(2),l.Q6J("lngLat",l.WLB(17,nm,-63.29223632812499,-18.28151823530889)))},dependencies:[di,Ps,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),u})();const aw=function(){return[2]},im=function(){return[0,0]},Ec=function(u){return{type:"Point",coordinates:u}};let lw=(()=>{class u{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(i){console.log("onDragStart",i)}onDragEnd(i){console.log("onDragEnd",i)}onDrag(i){console.log("onDrag",i),this.coordinates=i.lngLat.toArray()}changeColor(i){this.layerPaint={...this.layerPaint,"circle-color":i}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[[3,"zoom","center"],["id","point"],[3,"properties","geometry","mglDraggable","featureDragStart","featureDragEnd","featureDrag"],["id","point","type","circle","source","point",3,"paint","layerMouseEnter","layerMouseLeave"],["targetLayer",""],["position","bottom-left"]],template:function(i,f){if(1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1)(2,"mgl-feature",2),l.NdJ("featureDragStart",function(N){return f.onDragStart(N)})("featureDragEnd",function(N){return f.onDragEnd(N)})("featureDrag",function(N){return f.onDrag(N)}),l.qZA()(),l.TgZ(3,"mgl-layer",3,4),l.NdJ("layerMouseEnter",function(){return f.changeColor("#3bb2d0")})("layerMouseLeave",function(){return f.changeColor("#3887be")}),l.qZA(),l.TgZ(5,"mgl-control",5)(6,"mat-card")(7,"div"),l._uU(8),l.qZA(),l.TgZ(9,"div"),l._uU(10),l.qZA()()()()),2&i){const I=l.MAs(4);l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(9,aw))("center",l.DdM(10,im)),l.xp6(2),l.Q6J("geometry",l.VKq(12,Ec,l.DdM(11,im)))("mglDraggable",I),l.xp6(1),l.Q6J("paint",f.layerPaint),l.xp6(5),l.hij("Longitude:\xa0",f.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",f.coordinates[1],"")}},dependencies:[di,Ar,Ho,Ki,Tr,ni,ev,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const rm=function(){return[15]},Pp=function(u){return[u,37.830348]},cw=function(){return{"line-join":"round","line-cap":"round"}},uw=function(){return{"line-color":"#888","line-width":8}};let dw=(()=>{class u{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1),l._UZ(2,"mgl-feature",2),l.qZA(),l._UZ(3,"mgl-layer",3),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,rm))("center",l.VKq(8,Pp,-122.486052)),l.xp6(2),l.Q6J("geometry",f.geometry),l.xp6(1),l.Q6J("layout",l.DdM(10,cw))("paint",l.DdM(11,uw)))},dependencies:[di,Ar,Ki,Tr,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})(),om=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&i&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},dependencies:[di,ni,Qc,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const sm=function(){return[12]},hw=function(){return[11.39085,47.27574]};let pw=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:7,consts:[[3,"zoom","center","pitch"],["id","terrainSource","url","https://demotiles.maplibre.org/terrain-tiles/tiles.json","tileSize","256"],["mglNavigation","","showCompass","true","showZoom","true","visualizePitch","true"],["mglTerrain","","source","terrainSource","exaggeration","5","position","top-right"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-raster-dem-source",1)(2,"mgl-control",2)(3,"mgl-control",3),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,sm))("center",l.DdM(6,hw))("pitch",52))},dependencies:[di,Tn,ni,Cl,os,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function zv(u,h){if(1&u&&(l.TgZ(0,"mgl-popup",3),l._UZ(1,"span",4),l.qZA()),2&u){const i=l.oxw();l.Q6J("lngLat",i.selectedLngLat)("closeOnClick",!1),l.xp6(1),l.Q6J("innerHTML",null==i.selectedElement?null:i.selectedElement.name,l.oJD)}}const Vv=function(){return[3]},Zg=function(u){return[u,38.907]},fw=function(){return{type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}},mw=function(){return{"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"}};let V1=(()=>{class u{onClick(i){this.selectedLngLat=i.lngLat,this.selectedElement=i.features[0].properties}onMapClick(){this.selectedElement=null}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle","mapClick"],["id","states-layer","type","fill",3,"source","paint","layerMouseEnter","layerMouseLeave","layerClick"],[3,"lngLat","closeOnClick",4,"ngIf"],[3,"lngLat","closeOnClick"],[3,"innerHTML"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapClick",function(){return f.onMapClick()}),l.TgZ(1,"mgl-layer",1),l.NdJ("layerMouseEnter",function(){return f.cursorStyle="pointer"})("layerMouseLeave",function(){return f.cursorStyle=""})("layerClick",function(N){return f.onClick(N)}),l.qZA(),l.YNc(2,zv,2,3,"mgl-popup",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Vv))("center",l.VKq(9,Zg,-100.04))("cursorStyle",f.cursorStyle),l.xp6(1),l.Q6J("source",l.DdM(11,fw))("paint",l.DdM(12,mw)),l.xp6(1),l.Q6J("ngIf",f.selectedElement&&f.selectedLngLat))},dependencies:[be.O5,di,Ar,_s,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function Wg(u,h){if(1&u&&(l.TgZ(0,"mgl-popup",4),l._UZ(1,"span",5),l.qZA()),2&u){const i=l.oxw();l.Q6J("feature",i.selectedPoint),l.xp6(1),l.Q6J("innerHTML",null==i.selectedPoint.properties?null:i.selectedPoint.properties.description,l.oJD)}}const qg=function(){return[11.15]},jv=function(u){return[u,38.907]},Kg=function(){return["get","icon"]},Yg=function(u){return{"icon-image":u,"icon-allow-overlap":!0}};let gw=(()=>{class u{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar_15"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art_gallery_15"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle_15"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star_15"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(i){this.selectedPoint=i.features[0]}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:14,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerClick",function(N){return f.onClick(N)})("layerMouseEnter",function(){return f.cursorStyle="pointer"})("layerMouseLeave",function(){return f.cursorStyle=""}),l.qZA(),l.YNc(3,Wg,2,2,"mgl-popup",3),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,qg))("center",l.VKq(9,jv,-77.04))("cursorStyle",f.cursorStyle),l.xp6(1),l.Q6J("data",f.points),l.xp6(1),l.Q6J("layout",l.VKq(12,Yg,l.DdM(11,Kg))),l.xp6(1),l.Q6J("ngIf",f.selectedPoint))},dependencies:[be.O5,di,Ar,Ki,_s,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const _w=function(){return[3]},Hv=function(u){return[u,37.8]};let yw=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-popup",1)(2,"h1"),l._uU(3,"Hello world !"),l.qZA()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,_w))("center",l.VKq(8,Hv,-96)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,Hv,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},dependencies:[di,_s,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]}),u})();const Xg=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Gv=function(u){return{satellite:u}},Zv=function(){return{visibility:"visible"}},Wv=function(){return{"raster-opacity":1}},qv=function(u,h){return{id:"satellite",layout:u,minzoom:0,paint:h,"raster-opacity":1,source:"satellite",type:"raster"}},vw=function(u){return[u]},Kv=function(u,h){return{version:8,sources:u,layers:h}},Yv=function(){return[9]},bw=function(){return[137.9150899566626,36.25956997955441]};let Xv=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:19,consts:[[3,"zoom","center"]],template:function(i,f){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn(l.WLB(14,Kv,l.VKq(5,Gv,l.DdM(4,Xg)),l.VKq(12,vw,l.WLB(9,qv,l.DdM(7,Zv),l.DdM(8,Wv))))),l.Q6J("zoom",l.DdM(17,Yv))("center",l.DdM(18,bw)))},dependencies:[di,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const xw=function(){return[15]},da=function(u){return[u,38.8895]},ww=function(){return{"background-image":"url(https://maplibre.org/maplibre-gl-js-docs/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"}};let Cw=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[[3,"zoom","center"],[3,"lngLat"],["myMarker",""],[3,"ngStyle"],[3,"marker"]],template:function(i,f){if(1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1,2),l._UZ(3,"div",3),l.qZA(),l.TgZ(4,"mgl-popup",4),l._uU(5," Construction on the Washington Monument began in 1848. "),l.qZA()()),2&i){const I=l.MAs(2);l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,xw))("center",l.VKq(8,da,-77.0353)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,da,-77.0353)),l.xp6(2),l.Q6J("ngStyle",l.DdM(12,ww)),l.xp6(1),l.Q6J("marker",I)}},dependencies:[be.PC,di,Ps,_s,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const U1=["input"],j1=function(u){return{enterDuration:u}},Jv=["*"],Qv=new l.OlP("mat-radio-default-options",{providedIn:"root",factory:function Op(){return{color:"accent"}}});let e0=0;const Jg={provide:_o.JU,useExisting:(0,l.Gpc)(()=>n0),multi:!0};class t0{constructor(h,i){this.source=h,this.value=i}}const Qg=new l.OlP("MatRadioGroup");let Ew=(()=>{class u{constructor(i){this._changeDetector=i,this._value=null,this._name="mat-radio-group-"+e0++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.vpe}get name(){return this._name}set name(i){this._name=i,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(i){this._labelPosition="before"===i?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(i){this._selected=i,this.value=i?i.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(i){this._disabled=(0,Li.Ig)(i),this._markRadiosForCheck()}get required(){return this._required}set required(i){this._required=(0,Li.Ig)(i),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(i=>{i.name=this.name,i._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(f=>{f.checked=this.value===f.value,f.checked&&(this._selected=f)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new t0(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(i=>i._markForCheck())}writeValue(i){this.value=i,this._changeDetector.markForCheck()}registerOnChange(i){this._controlValueAccessorChangeFn=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetector.markForCheck()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO))},u.\u0275dir=l.lG2({type:u,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),u})(),n0=(()=>{class u extends Ew{}return u.\u0275fac=function(){let h;return function(f){return(h||(h=l.n5z(u)))(f||u)}}(),u.\u0275dir=l.lG2({type:u,selectors:[["mat-radio-group"]],contentQueries:function(i,f,I){if(1&i&&l.Suo(I,t_,5),2&i){let N;l.iGM(N=l.CRH())&&(f._radios=N)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[l._Bn([Jg,{provide:Qg,useExisting:u}]),l.qOj]}),u})();class Dw{constructor(h){this._elementRef=h}}const e_=(0,ii.Kr)((0,ii.sb)(Dw));let r0=(()=>{class u extends e_{constructor(i,f,I,N,pe,Me,We,ht){super(f),this._changeDetector=I,this._focusMonitor=N,this._radioDispatcher=pe,this._providerOverride=We,this._uniqueId="mat-radio-"+ ++e0,this.id=this._uniqueId,this.change=new l.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=i,this._noopAnimations="NoopAnimations"===Me,ht&&(this.tabIndex=(0,Li.su)(ht,0)),this._removeUniqueSelectionListener=pe.listen((Nt,Vt)=>{Nt!==this.id&&Vt===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(i){const f=(0,Li.Ig)(i);this._checked!==f&&(this._checked=f,f&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!f&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),f&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===i),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(i){this._labelPosition=i}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(i){this._setDisabled((0,Li.Ig)(i))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(i){this._required=(0,Li.Ig)(i)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(i){this._color=i}get inputId(){return`${this.id||this._uniqueId}-input`}focus(i,f){f?this._focusMonitor.focusVia(this._inputElement,f,i):this._inputElement.nativeElement.focus(i)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{!i&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new t0(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(i){i.stopPropagation()}_onInputInteraction(i){if(i.stopPropagation(),!this.checked&&!this.disabled){const f=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),f&&this.radioGroup._emitChangeEvent())}}_setDisabled(i){this._disabled!==i&&(this._disabled=i,this._changeDetector.markForCheck())}_updateTabIndex(){const i=this.radioGroup;let f;if(f=i&&i.selected&&!this.disabled?i.selected===this?this.tabIndex:-1:this.tabIndex,f!==this._previousTabIndex){const I=this._inputElement?.nativeElement;I&&(I.setAttribute("tabindex",f+""),this._previousTabIndex=f)}}}return u.\u0275fac=function(i){l.$Z()},u.\u0275dir=l.lG2({type:u,viewQuery:function(i,f){if(1&i&&l.Gf(U1,5),2&i){let I;l.iGM(I=l.CRH())&&(f._inputElement=I.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[l.qOj]}),u})(),t_=(()=>{class u extends r0{constructor(i,f,I,N,pe,Me,We,ht){super(i,f,I,N,pe,Me,We,ht)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Qg,8),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(pl.tE),l.Y36(gp.A8),l.Y36(l.QbO,8),l.Y36(Qv,8),l.$8M("tabindex"))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(i,f){1&i&&l.NdJ("focus",function(){return f._inputElement.nativeElement.focus()}),2&i&&(l.uIk("tabindex",null)("id",f.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.ekj("mat-radio-checked",f.checked)("mat-radio-disabled",f.disabled)("_mat-animation-noopable",f._noopAnimations)("mat-primary","primary"===f.color)("mat-accent","accent"===f.color)("mat-warn","warn"===f.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[l.qOj],ngContentSelectors:Jv,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(i,f){if(1&i&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2),l._UZ(3,"span",3)(4,"span",4),l.TgZ(5,"input",5,6),l.NdJ("change",function(N){return f._onInputInteraction(N)})("click",function(N){return f._onInputClick(N)}),l.qZA(),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA()(),l.TgZ(9,"span",9)(10,"span",10),l._uU(11,"\xa0"),l.qZA(),l.Hsn(12),l.qZA()()),2&i){const I=l.MAs(1);l.uIk("for",f.inputId),l.xp6(5),l.Q6J("id",f.inputId)("checked",f.checked)("disabled",f.disabled)("required",f.required),l.uIk("name",f.name)("value",f.value)("aria-label",f.ariaLabel)("aria-labelledby",f.ariaLabelledby)("aria-describedby",f.ariaDescribedby),l.xp6(2),l.Q6J("matRippleTrigger",I)("matRippleDisabled",f._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(17,j1,f._noopAnimations?0:150)),l.xp6(2),l.ekj("mat-radio-label-before","before"==f.labelPosition)}},dependencies:[ii.wG],styles:['.mat-radio-button{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.mat-radio-input:focus~.mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}'],encapsulation:2,changeDetection:0}),u})(),am=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[ii.si,ii.BQ,ii.BQ]}),u})();const n_=function(){return[13]},H1=function(){return[4.899,52.372]};let o0=(()=>{class u{constructor(){this.layerId="streets"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(i){this.style="streets"===i?"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL":{version:8,sources:{raster:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],minzoom:0,maxzoom:15,scheme:"xyz",tileSize:256}},layers:[{id:"some-raster-layer-id",type:"raster",source:"raster",layout:{visibility:"visible"},paint:{"raster-opacity":1}}]}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:6,vars:7,consts:[[3,"zoom","center"],[3,"ngModel","ngModelChange"],["value","streets"],["value","code"]],template:function(i,f){1&i&&(l._UZ(0,"mgl-map",0),l.TgZ(1,"mat-radio-group",1),l.NdJ("ngModelChange",function(N){return f.changeStyle(N)}),l.TgZ(2,"mat-radio-button",2),l._uU(3,"streets"),l.qZA(),l.TgZ(4,"mat-radio-button",3),l._uU(5,"from code"),l.qZA()()),2&i&&(l.Akn(f.style),l.Q6J("zoom",l.DdM(5,n_))("center",l.DdM(6,H1)),l.xp6(1),l.Q6J("ngModel",f.layerId))},dependencies:[_o.JJ,_o.On,di,n0,t_,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}","mat-radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]}),u})();const s0=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Sw=function(){return{type:"raster-dem",url:"https://demotiles.maplibre.org/terrain-tiles/tiles.json",tileSize:256}},a0=function(u,h){return{satelliteSource:u,terrainSource:h}},i_=function(){return{id:"satellite",type:"raster",source:"satelliteSource"}},$1=function(u){return[u]},Tw=function(){return{source:"terrainSource",exaggeration:1}},G1=function(u,h,i){return{version:8,sources:u,layers:h,terrain:i}},Iw=function(){return[12]},Aw=function(){return[11.39085,47.27574]};let Pw=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:20,consts:[[3,"zoom","center","pitch"]],template:function(i,f){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn(l.kEZ(14,G1,l.WLB(7,a0,l.DdM(5,s0),l.DdM(6,Sw)),l.VKq(11,$1,l.DdM(10,i_)),l.DdM(13,Tw))),l.Q6J("zoom",l.DdM(18,Iw))("center",l.DdM(19,Aw))("pitch",52))},dependencies:[di,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const l0=function(){return[12]},c0=function(){return[11.39085,47.27574]};let Ow=(()=>{class u{constructor(){this.mapLibreExampleSource="https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",this.terrainSpec={source:"terrainSource",exaggeration:1}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center","pitch","terrain"],["id","terrainSource","url","https://demotiles.maplibre.org/terrain-tiles/tiles.json","tileSize","256"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-raster-dem-source",1),l.qZA()),2&i&&(l.Akn(f.mapLibreExampleSource),l.Q6J("zoom",l.DdM(6,l0))("center",l.DdM(7,c0))("pitch",52)("terrain",f.terrainSpec))},dependencies:[di,Tn,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const u0=["button"],d0=["*"],h0=new l.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),p0=new l.OlP("MatButtonToggleGroup");let m0=0;class r_{constructor(h,i){this.source=h,this.value=i}}const _0=(0,ii.Kr)(class{});let o_=(()=>{class u extends _0{constructor(i,f,I,N,pe,Me){super(),this._changeDetectorRef=f,this._elementRef=I,this._focusMonitor=N,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.vpe;const We=Number(pe);this.tabIndex=We||0===We?We:null,this.buttonToggleGroup=i,this.appearance=Me&&Me.appearance?Me.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(i){this._appearance=i}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(i){const f=(0,Li.Ig)(i);f!==this._checked&&(this._checked=f,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(i){this._disabled=(0,Li.Ig)(i)}ngOnInit(){const i=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+m0++,i&&(i._isPrechecked(this)?this.checked=!0:i._isSelected(this)!==this._checked&&i._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const i=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),i&&i._isSelected(this)&&i._syncButtonToggle(this,!1,!1,!0)}focus(i){this._buttonElement.nativeElement.focus(i)}_onButtonClick(){const i=!!this._isSingleSelector()||!this._checked;i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new r_(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(p0,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(pl.tE),l.$8M("tabindex"),l.Y36(h0,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-button-toggle"]],viewQuery:function(i,f){if(1&i&&l.Gf(u0,5),2&i){let I;l.iGM(I=l.CRH())&&(f._buttonElement=I.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(i,f){1&i&&l.NdJ("focus",function(){return f.focus()}),2&i&&(l.uIk("aria-label",null)("aria-labelledby",null)("id",f.id)("name",null),l.ekj("mat-button-toggle-standalone",!f.buttonToggleGroup)("mat-button-toggle-checked",f.checked)("mat-button-toggle-disabled",f.disabled)("mat-button-toggle-appearance-standard","standard"===f.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.qOj],ngContentSelectors:d0,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,f){if(1&i&&(l.F$t(),l.TgZ(0,"button",0,1),l.NdJ("click",function(){return f._onButtonClick()}),l.TgZ(2,"span",2),l.Hsn(3),l.qZA()(),l._UZ(4,"span",3)(5,"span",4)),2&i){const I=l.MAs(1);l.Q6J("id",f.buttonId)("disabled",f.disabled||null),l.uIk("tabindex",f.disabled?-1:f.tabIndex)("aria-pressed",f.checked)("name",f._getButtonName())("aria-label",f.ariaLabel)("aria-labelledby",f.ariaLabelledby),l.xp6(5),l.Q6J("matRippleTrigger",I)("matRippleDisabled",f.disableRipple||f.disabled)}},dependencies:[ii.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),u})(),kw=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[ii.BQ,ii.si,ii.BQ]}),u})();const Rw=function(){return[3]},Z1=function(u,h){return[u,h]},W1=function(){return["https://demotiles.maplibre.org/tiles/{z}/{x}/{y}.pbf"]},q1=function(){return{"line-color":"blue"}};let K1=(()=>{class u{constructor(){this.layouts={countries:{visibility:"none"},names:{visibility:"none","text-field":"{name:latin}","text-size":30}}}ngOnInit(){}toggleLayer(i){this.layouts[i.value]={...this.layouts[i.value],visibility:"visible"===this.layouts[i.value].visibility?"none":"visible"}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:10,vars:16,consts:[[3,"zoom","center"],["id","countries",3,"tiles"],["id","everything","url","https://api.maptiler.com/tiles/v3/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"],["id","countries-layer","type","line","source","countries","sourceLayer","countries",3,"layout","paint"],["id","names","type","symbol","source","everything","sourceLayer","place",3,"layout"],[1,"menu"],["value","names",3,"checked","change"],["value","countries",3,"checked","change"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-vector-source",1)(2,"mgl-vector-source",2)(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA(),l.TgZ(5,"div",5)(6,"mat-button-toggle",6),l.NdJ("change",function(N){return f.toggleLayer(N)}),l._uU(7,"countries names"),l.qZA(),l.TgZ(8,"mat-button-toggle",7),l.NdJ("change",function(N){return f.toggleLayer(N)}),l._uU(9,"countries border"),l.qZA()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(10,Rw))("center",l.WLB(11,Z1,-71.97722138410576,-13.517379300798098)),l.xp6(1),l.Q6J("tiles",l.DdM(14,W1)),l.xp6(2),l.Q6J("layout",f.layouts.countries)("paint",l.DdM(15,q1)),l.xp6(1),l.Q6J("layout",f.layouts.names),l.xp6(2),l.Q6J("checked",!0),l.xp6(2),l.Q6J("checked",!0))},dependencies:[di,Ar,bl,o_,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]}),u})();const Y1=function(){return[12]},X1=function(u){return[u,38.897]},J1=function(){return{padding:20}},Q1=function(){return{"line-color":"#BF93E4","line-width":5}},eC=function(){return{"line-join":"round","line-cap":"round"}};let lm=(()=>{class u{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const i=this.source.data.features[0].geometry.coordinates;this.bounds=i.reduce((f,I)=>f.extend(I),new H.LngLatBounds(i[0],i[0]))}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:5,vars:15,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return f.zoomToBounds()}),l._uU(3," Zoom to bounds "),l.qZA()(),l._UZ(4,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(9,Y1))("center",l.VKq(10,X1,-77.0214))("fitBounds",f.bounds)("fitBoundsOptions",l.DdM(12,J1)),l.xp6(4),l.Q6J("source",f.source)("paint",l.DdM(13,Q1))("layout",l.DdM(14,eC)))},dependencies:[di,Ar,ni,wc.lW,Ui,Vi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})(),Lw=(()=>{class u{constructor(i){this.router=i}canActivate(i){return!!fm[0].children.some(f=>f.path===i.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(Z.F0))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function dd(u){return u&&u.origin?u.origin:"https://stackblitz.com"}function s_(){return Math.random().toString(36).substring(7)}function hd(u){var h=[];return u&&(u.forceEmbedLayout&&h.push("embed=1"),u.clickToLoad&&h.push("ctl=1"),"string"==typeof u.openFile&&h.push("file="+u.openFile),Array.isArray(u.openFile)&&u.openFile.forEach(function(i){"string"==typeof i&&h.push("file="+i)}),"preview"!==u.view&&"editor"!==u.view||h.push("view="+u.view),"light"!==u.theme&&"dark"!==u.theme||h.push("theme="+u.theme),u.hideExplorer&&h.push("hideExplorer=1"),u.hideNavigation&&h.push("hideNavigation=1"),u.hideDevTools&&h.push("hidedevtools=1"),"number"==typeof u.devToolsHeight&&u.devToolsHeight>=0&&u.devToolsHeight<=100&&h.push("devtoolsheight="+Math.round(u.devToolsHeight))),h.length?"?"+h.join("&"):""}function v0(u,h,i){if(null===u.parentNode)throw new Error("Invalid Element");h.id=u.id,function Fw(u,h){h&&(h.hasOwnProperty("height")&&(u.height=""+h.height),h.hasOwnProperty("width")&&(u.width=""+h.width)),u.height||(u.height="300"),u.width||u.setAttribute("style","width:100%;")}(h,i),u.parentNode.replaceChild(h,u)}function kp(u){if("string"==typeof u){var h=document.getElementById(u);if(null!==h)return h}else if(u instanceof HTMLElement)return u;throw new Error("Invalid Element")}function um(u){return u&&!1===u.newWindow?"_self":"_blank"}var a_=function(u){var h=this;this.pending={},this.port=u,this.port.onmessage=function(i){if(i.data.payload.__reqid){var f=i.data.payload.__reqid,I=i.data.payload.__success;if(h.pending[f]){if(delete i.data.payload.__reqid,delete i.data.payload.__success,I){var N=0===Object.keys(i.data.payload).length&&i.data.payload.constructor===Object?null:i.data.payload;h.pending[f].resolve(N)}else h.pending[f].reject(i.data.payload.error?i.data.type+": "+i.data.payload.error:i.data.type);delete h.pending[f]}}}};a_.prototype.request=function(u){var h=this,i=s_();return new Promise(function(f,I){h.pending[i]={resolve:f,reject:I},u.payload.__reqid=i,h.port.postMessage(u)})};var l_=function(u,h){var i=this;this.rdc=new a_(u),this.preview={},Object.defineProperty(this.preview,"origin",{value:h.previewOrigin,writable:!1}),this.editor={openFile:function(f){return i.rdc.request({type:"SDK_OPEN_FILE",payload:{path:f}})}}};l_.prototype.applyFsDiff=function(u){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:u})},l_.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},l_.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var dm=[],Nw=function(u){var h=this;this.id=s_(),this.element=u,this.pending=new Promise(function(i,f){var I=function(ht){ht.data.action&&"SDK_INIT_SUCCESS"===ht.data.action&&ht.data.id===h.id&&(h.vm=new l_(ht.ports[0],ht.data.payload),i(h.vm),pe())},N=function(){h.element.contentWindow&&h.element.contentWindow.postMessage({action:"SDK_INIT",id:h.id},"*")};function pe(){window.clearInterval(We),window.removeEventListener("message",I)}window.addEventListener("message",I),N();var Me=0,We=window.setInterval(function(){if(h.vm)pe();else{if(Me>=20)return pe(),f("Timeout: Unable to establish a connection with the StackBlitz VM"),void dm.forEach(function(ht,Nt){ht.id===h.id&&dm.splice(Nt,1)});Me++,N()}},500)}),dm.push(this)},Rp=["angular-cli","create-react-app","javascript","node","polymer","html","typescript","vue"];function wh(u,h){var i=document.createElement("input");return i.type="hidden",i.name=u,i.value=h,i}function zw(u){-1===Rp.indexOf(u.template)&&console.warn("Unsupported project template, must be one of: "+Rp.join(", "));var h=document.createElement("form");return h.method="POST",h.setAttribute("style","display:none!important;"),h.appendChild(wh("project[title]",u.title)),h.appendChild(wh("project[description]",u.description)),h.appendChild(wh("project[template]",u.template)),u.dependencies&&h.appendChild(wh("project[dependencies]",JSON.stringify(u.dependencies))),u.settings&&h.appendChild(wh("project[settings]",JSON.stringify(u.settings))),Object.keys(u.files).forEach(function(i){h.appendChild(wh("project[files]["+i+"]",u.files[i]))}),h}var hm={connect:function(u){if(!u||!u.contentWindow)return Promise.reject("Provided element is not an iframe.");var h=function(u){var h=u instanceof Element?"element":"id";return dm.find(function(f){return f[h]===u})||null}(u);return h?h.pending:new Nw(u).pending},openGithubProject:function(u,h){window.open(dd(h)+"/github/"+u+hd(h),um(h))},openProject:function(u,h){!function nC(u,h){var i=zw(u);i.action=dd(h)+"/run"+hd(h),i.target=um(h),document.body.appendChild(i),i.submit(),document.body.removeChild(i)}(u,h)},openProjectId:function(u,h){window.open(dd(h)+"/edit/"+u+hd(h),um(h))},embedGithubProject:function(u,h,i){var f=kp(u),I=document.createElement("iframe");return I.src=dd(i)+"/github/"+h+hd(i),v0(f,I,i),hm.connect(I)},embedProject:function(u,h,i){var f=kp(u),I=function tC(u,h){var i=zw(u);return i.action=dd(h)+"/run"+hd(h),i.id="sb","<html><head><title></title></head><body>"+i.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(h,i),N=document.createElement("iframe");return v0(f,N,i),N.contentDocument&&N.contentDocument.write(I),hm.connect(N)},embedProjectId:function(u,h,i){var f=kp(u),I=document.createElement("iframe");return I.src=dd(i)+"/edit/"+h+hd(i),v0(f,I,i),hm.connect(I)}};const Vw=hm;var c_=j(4128),Uw=j(9646),jw=j(2076),pm=j(3151),b0=j(8746);function iC(u){return u.replace(/(^\w|-\w)/g,Jl)}function Jl(u){return u.replace(/-/,"").toUpperCase()}var Lp=j(529);const x0="app/demo/examples/";let Tl=(()=>{class u{constructor(i){this.http=i,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(i){let f=this.fileCache.get(i);return f||(f=this.http.get(`${x0}${i}.component.ts`,{responseType:"text"}).pipe((0,Di.w)(I=>this.loadAdditionnalFilesIfNecessary(I)),(0,pm.d)(1)),this.fileCache.set(i,f),f)}loadAdditionnalFilesIfNecessary(i){const f=/'\.\/([\w-.]+\.\w+)'/g;let I;const N=[],pe={"src/demo.ts":i};for(;I=f.exec(i);)N.push(this.loadFile(I[1]));return N.length?(0,c_.D)(N).pipe((0,Ir.U)(Me=>({...Object.assign({},...Me),...pe}))):(0,Uw.of)(pe)}loadFile(i){let f=this.fileCache.get(i);return f||(f=this.http.get(`${x0}${i}`,{responseType:"text"}).pipe((0,Ir.U)(I=>({[`src/${i}`]:I})),(0,pm.d)(1)),this.fileCache.set(i,f),f)}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(Lp.eN))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function $w(u,h){if(1&u&&(l.O4$(),l._UZ(0,"circle",4)),2&u){const i=l.oxw(),f=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+i._spinnerAnimationLabel)("stroke-dashoffset",i._getStrokeDashOffset(),"px")("stroke-dasharray",i._getStrokeCircumference(),"px")("stroke-width",i._getCircleStrokeWidth(),"%")("transform-origin",i._getCircleTransformOrigin(f)),l.uIk("r",i._getCircleRadius())}}function u_(u,h){if(1&u&&(l.O4$(),l._UZ(0,"circle",4)),2&u){const i=l.oxw(),f=l.MAs(1);l.Udp("stroke-dashoffset",i._getStrokeDashOffset(),"px")("stroke-dasharray",i._getStrokeCircumference(),"px")("stroke-width",i._getCircleStrokeWidth(),"%")("transform-origin",i._getCircleTransformOrigin(f)),l.uIk("r",i._getCircleRadius())}}const h_=(0,ii.pj)(class{constructor(u){this._elementRef=u}},"primary"),w0=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function C0(){return{diameter:100}}});class Dc extends h_{constructor(h,i,f,I,N,pe,Me,We){super(h),this._document=f,this._diameter=100,this._value=0,this._resizeSubscription=we.w0.EMPTY,this.mode="determinate";const ht=Dc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),ht.has(f.head)||ht.set(f.head,new Set([100])),this._noopAnimations="NoopAnimations"===I&&!!N&&!N._forceAnimations,"mat-spinner"===h.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),N&&(N.color&&(this.color=this.defaultColor=N.color),N.diameter&&(this.diameter=N.diameter),N.strokeWidth&&(this.strokeWidth=N.strokeWidth)),i.isBrowser&&i.SAFARI&&Me&&pe&&We&&(this._resizeSubscription=Me.change(150).subscribe(()=>{"indeterminate"===this.mode&&We.run(()=>pe.markForCheck())}))}get diameter(){return this._diameter}set diameter(h){this._diameter=(0,Li.su)(h),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(h){this._strokeWidth=(0,Li.su)(h)}get value(){return"determinate"===this.mode?this._value:0}set value(h){this._value=Math.max(0,Math.min(100,(0,Li.su)(h)))}ngOnInit(){const h=this._elementRef.nativeElement;this._styleRoot=(0,$a.kV)(h)||this._document.head,this._attachStyleNode(),h.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const h=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${h} ${h}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(h){const i=50*(h.currentScale??1);return`${i}% ${i}%`}_attachStyleNode(){const h=this._styleRoot,i=this._diameter,f=Dc._diameters;let I=f.get(h);if(!I||!I.has(i)){const N=this._document.createElement("style");N.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),N.textContent=this._getAnimationText(),h.appendChild(N),I||(I=new Set,f.set(h,I)),I.add(i)}}_getAnimationText(){const h=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*h).replace(/END_VALUE/g,""+.2*h).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Dc._diameters=new WeakMap,Dc.\u0275fac=function(h){return new(h||Dc)(l.Y36(l.SBq),l.Y36($a.t4),l.Y36(be.K0,8),l.Y36(l.QbO,8),l.Y36(w0),l.Y36(l.sBO),l.Y36(xs.rL),l.Y36(l.R0b))},Dc.\u0275cmp=l.Xpm({type:Dc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(h,i){2&h&&(l.uIk("aria-valuemin","determinate"===i.mode?0:null)("aria-valuemax","determinate"===i.mode?100:null)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),l.Udp("width",i.diameter,"px")("height",i.diameter,"px"),l.ekj("_mat-animation-noopable",i._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(h,i){1&h&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,$w,1,11,"circle",2),l.YNc(3,u_,1,9,"circle",3),l.qZA()),2&h&&(l.Udp("width",i.diameter,"px")("height",i.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===i.mode),l.uIk("viewBox",i._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},dependencies:[be.RF,be.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let E0=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[ii.BQ,be.ez,ii.BQ]}),u})();const D0=["container"];function Ww(u,h){1&u&&(l.TgZ(0,"div",2),l._UZ(1,"mat-spinner")(2,"div"),l.qZA())}let p_=(()=>{class u{constructor(i,f,I,N,pe){this.zone=i,this.activatedRoute=f,this.demoFileLoaderService=I,this.http=N,this.ChangeDetectorRef=pe,this.loading=!0,this.projectbase$=(0,c_.D)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe((0,pm.d)(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,tr.b)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,Di.w)(i=>(0,c_.D)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(i.demoUrl),(0,Uw.of)(i.demoUrl)])),(0,Di.w)(([i,f,I])=>(0,jw.D)(this.openExample(i,f,I)).pipe((0,b0.x)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(i,f,I){var N=this;return Sr(function*(){if(N.vm)return void(yield N.vm.applyFsDiff({create:f,destroy:[]}));const pe=function Hw(u,h,i){return{files:{"src/main.ts":u[0].replace(/###/g,iC(i)+"Component"),"angular.json":u[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n",...h},title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","maplibre-gl":"*","@maplibre/ngx-maplibre-gl":"*","@angular/cdk":"^13","@angular/material":"^13","@angular/animations":"^13","@angular/forms":"^13","@angular/common":"^13","@angular/compiler":"^13","@angular/core":"^13","@angular/platform-browser":"^13","@angular/platform-browser-dynamic":"^13","@angular/router":"^13",url:"*",querystring:"*",events:"*","@types/supercluster":"*","@types/geojson":"*"}}}(i,f,I);yield N.zone.runOutsideAngular(Sr(function*(){N.vm=yield Vw.embedProject(N.stackblitzContainer.nativeElement,pe,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.R0b),l.Y36(Z.gz),l.Y36(Tl),l.Y36(Lp.eN),l.Y36(l.sBO))},u.\u0275cmp=l.Xpm({type:u,selectors:[["ng-component"]],viewQuery:function(i,f){if(1&i&&l.Gf(D0,5),2&i){let I;l.iGM(I=l.CRH())&&(f.stackblitzContainer=I.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(i,f){1&i&&(l._UZ(0,"div",null,0),l.YNc(2,Ww,3,0,"div",1)),2&i&&(l.xp6(2),l.Q6J("ngIf",f.loading))},dependencies:[be.O5,Dc],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),u})();var li=(()=>(function(u){u.STYLES="Styles",u.LAYERS="Layers",u.SOURCES="Sources",u.USER_INTERACTION="User interaction",u.CAMERA="Camera",u.CONTROLS_AND_OVERLAYS="Controls and overlays",u.TERRAIN="3D Terrain"}(li||(li={})),li))();const fm=[{path:"",component:my,children:[{path:"edit/:demoUrl",component:p_,canActivate:[Lw]},{path:"display-map",component:yh,data:{label:"Display a map",cat:li.STYLES}},{path:"custom-style-id",component:Wb,data:{label:"Display a map with a custom style",cat:li.STYLES}},{path:"set-style",component:o0,data:{label:"Change a map's style",cat:li.STYLES}},{path:"satellite-map",component:Xv,data:{label:"Display a satellite map",cat:li.STYLES}},{path:"add-image-generated",component:b1,data:{label:"Add a generated icon to the map",cat:li.LAYERS}},{path:"add-image",component:Py,data:{label:"Add an icon to the map",cat:li.LAYERS}},{path:"toggle-layers",component:K1,data:{label:"Show and hide layers",cat:li.LAYERS}},{path:"3d-buildings",component:bb,data:{label:"Display 3d buildings",cat:li.LAYERS}},{path:"cluster",component:Ky,data:{label:"Create and style clusters",cat:li.LAYERS}},{path:"heatmap",component:gv,data:{label:"Create a heatmap layer",cat:li.LAYERS}},{path:"geojson-line",component:pv,data:{label:"Add a GeoJSON line",cat:li.LAYERS}},{path:"ngx-geojson-line",component:dw,data:{label:"[NGX] Add a GeoJSON line",cat:li.LAYERS}},{path:"custom-marker-icons",component:Qy,data:{label:"Add custom icons with Markers",cat:li.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:Ap,data:{label:"[NGX] Add custom icons with Markers",cat:li.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:vv,data:{label:"Update a feature in realtime",cat:li.SOURCES}},{path:"live-update-image-source",component:zx,data:{label:"Update an image source in realtime",cat:li.SOURCES}},{path:"popup",component:yw,data:{label:"Display a popup",cat:li.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:Cw,data:{label:"Attach a popup to a marker instance",cat:li.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:rx,data:{label:"View a fullscreen map",cat:li.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:vh,data:{label:"Display map navigation controls",cat:li.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:Lg,data:{label:"Locate the user",cat:li.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:Oy,data:{label:"Change the default position for attribution",cat:li.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:om,data:{label:"[NGX] Show scale information",cat:li.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:ow,data:{label:"[NGX] Add a custom control",cat:li.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:Ix,data:{label:"Display a non-interactive map",cat:li.USER_INTERACTION}},{path:"language-switch",component:Ox,data:{label:"Change a map's language",cat:li.USER_INTERACTION}},{path:"center-on-symbol",component:Fy,data:{label:"Center the map on a clicked symbol",cat:li.USER_INTERACTION}},{path:"ngx-drag-a-point",component:lw,data:{label:"[NGX] Create a draggable point",cat:li.USER_INTERACTION}},{path:"drag-a-marker",component:Ep,data:{label:"Create a draggable marker",cat:li.USER_INTERACTION}},{path:"hover-styles",component:_v,data:{label:"Create a hover effect",cat:li.USER_INTERACTION}},{path:"popup-on-click",component:gw,data:{label:"Display a popup on click",cat:li.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:lm,data:{label:"Fit to the bounds of a LineString",cat:li.USER_INTERACTION}},{path:"cluster-html",component:Lb,data:{label:"Display HTML clusters with custom properties",cat:li.LAYERS}},{path:"ngx-cluster-html",component:z1,data:{label:"[NGX] Display HTML clusters with custom properties",cat:li.LAYERS}},{path:"polygon-popup-on-click",component:V1,data:{label:"Show polygon information on click",cat:li.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:Cp,data:{label:"Generate and add a missing icon to the map",cat:li.STYLES}},{path:"custom-attribution",component:ud,data:{label:"Add custom attributions",cat:li.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:_h,data:{label:"Add custom localization for controls",cat:li.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:Bg,data:{label:"Marker alignment options",cat:li.CAMERA}},{path:"terrain-style",component:Pw,data:{label:"Initialize 3D Terrain using style",cat:li.TERRAIN}},{path:"terrain-control",component:pw,data:{label:"Terrain Control",cat:li.TERRAIN}},{path:"terrain",component:Ow,data:{label:"[NGX] Initialize 3D Terrain declaratively",cat:li.TERRAIN}},{path:"**",redirectTo:"display-map"}]}],f_=function(){return[2]},qw=[{path:"",component:(()=>{class u{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:i=>i}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const i=this.center[0];0===i?this.center=[90,0]:90===i?this.center=[180,0]:180===i?this.center=[-90,0]:-90===i&&(this.center=[0,0])}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"zoom","center","centerWithPanTo","panToOptions","interactive","mapLoad","moveEnd"],[1,"main"],["svgIcon","ngx-maplibre-gl-red",1,"logo"]],template:function(i,f){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(){return f.moveCenter()})("moveEnd",function(){return f.moveCenter()}),l.qZA(),l.TgZ(1,"div",1),l._UZ(2,"mat-icon",2),l.TgZ(3,"h1"),l._uU(4,"Angular binding of maplibre-gl-js"),l.qZA()()),2&i&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,f_))("center",f.center)("centerWithPanTo",!0)("panToOptions",f.panToOptions)("interactive",!1))},dependencies:[di,Ge.Hw],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]}),u})(),pathMatch:"full"}],Kw=[{path:"",component:j(6449).$,children:[{path:"demo",children:fm},...qw,{path:"doc",loadChildren:()=>j.e(335).then(j.bind(j,335)).then(u=>u.DocModule)}]},{path:"**",redirectTo:""}];let Yw=(()=>{class u{constructor(i,f){i.addSvgIcon("ngx-maplibre-gl",f.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl.svg")),i.addSvgIcon("ngx-maplibre-gl-red",f.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl-red.svg")),i.addSvgIcon("github",f.bypassSecurityTrustResourceUrl("assets/github.svg"))}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(Ge.jv),l.LFG(T.H7))},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[T.b2,Qs,Ge.Ps,Z.Bz.forRoot(Kw,{relativeLinkResolution:"legacy"}),vl,Fr.x]}),u})(),Xw=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:[Lw],imports:[Z.Bz,Lp.JF,be.ez,_o.u5,vl,Fr.x,am,kw,wc.ot,db,tv,E0,dh,Ge.Ps,_g,Ip,ly]}),u})(),Jw=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[vl,Ge.Ps]}),u})(),M0=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u,bootstrap:[g]}),u.\u0275inj=l.cJS({imports:[Z.Bz,Yw,Jw,Xw]}),u})();(0,l.G48)(),T.q6().bootstrapModule(M0).catch(u=>console.log(u))},1135:(sn,ut,j)=>{"use strict";j.d(ut,{X:()=>l});var T=j(7579);class l extends T.x{constructor(g){super(),this._value=g}get value(){return this.getValue()}_subscribe(g){const Ge=super._subscribe(g);return!Ge.closed&&g.next(this._value),Ge}getValue(){const{hasError:g,thrownError:Ge,_value:_e}=this;if(g)throw Ge;return this._throwIfClosed(),_e}next(g){super.next(this._value=g)}}},9751:(sn,ut,j)=>{"use strict";j.d(ut,{y:()=>Ae});var T=j(930),l=j(727),Z=j(8822),g=j(9635),Ge=j(2416),_e=j(576),Ze=j(2806);let Ae=(()=>{class Le{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const $e=new Le;return $e.source=this,$e.operator=qe,$e}subscribe(qe,$e,mt){const pt=function Je(Le){return Le&&Le instanceof T.Lv||function je(Le){return Le&&(0,_e.m)(Le.next)&&(0,_e.m)(Le.error)&&(0,_e.m)(Le.complete)}(Le)&&(0,l.Nn)(Le)}(qe)?qe:new T.Hp(qe,$e,mt);return(0,Ze.x)(()=>{const{operator:wt,source:tn}=this;pt.add(wt?wt.call(pt,tn):tn?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(qe){try{return this._subscribe(qe)}catch($e){qe.error($e)}}forEach(qe,$e){return new($e=Ue($e))((mt,pt)=>{const wt=new T.Hp({next:tn=>{try{qe(tn)}catch(Zt){pt(Zt),wt.unsubscribe()}},error:pt,complete:mt});this.subscribe(wt)})}_subscribe(qe){var $e;return null===($e=this.source)||void 0===$e?void 0:$e.subscribe(qe)}[Z.L](){return this}pipe(...qe){return(0,g.U)(qe)(this)}toPromise(qe){return new(qe=Ue(qe))(($e,mt)=>{let pt;this.subscribe(wt=>pt=wt,wt=>mt(wt),()=>$e(pt))})}}return Le.create=et=>new Le(et),Le})();function Ue(Le){var et;return null!==(et=Le??Ge.v.Promise)&&void 0!==et?et:Promise}},7579:(sn,ut,j)=>{"use strict";j.d(ut,{x:()=>Ze});var T=j(9751),l=j(727);const g=(0,j(3888).d)(Ue=>function(){Ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=j(8737),_e=j(2806);let Ze=(()=>{class Ue extends T.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Je){const Le=new Ae(this,this);return Le.operator=Je,Le}_throwIfClosed(){if(this.closed)throw new g}next(Je){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Le of this.currentObservers)Le.next(Je)}})}error(Je){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Je;const{observers:Le}=this;for(;Le.length;)Le.shift().error(Je)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Je}=this;for(;Je.length;)Je.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Je;return(null===(Je=this.observers)||void 0===Je?void 0:Je.length)>0}_trySubscribe(Je){return this._throwIfClosed(),super._trySubscribe(Je)}_subscribe(Je){return this._throwIfClosed(),this._checkFinalizedStatuses(Je),this._innerSubscribe(Je)}_innerSubscribe(Je){const{hasError:Le,isStopped:et,observers:qe}=this;return Le||et?l.Lc:(this.currentObservers=null,qe.push(Je),new l.w0(()=>{this.currentObservers=null,(0,Ge.P)(qe,Je)}))}_checkFinalizedStatuses(Je){const{hasError:Le,thrownError:et,isStopped:qe}=this;Le?Je.error(et):qe&&Je.complete()}asObservable(){const Je=new T.y;return Je.source=this,Je}}return Ue.create=(je,Je)=>new Ae(je,Je),Ue})();class Ae extends Ze{constructor(je,Je){super(),this.destination=je,this.source=Je}next(je){var Je,Le;null===(Le=null===(Je=this.destination)||void 0===Je?void 0:Je.next)||void 0===Le||Le.call(Je,je)}error(je){var Je,Le;null===(Le=null===(Je=this.destination)||void 0===Je?void 0:Je.error)||void 0===Le||Le.call(Je,je)}complete(){var je,Je;null===(Je=null===(je=this.destination)||void 0===je?void 0:je.complete)||void 0===Je||Je.call(je)}_subscribe(je){var Je,Le;return null!==(Le=null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(je))&&void 0!==Le?Le:l.Lc}}},930:(sn,ut,j)=>{"use strict";j.d(ut,{Hp:()=>mt,Lv:()=>Le});var T=j(576),l=j(727),Z=j(2416),g=j(7849),Ge=j(5032);const _e=Ue("C",void 0,void 0);function Ue(bt,Re,ze){return{kind:bt,value:Re,error:ze}}var je=j(3410),Je=j(2806);class Le extends l.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,l.Nn)(Re)&&Re.add(this)):this.destination=Zt}static create(Re,ze,It){return new mt(Re,ze,It)}next(Re){this.isStopped?tn(function Ae(bt){return Ue("N",bt,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?tn(function Ze(bt){return Ue("E",void 0,bt)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?tn(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function qe(bt,Re){return et.call(bt,Re)}class $e{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:ze}=this;if(ze.next)try{ze.next(Re)}catch(It){pt(It)}}error(Re){const{partialObserver:ze}=this;if(ze.error)try{ze.error(Re)}catch(It){pt(It)}else pt(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(ze){pt(ze)}}}class mt extends Le{constructor(Re,ze,It){let At;if(super(),(0,T.m)(Re)||!Re)At={next:Re??void 0,error:ze??void 0,complete:It??void 0};else{let kt;this&&Z.v.useDeprecatedNextContext?(kt=Object.create(Re),kt.unsubscribe=()=>this.unsubscribe(),At={next:Re.next&&qe(Re.next,kt),error:Re.error&&qe(Re.error,kt),complete:Re.complete&&qe(Re.complete,kt)}):At=Re}this.destination=new $e(At)}}function pt(bt){Z.v.useDeprecatedSynchronousErrorHandling?(0,Je.O)(bt):(0,g.h)(bt)}function tn(bt,Re){const{onStoppedNotification:ze}=Z.v;ze&&je.z.setTimeout(()=>ze(bt,Re))}const Zt={closed:!0,next:Ge.Z,error:function wt(bt){throw bt},complete:Ge.Z}},727:(sn,ut,j)=>{"use strict";j.d(ut,{Lc:()=>_e,w0:()=>Ge,Nn:()=>Ze});var T=j(576);const Z=(0,j(3888).d)(Ue=>function(Je){Ue(this),this.message=Je?`${Je.length} errors occurred during unsubscription:\n${Je.map((Le,et)=>`${et+1}) ${Le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Je});var g=j(8737);class Ge{constructor(je){this.initialTeardown=je,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let je;if(!this.closed){this.closed=!0;const{_parentage:Je}=this;if(Je)if(this._parentage=null,Array.isArray(Je))for(const qe of Je)qe.remove(this);else Je.remove(this);const{initialTeardown:Le}=this;if((0,T.m)(Le))try{Le()}catch(qe){je=qe instanceof Z?qe.errors:[qe]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const qe of et)try{Ae(qe)}catch($e){je=je??[],$e instanceof Z?je=[...je,...$e.errors]:je.push($e)}}if(je)throw new Z(je)}}add(je){var Je;if(je&&je!==this)if(this.closed)Ae(je);else{if(je instanceof Ge){if(je.closed||je._hasParent(this))return;je._addParent(this)}(this._finalizers=null!==(Je=this._finalizers)&&void 0!==Je?Je:[]).push(je)}}_hasParent(je){const{_parentage:Je}=this;return Je===je||Array.isArray(Je)&&Je.includes(je)}_addParent(je){const{_parentage:Je}=this;this._parentage=Array.isArray(Je)?(Je.push(je),Je):Je?[Je,je]:je}_removeParent(je){const{_parentage:Je}=this;Je===je?this._parentage=null:Array.isArray(Je)&&(0,g.P)(Je,je)}remove(je){const{_finalizers:Je}=this;Je&&(0,g.P)(Je,je),je instanceof Ge&&je._removeParent(this)}}Ge.EMPTY=(()=>{const Ue=new Ge;return Ue.closed=!0,Ue})();const _e=Ge.EMPTY;function Ze(Ue){return Ue instanceof Ge||Ue&&"closed"in Ue&&(0,T.m)(Ue.remove)&&(0,T.m)(Ue.add)&&(0,T.m)(Ue.unsubscribe)}function Ae(Ue){(0,T.m)(Ue)?Ue():Ue.unsubscribe()}},2416:(sn,ut,j)=>{"use strict";j.d(ut,{v:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(sn,ut,j)=>{"use strict";j.d(ut,{a:()=>je});var T=j(9751),l=j(4742),Z=j(2076),g=j(4671),Ge=j(3268),_e=j(3269),Ze=j(1810),Ae=j(5403),Ue=j(9672);function je(...et){const qe=(0,_e.yG)(et),$e=(0,_e.jO)(et),{args:mt,keys:pt}=(0,l.D)(et);if(0===mt.length)return(0,Z.D)([],qe);const wt=new T.y(function Je(et,qe,$e=g.y){return mt=>{Le(qe,()=>{const{length:pt}=et,wt=new Array(pt);let tn=pt,Zt=pt;for(let bt=0;bt<pt;bt++)Le(qe,()=>{const Re=(0,Z.D)(et[bt],qe);let ze=!1;Re.subscribe((0,Ae.x)(mt,It=>{wt[bt]=It,ze||(ze=!0,Zt--),Zt||mt.next($e(wt.slice()))},()=>{--tn||mt.complete()}))},mt)},mt)}}(mt,qe,pt?tn=>(0,Ze.n)(pt,tn):g.y));return $e?wt.pipe((0,Ge.Z)($e)):wt}function Le(et,qe,$e){et?(0,Ue.f)($e,et,qe):qe()}},7272:(sn,ut,j)=>{"use strict";j.d(ut,{z:()=>Ge});var T=j(8189),Z=j(3269),g=j(2076);function Ge(..._e){return function l(){return(0,T.J)(1)}()((0,g.D)(_e,(0,Z.yG)(_e)))}},9770:(sn,ut,j)=>{"use strict";j.d(ut,{P:()=>Z});var T=j(9751),l=j(8421);function Z(g){return new T.y(Ge=>{(0,l.Xf)(g()).subscribe(Ge)})}},515:(sn,ut,j)=>{"use strict";j.d(ut,{E:()=>l});const l=new(j(9751).y)(Ge=>Ge.complete())},4128:(sn,ut,j)=>{"use strict";j.d(ut,{D:()=>Ae});var T=j(9751),l=j(4742),Z=j(8421),g=j(3269),Ge=j(5403),_e=j(3268),Ze=j(1810);function Ae(...Ue){const je=(0,g.jO)(Ue),{args:Je,keys:Le}=(0,l.D)(Ue),et=new T.y(qe=>{const{length:$e}=Je;if(!$e)return void qe.complete();const mt=new Array($e);let pt=$e,wt=$e;for(let tn=0;tn<$e;tn++){let Zt=!1;(0,Z.Xf)(Je[tn]).subscribe((0,Ge.x)(qe,bt=>{Zt||(Zt=!0,wt--),mt[tn]=bt},()=>pt--,void 0,()=>{(!pt||!Zt)&&(wt||qe.next(Le?(0,Ze.n)(Le,mt):mt),qe.complete())}))}});return je?et.pipe((0,_e.Z)(je)):et}},2076:(sn,ut,j)=>{"use strict";j.d(ut,{D:()=>It});var T=j(8421),l=j(9672),Z=j(4482),g=j(5403);function Ge(At,kt=0){return(0,Z.e)((jt,nt)=>{jt.subscribe((0,g.x)(nt,at=>(0,l.f)(nt,At,()=>nt.next(at),kt),()=>(0,l.f)(nt,At,()=>nt.complete(),kt),at=>(0,l.f)(nt,At,()=>nt.error(at),kt)))})}function _e(At,kt=0){return(0,Z.e)((jt,nt)=>{nt.add(At.schedule(()=>jt.subscribe(nt),kt))})}var Ue=j(9751),Je=j(2202),Le=j(576);function qe(At,kt){if(!At)throw new Error("Iterable cannot be null");return new Ue.y(jt=>{(0,l.f)(jt,kt,()=>{const nt=At[Symbol.asyncIterator]();(0,l.f)(jt,kt,()=>{nt.next().then(at=>{at.done?jt.complete():jt.next(at.value)})},0,!0)})})}var $e=j(3670),mt=j(8239),pt=j(1144),wt=j(6495),tn=j(2206),Zt=j(4532),bt=j(3260);function It(At,kt){return kt?function ze(At,kt){if(null!=At){if((0,$e.c)(At))return function Ze(At,kt){return(0,T.Xf)(At).pipe(_e(kt),Ge(kt))}(At,kt);if((0,pt.z)(At))return function je(At,kt){return new Ue.y(jt=>{let nt=0;return kt.schedule(function(){nt===At.length?jt.complete():(jt.next(At[nt++]),jt.closed||this.schedule())})})}(At,kt);if((0,mt.t)(At))return function Ae(At,kt){return(0,T.Xf)(At).pipe(_e(kt),Ge(kt))}(At,kt);if((0,tn.D)(At))return qe(At,kt);if((0,wt.T)(At))return function et(At,kt){return new Ue.y(jt=>{let nt;return(0,l.f)(jt,kt,()=>{nt=At[Je.h](),(0,l.f)(jt,kt,()=>{let at,xt;try{({value:at,done:xt}=nt.next())}catch(_t){return void jt.error(_t)}xt?jt.complete():jt.next(at)},0,!0)}),()=>(0,Le.m)(nt?.return)&&nt.return()})}(At,kt);if((0,bt.L)(At))return function Re(At,kt){return qe((0,bt.Q)(At),kt)}(At,kt)}throw(0,Zt.z)(At)}(At,kt):(0,T.Xf)(At)}},4968:(sn,ut,j)=>{"use strict";j.d(ut,{R:()=>je});var T=j(8421),l=j(9751),Z=j(5577),g=j(1144),Ge=j(576),_e=j(3268);const Ze=["addListener","removeListener"],Ae=["addEventListener","removeEventListener"],Ue=["on","off"];function je($e,mt,pt,wt){if((0,Ge.m)(pt)&&(wt=pt,pt=void 0),wt)return je($e,mt,pt).pipe((0,_e.Z)(wt));const[tn,Zt]=function qe($e){return(0,Ge.m)($e.addEventListener)&&(0,Ge.m)($e.removeEventListener)}($e)?Ae.map(bt=>Re=>$e[bt](mt,Re,pt)):function Le($e){return(0,Ge.m)($e.addListener)&&(0,Ge.m)($e.removeListener)}($e)?Ze.map(Je($e,mt)):function et($e){return(0,Ge.m)($e.on)&&(0,Ge.m)($e.off)}($e)?Ue.map(Je($e,mt)):[];if(!tn&&(0,g.z)($e))return(0,Z.z)(bt=>je(bt,mt,pt))((0,T.Xf)($e));if(!tn)throw new TypeError("Invalid event target");return new l.y(bt=>{const Re=(...ze)=>bt.next(1<ze.length?ze:ze[0]);return tn(Re),()=>Zt(Re)})}function Je($e,mt){return pt=>wt=>$e[pt](mt,wt)}},8421:(sn,ut,j)=>{"use strict";j.d(ut,{Xf:()=>et});var T=j(655),l=j(1144),Z=j(8239),g=j(9751),Ge=j(3670),_e=j(2206),Ze=j(4532),Ae=j(6495),Ue=j(3260),je=j(576),Je=j(7849),Le=j(8822);function et(bt){if(bt instanceof g.y)return bt;if(null!=bt){if((0,Ge.c)(bt))return function qe(bt){return new g.y(Re=>{const ze=bt[Le.L]();if((0,je.m)(ze.subscribe))return ze.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(bt);if((0,l.z)(bt))return function $e(bt){return new g.y(Re=>{for(let ze=0;ze<bt.length&&!Re.closed;ze++)Re.next(bt[ze]);Re.complete()})}(bt);if((0,Z.t)(bt))return function mt(bt){return new g.y(Re=>{bt.then(ze=>{Re.closed||(Re.next(ze),Re.complete())},ze=>Re.error(ze)).then(null,Je.h)})}(bt);if((0,_e.D)(bt))return wt(bt);if((0,Ae.T)(bt))return function pt(bt){return new g.y(Re=>{for(const ze of bt)if(Re.next(ze),Re.closed)return;Re.complete()})}(bt);if((0,Ue.L)(bt))return function tn(bt){return wt((0,Ue.Q)(bt))}(bt)}throw(0,Ze.z)(bt)}function wt(bt){return new g.y(Re=>{(function Zt(bt,Re){var ze,It,At,kt;return(0,T.mG)(this,void 0,void 0,function*(){try{for(ze=(0,T.KL)(bt);!(It=yield ze.next()).done;)if(Re.next(It.value),Re.closed)return}catch(jt){At={error:jt}}finally{try{It&&!It.done&&(kt=ze.return)&&(yield kt.call(ze))}finally{if(At)throw At.error}}Re.complete()})})(bt,Re).catch(ze=>Re.error(ze))})}},6451:(sn,ut,j)=>{"use strict";j.d(ut,{T:()=>_e});var T=j(8189),l=j(8421),Z=j(515),g=j(3269),Ge=j(2076);function _e(...Ze){const Ae=(0,g.yG)(Ze),Ue=(0,g._6)(Ze,1/0),je=Ze;return je.length?1===je.length?(0,l.Xf)(je[0]):(0,T.J)(Ue)((0,Ge.D)(je,Ae)):Z.E}},9646:(sn,ut,j)=>{"use strict";j.d(ut,{of:()=>Z});var T=j(3269),l=j(2076);function Z(...g){const Ge=(0,T.yG)(g);return(0,l.D)(g,Ge)}},2843:(sn,ut,j)=>{"use strict";j.d(ut,{_:()=>Z});var T=j(9751),l=j(576);function Z(g,Ge){const _e=(0,l.m)(g)?g:()=>g,Ze=Ae=>Ae.error(_e());return new T.y(Ge?Ae=>Ge.schedule(Ze,0,Ae):Ze)}},5963:(sn,ut,j)=>{"use strict";j.d(ut,{H:()=>Ge});var T=j(9751),l=j(4986),Z=j(3532);function Ge(_e=0,Ze,Ae=l.P){let Ue=-1;return null!=Ze&&((0,Z.K)(Ze)?Ae=Ze:Ue=Ze),new T.y(je=>{let Je=function g(_e){return _e instanceof Date&&!isNaN(_e)}(_e)?+_e-Ae.now():_e;Je<0&&(Je=0);let Le=0;return Ae.schedule(function(){je.closed||(je.next(Le++),0<=Ue?this.schedule(void 0,Ue):je.complete())},Je)})}},5403:(sn,ut,j)=>{"use strict";j.d(ut,{x:()=>l});var T=j(930);function l(g,Ge,_e,Ze,Ae){return new Z(g,Ge,_e,Ze,Ae)}class Z extends T.Lv{constructor(Ge,_e,Ze,Ae,Ue,je){super(Ge),this.onFinalize=Ue,this.shouldUnsubscribe=je,this._next=_e?function(Je){try{_e(Je)}catch(Le){Ge.error(Le)}}:super._next,this._error=Ae?function(Je){try{Ae(Je)}catch(Le){Ge.error(Le)}finally{this.unsubscribe()}}:super._error,this._complete=Ze?function(){try{Ze()}catch(Je){Ge.error(Je)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(Ge=this.onFinalize)||void 0===Ge||Ge.call(this))}}}},262:(sn,ut,j)=>{"use strict";j.d(ut,{K:()=>g});var T=j(8421),l=j(5403),Z=j(4482);function g(Ge){return(0,Z.e)((_e,Ze)=>{let je,Ae=null,Ue=!1;Ae=_e.subscribe((0,l.x)(Ze,void 0,void 0,Je=>{je=(0,T.Xf)(Ge(Je,g(Ge)(_e))),Ae?(Ae.unsubscribe(),Ae=null,je.subscribe(Ze)):Ue=!0})),Ue&&(Ae.unsubscribe(),Ae=null,je.subscribe(Ze))})}},4351:(sn,ut,j)=>{"use strict";j.d(ut,{b:()=>Z});var T=j(5577),l=j(576);function Z(g,Ge){return(0,l.m)(Ge)?(0,T.z)(g,Ge,1):(0,T.z)(g,1)}},8372:(sn,ut,j)=>{"use strict";j.d(ut,{b:()=>g});var T=j(4986),l=j(4482),Z=j(5403);function g(Ge,_e=T.z){return(0,l.e)((Ze,Ae)=>{let Ue=null,je=null,Je=null;const Le=()=>{if(Ue){Ue.unsubscribe(),Ue=null;const qe=je;je=null,Ae.next(qe)}};function et(){const qe=Je+Ge,$e=_e.now();if($e<qe)return Ue=this.schedule(void 0,qe-$e),void Ae.add(Ue);Le()}Ze.subscribe((0,Z.x)(Ae,qe=>{je=qe,Je=_e.now(),Ue||(Ue=_e.schedule(et,Ge),Ae.add(Ue))},()=>{Le(),Ae.complete()},void 0,()=>{je=Ue=null}))})}},6590:(sn,ut,j)=>{"use strict";j.d(ut,{d:()=>Z});var T=j(4482),l=j(5403);function Z(g){return(0,T.e)((Ge,_e)=>{let Ze=!1;Ge.subscribe((0,l.x)(_e,Ae=>{Ze=!0,_e.next(Ae)},()=>{Ze||_e.next(g),_e.complete()}))})}},1884:(sn,ut,j)=>{"use strict";j.d(ut,{x:()=>g});var T=j(4671),l=j(4482),Z=j(5403);function g(_e,Ze=T.y){return _e=_e??Ge,(0,l.e)((Ae,Ue)=>{let je,Je=!0;Ae.subscribe((0,Z.x)(Ue,Le=>{const et=Ze(Le);(Je||!_e(je,et))&&(Je=!1,je=et,Ue.next(Le))}))})}function Ge(_e,Ze){return _e===Ze}},9300:(sn,ut,j)=>{"use strict";j.d(ut,{h:()=>Z});var T=j(4482),l=j(5403);function Z(g,Ge){return(0,T.e)((_e,Ze)=>{let Ae=0;_e.subscribe((0,l.x)(Ze,Ue=>g.call(Ge,Ue,Ae++)&&Ze.next(Ue)))})}},8746:(sn,ut,j)=>{"use strict";j.d(ut,{x:()=>l});var T=j(4482);function l(Z){return(0,T.e)((g,Ge)=>{try{g.subscribe(Ge)}finally{Ge.add(Z)}})}},590:(sn,ut,j)=>{"use strict";j.d(ut,{P:()=>Ze});var T=j(6805),l=j(9300),Z=j(5698),g=j(6590),Ge=j(8068),_e=j(4671);function Ze(Ae,Ue){const je=arguments.length>=2;return Je=>Je.pipe(Ae?(0,l.h)((Le,et)=>Ae(Le,et,Je)):_e.y,(0,Z.q)(1),je?(0,g.d)(Ue):(0,Ge.T)(()=>new T.K))}},4004:(sn,ut,j)=>{"use strict";j.d(ut,{U:()=>Z});var T=j(4482),l=j(5403);function Z(g,Ge){return(0,T.e)((_e,Ze)=>{let Ae=0;_e.subscribe((0,l.x)(Ze,Ue=>{Ze.next(g.call(Ge,Ue,Ae++))}))})}},9718:(sn,ut,j)=>{"use strict";j.d(ut,{h:()=>l});var T=j(4004);function l(Z){return(0,T.U)(()=>Z)}},8189:(sn,ut,j)=>{"use strict";j.d(ut,{J:()=>Z});var T=j(5577),l=j(4671);function Z(g=1/0){return(0,T.z)(l.y,g)}},5577:(sn,ut,j)=>{"use strict";j.d(ut,{z:()=>Ae});var T=j(4004),l=j(8421),Z=j(4482),g=j(9672),Ge=j(5403),Ze=j(576);function Ae(Ue,je,Je=1/0){return(0,Ze.m)(je)?Ae((Le,et)=>(0,T.U)((qe,$e)=>je(Le,qe,et,$e))((0,l.Xf)(Ue(Le,et))),Je):("number"==typeof je&&(Je=je),(0,Z.e)((Le,et)=>function _e(Ue,je,Je,Le,et,qe,$e,mt){const pt=[];let wt=0,tn=0,Zt=!1;const bt=()=>{Zt&&!pt.length&&!wt&&je.complete()},Re=It=>wt<Le?ze(It):pt.push(It),ze=It=>{qe&&je.next(It),wt++;let At=!1;(0,l.Xf)(Je(It,tn++)).subscribe((0,Ge.x)(je,kt=>{et?.(kt),qe?Re(kt):je.next(kt)},()=>{At=!0},void 0,()=>{if(At)try{for(wt--;pt.length&&wt<Le;){const kt=pt.shift();$e?(0,g.f)(je,$e,()=>ze(kt)):ze(kt)}bt()}catch(kt){je.error(kt)}}))};return Ue.subscribe((0,Ge.x)(je,Re,()=>{Zt=!0,bt()})),()=>{mt?.()}}(Le,et,Ue,Je)))}},3099:(sn,ut,j)=>{"use strict";j.d(ut,{B:()=>Ge});var T=j(8421),l=j(7579),Z=j(930),g=j(4482);function Ge(Ze={}){const{connector:Ae=(()=>new l.x),resetOnError:Ue=!0,resetOnComplete:je=!0,resetOnRefCountZero:Je=!0}=Ze;return Le=>{let et,qe,$e,mt=0,pt=!1,wt=!1;const tn=()=>{qe?.unsubscribe(),qe=void 0},Zt=()=>{tn(),et=$e=void 0,pt=wt=!1},bt=()=>{const Re=et;Zt(),Re?.unsubscribe()};return(0,g.e)((Re,ze)=>{mt++,!wt&&!pt&&tn();const It=$e=$e??Ae();ze.add(()=>{mt--,0===mt&&!wt&&!pt&&(qe=_e(bt,Je))}),It.subscribe(ze),!et&&mt>0&&(et=new Z.Hp({next:At=>It.next(At),error:At=>{wt=!0,tn(),qe=_e(Zt,Ue,At),It.error(At)},complete:()=>{pt=!0,tn(),qe=_e(Zt,je),It.complete()}}),(0,T.Xf)(Re).subscribe(et))})(Le)}}function _e(Ze,Ae,...Ue){if(!0===Ae)return void Ze();if(!1===Ae)return;const je=new Z.Hp({next:()=>{je.unsubscribe(),Ze()}});return Ae(...Ue).subscribe(je)}},3151:(sn,ut,j)=>{"use strict";j.d(ut,{d:()=>Ge});var T=j(7579),l=j(6063);class Z extends T.x{constructor(Ze=1/0,Ae=1/0,Ue=l.l){super(),this._bufferSize=Ze,this._windowTime=Ae,this._timestampProvider=Ue,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ae===1/0,this._bufferSize=Math.max(1,Ze),this._windowTime=Math.max(1,Ae)}next(Ze){const{isStopped:Ae,_buffer:Ue,_infiniteTimeWindow:je,_timestampProvider:Je,_windowTime:Le}=this;Ae||(Ue.push(Ze),!je&&Ue.push(Je.now()+Le)),this._trimBuffer(),super.next(Ze)}_subscribe(Ze){this._throwIfClosed(),this._trimBuffer();const Ae=this._innerSubscribe(Ze),{_infiniteTimeWindow:Ue,_buffer:je}=this,Je=je.slice();for(let Le=0;Le<Je.length&&!Ze.closed;Le+=Ue?1:2)Ze.next(Je[Le]);return this._checkFinalizedStatuses(Ze),Ae}_trimBuffer(){const{_bufferSize:Ze,_timestampProvider:Ae,_buffer:Ue,_infiniteTimeWindow:je}=this,Je=(je?1:2)*Ze;if(Ze<1/0&&Je<Ue.length&&Ue.splice(0,Ue.length-Je),!je){const Le=Ae.now();let et=0;for(let qe=1;qe<Ue.length&&Ue[qe]<=Le;qe+=2)et=qe;et&&Ue.splice(0,et+1)}}}var g=j(3099);function Ge(_e,Ze,Ae){let Ue,je=!1;return _e&&"object"==typeof _e?({bufferSize:Ue=1/0,windowTime:Ze=1/0,refCount:je=!1,scheduler:Ae}=_e):Ue=_e??1/0,(0,g.B)({connector:()=>new Z(Ue,Ze,Ae),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:je})}},5684:(sn,ut,j)=>{"use strict";j.d(ut,{T:()=>l});var T=j(9300);function l(Z){return(0,T.h)((g,Ge)=>Z<=Ge)}},8675:(sn,ut,j)=>{"use strict";j.d(ut,{O:()=>g});var T=j(7272),l=j(3269),Z=j(4482);function g(...Ge){const _e=(0,l.yG)(Ge);return(0,Z.e)((Ze,Ae)=>{(_e?(0,T.z)(Ge,Ze,_e):(0,T.z)(Ge,Ze)).subscribe(Ae)})}},3900:(sn,ut,j)=>{"use strict";j.d(ut,{w:()=>g});var T=j(8421),l=j(4482),Z=j(5403);function g(Ge,_e){return(0,l.e)((Ze,Ae)=>{let Ue=null,je=0,Je=!1;const Le=()=>Je&&!Ue&&Ae.complete();Ze.subscribe((0,Z.x)(Ae,et=>{Ue?.unsubscribe();let qe=0;const $e=je++;(0,T.Xf)(Ge(et,$e)).subscribe(Ue=(0,Z.x)(Ae,mt=>Ae.next(_e?_e(et,mt,$e,qe++):mt),()=>{Ue=null,Le()}))},()=>{Je=!0,Le()}))})}},5698:(sn,ut,j)=>{"use strict";j.d(ut,{q:()=>g});var T=j(515),l=j(4482),Z=j(5403);function g(Ge){return Ge<=0?()=>T.E:(0,l.e)((_e,Ze)=>{let Ae=0;_e.subscribe((0,Z.x)(Ze,Ue=>{++Ae<=Ge&&(Ze.next(Ue),Ge<=Ae&&Ze.complete())}))})}},2722:(sn,ut,j)=>{"use strict";j.d(ut,{R:()=>Ge});var T=j(4482),l=j(5403),Z=j(8421),g=j(5032);function Ge(_e){return(0,T.e)((Ze,Ae)=>{(0,Z.Xf)(_e).subscribe((0,l.x)(Ae,()=>Ae.complete(),g.Z)),!Ae.closed&&Ze.subscribe(Ae)})}},2529:(sn,ut,j)=>{"use strict";j.d(ut,{o:()=>Z});var T=j(4482),l=j(5403);function Z(g,Ge=!1){return(0,T.e)((_e,Ze)=>{let Ae=0;_e.subscribe((0,l.x)(Ze,Ue=>{const je=g(Ue,Ae++);(je||Ge)&&Ze.next(Ue),!je&&Ze.complete()}))})}},8505:(sn,ut,j)=>{"use strict";j.d(ut,{b:()=>Ge});var T=j(576),l=j(4482),Z=j(5403),g=j(4671);function Ge(_e,Ze,Ae){const Ue=(0,T.m)(_e)||Ze||Ae?{next:_e,error:Ze,complete:Ae}:_e;return Ue?(0,l.e)((je,Je)=>{var Le;null===(Le=Ue.subscribe)||void 0===Le||Le.call(Ue);let et=!0;je.subscribe((0,Z.x)(Je,qe=>{var $e;null===($e=Ue.next)||void 0===$e||$e.call(Ue,qe),Je.next(qe)},()=>{var qe;et=!1,null===(qe=Ue.complete)||void 0===qe||qe.call(Ue),Je.complete()},qe=>{var $e;et=!1,null===($e=Ue.error)||void 0===$e||$e.call(Ue,qe),Je.error(qe)},()=>{var qe,$e;et&&(null===(qe=Ue.unsubscribe)||void 0===qe||qe.call(Ue)),null===($e=Ue.finalize)||void 0===$e||$e.call(Ue)}))}):g.y}},8068:(sn,ut,j)=>{"use strict";j.d(ut,{T:()=>g});var T=j(6805),l=j(4482),Z=j(5403);function g(_e=Ge){return(0,l.e)((Ze,Ae)=>{let Ue=!1;Ze.subscribe((0,Z.x)(Ae,je=>{Ue=!0,Ae.next(je)},()=>Ue?Ae.complete():Ae.error(_e())))})}function Ge(){return new T.K}},4408:(sn,ut,j)=>{"use strict";j.d(ut,{o:()=>Ge});var T=j(727);class l extends T.w0{constructor(Ze,Ae){super()}schedule(Ze,Ae=0){return this}}const Z={setInterval(_e,Ze,...Ae){const{delegate:Ue}=Z;return Ue?.setInterval?Ue.setInterval(_e,Ze,...Ae):setInterval(_e,Ze,...Ae)},clearInterval(_e){const{delegate:Ze}=Z;return(Ze?.clearInterval||clearInterval)(_e)},delegate:void 0};var g=j(8737);class Ge extends l{constructor(Ze,Ae){super(Ze,Ae),this.scheduler=Ze,this.work=Ae,this.pending=!1}schedule(Ze,Ae=0){var Ue;if(this.closed)return this;this.state=Ze;const je=this.id,Je=this.scheduler;return null!=je&&(this.id=this.recycleAsyncId(Je,je,Ae)),this.pending=!0,this.delay=Ae,this.id=null!==(Ue=this.id)&&void 0!==Ue?Ue:this.requestAsyncId(Je,this.id,Ae),this}requestAsyncId(Ze,Ae,Ue=0){return Z.setInterval(Ze.flush.bind(Ze,this),Ue)}recycleAsyncId(Ze,Ae,Ue=0){if(null!=Ue&&this.delay===Ue&&!1===this.pending)return Ae;null!=Ae&&Z.clearInterval(Ae)}execute(Ze,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ue=this._execute(Ze,Ae);if(Ue)return Ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ze,Ae){let je,Ue=!1;try{this.work(Ze)}catch(Je){Ue=!0,je=Je||new Error("Scheduled action threw falsy error")}if(Ue)return this.unsubscribe(),je}unsubscribe(){if(!this.closed){const{id:Ze,scheduler:Ae}=this,{actions:Ue}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,g.P)(Ue,this),null!=Ze&&(this.id=this.recycleAsyncId(Ae,Ze,null)),this.delay=null,super.unsubscribe()}}}},7565:(sn,ut,j)=>{"use strict";j.d(ut,{v:()=>Z});var T=j(6063);class l{constructor(Ge,_e=l.now){this.schedulerActionCtor=Ge,this.now=_e}schedule(Ge,_e=0,Ze){return new this.schedulerActionCtor(this,Ge).schedule(Ze,_e)}}l.now=T.l.now;class Z extends l{constructor(Ge,_e=l.now){super(Ge,_e),this.actions=[],this._active=!1}flush(Ge){const{actions:_e}=this;if(this._active)return void _e.push(Ge);let Ze;this._active=!0;do{if(Ze=Ge.execute(Ge.state,Ge.delay))break}while(Ge=_e.shift());if(this._active=!1,Ze){for(;Ge=_e.shift();)Ge.unsubscribe();throw Ze}}}},4986:(sn,ut,j)=>{"use strict";j.d(ut,{P:()=>g,z:()=>Z});var T=j(4408);const Z=new(j(7565).v)(T.o),g=Z},6063:(sn,ut,j)=>{"use strict";j.d(ut,{l:()=>T});const T={now:()=>(T.delegate||Date).now(),delegate:void 0}},3410:(sn,ut,j)=>{"use strict";j.d(ut,{z:()=>T});const T={setTimeout(l,Z,...g){const{delegate:Ge}=T;return Ge?.setTimeout?Ge.setTimeout(l,Z,...g):setTimeout(l,Z,...g)},clearTimeout(l){const{delegate:Z}=T;return(Z?.clearTimeout||clearTimeout)(l)},delegate:void 0}},2202:(sn,ut,j)=>{"use strict";j.d(ut,{h:()=>l});const l=function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(sn,ut,j)=>{"use strict";j.d(ut,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(sn,ut,j)=>{"use strict";j.d(ut,{K:()=>l});const l=(0,j(3888).d)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(sn,ut,j)=>{"use strict";j.d(ut,{_6:()=>_e,jO:()=>g,yG:()=>Ge});var T=j(576),l=j(3532);function Z(Ze){return Ze[Ze.length-1]}function g(Ze){return(0,T.m)(Z(Ze))?Ze.pop():void 0}function Ge(Ze){return(0,l.K)(Z(Ze))?Ze.pop():void 0}function _e(Ze,Ae){return"number"==typeof Z(Ze)?Ze.pop():Ae}},4742:(sn,ut,j)=>{"use strict";j.d(ut,{D:()=>Ge});const{isArray:T}=Array,{getPrototypeOf:l,prototype:Z,keys:g}=Object;function Ge(Ze){if(1===Ze.length){const Ae=Ze[0];if(T(Ae))return{args:Ae,keys:null};if(function _e(Ze){return Ze&&"object"==typeof Ze&&l(Ze)===Z}(Ae)){const Ue=g(Ae);return{args:Ue.map(je=>Ae[je]),keys:Ue}}}return{args:Ze,keys:null}}},8737:(sn,ut,j)=>{"use strict";function T(l,Z){if(l){const g=l.indexOf(Z);0<=g&&l.splice(g,1)}}j.d(ut,{P:()=>T})},3888:(sn,ut,j)=>{"use strict";function T(l){const g=l(Ge=>{Error.call(Ge),Ge.stack=(new Error).stack});return g.prototype=Object.create(Error.prototype),g.prototype.constructor=g,g}j.d(ut,{d:()=>T})},1810:(sn,ut,j)=>{"use strict";function T(l,Z){return l.reduce((g,Ge,_e)=>(g[Ge]=Z[_e],g),{})}j.d(ut,{n:()=>T})},2806:(sn,ut,j)=>{"use strict";j.d(ut,{O:()=>g,x:()=>Z});var T=j(2416);let l=null;function Z(Ge){if(T.v.useDeprecatedSynchronousErrorHandling){const _e=!l;if(_e&&(l={errorThrown:!1,error:null}),Ge(),_e){const{errorThrown:Ze,error:Ae}=l;if(l=null,Ze)throw Ae}}else Ge()}function g(Ge){T.v.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=Ge)}},9672:(sn,ut,j)=>{"use strict";function T(l,Z,g,Ge=0,_e=!1){const Ze=Z.schedule(function(){g(),_e?l.add(this.schedule(null,Ge)):this.unsubscribe()},Ge);if(l.add(Ze),!_e)return Ze}j.d(ut,{f:()=>T})},4671:(sn,ut,j)=>{"use strict";function T(l){return l}j.d(ut,{y:()=>T})},1144:(sn,ut,j)=>{"use strict";j.d(ut,{z:()=>T});const T=l=>l&&"number"==typeof l.length&&"function"!=typeof l},2206:(sn,ut,j)=>{"use strict";j.d(ut,{D:()=>l});var T=j(576);function l(Z){return Symbol.asyncIterator&&(0,T.m)(Z?.[Symbol.asyncIterator])}},576:(sn,ut,j)=>{"use strict";function T(l){return"function"==typeof l}j.d(ut,{m:()=>T})},3670:(sn,ut,j)=>{"use strict";j.d(ut,{c:()=>Z});var T=j(8822),l=j(576);function Z(g){return(0,l.m)(g[T.L])}},6495:(sn,ut,j)=>{"use strict";j.d(ut,{T:()=>Z});var T=j(2202),l=j(576);function Z(g){return(0,l.m)(g?.[T.h])}},8239:(sn,ut,j)=>{"use strict";j.d(ut,{t:()=>l});var T=j(576);function l(Z){return(0,T.m)(Z?.then)}},3260:(sn,ut,j)=>{"use strict";j.d(ut,{L:()=>g,Q:()=>Z});var T=j(655),l=j(576);function Z(Ge){return(0,T.FC)(this,arguments,function*(){const Ze=Ge.getReader();try{for(;;){const{value:Ae,done:Ue}=yield(0,T.qq)(Ze.read());if(Ue)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(Ae)}}finally{Ze.releaseLock()}})}function g(Ge){return(0,l.m)(Ge?.getReader)}},3532:(sn,ut,j)=>{"use strict";j.d(ut,{K:()=>l});var T=j(576);function l(Z){return Z&&(0,T.m)(Z.schedule)}},4482:(sn,ut,j)=>{"use strict";j.d(ut,{A:()=>l,e:()=>Z});var T=j(576);function l(g){return(0,T.m)(g?.lift)}function Z(g){return Ge=>{if(l(Ge))return Ge.lift(function(_e){try{return g(_e,this)}catch(Ze){this.error(Ze)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(sn,ut,j)=>{"use strict";j.d(ut,{Z:()=>g});var T=j(4004);const{isArray:l}=Array;function g(Ge){return(0,T.U)(_e=>function Z(Ge,_e){return l(_e)?Ge(..._e):Ge(_e)}(Ge,_e))}},5032:(sn,ut,j)=>{"use strict";function T(){}j.d(ut,{Z:()=>T})},9635:(sn,ut,j)=>{"use strict";j.d(ut,{U:()=>Z,z:()=>l});var T=j(4671);function l(...g){return Z(g)}function Z(g){return 0===g.length?T.y:1===g.length?g[0]:function(_e){return g.reduce((Ze,Ae)=>Ae(Ze),_e)}}},7849:(sn,ut,j)=>{"use strict";j.d(ut,{h:()=>Z});var T=j(2416),l=j(3410);function Z(g){l.z.setTimeout(()=>{const{onUnhandledError:Ge}=T.v;if(!Ge)throw g;Ge(g)})}},4532:(sn,ut,j)=>{"use strict";function T(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ut,{z:()=>T})},655:(sn,ut,j)=>{"use strict";function Ae(nt,at,xt,_t){return new(xt||(xt=Promise))(function(qt,On){function Jn(ui){try{Xt(_t.next(ui))}catch(Xn){On(Xn)}}function hi(ui){try{Xt(_t.throw(ui))}catch(Xn){On(Xn)}}function Xt(ui){ui.done?qt(ui.value):function Yt(qt){return qt instanceof xt?qt:new xt(function(On){On(qt)})}(ui.value).then(Jn,hi)}Xt((_t=_t.apply(nt,at||[])).next())})}function pt(nt){return this instanceof pt?(this.v=nt,this):new pt(nt)}function wt(nt,at,xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Yt,_t=xt.apply(nt,at||[]),qt=[];return Yt={},On("next"),On("throw"),On("return"),Yt[Symbol.asyncIterator]=function(){return this},Yt;function On(ai){_t[ai]&&(Yt[ai]=function(an){return new Promise(function(hn,dt){qt.push([ai,an,hn,dt])>1||Jn(ai,an)})})}function Jn(ai,an){try{!function hi(ai){ai.value instanceof pt?Promise.resolve(ai.value.v).then(Xt,ui):Xn(qt[0][2],ai)}(_t[ai](an))}catch(hn){Xn(qt[0][3],hn)}}function Xt(ai){Jn("next",ai)}function ui(ai){Jn("throw",ai)}function Xn(ai,an){ai(an),qt.shift(),qt.length&&Jn(qt[0][0],qt[0][1])}}function Zt(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt,at=nt[Symbol.asyncIterator];return at?at.call(nt):(nt=function Le(nt){var at="function"==typeof Symbol&&Symbol.iterator,xt=at&&nt[at],_t=0;if(xt)return xt.call(nt);if(nt&&"number"==typeof nt.length)return{next:function(){return nt&&_t>=nt.length&&(nt=void 0),{value:nt&&nt[_t++],done:!nt}}};throw new TypeError(at?"Object is not iterable.":"Symbol.iterator is not defined.")}(nt),xt={},_t("next"),_t("throw"),_t("return"),xt[Symbol.asyncIterator]=function(){return this},xt);function _t(qt){xt[qt]=nt[qt]&&function(On){return new Promise(function(Jn,hi){!function Yt(qt,On,Jn,hi){Promise.resolve(hi).then(function(Xt){qt({value:Xt,done:Jn})},On)}(Jn,hi,(On=nt[qt](On)).done,On.value)})}}}j.d(ut,{FC:()=>wt,KL:()=>Zt,mG:()=>Ae,qq:()=>pt})},1943:function(sn){sn.exports=function(){"use strict";var ut,j,T;function l(g,Ge){if(ut)if(j){var _e="var sharedChunk = {}; ("+ut+")(sharedChunk); ("+j+")(sharedChunk);",Ze={};ut(Ze),T=Ge(Ze),typeof window<"u"&&(T.workerUrl=window.URL.createObjectURL(new Blob([_e],{type:"text/javascript"})))}else j=Ge;else ut=Ge}return l(0,function(g){function Ge(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var _e=Ze;function Ze(o,e){this.x=o,this.y=e}Ze.prototype={clone:function(){return new Ze(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,e){return this.clone()._rotateAround(o,e)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var e=o.x-this.x,a=o.y-this.y;return e*e+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,e){return Math.atan2(this.x*e-this.y*o,this.x*o+this.y*e)},_matMult:function(o){var e=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=e,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var e=Math.cos(o),a=Math.sin(o),p=a*this.x+e*this.y;return this.x=e*this.x-a*this.y,this.y=p,this},_rotateAround:function(o,e){var a=Math.cos(o),p=Math.sin(o),y=e.y+p*(this.x-e.x)+a*(this.y-e.y);return this.x=e.x+a*(this.x-e.x)-p*(this.y-e.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ze.convert=function(o){return o instanceof Ze?o:Array.isArray(o)?new Ze(o[0],o[1]):o};var Ae=Ge(_e),Ue=je;function je(o,e,a,p){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(p-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=e,this.p2x=a,this.p2y=p}je.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,e){if(void 0===e&&(e=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,p=0;p<8;p++){var y=this.sampleCurveX(a)-o;if(Math.abs(y)<e)return a;var x=this.sampleCurveDerivativeX(a);if(Math.abs(x)<1e-6)break;a-=y/x}var D=0,O=1;for(a=o,p=0;p<20&&(y=this.sampleCurveX(a),!(Math.abs(y-o)<e));p++)o>y?D=a:O=a,a=.5*(O-D)+D;return a},solve:function(o,e){return this.sampleCurveY(this.solveCurveX(o,e))}};var Je=Ge(Ue);function Le(o,e,a,p){const y=new Je(o,e,a,p);return function(x){return y.solve(x)}}const et=Le(.25,.1,.25,1);function qe(o,e,a){return Math.min(a,Math.max(e,o))}function $e(o,e,a){const p=a-e,y=((o-e)%p+p)%p+e;return y===e?a:y}function mt(o,...e){for(const a of e)for(const p in a)o[p]=a[p];return o}let pt=1;function wt(o,e){o.forEach(a=>{e[a]&&(e[a]=e[a].bind(e))})}function tn(o,e,a){const p={};for(const y in o)p[y]=e.call(a||this,o[y],y,o);return p}function Zt(o,e,a){const p={};for(const y in o)e.call(a||this,o[y],y,o)&&(p[y]=o[y]);return p}function bt(o){return Array.isArray(o)?o.map(bt):"object"==typeof o&&o?tn(o,bt):o}const Re={};function ze(o){Re[o]||(typeof console<"u"&&console.warn(o),Re[o]=!0)}function It(o,e,a){return(a.y-o.y)*(e.x-o.x)>(e.y-o.y)*(a.x-o.x)}function At(o){let e=0;for(let a,p,y=0,x=o.length,D=x-1;y<x;D=y++)a=o[y],p=o[D],e+=(p.x-a.x)*(a.y+p.y);return e}function kt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let jt=null;function nt(o){if(null==jt){const e=o.navigator?o.navigator.userAgent:null;jt=!!o.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return jt}function at(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let _t,Yt;const qt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const e=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(o,e=0){return this.getImageCanvasContext(o).getImageData(-e,-e,o.width+2*e,o.height+2*e)},getImageCanvasContext(o){const e=window.document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return e.width=o.width,e.height=o.height,a.drawImage(o,0,0,o.width,o.height),a},resolveURL:o=>(_t||(_t=document.createElement("a")),_t.href=o,_t.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Yt&&(Yt=matchMedia("(prefers-reduced-motion: reduce)")),Yt.matches)}},On={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Jn extends Error{constructor(e,a,p,y){super(`AJAXError: ${a} (${e}): ${p}`),this.status=e,this.statusText=a,this.url=p,this.body=y}}const hi=kt()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,Xt=o=>On.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function ui(o,e){const a=new AbortController,p=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:hi(),signal:a.signal});let y=!1,x=!1;return"json"===o.type&&p.headers.set("Accept","application/json"),x||fetch(p).then(D=>{return D.ok?(O=D,void("arrayBuffer"===o.type||"image"===o.type?O.arrayBuffer():"json"===o.type?O.json():O.text()).then(L=>{x||(y=!0,e(null,L,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(L=>{x||e(new Error(L.message))})):D.blob().then(O=>e(new Jn(D.status,D.statusText,o.url,O)));var O}).catch(D=>{20!==D.code&&e(new Error(D.message))}),{cancel:()=>{x=!0,y||a.abort()}}}const Xn=function(o,e){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(kt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,e);if(!kt())return(Xt(o.url)||ui)(o,e)}if(!(/^file:/.test(a=o.url)||/^file:/.test(hi())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ui(o,e);if(kt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,e,void 0,!0)}var a;return function(p,y){const x=new XMLHttpRequest;x.open(p.method||"GET",p.url,!0),"arrayBuffer"!==p.type&&"image"!==p.type||(x.responseType="arraybuffer");for(const D in p.headers)x.setRequestHeader(D,p.headers[D]);return"json"===p.type&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials="include"===p.credentials,x.onerror=()=>{y(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||0===x.status)&&null!==x.response){let D=x.response;if("json"===p.type)try{D=JSON.parse(x.response)}catch(O){return y(O)}y(null,D,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else{const D=new Blob([x.response],{type:x.getResponseHeader("Content-Type")});y(new Jn(x.status,x.statusText,p.url,D))}},x.send(p.body),{cancel:()=>x.abort()}}(o,e)},ai=function(o,e){return Xn(mt(o,{type:"arrayBuffer"}),e)};function an(o){if(!o||o.indexOf("://")<=0||0===o.indexOf("data:image/")||0===o.indexOf("blob:"))return!0;const e=new URL(o),a=window.location;return e.protocol===a.protocol&&e.host===a.host}function hn(o,e,a){a[o]&&-1!==a[o].indexOf(e)||(a[o]=a[o]||[],a[o].push(e))}function dt(o,e,a){if(a&&a[o]){const p=a[o].indexOf(e);-1!==p&&a[o].splice(p,1)}}class Mt{constructor(e,a={}){mt(this,a),this.type=e}}class Kt extends Mt{constructor(e,a={}){super("error",mt({error:e},a))}}class Qt{on(e,a){return this._listeners=this._listeners||{},hn(e,a,this._listeners),this}off(e,a){return dt(e,a,this._listeners),dt(e,a,this._oneTimeListeners),this}once(e,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},hn(e,a,this._oneTimeListeners),this):new Promise(p=>this.once(e,p))}fire(e,a){"string"==typeof e&&(e=new Mt(e,a||{}));const p=e.type;if(this.listens(p)){e.target=this;const y=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const O of y)O.call(this,e);const x=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const O of x)dt(p,O,this._oneTimeListeners),O.call(this,e);const D=this._eventedParent;D&&(mt(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),D.fire(e))}else e instanceof Kt&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,a){return this._eventedParent=e,this._eventedParentData=a,this}}var xn={exports:{}},Vn={exports:{}},Qn=Array.prototype.concat,pi=Array.prototype.slice,Fi=Vn.exports=function(o){for(var e=[],a=0,p=o.length;a<p;a++){var y=o[a];(x=y)&&"string"!=typeof x&&(x instanceof Array||Array.isArray(x)||x.length>=0&&(x.splice instanceof Function||Object.getOwnPropertyDescriptor(x,x.length-1)&&"String"!==x.constructor.name))?e=Qn.call(e,pi.call(y)):e.push(y)}var x;return e};Fi.wrap=function(o){return function(){return o(Fi(arguments))}};var _i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},yi=Vn.exports,un=Object.hasOwnProperty,Rn=Object.create(null);for(var Xe in _i)un.call(_i,Xe)&&(Rn[_i[Xe]]=Xe);var Y=xn.exports={to:{},get:{}};function te(o,e,a){return Math.min(Math.max(e,o),a)}function Se(o){var e=Math.round(o).toString(16).toUpperCase();return e.length<2?"0"+e:e}Y.get=function(o){var e,a;switch(o.substring(0,3).toLowerCase()){case"hsl":e=Y.get.hsl(o),a="hsl";break;case"hwb":e=Y.get.hwb(o),a="hwb";break;default:e=Y.get.rgb(o),a="rgb"}return e?{model:a,value:e}:null},Y.get.rgb=function(o){if(!o)return null;var e,a,p,y=[0,0,0,1];if(e=o.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(p=e[2],e=e[1],a=0;a<3;a++){var x=2*a;y[a]=parseInt(e.slice(x,x+2),16)}p&&(y[3]=parseInt(p,16)/255)}else if(e=o.match(/^#([a-f0-9]{3,4})$/i)){for(p=(e=e[1])[3],a=0;a<3;a++)y[a]=parseInt(e[a]+e[a],16);p&&(y[3]=parseInt(p+p,16)/255)}else if(e=o.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(a=0;a<3;a++)y[a]=parseInt(e[a+1],0);e[4]&&(y[3]=e[5]?.01*parseFloat(e[4]):parseFloat(e[4]))}else{if(!(e=o.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=o.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:un.call(_i,e[1])?((y=_i[e[1]])[3]=1,y):null:null;for(a=0;a<3;a++)y[a]=Math.round(2.55*parseFloat(e[a+1]));e[4]&&(y[3]=e[5]?.01*parseFloat(e[4]):parseFloat(e[4]))}for(a=0;a<3;a++)y[a]=te(y[a],0,255);return y[3]=te(y[3],0,1),y},Y.get.hsl=function(o){if(!o)return null;var e=o.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var a=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,te(parseFloat(e[2]),0,100),te(parseFloat(e[3]),0,100),te(isNaN(a)?1:a,0,1)]}return null},Y.get.hwb=function(o){if(!o)return null;var e=o.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var a=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,te(parseFloat(e[2]),0,100),te(parseFloat(e[3]),0,100),te(isNaN(a)?1:a,0,1)]}return null},Y.to.hex=function(){var o=yi(arguments);return"#"+Se(o[0])+Se(o[1])+Se(o[2])+(o[3]<1?Se(Math.round(255*o[3])):"")},Y.to.rgb=function(){var o=yi(arguments);return o.length<4||1===o[3]?"rgb("+Math.round(o[0])+", "+Math.round(o[1])+", "+Math.round(o[2])+")":"rgba("+Math.round(o[0])+", "+Math.round(o[1])+", "+Math.round(o[2])+", "+o[3]+")"},Y.to.rgb.percent=function(){var o=yi(arguments),e=Math.round(o[0]/255*100),a=Math.round(o[1]/255*100),p=Math.round(o[2]/255*100);return o.length<4||1===o[3]?"rgb("+e+"%, "+a+"%, "+p+"%)":"rgba("+e+"%, "+a+"%, "+p+"%, "+o[3]+")"},Y.to.hsl=function(){var o=yi(arguments);return o.length<4||1===o[3]?"hsl("+o[0]+", "+o[1]+"%, "+o[2]+"%)":"hsla("+o[0]+", "+o[1]+"%, "+o[2]+"%, "+o[3]+")"},Y.to.hwb=function(){var o=yi(arguments),e="";return o.length>=4&&1!==o[3]&&(e=", "+o[3]),"hwb("+o[0]+", "+o[1]+"%, "+o[2]+"%"+e+")"},Y.to.keyword=function(o){return Rn[o.slice(0,3)]};var Ke=Ge(xn.exports),me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ye=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function he(o,e){const a={};for(const p in o)"ref"!==p&&(a[p]=o[p]);return ye.forEach(p=>{p in e&&(a[p]=e[p])}),a}function ge(o,e){if(Array.isArray(o)){if(!Array.isArray(e)||o.length!==e.length)return!1;for(let a=0;a<o.length;a++)if(!ge(o[a],e[a]))return!1;return!0}if("object"==typeof o&&null!==o&&null!==e){if("object"!=typeof e||Object.keys(o).length!==Object.keys(e).length)return!1;for(const a in o)if(!ge(o[a],e[a]))return!1;return!0}return o===e}const Pe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function rt(o,e,a){a.push({command:Pe.addSource,args:[o,e[o]]})}function ct(o,e,a){e.push({command:Pe.removeSource,args:[o]}),a[o]=!0}function ln(o,e,a,p){ct(o,a,p),rt(o,e,a)}function Rt(o,e,a){let p;for(p in o[a])if(Object.prototype.hasOwnProperty.call(o[a],p)&&"data"!==p&&!ge(o[a][p],e[a][p]))return!1;for(p in e[a])if(Object.prototype.hasOwnProperty.call(e[a],p)&&"data"!==p&&!ge(o[a][p],e[a][p]))return!1;return!0}function mn(o,e,a,p,y,x){let D;for(D in e=e||{},o=o||{})Object.prototype.hasOwnProperty.call(o,D)&&(ge(o[D],e[D])||a.push({command:x,args:[p,D,e[D],y]}));for(D in e)Object.prototype.hasOwnProperty.call(e,D)&&!Object.prototype.hasOwnProperty.call(o,D)&&(ge(o[D],e[D])||a.push({command:x,args:[p,D,e[D],y]}))}function gn(o){return o.id}function ji(o,e){return o[e.id]=e,o}class Lt{constructor(e,a,p,y){this.message=(e?`${e}: `:"")+p,y&&(this.identifier=y),null!=a&&a.__line__&&(this.line=a.__line__)}}function ft(o,...e){for(const a of e)for(const p in a)o[p]=a[p];return o}class ie extends Error{constructor(e,a){super(a),this.message=a,this.key=e}}class V{constructor(e,a=[]){this.parent=e,this.bindings={};for(const[p,y]of a)this.bindings[p]=y}concat(e){return new V(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const U={kind:"null"},$={kind:"number"},X={kind:"string"},ce={kind:"boolean"},Ce={kind:"color"},ke={kind:"object"},Ie={kind:"value"},Qe={kind:"collator"},Ft={kind:"formatted"},yt={kind:"padding"},Pt={kind:"resolvedImage"};function nn(o,e){return{kind:"array",itemType:o,N:e}}function dn(o){if("array"===o.kind){const e=dn(o.itemType);return"number"==typeof o.N?`array<${e}, ${o.N}>`:"value"===o.itemType.kind?"array":`array<${e}>`}return o.kind}const on=[U,$,X,ce,Ce,Ft,ke,nn(Ie),yt,Pt];function cn(o,e){if("error"===e.kind)return null;if("array"===o.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!cn(o.itemType,e.itemType))&&("number"!=typeof o.N||o.N===e.N))return null}else{if(o.kind===e.kind)return null;if("value"===o.kind)for(const a of on)if(!cn(a,e))return null}return`Expected ${dn(o)} but found ${dn(e)} instead.`}function Fe(o,e){return e.some(a=>a.kind===o.kind)}function Ne(o,e){return e.some(a=>"null"===a?null===o:"array"===a?Array.isArray(o):"object"===a?o&&!Array.isArray(o)&&"object"==typeof o:a===typeof o)}function Te(o,e){return"array"===o.kind&&"array"===e.kind?o.itemType.kind===e.itemType.kind&&"number"==typeof o.N:o.kind===e.kind}const rn=4/29,Ln=6/29,Bn=3*Ln*Ln,Ji=Math.PI/180,Qo=180/Math.PI;function ri(o){return(o%=360)<0&&(o+=360),o}function Qi([o,e,a,p]){let y,x;const D=so((.2225045*(o=Xr(o))+.7168786*(e=Xr(e))+.0606169*(a=Xr(a)))/1);o===e&&e===a?y=x=D:(y=so((.4360747*o+.3850649*e+.1430804*a)/.96422),x=so((.0139322*o+.0971045*e+.7141733*a)/.82521));const O=116*D-16;return[O<0?0:O,500*(y-D),200*(D-x),p]}function Xr(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function so(o){return o>.008856451679035631?Math.pow(o,1/3):o/Bn+rn}function ao([o,e,a,p]){let y=(o+16)/116,x=isNaN(e)?y:y+e/500,D=isNaN(a)?y:y-a/200;return y=1*yr(y),x=.96422*yr(x),D=.82521*yr(D),[_r(3.1338561*x-1.6168667*y-.4906146*D),_r(-.9787684*x+1.9161415*y+.033454*D),_r(.0719453*x-.2289914*y+1.4052427*D),p]}function _r(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function yr(o){return o>Ln?o*o*o:Bn*(o-rn)}class Ti{constructor(e,a,p,y=1,x=!0){this.r=e,this.g=a,this.b=p,this.a=y,x||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[e,a,p,y]))}static parse(e){if(e instanceof Ti)return e;if("string"!=typeof e)return;const a=function(p){const y=Ke.get(p);switch(y?.model){case"rgb":{const[x,D,O,L]=y.value;return[x/255,D/255,O/255,L]}case"hsl":return function([x,D,O,L]){function J(re){const de=(re+x/30)%12,ve=D*Math.min(O,1-O);return O-ve*Math.max(-1,Math.min(de-3,9-de,1))}return x=ri(x),D/=100,O/=100,[J(0),J(8),J(4),L]}(y.value)}}(e.toLowerCase());return a?new Ti(...a,!1):void 0}get rgb(){const{r:e,g:a,b:p,a:y}=this,x=y||1/0;return this.overwriteGetter("rgb",[e/x,a/x,p/x,y])}get hcl(){return this.overwriteGetter("hcl",function(e){const[a,p,y,x]=Qi(e),D=Math.sqrt(p*p+y*y);return[Math.round(1e4*D)?ri(Math.atan2(y,p)*Qo):NaN,D,a,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Qi(this.rgb))}overwriteGetter(e,a){return Object.defineProperty(this,e,{value:a}),a}toString(){const[e,a,p,y]=this.rgb;return`rgba(${[e,a,p].map(x=>Math.round(255*x)).join(",")},${y})`}}Ti.black=new Ti(0,0,0,1),Ti.white=new Ti(1,1,1,1),Ti.transparent=new Ti(0,0,0,0),Ti.red=new Ti(1,0,0,1);class lo{constructor(e,a,p){this.sensitivity=e?a?"variant":"case":a?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,a){return this.collator.compare(e,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Vo{constructor(e,a,p,y,x){this.text=e,this.image=a,this.scale=p,this.fontStack=y,this.textColor=x}}class Er{constructor(e){this.sections=e}static fromString(e){return new Er([new Vo(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Er?e:Er.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class mi{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof mi)return e;if("number"==typeof e)return new mi([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const a of e)if("number"!=typeof a)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new mi(e)}}toString(){return JSON.stringify(this.values)}}class Nr{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Nr({name:e,available:!1}):null}}function cs(o,e,a,p){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof a&&a>=0&&a<=255?void 0===p||"number"==typeof p&&p>=0&&p<=1?null:`Invalid rgba value [${[o,e,a,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof p?[o,e,a,p]:[o,e,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Br(o){if(null===o||"string"==typeof o||"boolean"==typeof o||"number"==typeof o||o instanceof Ti||o instanceof lo||o instanceof Er||o instanceof mi||o instanceof Nr)return!0;if(Array.isArray(o)){for(const e of o)if(!Br(e))return!1;return!0}if("object"==typeof o){for(const e in o)if(!Br(o[e]))return!1;return!0}return!1}function Pi(o){if(null===o)return U;if("string"==typeof o)return X;if("boolean"==typeof o)return ce;if("number"==typeof o)return $;if(o instanceof Ti)return Ce;if(o instanceof lo)return Qe;if(o instanceof Er)return Ft;if(o instanceof mi)return yt;if(o instanceof Nr)return Pt;if(Array.isArray(o)){const e=o.length;let a;for(const p of o){const y=Pi(p);if(a){if(a===y)continue;a=Ie;break}a=y}return nn(a||Ie,e)}return ke}function Gr(o){const e=typeof o;return null===o?"":"string"===e||"number"===e||"boolean"===e?String(o):o instanceof Ti||o instanceof Er||o instanceof mi||o instanceof Nr?o.toString():JSON.stringify(o)}class Rr{constructor(e,a){this.type=e,this.value=a}static parse(e,a){if(2!==e.length)return a.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Br(e[1]))return a.error("invalid value");const p=e[1];let y=Pi(p);const x=a.expectedType;return"array"!==y.kind||0!==y.N||!x||"array"!==x.kind||"number"==typeof x.N&&0!==x.N||(y=x),new Rr(y,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ii{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Zn={string:X,number:$,boolean:ce,object:ke};class lr{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");let p,y=1;const x=e[0];if("array"===x){let O,L;if(e.length>2){const J=e[1];if("string"!=typeof J||!(J in Zn)||"object"===J)return a.error('The item type argument of "array" must be one of string, number, boolean',1);O=Zn[J],y++}else O=Ie;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return a.error('The length argument to "array" must be a positive integer literal',2);L=e[2],y++}p=nn(O,L)}else{if(!Zn[x])throw new Error(`Types doesn't contain name = ${x}`);p=Zn[x]}const D=[];for(;y<e.length;y++){const O=a.parse(e[y],y,Ie);if(!O)return null;D.push(O)}return new lr(p,D)}evaluate(e){for(let a=0;a<this.args.length;a++){const p=this.args[a].evaluate(e);if(!cn(this.type,Pi(p)))return p;if(a===this.args.length-1)throw new Ii(`Expected value to be of type ${dn(this.type)}, but found ${dn(Pi(p))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const cr={"to-boolean":ce,"to-color":Ce,"to-number":$,"to-string":X};class br{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const p=e[0];if(!cr[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if(("to-boolean"===p||"to-string"===p)&&2!==e.length)return a.error("Expected one argument.");const y=cr[p],x=[];for(let D=1;D<e.length;D++){const O=a.parse(e[D],D,Ie);if(!O)return null;x.push(O)}return new br(y,x)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let a,p;for(const y of this.args){if(a=y.evaluate(e),p=null,a instanceof Ti)return a;if("string"==typeof a){const x=e.parseColor(a);if(x)return x}else if(Array.isArray(a)&&(p=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:cs(a[0],a[1],a[2],a[3]),!p))return new Ti(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Ii(p||`Could not parse color from value '${"string"==typeof a?a:JSON.stringify(a)}'`)}if("padding"===this.type.kind){let a;for(const p of this.args){a=p.evaluate(e);const y=mi.parse(a);if(y)return y}throw new Ii(`Could not parse padding from value '${"string"==typeof a?a:JSON.stringify(a)}'`)}if("number"===this.type.kind){let a=null;for(const p of this.args){if(a=p.evaluate(e),null===a)return 0;const y=Number(a);if(!isNaN(y))return y}throw new Ii(`Could not convert ${JSON.stringify(a)} to number.`)}return"formatted"===this.type.kind?Er.fromString(Gr(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Nr.fromString(Gr(this.args[0].evaluate(e))):Gr(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Hs=["Unknown","Point","LineString","Polygon"];class $s{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Hs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let a=this._parseColorCache[e];return a||(a=this._parseColorCache[e]=Ti.parse(e)),a}}class us{constructor(e,a,p=[],y,x=new V,D=[]){this.registry=e,this.path=p,this.key=p.map(O=>`[${O}]`).join(""),this.scope=x,this.errors=D,this.expectedType=y,this._isConstant=a}parse(e,a,p,y,x={}){return a?this.concat(a,p,y)._parse(e,x):this._parse(e,x)}_parse(e,a){function p(y,x,D){return"assert"===D?new lr(x,[y]):"coerce"===D?new br(x,[y]):y}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=e[0];if("string"!=typeof y)return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[y];if(x){let D=x.parse(e,this);if(!D)return null;if(this.expectedType){const O=this.expectedType,L=D.type;if("string"!==O.kind&&"number"!==O.kind&&"boolean"!==O.kind&&"object"!==O.kind&&"array"!==O.kind||"value"!==L.kind)if("color"!==O.kind&&"formatted"!==O.kind&&"resolvedImage"!==O.kind||"value"!==L.kind&&"string"!==L.kind)if("padding"!==O.kind||"value"!==L.kind&&"number"!==L.kind&&"array"!==L.kind){if(this.checkSubtype(O,L))return null}else D=p(D,O,a.typeAnnotation||"coerce");else D=p(D,O,a.typeAnnotation||"coerce");else D=p(D,O,a.typeAnnotation||"assert")}if(!(D instanceof Rr)&&"resolvedImage"!==D.type.kind&&this._isConstant(D)){const O=new $s;try{D=new Rr(D.type,D.evaluate(O))}catch(L){return this.error(L.message),null}}return D}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,a,p){const y="number"==typeof e?this.path.concat(e):this.path,x=p?this.scope.concat(p):this.scope;return new us(this.registry,this._isConstant,y,a||null,x,this.errors)}error(e,...a){const p=`${this.key}${a.map(y=>`[${y}]`).join("")}`;this.errors.push(new ie(p,e))}checkSubtype(e,a){const p=cn(e,a);return p&&this.error(p),p}}class Jr{constructor(e,a,p){this.type=Qe,this.locale=p,this.caseSensitive=e,this.diacriticSensitive=a}static parse(e,a){if(2!==e.length)return a.error("Expected one argument.");const p=e[1];if("object"!=typeof p||Array.isArray(p))return a.error("Collator options argument must be an object.");const y=a.parse(void 0!==p["case-sensitive"]&&p["case-sensitive"],1,ce);if(!y)return null;const x=a.parse(void 0!==p["diacritic-sensitive"]&&p["diacritic-sensitive"],1,ce);if(!x)return null;let D=null;return p.locale&&(D=a.parse(p.locale,1,X),!D)?null:new Jr(y,x,D)}evaluate(e){return new lo(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const Zr=8192;function pa(o,e){o[0]=Math.min(o[0],e[0]),o[1]=Math.min(o[1],e[1]),o[2]=Math.max(o[2],e[0]),o[3]=Math.max(o[3],e[1])}function es(o,e){return!(o[0]<=e[0]||o[2]>=e[2]||o[1]<=e[1]||o[3]>=e[3])}function fa(o,e){const a=(180+o[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,y=Math.pow(2,e.z);return[Math.round(a*y*Zr),Math.round(p*y*Zr)]}function Mc(o,e,a){const p=o[0]-e[0],y=o[1]-e[1],x=o[0]-a[0],D=o[1]-a[1];return p*D-x*y==0&&p*x<=0&&y*D<=0}function co(o,e){let a=!1;for(let D=0,O=e.length;D<O;D++){const L=e[D];for(let J=0,re=L.length;J<re-1;J++){if(Mc(o,L[J],L[J+1]))return!1;(y=L[J])[1]>(p=o)[1]!=(x=L[J+1])[1]>p[1]&&p[0]<(x[0]-y[0])*(p[1]-y[1])/(x[1]-y[1])+y[0]&&(a=!a)}}var p,y,x;return a}function Pl(o,e){for(let a=0;a<e.length;a++)if(co(o,e[a]))return!0;return!1}function Ol(o,e,a,p){const y=p[0]-a[0],x=p[1]-a[1],D=(o[0]-a[0])*x-y*(o[1]-a[1]),O=(e[0]-a[0])*x-y*(e[1]-a[1]);return D>0&&O<0||D<0&&O>0}function kl(o,e,a){for(const J of a)for(let re=0;re<J.length-1;++re)if((O=[(D=J[re+1])[0]-(x=J[re])[0],D[1]-x[1]])[0]*(L=[(y=e)[0]-(p=o)[0],y[1]-p[1]])[1]-O[1]*L[0]!=0&&Ol(p,y,x,D)&&Ol(x,D,p,y))return!0;var p,y,x,D,O,L;return!1}function Gs(o,e){for(let a=0;a<o.length;++a)if(!co(o[a],e))return!1;for(let a=0;a<o.length-1;++a)if(kl(o[a],o[a+1],e))return!1;return!0}function Ia(o,e){for(let a=0;a<e.length;a++)if(Gs(o,e[a]))return!0;return!1}function Cs(o,e,a){const p=[];for(let y=0;y<o.length;y++){const x=[];for(let D=0;D<o[y].length;D++){const O=fa(o[y][D],a);pa(e,O),x.push(O)}p.push(x)}return p}function Co(o,e,a){const p=[];for(let y=0;y<o.length;y++){const x=Cs(o[y],e,a);p.push(x)}return p}function Io(o,e,a,p){if(o[0]<a[0]||o[0]>a[2]){const y=.5*p;let x=o[0]-a[0]>y?-p:a[0]-o[0]>y?p:0;0===x&&(x=o[0]-a[2]>y?-p:a[2]-o[0]>y?p:0),o[0]+=x}pa(e,o)}function Za(o,e,a,p){const y=Math.pow(2,p.z)*Zr,x=[p.x*Zr,p.y*Zr],D=[];for(const O of o)for(const L of O){const J=[L.x+x[0],L.y+x[1]];Io(J,e,a,y),D.push(J)}return D}function Aa(o,e,a,p){const y=Math.pow(2,p.z)*Zr,x=[p.x*Zr,p.y*Zr],D=[];for(const L of o){const J=[];for(const re of L){const de=[re.x+x[0],re.y+x[1]];pa(e,de),J.push(de)}D.push(J)}if(e[2]-e[0]<=y/2){(O=e)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(const L of D)for(const J of L)Io(J,e,a,y)}var O;return D}class Zs{constructor(e,a){this.type=ce,this.geojson=e,this.geometries=a}static parse(e,a){if(2!==e.length)return a.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Br(e[1])){const p=e[1];if("FeatureCollection"===p.type)for(let y=0;y<p.features.length;++y){const x=p.features[y].geometry.type;if("Polygon"===x||"MultiPolygon"===x)return new Zs(p,p.features[y].geometry)}else if("Feature"===p.type){const y=p.geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new Zs(p,p.geometry)}else if("Polygon"===p.type||"MultiPolygon"===p.type)return new Zs(p,p)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(a,p){const y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],D=a.canonicalID();if("Polygon"===p.type){const O=Cs(p.coordinates,x,D),L=Za(a.geometry(),y,x,D);if(!es(y,x))return!1;for(const J of L)if(!co(J,O))return!1}if("MultiPolygon"===p.type){const O=Co(p.coordinates,x,D),L=Za(a.geometry(),y,x,D);if(!es(y,x))return!1;for(const J of L)if(!Pl(J,O))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(a,p){const y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],D=a.canonicalID();if("Polygon"===p.type){const O=Cs(p.coordinates,x,D),L=Aa(a.geometry(),y,x,D);if(!es(y,x))return!1;for(const J of L)if(!Gs(J,O))return!1}if("MultiPolygon"===p.type){const O=Co(p.coordinates,x,D),L=Aa(a.geometry(),y,x,D);if(!es(y,x))return!1;for(const J of L)if(!Ia(J,O))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class vo{constructor(e,a){this.type=a.type,this.name=e,this.boundExpression=a}static parse(e,a){if(2!==e.length||"string"!=typeof e[1])return a.error("'var' expression requires exactly one string literal argument.");const p=e[1];return a.scope.has(p)?new vo(p,a.scope.get(p)):a.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class zr{constructor(e,a,p,y){this.name=e,this.type=a,this._evaluate=p,this.args=y}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,a){const p=e[0],y=zr.definitions[p];if(!y)return a.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(y)?y[0]:y.type,D=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,O=D.filter(([J])=>!Array.isArray(J)||J.length===e.length-1);let L=null;for(const[J,re]of O){L=new us(a.registry,Es,a.path,null,a.scope);const de=[];let ve=!1;for(let xe=1;xe<e.length;xe++){const De=e[xe],He=Array.isArray(J)?J[xe-1]:J.type,Ve=L.parse(De,1+de.length,He);if(!Ve){ve=!0;break}de.push(Ve)}if(!ve)if(Array.isArray(J)&&J.length!==de.length)L.error(`Expected ${J.length} arguments, but found ${de.length} instead.`);else{for(let xe=0;xe<de.length;xe++){const De=Array.isArray(J)?J[xe]:J.type,He=de[xe];L.concat(xe+1).checkSubtype(De,He.type)}if(0===L.errors.length)return new zr(p,x,re,de)}}if(1===O.length)a.errors.push(...L.errors);else{const J=(O.length?O:D).map(([de])=>{return ve=de,Array.isArray(ve)?`(${ve.map(dn).join(", ")})`:`(${dn(ve.type)}...)`;var ve}).join(" | "),re=[];for(let de=1;de<e.length;de++){const ve=a.parse(e[de],1+re.length);if(!ve)return null;re.push(dn(ve.type))}a.error(`Expected arguments of type ${J}, but found (${re.join(", ")}) instead.`)}return null}static register(e,a){zr.definitions=a;for(const p in a)e[p]=zr}}function Es(o){if(o instanceof vo)return Es(o.boundExpression);if(o instanceof zr&&"error"===o.name||o instanceof Jr||o instanceof Zs)return!1;const e=o instanceof br||o instanceof lr;let a=!0;return o.eachChild(p=>{a=e?a&&Es(p):a&&p instanceof Rr}),!!a&&Ws(o)&&Ms(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ws(o){if(o instanceof zr&&("get"===o.name&&1===o.args.length||"feature-state"===o.name||"has"===o.name&&1===o.args.length||"properties"===o.name||"geometry-type"===o.name||"id"===o.name||/^filter-/.test(o.name))||o instanceof Zs)return!1;let e=!0;return o.eachChild(a=>{e&&!Ws(a)&&(e=!1)}),e}function Ds(o){if(o instanceof zr&&"feature-state"===o.name)return!1;let e=!0;return o.eachChild(a=>{e&&!Ds(a)&&(e=!1)}),e}function Ms(o,e){if(o instanceof zr&&e.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(p=>{a&&!Ms(p,e)&&(a=!1)}),a}function uo(o,e){const a=o.length-1;let p,y,x=0,D=a,O=0;for(;x<=D;)if(O=Math.floor((x+D)/2),p=o[O],y=o[O+1],p<=e){if(O===a||e<y)return O;x=O+1}else{if(!(p>e))throw new Ii("Input is not a number.");D=O-1}return 0}class ts{constructor(e,a,p){this.type=e,this.input=a,this.labels=[],this.outputs=[];for(const[y,x]of p)this.labels.push(y),this.outputs.push(x)}static parse(e,a){if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return a.error("Expected an even number of arguments.");const p=a.parse(e[1],1,$);if(!p)return null;const y=[];let x=null;a.expectedType&&"value"!==a.expectedType.kind&&(x=a.expectedType);for(let D=1;D<e.length;D+=2){const O=1===D?-1/0:e[D],L=e[D+1],J=D,re=D+1;if("number"!=typeof O)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(y.length&&y[y.length-1][0]>=O)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',J);const de=a.parse(L,re,x);if(!de)return null;x=x||de.type,y.push([O,de])}return new ts(x,p,y)}evaluate(e){const a=this.labels,p=this.outputs;if(1===a.length)return p[0].evaluate(e);const y=this.input.evaluate(e);if(y<=a[0])return p[0].evaluate(e);const x=a.length;return y>=a[x-1]?p[x-1].evaluate(e):p[uo(a,y)].evaluate(e)}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ds(o,e,a){return o+a*(e-o)}function Ai(o,e,a){return o.map((p,y)=>ds(p,e[y],a))}const Dr={number:ds,color:function(o,e,a,p="rgb"){switch(p){case"rgb":{const[y,x,D,O]=Ai(o.rgb,e.rgb,a);return new Ti(y,x,D,O,!1)}case"hcl":{const[y,x,D,O]=o.hcl,[L,J,re,de]=e.hcl;let ve,xe;if(isNaN(y)||isNaN(L))isNaN(y)?isNaN(L)?ve=NaN:(ve=L,1!==D&&0!==D||(xe=J)):(ve=y,1!==re&&0!==re||(xe=x));else{let gt=L-y;L>y&&gt>180?gt-=360:L<y&&y-L>180&&(gt+=360),ve=y+a*gt}const[De,He,Ve,st]=function([gt,it,Dt,Ot]){return gt=isNaN(gt)?0:gt*Ji,ao([Dt,Math.cos(gt)*it,Math.sin(gt)*it,Ot])}([ve,xe??ds(x,J,a),ds(D,re,a),ds(O,de,a)]);return new Ti(De,He,Ve,st,!1)}case"lab":{const[y,x,D,O]=ao(Ai(o.lab,e.lab,a));return new Ti(y,x,D,O,!1)}}},array:Ai,padding:function(o,e,a){return new mi(Ai(o.values,e.values,a))}};class Vr{constructor(e,a,p,y,x){this.type=e,this.operator=a,this.interpolation=p,this.input=y,this.labels=[],this.outputs=[];for(const[D,O]of x)this.labels.push(D),this.outputs.push(O)}static interpolationFactor(e,a,p,y){let x=0;if("exponential"===e.name)x=Pa(a,e.base,p,y);else if("linear"===e.name)x=Pa(a,1,p,y);else if("cubic-bezier"===e.name){const D=e.controlPoints;x=new Je(D[0],D[1],D[2],D[3]).solve(Pa(a,1,p,y))}return x}static parse(e,a){let[p,y,x,...D]=e;if(!Array.isArray(y)||0===y.length)return a.error("Expected an interpolation type expression.",1);if("linear"===y[0])y={name:"linear"};else if("exponential"===y[0]){const J=y[1];if("number"!=typeof J)return a.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:J}}else{if("cubic-bezier"!==y[0])return a.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const J=y.slice(1);if(4!==J.length||J.some(re=>"number"!=typeof re||re<0||re>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:J}}}if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(x=a.parse(x,2,$),!x)return null;const O=[];let L=null;"interpolate-hcl"===p||"interpolate-lab"===p?L=Ce:a.expectedType&&"value"!==a.expectedType.kind&&(L=a.expectedType);for(let J=0;J<D.length;J+=2){const re=D[J],de=D[J+1],ve=J+3,xe=J+4;if("number"!=typeof re)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ve);if(O.length&&O[O.length-1][0]>=re)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ve);const De=a.parse(de,xe,L);if(!De)return null;L=L||De.type,O.push([re,De])}return Te(L,$)||Te(L,Ce)||Te(L,yt)||Te(L,nn($))?new Vr(L,p,y,x,O):a.error(`Type ${dn(L)} is not interpolatable.`)}evaluate(e){const a=this.labels,p=this.outputs;if(1===a.length)return p[0].evaluate(e);const y=this.input.evaluate(e);if(y<=a[0])return p[0].evaluate(e);const x=a.length;if(y>=a[x-1])return p[x-1].evaluate(e);const D=uo(a,y),O=Vr.interpolationFactor(this.interpolation,y,a[D],a[D+1]),L=p[D].evaluate(e),J=p[D+1].evaluate(e);switch(this.operator){case"interpolate":return Dr[this.type.kind](L,J,O);case"interpolate-hcl":return Dr.color(L,J,O,"hcl");case"interpolate-lab":return Dr.color(L,J,O,"lab")}}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Pa(o,e,a,p){const y=p-a,x=o-a;return 0===y?0:1===e?x/y:(Math.pow(e,x)-1)/(Math.pow(e,y)-1)}class qs{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expectected at least one argument.");let p=null;const y=a.expectedType;y&&"value"!==y.kind&&(p=y);const x=[];for(const O of e.slice(1)){const L=a.parse(O,1+x.length,p,void 0,{typeAnnotation:"omit"});if(!L)return null;p=p||L.type,x.push(L)}if(!p)throw new Error("No output type");const D=y&&x.some(O=>cn(y,O.type));return new qs(D?Ie:p,x)}evaluate(e){let a,p=null,y=0;for(const x of this.args)if(y++,p=x.evaluate(e),p&&p instanceof Nr&&!p.available&&(a||(a=p.name),p=null,y===this.args.length&&(p=a)),null!==p)break;return p}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}class Ks{constructor(e,a){this.type=a.type,this.bindings=[].concat(e),this.result=a}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const a of this.bindings)e(a[1]);e(this.result)}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const p=[];for(let x=1;x<e.length-1;x+=2){const D=e[x];if("string"!=typeof D)return a.error(`Expected string, but found ${typeof D} instead.`,x);if(/[^a-zA-Z0-9_]/.test(D))return a.error("Variable names must contain only alphanumeric characters or '_'.",x);const O=a.parse(e[x+1],x+1);if(!O)return null;p.push([D,O])}const y=a.parse(e[e.length-1],e.length-1,a.expectedType,p);return y?new Ks(p,y):null}outputDefined(){return this.result.outputDefined()}}class hs{constructor(e,a,p){this.type=e,this.index=a,this.input=p}static parse(e,a){if(3!==e.length)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const p=a.parse(e[1],1,$),y=a.parse(e[2],2,nn(a.expectedType||Ie));return p&&y?new hs(y.type.itemType,p,y):null}evaluate(e){const a=this.index.evaluate(e),p=this.input.evaluate(e);if(a<0)throw new Ii(`Array index out of bounds: ${a} < 0.`);if(a>=p.length)throw new Ii(`Array index out of bounds: ${a} > ${p.length-1}.`);if(a!==Math.floor(a))throw new Ii(`Array index must be an integer, but found ${a} instead.`);return p[a]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Wa{constructor(e,a){this.type=ce,this.needle=e,this.haystack=a}static parse(e,a){if(3!==e.length)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const p=a.parse(e[1],1,Ie),y=a.parse(e[2],2,Ie);return p&&y?Fe(p.type,[ce,X,$,U,Ie])?new Wa(p,y):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${dn(p.type)} instead`):null}evaluate(e){const a=this.needle.evaluate(e),p=this.haystack.evaluate(e);if(!p)return!1;if(!Ne(a,["boolean","string","number","null"]))throw new Ii(`Expected first argument to be of type boolean, string, number or null, but found ${dn(Pi(a))} instead.`);if(!Ne(p,["string","array"]))throw new Ii(`Expected second argument to be of type array or string, but found ${dn(Pi(p))} instead.`);return p.indexOf(a)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Lr{constructor(e,a,p){this.type=$,this.needle=e,this.haystack=a,this.fromIndex=p}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const p=a.parse(e[1],1,Ie),y=a.parse(e[2],2,Ie);if(!p||!y)return null;if(!Fe(p.type,[ce,X,$,U,Ie]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${dn(p.type)} instead`);if(4===e.length){const x=a.parse(e[3],3,$);return x?new Lr(p,y,x):null}return new Lr(p,y)}evaluate(e){const a=this.needle.evaluate(e),p=this.haystack.evaluate(e);if(!Ne(a,["boolean","string","number","null"]))throw new Ii(`Expected first argument to be of type boolean, string, number or null, but found ${dn(Pi(a))} instead.`);if(!Ne(p,["string","array"]))throw new Ii(`Expected second argument to be of type array or string, but found ${dn(Pi(p))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(e);return p.indexOf(a,y)}return p.indexOf(a)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Ys{constructor(e,a,p,y,x,D){this.inputType=e,this.type=a,this.input=p,this.cases=y,this.outputs=x,this.otherwise=D}static parse(e,a){if(e.length<5)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return a.error("Expected an even number of arguments.");let p,y;a.expectedType&&"value"!==a.expectedType.kind&&(y=a.expectedType);const x={},D=[];for(let J=2;J<e.length-1;J+=2){let re=e[J];const de=e[J+1];Array.isArray(re)||(re=[re]);const ve=a.concat(J);if(0===re.length)return ve.error("Expected at least one branch label.");for(const De of re){if("number"!=typeof De&&"string"!=typeof De)return ve.error("Branch labels must be numbers or strings.");if("number"==typeof De&&Math.abs(De)>Number.MAX_SAFE_INTEGER)return ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof De&&Math.floor(De)!==De)return ve.error("Numeric branch labels must be integer values.");if(p){if(ve.checkSubtype(p,Pi(De)))return null}else p=Pi(De);if(void 0!==x[String(De)])return ve.error("Branch labels must be unique.");x[String(De)]=D.length}const xe=a.parse(de,J,y);if(!xe)return null;y=y||xe.type,D.push(xe)}const O=a.parse(e[1],1,Ie);if(!O)return null;const L=a.parse(e[e.length-1],e.length-1,y);return L?"value"!==O.type.kind&&a.concat(1).checkSubtype(p,O.type)?null:new Ys(p,y,O,x,D,L):null}evaluate(e){const a=this.input.evaluate(e);return(Pi(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class ps{constructor(e,a,p){this.type=e,this.branches=a,this.otherwise=p}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return a.error("Expected an odd number of arguments.");let p;a.expectedType&&"value"!==a.expectedType.kind&&(p=a.expectedType);const y=[];for(let D=1;D<e.length-1;D+=2){const O=a.parse(e[D],D,ce);if(!O)return null;const L=a.parse(e[D+1],D+1,p);if(!L)return null;y.push([O,L]),p=p||L.type}const x=a.parse(e[e.length-1],e.length-1,p);if(!x)return null;if(!p)throw new Error("Can't infer output type");return new ps(p,y,x)}evaluate(e){for(const[a,p]of this.branches)if(a.evaluate(e))return p.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[a,p]of this.branches)e(a),e(p);e(this.otherwise)}outputDefined(){return this.branches.every(([e,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Ao{constructor(e,a,p,y){this.type=e,this.input=a,this.beginIndex=p,this.endIndex=y}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const p=a.parse(e[1],1,Ie),y=a.parse(e[2],2,$);if(!p||!y)return null;if(!Fe(p.type,[nn(Ie),X,Ie]))return a.error(`Expected first argument to be of type array or string, but found ${dn(p.type)} instead`);if(4===e.length){const x=a.parse(e[3],3,$);return x?new Ao(p.type,p,y,x):null}return new Ao(p.type,p,y)}evaluate(e){const a=this.input.evaluate(e),p=this.beginIndex.evaluate(e);if(!Ne(a,["string","array"]))throw new Ii(`Expected first argument to be of type array or string, but found ${dn(Pi(a))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(e);return a.slice(p,y)}return a.slice(p)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function ns(o,e){return"=="===o||"!="===o?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function tc(o,e,a,p){return 0===p.compare(e,a)}function Wi(o,e,a){const p="=="!==o&&"!="!==o;return class dC{constructor(x,D,O){this.type=ce,this.lhs=x,this.rhs=D,this.collator=O,this.hasUntypedArgument="value"===x.type.kind||"value"===D.type.kind}static parse(x,D){if(3!==x.length&&4!==x.length)return D.error("Expected two or three arguments.");const O=x[0];let L=D.parse(x[1],1,Ie);if(!L)return null;if(!ns(O,L.type))return D.concat(1).error(`"${O}" comparisons are not supported for type '${dn(L.type)}'.`);let J=D.parse(x[2],2,Ie);if(!J)return null;if(!ns(O,J.type))return D.concat(2).error(`"${O}" comparisons are not supported for type '${dn(J.type)}'.`);if(L.type.kind!==J.type.kind&&"value"!==L.type.kind&&"value"!==J.type.kind)return D.error(`Cannot compare types '${dn(L.type)}' and '${dn(J.type)}'.`);p&&("value"===L.type.kind&&"value"!==J.type.kind?L=new lr(J.type,[L]):"value"!==L.type.kind&&"value"===J.type.kind&&(J=new lr(L.type,[J])));let re=null;if(4===x.length){if("string"!==L.type.kind&&"string"!==J.type.kind&&"value"!==L.type.kind&&"value"!==J.type.kind)return D.error("Cannot use collator to compare non-string types.");if(re=D.parse(x[3],3,Qe),!re)return null}return new dC(L,J,re)}evaluate(x){const D=this.lhs.evaluate(x),O=this.rhs.evaluate(x);if(p&&this.hasUntypedArgument){const L=Pi(D),J=Pi(O);if(L.kind!==J.kind||"string"!==L.kind&&"number"!==L.kind)throw new Ii(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${L.kind}, ${J.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const L=Pi(D),J=Pi(O);if("string"!==L.kind||"string"!==J.kind)return e(x,D,O)}return this.collator?a(x,D,O,this.collator.evaluate(x)):e(x,D,O)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const qa=Wi("==",function(o,e,a){return e===a},tc),Ka=Wi("!=",function(o,e,a){return e!==a},function(o,e,a,p){return!tc(0,e,a,p)}),Oa=Wi("<",function(o,e,a){return e<a},function(o,e,a,p){return p.compare(e,a)<0}),ur=Wi(">",function(o,e,a){return e>a},function(o,e,a,p){return p.compare(e,a)>0}),Ya=Wi("<=",function(o,e,a){return e<=a},function(o,e,a,p){return p.compare(e,a)<=0}),fs=Wi(">=",function(o,e,a){return e>=a},function(o,e,a,p){return p.compare(e,a)>=0});class Po{constructor(e,a,p,y,x){this.type=X,this.number=e,this.locale=a,this.currency=p,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(e,a){if(3!==e.length)return a.error("Expected two arguments.");const p=a.parse(e[1],1,$);if(!p)return null;const y=e[2];if("object"!=typeof y||Array.isArray(y))return a.error("NumberFormat options argument must be an object.");let x=null;if(y.locale&&(x=a.parse(y.locale,1,X),!x))return null;let D=null;if(y.currency&&(D=a.parse(y.currency,1,X),!D))return null;let O=null;if(y["min-fraction-digits"]&&(O=a.parse(y["min-fraction-digits"],1,$),!O))return null;let L=null;return y["max-fraction-digits"]&&(L=a.parse(y["max-fraction-digits"],1,$),!L)?null:new Po(p,x,D,O,L)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Bi{constructor(e){this.type=Ft,this.sections=e}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const p=e[1];if(!Array.isArray(p)&&"object"==typeof p)return a.error("First argument must be an image or text section.");const y=[];let x=!1;for(let D=1;D<=e.length-1;++D){const O=e[D];if(x&&"object"==typeof O&&!Array.isArray(O)){x=!1;let L=null;if(O["font-scale"]&&(L=a.parse(O["font-scale"],1,$),!L))return null;let J=null;if(O["text-font"]&&(J=a.parse(O["text-font"],1,nn(X)),!J))return null;let re=null;if(O["text-color"]&&(re=a.parse(O["text-color"],1,Ce),!re))return null;const de=y[y.length-1];de.scale=L,de.font=J,de.textColor=re}else{const L=a.parse(e[D],1,Ie);if(!L)return null;const J=L.type.kind;if("string"!==J&&"value"!==J&&"null"!==J&&"resolvedImage"!==J)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,y.push({content:L,scale:null,font:null,textColor:null})}}return new Bi(y)}evaluate(e){return new Er(this.sections.map(a=>{const p=a.content.evaluate(e);return Pi(p)===Pt?new Vo("",p,null,null,null):new Vo(Gr(p),null,a.scale?a.scale.evaluate(e):null,a.font?a.font.evaluate(e).join(","):null,a.textColor?a.textColor.evaluate(e):null)}))}eachChild(e){for(const a of this.sections)e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor)}outputDefined(){return!1}}class gl{constructor(e){this.type=Pt,this.input=e}static parse(e,a){if(2!==e.length)return a.error("Expected two arguments.");const p=a.parse(e[1],1,X);return p?new gl(p):a.error("No image name provided.")}evaluate(e){const a=this.input.evaluate(e),p=Nr.fromString(a);return p&&e.availableImages&&(p.available=e.availableImages.indexOf(a)>-1),p}eachChild(e){e(this.input)}outputDefined(){return!1}}class Oo{constructor(e){this.type=$,this.input=e}static parse(e,a){if(2!==e.length)return a.error(`Expected 1 argument, but found ${e.length-1} instead.`);const p=a.parse(e[1],1);return p?"array"!==p.type.kind&&"string"!==p.type.kind&&"value"!==p.type.kind?a.error(`Expected argument of type string or array, but found ${dn(p.type)} instead.`):new Oo(p):null}evaluate(e){const a=this.input.evaluate(e);if("string"==typeof a||Array.isArray(a))return a.length;throw new Ii(`Expected value to be of type string or array, but found ${dn(Pi(a))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Ss={"==":qa,"!=":Ka,">":ur,"<":Oa,">=":fs,"<=":Ya,array:lr,at:hs,boolean:lr,case:ps,coalesce:qs,collator:Jr,format:Bi,image:gl,in:Wa,"index-of":Lr,interpolate:Vr,"interpolate-hcl":Vr,"interpolate-lab":Vr,length:Oo,let:Ks,literal:Rr,match:Ys,number:lr,"number-format":Po,object:lr,slice:Ao,step:ts,string:lr,"to-boolean":br,"to-color":br,"to-number":br,"to-string":br,var:vo,within:Zs};function vr(o,[e,a,p,y]){e=e.evaluate(o),a=a.evaluate(o),p=p.evaluate(o);const x=y?y.evaluate(o):1,D=cs(e,a,p,x);if(D)throw new Ii(D);return new Ti(e/255,a/255,p/255,x,!1)}function Ts(o,e){return o in e}function Uo(o,e){const a=e[o];return void 0===a?null:a}function oi(o){return{type:o}}function _l(o){return{result:"success",value:o}}function ma(o){return{result:"error",value:o}}function dr(o){return"data-driven"===o["property-type"]||"cross-faded-data-driven"===o["property-type"]}function Is(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function yl(o){return!!o.expression&&o.expression.interpolated}function Ei(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":null===o?"null":typeof o}function ms(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}function xr(o){return o}function Wt(o,e){const a="color"===e.type,p=o.stops&&"object"==typeof o.stops[0][0],y=p||!(p||void 0!==o.property),x=o.type||(yl(e)?"exponential":"interval");if(a||"padding"===e.type){const re=a?Ti.parse:mi.parse;(o=ft({},o)).stops&&(o.stops=o.stops.map(de=>[de[0],re(de[1])])),o.default=re(o.default?o.default:e.default)}if(o.colorSpace&&"rgb"!==(D=o.colorSpace)&&"hcl"!==D&&"lab"!==D)throw new Error(`Unknown color space: "${o.colorSpace}"`);var D;let O,L,J;if("exponential"===x)O=gi;else if("interval"===x)O=er;else if("categorical"===x){O=Xs,L=Object.create(null);for(const re of o.stops)L[re[0]]=re[1];J=typeof o.stops[0][0]}else{if("identity"!==x)throw new Error(`Unknown function type "${x}"`);O=ne}if(p){const re={},de=[];for(let De=0;De<o.stops.length;De++){const He=o.stops[De],Ve=He[0].zoom;void 0===re[Ve]&&(re[Ve]={zoom:Ve,type:o.type,property:o.property,default:o.default,stops:[]},de.push(Ve)),re[Ve].stops.push([He[0].value,He[1]])}const ve=[];for(const De of de)ve.push([re[De].zoom,Wt(re[De],e)]);const xe={name:"linear"};return{kind:"composite",interpolationType:xe,interpolationFactor:Vr.interpolationFactor.bind(void 0,xe),zoomStops:ve.map(De=>De[0]),evaluate:({zoom:De},He)=>gi({stops:ve,base:o.base},e,De).evaluate(De,He)}}if(y){const re="exponential"===x?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:re,interpolationFactor:Vr.interpolationFactor.bind(void 0,re),zoomStops:o.stops.map(de=>de[0]),evaluate:({zoom:de})=>O(o,e,de,L,J)}}return{kind:"source",evaluate(re,de){const ve=de&&de.properties?de.properties[o.property]:void 0;return void 0===ve?yn(o.default,e.default):O(o,e,ve,L,J)}}}function yn(o,e,a){return void 0!==o?o:void 0!==e?e:void 0!==a?a:void 0}function Xs(o,e,a,p,y){return yn(typeof a===y?p[a]:void 0,o.default,e.default)}function er(o,e,a){if("number"!==Ei(a))return yn(o.default,e.default);const p=o.stops.length;if(1===p||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const y=uo(o.stops.map(x=>x[0]),a);return o.stops[y][1]}function gi(o,e,a){const p=void 0!==o.base?o.base:1;if("number"!==Ei(a))return yn(o.default,e.default);const y=o.stops.length;if(1===y||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[y-1][0])return o.stops[y-1][1];const x=uo(o.stops.map(re=>re[0]),a),D=function(re,de,ve,xe){const De=xe-ve,He=re-ve;return 0===De?0:1===de?He/De:(Math.pow(de,He)-1)/(Math.pow(de,De)-1)}(a,p,o.stops[x][0],o.stops[x+1][0]),O=o.stops[x][1],L=o.stops[x+1][1],J=Dr[e.type]||xr;return"function"==typeof O.evaluate?{evaluate(...re){const de=O.evaluate.apply(void 0,re),ve=L.evaluate.apply(void 0,re);if(void 0!==de&&void 0!==ve)return J(de,ve,D,o.colorSpace)}}:J(O,L,D,o.colorSpace)}function ne(o,e,a){switch(e.type){case"color":a=Ti.parse(a);break;case"formatted":a=Er.fromString(a.toString());break;case"resolvedImage":a=Nr.fromString(a.toString());break;case"padding":a=mi.parse(a);break;default:Ei(a)===e.type||"enum"===e.type&&e.values[a]||(a=void 0)}return yn(a,o.default,e.default)}zr.register(Ss,{error:[{kind:"error"},[X],(o,[e])=>{throw new Ii(e.evaluate(o))}],typeof:[X,[Ie],(o,[e])=>dn(Pi(e.evaluate(o)))],"to-rgba":[nn($,4),[Ce],(o,[e])=>{const[a,p,y,x]=e.evaluate(o).rgb;return[255*a,255*p,255*y,x]}],rgb:[Ce,[$,$,$],vr],rgba:[Ce,[$,$,$,$],vr],has:{type:ce,overloads:[[[X],(o,[e])=>Ts(e.evaluate(o),o.properties())],[[X,ke],(o,[e,a])=>Ts(e.evaluate(o),a.evaluate(o))]]},get:{type:Ie,overloads:[[[X],(o,[e])=>Uo(e.evaluate(o),o.properties())],[[X,ke],(o,[e,a])=>Uo(e.evaluate(o),a.evaluate(o))]]},"feature-state":[Ie,[X],(o,[e])=>Uo(e.evaluate(o),o.featureState||{})],properties:[ke,[],o=>o.properties()],"geometry-type":[X,[],o=>o.geometryType()],id:[Ie,[],o=>o.id()],zoom:[$,[],o=>o.globals.zoom],"heatmap-density":[$,[],o=>o.globals.heatmapDensity||0],"line-progress":[$,[],o=>o.globals.lineProgress||0],accumulated:[Ie,[],o=>void 0===o.globals.accumulated?null:o.globals.accumulated],"+":[$,oi($),(o,e)=>{let a=0;for(const p of e)a+=p.evaluate(o);return a}],"*":[$,oi($),(o,e)=>{let a=1;for(const p of e)a*=p.evaluate(o);return a}],"-":{type:$,overloads:[[[$,$],(o,[e,a])=>e.evaluate(o)-a.evaluate(o)],[[$],(o,[e])=>-e.evaluate(o)]]},"/":[$,[$,$],(o,[e,a])=>e.evaluate(o)/a.evaluate(o)],"%":[$,[$,$],(o,[e,a])=>e.evaluate(o)%a.evaluate(o)],ln2:[$,[],()=>Math.LN2],pi:[$,[],()=>Math.PI],e:[$,[],()=>Math.E],"^":[$,[$,$],(o,[e,a])=>Math.pow(e.evaluate(o),a.evaluate(o))],sqrt:[$,[$],(o,[e])=>Math.sqrt(e.evaluate(o))],log10:[$,[$],(o,[e])=>Math.log(e.evaluate(o))/Math.LN10],ln:[$,[$],(o,[e])=>Math.log(e.evaluate(o))],log2:[$,[$],(o,[e])=>Math.log(e.evaluate(o))/Math.LN2],sin:[$,[$],(o,[e])=>Math.sin(e.evaluate(o))],cos:[$,[$],(o,[e])=>Math.cos(e.evaluate(o))],tan:[$,[$],(o,[e])=>Math.tan(e.evaluate(o))],asin:[$,[$],(o,[e])=>Math.asin(e.evaluate(o))],acos:[$,[$],(o,[e])=>Math.acos(e.evaluate(o))],atan:[$,[$],(o,[e])=>Math.atan(e.evaluate(o))],min:[$,oi($),(o,e)=>Math.min(...e.map(a=>a.evaluate(o)))],max:[$,oi($),(o,e)=>Math.max(...e.map(a=>a.evaluate(o)))],abs:[$,[$],(o,[e])=>Math.abs(e.evaluate(o))],round:[$,[$],(o,[e])=>{const a=e.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[$,[$],(o,[e])=>Math.floor(e.evaluate(o))],ceil:[$,[$],(o,[e])=>Math.ceil(e.evaluate(o))],"filter-==":[ce,[X,Ie],(o,[e,a])=>o.properties()[e.value]===a.value],"filter-id-==":[ce,[Ie],(o,[e])=>o.id()===e.value],"filter-type-==":[ce,[X],(o,[e])=>o.geometryType()===e.value],"filter-<":[ce,[X,Ie],(o,[e,a])=>{const p=o.properties()[e.value],y=a.value;return typeof p==typeof y&&p<y}],"filter-id-<":[ce,[Ie],(o,[e])=>{const a=o.id(),p=e.value;return typeof a==typeof p&&a<p}],"filter->":[ce,[X,Ie],(o,[e,a])=>{const p=o.properties()[e.value],y=a.value;return typeof p==typeof y&&p>y}],"filter-id->":[ce,[Ie],(o,[e])=>{const a=o.id(),p=e.value;return typeof a==typeof p&&a>p}],"filter-<=":[ce,[X,Ie],(o,[e,a])=>{const p=o.properties()[e.value],y=a.value;return typeof p==typeof y&&p<=y}],"filter-id-<=":[ce,[Ie],(o,[e])=>{const a=o.id(),p=e.value;return typeof a==typeof p&&a<=p}],"filter->=":[ce,[X,Ie],(o,[e,a])=>{const p=o.properties()[e.value],y=a.value;return typeof p==typeof y&&p>=y}],"filter-id->=":[ce,[Ie],(o,[e])=>{const a=o.id(),p=e.value;return typeof a==typeof p&&a>=p}],"filter-has":[ce,[Ie],(o,[e])=>e.value in o.properties()],"filter-has-id":[ce,[],o=>null!==o.id()&&void 0!==o.id()],"filter-type-in":[ce,[nn(X)],(o,[e])=>e.value.indexOf(o.geometryType())>=0],"filter-id-in":[ce,[nn(Ie)],(o,[e])=>e.value.indexOf(o.id())>=0],"filter-in-small":[ce,[X,nn(Ie)],(o,[e,a])=>a.value.indexOf(o.properties()[e.value])>=0],"filter-in-large":[ce,[X,nn(Ie)],(o,[e,a])=>function(p,y,x,D){for(;x<=D;){const O=x+D>>1;if(y[O]===p)return!0;y[O]>p?D=O-1:x=O+1}return!1}(o.properties()[e.value],a.value,0,a.value.length-1)],all:{type:ce,overloads:[[[ce,ce],(o,[e,a])=>e.evaluate(o)&&a.evaluate(o)],[oi(ce),(o,e)=>{for(const a of e)if(!a.evaluate(o))return!1;return!0}]]},any:{type:ce,overloads:[[[ce,ce],(o,[e,a])=>e.evaluate(o)||a.evaluate(o)],[oi(ce),(o,e)=>{for(const a of e)if(a.evaluate(o))return!0;return!1}]]},"!":[ce,[ce],(o,[e])=>!e.evaluate(o)],"is-supported-script":[ce,[X],(o,[e])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(e.evaluate(o))}],upcase:[X,[X],(o,[e])=>e.evaluate(o).toUpperCase()],downcase:[X,[X],(o,[e])=>e.evaluate(o).toLowerCase()],concat:[X,oi(Ie),(o,e)=>e.map(a=>Gr(a.evaluate(o))).join("")],"resolved-locale":[X,[Qe],(o,[e])=>e.evaluate(o).resolvedLocale()]});class Q{constructor(e,a){var p;this.expression=e,this._warningHistory={},this._evaluator=new $s,this._defaultValue=a?"color"===(p=a).type&&ms(p.default)?new Ti(0,0,0,0):"color"===p.type?Ti.parse(p.default)||null:"padding"===p.type?mi.parse(p.default)||null:void 0===p.default?null:p.default:null,this._enumValues=a&&"enum"===a.type?a.values:null}evaluateWithoutErrorHandling(e,a,p,y,x,D){return this._evaluator.globals=e,this._evaluator.feature=a,this._evaluator.featureState=p,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=D,this.expression.evaluate(this._evaluator)}evaluate(e,a,p,y,x,D){this._evaluator.globals=e,this._evaluator.feature=a||null,this._evaluator.featureState=p||null,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=D||null;try{const O=this.expression.evaluate(this._evaluator);if(null==O||"number"==typeof O&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new Ii(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}}}function q(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in Ss}function be(o,e){const a=new us(Ss,Es,[],e?function(y){const x={color:Ce,string:X,number:$,enum:X,boolean:ce,formatted:Ft,padding:yt,resolvedImage:Pt};return"array"===y.type?nn(x[y.value]||Ie,y.length):x[y.type]}(e):void 0),p=a.parse(o,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return p?_l(new Q(p,e)):ma(a.errors)}class Bt{constructor(e,a){this.kind=e,this._styleExpression=a,this.isStateDependent="constant"!==e&&!Ds(a.expression)}evaluateWithoutErrorHandling(e,a,p,y,x,D){return this._styleExpression.evaluateWithoutErrorHandling(e,a,p,y,x,D)}evaluate(e,a,p,y,x,D){return this._styleExpression.evaluate(e,a,p,y,x,D)}}class Yn{constructor(e,a,p,y){this.kind=e,this.zoomStops=p,this._styleExpression=a,this.isStateDependent="camera"!==e&&!Ds(a.expression),this.interpolationType=y}evaluateWithoutErrorHandling(e,a,p,y,x,D){return this._styleExpression.evaluateWithoutErrorHandling(e,a,p,y,x,D)}evaluate(e,a,p,y,x,D){return this._styleExpression.evaluate(e,a,p,y,x,D)}interpolationFactor(e,a,p){return this.interpolationType?Vr.interpolationFactor(this.interpolationType,e,a,p):0}}function wr(o,e){const a=be(o,e);if("error"===a.result)return a;const p=a.value.expression,y=Ws(p);if(!y&&!dr(e))return ma([new ie("","data expressions not supported")]);const x=Ms(p,["zoom"]);if(!x&&!Is(e))return ma([new ie("","zoom expressions not supported")]);const D=Mr(p);return D||x?D instanceof ie?ma([D]):D instanceof Vr&&!yl(e)?ma([new ie("",'"interpolate" expressions cannot be used with this property')]):_l(D?new Yn(y?"camera":"composite",a.value,D.labels,D instanceof Vr?D.interpolation:void 0):new Bt(y?"constant":"source",a.value)):ma([new ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ho{constructor(e,a){this._parameters=e,this._specification=a,ft(this,Wt(this._parameters,this._specification))}static deserialize(e){return new ho(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Mr(o){let e=null;if(o instanceof Ks)e=Mr(o.result);else if(o instanceof qs){for(const a of o.args)if(e=Mr(a),e)break}else(o instanceof ts||o instanceof Vr)&&o.input instanceof zr&&"zoom"===o.input.name&&(e=o);return e instanceof ie||o.eachChild(a=>{const p=Mr(a);p instanceof ie?e=p:!e&&p?e=new ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&p&&e!==p&&(e=new ie("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function qi(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const e of o.slice(1))if(!qi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const jo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ka(o){if(null==o)return{filter:()=>!0,needGeometry:!1};qi(o)||(o=Rl(o));const e=be(o,jo);if("error"===e.result)throw new Error(e.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,p,y)=>e.value.evaluate(a,p,{},y),needGeometry:As(o)}}function Xa(o,e){return o<e?-1:o>e?1:0}function As(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(let e=1;e<o.length;e++)if(As(o[e]))return!0;return!1}function Rl(o){if(!o)return!0;const e=o[0];return o.length<=1?"any"!==e:"=="===e?Ll(o[1],o[2],"=="):"!="===e?ga(Ll(o[1],o[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Ll(o[1],o[2],e):"any"===e?(a=o.slice(1),["any"].concat(a.map(Rl))):"all"===e?["all"].concat(o.slice(1).map(Rl)):"none"===e?["all"].concat(o.slice(1).map(Rl).map(ga)):"in"===e?Sc(o[1],o.slice(2)):"!in"===e?ga(Sc(o[1],o.slice(2))):"has"===e?Tc(o[1]):"!has"===e?ga(Tc(o[1])):"within"!==e||o;var a}function Ll(o,e,a){switch(o){case"$type":return[`filter-type-${a}`,e];case"$id":return[`filter-id-${a}`,e];default:return[`filter-${a}`,o,e]}}function Sc(o,e){if(0===e.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(a=>typeof a!=typeof e[0])?["filter-in-large",o,["literal",e.sort(Xa)]]:["filter-in-small",o,["literal",e]]}}function Tc(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ga(o){return["!",o]}function Js(o){const e=typeof o;if("number"===e||"boolean"===e||"string"===e||null==o)return JSON.stringify(o);if(Array.isArray(o)){let y="[";for(const x of o)y+=`${Js(x)},`;return`${y}]`}const a=Object.keys(o).sort();let p="{";for(let y=0;y<a.length;y++)p+=`${JSON.stringify(a[y])}:${Js(o[a[y]])},`;return`${p}}`}function Ja(o){let e="";for(const a of ye)e+=`/${Js(o[a])}`;return e}function Qs(o){const e=o.value;return e?[new Lt(o.key,e,"constants have been deprecated as of v8")]:[]}function Cr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function gs(o){if(Array.isArray(o))return o.map(gs);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const e={};for(const a in o)e[a]=gs(o[a]);return e}return Cr(o)}function ko(o){const e=o.key,a=o.value,p=o.valueSpec||{},y=o.objectElementValidators||{},x=o.style,D=o.styleSpec,O=o.validateSpec;let L=[];const J=Ei(a);if("object"!==J)return[new Lt(e,a,`object expected, ${J} found`)];for(const re in a){const de=re.split(".")[0],ve=p[de]||p["*"];let xe;if(y[de])xe=y[de];else if(p[de])xe=O;else if(y["*"])xe=y["*"];else{if(!p["*"]){L.push(new Lt(e,a[re],`unknown property "${re}"`));continue}xe=O}L=L.concat(xe({key:(e&&`${e}.`)+re,value:a[re],valueSpec:ve,style:x,styleSpec:D,object:a,objectKey:re,validateSpec:O},a))}for(const re in p)y[re]||p[re].required&&void 0===p[re].default&&void 0===a[re]&&L.push(new Lt(e,a,`missing required property "${re}"`));return L}function vl(o){const e=o.value,a=o.valueSpec,p=o.style,y=o.styleSpec,x=o.key,D=o.arrayElementValidator||o.validateSpec;if("array"!==Ei(e))return[new Lt(x,e,`array expected, ${Ei(e)} found`)];if(a.length&&e.length!==a.length)return[new Lt(x,e,`array length ${a.length} expected, length ${e.length} found`)];if(a["min-length"]&&e.length<a["min-length"])return[new Lt(x,e,`array length at least ${a["min-length"]} expected, length ${e.length} found`)];let O={type:a.value,values:a.values};y.$version<7&&(O.function=a.function),"object"===Ei(a.value)&&(O=a.value);let L=[];for(let J=0;J<e.length;J++)L=L.concat(D({array:e,arrayIndex:J,value:e[J],valueSpec:O,validateSpec:o.validateSpec,style:p,styleSpec:y,key:`${x}[${J}]`}));return L}function Ra(o){const e=o.key,a=o.value,p=o.valueSpec;let y=Ei(a);return"number"===y&&a!=a&&(y="NaN"),"number"!==y?[new Lt(e,a,`number expected, ${y} found`)]:"minimum"in p&&a<p.minimum?[new Lt(e,a,`${a} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&a>p.maximum?[new Lt(e,a,`${a} is greater than the maximum value ${p.maximum}`)]:[]}function Sr(o){const e=o.valueSpec,a=Cr(o.value.type);let p,y,x,D={};const O="categorical"!==a&&void 0===o.value.property,L=!O,J="array"===Ei(o.value.stops)&&"array"===Ei(o.value.stops[0])&&"object"===Ei(o.value.stops[0][0]),re=ko({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(xe){if("identity"===a)return[new Lt(xe.key,xe.value,'identity function may not have a "stops" property')];let De=[];const He=xe.value;return De=De.concat(vl({key:xe.key,value:He,valueSpec:xe.valueSpec,validateSpec:xe.validateSpec,style:xe.style,styleSpec:xe.styleSpec,arrayElementValidator:de})),"array"===Ei(He)&&0===He.length&&De.push(new Lt(xe.key,He,"array must have at least one stop")),De},default:function(xe){return xe.validateSpec({key:xe.key,value:xe.value,valueSpec:e,validateSpec:xe.validateSpec,style:xe.style,styleSpec:xe.styleSpec})}}});return"identity"===a&&O&&re.push(new Lt(o.key,o.value,'missing required property "property"')),"identity"===a||o.value.stops||re.push(new Lt(o.key,o.value,'missing required property "stops"')),"exponential"===a&&o.valueSpec.expression&&!yl(o.valueSpec)&&re.push(new Lt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(L&&!dr(o.valueSpec)?re.push(new Lt(o.key,o.value,"property functions not supported")):O&&!Is(o.valueSpec)&&re.push(new Lt(o.key,o.value,"zoom functions not supported"))),"categorical"!==a&&!J||void 0!==o.value.property||re.push(new Lt(o.key,o.value,'"property" property is required')),re;function de(xe){let De=[];const He=xe.value,Ve=xe.key;if("array"!==Ei(He))return[new Lt(Ve,He,`array expected, ${Ei(He)} found`)];if(2!==He.length)return[new Lt(Ve,He,`array length 2 expected, length ${He.length} found`)];if(J){if("object"!==Ei(He[0]))return[new Lt(Ve,He,`object expected, ${Ei(He[0])} found`)];if(void 0===He[0].zoom)return[new Lt(Ve,He,"object stop key must have zoom")];if(void 0===He[0].value)return[new Lt(Ve,He,"object stop key must have value")];if(x&&x>Cr(He[0].zoom))return[new Lt(Ve,He[0].zoom,"stop zoom values must appear in ascending order")];Cr(He[0].zoom)!==x&&(x=Cr(He[0].zoom),y=void 0,D={}),De=De.concat(ko({key:`${Ve}[0]`,value:He[0],valueSpec:{zoom:{}},validateSpec:xe.validateSpec,style:xe.style,styleSpec:xe.styleSpec,objectElementValidators:{zoom:Ra,value:ve}}))}else De=De.concat(ve({key:`${Ve}[0]`,value:He[0],valueSpec:{},validateSpec:xe.validateSpec,style:xe.style,styleSpec:xe.styleSpec},He));return q(gs(He[1]))?De.concat([new Lt(`${Ve}[1]`,He[1],"expressions are not allowed in function stops.")]):De.concat(xe.validateSpec({key:`${Ve}[1]`,value:He[1],valueSpec:e,validateSpec:xe.validateSpec,style:xe.style,styleSpec:xe.styleSpec}))}function ve(xe,De){const He=Ei(xe.value),Ve=Cr(xe.value),st=null!==xe.value?xe.value:De;if(p){if(He!==p)return[new Lt(xe.key,st,`${He} stop domain type must match previous stop domain type ${p}`)]}else p=He;if("number"!==He&&"string"!==He&&"boolean"!==He)return[new Lt(xe.key,st,"stop domain value must be a number, string, or boolean")];if("number"!==He&&"categorical"!==a){let gt=`number expected, ${He} found`;return dr(e)&&void 0===a&&(gt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Lt(xe.key,st,gt)]}return"categorical"!==a||"number"!==He||isFinite(Ve)&&Math.floor(Ve)===Ve?"categorical"!==a&&"number"===He&&void 0!==y&&Ve<y?[new Lt(xe.key,st,"stop domain values must appear in ascending order")]:(y=Ve,"categorical"===a&&Ve in D?[new Lt(xe.key,st,"stop domain values must be unique")]:(D[Ve]=!0,[])):[new Lt(xe.key,st,`integer expected, found ${Ve}`)]}}function H(o){const e=("property"===o.expressionContext?wr:be)(gs(o.value),o.valueSpec);if("error"===e.result)return e.value.map(p=>new Lt(`${o.key}${p.key}`,o.value,p.message));const a=e.value.expression||e.value._styleExpression.expression;if("property"===o.expressionContext&&"text-font"===o.propertyKey&&!a.outputDefined())return[new Lt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===o.expressionContext&&"layout"===o.propertyType&&!Ds(a))return[new Lt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===o.expressionContext&&!Ds(a))return[new Lt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&0===o.expressionContext.indexOf("cluster")){if(!Ms(a,["zoom","feature-state"]))return[new Lt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===o.expressionContext&&!Ws(a))return[new Lt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ue(o){const e=o.key,a=o.value,p=o.valueSpec,y=[];return Array.isArray(p.values)?-1===p.values.indexOf(Cr(a))&&y.push(new Lt(e,a,`expected one of [${p.values.join(", ")}], ${JSON.stringify(a)} found`)):-1===Object.keys(p.values).indexOf(Cr(a))&&y.push(new Lt(e,a,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(a)} found`)),y}function K(o){return qi(gs(o.value))?H(ft({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):we(o)}function we(o){const e=o.value,a=o.key;if("array"!==Ei(e))return[new Lt(a,e,`array expected, ${Ei(e)} found`)];const p=o.styleSpec;let y,x=[];if(e.length<1)return[new Lt(a,e,"filter array must have at least 1 element")];switch(x=x.concat(ue({key:`${a}[0]`,value:e[0],valueSpec:p.filter_operator,style:o.style,styleSpec:o.styleSpec})),Cr(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Cr(e[1])&&x.push(new Lt(a,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&x.push(new Lt(a,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(y=Ei(e[1]),"string"!==y&&x.push(new Lt(`${a}[1]`,e[1],`string expected, ${y} found`)));for(let D=2;D<e.length;D++)y=Ei(e[D]),"$type"===Cr(e[1])?x=x.concat(ue({key:`${a}[${D}]`,value:e[D],valueSpec:p.geometry_type,style:o.style,styleSpec:o.styleSpec})):"string"!==y&&"number"!==y&&"boolean"!==y&&x.push(new Lt(`${a}[${D}]`,e[D],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let D=1;D<e.length;D++)x=x.concat(we({key:`${a}[${D}]`,value:e[D],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":y=Ei(e[1]),2!==e.length?x.push(new Lt(a,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==y&&x.push(new Lt(`${a}[1]`,e[1],`string expected, ${y} found`));break;case"within":y=Ei(e[1]),2!==e.length?x.push(new Lt(a,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==y&&x.push(new Lt(`${a}[1]`,e[1],`object expected, ${y} found`))}return x}function Ye(o,e){const a=o.key,p=o.validateSpec,y=o.style,x=o.styleSpec,D=o.value,O=o.objectKey,L=x[`${e}_${o.layerType}`];if(!L)return[];const J=O.match(/^(.*)-transition$/);if("paint"===e&&J&&L[J[1]]&&L[J[1]].transition)return p({key:a,value:D,valueSpec:x.transition,style:y,styleSpec:x});const re=o.valueSpec||L[O];if(!re)return[new Lt(a,D,`unknown property "${O}"`)];let de;if("string"===Ei(D)&&dr(re)&&!re.tokens&&(de=/^{([^}]+)}$/.exec(D)))return[new Lt(a,D,`"${O}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(de[1])} }\`.`)];const ve=[];return"symbol"===o.layerType&&("text-field"===O&&y&&!y.glyphs&&ve.push(new Lt(a,D,'use of "text-field" requires a style "glyphs" property')),"text-font"===O&&ms(gs(D))&&"identity"===Cr(D.type)&&ve.push(new Lt(a,D,'"text-font" does not support identity functions'))),ve.concat(p({key:o.key,value:D,valueSpec:re,style:y,styleSpec:x,expressionContext:"property",propertyType:e,propertyKey:O}))}function Ct(o){return Ye(o,"paint")}function zt(o){return Ye(o,"layout")}function kn(o){let e=[];const a=o.value,p=o.key,y=o.style,x=o.styleSpec;a.type||a.ref||e.push(new Lt(p,a,'either "type" or "ref" is required'));let D=Cr(a.type);const O=Cr(a.ref);if(a.id){const L=Cr(a.id);for(let J=0;J<o.arrayIndex;J++){const re=y.layers[J];Cr(re.id)===L&&e.push(new Lt(p,a.id,`duplicate layer id "${a.id}", previously used at line ${re.id.__line__}`))}}if("ref"in a){let L;["type","source","source-layer","filter","layout"].forEach(J=>{J in a&&e.push(new Lt(p,a[J],`"${J}" is prohibited for ref layers`))}),y.layers.forEach(J=>{Cr(J.id)===O&&(L=J)}),L?L.ref?e.push(new Lt(p,a.ref,"ref cannot reference another ref layer")):D=Cr(L.type):e.push(new Lt(p,a.ref,`ref layer "${O}" not found`))}else if("background"!==D)if(a.source){const L=y.sources&&y.sources[a.source],J=L&&Cr(L.type);L?"vector"===J&&"raster"===D?e.push(new Lt(p,a.source,`layer "${a.id}" requires a raster source`)):"raster"===J&&"raster"!==D?e.push(new Lt(p,a.source,`layer "${a.id}" requires a vector source`)):"vector"!==J||a["source-layer"]?"raster-dem"===J&&"hillshade"!==D?e.push(new Lt(p,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==D||!a.paint||!a.paint["line-gradient"]||"geojson"===J&&L.lineMetrics||e.push(new Lt(p,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Lt(p,a,`layer "${a.id}" must specify a "source-layer"`)):e.push(new Lt(p,a.source,`source "${a.source}" not found`))}else e.push(new Lt(p,a,'missing required property "source"'));return e=e.concat(ko({key:p,value:a,valueSpec:x.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${p}.type`,value:a.type,valueSpec:x.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:K,layout:L=>ko({layer:a,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":J=>zt(ft({layerType:D},J))}}),paint:L=>ko({layer:a,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":J=>Ct(ft({layerType:D},J))}})}})),e}function Ni(o){const e=o.value,a=o.key,p=Ei(e);return"string"!==p?[new Lt(a,e,`string expected, ${p} found`)]:[]}const ni={promoteId:function({key:o,value:e}){if("string"===Ei(e))return Ni({key:o,value:e});{const a=[];for(const p in e)a.push(...Ni({key:`${o}.${p}`,value:e[p]}));return a}}};function vi(o){const e=o.value,a=o.key,p=o.styleSpec,y=o.style,x=o.validateSpec;if(!e.type)return[new Lt(a,e,'"type" is required')];const D=Cr(e.type);let O;switch(D){case"vector":case"raster":case"raster-dem":return O=ko({key:a,value:e,valueSpec:p[`source_${D.replace("-","_")}`],style:o.style,styleSpec:p,objectElementValidators:ni,validateSpec:x}),O;case"geojson":if(O=ko({key:a,value:e,valueSpec:p.source_geojson,style:y,styleSpec:p,validateSpec:x,objectElementValidators:ni}),e.cluster)for(const L in e.clusterProperties){const[J,re]=e.clusterProperties[L],de="string"==typeof J?[J,["accumulated"],["get",L]]:J;O.push(...H({key:`${a}.${L}.map`,value:re,validateSpec:x,expressionContext:"cluster-map"})),O.push(...H({key:`${a}.${L}.reduce`,value:de,validateSpec:x,expressionContext:"cluster-reduce"}))}return O;case"video":return ko({key:a,value:e,valueSpec:p.source_video,style:y,validateSpec:x,styleSpec:p});case"image":return ko({key:a,value:e,valueSpec:p.source_image,style:y,validateSpec:x,styleSpec:p});case"canvas":return[new Lt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ue({key:`${a}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:x,styleSpec:p})}}function $n(o){const e=o.value,a=o.styleSpec,p=a.light,y=o.style;let x=[];const D=Ei(e);if(void 0===e)return x;if("object"!==D)return x=x.concat([new Lt("light",e,`object expected, ${D} found`)]),x;for(const O in e){const L=O.match(/^(.*)-transition$/);x=x.concat(L&&p[L[1]]&&p[L[1]].transition?o.validateSpec({key:O,value:e[O],valueSpec:a.transition,validateSpec:o.validateSpec,style:y,styleSpec:a}):p[O]?o.validateSpec({key:O,value:e[O],valueSpec:p[O],validateSpec:o.validateSpec,style:y,styleSpec:a}):[new Lt(O,e[O],`unknown property "${O}"`)])}return x}function tr(o){const e=o.value,a=o.styleSpec,p=a.terrain,y=o.style;let x=[];const D=Ei(e);if(void 0===e)return x;if("object"!==D)return x=x.concat([new Lt("terrain",e,`object expected, ${D} found`)]),x;for(const O in e)x=x.concat(p[O]?o.validateSpec({key:O,value:e[O],valueSpec:p[O],validateSpec:o.validateSpec,style:y,styleSpec:a}):[new Lt(O,e[O],`unknown property "${O}"`)]);return x}function Di(o){let e=[];const a=o.value,p=o.key;if(Array.isArray(a)){const y=[],x=[];for(const D in a)a[D].id&&y.includes(a[D].id)&&e.push(new Lt(p,a,`all the sprites' ids must be unique, but ${a[D].id} is duplicated`)),y.push(a[D].id),a[D].url&&x.includes(a[D].url)&&e.push(new Lt(p,a,`all the sprites' URLs must be unique, but ${a[D].url} is duplicated`)),x.push(a[D].url),e=e.concat(ko({key:`${p}[${D}]`,value:a[D],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return e}return Ni({key:p,value:a})}const bi={"*":()=>[],array:vl,boolean:function(o){const e=o.value,a=o.key,p=Ei(e);return"boolean"!==p?[new Lt(a,e,`boolean expected, ${p} found`)]:[]},number:Ra,color:function(o){const e=o.key,a=o.value,p=Ei(a);return"string"!==p?[new Lt(e,a,`color expected, ${p} found`)]:Ti.parse(String(a))?[]:[new Lt(e,a,`color expected, "${a}" found`)]},constants:Qs,enum:ue,filter:K,function:Sr,layer:kn,object:ko,source:vi,light:$n,terrain:tr,string:Ni,formatted:function(o){return 0===Ni(o).length?[]:H(o)},resolvedImage:function(o){return 0===Ni(o).length?[]:H(o)},padding:function(o){const e=o.key,a=o.value;if("array"===Ei(a)){if(a.length<1||a.length>4)return[new Lt(e,a,`padding requires 1 to 4 values; ${a.length} values found`)];const p={type:"number"};let y=[];for(let x=0;x<a.length;x++)y=y.concat(o.validateSpec({key:`${e}[${x}]`,value:a[x],validateSpec:o.validateSpec,valueSpec:p}));return y}return Ra({key:e,value:a,valueSpec:{}})},sprite:Di};function Qr(o){const e=o.value,a=o.valueSpec,p=o.styleSpec;return o.validateSpec=Qr,a.expression&&ms(Cr(e))?Sr(o):a.expression&&q(gs(e))?H(o):a.type&&bi[a.type]?bi[a.type](o):ko(ft({},o,{valueSpec:a.type?p[a.type]:a}))}function Wr(o){const e=o.value,a=o.key,p=Ni(o);return p.length||(-1===e.indexOf("{fontstack}")&&p.push(new Lt(a,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&p.push(new Lt(a,e,'"glyphs" url must include a "{range}" token'))),p}function Ki(o,e=me){let a=[];return a=a.concat(Qr({key:"",value:o,valueSpec:e.$root,styleSpec:e,style:o,validateSpec:Qr,objectElementValidators:{glyphs:Wr,"*":()=>[]}})),o.constants&&(a=a.concat(Qs({key:"constants",value:o.constants,style:o,styleSpec:e,validateSpec:Qr}))),Ho(a)}function Tr(o){return function(e){return o({...e,validateSpec:Qr})}}function Ho(o){return[].concat(o).sort((e,a)=>e.line-a.line)}function Ir(o){return function(...e){return Ho(o.apply(this,e))}}Ki.source=Ir(Tr(vi)),Ki.sprite=Ir(Tr(Di)),Ki.glyphs=Ir(Tr(Wr)),Ki.light=Ir(Tr($n)),Ki.terrain=Ir(Tr(tr)),Ki.layer=Ir(Tr(kn)),Ki.filter=Ir(Tr(K)),Ki.paintProperty=Ir(Tr(Ct)),Ki.layoutProperty=Ir(Tr(zt));const $o=Ki,Ar=$o.light,La=$o.paintProperty,bl=$o.layoutProperty;function Ic(o,e){let a=!1;if(e&&e.length)for(const p of e)o.fire(new Kt(new Error(p.message))),a=!0;return a}class Qa{constructor(e,a,p){const y=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const D=new Int32Array(this.arrayBuffer);e=D[0],this.d=(a=D[1])+2*(p=D[2]);for(let L=0;L<this.d*this.d;L++){const J=D[3+L],re=D[3+L+1];y.push(J===re?null:D.subarray(J,re))}const O=D[3+y.length+1];this.keys=D.subarray(D[3+y.length],O),this.bboxes=D.subarray(O),this.insert=this._insertReadonly}else{this.d=a+2*p;for(let D=0;D<this.d*this.d;D++)y.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=e,this.padding=p,this.scale=a/e,this.uid=0;const x=p/a*e;this.min=-x,this.max=e+x}insert(e,a,p,y,x){this._forEachCell(a,p,y,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(a),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,a,p,y,x,D){this.cells[x].push(D)}query(e,a,p,y,x){const D=this.min,O=this.max;if(e<=D&&a<=D&&O<=p&&O<=y&&!x)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(e,a,p,y,this._queryCell,L,{},x),L}}_queryCell(e,a,p,y,x,D,O,L){const J=this.cells[x];if(null!==J){const re=this.keys,de=this.bboxes;for(let ve=0;ve<J.length;ve++){const xe=J[ve];if(void 0===O[xe]){const De=4*xe;(L?L(de[De+0],de[De+1],de[De+2],de[De+3]):e<=de[De+2]&&a<=de[De+3]&&p>=de[De+0]&&y>=de[De+1])?(O[xe]=!0,D.push(re[xe])):O[xe]=!1}}}}_forEachCell(e,a,p,y,x,D,O,L){const J=this._convertToCellCoord(e),re=this._convertToCellCoord(a),de=this._convertToCellCoord(p),ve=this._convertToCellCoord(y);for(let xe=J;xe<=de;xe++)for(let De=re;De<=ve;De++){const He=this.d*De+xe;if((!L||L(this._convertFromCellCoord(xe),this._convertFromCellCoord(De),this._convertFromCellCoord(xe+1),this._convertFromCellCoord(De+1)))&&x.call(this,e,a,p,y,He,D,O,L))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,a=3+this.cells.length+1+1;let p=0;for(let D=0;D<this.cells.length;D++)p+=this.cells[D].length;const y=new Int32Array(a+p+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let x=a;for(let D=0;D<e.length;D++){const O=e[D];y[3+D]=x,y.set(O,x),x+=O.length}return y[3+e.length]=x,y.set(this.keys,x),x+=this.keys.length,y[3+e.length+1]=x,y.set(this.bboxes,x),x+=this.bboxes.length,y.buffer}static serialize(e,a){const p=e.toArrayBuffer();return a&&a.push(p),{buffer:p}}static deserialize(e){return new Qa(e.buffer)}}const _a={};function Tn(o,e,a={}){if(_a[o])throw new Error(`${o} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:o,writeable:!1}),_a[o]={klass:e,omit:a.omit||[],shallow:a.shallow||[]}}Tn("Object",Object),Tn("TransferableGridIndex",Qa),Tn("Color",Ti),Tn("Error",Error),Tn("AJAXError",Jn),Tn("ResolvedImage",Nr),Tn("StylePropertyFunction",ho),Tn("StyleExpression",Q,{omit:["_evaluator"]}),Tn("ZoomDependentExpression",Yn),Tn("ZoomConstantExpression",Bt),Tn("CompoundExpression",zr,{omit:["_evaluate"]});for(const o in Ss)Ss[o]._classRegistryKey||Tn(`Expression_${o}`,Ss[o]);function nc(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&"ArrayBuffer"===o.constructor.name)}function Fa(o,e){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(nc(o)||at(o))return e&&e.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return e&&e.push(a.buffer),a}if(o instanceof ImageData)return e&&e.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const p of o)a.push(Fa(p,e));return a}if("object"==typeof o){const a=o.constructor,p=a._classRegistryKey;if(!p)throw new Error("can't serialize object of unregistered class");if(!_a[p])throw new Error(`${p} is not registered.`);const y=a.serialize?a.serialize(o,e):{};if(a.serialize){if(e&&y===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in o){if(!o.hasOwnProperty(x)||_a[p].omit.indexOf(x)>=0)continue;const D=o[x];y[x]=_a[p].shallow.indexOf(x)>=0?D:Fa(D,e)}o instanceof Error&&(y.message=o.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==p&&(y.$name=p),y}throw new Error("can't serialize object of type "+typeof o)}function ya(o){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||nc(o)||at(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(ya);if("object"==typeof o){const e=o.$name||"Object";if(!_a[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:a}=_a[e];if(!a)throw new Error(`can't deserialize unregistered class ${e}`);if(a.deserialize)return a.deserialize(o);const p=Object.create(a.prototype);for(const y of Object.keys(o)){if("$name"===y)continue;const x=o[y];p[y]=_a[e].shallow.indexOf(y)>=0?x:ya(x)}return p}throw new Error("can't deserialize object of type "+typeof o)}class Ps{constructor(){this.first=!0}update(e,a){const p=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=a),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=p,!0))}}const bn={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function xl(o){for(const e of o)if(Os(e.charCodeAt(0)))return!0;return!1}function _s(o){for(const e of o)if(!wl(e.charCodeAt(0)))return!1;return!0}function wl(o){return!(bn.Arabic(o)||bn["Arabic Supplement"](o)||bn["Arabic Extended-A"](o)||bn["Arabic Presentation Forms-A"](o)||bn["Arabic Presentation Forms-B"](o))}function Os(o){return!(746!==o&&747!==o&&(o<4352||!(bn["Bopomofo Extended"](o)||bn.Bopomofo(o)||bn["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||bn["CJK Compatibility Ideographs"](o)||bn["CJK Compatibility"](o)||bn["CJK Radicals Supplement"](o)||bn["CJK Strokes"](o)||!(!bn["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||12336===o)||bn["CJK Unified Ideographs Extension A"](o)||bn["CJK Unified Ideographs"](o)||bn["Enclosed CJK Letters and Months"](o)||bn["Hangul Compatibility Jamo"](o)||bn["Hangul Jamo Extended-A"](o)||bn["Hangul Jamo Extended-B"](o)||bn["Hangul Jamo"](o)||bn["Hangul Syllables"](o)||bn.Hiragana(o)||bn["Ideographic Description Characters"](o)||bn.Kanbun(o)||bn["Kangxi Radicals"](o)||bn["Katakana Phonetic Extensions"](o)||bn.Katakana(o)&&12540!==o||!(!bn["Halfwidth and Fullwidth Forms"](o)||65288===o||65289===o||65293===o||o>=65306&&o<=65310||65339===o||65341===o||65343===o||o>=65371&&o<=65503||65507===o||o>=65512&&o<=65519)||!(!bn["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||bn["Unified Canadian Aboriginal Syllabics"](o)||bn["Unified Canadian Aboriginal Syllabics Extended"](o)||bn["Vertical Forms"](o)||bn["Yijing Hexagram Symbols"](o)||bn["Yi Syllables"](o)||bn["Yi Radicals"](o))))}function Cl(o){return!(Os(o)||(e=o,bn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||bn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||bn["Letterlike Symbols"](e)||bn["Number Forms"](e)||bn["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||bn["Control Pictures"](e)&&9251!==e||bn["Optical Character Recognition"](e)||bn["Enclosed Alphanumerics"](e)||bn["Geometric Shapes"](e)||bn["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||bn["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||bn["CJK Symbols and Punctuation"](e)||bn.Katakana(e)||bn["Private Use Area"](e)||bn["CJK Compatibility Forms"](e)||bn["Small Form Variants"](e)||bn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function el(o){return o>=1424&&o<=2303||bn["Arabic Presentation Forms-A"](o)||bn["Arabic Presentation Forms-B"](o)}function Qc(o,e){return!(!e&&el(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||bn.Khmer(o))}function ic(o){for(const e of o)if(el(e.charCodeAt(0)))return!0;return!1}const rc="deferred",tl="loading",is="loaded";let Fl=null,qr="unavailable",ea=null;const oc=function(o){o&&"string"==typeof o&&o.indexOf("NetworkError")>-1&&(qr="error"),Fl&&Fl(o)};function rs(){Na.fire(new Mt("pluginStateChange",{pluginStatus:qr,pluginURL:ea}))}const Na=new Qt,Nl=function(){return qr},sc=function(){if(qr!==rc||!ea)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qr=tl,rs(),ea&&ai({url:ea},o=>{o?oc(o):(qr=is,rs())})},os={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>qr===is||null!=os.applyArabicShaping,isLoading:()=>qr===tl,setState(o){if(!kt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");qr=o.pluginStatus,ea=o.pluginURL},isParsed(){if(!kt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=os.applyArabicShaping&&null!=os.processBidirectionalText&&null!=os.processStyledBidirectionalText},getPluginURL(){if(!kt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ea}};class hr{constructor(e,a){this.zoom=e,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ps,this.transition={})}isSupportedScript(e){return function(a,p){for(const y of a)if(!Qc(y.charCodeAt(0),p))return!1;return!0}(e,os.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,a=e-Math.floor(e),p=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*a}}}class di{constructor(e,a){this.property=e,this.value=a,this.expression=function(p,y){if(ms(p))return new ho(p,y);if(q(p)){const x=wr(p,y);if("error"===x.result)throw new Error(x.value.map(D=>`${D.key}: ${D.message}`).join(", "));return x.value}{let x=p;return"color"===y.type&&"string"==typeof p?x=Ti.parse(p):"padding"!==y.type||"number"!=typeof p&&!Array.isArray(p)||(x=mi.parse(p)),{kind:"constant",evaluate:()=>x}}}(void 0===a?e.specification.default:a,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,a,p){return this.property.possiblyEvaluate(this,e,a,p)}}class Fr{constructor(e){this.property=e,this.value=new di(e,void 0)}transitioned(e,a){return new Ba(this.property,this.value,a,mt({},e.transition,this.transition),e.now)}untransitioned(){return new Ba(this.property,this.value,null,{},0)}}class Bl{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return bt(this._values[e].value.value)}setValue(e,a){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Fr(this._values[e].property)),this._values[e].value=new di(this._values[e].property,null===a?void 0:bt(a))}getTransition(e){return bt(this._values[e].transition)}setTransition(e,a){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Fr(this._values[e].property)),this._values[e].transition=bt(a)||void 0}serialize(){const e={};for(const a of Object.keys(this._values)){const p=this.getValue(a);void 0!==p&&(e[a]=p);const y=this.getTransition(a);void 0!==y&&(e[`${a}-transition`]=y)}return e}transitioned(e,a){const p=new ac(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].transitioned(e,a._values[y]);return p}untransitioned(){const e=new ac(this._properties);for(const a of Object.keys(this._values))e._values[a]=this._values[a].untransitioned();return e}}class Ba{constructor(e,a,p,y,x){this.property=e,this.value=a,this.begin=x+y.delay||0,this.end=this.begin+y.duration||0,e.specification.transition&&(y.delay||y.duration)&&(this.prior=p)}possiblyEvaluate(e,a,p){const y=e.now||0,x=this.value.possiblyEvaluate(e,a,p),D=this.prior;if(D){if(y>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(y<this.begin)return D.possiblyEvaluate(e,a,p);{const O=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(D.possiblyEvaluate(e,a,p),x,function(L){if(L<=0)return 0;if(L>=1)return 1;const J=L*L,re=J*L;return 4*(L<.5?re:3*(L-J)+re-.75)}(O))}}return x}}class ac{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,a,p){const y=new va(this._properties);for(const x of Object.keys(this._values))y._values[x]=this._values[x].possiblyEvaluate(e,a,p);return y}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class zl{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return bt(this._values[e].value)}setValue(e,a){this._values[e]=new di(this._values[e].property,null===a?void 0:bt(a))}serialize(){const e={};for(const a of Object.keys(this._values)){const p=this.getValue(a);void 0!==p&&(e[a]=p)}return e}possiblyEvaluate(e,a,p){const y=new va(this._properties);for(const x of Object.keys(this._values))y._values[x]=this._values[x].possiblyEvaluate(e,a,p);return y}}class Ur{constructor(e,a,p){this.property=e,this.value=a,this.parameters=p}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,a,p,y){return this.property.evaluate(this.value,this.parameters,e,a,p,y)}}class va{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Cn{constructor(e){this.specification=e}possiblyEvaluate(e,a){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(a)}interpolate(e,a,p){const y=Dr[this.specification.type];return y?y(e,a,p):e}}class ei{constructor(e,a){this.specification=e,this.overrides=a}possiblyEvaluate(e,a,p,y){return new Ur(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(a,null,{},p,y)}:e.expression,a)}interpolate(e,a,p){if("constant"!==e.value.kind||"constant"!==a.value.kind)return e;if(void 0===e.value.value||void 0===a.value.value)return new Ur(this,{kind:"constant",value:void 0},e.parameters);const y=Dr[this.specification.type];if(y){const x=y(e.value.value,a.value.value,p);return new Ur(this,{kind:"constant",value:x},e.parameters)}return e}evaluate(e,a,p,y,x,D){return"constant"===e.kind?e.value:e.evaluate(a,p,y,x,D)}}class Vl extends ei{possiblyEvaluate(e,a,p,y){if(void 0===e.value)return new Ur(this,{kind:"constant",value:void 0},a);if("constant"===e.expression.kind){const x=e.expression.evaluate(a,null,{},p,y),D="resolvedImage"===e.property.specification.type&&"string"!=typeof x?x.name:x,O=this._calculate(D,D,D,a);return new Ur(this,{kind:"constant",value:O},a)}if("camera"===e.expression.kind){const x=this._calculate(e.expression.evaluate({zoom:a.zoom-1}),e.expression.evaluate({zoom:a.zoom}),e.expression.evaluate({zoom:a.zoom+1}),a);return new Ur(this,{kind:"constant",value:x},a)}return new Ur(this,e.expression,a)}evaluate(e,a,p,y,x,D){if("source"===e.kind){const O=e.evaluate(a,p,y,x,D);return this._calculate(O,O,O,a)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(a.zoom)-1},p,y),e.evaluate({zoom:Math.floor(a.zoom)},p,y),e.evaluate({zoom:Math.floor(a.zoom)+1},p,y),a):e.value}_calculate(e,a,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:e,to:a}:{from:p,to:a}}interpolate(e){return e}}class Ac{constructor(e){this.specification=e}possiblyEvaluate(e,a,p,y){if(void 0!==e.value){if("constant"===e.expression.kind){const x=e.expression.evaluate(a,null,{},p,y);return this._calculate(x,x,x,a)}return this._calculate(e.expression.evaluate(new hr(Math.floor(a.zoom-1),a)),e.expression.evaluate(new hr(Math.floor(a.zoom),a)),e.expression.evaluate(new hr(Math.floor(a.zoom+1),a)),a)}}_calculate(e,a,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:e,to:a}:{from:p,to:a}}interpolate(e){return e}}class ks{constructor(e){this.specification=e}possiblyEvaluate(e,a,p,y){return!!e.expression.evaluate(a,null,{},p,y)}interpolate(){return!1}}class bo{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in e){const p=e[a];p.specification.overridable&&this.overridableProperties.push(a);const y=this.defaultPropertyValues[a]=new di(p,void 0),x=this.defaultTransitionablePropertyValues[a]=new Fr(p);this.defaultTransitioningPropertyValues[a]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=y.possiblyEvaluate({})}}}Tn("DataDrivenProperty",ei),Tn("DataConstantProperty",Cn),Tn("CrossFadedDataDrivenProperty",Vl),Tn("CrossFadedProperty",Ac),Tn("ColorRampProperty",ks);const ys="-transition";class jr extends Qt{constructor(e,a){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),a.layout&&(this._unevaluatedLayout=new zl(a.layout)),a.paint)){this._transitionablePaint=new Bl(a.paint);for(const p in e.paint)this.setPaintProperty(p,e.paint[p],{validate:!1});for(const p in e.layout)this.setLayoutProperty(p,e.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new va(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,a,p={}){null!=a&&this._validate(bl,`layers.${this.id}.layout.${e}`,e,a,p)||("visibility"!==e?this._unevaluatedLayout.setValue(e,a):this.visibility=a)}getPaintProperty(e){return e.endsWith(ys)?this._transitionablePaint.getTransition(e.slice(0,-ys.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,a,p={}){if(null!=a&&this._validate(La,`layers.${this.id}.paint.${e}`,e,a,p))return!1;if(e.endsWith(ys))return this._transitionablePaint.setTransition(e.slice(0,-ys.length),a||void 0),!1;{const y=this._transitionablePaint._values[e],x="cross-faded-data-driven"===y.property.specification["property-type"],D=y.value.isDataDriven(),O=y.value;this._transitionablePaint.setValue(e,a),this._handleSpecialPaintPropertyUpdate(e);const L=this._transitionablePaint._values[e].value;return L.isDataDriven()||D||x||this._handleOverridablePaintPropertyUpdate(e,O,L)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,a,p){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,a){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,a)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Zt(e,(a,p)=>!(void 0===a||"layout"===p&&!Object.keys(a).length||"paint"===p&&!Object.keys(a).length))}_validate(e,a,p,y,x={}){return(!x||!1!==x.validate)&&Ic(this,e.call($o,{key:a,layerType:this.type,objectKey:p,value:y,styleSpec:me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const a=this.paint.get(e);if(a instanceof Ur&&dr(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1}}const za={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class vs{constructor(e,a){this._structArray=e,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class nr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,a){return e._trim(),a&&(e.isTransferred=!0,a.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const a=Object.create(this.prototype);return a.arrayBuffer=e.arrayBuffer,a.length=e.length,a.capacity=e.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function pr(o,e=1){let a=0,p=0;return{members:o.map(y=>{const x=za[y.type].BYTES_PER_ELEMENT,D=a=eu(a,Math.max(e,x)),O=y.components||1;return p=Math.max(p,x),a+=x*O,{name:y.name,type:y.type,components:O,offset:D}}),size:eu(a,Math.max(p,e)),alignment:e}}function eu(o,e){return Math.ceil(o/e)*e}class ta extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a){const p=this.length;return this.resize(p+1),this.emplace(p,e,a)}emplace(e,a,p){const y=2*e;return this.int16[y+0]=a,this.int16[y+1]=p,e}}ta.prototype.bytesPerElement=4,Tn("StructArrayLayout2i4",ta);class zi extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,p){const y=this.length;return this.resize(y+1),this.emplace(y,e,a,p)}emplace(e,a,p,y){const x=3*e;return this.int16[x+0]=a,this.int16[x+1]=p,this.int16[x+2]=y,e}}zi.prototype.bytesPerElement=6,Tn("StructArrayLayout3i6",zi);class nl extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,e,a,p,y)}emplace(e,a,p,y,x){const D=4*e;return this.int16[D+0]=a,this.int16[D+1]=p,this.int16[D+2]=y,this.int16[D+3]=x,e}}nl.prototype.bytesPerElement=8,Tn("StructArrayLayout4i8",nl);class Pc extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x,D){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,p,y,x,D)}emplace(e,a,p,y,x,D,O){const L=6*e;return this.int16[L+0]=a,this.int16[L+1]=p,this.int16[L+2]=y,this.int16[L+3]=x,this.int16[L+4]=D,this.int16[L+5]=O,e}}Pc.prototype.bytesPerElement=12,Tn("StructArrayLayout2i4i12",Pc);class Rs extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x,D){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,p,y,x,D)}emplace(e,a,p,y,x,D,O){const L=4*e,J=8*e;return this.int16[L+0]=a,this.int16[L+1]=p,this.uint8[J+4]=y,this.uint8[J+5]=x,this.uint8[J+6]=D,this.uint8[J+7]=O,e}}Rs.prototype.bytesPerElement=8,Tn("StructArrayLayout2i4ub8",Rs);class Ul extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a){const p=this.length;return this.resize(p+1),this.emplace(p,e,a)}emplace(e,a,p){const y=2*e;return this.float32[y+0]=a,this.float32[y+1]=p,e}}Ul.prototype.bytesPerElement=8,Tn("StructArrayLayout2f8",Ul);class tu extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x,D,O,L,J,re){const de=this.length;return this.resize(de+1),this.emplace(de,e,a,p,y,x,D,O,L,J,re)}emplace(e,a,p,y,x,D,O,L,J,re,de){const ve=10*e;return this.uint16[ve+0]=a,this.uint16[ve+1]=p,this.uint16[ve+2]=y,this.uint16[ve+3]=x,this.uint16[ve+4]=D,this.uint16[ve+5]=O,this.uint16[ve+6]=L,this.uint16[ve+7]=J,this.uint16[ve+8]=re,this.uint16[ve+9]=de,e}}tu.prototype.bytesPerElement=20,Tn("StructArrayLayout10ui20",tu);class nu extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x,D,O,L,J,re,de,ve){const xe=this.length;return this.resize(xe+1),this.emplace(xe,e,a,p,y,x,D,O,L,J,re,de,ve)}emplace(e,a,p,y,x,D,O,L,J,re,de,ve,xe){const De=12*e;return this.int16[De+0]=a,this.int16[De+1]=p,this.int16[De+2]=y,this.int16[De+3]=x,this.uint16[De+4]=D,this.uint16[De+5]=O,this.uint16[De+6]=L,this.uint16[De+7]=J,this.int16[De+8]=re,this.int16[De+9]=de,this.int16[De+10]=ve,this.int16[De+11]=xe,e}}nu.prototype.bytesPerElement=24,Tn("StructArrayLayout4i4ui4i24",nu);class jl extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,p){const y=this.length;return this.resize(y+1),this.emplace(y,e,a,p)}emplace(e,a,p,y){const x=3*e;return this.float32[x+0]=a,this.float32[x+1]=p,this.float32[x+2]=y,e}}jl.prototype.bytesPerElement=12,Tn("StructArrayLayout3f12",jl);class il extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.uint32[1*e+0]=a,e}}il.prototype.bytesPerElement=4,Tn("StructArrayLayout1ul4",il);class v extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x,D,O,L,J){const re=this.length;return this.resize(re+1),this.emplace(re,e,a,p,y,x,D,O,L,J)}emplace(e,a,p,y,x,D,O,L,J,re){const de=10*e,ve=5*e;return this.int16[de+0]=a,this.int16[de+1]=p,this.int16[de+2]=y,this.int16[de+3]=x,this.int16[de+4]=D,this.int16[de+5]=O,this.uint32[ve+3]=L,this.uint16[de+8]=J,this.uint16[de+9]=re,e}}v.prototype.bytesPerElement=20,Tn("StructArrayLayout6i1ul2ui20",v);class t extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x,D){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,p,y,x,D)}emplace(e,a,p,y,x,D,O){const L=6*e;return this.int16[L+0]=a,this.int16[L+1]=p,this.int16[L+2]=y,this.int16[L+3]=x,this.int16[L+4]=D,this.int16[L+5]=O,e}}t.prototype.bytesPerElement=12,Tn("StructArrayLayout2i2i2i12",t);class c extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x){const D=this.length;return this.resize(D+1),this.emplace(D,e,a,p,y,x)}emplace(e,a,p,y,x,D){const O=4*e,L=8*e;return this.float32[O+0]=a,this.float32[O+1]=p,this.float32[O+2]=y,this.int16[L+6]=x,this.int16[L+7]=D,e}}c.prototype.bytesPerElement=16,Tn("StructArrayLayout2f1f2i16",c);class m extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,e,a,p,y)}emplace(e,a,p,y,x){const D=12*e,O=3*e;return this.uint8[D+0]=a,this.uint8[D+1]=p,this.float32[O+1]=y,this.float32[O+2]=x,e}}m.prototype.bytesPerElement=12,Tn("StructArrayLayout2ub2f12",m);class b extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,p){const y=this.length;return this.resize(y+1),this.emplace(y,e,a,p)}emplace(e,a,p,y){const x=3*e;return this.uint16[x+0]=a,this.uint16[x+1]=p,this.uint16[x+2]=y,e}}b.prototype.bytesPerElement=6,Tn("StructArrayLayout3ui6",b);class M extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x,D,O,L,J,re,de,ve,xe,De,He,Ve,st){const gt=this.length;return this.resize(gt+1),this.emplace(gt,e,a,p,y,x,D,O,L,J,re,de,ve,xe,De,He,Ve,st)}emplace(e,a,p,y,x,D,O,L,J,re,de,ve,xe,De,He,Ve,st,gt){const it=24*e,Dt=12*e,Ot=48*e;return this.int16[it+0]=a,this.int16[it+1]=p,this.uint16[it+2]=y,this.uint16[it+3]=x,this.uint32[Dt+2]=D,this.uint32[Dt+3]=O,this.uint32[Dt+4]=L,this.uint16[it+10]=J,this.uint16[it+11]=re,this.uint16[it+12]=de,this.float32[Dt+7]=ve,this.float32[Dt+8]=xe,this.uint8[Ot+36]=De,this.uint8[Ot+37]=He,this.uint8[Ot+38]=Ve,this.uint32[Dt+10]=st,this.int16[it+22]=gt,e}}M.prototype.bytesPerElement=48,Tn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",M);class k extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,p,y,x,D,O,L,J,re,de,ve,xe,De,He,Ve,st,gt,it,Dt,Ot,Ht,Fn,Un,Mn,vn,fn,En){const wn=this.length;return this.resize(wn+1),this.emplace(wn,e,a,p,y,x,D,O,L,J,re,de,ve,xe,De,He,Ve,st,gt,it,Dt,Ot,Ht,Fn,Un,Mn,vn,fn,En)}emplace(e,a,p,y,x,D,O,L,J,re,de,ve,xe,De,He,Ve,st,gt,it,Dt,Ot,Ht,Fn,Un,Mn,vn,fn,En,wn){const Jt=34*e,jn=17*e;return this.int16[Jt+0]=a,this.int16[Jt+1]=p,this.int16[Jt+2]=y,this.int16[Jt+3]=x,this.int16[Jt+4]=D,this.int16[Jt+5]=O,this.int16[Jt+6]=L,this.int16[Jt+7]=J,this.uint16[Jt+8]=re,this.uint16[Jt+9]=de,this.uint16[Jt+10]=ve,this.uint16[Jt+11]=xe,this.uint16[Jt+12]=De,this.uint16[Jt+13]=He,this.uint16[Jt+14]=Ve,this.uint16[Jt+15]=st,this.uint16[Jt+16]=gt,this.uint16[Jt+17]=it,this.uint16[Jt+18]=Dt,this.uint16[Jt+19]=Ot,this.uint16[Jt+20]=Ht,this.uint16[Jt+21]=Fn,this.uint16[Jt+22]=Un,this.uint32[jn+12]=Mn,this.float32[jn+13]=vn,this.float32[jn+14]=fn,this.float32[jn+15]=En,this.float32[jn+16]=wn,e}}k.prototype.bytesPerElement=68,Tn("StructArrayLayout8i15ui1ul4f68",k);class B extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.float32[1*e+0]=a,e}}B.prototype.bytesPerElement=4,Tn("StructArrayLayout1f4",B);class z extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,p){const y=this.length;return this.resize(y+1),this.emplace(y,e,a,p)}emplace(e,a,p,y){const x=4*e;return this.uint32[2*e+0]=a,this.uint16[x+2]=p,this.uint16[x+3]=y,e}}z.prototype.bytesPerElement=8,Tn("StructArrayLayout1ul2ui8",z);class W extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a){const p=this.length;return this.resize(p+1),this.emplace(p,e,a)}emplace(e,a,p){const y=2*e;return this.uint16[y+0]=a,this.uint16[y+1]=p,e}}W.prototype.bytesPerElement=4,Tn("StructArrayLayout2ui4",W);class se extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.uint16[1*e+0]=a,e}}se.prototype.bytesPerElement=2,Tn("StructArrayLayout1ui2",se);class ae extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,e,a,p,y)}emplace(e,a,p,y,x){const D=4*e;return this.float32[D+0]=a,this.float32[D+1]=p,this.float32[D+2]=y,this.float32[D+3]=x,e}}ae.prototype.bytesPerElement=16,Tn("StructArrayLayout4f16",ae);class E extends vs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ae(this.anchorPointX,this.anchorPointY)}}E.prototype.size=20;class S extends v{get(e){return new E(this,e)}}Tn("CollisionBoxArray",S);class C extends vs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}C.prototype.size=48;class A extends M{get(e){return new C(this,e)}}Tn("PlacedSymbolArray",A);class R extends vs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}R.prototype.size=68;class ee extends k{get(e){return new R(this,e)}}Tn("SymbolInstanceArray",ee);class fe extends B{getoffsetX(e){return this.float32[1*e+0]}}Tn("GlyphOffsetArray",fe);class oe extends zi{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Tn("SymbolLineVertexArray",oe);class Oe extends vs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Oe.prototype.size=8;class tt extends z{get(e){return new Oe(this,e)}}Tn("FeatureIndexArray",tt);class Et extends ta{}class vt extends ta{}class Ut extends ta{}class $t extends Pc{}class pn extends Rs{}class zn extends Ul{}class Gn extends tu{}class Sn extends nu{}class qn extends jl{}class In extends il{}class Hi extends t{}class Kr extends m{}class Oi extends b{}class xi extends W{}const fr=pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ss}=fr;class $i{constructor(e=[]){this.segments=e}prepareSegment(e,a,p,y){let x=this.segments[this.segments.length-1];return e>$i.MAX_VERTEX_ARRAY_LENGTH&&ze(`Max vertices per segment is ${$i.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!x||x.vertexLength+e>$i.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==y)&&(x={vertexOffset:a.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},void 0!==y&&(x.sortKey=y),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const e of this.segments)for(const a in e.vaos)e.vaos[a].destroy()}static simpleSegment(e,a,p,y){return new $i([{vertexOffset:e,primitiveOffset:a,vertexLength:p,primitiveLength:y,vaos:{},sortKey:0}])}}function eo(o,e){return 256*(o=qe(Math.floor(o),0,255))+qe(Math.floor(e),0,255)}$i.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tn("SegmentVector",$i);const to=pr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var na={exports:{}},Hl=function(o,e){var a,p,y,x,D,O,L,J;for(p=o.length-(a=3&o.length),y=e,D=3432918353,O=461845907,J=0;J<p;)L=255&o.charCodeAt(J)|(255&o.charCodeAt(++J))<<8|(255&o.charCodeAt(++J))<<16|(255&o.charCodeAt(++J))<<24,++J,y=27492+(65535&(x=5*(65535&(y=(y^=L=(65535&(L=(L=(65535&L)*D+(((L>>>16)*D&65535)<<16)&4294967295)<<15|L>>>17))*O+(((L>>>16)*O&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(L=0,a){case 3:L^=(255&o.charCodeAt(J+2))<<16;case 2:L^=(255&o.charCodeAt(J+1))<<8;case 1:y^=L=(65535&(L=(L=(65535&(L^=255&o.charCodeAt(J)))*D+(((L>>>16)*D&65535)<<16)&4294967295)<<15|L>>>17))*O+(((L>>>16)*O&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0},ir=function(o,e){for(var a,p=o.length,y=e^p,x=0;p>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(x)|(255&o.charCodeAt(++x))<<8|(255&o.charCodeAt(++x))<<16|(255&o.charCodeAt(++x))<<24))+((1540483477*(a>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),p-=4,++x;switch(p){case 3:y^=(255&o.charCodeAt(x+2))<<16;case 2:y^=(255&o.charCodeAt(x+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(x)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};na.exports=Hl,na.exports.murmur3=Hl,na.exports.murmur2=ir;var po=Ge(na.exports);class Zi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,a,p,y){this.ids.push(Ro(e)),this.positions.push(a,p,y)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Ro(e);let p=0,y=this.ids.length-1;for(;p<y;){const D=p+y>>1;this.ids[D]>=a?y=D:p=D+1}const x=[];for(;this.ids[p]===a;)x.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return x}static serialize(e,a){const p=new Float64Array(e.ids),y=new Uint32Array(e.positions);return Eo(p,y,0,p.length-1),a&&a.push(p.buffer,y.buffer),{ids:p,positions:y}}static deserialize(e){const a=new Zi;return a.ids=e.ids,a.positions=e.positions,a.indexed=!0,a}}function Ro(o){const e=+o;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:po(String(o))}function Eo(o,e,a,p){for(;a<p;){const y=o[a+p>>1];let x=a-1,D=p+1;for(;;){do{x++}while(o[x]<y);do{D--}while(o[D]>y);if(x>=D)break;Yi(o,x,D),Yi(e,3*x,3*D),Yi(e,3*x+1,3*D+1),Yi(e,3*x+2,3*D+2)}D-a<p-D?(Eo(o,e,a,D),a=D+1):(Eo(o,e,D+1,p),p=D)}}function Yi(o,e,a){const p=o[e];o[e]=o[a],o[a]=p}Tn("FeaturePositionMap",Zi);class Lo{constructor(e,a){this.gl=e.gl,this.location=a}}class Ls extends Lo{constructor(e,a){super(e,a),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class iu extends Lo{constructor(e,a){super(e,a),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class El extends Lo{constructor(e,a){super(e,a),this.current=Ti.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Oc=new Float32Array(16);function lc(o){return[eo(255*o.r,255*o.g),eo(255*o.b,255*o.a)]}class ja{constructor(e,a,p){this.value=e,this.uniformNames=a.map(y=>`u_${y}`),this.type=p}setUniform(e,a,p){e.set(p.constantOr(this.value))}getBinding(e,a,p){return"color"===this.type?new El(e,a):new Ls(e,a)}}class $l{constructor(e,a){this.uniformNames=a.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=e.tlbr}setUniform(e,a,p,y){const x="u_pattern_to"===y?this.patternTo:"u_pattern_from"===y?this.patternFrom:"u_pixel_ratio_to"===y?this.pixelRatioTo:"u_pixel_ratio_from"===y?this.pixelRatioFrom:null;x&&e.set(x)}getBinding(e,a,p){return"u_pattern"===p.substr(0,9)?new iu(e,a):new Ls(e,a)}}class ia{constructor(e,a,p,y){this.expression=e,this.type=p,this.maxValue=0,this.paintVertexAttributes=a.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===p?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(e,a,p,y,x){const D=this.paintVertexArray.length,O=this.expression.evaluate(new hr(0),a,{},y,[],x);this.paintVertexArray.resize(e),this._setPaintValue(D,e,O)}updatePaintArray(e,a,p,y){const x=this.expression.evaluate({zoom:0},p,y);this._setPaintValue(e,a,x)}_setPaintValue(e,a,p){if("color"===this.type){const y=lc(p);for(let x=e;x<a;x++)this.paintVertexArray.emplace(x,y[0],y[1])}else{for(let y=e;y<a;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Do{constructor(e,a,p,y,x,D){this.expression=e,this.uniformNames=a.map(O=>`u_${O}_t`),this.type=p,this.useIntegerZoom=y,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=a.map(O=>({name:`a_${O}`,type:"Float32",components:"color"===p?4:2,offset:0})),this.paintVertexArray=new D}populatePaintArray(e,a,p,y,x){const D=this.expression.evaluate(new hr(this.zoom),a,{},y,[],x),O=this.expression.evaluate(new hr(this.zoom+1),a,{},y,[],x),L=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(L,e,D,O)}updatePaintArray(e,a,p,y){const x=this.expression.evaluate({zoom:this.zoom},p,y),D=this.expression.evaluate({zoom:this.zoom+1},p,y);this._setPaintValue(e,a,x,D)}_setPaintValue(e,a,p,y){if("color"===this.type){const x=lc(p),D=lc(y);for(let O=e;O<a;O++)this.paintVertexArray.emplace(O,x[0],x[1],D[0],D[1])}else{for(let x=e;x<a;x++)this.paintVertexArray.emplace(x,p,y);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(y))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,a){const p=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,y=qe(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);e.set(y)}getBinding(e,a,p){return new Ls(e,a)}}class ra{constructor(e,a,p,y,x,D){this.expression=e,this.type=a,this.useIntegerZoom=p,this.zoom=y,this.layerId=D,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(e,a,p){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(y,e,a.patterns&&a.patterns[this.layerId],p)}updatePaintArray(e,a,p,y,x){this._setPaintValues(e,a,p.patterns&&p.patterns[this.layerId],x)}_setPaintValues(e,a,p,y){if(!y||!p)return;const{min:x,mid:D,max:O}=p,L=y[x],J=y[D],re=y[O];if(L&&J&&re)for(let de=e;de<a;de++)this.zoomInPaintVertexArray.emplace(de,J.tl[0],J.tl[1],J.br[0],J.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],J.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(de,J.tl[0],J.tl[1],J.br[0],J.br[1],re.tl[0],re.tl[1],re.br[0],re.br[1],J.pixelRatio,re.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,to.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,to.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Bp{constructor(e,a,p){this.binders={},this._buffers=[];const y=[];for(const x in e.paint._values){if(!p(x))continue;const D=e.paint.get(x);if(!(D instanceof Ur&&dr(D.property.specification)))continue;const O=zp(x,e.type),L=D.value,J=D.property.specification.type,re=D.property.useIntegerZoom,de=D.property.specification["property-type"],ve="cross-faded"===de||"cross-faded-data-driven"===de;if("constant"===L.kind)this.binders[x]=ve?new $l(L.value,O):new ja(L.value,O,J),y.push(`/u_${x}`);else if("source"===L.kind||ve){const xe=Vp(x,J,"source");this.binders[x]=ve?new ra(L,J,re,a,xe,e.id):new ia(L,O,J,xe),y.push(`/a_${x}`)}else{const xe=Vp(x,J,"composite");this.binders[x]=new Do(L,O,J,re,a,xe),y.push(`/z_${x}`)}}this.cacheKey=y.sort().join("")}getMaxValue(e){const a=this.binders[e];return a instanceof ia||a instanceof Do?a.maxValue:0}populatePaintArrays(e,a,p,y,x){for(const D in this.binders){const O=this.binders[D];(O instanceof ia||O instanceof Do||O instanceof ra)&&O.populatePaintArray(e,a,p,y,x)}}setConstantPatternPositions(e,a){for(const p in this.binders){const y=this.binders[p];y instanceof $l&&y.setConstantPatternPositions(e,a)}}updatePaintArrays(e,a,p,y,x){let D=!1;for(const O in e){const L=a.getPositions(O);for(const J of L){const re=p.feature(J.index);for(const de in this.binders){const ve=this.binders[de];if((ve instanceof ia||ve instanceof Do||ve instanceof ra)&&!0===ve.expression.isStateDependent){const xe=y.paint.get(de);ve.expression=xe.value,ve.updatePaintArray(J.start,J.end,re,e[O],x),D=!0}}}}return D}defines(){const e=[];for(const a in this.binders){const p=this.binders[a];(p instanceof ja||p instanceof $l)&&e.push(...p.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return e}getBinderAttributes(){const e=[];for(const a in this.binders){const p=this.binders[a];if(p instanceof ia||p instanceof Do)for(let y=0;y<p.paintVertexAttributes.length;y++)e.push(p.paintVertexAttributes[y].name);else if(p instanceof ra)for(let y=0;y<to.members.length;y++)e.push(to.members[y].name)}return e}getBinderUniforms(){const e=[];for(const a in this.binders){const p=this.binders[a];if(p instanceof ja||p instanceof $l||p instanceof Do)for(const y of p.uniformNames)e.push(y)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,a){const p=[];for(const y in this.binders){const x=this.binders[y];if(x instanceof ja||x instanceof $l||x instanceof Do)for(const D of x.uniformNames)if(a[D]){const O=x.getBinding(e,a[D],D);p.push({name:D,property:y,binding:O})}}return p}setUniforms(e,a,p,y){for(const{name:x,property:D,binding:O}of a)this.binders[D].setUniform(O,y,p.get(D),x)}updatePaintBuffers(e){this._buffers=[];for(const a in this.binders){const p=this.binders[a];if(e&&p instanceof ra){const y=2===e.fromScale?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(p instanceof ia||p instanceof Do)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(e){for(const a in this.binders){const p=this.binders[a];(p instanceof ia||p instanceof Do||p instanceof ra)&&p.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const a=this.binders[e];(a instanceof ia||a instanceof Do||a instanceof ra)&&a.destroy()}}}class ru{constructor(e,a,p=(()=>!0)){this.programConfigurations={};for(const y of e)this.programConfigurations[y.id]=new Bp(y,a,p);this.needsUpload=!1,this._featureMap=new Zi,this._bufferOffset=0}populatePaintArrays(e,a,p,y,x,D){for(const O in this.programConfigurations)this.programConfigurations[O].populatePaintArrays(e,a,y,x,D);void 0!==a.id&&this._featureMap.add(a.id,p,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,a,p,y){for(const x of p)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,a,x,y)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function zp(o,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${e}-`,"").replace(/-/g,"_")]}function Vp(o,e,a){const y={"line-pattern":{source:Gn,composite:Gn},"fill-pattern":{source:Gn,composite:Gn},"fill-extrusion-pattern":{source:Gn,composite:Gn}}[o];return y&&y[a]||{color:{source:Ul,composite:ae},number:{source:B,composite:Ul}}[e][a]}Tn("ConstantBinder",ja),Tn("CrossFadedConstantBinder",$l),Tn("SourceExpressionBinder",ia),Tn("CrossFadedCompositeBinder",ra),Tn("CompositeExpressionBinder",Do),Tn("ProgramConfiguration",Bp,{omit:["_buffers"]}),Tn("ProgramConfigurationSet",ru);var Mo=8192;const Ch=Math.pow(2,14)-1,Up=-Ch-1;function kc(o){const e=Mo/o.extent,a=o.loadGeometry();for(let p=0;p<a.length;p++){const y=a[p];for(let x=0;x<y.length;x++){const D=y[x],O=Math.round(D.x*e),L=Math.round(D.y*e);D.x=qe(O,Up,Ch),D.y=qe(L,Up,Ch),(O<D.x||O>D.x+1||L<D.y||L>D.y+1)&&ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Dl(o,e){return{type:o.type,id:o.id,properties:o.properties,geometry:e?kc(o):[]}}function Pu(o,e,a,p,y){o.emplaceBack(2*e+(p+1)/2,2*a+(y+1)/2)}class Eh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new vt,this.indexArray=new Oi,this.segments=new $i,this.programConfigurations=new ru(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,p){const y=this.layers[0],x=[];let D=null,O=!1;"circle"===y.type&&(D=y.layout.get("circle-sort-key"),O=!D.isConstant());for(const{feature:L,id:J,index:re,sourceLayerIndex:de}of e){const ve=this.layers[0]._featureFilter.needGeometry,xe=Dl(L,ve);if(!this.layers[0]._featureFilter.filter(new hr(this.zoom),xe,p))continue;const De=O?D.evaluate(xe,{},p):void 0,He={id:J,properties:L.properties,type:L.type,sourceLayerIndex:de,index:re,geometry:ve?xe.geometry:kc(L),patterns:{},sortKey:De};x.push(He)}O&&x.sort((L,J)=>L.sortKey-J.sortKey);for(const L of x){const{geometry:J,index:re,sourceLayerIndex:de}=L,ve=e[re].feature;this.addFeature(L,J,re,p),a.featureIndex.insert(ve,J,re,de,this.index)}}update(e,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ss),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,a,p,y){for(const x of a)for(const D of x){const O=D.x,L=D.y;if(O<0||O>=Mo||L<0||L>=Mo)continue;const J=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),re=J.vertexLength;Pu(this.layoutVertexArray,O,L,-1,-1),Pu(this.layoutVertexArray,O,L,1,-1),Pu(this.layoutVertexArray,O,L,1,1),Pu(this.layoutVertexArray,O,L,-1,1),this.indexArray.emplaceBack(re,re+1,re+2),this.indexArray.emplaceBack(re,re+3,re+2),J.vertexLength+=4,J.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,p,{},y)}}function Dh(o,e){for(let a=0;a<o.length;a++)if(rl(e,o[a]))return!0;for(let a=0;a<e.length;a++)if(rl(o,e[a]))return!0;return!!Ou(o,e)}function g_(o,e,a){return!!rl(o,e)||!!md(e,o,a)}function Mh(o,e){if(1===o.length)return gd(e,o[0]);for(let a=0;a<e.length;a++){const p=e[a];for(let y=0;y<p.length;y++)if(rl(o,p[y]))return!0}for(let a=0;a<o.length;a++)if(gd(e,o[a]))return!0;for(let a=0;a<e.length;a++)if(Ou(o,e[a]))return!0;return!1}function __(o,e,a){if(o.length>1){if(Ou(o,e))return!0;for(let p=0;p<e.length;p++)if(md(e[p],o,a))return!0}for(let p=0;p<o.length;p++)if(md(o[p],e,a))return!0;return!1}function Ou(o,e){if(0===o.length||0===e.length)return!1;for(let a=0;a<o.length-1;a++){const p=o[a],y=o[a+1];for(let x=0;x<e.length-1;x++)if(mm(p,y,e[x],e[x+1]))return!0}return!1}function mm(o,e,a,p){return It(o,a,p)!==It(e,a,p)&&It(o,e,a)!==It(o,e,p)}function md(o,e,a){const p=a*a;if(1===e.length)return o.distSqr(e[0])<p;for(let y=1;y<e.length;y++)if(ku(o,e[y-1],e[y])<p)return!0;return!1}function ku(o,e,a){const p=e.distSqr(a);if(0===p)return o.distSqr(e);const y=((o.x-e.x)*(a.x-e.x)+(o.y-e.y)*(a.y-e.y))/p;return o.distSqr(y<0?e:y>1?a:a.sub(e)._mult(y)._add(e))}function gd(o,e){let a,p,y,x=!1;for(let D=0;D<o.length;D++){a=o[D];for(let O=0,L=a.length-1;O<a.length;L=O++)p=a[O],y=a[L],p.y>e.y!=y.y>e.y&&e.x<(y.x-p.x)*(e.y-p.y)/(y.y-p.y)+p.x&&(x=!x)}return x}function rl(o,e){let a=!1;for(let p=0,y=o.length-1;p<o.length;y=p++){const x=o[p],D=o[y];x.y>e.y!=D.y>e.y&&e.x<(D.x-x.x)*(e.y-x.y)/(D.y-x.y)+x.x&&(a=!a)}return a}function gm(o,e,a){const p=a[0],y=a[2];if(o.x<p.x&&e.x<p.x||o.x>y.x&&e.x>y.x||o.y<p.y&&e.y<p.y||o.y>y.y&&e.y>y.y)return!1;const x=It(o,e,a[0]);return x!==It(o,e,a[1])||x!==It(o,e,a[2])||x!==It(o,e,a[3])}function Ru(o,e,a){const p=e.paint.get(o).value;return"constant"===p.kind?p.value:a.programConfigurations.get(e.id).getMaxValue(o)}function Sh(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function rr(o,e,a,p,y){if(!e[0]&&!e[1])return o;const x=Ae.convert(e)._mult(y);"viewport"===a&&x._rotate(-p);const D=[];for(let O=0;O<o.length;O++)D.push(o[O].sub(x));return D}let _d,Th;Tn("CircleBucket",Eh,{omit:["layers"]});var jp={get paint(){return Th=Th||new bo({"circle-radius":new ei(me.paint_circle["circle-radius"]),"circle-color":new ei(me.paint_circle["circle-color"]),"circle-blur":new ei(me.paint_circle["circle-blur"]),"circle-opacity":new ei(me.paint_circle["circle-opacity"]),"circle-translate":new Cn(me.paint_circle["circle-translate"]),"circle-translate-anchor":new Cn(me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Cn(me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Cn(me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ei(me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ei(me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ei(me.paint_circle["circle-stroke-opacity"])})},get layout(){return _d=_d||new bo({"circle-sort-key":new ei(me.layout_circle["circle-sort-key"])})}},Fo=1e-6,ba=typeof Float32Array<"u"?Float32Array:Array;function Rc(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Hp(o,e,a){var p=e[0],y=e[1],x=e[2],D=e[3],O=e[4],L=e[5],J=e[6],re=e[7],de=e[8],ve=e[9],xe=e[10],De=e[11],He=e[12],Ve=e[13],st=e[14],gt=e[15],it=a[0],Dt=a[1],Ot=a[2],Ht=a[3];return o[0]=it*p+Dt*O+Ot*de+Ht*He,o[1]=it*y+Dt*L+Ot*ve+Ht*Ve,o[2]=it*x+Dt*J+Ot*xe+Ht*st,o[3]=it*D+Dt*re+Ot*De+Ht*gt,o[4]=(it=a[4])*p+(Dt=a[5])*O+(Ot=a[6])*de+(Ht=a[7])*He,o[5]=it*y+Dt*L+Ot*ve+Ht*Ve,o[6]=it*x+Dt*J+Ot*xe+Ht*st,o[7]=it*D+Dt*re+Ot*De+Ht*gt,o[8]=(it=a[8])*p+(Dt=a[9])*O+(Ot=a[10])*de+(Ht=a[11])*He,o[9]=it*y+Dt*L+Ot*ve+Ht*Ve,o[10]=it*x+Dt*J+Ot*xe+Ht*st,o[11]=it*D+Dt*re+Ot*De+Ht*gt,o[12]=(it=a[12])*p+(Dt=a[13])*O+(Ot=a[14])*de+(Ht=a[15])*He,o[13]=it*y+Dt*L+Ot*ve+Ht*Ve,o[14]=it*x+Dt*J+Ot*xe+Ht*st,o[15]=it*D+Dt*re+Ot*De+Ht*gt,o}Math.hypot||(Math.hypot=function(){for(var o=0,e=arguments.length;e--;)o+=arguments[e]*arguments[e];return Math.sqrt(o)});var Lc,_m=Hp;function Gl(o,e,a){var p=e[0],y=e[1],x=e[2],D=e[3];return o[0]=a[0]*p+a[4]*y+a[8]*x+a[12]*D,o[1]=a[1]*p+a[5]*y+a[9]*x+a[13]*D,o[2]=a[2]*p+a[6]*y+a[10]*x+a[14]*D,o[3]=a[3]*p+a[7]*y+a[11]*x+a[15]*D,o}function ol(o,e){const a=Gl([],[o.x,o.y,0,1],e);return new Ae(a[0]/a[3],a[1]/a[3])}Lc=new ba(4),ba!=Float32Array&&(Lc[0]=0,Lc[1]=0,Lc[2]=0,Lc[3]=0);class Fc extends Eh{}let Ih;Tn("HeatmapBucket",Fc,{omit:["layers"]});var ym={get paint(){return Ih=Ih||new bo({"heatmap-radius":new ei(me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ei(me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Cn(me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ks(me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Cn(me.paint_heatmap["heatmap-opacity"])})}};function Ah(o,{width:e,height:a},p,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==e*a*p)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${e*a*p}`)}else y=new Uint8Array(e*a*p);return o.width=e,o.height=a,o.data=y,o}function $p(o,{width:e,height:a},p){if(e===o.width&&a===o.height)return;const y=Ah({},{width:e,height:a},p);yd(o,y,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,e),height:Math.min(o.height,a)},p),o.width=e,o.height=a,o.data=y.data}function yd(o,e,a,p,y,x){if(0===y.width||0===y.height)return e;if(y.width>o.width||y.height>o.height||a.x>o.width-y.width||a.y>o.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>e.width||y.height>e.height||p.x>e.width-y.width||p.y>e.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const D=o.data,O=e.data;if(D===O)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<y.height;L++){const J=((a.y+L)*o.width+a.x)*x,re=((p.y+L)*e.width+p.x)*x;for(let de=0;de<y.width*x;de++)O[re+de]=D[J+de]}return e}class Lu{constructor(e,a){Ah(this,e,1,a)}resize(e){$p(this,e,1)}clone(){return new Lu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,a,p,y,x){yd(e,a,p,y,x,1)}}class oa{constructor(e,a){Ah(this,e,4,a)}resize(e){$p(this,e,4)}replace(e,a){a?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new oa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,a,p,y,x){yd(e,a,p,y,x,4)}}function vd(o){const e={},a=o.resolution||256,p=o.clips?o.clips.length:1,y=o.image||new oa({width:a,height:p});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const x=(D,O,L)=>{e[o.evaluationKey]=L;const J=o.expression.evaluate(e);y.data[D+O+0]=Math.floor(255*J.r/J.a),y.data[D+O+1]=Math.floor(255*J.g/J.a),y.data[D+O+2]=Math.floor(255*J.b/J.a),y.data[D+O+3]=Math.floor(255*J.a)};if(o.clips)for(let D=0,O=0;D<p;++D,O+=4*a)for(let L=0,J=0;L<a;L++,J+=4){const re=L/(a-1),{start:de,end:ve}=o.clips[D];x(O,J,de*(1-re)+ve*re)}else for(let D=0,O=0;D<a;D++,O+=4)x(0,O,D/(a-1));return y}let Gp;Tn("AlphaImage",Lu),Tn("RGBAImage",oa);var Zp={get paint(){return Gp=Gp||new bo({"hillshade-illumination-direction":new Cn(me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Cn(me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Cn(me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Cn(me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Cn(me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Cn(me.paint_hillshade["hillshade-accent-color"])})}};const vm=pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:bd}=vm;var sl={exports:{}};function cc(o,e,a){a=a||2;var p,y,x,D,O,L,J,re=e&&e.length,de=re?e[0]*a:o.length,ve=Ph(o,0,de,a,!0),xe=[];if(!ve||ve.next===ve.prev)return xe;if(re&&(ve=function(He,Ve,st,gt){var it,Dt,Ot,Ht=[];for(it=0,Dt=Ve.length;it<Dt;it++)(Ot=Ph(He,Ve[it]*gt,it<Dt-1?Ve[it+1]*gt:He.length,gt,!1))===Ot.next&&(Ot.steiner=!0),Ht.push(bm(Ot));for(Ht.sort(kh),it=0;it<Ht.length;it++)st=v_(Ht[it],st);return st}(o,e,ve,a)),o.length>80*a){p=x=o[0],y=D=o[1];for(var De=a;De<de;De+=a)(O=o[De])<p&&(p=O),(L=o[De+1])<y&&(y=L),O>x&&(x=O),L>D&&(D=L);J=0!==(J=Math.max(x-p,D-y))?32767/J:0}return ou(ve,xe,a,p,y,J,0),xe}function Ph(o,e,a,p,y){var x,D;if(y===Cd(o,e,a,p)>0)for(x=e;x<a;x+=p)D=Rh(x,o[x],o[x+1],D);else for(x=a-p;x>=e;x-=p)D=Rh(x,o[x],o[x+1],D);return D&&Fu(D,D.next)&&(Bu(D),D=D.next),D}function uc(o,e){if(!o)return o;e||(e=o);var a,p=o;do{if(a=!1,p.steiner||!Fu(p,p.next)&&0!==no(p.prev,p,p.next))p=p.next;else{if(Bu(p),(p=e=p.prev)===p.next)break;a=!0}}while(a||p!==e);return e}function ou(o,e,a,p,y,x,D){if(o){!D&&x&&function(re,de,ve,xe){var De=re;do{0===De.z&&(De.z=wd(De.x,De.y,de,ve,xe)),De.prevZ=De.prev,De.nextZ=De.next,De=De.next}while(De!==re);De.prevZ.nextZ=null,De.prevZ=null,function(He){var Ve,st,gt,it,Dt,Ot,Ht,Fn,Un=1;do{for(st=He,He=null,Dt=null,Ot=0;st;){for(Ot++,gt=st,Ht=0,Ve=0;Ve<Un&&(Ht++,gt=gt.nextZ);Ve++);for(Fn=Un;Ht>0||Fn>0&&gt;)0!==Ht&&(0===Fn||!gt||st.z<=gt.z)?(it=st,st=st.nextZ,Ht--):(it=gt,gt=gt.nextZ,Fn--),Dt?Dt.nextZ=it:He=it,it.prevZ=Dt,Dt=it;st=gt}Dt.nextZ=null,Un*=2}while(Ot>1)}(De)}(o,p,y,x);for(var O,L,J=o;o.prev!==o.next;)if(O=o.prev,L=o.next,x?y_(o,p,y,x):Wp(o))e.push(O.i/a|0),e.push(o.i/a|0),e.push(L.i/a|0),Bu(o),o=L.next,J=L.next;else if((o=L)===J){D?1===D?ou(o=xd(uc(o),e,a),e,a,p,y,x,2):2===D&&Oh(o,e,a,p,y,x):ou(uc(o),e,a,p,y,x,1);break}}}function Wp(o){var e=o.prev,a=o,p=o.next;if(no(e,a,p)>=0)return!1;for(var y=e.x,x=a.x,D=p.x,O=e.y,L=a.y,J=p.y,re=y<x?y<D?y:D:x<D?x:D,de=O<L?O<J?O:J:L<J?L:J,ve=y>x?y>D?y:D:x>D?x:D,xe=O>L?O>J?O:J:L>J?L:J,De=p.next;De!==e;){if(De.x>=re&&De.x<=ve&&De.y>=de&&De.y<=xe&&su(y,O,x,L,D,J,De.x,De.y)&&no(De.prev,De,De.next)>=0)return!1;De=De.next}return!0}function y_(o,e,a,p){var y=o.prev,x=o,D=o.next;if(no(y,x,D)>=0)return!1;for(var O=y.x,L=x.x,J=D.x,re=y.y,de=x.y,ve=D.y,xe=O<L?O<J?O:J:L<J?L:J,De=re<de?re<ve?re:ve:de<ve?de:ve,He=O>L?O>J?O:J:L>J?L:J,Ve=re>de?re>ve?re:ve:de>ve?de:ve,st=wd(xe,De,e,a,p),gt=wd(He,Ve,e,a,p),it=o.prevZ,Dt=o.nextZ;it&&it.z>=st&&Dt&&Dt.z<=gt;){if(it.x>=xe&&it.x<=He&&it.y>=De&&it.y<=Ve&&it!==y&&it!==D&&su(O,re,L,de,J,ve,it.x,it.y)&&no(it.prev,it,it.next)>=0||(it=it.prevZ,Dt.x>=xe&&Dt.x<=He&&Dt.y>=De&&Dt.y<=Ve&&Dt!==y&&Dt!==D&&su(O,re,L,de,J,ve,Dt.x,Dt.y)&&no(Dt.prev,Dt,Dt.next)>=0))return!1;Dt=Dt.nextZ}for(;it&&it.z>=st;){if(it.x>=xe&&it.x<=He&&it.y>=De&&it.y<=Ve&&it!==y&&it!==D&&su(O,re,L,de,J,ve,it.x,it.y)&&no(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;Dt&&Dt.z<=gt;){if(Dt.x>=xe&&Dt.x<=He&&Dt.y>=De&&Dt.y<=Ve&&Dt!==y&&Dt!==D&&su(O,re,L,de,J,ve,Dt.x,Dt.y)&&no(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.nextZ}return!0}function xd(o,e,a){var p=o;do{var y=p.prev,x=p.next.next;!Fu(y,x)&&Nu(y,p,p.next,x)&&dc(y,x)&&dc(x,y)&&(e.push(y.i/a|0),e.push(p.i/a|0),e.push(x.i/a|0),Bu(p),Bu(p.next),p=o=x),p=p.next}while(p!==o);return uc(p)}function Oh(o,e,a,p,y,x){var D=o;do{for(var O=D.next.next;O!==D.prev;){if(D.i!==O.i&&xm(D,O)){var L=fo(D,O);return D=uc(D,D.next),L=uc(L,L.next),ou(D,e,a,p,y,x,0),void ou(L,e,a,p,y,x,0)}O=O.next}D=D.next}while(D!==o)}function kh(o,e){return o.x-e.x}function v_(o,e){var a=function(y,x){var D,O=x,L=y.x,J=y.y,re=-1/0;do{if(J<=O.y&&J>=O.next.y&&O.next.y!==O.y){var de=O.x+(J-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(de<=L&&de>re&&(re=de,D=O.x<O.next.x?O:O.next,de===L))return D}O=O.next}while(O!==x);if(!D)return null;var ve,xe=D,De=D.x,He=D.y,Ve=1/0;O=D;do{L>=O.x&&O.x>=De&&L!==O.x&&su(J<He?L:re,J,De,He,J<He?re:L,J,O.x,O.y)&&(ve=Math.abs(J-O.y)/(L-O.x),dc(O,y)&&(ve<Ve||ve===Ve&&(O.x>D.x||O.x===D.x&&S0(D,O)))&&(D=O,Ve=ve)),O=O.next}while(O!==xe);return D}(o,e);if(!a)return e;var p=fo(a,o);return uc(p,p.next),uc(a,a.next)}function S0(o,e){return no(o.prev,o,e.prev)<0&&no(e.next,o,o.next)<0}function wd(o,e,a,p,y){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*y|0)|o<<8))|o<<4))|o<<2))|o<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-p)*y|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function bm(o){var e=o,a=o;do{(e.x<a.x||e.x===a.x&&e.y<a.y)&&(a=e),e=e.next}while(e!==o);return a}function su(o,e,a,p,y,x,D,O){return(y-D)*(e-O)>=(o-D)*(x-O)&&(o-D)*(p-O)>=(a-D)*(e-O)&&(a-D)*(x-O)>=(y-D)*(p-O)}function xm(o,e){return o.next.i!==e.i&&o.prev.i!==e.i&&!function(a,p){var y=a;do{if(y.i!==a.i&&y.next.i!==a.i&&y.i!==p.i&&y.next.i!==p.i&&Nu(y,y.next,a,p))return!0;y=y.next}while(y!==a);return!1}(o,e)&&(dc(o,e)&&dc(e,o)&&function(a,p){var y=a,x=!1,D=(a.x+p.x)/2,O=(a.y+p.y)/2;do{y.y>O!=y.next.y>O&&y.next.y!==y.y&&D<(y.next.x-y.x)*(O-y.y)/(y.next.y-y.y)+y.x&&(x=!x),y=y.next}while(y!==a);return x}(o,e)&&(no(o.prev,o,e.prev)||no(o,e.prev,e))||Fu(o,e)&&no(o.prev,o,o.next)>0&&no(e.prev,e,e.next)>0)}function no(o,e,a){return(e.y-o.y)*(a.x-e.x)-(e.x-o.x)*(a.y-e.y)}function Fu(o,e){return o.x===e.x&&o.y===e.y}function Nu(o,e,a,p){var y=au(no(o,e,a)),x=au(no(o,e,p)),D=au(no(a,p,o)),O=au(no(a,p,e));return y!==x&&D!==O||!(0!==y||!Nc(o,a,e))||!(0!==x||!Nc(o,p,e))||!(0!==D||!Nc(a,o,p))||!(0!==O||!Nc(a,e,p))}function Nc(o,e,a){return e.x<=Math.max(o.x,a.x)&&e.x>=Math.min(o.x,a.x)&&e.y<=Math.max(o.y,a.y)&&e.y>=Math.min(o.y,a.y)}function au(o){return o>0?1:o<0?-1:0}function dc(o,e){return no(o.prev,o,o.next)<0?no(o,e,o.next)>=0&&no(o,o.prev,e)>=0:no(o,e,o.prev)<0||no(o,o.next,e)<0}function fo(o,e){var a=new zu(o.i,o.x,o.y),p=new zu(e.i,e.x,e.y),y=o.next,x=e.prev;return o.next=e,e.prev=o,a.next=y,y.prev=a,p.next=a,a.prev=p,x.next=p,p.prev=x,p}function Rh(o,e,a,p){var y=new zu(o,e,a);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function Bu(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function zu(o,e,a){this.i=o,this.x=e,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Cd(o,e,a,p){for(var y=0,x=e,D=a-p;x<a;x+=p)y+=(o[D]-o[x])*(o[x+1]+o[D+1]),D=x;return y}sl.exports=cc,sl.exports.default=cc,cc.deviation=function(o,e,a,p){var y=e&&e.length,x=Math.abs(Cd(o,0,y?e[0]*a:o.length,a));if(y)for(var D=0,O=e.length;D<O;D++)x-=Math.abs(Cd(o,e[D]*a,D<O-1?e[D+1]*a:o.length,a));var L=0;for(D=0;D<p.length;D+=3){var J=p[D]*a,re=p[D+1]*a,de=p[D+2]*a;L+=Math.abs((o[J]-o[de])*(o[re+1]-o[J+1])-(o[J]-o[re])*(o[de+1]-o[J+1]))}return 0===x&&0===L?0:Math.abs((L-x)/x)},cc.flatten=function(o){for(var e=o[0][0].length,a={vertices:[],holes:[],dimensions:e},p=0,y=0;y<o.length;y++){for(var x=0;x<o[y].length;x++)for(var D=0;D<e;D++)a.vertices.push(o[y][x][D]);y>0&&a.holes.push(p+=o[y-1].length)}return a};var qp=Ge(sl.exports);function wm(o,e,a,p,y){Kp(o,e,a||0,p||o.length-1,y||Cm)}function Kp(o,e,a,p,y){for(;p>a;){if(p-a>600){var x=p-a+1,D=e-a+1,O=Math.log(x),L=.5*Math.exp(2*O/3),J=.5*Math.sqrt(O*L*(x-L)/x)*(D-x/2<0?-1:1);Kp(o,e,Math.max(a,Math.floor(e-D*L/x+J)),Math.min(p,Math.floor(e+(x-D)*L/x+J)),y)}var re=o[e],de=a,ve=p;for(Vu(o,a,e),y(o[p],re)>0&&Vu(o,a,p);de<ve;){for(Vu(o,de,ve),de++,ve--;y(o[de],re)<0;)de++;for(;y(o[ve],re)>0;)ve--}0===y(o[a],re)?Vu(o,a,ve):Vu(o,++ve,p),ve<=e&&(a=ve+1),e<=ve&&(p=ve-1)}}function Vu(o,e,a){var p=o[e];o[e]=o[a],o[a]=p}function Cm(o,e){return o<e?-1:o>e?1:0}function Bc(o,e){const a=o.length;if(a<=1)return[o];const p=[];let y,x;for(let D=0;D<a;D++){const O=At(o[D]);0!==O&&(o[D].area=Math.abs(O),void 0===x&&(x=O<0),x===O<0?(y&&p.push(y),y=[o[D]]):y.push(o[D]))}if(y&&p.push(y),e>1)for(let D=0;D<p.length;D++)p[D].length<=e||(wm(p[D],e,1,p[D].length-1,Lh),p[D]=p[D].slice(0,e));return p}function Lh(o,e){return e.area-o.area}function zc(o,e,a){const p=a.patternDependencies;let y=!1;for(const x of e){const D=x.paint.get(`${o}-pattern`);D.isConstant()||(y=!0);const O=D.constantOr(null);O&&(y=!0,p[O.to]=!0,p[O.from]=!0)}return y}function Uu(o,e,a,p,y){const x=y.patternDependencies;for(const D of e){const O=D.paint.get(`${o}-pattern`).value;if("constant"!==O.kind){let L=O.evaluate({zoom:p-1},a,{},y.availableImages),J=O.evaluate({zoom:p},a,{},y.availableImages),re=O.evaluate({zoom:p+1},a,{},y.availableImages);L=L&&L.name?L.name:L,J=J&&J.name?J.name:J,re=re&&re.name?re.name:re,x[L]=!0,x[J]=!0,x[re]=!0,a.patterns[D.id]={min:L,mid:J,max:re}}}return a}class Ed{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ut,this.indexArray=new Oi,this.indexArray2=new xi,this.programConfigurations=new ru(e.layers,e.zoom),this.segments=new $i,this.segments2=new $i,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,p){this.hasPattern=zc("fill",this.layers,a);const y=this.layers[0].layout.get("fill-sort-key"),x=!y.isConstant(),D=[];for(const{feature:O,id:L,index:J,sourceLayerIndex:re}of e){const de=this.layers[0]._featureFilter.needGeometry,ve=Dl(O,de);if(!this.layers[0]._featureFilter.filter(new hr(this.zoom),ve,p))continue;const xe=x?y.evaluate(ve,{},p,a.availableImages):void 0,De={id:L,properties:O.properties,type:O.type,sourceLayerIndex:re,index:J,geometry:de?ve.geometry:kc(O),patterns:{},sortKey:xe};D.push(De)}x&&D.sort((O,L)=>O.sortKey-L.sortKey);for(const O of D){const{geometry:L,index:J,sourceLayerIndex:re}=O;if(this.hasPattern){const de=Uu("fill",this.layers,O,this.zoom,a);this.patternFeatures.push(de)}else this.addFeature(O,L,J,p,{});a.featureIndex.insert(e[J].feature,L,J,re,this.index)}}update(e,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,p)}addFeatures(e,a,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,a,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,bd),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,a,p,y,x){for(const D of Bc(a,500)){let O=0;for(const xe of D)O+=xe.length;const L=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray),J=L.vertexLength,re=[],de=[];for(const xe of D){if(0===xe.length)continue;xe!==D[0]&&de.push(re.length/2);const De=this.segments2.prepareSegment(xe.length,this.layoutVertexArray,this.indexArray2),He=De.vertexLength;this.layoutVertexArray.emplaceBack(xe[0].x,xe[0].y),this.indexArray2.emplaceBack(He+xe.length-1,He),re.push(xe[0].x),re.push(xe[0].y);for(let Ve=1;Ve<xe.length;Ve++)this.layoutVertexArray.emplaceBack(xe[Ve].x,xe[Ve].y),this.indexArray2.emplaceBack(He+Ve-1,He+Ve),re.push(xe[Ve].x),re.push(xe[Ve].y);De.vertexLength+=xe.length,De.primitiveLength+=xe.length}const ve=qp(re,de);for(let xe=0;xe<ve.length;xe+=3)this.indexArray.emplaceBack(J+ve[xe],J+ve[xe+1],J+ve[xe+2]);L.vertexLength+=O,L.primitiveLength+=ve.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,p,x,y)}}let Fh,Nh;Tn("FillBucket",Ed,{omit:["layers","patternFeatures"]});var Em={get paint(){return Nh=Nh||new bo({"fill-antialias":new Cn(me.paint_fill["fill-antialias"]),"fill-opacity":new ei(me.paint_fill["fill-opacity"]),"fill-color":new ei(me.paint_fill["fill-color"]),"fill-outline-color":new ei(me.paint_fill["fill-outline-color"]),"fill-translate":new Cn(me.paint_fill["fill-translate"]),"fill-translate-anchor":new Cn(me.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vl(me.paint_fill["fill-pattern"])})},get layout(){return Fh=Fh||new bo({"fill-sort-key":new ei(me.layout_fill["fill-sort-key"])})}};const Yp=pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Xp=pr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Bh}=Yp;var al={},Dm=_e,hc=Vc;function Vc(o,e,a,p,y){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=p,this._values=y,o.readFields(Jp,this,e)}function Jp(o,e,a){1==o?e.id=a.readVarint():2==o?function(p,y){for(var x=p.readVarint()+p.pos;p.pos<x;){var D=y._keys[p.readVarint()],O=y._values[p.readVarint()];y.properties[D]=O}}(a,e):3==o?e.type=a.readVarint():4==o&&(e._geometry=a.pos)}function Uc(o){for(var e,a,p=0,y=0,x=o.length,D=x-1;y<x;D=y++)p+=((a=o[D]).x-(e=o[y]).x)*(e.y+a.y);return p}Vc.types=["Unknown","Point","LineString","Polygon"],Vc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var e,a=o.readVarint()+o.pos,p=1,y=0,x=0,D=0,O=[];o.pos<a;){if(y<=0){var L=o.readVarint();p=7&L,y=L>>3}if(y--,1===p||2===p)x+=o.readSVarint(),D+=o.readSVarint(),1===p&&(e&&O.push(e),e=[]),e.push(new Dm(x,D));else{if(7!==p)throw new Error("unknown command "+p);e&&e.push(e[0].clone())}}return e&&O.push(e),O},Vc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var e=o.readVarint()+o.pos,a=1,p=0,y=0,x=0,D=1/0,O=-1/0,L=1/0,J=-1/0;o.pos<e;){if(p<=0){var re=o.readVarint();a=7&re,p=re>>3}if(p--,1===a||2===a)(y+=o.readSVarint())<D&&(D=y),y>O&&(O=y),(x+=o.readSVarint())<L&&(L=x),x>J&&(J=x);else if(7!==a)throw new Error("unknown command "+a)}return[D,L,O,J]},Vc.prototype.toGeoJSON=function(o,e,a){var p,y,x=this.extent*Math.pow(2,a),D=this.extent*o,O=this.extent*e,L=this.loadGeometry(),J=Vc.types[this.type];function re(xe){for(var De=0;De<xe.length;De++){var He=xe[De];xe[De]=[360*(He.x+D)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(He.y+O)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var de=[];for(p=0;p<L.length;p++)de[p]=L[p][0];re(L=de);break;case 2:for(p=0;p<L.length;p++)re(L[p]);break;case 3:for(L=function(xe){var De=xe.length;if(De<=1)return[xe];for(var He,Ve,st=[],gt=0;gt<De;gt++){var it=Uc(xe[gt]);0!==it&&(void 0===Ve&&(Ve=it<0),Ve===it<0?(He&&st.push(He),He=[xe[gt]]):He.push(xe[gt]))}return He&&st.push(He),st}(L),p=0;p<L.length;p++)for(y=0;y<L[p].length;y++)re(L[p][y])}1===L.length?L=L[0]:J="Multi"+J;var ve={type:"Feature",geometry:{type:J,coordinates:L},properties:this.properties};return"id"in this&&(ve.id=this.id),ve};var Mm=hc,Dd=ju;function ju(o,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Sm,this,e),this.length=this._features.length}function Sm(o,e,a){15===o?e.version=a.readVarint():1===o?e.name=a.readString():5===o?e.extent=a.readVarint():2===o?e._features.push(a.pos):3===o?e._keys.push(a.readString()):4===o&&e._values.push(function(p){for(var y=null,x=p.readVarint()+p.pos;p.pos<x;){var D=p.readVarint()>>3;y=1===D?p.readString():2===D?p.readFloat():3===D?p.readDouble():4===D?p.readVarint64():5===D?p.readVarint():6===D?p.readSVarint():7===D?p.readBoolean():null}return y}(a))}ju.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var e=this._pbf.readVarint()+this._pbf.pos;return new Mm(this._pbf,e,this.extent,this._keys,this._values)};var zh=Dd;function Md(o,e,a){if(3===o){var p=new zh(a,a.readVarint()+a.pos);p.length&&(e[p.name]=p)}}al.VectorTile=function(o,e){this.layers=o.readFields(Md,{},e)},al.VectorTileFeature=hc,al.VectorTileLayer=Dd;const jc=al.VectorTileFeature.types,Sd=Math.pow(2,13);function Hc(o,e,a,p,y,x,D,O){o.emplaceBack(e,a,2*Math.floor(p*Sd)+D,y*Sd*2,x*Sd*2,Math.round(O))}class Vh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.centroidVertexArray=new Et,this.indexArray=new Oi,this.programConfigurations=new ru(e.layers,e.zoom),this.segments=new $i,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,p){this.features=[],this.hasPattern=zc("fill-extrusion",this.layers,a);for(const{feature:y,id:x,index:D,sourceLayerIndex:O}of e){const L=this.layers[0]._featureFilter.needGeometry,J=Dl(y,L);if(!this.layers[0]._featureFilter.filter(new hr(this.zoom),J,p))continue;const re={id:x,sourceLayerIndex:O,index:D,geometry:L?J.geometry:kc(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Uu("fill-extrusion",this.layers,re,this.zoom,a)):this.addFeature(re,re.geometry,D,p,{}),a.featureIndex.insert(y,re.geometry,D,O,this.index,!0)}}addFeatures(e,a,p){for(const y of this.features){const{geometry:x}=y;this.addFeature(y,x,y.index,a,p)}}update(e,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,p)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bh),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Xp.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,a,p,y,x){const D={x:0,y:0,vertexCount:0};for(const O of Bc(a,500)){let L=0;for(const De of O)L+=De.length;let J=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const De of O){if(0===De.length||((o=De).every(e=>e.x<0)||o.every(e=>e.x>Mo)||o.every(e=>e.y<0)||o.every(e=>e.y>Mo)))continue;let He=0;for(let Ve=0;Ve<De.length;Ve++){const st=De[Ve];if(Ve>=1){const gt=De[Ve-1];if(!Tm(st,gt)){J.vertexLength+4>$i.MAX_VERTEX_ARRAY_LENGTH&&(J=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const it=st.sub(gt)._perp()._unit(),Dt=gt.dist(st);He+Dt>32768&&(He=0),Hc(this.layoutVertexArray,st.x,st.y,it.x,it.y,0,0,He),Hc(this.layoutVertexArray,st.x,st.y,it.x,it.y,0,1,He),D.x+=2*st.x,D.y+=2*st.y,D.vertexCount+=2,He+=Dt,Hc(this.layoutVertexArray,gt.x,gt.y,it.x,it.y,0,0,He),Hc(this.layoutVertexArray,gt.x,gt.y,it.x,it.y,0,1,He),D.x+=2*gt.x,D.y+=2*gt.y,D.vertexCount+=2;const Ot=J.vertexLength;this.indexArray.emplaceBack(Ot,Ot+2,Ot+1),this.indexArray.emplaceBack(Ot+1,Ot+2,Ot+3),J.vertexLength+=4,J.primitiveLength+=2}}}}if(J.vertexLength+L>$i.MAX_VERTEX_ARRAY_LENGTH&&(J=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray)),"Polygon"!==jc[e.type])continue;const re=[],de=[],ve=J.vertexLength;for(const De of O)if(0!==De.length){De!==O[0]&&de.push(re.length/2);for(let He=0;He<De.length;He++){const Ve=De[He];Hc(this.layoutVertexArray,Ve.x,Ve.y,0,0,1,1,0),D.x+=Ve.x,D.y+=Ve.y,D.vertexCount+=1,re.push(Ve.x),re.push(Ve.y)}}const xe=qp(re,de);for(let De=0;De<xe.length;De+=3)this.indexArray.emplaceBack(ve+xe[De],ve+xe[De+2],ve+xe[De+1]);J.primitiveLength+=xe.length/3,J.vertexLength+=L}var o;for(let O=0;O<D.vertexCount;O++)this.centroidVertexArray.emplaceBack(Math.floor(D.x/D.vertexCount),Math.floor(D.y/D.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,p,x,y)}}function Tm(o,e){return o.x===e.x&&(o.x<0||o.x>Mo)||o.y===e.y&&(o.y<0||o.y>Mo)}let $c;Tn("FillExtrusionBucket",Vh,{omit:["layers","features"]});var lu={get paint(){return $c=$c||new bo({"fill-extrusion-opacity":new Cn(me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ei(me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Cn(me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Cn(me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vl(me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ei(me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ei(me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Cn(me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function cu(o,e){return o.x*e.x+o.y*e.y}function ef(o,e){if(1===o.length){let a=0;const p=e[a++];let y;for(;!y||p.equals(y);)if(y=e[a++],!y)return 1/0;for(;a<e.length;a++){const x=e[a],D=o[0],O=y.sub(p),L=x.sub(p),J=D.sub(p),re=cu(O,O),de=cu(O,L),ve=cu(L,L),xe=cu(J,O),De=cu(J,L),He=re*ve-de*de,Ve=(ve*xe-de*De)/He,st=(re*De-de*xe)/He,gt=p.z*(1-Ve-st)+y.z*Ve+x.z*st;if(isFinite(gt))return gt}return 1/0}{let a=1/0;for(const p of e)a=Math.min(a,p.z);return a}}const Im=pr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Uh}=Im,Am=pr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:tf}=Am,Td=al.VectorTileFeature.types,nf=Math.cos(Math.PI/180*37.5),Pm=Math.pow(2,14)/.5;class jh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new pn,this.layoutVertexArray2=new zn,this.indexArray=new Oi,this.programConfigurations=new ru(e.layers,e.zoom),this.segments=new $i,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,p){this.hasPattern=zc("line",this.layers,a);const y=this.layers[0].layout.get("line-sort-key"),x=!y.isConstant(),D=[];for(const{feature:O,id:L,index:J,sourceLayerIndex:re}of e){const de=this.layers[0]._featureFilter.needGeometry,ve=Dl(O,de);if(!this.layers[0]._featureFilter.filter(new hr(this.zoom),ve,p))continue;const xe=x?y.evaluate(ve,{},p):void 0,De={id:L,properties:O.properties,type:O.type,sourceLayerIndex:re,index:J,geometry:de?ve.geometry:kc(O),patterns:{},sortKey:xe};D.push(De)}x&&D.sort((O,L)=>O.sortKey-L.sortKey);for(const O of D){const{geometry:L,index:J,sourceLayerIndex:re}=O;if(this.hasPattern){const de=Uu("line",this.layers,O,this.zoom,a);this.patternFeatures.push(de)}else this.addFeature(O,L,J,p,{});a.featureIndex.insert(e[J].feature,L,J,re,this.index)}}update(e,a,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,p)}addFeatures(e,a,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,a,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,tf)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Uh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,a,p,y,x){const D=this.layers[0].layout,O=D.get("line-join").evaluate(e,{}),L=D.get("line-cap"),J=D.get("line-miter-limit"),re=D.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const de of a)this.addLine(de,e,O,L,J,re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,p,x,y)}addLine(e,a,p,y,x,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let st=0;st<e.length-1;st++)this.totalDistance+=e[st].dist(e[st+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O="Polygon"===Td[a.type];let L=e.length;for(;L>=2&&e[L-1].equals(e[L-2]);)L--;let J=0;for(;J<L-1&&e[J].equals(e[J+1]);)J++;if(L<(O?3:2))return;"bevel"===p&&(x=1.05);const re=this.overscaling<=16?122880/(512*this.overscaling):0,de=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let ve,xe,De,He,Ve;this.e1=this.e2=-1,O&&(ve=e[L-2],Ve=e[J].sub(ve)._unit()._perp());for(let st=J;st<L;st++){if(De=st===L-1?O?e[J+1]:void 0:e[st+1],De&&e[st].equals(De))continue;Ve&&(He=Ve),ve&&(xe=ve),ve=e[st],Ve=De?De.sub(ve)._unit()._perp():He,He=He||Ve;let gt=He.add(Ve);0===gt.x&&0===gt.y||gt._unit();const it=He.x*Ve.x+He.y*Ve.y,Dt=gt.x*Ve.x+gt.y*Ve.y,Ot=0!==Dt?1/Dt:1/0,Ht=2*Math.sqrt(2-2*Dt),Fn=Dt<nf&&xe&&De,Un=He.x*Ve.y-He.y*Ve.x>0;if(Fn&&st>J){const fn=ve.dist(xe);if(fn>2*re){const En=ve.sub(ve.sub(xe)._mult(re/fn)._round());this.updateDistance(xe,En),this.addCurrentVertex(En,He,0,0,de),xe=En}}const Mn=xe&&De;let vn=Mn?p:O?"butt":y;if(Mn&&"round"===vn&&(Ot<D?vn="miter":Ot<=2&&(vn="fakeround")),"miter"===vn&&Ot>x&&(vn="bevel"),"bevel"===vn&&(Ot>2&&(vn="flipbevel"),Ot<x&&(vn="miter")),xe&&this.updateDistance(xe,ve),"miter"===vn)gt._mult(Ot),this.addCurrentVertex(ve,gt,0,0,de);else if("flipbevel"===vn){if(Ot>100)gt=Ve.mult(-1);else{const fn=Ot*He.add(Ve).mag()/He.sub(Ve).mag();gt._perp()._mult(fn*(Un?-1:1))}this.addCurrentVertex(ve,gt,0,0,de),this.addCurrentVertex(ve,gt.mult(-1),0,0,de)}else if("bevel"===vn||"fakeround"===vn){const fn=-Math.sqrt(Ot*Ot-1),En=Un?fn:0,wn=Un?0:fn;if(xe&&this.addCurrentVertex(ve,He,En,wn,de),"fakeround"===vn){const Jt=Math.round(180*Ht/Math.PI/20);for(let jn=1;jn<Jt;jn++){let Hn=jn/Jt;if(.5!==Hn){const or=Hn-.5;Hn+=Hn*or*(Hn-1)*((1.0904+it*(it*(3.55645-1.43519*it)-3.2452))*or*or+(.848013+it*(.215638*it-1.06021)))}const ki=Ve.sub(He)._mult(Hn)._add(He)._unit()._mult(Un?-1:1);this.addHalfVertex(ve,ki.x,ki.y,!1,Un,0,de)}}De&&this.addCurrentVertex(ve,Ve,-En,-wn,de)}else if("butt"===vn)this.addCurrentVertex(ve,gt,0,0,de);else if("square"===vn){const fn=xe?1:-1;this.addCurrentVertex(ve,gt,fn,fn,de)}else"round"===vn&&(xe&&(this.addCurrentVertex(ve,He,0,0,de),this.addCurrentVertex(ve,He,1,1,de,!0)),De&&(this.addCurrentVertex(ve,Ve,-1,-1,de,!0),this.addCurrentVertex(ve,Ve,0,0,de)));if(Fn&&st<L-1){const fn=ve.dist(De);if(fn>2*re){const En=ve.add(De.sub(ve)._mult(re/fn)._round());this.updateDistance(ve,En),this.addCurrentVertex(En,Ve,0,0,de),ve=En}}}}addCurrentVertex(e,a,p,y,x,D=!1){const O=a.y*y-a.x,L=-a.y-a.x*y;this.addHalfVertex(e,a.x+a.y*p,a.y-a.x*p,D,!1,p,x),this.addHalfVertex(e,O,L,D,!0,-y,x),this.distance>Pm/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,a,p,y,x,D))}addHalfVertex({x:e,y:a},p,y,x,D,O,L){const J=.5*(this.lineClips?this.scaledDistance*(Pm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(x?1:0),(a<<1)+(D?1:0),Math.round(63*p)+128,Math.round(63*y)+128,1+(0===O?0:O<0?-1:1)|(63&J)<<2,J>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const re=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,re),L.primitiveLength++),D?this.e2=re:this.e1=re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,a){this.distance+=e.dist(a),this.updateScaledDistance()}}let uu,rf;Tn("LineBucket",jh,{omit:["layers","patternFeatures"]});var Gc={get paint(){return rf=rf||new bo({"line-opacity":new ei(me.paint_line["line-opacity"]),"line-color":new ei(me.paint_line["line-color"]),"line-translate":new Cn(me.paint_line["line-translate"]),"line-translate-anchor":new Cn(me.paint_line["line-translate-anchor"]),"line-width":new ei(me.paint_line["line-width"]),"line-gap-width":new ei(me.paint_line["line-gap-width"]),"line-offset":new ei(me.paint_line["line-offset"]),"line-blur":new ei(me.paint_line["line-blur"]),"line-dasharray":new Ac(me.paint_line["line-dasharray"]),"line-pattern":new Vl(me.paint_line["line-pattern"]),"line-gradient":new ks(me.paint_line["line-gradient"])})},get layout(){return uu=uu||new bo({"line-cap":new Cn(me.layout_line["line-cap"]),"line-join":new ei(me.layout_line["line-join"]),"line-miter-limit":new Cn(me.layout_line["line-miter-limit"]),"line-round-limit":new Cn(me.layout_line["line-round-limit"]),"line-sort-key":new ei(me.layout_line["line-sort-key"])})}};class Hu extends ei{possiblyEvaluate(e,a){return a=new hr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(e,a)}evaluate(e,a,p,y){return a=mt({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(e,a,p,y)}}let Id;function du(o,e){return e>0?e+2*o:o}const $u=pr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Om=pr([{name:"a_projected_pos",components:3,type:"Float32"}],4);pr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const km=pr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);pr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const sf=pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Zc=pr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gu(o,e,a){return o.sections.forEach(p=>{p.text=function(y,x,D){const O=x.layout.get("text-transform").evaluate(D,{});return"uppercase"===O?y=y.toLocaleUpperCase():"lowercase"===O&&(y=y.toLocaleLowerCase()),os.applyArabicShaping&&(y=os.applyArabicShaping(y)),y}(p.text,e,a)}),o}pr([{name:"triangle",components:3,type:"Uint16"}]),pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),pr([{type:"Float32",name:"offsetX"}]),pr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Wc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var af=Xi,Ad=function(o,e,a,p,y){var x,D,O=8*y-p-1,L=(1<<O)-1,J=L>>1,re=-7,de=a?y-1:0,ve=a?-1:1,xe=o[e+de];for(de+=ve,x=xe&(1<<-re)-1,xe>>=-re,re+=O;re>0;x=256*x+o[e+de],de+=ve,re-=8);for(D=x&(1<<-re)-1,x>>=-re,re+=p;re>0;D=256*D+o[e+de],de+=ve,re-=8);if(0===x)x=1-J;else{if(x===L)return D?NaN:1/0*(xe?-1:1);D+=Math.pow(2,p),x-=J}return(xe?-1:1)*D*Math.pow(2,x-p)},Rm=function(o,e,a,p,y,x){var D,O,L,J=8*x-y-1,re=(1<<J)-1,de=re>>1,ve=23===y?Math.pow(2,-24)-Math.pow(2,-77):0,xe=p?0:x-1,De=p?1:-1,He=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(O=isNaN(e)?1:0,D=re):(D=Math.floor(Math.log(e)/Math.LN2),e*(L=Math.pow(2,-D))<1&&(D--,L*=2),(e+=D+de>=1?ve/L:ve*Math.pow(2,1-de))*L>=2&&(D++,L/=2),D+de>=re?(O=0,D=re):D+de>=1?(O=(e*L-1)*Math.pow(2,y),D+=de):(O=e*Math.pow(2,de-1)*Math.pow(2,y),D=0));y>=8;o[a+xe]=255&O,xe+=De,O/=256,y-=8);for(D=D<<y|O,J+=y;J>0;o[a+xe]=255&D,xe+=De,D/=256,J-=8);o[a+xe-De]|=128*He};function Xi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Xi.Varint=0,Xi.Fixed64=1,Xi.Bytes=2,Xi.Fixed32=5;var Zu=4294967296,Lm=1/Zu,Fm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function pc(o){return o.type===Xi.Bytes?o.readVarint()+o.pos:o.pos+1}function Nm(o,e,a){var p=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));a.realloc(p);for(var y=a.pos-1;y>=o;y--)a.buf[y+p]=a.buf[y]}function Bm(o,e){for(var a=0;a<o.length;a++)e.writeVarint(o[a])}function lf(o,e){for(var a=0;a<o.length;a++)e.writeSVarint(o[a])}function Pd(o,e){for(var a=0;a<o.length;a++)e.writeFloat(o[a])}function cf(o,e){for(var a=0;a<o.length;a++)e.writeDouble(o[a])}function qu(o,e){for(var a=0;a<o.length;a++)e.writeBoolean(o[a])}function uf(o,e){for(var a=0;a<o.length;a++)e.writeFixed32(o[a])}function Hh(o,e){for(var a=0;a<o.length;a++)e.writeSFixed32(o[a])}function zm(o,e){for(var a=0;a<o.length;a++)e.writeFixed64(o[a])}function $h(o,e){for(var a=0;a<o.length;a++)e.writeSFixed64(o[a])}function fc(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+16777216*o[e+3]}function hu(o,e,a){o[a]=e,o[a+1]=e>>>8,o[a+2]=e>>>16,o[a+3]=e>>>24}function df(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+(o[e+3]<<24)}Xi.prototype={destroy:function(){this.buf=null},readFields:function(o,e,a){for(a=a||this.length;this.pos<a;){var p=this.readVarint(),y=p>>3,x=this.pos;this.type=7&p,o(y,e,this),this.pos===x&&this.skip(p)}return e},readMessage:function(o,e){return this.readFields(o,e,this.readVarint()+this.pos)},readFixed32:function(){var o=fc(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=df(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=fc(this.buf,this.pos)+fc(this.buf,this.pos+4)*Zu;return this.pos+=8,o},readSFixed64:function(){var o=fc(this.buf,this.pos)+df(this.buf,this.pos+4)*Zu;return this.pos+=8,o},readFloat:function(){var o=Ad(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Ad(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var e,a,p=this.buf;return e=127&(a=p[this.pos++]),a<128?e:(e|=(127&(a=p[this.pos++]))<<7,a<128?e:(e|=(127&(a=p[this.pos++]))<<14,a<128?e:(e|=(127&(a=p[this.pos++]))<<21,a<128?e:function(y,x,D){var O,L,J=D.buf;if(O=(112&(L=J[D.pos++]))>>4,L<128||(O|=(127&(L=J[D.pos++]))<<3,L<128)||(O|=(127&(L=J[D.pos++]))<<10,L<128)||(O|=(127&(L=J[D.pos++]))<<17,L<128)||(O|=(127&(L=J[D.pos++]))<<24,L<128)||(O|=(1&(L=J[D.pos++]))<<31,L<128))return function Wu(o,e,a){return a?4294967296*e+(o>>>0):4294967296*(e>>>0)+(o>>>0)}(y,O,x);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(a=p[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,e=this.pos;return this.pos=o,o-e>=12&&Fm?Fm.decode(this.buf.subarray(e,o)):function(a,p,y){for(var x="",D=p;D<y;){var O,L,J,re=a[D],de=null,ve=re>239?4:re>223?3:re>191?2:1;if(D+ve>y)break;1===ve?re<128&&(de=re):2===ve?128==(192&(O=a[D+1]))&&(de=(31&re)<<6|63&O)<=127&&(de=null):3===ve?(L=a[D+2],128==(192&(O=a[D+1]))&&128==(192&L)&&((de=(15&re)<<12|(63&O)<<6|63&L)<=2047||de>=55296&&de<=57343)&&(de=null)):4===ve&&(L=a[D+2],J=a[D+3],128==(192&(O=a[D+1]))&&128==(192&L)&&128==(192&J)&&((de=(15&re)<<18|(63&O)<<12|(63&L)<<6|63&J)<=65535||de>=1114112)&&(de=null)),null===de?(de=65533,ve=1):de>65535&&(de-=65536,x+=String.fromCharCode(de>>>10&1023|55296),de=56320|1023&de),x+=String.fromCharCode(de),D+=ve}return x}(this.buf,e,o)},readBytes:function(){var o=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,o);return this.pos=o,e},readPackedVarint:function(o,e){if(this.type!==Xi.Bytes)return o.push(this.readVarint(e));var a=pc(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(e));return o},readPackedSVarint:function(o){if(this.type!==Xi.Bytes)return o.push(this.readSVarint());var e=pc(this);for(o=o||[];this.pos<e;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Xi.Bytes)return o.push(this.readBoolean());var e=pc(this);for(o=o||[];this.pos<e;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Xi.Bytes)return o.push(this.readFloat());var e=pc(this);for(o=o||[];this.pos<e;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Xi.Bytes)return o.push(this.readDouble());var e=pc(this);for(o=o||[];this.pos<e;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Xi.Bytes)return o.push(this.readFixed32());var e=pc(this);for(o=o||[];this.pos<e;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Xi.Bytes)return o.push(this.readSFixed32());var e=pc(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Xi.Bytes)return o.push(this.readFixed64());var e=pc(this);for(o=o||[];this.pos<e;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Xi.Bytes)return o.push(this.readSFixed64());var e=pc(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed64());return o},skip:function(o){var e=7&o;if(e===Xi.Varint)for(;this.buf[this.pos++]>127;);else if(e===Xi.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Xi.Fixed32)this.pos+=4;else{if(e!==Xi.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(o,e){this.writeVarint(o<<3|e)},realloc:function(o){for(var e=this.length||16;e<this.pos+o;)e*=2;if(e!==this.length){var a=new Uint8Array(e);a.set(this.buf),this.buf=a,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),hu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),hu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),hu(this.buf,-1&o,this.pos),hu(this.buf,Math.floor(o*Lm),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),hu(this.buf,-1&o,this.pos),hu(this.buf,Math.floor(o*Lm),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(e,a){var p,y,x,O;if(e>=0?(p=e%4294967296|0,y=e/4294967296|0):(y=~(-e/4294967296),4294967295^(p=~(-e%4294967296))?p=p+1|0:(p=0,y=y+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),x=p,(O=a).buf[O.pos++]=127&x|128,x>>>=7,O.buf[O.pos++]=127&x|128,x>>>=7,O.buf[O.pos++]=127&x|128,x>>>=7,O.buf[O.pos++]=127&x|128,O.buf[O.pos]=127&(x>>>=7),function(x,D){var O=(7&x)<<4;D.buf[D.pos++]|=O|((x>>>=3)?128:0),x&&(D.buf[D.pos++]=127&x|((x>>>=7)?128:0),x&&(D.buf[D.pos++]=127&x|((x>>>=7)?128:0),x&&(D.buf[D.pos++]=127&x|((x>>>=7)?128:0),x&&(D.buf[D.pos++]=127&x|((x>>>=7)?128:0),x&&(D.buf[D.pos++]=127&x)))))}(y,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var e=this.pos;this.pos=function(p,y,x){for(var D,O,L=0;L<y.length;L++){if((D=y.charCodeAt(L))>55295&&D<57344){if(!O){D>56319||L+1===y.length?(p[x++]=239,p[x++]=191,p[x++]=189):O=D;continue}if(D<56320){p[x++]=239,p[x++]=191,p[x++]=189,O=D;continue}D=O-55296<<10|D-56320|65536,O=null}else O&&(p[x++]=239,p[x++]=191,p[x++]=189,O=null);D<128?p[x++]=D:(D<2048?p[x++]=D>>6|192:(D<65536?p[x++]=D>>12|224:(p[x++]=D>>18|240,p[x++]=D>>12&63|128),p[x++]=D>>6&63|128),p[x++]=63&D|128)}return x}(this.buf,o,this.pos);var a=this.pos-e;a>=128&&Nm(e,a,this),this.pos=e-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),Rm(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Rm(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var e=o.length;this.writeVarint(e),this.realloc(e);for(var a=0;a<e;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,e){this.pos++;var a=this.pos;o(e,this);var p=this.pos-a;p>=128&&Nm(a,p,this),this.pos=a-1,this.writeVarint(p),this.pos+=p},writeMessage:function(o,e,a){this.writeTag(o,Xi.Bytes),this.writeRawMessage(e,a)},writePackedVarint:function(o,e){e.length&&this.writeMessage(o,Bm,e)},writePackedSVarint:function(o,e){e.length&&this.writeMessage(o,lf,e)},writePackedBoolean:function(o,e){e.length&&this.writeMessage(o,qu,e)},writePackedFloat:function(o,e){e.length&&this.writeMessage(o,Pd,e)},writePackedDouble:function(o,e){e.length&&this.writeMessage(o,cf,e)},writePackedFixed32:function(o,e){e.length&&this.writeMessage(o,uf,e)},writePackedSFixed32:function(o,e){e.length&&this.writeMessage(o,Hh,e)},writePackedFixed64:function(o,e){e.length&&this.writeMessage(o,zm,e)},writePackedSFixed64:function(o,e){e.length&&this.writeMessage(o,$h,e)},writeBytesField:function(o,e){this.writeTag(o,Xi.Bytes),this.writeBytes(e)},writeFixed32Field:function(o,e){this.writeTag(o,Xi.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(o,e){this.writeTag(o,Xi.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(o,e){this.writeTag(o,Xi.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(o,e){this.writeTag(o,Xi.Fixed64),this.writeSFixed64(e)},writeVarintField:function(o,e){this.writeTag(o,Xi.Varint),this.writeVarint(e)},writeSVarintField:function(o,e){this.writeTag(o,Xi.Varint),this.writeSVarint(e)},writeStringField:function(o,e){this.writeTag(o,Xi.Bytes),this.writeString(e)},writeFloatField:function(o,e){this.writeTag(o,Xi.Fixed32),this.writeFloat(e)},writeDoubleField:function(o,e){this.writeTag(o,Xi.Fixed64),this.writeDouble(e)},writeBooleanField:function(o,e){this.writeVarintField(o,Boolean(e))}};var mc,Od=Ge(af);function Vm(o,e,a){1===o&&a.readMessage(Um,e)}function Um(o,e,a){if(3===o){const{id:p,bitmap:y,width:x,height:D,left:O,top:L,advance:J}=a.readMessage(jm,{});e.push({id:p,bitmap:new Lu({width:x+6,height:D+6},y),metrics:{width:x,height:D,left:O,top:L,advance:J}})}}function jm(o,e,a){1===o?e.id=a.readVarint():2===o?e.bitmap=a.readBytes():3===o?e.width=a.readVarint():4===o?e.height=a.readVarint():5===o?e.left=a.readSVarint():6===o?e.top=a.readSVarint():7===o&&(e.advance=a.readVarint())}function hf(o){let e=0,a=0;for(const D of o)e+=D.w*D.h,a=Math.max(a,D.w);o.sort((D,O)=>O.h-D.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),a),h:1/0}];let y=0,x=0;for(const D of o)for(let O=p.length-1;O>=0;O--){const L=p[O];if(!(D.w>L.w||D.h>L.h)){if(D.x=L.x,D.y=L.y,x=Math.max(x,D.y+D.h),y=Math.max(y,D.x+D.w),D.w===L.w&&D.h===L.h){const J=p.pop();O<p.length&&(p[O]=J)}else D.h===L.h?(L.x+=D.w,L.w-=D.w):D.w===L.w?(L.y+=D.h,L.h-=D.h):(p.push({x:L.x+D.w,y:L.y,w:L.w-D.w,h:D.h}),L.y+=D.h,L.h-=D.h);break}}return{w:y,h:x,fill:e/(y*x)||0}}class Ku{constructor(e,{pixelRatio:a,version:p,stretchX:y,stretchY:x,content:D}){this.paddedRect=e,this.pixelRatio=a,this.stretchX=y,this.stretchY=x,this.content=D,this.version=p}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class pf{constructor(e,a){const p={},y={};this.haveRenderCallbacks=[];const x=[];this.addImages(e,p,x),this.addImages(a,y,x);const{w:D,h:O}=hf(x),L=new oa({width:D||1,height:O||1});for(const J in e){const re=e[J],de=p[J].paddedRect;oa.copy(re.data,L,{x:0,y:0},{x:de.x+1,y:de.y+1},re.data)}for(const J in a){const re=a[J],de=y[J].paddedRect,ve=de.x+1,xe=de.y+1,De=re.data.width,He=re.data.height;oa.copy(re.data,L,{x:0,y:0},{x:ve,y:xe},re.data),oa.copy(re.data,L,{x:0,y:He-1},{x:ve,y:xe-1},{width:De,height:1}),oa.copy(re.data,L,{x:0,y:0},{x:ve,y:xe+He},{width:De,height:1}),oa.copy(re.data,L,{x:De-1,y:0},{x:ve-1,y:xe},{width:1,height:He}),oa.copy(re.data,L,{x:0,y:0},{x:ve+De,y:xe},{width:1,height:He})}this.image=L,this.iconPositions=p,this.patternPositions=y}addImages(e,a,p){for(const y in e){const x=e[y],D={x:0,y:0,w:x.data.width+2,h:x.data.height+2};p.push(D),a[y]=new Ku(D,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(e,a){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in e.updatedImages)this.patchUpdatedImage(this.iconPositions[p],e.getImage(p),a),this.patchUpdatedImage(this.patternPositions[p],e.getImage(p),a)}patchUpdatedImage(e,a,p){if(!e||!a||e.version===a.version)return;e.version=a.version;const[y,x]=e.tl;p.update(a.data,void 0,{x:y,y:x})}}Tn("ImagePosition",Ku),Tn("ImageAtlas",pf),g.WritingMode=void 0,(mc=g.WritingMode||(g.WritingMode={}))[mc.none=0]="none",mc[mc.horizontal=1]="horizontal",mc[mc.vertical=2]="vertical",mc[mc.horizontalOnly=3]="horizontalOnly";class Yu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,a){const p=new Yu;return p.scale=e||1,p.fontStack=a,p}static forImage(e){const a=new Yu;return a.imageName=e,a}}class gc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,a){const p=new gc;for(let y=0;y<e.sections.length;y++){const x=e.sections[y];x.image?p.addImageSection(x):p.addTextSection(x,a)}return p}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let a="";for(let p=0;p<e.length;p++){const y=e.charCodeAt(p+1)||null,x=e.charCodeAt(p-1)||null;a+=y&&Cl(y)&&!Wc[e[p+1]]||x&&Cl(x)&&!Wc[e[p-1]]||!Wc[e[p]]?e[p]:Wc[e[p]]}return a}(this.text)}trim(){let e=0;for(let p=0;p<this.text.length&&Rd[this.text.charCodeAt(p)];p++)e++;let a=this.text.length;for(let p=this.text.length-1;p>=0&&p>=e&&Rd[this.text.charCodeAt(p)];p--)a--;this.text=this.text.substring(e,a),this.sectionIndex=this.sectionIndex.slice(e,a)}substring(e,a){const p=new gc;return p.text=this.text.substring(e,a),p.sectionIndex=this.sectionIndex.slice(e,a),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,a)=>Math.max(e,this.sections[a].scale),0)}addTextSection(e,a){this.text+=e.text,this.sections.push(Yu.forText(e.scale,e.fontStack||a));const p=this.sections.length-1;for(let y=0;y<e.text.length;++y)this.sectionIndex.push(p)}addImageSection(e){const a=e.image?e.image.name:"";if(0===a.length)return void ze("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Yu.forImage(a)),this.sectionIndex.push(this.sections.length-1)):ze("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pu(o,e,a,p,y,x,D,O,L,J,re,de,ve,xe,De,He){const Ve=gc.fromFeature(o,y);let st;de===g.WritingMode.vertical&&Ve.verticalizePunctuation();const{processBidirectionalText:gt,processStyledBidirectionalText:it}=os;if(gt&&1===Ve.sections.length){st=[];const Ht=gt(Ve.toString(),Nd(Ve,J,x,e,p,xe,De));for(const Fn of Ht){const Un=new gc;Un.text=Fn,Un.sections=Ve.sections;for(let Mn=0;Mn<Fn.length;Mn++)Un.sectionIndex.push(0);st.push(Un)}}else if(it){st=[];const Ht=it(Ve.text,Ve.sectionIndex,Nd(Ve,J,x,e,p,xe,De));for(const Fn of Ht){const Un=new gc;Un.text=Fn[0],Un.sectionIndex=Fn[1],Un.sections=Ve.sections,st.push(Un)}}else st=function(Ht,Fn){const Un=[],Mn=Ht.text;let vn=0;for(const fn of Fn)Un.push(Ht.substring(vn,fn)),vn=fn;return vn<Mn.length&&Un.push(Ht.substring(vn,Mn.length)),Un}(Ve,Nd(Ve,J,x,e,p,xe,De));const Dt=[],Ot={positionedLines:Dt,text:Ve.toString(),top:re[1],bottom:re[1],left:re[0],right:re[0],writingMode:de,iconsInText:!1,verticalizable:!1};return function(Ht,Fn,Un,Mn,vn,fn,En,wn,Jt,jn,Hn,ki){let or=0,gr=-17,mo=0,Ca=0;const Zo="right"===wn?1:"left"===wn?0:.5;let go=0;for(const io of vn){io.trim();const xo=io.getMaxScale(),Bo=24*(xo-1),zs={positionedGlyphs:[],lineOffset:0};Ht.positionedLines[go]=zs;const Ko=zs.positionedGlyphs;let bs=0;if(!io.length()){gr+=fn,++go;continue}for(let Yr=0;Yr<io.length();Yr++){const Ri=io.getSection(Yr),Vs=io.getSectionIndex(Yr),wo=io.getCharCode(Yr);let Pr=0,Ea=null,ul=null,Da=null,as=24;const Us=!(Jt===g.WritingMode.horizontal||!Hn&&!Os(wo)||Hn&&(Rd[wo]||(So=wo,bn.Arabic(So)||bn["Arabic Supplement"](So)||bn["Arabic Extended-A"](So)||bn["Arabic Presentation Forms-A"](So)||bn["Arabic Presentation Forms-B"](So))));if(Ri.imageName){const aa=Mn[Ri.imageName];if(!aa)continue;Da=Ri.imageName,Ht.iconsInText=Ht.iconsInText||!0,ul=aa.paddedRect;const ls=aa.displaySize;Ri.scale=24*Ri.scale/ki,Ea={width:ls[0],height:ls[1],left:1,top:-3,advance:Us?ls[1]:ls[0]},Pr=Bo+(24-ls[1]*Ri.scale),as=Ea.advance;const Zl=Us?ls[0]*Ri.scale-24*xo:ls[1]*Ri.scale-24*xo;Zl>0&&Zl>bs&&(bs=Zl)}else{const aa=Un[Ri.fontStack],ls=aa&&aa[wo];if(ls&&ls.rect)ul=ls.rect,Ea=ls.metrics;else{const Zl=Fn[Ri.fontStack],Cu=Zl&&Zl[wo];if(!Cu)continue;Ea=Cu.metrics}Pr=24*(xo-Ri.scale)}Us?(Ht.verticalizable=!0,Ko.push({glyph:wo,imageName:Da,x:or,y:gr+Pr,vertical:Us,scale:Ri.scale,fontStack:Ri.fontStack,sectionIndex:Vs,metrics:Ea,rect:ul}),or+=as*Ri.scale+jn):(Ko.push({glyph:wo,imageName:Da,x:or,y:gr+Pr,vertical:Us,scale:Ri.scale,fontStack:Ri.fontStack,sectionIndex:Vs,metrics:Ea,rect:ul}),or+=Ea.advance*Ri.scale+jn)}0!==Ko.length&&(mo=Math.max(or-jn,mo),ff(Ko,0,Ko.length-1,Zo,bs)),or=0;const ro=fn*xo+bs;zs.lineOffset=Math.max(bs,Bo),gr+=ro,Ca=Math.max(ro,Ca),++go}var So;const Wo=gr- -17,{horizontalAlign:qo,verticalAlign:Bs}=Zh(En);(function(io,xo,Bo,zs,Ko,bs,ro,Yr,Ri){const Vs=(xo-Bo)*Ko;let wo=0;wo=bs!==ro?-Yr*zs- -17:(-zs*Ri+.5)*ro;for(const Pr of io)for(const Ea of Pr.positionedGlyphs)Ea.x+=Vs,Ea.y+=wo})(Ht.positionedLines,Zo,qo,Bs,mo,Ca,fn,Wo,vn.length),Ht.top+=-Bs*Wo,Ht.bottom=Ht.top+Wo,Ht.left+=-qo*mo,Ht.right=Ht.left+mo}(Ot,e,a,p,st,D,O,L,de,J,ve,He),!function(Ht){for(const Fn of Ht)if(0!==Fn.positionedGlyphs.length)return!1;return!0}(Dt)&&Ot}const Rd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fs={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ld(o,e,a,p,y,x){if(e.imageName){const D=p[e.imageName];return D?D.displaySize[0]*e.scale*24/x+y:0}{const D=a[e.fontStack],O=D&&D[o];return O?O.metrics.advance*e.scale+y:0}}function Fd(o,e,a,p){const y=Math.pow(o-e,2);return p?o<e?y/2:2*y:y+Math.abs(a)*a}function Gh(o,e,a){let p=0;return 10===o&&(p-=1e4),a&&(p+=150),40!==o&&65288!==o||(p+=50),41!==e&&65289!==e||(p+=50),p}function Go(o,e,a,p,y,x){let D=null,O=Fd(e,a,y,x);for(const L of p){const J=Fd(e-L.x,a,y,x)+L.badness;J<=O&&(D=L,O=J)}return{index:o,x:e,priorBreak:D,badness:O}}function fu(o){return o?fu(o.priorBreak).concat(o.index):[]}function Nd(o,e,a,p,y,x,D){if("point"!==x)return[];if(!o)return[];const O=[],L=function(ve,xe,De,He,Ve,st){let gt=0;for(let it=0;it<ve.length();it++){const Dt=ve.getSection(it);gt+=Ld(ve.getCharCode(it),Dt,He,Ve,xe,st)}return gt/Math.max(1,Math.ceil(gt/De))}(o,e,a,p,y,D),J=o.text.indexOf("\u200b")>=0;let re=0;for(let ve=0;ve<o.length();ve++){const xe=o.getSection(ve),De=o.getCharCode(ve);if(Rd[De]||(re+=Ld(De,xe,p,y,e,D)),ve<o.length()-1){const He=!((de=De)<11904||!(bn["Bopomofo Extended"](de)||bn.Bopomofo(de)||bn["CJK Compatibility Forms"](de)||bn["CJK Compatibility Ideographs"](de)||bn["CJK Compatibility"](de)||bn["CJK Radicals Supplement"](de)||bn["CJK Strokes"](de)||bn["CJK Symbols and Punctuation"](de)||bn["CJK Unified Ideographs Extension A"](de)||bn["CJK Unified Ideographs"](de)||bn["Enclosed CJK Letters and Months"](de)||bn["Halfwidth and Fullwidth Forms"](de)||bn.Hiragana(de)||bn["Ideographic Description Characters"](de)||bn["Kangxi Radicals"](de)||bn["Katakana Phonetic Extensions"](de)||bn.Katakana(de)||bn["Vertical Forms"](de)||bn["Yi Radicals"](de)||bn["Yi Syllables"](de)));(Fs[De]||He||xe.imageName)&&O.push(Go(ve+1,re,L,O,Gh(De,o.getCharCode(ve+1),He&&J),!1))}}var de;return fu(Go(o.length(),re,L,O,0,!0))}function Zh(o){let e=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:e,verticalAlign:a}}function ff(o,e,a,p,y){if(!p&&!y)return;const x=o[a],D=(o[a].x+x.metrics.advance*x.scale)*p;for(let O=e;O<=a;O++)o[O].x-=D,o[O].y+=y}function mf(o,e,a){const{horizontalAlign:p,verticalAlign:y}=Zh(a),x=e[0]-o.displaySize[0]*p,D=e[1]-o.displaySize[1]*y;return{image:o,top:D,bottom:D+o.displaySize[1],left:x,right:x+o.displaySize[0]}}function gf(o,e,a,p,y,x){const D=o.image;let O;if(D.content){const Ve=D.content,st=D.pixelRatio||1;O=[Ve[0]/st,Ve[1]/st,D.displaySize[0]-Ve[2]/st,D.displaySize[1]-Ve[3]/st]}const L=e.left*x,J=e.right*x;let re,de,ve,xe;"width"===a||"both"===a?(xe=y[0]+L-p[3],de=y[0]+J+p[1]):(xe=y[0]+(L+J-D.displaySize[0])/2,de=xe+D.displaySize[0]);const De=e.top*x,He=e.bottom*x;return"height"===a||"both"===a?(re=y[1]+De-p[0],ve=y[1]+He+p[2]):(re=y[1]+(De+He-D.displaySize[1])/2,ve=re+D.displaySize[1]),{image:D,top:re,right:de,bottom:ve,left:xe,collisionPadding:O}}const ll=128,_c=32640;function Xu(o,e){const{expression:a}=e;if("constant"===a.kind)return{kind:"constant",layoutSize:a.evaluate(new hr(o+1))};if("source"===a.kind)return{kind:"source"};{const{zoomStops:p,interpolationType:y}=a;let x=0;for(;x<p.length&&p[x]<=o;)x++;x=Math.max(0,x-1);let D=x;for(;D<p.length&&p[D]<o+1;)D++;D=Math.min(p.length-1,D);const O=p[x],L=p[D];return"composite"===a.kind?{kind:"composite",minZoom:O,maxZoom:L,interpolationType:y}:{kind:"camera",minZoom:O,maxZoom:L,minSize:a.evaluate(new hr(O)),maxSize:a.evaluate(new hr(L)),interpolationType:y}}}function Wh(o,e,a){let p="never";const y=o.get(e);return y?p=y:o.get(a)&&(p="always"),p}const qh=al.VectorTileFeature.types,_f=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bd(o,e,a,p,y,x,D,O,L,J,re,de,ve){const xe=O?Math.min(_c,Math.round(O[0])):0,De=O?Math.min(_c,Math.round(O[1])):0;o.emplaceBack(e,a,Math.round(32*p),Math.round(32*y),x,D,(xe<<1)+(L?1:0),De,16*J,16*re,256*de,256*ve)}function Kh(o,e,a){o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a)}function mu(o){for(const e of o.sections)if(ic(e.text))return!0;return!1}class cl{constructor(e){this.layoutVertexArray=new Sn,this.indexArray=new Oi,this.programConfigurations=e,this.segments=new $i,this.dynamicLayoutVertexArray=new qn,this.opacityVertexArray=new In,this.hasVisibleVertices=!1,this.placedSymbolArray=new A}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,a,p,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$u.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Om.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,_f,!0),this.opacityVertexBuffer.itemSize=1),(p||y)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Tn("SymbolBuffers",cl);class Yh{constructor(e,a,p){this.layoutVertexArray=new e,this.layoutAttributes=a,this.indexArray=new p,this.segments=new $i,this.collisionVertexArray=new Kr}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,km.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Tn("CollisionBuffers",Yh);class yc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(D=>D.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Rc([]),this.placementViewportMatrix=Rc([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xu(this.zoom,a["text-size"]),this.iconSizeData=Xu(this.zoom,a["icon-size"]);const p=this.layers[0].layout,y=p.get("symbol-sort-key"),x=p.get("symbol-z-order");this.canOverlap="never"!==Wh(p,"text-overlap","text-allow-overlap")||"never"!==Wh(p,"icon-overlap","icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==x&&!y.isConstant(),this.sortFeaturesByY=("viewport-y"===x||"auto"===x&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===p.get("symbol-placement")&&(this.writingModes=p.get("text-writing-mode").map(D=>g.WritingMode[D])),this.stateDependentLayerIds=this.layers.filter(D=>D.isStateDependent()).map(D=>D.id),this.sourceID=e.sourceID}createArrays(){this.text=new cl(new ru(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new cl(new ru(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new fe,this.lineVertexArray=new oe,this.symbolInstances=new ee}calculateGlyphDependencies(e,a,p,y,x){for(let D=0;D<e.length;D++)if(a[e.charCodeAt(D)]=!0,(p||y)&&x){const O=Wc[e.charAt(D)];O&&(a[O.charCodeAt(0)]=!0)}}populate(e,a,p){const y=this.layers[0],x=y.layout,D=x.get("text-font"),O=x.get("text-field"),L=x.get("icon-image"),J=("constant"!==O.value.kind||O.value.value instanceof Er&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&("constant"!==D.value.kind||D.value.value.length>0),re="constant"!==L.value.kind||!!L.value.value||Object.keys(L.parameters).length>0,de=x.get("symbol-sort-key");if(this.features=[],!J&&!re)return;const ve=a.iconDependencies,xe=a.glyphDependencies,De=a.availableImages,He=new hr(this.zoom);for(const{feature:Ve,id:st,index:gt,sourceLayerIndex:it}of e){const Dt=y._featureFilter.needGeometry,Ot=Dl(Ve,Dt);if(!y._featureFilter.filter(He,Ot,p))continue;let Ht,Fn;if(Dt||(Ot.geometry=kc(Ve)),J){const Mn=y.getValueAndResolveTokens("text-field",Ot,p,De),vn=Er.factory(Mn);mu(vn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Nl()||this.hasRTLText&&os.isParsed())&&(Ht=Gu(vn,y,Ot))}if(re){const Mn=y.getValueAndResolveTokens("icon-image",Ot,p,De);Fn=Mn instanceof Nr?Mn:Nr.fromString(Mn)}if(!Ht&&!Fn)continue;const Un=this.sortFeaturesByKey?de.evaluate(Ot,{},p):void 0;if(this.features.push({id:st,text:Ht,icon:Fn,index:gt,sourceLayerIndex:it,geometry:Ot.geometry,properties:Ve.properties,type:qh[Ve.type],sortKey:Un}),Fn&&(ve[Fn.name]=!0),Ht){const Mn=D.evaluate(Ot,{},p).join(","),vn="viewport"!==x.get("text-rotation-alignment")&&"point"!==x.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.WritingMode.vertical)>=0;for(const fn of Ht.sections)if(fn.image)ve[fn.image.name]=!0;else{const En=xl(Ht.toString()),wn=fn.fontStack||Mn,Jt=xe[wn]=xe[wn]||{};this.calculateGlyphDependencies(fn.text,Jt,vn,this.allowVerticalPlacement,En)}}}"line"===x.get("symbol-placement")&&(this.features=function(Ve){const st={},gt={},it=[];let Dt=0;function Ot(Mn){it.push(Ve[Mn]),Dt++}function Ht(Mn,vn,fn){const En=gt[Mn];return delete gt[Mn],gt[vn]=En,it[En].geometry[0].pop(),it[En].geometry[0]=it[En].geometry[0].concat(fn[0]),En}function Fn(Mn,vn,fn){const En=st[vn];return delete st[vn],st[Mn]=En,it[En].geometry[0].shift(),it[En].geometry[0]=fn[0].concat(it[En].geometry[0]),En}function Un(Mn,vn,fn){const En=fn?vn[0][vn[0].length-1]:vn[0][0];return`${Mn}:${En.x}:${En.y}`}for(let Mn=0;Mn<Ve.length;Mn++){const vn=Ve[Mn],fn=vn.geometry,En=vn.text?vn.text.toString():null;if(!En){Ot(Mn);continue}const wn=Un(En,fn),Jt=Un(En,fn,!0);if(wn in gt&&Jt in st&&gt[wn]!==st[Jt]){const jn=Fn(wn,Jt,fn),Hn=Ht(wn,Jt,it[jn].geometry);delete st[wn],delete gt[Jt],gt[Un(En,it[Hn].geometry,!0)]=Hn,it[jn].geometry=null}else wn in gt?Ht(wn,Jt,fn):Jt in st?Fn(wn,Jt,fn):(Ot(Mn),st[wn]=Dt-1,gt[Jt]=Dt-1)}return it.filter(Mn=>Mn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ve,st)=>Ve.sortKey-st.sortKey)}update(e,a,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,a,this.layers,p),this.icon.programConfigurations.updatePaintArrays(e,a,this.layers,p))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,a){const p=this.lineVertexArray.length;if(void 0!==e.segment){let y=e.dist(a[e.segment+1]),x=e.dist(a[e.segment]);const D={};for(let O=e.segment+1;O<a.length;O++)D[O]={x:a[O].x,y:a[O].y,tileUnitDistanceFromAnchor:y},O<a.length-1&&(y+=a[O+1].dist(a[O]));for(let O=e.segment||0;O>=0;O--)D[O]={x:a[O].x,y:a[O].y,tileUnitDistanceFromAnchor:x},O>0&&(x+=a[O-1].dist(a[O]));for(let O=0;O<a.length;O++){const L=D[O];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(e,a,p,y,x,D,O,L,J,re,de,ve){const xe=e.indexArray,De=e.layoutVertexArray,He=e.segments.prepareSegment(4*a.length,De,xe,this.canOverlap?D.sortKey:void 0),Ve=this.glyphOffsetArray.length,st=He.vertexLength,gt=this.allowVerticalPlacement&&O===g.WritingMode.vertical?Math.PI/2:0,it=D.text&&D.text.sections;for(let Dt=0;Dt<a.length;Dt++){const{tl:Ot,tr:Ht,bl:Fn,br:Un,tex:Mn,pixelOffsetTL:vn,pixelOffsetBR:fn,minFontScaleX:En,minFontScaleY:wn,glyphOffset:Jt,isSDF:jn,sectionIndex:Hn}=a[Dt],ki=He.vertexLength,or=Jt[1];Bd(De,L.x,L.y,Ot.x,or+Ot.y,Mn.x,Mn.y,p,jn,vn.x,vn.y,En,wn),Bd(De,L.x,L.y,Ht.x,or+Ht.y,Mn.x+Mn.w,Mn.y,p,jn,fn.x,vn.y,En,wn),Bd(De,L.x,L.y,Fn.x,or+Fn.y,Mn.x,Mn.y+Mn.h,p,jn,vn.x,fn.y,En,wn),Bd(De,L.x,L.y,Un.x,or+Un.y,Mn.x+Mn.w,Mn.y+Mn.h,p,jn,fn.x,fn.y,En,wn),Kh(e.dynamicLayoutVertexArray,L,gt),xe.emplaceBack(ki,ki+1,ki+2),xe.emplaceBack(ki+1,ki+2,ki+3),He.vertexLength+=4,He.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Jt[0]),Dt!==a.length-1&&Hn===a[Dt+1].sectionIndex||e.programConfigurations.populatePaintArrays(De.length,D,D.index,{},ve,it&&it[Hn])}e.placedSymbolArray.emplaceBack(L.x,L.y,Ve,this.glyphOffsetArray.length-Ve,st,J,re,L.segment,p?p[0]:0,p?p[1]:0,y[0],y[1],O,0,!1,0,de)}_addCollisionDebugVertex(e,a,p,y,x,D){return a.emplaceBack(0,0),e.emplaceBack(p.x,p.y,y,x,Math.round(D.x),Math.round(D.y))}addCollisionDebugVertices(e,a,p,y,x,D,O){const L=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),J=L.vertexLength,re=x.layoutVertexArray,de=x.collisionVertexArray,ve=O.anchorX,xe=O.anchorY;this._addCollisionDebugVertex(re,de,D,ve,xe,new Ae(e,a)),this._addCollisionDebugVertex(re,de,D,ve,xe,new Ae(p,a)),this._addCollisionDebugVertex(re,de,D,ve,xe,new Ae(p,y)),this._addCollisionDebugVertex(re,de,D,ve,xe,new Ae(e,y)),L.vertexLength+=4;const De=x.indexArray;De.emplaceBack(J,J+1),De.emplaceBack(J+1,J+2),De.emplaceBack(J+2,J+3),De.emplaceBack(J+3,J),L.primitiveLength+=4}addDebugCollisionBoxes(e,a,p,y){for(let x=e;x<a;x++){const D=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(D.x1,D.y1,D.x2,D.y2,y?this.textCollisionBox:this.iconCollisionBox,D.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yh(Hi,sf.members,xi),this.iconCollisionBox=new Yh(Hi,sf.members,xi);for(let e=0;e<this.symbolInstances.length;e++){const a=this.symbolInstances.get(e);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(e,a,p,y,x,D,O,L,J){const re={};for(let de=a;de<p;de++){const ve=e.get(de);re.textBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},re.textFeatureIndex=ve.featureIndex;break}for(let de=y;de<x;de++){const ve=e.get(de);re.verticalTextBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},re.verticalTextFeatureIndex=ve.featureIndex;break}for(let de=D;de<O;de++){const ve=e.get(de);re.iconBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},re.iconFeatureIndex=ve.featureIndex;break}for(let de=L;de<J;de++){const ve=e.get(de);re.verticalIconBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},re.verticalIconFeatureIndex=ve.featureIndex;break}return re}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const p=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,a){const p=e.placedSymbolArray.get(a),y=p.vertexStartIndex+4*p.numGlyphs;for(let x=p.vertexStartIndex;x<y;x+=4)e.indexArray.emplaceBack(x,x+1,x+2),e.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const a=Math.sin(e),p=Math.cos(e),y=[],x=[],D=[];for(let O=0;O<this.symbolInstances.length;++O){D.push(O);const L=this.symbolInstances.get(O);y.push(0|Math.round(a*L.anchorX+p*L.anchorY)),x.push(L.featureIndex)}return D.sort((O,L)=>y[O]-y[L]||x[L]-x[O]),D}addToSortKeyRanges(e,a){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===a?p.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const p=this.symbolInstances.get(a);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((y,x,D)=>{y>=0&&D.indexOf(y)===x&&this.addIndicesForPlacedSymbol(this.text,y)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Hm,Xh;Tn("SymbolBucket",yc,{omit:["layers","collisionBoxArray","features","compareText"]}),yc.MAX_GLYPHS=65535,yc.addDynamicAttributes=Kh;var zd={get paint(){return Xh=Xh||new bo({"icon-opacity":new ei(me.paint_symbol["icon-opacity"]),"icon-color":new ei(me.paint_symbol["icon-color"]),"icon-halo-color":new ei(me.paint_symbol["icon-halo-color"]),"icon-halo-width":new ei(me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ei(me.paint_symbol["icon-halo-blur"]),"icon-translate":new Cn(me.paint_symbol["icon-translate"]),"icon-translate-anchor":new Cn(me.paint_symbol["icon-translate-anchor"]),"text-opacity":new ei(me.paint_symbol["text-opacity"]),"text-color":new ei(me.paint_symbol["text-color"],{runtimeType:Ce,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ei(me.paint_symbol["text-halo-color"]),"text-halo-width":new ei(me.paint_symbol["text-halo-width"]),"text-halo-blur":new ei(me.paint_symbol["text-halo-blur"]),"text-translate":new Cn(me.paint_symbol["text-translate"]),"text-translate-anchor":new Cn(me.paint_symbol["text-translate-anchor"])})},get layout(){return Hm=Hm||new bo({"symbol-placement":new Cn(me.layout_symbol["symbol-placement"]),"symbol-spacing":new Cn(me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Cn(me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ei(me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Cn(me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Cn(me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Cn(me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Cn(me.layout_symbol["icon-ignore-placement"]),"icon-optional":new Cn(me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Cn(me.layout_symbol["icon-rotation-alignment"]),"icon-size":new ei(me.layout_symbol["icon-size"]),"icon-text-fit":new Cn(me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Cn(me.layout_symbol["icon-text-fit-padding"]),"icon-image":new ei(me.layout_symbol["icon-image"]),"icon-rotate":new ei(me.layout_symbol["icon-rotate"]),"icon-padding":new ei(me.layout_symbol["icon-padding"]),"icon-keep-upright":new Cn(me.layout_symbol["icon-keep-upright"]),"icon-offset":new ei(me.layout_symbol["icon-offset"]),"icon-anchor":new ei(me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Cn(me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Cn(me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Cn(me.layout_symbol["text-rotation-alignment"]),"text-field":new ei(me.layout_symbol["text-field"]),"text-font":new ei(me.layout_symbol["text-font"]),"text-size":new ei(me.layout_symbol["text-size"]),"text-max-width":new ei(me.layout_symbol["text-max-width"]),"text-line-height":new Cn(me.layout_symbol["text-line-height"]),"text-letter-spacing":new ei(me.layout_symbol["text-letter-spacing"]),"text-justify":new ei(me.layout_symbol["text-justify"]),"text-radial-offset":new ei(me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Cn(me.layout_symbol["text-variable-anchor"]),"text-anchor":new ei(me.layout_symbol["text-anchor"]),"text-max-angle":new Cn(me.layout_symbol["text-max-angle"]),"text-writing-mode":new Cn(me.layout_symbol["text-writing-mode"]),"text-rotate":new ei(me.layout_symbol["text-rotate"]),"text-padding":new Cn(me.layout_symbol["text-padding"]),"text-keep-upright":new Cn(me.layout_symbol["text-keep-upright"]),"text-transform":new ei(me.layout_symbol["text-transform"]),"text-offset":new ei(me.layout_symbol["text-offset"]),"text-allow-overlap":new Cn(me.layout_symbol["text-allow-overlap"]),"text-overlap":new Cn(me.layout_symbol["text-overlap"]),"text-ignore-placement":new Cn(me.layout_symbol["text-ignore-placement"]),"text-optional":new Cn(me.layout_symbol["text-optional"])})}};class Jh{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:U,this.defaultValue=e}evaluate(e){if(e.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(e.formattedSection))return a.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tn("FormatSectionOverride",Jh,{omit:["defaultValue"]});class xa extends jr{constructor(e){super(e,zd)}recalculate(e,a){if(super.recalculate(e,a),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const p=this.layout.get("text-writing-mode");if(p){const y=[];for(const x of p)y.indexOf(x)<0&&y.push(x);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,a,p,y){const x=this.layout.get(e).evaluate(a,{},p,y),D=this._unevaluatedLayout._values[e];return D.isDataDriven()||q(D.value)||!x?x:(O=a.properties,x.replace(/{([^{}]+)}/g,(J,re)=>re in O?String(O[re]):""));var O}createBucket(e){return new yc(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of zd.paint.overridableProperties){if(!xa.hasPaintOverride(this.layout,e))continue;const a=this.paint.get(e),p=new Jh(a),y=new Q(p,a.property.specification);let x=null;x="constant"===a.value.kind||"source"===a.value.kind?new Bt("source",y):new Yn("composite",y,a.value.zoomStops),this.paint._values[e]=new Ur(a.property,x,a.parameters)}}_handleOverridablePaintPropertyUpdate(e,a,p){return!(!this.layout||a.isDataDriven()||p.isDataDriven())&&xa.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,a){const p=e.get("text-field"),y=zd.paint.properties[a];let x=!1;const D=O=>{for(const L of O)if(y.overrides&&y.overrides.hasOverride(L))return void(x=!0)};if("constant"===p.value.kind&&p.value.value instanceof Er)D(p.value.value.sections);else if("source"===p.value.kind){const O=J=>{x||(J instanceof Rr&&Pi(J.value)===Ft?D(J.value.sections):J instanceof Bi?D(J.sections):J.eachChild(O))},L=p.value;L._styleExpression&&O(L._styleExpression.expression)}return x}}let gu;var Vd={get paint(){return gu=gu||new bo({"background-color":new Cn(me.paint_background["background-color"]),"background-pattern":new Ac(me.paint_background["background-pattern"]),"background-opacity":new Cn(me.paint_background["background-opacity"])})}};let yf;var Qh={get paint(){return yf=yf||new bo({"raster-opacity":new Cn(me.paint_raster["raster-opacity"]),"raster-hue-rotate":new Cn(me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Cn(me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Cn(me.paint_raster["raster-brightness-max"]),"raster-saturation":new Cn(me.paint_raster["raster-saturation"]),"raster-contrast":new Cn(me.paint_raster["raster-contrast"]),"raster-resampling":new Cn(me.paint_raster["raster-resampling"]),"raster-fade-duration":new Cn(me.paint_raster["raster-fade-duration"])})}};class vf extends jr{constructor(e){super(e,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const _u={circle:class extends jr{constructor(o){super(o,jp)}createBucket(o){return new Eh(o)}queryRadius(o){const e=o;return Ru("circle-radius",this,e)+Ru("circle-stroke-width",this,e)+Sh(this.paint.get("circle-translate"))}queryIntersectsFeature(o,e,a,p,y,x,D,O){const L=rr(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,D),J=this.paint.get("circle-radius").evaluate(e,a)+this.paint.get("circle-stroke-width").evaluate(e,a),re="map"===this.paint.get("circle-pitch-alignment"),de=re?L:(De=O,L.map(He=>ol(He,De))),ve=re?J*D:J;var De;for(const xe of p)for(const De of xe){const He=re?De:ol(De,O);let Ve=ve;const st=Gl([],[De.x,De.y,0,1],O);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Ve*=st[3]/x.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Ve*=x.cameraToCenterDistance/st[3]),g_(de,He,Ve))return!0}return!1}},heatmap:class extends jr{createBucket(o){return new Fc(o)}constructor(o){super(o,ym),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends jr{constructor(o){super(o,Zp)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends jr{constructor(o){super(o,Em)}recalculate(o,e){super.recalculate(o,e);const a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Ed(o)}queryRadius(){return Sh(this.paint.get("fill-translate"))}queryIntersectsFeature(o,e,a,p,y,x,D){return Mh(rr(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,D),p)}isTileClipped(){return!0}},"fill-extrusion":class extends jr{constructor(o){super(o,lu)}createBucket(o){return new Vh(o)}queryRadius(){return Sh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,e,a,p,y,x,D,O){const L=rr(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,D),J=this.paint.get("fill-extrusion-height").evaluate(e,a),re=this.paint.get("fill-extrusion-base").evaluate(e,a),de=function(xe,De,He,Ve){const st=[];for(const gt of xe){const it=[gt.x,gt.y,0,1];Gl(it,it,De),st.push(new Ae(it[0]/it[3],it[1]/it[3]))}return st}(L,O),ve=function(xe,De,He,Ve){const st=[],gt=[],it=Ve[8]*De,Dt=Ve[9]*De,Ot=Ve[10]*De,Ht=Ve[11]*De,Fn=Ve[8]*He,Un=Ve[9]*He,Mn=Ve[10]*He,vn=Ve[11]*He;for(const fn of xe){const En=[],wn=[];for(const Jt of fn){const jn=Jt.x,Hn=Jt.y,ki=Ve[0]*jn+Ve[4]*Hn+Ve[12],or=Ve[1]*jn+Ve[5]*Hn+Ve[13],gr=Ve[2]*jn+Ve[6]*Hn+Ve[14],mo=Ve[3]*jn+Ve[7]*Hn+Ve[15],Ca=gr+Ot,Zo=mo+Ht,go=ki+Fn,So=or+Un,Wo=gr+Mn,qo=mo+vn,Bs=new Ae((ki+it)/Zo,(or+Dt)/Zo);Bs.z=Ca/Zo,En.push(Bs);const io=new Ae(go/qo,So/qo);io.z=Wo/qo,wn.push(io)}st.push(En),gt.push(wn)}return[st,gt]}(p,re,J,O);return function(xe,De,He){let Ve=1/0;Mh(He,De)&&(Ve=ef(He,De[0]));for(let st=0;st<De.length;st++){const gt=De[st],it=xe[st];for(let Dt=0;Dt<gt.length-1;Dt++){const Ot=gt[Dt],Ht=[Ot,gt[Dt+1],it[Dt+1],it[Dt],Ot];Dh(He,Ht)&&(Ve=Math.min(Ve,ef(He,Ht)))}}return Ve!==1/0&&Ve}(ve[0],ve[1],de)}},line:class extends jr{constructor(o){super(o,Gc),this.gradientVersion=0,Id||(Id=new Hu(Gc.paint.properties["line-width"].specification),Id.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){"line-gradient"===o&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ts,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,e){super.recalculate(o,e),this.paint._values["line-floorwidth"]=Id.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new jh(o)}queryRadius(o){const e=o,a=du(Ru("line-width",this,e),Ru("line-gap-width",this,e)),p=Ru("line-offset",this,e);return a/2+Math.abs(p)+Sh(this.paint.get("line-translate"))}queryIntersectsFeature(o,e,a,p,y,x,D){const O=rr(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,D),L=D/2*du(this.paint.get("line-width").evaluate(e,a),this.paint.get("line-gap-width").evaluate(e,a)),J=this.paint.get("line-offset").evaluate(e,a);return J&&(p=function(re,de){const ve=[];for(let xe=0;xe<re.length;xe++){const De=re[xe],He=[];for(let Ve=0;Ve<De.length;Ve++){const st=De[Ve-1],gt=De[Ve],it=De[Ve+1],Dt=0===Ve?new Ae(0,0):gt.sub(st)._unit()._perp(),Ot=Ve===De.length-1?new Ae(0,0):it.sub(gt)._unit()._perp(),Ht=Dt._add(Ot)._unit(),Fn=Ht.x*Ot.x+Ht.y*Ot.y;0!==Fn&&Ht._mult(1/Fn),He.push(Ht._mult(de)._add(gt))}ve.push(He)}return ve}(p,J*D)),function(re,de,ve){for(let xe=0;xe<de.length;xe++){const De=de[xe];if(re.length>=3)for(let He=0;He<De.length;He++)if(rl(re,De[He]))return!0;if(__(re,De,ve))return!0}return!1}(O,p,L)}isTileClipped(){return!0}},symbol:xa,background:class extends jr{constructor(o){super(o,Vd)}},raster:class extends jr{constructor(o){super(o,Qh)}}};class bf{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ep=6371008.8;class Ml{constructor(e,a){if(isNaN(e)||isNaN(a))throw new Error(`Invalid LngLat object: (${e}, ${a})`);if(this.lng=+e,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ml($e(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const a=Math.PI/180,p=this.lat*a,y=e.lat*a,x=Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos((e.lng-this.lng)*a);return ep*Math.acos(Math.min(x,1))}static convert(e){if(e instanceof Ml)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ml(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ml(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ud=2*Math.PI*ep;function tp(o){return Ud*Math.cos(o*Math.PI/180)}function $m(o){return(180+o)/360}function wa(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function vc(o,e){return o/tp(e)}function jd(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Ju{constructor(e,a,p=0){this.x=+e,this.y=+a,this.z=+p}static fromLngLat(e,a=0){const p=Ml.convert(e);return new Ju($m(p.lng),wa(p.lat),vc(a,p.lat))}toLngLat(){return new Ml(360*this.x-180,jd(this.y))}toAltitude(){return this.z*tp(jd(this.y))}meterInMercatorCoordinateUnits(){return 1/Ud*(e=jd(this.y),1/Math.cos(e*Math.PI/180));var e}}function Qu(o,e,a){var p=2*Math.PI*6378137/256/Math.pow(2,a);return[o*p-2*Math.PI*6378137/2,e*p-2*Math.PI*6378137/2]}class yu{constructor(e,a,p){if(e<0||e>25||p<0||p>=Math.pow(2,e)||a<0||a>=Math.pow(2,e))throw new Error(`x=${a}, y=${p}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=a,this.y=p,this.key=ed(0,e,e,a,p)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,a,p){const y=(D=this.y,O=this.z,L=Qu(256*(x=this.x),256*(D=Math.pow(2,O)-D-1),O),J=Qu(256*(x+1),256*(D+1),O),L[0]+","+L[1]+","+J[0]+","+J[1]);var x,D,O,L,J;const re=function(de,ve,xe){let De,He="";for(let Ve=de;Ve>0;Ve--)De=1<<Ve-1,He+=(ve&De?1:0)+(xe&De?2:0);return He}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===p?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,re).replace(/{bbox-epsg-3857}/g,y)}isChildOf(e){const a=this.z-e.z;return a>0&&e.x===this.x>>a&&e.y===this.y>>a}getTilePoint(e){const a=Math.pow(2,this.z);return new Ae((e.x*a-this.x)*Mo,(e.y*a-this.y)*Mo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xf{constructor(e,a){this.wrap=e,this.canonical=a,this.key=ed(e,a.z,a.z,a.x,a.y)}}class sa{constructor(e,a,p,y,x){if(e<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${p}`);this.overscaledZ=e,this.wrap=a,this.canonical=new yu(p,+y,+x),this.key=ed(a,e,p,y,x)}clone(){return new sa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-e;return e>this.canonical.z?new sa(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sa(e,this.wrap,e,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(e,a){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-e;return e>this.canonical.z?ed(this.wrap*+a,e,this.canonical.z,this.canonical.x,this.canonical.y):ed(this.wrap*+a,e,e,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const a=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>a&&e.canonical.y===this.canonical.y>>a}children(e){if(this.overscaledZ>=e)return[new sa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,p=2*this.canonical.x,y=2*this.canonical.y;return[new sa(a,this.wrap,a,p,y),new sa(a,this.wrap,a,p+1,y),new sa(a,this.wrap,a,p,y+1),new sa(a,this.wrap,a,p+1,y+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new sa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new sa(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Ju(e.x-this.wrap,e.y))}}function ed(o,e,a,p,y){(o*=2)<0&&(o=-1*o-1);const x=1<<a;return(x*x*o+x*y+p).toString(36)+a.toString(36)+e.toString(36)}Tn("CanonicalTileID",yu),Tn("OverscaledTileID",sa,{omit:["posMatrix"]});class wf{constructor(e,a,p){if(this.uid=e,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(p&&"mapbox"!==p&&"terrarium"!==p)return void ze(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const y=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=p||"mapbox";for(let x=0;x<y;x++)this.data[this._idx(-1,x)]=this.data[this._idx(0,x)],this.data[this._idx(y,x)]=this.data[this._idx(y-1,x)],this.data[this._idx(x,-1)]=this.data[this._idx(x,0)],this.data[this._idx(x,y)]=this.data[this._idx(x,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let x=0;x<y;x++)for(let D=0;D<y;D++){const O=this.get(x,D);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(e,a){const p=new Uint8Array(this.data.buffer),y=4*this._idx(e,a);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(p[y],p[y+1],p[y+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,a){if(e<-1||e>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(e+1)}_unpackMapbox(e,a,p){return(256*e*256+256*a+p)/10-1e4}_unpackTerrarium(e,a,p){return 256*e+a+p/256-32768}getPixels(){return new oa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,a,p){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let y=a*this.dim,x=a*this.dim+this.dim,D=p*this.dim,O=p*this.dim+this.dim;switch(a){case-1:y=x-1;break;case 1:x=y+1}switch(p){case-1:D=O-1;break;case 1:O=D+1}const L=-a*this.dim,J=-p*this.dim;for(let re=D;re<O;re++)for(let de=y;de<x;de++)this.data[this._idx(de,re)]=e.data[this._idx(de+L,re+J)]}}Tn("DEMData",wf);class np{constructor(e){this._stringToNumber={},this._numberToString=[];for(let a=0;a<e.length;a++){const p=e[a];this._stringToNumber[p]=a,this._numberToString[a]=p}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Hd{constructor(e,a,p,y,x){this.type="Feature",this._vectorTileFeature=e,e._z=a,e._x=p,e._y=y,this.properties=e.properties,this.id=x}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const a in this)"_geometry"!==a&&"_vectorTileFeature"!==a&&(e[a]=this[a]);return e}}class $d{constructor(e,a){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Qa(Mo,16,0),this.grid3D=new Qa(Mo,16,0),this.featureIndexArray=new tt,this.promoteId=a}insert(e,a,p,y,x,D){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,y,x);const L=D?this.grid3D:this.grid;for(let J=0;J<a.length;J++){const re=a[J],de=[1/0,1/0,-1/0,-1/0];for(let ve=0;ve<re.length;ve++){const xe=re[ve];de[0]=Math.min(de[0],xe.x),de[1]=Math.min(de[1],xe.y),de[2]=Math.max(de[2],xe.x),de[3]=Math.max(de[3],xe.y)}de[0]<Mo&&de[1]<Mo&&de[2]>=0&&de[3]>=0&&L.insert(O,de[0],de[1],de[2],de[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new al.VectorTile(new Od(this.rawTileData)).layers,this.sourceLayerCoder=new np(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,a,p,y){this.loadVTLayers();const x=e.params||{},D=Mo/e.tileSize/e.scale,O=ka(x.filter),L=e.queryGeometry,J=e.queryPadding*D,re=Gd(L),de=this.grid.query(re.minX-J,re.minY-J,re.maxX+J,re.maxY+J),ve=Gd(e.cameraQueryGeometry),xe=this.grid3D.query(ve.minX-J,ve.minY-J,ve.maxX+J,ve.maxY+J,(Ve,st,gt,it)=>function(Dt,Ot,Ht,Fn,Un){for(const vn of Dt)if(Ot<=vn.x&&Ht<=vn.y&&Fn>=vn.x&&Un>=vn.y)return!0;const Mn=[new Ae(Ot,Ht),new Ae(Ot,Un),new Ae(Fn,Un),new Ae(Fn,Ht)];if(Dt.length>2)for(const vn of Mn)if(rl(Dt,vn))return!0;for(let vn=0;vn<Dt.length-1;vn++)if(gm(Dt[vn],Dt[vn+1],Mn))return!0;return!1}(e.cameraQueryGeometry,Ve-J,st-J,gt+J,it+J));for(const Ve of xe)de.push(Ve);de.sort(Gm);const De={};let He;for(let Ve=0;Ve<de.length;Ve++){const st=de[Ve];if(st===He)continue;He=st;const gt=this.featureIndexArray.get(st);let it=null;this.loadMatchingFeature(De,gt.bucketIndex,gt.sourceLayerIndex,gt.featureIndex,O,x.layers,x.availableImages,a,p,y,(Dt,Ot,Ht)=>(it||(it=kc(Dt)),Ot.queryIntersectsFeature(L,Dt,Ht,it,this.z,e.transform,D,e.pixelPosMatrix)))}return De}loadMatchingFeature(e,a,p,y,x,D,O,L,J,re,de){const ve=this.bucketLayerIDs[a];if(D&&!function(Ve,st){for(let gt=0;gt<Ve.length;gt++)if(st.indexOf(Ve[gt])>=0)return!0;return!1}(D,ve))return;const xe=this.sourceLayerCoder.decode(p),De=this.vtLayers[xe].feature(y);if(x.needGeometry){const Ve=Dl(De,!0);if(!x.filter(new hr(this.tileID.overscaledZ),Ve,this.tileID.canonical))return}else if(!x.filter(new hr(this.tileID.overscaledZ),De))return;const He=this.getId(De,xe);for(let Ve=0;Ve<ve.length;Ve++){const st=ve[Ve];if(D&&D.indexOf(st)<0)continue;const gt=L[st];if(!gt)continue;let it={};He&&re&&(it=re.getState(gt.sourceLayer||"_geojsonTileLayer",He));const Dt=mt({},J[st]);Dt.paint=ip(Dt.paint,gt.paint,De,it,O),Dt.layout=ip(Dt.layout,gt.layout,De,it,O);const Ot=!de||de(De,gt,it);if(!Ot)continue;const Ht=new Hd(De,this.z,this.x,this.y,He);Ht.layer=Dt;let Fn=e[st];void 0===Fn&&(Fn=e[st]=[]),Fn.push({featureIndex:y,feature:Ht,intersectionZ:Ot})}}lookupSymbolFeatures(e,a,p,y,x,D,O,L){const J={};this.loadVTLayers();const re=ka(x);for(const de of e)this.loadMatchingFeature(J,p,y,de,re,D,O,L,a);return J}hasLayer(e){for(const a of this.bucketLayerIDs)for(const p of a)if(e===p)return!0;return!1}getId(e,a){let p=e.id;return this.promoteId&&(p=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[a]],"boolean"==typeof p&&(p=Number(p))),p}}function ip(o,e,a,p,y){return tn(o,(x,D)=>{const O=e instanceof va?e.get(D):null;return O&&O.evaluate?O.evaluate(a,p,y):O})}function Gd(o){let e=1/0,a=1/0,p=-1/0,y=-1/0;for(const x of o)e=Math.min(e,x.x),a=Math.min(a,x.y),p=Math.max(p,x.x),y=Math.max(y,x.y);return{minX:e,minY:a,maxX:p,maxY:y}}function Gm(o,e){return e-o}function Cf(o,e,a,p,y){const x=[];for(let D=0;D<o.length;D++){const O=o[D];let L;for(let J=0;J<O.length-1;J++){let re=O[J],de=O[J+1];re.x<e&&de.x<e||(re.x<e?re=new Ae(e,re.y+(e-re.x)/(de.x-re.x)*(de.y-re.y))._round():de.x<e&&(de=new Ae(e,re.y+(e-re.x)/(de.x-re.x)*(de.y-re.y))._round()),re.y<a&&de.y<a||(re.y<a?re=new Ae(re.x+(a-re.y)/(de.y-re.y)*(de.x-re.x),a)._round():de.y<a&&(de=new Ae(re.x+(a-re.y)/(de.y-re.y)*(de.x-re.x),a)._round()),re.x>=p&&de.x>=p||(re.x>=p?re=new Ae(p,re.y+(p-re.x)/(de.x-re.x)*(de.y-re.y))._round():de.x>=p&&(de=new Ae(p,re.y+(p-re.x)/(de.x-re.x)*(de.y-re.y))._round()),re.y>=y&&de.y>=y||(re.y>=y?re=new Ae(re.x+(y-re.y)/(de.y-re.y)*(de.x-re.x),y)._round():de.y>=y&&(de=new Ae(re.x+(y-re.y)/(de.y-re.y)*(de.x-re.x),y)._round()),L&&re.equals(L[L.length-1])||(L=[re],x.push(L)),L.push(de)))))}}return x}Tn("FeatureIndex",$d,{omit:["rawTileData","sourceLayerCoder"]});class Sl extends Ae{constructor(e,a,p,y){super(e,a),this.angle=p,void 0!==y&&(this.segment=y)}clone(){return new Sl(this.x,this.y,this.angle,this.segment)}}function rp(o,e,a,p,y){if(void 0===e.segment)return!0;let x=e,D=e.segment+1,O=0;for(;O>-a/2;){if(D--,D<0)return!1;O-=o[D].dist(x),x=o[D]}O+=o[D].dist(o[D+1]),D++;const L=[];let J=0;for(;O<a/2;){const re=o[D],de=o[D+1];if(!de)return!1;let ve=o[D-1].angleTo(re)-re.angleTo(de);for(ve=Math.abs((ve+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:O,angleDelta:ve}),J+=ve;O-L[0].distance>p;)J-=L.shift().angleDelta;if(J>y)return!1;D++,O+=re.dist(de)}return!0}function bc(o){let e=0;for(let a=0;a<o.length-1;a++)e+=o[a].dist(o[a+1]);return e}function op(o,e,a){return o?.6*e*a:0}function Zd(o,e){return Math.max(o?o.right-o.left:0,e?e.right-e.left:0)}function Zm(o,e,a,p,y,x){const D=op(a,y,x),O=Zd(a,p)*x;let L=0;const J=bc(o)/2;for(let re=0;re<o.length-1;re++){const de=o[re],ve=o[re+1],xe=de.dist(ve);if(L+xe>J){const De=(J-L)/xe,He=Dr.number(de.x,ve.x,De),Ve=Dr.number(de.y,ve.y,De),st=new Sl(He,Ve,ve.angleTo(de),re);return st._round(),!D||rp(o,st,O,D,e)?st:void 0}L+=xe}}function b_(o,e,a,p,y,x,D,O,L){const J=op(p,x,D),re=Zd(p,y),de=re*D,ve=0===o[0].x||o[0].x===L||0===o[0].y||o[0].y===L;return e-de<e/4&&(e=de+e/4),td(o,ve?e/2*O%e:(re/2+2*x)*D*O%e,e,J,a,de,ve,!1,L)}function td(o,e,a,p,y,x,D,O,L){const J=x/2,re=bc(o);let de=0,ve=e-a,xe=[];for(let De=0;De<o.length-1;De++){const He=o[De],Ve=o[De+1],st=He.dist(Ve),gt=Ve.angleTo(He);for(;ve+a<de+st;){ve+=a;const it=(ve-de)/st,Dt=Dr.number(He.x,Ve.x,it),Ot=Dr.number(He.y,Ve.y,it);if(Dt>=0&&Dt<L&&Ot>=0&&Ot<L&&ve-J>=0&&ve+J<=re){const Ht=new Sl(Dt,Ot,gt,De);Ht._round(),p&&!rp(o,Ht,x,p,y)||xe.push(Ht)}}de+=st}return O||xe.length||D||(xe=td(o,de/2,a,p,y,x,D,!0,L)),xe}function Ef(o,e,a,p){const y=[],x=o.image,D=x.pixelRatio,O=x.paddedRect.w-2,L=x.paddedRect.h-2,J=o.right-o.left,re=o.bottom-o.top,de=x.stretchX||[[0,O]],ve=x.stretchY||[[0,L]],xe=(fn,En)=>fn+En[1]-En[0],De=de.reduce(xe,0),He=ve.reduce(xe,0),Ve=O-De,st=L-He;let gt=0,it=De,Dt=0,Ot=He,Ht=0,Fn=Ve,Un=0,Mn=st;if(x.content&&p){const fn=x.content;gt=qc(de,0,fn[0]),Dt=qc(ve,0,fn[1]),it=qc(de,fn[0],fn[2]),Ot=qc(ve,fn[1],fn[3]),Ht=fn[0]-gt,Un=fn[1]-Dt,Fn=fn[2]-fn[0]-it,Mn=fn[3]-fn[1]-Ot}const vn=(fn,En,wn,Jt)=>{const jn=nd(fn.stretch-gt,it,J,o.left),Hn=vu(fn.fixed-Ht,Fn,fn.stretch,De),ki=nd(En.stretch-Dt,Ot,re,o.top),or=vu(En.fixed-Un,Mn,En.stretch,He),gr=nd(wn.stretch-gt,it,J,o.left),mo=vu(wn.fixed-Ht,Fn,wn.stretch,De),Ca=nd(Jt.stretch-Dt,Ot,re,o.top),Zo=vu(Jt.fixed-Un,Mn,Jt.stretch,He),go=new Ae(jn,ki),So=new Ae(gr,ki),Wo=new Ae(gr,Ca),qo=new Ae(jn,Ca),Bs=new Ae(Hn/D,or/D),io=new Ae(mo/D,Zo/D),xo=e*Math.PI/180;if(xo){const Ko=Math.sin(xo),bs=Math.cos(xo),ro=[bs,-Ko,Ko,bs];go._matMult(ro),So._matMult(ro),qo._matMult(ro),Wo._matMult(ro)}const Bo=fn.stretch+fn.fixed,zs=En.stretch+En.fixed;return{tl:go,tr:So,bl:qo,br:Wo,tex:{x:x.paddedRect.x+1+Bo,y:x.paddedRect.y+1+zs,w:wn.stretch+wn.fixed-Bo,h:Jt.stretch+Jt.fixed-zs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bs,pixelOffsetBR:io,minFontScaleX:Fn/D/J,minFontScaleY:Mn/D/re,isSDF:a}};if(p&&(x.stretchX||x.stretchY)){const fn=sp(de,Ve,De),En=sp(ve,st,He);for(let wn=0;wn<fn.length-1;wn++){const Jt=fn[wn],jn=fn[wn+1];for(let Hn=0;Hn<En.length-1;Hn++)y.push(vn(Jt,En[Hn],jn,En[Hn+1]))}}else y.push(vn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:L+1}));return y}function qc(o,e,a){let p=0;for(const y of o)p+=Math.max(e,Math.min(a,y[1]))-Math.max(e,Math.min(a,y[0]));return p}function sp(o,e,a){const p=[{fixed:-1,stretch:0}];for(const[y,x]of o){const D=p[p.length-1];p.push({fixed:y-D.stretch,stretch:D.stretch}),p.push({fixed:y-D.stretch,stretch:D.stretch+(x-y)})}return p.push({fixed:e+1,stretch:a}),p}function nd(o,e,a,p){return o/e*a+p}function vu(o,e,a,p){return o-e*a/p}Tn("Anchor",Sl);class Kc{constructor(e,a,p,y,x,D,O,L,J,re){if(this.boxStartIndex=e.length,J){let de=D.top,ve=D.bottom;const xe=D.collisionPadding;xe&&(de-=xe[1],ve+=xe[3]);let De=ve-de;De>0&&(De=Math.max(10,De),this.circleDiameter=De)}else{let de=D.top*O-L[0],ve=D.bottom*O+L[2],xe=D.left*O-L[3],De=D.right*O+L[1];const He=D.collisionPadding;if(He&&(xe-=He[0]*O,de-=He[1]*O,De+=He[2]*O,ve+=He[3]*O),re){const Ve=new Ae(xe,de),st=new Ae(De,de),gt=new Ae(xe,ve),it=new Ae(De,ve),Dt=re*Math.PI/180;Ve._rotate(Dt),st._rotate(Dt),gt._rotate(Dt),it._rotate(Dt),xe=Math.min(Ve.x,st.x,gt.x,it.x),De=Math.max(Ve.x,st.x,gt.x,it.x),de=Math.min(Ve.y,st.y,gt.y,it.y),ve=Math.max(Ve.y,st.y,gt.y,it.y)}e.emplaceBack(a.x,a.y,xe,de,De,ve,p,y,x)}this.boxEndIndex=e.length}}class Wd{constructor(e=[],a=bu){if(this.data=e,this.length=this.data.length,this.compare=a,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:a,compare:p}=this,y=a[e];for(;e>0;){const x=e-1>>1,D=a[x];if(p(y,D)>=0)break;a[e]=D,e=x}a[e]=y}_down(e){const{data:a,compare:p}=this,y=this.length>>1,x=a[e];for(;e<y;){let D=1+(e<<1),O=a[D];const L=D+1;if(L<this.length&&p(a[L],O)<0&&(D=L,O=a[L]),p(O,x)>=0)break;a[e]=O,e=D}a[e]=x}}function bu(o,e){return o<e?-1:o>e?1:0}function Df(o,e=1,a=!1){let p=1/0,y=1/0,x=-1/0,D=-1/0;const O=o[0];for(let xe=0;xe<O.length;xe++){const De=O[xe];(!xe||De.x<p)&&(p=De.x),(!xe||De.y<y)&&(y=De.y),(!xe||De.x>x)&&(x=De.x),(!xe||De.y>D)&&(D=De.y)}const L=Math.min(x-p,D-y);let J=L/2;const re=new Wd([],ap);if(0===L)return new Ae(p,y);for(let xe=p;xe<x;xe+=L)for(let De=y;De<D;De+=L)re.push(new Yc(xe+J,De+J,J,o));let de=function(xe){let De=0,He=0,Ve=0;const st=xe[0];for(let gt=0,it=st.length,Dt=it-1;gt<it;Dt=gt++){const Ot=st[gt],Ht=st[Dt],Fn=Ot.x*Ht.y-Ht.x*Ot.y;He+=(Ot.x+Ht.x)*Fn,Ve+=(Ot.y+Ht.y)*Fn,De+=3*Fn}return new Yc(He/De,Ve/De,0,xe)}(o),ve=re.length;for(;re.length;){const xe=re.pop();(xe.d>de.d||!de.d)&&(de=xe,a&&console.log("found best %d after %d probes",Math.round(1e4*xe.d)/1e4,ve)),xe.max-de.d<=e||(J=xe.h/2,re.push(new Yc(xe.p.x-J,xe.p.y-J,J,o)),re.push(new Yc(xe.p.x+J,xe.p.y-J,J,o)),re.push(new Yc(xe.p.x-J,xe.p.y+J,J,o)),re.push(new Yc(xe.p.x+J,xe.p.y+J,J,o)),ve+=4)}return a&&(console.log(`num probes: ${ve}`),console.log(`best distance: ${de.d}`)),de.p}function ap(o,e){return e.max-o.max}function Yc(o,e,a,p){this.p=new Ae(o,e),this.h=a,this.d=function(y,x){let D=!1,O=1/0;for(let L=0;L<x.length;L++){const J=x[L];for(let re=0,de=J.length,ve=de-1;re<de;ve=re++){const xe=J[re],De=J[ve];xe.y>y.y!=De.y>y.y&&y.x<(De.x-xe.x)*(y.y-xe.y)/(De.y-xe.y)+xe.x&&(D=!D),O=Math.min(O,ku(y,xe,De))}}return(D?1:-1)*Math.sqrt(O)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}const id=Number.POSITIVE_INFINITY;function xu(o,e){return e[1]!==id?function(a,p,y){let x=0,D=0;switch(p=Math.abs(p),y=Math.abs(y),a){case"top-right":case"top-left":case"top":D=y-7;break;case"bottom-right":case"bottom-left":case"bottom":D=7-y}switch(a){case"top-right":case"bottom-right":case"right":x=-p;break;case"top-left":case"bottom-left":case"left":x=p}return[x,D]}(o,e[0],e[1]):function(a,p){let y=0,x=0;p<0&&(p=0);const D=p/Math.sqrt(2);switch(a){case"top-right":case"top-left":x=D-7;break;case"bottom-right":case"bottom-left":x=7-D;break;case"bottom":x=7-p;break;case"top":x=p-7}switch(a){case"top-right":case"bottom-right":y=-D;break;case"top-left":case"bottom-left":y=D;break;case"left":y=p;break;case"right":y=-p}return[y,x]}(o,e[0])}function lp(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Mf(o,e,a,p,y,x,D,O,L,J,re){let de=x.textMaxSize.evaluate(e,{});void 0===de&&(de=D);const ve=o.layers[0].layout,xe=ve.get("icon-offset").evaluate(e,{},re),De=Tf(a.horizontal),He=D/24,Ve=o.tilePixelRatio*He,st=o.tilePixelRatio*de/24,gt=o.tilePixelRatio*O,it=o.tilePixelRatio*ve.get("symbol-spacing"),Dt=ve.get("text-padding")*o.tilePixelRatio,Ot=function(Jt,jn,Hn,ki=1){const or=Jt.get("icon-padding").evaluate(jn,{},Hn),gr=or&&or.values;return[gr[0]*ki,gr[1]*ki,gr[2]*ki,gr[3]*ki]}(ve,e,re,o.tilePixelRatio),Ht=ve.get("text-max-angle")/180*Math.PI,Fn="viewport"!==ve.get("text-rotation-alignment")&&"point"!==ve.get("symbol-placement"),Un="map"===ve.get("icon-rotation-alignment")&&"point"!==ve.get("symbol-placement"),Mn=ve.get("symbol-placement"),vn=it/2,fn=ve.get("icon-text-fit");let En;p&&"none"!==fn&&(o.allowVerticalPlacement&&a.vertical&&(En=gf(p,a.vertical,fn,ve.get("icon-text-fit-padding"),xe,He)),De&&(p=gf(p,De,fn,ve.get("icon-text-fit-padding"),xe,He)));const wn=(Jt,jn)=>{jn.x<0||jn.x>=Mo||jn.y<0||jn.y>=Mo||function(Hn,ki,or,gr,mo,Ca,Zo,go,So,Wo,qo,Bs,io,xo,Bo,zs,Ko,bs,ro,Yr,Ri,Vs,wo,Pr,Ea){const ul=Hn.addToLineVertexArray(ki,or);let Da,as,Us,aa,ls=0,Zl=0,Cu=0,Wm=0,Eu=-1,Du=-1;const dl={};let Jd=po(""),ad=0,Of=0;if(void 0===go._unevaluatedLayout.getValue("text-radial-offset")?[ad,Of]=go.layout.get("text-offset").evaluate(Ri,{},Pr).map(la=>24*la):(ad=24*go.layout.get("text-radial-offset").evaluate(Ri,{},Pr),Of=id),Hn.allowVerticalPlacement&&gr.vertical){const la=go.layout.get("text-rotate").evaluate(Ri,{},Pr)+90;Us=new Kc(So,ki,Wo,qo,Bs,gr.vertical,io,xo,Bo,la),Zo&&(aa=new Kc(So,ki,Wo,qo,Bs,Zo,Ko,bs,Bo,la))}if(mo){const la=go.layout.get("icon-rotate").evaluate(Ri,{}),Wl="none"!==go.layout.get("icon-text-fit"),th=Ef(mo,la,wo,Wl),nh=Zo?Ef(Zo,la,wo,Wl):void 0;as=new Kc(So,ki,Wo,qo,Bs,mo,Ko,bs,!1,la),ls=4*th.length;const Jm=Hn.iconSizeData;let Mu=null;"source"===Jm.kind?(Mu=[ll*go.layout.get("icon-size").evaluate(Ri,{})],Mu[0]>_c&&ze(`${Hn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Jm.kind&&(Mu=[ll*Vs.compositeIconSizes[0].evaluate(Ri,{},Pr),ll*Vs.compositeIconSizes[1].evaluate(Ri,{},Pr)],(Mu[0]>_c||Mu[1]>_c)&&ze(`${Hn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Hn.addSymbols(Hn.icon,th,Mu,Yr,ro,Ri,g.WritingMode.none,ki,ul.lineStartIndex,ul.lineLength,-1,Pr),Eu=Hn.icon.placedSymbolArray.length-1,nh&&(Zl=4*nh.length,Hn.addSymbols(Hn.icon,nh,Mu,Yr,ro,Ri,g.WritingMode.vertical,ki,ul.lineStartIndex,ul.lineLength,-1,Pr),Du=Hn.icon.placedSymbolArray.length-1)}const kf=Object.keys(gr.horizontal);for(const la of kf){const Wl=gr.horizontal[la];if(!Da){Jd=po(Wl.text);const nh=go.layout.get("text-rotate").evaluate(Ri,{},Pr);Da=new Kc(So,ki,Wo,qo,Bs,Wl,io,xo,Bo,nh)}const th=1===Wl.positionedLines.length;if(Cu+=Sf(Hn,ki,Wl,Ca,go,Bo,Ri,zs,ul,gr.vertical?g.WritingMode.horizontal:g.WritingMode.horizontalOnly,th?kf:[la],dl,Eu,Vs,Pr),th)break}gr.vertical&&(Wm+=Sf(Hn,ki,gr.vertical,Ca,go,Bo,Ri,zs,ul,g.WritingMode.vertical,["vertical"],dl,Du,Vs,Pr));const hp=Da?Da.boxStartIndex:Hn.collisionBoxArray.length,qm=Da?Da.boxEndIndex:Hn.collisionBoxArray.length,Km=Us?Us.boxStartIndex:Hn.collisionBoxArray.length,Rf=Us?Us.boxEndIndex:Hn.collisionBoxArray.length,x_=as?as.boxStartIndex:Hn.collisionBoxArray.length,Ym=as?as.boxEndIndex:Hn.collisionBoxArray.length,Xm=aa?aa.boxStartIndex:Hn.collisionBoxArray.length,pp=aa?aa.boxEndIndex:Hn.collisionBoxArray.length;let Ha=-1;const Qd=(la,Wl)=>la&&la.circleDiameter?Math.max(la.circleDiameter,Wl):Wl;Ha=Qd(Da,Ha),Ha=Qd(Us,Ha),Ha=Qd(as,Ha),Ha=Qd(aa,Ha);const eh=Ha>-1?1:0;eh&&(Ha*=Ea/24),Hn.glyphOffsetArray.length>=yc.MAX_GLYPHS&&ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ri.sortKey&&Hn.addToSortKeyRanges(Hn.symbolInstances.length,Ri.sortKey),Hn.symbolInstances.emplaceBack(ki.x,ki.y,dl.right>=0?dl.right:-1,dl.center>=0?dl.center:-1,dl.left>=0?dl.left:-1,dl.vertical||-1,Eu,Du,Jd,hp,qm,Km,Rf,x_,Ym,Xm,pp,Wo,Cu,Wm,ls,Zl,eh,0,io,ad,Of,Ha)}(o,jn,Jt,a,p,y,En,o.layers[0],o.collisionBoxArray,e.index,e.sourceLayerIndex,o.index,Ve,[Dt,Dt,Dt,Dt],Fn,L,gt,Ot,Un,xe,e,x,J,re,D)};if("line"===Mn)for(const Jt of Cf(e.geometry,0,0,Mo,Mo)){const jn=b_(Jt,it,Ht,a.vertical||De,p,24,st,o.overscaling,Mo);for(const Hn of jn)De&&If(o,De.text,vn,Hn)||wn(Jt,Hn)}else if("line-center"===Mn){for(const Jt of e.geometry)if(Jt.length>1){const jn=Zm(Jt,Ht,a.vertical||De,p,24,st);jn&&wn(Jt,jn)}}else if("Polygon"===e.type)for(const Jt of Bc(e.geometry,0)){const jn=Df(Jt,16);wn(Jt[0],new Sl(jn.x,jn.y,0))}else if("LineString"===e.type)for(const Jt of e.geometry)wn(Jt,new Sl(Jt[0].x,Jt[0].y,0));else if("Point"===e.type)for(const Jt of e.geometry)for(const jn of Jt)wn([jn],new Sl(jn.x,jn.y,0))}function Sf(o,e,a,p,y,x,D,O,L,J,re,de,ve,xe,De){const He=function(gt,it,Dt,Ot,Ht,Fn,Un,Mn){const vn=Ot.layout.get("text-rotate").evaluate(Fn,{})*Math.PI/180,fn=[];for(const En of it.positionedLines)for(const wn of En.positionedGlyphs){if(!wn.rect)continue;const Jt=wn.rect||{};let jn=4,Hn=!0,ki=1,or=0;const gr=(Ht||Mn)&&wn.vertical,mo=wn.metrics.advance*wn.scale/2;if(Mn&&it.verticalizable&&(or=En.lineOffset/2-(wn.imageName?-(24-wn.metrics.width*wn.scale)/2:24*(wn.scale-1))),wn.imageName){const ro=Un[wn.imageName];Hn=ro.sdf,ki=ro.pixelRatio,jn=1/ki}const Ca=Ht?[wn.x+mo,wn.y]:[0,0];let Zo=Ht?[0,0]:[wn.x+mo+Dt[0],wn.y+Dt[1]-or],go=[0,0];gr&&(go=Zo,Zo=[0,0]);const So=(wn.metrics.left-jn)*wn.scale-mo+Zo[0],Wo=(-wn.metrics.top-jn)*wn.scale+Zo[1],qo=So+Jt.w*wn.scale/ki,Bs=Wo+Jt.h*wn.scale/ki,io=new Ae(So,Wo),xo=new Ae(qo,Wo),Bo=new Ae(So,Bs),zs=new Ae(qo,Bs);if(gr){const ro=new Ae(-mo,mo- -17),Yr=-Math.PI/2,Ri=12-mo,Vs=new Ae(22-Ri,-(wn.imageName?Ri:0)),wo=new Ae(...go);io._rotateAround(Yr,ro)._add(Vs)._add(wo),xo._rotateAround(Yr,ro)._add(Vs)._add(wo),Bo._rotateAround(Yr,ro)._add(Vs)._add(wo),zs._rotateAround(Yr,ro)._add(Vs)._add(wo)}if(vn){const ro=Math.sin(vn),Yr=Math.cos(vn),Ri=[Yr,-ro,ro,Yr];io._matMult(Ri),xo._matMult(Ri),Bo._matMult(Ri),zs._matMult(Ri)}const Ko=new Ae(0,0),bs=new Ae(0,0);fn.push({tl:io,tr:xo,bl:Bo,br:zs,tex:Jt,writingMode:it.writingMode,glyphOffset:Ca,sectionIndex:wn.sectionIndex,isSDF:Hn,pixelOffsetTL:Ko,pixelOffsetBR:bs,minFontScaleX:0,minFontScaleY:0})}return fn}(0,a,O,y,x,D,p,o.allowVerticalPlacement),Ve=o.textSizeData;let st=null;"source"===Ve.kind?(st=[ll*y.layout.get("text-size").evaluate(D,{})],st[0]>_c&&ze(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===Ve.kind&&(st=[ll*xe.compositeTextSizes[0].evaluate(D,{},De),ll*xe.compositeTextSizes[1].evaluate(D,{},De)],(st[0]>_c||st[1]>_c)&&ze(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,He,st,O,x,D,J,e,L.lineStartIndex,L.lineLength,ve,De);for(const gt of re)de[gt]=o.text.placedSymbolArray.length-1;return 4*He.length}function Tf(o){for(const e in o)return o[e];return null}function If(o,e,a,p){const y=o.compareText;if(e in y){const x=y[e];for(let D=x.length-1;D>=0;D--)if(p.dist(x[D])<a)return!0}else y[e]=[];return y[e].push(p),!1}const qd=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class rd{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,p]=new Uint8Array(e,0,2);if(219!==a)throw new Error("Data does not appear to be in a KDBush format.");const y=p>>4;if(1!==y)throw new Error(`Got v${y} data when expected v1.`);const x=qd[15&p];if(!x)throw new Error("Unrecognized array type.");const[D]=new Uint16Array(e,2,1),[O]=new Uint32Array(e,4,1);return new rd(O,D,x,e)}constructor(e,a=64,p=Float64Array,y){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=p,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const x=qd.indexOf(this.ArrayType),D=2*e*this.ArrayType.BYTES_PER_ELEMENT,O=e*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-O%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${p}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+O+L,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+D+O+L),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+O+L,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=e)}add(e,a){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=e,this.coords[this._pos++]=a,p}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return cp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,a,p,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:D,nodeSize:O}=this,L=[0,x.length-1,0],J=[];for(;L.length;){const re=L.pop()||0,de=L.pop()||0,ve=L.pop()||0;if(de-ve<=O){for(let Ve=ve;Ve<=de;Ve++){const st=D[2*Ve],gt=D[2*Ve+1];st>=e&&st<=p&&gt>=a&&gt<=y&&J.push(x[Ve])}continue}const xe=ve+de>>1,De=D[2*xe],He=D[2*xe+1];De>=e&&De<=p&&He>=a&&He<=y&&J.push(x[xe]),(0===re?e<=De:a<=He)&&(L.push(ve),L.push(xe-1),L.push(1-re)),(0===re?p>=De:y>=He)&&(L.push(xe+1),L.push(de),L.push(1-re))}return J}within(e,a,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:D}=this,O=[0,y.length-1,0],L=[],J=p*p;for(;O.length;){const re=O.pop()||0,de=O.pop()||0,ve=O.pop()||0;if(de-ve<=D){for(let Ve=ve;Ve<=de;Ve++)Af(x[2*Ve],x[2*Ve+1],e,a)<=J&&L.push(y[Ve]);continue}const xe=ve+de>>1,De=x[2*xe],He=x[2*xe+1];Af(De,He,e,a)<=J&&L.push(y[xe]),(0===re?e-p<=De:a-p<=He)&&(O.push(ve),O.push(xe-1),O.push(1-re)),(0===re?e+p>=De:a+p>=He)&&(O.push(xe+1),O.push(de),O.push(1-re))}return L}}function cp(o,e,a,p,y,x){if(y-p<=a)return;const D=p+y>>1;Kd(o,e,D,p,y,x),cp(o,e,a,p,D-1,1-x),cp(o,e,a,D+1,y,1-x)}function Kd(o,e,a,p,y,x){for(;y>p;){if(y-p>600){const J=y-p+1,re=a-p+1,de=Math.log(J),ve=.5*Math.exp(2*de/3),xe=.5*Math.sqrt(de*ve*(J-ve)/J)*(re-J/2<0?-1:1);Kd(o,e,a,Math.max(p,Math.floor(a-re*ve/J+xe)),Math.min(y,Math.floor(a+(J-re)*ve/J+xe)),x)}const D=e[2*a+x];let O=p,L=y;for(od(o,e,p,a),e[2*y+x]>D&&od(o,e,p,y);O<L;){for(od(o,e,O,L),O++,L--;e[2*O+x]<D;)O++;for(;e[2*L+x]>D;)L--}e[2*p+x]===D?od(o,e,p,L):(L++,od(o,e,L,y)),L<=a&&(p=L+1),a<=L&&(y=L-1)}}function od(o,e,a,p){Yd(o,a,p),Yd(e,2*a,2*p),Yd(e,2*a+1,2*p+1)}function Yd(o,e,a){const p=o[e];o[e]=o[a],o[a]=p}function Af(o,e,a,p){const y=o-a,x=e-p;return y*y+x*x}var up;g.PerformanceMarkers=void 0,(up=g.PerformanceMarkers||(g.PerformanceMarkers={})).create="create",up.load="load",up.fullLoad="fullLoad";let Ns=null,sd=[];const Xd=1e3/60,wu="loadTime",dp="fullLoadTime",Pf={mark(o){performance.mark(o)},frame(o){const e=o;null!=Ns&&sd.push(e-Ns),Ns=e},clearMetrics(){Ns=null,sd=[],performance.clearMeasures(wu),performance.clearMeasures(dp);for(const o in g.PerformanceMarkers)performance.clearMarks(g.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(wu,g.PerformanceMarkers.create,g.PerformanceMarkers.load),performance.measure(dp,g.PerformanceMarkers.create,g.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(wu)[0].duration,e=performance.getEntriesByName(dp)[0].duration,a=sd.length,p=1/(sd.reduce((x,D)=>x+D,0)/a/1e3),y=sd.filter(x=>x>Xd).reduce((x,D)=>x+(D-Xd)/Xd,0);return{loadTime:o,fullLoadTime:e,fps:p,percentDroppedFrames:y/(a+y)*100,totalFrames:a}}};g.AJAXError=Jn,g.ARRAY_TYPE=ba,g.Actor=class{constructor(o,e,a){this.target=o,this.parent=e,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},wt(["receive","process"],this),this.invoker=new bf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=kt()?o:window}send(o,e,a,p,y=!1){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[x]=a);const D=nt(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:o,hasCallback:!!a,targetMapId:p,mustQueue:y,sourceMapId:this.mapId,data:Fa(e,D)},D),{cancel:()=>{a&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(o){const e=o.data,a=e.id;if(a&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[a];const p=this.cancelCallbacks[a];delete this.cancelCallbacks[a],p&&p()}else kt()||e.mustQueue?(this.tasks[a]=e,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,e)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),e=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(o,e)}processTask(o,e){if("<response>"===e.type){const a=this.callbacks[o];delete this.callbacks[o],a&&(e.error?a(ya(e.error)):a(null,ya(e.data)))}else{let a=!1;const p=nt(this.globalScope)?void 0:[],y=e.hasCallback?(O,L)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:O?Fa(O):null,data:Fa(L,p)},p)}:O=>{a=!0};let x=null;const D=ya(e.data);if(this.parent[e.type])x=this.parent[e.type](e.sourceMapId,D,y);else if(this.parent.getWorkerSource){const O=e.type.split(".");x=this.parent.getWorkerSource(e.sourceMapId,O[0],D.source)[O[1]](D,y)}else y(new Error(`Could not find function ${e.type}`));!a&&x&&x.cancel&&(this.cancelCallbacks[o]=x.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},g.AlphaImage=Lu,g.CanonicalTileID=yu,g.CollisionBoxArray=S,g.CollisionCircleLayoutArray=class extends c{},g.Color=Ti,g.DEMData=wf,g.DataConstantProperty=Cn,g.DictionaryCoder=np,g.EXTENT=Mo,g.ErrorEvent=Kt,g.EvaluationParameters=hr,g.Event=Mt,g.Evented=Qt,g.FeatureIndex=$d,g.FillBucket=Ed,g.FillExtrusionBucket=Vh,g.GeoJSONFeature=Hd,g.ImageAtlas=pf,g.ImagePosition=Ku,g.KDBush=rd,g.LineBucket=jh,g.LineStripIndexArray=class extends se{},g.LngLat=Ml,g.MercatorCoordinate=Ju,g.ONE_EM=24,g.OverscaledTileID=sa,g.PerformanceUtils=Pf,g.Point=Ae,g.Pos3dArray=class extends zi{},g.PosArray=Et,g.Properties=bo,g.Protobuf=Od,g.QuadTriangleArray=class extends b{},g.RGBAImage=oa,g.RasterBoundsArray=class extends nl{},g.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return 0===o.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},g.SegmentVector=$i,g.SymbolBucket=yc,g.Transitionable=Bl,g.TriangleIndexArray=Oi,g.Uniform1f=Ls,g.Uniform1i=class extends Lo{constructor(o,e){super(o,e),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},g.Uniform2f=class extends Lo{constructor(o,e){super(o,e),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},g.Uniform3f=class extends Lo{constructor(o,e){super(o,e),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},g.Uniform4f=iu,g.UniformColor=El,g.UniformMatrix4f=class extends Lo{constructor(o,e){super(o,e),this.current=Oc}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let e=1;e<16;e++)if(o[e]!==this.current[e]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},g.UnwrappedTileID=xf,g.ValidationError=Lt,g.ZoomHistory=Ps,g.addDynamicAttributes=Kh,g.arrayBufferToImage=function(o,e){const a=new Image;a.onload=()=>{e(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=xt})},a.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(o)],{type:"image/png"});a.src=o.byteLength?URL.createObjectURL(p):xt},g.arrayBufferToImageBitmap=function(o,e){const a=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(a).then(p=>{e(null,p)}).catch(p=>{e(new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},g.asyncAll=function(o,e,a){if(!o.length)return a(null,[]);let p=o.length;const y=new Array(o.length);let x=null;o.forEach((D,O)=>{e(D,(L,J)=>{L&&(x=L),y[O]=J,0==--p&&a(x,y)})})},g.bezier=Le,g.bindAll=wt,g.clamp=qe,g.clipLine=Cf,g.clone=function(o){var e=new ba(16);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e},g.clone$1=bt,g.collisionCircleLayout=Zc,g.config=On,g.copy=function(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o},g.create=function(){var o=new ba(16);return ba!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},g.createExpression=be,g.createFilter=ka,g.createLayout=pr,g.createStyleLayer=function(o){return"custom"===o.type?new vf(o):new _u[o.type](o)},g.deepEqual=function o(e,a){if(Array.isArray(e)){if(!Array.isArray(a)||e.length!==a.length)return!1;for(let p=0;p<e.length;p++)if(!o(e[p],a[p]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==a){if("object"!=typeof a||Object.keys(e).length!==Object.keys(a).length)return!1;for(const p in e)if(!o(e[p],a[p]))return!1;return!0}return e===a},g.derefLayers=function(o){o=o.slice();const e=Object.create(null);for(let a=0;a<o.length;a++)e[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=he(o[a],e[o[a].ref]));return o},g.diffStyles=function(o,e){if(!o)return[{command:Pe.setStyle,args:[e]}];let a=[];try{if(!ge(o.version,e.version))return[{command:Pe.setStyle,args:[e]}];ge(o.center,e.center)||a.push({command:Pe.setCenter,args:[e.center]}),ge(o.zoom,e.zoom)||a.push({command:Pe.setZoom,args:[e.zoom]}),ge(o.bearing,e.bearing)||a.push({command:Pe.setBearing,args:[e.bearing]}),ge(o.pitch,e.pitch)||a.push({command:Pe.setPitch,args:[e.pitch]}),ge(o.sprite,e.sprite)||a.push({command:Pe.setSprite,args:[e.sprite]}),ge(o.glyphs,e.glyphs)||a.push({command:Pe.setGlyphs,args:[e.glyphs]}),ge(o.transition,e.transition)||a.push({command:Pe.setTransition,args:[e.transition]}),ge(o.light,e.light)||a.push({command:Pe.setLight,args:[e.light]});const p={},y=[];!function(D,O,L,J){let re;for(re in O=O||{},D=D||{})Object.prototype.hasOwnProperty.call(D,re)&&(Object.prototype.hasOwnProperty.call(O,re)||ct(re,L,J));for(re in O)Object.prototype.hasOwnProperty.call(O,re)&&(Object.prototype.hasOwnProperty.call(D,re)?ge(D[re],O[re])||("geojson"===D[re].type&&"geojson"===O[re].type&&Rt(D,O,re)?L.push({command:Pe.setGeoJSONSourceData,args:[re,O[re].data]}):ln(re,O,L,J)):rt(re,O,L))}(o.sources,e.sources,y,p);const x=[];o.layers&&o.layers.forEach(D=>{p[D.source]?a.push({command:Pe.removeLayer,args:[D.id]}):x.push(D)}),a=a.concat(y),function(D,O,L){O=O||[];const J=(D=D||[]).map(gn),re=O.map(gn),de=D.reduce(ji,{}),ve=O.reduce(ji,{}),xe=J.slice(),De=Object.create(null);let He,Ve,st,gt,it,Dt,Ot;for(He=0,Ve=0;He<J.length;He++)st=J[He],Object.prototype.hasOwnProperty.call(ve,st)?Ve++:(L.push({command:Pe.removeLayer,args:[st]}),xe.splice(xe.indexOf(st,Ve),1));for(He=0,Ve=0;He<re.length;He++)st=re[re.length-1-He],xe[xe.length-1-He]!==st&&(Object.prototype.hasOwnProperty.call(de,st)?(L.push({command:Pe.removeLayer,args:[st]}),xe.splice(xe.lastIndexOf(st,xe.length-Ve),1)):Ve++,Dt=xe[xe.length-He],L.push({command:Pe.addLayer,args:[ve[st],Dt]}),xe.splice(xe.length-He,0,st),De[st]=!0);for(He=0;He<re.length;He++)if(st=re[He],gt=de[st],it=ve[st],!De[st]&&!ge(gt,it))if(ge(gt.source,it.source)&&ge(gt["source-layer"],it["source-layer"])&&ge(gt.type,it.type)){for(Ot in mn(gt.layout,it.layout,L,st,null,Pe.setLayoutProperty),mn(gt.paint,it.paint,L,st,null,Pe.setPaintProperty),ge(gt.filter,it.filter)||L.push({command:Pe.setFilter,args:[st,it.filter]}),ge(gt.minzoom,it.minzoom)&&ge(gt.maxzoom,it.maxzoom)||L.push({command:Pe.setLayerZoomRange,args:[st,it.minzoom,it.maxzoom]}),gt)Object.prototype.hasOwnProperty.call(gt,Ot)&&"layout"!==Ot&&"paint"!==Ot&&"filter"!==Ot&&"metadata"!==Ot&&"minzoom"!==Ot&&"maxzoom"!==Ot&&(0===Ot.indexOf("paint.")?mn(gt[Ot],it[Ot],L,st,Ot.slice(6),Pe.setPaintProperty):ge(gt[Ot],it[Ot])||L.push({command:Pe.setLayerProperty,args:[st,Ot,it[Ot]]}));for(Ot in it)Object.prototype.hasOwnProperty.call(it,Ot)&&!Object.prototype.hasOwnProperty.call(gt,Ot)&&"layout"!==Ot&&"paint"!==Ot&&"filter"!==Ot&&"metadata"!==Ot&&"minzoom"!==Ot&&"maxzoom"!==Ot&&(0===Ot.indexOf("paint.")?mn(gt[Ot],it[Ot],L,st,Ot.slice(6),Pe.setPaintProperty):ge(gt[Ot],it[Ot])||L.push({command:Pe.setLayerProperty,args:[st,Ot,it[Ot]]}))}else L.push({command:Pe.removeLayer,args:[st]}),Dt=xe[xe.lastIndexOf(st)+1],L.push({command:Pe.addLayer,args:[it,Dt]})}(x,e.layers,a)}catch(p){console.warn("Unable to compute style diff:",p),a=[{command:Pe.setStyle,args:[e]}]}return a},g.dot=function(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]+o[3]*e[3]},g.earthRadius=ep,g.ease=et,g.emitValidationErrors=Ic,g.emptyStyle=function(){const o={},e=me.$version;for(const a in me.$root){const p=me.$root[a];if(p.required){let y=null;y="version"===a?e:"array"===p.type?[]:{},null!=y&&(o[a]=y)}}return o},g.equals=function(o,e){var a=o[0],p=o[1],y=o[2],x=o[3],D=o[4],O=o[5],L=o[6],J=o[7],re=o[8],de=o[9],ve=o[10],xe=o[11],De=o[12],He=o[13],Ve=o[14],st=o[15],gt=e[0],it=e[1],Dt=e[2],Ot=e[3],Ht=e[4],Fn=e[5],Un=e[6],Mn=e[7],vn=e[8],fn=e[9],En=e[10],wn=e[11],Jt=e[12],jn=e[13],Hn=e[14],ki=e[15];return Math.abs(a-gt)<=Fo*Math.max(1,Math.abs(a),Math.abs(gt))&&Math.abs(p-it)<=Fo*Math.max(1,Math.abs(p),Math.abs(it))&&Math.abs(y-Dt)<=Fo*Math.max(1,Math.abs(y),Math.abs(Dt))&&Math.abs(x-Ot)<=Fo*Math.max(1,Math.abs(x),Math.abs(Ot))&&Math.abs(D-Ht)<=Fo*Math.max(1,Math.abs(D),Math.abs(Ht))&&Math.abs(O-Fn)<=Fo*Math.max(1,Math.abs(O),Math.abs(Fn))&&Math.abs(L-Un)<=Fo*Math.max(1,Math.abs(L),Math.abs(Un))&&Math.abs(J-Mn)<=Fo*Math.max(1,Math.abs(J),Math.abs(Mn))&&Math.abs(re-vn)<=Fo*Math.max(1,Math.abs(re),Math.abs(vn))&&Math.abs(de-fn)<=Fo*Math.max(1,Math.abs(de),Math.abs(fn))&&Math.abs(ve-En)<=Fo*Math.max(1,Math.abs(ve),Math.abs(En))&&Math.abs(xe-wn)<=Fo*Math.max(1,Math.abs(xe),Math.abs(wn))&&Math.abs(De-Jt)<=Fo*Math.max(1,Math.abs(De),Math.abs(Jt))&&Math.abs(He-jn)<=Fo*Math.max(1,Math.abs(He),Math.abs(jn))&&Math.abs(Ve-Hn)<=Fo*Math.max(1,Math.abs(Ve),Math.abs(Hn))&&Math.abs(st-ki)<=Fo*Math.max(1,Math.abs(st),Math.abs(ki))},g.evaluateSizeForFeature=function(o,{uSize:e,uSizeT:a},{lowerSize:p,upperSize:y}){return"source"===o.kind?p/ll:"composite"===o.kind?Dr.number(p/ll,y/ll,a):e},g.evaluateSizeForZoom=function(o,e){let a=0,p=0;if("constant"===o.kind)p=o.layoutSize;else if("source"!==o.kind){const{interpolationType:y,minZoom:x,maxZoom:D}=o,O=y?qe(Vr.interpolationFactor(y,e,x,D),0,1):0;"camera"===o.kind?p=Dr.number(o.minSize,o.maxSize,O):a=O}return{uSizeT:a,uSize:p}},g.evaluateVariableOffset=xu,g.evented=Na,g.exported=qt,g.extend=mt,g.filterObject=Zt,g.findLineIntersection=function(o,e,a,p){const y=e.y-o.y,x=e.x-o.x,D=p.y-a.y,O=p.x-a.x,L=D*x-O*y;if(0===L)return null;const J=(O*(o.y-a.y)-D*(o.x-a.x))/L;return new Ae(o.x+J*x,o.y+J*y)},g.fromScaling=function(o,e){return o[0]=e[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=e[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=e[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},g.getAnchorAlignment=Zh,g.getAnchorJustification=lp,g.getArrayBuffer=ai,g.getDefaultExportFromCjs=Ge,g.getJSON=function(o,e){return Xn(mt(o,{type:"json"}),e)},g.getOverlapMode=Wh,g.getProtocolAction=Xt,g.getRTLTextPluginStatus=Nl,g.getReferrer=hi,g.getVideo=function(o,e){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){e(null,a)};for(let p=0;p<o.length;p++){const y=window.document.createElement("source");an(o[p])||(a.crossOrigin="Anonymous"),y.src=o[p],a.appendChild(y)}return{cancel:()=>{}}},g.groupByLayout=function(o,e){const a={};for(let y=0;y<o.length;y++){const x=e&&e[o[y].id]||Ja(o[y]);e&&(e[o[y].id]=x);let D=a[x];D||(D=a[x]=[]),D.push(o[y])}const p=[];for(const y in a)p.push(a[y]);return p},g.identity=Rc,g.interpolate=Dr,g.invert=function(o,e){var a=e[0],p=e[1],y=e[2],x=e[3],D=e[4],O=e[5],L=e[6],J=e[7],re=e[8],de=e[9],ve=e[10],xe=e[11],De=e[12],He=e[13],Ve=e[14],st=e[15],gt=a*O-p*D,it=a*L-y*D,Dt=a*J-x*D,Ot=p*L-y*O,Ht=p*J-x*O,Fn=y*J-x*L,Un=re*He-de*De,Mn=re*Ve-ve*De,vn=re*st-xe*De,fn=de*Ve-ve*He,En=de*st-xe*He,wn=ve*st-xe*Ve,Jt=gt*wn-it*En+Dt*fn+Ot*vn-Ht*Mn+Fn*Un;return Jt?(o[0]=(O*wn-L*En+J*fn)*(Jt=1/Jt),o[1]=(y*En-p*wn-x*fn)*Jt,o[2]=(He*Fn-Ve*Ht+st*Ot)*Jt,o[3]=(ve*Ht-de*Fn-xe*Ot)*Jt,o[4]=(L*vn-D*wn-J*Mn)*Jt,o[5]=(a*wn-y*vn+x*Mn)*Jt,o[6]=(Ve*Dt-De*Fn-st*it)*Jt,o[7]=(re*Fn-ve*Dt+xe*it)*Jt,o[8]=(D*En-O*vn+J*Un)*Jt,o[9]=(p*vn-a*En-x*Un)*Jt,o[10]=(De*Ht-He*Dt+st*gt)*Jt,o[11]=(de*Dt-re*Ht-xe*gt)*Jt,o[12]=(O*Mn-D*fn-L*Un)*Jt,o[13]=(a*fn-p*Mn+y*Un)*Jt,o[14]=(He*it-De*Ot-Ve*gt)*Jt,o[15]=(re*Ot-de*it+ve*gt)*Jt,o):null},g.isImageBitmap=at,g.isSafari=nt,g.isWorker=kt,g.keysDifference=function(o,e){const a=[];for(const p in o)p in e||a.push(p);return a},g.lazyLoadRTLTextPlugin=function(){os.isLoading()||os.isLoaded()||"deferred"!==Nl()||sc()},g.makeRequest=Xn,g.mapObject=tn,g.mercatorXfromLng=$m,g.mercatorYfromLat=wa,g.mercatorZfromAltitude=vc,g.mul=_m,g.mul$1=function(o,e,a){return o[0]=e[0]*a[0],o[1]=e[1]*a[1],o[2]=e[2]*a[2],o[3]=e[3]*a[3],o},g.multiply=Hp,g.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},g.operations=Pe,g.ortho=function(o,e,a,p,y,x,D){var O=1/(e-a),L=1/(p-y),J=1/(x-D);return o[0]=-2*O,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*L,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*J,o[11]=0,o[12]=(e+a)*O,o[13]=(y+p)*L,o[14]=(D+x)*J,o[15]=1,o},g.parseCacheControl=function(o){const e={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,p,y,x)=>{const D=y||x;return e[p]=!D||D.toLowerCase(),""}),e["max-age"]){const a=parseInt(e["max-age"],10);isNaN(a)?delete e["max-age"]:e["max-age"]=a}return e},g.parseGlyphPbf=function(o){return new Od(o).readFields(Vm,[])},g.pbf=af,g.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Mo/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const e=o.bucket.layers[0].layout,a=o.bucket.layers[0]._unevaluatedLayout._values,p={layoutIconSize:a["icon-size"].possiblyEvaluate(new hr(o.bucket.zoom+1),o.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new hr(o.bucket.zoom+1),o.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new hr(18))};if("composite"===o.bucket.textSizeData.kind){const{minZoom:L,maxZoom:J}=o.bucket.textSizeData;p.compositeTextSizes=[a["text-size"].possiblyEvaluate(new hr(L),o.canonical),a["text-size"].possiblyEvaluate(new hr(J),o.canonical)]}if("composite"===o.bucket.iconSizeData.kind){const{minZoom:L,maxZoom:J}=o.bucket.iconSizeData;p.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new hr(L),o.canonical),a["icon-size"].possiblyEvaluate(new hr(J),o.canonical)]}const y=24*e.get("text-line-height"),x="viewport"!==e.get("text-rotation-alignment")&&"point"!==e.get("symbol-placement"),D=e.get("text-keep-upright"),O=e.get("text-size");for(const L of o.bucket.features){const J=e.get("text-font").evaluate(L,{},o.canonical).join(","),re=O.evaluate(L,{},o.canonical),de=p.layoutTextSize.evaluate(L,{},o.canonical),ve=p.layoutIconSize.evaluate(L,{},o.canonical),xe={horizontal:{},vertical:void 0},De=L.text;let He,Ve=[0,0];if(De){const it=De.toString(),Dt=24*e.get("text-letter-spacing").evaluate(L,{},o.canonical),Ot=_s(it)?Dt:0,Ht=e.get("text-anchor").evaluate(L,{},o.canonical),Fn=e.get("text-variable-anchor");if(!Fn){const En=e.get("text-radial-offset").evaluate(L,{},o.canonical);Ve=En?xu(Ht,[24*En,id]):e.get("text-offset").evaluate(L,{},o.canonical).map(wn=>24*wn)}let Un=x?"center":e.get("text-justify").evaluate(L,{},o.canonical);const Mn=e.get("symbol-placement"),vn="point"===Mn?24*e.get("text-max-width").evaluate(L,{},o.canonical):0,fn=()=>{o.bucket.allowVerticalPlacement&&xl(it)&&(xe.vertical=pu(De,o.glyphMap,o.glyphPositions,o.imagePositions,J,vn,y,Ht,"left",Ot,Ve,g.WritingMode.vertical,!0,Mn,de,re))};if(!x&&Fn){const En="auto"===Un?Fn.map(Jt=>lp(Jt)):[Un];let wn=!1;for(let Jt=0;Jt<En.length;Jt++){const jn=En[Jt];if(!xe.horizontal[jn])if(wn)xe.horizontal[jn]=xe.horizontal[0];else{const Hn=pu(De,o.glyphMap,o.glyphPositions,o.imagePositions,J,vn,y,"center",jn,Ot,Ve,g.WritingMode.horizontal,!1,Mn,de,re);Hn&&(xe.horizontal[jn]=Hn,wn=1===Hn.positionedLines.length)}}fn()}else{"auto"===Un&&(Un=lp(Ht));const En=pu(De,o.glyphMap,o.glyphPositions,o.imagePositions,J,vn,y,Ht,Un,Ot,Ve,g.WritingMode.horizontal,!1,Mn,de,re);En&&(xe.horizontal[Un]=En),fn(),xl(it)&&x&&D&&(xe.vertical=pu(De,o.glyphMap,o.glyphPositions,o.imagePositions,J,vn,y,Ht,Un,Ot,Ve,g.WritingMode.vertical,!1,Mn,de,re))}}let st=!1;if(L.icon&&L.icon.name){const it=o.imageMap[L.icon.name];it&&(He=mf(o.imagePositions[L.icon.name],e.get("icon-offset").evaluate(L,{},o.canonical),e.get("icon-anchor").evaluate(L,{},o.canonical)),st=!!it.sdf,void 0===o.bucket.sdfIcons?o.bucket.sdfIcons=st:o.bucket.sdfIcons!==st&&ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(it.pixelRatio!==o.bucket.pixelRatio||0!==e.get("icon-rotate").constantOr(1))&&(o.bucket.iconsNeedLinear=!0))}const gt=Tf(xe.horizontal)||xe.vertical;o.bucket.iconsInText=!!gt&&gt.iconsInText,(gt||He)&&Mf(o.bucket,L,xe,He,o.imageMap,p,de,ve,Ve,st,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},g.perspective=function(o,e,a,p,y){var x,D=1/Math.tan(e/2);return o[0]=D/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=D,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=y&&y!==1/0?(o[10]=(y+p)*(x=1/(p-y)),o[14]=2*y*p*x):(o[10]=-1,o[14]=-2*p),o},g.pick=function(o,e){const a={};for(let p=0;p<e.length;p++){const y=e[p];y in o&&(a[y]=o[y])}return a},g.plugin=os,g.pointGeometry=_e,g.polygonIntersectsPolygon=Dh,g.potpack=hf,g.register=Tn,g.registerForPluginStateChange=function(o){return o({pluginStatus:qr,pluginURL:ea}),Na.on("pluginStateChange",o),o},g.renderColorRamp=vd,g.rotateX=function(o,e,a){var p=Math.sin(a),y=Math.cos(a),x=e[4],D=e[5],O=e[6],L=e[7],J=e[8],re=e[9],de=e[10],ve=e[11];return e!==o&&(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[4]=x*y+J*p,o[5]=D*y+re*p,o[6]=O*y+de*p,o[7]=L*y+ve*p,o[8]=J*y-x*p,o[9]=re*y-D*p,o[10]=de*y-O*p,o[11]=ve*y-L*p,o},g.rotateZ=function(o,e,a){var p=Math.sin(a),y=Math.cos(a),x=e[0],D=e[1],O=e[2],L=e[3],J=e[4],re=e[5],de=e[6],ve=e[7];return e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[0]=x*y+J*p,o[1]=D*y+re*p,o[2]=O*y+de*p,o[3]=L*y+ve*p,o[4]=J*y-x*p,o[5]=re*y-D*p,o[6]=de*y-O*p,o[7]=ve*y-L*p,o},g.sameOrigin=an,g.scale=function(o,e,a){var p=a[0],y=a[1],x=a[2];return o[0]=e[0]*p,o[1]=e[1]*p,o[2]=e[2]*p,o[3]=e[3]*p,o[4]=e[4]*y,o[5]=e[5]*y,o[6]=e[6]*y,o[7]=e[7]*y,o[8]=e[8]*x,o[9]=e[9]*x,o[10]=e[10]*x,o[11]=e[11]*x,o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o},g.setRTLTextPlugin=function(o,e,a=!1){if(qr===rc||qr===tl||qr===is)throw new Error("setRTLTextPlugin cannot be called multiple times.");ea=qt.resolveURL(o),qr=rc,Fl=e,rs(),a||sc()},g.sphericalToCartesian=function([o,e,a]){return e+=90,e*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(e)*Math.sin(a),y:o*Math.sin(e)*Math.sin(a),z:o*Math.cos(a)}},g.toEvaluationFeature=Dl,g.transformMat4=Gl,g.translate=function(o,e,a){var p,y,x,D,O,L,J,re,de,ve,xe,De,He=a[0],Ve=a[1],st=a[2];return e===o?(o[12]=e[0]*He+e[4]*Ve+e[8]*st+e[12],o[13]=e[1]*He+e[5]*Ve+e[9]*st+e[13],o[14]=e[2]*He+e[6]*Ve+e[10]*st+e[14],o[15]=e[3]*He+e[7]*Ve+e[11]*st+e[15]):(y=e[1],x=e[2],D=e[3],O=e[4],L=e[5],J=e[6],re=e[7],de=e[8],ve=e[9],xe=e[10],De=e[11],o[0]=p=e[0],o[1]=y,o[2]=x,o[3]=D,o[4]=O,o[5]=L,o[6]=J,o[7]=re,o[8]=de,o[9]=ve,o[10]=xe,o[11]=De,o[12]=p*He+O*Ve+de*st+e[12],o[13]=y*He+L*Ve+ve*st+e[13],o[14]=x*He+J*Ve+xe*st+e[14],o[15]=D*He+re*Ve+De*st+e[15]),o},g.triggerPluginCompletionEvent=oc,g.unicodeBlockLookup=bn,g.uniqueId=function(){return pt++},g.v8Spec=me,g.validateCustomStyleLayer=function(o){const e=[],a=o.id;return void 0===a&&e.push({message:`layers.${a}: missing required property "id"`}),void 0===o.render&&e.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&"2d"!==o.renderingMode&&"3d"!==o.renderingMode&&e.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),e},g.validateLight=Ar,g.validateStyle=$o,g.vectorTile=al,g.warnOnce=ze,g.wrap=$e}),l(0,function(g){class Ge{constructor(V){this.keyCache={},V&&this.replace(V)}replace(V){this._layerConfigs={},this._layers={},this.update(V,[])}update(V,U){for(const X of V){this._layerConfigs[X.id]=X;const ce=this._layers[X.id]=g.createStyleLayer(X);ce._featureFilter=g.createFilter(ce.filter),this.keyCache[X.id]&&delete this.keyCache[X.id]}for(const X of U)delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X];this.familiesBySource={};const $=g.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const X of $){const ce=X.map(yt=>this._layers[yt.id]),Ce=ce[0];if("none"===Ce.visibility)continue;const ke=Ce.source||"";let Ie=this.familiesBySource[ke];Ie||(Ie=this.familiesBySource[ke]={});const Qe=Ce.sourceLayer||"_geojsonTileLayer";let Ft=Ie[Qe];Ft||(Ft=Ie[Qe]=[]),Ft.push(ce)}}}class _e{constructor(V){const U={},$=[];for(const ke in V){const Ie=V[ke],Qe=U[ke]={};for(const Ft in Ie){const yt=Ie[+Ft];if(!yt||0===yt.bitmap.width||0===yt.bitmap.height)continue;const Pt={x:0,y:0,w:yt.bitmap.width+2,h:yt.bitmap.height+2};$.push(Pt),Qe[Ft]={rect:Pt,metrics:yt.metrics}}}const{w:X,h:ce}=g.potpack($),Ce=new g.AlphaImage({width:X||1,height:ce||1});for(const ke in V){const Ie=V[ke];for(const Qe in Ie){const Ft=Ie[+Qe];if(!Ft||0===Ft.bitmap.width||0===Ft.bitmap.height)continue;const yt=U[ke][Qe].rect;g.AlphaImage.copy(Ft.bitmap,Ce,{x:0,y:0},{x:yt.x+1,y:yt.y+1},Ft.bitmap)}}this.image=Ce,this.positions=U}}g.register("GlyphAtlas",_e);class Ze{constructor(V){this.tileID=new g.OverscaledTileID(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId}parse(V,U,$,X,ce){this.status="parsing",this.data=V,this.collisionBoxArray=new g.CollisionBoxArray;const Ce=new g.DictionaryCoder(Object.keys(V.layers).sort()),ke=new g.FeatureIndex(this.tileID,this.promoteId);ke.bucketLayerIDs=[];const Ie={},Qe={featureIndex:ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:$},Ft=U.familiesBySource[this.source];for(const Te in Ft){const ot=V.layers[Te];if(!ot)continue;1===ot.version&&g.warnOnce(`Vector tile source "${this.source}" layer "${Te}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const St=Ce.encode(Te),rn=[];for(let Ln=0;Ln<ot.length;Ln++){const Bn=ot.feature(Ln),Ji=ke.getId(Bn,Te);rn.push({feature:Bn,id:Ji,index:Ln,sourceLayerIndex:St})}for(const Ln of Ft[Te]){const Bn=Ln[0];Bn.source!==this.source&&g.warnOnce(`layer.source = ${Bn.source} does not equal this.source = ${this.source}`),Bn.minzoom&&this.zoom<Math.floor(Bn.minzoom)||Bn.maxzoom&&this.zoom>=Bn.maxzoom||"none"!==Bn.visibility&&(Ae(Ln,this.zoom,$),(Ie[Bn.id]=Bn.createBucket({index:ke.bucketLayerIDs.length,layers:Ln,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:St,sourceID:this.source})).populate(rn,Qe,this.tileID.canonical),ke.bucketLayerIDs.push(Ln.map(Ji=>Ji.id)))}}let yt,Pt,nn,dn;const on=g.mapObject(Qe.glyphDependencies,Te=>Object.keys(Te).map(Number));Object.keys(on).length?X.send("getGlyphs",{uid:this.uid,stacks:on,source:this.source,tileID:this.tileID,type:"glyphs"},(Te,ot)=>{yt||(yt=Te,Pt=ot,Ne.call(this))}):Pt={};const cn=Object.keys(Qe.iconDependencies);cn.length?X.send("getImages",{icons:cn,source:this.source,tileID:this.tileID,type:"icons"},(Te,ot)=>{yt||(yt=Te,nn=ot,Ne.call(this))}):nn={};const Fe=Object.keys(Qe.patternDependencies);function Ne(){if(yt)return ce(yt);if(Pt&&nn&&dn){const Te=new _e(Pt),ot=new g.ImageAtlas(nn,dn);for(const St in Ie){const rn=Ie[St];rn instanceof g.SymbolBucket?(Ae(rn.layers,this.zoom,$),g.performSymbolLayout({bucket:rn,glyphMap:Pt,glyphPositions:Te.positions,imageMap:nn,imagePositions:ot.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):rn.hasPattern&&(rn instanceof g.LineBucket||rn instanceof g.FillBucket||rn instanceof g.FillExtrusionBucket)&&(Ae(rn.layers,this.zoom,$),rn.addFeatures(Qe,this.tileID.canonical,ot.patternPositions))}this.status="done",ce(null,{buckets:Object.values(Ie).filter(St=>!St.isEmpty()),featureIndex:ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Te.image,imageAtlas:ot,glyphMap:this.returnDependencies?Pt:null,iconMap:this.returnDependencies?nn:null,glyphPositions:this.returnDependencies?Te.positions:null})}}Fe.length?X.send("getImages",{icons:Fe,source:this.source,tileID:this.tileID,type:"patterns"},(Te,ot)=>{yt||(yt=Te,dn=ot,Ne.call(this))}):dn={},Ne.call(this)}}function Ae(ie,V,U){const $=new g.EvaluationParameters(V);for(const X of ie)X.recalculate($,U)}function Ue(ie,V){const U=g.getArrayBuffer(ie.request,($,X,ce,Ce)=>{$?V($):X&&V(null,{vectorTile:new g.vectorTile.VectorTile(new g.Protobuf(X)),rawData:X,cacheControl:ce,expires:Ce})});return()=>{U.cancel(),V()}}class je{constructor(V,U,$,X){this.actor=V,this.layerIndex=U,this.availableImages=$,this.loadVectorData=X||Ue,this.loading={},this.loaded={}}loadTile(V,U){const $=V.uid;this.loading||(this.loading={});const X=!!(V&&V.request&&V.request.collectResourceTiming)&&new g.RequestPerformance(V.request),ce=this.loading[$]=new Ze(V);ce.abort=this.loadVectorData(V,(Ce,ke)=>{if(delete this.loading[$],Ce||!ke)return ce.status="done",this.loaded[$]=ce,U(Ce);const Ie=ke.rawData,Qe={};ke.expires&&(Qe.expires=ke.expires),ke.cacheControl&&(Qe.cacheControl=ke.cacheControl);const Ft={};if(X){const yt=X.finish();yt&&(Ft.resourceTiming=JSON.parse(JSON.stringify(yt)))}ce.vectorTile=ke.vectorTile,ce.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,(yt,Pt)=>{if(yt||!Pt)return U(yt);U(null,g.extend({rawTileData:Ie.slice(0)},Pt,Qe,Ft))}),this.loaded=this.loaded||{},this.loaded[$]=ce})}reloadTile(V,U){const $=this.loaded,X=V.uid,ce=this;if($&&$[X]){const Ce=$[X];Ce.showCollisionBoxes=V.showCollisionBoxes;const ke=(Ie,Qe)=>{const Ft=Ce.reloadCallback;Ft&&(delete Ce.reloadCallback,Ce.parse(Ce.vectorTile,ce.layerIndex,this.availableImages,ce.actor,Ft)),U(Ie,Qe)};"parsing"===Ce.status?Ce.reloadCallback=ke:"done"===Ce.status&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ke):ke())}}abortTile(V,U){const $=this.loading,X=V.uid;$&&$[X]&&$[X].abort&&($[X].abort(),delete $[X]),U()}removeTile(V,U){const $=this.loaded,X=V.uid;$&&$[X]&&delete $[X],U()}}class Je{constructor(){this.loaded={}}loadTile(V,U){const{uid:$,encoding:X,rawImageData:ce}=V,Ce=g.isImageBitmap(ce)?this.getImageData(ce):ce,ke=new g.DEMData($,Ce,X);this.loaded=this.loaded||{},this.loaded[$]=ke,U(null,ke)}getImageData(V){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(V.width,V.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=V.width,this.offscreenCanvas.height=V.height,this.offscreenCanvasContext.drawImage(V,0,0,V.width,V.height);const U=this.offscreenCanvasContext.getImageData(-1,-1,V.width+2,V.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new g.RGBAImage({width:U.width,height:U.height},U.data)}removeTile(V){const U=this.loaded,$=V.uid;U&&U[$]&&delete U[$]}}function Le(ie,V){if(0!==ie.length){et(ie[0],V);for(var U=1;U<ie.length;U++)et(ie[U],!V)}}function et(ie,V){for(var U=0,$=0,X=0,ce=ie.length,Ce=ce-1;X<ce;Ce=X++){var ke=(ie[X][0]-ie[Ce][0])*(ie[Ce][1]+ie[X][1]),Ie=U+ke;$+=Math.abs(U)>=Math.abs(ke)?U-Ie+ke:ke-Ie+U,U=Ie}U+$>=0!=!!V&&ie.reverse()}var qe=g.getDefaultExportFromCjs(function ie(V,U){var $,X=V&&V.type;if("FeatureCollection"===X)for($=0;$<V.features.length;$++)ie(V.features[$],U);else if("GeometryCollection"===X)for($=0;$<V.geometries.length;$++)ie(V.geometries[$],U);else if("Feature"===X)ie(V.geometry,U);else if("Polygon"===X)Le(V.coordinates,U);else if("MultiPolygon"===X)for($=0;$<V.coordinates.length;$++)Le(V.coordinates[$],U);return V});const $e=g.vectorTile.VectorTileFeature.prototype.toGeoJSON;var mt={exports:{}},pt=g.pointGeometry,wt=g.vectorTile.VectorTileFeature,tn=Zt;function Zt(ie,V){this.options=V||{},this.features=ie,this.length=ie.length}function bt(ie,V){this.id="number"==typeof ie.id?ie.id:void 0,this.type=ie.type,this.rawGeometry=1===ie.type?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=V||4096}Zt.prototype.feature=function(ie){return new bt(this.features[ie],this.options.extent)},bt.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var V=0;V<ie.length;V++){for(var U=ie[V],$=[],X=0;X<U.length;X++)$.push(new pt(U[X][0],U[X][1]));this.geometry.push($)}return this.geometry},bt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,V=1/0,U=-1/0,$=1/0,X=-1/0,ce=0;ce<ie.length;ce++)for(var Ce=ie[ce],ke=0;ke<Ce.length;ke++){var Ie=Ce[ke];V=Math.min(V,Ie.x),U=Math.max(U,Ie.x),$=Math.min($,Ie.y),X=Math.max(X,Ie.y)}return[V,$,U,X]},bt.prototype.toGeoJSON=wt.prototype.toGeoJSON;var Re=g.pbf,ze=tn;function It(ie){var V=new Re;return function(U,$){for(var X in U.layers)$.writeMessage(3,At,U.layers[X])}(ie,V),V.finish()}function At(ie,V){var U;V.writeVarintField(15,ie.version||1),V.writeStringField(1,ie.name||""),V.writeVarintField(5,ie.extent||4096);var $={keys:[],values:[],keycache:{},valuecache:{}};for(U=0;U<ie.length;U++)$.feature=ie.feature(U),V.writeMessage(2,kt,$);var X=$.keys;for(U=0;U<X.length;U++)V.writeStringField(3,X[U]);var ce=$.values;for(U=0;U<ce.length;U++)V.writeMessage(4,_t,ce[U])}function kt(ie,V){var U=ie.feature;void 0!==U.id&&V.writeVarintField(1,U.id),V.writeMessage(2,jt,ie),V.writeVarintField(3,U.type),V.writeMessage(4,xt,U)}function jt(ie,V){var U=ie.feature,$=ie.keys,X=ie.values,ce=ie.keycache,Ce=ie.valuecache;for(var ke in U.properties){var Ie=U.properties[ke],Qe=ce[ke];if(null!==Ie){void 0===Qe&&($.push(ke),ce[ke]=Qe=$.length-1),V.writeVarint(Qe);var Ft=typeof Ie;"string"!==Ft&&"boolean"!==Ft&&"number"!==Ft&&(Ie=JSON.stringify(Ie));var yt=Ft+":"+Ie,Pt=Ce[yt];void 0===Pt&&(X.push(Ie),Ce[yt]=Pt=X.length-1),V.writeVarint(Pt)}}}function nt(ie,V){return(V<<3)+(7&ie)}function at(ie){return ie<<1^ie>>31}function xt(ie,V){for(var U=ie.loadGeometry(),$=ie.type,X=0,ce=0,Ce=U.length,ke=0;ke<Ce;ke++){var Ie=U[ke],Qe=1;1===$&&(Qe=Ie.length),V.writeVarint(nt(1,Qe));for(var Ft=3===$?Ie.length-1:Ie.length,yt=0;yt<Ft;yt++){1===yt&&1!==$&&V.writeVarint(nt(2,Ft-1));var Pt=Ie[yt].x-X,nn=Ie[yt].y-ce;V.writeVarint(at(Pt)),V.writeVarint(at(nn)),X+=Pt,ce+=nn}3===$&&V.writeVarint(nt(7,1))}}function _t(ie,V){var U=typeof ie;"string"===U?V.writeStringField(1,ie):"boolean"===U?V.writeBooleanField(7,ie):"number"===U&&(ie%1!=0?V.writeDoubleField(3,ie):ie<0?V.writeSVarintField(6,ie):V.writeVarintField(5,ie))}mt.exports=It,mt.exports.fromVectorTileJs=It,mt.exports.fromGeojsonVt=function(ie,V){V=V||{};var U={};for(var $ in ie)U[$]=new ze(ie[$].features,V),U[$].name=$,U[$].version=V.version,U[$].extent=V.extent;return It({layers:U})},mt.exports.GeoJSONWrapper=ze;var Yt=g.getDefaultExportFromCjs(mt.exports);const qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},On=Math.fround||(Jn=new Float32Array(1),ie=>(Jn[0]=+ie,Jn[0]));var Jn;class hi{constructor(V){this.options=Object.assign(Object.create(qt),V),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(V){const{log:U,minZoom:$,maxZoom:X}=this.options;U&&console.time("total time");const ce=`prepare ${V.length} points`;U&&console.time(ce),this.points=V;const Ce=[];for(let Ie=0;Ie<V.length;Ie++){const Qe=V[Ie];if(!Qe.geometry)continue;const[Ft,yt]=Qe.geometry.coordinates,Pt=On(Xn(Ft)),nn=On(ai(yt));Ce.push(Pt,nn,1/0,Ie,-1,1),this.options.reduce&&Ce.push(0)}let ke=this.trees[X+1]=this._createTree(Ce);U&&console.timeEnd(ce);for(let Ie=X;Ie>=$;Ie--){const Qe=+Date.now();ke=this.trees[Ie]=this._createTree(this._cluster(ke,Ie)),U&&console.log("z%d: %d clusters in %dms",Ie,ke.numItems,+Date.now()-Qe)}return U&&console.timeEnd("total time"),this}getClusters(V,U){let $=((V[0]+180)%360+360)%360-180;const X=Math.max(-90,Math.min(90,V[1]));let ce=180===V[2]?180:((V[2]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)$=-180,ce=180;else if($>ce){const yt=this.getClusters([$,X,180,Ce],U),Pt=this.getClusters([-180,X,ce,Ce],U);return yt.concat(Pt)}const ke=this.trees[this._limitZoom(U)],Ie=ke.range(Xn($),ai(Ce),Xn(ce),ai(X)),Qe=ke.data,Ft=[];for(const yt of Ie){const Pt=this.stride*yt;Ft.push(Qe[Pt+5]>1?Xt(Qe,Pt,this.clusterProps):this.points[Qe[Pt+3]])}return Ft}getChildren(V){const U=this._getOriginId(V),$=this._getOriginZoom(V),X="No cluster with the specified id.",ce=this.trees[$];if(!ce)throw new Error(X);const Ce=ce.data;if(U*this.stride>=Ce.length)throw new Error(X);const ke=this.options.radius/(this.options.extent*Math.pow(2,$-1)),Ie=ce.within(Ce[U*this.stride],Ce[U*this.stride+1],ke),Qe=[];for(const Ft of Ie){const yt=Ft*this.stride;Ce[yt+4]===V&&Qe.push(Ce[yt+5]>1?Xt(Ce,yt,this.clusterProps):this.points[Ce[yt+3]])}if(0===Qe.length)throw new Error(X);return Qe}getLeaves(V,U,$){const X=[];return this._appendLeaves(X,V,U=U||10,$=$||0,0),X}getTile(V,U,$){const X=this.trees[this._limitZoom(V)],ce=Math.pow(2,V),{extent:Ce,radius:ke}=this.options,Ie=ke/Ce,Qe=($-Ie)/ce,Ft=($+1+Ie)/ce,yt={features:[]};return this._addTileFeatures(X.range((U-Ie)/ce,Qe,(U+1+Ie)/ce,Ft),X.data,U,$,ce,yt),0===U&&this._addTileFeatures(X.range(1-Ie/ce,Qe,1,Ft),X.data,ce,$,ce,yt),U===ce-1&&this._addTileFeatures(X.range(0,Qe,Ie/ce,Ft),X.data,-1,$,ce,yt),yt.features.length?yt:null}getClusterExpansionZoom(V){let U=this._getOriginZoom(V)-1;for(;U<=this.options.maxZoom;){const $=this.getChildren(V);if(U++,1!==$.length)break;V=$[0].properties.cluster_id}return U}_appendLeaves(V,U,$,X,ce){const Ce=this.getChildren(U);for(const ke of Ce){const Ie=ke.properties;if(Ie&&Ie.cluster?ce+Ie.point_count<=X?ce+=Ie.point_count:ce=this._appendLeaves(V,Ie.cluster_id,$,X,ce):ce<X?ce++:V.push(ke),V.length===$)break}return ce}_createTree(V){const U=new g.KDBush(V.length/this.stride|0,this.options.nodeSize,Float32Array);for(let $=0;$<V.length;$+=this.stride)U.add(V[$],V[$+1]);return U.finish(),U.data=V,U}_addTileFeatures(V,U,$,X,ce,Ce){for(const ke of V){const Ie=ke*this.stride,Qe=U[Ie+5]>1;let Ft,yt,Pt;if(Qe)Ft=ui(U,Ie,this.clusterProps),yt=U[Ie],Pt=U[Ie+1];else{const on=this.points[U[Ie+3]];Ft=on.properties;const[cn,Fe]=on.geometry.coordinates;yt=Xn(cn),Pt=ai(Fe)}const nn={type:1,geometry:[[Math.round(this.options.extent*(yt*ce-$)),Math.round(this.options.extent*(Pt*ce-X))]],tags:Ft};let dn;dn=Qe||this.options.generateId?U[Ie+3]:this.points[U[Ie+3]].id,void 0!==dn&&(nn.id=dn),Ce.features.push(nn)}}_limitZoom(V){return Math.max(this.options.minZoom,Math.min(Math.floor(+V),this.options.maxZoom+1))}_cluster(V,U){const{radius:$,extent:X,reduce:ce,minPoints:Ce}=this.options,ke=$/(X*Math.pow(2,U)),Ie=V.data,Qe=[],Ft=this.stride;for(let yt=0;yt<Ie.length;yt+=Ft){if(Ie[yt+2]<=U)continue;Ie[yt+2]=U;const Pt=Ie[yt],nn=Ie[yt+1],dn=V.within(Ie[yt],Ie[yt+1],ke),on=Ie[yt+5];let cn=on;for(const Fe of dn){const Ne=Fe*Ft;Ie[Ne+2]>U&&(cn+=Ie[Ne+5])}if(cn>on&&cn>=Ce){let Fe,Ne=Pt*on,Te=nn*on,ot=-1;const St=((yt/Ft|0)<<5)+(U+1)+this.points.length;for(const rn of dn){const Ln=rn*Ft;if(Ie[Ln+2]<=U)continue;Ie[Ln+2]=U;const Bn=Ie[Ln+5];Ne+=Ie[Ln]*Bn,Te+=Ie[Ln+1]*Bn,Ie[Ln+4]=St,ce&&(Fe||(Fe=this._map(Ie,yt,!0),ot=this.clusterProps.length,this.clusterProps.push(Fe)),ce(Fe,this._map(Ie,Ln)))}Ie[yt+4]=St,Qe.push(Ne/cn,Te/cn,1/0,St,-1,cn),ce&&Qe.push(ot)}else{for(let Fe=0;Fe<Ft;Fe++)Qe.push(Ie[yt+Fe]);if(cn>1)for(const Fe of dn){const Ne=Fe*Ft;if(!(Ie[Ne+2]<=U)){Ie[Ne+2]=U;for(let Te=0;Te<Ft;Te++)Qe.push(Ie[Ne+Te])}}}}return Qe}_getOriginId(V){return V-this.points.length>>5}_getOriginZoom(V){return(V-this.points.length)%32}_map(V,U,$){if(V[U+5]>1){const Ce=this.clusterProps[V[U+6]];return $?Object.assign({},Ce):Ce}const X=this.points[V[U+3]].properties,ce=this.options.map(X);return $&&ce===X?Object.assign({},ce):ce}}function Xt(ie,V,U){return{type:"Feature",id:ie[V+3],properties:ui(ie,V,U),geometry:{type:"Point",coordinates:[($=ie[V],360*($-.5)),an(ie[V+1])]}};var $}function ui(ie,V,U){const $=ie[V+5],X=$>=1e4?`${Math.round($/1e3)}k`:$>=1e3?Math.round($/100)/10+"k":$,ce=ie[V+6],Ce=-1===ce?{}:Object.assign({},U[ce]);return Object.assign(Ce,{cluster:!0,cluster_id:ie[V+3],point_count:$,point_count_abbreviated:X})}function Xn(ie){return ie/360+.5}function ai(ie){const V=Math.sin(ie*Math.PI/180),U=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return U<0?0:U>1?1:U}function an(ie){const V=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(V))/Math.PI-90}function hn(ie,V,U,$){for(var X,ce=$,Ce=U-V>>1,ke=U-V,Ie=ie[V],Qe=ie[V+1],Ft=ie[U],yt=ie[U+1],Pt=V+3;Pt<U;Pt+=3){var nn=dt(ie[Pt],ie[Pt+1],Ie,Qe,Ft,yt);if(nn>ce)X=Pt,ce=nn;else if(nn===ce){var dn=Math.abs(Pt-Ce);dn<ke&&(X=Pt,ke=dn)}}ce>$&&(X-V>3&&hn(ie,V,X,$),ie[X+2]=ce,U-X>3&&hn(ie,X,U,$))}function dt(ie,V,U,$,X,ce){var Ce=X-U,ke=ce-$;if(0!==Ce||0!==ke){var Ie=((ie-U)*Ce+(V-$)*ke)/(Ce*Ce+ke*ke);Ie>1?(U=X,$=ce):Ie>0&&(U+=Ce*Ie,$+=ke*Ie)}return(Ce=ie-U)*Ce+(ke=V-$)*ke}function Mt(ie,V,U,$){var X={id:void 0===ie?null:ie,type:V,geometry:U,tags:$,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ce){var Ce=ce.geometry,ke=ce.type;if("Point"===ke||"MultiPoint"===ke||"LineString"===ke)Kt(ce,Ce);else if("Polygon"===ke||"MultiLineString"===ke)for(var Ie=0;Ie<Ce.length;Ie++)Kt(ce,Ce[Ie]);else if("MultiPolygon"===ke)for(Ie=0;Ie<Ce.length;Ie++)for(var Qe=0;Qe<Ce[Ie].length;Qe++)Kt(ce,Ce[Ie][Qe])}(X),X}function Kt(ie,V){for(var U=0;U<V.length;U+=3)ie.minX=Math.min(ie.minX,V[U]),ie.minY=Math.min(ie.minY,V[U+1]),ie.maxX=Math.max(ie.maxX,V[U]),ie.maxY=Math.max(ie.maxY,V[U+1])}function Qt(ie,V,U,$){if(V.geometry){var X=V.geometry.coordinates,ce=V.geometry.type,Ce=Math.pow(U.tolerance/((1<<U.maxZoom)*U.extent),2),ke=[],Ie=V.id;if(U.promoteId?Ie=V.properties[U.promoteId]:U.generateId&&(Ie=$||0),"Point"===ce)xn(X,ke);else if("MultiPoint"===ce)for(var Qe=0;Qe<X.length;Qe++)xn(X[Qe],ke);else if("LineString"===ce)Vn(X,ke,Ce,!1);else if("MultiLineString"===ce){if(U.lineMetrics){for(Qe=0;Qe<X.length;Qe++)Vn(X[Qe],ke=[],Ce,!1),ie.push(Mt(Ie,"LineString",ke,V.properties));return}Qn(X,ke,Ce,!1)}else if("Polygon"===ce)Qn(X,ke,Ce,!0);else{if("MultiPolygon"!==ce){if("GeometryCollection"===ce){for(Qe=0;Qe<V.geometry.geometries.length;Qe++)Qt(ie,{id:Ie,geometry:V.geometry.geometries[Qe],properties:V.properties},U,$);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qe=0;Qe<X.length;Qe++){var Ft=[];Qn(X[Qe],Ft,Ce,!0),ke.push(Ft)}}ie.push(Mt(Ie,ce,ke,V.properties))}}function xn(ie,V){V.push(pi(ie[0])),V.push(Fi(ie[1])),V.push(0)}function Vn(ie,V,U,$){for(var X,ce,Ce=0,ke=0;ke<ie.length;ke++){var Ie=pi(ie[ke][0]),Qe=Fi(ie[ke][1]);V.push(Ie),V.push(Qe),V.push(0),ke>0&&(Ce+=$?(X*Qe-Ie*ce)/2:Math.sqrt(Math.pow(Ie-X,2)+Math.pow(Qe-ce,2))),X=Ie,ce=Qe}var Ft=V.length-3;V[2]=1,hn(V,0,Ft,U),V[Ft+2]=1,V.size=Math.abs(Ce),V.start=0,V.end=V.size}function Qn(ie,V,U,$){for(var X=0;X<ie.length;X++){var ce=[];Vn(ie[X],ce,U,$),V.push(ce)}}function pi(ie){return ie/360+.5}function Fi(ie){var V=Math.sin(ie*Math.PI/180),U=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return U<0?0:U>1?1:U}function _i(ie,V,U,$,X,ce,Ce,ke){if($/=V,ce>=(U/=V)&&Ce<$)return ie;if(Ce<U||ce>=$)return null;for(var Ie=[],Qe=0;Qe<ie.length;Qe++){var Ft=ie[Qe],yt=Ft.geometry,Pt=Ft.type,nn=0===X?Ft.minX:Ft.minY,dn=0===X?Ft.maxX:Ft.maxY;if(nn>=U&&dn<$)Ie.push(Ft);else if(!(dn<U||nn>=$)){var on=[];if("Point"===Pt||"MultiPoint"===Pt)yi(yt,on,U,$,X);else if("LineString"===Pt)un(yt,on,U,$,X,!1,ke.lineMetrics);else if("MultiLineString"===Pt)Xe(yt,on,U,$,X,!1);else if("Polygon"===Pt)Xe(yt,on,U,$,X,!0);else if("MultiPolygon"===Pt)for(var cn=0;cn<yt.length;cn++){var Fe=[];Xe(yt[cn],Fe,U,$,X,!0),Fe.length&&on.push(Fe)}if(on.length){if(ke.lineMetrics&&"LineString"===Pt){for(cn=0;cn<on.length;cn++)Ie.push(Mt(Ft.id,Pt,on[cn],Ft.tags));continue}"LineString"!==Pt&&"MultiLineString"!==Pt||(1===on.length?(Pt="LineString",on=on[0]):Pt="MultiLineString"),"Point"!==Pt&&"MultiPoint"!==Pt||(Pt=3===on.length?"Point":"MultiPoint"),Ie.push(Mt(Ft.id,Pt,on,Ft.tags))}}}return Ie.length?Ie:null}function yi(ie,V,U,$,X){for(var ce=0;ce<ie.length;ce+=3){var Ce=ie[ce+X];Ce>=U&&Ce<=$&&(V.push(ie[ce]),V.push(ie[ce+1]),V.push(ie[ce+2]))}}function un(ie,V,U,$,X,ce,Ce){for(var ke,Ie,Qe=Rn(ie),Ft=0===X?te:Se,yt=ie.start,Pt=0;Pt<ie.length-3;Pt+=3){var nn=ie[Pt],dn=ie[Pt+1],on=ie[Pt+2],cn=ie[Pt+3],Fe=ie[Pt+4],Ne=0===X?nn:dn,Te=0===X?cn:Fe,ot=!1;Ce&&(ke=Math.sqrt(Math.pow(nn-cn,2)+Math.pow(dn-Fe,2))),Ne<U?Te>U&&(Ie=Ft(Qe,nn,dn,cn,Fe,U),Ce&&(Qe.start=yt+ke*Ie)):Ne>$?Te<$&&(Ie=Ft(Qe,nn,dn,cn,Fe,$),Ce&&(Qe.start=yt+ke*Ie)):Y(Qe,nn,dn,on),Te<U&&Ne>=U&&(Ie=Ft(Qe,nn,dn,cn,Fe,U),ot=!0),Te>$&&Ne<=$&&(Ie=Ft(Qe,nn,dn,cn,Fe,$),ot=!0),!ce&&ot&&(Ce&&(Qe.end=yt+ke*Ie),V.push(Qe),Qe=Rn(ie)),Ce&&(yt+=ke)}var St=ie.length-3;nn=ie[St],dn=ie[St+1],on=ie[St+2],(Ne=0===X?nn:dn)>=U&&Ne<=$&&Y(Qe,nn,dn,on),St=Qe.length-3,ce&&St>=3&&(Qe[St]!==Qe[0]||Qe[St+1]!==Qe[1])&&Y(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&V.push(Qe)}function Rn(ie){var V=[];return V.size=ie.size,V.start=ie.start,V.end=ie.end,V}function Xe(ie,V,U,$,X,ce){for(var Ce=0;Ce<ie.length;Ce++)un(ie[Ce],V,U,$,X,ce,!1)}function Y(ie,V,U,$){ie.push(V),ie.push(U),ie.push($)}function te(ie,V,U,$,X,ce){var Ce=(ce-V)/($-V);return ie.push(ce),ie.push(U+(X-U)*Ce),ie.push(1),Ce}function Se(ie,V,U,$,X,ce){var Ce=(ce-U)/(X-U);return ie.push(V+($-V)*Ce),ie.push(ce),ie.push(1),Ce}function Ke(ie,V){for(var U=[],$=0;$<ie.length;$++){var X,ce=ie[$],Ce=ce.type;if("Point"===Ce||"MultiPoint"===Ce||"LineString"===Ce)X=me(ce.geometry,V);else if("MultiLineString"===Ce||"Polygon"===Ce){X=[];for(var ke=0;ke<ce.geometry.length;ke++)X.push(me(ce.geometry[ke],V))}else if("MultiPolygon"===Ce)for(X=[],ke=0;ke<ce.geometry.length;ke++){for(var Ie=[],Qe=0;Qe<ce.geometry[ke].length;Qe++)Ie.push(me(ce.geometry[ke][Qe],V));X.push(Ie)}U.push(Mt(ce.id,Ce,X,ce.tags))}return U}function me(ie,V){var U=[];U.size=ie.size,void 0!==ie.start&&(U.start=ie.start,U.end=ie.end);for(var $=0;$<ie.length;$+=3)U.push(ie[$]+V,ie[$+1],ie[$+2]);return U}function ye(ie,V){if(ie.transformed)return ie;var U,$,X,ce=1<<ie.z,Ce=ie.x,ke=ie.y;for(U=0;U<ie.features.length;U++){var Ie=ie.features[U],Qe=Ie.geometry,Ft=Ie.type;if(Ie.geometry=[],1===Ft)for($=0;$<Qe.length;$+=2)Ie.geometry.push(he(Qe[$],Qe[$+1],V,ce,Ce,ke));else for($=0;$<Qe.length;$++){var yt=[];for(X=0;X<Qe[$].length;X+=2)yt.push(he(Qe[$][X],Qe[$][X+1],V,ce,Ce,ke));Ie.geometry.push(yt)}}return ie.transformed=!0,ie}function he(ie,V,U,$,X,ce){return[Math.round(U*(ie*$-X)),Math.round(U*(V*$-ce))]}function ge(ie,V,U,$,X){for(var ce=V===X.maxZoom?0:X.tolerance/((1<<V)*X.extent),Ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:U,y:$,z:V,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ke=0;ke<ie.length;ke++){Ce.numFeatures++,Pe(Ce,ie[ke],ce,X);var Ie=ie[ke].minX,Qe=ie[ke].minY,Ft=ie[ke].maxX,yt=ie[ke].maxY;Ie<Ce.minX&&(Ce.minX=Ie),Qe<Ce.minY&&(Ce.minY=Qe),Ft>Ce.maxX&&(Ce.maxX=Ft),yt>Ce.maxY&&(Ce.maxY=yt)}return Ce}function Pe(ie,V,U,$){var X=V.geometry,ce=V.type,Ce=[];if("Point"===ce||"MultiPoint"===ce)for(var ke=0;ke<X.length;ke+=3)Ce.push(X[ke]),Ce.push(X[ke+1]),ie.numPoints++,ie.numSimplified++;else if("LineString"===ce)rt(Ce,X,ie,U,!1,!1);else if("MultiLineString"===ce||"Polygon"===ce)for(ke=0;ke<X.length;ke++)rt(Ce,X[ke],ie,U,"Polygon"===ce,0===ke);else if("MultiPolygon"===ce)for(var Ie=0;Ie<X.length;Ie++){var Qe=X[Ie];for(ke=0;ke<Qe.length;ke++)rt(Ce,Qe[ke],ie,U,!0,0===ke)}if(Ce.length){var Ft=V.tags||null;if("LineString"===ce&&$.lineMetrics){for(var yt in Ft={},V.tags)Ft[yt]=V.tags[yt];Ft.mapbox_clip_start=X.start/X.size,Ft.mapbox_clip_end=X.end/X.size}var Pt={geometry:Ce,type:"Polygon"===ce||"MultiPolygon"===ce?3:"LineString"===ce||"MultiLineString"===ce?2:1,tags:Ft};null!==V.id&&(Pt.id=V.id),ie.features.push(Pt)}}function rt(ie,V,U,$,X,ce){var Ce=$*$;if($>0&&V.size<(X?Ce:$))U.numPoints+=V.length/3;else{for(var ke=[],Ie=0;Ie<V.length;Ie+=3)(0===$||V[Ie+2]>Ce)&&(U.numSimplified++,ke.push(V[Ie]),ke.push(V[Ie+1])),U.numPoints++;X&&function(Qe,Ft){for(var yt=0,Pt=0,nn=Qe.length,dn=nn-2;Pt<nn;dn=Pt,Pt+=2)yt+=(Qe[Pt]-Qe[dn])*(Qe[Pt+1]+Qe[dn+1]);if(yt>0===Ft)for(Pt=0,nn=Qe.length;Pt<nn/2;Pt+=2){var on=Qe[Pt],cn=Qe[Pt+1];Qe[Pt]=Qe[nn-2-Pt],Qe[Pt+1]=Qe[nn-1-Pt],Qe[nn-2-Pt]=on,Qe[nn-1-Pt]=cn}}(ke,ce),ie.push(ke)}}function ct(ie,V){var U=(V=this.options=function(X,ce){for(var Ce in ce)X[Ce]=ce[Ce];return X}(Object.create(this.options),V)).debug;if(U&&console.time("preprocess data"),V.maxZoom<0||V.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(V.promoteId&&V.generateId)throw new Error("promoteId and generateId cannot be used together.");var X,ce,Ce,ke,Ie,Qe,$=function(X,ce){var Ce=[];if("FeatureCollection"===X.type)for(var ke=0;ke<X.features.length;ke++)Qt(Ce,X.features[ke],ce,ke);else Qt(Ce,"Feature"===X.type?X:{geometry:X},ce);return Ce}(ie,V);this.tiles={},this.tileCoords=[],U&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",V.indexMaxZoom,V.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ke=X=$,Ie=_i(X,1,-1-(Ce=(ce=V).buffer/ce.extent),Ce,0,-1,2,ce),Qe=_i(X,1,1-Ce,2+Ce,0,-1,2,ce),(Ie||Qe)&&(ke=_i(X,1,-Ce,1+Ce,0,-1,2,ce)||[],Ie&&(ke=Ke(Ie,1).concat(ke)),Qe&&(ke=ke.concat(Ke(Qe,-1)))),($=ke).length&&this.splitTile($,0,0,0),U&&($.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ln(ie,V,U){return 32*((1<<ie)*U+V)+ie}function Rt(ie,V){return V?ie.properties[V]:ie.id}function mn(ie,V){if(null==ie)return!0;if("Feature"===ie.type)return null!=Rt(ie,V);if("FeatureCollection"===ie.type){const U=new Set;for(const $ of ie.features){const X=Rt($,V);if(null==X||U.has(X))return!1;U.add(X)}return!0}return!1}function gn(ie,V){const U=new Map;if(null!=ie)if("Feature"===ie.type)U.set(Rt(ie,V),ie);else for(const $ of ie.features)U.set(Rt($,V),$);return U}function ji(ie,V){const U=ie.tileID.canonical;if(!this._geoJSONIndex)return V(null,null);const $=this._geoJSONIndex.getTile(U.z,U.x,U.y);if(!$)return V(null,null);const X=new class{constructor(Ce){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.EXTENT,this.length=Ce.length,this._features=Ce}feature(Ce){return new class{constructor(ke){this._feature=ke,this.extent=g.EXTENT,this.type=ke.type,this.properties=ke.tags,"id"in ke&&!isNaN(ke.id)&&(this.id=parseInt(ke.id,10))}loadGeometry(){if(1===this._feature.type){const ke=[];for(const Ie of this._feature.geometry)ke.push([new g.Point(Ie[0],Ie[1])]);return ke}{const ke=[];for(const Ie of this._feature.geometry){const Qe=[];for(const Ft of Ie)Qe.push(new g.Point(Ft[0],Ft[1]));ke.push(Qe)}return ke}}toGeoJSON(ke,Ie,Qe){return $e.call(this,ke,Ie,Qe)}}(this._features[Ce])}}($.features);let ce=Yt(X);0===ce.byteOffset&&ce.byteLength===ce.buffer.byteLength||(ce=new Uint8Array(ce)),V(null,{vectorTile:X,rawData:ce.buffer})}ct.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ct.prototype.splitTile=function(ie,V,U,$,X,ce,Ce){for(var ke=[ie,V,U,$],Ie=this.options,Qe=Ie.debug;ke.length;){$=ke.pop(),U=ke.pop(),V=ke.pop(),ie=ke.pop();var Ft=1<<V,yt=ln(V,U,$),Pt=this.tiles[yt];if(!Pt&&(Qe>1&&console.time("creation"),Pt=this.tiles[yt]=ge(ie,V,U,$,Ie),this.tileCoords.push({z:V,x:U,y:$}),Qe)){Qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",V,U,$,Pt.numFeatures,Pt.numPoints,Pt.numSimplified),console.timeEnd("creation"));var nn="z"+V;this.stats[nn]=(this.stats[nn]||0)+1,this.total++}if(Pt.source=ie,X){if(V===Ie.maxZoom||V===X)continue;var dn=1<<X-V;if(U!==Math.floor(ce/dn)||$!==Math.floor(Ce/dn))continue}else if(V===Ie.indexMaxZoom||Pt.numPoints<=Ie.indexMaxPoints)continue;if(Pt.source=null,0!==ie.length){Qe>1&&console.time("clipping");var on,cn,Fe,Ne,Te,ot,St=.5*Ie.buffer/Ie.extent,rn=.5-St,Ln=.5+St,Bn=1+St;on=cn=Fe=Ne=null,Te=_i(ie,Ft,U-St,U+Ln,0,Pt.minX,Pt.maxX,Ie),ot=_i(ie,Ft,U+rn,U+Bn,0,Pt.minX,Pt.maxX,Ie),ie=null,Te&&(on=_i(Te,Ft,$-St,$+Ln,1,Pt.minY,Pt.maxY,Ie),cn=_i(Te,Ft,$+rn,$+Bn,1,Pt.minY,Pt.maxY,Ie),Te=null),ot&&(Fe=_i(ot,Ft,$-St,$+Ln,1,Pt.minY,Pt.maxY,Ie),Ne=_i(ot,Ft,$+rn,$+Bn,1,Pt.minY,Pt.maxY,Ie),ot=null),Qe>1&&console.timeEnd("clipping"),ke.push(on||[],V+1,2*U,2*$),ke.push(cn||[],V+1,2*U,2*$+1),ke.push(Fe||[],V+1,2*U+1,2*$),ke.push(Ne||[],V+1,2*U+1,2*$+1)}}},ct.prototype.getTile=function(ie,V,U){var $=this.options,X=$.extent,ce=$.debug;if(ie<0||ie>24)return null;var Ce=1<<ie,ke=ln(ie,V=(V%Ce+Ce)%Ce,U);if(this.tiles[ke])return ye(this.tiles[ke],X);ce>1&&console.log("drilling down to z%d-%d-%d",ie,V,U);for(var Ie,Qe=ie,Ft=V,yt=U;!Ie&&Qe>0;)Qe--,Ft=Math.floor(Ft/2),yt=Math.floor(yt/2),Ie=this.tiles[ln(Qe,Ft,yt)];return Ie&&Ie.source?(ce>1&&console.log("found parent tile z%d-%d-%d",Qe,Ft,yt),ce>1&&console.time("drilling down"),this.splitTile(Ie.source,Qe,Ft,yt,ie,V,U),ce>1&&console.timeEnd("drilling down"),this.tiles[ke]?ye(this.tiles[ke],X):null):null};class Lt extends je{constructor(V,U,$,X){super(V,U,$,ji),this._dataUpdateable=new Map,this.loadGeoJSON=(ce,Ce)=>{const{promoteId:ke}=ce;if(ce.request)return g.getJSON(ce.request,(Ie,Qe,Ft,yt)=>{this._dataUpdateable=mn(Qe,ke)?gn(Qe,ke):void 0,Ce(Ie,Qe,Ft,yt)});if("string"==typeof ce.data)try{const Ie=JSON.parse(ce.data);this._dataUpdateable=mn(Ie,ke)?gn(Ie,ke):void 0,Ce(null,Ie)}catch{Ce(new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`))}else ce.dataDiff?this._dataUpdateable?(function(Ie,Qe,Ft){var yt,Pt,nn,dn;if(Qe.removeAll&&Ie.clear(),Qe.remove)for(const on of Qe.remove)Ie.delete(on);if(Qe.add)for(const on of Qe.add){const cn=Rt(on,Ft);null!=cn&&Ie.set(cn,on)}if(Qe.update)for(const on of Qe.update){let cn=Ie.get(on.id);if(null==cn)continue;const Fe=!on.removeAllProperties&&((null===(yt=on.removeProperties)||void 0===yt?void 0:yt.length)>0||(null===(Pt=on.addOrUpdateProperties)||void 0===Pt?void 0:Pt.length)>0);if((on.newGeometry||on.removeAllProperties||Fe)&&(cn={...cn},Ie.set(on.id,cn),Fe&&(cn.properties={...cn.properties})),on.newGeometry&&(cn.geometry=on.newGeometry),on.removeAllProperties)cn.properties={};else if((null===(nn=on.removeProperties)||void 0===nn?void 0:nn.length)>0)for(const Ne of on.removeProperties)Object.prototype.hasOwnProperty.call(cn.properties,Ne)&&delete cn.properties[Ne];if((null===(dn=on.addOrUpdateProperties)||void 0===dn?void 0:dn.length)>0)for(const{key:Ne,value:Te}of on.addOrUpdateProperties)cn.properties[Ne]=Te}}(this._dataUpdateable,ce.dataDiff,ke),Ce(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ce(new Error(`Cannot update existing geojson data in ${ce.source}`)):Ce(new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},X&&(this.loadGeoJSON=X)}loadData(V,U){var $;null===($=this._pendingRequest)||void 0===$||$.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const X=!!(V&&V.request&&V.request.collectResourceTiming)&&new g.RequestPerformance(V.request);this._pendingCallback=U,this._pendingRequest=this.loadGeoJSON(V,(ce,Ce)=>{if(delete this._pendingCallback,delete this._pendingRequest,ce||!Ce)return U(ce);if("object"!=typeof Ce)return U(new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`));{qe(Ce,!0);try{if(V.filter){const Ie=g.createExpression(V.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Ie.result)throw new Error(Ie.value.map(Ft=>`${Ft.key}: ${Ft.message}`).join(", "));const Qe=Ce.features.filter(Ft=>Ie.value.evaluate({zoom:0},Ft));Ce={type:"FeatureCollection",features:Qe}}this._geoJSONIndex=V.cluster?new hi(function({superclusterOptions:Ie,clusterProperties:Qe}){if(!Qe||!Ie)return Ie;const Ft={},yt={},Pt={accumulated:null,zoom:0},nn={properties:null},dn=Object.keys(Qe);for(const on of dn){const[cn,Fe]=Qe[on],Ne=g.createExpression(Fe),Te=g.createExpression("string"==typeof cn?[cn,["accumulated"],["get",on]]:cn);Ft[on]=Ne.value,yt[on]=Te.value}return Ie.map=on=>{nn.properties=on;const cn={};for(const Fe of dn)cn[Fe]=Ft[Fe].evaluate(Pt,nn);return cn},Ie.reduce=(on,cn)=>{nn.properties=cn;for(const Fe of dn)Pt.accumulated=on[Fe],on[Fe]=yt[Fe].evaluate(Pt,nn)},Ie}(V)).load(Ce.features):new ct(Ie=Ce,V.geojsonVtOptions)}catch(Ie){return U(Ie)}this.loaded={};const ke={};if(X){const Ie=X.finish();Ie&&(ke.resourceTiming={},ke.resourceTiming[V.source]=JSON.parse(JSON.stringify(Ie)))}U(null,ke)}var Ie})}reloadTile(V,U){const $=this.loaded;return $&&$[V.uid]?super.reloadTile(V,U):this.loadTile(V,U)}removeSource(V,U){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),U()}getClusterExpansionZoom(V,U){try{U(null,this._geoJSONIndex.getClusterExpansionZoom(V.clusterId))}catch($){U($)}}getClusterChildren(V,U){try{U(null,this._geoJSONIndex.getChildren(V.clusterId))}catch($){U($)}}getClusterLeaves(V,U){try{U(null,this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset))}catch($){U($)}}}class ft{constructor(V){this.self=V,this.actor=new g.Actor(V,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:je,geojson:Lt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(U,$)=>{if(this.workerSourceTypes[U])throw new Error(`Worker source with name "${U}" already registered.`);this.workerSourceTypes[U]=$},this.self.registerRTLTextPlugin=U=>{if(g.plugin.isParsed())throw new Error("RTL text plugin already registered.");g.plugin.applyArabicShaping=U.applyArabicShaping,g.plugin.processBidirectionalText=U.processBidirectionalText,g.plugin.processStyledBidirectionalText=U.processStyledBidirectionalText}}setReferrer(V,U){this.referrer=U}setImages(V,U,$){this.availableImages[V]=U;for(const X in this.workerSources[V]){const ce=this.workerSources[V][X];for(const Ce in ce)ce[Ce].availableImages=U}$()}setLayers(V,U,$){this.getLayerIndex(V).replace(U),$()}updateLayers(V,U,$){this.getLayerIndex(V).update(U.layers,U.removedIds),$()}loadTile(V,U,$){this.getWorkerSource(V,U.type,U.source).loadTile(U,$)}loadDEMTile(V,U,$){this.getDEMWorkerSource(V,U.source).loadTile(U,$)}reloadTile(V,U,$){this.getWorkerSource(V,U.type,U.source).reloadTile(U,$)}abortTile(V,U,$){this.getWorkerSource(V,U.type,U.source).abortTile(U,$)}removeTile(V,U,$){this.getWorkerSource(V,U.type,U.source).removeTile(U,$)}removeDEMTile(V,U){this.getDEMWorkerSource(V,U.source).removeTile(U)}removeSource(V,U,$){if(!this.workerSources[V]||!this.workerSources[V][U.type]||!this.workerSources[V][U.type][U.source])return;const X=this.workerSources[V][U.type][U.source];delete this.workerSources[V][U.type][U.source],void 0!==X.removeSource?X.removeSource(U,$):$()}loadWorkerSource(V,U,$){try{this.self.importScripts(U.url),$()}catch(X){$(X.toString())}}syncRTLPluginState(V,U,$){try{g.plugin.setState(U);const X=g.plugin.getPluginURL();if(g.plugin.isLoaded()&&!g.plugin.isParsed()&&null!=X){this.self.importScripts(X);const ce=g.plugin.isParsed();$(ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${X}`),ce)}}catch(X){$(X.toString())}}getAvailableImages(V){let U=this.availableImages[V];return U||(U=[]),U}getLayerIndex(V){let U=this.layerIndexes[V];return U||(U=this.layerIndexes[V]=new Ge),U}getWorkerSource(V,U,$){return this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][U]||(this.workerSources[V][U]={}),this.workerSources[V][U][$]||(this.workerSources[V][U][$]=new this.workerSourceTypes[U]({send:(ce,Ce,ke)=>{this.actor.send(ce,Ce,ke,V)}},this.getLayerIndex(V),this.getAvailableImages(V))),this.workerSources[V][U][$]}getDEMWorkerSource(V,U){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][U]||(this.demWorkerSources[V][U]=new Je),this.demWorkerSources[V][U]}}return g.isWorker()&&(self.worker=new ft(self)),ft}),l(0,function(g){class _e{static testProp(t){if(!_e.docStyle)return t[0];for(let c=0;c<t.length;c++)if(t[c]in _e.docStyle)return t[c];return t[0]}static create(t,c,m){const b=window.document.createElement(t);return void 0!==c&&(b.className=c),m&&m.appendChild(b),b}static createNS(t,c){return window.document.createElementNS(t,c)}static disableDrag(){_e.docStyle&&_e.selectProp&&(_e.userSelect=_e.docStyle[_e.selectProp],_e.docStyle[_e.selectProp]="none")}static enableDrag(){_e.docStyle&&_e.selectProp&&(_e.docStyle[_e.selectProp]=_e.userSelect)}static setTransform(t,c){t.style[_e.transformProp]=c}static addEventListener(t,c,m,b={}){t.addEventListener(c,m,"passive"in b?b:b.capture)}static removeEventListener(t,c,m,b={}){t.removeEventListener(c,m,"passive"in b?b:b.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",_e.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_e.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_e.suppressClickInternal,!0)},0)}static mousePos(t,c){const m=t.getBoundingClientRect();return new g.Point(c.clientX-m.left-t.clientLeft,c.clientY-m.top-t.clientTop)}static touchPos(t,c){const m=t.getBoundingClientRect(),b=[];for(let M=0;M<c.length;M++)b.push(new g.Point(c[M].clientX-m.left-t.clientLeft,c[M].clientY-m.top-t.clientTop));return b}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}_e.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_e.selectProp=_e.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_e.transformProp=_e.testProp(["transform","WebkitTransform"]);const Ze={supported:!1,testSupport:function(v){!je&&Ue&&(Je?Le(v):Ae=v)}};let Ae,Ue,je=!1,Je=!1;function Le(v){const t=v.createTexture();v.bindTexture(v.TEXTURE_2D,t);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,Ue),v.isContextLost())return;Ze.supported=!0}catch{}v.deleteTexture(t),je=!0}var et;typeof document<"u"&&(Ue=document.createElement("img"),Ue.onload=function(){Ae&&Le(Ae),Ae=null,Je=!0},Ue.onerror=function(){je=!0,Ae=null},Ue.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let t,c,m,b;v.resetRequestQueue=()=>{t=[],c=0,m=0,b={}},v.addThrottleControl=W=>{const se=m++;return b[se]=W,se},v.removeThrottleControl=W=>{delete b[W]};const M=()=>{const W=Object.keys(b);let se=!1;if(W.length>0)for(const ae of W)if(se=b[ae](),se)break;return se};v.getImage=(W,se,ae=!0)=>{Ze.supported&&(W.headers||(W.headers={}),W.headers.accept="image/webp,*/*");const E={requestParameters:W,supportImageRefresh:ae,callback:se,cancelled:!1,completed:!1,cancel:()=>{}};return t.push(E),M()||v.processQueue(),E};const k=W=>{const{requestParameters:se,supportImageRefresh:ae,callback:E}=W;return g.extend(se,{type:"image"}),(!1!==ae||g.isWorker()||g.getProtocolAction(se.url)||se.headers&&!Object.keys(se.headers).reduce((S,C)=>S&&"accept"===C,!0)?g.makeRequest:z)(se,(S,C,A,R)=>{B(W,E,S,C,A,R)})},B=(W,se,ae,E,S,C)=>{var A,R;ae?se(ae):E instanceof HTMLImageElement||E instanceof ImageBitmap?se(null,E):E&&(A=E,R=(A,R)=>{null!=A?se(A):null!=R&&se(null,R,{cacheControl:S,expires:C})},"function"==typeof createImageBitmap?g.arrayBufferToImageBitmap(A,R):g.arrayBufferToImage(A,R)),W.cancelled||(W.completed=!0,c--,M()||v.processQueue())};v.processQueue=(W=0)=>{W<=0&&(W=M()?g.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:g.config.MAX_PARALLEL_IMAGE_REQUESTS);for(let se=c;se<W&&t.length>0;se++){const ae=t.shift();if(ae.cancelled)continue;const E=k(ae);c++,ae.innerRequest=E,ae.cancel=()=>{var S;(S=ae).completed||S.cancelled||(c--,S.cancelled=!0,S.innerRequest.cancel(),v.processQueue())}}return t.length};const z=(W,se)=>{const ae=new Image,E=W.url;let S=!1;const C=W.credentials;return C&&"include"===C?ae.crossOrigin="use-credentials":(C&&"same-origin"===C||!g.sameOrigin(E))&&(ae.crossOrigin="anonymous"),ae.fetchPriority="high",ae.onload=()=>{se(null,ae),ae.onerror=ae.onload=null},ae.onerror=()=>{S||se(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),ae.onerror=ae.onload=null},ae.src=E,{cancel:()=>{S=!0,ae.src=""}}}}(et||(et={})),et.resetRequestQueue();var qe,v,$e=et;(v=qe||(qe={})).Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown";class mt{constructor(t){this._transformRequestFn=t}transformRequest(t,c){return this._transformRequestFn&&this._transformRequestFn(t,c)||{url:t}}normalizeSpriteURL(t,c,m){const b=function(M){const k=M.match(pt);if(!k)throw new Error(`Unable to parse URL "${M}"`);return{protocol:k[1],authority:k[2],path:k[3]||"/",params:k[4]?k[4].split("&"):[]}}(t);return b.path+=`${c}${m}`,function(M){const k=M.params.length?`?${M.params.join("&")}`:"";return`${M.protocol}://${M.authority}${M.path}${k}`}(b)}setTransformRequest(t){this._transformRequestFn=t}}const pt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function wt(v){var t=new g.ARRAY_TYPE(3);return t[0]=v[0],t[1]=v[1],t[2]=v[2],t}var tn,Zt=function(v,t,c){return v[0]=t[0]-c[0],v[1]=t[1]-c[1],v[2]=t[2]-c[2],v};tn=new g.ARRAY_TYPE(3),g.ARRAY_TYPE!=Float32Array&&(tn[0]=0,tn[1]=0,tn[2]=0);var bt=function(v){var t=v[0],c=v[1];return t*t+c*c};function Re(v){const t=[];if("string"==typeof v)t.push({id:"default",url:v});else if(v&&v.length>0){const c=[];for(const{id:m,url:b}of v){const M=`${m}${b}`;-1===c.indexOf(M)&&(c.push(M),t.push({id:m,url:b}))}}return t}function ze(v,t,c,m,b){if(m)return void v(m);if(b!==Object.values(t).length||b!==Object.values(c).length)return;const M={};for(const k in t){M[k]={};const B=g.exported.getImageCanvasContext(c[k]),z=t[k];for(const W in z){const{width:se,height:ae,x:E,y:S,sdf:C,pixelRatio:A,stretchX:R,stretchY:ee,content:fe}=z[W];M[k][W]={data:null,pixelRatio:A,sdf:C,stretchX:R,stretchY:ee,content:fe,spriteData:{width:se,height:ae,x:E,y:S,context:B}}}}v(null,M)}!function(){var v=new g.ARRAY_TYPE(2);g.ARRAY_TYPE!=Float32Array&&(v[0]=0,v[1]=0)}();class It{constructor(t,c,m,b){this.context=t,this.format=m,this.texture=t.gl.createTexture(),this.update(c,b)}update(t,c,m){const{width:b,height:M}=t,k=!(this.size&&this.size[0]===b&&this.size[1]===M||m),{context:B}=this,{gl:z}=B;if(this.useMipmap=Boolean(c&&c.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!c||!1!==c.premultiply)),k)this.size=[b,M],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||g.isImageBitmap(t)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,t):z.texImage2D(z.TEXTURE_2D,0,this.format,b,M,0,this.format,z.UNSIGNED_BYTE,t.data);else{const{x:W,y:se}=m||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||g.isImageBitmap(t)?z.texSubImage2D(z.TEXTURE_2D,0,W,se,z.RGBA,z.UNSIGNED_BYTE,t):z.texSubImage2D(z.TEXTURE_2D,0,W,se,b,M,z.RGBA,z.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(t,c,m){const{context:b}=this,{gl:M}=b;M.bindTexture(M.TEXTURE_2D,this.texture),m!==M.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=M.LINEAR),t!==this.filter&&(M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,t),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,m||t),this.filter=t),c!==this.wrap&&(M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,c),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function At(v){const{userImage:t}=v;return!!(t&&t.render&&t.render())&&(v.data.replace(new Uint8Array(t.data.buffer)),!0)}class kt extends g.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new g.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:c,callback:m}of this.requestors)this._notify(c,m);this.requestors=[]}}getImage(t){const c=this.images[t];if(c&&!c.data&&c.spriteData){const m=c.spriteData;c.data=new g.RGBAImage({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),c.spriteData=null}return c}addImage(t,c){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,c)&&(this.images[t]=c)}_validate(t,c){let m=!0;const b=c.data||c.spriteData;return this._validateStretch(c.stretchX,b&&b.width)||(this.fire(new g.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,b&&b.height)||(this.fire(new g.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new g.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),m=!1),m}_validateStretch(t,c){if(!t)return!0;let m=0;for(const b of t){if(b[0]<m||b[1]<b[0]||c<b[1])return!1;m=b[1]}return!0}_validateContent(t,c){if(!t)return!0;if(4!==t.length)return!1;const m=c.spriteData,b=m&&m.width||c.data.width,M=m&&m.height||c.data.height;return!(t[0]<0||b<t[0]||t[1]<0||M<t[1]||t[2]<0||b<t[2]||t[3]<0||M<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,c,m=!0){const b=this.getImage(t);if(m&&(b.data.width!==c.data.width||b.data.height!==c.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=b.version+1,this.images[t]=c,this.updatedImages[t]=!0}removeImage(t){const c=this.images[t];delete this.images[t],delete this.patterns[t],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,c){let m=!0;if(!this.isLoaded())for(const b of t)this.images[b]||(m=!1);this.isLoaded()||m?this._notify(t,c):this.requestors.push({ids:t,callback:c})}_notify(t,c){const m={};for(const b of t){let M=this.getImage(b);M||(this.fire(new g.Event("styleimagemissing",{id:b})),M=this.getImage(b)),M?m[b]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:Boolean(M.userImage&&M.userImage.render)}:g.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,m)}getPixelSize(){const{width:t,height:c}=this.atlasImage;return{width:t,height:c}}getPattern(t){const c=this.patterns[t],m=this.getImage(t);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const b={w:m.data.width+2,h:m.data.height+2,x:0,y:0},M=new g.ImagePosition(b,m);this.patterns[t]={bin:b,position:M}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const c=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new It(t,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const M in this.patterns)t.push(this.patterns[M].bin);const{w:c,h:m}=g.potpack(t),b=this.atlasImage;b.resize({width:c||1,height:m||1});for(const M in this.patterns){const{bin:k}=this.patterns[M],B=k.x+1,z=k.y+1,W=this.getImage(M).data,se=W.width,ae=W.height;g.RGBAImage.copy(W,b,{x:0,y:0},{x:B,y:z},{width:se,height:ae}),g.RGBAImage.copy(W,b,{x:0,y:ae-1},{x:B,y:z-1},{width:se,height:1}),g.RGBAImage.copy(W,b,{x:0,y:0},{x:B,y:z+ae},{width:se,height:1}),g.RGBAImage.copy(W,b,{x:se-1,y:0},{x:B-1,y:z},{width:1,height:ae}),g.RGBAImage.copy(W,b,{x:0,y:0},{x:B+se,y:z},{width:1,height:ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const c of t){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.getImage(c);m||g.warnOnce(`Image with ID: "${c}" was not found`),At(m)&&this.updateImage(c,m)}}}const jt=1e20;function nt(v,t,c,m,b,M,k,B,z){for(let W=t;W<t+m;W++)at(v,c*M+W,M,b,k,B,z);for(let W=c;W<c+b;W++)at(v,W*M+t,1,m,k,B,z)}function at(v,t,c,m,b,M,k){M[0]=0,k[0]=-jt,k[1]=jt,b[0]=v[t];for(let B=1,z=0,W=0;B<m;B++){b[B]=v[t+B*c];const se=B*B;do{const ae=M[z];W=(b[B]-b[ae]+se-ae*ae)/(B-ae)/2}while(W<=k[z]&&--z>-1);z++,M[z]=B,k[z]=W,k[z+1]=jt}for(let B=0,z=0;B<m;B++){for(;k[z+1]<B;)z++;const W=M[z],se=B-W;v[t+B*c]=b[W]+se*se}}class xt{constructor(t,c){this.requestManager=t,this.localIdeographFontFamily=c,this.entries={}}setURL(t){this.url=t}getGlyphs(t,c){const m=[];for(const b in t)for(const M of t[b])m.push({stack:b,id:M});g.asyncAll(m,({stack:b,id:M},k)=>{let B=this.entries[b];B||(B=this.entries[b]={glyphs:{},requests:{},ranges:{}});let z=B.glyphs[M];if(void 0!==z)return void k(null,{stack:b,id:M,glyph:z});if(z=this._tinySDF(B,b,M),z)return B.glyphs[M]=z,void k(null,{stack:b,id:M,glyph:z});const W=Math.floor(M/256);if(256*W>65535)return void k(new Error("glyphs > 65535 not supported"));if(B.ranges[W])return void k(null,{stack:b,id:M,glyph:z});if(!this.url)return void k(new Error("glyphsUrl is not set"));let se=B.requests[W];se||(se=B.requests[W]=[],xt.loadGlyphRange(b,W,this.url,this.requestManager,(ae,E)=>{if(E){for(const S in E)this._doesCharSupportLocalGlyph(+S)||(B.glyphs[+S]=E[+S]);B.ranges[W]=!0}for(const S of se)S(ae,E);delete B.requests[W]})),se.push((ae,E)=>{ae?k(ae):E&&k(null,{stack:b,id:M,glyph:E[M]||null})})},(b,M)=>{if(b)c(b);else if(M){const k={};for(const{stack:B,id:z,glyph:W}of M)(k[B]||(k[B]={}))[z]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics};c(null,k)}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(g.unicodeBlockLookup["CJK Unified Ideographs"](t)||g.unicodeBlockLookup["Hangul Syllables"](t)||g.unicodeBlockLookup.Hiragana(t)||g.unicodeBlockLookup.Katakana(t))}_tinySDF(t,c,m){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(m))return;let M=t.tinySDF;if(!M){let B="400";/bold/i.test(c)?B="900":/medium/i.test(c)?B="500":/light/i.test(c)&&(B="200"),M=t.tinySDF=new xt.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:b,fontWeight:B})}const k=M.draw(String.fromCharCode(m));return{id:m,bitmap:new g.AlphaImage({width:k.width||30,height:k.height||30},k.data),metrics:{width:k.glyphWidth||24,height:k.glyphHeight||24,left:k.glyphLeft||0,top:k.glyphTop-27||-8,advance:k.glyphAdvance||24}}}}xt.loadGlyphRange=function(v,t,c,m,b){const M=256*t,k=M+255,B=m.transformRequest(c.replace("{fontstack}",v).replace("{range}",`${M}-${k}`),qe.Glyphs);g.getArrayBuffer(B,(z,W)=>{if(z)b(z);else if(W){const se={};for(const ae of g.parseGlyphPbf(W))se[ae.id]=ae;b(null,se)}})},xt.TinySDF=class{constructor({fontSize:v=24,buffer:t=3,radius:c=8,cutoff:m=.25,fontFamily:b="sans-serif",fontWeight:M="normal",fontStyle:k="normal"}={}){this.buffer=t,this.cutoff=m,this.radius=c;const B=this.size=v+4*t,z=this._createCanvas(B),W=this.ctx=z.getContext("2d",{willReadFrequently:!0});W.font=`${k} ${M} ${v}px ${b}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Uint16Array(B)}_createCanvas(v){const t=document.createElement("canvas");return t.width=t.height=v,t}draw(v){const{width:t,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:b,actualBoundingBoxRight:M}=this.ctx.measureText(v),k=Math.ceil(c),B=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(M-b))),z=Math.min(this.size-this.buffer,k+Math.ceil(m)),W=B+2*this.buffer,se=z+2*this.buffer,ae=Math.max(W*se,0),E=new Uint8ClampedArray(ae),S={data:E,width:W,height:se,glyphWidth:B,glyphHeight:z,glyphTop:k,glyphLeft:0,glyphAdvance:t};if(0===B||0===z)return S;const{ctx:C,buffer:A,gridInner:R,gridOuter:ee}=this;C.clearRect(A,A,B,z),C.fillText(v,A,A+k);const fe=C.getImageData(A,A,B,z);ee.fill(jt,0,ae),R.fill(0,0,ae);for(let oe=0;oe<z;oe++)for(let Oe=0;Oe<B;Oe++){const tt=fe.data[4*(oe*B+Oe)+3]/255;if(0===tt)continue;const Et=(oe+A)*W+Oe+A;if(1===tt)ee[Et]=0,R[Et]=jt;else{const vt=.5-tt;ee[Et]=vt>0?vt*vt:0,R[Et]=vt<0?vt*vt:0}}nt(ee,0,0,W,se,W,this.f,this.v,this.z),nt(R,A,A,B,z,W,this.f,this.v,this.z);for(let oe=0;oe<ae;oe++){const Oe=Math.sqrt(ee[oe])-Math.sqrt(R[oe]);E[oe]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return S}};class _t{constructor(){this.specification=g.v8Spec.light.position}possiblyEvaluate(t,c){return g.sphericalToCartesian(t.expression.evaluate(c))}interpolate(t,c,m){return{x:g.interpolate.number(t.x,c.x,m),y:g.interpolate.number(t.y,c.y,m),z:g.interpolate.number(t.z,c.z,m)}}}const Yt="-transition";let qt,On;class Jn extends g.Evented{constructor(t){super(),qt=qt||new g.Properties({anchor:new g.DataConstantProperty(g.v8Spec.light.anchor),position:new _t,color:new g.DataConstantProperty(g.v8Spec.light.color),intensity:new g.DataConstantProperty(g.v8Spec.light.intensity)}),this._transitionable=new g.Transitionable(qt),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,c={}){if(!this._validate(g.validateLight,t,c))for(const m in t){const b=t[m];m.endsWith(Yt)?this._transitionable.setTransition(m.slice(0,-Yt.length),b):this._transitionable.setValue(m,b)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,c,m){return(!m||!1!==m.validate)&&g.emitValidationErrors(this,t.call(g.validateStyle,g.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:g.v8Spec})))}}class hi{constructor(t,c){this.width=t,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,c){const m=t.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(t,c)),this.dashEntry[m]}getDashRanges(t,c,m){const b=[];let M=t.length%2==1?-t[t.length-1]*m:0,k=t[0]*m,B=!0;b.push({left:M,right:k,isDash:B,zeroLength:0===t[0]});let z=t[0];for(let W=1;W<t.length;W++){B=!B;const se=t[W];M=z*m,z+=se,k=z*m,b.push({left:M,right:k,isDash:B,zeroLength:0===se})}return b}addRoundDash(t,c,m){const b=c/2;for(let M=-m;M<=m;M++){const k=this.width*(this.nextRow+m+M);let B=0,z=t[B];for(let W=0;W<this.width;W++){W/z.right>1&&(z=t[++B]);const se=Math.abs(W-z.left),ae=Math.abs(W-z.right),E=Math.min(se,ae);let S;const C=M/m*(b+1);if(z.isDash){const A=b-Math.abs(C);S=Math.sqrt(E*E+A*A)}else S=b-Math.sqrt(E*E+C*C);this.data[k+W]=Math.max(0,Math.min(255,S+128))}}}addRegularDash(t){for(let B=t.length-1;B>=0;--B){const z=t[B],W=t[B+1];z.zeroLength?t.splice(B,1):W&&W.isDash===z.isDash&&(W.left=z.left,t.splice(B,1))}const c=t[0],m=t[t.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const b=this.width*this.nextRow;let M=0,k=t[M];for(let B=0;B<this.width;B++){B/k.right>1&&(k=t[++M]);const z=Math.abs(B-k.left),W=Math.abs(B-k.right),se=Math.min(z,W);this.data[b+B]=Math.max(0,Math.min(255,(k.isDash?se:-se)+128))}}addDash(t,c){const m=c?7:0,b=2*m+1;if(this.nextRow+b>this.height)return g.warnOnce("LineAtlas out of space"),null;let M=0;for(let B=0;B<t.length;B++)M+=t[B];if(0!==M){const B=this.width/M,z=this.getDashRanges(t,this.width,B);c?this.addRoundDash(z,B,m):this.addRegularDash(z)}const k={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:M};return this.nextRow+=b,this.dirty=!0,k}bind(t){const c=t.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class Xt{constructor(t,c,m){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=m;const b=this.workerPool.acquire(m);for(let M=0;M<b.length;M++){const k=new Xt.Actor(b[M],c,m);k.name=`Worker ${M}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,c,m){g.asyncAll(this.actors,(b,M)=>{b.send(t,c,M)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}}function ui(v,t,c){const m=function(b,M){if(b)return c(b);if(M){const k=g.pick(g.extend(M,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(k.vectorLayers=M.vector_layers,k.vectorLayerIds=k.vectorLayers.map(B=>B.id)),c(null,k)}};return v.url?g.getJSON(t.transformRequest(v.url,qe.Source),m):g.exported.frame(()=>m(null,v))}Xt.Actor=g.Actor;class Xn{constructor(t,c){t&&(c?this.setSouthWest(t).setNorthEast(c):Array.isArray(t)&&(4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof g.LngLat?new g.LngLat(t.lng,t.lat):g.LngLat.convert(t),this}setSouthWest(t){return this._sw=t instanceof g.LngLat?new g.LngLat(t.lng,t.lat):g.LngLat.convert(t),this}extend(t){const c=this._sw,m=this._ne;let b,M;if(t instanceof g.LngLat)b=t,M=t;else{if(!(t instanceof Xn))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Xn.convert(t)):this.extend(g.LngLat.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(g.LngLat.convert(t)):this;if(b=t._sw,M=t._ne,!b||!M)return this}return c||m?(c.lng=Math.min(b.lng,c.lng),c.lat=Math.min(b.lat,c.lat),m.lng=Math.max(M.lng,m.lng),m.lat=Math.max(M.lat,m.lat)):(this._sw=new g.LngLat(b.lng,b.lat),this._ne=new g.LngLat(M.lng,M.lat)),this}getCenter(){return new g.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new g.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new g.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:c,lat:m}=g.LngLat.convert(t);let b=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&b}static convert(t){return t instanceof Xn?t:t&&new Xn(t)}static fromLngLat(t,c=0){const m=360*c/40075017,b=m/Math.cos(Math.PI/180*t.lat);return new Xn(new g.LngLat(t.lng-b,t.lat-m),new g.LngLat(t.lng+b,t.lat+m))}}class ai{constructor(t,c,m){this.bounds=Xn.convert(this.validateBounds(t)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const c=Math.pow(2,t.z),m=Math.floor(g.mercatorXfromLng(this.bounds.getWest())*c),b=Math.floor(g.mercatorYfromLat(this.bounds.getNorth())*c),M=Math.ceil(g.mercatorXfromLng(this.bounds.getEast())*c),k=Math.ceil(g.mercatorYfromLat(this.bounds.getSouth())*c);return t.x>=m&&t.x<M&&t.y>=b&&t.y<k}}class an extends g.Evented{constructor(t,c,m,b){if(super(),this.id=t,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,g.extend(this,g.pick(c,["url","scheme","tileSize","promoteId"])),this._options=g.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ui(this._options,this.map._requestManager,(t,c)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t?this.fire(new g.ErrorEvent(t)):c&&(g.extend(this,c),c.bounds&&(this.tileBounds=new ai(c.bounds,this.minzoom,this.maxzoom)),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return g.extend({},this._options)}loadTile(t,c){const m=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(m,qe.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function M(k,B){return delete t.request,t.aborted?c(null):k&&404!==k.status?c(k):(B&&B.resourceTiming&&(t.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&t.setExpiryData(B),t.loadVectorData(B,this.map.painter),c(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=c:t.request=t.actor.send("reloadTile",b,M.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",b,M.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class hn extends g.Evented{constructor(t,c,m,b){super(),this.id=t,this.dispatcher=m,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=g.extend({type:"raster"},c),g.extend(this,g.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ui(this._options,this.map._requestManager,(t,c)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new g.ErrorEvent(t)):c&&(g.extend(this,c),c.bounds&&(this.tileBounds=new ai(c.bounds,this.minzoom,this.maxzoom)),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return g.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,c){const m=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=$e.getImage(this.map._requestManager.transformRequest(m,qe.Tile),(b,M,k)=>{if(delete t.request,t.aborted)t.state="unloaded",c(null);else if(b)t.state="errored",c(b);else if(M){this.map._refreshExpiredTiles&&k&&t.setExpiryData(k);const B=this.map.painter.context,z=B.gl;t.texture=this.map.painter.getTileTexture(M.width),t.texture?t.texture.update(M,{useMipmap:!0}):(t.texture=new It(B,M,z.RGBA,{useMipmap:!0}),t.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),t.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(t,c){t.request&&(t.request.cancel(),delete t.request),c()}unloadTile(t,c){t.texture&&this.map.painter.saveTileTexture(t.texture),c()}hasTransition(){return!1}}class dt extends hn{constructor(t,c,m,b){super(t,c,m,b),this.type="raster-dem",this.maxzoom=22,this._options=g.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,c){const m=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function b(M,k){M&&(t.state="errored",c(M)),k&&(t.dem=k,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded",c(null))}t.request=$e.getImage(this.map._requestManager.transformRequest(m,qe.Tile),function(M,k){if(delete t.request,t.aborted)t.state="unloaded",c(null);else if(M)t.state="errored",c(M);else if(k){this.map._refreshExpiredTiles&&t.setExpiryData(k),delete k.cacheControl,delete k.expires;const B=g.isImageBitmap(k)&&(null==On&&(On=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),On)?k:g.exported.getImageData(k,1),z={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:B,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",z,b.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),t.neighboringTiles=this._getNeighboringTiles(t.tileID)}_getNeighboringTiles(t){const c=t.canonical,m=Math.pow(2,c.z),b=(c.x-1+m)%m,M=0===c.x?t.wrap-1:t.wrap,k=(c.x+1+m)%m,B=c.x+1===m?t.wrap+1:t.wrap,z={};return z[new g.OverscaledTileID(t.overscaledZ,M,c.z,b,c.y).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,B,c.z,k,c.y).key]={backfilled:!1},c.y>0&&(z[new g.OverscaledTileID(t.overscaledZ,M,c.z,b,c.y-1).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,t.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,B,c.z,k,c.y-1).key]={backfilled:!1}),c.y+1<m&&(z[new g.OverscaledTileID(t.overscaledZ,M,c.z,b,c.y+1).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,t.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,B,c.z,k,c.y+1).key]={backfilled:!1}),z}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class Mt extends g.Evented{constructor(t,c,m,b){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(b),this._data=c.data,this._options=g.extend({},c),this._collectResourceTiming=c.collectResourceTiming,void 0!==c.maxzoom&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const M=g.EXTENT/this.tileSize;this.workerOptions=g.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(void 0!==c.buffer?c.buffer:128)*M,tolerance:(void 0!==c.tolerance?c.tolerance:.375)*M,extent:g.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:void 0!==c.clusterMaxZoom?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:g.EXTENT,radius:(c.clusterRadius||50)*M,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(void 0!==t.clusterRadius&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),void 0!==t.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},c),this}getClusterChildren(t,c){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},c),this}getClusterLeaves(t,c,m,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:c,offset:m},b),this}_updateWorkerData(t){const c=g.extend({},this.workerOptions);t?c.dataDiff=t:"string"==typeof this._data?(c.request=this.map._requestManager.transformRequest(g.exported.resolveURL(this._data),qe.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new g.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(m,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new g.Event("dataabort",{dataType:"source"}));let M=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(M=b.resourceTiming[this.id].slice(0)),m)return void this.fire(new g.ErrorEvent(m));const k={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&g.extend(k,{resourceTiming:M}),this.fire(new g.Event("data",{...k,sourceDataType:"metadata"})),this.fire(new g.Event("data",{...k,sourceDataType:"content"}))})}loaded(){return 0===this._pendingLoads}loadTile(t,c){const m=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const b={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(m,b,(M,k)=>(delete t.request,t.unloadVectorData(),t.aborted?c(null):M?c(M):(t.loadVectorData(k,this.map.painter,"reloadTile"===m),c(null))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return g.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Kt=g.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Qt extends g.Evented{constructor(t,c,m,b){super(),this.id=t,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=c}load(t,c){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=$e.getImage(this.map._requestManager.transformRequest(this.url,qe.Image),(m,b)=>{this._request=null,this._loaded=!0,m?this.fire(new g.ErrorEvent(m)):b&&(this.image=b,t&&(this.coordinates=t),c&&c(),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=t.url,this.load(t.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(t){this.coordinates=t;const c=t.map(g.MercatorCoordinate.fromLngLat);this.tileID=function(b){let M=1/0,k=1/0,B=-1/0,z=-1/0;for(const E of b)M=Math.min(M,E.x),k=Math.min(k,E.y),B=Math.max(B,E.x),z=Math.max(z,E.y);const W=Math.max(B-M,z-k),se=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),ae=Math.pow(2,se);return new g.CanonicalTileID(se,Math.floor((M+B)/2*ae),Math.floor((k+z)/2*ae))}(c),this.minzoom=this.maxzoom=this.tileID.z;const m=c.map(b=>this.tileID.getTilePoint(b)._round());return this._boundsArray=new g.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,g.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,g.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,g.EXTENT,g.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,c=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Kt.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new It(t,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const m in this.tiles){const b=this.tiles[m];"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}}loadTile(t,c){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},c(null)):(t.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class xn extends Qt{constructor(t,c,m,b){super(t,c,m,b),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const c of t.urls)this.urls.push(this.map._requestManager.transformRequest(c,qe.Source).url);g.getVideo(this.urls,(c,m)=>{this._loaded=!0,c?this.fire(new g.ErrorEvent(c)):m&&(this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const c=this.video.seekable;t<c.start(0)||t>c.end(0)?this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,c=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Kt.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new It(t,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const m in this.tiles){const b=this.tiles[m];"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Vn extends Qt{constructor(t,c,m,b){super(t,c,m,b),c.coordinates?Array.isArray(c.coordinates)&&4===c.coordinates.length&&!c.coordinates.some(M=>!Array.isArray(M)||2!==M.length||M.some(k=>"number"!=typeof k))||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),c.animate&&"boolean"!=typeof c.animate&&this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),c.canvas?"string"==typeof c.canvas||c.canvas instanceof HTMLCanvasElement||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=c,this.animate=void 0===c.animate||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new g.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const c=this.map.painter.context,m=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Kt.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new It(c,this.canvas,m.RGBA,{premultiply:!0});for(const b in this.tiles){const M=this.tiles[b];"loaded"!==M.state&&(M.state="loaded",M.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const Qn={vector:an,raster:hn,"raster-dem":dt,geojson:Mt,video:xn,image:Qt,canvas:Vn};function pi(v,t){const c=g.create();return g.translate(c,c,[1,1,0]),g.scale(c,c,[.5*v.width,.5*v.height,1]),g.multiply(c,c,v.calculatePosMatrix(t.toUnwrapped()))}function Fi(v,t,c,m,b,M){const k=function(ae,E,S){if(ae)for(const C of ae){const A=E[C];if(A&&A.source===S&&"fill-extrusion"===A.type)return!0}else for(const C in E){const A=E[C];if(A.source===S&&"fill-extrusion"===A.type)return!0}return!1}(b&&b.layers,t,v.id),B=M.maxPitchScaleFactor(),z=v.tilesIn(m,B,k);z.sort(_i);const W=[];for(const ae of z)W.push({wrappedTileID:ae.tileID.wrapped().key,queryResults:ae.tile.queryRenderedFeatures(t,c,v._state,ae.queryGeometry,ae.cameraQueryGeometry,ae.scale,b,M,B,pi(v.transform,ae.tileID))});const se=function(ae){const E={},S={};for(const C of ae){const A=C.queryResults,R=C.wrappedTileID,ee=S[R]=S[R]||{};for(const fe in A){const oe=A[fe],Oe=ee[fe]=ee[fe]||{},tt=E[fe]=E[fe]||[];for(const Et of oe)Oe[Et.featureIndex]||(Oe[Et.featureIndex]=!0,tt.push(Et))}}return E}(W);for(const ae in se)se[ae].forEach(E=>{const S=E.feature,C=v.getFeatureState(S.layer["source-layer"],S.id);S.source=S.layer.source,S.layer["source-layer"]&&(S.sourceLayer=S.layer["source-layer"]),S.state=C});return se}function _i(v,t){const c=v.tileID,m=t.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}class yi{constructor(t,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=g.uniqueId(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const c=t+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(b,M){const k={};if(!M)return k;for(const B of b){const z=B.layerIds.map(W=>M.getLayer(W)).filter(Boolean);if(0!==z.length){B.layers=z,B.stateDependentLayerIds&&(B.stateDependentLayers=B.stateDependentLayerIds.map(W=>z.filter(se=>se.id===W)[0]));for(const W of z)k[W.id]=B}}return k}(t.buckets,c.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const M=this.buckets[b];if(M instanceof g.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;M.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const M=this.buckets[b];if(M instanceof g.SymbolBucket&&M.hasRTLText){this.hasRTLText=!0,g.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const b in this.buckets){const M=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(b).queryRadius(M))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new g.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const m in this.buckets){const b=this.buckets[m];b.uploadPending()&&b.upload(t)}const c=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new It(t,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new It(t,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,c,m,b,M,k,B,z,W,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:M,scale:k,tileSize:this.tileSize,pixelPosMatrix:se,transform:z,params:B,queryPadding:this.queryPadding*W},t,c,m):{}}querySourceFeatures(t,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const b=m.loadVTLayers(),M=c&&c.sourceLayer?c.sourceLayer:"",k=b._geojsonTileLayer||b[M];if(!k)return;const B=g.createFilter(c&&c.filter),{z,x:W,y:se}=this.tileID.canonical,ae={z,x:W,y:se};for(let E=0;E<k.length;E++){const S=k.feature(E);if(B.needGeometry){const R=g.toEvaluationFeature(S,!0);if(!B.filter(new g.EvaluationParameters(this.tileID.overscaledZ),R,this.tileID.canonical))continue}else if(!B.filter(new g.EvaluationParameters(this.tileID.overscaledZ),S))continue;const C=m.getId(S,M),A=new g.GeoJSONFeature(S,z,W,se,C);A.tile=ae,t.push(A)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const c=this.expirationTime;if(t.cacheControl){const m=g.parseCacheControl(t.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const m=Date.now();let b=!1;if(this.expirationTime>m)b=!1;else if(c)if(this.expirationTime<c)b=!0;else{const M=this.expirationTime-c;M?this.expirationTime=m+Math.max(M,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const m=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!c.style.hasLayer(b))continue;const M=this.buckets[b],k=M.layers[0].sourceLayer||"_geojsonTileLayer",B=m[k],z=t[k];if(!B||!z||0===Object.keys(z).length)continue;M.update(z,B,this.imageAtlas&&this.imageAtlas.patternPositions||{});const W=c&&c.style&&c.style.getLayer(b);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(M)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<g.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=g.exported.now()+t}setDependencies(t,c){const m={};for(const b of c)m[b]=!0;this.dependencies[t]=m}hasDependency(t,c){for(const m of t){const b=this.dependencies[m];if(b)for(const M of c)if(b[M])return!0}return!1}}class un{constructor(t,c){this.max=t,this.onRemove=c,this.reset()}reset(){for(const t in this.data)for(const c of this.data[t])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(t,c,m){const b=t.wrapped().key;void 0===this.data[b]&&(this.data[b]=[]);const M={value:c,timeout:void 0};if(void 0!==m&&(M.timeout=setTimeout(()=>{this.remove(t,M)},m)),this.data[b].push(M),this.order.push(b),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const c=this.data[t].shift();return c.timeout&&clearTimeout(c.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),c.value}getByKey(t){const c=this.data[t];return c?c[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,c){if(!this.has(t))return this;const m=t.wrapped().key,b=void 0===c?0:this.data[m].indexOf(c),M=this.data[m][b];return this.data[m].splice(b,1),M.timeout&&clearTimeout(M.timeout),0===this.data[m].length&&delete this.data[m],this.onRemove(M.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(t){const c=[];for(const m in this.data)for(const b of this.data[m])t(b.value)||c.push(b);for(const m of c)this.remove(m.value.tileID,m)}}class Rn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,c,m){const b=String(c);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][b]=this.stateChanges[t][b]||{},g.extend(this.stateChanges[t][b],m),null===this.deletedStates[t]){this.deletedStates[t]={};for(const M in this.state[t])M!==b&&(this.deletedStates[t][M]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][b]){this.deletedStates[t][b]={};for(const M in this.state[t][b])m[M]||(this.deletedStates[t][b][M]=null)}else for(const M in m)this.deletedStates[t]&&this.deletedStates[t][b]&&null===this.deletedStates[t][b][M]&&delete this.deletedStates[t][b][M]}removeFeatureState(t,c,m){if(null===this.deletedStates[t])return;const b=String(c);if(this.deletedStates[t]=this.deletedStates[t]||{},m&&void 0!==c)null!==this.deletedStates[t][b]&&(this.deletedStates[t][b]=this.deletedStates[t][b]||{},this.deletedStates[t][b][m]=null);else if(void 0!==c)if(this.stateChanges[t]&&this.stateChanges[t][b])for(m in this.deletedStates[t][b]={},this.stateChanges[t][b])this.deletedStates[t][b][m]=null;else this.deletedStates[t][b]=null;else this.deletedStates[t]=null}getState(t,c){const m=String(c),b=g.extend({},(this.state[t]||{})[m],(this.stateChanges[t]||{})[m]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const M=this.deletedStates[t][c];if(null===M)return{};for(const k in M)delete b[k]}return b}initializeTileState(t,c){t.setFeatureState(this.state,c)}coalesceChanges(t,c){const m={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const M={};for(const k in this.stateChanges[b])this.state[b][k]||(this.state[b][k]={}),g.extend(this.state[b][k],this.stateChanges[b][k]),M[k]=this.state[b][k];m[b]=M}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const M={};if(null===this.deletedStates[b])for(const k in this.state[b])M[k]={},this.state[b][k]={};else for(const k in this.deletedStates[b]){if(null===this.deletedStates[b][k])this.state[b][k]={};else for(const B of Object.keys(this.deletedStates[b][k]))delete this.state[b][k][B];M[k]=this.state[b][k]}m[b]=m[b]||{},g.extend(m[b],M)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(m).length)for(const b in t)t[b].setFeatureState(m,c)}}class Xe extends g.Evented{constructor(t,c,m){super(),this.id=t,this.dispatcher=m,this.on("data",b=>{"source"===b.dataType&&"metadata"===b.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===b.dataType&&"content"===b.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(b,M,k,B){const z=new Qn[M.type](b,M,k,B);if(z.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${z.id}`);return g.bindAll(["load","abort","unload","serialize","prepare"],z),z}(t,c,m,this),this._tiles={},this._cache=new un(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Rn}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const c=this._tiles[t];if("loaded"!==c.state&&"errored"!==c.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,c){return this._source.loadTile(t,c)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){this._source.abortTile&&this._source.abortTile(t,()=>{}),this._source.fire(new g.Event("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const m=this._tiles[c];m.upload(t),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(Y).map(t=>t.key)}getRenderableIds(t){const c=[];for(const m in this._tiles)this._isIdRenderable(m,t)&&c.push(this._tiles[m]);return t?c.sort((m,b)=>{const M=m.tileID,k=b.tileID,B=new g.Point(M.canonical.x,M.canonical.y)._rotate(this.transform.angle),z=new g.Point(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return M.overscaledZ-k.overscaledZ||z.y-B.y||z.x-B.x}).map(m=>m.tileID.key):c.map(m=>m.tileID).sort(Y).map(m=>m.key)}hasRenderableParent(t){const c=this.findLoadedParent(t,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(t,c){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(c||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,c){const m=this._tiles[t];m&&("loading"!==m.state&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,t,c)))}_tileLoaded(t,c,m,b){if(b)return t.state="errored",void(404!==b.status?this._source.fire(new g.ErrorEvent(b,{tile:t})):this.update(this.transform,this.terrain));t.timeAdded=g.exported.now(),"expired"===m&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(c,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new g.Event("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const c=this.getRenderableIds();for(let b=0;b<c.length;b++){const M=c[b];if(t.neighboringTiles&&t.neighboringTiles[M]){const k=this.getTileByID(M);m(t,k),m(k,t)}}function m(b,M){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let k=M.tileID.canonical.x-b.tileID.canonical.x;const B=M.tileID.canonical.y-b.tileID.canonical.y,z=Math.pow(2,b.tileID.canonical.z),W=M.tileID.key;0===k&&0===B||Math.abs(B)>1||(Math.abs(k)>1&&(1===Math.abs(k+z)?k+=z:1===Math.abs(k-z)&&(k-=z)),M.dem&&b.dem&&(b.dem.backfillBorder(M.dem,k,B),b.neighboringTiles&&b.neighboringTiles[W]&&(b.neighboringTiles[W].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,c,m,b){for(const M in this._tiles){let k=this._tiles[M];if(b[M]||!k.hasData()||k.tileID.overscaledZ<=c||k.tileID.overscaledZ>m)continue;let B=k.tileID;for(;k&&k.tileID.overscaledZ>c+1;){const W=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[W.key],k&&k.hasData()&&(B=W)}let z=B;for(;z.overscaledZ>c;)if(z=z.scaledTo(z.overscaledZ-1),t[z.key]){b[B.key]=B;break}}}findLoadedParent(t,c){if(t.key in this._loadedParentTiles){const m=this._loadedParentTiles[t.key];return m&&m.tileID.overscaledZ>=c?m:null}for(let m=t.overscaledZ-1;m>=c;m--){const b=t.scaledTo(m),M=this._getLoadedTile(b);if(M)return M}}_getLoadedTile(t){const c=this._tiles[t.key];return c&&c.hasData()?c:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const c=Math.ceil(t.width/this._source.tileSize)+1,m=Math.ceil(t.height/this._source.tileSize)+1,b=Math.floor(c*m*5),M="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(M)}handleWrapJump(t){const c=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,c){const m={};for(const b in this._tiles){const M=this._tiles[b];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+c),m[M.tileID.key]=M}this._tiles=m;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}update(t,c){if(this.transform=t,this.terrain=c,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(W=>new g.OverscaledTileID(W.canonical.z,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y)):(m=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(m=m.filter(W=>this._source.hasTile(W)))):m=[];const b=t.coveringZoomLevel(this._source),M=Math.max(b-Xe.maxOverzooming,this._source.minzoom),k=Math.max(b+Xe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const W={};for(const se of m)if(se.canonical.z>this._source.minzoom){const ae=se.scaledTo(se.canonical.z-1);W[ae.key]=ae;const E=se.scaledTo(Math.max(this._source.minzoom,Math.min(se.canonical.z,5)));W[E.key]=E}m=m.concat(Object.values(W))}const B=this._updateRetainedTiles(m,b);if(te(this._source.type)){const W={},se={},ae=Object.keys(B),E=g.exported.now();for(const S of ae){const C=B[S],A=this._tiles[S];if(!A||0!==A.fadeEndTime&&A.fadeEndTime<=E)continue;const R=this.findLoadedParent(C,M);R&&(this._addTile(R.tileID),W[R.tileID.key]=R.tileID),se[S]=C}this._retainLoadedChildren(se,b,k,B);for(const S in W)B[S]||(this._coveredTiles[S]=!0,B[S]=W[S]);if(c){const S={},C={};for(const A of m)this._tiles[A.key].hasData()?S[A.key]=A:C[A.key]=A;for(const A in C){const R=C[A].children(this._source.maxzoom);this._tiles[R[0].key]&&this._tiles[R[1].key]&&this._tiles[R[2].key]&&this._tiles[R[3].key]&&(S[R[0].key]=B[R[0].key]=R[0],S[R[1].key]=B[R[1].key]=R[1],S[R[2].key]=B[R[2].key]=R[2],S[R[3].key]=B[R[3].key]=R[3],delete C[A])}for(const A in C){const R=this.findLoadedParent(C[A],this._source.minzoom);if(R){S[R.tileID.key]=B[R.tileID.key]=R.tileID;for(const ee in S)S[ee].isChildOf(R.tileID)&&delete S[ee]}}for(const A in this._tiles)S[A]||(this._coveredTiles[A]=!0)}}for(const W in B)this._tiles[W].clearFadeHold();const z=g.keysDifference(this._tiles,B);for(const W of z){const se=this._tiles[W];se.hasSymbolBuckets&&!se.holdingForFade()?se.setHoldDuration(this.map._fadeDuration):se.hasSymbolBuckets&&!se.symbolFadeFinished()||this._removeTile(W)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,c){const m={},b={},M=Math.max(c-Xe.maxOverzooming,this._source.minzoom),k=Math.max(c+Xe.maxUnderzooming,this._source.minzoom),B={};for(const z of t){const W=this._addTile(z);m[z.key]=z,W.hasData()||c<this._source.maxzoom&&(B[z.key]=z)}this._retainLoadedChildren(B,c,k,m);for(const z of t){let W=this._tiles[z.key];if(W.hasData())continue;if(c+1>this._source.maxzoom){const ae=z.children(this._source.maxzoom)[0],E=this.getTile(ae);if(E&&E.hasData()){m[ae.key]=ae;continue}}else{const ae=z.children(this._source.maxzoom);if(m[ae[0].key]&&m[ae[1].key]&&m[ae[2].key]&&m[ae[3].key])continue}let se=W.wasRequested();for(let ae=z.overscaledZ-1;ae>=M;--ae){const E=z.scaledTo(ae);if(b[E.key])break;if(b[E.key]=!0,W=this.getTile(E),!W&&se&&(W=this._addTile(E)),W){const S=W.hasData();if((se||S)&&(m[E.key]=E),se=W.wasRequested(),S)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const c=[];let m,b=this._tiles[t].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){m=this._loadedParentTiles[b.key];break}c.push(b.key);const M=b.scaledTo(b.overscaledZ-1);if(m=this._getLoadedTile(M),m)break;b=M}for(const M of c)this._loadedParentTiles[M]=m}}_addTile(t){let c=this._tiles[t.key];if(c)return c;c=this._cache.getAndRemove(t),c&&(this._setTileReloadTimer(t.key,c),c.tileID=t,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,c)));const m=c;return c||(c=new yi(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,t.key,c.state))),c.uses++,this._tiles[t.key]=c,m||this._source.fire(new g.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(t,c){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const m=c.getExpiryTimeout();m&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},m))}_removeTile(t){const c=this._tiles[t];c&&(c.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),c.uses>0||(c.hasData()&&"reloading"!==c.state?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,c,m){const b=[],M=this.transform;if(!M)return b;const k=m?M.getCameraQueryGeometry(t):t,B=t.map(C=>M.pointCoordinate(C,this.terrain)),z=k.map(C=>M.pointCoordinate(C,this.terrain)),W=this.getIds();let se=1/0,ae=1/0,E=-1/0,S=-1/0;for(const C of z)se=Math.min(se,C.x),ae=Math.min(ae,C.y),E=Math.max(E,C.x),S=Math.max(S,C.y);for(let C=0;C<W.length;C++){const A=this._tiles[W[C]];if(A.holdingForFade())continue;const R=A.tileID,ee=Math.pow(2,M.zoom-A.tileID.overscaledZ),fe=c*A.queryPadding*g.EXTENT/A.tileSize/ee,oe=[R.getTilePoint(new g.MercatorCoordinate(se,ae)),R.getTilePoint(new g.MercatorCoordinate(E,S))];if(oe[0].x-fe<g.EXTENT&&oe[0].y-fe<g.EXTENT&&oe[1].x+fe>=0&&oe[1].y+fe>=0){const Oe=B.map(Et=>R.getTilePoint(Et)),tt=z.map(Et=>R.getTilePoint(Et));b.push({tile:A,tileID:R,queryGeometry:Oe,cameraQueryGeometry:tt,scale:ee})}}return b}getVisibleCoordinates(t){const c=this.getRenderableIds(t).map(m=>this._tiles[m].tileID);for(const m of c)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(te(this._source.type)){const t=g.exported.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=t)return!0}return!1}setFeatureState(t,c,m){this._state.updateState(t=t||"_geojsonTileLayer",c,m)}removeFeatureState(t,c,m){this._state.removeFeatureState(t=t||"_geojsonTileLayer",c,m)}getFeatureState(t,c){return this._state.getState(t=t||"_geojsonTileLayer",c)}setDependencies(t,c,m){const b=this._tiles[t];b&&b.setDependencies(c,m)}reloadTilesForDependencies(t,c){for(const m in this._tiles)this._tiles[m].hasDependency(t,c)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(t,c))}}function Y(v,t){const c=Math.abs(2*v.wrap)-+(v.wrap<0),m=Math.abs(2*t.wrap)-+(t.wrap<0);return v.overscaledZ-t.overscaledZ||m-c||t.canonical.y-v.canonical.y||t.canonical.x-v.canonical.x}function te(v){return"raster"===v||"image"===v||"video"===v}Xe.maxOverzooming=10,Xe.maxUnderzooming=3;const Se="mapboxgl_preloaded_worker_pool";class Ke{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ke.workerCount;)this.workers.push(new Worker(g.config.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Se]}numActive(){return Object.keys(this.active).length}}const me=Math.floor(g.exported.hardwareConcurrency/2);let ye;function he(){return ye||(ye=new Ke),ye}Ke.workerCount=g.isSafari(globalThis)?Math.max(Math.min(me,3),1):1;class ge{constructor(t,c){this.reset(t,c)}reset(t,c){this.points=t||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=g.clamp(t,0,1);let c=1,m=this._distances[c];const b=t*this.paddedLength+this.padding;for(;m<b&&c<this._distances.length;)m=this._distances[++c];const M=c-1,k=this._distances[M],B=m-k,z=B>0?(b-k)/B:0;return this.points[M].mult(1-z).add(this.points[c].mult(z))}}function Pe(v,t){let c=!0;return"always"===v||"never"!==v&&"never"!==t||(c=!1),c}class rt{constructor(t,c,m){const b=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(t/m),this.yCellCount=Math.ceil(c/m);for(let k=0;k<this.xCellCount*this.yCellCount;k++)b.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=c,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,c,m,b,M){this._forEachCell(c,m,b,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(M)}insertCircle(t,c,m,b){this._forEachCell(c-b,m-b,c+b,m+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(c),this.circles.push(m),this.circles.push(b)}_insertBoxCell(t,c,m,b,M,k){this.boxCells[M].push(k)}_insertCircleCell(t,c,m,b,M,k){this.circleCells[M].push(k)}_query(t,c,m,b,M,k,B){if(m<0||t>this.width||b<0||c>this.height)return[];const z=[];if(t<=0&&c<=0&&this.width<=m&&this.height<=b){if(M)return[{key:null,x1:t,y1:c,x2:m,y2:b}];for(let W=0;W<this.boxKeys.length;W++)z.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(let W=0;W<this.circleKeys.length;W++){const se=this.circles[3*W],ae=this.circles[3*W+1],E=this.circles[3*W+2];z.push({key:this.circleKeys[W],x1:se-E,y1:ae-E,x2:se+E,y2:ae+E})}}else this._forEachCell(t,c,m,b,this._queryCell,z,{hitTest:M,overlapMode:k,seenUids:{box:{},circle:{}}},B);return z}query(t,c,m,b){return this._query(t,c,m,b,!1,null)}hitTest(t,c,m,b,M,k){return this._query(t,c,m,b,!0,M,k).length>0}hitTestCircle(t,c,m,b,M){const k=t-m,B=t+m,z=c-m,W=c+m;if(B<0||k>this.width||W<0||z>this.height)return!1;const se=[];return this._forEachCell(k,z,B,W,this._queryCellCircle,se,{hitTest:!0,overlapMode:b,circle:{x:t,y:c,radius:m},seenUids:{box:{},circle:{}}},M),se.length>0}_queryCell(t,c,m,b,M,k,B,z){const{seenUids:W,hitTest:se,overlapMode:ae}=B,E=this.boxCells[M];if(null!==E){const C=this.bboxes;for(const A of E)if(!W.box[A]){W.box[A]=!0;const R=4*A,ee=this.boxKeys[A];if(t<=C[R+2]&&c<=C[R+3]&&m>=C[R+0]&&b>=C[R+1]&&(!z||z(ee))&&(!se||!Pe(ae,ee.overlapMode))&&(k.push({key:ee,x1:C[R],y1:C[R+1],x2:C[R+2],y2:C[R+3]}),se))return!0}}const S=this.circleCells[M];if(null!==S){const C=this.circles;for(const A of S)if(!W.circle[A]){W.circle[A]=!0;const R=3*A,ee=this.circleKeys[A];if(this._circleAndRectCollide(C[R],C[R+1],C[R+2],t,c,m,b)&&(!z||z(ee))&&(!se||!Pe(ae,ee.overlapMode))){const fe=C[R],oe=C[R+1],Oe=C[R+2];if(k.push({key:ee,x1:fe-Oe,y1:oe-Oe,x2:fe+Oe,y2:oe+Oe}),se)return!0}}}return!1}_queryCellCircle(t,c,m,b,M,k,B,z){const{circle:W,seenUids:se,overlapMode:ae}=B,E=this.boxCells[M];if(null!==E){const C=this.bboxes;for(const A of E)if(!se.box[A]){se.box[A]=!0;const R=4*A,ee=this.boxKeys[A];if(this._circleAndRectCollide(W.x,W.y,W.radius,C[R+0],C[R+1],C[R+2],C[R+3])&&(!z||z(ee))&&!Pe(ae,ee.overlapMode))return k.push(!0),!0}}const S=this.circleCells[M];if(null!==S){const C=this.circles;for(const A of S)if(!se.circle[A]){se.circle[A]=!0;const R=3*A,ee=this.circleKeys[A];if(this._circlesCollide(C[R],C[R+1],C[R+2],W.x,W.y,W.radius)&&(!z||z(ee))&&!Pe(ae,ee.overlapMode))return k.push(!0),!0}}}_forEachCell(t,c,m,b,M,k,B,z){const W=this._convertToXCellCoord(t),se=this._convertToYCellCoord(c),ae=this._convertToXCellCoord(m),E=this._convertToYCellCoord(b);for(let S=W;S<=ae;S++)for(let C=se;C<=E;C++)if(M.call(this,t,c,m,b,this.xCellCount*C+S,k,B,z))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,c,m,b,M,k){const B=b-t,z=M-c,W=m+k;return W*W>B*B+z*z}_circleAndRectCollide(t,c,m,b,M,k,B){const z=(k-b)/2,W=Math.abs(t-(b+z));if(W>z+m)return!1;const se=(B-M)/2,ae=Math.abs(c-(M+se));if(ae>se+m)return!1;if(W<=z||ae<=se)return!0;const E=W-z,S=ae-se;return E*E+S*S<=m*m}}function ct(v,t,c,m,b){const M=g.create();return t?(g.scale(M,M,[1/b,1/b,1]),c||g.rotateZ(M,M,m.angle)):g.multiply(M,m.labelPlaneMatrix,v),M}function ln(v,t,c,m,b){if(t){const M=g.clone(v);return g.scale(M,M,[b,b,1]),c||g.rotateZ(M,M,-m.angle),M}return m.glCoordMatrix}function Rt(v,t,c){let m;c?(m=[v.x,v.y,c(v.x,v.y),1],g.transformMat4(m,m,t)):(m=[v.x,v.y,0,1],Ie(m,m,t));const b=m[3];return{point:new g.Point(m[0]/b,m[1]/b),signedDistanceFromCamera:b}}function mn(v,t){return.5+v/t*.5}function gn(v,t){const c=v[0]/v[3],m=v[1]/v[3];return c>=-t[0]&&c<=t[0]&&m>=-t[1]&&m<=t[1]}function ji(v,t,c,m,b,M,k,B,z,W){const se=m?v.textSizeData:v.iconSizeData,ae=g.evaluateSizeForZoom(se,c.transform.zoom),E=[256/c.width*2+1,256/c.height*2+1],S=m?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;S.clear();const C=v.lineVertexArray,A=m?v.text.placedSymbolArray:v.icon.placedSymbolArray,R=c.transform.width/c.transform.height;let ee=!1;for(let fe=0;fe<A.length;fe++){const oe=A.get(fe);if(oe.hidden||oe.writingMode===g.WritingMode.vertical&&!ee){ke(oe.numGlyphs,S);continue}let Oe;if(ee=!1,W?(Oe=[oe.anchorX,oe.anchorY,W(oe.anchorX,oe.anchorY),1],g.transformMat4(Oe,Oe,t)):(Oe=[oe.anchorX,oe.anchorY,0,1],Ie(Oe,Oe,t)),!gn(Oe,E)){ke(oe.numGlyphs,S);continue}const tt=mn(c.transform.cameraToCenterDistance,Oe[3]),Et=g.evaluateSizeForFeature(se,ae,oe),vt=k?Et/tt:Et*tt,Ut=new g.Point(oe.anchorX,oe.anchorY),$t=Rt(Ut,b,W).point,pn={projections:{},offsets:{}},zn=ie(oe,vt,!1,B,t,b,M,v.glyphOffsetArray,C,S,$t,Ut,pn,R,z,W);ee=zn.useVertical,(zn.notEnoughRoom||ee||zn.needsFlipping&&ie(oe,vt,!0,B,t,b,M,v.glyphOffsetArray,C,S,$t,Ut,pn,R,z,W).notEnoughRoom)&&ke(oe.numGlyphs,S)}m?v.text.dynamicLayoutVertexBuffer.updateData(S):v.icon.dynamicLayoutVertexBuffer.updateData(S)}function Lt(v,t,c,m,b,M,k,B,z,W,se,ae,E){const S=B.glyphStartIndex+B.numGlyphs,C=B.lineStartIndex,A=B.lineStartIndex+B.lineLength,R=t.getoffsetX(B.glyphStartIndex),ee=t.getoffsetX(S-1),fe=ce(v*R,c,m,b,M,k,B.segment,C,A,z,W,se,ae,E);if(!fe)return null;const oe=ce(v*ee,c,m,b,M,k,B.segment,C,A,z,W,se,ae,E);return oe?{first:fe,last:oe}:null}function ft(v,t,c,m){return v===g.WritingMode.horizontal&&Math.abs(c.y-t.y)>Math.abs(c.x-t.x)*m?{useVertical:!0}:(v===g.WritingMode.vertical?t.y<c.y:t.x>c.x)?{needsFlipping:!0}:null}function ie(v,t,c,m,b,M,k,B,z,W,se,ae,E,S,C,A){const R=t/24,ee=v.lineOffsetX*R,fe=v.lineOffsetY*R;let oe;if(v.numGlyphs>1){const Oe=v.glyphStartIndex+v.numGlyphs,tt=v.lineStartIndex,Et=v.lineStartIndex+v.lineLength,vt=Lt(R,B,ee,fe,c,se,ae,v,z,M,E,C,A);if(!vt)return{notEnoughRoom:!0};const Ut=Rt(vt.first.point,k,A).point,$t=Rt(vt.last.point,k,A).point;if(m&&!c){const pn=ft(v.writingMode,Ut,$t,S);if(pn)return pn}oe=[vt.first];for(let pn=v.glyphStartIndex+1;pn<Oe-1;pn++)oe.push(ce(R*B.getoffsetX(pn),ee,fe,c,se,ae,v.segment,tt,Et,z,M,E,C,A));oe.push(vt.last)}else{if(m&&!c){const tt=Rt(ae,b,A).point,Et=v.lineStartIndex+v.segment+1,vt=new g.Point(z.getx(Et),z.gety(Et)),Ut=Rt(vt,b,A),$t=Ut.signedDistanceFromCamera>0?Ut.point:V(ae,vt,tt,1,b,A),pn=ft(v.writingMode,tt,$t,S);if(pn)return pn}const Oe=ce(R*B.getoffsetX(v.glyphStartIndex),ee,fe,c,se,ae,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,z,M,E,C,A);if(!Oe)return{notEnoughRoom:!0};oe=[Oe]}for(const Oe of oe)g.addDynamicAttributes(W,Oe.point,Oe.angle);return{}}function V(v,t,c,m,b,M){const k=Rt(v.add(v.sub(t)._unit()),b,M).point,B=c.sub(k);return c.add(B._mult(m/B.mag()))}function U(v,t){const{projectionCache:c,lineVertexArray:m,labelPlaneMatrix:b,tileAnchorPoint:M,distanceFromAnchor:k,getElevation:B,previousVertex:z,direction:W,absOffsetX:se}=t;if(c.projections[v])return c.projections[v];const ae=new g.Point(m.getx(v),m.gety(v)),E=Rt(ae,b,B);if(E.signedDistanceFromCamera>0)return c.projections[v]=E.point,E.point;const S=v-W;return V(0===k?M:new g.Point(m.getx(S),m.gety(S)),ae,z,se-k+1,b,B)}function $(v,t,c){return v._unit()._perp()._mult(t*c)}function X(v,t,c,m,b,M,k,B){const{projectionCache:z,direction:W}=B;if(z.offsets[v])return z.offsets[v];const se=c.add(t);if(v+W<m||v+W>=b)return z.offsets[v]=se,se;const ae=U(v+W,B),E=$(ae.sub(c),k,W),S=c.add(E),C=ae.add(E);return z.offsets[v]=g.findLineIntersection(M,se,S,C)||se,z.offsets[v]}function ce(v,t,c,m,b,M,k,B,z,W,se,ae,E,S){const C=m?v-t:v+t;let A=C>0?1:-1,R=0;m&&(A*=-1,R=Math.PI),A<0&&(R+=Math.PI);let ee,fe,oe=A>0?B+k:B+k+1,Oe=b,tt=b,Et=0,vt=0;const Ut=Math.abs(C),$t=[];let pn;for(;Et+vt<=Ut;){if(oe+=A,oe<B||oe>=z)return null;Et+=vt,tt=Oe,fe=ee;const Sn={projectionCache:ae,lineVertexArray:W,labelPlaneMatrix:se,tileAnchorPoint:M,distanceFromAnchor:Et,getElevation:S,previousVertex:tt,direction:A,absOffsetX:Ut};if(Oe=U(oe,Sn),0===c)$t.push(tt),pn=Oe.sub(tt);else{let qn;const In=Oe.sub(tt);qn=0===In.mag()?$(U(oe+A,Sn).sub(Oe),c,A):$(In,c,A),fe||(fe=tt.add(qn)),ee=X(oe,qn,Oe,B,z,fe,c,Sn),$t.push(fe),pn=ee.sub(fe)}vt=pn.mag()}const zn=pn._mult((Ut-Et)/vt)._add(fe||tt),Gn=R+Math.atan2(Oe.y-tt.y,Oe.x-tt.x);return $t.push(zn),{point:zn,angle:E?Gn:0,path:$t}}const Ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ke(v,t){for(let c=0;c<v;c++){const m=t.length;t.resize(m+4),t.float32.set(Ce,3*m)}}function Ie(v,t,c){const m=t[0],b=t[1];return v[0]=c[0]*m+c[4]*b+c[12],v[1]=c[1]*m+c[5]*b+c[13],v[3]=c[3]*m+c[7]*b+c[15],v}const Qe=100;class Ft{constructor(t,c=new rt(t.width+200,t.height+200,25),m=new rt(t.width+200,t.height+200,25)){this.transform=t,this.grid=c,this.ignoredGrid=m,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Qe,this.screenBottomBoundary=t.height+Qe,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,c,m,b,M,k){const B=this.projectAndGetPerspectiveRatio(b,t.anchorPointX,t.anchorPointY,k),z=m*B.perspectiveRatio,W=t.x1*z+B.point.x,se=t.y1*z+B.point.y,ae=t.x2*z+B.point.x,E=t.y2*z+B.point.y;return!this.isInsideGrid(W,se,ae,E)||"always"!==c&&this.grid.hitTest(W,se,ae,E,c,M)||B.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[W,se,ae,E],offscreen:this.isOffscreen(W,se,ae,E)}}placeCollisionCircles(t,c,m,b,M,k,B,z,W,se,ae,E,S,C){const A=[],R=new g.Point(c.anchorX,c.anchorY),ee=Rt(R,k,C),fe=mn(this.transform.cameraToCenterDistance,ee.signedDistanceFromCamera),oe=(se?M/fe:M*fe)/g.ONE_EM,Oe=Rt(R,B,C).point,tt=Lt(oe,b,c.lineOffsetX*oe,c.lineOffsetY*oe,!1,Oe,R,c,m,B,{projections:{},offsets:{}},!1,C);let Et=!1,vt=!1,Ut=!0;if(tt){const $t=.5*E*fe+S,pn=new g.Point(-100,-100),zn=new g.Point(this.screenRightBoundary,this.screenBottomBoundary),Gn=new ge,Sn=tt.first,qn=tt.last;let In=[];for(let Oi=Sn.path.length-1;Oi>=1;Oi--)In.push(Sn.path[Oi]);for(let Oi=1;Oi<qn.path.length;Oi++)In.push(qn.path[Oi]);const Hi=2.5*$t;if(z){const Oi=In.map(xi=>Rt(xi,z,C));In=Oi.some(xi=>xi.signedDistanceFromCamera<=0)?[]:Oi.map(xi=>xi.point)}let Kr=[];if(In.length>0){const Oi=In[0].clone(),xi=In[0].clone();for(let fr=1;fr<In.length;fr++)Oi.x=Math.min(Oi.x,In[fr].x),Oi.y=Math.min(Oi.y,In[fr].y),xi.x=Math.max(xi.x,In[fr].x),xi.y=Math.max(xi.y,In[fr].y);Kr=Oi.x>=pn.x&&xi.x<=zn.x&&Oi.y>=pn.y&&xi.y<=zn.y?[In]:xi.x<pn.x||Oi.x>zn.x||xi.y<pn.y||Oi.y>zn.y?[]:g.clipLine([In],pn.x,pn.y,zn.x,zn.y)}for(const Oi of Kr){Gn.reset(Oi,.25*$t);let xi=0;xi=Gn.length<=.5*$t?1:Math.ceil(Gn.paddedLength/Hi)+1;for(let fr=0;fr<xi;fr++){const ss=fr/Math.max(xi-1,1),$i=Gn.lerp(ss),eo=$i.x+Qe,to=$i.y+Qe;A.push(eo,to,$t,0);const na=eo-$t,mr=to-$t,Va=eo+$t,Ua=to+$t;if(Ut=Ut&&this.isOffscreen(na,mr,Va,Ua),vt=vt||this.isInsideGrid(na,mr,Va,Ua),"always"!==t&&this.grid.hitTestCircle(eo,to,$t,t,ae)&&(Et=!0,!W))return{circles:[],offscreen:!1,collisionDetected:Et}}}}return{circles:!W&&Et||!vt||fe<this.perspectiveRatioCutoff?[]:A,offscreen:Ut,collisionDetected:Et}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const c=[];let m=1/0,b=1/0,M=-1/0,k=-1/0;for(const se of t){const ae=new g.Point(se.x+Qe,se.y+Qe);m=Math.min(m,ae.x),b=Math.min(b,ae.y),M=Math.max(M,ae.x),k=Math.max(k,ae.y),c.push(ae)}const B=this.grid.query(m,b,M,k).concat(this.ignoredGrid.query(m,b,M,k)),z={},W={};for(const se of B){const ae=se.key;if(void 0===z[ae.bucketInstanceId]&&(z[ae.bucketInstanceId]={}),z[ae.bucketInstanceId][ae.featureIndex])continue;const E=[new g.Point(se.x1,se.y1),new g.Point(se.x2,se.y1),new g.Point(se.x2,se.y2),new g.Point(se.x1,se.y2)];g.polygonIntersectsPolygon(c,E)&&(z[ae.bucketInstanceId][ae.featureIndex]=!0,void 0===W[ae.bucketInstanceId]&&(W[ae.bucketInstanceId]=[]),W[ae.bucketInstanceId].push(ae.featureIndex))}return W}insertCollisionBox(t,c,m,b,M,k){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:M,collisionGroupID:k,overlapMode:c},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,c,m,b,M,k){const B=m?this.ignoredGrid:this.grid,z={bucketInstanceId:b,featureIndex:M,collisionGroupID:k,overlapMode:c};for(let W=0;W<t.length;W+=4)B.insertCircle(z,t[W],t[W+1],t[W+2])}projectAndGetPerspectiveRatio(t,c,m,b){let M;return b?(M=[c,m,b(c,m),1],g.transformMat4(M,M,t)):(M=[c,m,0,1],Ie(M,M,t)),{point:new g.Point((M[0]/M[3]+1)/2*this.transform.width+Qe,(-M[1]/M[3]+1)/2*this.transform.height+Qe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/M[3]*.5}}isOffscreen(t,c,m,b){return m<Qe||t>=this.screenRightBoundary||b<Qe||c>this.screenBottomBoundary}isInsideGrid(t,c,m,b){return m>=0&&t<this.gridRightBoundary&&b>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const t=g.identity([]);return g.translate(t,t,[-100,-100,0]),t}}function yt(v,t,c){return t*(g.EXTENT/(v.tileSize*Math.pow(2,c-v.tileID.overscaledZ)))}class Pt{constructor(t,c,m,b){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?c:-c))):b&&m?1:0,this.placed=m}isHidden(){return 0===this.opacity&&!this.placed}}class nn{constructor(t,c,m,b,M){this.text=new Pt(t?t.text:null,c,m,M),this.icon=new Pt(t?t.icon:null,c,b,M)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dn{constructor(t,c,m){this.text=t,this.icon=c,this.skipFade=m}}class on{constructor(){this.invProjMatrix=g.create(),this.viewportMatrix=g.create(),this.circles=[]}}class cn{constructor(t,c,m,b,M){this.bucketInstanceId=t,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=b,this.tileID=M}}class Fe{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const c=++this.maxGroupID;this.collisionGroups[t]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[t]}}function Ne(v,t,c,m,b){const{horizontalAlign:M,verticalAlign:k}=g.getAnchorAlignment(v),B=-(M-.5)*t,z=-(k-.5)*c,W=g.evaluateVariableOffset(v,m);return new g.Point(B+W[0]*b,z+W[1]*b)}function Te(v,t,c,m,b,M){const{x1:k,x2:B,y1:z,y2:W,anchorPointX:se,anchorPointY:ae}=v,E=new g.Point(t,c);return m&&E._rotate(b?M:-M),{x1:k+E.x,y1:z+E.y,x2:B+E.x,y2:W+E.y,anchorPointX:se,anchorPointY:ae}}class ot{constructor(t,c,m,b,M){this.transform=t.clone(),this.terrain=c,this.collisionIndex=new Ft(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Fe(b),this.collisionCircleArrays={},this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,c,m,b){const M=m.getBucket(c),k=m.latestFeatureIndex;if(!M||!k||c.id!==M.layerIds[0])return;const B=m.collisionBoxArray,z=M.layers[0].layout,W=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),se=m.tileSize/g.EXTENT,ae=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),E="map"===z.get("text-pitch-alignment"),S="map"===z.get("text-rotation-alignment"),C=yt(m,1,this.transform.zoom),A=ct(ae,E,S,this.transform,C);let R=null;if(E){const fe=ln(ae,E,S,this.transform,C);R=g.multiply([],this.transform.labelPlaneMatrix,fe)}this.retainedQueryData[M.bucketInstanceId]=new cn(M.bucketInstanceId,k,M.sourceLayerIndex,M.index,m.tileID);const ee={bucket:M,layout:z,posMatrix:ae,textLabelPlaneMatrix:A,labelToScreenMatrix:R,scale:W,textPixelRatio:se,holdingForFade:m.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:g.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(b)for(const fe of M.sortKeyRanges){const{sortKey:oe,symbolInstanceStart:Oe,symbolInstanceEnd:tt}=fe;t.push({sortKey:oe,symbolInstanceStart:Oe,symbolInstanceEnd:tt,parameters:ee})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:ee})}attemptAnchorPlacement(t,c,m,b,M,k,B,z,W,se,ae,E,S,C,A,R){const ee=[E.textOffset0,E.textOffset1],fe=Ne(t,m,b,ee,M),oe=this.collisionIndex.placeCollisionBox(Te(c,fe.x,fe.y,k,B,this.transform.angle),ae,z,W,se.predicate,R);if((!A||0!==this.collisionIndex.placeCollisionBox(Te(A,fe.x,fe.y,k,B,this.transform.angle),ae,z,W,se.predicate,R).box.length)&&oe.box.length>0){let Oe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID].text&&(Oe=this.prevPlacement.variableOffsets[E.crossTileID].anchor),0===E.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[E.crossTileID]={textOffset:ee,width:m,height:b,anchor:t,textBoxScale:M,prevAnchor:Oe},this.markUsedJustification(S,t,E,C),S.allowVerticalPlacement&&(this.markUsedOrientation(S,C,E),this.placedOrientations[E.crossTileID]=C),{shift:fe,placedGlyphBoxes:oe}}}placeLayerBucketPart(t,c,m){const{bucket:b,layout:M,posMatrix:k,textLabelPlaneMatrix:B,labelToScreenMatrix:z,textPixelRatio:W,holdingForFade:se,collisionBoxArray:ae,partiallyEvaluatedTextSize:E,collisionGroup:S}=t.parameters,C=M.get("text-optional"),A=M.get("icon-optional"),R=g.getOverlapMode(M,"text-overlap","text-allow-overlap"),ee="always"===R,fe=g.getOverlapMode(M,"icon-overlap","icon-allow-overlap"),oe="always"===fe,Oe="map"===M.get("text-rotation-alignment"),tt="map"===M.get("text-pitch-alignment"),Et="none"!==M.get("icon-text-fit"),vt="viewport-y"===M.get("symbol-z-order"),Ut=ee&&(oe||!b.hasIconData()||A),$t=oe&&(ee||!b.hasTextData()||C);!b.collisionArrays&&ae&&b.deserializeCollisionBoxes(ae);const pn=this.retainedQueryData[b.bucketInstanceId].tileID,zn=this.terrain?(Sn,qn)=>this.terrain.getElevation(pn,Sn,qn):null,Gn=(Sn,qn)=>{if(c[Sn.crossTileID])return;if(se)return void(this.placements[Sn.crossTileID]=new dn(!1,!1,!1));let In=!1,Hi=!1,Kr=!0,Oi=null,xi={box:null,offscreen:null},fr={box:null,offscreen:null},ss=null,$i=null,eo=null,to=0,na=0,mr=0;qn.textFeatureIndex?to=qn.textFeatureIndex:Sn.useRuntimeCollisionCircles&&(to=Sn.featureIndex),qn.verticalTextFeatureIndex&&(na=qn.verticalTextFeatureIndex);const Va=qn.textBox;if(Va){const ir=Zi=>{let Ro=g.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Zi&&this.prevPlacement){const Eo=this.prevPlacement.placedOrientations[Sn.crossTileID];Eo&&(this.placedOrientations[Sn.crossTileID]=Eo,Ro=Eo,this.markUsedOrientation(b,Ro,Sn))}return Ro},po=(Zi,Ro)=>{if(b.allowVerticalPlacement&&Sn.numVerticalGlyphVertices>0&&qn.verticalTextBox){for(const Eo of b.writingModes)if(Eo===g.WritingMode.vertical?(xi=Ro(),fr=xi):xi=Zi(),xi&&xi.box&&xi.box.length)break}else xi=Zi()};if(M.get("text-variable-anchor")){let Zi=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Sn.crossTileID]){const Yi=this.prevPlacement.variableOffsets[Sn.crossTileID];Zi.indexOf(Yi.anchor)>0&&(Zi=Zi.filter(Lo=>Lo!==Yi.anchor),Zi.unshift(Yi.anchor))}const Ro=(Yi,Lo,Ls)=>{const iu=Yi.x2-Yi.x1,El=Yi.y2-Yi.y1,Oc=Sn.textBoxScale,lc=Et&&"never"===fe?Lo:null;let ja={box:[],offscreen:!1};const $l="never"!==R?2*Zi.length:Zi.length;for(let ia=0;ia<$l;++ia){const Do=this.attemptAnchorPlacement(Zi[ia%Zi.length],Yi,iu,El,Oc,Oe,tt,W,k,S,ia>=Zi.length?R:"never",Sn,b,Ls,lc,zn);if(Do&&(ja=Do.placedGlyphBoxes,ja&&ja.box&&ja.box.length)){In=!0,Oi=Do.shift;break}}return ja};po(()=>Ro(Va,qn.iconBox,g.WritingMode.horizontal),()=>{const Yi=qn.verticalTextBox;return b.allowVerticalPlacement&&!(xi&&xi.box&&xi.box.length)&&Sn.numVerticalGlyphVertices>0&&Yi?Ro(Yi,qn.verticalIconBox,g.WritingMode.vertical):{box:null,offscreen:null}}),xi&&(In=xi.box,Kr=xi.offscreen);const Eo=ir(xi&&xi.box);if(!In&&this.prevPlacement){const Yi=this.prevPlacement.variableOffsets[Sn.crossTileID];Yi&&(this.variableOffsets[Sn.crossTileID]=Yi,this.markUsedJustification(b,Yi.anchor,Sn,Eo))}}else{const Zi=(Ro,Eo)=>{const Yi=this.collisionIndex.placeCollisionBox(Ro,R,W,k,S.predicate,zn);return Yi&&Yi.box&&Yi.box.length&&(this.markUsedOrientation(b,Eo,Sn),this.placedOrientations[Sn.crossTileID]=Eo),Yi};po(()=>Zi(Va,g.WritingMode.horizontal),()=>{const Ro=qn.verticalTextBox;return b.allowVerticalPlacement&&Sn.numVerticalGlyphVertices>0&&Ro?Zi(Ro,g.WritingMode.vertical):{box:null,offscreen:null}}),ir(xi&&xi.box&&xi.box.length)}}if(ss=xi,In=ss&&ss.box&&ss.box.length>0,Kr=ss&&ss.offscreen,Sn.useRuntimeCollisionCircles){const ir=b.text.placedSymbolArray.get(Sn.centerJustifiedTextSymbolIndex),po=g.evaluateSizeForFeature(b.textSizeData,E,ir),Zi=M.get("text-padding");$i=this.collisionIndex.placeCollisionCircles(R,ir,b.lineVertexArray,b.glyphOffsetArray,po,k,B,z,m,tt,S.predicate,Sn.collisionCircleDiameter,Zi,zn),$i.circles.length&&$i.collisionDetected&&!m&&g.warnOnce("Collisions detected, but collision boxes are not shown"),In=ee||$i.circles.length>0&&!$i.collisionDetected,Kr=Kr&&$i.offscreen}if(qn.iconFeatureIndex&&(mr=qn.iconFeatureIndex),qn.iconBox){const ir=po=>{const Zi=Et&&Oi?Te(po,Oi.x,Oi.y,Oe,tt,this.transform.angle):po;return this.collisionIndex.placeCollisionBox(Zi,fe,W,k,S.predicate,zn)};fr&&fr.box&&fr.box.length&&qn.verticalIconBox?(eo=ir(qn.verticalIconBox),Hi=eo.box.length>0):(eo=ir(qn.iconBox),Hi=eo.box.length>0),Kr=Kr&&eo.offscreen}const Ua=C||0===Sn.numHorizontalGlyphVertices&&0===Sn.numVerticalGlyphVertices,Hl=A||0===Sn.numIconVertices;if(Ua||Hl?Hl?Ua||(Hi=Hi&&In):In=Hi&&In:Hi=In=Hi&&In,In&&ss&&ss.box&&this.collisionIndex.insertCollisionBox(ss.box,R,M.get("text-ignore-placement"),b.bucketInstanceId,fr&&fr.box&&na?na:to,S.ID),Hi&&eo&&this.collisionIndex.insertCollisionBox(eo.box,fe,M.get("icon-ignore-placement"),b.bucketInstanceId,mr,S.ID),$i&&(In&&this.collisionIndex.insertCollisionCircles($i.circles,R,M.get("text-ignore-placement"),b.bucketInstanceId,to,S.ID),m)){const ir=b.bucketInstanceId;let po=this.collisionCircleArrays[ir];void 0===po&&(po=this.collisionCircleArrays[ir]=new on);for(let Zi=0;Zi<$i.circles.length;Zi+=4)po.circles.push($i.circles[Zi+0]),po.circles.push($i.circles[Zi+1]),po.circles.push($i.circles[Zi+2]),po.circles.push($i.collisionDetected?1:0)}if(0===Sn.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===b.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Sn.crossTileID]=new dn(In||Ut,Hi||$t,Kr||b.justReloaded),c[Sn.crossTileID]=!0};if(vt){if(0!==t.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Sn=b.getSortedSymbolIndexes(this.transform.angle);for(let qn=Sn.length-1;qn>=0;--qn){const In=Sn[qn];Gn(b.symbolInstances.get(In),b.collisionArrays[In])}}else for(let Sn=t.symbolInstanceStart;Sn<t.symbolInstanceEnd;Sn++)Gn(b.symbolInstances.get(Sn),b.collisionArrays[Sn]);if(m&&b.bucketInstanceId in this.collisionCircleArrays){const Sn=this.collisionCircleArrays[b.bucketInstanceId];g.invert(Sn.invProjMatrix,k),Sn.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(t,c,m,b){let M;M=b===g.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[g.getAnchorJustification(c)];const k=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const B of k)B>=0&&(t.text.placedSymbolArray.get(B).crossTileID=M>=0&&B!==M?0:m.crossTileID)}markUsedOrientation(t,c,m){const b=c===g.WritingMode.horizontal||c===g.WritingMode.horizontalOnly?c:0,M=c===g.WritingMode.vertical?c:0,k=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const B of k)t.text.placedSymbolArray.get(B).placedOrientation=b;m.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const b=c?c.symbolFadeChange(t):1,M=c?c.opacities:{},k=c?c.variableOffsets:{},B=c?c.placedOrientations:{};for(const z in this.placements){const W=this.placements[z],se=M[z];se?(this.opacities[z]=new nn(se,b,W.text,W.icon),m=m||W.text!==se.text.placed||W.icon!==se.icon.placed):(this.opacities[z]=new nn(null,b,W.text,W.icon,W.skipFade),m=m||W.text||W.icon)}for(const z in M){const W=M[z];if(!this.opacities[z]){const se=new nn(W,b,!1,!1);se.isHidden()||(this.opacities[z]=se,m=m||W.text.placed||W.icon.placed)}}for(const z in k)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=k[z]);for(const z in B)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=B[z]);if(c&&void 0===c.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:t)}updateLayerOpacities(t,c){const m={};for(const b of c){const M=b.getBucket(t);M&&b.latestFeatureIndex&&t.id===M.layerIds[0]&&this.updateBucketOpacities(M,m,b.collisionBoxArray)}}updateBucketOpacities(t,c,m){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const b=t.layers[0].layout,M=new nn(null,0,!1,!1,!0),k=b.get("text-allow-overlap"),B=b.get("icon-allow-overlap"),z=b.get("text-variable-anchor"),W="map"===b.get("text-rotation-alignment"),se="map"===b.get("text-pitch-alignment"),ae="none"!==b.get("icon-text-fit"),E=new nn(null,0,k&&(B||!t.hasIconData()||b.get("icon-optional")),B&&(k||!t.hasTextData()||b.get("text-optional")),!0);!t.collisionArrays&&m&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(m);const S=(C,A,R)=>{for(let ee=0;ee<A/4;ee++)C.opacityVertexArray.emplaceBack(R);C.hasVisibleVertices=C.hasVisibleVertices||R!==so};for(let C=0;C<t.symbolInstances.length;C++){const A=t.symbolInstances.get(C),{numHorizontalGlyphVertices:R,numVerticalGlyphVertices:ee,crossTileID:fe}=A;let oe=this.opacities[fe];c[fe]?oe=M:oe||(oe=E,this.opacities[fe]=oe),c[fe]=!0;const Oe=A.numIconVertices>0,tt=this.placedOrientations[A.crossTileID],Et=tt===g.WritingMode.vertical,vt=tt===g.WritingMode.horizontal||tt===g.WritingMode.horizontalOnly;if(R>0||ee>0){const Ut=Xr(oe.text);S(t.text,R,Et?so:Ut),S(t.text,ee,vt?so:Ut);const $t=oe.text.isHidden();[A.rightJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.leftJustifiedTextSymbolIndex].forEach(Gn=>{Gn>=0&&(t.text.placedSymbolArray.get(Gn).hidden=$t||Et?1:0)}),A.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(A.verticalPlacedTextSymbolIndex).hidden=$t||vt?1:0);const pn=this.variableOffsets[A.crossTileID];pn&&this.markUsedJustification(t,pn.anchor,A,tt);const zn=this.placedOrientations[A.crossTileID];zn&&(this.markUsedJustification(t,"left",A,zn),this.markUsedOrientation(t,zn,A))}if(Oe){const Ut=Xr(oe.icon),$t=!(ae&&A.verticalPlacedIconSymbolIndex&&Et);A.placedIconSymbolIndex>=0&&(S(t.icon,A.numIconVertices,$t?Ut:so),t.icon.placedSymbolArray.get(A.placedIconSymbolIndex).hidden=oe.icon.isHidden()),A.verticalPlacedIconSymbolIndex>=0&&(S(t.icon,A.numVerticalIconVertices,$t?so:Ut),t.icon.placedSymbolArray.get(A.verticalPlacedIconSymbolIndex).hidden=oe.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Ut=t.collisionArrays[C];if(Ut){let $t=new g.Point(0,0);if(Ut.textBox||Ut.verticalTextBox){let zn=!0;if(z){const Gn=this.variableOffsets[fe];Gn?($t=Ne(Gn.anchor,Gn.width,Gn.height,Gn.textOffset,Gn.textBoxScale),W&&$t._rotate(se?this.transform.angle:-this.transform.angle)):zn=!1}Ut.textBox&&St(t.textCollisionBox.collisionVertexArray,oe.text.placed,!zn||Et,$t.x,$t.y),Ut.verticalTextBox&&St(t.textCollisionBox.collisionVertexArray,oe.text.placed,!zn||vt,$t.x,$t.y)}const pn=Boolean(!vt&&Ut.verticalIconBox);Ut.iconBox&&St(t.iconCollisionBox.collisionVertexArray,oe.icon.placed,pn,ae?$t.x:0,ae?$t.y:0),Ut.verticalIconBox&&St(t.iconCollisionBox.collisionVertexArray,oe.icon.placed,!pn,ae?$t.x:0,ae?$t.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const C=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=C.invProjMatrix,t.placementViewportMatrix=C.viewportMatrix,t.collisionCircleArray=C.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>t}setStale(){this.stale=!0}}function St(v,t,c,m,b){v.emplaceBack(t?1:0,c?1:0,m||0,b||0),v.emplaceBack(t?1:0,c?1:0,m||0,b||0),v.emplaceBack(t?1:0,c?1:0,m||0,b||0),v.emplaceBack(t?1:0,c?1:0,m||0,b||0)}const rn=Math.pow(2,25),Ln=Math.pow(2,24),Bn=Math.pow(2,17),Ji=Math.pow(2,16),Qo=Math.pow(2,9),ri=Math.pow(2,8),Qi=Math.pow(2,1);function Xr(v){if(0===v.opacity&&!v.placed)return 0;if(1===v.opacity&&v.placed)return 4294967295;const t=v.placed?1:0,c=Math.floor(127*v.opacity);return c*rn+t*Ln+c*Bn+t*Ji+c*Qo+t*ri+c*Qi+t}const so=0;class ao{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,c,m,b,M){const k=this._bucketParts;for(;this._currentTileIndex<t.length;)if(c.getBucketParts(k,b,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((B,z)=>B.sortKey-z.sortKey));this._currentPartIndex<k.length;)if(c.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,M())return!0;return!1}}class _r{constructor(t,c,m,b,M,k,B,z){this.placement=new ot(t,c,k,B,z),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=M,this._done=!1}isDone(){return this._done}continuePlacement(t,c,m){const b=g.exported.now(),M=()=>!this._forceFullPlacement&&g.exported.now()-b>2;for(;this._currentPlacementIndex>=0;){const k=c[t[this._currentPlacementIndex]],B=this.placement.collisionIndex.transform.zoom;if("symbol"===k.type&&(!k.minzoom||k.minzoom<=B)&&(!k.maxzoom||k.maxzoom>B)){if(this._inProgressLayer||(this._inProgressLayer=new ao(k)),this._inProgressLayer.continuePlacement(m[k.source],this.placement,this._showCollisionBoxes,k,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const yr=512/g.EXTENT/2;class Ti{constructor(t,c,m){this.tileID=t,this.bucketInstanceId=m,this._symbolsByKey={};const b=new Map;for(let M=0;M<c.length;M++){const k=c.get(M),B=k.key,z=b.get(B);z?z.push(k):b.set(B,[k])}for(const[M,k]of b){const B={positions:k.map(z=>({x:Math.floor(z.anchorX*yr),y:Math.floor(z.anchorY*yr)})),crossTileIDs:k.map(z=>z.crossTileID)};if(B.positions.length>128){const z=new g.KDBush(B.positions.length,16,Uint16Array);for(const{x:W,y:se}of B.positions)z.add(W,se);z.finish(),delete B.positions,B.index=z}this._symbolsByKey[M]=B}}getScaledCoordinates(t,c){const{x:m,y:b,z:M}=this.tileID.canonical,{x:k,y:B,z}=c.canonical,W=yr/Math.pow(2,z-M),se=(B*g.EXTENT+t.anchorY)*W,ae=b*g.EXTENT*yr;return{x:Math.floor((k*g.EXTENT+t.anchorX)*W-m*g.EXTENT*yr),y:Math.floor(se-ae)}}findMatches(t,c,m){const b=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let M=0;M<t.length;M++){const k=t.get(M);if(k.crossTileID)continue;const B=this._symbolsByKey[k.key];if(!B)continue;const z=this.getScaledCoordinates(k,c);if(B.index){const W=B.index.range(z.x-b,z.y-b,z.x+b,z.y+b).sort();for(const se of W){const ae=B.crossTileIDs[se];if(!m[ae]){m[ae]=!0,k.crossTileID=ae;break}}}else if(B.positions)for(let W=0;W<B.positions.length;W++){const se=B.positions[W],ae=B.crossTileIDs[W];if(Math.abs(se.x-z.x)<=b&&Math.abs(se.y-z.y)<=b&&!m[ae]){m[ae]=!0,k.crossTileID=ae;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class lo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Vo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const c=Math.round((t-this.lng)/360);if(0!==c)for(const m in this.indexes){const b=this.indexes[m],M={};for(const k in b){const B=b[k];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+c),M[B.tileID.key]=B}this.indexes[m]=M}this.lng=t}addBucket(t,c,m){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let M=0;M<c.symbolInstances.length;M++)c.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const b=this.usedCrossTileIDs[t.overscaledZ];for(const M in this.indexes){const k=this.indexes[M];if(Number(M)>t.overscaledZ)for(const B in k){const z=k[B];z.tileID.isChildOf(t)&&z.findMatches(c.symbolInstances,t,b)}else{const B=k[t.scaledTo(Number(M)).key];B&&B.findMatches(c.symbolInstances,t,b)}}for(let M=0;M<c.symbolInstances.length;M++){const k=c.symbolInstances.get(M);k.crossTileID||(k.crossTileID=m.generate(),b[k.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ti(t,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(t,c){for(const m of c.getCrossTileIDsLists())for(const b of m)delete this.usedCrossTileIDs[t][b]}removeStaleBuckets(t){let c=!1;for(const m in this.indexes){const b=this.indexes[m];for(const M in b)t[b[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,b[M]),delete b[M],c=!0)}return c}}class Er{constructor(){this.layerIndexes={},this.crossTileIDs=new lo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,c,m){let b=this.layerIndexes[t.id];void 0===b&&(b=this.layerIndexes[t.id]=new Vo);let M=!1;const k={};b.handleWrapJump(m);for(const B of c){const z=B.getBucket(t);z&&t.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(B.tileID,z,this.crossTileIDs)&&(M=!0),k[z.bucketInstanceId]=!0)}return b.removeStaleBuckets(k)&&(M=!0),M}pruneUnusedLayers(t){const c={};t.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}const mi=(v,t)=>g.emitValidationErrors(v,t&&t.filter(c=>"source.canvas"!==c.identifier)),Nr=g.pick(g.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),cs=g.pick(g.operations,["setCenter","setZoom","setBearing","setPitch"]),Br=g.emptyStyle();class Pi extends g.Evented{constructor(t,c={}){super(),this.map=t,this.dispatcher=new Xt(he(),this,t._getMapId()),this.imageManager=new kt,this.imageManager.setEventedParent(this),this.glyphManager=new xt(t._requestManager,c.localIdeographFontFamily),this.lineAtlas=new hi(256,512),this.crossTileSymbolIndex=new Er,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new g.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",g.getReferrer());const m=this;this._rtlTextPluginCallback=Pi.registerForPluginStateChange(b=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(M,k)=>{if(g.triggerPluginCompletionEvent(M),k&&k.every(B=>B))for(const B in m.sourceCaches){const z=m.sourceCaches[B].getSource().type;"vector"!==z&&"geojson"!==z||m.sourceCaches[B].reload()}})}),this.on("data",b=>{if("source"!==b.dataType||"metadata"!==b.sourceDataType)return;const M=this.sourceCaches[b.sourceId];if(!M)return;const k=M.getSource();if(k&&k.vectorLayerIds)for(const B in this._layers){const z=this._layers[B];z.source===k.id&&this._validateLayer(z)}})}loadURL(t,c={},m){this.fire(new g.Event("dataloading",{dataType:"style"})),c.validate="boolean"!=typeof c.validate||c.validate;const b=this.map._requestManager.transformRequest(t,qe.Style);this._request=g.getJSON(b,(M,k)=>{this._request=null,M?this.fire(new g.ErrorEvent(M)):k&&this._load(k,c,m)})}loadJSON(t,c={},m){this.fire(new g.Event("dataloading",{dataType:"style"})),this._request=g.exported.frame(()=>{this._request=null,c.validate=!1!==c.validate,this._load(t,c,m)})}loadEmpty(){this.fire(new g.Event("dataloading",{dataType:"style"})),this._load(Br,{validate:!1})}_load(t,c,m){const b=c.transformStyle?c.transformStyle(m,t):t;if(!c.validate||!mi(this,g.validateStyle(b))){this._loaded=!0,this.stylesheet=b;for(const M in b.sources)this.addSource(M,b.sources[M],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Jn(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new g.Event("data",{dataType:"style"})),this.fire(new g.Event("style.load"))}}_createLayers(){const t=g.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",t),this._order=t.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of t){const m=g.createStyleLayer(c);m.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=m}}_loadSprite(t,c=!1,m){this.imageManager.setLoaded(!1),this._spriteRequest=function(b,M,k,B){const z=Re(b),W=z.length,se=k>1?"@2x":"",ae={},E={},S={};for(const{id:C,url:A}of z){const R=M.transformRequest(M.normalizeSpriteURL(A,se,".json"),qe.SpriteJSON),ee=`${C}_${R.url}`;ae[ee]=g.getJSON(R,(Oe,tt)=>{delete ae[ee],E[C]=tt,ze(B,E,S,Oe,W)});const fe=M.transformRequest(M.normalizeSpriteURL(A,se,".png"),qe.SpriteImage),oe=`${C}_${fe.url}`;ae[oe]=$e.getImage(fe,(Oe,tt)=>{delete ae[oe],S[C]=tt,ze(B,E,S,Oe,W)})}return{cancel(){for(const C of Object.values(ae))C.cancel()}}}(t,this.map._requestManager,this.map.getPixelRatio(),(b,M)=>{if(this._spriteRequest=null,b)this.fire(new g.ErrorEvent(b));else if(M)for(const k in M){this._spritesImagesIds[k]=[];const B=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter(z=>!(z in M)):[];for(const z of B)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in M[k]){const W="default"===k?z:`${k}:${z}`;this._spritesImagesIds[k].push(W),W in this.imageManager.images?this.imageManager.updateImage(W,M[k][z],!1):this.imageManager.addImage(W,M[k][z]),c&&(this._changedImages[W]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"})),m&&m(b)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}_validateLayer(t){const c=this.sourceCaches[t.source];if(!c)return;const m=t.sourceLayer;if(!m)return;const b=c.getSource();("geojson"===b.type||b.vectorLayerIds&&-1===b.vectorLayerIds.indexOf(m))&&this.fire(new g.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${b.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t){const c=this._serializedAllLayers();if(!t||0===t.length)return Object.values(c);const m=[];for(const b of t)c[b]&&m.push(c[b]);return m}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const c=Object.keys(this._layers);for(const m of c){const b=this._layers[m];"custom"!==b.type&&(t[m]=b.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const c=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(b.length||M.length)&&this._updateWorkerLayers(b,M);for(const k in this._updatedSources){const B=this._updatedSources[k];if("reload"===B)this._reloadSource(k);else{if("clear"!==B)throw new Error(`Invalid action ${B}`);this._clearSource(k)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const m={};for(const b in this.sourceCaches){const M=this.sourceCaches[b];m[b]=M.used,M.used=!1}for(const b of this._order){const M=this._layers[b];M.recalculate(t,this._availableImages),!M.isHidden(t.zoom)&&M.source&&(this.sourceCaches[M.source].used=!0)}for(const b in m){const M=this.sourceCaches[b];m[b]!==M.used&&M.fire(new g.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(t),this.z=t.zoom,c&&this.fire(new g.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(t),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,c={}){this._checkLoaded();const m=this.serialize();if(t=c.transformStyle?c.transformStyle(m,t):t,mi(this,g.validateStyle(t)))return!1;(t=g.clone$1(t)).layers=g.derefLayers(t.layers);const b=g.diffStyles(m,t).filter(k=>!(k.command in cs));if(0===b.length)return!1;const M=b.filter(k=>!(k.command in Nr));if(M.length>0)throw new Error(`Unimplemented: ${M.map(k=>k.command).join(", ")}.`);for(const k of b)"setTransition"!==k.command&&this[k.command].apply(this,k.args);return this.stylesheet=t,!0}addImage(t,c){if(this.getImage(t))return this.fire(new g.ErrorEvent(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,c),this._afterImageUpdated(t)}updateImage(t,c){this.imageManager.updateImage(t,c)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new g.ErrorEvent(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,c,m={}){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error(`Source "${t}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(g.validateStyle.source,`sources.${t}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const b=this.sourceCaches[t]=new Xe(t,c,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:b.serialize(),sourceId:t})),b.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===t)return this.fire(new g.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${m}" is using it.`)));const c=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],c.fire(new g.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,c){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error(`There is no source with this ID=${t}`);const m=this.sourceCaches[t].getSource();if("geojson"!==m.type)throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(c),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,c,m={}){this._checkLoaded();const b=t.id;if(this.getLayer(b))return void this.fire(new g.ErrorEvent(new Error(`Layer "${b}" already exists on this map.`)));let M;if("custom"===t.type){if(mi(this,g.validateCustomStyleLayer(t)))return;M=g.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(b,t.source),t=g.clone$1(t),t=g.extend(t,{source:b})),this._validate(g.validateStyle.layer,`layers.${b}`,t,{arrayIndex:-1},m))return;M=g.createStyleLayer(t),this._validateLayer(M),M.setEventedParent(this,{layer:{id:b}})}const k=c?this._order.indexOf(c):this._order.length;if(c&&-1===k)this.fire(new g.ErrorEvent(new Error(`Cannot add layer "${b}" before non-existing layer "${c}".`)));else{if(this._order.splice(k,0,b),this._layerOrderChanged=!0,this._layers[b]=M,this._removedLayers[b]&&M.source&&"custom"!==M.type){const B=this._removedLayers[b];delete this._removedLayers[b],B.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",this.sourceCaches[M.source].pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map)}}moveLayer(t,c){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new g.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===c)return;const m=this._order.indexOf(t);this._order.splice(m,1);const b=c?this._order.indexOf(c):this._order.length;c&&-1===b?this.fire(new g.ErrorEvent(new Error(`Cannot move layer "${t}" before non-existing layer "${c}".`))):(this._order.splice(b,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const c=this._layers[t];if(!c)return void this.fire(new g.ErrorEvent(new Error(`Cannot remove non-existing layer "${t}".`)));c.setEventedParent(null);const m=this._order.indexOf(t);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=c,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],c.onRemove&&c.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,c,m){this._checkLoaded();const b=this.getLayer(t);b?b.minzoom===c&&b.maxzoom===m||(null!=c&&(b.minzoom=c),null!=m&&(b.maxzoom=m),this._updateLayer(b)):this.fire(new g.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,c,m={}){this._checkLoaded();const b=this.getLayer(t);if(b){if(!g.deepEqual(b.filter,c))return null==c?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(g.validateStyle.filter,`layers.${b.id}.filter`,c,null,m)||(b.filter=g.clone$1(c),this._updateLayer(b)))}else this.fire(new g.ErrorEvent(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return g.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,c,m,b={}){this._checkLoaded();const M=this.getLayer(t);M?g.deepEqual(M.getLayoutProperty(c),m)||(M.setLayoutProperty(c,m,b),this._updateLayer(M)):this.fire(new g.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,c){const m=this.getLayer(t);if(m)return m.getLayoutProperty(c);this.fire(new g.ErrorEvent(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,c,m,b={}){this._checkLoaded();const M=this.getLayer(t);M?g.deepEqual(M.getPaintProperty(c),m)||(M.setPaintProperty(c,m,b)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new g.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,c){return this.getLayer(t).getPaintProperty(c)}setFeatureState(t,c){this._checkLoaded();const m=t.source,b=t.sourceLayer,M=this.sourceCaches[m];if(void 0===M)return void this.fire(new g.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const k=M.getSource().type;"geojson"===k&&b?this.fire(new g.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==k||b?(void 0===t.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided."))),M.setFeatureState(b,t.id,c)):this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,c){this._checkLoaded();const m=t.source,b=this.sourceCaches[m];if(void 0===b)return void this.fire(new g.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const M=b.getSource().type,k="vector"===M?t.sourceLayer:void 0;"vector"!==M||k?c&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new g.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(k,t.id,c):this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const c=t.source,m=t.sourceLayer,b=this.sourceCaches[c];if(void 0!==b)return"vector"!==b.getSource().type||m?(void 0===t.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(m,t.id)):void this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new g.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return g.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t=g.mapObject(this.sourceCaches,b=>b.serialize()),c=this._serializeByIds(this._order),m=this.stylesheet;return g.filterObject({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:t,layers:c},b=>void 0!==b)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const c=k=>"fill-extrusion"===this._layers[k].type,m={},b=[];for(let k=this._order.length-1;k>=0;k--){const B=this._order[k];if(c(B)){m[B]=k;for(const z of t){const W=z[B];if(W)for(const se of W)b.push(se)}}}b.sort((k,B)=>B.intersectionZ-k.intersectionZ);const M=[];for(let k=this._order.length-1;k>=0;k--){const B=this._order[k];if(c(B))for(let z=b.length-1;z>=0;z--){const W=b[z].feature;if(m[W.layer.id]<k)break;M.push(W),b.pop()}else for(const z of t){const W=z[B];if(W)for(const se of W)M.push(se.feature)}}return M}queryRenderedFeatures(t,c,m){c&&c.filter&&this._validate(g.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const b={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new g.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const B of c.layers){const z=this._layers[B];if(!z)return this.fire(new g.ErrorEvent(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];b[z.source]=!0}}const M=[];c.availableImages=this._availableImages;const k=this._serializedAllLayers();for(const B in this.sourceCaches)c.layers&&!b[B]||M.push(Fi(this.sourceCaches[B],this._layers,k,t,c,m));return this.placement&&M.push(function(B,z,W,se,ae,E,S){const C={},A=E.queryRenderedSymbols(se),R=[];for(const ee of Object.keys(A).map(Number))R.push(S[ee]);R.sort(_i);for(const ee of R){const fe=ee.featureIndex.lookupSymbolFeatures(A[ee.bucketInstanceId],z,ee.bucketIndex,ee.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,B);for(const oe in fe){const Oe=C[oe]=C[oe]||[],tt=fe[oe];tt.sort((Et,vt)=>{const Ut=ee.featureSortOrder;if(Ut){const $t=Ut.indexOf(Et.featureIndex);return Ut.indexOf(vt.featureIndex)-$t}return vt.featureIndex-Et.featureIndex});for(const Et of tt)Oe.push(Et)}}for(const ee in C)C[ee].forEach(fe=>{const oe=fe.feature,Oe=W[B[ee].source].getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=Oe});return C}(this._layers,k,this.sourceCaches,t,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(t,c){c&&c.filter&&this._validate(g.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.sourceCaches[t];return m?function(b,M){const k=b.getRenderableIds().map(W=>b.getTileByID(W)),B=[],z={};for(let W=0;W<k.length;W++){const se=k[W],ae=se.tileID.canonical.key;z[ae]||(z[ae]=!0,se.querySourceFeatures(B,M))}return B}(m,c):[]}addSourceType(t,c,m){return Pi.getSourceType(t)?m(new Error(`A source type called "${t}" already exists.`)):(Pi.setSourceType(t,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:c.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(t,c={}){this._checkLoaded();const m=this.light.getLight();let b=!1;for(const k in t)if(!g.deepEqual(t[k],m[k])){b=!0;break}if(!b)return;const M={now:g.exported.now(),transition:g.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,c),this.light.updateTransitions(M)}_validate(t,c,m,b,M={}){return(!M||!1!==M.validate)&&mi(this,t.call(g.validateStyle,g.extend({key:c,style:this.serialize(),value:m,styleSpec:g.v8Spec},b)))}_remove(t=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),g.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const m=this.sourceCaches[c];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const c in this.sourceCaches)this.sourceCaches[c].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,c,m,b,M=!1){let k=!1,B=!1;const z={};for(const W of this._order){const se=this._layers[W];if("symbol"!==se.type)continue;if(!z[se.source]){const E=this.sourceCaches[se.source];z[se.source]=E.getRenderableIds(!0).map(S=>E.getTileByID(S)).sort((S,C)=>C.tileID.overscaledZ-S.tileID.overscaledZ||(S.tileID.isLessThan(C.tileID)?-1:1))}const ae=this.crossTileSymbolIndex.addLayer(se,z[se.source],t.center.lng);k=k||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((M=M||this._layerOrderChanged||0===m)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(g.exported.now(),t.zoom))&&(this.pauseablePlacement=new _r(t,this.map.terrain,this._order,M,c,m,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(g.exported.now()),B=!0),k&&this.pauseablePlacement.placement.setStale()),B||k)for(const W of this._order){const se=this._layers[W];"symbol"===se.type&&this.placement.updateLayerOpacities(se,z[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(g.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();const b=this.sourceCaches[c.source];b&&b.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(t,c,m){this.glyphManager.getGlyphs(c.stacks,m);const b=this.sourceCaches[c.source];b&&b.setDependencies(c.tileID.key,c.type,[""])}getResource(t,c,m){return g.makeRequest(c,m)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,c={}){this._checkLoaded(),t&&this._validate(g.validateStyle.glyphs,"glyphs",t,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,c,m={},b){this._checkLoaded();const M=[{id:t,url:c}],k=[...Re(this.stylesheet.sprite),...M];this._validate(g.validateStyle.sprite,"sprite",k,null,m)||(this.stylesheet.sprite=k,this._loadSprite(M,!0,b))}removeSprite(t){this._checkLoaded();const c=Re(this.stylesheet.sprite);if(c.find(m=>m.id===t)){if(this._spritesImagesIds[t])for(const m of this._spritesImagesIds[t])this.imageManager.removeImage(m),this._changedImages[m]=!0;c.splice(c.findIndex(m=>m.id===t),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}else this.fire(new g.ErrorEvent(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Re(this.stylesheet.sprite)}setSprite(t,c={},m){this._checkLoaded(),t&&this._validate(g.validateStyle.sprite,"sprite",t,null,c)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,m):(this._unloadSprite(),m&&m(null)))}}Pi.getSourceType=function(v){return Qn[v]},Pi.setSourceType=function(v,t){Qn[v]=t},Pi.registerForPluginStateChange=g.registerForPluginStateChange;var Gr=g.createLayout([{name:"a_pos",type:"Int16",components:2}]),Rr="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ii={prelude:Zn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:Zn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Zn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Zn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:Zn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:Zn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Zn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Zn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:Zn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:Zn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:Zn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:Zn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:Zn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:Zn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Zn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:Zn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:Zn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:Zn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:Zn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Zn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:Zn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Zn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:Zn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Rr),terrainDepth:Zn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Rr),terrainCoords:Zn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Rr)};function Zn(v,t){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=t.match(/attribute ([\w]+) ([\w]+)/g),b=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=M?M.concat(b):b,B={};return{fragmentSource:v=v.replace(c,(z,W,se,ae,E)=>(B[E]=!0,"define"===W?`\n#ifndef HAS_UNIFORM_u_${E}\nvarying ${se} ${ae} ${E};\n#else\nuniform ${se} ${ae} u_${E};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${E}\n    ${se} ${ae} ${E} = u_${E};\n#endif\n`)),vertexSource:t=t.replace(c,(z,W,se,ae,E)=>{const S="float"===ae?"vec2":"vec4",C=E.match(/color/)?"color":S;return B[E]?"define"===W?`\n#ifndef HAS_UNIFORM_u_${E}\nuniform lowp float u_${E}_t;\nattribute ${se} ${S} a_${E};\nvarying ${se} ${ae} ${E};\n#else\nuniform ${se} ${ae} u_${E};\n#endif\n`:"vec4"===C?`\n#ifndef HAS_UNIFORM_u_${E}\n    ${E} = a_${E};\n#else\n    ${se} ${ae} ${E} = u_${E};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${E}\n    ${E} = unpack_mix_${C}(a_${E}, u_${E}_t);\n#else\n    ${se} ${ae} ${E} = u_${E};\n#endif\n`:"define"===W?`\n#ifndef HAS_UNIFORM_u_${E}\nuniform lowp float u_${E}_t;\nattribute ${se} ${S} a_${E};\n#else\nuniform ${se} ${ae} u_${E};\n#endif\n`:"vec4"===C?`\n#ifndef HAS_UNIFORM_u_${E}\n    ${se} ${ae} ${E} = a_${E};\n#else\n    ${se} ${ae} ${E} = u_${E};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${E}\n    ${se} ${ae} ${E} = unpack_mix_${C}(a_${E}, u_${E}_t);\n#else\n    ${se} ${ae} ${E} = u_${E};\n#endif\n`}),staticAttributes:m,staticUniforms:k}}class lr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,c,m,b,M,k,B,z,W){this.context=t;let se=this.boundPaintVertexBuffers.length!==b.length;for(let ae=0;!se&&ae<b.length;ae++)this.boundPaintVertexBuffers[ae]!==b[ae]&&(se=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||se||this.boundIndexBuffer!==M||this.boundVertexOffset!==k||this.boundDynamicVertexBuffer!==B||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==W?this.freshBind(c,m,b,M,k,B,z,W):(t.bindVertexArray.set(this.vao),B&&B.bind(),M&&M.dynamicDraw&&M.bind(),z&&z.bind(),W&&W.bind())}freshBind(t,c,m,b,M,k,B,z){const W=t.numAttributes,se=this.context,ae=se.gl;this.vao&&this.destroy(),this.vao=se.createVertexArray(),se.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=b,this.boundVertexOffset=M,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=B,this.boundDynamicVertexBuffer3=z,c.enableAttributes(ae,t);for(const E of m)E.enableAttributes(ae,t);k&&k.enableAttributes(ae,t),B&&B.enableAttributes(ae,t),z&&z.enableAttributes(ae,t),c.bind(),c.setVertexAttribPointers(ae,t,M);for(const E of m)E.bind(),E.setVertexAttribPointers(ae,t,M);k&&(k.bind(),k.setVertexAttribPointers(ae,t,M)),b&&b.bind(),B&&(B.bind(),B.setVertexAttribPointers(ae,t,M)),z&&(z.bind(),z.setVertexAttribPointers(ae,t,M)),se.currentNumAttributes=W}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function cr(v){const t=[];for(let c=0;c<v.length;c++){if(null===v[c])continue;const m=v[c].split(" ");t.push(m.pop())}return t}class br{constructor(t,c,m,b,M,k,B){const z=t.gl;this.program=z.createProgram();const W=cr(m.staticAttributes),se=b?b.getBinderAttributes():[],ae=W.concat(se),E=Ii.prelude.staticUniforms?cr(Ii.prelude.staticUniforms):[],S=m.staticUniforms?cr(m.staticUniforms):[],C=b?b.getBinderUniforms():[],A=E.concat(S).concat(C),R=[];for(const vt of A)R.indexOf(vt)<0&&R.push(vt);const ee=b?b.defines():[];k&&ee.push("#define OVERDRAW_INSPECTOR;"),B&&ee.push("#define TERRAIN3D;");const fe=ee.concat(Ii.prelude.fragmentSource,m.fragmentSource).join("\n"),oe=ee.concat(Ii.prelude.vertexSource,m.vertexSource).join("\n"),Oe=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(Oe,fe),z.compileShader(Oe),z.attachShader(this.program,Oe);const tt=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(tt,oe),z.compileShader(tt),z.attachShader(this.program,tt),this.attributes={};const Et={};this.numAttributes=ae.length;for(let vt=0;vt<this.numAttributes;vt++)ae[vt]&&(z.bindAttribLocation(this.program,vt,ae[vt]),this.attributes[ae[vt]]=vt);z.linkProgram(this.program),z.deleteShader(tt),z.deleteShader(Oe);for(let vt=0;vt<R.length;vt++){const Ut=R[vt];if(Ut&&!Et[Ut]){const $t=z.getUniformLocation(this.program,Ut);$t&&(Et[Ut]=$t)}}var vt,Ut;this.fixedUniforms=M(t,Et),this.terrainUniforms={u_depth:new g.Uniform1i(vt=t,(Ut=Et).u_depth),u_terrain:new g.Uniform1i(vt,Ut.u_terrain),u_terrain_dim:new g.Uniform1f(vt,Ut.u_terrain_dim),u_terrain_matrix:new g.UniformMatrix4f(vt,Ut.u_terrain_matrix),u_terrain_unpack:new g.Uniform4f(vt,Ut.u_terrain_unpack),u_terrain_exaggeration:new g.Uniform1f(vt,Ut.u_terrain_exaggeration)},this.binderUniforms=b?b.getUniforms(t,Et):[]}draw(t,c,m,b,M,k,B,z,W,se,ae,E,S,C,A,R,ee,fe){const oe=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(m),t.setStencilMode(b),t.setColorMode(M),t.setCullFace(k),z){t.activeTexture.set(oe.TEXTURE2),oe.bindTexture(oe.TEXTURE_2D,z.depthTexture),t.activeTexture.set(oe.TEXTURE3),oe.bindTexture(oe.TEXTURE_2D,z.texture);for(const tt in this.terrainUniforms)this.terrainUniforms[tt].set(z[tt])}for(const tt in this.fixedUniforms)this.fixedUniforms[tt].set(B[tt]);A&&A.setUniforms(t,this.binderUniforms,S,{zoom:C});let Oe=0;switch(c){case oe.LINES:Oe=2;break;case oe.TRIANGLES:Oe=3;break;case oe.LINE_STRIP:Oe=1}for(const tt of E.get()){const Et=tt.vaos||(tt.vaos={});(Et[W]||(Et[W]=new lr)).bind(t,this,se,A?A.getPaintVertexBuffers():[],ae,tt.vertexOffset,R,ee,fe),oe.drawElements(c,tt.primitiveLength*Oe,oe.UNSIGNED_SHORT,tt.primitiveOffset*Oe*2)}}}function Hs(v,t,c){const m=1/yt(c,1,t.transform.tileZoom),b=Math.pow(2,c.tileID.overscaledZ),M=c.tileSize*Math.pow(2,t.transform.tileZoom)/b,k=M*(c.tileID.canonical.x+c.tileID.wrap*b),B=M*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[k>>16,B>>16],u_pixel_coord_lower:[65535&k,65535&B]}}const $s=(v,t,c,m)=>{const b=t.style.light,M=b.properties.get("position"),k=[M.x,M.y,M.z],B=(W=new g.ARRAY_TYPE(9),g.ARRAY_TYPE!=Float32Array&&(W[1]=0,W[2]=0,W[3]=0,W[5]=0,W[6]=0,W[7]=0),W[0]=1,W[4]=1,W[8]=1,W);var W;"viewport"===b.properties.get("anchor")&&function(W,se){var ae=Math.sin(se),E=Math.cos(se);W[0]=E,W[1]=ae,W[2]=0,W[3]=-ae,W[4]=E,W[5]=0,W[6]=0,W[7]=0,W[8]=1}(B,-t.transform.angle),function(W,se,ae){var E=se[0],S=se[1],C=se[2];W[0]=E*ae[0]+S*ae[3]+C*ae[6],W[1]=E*ae[1]+S*ae[4]+C*ae[7],W[2]=E*ae[2]+S*ae[5]+C*ae[8]}(k,k,B);const z=b.properties.get("color");return{u_matrix:v,u_lightpos:k,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+c,u_opacity:m}},us=(v,t,c,m,b,M,k)=>g.extend($s(v,t,c,m),Hs(M,t,k),{u_height_factor:-Math.pow(2,b.overscaledZ)/k.tileSize/8}),Jr=v=>({u_matrix:v}),Zr=(v,t,c,m)=>g.extend(Jr(v),Hs(c,t,m)),pa=(v,t)=>({u_matrix:v,u_world:t}),es=(v,t,c,m,b)=>g.extend(Zr(v,t,c,m),{u_world:b}),fa=(v,t,c,m)=>{const b=v.transform;let M,k;if("map"===m.paint.get("circle-pitch-alignment")){const B=yt(c,1,b.zoom);M=!0,k=[B,B]}else M=!1,k=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+("map"===m.paint.get("circle-pitch-scale")),u_matrix:v.translatePosMatrix(t.posMatrix,c,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+M,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:k}},Mc=(v,t,c)=>{const m=yt(c,1,t.zoom),b=Math.pow(2,t.zoom-c.tileID.overscaledZ),M=c.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[t.pixelsToGLUnits[0]/(m*b),t.pixelsToGLUnits[1]/(m*b)],u_overscale_factor:M}},co=(v,t,c=1)=>({u_matrix:v,u_color:t,u_overlay:0,u_overlay_scale:c}),Pl=v=>({u_matrix:v}),Ol=(v,t,c,m)=>({u_matrix:v,u_extrude_scale:yt(t,1,c),u_intensity:m});function kl(v,t){const c=Math.pow(2,t.canonical.z),m=t.canonical.y;return[new g.MercatorCoordinate(0,m/c).toLngLat().lat,new g.MercatorCoordinate(0,(m+1)/c).toLngLat().lat]}const Gs=(v,t,c,m)=>{const b=v.transform;return{u_matrix:Za(v,t,c,m),u_ratio:1/yt(t,1,b.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Ia=(v,t,c,m,b)=>g.extend(Gs(v,t,c,b),{u_image:0,u_image_height:m}),Cs=(v,t,c,m,b)=>{const M=v.transform,k=Io(t,M);return{u_matrix:Za(v,t,c,b),u_texsize:t.imageAtlasTexture.size,u_ratio:1/yt(t,1,M.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[k,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},Co=(v,t,c,m,b,M)=>{const k=v.lineAtlas,B=Io(t,v.transform),z="round"===c.layout.get("line-cap"),W=k.getDash(m.from,z),se=k.getDash(m.to,z),ae=W.width*b.fromScale,E=se.width*b.toScale;return g.extend(Gs(v,t,c,M),{u_patternscale_a:[B/ae,-W.height/2],u_patternscale_b:[B/E,-se.height/2],u_sdfgamma:k.width/(256*Math.min(ae,E)*v.pixelRatio)/2,u_image:0,u_tex_y_a:W.y,u_tex_y_b:se.y,u_mix:b.t})};function Io(v,t){return 1/yt(v,1,t.tileZoom)}function Za(v,t,c,m){return v.translatePosMatrix(m?m.posMatrix:t.tileID.posMatrix,t,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Aa=(v,t,c,m,b)=>{return{u_matrix:v,u_tl_parent:t,u_scale_parent:c,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(k=b.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(M=b.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:Zs(b.paint.get("raster-hue-rotate"))};var M,k};function Zs(v){v*=Math.PI/180;const t=Math.sin(v),c=Math.cos(v);return[(2*c+1)/3,(-Math.sqrt(3)*t-c+1)/3,(Math.sqrt(3)*t-c+1)/3]}const vo=(v,t,c,m,b,M,k,B,z,W)=>{const se=b.transform;return{u_is_size_zoom_constant:+("constant"===v||"source"===v),u_is_size_feature_constant:+("constant"===v||"camera"===v),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:se.width/se.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:k,u_coord_matrix:B,u_is_text:+z,u_pitch_with_map:+m,u_texsize:W,u_texture:0}},zr=(v,t,c,m,b,M,k,B,z,W,se)=>{const ae=b.transform;return g.extend(vo(v,t,c,m,b,M,k,B,z,W),{u_gamma_scale:m?Math.cos(ae._pitch)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+se})},Es=(v,t,c,m,b,M,k,B,z,W)=>g.extend(zr(v,t,c,m,b,M,k,B,!0,z,!0),{u_texsize_icon:W,u_texture_icon:1}),Ws=(v,t,c)=>({u_matrix:v,u_opacity:t,u_color:c}),Ds=(v,t,c,m,b,M)=>g.extend(function(k,B,z,W){const se=z.imageManager.getPattern(k.from.toString()),ae=z.imageManager.getPattern(k.to.toString()),{width:E,height:S}=z.imageManager.getPixelSize(),C=Math.pow(2,W.tileID.overscaledZ),A=W.tileSize*Math.pow(2,z.transform.tileZoom)/C,R=A*(W.tileID.canonical.x+W.tileID.wrap*C),ee=A*W.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:ae.tl,u_pattern_br_b:ae.br,u_texsize:[E,S],u_mix:B.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:ae.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/yt(W,1,z.transform.tileZoom),u_pixel_coord_upper:[R>>16,ee>>16],u_pixel_coord_lower:[65535&R,65535&ee]}}(m,M,c,b),{u_matrix:v,u_opacity:t}),Ms={fillExtrusion:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_lightpos:new g.Uniform3f(v,t.u_lightpos),u_lightintensity:new g.Uniform1f(v,t.u_lightintensity),u_lightcolor:new g.Uniform3f(v,t.u_lightcolor),u_vertical_gradient:new g.Uniform1f(v,t.u_vertical_gradient),u_opacity:new g.Uniform1f(v,t.u_opacity)}),fillExtrusionPattern:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_lightpos:new g.Uniform3f(v,t.u_lightpos),u_lightintensity:new g.Uniform1f(v,t.u_lightintensity),u_lightcolor:new g.Uniform3f(v,t.u_lightcolor),u_vertical_gradient:new g.Uniform1f(v,t.u_vertical_gradient),u_height_factor:new g.Uniform1f(v,t.u_height_factor),u_image:new g.Uniform1i(v,t.u_image),u_texsize:new g.Uniform2f(v,t.u_texsize),u_pixel_coord_upper:new g.Uniform2f(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(v,t.u_pixel_coord_lower),u_scale:new g.Uniform3f(v,t.u_scale),u_fade:new g.Uniform1f(v,t.u_fade),u_opacity:new g.Uniform1f(v,t.u_opacity)}),fill:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix)}),fillPattern:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_image:new g.Uniform1i(v,t.u_image),u_texsize:new g.Uniform2f(v,t.u_texsize),u_pixel_coord_upper:new g.Uniform2f(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(v,t.u_pixel_coord_lower),u_scale:new g.Uniform3f(v,t.u_scale),u_fade:new g.Uniform1f(v,t.u_fade)}),fillOutline:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_world:new g.Uniform2f(v,t.u_world)}),fillOutlinePattern:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_world:new g.Uniform2f(v,t.u_world),u_image:new g.Uniform1i(v,t.u_image),u_texsize:new g.Uniform2f(v,t.u_texsize),u_pixel_coord_upper:new g.Uniform2f(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(v,t.u_pixel_coord_lower),u_scale:new g.Uniform3f(v,t.u_scale),u_fade:new g.Uniform1f(v,t.u_fade)}),circle:(v,t)=>({u_camera_to_center_distance:new g.Uniform1f(v,t.u_camera_to_center_distance),u_scale_with_map:new g.Uniform1i(v,t.u_scale_with_map),u_pitch_with_map:new g.Uniform1i(v,t.u_pitch_with_map),u_extrude_scale:new g.Uniform2f(v,t.u_extrude_scale),u_device_pixel_ratio:new g.Uniform1f(v,t.u_device_pixel_ratio),u_matrix:new g.UniformMatrix4f(v,t.u_matrix)}),collisionBox:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_camera_to_center_distance:new g.Uniform1f(v,t.u_camera_to_center_distance),u_pixels_to_tile_units:new g.Uniform1f(v,t.u_pixels_to_tile_units),u_extrude_scale:new g.Uniform2f(v,t.u_extrude_scale),u_overscale_factor:new g.Uniform1f(v,t.u_overscale_factor)}),collisionCircle:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_inv_matrix:new g.UniformMatrix4f(v,t.u_inv_matrix),u_camera_to_center_distance:new g.Uniform1f(v,t.u_camera_to_center_distance),u_viewport_size:new g.Uniform2f(v,t.u_viewport_size)}),debug:(v,t)=>({u_color:new g.UniformColor(v,t.u_color),u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_overlay:new g.Uniform1i(v,t.u_overlay),u_overlay_scale:new g.Uniform1f(v,t.u_overlay_scale)}),clippingMask:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix)}),heatmap:(v,t)=>({u_extrude_scale:new g.Uniform1f(v,t.u_extrude_scale),u_intensity:new g.Uniform1f(v,t.u_intensity),u_matrix:new g.UniformMatrix4f(v,t.u_matrix)}),heatmapTexture:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_world:new g.Uniform2f(v,t.u_world),u_image:new g.Uniform1i(v,t.u_image),u_color_ramp:new g.Uniform1i(v,t.u_color_ramp),u_opacity:new g.Uniform1f(v,t.u_opacity)}),hillshade:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_image:new g.Uniform1i(v,t.u_image),u_latrange:new g.Uniform2f(v,t.u_latrange),u_light:new g.Uniform2f(v,t.u_light),u_shadow:new g.UniformColor(v,t.u_shadow),u_highlight:new g.UniformColor(v,t.u_highlight),u_accent:new g.UniformColor(v,t.u_accent)}),hillshadePrepare:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_image:new g.Uniform1i(v,t.u_image),u_dimension:new g.Uniform2f(v,t.u_dimension),u_zoom:new g.Uniform1f(v,t.u_zoom),u_unpack:new g.Uniform4f(v,t.u_unpack)}),line:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_ratio:new g.Uniform1f(v,t.u_ratio),u_device_pixel_ratio:new g.Uniform1f(v,t.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(v,t.u_units_to_pixels)}),lineGradient:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_ratio:new g.Uniform1f(v,t.u_ratio),u_device_pixel_ratio:new g.Uniform1f(v,t.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(v,t.u_units_to_pixels),u_image:new g.Uniform1i(v,t.u_image),u_image_height:new g.Uniform1f(v,t.u_image_height)}),linePattern:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_texsize:new g.Uniform2f(v,t.u_texsize),u_ratio:new g.Uniform1f(v,t.u_ratio),u_device_pixel_ratio:new g.Uniform1f(v,t.u_device_pixel_ratio),u_image:new g.Uniform1i(v,t.u_image),u_units_to_pixels:new g.Uniform2f(v,t.u_units_to_pixels),u_scale:new g.Uniform3f(v,t.u_scale),u_fade:new g.Uniform1f(v,t.u_fade)}),lineSDF:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_ratio:new g.Uniform1f(v,t.u_ratio),u_device_pixel_ratio:new g.Uniform1f(v,t.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(v,t.u_units_to_pixels),u_patternscale_a:new g.Uniform2f(v,t.u_patternscale_a),u_patternscale_b:new g.Uniform2f(v,t.u_patternscale_b),u_sdfgamma:new g.Uniform1f(v,t.u_sdfgamma),u_image:new g.Uniform1i(v,t.u_image),u_tex_y_a:new g.Uniform1f(v,t.u_tex_y_a),u_tex_y_b:new g.Uniform1f(v,t.u_tex_y_b),u_mix:new g.Uniform1f(v,t.u_mix)}),raster:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_tl_parent:new g.Uniform2f(v,t.u_tl_parent),u_scale_parent:new g.Uniform1f(v,t.u_scale_parent),u_buffer_scale:new g.Uniform1f(v,t.u_buffer_scale),u_fade_t:new g.Uniform1f(v,t.u_fade_t),u_opacity:new g.Uniform1f(v,t.u_opacity),u_image0:new g.Uniform1i(v,t.u_image0),u_image1:new g.Uniform1i(v,t.u_image1),u_brightness_low:new g.Uniform1f(v,t.u_brightness_low),u_brightness_high:new g.Uniform1f(v,t.u_brightness_high),u_saturation_factor:new g.Uniform1f(v,t.u_saturation_factor),u_contrast_factor:new g.Uniform1f(v,t.u_contrast_factor),u_spin_weights:new g.Uniform3f(v,t.u_spin_weights)}),symbolIcon:(v,t)=>({u_is_size_zoom_constant:new g.Uniform1i(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(v,t.u_is_size_feature_constant),u_size_t:new g.Uniform1f(v,t.u_size_t),u_size:new g.Uniform1f(v,t.u_size),u_camera_to_center_distance:new g.Uniform1f(v,t.u_camera_to_center_distance),u_pitch:new g.Uniform1f(v,t.u_pitch),u_rotate_symbol:new g.Uniform1i(v,t.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(v,t.u_aspect_ratio),u_fade_change:new g.Uniform1f(v,t.u_fade_change),u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(v,t.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(v,t.u_coord_matrix),u_is_text:new g.Uniform1i(v,t.u_is_text),u_pitch_with_map:new g.Uniform1i(v,t.u_pitch_with_map),u_texsize:new g.Uniform2f(v,t.u_texsize),u_texture:new g.Uniform1i(v,t.u_texture)}),symbolSDF:(v,t)=>({u_is_size_zoom_constant:new g.Uniform1i(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(v,t.u_is_size_feature_constant),u_size_t:new g.Uniform1f(v,t.u_size_t),u_size:new g.Uniform1f(v,t.u_size),u_camera_to_center_distance:new g.Uniform1f(v,t.u_camera_to_center_distance),u_pitch:new g.Uniform1f(v,t.u_pitch),u_rotate_symbol:new g.Uniform1i(v,t.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(v,t.u_aspect_ratio),u_fade_change:new g.Uniform1f(v,t.u_fade_change),u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(v,t.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(v,t.u_coord_matrix),u_is_text:new g.Uniform1i(v,t.u_is_text),u_pitch_with_map:new g.Uniform1i(v,t.u_pitch_with_map),u_texsize:new g.Uniform2f(v,t.u_texsize),u_texture:new g.Uniform1i(v,t.u_texture),u_gamma_scale:new g.Uniform1f(v,t.u_gamma_scale),u_device_pixel_ratio:new g.Uniform1f(v,t.u_device_pixel_ratio),u_is_halo:new g.Uniform1i(v,t.u_is_halo)}),symbolTextAndIcon:(v,t)=>({u_is_size_zoom_constant:new g.Uniform1i(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(v,t.u_is_size_feature_constant),u_size_t:new g.Uniform1f(v,t.u_size_t),u_size:new g.Uniform1f(v,t.u_size),u_camera_to_center_distance:new g.Uniform1f(v,t.u_camera_to_center_distance),u_pitch:new g.Uniform1f(v,t.u_pitch),u_rotate_symbol:new g.Uniform1i(v,t.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(v,t.u_aspect_ratio),u_fade_change:new g.Uniform1f(v,t.u_fade_change),u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(v,t.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(v,t.u_coord_matrix),u_is_text:new g.Uniform1i(v,t.u_is_text),u_pitch_with_map:new g.Uniform1i(v,t.u_pitch_with_map),u_texsize:new g.Uniform2f(v,t.u_texsize),u_texsize_icon:new g.Uniform2f(v,t.u_texsize_icon),u_texture:new g.Uniform1i(v,t.u_texture),u_texture_icon:new g.Uniform1i(v,t.u_texture_icon),u_gamma_scale:new g.Uniform1f(v,t.u_gamma_scale),u_device_pixel_ratio:new g.Uniform1f(v,t.u_device_pixel_ratio),u_is_halo:new g.Uniform1i(v,t.u_is_halo)}),background:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_opacity:new g.Uniform1f(v,t.u_opacity),u_color:new g.UniformColor(v,t.u_color)}),backgroundPattern:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_opacity:new g.Uniform1f(v,t.u_opacity),u_image:new g.Uniform1i(v,t.u_image),u_pattern_tl_a:new g.Uniform2f(v,t.u_pattern_tl_a),u_pattern_br_a:new g.Uniform2f(v,t.u_pattern_br_a),u_pattern_tl_b:new g.Uniform2f(v,t.u_pattern_tl_b),u_pattern_br_b:new g.Uniform2f(v,t.u_pattern_br_b),u_texsize:new g.Uniform2f(v,t.u_texsize),u_mix:new g.Uniform1f(v,t.u_mix),u_pattern_size_a:new g.Uniform2f(v,t.u_pattern_size_a),u_pattern_size_b:new g.Uniform2f(v,t.u_pattern_size_b),u_scale_a:new g.Uniform1f(v,t.u_scale_a),u_scale_b:new g.Uniform1f(v,t.u_scale_b),u_pixel_coord_upper:new g.Uniform2f(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(v,t.u_pixel_coord_lower),u_tile_units_to_pixels:new g.Uniform1f(v,t.u_tile_units_to_pixels)}),terrain:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_texture:new g.Uniform1i(v,t.u_texture),u_ele_delta:new g.Uniform1f(v,t.u_ele_delta)}),terrainDepth:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_ele_delta:new g.Uniform1f(v,t.u_ele_delta)}),terrainCoords:(v,t)=>({u_matrix:new g.UniformMatrix4f(v,t.u_matrix),u_texture:new g.Uniform1i(v,t.u_texture),u_terrain_coords_id:new g.Uniform1f(v,t.u_terrain_coords_id),u_ele_delta:new g.Uniform1f(v,t.u_ele_delta)})};class uo{constructor(t,c,m){this.context=t;const b=t.gl;this.buffer=b.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ts={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ds{constructor(t,c,m,b){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=b,this.context=t;const M=t.gl;this.buffer=M.createBuffer(),t.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,c){for(let m=0;m<this.attributes.length;m++){const b=c.attributes[this.attributes[m].name];void 0!==b&&t.enableVertexAttribArray(b)}}setVertexAttribPointers(t,c,m){for(let b=0;b<this.attributes.length;b++){const M=this.attributes[b],k=c.attributes[M.name];void 0!==k&&t.vertexAttribPointer(k,M.components,t[ts[M.type]],!1,this.itemSize,M.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ai{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Dr extends Ai{getDefault(){return g.Color.transparent}set(t){const c=this.current;(t.r!==c.r||t.g!==c.g||t.b!==c.b||t.a!==c.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Vr extends Ai{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Pa extends Ai{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class qs extends Ai{getDefault(){return[!0,!0,!0,!0]}set(t){const c=this.current;(t[0]!==c[0]||t[1]!==c[1]||t[2]!==c[2]||t[3]!==c[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Ks extends Ai{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class hs extends Ai{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Wa extends Ai{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const c=this.current;(t.func!==c.func||t.ref!==c.ref||t.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Lr extends Ai{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const c=this.current;(t[0]!==c[0]||t[1]!==c[1]||t[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Ys extends Ai{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;t?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=t,this.dirty=!1}}class ps extends Ai{getDefault(){return[0,1]}set(t){const c=this.current;(t[0]!==c[0]||t[1]!==c[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ao extends Ai{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;t?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=t,this.dirty=!1}}class ns extends Ai{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class tc extends Ai{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;t?c.enable(c.BLEND):c.disable(c.BLEND),this.current=t,this.dirty=!1}}class Wi extends Ai{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const c=this.current;(t[0]!==c[0]||t[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class qa extends Ai{getDefault(){return g.Color.transparent}set(t){const c=this.current;(t.r!==c.r||t.g!==c.g||t.b!==c.b||t.a!==c.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ka extends Ai{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Oa extends Ai{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;t?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=t,this.dirty=!1}}class ur extends Ai{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Ya extends Ai{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class fs extends Ai{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Po extends Ai{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Bi extends Ai{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const c=this.current;(t[0]!==c[0]||t[1]!==c[1]||t[2]!==c[2]||t[3]!==c[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class gl extends Ai{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Oo extends Ai{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ss extends Ai{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class vr extends Ai{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Ts extends Ai{getDefault(){return null}set(t){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Uo extends Ai{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.bindVertexArray(t),this.current=t,this.dirty=!1)}}class oi extends Ai{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class _l extends Ai{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class ma extends Ai{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class dr extends Ai{constructor(t,c){super(t),this.context=t,this.parent=c}getDefault(){return null}}class Is extends dr{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class yl extends dr{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ei extends dr{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ms{constructor(t,c,m,b,M){this.context=t,this.width=c,this.height=m;const k=t.gl,B=this.framebuffer=k.createFramebuffer();if(this.colorAttachment=new Is(t,B),b)this.depthAttachment=M?new Ei(t,B):new yl(t,B);else if(M)throw new Error("Stencil cannot be setted without depth");if(k.checkFramebufferStatus(k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,c=this.colorAttachment.get();if(c&&t.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&t.deleteRenderbuffer(m)}t.deleteFramebuffer(this.framebuffer)}}class xr{constructor(t,c,m){this.blendFunction=t,this.blendColor=c,this.mask=m}}xr.Replace=[1,0],xr.disabled=new xr(xr.Replace,g.Color.transparent,[!1,!1,!1,!1]),xr.unblended=new xr(xr.Replace,g.Color.transparent,[!0,!0,!0,!0]),xr.alphaBlended=new xr([1,771],g.Color.transparent,[!0,!0,!0,!0]);class Wt{constructor(t){this.gl=t,this.clearColor=new Dr(this),this.clearDepth=new Vr(this),this.clearStencil=new Pa(this),this.colorMask=new qs(this),this.depthMask=new Ks(this),this.stencilMask=new hs(this),this.stencilFunc=new Wa(this),this.stencilOp=new Lr(this),this.stencilTest=new Ys(this),this.depthRange=new ps(this),this.depthTest=new Ao(this),this.depthFunc=new ns(this),this.blend=new tc(this),this.blendFunc=new Wi(this),this.blendColor=new qa(this),this.blendEquation=new Ka(this),this.cullFace=new Oa(this),this.cullFaceSide=new ur(this),this.frontFace=new Ya(this),this.program=new fs(this),this.activeTexture=new Po(this),this.viewport=new Bi(this),this.bindFramebuffer=new gl(this),this.bindRenderbuffer=new Oo(this),this.bindTexture=new Ss(this),this.bindVertexBuffer=new vr(this),this.bindElementBuffer=new Ts(this),this.bindVertexArray=new Uo(this),this.pixelStoreUnpack=new oi(this),this.pixelStoreUnpackPremultiplyAlpha=new _l(this),this.pixelStoreUnpackFlipY=new ma(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.HALF_FLOAT=t.HALF_FLOAT,t.getExtension("EXT_color_buffer_half_float"),this.RGBA16F=t.RGBA16F,this.RGB16F=t.RGB16F}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,c){return new uo(this,t,c)}createVertexBuffer(t,c,m){return new ds(this,t,c,m)}createRenderbuffer(t,c,m){const b=this.gl,M=b.createRenderbuffer();return this.bindRenderbuffer.set(M),b.renderbufferStorage(b.RENDERBUFFER,t,c,m),this.bindRenderbuffer.set(null),M}createFramebuffer(t,c,m,b){return new ms(this,t,c,m,b)}clear({color:t,depth:c,stencil:m}){const b=this.gl;let M=0;t&&(M|=b.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==c&&(M|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),void 0!==m&&(M|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),b.clear(M)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){g.deepEqual(t.blendFunction,xr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){return this.gl.createVertexArray()}deleteVertexArray(t){return this.gl.deleteVertexArray(t)}unbindVAO(){this.bindVertexArray.set(null)}}class yn{constructor(t,c,m){this.func=t,this.mask=c,this.range=m}}yn.ReadOnly=!1,yn.ReadWrite=!0,yn.disabled=new yn(519,yn.ReadOnly,[0,1]);class er{constructor(t,c,m,b,M,k){this.test=t,this.ref=c,this.mask=m,this.fail=b,this.depthFail=M,this.pass=k}}er.disabled=new er({func:519,mask:0},0,0,7680,7680,7680);class gi{constructor(t,c,m){this.enable=t,this.mode=c,this.frontFace=m}}let ne;function Q(v,t,c,m,b,M,k){const B=v.context,z=B.gl,W=v.useProgram("collisionBox"),se=[];let ae=0,E=0;for(let oe=0;oe<m.length;oe++){const Oe=m[oe],tt=t.getTile(Oe),Et=tt.getBucket(c);if(!Et)continue;let vt=Oe.posMatrix;0===b[0]&&0===b[1]||(vt=v.translatePosMatrix(Oe.posMatrix,tt,b,M));const Ut=k?Et.textCollisionBox:Et.iconCollisionBox,$t=Et.collisionCircleArray;if($t.length>0){const pn=g.create(),zn=vt;g.mul(pn,Et.placementInvProjMatrix,v.transform.glCoordMatrix),g.mul(pn,pn,Et.placementViewportMatrix),se.push({circleArray:$t,circleOffset:E,transform:zn,invTransform:pn,coord:Oe}),ae+=$t.length/4,E=ae}Ut&&W.draw(B,z.LINES,yn.disabled,er.disabled,v.colorModeForRenderPass(),gi.disabled,Mc(vt,v.transform,tt),v.style.map.terrain&&v.style.map.terrain.getTerrainData(Oe),c.id,Ut.layoutVertexBuffer,Ut.indexBuffer,Ut.segments,null,v.transform.zoom,null,null,Ut.collisionVertexBuffer)}if(!k||!se.length)return;const S=v.useProgram("collisionCircle"),C=new g.CollisionCircleLayoutArray;C.resize(4*ae),C._trim();let A=0;for(const oe of se)for(let Oe=0;Oe<oe.circleArray.length/4;Oe++){const tt=4*Oe,Et=oe.circleArray[tt+0],vt=oe.circleArray[tt+1],Ut=oe.circleArray[tt+2],$t=oe.circleArray[tt+3];C.emplace(A++,Et,vt,Ut,$t,0),C.emplace(A++,Et,vt,Ut,$t,1),C.emplace(A++,Et,vt,Ut,$t,2),C.emplace(A++,Et,vt,Ut,$t,3)}(!ne||ne.length<2*ae)&&(ne=function(oe){const Oe=2*oe,tt=new g.QuadTriangleArray;tt.resize(Oe),tt._trim();for(let Et=0;Et<Oe;Et++){const vt=6*Et;tt.uint16[vt+0]=4*Et+0,tt.uint16[vt+1]=4*Et+1,tt.uint16[vt+2]=4*Et+2,tt.uint16[vt+3]=4*Et+2,tt.uint16[vt+4]=4*Et+3,tt.uint16[vt+5]=4*Et+0}return tt}(ae));const R=B.createIndexBuffer(ne,!0),ee=B.createVertexBuffer(C,g.collisionCircleLayout.members,!0);for(const oe of se){const Oe={u_matrix:oe.transform,u_inv_matrix:oe.invTransform,u_camera_to_center_distance:(fe=v.transform).cameraToCenterDistance,u_viewport_size:[fe.width,fe.height]};S.draw(B,z.TRIANGLES,yn.disabled,er.disabled,v.colorModeForRenderPass(),gi.disabled,Oe,v.style.map.terrain&&v.style.map.terrain.getTerrainData(oe.coord),c.id,ee,R,g.SegmentVector.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,v.transform.zoom,null,null,null)}var fe;ee.destroy(),R.destroy()}gi.disabled=new gi(!1,1029,2305),gi.backCCW=new gi(!0,1029,2305);const q=g.identity(new Float32Array(16));function be(v,t,c,m,b,M){const{horizontalAlign:k,verticalAlign:B}=g.getAnchorAlignment(v),z=-(k-.5)*t,W=-(B-.5)*c,se=g.evaluateVariableOffset(v,m);return new g.Point((z/b+se[0])*M,(W/b+se[1])*M)}function Bt(v,t,c,m,b,M,k,B,z,W,se){const ae=v.text.placedSymbolArray,E=v.text.dynamicLayoutVertexArray,S=v.icon.dynamicLayoutVertexArray,C={};E.clear();for(let A=0;A<ae.length;A++){const R=ae.get(A),ee=R.hidden||!R.crossTileID||v.allowVerticalPlacement&&!R.placedOrientation?null:m[R.crossTileID];if(ee){const fe=new g.Point(R.anchorX,R.anchorY),oe=Rt(fe,c?k:M,se),Oe=mn(b.cameraToCenterDistance,oe.signedDistanceFromCamera);let tt=g.evaluateSizeForFeature(v.textSizeData,z,R)*Oe/g.ONE_EM;c&&(tt*=v.tilePixelRatio/B);const{width:Et,height:vt,anchor:Ut,textOffset:$t,textBoxScale:pn}=ee,zn=be(Ut,Et,vt,$t,pn,tt),Gn=c?Rt(fe.add(zn),M,se).point:oe.point.add(t?zn.rotate(-b.angle):zn),Sn=v.allowVerticalPlacement&&R.placedOrientation===g.WritingMode.vertical?Math.PI/2:0;for(let qn=0;qn<R.numGlyphs;qn++)g.addDynamicAttributes(E,Gn,Sn);W&&R.associatedIconIndex>=0&&(C[R.associatedIconIndex]={shiftedAnchor:Gn,angle:Sn})}else ke(R.numGlyphs,E)}if(W){S.clear();const A=v.icon.placedSymbolArray;for(let R=0;R<A.length;R++){const ee=A.get(R);if(ee.hidden)ke(ee.numGlyphs,S);else{const fe=C[R];if(fe)for(let oe=0;oe<ee.numGlyphs;oe++)g.addDynamicAttributes(S,fe.shiftedAnchor,fe.angle);else ke(ee.numGlyphs,S)}}v.icon.dynamicLayoutVertexBuffer.updateData(S)}v.text.dynamicLayoutVertexBuffer.updateData(E)}function Yn(v,t,c){return c.iconsInText&&t?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function wr(v,t,c,m,b,M,k,B,z,W,se,ae){const E=v.context,S=E.gl,C=v.transform,A="map"===B,R="map"===z,ee="viewport"!==B&&"point"!==c.layout.get("symbol-placement"),fe=A&&!R&&!ee,oe=!c.layout.get("symbol-sort-key").isConstant();let Oe=!1;const tt=v.depthModeForSublayer(0,yn.ReadOnly),Et=c.layout.get("text-variable-anchor"),vt=[];for(const Ut of m){const $t=t.getTile(Ut),pn=$t.getBucket(c);if(!pn)continue;const zn=b?pn.text:pn.icon;if(!zn||!zn.segments.get().length||!zn.hasVisibleVertices)continue;const Gn=zn.programConfigurations.get(c.id),Sn=b||pn.sdfIcons,qn=b?pn.textSizeData:pn.iconSizeData,In=R||0!==C.pitch,Hi=v.useProgram(Yn(Sn,b,pn),Gn),Kr=g.evaluateSizeForZoom(qn,C.zoom),Oi=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ut);let xi,fr,ss,$i,eo=[0,0],to=null;if(b)fr=$t.glyphAtlasTexture,ss=S.LINEAR,xi=$t.glyphAtlasTexture.size,pn.iconsInText&&(eo=$t.imageAtlasTexture.size,to=$t.imageAtlasTexture,$i=In||v.options.rotating||v.options.zooming||"composite"===qn.kind||"camera"===qn.kind?S.LINEAR:S.NEAREST);else{const Lo=1!==c.layout.get("icon-size").constantOr(0)||pn.iconsNeedLinear;fr=$t.imageAtlasTexture,ss=Sn||v.options.rotating||v.options.zooming||Lo||In?S.LINEAR:S.NEAREST,xi=$t.imageAtlasTexture.size}const na=yt($t,1,v.transform.zoom),mr=ct(Ut.posMatrix,R,A,v.transform,na),Va=ln(Ut.posMatrix,R,A,v.transform,na),Ua=Et&&pn.hasTextData(),Hl="none"!==c.layout.get("icon-text-fit")&&Ua&&pn.hasIconData();if(ee){const Lo=v.style.map.terrain?(iu,El)=>v.style.map.terrain.getElevation(Ut,iu,El):null,Ls="map"===c.layout.get("text-rotation-alignment");ji(pn,Ut.posMatrix,v,b,mr,Va,R,W,Ls,Lo)}const ir=v.translatePosMatrix(Ut.posMatrix,$t,M,k),po=ee||b&&Et||Hl?q:mr,Zi=v.translatePosMatrix(Va,$t,M,k,!0),Ro=Sn&&0!==c.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1);let Eo;Eo=Sn?pn.iconsInText?Es(qn.kind,Kr,fe,R,v,ir,po,Zi,xi,eo):zr(qn.kind,Kr,fe,R,v,ir,po,Zi,b,xi,!0):vo(qn.kind,Kr,fe,R,v,ir,po,Zi,b,xi);const Yi={program:Hi,buffers:zn,uniformValues:Eo,atlasTexture:fr,atlasTextureIcon:to,atlasInterpolation:ss,atlasInterpolationIcon:$i,isSDF:Sn,hasHalo:Ro};if(oe&&pn.canOverlap){Oe=!0;const Lo=zn.segments.get();for(const Ls of Lo)vt.push({segments:new g.SegmentVector([Ls]),sortKey:Ls.sortKey,state:Yi,terrainData:Oi})}else vt.push({segments:zn.segments,sortKey:0,state:Yi,terrainData:Oi})}Oe&&vt.sort((Ut,$t)=>Ut.sortKey-$t.sortKey);for(const Ut of vt){const $t=Ut.state;if(E.activeTexture.set(S.TEXTURE0),$t.atlasTexture.bind($t.atlasInterpolation,S.CLAMP_TO_EDGE),$t.atlasTextureIcon&&(E.activeTexture.set(S.TEXTURE1),$t.atlasTextureIcon&&$t.atlasTextureIcon.bind($t.atlasInterpolationIcon,S.CLAMP_TO_EDGE)),$t.isSDF){const pn=$t.uniformValues;$t.hasHalo&&(pn.u_is_halo=1,ho($t.buffers,Ut.segments,c,v,$t.program,tt,se,ae,pn,Ut.terrainData)),pn.u_is_halo=0}ho($t.buffers,Ut.segments,c,v,$t.program,tt,se,ae,$t.uniformValues,Ut.terrainData)}}function ho(v,t,c,m,b,M,k,B,z,W){const se=m.context;b.draw(se,se.gl.TRIANGLES,M,k,B,gi.disabled,z,W,c.id,v.layoutVertexBuffer,v.indexBuffer,t,c.paint,m.transform.zoom,v.programConfigurations.get(c.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Mr(v,t,c,m,b){if(!c||!m||!m.imageAtlas)return;const M=m.imageAtlas.patternPositions;let k=M[c.to.toString()],B=M[c.from.toString()];if(!k||!B){const z=b.getPaintProperty(t);k=M[z],B=M[z]}k&&B&&v.setConstantPatternPositions(k,B)}function qi(v,t,c,m,b,M,k){const B=v.context.gl,z="fill-pattern",W=c.paint.get(z),se=W&&W.constantOr(1),ae=c.getCrossfadeParameters();let E,S,C,A,R;k?(S=se&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=B.LINES):(S=se?"fillPattern":"fill",E=B.TRIANGLES);const ee=W.constantOr(null);for(const fe of m){const oe=t.getTile(fe);if(se&&!oe.patternsLoaded())continue;const Oe=oe.getBucket(c);if(!Oe)continue;const tt=Oe.programConfigurations.get(c.id),Et=v.useProgram(S,tt),vt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(fe);se&&(v.context.activeTexture.set(B.TEXTURE0),oe.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),tt.updatePaintBuffers(ae)),Mr(tt,z,ee,oe,c);const Ut=vt?fe:null,$t=v.translatePosMatrix(Ut?Ut.posMatrix:fe.posMatrix,oe,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(k){A=Oe.indexBuffer2,R=Oe.segments2;const pn=[B.drawingBufferWidth,B.drawingBufferHeight];C="fillOutlinePattern"===S&&se?es($t,v,ae,oe,pn):pa($t,pn)}else A=Oe.indexBuffer,R=Oe.segments,C=se?Zr($t,v,ae,oe):Jr($t);Et.draw(v.context,E,b,v.stencilModeForClipping(fe),M,gi.disabled,C,vt,c.id,Oe.layoutVertexBuffer,A,R,c.paint,v.transform.zoom,tt)}}function jo(v,t,c,m,b,M,k){const B=v.context,z=B.gl,W="fill-extrusion-pattern",se=c.paint.get(W),ae=se.constantOr(1),E=c.getCrossfadeParameters(),S=c.paint.get("fill-extrusion-opacity"),C=se.constantOr(null);for(const A of m){const R=t.getTile(A),ee=R.getBucket(c);if(!ee)continue;const fe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(A),oe=ee.programConfigurations.get(c.id),Oe=v.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",oe);ae&&(v.context.activeTexture.set(z.TEXTURE0),R.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),oe.updatePaintBuffers(E)),Mr(oe,W,C,R,c);const tt=v.translatePosMatrix(A.posMatrix,R,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Et=c.paint.get("fill-extrusion-vertical-gradient"),vt=ae?us(tt,v,Et,S,A,E,R):$s(tt,v,Et,S);Oe.draw(B,B.gl.TRIANGLES,b,M,k,gi.backCCW,vt,fe,c.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,c.paint,v.transform.zoom,oe,v.style.map.terrain&&ee.centroidVertexBuffer)}}function ka(v,t,c,m,b,M,k){const B=v.context,z=B.gl,W=c.fbo;if(!W)return;const se=v.useProgram("hillshade"),ae=v.style.map.terrain&&v.style.map.terrain.getTerrainData(t);B.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,W.colorAttachment.get()),se.draw(B,z.TRIANGLES,b,M,k,gi.disabled,((E,S,C,A)=>{const R=C.paint.get("hillshade-shadow-color"),ee=C.paint.get("hillshade-highlight-color"),fe=C.paint.get("hillshade-accent-color");let oe=C.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===C.paint.get("hillshade-illumination-anchor")&&(oe-=E.transform.angle);const Oe=!E.options.moving;return{u_matrix:A?A.posMatrix:E.transform.calculatePosMatrix(S.tileID.toUnwrapped(),Oe),u_image:0,u_latrange:kl(0,S.tileID),u_light:[C.paint.get("hillshade-exaggeration"),oe],u_shadow:R,u_highlight:ee,u_accent:fe}})(v,c,m,ae?t:null),ae,m.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Xa(v,t,c,m,b,M){const k=v.context,B=k.gl,z=t.dem;if(z&&z.data){const W=z.dim,se=z.stride,ae=z.getPixels();if(k.activeTexture.set(B.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||v.getTileTexture(se),t.demTexture){const S=t.demTexture;S.update(ae,{premultiply:!1}),S.bind(B.NEAREST,B.CLAMP_TO_EDGE)}else t.demTexture=new It(k,ae,B.RGBA,{premultiply:!1}),t.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);k.activeTexture.set(B.TEXTURE0);let E=t.fbo;if(!E){const S=new It(k,{width:W,height:W,data:null},B.RGBA);S.bind(B.LINEAR,B.CLAMP_TO_EDGE),E=t.fbo=k.createFramebuffer(W,W,!0,!1),E.colorAttachment.set(S.texture)}k.bindFramebuffer.set(E.framebuffer),k.viewport.set([0,0,W,W]),v.useProgram("hillshadePrepare").draw(k,B.TRIANGLES,m,b,M,gi.disabled,((S,C)=>{const A=C.stride,R=g.create();return g.ortho(R,0,g.EXTENT,-g.EXTENT,0,0,1),g.translate(R,R,[0,-g.EXTENT,0]),{u_matrix:R,u_image:1,u_dimension:[A,A],u_zoom:S.overscaledZ,u_unpack:C.getUnpackVector()}})(t.tileID,z),null,c.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function As(v,t,c,m,b,M){const k=m.paint.get("raster-fade-duration");if(!M&&k>0){const B=g.exported.now(),z=(B-v.timeAdded)/k,W=t?(B-t.timeAdded)/k:-1,se=c.getSource(),ae=b.coveringZoomLevel({tileSize:se.tileSize,roundZoom:se.roundZoom}),E=!t||Math.abs(t.tileID.overscaledZ-ae)>Math.abs(v.tileID.overscaledZ-ae),S=E&&v.refreshedUponExpiration?1:g.clamp(E?z:1-W,0,1);return v.refreshedUponExpiration&&z>=1&&(v.refreshedUponExpiration=!1),t?{opacity:1,mix:1-S}:{opacity:S,mix:0}}return{opacity:1,mix:0}}const Rl=new g.Color(1,0,0,1),Ll=new g.Color(0,1,0,1),Sc=new g.Color(0,0,1,1),Tc=new g.Color(1,0,1,1),ga=new g.Color(0,1,1,1);function Js(v,t,c,m){Qs(v,0,t+c/2,v.transform.width,c,m)}function Ja(v,t,c,m){Qs(v,t-c/2,0,c,v.transform.height,m)}function Qs(v,t,c,m,b,M){const k=v.context,B=k.gl;B.enable(B.SCISSOR_TEST),B.scissor(t*v.pixelRatio,c*v.pixelRatio,m*v.pixelRatio,b*v.pixelRatio),k.clear({color:M}),B.disable(B.SCISSOR_TEST)}function Cr(v,t,c){const m=v.context,b=m.gl,M=c.posMatrix,k=v.useProgram("debug"),B=yn.disabled,z=er.disabled,W=v.colorModeForRenderPass(),ae=v.style.map.terrain&&v.style.map.terrain.getTerrainData(c);m.activeTexture.set(b.TEXTURE0);const E=t.getTileByID(c.key).latestRawTileData,S=Math.floor((E&&E.byteLength||0)/1024),C=t.getTile(c).tileSize,A=512/Math.min(C,512)*(c.overscaledZ/v.transform.zoom)*.5;let R=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(R+=` => ${c.overscaledZ}`),function(ee,fe){ee.initDebugOverlayCanvas();const oe=ee.debugOverlayCanvas,Oe=ee.context.gl,tt=ee.debugOverlayCanvas.getContext("2d");tt.clearRect(0,0,oe.width,oe.height),tt.shadowColor="white",tt.shadowBlur=2,tt.lineWidth=1.5,tt.strokeStyle="white",tt.textBaseline="top",tt.font="bold 36px Open Sans, sans-serif",tt.fillText(fe,5,5),tt.strokeText(fe,5,5),ee.debugOverlayTexture.update(oe),ee.debugOverlayTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE)}(v,`${R} ${S}kB`),k.draw(m,b.TRIANGLES,B,z,xr.alphaBlended,gi.disabled,co(M,g.Color.transparent,A),null,"$debug",v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),k.draw(m,b.LINE_STRIP,B,z,W,gi.disabled,co(M,g.Color.red),ae,"$debug",v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function gs(v,t,c){const m=v.context,b=m.gl,M=v.colorModeForRenderPass(),k=new yn(b.LEQUAL,yn.ReadWrite,v.depthRangeFor3D),B=v.useProgram("terrain"),z=t.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,v.width,v.height]);for(const W of c){const se=v.renderToTexture.getTexture(W),ae=t.getTerrainData(W.tileID);m.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,se.texture);const E={u_matrix:v.transform.calculatePosMatrix(W.tileID.toUnwrapped()),u_texture:0,u_ele_delta:t.getMeshFrameDelta(v.transform.zoom)};B.draw(m,b.TRIANGLES,k,er.disabled,M,gi.backCCW,E,ae,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}const ko={symbol:function(v,t,c,m,b){if("translucent"!==v.renderPass)return;const M=er.disabled,k=v.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(B,z,W,se,ae,E,S){const C=z.transform,A="map"===ae,R="map"===E;for(const ee of B){const fe=se.getTile(ee),oe=fe.getBucket(W);if(!oe||!oe.text||!oe.text.segments.get().length)continue;const Oe=g.evaluateSizeForZoom(oe.textSizeData,C.zoom),tt=yt(fe,1,z.transform.zoom),Et=ct(ee.posMatrix,R,A,z.transform,tt),vt="none"!==W.layout.get("icon-text-fit")&&oe.hasIconData();if(Oe){const Ut=Math.pow(2,C.zoom-fe.tileID.overscaledZ);Bt(oe,A,R,S,C,Et,ee.posMatrix,Ut,Oe,vt,z.style.map.terrain?($t,pn)=>z.style.map.terrain.getElevation(ee,$t,pn):null)}}}(m,v,c,t,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),b),0!==c.paint.get("icon-opacity").constantOr(1)&&wr(v,t,c,m,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),M,k),0!==c.paint.get("text-opacity").constantOr(1)&&wr(v,t,c,m,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),M,k),t.map.showCollisionBoxes&&(Q(v,t,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Q(v,t,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(v,t,c,m){if("translucent"!==v.renderPass)return;const b=c.paint.get("circle-opacity"),M=c.paint.get("circle-stroke-width"),k=c.paint.get("circle-stroke-opacity"),B=!c.layout.get("circle-sort-key").isConstant();if(0===b.constantOr(1)&&(0===M.constantOr(1)||0===k.constantOr(1)))return;const z=v.context,W=z.gl,se=v.depthModeForSublayer(0,yn.ReadOnly),ae=er.disabled,E=v.colorModeForRenderPass(),S=[];for(let C=0;C<m.length;C++){const A=m[C],R=t.getTile(A),ee=R.getBucket(c);if(!ee)continue;const fe=ee.programConfigurations.get(c.id),oe=v.useProgram("circle",fe),Oe=ee.layoutVertexBuffer,tt=ee.indexBuffer,Et=v.style.map.terrain&&v.style.map.terrain.getTerrainData(A),vt={programConfiguration:fe,program:oe,layoutVertexBuffer:Oe,indexBuffer:tt,uniformValues:fa(v,A,R,c),terrainData:Et};if(B){const Ut=ee.segments.get();for(const $t of Ut)S.push({segments:new g.SegmentVector([$t]),sortKey:$t.sortKey,state:vt})}else S.push({segments:ee.segments,sortKey:0,state:vt})}B&&S.sort((C,A)=>C.sortKey-A.sortKey);for(const C of S){const{programConfiguration:A,program:R,layoutVertexBuffer:ee,indexBuffer:fe,uniformValues:oe,terrainData:Oe}=C.state;R.draw(z,W.TRIANGLES,se,ae,E,gi.disabled,oe,Oe,c.id,ee,fe,C.segments,c.paint,v.transform.zoom,A)}},heatmap:function(v,t,c,m){if(0!==c.paint.get("heatmap-opacity"))if("offscreen"===v.renderPass){const b=v.context,M=b.gl,k=er.disabled,B=new xr([M.ONE,M.ONE],g.Color.transparent,[!0,!0,!0,!0]);(function(z,W,se){const ae=z.gl;z.activeTexture.set(ae.TEXTURE1),z.viewport.set([0,0,W.width/4,W.height/4]);let E=se.heatmapFbo;if(E)ae.bindTexture(ae.TEXTURE_2D,E.colorAttachment.get()),z.bindFramebuffer.set(E.framebuffer);else{const S=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,S),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),E=se.heatmapFbo=z.createFramebuffer(W.width/4,W.height/4,!1,!1),function(C,A,R,ee){var fe,oe;const Oe=C.gl,tt=null!==(fe=C.HALF_FLOAT)&&void 0!==fe?fe:Oe.UNSIGNED_BYTE,Et=null!==(oe=C.RGBA16F)&&void 0!==oe?oe:Oe.RGBA;Oe.texImage2D(Oe.TEXTURE_2D,0,Et,A.width/4,A.height/4,0,Oe.RGBA,tt,null),ee.colorAttachment.set(R)}(z,W,S,E)}})(b,v,c),b.clear({color:g.Color.transparent});for(let z=0;z<m.length;z++){const W=m[z];if(t.hasRenderableParent(W))continue;const se=t.getTile(W),ae=se.getBucket(c);if(!ae)continue;const E=ae.programConfigurations.get(c.id),S=v.useProgram("heatmap",E),{zoom:C}=v.transform;S.draw(b,M.TRIANGLES,yn.disabled,k,B,gi.disabled,Ol(W.posMatrix,se,C,c.paint.get("heatmap-intensity")),null,c.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,c.paint,v.transform.zoom,E)}b.viewport.set([0,0,v.width,v.height])}else"translucent"===v.renderPass&&(v.context.setColorMode(v.colorModeForRenderPass()),function(b,M){const k=b.context,B=k.gl,z=M.heatmapFbo;if(!z)return;k.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,z.colorAttachment.get()),k.activeTexture.set(B.TEXTURE1);let W=M.colorRampTexture;W||(W=M.colorRampTexture=new It(k,M.colorRamp,B.RGBA)),W.bind(B.LINEAR,B.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(k,B.TRIANGLES,yn.disabled,er.disabled,b.colorModeForRenderPass(),gi.disabled,((se,ae,E,S)=>{const C=g.create();g.ortho(C,0,se.width,se.height,0,0,1);const A=se.context.gl;return{u_matrix:C,u_world:[A.drawingBufferWidth,A.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}})(b,M),null,M.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,M.paint,b.transform.zoom)}(v,c))},line:function(v,t,c,m){if("translucent"!==v.renderPass)return;const b=c.paint.get("line-opacity"),M=c.paint.get("line-width");if(0===b.constantOr(1)||0===M.constantOr(1))return;const k=v.depthModeForSublayer(0,yn.ReadOnly),B=v.colorModeForRenderPass(),z=c.paint.get("line-dasharray"),W=c.paint.get("line-pattern"),se=W.constantOr(1),ae=c.paint.get("line-gradient"),E=c.getCrossfadeParameters(),S=se?"linePattern":z?"lineSDF":ae?"lineGradient":"line",C=v.context,A=C.gl;let R=!0;for(const ee of m){const fe=t.getTile(ee);if(se&&!fe.patternsLoaded())continue;const oe=fe.getBucket(c);if(!oe)continue;const Oe=oe.programConfigurations.get(c.id),tt=v.context.program.get(),Et=v.useProgram(S,Oe),vt=R||Et.program!==tt,Ut=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ee),$t=W.constantOr(null);if($t&&fe.imageAtlas){const Gn=fe.imageAtlas,Sn=Gn.patternPositions[$t.to.toString()],qn=Gn.patternPositions[$t.from.toString()];Sn&&qn&&Oe.setConstantPatternPositions(Sn,qn)}const pn=Ut?ee:null,zn=se?Cs(v,fe,c,E,pn):z?Co(v,fe,c,z,E,pn):ae?Ia(v,fe,c,oe.lineClipsArray.length,pn):Gs(v,fe,c,pn);if(se)C.activeTexture.set(A.TEXTURE0),fe.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Oe.updatePaintBuffers(E);else if(z&&(vt||v.lineAtlas.dirty))C.activeTexture.set(A.TEXTURE0),v.lineAtlas.bind(C);else if(ae){const Gn=oe.gradients[c.id];let Sn=Gn.texture;if(c.gradientVersion!==Gn.version){let qn=256;if(c.stepInterpolant){const In=t.getSource().maxzoom,Hi=ee.canonical.z===In?Math.ceil(1<<v.transform.maxZoom-ee.canonical.z):1;qn=g.clamp(g.nextPowerOfTwo(oe.maxLineLength/g.EXTENT*1024*Hi),256,C.maxTextureSize)}Gn.gradient=g.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:qn,image:Gn.gradient||void 0,clips:oe.lineClipsArray}),Gn.texture?Gn.texture.update(Gn.gradient):Gn.texture=new It(C,Gn.gradient,A.RGBA),Gn.version=c.gradientVersion,Sn=Gn.texture}C.activeTexture.set(A.TEXTURE0),Sn.bind(c.stepInterpolant?A.NEAREST:A.LINEAR,A.CLAMP_TO_EDGE)}Et.draw(C,A.TRIANGLES,k,v.stencilModeForClipping(ee),B,gi.disabled,zn,Ut,c.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,c.paint,v.transform.zoom,Oe,oe.layoutVertexBuffer2),R=!1}},fill:function(v,t,c,m){const b=c.paint.get("fill-color"),M=c.paint.get("fill-opacity");if(0===M.constantOr(1))return;const k=v.colorModeForRenderPass(),B=c.paint.get("fill-pattern"),z=v.opaquePassEnabledForLayer()&&!B.constantOr(1)&&1===b.constantOr(g.Color.transparent).a&&1===M.constantOr(0)?"opaque":"translucent";if(v.renderPass===z){const W=v.depthModeForSublayer(1,"opaque"===v.renderPass?yn.ReadWrite:yn.ReadOnly);qi(v,t,c,m,W,k,!1)}if("translucent"===v.renderPass&&c.paint.get("fill-antialias")){const W=v.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,yn.ReadOnly);qi(v,t,c,m,W,k,!0)}},"fill-extrusion":function(v,t,c,m){const b=c.paint.get("fill-extrusion-opacity");if(0!==b&&"translucent"===v.renderPass){const M=new yn(v.context.gl.LEQUAL,yn.ReadWrite,v.depthRangeFor3D);if(1!==b||c.paint.get("fill-extrusion-pattern").constantOr(1))jo(v,t,c,m,M,er.disabled,xr.disabled),jo(v,t,c,m,M,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const k=v.colorModeForRenderPass();jo(v,t,c,m,M,er.disabled,k)}}},hillshade:function(v,t,c,m){if("offscreen"!==v.renderPass&&"translucent"!==v.renderPass)return;const b=v.context,M=v.depthModeForSublayer(0,yn.ReadOnly),k=v.colorModeForRenderPass(),[B,z]="translucent"===v.renderPass?v.stencilConfigForOverlap(m):[{},m];for(const W of z){const se=t.getTile(W);void 0!==se.needsHillshadePrepare&&se.needsHillshadePrepare&&"offscreen"===v.renderPass?Xa(v,se,c,M,er.disabled,k):"translucent"===v.renderPass&&ka(v,W,se,c,M,B[W.overscaledZ],k)}b.viewport.set([0,0,v.width,v.height])},raster:function(v,t,c,m){if("translucent"!==v.renderPass||0===c.paint.get("raster-opacity")||!m.length)return;const b=v.context,M=b.gl,k=t.getSource(),B=v.useProgram("raster"),z=v.colorModeForRenderPass(),[W,se]=k instanceof Qt?[{},m]:v.stencilConfigForOverlap(m),ae=se[se.length-1].overscaledZ,E=!v.options.moving;for(const S of se){const C=v.depthModeForSublayer(S.overscaledZ-ae,1===c.paint.get("raster-opacity")?yn.ReadWrite:yn.ReadOnly,M.LESS),A=t.getTile(S);A.registerFadeDuration(c.paint.get("raster-fade-duration"));const R=t.findLoadedParent(S,0),ee=As(A,R,t,c,v.transform,v.style.map.terrain);let fe,oe;const Oe="nearest"===c.paint.get("raster-resampling")?M.NEAREST:M.LINEAR;b.activeTexture.set(M.TEXTURE0),A.texture.bind(Oe,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(M.TEXTURE1),R?(R.texture.bind(Oe,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),fe=Math.pow(2,R.tileID.overscaledZ-A.tileID.overscaledZ),oe=[A.tileID.canonical.x*fe%1,A.tileID.canonical.y*fe%1]):A.texture.bind(Oe,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST);const tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(S),Et=tt?S:null,vt=Et?Et.posMatrix:v.transform.calculatePosMatrix(S.toUnwrapped(),E),Ut=Aa(vt,oe||[0,0],fe||1,ee,c);k instanceof Qt?B.draw(b,M.TRIANGLES,C,er.disabled,z,gi.disabled,Ut,tt,c.id,k.boundsBuffer,v.quadTriangleIndexBuffer,k.boundsSegments):B.draw(b,M.TRIANGLES,C,W[S.overscaledZ],z,gi.disabled,Ut,tt,c.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}},background:function(v,t,c,m){const b=c.paint.get("background-color"),M=c.paint.get("background-opacity");if(0===M)return;const k=v.context,B=k.gl,z=v.transform,W=z.tileSize,se=c.paint.get("background-pattern");if(v.isPatternMissing(se))return;const ae=!se&&1===b.a&&1===M&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==ae)return;const E=er.disabled,S=v.depthModeForSublayer(0,"opaque"===ae?yn.ReadWrite:yn.ReadOnly),C=v.colorModeForRenderPass(),A=v.useProgram(se?"backgroundPattern":"background"),R=m||z.coveringTiles({tileSize:W,terrain:v.style.map.terrain});se&&(k.activeTexture.set(B.TEXTURE0),v.imageManager.bind(v.context));const ee=c.getCrossfadeParameters();for(const fe of R){const oe=m?fe.posMatrix:v.transform.calculatePosMatrix(fe.toUnwrapped()),Oe=se?Ds(oe,M,v,se,{tileID:fe,tileSize:W},ee):Ws(oe,M,b),tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(fe);A.draw(k,B.TRIANGLES,S,E,C,gi.disabled,Oe,tt,c.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}},debug:function(v,t,c){for(let m=0;m<c.length;m++)Cr(v,t,c[m])},custom:function(v,t,c){const m=v.context,b=c.implementation;if("offscreen"===v.renderPass){const M=b.prerender;M&&(v.setCustomLayerDefaults(),m.setColorMode(v.colorModeForRenderPass()),M.call(b,m.gl,v.transform.customLayerMatrix()),m.setDirty(),v.setBaseState())}else if("translucent"===v.renderPass){v.setCustomLayerDefaults(),m.setColorMode(v.colorModeForRenderPass()),m.setStencilMode(er.disabled);const M="3d"===b.renderingMode?new yn(v.context.gl.LEQUAL,yn.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,yn.ReadOnly);m.setDepthMode(M),b.render(m.gl,v.transform.customLayerMatrix()),m.setDirty(),v.setBaseState(),m.bindFramebuffer.set(null)}}};class vl{constructor(t,c){this.context=new Wt(t),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:g.create(),renderTime:0},this.setup(),this.numSublayers=Xe.maxUnderzooming+Xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Er}resize(t,c,m){if(this.width=t*m,this.height=c*m,this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const t=this.context,c=new g.PosArray;c.emplaceBack(0,0),c.emplaceBack(g.EXTENT,0),c.emplaceBack(0,g.EXTENT),c.emplaceBack(g.EXTENT,g.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(c,Gr.members),this.tileExtentSegments=g.SegmentVector.simpleSegment(0,0,4,2);const m=new g.PosArray;m.emplaceBack(0,0),m.emplaceBack(g.EXTENT,0),m.emplaceBack(0,g.EXTENT),m.emplaceBack(g.EXTENT,g.EXTENT),this.debugBuffer=t.createVertexBuffer(m,Gr.members),this.debugSegments=g.SegmentVector.simpleSegment(0,0,4,5);const b=new g.RasterBoundsArray;b.emplaceBack(0,0,0,0),b.emplaceBack(g.EXTENT,0,g.EXTENT,0),b.emplaceBack(0,g.EXTENT,0,g.EXTENT),b.emplaceBack(g.EXTENT,g.EXTENT,g.EXTENT,g.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(b,Kt.members),this.rasterBoundsSegments=g.SegmentVector.simpleSegment(0,0,4,2);const M=new g.PosArray;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(M,Gr.members),this.viewportSegments=g.SegmentVector.simpleSegment(0,0,4,2);const k=new g.LineStripIndexArray;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(k);const B=new g.TriangleIndexArray;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(B);const z=this.context.gl;this.stencilClearMode=new er({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const t=this.context,c=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=g.create();g.ortho(m,0,this.width,this.height,0,0,1),g.scale(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,c.TRIANGLES,yn.disabled,this.stencilClearMode,xr.disabled,gi.disabled,Pl(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,c){if(this.currentStencilSource===t.source||!t.isTileClipped()||!c||!c.length)return;this.currentStencilSource=t.source;const m=this.context,b=m.gl;this.nextStencilID+c.length>256&&this.clearStencil(),m.setColorMode(xr.disabled),m.setDepthMode(yn.disabled);const M=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of c){const B=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k);M.draw(m,b.TRIANGLES,yn.disabled,new er({func:b.ALWAYS,mask:0},B,255,b.KEEP,b.KEEP,b.REPLACE),xr.disabled,gi.disabled,Pl(k.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,c=this.context.gl;return new er({func:c.NOTEQUAL,mask:255},t,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(t){const c=this.context.gl;return new er({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(t){const c=this.context.gl,m=t.sort((k,B)=>B.overscaledZ-k.overscaledZ),b=m[m.length-1].overscaledZ,M=m[0].overscaledZ-b+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const k={};for(let B=0;B<M;B++)k[B+b]=new er({func:c.GEQUAL,mask:255},B+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=M,[k,m]}return[{[b]:er.disabled},m]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new xr([t.CONSTANT_COLOR,t.ONE],new g.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?xr.unblended:xr.alphaBlended}depthModeForSublayer(t,c,m){if(!this.opaquePassEnabledForLayer())return yn.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new yn(m||this.context.gl.LEQUAL,c,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,c){this.style=t,this.options=c,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(g.exported.now()),this.imageManager.beginFrame();const m=this.style._order,b=this.style.sourceCaches,M={},k={},B={};for(const z in b){const W=b[z];W.used&&W.prepare(this.context),M[z]=W.getVisibleCoordinates(),k[z]=M[z].slice().reverse(),B[z]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<m.length;z++)if(this.style._layers[m[z]].is3D()){this.opaquePassCutoff=z;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const z=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!g.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||z.length)&&(g.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(W,se){const ae=W.context,E=ae.gl,S=xr.unblended,C=new yn(E.LEQUAL,yn.ReadWrite,[0,1]),A=se.getTerrainMesh(),R=se.sourceCache.getRenderableTiles(),ee=W.useProgram("terrainDepth");ae.bindFramebuffer.set(se.getFramebuffer("depth").framebuffer),ae.viewport.set([0,0,W.width/devicePixelRatio,W.height/devicePixelRatio]),ae.clear({color:g.Color.transparent,depth:1});for(const fe of R){const oe=se.getTerrainData(fe.tileID),Oe={u_matrix:W.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_ele_delta:se.getMeshFrameDelta(W.transform.zoom)};ee.draw(ae,E.TRIANGLES,C,er.disabled,S,gi.backCCW,Oe,oe,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}ae.bindFramebuffer.set(null),ae.viewport.set([0,0,W.width,W.height])}(this,this.style.map.terrain),function(W,se){const ae=W.context,E=ae.gl,S=xr.unblended,C=new yn(E.LEQUAL,yn.ReadWrite,[0,1]),A=se.getTerrainMesh(),R=se.getCoordsTexture(),ee=se.sourceCache.getRenderableTiles(),fe=W.useProgram("terrainCoords");ae.bindFramebuffer.set(se.getFramebuffer("coords").framebuffer),ae.viewport.set([0,0,W.width/devicePixelRatio,W.height/devicePixelRatio]),ae.clear({color:g.Color.transparent,depth:1}),se.coordsIndex=[];for(const oe of ee){const Oe=se.getTerrainData(oe.tileID);ae.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,R.texture);const tt={u_matrix:W.transform.calculatePosMatrix(oe.tileID.toUnwrapped()),u_terrain_coords_id:(255-se.coordsIndex.length)/255,u_texture:0,u_ele_delta:se.getMeshFrameDelta(W.transform.zoom)};fe.draw(ae,E.TRIANGLES,C,er.disabled,S,gi.backCCW,tt,Oe,"terrain",A.vertexBuffer,A.indexBuffer,A.segments),se.coordsIndex.push(oe.tileID.key)}ae.bindFramebuffer.set(null),ae.viewport.set([0,0,W.width,W.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const z of m){const W=this.style._layers[z];if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const se=k[W.source];("custom"===W.type||se.length)&&this.renderLayer(this,b[W.source],W,se)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?g.Color.black:g.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[m[this.currentLayer]],W=b[z.source],se=M[z.source];this._renderTileClippingMasks(z,se),this.renderLayer(this,W,z,se)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const z=this.style._layers[m[this.currentLayer]],W=b[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const se=("symbol"===z.type?B:k)[z.source];this._renderTileClippingMasks(z,M[z.source]),this.renderLayer(this,W,z,se)}if(this.options.showTileBoundaries){const z=function(W,se){let ae=null;const E=Object.values(W._layers).flatMap(R=>R.source&&!R.isHidden(se)?[W.sourceCaches[R.source]]:[]),S=E.filter(R=>"vector"===R.getSource().type),C=E.filter(R=>"vector"!==R.getSource().type),A=R=>{(!ae||ae.getSource().maxzoom<R.getSource().maxzoom)&&(ae=R)};return S.forEach(R=>A(R)),ae||C.forEach(R=>A(R)),ae}(this.style,this.transform.zoom);z&&ko.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const W=z.transform.padding;Js(z,z.transform.height-(W.top||0),3,Rl),Js(z,W.bottom||0,3,Ll),Ja(z,W.left||0,3,Sc),Ja(z,z.transform.width-(W.right||0),3,Tc);const se=z.transform.centerPoint;var ae,E,S,C;Qs(ae=z,(E=se.x)-1,(S=z.transform.height-se.y)-10,2,20,C=ga),Qs(ae,E-10,S-1,20,2,C)}(this),this.context.setDefault()}renderLayer(t,c,m,b){m.isHidden(this.transform.zoom)||("background"===m.type||"custom"===m.type||(b||[]).length)&&(this.id=m.id,ko[m.type](t,c,m,b,this.style.placement.variableOffsets))}translatePosMatrix(t,c,m,b,M){if(!m[0]&&!m[1])return t;const k=M?"map"===b?this.transform.angle:0:"viewport"===b?-this.transform.angle:0;if(k){const W=Math.sin(k),se=Math.cos(k);m=[m[0]*se-m[1]*W,m[0]*W+m[1]*se]}const B=[M?m[0]:yt(c,m[0],this.transform.zoom),M?m[1]:yt(c,m[1],this.transform.zoom),0],z=new Float32Array(16);return g.translate(z,t,B),z}saveTileTexture(t){const c=this._tileTextures[t.size[0]];c?c.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const c=this._tileTextures[t];return c&&c.length>0?c.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const c=this.imageManager.getPattern(t.from.toString()),m=this.imageManager.getPattern(t.to.toString());return!c||!m}useProgram(t,c){this.cache=this.cache||{};const m=t+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new br(this.context,t,Ii[t],c,Ms[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new It(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Ra{constructor(t,c){this.points=t,this.planes=c}static fromInvProjectionMatrix(t,c,m){const b=Math.pow(2,m),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(B=>{const z=1/(B=g.transformMat4([],B,t))[3]/c*b;return g.mul$1(B,B,[z,z,1/B[3],z])}),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(B=>{const z=function(E,S){var C=S[0],A=S[1],R=S[2],ee=C*C+A*A+R*R;return ee>0&&(ee=1/Math.sqrt(ee)),E[0]=S[0]*ee,E[1]=S[1]*ee,E[2]=S[2]*ee,E}([],(E=[],S=Zt([],M[B[0]],M[B[1]]),C=Zt([],M[B[2]],M[B[1]]),A=S[0],fe=C[0],E[0]=(R=S[1])*(Oe=C[2])-(ee=S[2])*(oe=C[1]),E[1]=ee*fe-A*Oe,E[2]=A*oe-R*fe,E)),W=-((se=z)[0]*(ae=M[B[1]])[0]+se[1]*ae[1]+se[2]*ae[2]);var E,S,C,A,R,ee,fe,oe,Oe,se,ae;return z.concat(W)});return new Ra(M,k)}}class Sr{constructor(t,c){var m,b,M;this.min=t,this.max=c,this.center=function(m,b,M){return m[0]=.5*b[0],m[1]=.5*b[1],m[2]=.5*b[2],m}([],((m=[])[0]=(b=this.min)[0]+(M=this.max)[0],m[1]=b[1]+M[1],m[2]=b[2]+M[2],m))}quadrant(t){const c=[t%2==0,t<2],m=wt(this.min),b=wt(this.max);for(let M=0;M<c.length;M++)m[M]=c[M]?this.min[M]:this.center[M],b[M]=c[M]?this.center[M]:this.max[M];return b[2]=this.max[2],new Sr(m,b)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let b=0;b<t.planes.length;b++){const M=t.planes[b];let k=0;for(let B=0;B<c.length;B++)g.dot(M,c[B])>=0&&k++;if(0===k)return 0;k!==c.length&&(m=!1)}if(m)return 2;for(let b=0;b<3;b++){let M=Number.MAX_VALUE,k=-Number.MAX_VALUE;for(let B=0;B<t.points.length;B++){const z=t.points[B][b]-this.min[b];M=Math.min(M,z),k=Math.max(k,z)}if(k<0||M>this.max[b]-this.min[b])return 0}return 1}}class H{constructor(t=0,c=0,m=0,b=0){if(isNaN(t)||t<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=c,this.left=m,this.right=b}interpolate(t,c,m){return null!=c.top&&null!=t.top&&(this.top=g.interpolate.number(t.top,c.top,m)),null!=c.bottom&&null!=t.bottom&&(this.bottom=g.interpolate.number(t.bottom,c.bottom,m)),null!=c.left&&null!=t.left&&(this.left=g.interpolate.number(t.left,c.left,m)),null!=c.right&&null!=t.right&&(this.right=g.interpolate.number(t.right,c.right,m)),this}getCenter(t,c){const m=g.clamp((this.left+t-this.right)/2,0,t),b=g.clamp((this.top+c-this.bottom)/2,0,c);return new g.Point(m,b)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new H(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ue{constructor(t,c,m,b,M){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===M||!!M,this._minZoom=t||0,this._maxZoom=c||22,this._minPitch=m??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new g.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new H,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new ue(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new g.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const c=-g.wrap(t,-180,180)*Math.PI/180;var m;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(m=new g.ARRAY_TYPE(4),g.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(m,b,M){var k=b[0],B=b[1],z=b[2],W=b[3],se=Math.sin(M),ae=Math.cos(M);m[0]=k*ae+z*se,m[1]=B*ae+W*se,m[2]=k*-se+z*ae,m[3]=B*-se+W*ae}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const c=g.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const c=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,c,m){this._unmodified=!1,this._edgeInsets.interpolate(t,c,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const c=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(t){const c=[new g.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const m=this.pointCoordinate(new g.Point(0,0)),b=this.pointCoordinate(new g.Point(this.width,0)),M=this.pointCoordinate(new g.Point(this.width,this.height)),k=this.pointCoordinate(new g.Point(0,this.height)),B=Math.floor(Math.min(m.x,b.x,M.x,k.x)),z=Math.floor(Math.max(m.x,b.x,M.x,k.x)),W=1;for(let se=B-W;se<=z+W;se++)0!==se&&c.push(new g.UnwrappedTileID(se,t))}return c}coveringTiles(t){var c,m;let b=this.coveringZoomLevel(t);const M=b;if(void 0!==t.minzoom&&b<t.minzoom)return[];void 0!==t.maxzoom&&b>t.maxzoom&&(b=t.maxzoom);const k=this.pointCoordinate(this.getCameraPoint()),B=g.MercatorCoordinate.fromLngLat(this.center),z=Math.pow(2,b),W=[z*k.x,z*k.y,0],se=[z*B.x,z*B.y,0],ae=Ra.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b);let E=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(E=b);const S=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,C=oe=>({aabb:new Sr([oe*z,0,0],[(oe+1)*z,z,0]),zoom:0,x:0,y:0,wrap:oe,fullyVisible:!1}),A=[],R=[],ee=b,fe=t.reparseOverscaled?M:b;if(this._renderWorldCopies)for(let oe=1;oe<=3;oe++)A.push(C(-oe)),A.push(C(oe));for(A.push(C(0));A.length>0;){const oe=A.pop(),Oe=oe.x,tt=oe.y;let Et=oe.fullyVisible;if(!Et){const zn=oe.aabb.intersects(ae);if(0===zn)continue;Et=2===zn}const vt=t.terrain?W:se,Ut=oe.aabb.distanceX(vt),$t=oe.aabb.distanceY(vt),pn=Math.max(Math.abs(Ut),Math.abs($t));if(oe.zoom===ee||pn>S+(1<<ee-oe.zoom)-2&&oe.zoom>=E){const zn=ee-oe.zoom,Gn=W[0]-.5-(Oe<<zn),Sn=W[1]-.5-(tt<<zn);R.push({tileID:new g.OverscaledTileID(oe.zoom===ee?fe:oe.zoom,oe.wrap,oe.zoom,Oe,tt),distanceSq:bt([se[0]-.5-Oe,se[1]-.5-tt]),tileDistanceToCamera:Math.sqrt(Gn*Gn+Sn*Sn)})}else for(let zn=0;zn<4;zn++){const Gn=(Oe<<1)+zn%2,Sn=(tt<<1)+(zn>>1),qn=oe.zoom+1;let In=oe.aabb.quadrant(zn);if(t.terrain){const Hi=new g.OverscaledTileID(qn,oe.wrap,qn,Gn,Sn),Kr=t.terrain.getMinMaxElevation(Hi),Oi=null!==(c=Kr.minElevation)&&void 0!==c?c:this.elevation,xi=null!==(m=Kr.maxElevation)&&void 0!==m?m:this.elevation;In=new Sr([In.min[0],In.min[1],Oi],[In.max[0],In.max[1],xi])}A.push({aabb:In,zoom:qn,x:Gn,y:Sn,wrap:oe.wrap,fullyVisible:Et})}}return R.sort((oe,Oe)=>oe.distanceSq-Oe.distanceSq).map(oe=>oe.tileID)}resize(t,c){this.width=t,this.height=c,this.pixelsToGLUnits=[2/t,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const c=g.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new g.Point(g.mercatorXfromLng(t.lng)*this.worldSize,g.mercatorYfromLat(c)*this.worldSize)}unproject(t){return new g.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(t){this.freezeElevation||(this.elevation=t?this.getElevation(this._center,t):0)}getElevation(t,c){const m=g.MercatorCoordinate.fromLngLat(t.wrap()),b=(1<<this.tileZoom)*g.EXTENT,M=m.x*b,k=m.y*b,B=Math.floor(M/g.EXTENT),z=Math.floor(k/g.EXTENT),W=new g.OverscaledTileID(this.tileZoom,0,this.tileZoom,B,z);return c.getElevation(W,M%g.EXTENT,k%g.EXTENT,g.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const c=this.pointLocation(this.centerPoint,t),m=this.getElevation(c,t);if(!(this.elevation-m))return;const b=this.getCameraPosition(),M=g.MercatorCoordinate.fromLngLat(b.lngLat,b.altitude),k=g.MercatorCoordinate.fromLngLat(c,m),B=M.x-k.x,z=M.y-k.y,W=M.z-k.z,se=Math.sqrt(B*B+z*z+W*W),ae=this.scaleZoom(this.cameraToCenterDistance/se/this.tileSize);this._elevation=m,this._center=c,this.zoom=ae}setLocationAtPoint(t,c){const m=this.pointCoordinate(c),b=this.pointCoordinate(this.centerPoint),M=this.locationCoordinate(t),k=new g.MercatorCoordinate(M.x-(m.x-b.x),M.y-(m.y-b.y));this.center=this.coordinateLocation(k),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,c){return c?this.coordinatePoint(this.locationCoordinate(t),this.getElevation(t,c),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,c){return this.coordinateLocation(this.pointCoordinate(t,c))}locationCoordinate(t){return g.MercatorCoordinate.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,c){if(c){const E=c.pointCoordinate(t);if(null!=E)return E}const m=[t.x,t.y,0,1],b=[t.x,t.y,1,1];g.transformMat4(m,m,this.pixelMatrixInverse),g.transformMat4(b,b,this.pixelMatrixInverse);const M=m[3],k=b[3],B=m[1]/M,z=b[1]/k,W=m[2]/M,se=b[2]/k,ae=W===se?0:(0-W)/(se-W);return new g.MercatorCoordinate(g.interpolate.number(m[0]/M,b[0]/k,ae)/this.worldSize,g.interpolate.number(B,z,ae)/this.worldSize)}coordinatePoint(t,c=0,m=this.pixelMatrix){const b=[t.x*this.worldSize,t.y*this.worldSize,c,1];return g.transformMat4(b,b,m),new g.Point(b[0]/b[3],b[1]/b[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return(new Xn).extend(this.pointLocation(new g.Point(0,t))).extend(this.pointLocation(new g.Point(this.width,t))).extend(this.pointLocation(new g.Point(this.width,this.height))).extend(this.pointLocation(new g.Point(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Xn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,c=!1){const m=t.key,b=c?this._alignedPosMatrixCache:this._posMatrixCache;if(b[m])return b[m];const M=t.canonical,k=this.worldSize/this.zoomScale(M.z),B=M.x+Math.pow(2,M.z)*t.wrap,z=g.identity(new Float64Array(16));return g.translate(z,z,[B*k,M.y*k,0]),g.scale(z,z,[k/g.EXTENT,k/g.EXTENT,1]),g.multiply(z,c?this.alignedProjMatrix:this.projMatrix,z),b[m]=new Float32Array(z),b[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,c,m,b,M=-90,k=90,B=-180,z=180;const W=this.size,se=this._unmodified;if(this.latRange){const S=this.latRange;M=g.mercatorYfromLat(S[1])*this.worldSize,k=g.mercatorYfromLat(S[0])*this.worldSize,t=k-M<W.y?W.y/(k-M):0}if(this.lngRange){const S=this.lngRange;B=g.wrap(g.mercatorXfromLng(S[0])*this.worldSize,0,this.worldSize),z=g.wrap(g.mercatorXfromLng(S[1])*this.worldSize,0,this.worldSize),z<B&&(z+=this.worldSize),c=z-B<W.x?W.x/(z-B):0}const ae=this.point,E=Math.max(c||0,t||0);if(E)return this.center=this.unproject(new g.Point(c?(z+B)/2:ae.x,t?(k+M)/2:ae.y)),this.zoom+=this.scaleZoom(E),this._unmodified=se,void(this._constraining=!1);if(this.latRange){const S=ae.y,C=W.y/2;S-C<M&&(b=M+C),S+C>k&&(b=k-C)}if(this.lngRange){const S=(B+z)/2,C=g.wrap(ae.x,S-this.worldSize/2,S+this.worldSize/2),A=W.x/2;C-A<B&&(m=B+A),C+A>z&&(m=z-A)}void 0===m&&void 0===b||(this.center=this.unproject(new g.Point(void 0!==m?m:ae.x,void 0!==b?b:ae.y)).wrap()),this._unmodified=se,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,c=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=g.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let b=g.identity(new Float64Array(16));g.scale(b,b,[this.width/2,-this.height/2,1]),g.translate(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=g.identity(new Float64Array(16)),g.scale(b,b,[1,-1,1]),g.translate(b,b,[-1,-1,0]),g.scale(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const M=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,k=Math.PI/2+this._pitch,B=this._fov*(.5+t.y/this.height),z=Math.sin(B)*M/Math.sin(g.clamp(Math.PI-k-B,.01,Math.PI-.01)),W=this.getHorizon(),se=2*Math.atan(W/this.cameraToCenterDistance)*(.5+t.y/(2*W)),ae=Math.sin(se)*M/Math.sin(g.clamp(Math.PI-k-se,.01,Math.PI-.01)),E=Math.min(z,ae),S=1.01*(Math.cos(Math.PI/2-this._pitch)*E+M),C=this.height/50;b=new Float64Array(16),g.perspective(b,this._fov,this.width/this.height,C,S),b[8]=2*-t.x/this.width,b[9]=2*t.y/this.height,g.scale(b,b,[1,-1,1]),g.translate(b,b,[0,0,-this.cameraToCenterDistance]),g.rotateX(b,b,this._pitch),g.rotateZ(b,b,this.angle),g.translate(b,b,[-c,-m,0]),this.mercatorMatrix=g.scale([],b,[this.worldSize,this.worldSize,this.worldSize]),g.scale(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=g.multiply(new Float64Array(16),this.labelPlaneMatrix,b),g.translate(b,b,[0,0,-this.elevation]),this.projMatrix=b,this.invProjMatrix=g.invert([],b),this.pixelMatrix3D=g.multiply(new Float64Array(16),this.labelPlaneMatrix,b);const A=this.width%2/2,R=this.height%2/2,ee=Math.cos(this.angle),fe=Math.sin(this.angle),oe=c-Math.round(c)+ee*A+fe*R,Oe=m-Math.round(m)+ee*R+fe*A,tt=new Float64Array(b);if(g.translate(tt,tt,[oe>.5?oe-1:oe,Oe>.5?Oe-1:Oe,0]),this.alignedProjMatrix=tt,b=g.invert(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new g.Point(0,0)),c=[t.x*this.worldSize,t.y*this.worldSize,0,1];return g.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new g.Point(0,t))}getCameraQueryGeometry(t){const c=this.getCameraPoint();if(1===t.length)return[t[0],c];{let m=c.x,b=c.y,M=c.x,k=c.y;for(const B of t)m=Math.min(m,B.x),b=Math.min(b,B.y),M=Math.max(M,B.x),k=Math.max(k,B.y);return[new g.Point(m,b),new g.Point(M,b),new g.Point(M,k),new g.Point(m,k),new g.Point(m,b)]}}}class K{constructor(t){this._hashName=t&&encodeURIComponent(t),g.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(c,m){let b=!1,M=null;const k=()=>{M=null,b&&(c(),M=setTimeout(k,300),b=!1)};return()=>(b=!0,M||k(),M)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,b=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,b),k=Math.round(c.lng*M)/M,B=Math.round(c.lat*M)/M,z=this._map.getBearing(),W=this._map.getPitch();let se="";if(se+=t?`/${k}/${B}/${m}`:`${m}/${B}/${k}`,(z||W)&&(se+="/"+Math.round(10*z)/10),W&&(se+=`/${Math.round(W)}`),this._hashName){const ae=this._hashName;let E=!1;const S=window.location.hash.slice(1).split("&").map(C=>{const A=C.split("=")[0];return A===ae?(E=!0,`${A}=${se}`):C}).filter(C=>C);return E||S.push(`${ae}=${se}`),`#${S.join("&")}`}return`#${se}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let c;return t.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(c=m)}),(c&&c[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:c,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch{}}}const we={linearity:.3,easing:g.bezier(0,0,.3,1)},Ye=g.extend({deceleration:2500,maxSpeed:1400},we),Ct=g.extend({deceleration:20,maxSpeed:1400},we),zt=g.extend({deceleration:1e3,maxSpeed:360},we),kn=g.extend({deceleration:1e3,maxSpeed:90},we);class Ni{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:g.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,c=g.exported.now();for(;t.length>0&&c-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new g.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)c.zoom+=M.zoomDelta||0,c.bearing+=M.bearingDelta||0,c.pitch+=M.pitchDelta||0,M.panDelta&&c.pan._add(M.panDelta),M.around&&(c.around=M.around),M.pinchAround&&(c.pinchAround=M.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(c.pan.mag()){const M=vi(c.pan.mag(),m,g.extend({},Ye,t||{}));b.offset=c.pan.mult(M.amount/c.pan.mag()),b.center=this._map.transform.center,ni(b,M)}if(c.zoom){const M=vi(c.zoom,m,Ct);b.zoom=this._map.transform.zoom+M.amount,ni(b,M)}if(c.bearing){const M=vi(c.bearing,m,zt);b.bearing=this._map.transform.bearing+g.clamp(M.amount,-179,179),ni(b,M)}if(c.pitch){const M=vi(c.pitch,m,kn);b.pitch=this._map.transform.pitch+M.amount,ni(b,M)}if(b.zoom||b.bearing){const M=void 0===c.pinchAround?c.around:c.pinchAround;b.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),g.extend(b,{noMoveStart:!0})}}function ni(v,t){(!v.duration||v.duration<t.duration)&&(v.duration=t.duration,v.easing=t.easing)}function vi(v,t,c){const{maxSpeed:m,linearity:b,deceleration:M}=c,k=g.clamp(v*b/(t/1e3),-m,m),B=Math.abs(k)/(M*b);return{easing:c.easing,duration:1e3*B,amount:k*(B/2)}}class $n extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,c,m,b={}){const M=_e.mousePos(c.getCanvasContainer(),m),k=c.unproject(M);super(t,g.extend({point:M,lngLat:k,originalEvent:m},b)),this._defaultPrevented=!1,this.target=c}}class tr extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,c,m){const b="touchend"===t?m.changedTouches:m.touches,M=_e.touchPos(c.getCanvasContainer(),b),k=M.map(z=>c.unproject(z)),B=M.reduce((z,W,se,ae)=>z.add(W.div(ae.length)),new g.Point(0,0));super(t,{points:M,point:B,lngLats:k,lngLat:c.unproject(B),originalEvent:m}),this._defaultPrevented=!1}}class Di extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,c,m){super(t,{originalEvent:m}),this._defaultPrevented=!1}}class bi{constructor(t,c){this._map=t,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Di(t.type,this._map,t))}mousedown(t,c){return this._mousedownPos=c,this._firePreventable(new $n(t.type,this._map,t))}mouseup(t){this._map.fire(new $n(t.type,this._map,t))}click(t,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new $n(t.type,this._map,t))}dblclick(t){return this._firePreventable(new $n(t.type,this._map,t))}mouseover(t){this._map.fire(new $n(t.type,this._map,t))}mouseout(t){this._map.fire(new $n(t.type,this._map,t))}touchstart(t){return this._firePreventable(new tr(t.type,this._map,t))}touchmove(t){this._map.fire(new tr(t.type,this._map,t))}touchend(t){this._map.fire(new tr(t.type,this._map,t))}touchcancel(t){this._map.fire(new tr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new $n(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $n("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new $n(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wr{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(g.Point.convert(t),this._map.terrain)}}class Ki{constructor(t,c){this._map=t,this._tr=new Wr(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,c){this.isEnabled()&&t.shiftKey&&0===t.button&&(_e.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(t,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=m,this._box||(this._box=_e.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const M=Math.min(b.x,m.x),k=Math.max(b.x,m.x),B=Math.min(b.y,m.y),z=Math.max(b.y,m.y);_e.setTransform(this._box,`translate(${M}px,${B}px)`),this._box.style.width=k-M+"px",this._box.style.height=z-B+"px"}mouseupWindow(t,c){if(!this._active||0!==t.button)return;const m=this._startPos,b=c;if(this.reset(),_e.suppressClick(),m.x!==b.x||m.y!==b.y)return this._map.fire(new g.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:M=>M.fitScreenCoordinates(m,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_e.remove(this._box),this._box=null),_e.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,c){return this._map.fire(new g.Event(t,{originalEvent:c}))}}function Tr(v,t){if(v.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${t.length}`);const c={};for(let m=0;m<v.length;m++)c[v[m].identifier]=t[m];return c}class Ho{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),m.length===this.numTouches&&(this.centroid=function(b){const M=new g.Point(0,0);for(const k of b)M._add(k);return M.div(b.length)}(c),this.touches=Tr(m,c)))}touchmove(t,c,m){if(this.aborted||!this.centroid)return;const b=Tr(m,c);for(const M in this.touches){const k=b[M];(!k||k.dist(this.touches[M])>30)&&(this.aborted=!0)}}touchend(t,c,m){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===m.length){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Ir{constructor(t){this.singleTap=new Ho(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,c,m){this.singleTap.touchstart(t,c,m)}touchmove(t,c,m){this.singleTap.touchmove(t,c,m)}touchend(t,c,m){const b=this.singleTap.touchend(t,c,m);if(b){const M=t.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(b)<30;if(M&&k||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class $o{constructor(t){this._tr=new Wr(t),this._zoomIn=new Ir({numTouches:1,numTaps:2}),this._zoomOut=new Ir({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,c,m){this._zoomIn.touchstart(t,c,m),this._zoomOut.touchstart(t,c,m)}touchmove(t,c,m){this._zoomIn.touchmove(t,c,m),this._zoomOut.touchmove(t,c,m)}touchend(t,c,m){const b=this._zoomIn.touchend(t,c,m),M=this._zoomOut.touchend(t,c,m),k=this._tr;return b?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:k.zoom+1,around:k.unproject(b)},{originalEvent:t})}):M?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:k.zoom-1,around:k.unproject(M)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ar{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const c=this._moveFunction(...t);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(t,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,c){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const b=c.length?c[0]:c;return!this._moved&&b.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(m,b))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&_e.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const La={0:1,2:2};class bl{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const c=_e.mouseButton(t);this._eventButton=c}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(c,m){const b=La[m];return void 0===c.buttons||(c.buttons&b)!==b}(t,this._eventButton)}isValidEndEvent(t){return _e.mouseButton(t)===this._eventButton}}class Ic{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return 1===t.targetTouches.length}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}const Qa=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(t){t.preventDefault()}},_a=({enable:v,clickTolerance:t,bearingDegreesPerPixelMoved:c=.8})=>{const m=new bl({checkCorrectEvent:b=>0===_e.mouseButton(b)&&b.ctrlKey||2===_e.mouseButton(b)});return new Ar({clickTolerance:t,move:(b,M)=>({bearingDelta:(M.x-b.x)*c}),moveStateManager:m,enable:v,assignEvents:Qa})},Tn=({enable:v,clickTolerance:t,pitchDegreesPerPixelMoved:c=-.5})=>{const m=new bl({checkCorrectEvent:b=>0===_e.mouseButton(b)&&b.ctrlKey||2===_e.mouseButton(b)});return new Ar({clickTolerance:t,move:(b,M)=>({pitchDelta:(M.y-b.y)*c}),moveStateManager:m,enable:v,assignEvents:Qa})};class nc{constructor(t,c){this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new g.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(t,c,m){return this._calculateTransform(t,c,m)}touchmove(t,c,m){if(this._map._cooperativeGestures&&(2===this._minTouches&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,c,m)}touchend(t,c,m){this._calculateTransform(t,c,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,c,m){m.length>0&&(this._active=!0);const b=Tr(m,c),M=new g.Point(0,0),k=new g.Point(0,0);let B=0;for(const W in b){const se=b[W],ae=this._touches[W];ae&&(M._add(se),k._add(se.sub(ae)),B++,b[W]=se)}if(this._touches=b,B<this._minTouches||!k.mag())return;const z=k.div(B);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(B),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,c,m){return{}}touchstart(t,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(t,c,m){if(!this._firstTwoTouches)return;t.preventDefault();const[b,M]=this._firstTwoTouches,k=ya(m,c,b),B=ya(m,c,M);if(!k||!B)return;const z=this._aroundCenter?null:k.add(B).div(2);return this._move([k,B],z,t)}touchend(t,c,m){if(!this._firstTwoTouches)return;const[b,M]=this._firstTwoTouches,k=ya(m,c,b),B=ya(m,c,M);k&&B||(this._active&&_e.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ya(v,t,c){for(let m=0;m<v.length;m++)if(v[m].identifier===c)return t[m]}function Ps(v,t){return Math.log(v/t)/Math.LN2}class bn extends Fa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,c){const m=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ps(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ps(this._distance,m),pinchAround:c}}}function xl(v,t){return 180*v.angleWith(t)/Math.PI}class _s extends Fa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,c){const m=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:xl(this._vector,m),pinchAround:c}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const c=25/(Math.PI*this._minDiameter)*360,m=xl(t,this._startVector);return Math.abs(m)<c}}function wl(v){return Math.abs(v.y)>Math.abs(v.x)}class Os extends Fa{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,c,m){super.touchstart(t,c,m),this._currentTouchCount=m.length}_start(t){this._lastPoints=t,wl(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,c,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const b=t[0].sub(this._lastPoints[0]),M=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,M,m.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(b.y+M.y)/2*-.5}):void 0}gestureBeginsVertically(t,c,m){if(void 0!==this._valid)return this._valid;const b=t.mag()>=2,M=c.mag()>=2;if(!b&&!M)return;if(!b||!M)return void 0===this._firstMove&&(this._firstMove=m),m-this._firstMove<100&&void 0;const k=t.y>0==c.y>0;return wl(t)&&wl(c)&&k}}const Cl={panStep:100,bearingStep:15,pitchStep:10};class el{constructor(t){this._tr=new Wr(t);const c=Cl;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let c=0,m=0,b=0,M=0,k=0;switch(t.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:t.shiftKey?m=-1:(t.preventDefault(),M=-1);break;case 39:t.shiftKey?m=1:(t.preventDefault(),M=1);break;case 38:t.shiftKey?b=1:(t.preventDefault(),k=-1);break;case 40:t.shiftKey?b=-1:(t.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(m=0,b=0),{cameraAnimation:B=>{const z=this._tr;B.easeTo({duration:300,easeId:"keyboardHandler",easing:Qc,zoom:c?Math.round(z.zoom)+c*(t.shiftKey?2:1):z.zoom,bearing:z.bearing+m*this._bearingStep,pitch:z.pitch+b*this._pitchStep,offset:[-M*this._panStep,-k*this._panStep],center:z.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Qc(v){return v*(2-v)}const ic=4.000244140625;class rc{constructor(t,c){this._map=t,this._tr=new Wr(t),this._el=t.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,g.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!t[this._map._metaKey])return;t.preventDefault()}let c=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const m=g.exported.now(),b=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,0!==c&&c%ic==0?this._type="wheel":0!==c&&Math.abs(c)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(b*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),t.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=t,this._delta-=c,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=_e.mousePos(this._el,t),m=this._tr;this._around=g.LngLat.convert(this._aroundCenter?m.center:m.unproject(c)),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(0!==this._delta){const B="wheel"===this._type&&Math.abs(this._delta)>ic?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&0!==z&&(z=1/z);const W="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(W*z))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c="number"==typeof this._targetZoom?this._targetZoom:t.zoom,m=this._startZoom,b=this._easing;let M,k=!1;if("wheel"===this._type&&m&&b){const B=Math.min((g.exported.now()-this._lastWheelEventTime)/200,1),z=b(B);M=g.interpolate.number(m,c,z),B<1?this._frameId||(this._frameId=!0):k=!0}else M=c,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:M-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let c=g.ease;if(this._prevEase){const m=this._prevEase,b=(g.exported.now()-m.start)/m.duration,M=m.easing(b+.01)-m.easing(b),k=.27/Math.sqrt(M*M+1e-4)*.01,B=Math.sqrt(.0729-k*k);c=g.bezier(k,B,.25,1)}return this._prevEase={start:g.exported.now(),duration:t,easing:c},c}reset(){this._active=!1}}class tl{constructor(t,c){this._clickZoom=t,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class is{constructor(t){this._tr=new Wr(t),this.reset()}reset(){this._active=!1}dblclick(t,c){return t.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fl{constructor(){this._tap=new Ir({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,c,m){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=c[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(t,c,m))}touchmove(t,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const b=c[0],M=b.y-this._swipePoint.y;return this._swipePoint=b,t.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(t,c,m)}touchend(t,c,m){this._tapTime?this._swipePoint&&0===m.length&&this.reset():this._tap.touchend(t,c,m)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qr{constructor(t,c,m){this._el=t,this._mousePan=c,this._touchPan=m}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ea{constructor(t,c,m){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=c,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class oc{constructor(t,c,m,b){this._el=t,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const rs=v=>v.zoom||v.drag||v.pitch||v.rotate;class Na extends g.Event{}function Nl(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class sc{constructor(t,c){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ni(t),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c),g.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,M,k]of this._listeners)_e.addEventListener(b,M,b===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[t,c,m]of this._listeners)_e.removeEventListener(t,c,t===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(t){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new bi(c,t));const b=c.boxZoom=new Ki(c,t);this._add("boxZoom",b);const M=new $o(c),k=new is(c);c.doubleClickZoom=new tl(k,M),this._add("tapZoom",M),this._add("clickZoom",k);const B=new Fl;this._add("tapDragZoom",B);const z=c.touchPitch=new Os(c);this._add("touchPitch",z);const W=_a(t),se=Tn(t);c.dragRotate=new ea(t,W,se),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",se,["mouseRotate"]);const ae=(({enable:ee,clickTolerance:fe})=>{const oe=new bl({checkCorrectEvent:Oe=>0===_e.mouseButton(Oe)&&!Oe.ctrlKey});return new Ar({clickTolerance:fe,move:(Oe,tt)=>({around:tt,panDelta:tt.sub(Oe)}),activateOnStart:!0,moveStateManager:oe,enable:ee,assignEvents:Qa})})(t),E=new nc(t,c);c.dragPan=new qr(m,ae,E),this._add("mousePan",ae),this._add("touchPan",E,["touchZoom","touchRotate"]);const S=new _s,C=new bn;c.touchZoomRotate=new oc(m,C,S,B),this._add("touchRotate",S,["touchPan","touchZoom"]),this._add("touchZoom",C,["touchPan","touchRotate"]);const A=c.scrollZoom=new rc(c,this);this._add("scrollZoom",A,["mousePan"]);const R=c.keyboard=new el(c);this._add("keyboard",R),this._add("blockableMapEvent",new Qr(c));for(const ee of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[ee]&&c[ee].enable(t[ee])}_add(t,c,m){this._handlers.push({handlerName:t,handler:c,allowed:m}),this._handlersById[t]=c}stop(t){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(rs(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,c,m){for(const b in t)if(b!==m&&(!c||c.indexOf(b)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const c=[];for(const m of t)this._el.contains(m.target)&&c.push(m);return c}handleEvent(t,c){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const m="renderFrame"===t.type?void 0:t,b={needsRenderFrame:!1},M={},k={},B=t.touches,z=B?this._getMapTouches(B):void 0,W=z?_e.touchPos(this._el,z):_e.mousePos(this._el,t);for(const{handlerName:E,handler:S,allowed:C}of this._handlers){if(!S.isEnabled())continue;let A;this._blockedByActive(k,C,E)?S.reset():S[c||t.type]&&(A=S[c||t.type](t,W,z),this.mergeHandlerResult(b,M,A,E,m),A&&A.needsRenderFrame&&this._triggerRenderFrame()),(A||S.isActive())&&(k[E]=S)}const se={};for(const E in this._previousActiveHandlers)k[E]||(se[E]=m);this._previousActiveHandlers=k,(Object.keys(se).length||Nl(b))&&(this._changes.push([b,M,se]),this._triggerRenderFrame()),(Object.keys(k).length||Nl(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ae}=b;ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ae(this._map))}mergeHandlerResult(t,c,m,b,M){if(!m)return;g.extend(t,m);const k={handlerName:b,originalEvent:m.originalEvent||M};void 0!==m.zoomDelta&&(c.zoom=k),void 0!==m.panDelta&&(c.drag=k),void 0!==m.pitchDelta&&(c.pitch=k),void 0!==m.bearingDelta&&(c.rotate=k)}_applyChanges(){const t={},c={},m={};for(const[b,M,k]of this._changes)b.panDelta&&(t.panDelta=(t.panDelta||new g.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+b.pitchDelta),void 0!==b.around&&(t.around=b.around),void 0!==b.pinchAround&&(t.pinchAround=b.pinchAround),b.noInertia&&(t.noInertia=b.noInertia),g.extend(c,M),g.extend(m,k);this._updateMapTransform(t,c,m),this._changes=[]}_updateMapTransform(t,c,m){const b=this._map,M=b._getTransformForUpdate(),k=b.terrain;if(!(Nl(t)||k&&this._terrainMovement))return this._fireEvents(c,m,!0);let{panDelta:B,zoomDelta:z,bearingDelta:W,pitchDelta:se,around:ae,pinchAround:E}=t;void 0!==E&&(ae=E),b._stop(!0),ae=ae||b.transform.centerPoint;const S=M.pointLocation(B?ae.sub(B):ae);W&&(M.bearing+=W),se&&(M.pitch+=se),z&&(M.zoom+=z),k?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?M.center=M.pointLocation(M.centerPoint.sub(B)):M.setLocationAtPoint(S,ae):(this._terrainMovement=!0,M.freezeElevation=!0,M.setLocationAtPoint(S,ae),this._map.once("moveend",()=>{M.freezeElevation=!1,this._terrainMovement=!1,M.recalculateZoom(b.terrain)})):M.setLocationAtPoint(S,ae),b._applyUpdatedTransform(M),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(c,m,!0)}_fireEvents(t,c,m){const b=rs(this._eventsInProgress),M=rs(t),k={};for(const se in t){const{originalEvent:ae}=t[se];this._eventsInProgress[se]||(k[`${se}start`]=ae),this._eventsInProgress[se]=t[se]}!b&&M&&this._fireEvent("movestart",M.originalEvent);for(const se in k)this._fireEvent(se,k[se]);M&&this._fireEvent("move",M.originalEvent);for(const se in t){const{originalEvent:ae}=t[se];this._fireEvent(se,ae)}const B={};let z;for(const se in this._eventsInProgress){const{handlerName:ae,originalEvent:E}=this._eventsInProgress[se];this._handlersById[ae].isActive()||(delete this._eventsInProgress[se],z=c[ae]||E,B[`${se}end`]=z)}for(const se in B)this._fireEvent(se,B[se]);const W=rs(this._eventsInProgress);if(m&&(b||M)&&!W){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=E=>0!==E&&-this._bearingSnap<E&&E<this._bearingSnap;se?(ae(se.bearing||this._map.getBearing())&&(se.bearing=0),se.freezeElevation=!0,this._map.easeTo(se,{originalEvent:z})):(this._map.fire(new g.Event("moveend",{originalEvent:z})),ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,c){this._map.fire(new g.Event(t,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Na("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const os={extend:(v,...t)=>g.extend(v,...t),run(v){v()},logToElement(v,t=!1,c="log"){const m=window.document.getElementById(c);m&&(t&&(m.innerHTML=""),m.innerHTML+=`<br>${v}`)}};class hr extends g.Evented{constructor(t,c){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=c.bearingSnap,g.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new g.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,c){return this.jumpTo({center:t},c)}panBy(t,c,m){return t=g.Point.convert(t).mult(-1),this.panTo(this.transform.center,g.extend({offset:t},c),m)}panTo(t,c,m){return this.easeTo(g.extend({center:t},c),m)}getZoom(){return this.transform.zoom}setZoom(t,c){return this.jumpTo({zoom:t},c),this}zoomTo(t,c,m){return this.easeTo(g.extend({zoom:t},c),m)}zoomIn(t,c){return this.zoomTo(this.getZoom()+1,t,c),this}zoomOut(t,c){return this.zoomTo(this.getZoom()-1,t,c),this}getBearing(){return this.transform.bearing}setBearing(t,c){return this.jumpTo({bearing:t},c),this}getPadding(){return this.transform.padding}setPadding(t,c){return this.jumpTo({padding:t},c),this}rotateTo(t,c,m){return this.easeTo(g.extend({bearing:t},c),m)}resetNorth(t,c){return this.rotateTo(0,g.extend({duration:1e3},t),c),this}resetNorthPitch(t,c){return this.easeTo(g.extend({bearing:0,pitch:0,duration:1e3},t),c),this}snapToNorth(t,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,c):this}getPitch(){return this.transform.pitch}setPitch(t,c){return this.jumpTo({pitch:t},c),this}cameraForBounds(t,c){t=Xn.convert(t);const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),m,c)}_cameraForBoxAndBearing(t,c,m,b){const M={top:0,bottom:0,right:0,left:0};if("number"==typeof(b=g.extend({padding:M,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding){const tt=b.padding;b.padding={top:tt,bottom:tt,right:tt,left:tt}}b.padding=g.extend(M,b.padding);const k=this.transform,B=k.padding,z=k.project(g.LngLat.convert(t)),W=k.project(g.LngLat.convert(c)),se=z.rotate(-m*Math.PI/180),ae=W.rotate(-m*Math.PI/180),E=new g.Point(Math.max(se.x,ae.x),Math.max(se.y,ae.y)),S=new g.Point(Math.min(se.x,ae.x),Math.min(se.y,ae.y)),C=E.sub(S),A=(k.width-(B.left+B.right+b.padding.left+b.padding.right))/C.x,R=(k.height-(B.top+B.bottom+b.padding.top+b.padding.bottom))/C.y;if(R<0||A<0)return void g.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ee=Math.min(k.scaleZoom(k.scale*Math.min(A,R)),b.maxZoom),fe=g.Point.convert(b.offset),oe=new g.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(m*Math.PI/180),Oe=fe.add(oe).mult(k.scale/k.zoomScale(ee));return{center:k.unproject(z.add(W).div(2).sub(Oe)),zoom:ee,bearing:m}}fitBounds(t,c,m){return this._fitInternal(this.cameraForBounds(t,c),c,m)}fitScreenCoordinates(t,c,m,b,M){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(g.Point.convert(t)),this.transform.pointLocation(g.Point.convert(c)),m,b),b,M)}_fitInternal(t,c,m){return t?(delete(c=g.extend(t,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(t,c){this.stop();const m=this._getTransformForUpdate();let b=!1,M=!1,k=!1;return"zoom"in t&&m.zoom!==+t.zoom&&(b=!0,m.zoom=+t.zoom),void 0!==t.center&&(m.center=g.LngLat.convert(t.center)),"bearing"in t&&m.bearing!==+t.bearing&&(M=!0,m.bearing=+t.bearing),"pitch"in t&&m.pitch!==+t.pitch&&(k=!0,m.pitch=+t.pitch),null==t.padding||m.isPaddingEqual(t.padding)||(m.padding=t.padding),this._applyUpdatedTransform(m),this.fire(new g.Event("movestart",c)).fire(new g.Event("move",c)),b&&this.fire(new g.Event("zoomstart",c)).fire(new g.Event("zoom",c)).fire(new g.Event("zoomend",c)),M&&this.fire(new g.Event("rotatestart",c)).fire(new g.Event("rotate",c)).fire(new g.Event("rotateend",c)),k&&this.fire(new g.Event("pitchstart",c)).fire(new g.Event("pitch",c)).fire(new g.Event("pitchend",c)),this.fire(new g.Event("moveend",c))}calculateCameraOptionsFromTo(t,c,m,b=0){const M=g.MercatorCoordinate.fromLngLat(t,c),k=g.MercatorCoordinate.fromLngLat(m,b),B=k.x-M.x,z=k.y-M.y,W=k.z-M.z,se=Math.hypot(B,z,W);if(0===se)throw new Error("Can't calculate camera options with same From and To");const ae=Math.hypot(B,z),E=this.transform.scaleZoom(this.transform.cameraToCenterDistance/se/this.transform.tileSize),S=180*Math.atan2(B,-z)/Math.PI;let C=180*Math.acos(ae/se)/Math.PI;return C=W<0?90-C:90+C,{center:k.toLngLat(),zoom:E,pitch:C,bearing:S}}easeTo(t,c){this._stop(!1,t.easeId),(!1===(t=g.extend({offset:[0,0],duration:500,easing:g.ease},t)).animate||!t.essential&&g.exported.prefersReducedMotion)&&(t.duration=0);const m=this._getTransformForUpdate(),b=this.getZoom(),M=this.getBearing(),k=this.getPitch(),B=this.getPadding(),z="zoom"in t?+t.zoom:b,W="bearing"in t?this._normalizeBearing(t.bearing,M):M,se="pitch"in t?+t.pitch:k,ae="padding"in t?t.padding:m.padding,E=g.Point.convert(t.offset);let S=m.centerPoint.add(E);const C=m.pointLocation(S),A=g.LngLat.convert(t.center||C);this._normalizeCenter(A);const R=m.project(C),ee=m.project(A).sub(R),fe=m.zoomScale(z-b);let oe,Oe;t.around&&(oe=g.LngLat.convert(t.around),Oe=m.locationPoint(oe));const tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||z!==b,this._rotating=this._rotating||M!==W,this._pitching=this._pitching||se!==k,this._padding=!m.isPaddingEqual(ae),this._easeId=t.easeId,this._prepareEase(c,t.noMoveStart,tt),this.terrain&&this._prepareElevation(A),this._ease(Et=>{if(this._zooming&&(m.zoom=g.interpolate.number(b,z,Et)),this._rotating&&(m.bearing=g.interpolate.number(M,W,Et)),this._pitching&&(m.pitch=g.interpolate.number(k,se,Et)),this._padding&&(m.interpolatePadding(B,ae,Et),S=m.centerPoint.add(E)),this.terrain&&!t.freezeElevation&&this._updateElevation(Et),oe)m.setLocationAtPoint(oe,Oe);else{const vt=m.zoomScale(m.zoom-b),Ut=z>b?Math.min(2,fe):Math.max(.5,fe),$t=Math.pow(Ut,1-Et),pn=m.unproject(R.add(ee.mult(Et*$t)).mult(vt));m.setLocationAtPoint(m.renderWorldCopies?pn.wrap():pn,S)}this._applyUpdatedTransform(m),this._fireMoveEvents(c)},Et=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,Et)},t),this}_prepareEase(t,c,m={}){this._moving=!0,c||m.moving||this.fire(new g.Event("movestart",t)),this._zooming&&!m.zooming&&this.fire(new g.Event("zoomstart",t)),this._rotating&&!m.rotating&&this.fire(new g.Event("rotatestart",t)),this._pitching&&!m.pitching&&this.fire(new g.Event("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(t,this.terrain),this.transform.freezeElevation=!0}_updateElevation(t){const c=this.transform.getElevation(this._elevationCenter,this.terrain);if(t<1&&c!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(m-(c-(m*t+this._elevationStart))/(1-t)),this._elevationTarget=c}this.transform.elevation=g.interpolate.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(t){if(!this.transformCameraUpdate)return;const c=t.clone(),{center:m,zoom:b,pitch:M,bearing:k,elevation:B}=this.transformCameraUpdate(c);m&&(c.center=m),void 0!==b&&(c.zoom=b),void 0!==M&&(c.pitch=M),void 0!==k&&(c.bearing=k),void 0!==B&&(c.elevation=B),this.transform.apply(c)}_fireMoveEvents(t){this.fire(new g.Event("move",t)),this._zooming&&this.fire(new g.Event("zoom",t)),this._rotating&&this.fire(new g.Event("rotate",t)),this._pitching&&this.fire(new g.Event("pitch",t))}_afterEase(t,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,b=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new g.Event("zoomend",t)),b&&this.fire(new g.Event("rotateend",t)),M&&this.fire(new g.Event("pitchend",t)),this.fire(new g.Event("moveend",t))}flyTo(t,c){if(!t.essential&&g.exported.prefersReducedMotion){const In=g.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(In,c)}this.stop(),t=g.extend({offset:[0,0],speed:1.2,curve:1.42,easing:g.ease},t);const m=this._getTransformForUpdate(),b=this.getZoom(),M=this.getBearing(),k=this.getPitch(),B=this.getPadding(),z="zoom"in t?g.clamp(+t.zoom,m.minZoom,m.maxZoom):b,W="bearing"in t?this._normalizeBearing(t.bearing,M):M,se="pitch"in t?+t.pitch:k,ae="padding"in t?t.padding:m.padding,E=m.zoomScale(z-b),S=g.Point.convert(t.offset);let C=m.centerPoint.add(S);const A=m.pointLocation(C),R=g.LngLat.convert(t.center||A);this._normalizeCenter(R);const ee=m.project(A),fe=m.project(R).sub(ee);let oe=t.curve;const Oe=Math.max(m.width,m.height),tt=Oe/E,Et=fe.mag();if("minZoom"in t){const In=g.clamp(Math.min(t.minZoom,b,z),m.minZoom,m.maxZoom),Hi=Oe/m.zoomScale(In-b);oe=Math.sqrt(Hi/Et*2)}const vt=oe*oe;function Ut(In){const Hi=(tt*tt-Oe*Oe+(In?-1:1)*vt*vt*Et*Et)/(2*(In?tt:Oe)*vt*Et);return Math.log(Math.sqrt(Hi*Hi+1)-Hi)}function $t(In){return(Math.exp(In)-Math.exp(-In))/2}function pn(In){return(Math.exp(In)+Math.exp(-In))/2}const zn=Ut(0);let Gn=function(In){return pn(zn)/pn(zn+oe*In)},Sn=function(In){return Oe*((pn(zn)*($t(Hi=zn+oe*In)/pn(Hi))-$t(zn))/vt)/Et;var Hi},qn=(Ut(1)-zn)/oe;if(Math.abs(Et)<1e-6||!isFinite(qn)){if(Math.abs(Oe-tt)<1e-6)return this.easeTo(t,c);const In=tt<Oe?-1:1;qn=Math.abs(Math.log(tt/Oe))/oe,Sn=function(){return 0},Gn=function(Hi){return Math.exp(In*oe*Hi)}}return t.duration="duration"in t?+t.duration:1e3*qn/("screenSpeed"in t?+t.screenSpeed/oe:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=M!==W,this._pitching=se!==k,this._padding=!m.isPaddingEqual(ae),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(R),this._ease(In=>{const Hi=In*qn,Kr=1/Gn(Hi);m.zoom=1===In?z:b+m.scaleZoom(Kr),this._rotating&&(m.bearing=g.interpolate.number(M,W,In)),this._pitching&&(m.pitch=g.interpolate.number(k,se,In)),this._padding&&(m.interpolatePadding(B,ae,In),C=m.centerPoint.add(S)),this.terrain&&!t.freezeElevation&&this._updateElevation(In);const Oi=1===In?R:m.unproject(ee.add(fe.mult(Sn(Hi))).mult(Kr));m.setLocationAtPoint(m.renderWorldCopies?Oi.wrap():Oi,C),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!t){const m=this.handlers;m&&m.stop(!1)}return this}_ease(t,c,m){!1===m.animate||0===m.duration?(t(1),c()):(this._easeStart=g.exported.now(),this._easeOptions=m,this._onEaseFrame=t,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((g.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,c){t=g.wrap(t,-180,180);const m=Math.abs(t-c);return Math.abs(t-360-c)<m&&(t-=360),Math.abs(t+360-c)<m&&(t+=360),t}_normalizeCenter(t){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const m=t.lng-c.center.lng;t.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(t){return this.terrain?this.transform.getElevation(g.LngLat.convert(t),this.terrain)-this.transform.elevation:null}}class di{constructor(t={}){this.options=t,g.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=_e.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_e.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_e.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_e.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,c){const m=this._map._getUIString(`AttributionControl.${c}`);t.title=m,t.setAttribute("aria-label",m)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(b=>"string"!=typeof b?"":b)):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const c=this._map.style.sourceCaches;for(const b in c){const M=c[b];if(M.used||M.usedForTerrain){const k=M.getSource();k.attribution&&t.indexOf(k.attribution)<0&&t.push(k.attribution)}}t=t.filter(b=>String(b).trim()),t.sort((b,M)=>b.length-M.length),t=t.filter((b,M)=>{for(let k=M+1;k<t.length;k++)if(t[k].indexOf(b)>=0)return!1;return!0});const m=t.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,t.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class Fr{constructor(t={}){this.options=t,g.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=_e.create("div","maplibregl-ctrl");const c=_e.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_e.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const c=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}}}class Bl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const c=++this._id;return this._queue.push({callback:t,id:c,cancelled:!1}),c}remove(t){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const b of m)if(b.id===t)return void(b.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ba={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var ac=g.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class zl extends g.Evented{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,c){this.sourceCache.update(t,c),this._renderableTilesKeys=[];const m={};for(const b of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))m[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),g.ortho(b.posMatrix,0,g.EXTENT,0,g.EXTENT,0,1),this._tiles[b.key]=new yi(b,this.tileSize));for(const b in this._tiles)m[b]||delete this._tiles[b]}freeRtt(t){for(const c in this._tiles){const m=this._tiles[c];(!t||m.tileID.equals(t)||m.tileID.isChildOf(t)||t.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const c={};for(const m of this._renderableTilesKeys){const b=this._tiles[m].tileID;if(b.canonical.equals(t.canonical)){const M=t.clone();M.posMatrix=new Float64Array(16),g.ortho(M.posMatrix,0,g.EXTENT,0,g.EXTENT,0,1),c[m]=M}else if(b.canonical.isChildOf(t.canonical)){const M=t.clone();M.posMatrix=new Float64Array(16);const k=b.canonical.z-t.canonical.z,B=b.canonical.x-(b.canonical.x>>k<<k),z=b.canonical.y-(b.canonical.y>>k<<k),W=g.EXTENT>>k;g.ortho(M.posMatrix,0,W,0,W,0,1),g.translate(M.posMatrix,M.posMatrix,[-B*W,-z*W,0]),c[m]=M}else if(t.canonical.isChildOf(b.canonical)){const M=t.clone();M.posMatrix=new Float64Array(16);const k=t.canonical.z-b.canonical.z,B=t.canonical.x-(t.canonical.x>>k<<k),z=t.canonical.y-(t.canonical.y>>k<<k),W=g.EXTENT>>k;g.ortho(M.posMatrix,0,g.EXTENT,0,g.EXTENT,0,1),g.translate(M.posMatrix,M.posMatrix,[B*W,z*W,0]),g.scale(M.posMatrix,M.posMatrix,[1/2**k,1/2**k,0]),c[m]=M}}return c}getSourceTile(t,c){const m=this.sourceCache._source;let b=t.overscaledZ-this.deltaZoom;if(b>m.maxzoom&&(b=m.maxzoom),b<m.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(b).key);let M=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!M||!M.dem)&&c)for(;b>=m.minzoom&&(!M||!M.dem);)M=this.sourceCache.getTileByID(t.scaledTo(b--).key);return M}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=t)}}class Ur{constructor(t,c,m){this.painter=t,this.sourceCache=new zl(c),this.options=m,this.exaggeration="number"==typeof m.exaggeration?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,c,m,b=g.EXTENT){if(!(c>=0&&c<b&&m>=0&&m<b))return 0;let M=0;const k=this.getTerrainData(t);if(k.tile&&k.tile.dem){const B=((C=[])[0]=(R=k.u_terrain_matrix)[0]*(ee=(A=[c/b*g.EXTENT,m/b*g.EXTENT])[0])+R[4]*(fe=A[1])+R[12],C[1]=R[1]*ee+R[5]*fe+R[13],C),z=[B[0]*k.tile.dem.dim,B[1]*k.tile.dem.dim],W=[Math.floor(z[0]),Math.floor(z[1])],se=k.tile.dem.get(W[0],W[1]),ae=k.tile.dem.get(W[0],W[1]+1),E=k.tile.dem.get(W[0]+1,W[1]),S=k.tile.dem.get(W[0]+1,W[1]+1);M=g.interpolate.number(g.interpolate.number(se,ae,z[0]-W[0]),g.interpolate.number(E,S,z[0]-W[0]),z[1]-W[1])}var C,A,R,ee,fe;return M}getElevation(t,c,m,b=g.EXTENT){return this.getDEMElevation(t,c,m,b)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const b=this.painter.context,M=new g.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new It(b,M,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new It(b,new g.RGBAImage({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=g.identity([])}const c=this.sourceCache.getSourceTile(t,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const b=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new It(b,c.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),c.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const m=c&&c+c.tileID.key+t.key;if(m&&!this._demMatrixCache[m]){const b=this.sourceCache.sourceCache._source.maxzoom;let M=t.canonical.z-c.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=b?M=t.canonical.z-b:g.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=t.canonical.x-(t.canonical.x>>M<<M),B=t.canonical.y-(t.canonical.y>>M<<M),z=g.fromScaling(new Float64Array(16),[1/(g.EXTENT<<M),1/(g.EXTENT<<M),0]);g.translate(z,z,[k*g.EXTENT,B*g.EXTENT,0]),this._demMatrixCache[t.key]={matrix:z,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(t){const c=this.painter,m=c.width/devicePixelRatio,b=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new It(c.context,{width:m,height:b,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new It(c.context,{width:m,height:b,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(m,b,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,m,b))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let M=0,k=0;M<this._coordsTextureSize;M++)for(let B=0;B<this._coordsTextureSize;B++,k+=4)c[k+0]=255&B,c[k+1]=255&M,c[k+2]=B>>8<<4|M>>8,c[k+3]=0;const m=new g.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),b=new It(t,m,t.gl.RGBA,{premultiply:!1});return b.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(t){const c=new Uint8Array(4),m=this.painter.context,b=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null);const M=c[0]+(c[2]>>4<<8),k=c[1]+((15&c[2])<<8),B=this.coordsIndex[255-c[3]],z=B&&this.sourceCache.getTileByID(B);if(!z)return null;const W=this._coordsTextureSize,se=(1<<z.tileID.canonical.z)*W;return new g.MercatorCoordinate((z.tileID.canonical.x*W+M)/se,(z.tileID.canonical.y*W+k)/se,this.getElevation(z.tileID,M,k,W))}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.painter.context,c=new g.Pos3dArray,m=new g.TriangleIndexArray,b=this.meshSize,M=g.EXTENT/b,k=b*b;for(let ae=0;ae<=b;ae++)for(let E=0;E<=b;E++)c.emplaceBack(E*M,ae*M,0);for(let ae=0;ae<k;ae+=b+1)for(let E=0;E<b;E++)m.emplaceBack(E+ae,b+E+ae+1,b+E+ae+2),m.emplaceBack(E+ae,b+E+ae+2,E+ae+1);const B=c.length,z=B+2*(b+1);for(const ae of[0,1])for(let E=0;E<=b;E++)for(const S of[0,1])c.emplaceBack(E*M,ae*g.EXTENT,S);for(let ae=0;ae<2*b;ae+=2)m.emplaceBack(z+ae,z+ae+1,z+ae+3),m.emplaceBack(z+ae,z+ae+3,z+ae+2),m.emplaceBack(B+ae,B+ae+3,B+ae+1),m.emplaceBack(B+ae,B+ae+2,B+ae+3);const W=c.length,se=W+2*(b+1);for(const ae of[0,1])for(let E=0;E<=b;E++)for(const S of[0,1])c.emplaceBack(ae*g.EXTENT,E*M,S);for(let ae=0;ae<2*b;ae+=2)m.emplaceBack(W+ae,W+ae+1,W+ae+3),m.emplaceBack(W+ae,W+ae+3,W+ae+2),m.emplaceBack(se+ae,se+ae+3,se+ae+1),m.emplaceBack(se+ae,se+ae+2,se+ae+3);return this._mesh={indexBuffer:t.createIndexBuffer(m),vertexBuffer:t.createVertexBuffer(c,ac.members),segments:g.SegmentVector.simpleSegment(0,0,c.length,m.length)},this._mesh}getMeshFrameDelta(t){return 2*Math.PI*g.earthRadius/Math.pow(2,t)/5}getMinMaxElevation(t){const c=this.getTerrainData(t).tile,m={minElevation:null,maxElevation:null};return c&&c.dem&&(m.minElevation=c.dem.min*this.exaggeration,m.maxElevation=c.dem.max*this.exaggeration),m}}class va{constructor(t,c,m){this._context=t,this._size=c,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new It(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(m.texture),{id:t,fbo:c,texture:m,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>t.id!==c),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(t=>!t.inUse)}}const Cn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ei{constructor(t,c){this.painter=t,this.terrain=c,this.pool=new va(t.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(m=>!t._layers[m].isHidden(c)),this._coordsDescendingInv={};for(const m in t.sourceCaches){this._coordsDescendingInv[m]={};const b=t.sourceCaches[m].getVisibleCoordinates();for(const M of b){const k=this.terrain.sourceCache.getTerrainCoords(M);for(const B in k)this._coordsDescendingInv[m][B]||(this._coordsDescendingInv[m][B]=[]),this._coordsDescendingInv[m][B].push(k[B])}}this._coordsDescendingInvStr={};for(const m of t._order){const b=t._layers[m],M=b.source;if(Cn[b.type]&&!this._coordsDescendingInvStr[M]){this._coordsDescendingInvStr[M]={};for(const k in this._coordsDescendingInv[M])this._coordsDescendingInvStr[M][k]=this._coordsDescendingInv[M][k].map(B=>B.key).sort().join()}}for(const m of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const M=this._coordsDescendingInvStr[b][m.tileID.key];M&&M!==m.rttCoords[b]&&(m.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;const c=t.type,m=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Cn[c]&&(this._prevType&&Cn[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(t.id),!b))return!0;if(Cn[this._prevType]||Cn[c]&&b){this._prevType=c;const M=this._stacks.length-1,k=this._stacks[M]||[];for(const B of this._renderableTiles){if(this.pool.isFull()&&(gs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[M]){const W=this.pool.getObjectForId(B.rtt[M].id);if(W.stamp===B.rtt[M].stamp){this.pool.useObject(W);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),B.rtt[M]={id:z.id,stamp:z.stamp},m.context.bindFramebuffer.set(z.fbo.framebuffer),m.context.clear({color:g.Color.transparent,stencil:0}),m.currentStencilSource=void 0;for(let W=0;W<k.length;W++){const se=m.style._layers[k[W]],ae=se.source?this._coordsDescendingInv[se.source][B.tileID.key]:[B.tileID];m.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),m._renderTileClippingMasks(se,ae),m.renderLayer(m,m.style.sourceCaches[se.source],se,ae),se.source&&(B.rttCoords[se.source]=this._coordsDescendingInvStr[se.source][B.tileID.key])}}return gs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Cn[c]}return!1}}const Ac={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},ks=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},bo={showCompass:!0,showZoom:!0,visualizePitch:!1};class ys{constructor(t,c,m=!1){this._clickTolerance=10;const b=t.dragRotate._mouseRotate.getClickTolerance(),M=t.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=_a({clickTolerance:b,enable:!0}),this.touchRotate=(({enable:k,clickTolerance:B,bearingDegreesPerPixelMoved:z=.8})=>{const W=new Ic;return new Ar({clickTolerance:B,move:(se,ae)=>({bearingDelta:(ae.x-se.x)*z}),moveStateManager:W,enable:k,assignEvents:ks})})({clickTolerance:b,enable:!0}),this.map=t,m&&(this.mousePitch=Tn({clickTolerance:M,enable:!0}),this.touchPitch=(({enable:k,clickTolerance:B,pitchDegreesPerPixelMoved:z=-.5})=>{const W=new Ic;return new Ar({clickTolerance:B,move:(se,ae)=>({pitchDelta:(ae.y-se.y)*z}),moveStateManager:W,enable:k,assignEvents:ks})})({clickTolerance:M,enable:!0})),g.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_e.addEventListener(c,"mousedown",this.mousedown),_e.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),_e.addEventListener(c,"touchcancel",this.reset)}startMouse(t,c){this.mouseRotate.dragStart(t,c),this.mousePitch&&this.mousePitch.dragStart(t,c),_e.disableDrag()}startTouch(t,c){this.touchRotate.dragStart(t,c),this.touchPitch&&this.touchPitch.dragStart(t,c),_e.disableDrag()}moveMouse(t,c){const m=this.map,{bearingDelta:b}=this.mouseRotate.dragMove(t,c)||{};if(b&&m.setBearing(m.getBearing()+b),this.mousePitch){const{pitchDelta:M}=this.mousePitch.dragMove(t,c)||{};M&&m.setPitch(m.getPitch()+M)}}moveTouch(t,c){const m=this.map,{bearingDelta:b}=this.touchRotate.dragMove(t,c)||{};if(b&&m.setBearing(m.getBearing()+b),this.touchPitch){const{pitchDelta:M}=this.touchPitch.dragMove(t,c)||{};M&&m.setPitch(m.getPitch()+M)}}off(){const t=this.element;_e.removeEventListener(t,"mousedown",this.mousedown),_e.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),_e.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_e.removeEventListener(window,"touchend",this.touchend),_e.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){_e.enableDrag(),_e.removeEventListener(window,"mousemove",this.mousemove),_e.removeEventListener(window,"mouseup",this.mouseup),_e.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_e.removeEventListener(window,"touchend",this.touchend)}mousedown(t){this.startMouse(g.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),_e.mousePos(this.element,t)),_e.addEventListener(window,"mousemove",this.mousemove),_e.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.moveMouse(t,_e.mousePos(this.element,t))}mouseup(t){this.mouseRotate.dragEnd(t),this.mousePitch&&this.mousePitch.dragEnd(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=_e.touchPos(this.element,t.targetTouches)[0],this.startTouch(t,this._startPos),_e.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_e.addEventListener(window,"touchend",this.touchend))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=_e.touchPos(this.element,t.targetTouches)[0],this.moveTouch(t,this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let jr;function za(v,t,c){if(v=new g.LngLat(v.lng,v.lat),t){const m=new g.LngLat(v.lng-360,v.lat),b=new g.LngLat(v.lng+360,v.lat),M=c.locationPoint(v).distSqr(t);c.locationPoint(m).distSqr(t)<M?v=m:c.locationPoint(b).distSqr(t)<M&&(v=b)}for(;Math.abs(v.lng-c.center.lng)>180;){const m=c.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;v.lng>c.center.lng?v.lng-=360:v.lng+=360}return v}const vs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nr(v,t,c){const m=v.classList;for(const b in vs)m.remove(`maplibregl-${c}-anchor-${b}`);m.add(`maplibregl-${c}-anchor-${t}`)}class pr extends g.Evented{constructor(t,c){if(super(),(t instanceof HTMLElement||c)&&(t=g.extend({element:t},c)),g.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=g.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=_e.create("div"),this._element.setAttribute("aria-label","Map marker");const m=_e.createNS("http://www.w3.org/2000/svg","svg"),b=41,M=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${b}px`),m.setAttributeNS(null,"width",`${M}px`),m.setAttributeNS(null,"viewBox",`0 0 ${M} ${b}`);const k=_e.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const B=_e.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const z=_e.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const W=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const fe of W){const oe=_e.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",fe.rx),oe.setAttributeNS(null,"ry",fe.ry),z.appendChild(oe)}const se=_e.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const ae=_e.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(ae);const E=_e.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"opacity","0.25"),E.setAttributeNS(null,"fill","#000000");const S=_e.createNS("http://www.w3.org/2000/svg","path");S.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),E.appendChild(S);const C=_e.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(6.0, 7.0)"),C.setAttributeNS(null,"fill","#FFFFFF");const A=_e.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(8.0, 8.0)");const R=_e.createNS("http://www.w3.org/2000/svg","circle");R.setAttributeNS(null,"fill","#000000"),R.setAttributeNS(null,"opacity","0.25"),R.setAttributeNS(null,"cx","5.5"),R.setAttributeNS(null,"cy","5.5"),R.setAttributeNS(null,"r","5.4999962");const ee=_e.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#FFFFFF"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962"),A.appendChild(R),A.appendChild(ee),B.appendChild(z),B.appendChild(se),B.appendChild(E),B.appendChild(C),B.appendChild(A),m.appendChild(B),m.setAttributeNS(null,"height",b*this._scale+"px"),m.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(m),this._offset=g.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),nr(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_e.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=g.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(24.6+b)],"bottom-right":[-b,-1*(24.6+b)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const c=t.code,m=t.charCode||t.keyCode;"Space"!==c&&"Enter"!==c&&32!==m&&13!==m||this.togglePopup()}_onMapClick(t){const c=t.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=za(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let c="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?c=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(c=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?m="rotateX(0deg)":"map"===this._pitchAlignment&&(m=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),_e.setTransform(this._element,`${vs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${c}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const b=this._map.unproject(this._pos),M=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=b.distanceTo(this._lngLat)>20*M?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(t){return this._offset=g.Point.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new g.Event("dragstart"))),this.fire(new g.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new g.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const eu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ta=0,zi=!1;const nl={maxWidth:100,unit:"metric"};function Pc(v,t,c){const m=c&&c.maxWidth||100,b=v._container.clientHeight/2,M=v.unproject([0,b]),k=v.unproject([m,b]),B=M.distanceTo(k);if(c&&"imperial"===c.unit){const z=3.2808*B;z>5280?Rs(t,m,z/5280,v._getUIString("ScaleControl.Miles")):Rs(t,m,z,v._getUIString("ScaleControl.Feet"))}else c&&"nautical"===c.unit?Rs(t,m,B/1852,v._getUIString("ScaleControl.NauticalMiles")):B>=1e3?Rs(t,m,B/1e3,v._getUIString("ScaleControl.Kilometers")):Rs(t,m,B,v._getUIString("ScaleControl.Meters"))}function Rs(v,t,c,m){const b=function(M){const k=Math.pow(10,`${Math.floor(M)}`.length-1);let B=M/k;return B=B>=10?10:B>=5?5:B>=3?3:B>=2?2:B>=1?1:function(z){const W=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*W)/W}(B),k*B}(c);v.style.width=t*(b/c)+"px",v.innerHTML=`${b}&nbsp;${m}`}const Ul={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},tu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function nu(v){if(v){if("number"==typeof v){const t=Math.round(Math.sqrt(.5*Math.pow(v,2)));return{center:new g.Point(0,0),top:new g.Point(0,v),"top-left":new g.Point(t,t),"top-right":new g.Point(-t,t),bottom:new g.Point(0,-v),"bottom-left":new g.Point(t,-t),"bottom-right":new g.Point(-t,-t),left:new g.Point(v,0),right:new g.Point(-v,0)}}if(v instanceof g.Point||Array.isArray(v)){const t=g.Point.convert(v);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:g.Point.convert(v.center||[0,0]),top:g.Point.convert(v.top||[0,0]),"top-left":g.Point.convert(v["top-left"]||[0,0]),"top-right":g.Point.convert(v["top-right"]||[0,0]),bottom:g.Point.convert(v.bottom||[0,0]),"bottom-left":g.Point.convert(v["bottom-left"]||[0,0]),"bottom-right":g.Point.convert(v["bottom-right"]||[0,0]),left:g.Point.convert(v.left||[0,0]),right:g.Point.convert(v.right||[0,0])}}return nu(new g.Point(0,0))}const il={setRTLTextPlugin:g.setRTLTextPlugin,getRTLTextPluginStatus:g.getRTLTextPluginStatus,Map:class extends hr{constructor(v){var t;if(g.PerformanceUtils.mark(g.PerformanceMarkers.create),null!=(v=g.extend({},Ac,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ue(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._interactive=v.interactive,this._cooperativeGestures=v.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new Bl,this._controls=[],this._mapId=g.uniqueId(),this._locale=g.extend({},Ba,v.locale),this._clickTolerance=v.clickTolerance,this._pixelRatio=null!==(t=v.pixelRatio)&&void 0!==t?t:devicePixelRatio,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=$e.addThrottleControl(()=>this.isMoving()),this._requestManager=new mt(v.transformRequest),"string"==typeof v.container){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),g.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;this._resizeObserver=new ResizeObserver(m=>{c?this._trackResize&&this.resize(m)._update():c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new sc(this,v),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=v.hash&&new K("string"==typeof v.hash&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,g.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new di({customAttribution:v.customAttribution})),v.maplibreLogo&&this.addControl(new Fr,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update("style"===c.dataType),this.fire(new g.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new g.Event(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new g.Event("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(v,t){if(void 0===t&&(t=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=v.onAdd(this);this._controls.push(v);const m=this._controlPositions[t];return-1!==t.indexOf("bottom")?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(v);return t>-1&&this._controls.splice(t,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,t,c,m){return null==m&&this.terrain&&(m=this.transform.getElevation(c,this.terrain)),super.calculateCameraOptionsFromTo(v,t,c,m)}resize(v){var t;const c=this._containerDimensions(),m=c[0],b=c[1];this._resizeCanvas(m,b,this.getPixelRatio()),this.transform.resize(m,b),null===(t=this._requestedCameraState)||void 0===t||t.resize(m,b),this.painter.resize(m,b,this.getPixelRatio());const M=!this._moving;return M&&(this.stop(),this.fire(new g.Event("movestart",v)).fire(new g.Event("move",v))),this.fire(new g.Event("resize",v)),M&&this.fire(new g.Event("moveend",v)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(v){const[t,c]=this._containerDimensions();this._pixelRatio=v,this._resizeCanvas(t,c,v),this.painter.resize(t,c,v)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Xn.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(v){return this.transform.locationPoint(g.LngLat.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(g.Point.convert(v),this.terrain)}isMoving(){var v;return this._moving||(null===(v=this.handlers)||void 0===v?void 0:v.isMoving())}isZooming(){var v;return this._zooming||(null===(v=this.handlers)||void 0===v?void 0:v.isZooming())}isRotating(){var v;return this._rotating||(null===(v=this.handlers)||void 0===v?void 0:v.isRotating())}_createDelegatedListener(v,t,c){if("mouseenter"===v||"mouseover"===v){let m=!1;return{layer:t,listener:c,delegates:{mousemove:M=>{const k=this.getLayer(t)?this.queryRenderedFeatures(M.point,{layers:[t]}):[];k.length?m||(m=!0,c.call(this,new $n(v,this,M.originalEvent,{features:k}))):m=!1},mouseout:()=>{m=!1}}}}if("mouseleave"===v||"mouseout"===v){let m=!1;return{layer:t,listener:c,delegates:{mousemove:k=>{(this.getLayer(t)?this.queryRenderedFeatures(k.point,{layers:[t]}):[]).length?m=!0:m&&(m=!1,c.call(this,new $n(v,this,k.originalEvent)))},mouseout:k=>{m&&(m=!1,c.call(this,new $n(v,this,k.originalEvent)))}}}}{const m=b=>{const M=this.getLayer(t)?this.queryRenderedFeatures(b.point,{layers:[t]}):[];M.length&&(b.features=M,c.call(this,b),delete b.features)};return{layer:t,listener:c,delegates:{[v]:m}}}}on(v,t,c){if(void 0===c)return super.on(v,t);const m=this._createDelegatedListener(v,t,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(m);for(const b in m.delegates)this.on(b,m.delegates[b]);return this}once(v,t,c){if(void 0===c)return super.once(v,t);const m=this._createDelegatedListener(v,t,c);for(const b in m.delegates)this.once(b,m.delegates[b]);return this}off(v,t,c){return void 0===c?super.off(v,t):(this._delegatedListeners&&this._delegatedListeners[v]&&(m=>{const b=this._delegatedListeners[v];for(let M=0;M<b.length;M++){const k=b[M];if(k.layer===t&&k.listener===c){for(const B in k.delegates)this.off(B,k.delegates[B]);return b.splice(M,1),this}}})(),this)}queryRenderedFeatures(v,t){if(!this.style)return[];let c;const m=v instanceof g.Point||Array.isArray(v),b=m?v:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(m?{}:v)||{},b instanceof g.Point||"number"==typeof b[0])c=[g.Point.convert(b)];else{const M=g.Point.convert(b[0]),k=g.Point.convert(b[1]);c=[M,new g.Point(k.x,M.y),k,new g.Point(M.x,k.y),M]}return this.style.queryRenderedFeatures(c,t,this.transform)}querySourceFeatures(v,t){return this.style.querySourceFeatures(v,t)}setStyle(v,t){return!1!==(t=g.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(v,t))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const t=this._locale[v];if(null==t)throw new Error(`Missing UI string '${v}'`);return t}_updateStyle(v,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,t));const c=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Pi(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof v?this.style.loadURL(v,t,c):this.style.loadJSON(v,t,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Pi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,t){if("string"==typeof v){const c=this._requestManager.transformRequest(v,qe.Style);g.getJSON(c,(m,b)=>{m?this.fire(new g.ErrorEvent(m)):b&&this._updateDiff(b,t)})}else"object"==typeof v&&this._updateDiff(v,t)}_updateDiff(v,t){try{this.style.setState(v,t)&&this._update(!0)}catch(c){g.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(v,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():g.warnOnce("There is no style added to the map.")}addSource(v,t){return this._lazyInitEmptyStyle(),this.style.addSource(v,t),this._update(!0)}isSourceLoaded(v){const t=this.style&&this.style.sourceCaches[v];if(void 0!==t)return t.loaded();this.fire(new g.ErrorEvent(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const t=this.style.sourceCaches[v.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);for(const c in this.style._layers){const m=this.style._layers[c];"hillshade"===m.type&&m.source===v.source&&g.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ur(this.painter,t,v),this.painter.renderToTexture=new ei(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=c=>{"style"===c.dataType?this.terrain.sourceCache.freeRtt():"source"===c.dataType&&c.tile&&(c.sourceId===v.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new g.Event("terrain",{terrain:v})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const t in v){const c=v[t]._tiles;for(const m in c){const b=c[m];if("loaded"!==b.state&&"errored"!==b.state)return!1}}return!0}addSourceType(v,t,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,t,c)}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,t,{pixelRatio:c=1,sdf:m=!1,stretchX:b,stretchY:M,content:k}={}){if(this._lazyInitEmptyStyle(),t instanceof HTMLImageElement||g.isImageBitmap(t)){const{width:B,height:z,data:W}=g.exported.getImageData(t);this.style.addImage(v,{data:new g.RGBAImage({width:B,height:z},W),pixelRatio:c,stretchX:b,stretchY:M,content:k,sdf:m,version:0})}else{if(void 0===t.width||void 0===t.height)return this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:z,data:W}=t,se=t;this.style.addImage(v,{data:new g.RGBAImage({width:B,height:z},new Uint8Array(W)),pixelRatio:c,stretchX:b,stretchY:M,content:k,sdf:m,version:0,userImage:se}),se.onAdd&&se.onAdd(this,v)}}}updateImage(v,t){const c=this.style.getImage(v);if(!c)return this.fire(new g.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=t instanceof HTMLImageElement||g.isImageBitmap(t)?g.exported.getImageData(t):t,{width:b,height:M,data:k}=m;if(void 0===b||void 0===M)return this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==c.data.width||M!==c.data.height)return this.fire(new g.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const B=!(t instanceof HTMLImageElement||g.isImageBitmap(t));c.data.replace(k,B),this.style.updateImage(v,c)}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new g.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,t){$e.getImage(this._requestManager.transformRequest(v,qe.Image),t)}listImages(){return this.style.listImages()}addLayer(v,t){return this._lazyInitEmptyStyle(),this.style.addLayer(v,t),this._update(!0)}moveLayer(v,t){return this.style.moveLayer(v,t),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,t,c){return this.style.setLayerZoomRange(v,t,c),this._update(!0)}setFilter(v,t,c={}){return this.style.setFilter(v,t,c),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,t,c,m={}){return this.style.setPaintProperty(v,t,c,m),this._update(!0)}getPaintProperty(v,t){return this.style.getPaintProperty(v,t)}setLayoutProperty(v,t,c,m={}){return this.style.setLayoutProperty(v,t,c,m),this._update(!0)}getLayoutProperty(v,t){return this.style.getLayoutProperty(v,t)}setGlyphs(v,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,t,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,t,c,m=>{m||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,t,c=>{c||this._update(!0)}),this}setLight(v,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,t){return this.style.setFeatureState(v,t),this._update()}removeFeatureState(v,t){return this.style.removeFeatureState(v,t),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,t=0;return this._container&&(v=this._container.clientWidth||400,t=this._container.clientHeight||300),[v,t]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const t=this._canvasContainer=_e.create("div","maplibregl-canvas-container",v);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=_e.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions();this._resizeCanvas(c[0],c[1],this.getPixelRatio());const m=this._controlContainer=_e.create("div","maplibregl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{b[M]=_e.create("div",`maplibregl-ctrl-${M} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(v){this._onCooperativeGesture(v,v[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=_e.create("div","maplibregl-cooperative-gesture-screen",this._container);let v="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(v="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${v}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){_e.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(v,t,c){this._canvas.width=c*v,this._canvas.height=c*t,this._canvas.style.width=`${v}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{t={requestedAttributes:v},m&&(t.statusMessage=m.statusMessage,t.type=m.type)},{once:!0});const c=this._canvas.getContext("webgl2",v);if(!c){const m="Failed to initialize WebGL";throw t?(t.message=m,new Error(JSON.stringify(t))):new Error(m)}this.painter=new vl(c,this.transform),Ze.testSupport(c)}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new g.Event("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new g.Event("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(v,t,c){return!t&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const t=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,M=g.exported.now();this.style.zoomHistory.update(b,M);const k=new g.EvaluationParameters(b,{now:M,fadeDuration:t,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),B=k.crossFadingFactor();1===B&&B===this._crossFadingFactor||(c=!0,this._crossFadingFactor=B),this.style.update(k)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this.isMoving()&&$e.processQueue(),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,t,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:t,showPadding:this.showPadding}),this.fire(new g.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,g.PerformanceUtils.mark(g.PerformanceMarkers.load),this.fire(new g.Event("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new g.Event("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,g.PerformanceUtils.mark(g.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$e.removeThrottleControl(this._imageQueueHandle),null===(v=this._resizeObserver)||void 0===v||v.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_e.remove(this._canvasContainer),_e.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),g.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new g.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=g.exported.frame(v=>{g.PerformanceUtils.frame(v),this._frame=null,this._render(v)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return"3.0.0-pre.9"}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(v){this.options=g.extend({},bo,v),this._container=_e.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(g.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),_e.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),_e.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(g.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=_e.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map.getZoom(),t=v===this._map.getMaxZoom(),c=v===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())}_rotateCompassArrow(){const v=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=v}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ys(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_e.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,t){const c=_e.create("button",v,this._container);return c.type="button",c.addEventListener("click",t),c}_setButtonTitle(v,t){const c=this._map._getUIString(`NavigationControl.${t}`);v.title=c,v.setAttribute("aria-label",c)}},GeolocateControl:class extends g.Evented{constructor(v){super(),this.options=g.extend({},eu,v),g.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(v){return this._map=v,this._container=_e.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(t,c=!1){void 0===jr||c?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(m=>{jr="denied"!==m.state,t(jr)}).catch(()=>{jr=!!window.navigator.geolocation,t(jr)}):(jr=!!window.navigator.geolocation,t(jr)):t(jr)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_e.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ta=0,zi=!1}_isOutOfMapMaxBounds(v){const t=this._map.getMaxBounds(),c=v.coords;return t&&(c.longitude<t.getWest()||c.longitude>t.getEast()||c.latitude<t.getSouth()||c.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new g.Event("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(v),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(v),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new g.Event("geolocate",v)),this._finish()}}_updateCamera(v){const t=new g.LngLat(v.coords.longitude,v.coords.latitude),c=v.coords.accuracy,m=this._map.getBearing(),b=g.extend({bearing:m},this.options.fitBoundsOptions),M=Xn.fromLngLat(t,c);this._map.fitBounds(M,b,{geolocateSource:!0})}_updateMarker(v){if(v){const t=new g.LngLat(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.getBounds(),t=v.getSouthEast(),c=v.getNorthEast(),m=t.distanceTo(c),b=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(v){if(this._map){if(this.options.trackUserLocation)if(1===v.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===v.code&&zi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new g.Event("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=_e.create("button","maplibregl-ctrl-geolocate",this._container),_e.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===v){g.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_e.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pr(this._dotElement),this._circleElement=_e.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new g.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return g.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new g.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ta--,zi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new g.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new g.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ta++,ta>1?(v={maximumAge:6e5,timeout:0},zi=!0):(v=this.options.positionOptions,zi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:di,LogoControl:Fr,ScaleControl:class{constructor(v){this.options=g.extend({},nl,v),g.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Pc(this._map,this._container,this.options)}onAdd(v){return this._map=v,this._container=_e.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_e.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(v){this.options.unit=v,Pc(this._map,this._container,this.options)}},FullscreenControl:class extends g.Evented{constructor(v={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:g.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=_e.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_e.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=_e.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_e.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new g.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new g.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(v){this.options=v,g.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(v){return this._map=v,this._container=_e.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_e.create("button","maplibregl-ctrl-terrain",this._container),_e.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_e.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends g.Evented{constructor(v){super(),this.options=g.extend(Object.create(Ul),v),g.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new g.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&_e.remove(this._content),this._container&&(_e.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new g.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=g.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const t=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=v;m=c.firstChild,m;)t.appendChild(m);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_e.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}_createCloseButton(){this.options.closeButton&&(this._closeButton=_e.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(v){this._update(v.point)}_onMouseMove(v){this._update(v.point)}_onDrag(v){this._update(v.point)}_update(v){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=_e.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_e.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(M=>this._container.classList.add(M)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=za(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!v))return;const t=this._pos=this._trackPointer&&v?v:this._map.project(this._lngLat);let c=this.options.anchor;const m=nu(this.options.offset);if(!c){const M=this._container.offsetWidth,k=this._container.offsetHeight;let B;B=t.y+m.bottom.y<k?["top"]:t.y>this._map.transform.height-k?["bottom"]:[],t.x<M/2?B.push("left"):t.x>this._map.transform.width-M/2&&B.push("right"),c=0===B.length?"bottom":B.join("-")}const b=t.add(m[c]).round();_e.setTransform(this._container,`${vs[c]} translate(${b.x}px,${b.y}px)`),nr(this._container,c,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(tu);v&&v.focus()}_onClose(){this.remove()}},Marker:pr,Style:Pi,LngLat:g.LngLat,LngLatBounds:Xn,Point:g.Point,MercatorCoordinate:g.MercatorCoordinate,Evented:g.Evented,AJAXError:g.AJAXError,config:g.config,CanvasSource:Vn,GeoJSONSource:Mt,ImageSource:Qt,RasterDEMTileSource:dt,RasterTileSource:hn,VectorTileSource:an,VideoSource:xn,prewarm:function(){he().acquire(Se)},clearPrewarmedResources:function(){const v=ye;v&&(v.isPreloaded()&&1===v.numActive()?(v.release(Se),ye=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"3.0.0-pre.9"},get workerCount(){return Ke.workerCount},set workerCount(v){Ke.workerCount=v},get maxParallelImageRequests(){return g.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){g.config.MAX_PARALLEL_IMAGE_REQUESTS=v},get workerUrl(){return g.config.WORKER_URL},set workerUrl(v){g.config.WORKER_URL=v},addProtocol(v,t){g.config.REGISTERED_PROTOCOLS[v]=t},removeProtocol(v){delete g.config.REGISTERED_PROTOCOLS[v]}};return os.extend(il,{isSafari:g.isSafari,getPerformanceMetrics:g.PerformanceUtils.getPerformanceMetrics}),il}),T}()},7340:(sn,ut,j)=>{"use strict";j.d(ut,{F4:()=>je,IO:()=>$e,LC:()=>l,SB:()=>Ue,X$:()=>g,ZE:()=>tn,ZN:()=>wt,_j:()=>T,eR:()=>Je,jt:()=>Ge,k1:()=>Zt,l3:()=>Z,oB:()=>Ae,pV:()=>et,vP:()=>Ze});class T{}class l{}const Z="*";function g(bt,Re){return{type:7,name:bt,definitions:Re,options:{}}}function Ge(bt,Re=null){return{type:4,styles:Re,timings:bt}}function Ze(bt,Re=null){return{type:2,steps:bt,options:Re}}function Ae(bt){return{type:6,styles:bt,offset:null}}function Ue(bt,Re,ze){return{type:0,name:bt,styles:Re,options:ze}}function je(bt){return{type:5,steps:bt}}function Je(bt,Re,ze=null){return{type:1,expr:bt,animation:Re,options:ze}}function et(bt=null){return{type:9,options:bt}}function $e(bt,Re,ze=null){return{type:11,selector:bt,animation:Re,options:ze}}function pt(bt){Promise.resolve().then(bt)}class wt{constructor(Re=0,ze=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Re+ze}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Re=>Re()),this._onDoneFns=[])}onStart(Re){this._originalOnStartFns.push(Re),this._onStartFns.push(Re)}onDone(Re){this._originalOnDoneFns.push(Re),this._onDoneFns.push(Re)}onDestroy(Re){this._onDestroyFns.push(Re)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Re=>Re()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Re=>Re()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Re){this._position=this.totalTime?Re*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Re){const ze="start"==Re?this._onStartFns:this._onDoneFns;ze.forEach(It=>It()),ze.length=0}}class tn{constructor(Re){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Re;let ze=0,It=0,At=0;const kt=this.players.length;0==kt?pt(()=>this._onFinish()):this.players.forEach(jt=>{jt.onDone(()=>{++ze==kt&&this._onFinish()}),jt.onDestroy(()=>{++It==kt&&this._onDestroy()}),jt.onStart(()=>{++At==kt&&this._onStart()})}),this.totalTime=this.players.reduce((jt,nt)=>Math.max(jt,nt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Re=>Re()),this._onDoneFns=[])}init(){this.players.forEach(Re=>Re.init())}onStart(Re){this._onStartFns.push(Re)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Re=>Re()),this._onStartFns=[])}onDone(Re){this._onDoneFns.push(Re)}onDestroy(Re){this._onDestroyFns.push(Re)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Re=>Re.play())}pause(){this.players.forEach(Re=>Re.pause())}restart(){this.players.forEach(Re=>Re.restart())}finish(){this._onFinish(),this.players.forEach(Re=>Re.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Re=>Re.destroy()),this._onDestroyFns.forEach(Re=>Re()),this._onDestroyFns=[])}reset(){this.players.forEach(Re=>Re.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Re){const ze=Re*this.totalTime;this.players.forEach(It=>{const At=It.totalTime?Math.min(1,ze/It.totalTime):1;It.setPosition(At)})}getPosition(){const Re=this.players.reduce((ze,It)=>null===ze||It.totalTime>ze.totalTime?It:ze,null);return null!=Re?Re.getPosition():0}beforeDestroy(){this.players.forEach(Re=>{Re.beforeDestroy&&Re.beforeDestroy()})}triggerCallback(Re){const ze="start"==Re?this._onStartFns:this._onDoneFns;ze.forEach(It=>It()),ze.length=0}}const Zt="!"},2687:(sn,ut,j)=>{"use strict";j.d(ut,{$s:()=>nt,Em:()=>qt,Kd:()=>rt,X6:()=>Xe,ic:()=>Jn,qV:()=>Qn,qm:()=>ie,rt:()=>V,s1:()=>Yt,tE:()=>mn,yG:()=>Y});var T=j(6895),l=j(4650),Z=j(3353),g=j(7579),Ge=j(727),_e=j(1135),Ze=j(9646),Ae=j(9521),Ue=j(8505),je=j(8372),Je=j(9300),Le=j(4004),et=j(5698),qe=j(5684),$e=j(1884),mt=j(2722),pt=j(1281),wt=j(9643),tn=j(2289);function ze(U,$){return(U.getAttribute($)||"").match(/\S+/g)||[]}const At="cdk-describedby-message",kt="cdk-describedby-host";let jt=0,nt=(()=>{class U{constructor(X,ce){this._platform=ce,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+jt++,this._document=X,this._id=(0,l.f3M)(l.AFp)+"-"+jt++}describe(X,ce,Ce){if(!this._canBeDescribed(X,ce))return;const ke=at(ce,Ce);"string"!=typeof ce?(xt(ce,this._id),this._messageRegistry.set(ke,{messageElement:ce,referenceCount:0})):this._messageRegistry.has(ke)||this._createMessageElement(ce,Ce),this._isElementDescribedByMessage(X,ke)||this._addMessageReference(X,ke)}removeDescription(X,ce,Ce){if(!ce||!this._isElementNode(X))return;const ke=at(ce,Ce);if(this._isElementDescribedByMessage(X,ke)&&this._removeMessageReference(X,ke),"string"==typeof ce){const Ie=this._messageRegistry.get(ke);Ie&&0===Ie.referenceCount&&this._deleteMessageElement(ke)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const X=this._document.querySelectorAll(`[${kt}="${this._id}"]`);for(let ce=0;ce<X.length;ce++)this._removeCdkDescribedByReferenceIds(X[ce]),X[ce].removeAttribute(kt);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(X,ce){const Ce=this._document.createElement("div");xt(Ce,this._id),Ce.textContent=X,ce&&Ce.setAttribute("role",ce),this._createMessagesContainer(),this._messagesContainer.appendChild(Ce),this._messageRegistry.set(at(X,ce),{messageElement:Ce,referenceCount:0})}_deleteMessageElement(X){this._messageRegistry.get(X)?.messageElement?.remove(),this._messageRegistry.delete(X)}_createMessagesContainer(){if(this._messagesContainer)return;const X="cdk-describedby-message-container",ce=this._document.querySelectorAll(`.${X}[platform="server"]`);for(let ke=0;ke<ce.length;ke++)ce[ke].remove();const Ce=this._document.createElement("div");Ce.style.visibility="hidden",Ce.classList.add(X),Ce.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&Ce.setAttribute("platform","server"),this._document.body.appendChild(Ce),this._messagesContainer=Ce}_removeCdkDescribedByReferenceIds(X){const ce=ze(X,"aria-describedby").filter(Ce=>0!=Ce.indexOf(At));X.setAttribute("aria-describedby",ce.join(" "))}_addMessageReference(X,ce){const Ce=this._messageRegistry.get(ce);(function bt(U,$,X){const ce=ze(U,$);ce.some(Ce=>Ce.trim()==X.trim())||(ce.push(X.trim()),U.setAttribute($,ce.join(" ")))})(X,"aria-describedby",Ce.messageElement.id),X.setAttribute(kt,this._id),Ce.referenceCount++}_removeMessageReference(X,ce){const Ce=this._messageRegistry.get(ce);Ce.referenceCount--,function Re(U,$,X){const Ce=ze(U,$).filter(ke=>ke!=X.trim());Ce.length?U.setAttribute($,Ce.join(" ")):U.removeAttribute($)}(X,"aria-describedby",Ce.messageElement.id),X.removeAttribute(kt)}_isElementDescribedByMessage(X,ce){const Ce=ze(X,"aria-describedby"),ke=this._messageRegistry.get(ce),Ie=ke&&ke.messageElement.id;return!!Ie&&-1!=Ce.indexOf(Ie)}_canBeDescribed(X,ce){if(!this._isElementNode(X))return!1;if(ce&&"object"==typeof ce)return!0;const Ce=null==ce?"":`${ce}`.trim(),ke=X.getAttribute("aria-label");return!(!Ce||ke&&ke.trim()===Ce)}_isElementNode(X){return X.nodeType===this._document.ELEMENT_NODE}}return U.\u0275fac=function(X){return new(X||U)(l.LFG(T.K0),l.LFG(Z.t4))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function at(U,$){return"string"==typeof U?`${$||""}/${U}`:U}function xt(U,$){U.id||(U.id=`${At}-${$}-${jt++}`)}class _t{constructor($){this._items=$,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new g.x,this._typeaheadSubscription=Ge.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=X=>X.disabled,this._pressedLetters=[],this.tabOut=new g.x,this.change=new g.x,$ instanceof l.n_E&&$.changes.subscribe(X=>{if(this._activeItem){const Ce=X.toArray().indexOf(this._activeItem);Ce>-1&&Ce!==this._activeItemIndex&&(this._activeItemIndex=Ce)}})}skipPredicate($){return this._skipPredicateFn=$,this}withWrap($=!0){return this._wrap=$,this}withVerticalOrientation($=!0){return this._vertical=$,this}withHorizontalOrientation($){return this._horizontal=$,this}withAllowedModifierKeys($){return this._allowedModifierKeys=$,this}withTypeAhead($=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Ue.b)(X=>this._pressedLetters.push(X)),(0,je.b)($),(0,Je.h)(()=>this._pressedLetters.length>0),(0,Le.U)(()=>this._pressedLetters.join(""))).subscribe(X=>{const ce=this._getItemsArray();for(let Ce=1;Ce<ce.length+1;Ce++){const ke=(this._activeItemIndex+Ce)%ce.length,Ie=ce[ke];if(!this._skipPredicateFn(Ie)&&0===Ie.getLabel().toUpperCase().trim().indexOf(X)){this.setActiveItem(ke);break}}this._pressedLetters=[]}),this}withHomeAndEnd($=!0){return this._homeAndEnd=$,this}setActiveItem($){const X=this._activeItem;this.updateActiveItem($),this._activeItem!==X&&this.change.next(this._activeItemIndex)}onKeydown($){const X=$.keyCode,Ce=["altKey","ctrlKey","metaKey","shiftKey"].every(ke=>!$[ke]||this._allowedModifierKeys.indexOf(ke)>-1);switch(X){case Ae.Mf:return void this.tabOut.next();case Ae.JH:if(this._vertical&&Ce){this.setNextItemActive();break}return;case Ae.LH:if(this._vertical&&Ce){this.setPreviousItemActive();break}return;case Ae.SV:if(this._horizontal&&Ce){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Ae.oh:if(this._horizontal&&Ce){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Ae.Sd:if(this._homeAndEnd&&Ce){this.setFirstItemActive();break}return;case Ae.uR:if(this._homeAndEnd&&Ce){this.setLastItemActive();break}return;default:return void((Ce||(0,Ae.Vb)($,"shiftKey"))&&($.key&&1===$.key.length?this._letterKeyStream.next($.key.toLocaleUpperCase()):(X>=Ae.A&&X<=Ae.Z||X>=Ae.xE&&X<=Ae.aO)&&this._letterKeyStream.next(String.fromCharCode(X))))}this._pressedLetters=[],$.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem($){const X=this._getItemsArray(),ce="number"==typeof $?$:X.indexOf($);this._activeItem=X[ce]??null,this._activeItemIndex=ce}_setActiveItemByDelta($){this._wrap?this._setActiveInWrapMode($):this._setActiveInDefaultMode($)}_setActiveInWrapMode($){const X=this._getItemsArray();for(let ce=1;ce<=X.length;ce++){const Ce=(this._activeItemIndex+$*ce+X.length)%X.length;if(!this._skipPredicateFn(X[Ce]))return void this.setActiveItem(Ce)}}_setActiveInDefaultMode($){this._setActiveItemByIndex(this._activeItemIndex+$,$)}_setActiveItemByIndex($,X){const ce=this._getItemsArray();if(ce[$]){for(;this._skipPredicateFn(ce[$]);)if(!ce[$+=X])return;this.setActiveItem($)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class Yt extends _t{setActiveItem($){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem($),this.activeItem&&this.activeItem.setActiveStyles()}}class qt extends _t{constructor(){super(...arguments),this._origin="program"}setFocusOrigin($){return this._origin=$,this}setActiveItem($){super.setActiveItem($),this.activeItem&&this.activeItem.focus(this._origin)}}let Jn=(()=>{class U{constructor(X){this._platform=X}isDisabled(X){return X.hasAttribute("disabled")}isVisible(X){return function Xt(U){return!!(U.offsetWidth||U.offsetHeight||"function"==typeof U.getClientRects&&U.getClientRects().length)}(X)&&"visible"===getComputedStyle(X).visibility}isTabbable(X){if(!this._platform.isBrowser)return!1;const ce=function hi(U){try{return U.frameElement}catch{return null}}(function xn(U){return U.ownerDocument&&U.ownerDocument.defaultView||window}(X));if(ce&&(-1===Mt(ce)||!this.isVisible(ce)))return!1;let Ce=X.nodeName.toLowerCase(),ke=Mt(X);return X.hasAttribute("contenteditable")?-1!==ke:!("iframe"===Ce||"object"===Ce||this._platform.WEBKIT&&this._platform.IOS&&!function Kt(U){let $=U.nodeName.toLowerCase(),X="input"===$&&U.type;return"text"===X||"password"===X||"select"===$||"textarea"===$}(X))&&("audio"===Ce?!!X.hasAttribute("controls")&&-1!==ke:"video"===Ce?-1!==ke&&(null!==ke||this._platform.FIREFOX||X.hasAttribute("controls")):X.tabIndex>=0)}isFocusable(X,ce){return function Qt(U){return!function Xn(U){return function an(U){return"input"==U.nodeName.toLowerCase()}(U)&&"hidden"==U.type}(U)&&(function ui(U){let $=U.nodeName.toLowerCase();return"input"===$||"select"===$||"button"===$||"textarea"===$}(U)||function ai(U){return function hn(U){return"a"==U.nodeName.toLowerCase()}(U)&&U.hasAttribute("href")}(U)||U.hasAttribute("contenteditable")||dt(U))}(X)&&!this.isDisabled(X)&&(ce?.ignoreVisibility||this.isVisible(X))}}return U.\u0275fac=function(X){return new(X||U)(l.LFG(Z.t4))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function dt(U){if(!U.hasAttribute("tabindex")||void 0===U.tabIndex)return!1;let $=U.getAttribute("tabindex");return!(!$||isNaN(parseInt($,10)))}function Mt(U){if(!dt(U))return null;const $=parseInt(U.getAttribute("tabindex")||"",10);return isNaN($)?-1:$}class Vn{constructor($,X,ce,Ce,ke=!1){this._element=$,this._checker=X,this._ngZone=ce,this._document=Ce,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,ke||this.attachAnchors()}get enabled(){return this._enabled}set enabled($){this._enabled=$,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex($,this._startAnchor),this._toggleAnchorTabIndex($,this._endAnchor))}destroy(){const $=this._startAnchor,X=this._endAnchor;$&&($.removeEventListener("focus",this.startAnchorListener),$.remove()),X&&(X.removeEventListener("focus",this.endAnchorListener),X.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady($){return new Promise(X=>{this._executeOnStable(()=>X(this.focusInitialElement($)))})}focusFirstTabbableElementWhenReady($){return new Promise(X=>{this._executeOnStable(()=>X(this.focusFirstTabbableElement($)))})}focusLastTabbableElementWhenReady($){return new Promise(X=>{this._executeOnStable(()=>X(this.focusLastTabbableElement($)))})}_getRegionBoundary($){const X=this._element.querySelectorAll(`[cdk-focus-region-${$}], [cdkFocusRegion${$}], [cdk-focus-${$}]`);return"start"==$?X.length?X[0]:this._getFirstTabbableElement(this._element):X.length?X[X.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement($){const X=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(X){if(!this._checker.isFocusable(X)){const ce=this._getFirstTabbableElement(X);return ce?.focus($),!!ce}return X.focus($),!0}return this.focusFirstTabbableElement($)}focusFirstTabbableElement($){const X=this._getRegionBoundary("start");return X&&X.focus($),!!X}focusLastTabbableElement($){const X=this._getRegionBoundary("end");return X&&X.focus($),!!X}hasAttached(){return this._hasAttached}_getFirstTabbableElement($){if(this._checker.isFocusable($)&&this._checker.isTabbable($))return $;const X=$.children;for(let ce=0;ce<X.length;ce++){const Ce=X[ce].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(X[ce]):null;if(Ce)return Ce}return null}_getLastTabbableElement($){if(this._checker.isFocusable($)&&this._checker.isTabbable($))return $;const X=$.children;for(let ce=X.length-1;ce>=0;ce--){const Ce=X[ce].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(X[ce]):null;if(Ce)return Ce}return null}_createAnchor(){const $=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,$),$.classList.add("cdk-visually-hidden"),$.classList.add("cdk-focus-trap-anchor"),$.setAttribute("aria-hidden","true"),$}_toggleAnchorTabIndex($,X){$?X.setAttribute("tabindex","0"):X.removeAttribute("tabindex")}toggleAnchors($){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex($,this._startAnchor),this._toggleAnchorTabIndex($,this._endAnchor))}_executeOnStable($){this._ngZone.isStable?$():this._ngZone.onStable.pipe((0,et.q)(1)).subscribe($)}}let Qn=(()=>{class U{constructor(X,ce,Ce){this._checker=X,this._ngZone=ce,this._document=Ce}create(X,ce=!1){return new Vn(X,this._checker,this._ngZone,this._document,ce)}}return U.\u0275fac=function(X){return new(X||U)(l.LFG(Jn),l.LFG(l.R0b),l.LFG(T.K0))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function Xe(U){return 0===U.buttons||0===U.offsetX&&0===U.offsetY}function Y(U){const $=U.touches&&U.touches[0]||U.changedTouches&&U.changedTouches[0];return!(!$||-1!==$.identifier||null!=$.radiusX&&1!==$.radiusX||null!=$.radiusY&&1!==$.radiusY)}const te=new l.OlP("cdk-input-modality-detector-options"),Se={ignoreKeys:[Ae.zL,Ae.jx,Ae.b2,Ae.MW,Ae.JU]},me=(0,Z.i$)({passive:!0,capture:!0});let ye=(()=>{class U{constructor(X,ce,Ce,ke){this._platform=X,this._mostRecentTarget=null,this._modality=new _e.X(null),this._lastTouchMs=0,this._onKeydown=Ie=>{this._options?.ignoreKeys?.some(Qe=>Qe===Ie.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,Z.sA)(Ie))},this._onMousedown=Ie=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Xe(Ie)?"keyboard":"mouse"),this._mostRecentTarget=(0,Z.sA)(Ie))},this._onTouchstart=Ie=>{Y(Ie)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,Z.sA)(Ie))},this._options={...Se,...ke},this.modalityDetected=this._modality.pipe((0,qe.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,$e.x)()),X.isBrowser&&ce.runOutsideAngular(()=>{Ce.addEventListener("keydown",this._onKeydown,me),Ce.addEventListener("mousedown",this._onMousedown,me),Ce.addEventListener("touchstart",this._onTouchstart,me)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,me),document.removeEventListener("mousedown",this._onMousedown,me),document.removeEventListener("touchstart",this._onTouchstart,me))}}return U.\u0275fac=function(X){return new(X||U)(l.LFG(Z.t4),l.LFG(l.R0b),l.LFG(T.K0),l.LFG(te,8))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();const he=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function ge(){return null}}),Pe=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let rt=(()=>{class U{constructor(X,ce,Ce,ke){this._ngZone=ce,this._defaultOptions=ke,this._document=Ce,this._liveElement=X||this._createLiveElement()}announce(X,...ce){const Ce=this._defaultOptions;let ke,Ie;return 1===ce.length&&"number"==typeof ce[0]?Ie=ce[0]:[ke,Ie]=ce,this.clear(),clearTimeout(this._previousTimeout),ke||(ke=Ce&&Ce.politeness?Ce.politeness:"polite"),null==Ie&&Ce&&(Ie=Ce.duration),this._liveElement.setAttribute("aria-live",ke),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(Qe=>this._currentResolve=Qe)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=X,"number"==typeof Ie&&(this._previousTimeout=setTimeout(()=>this.clear(),Ie)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const X="cdk-live-announcer-element",ce=this._document.getElementsByClassName(X),Ce=this._document.createElement("div");for(let ke=0;ke<ce.length;ke++)ce[ke].remove();return Ce.classList.add(X),Ce.classList.add("cdk-visually-hidden"),Ce.setAttribute("aria-atomic","true"),Ce.setAttribute("aria-live","polite"),this._document.body.appendChild(Ce),Ce}}return U.\u0275fac=function(X){return new(X||U)(l.LFG(he,8),l.LFG(l.R0b),l.LFG(T.K0),l.LFG(Pe,8))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();const ln=new l.OlP("cdk-focus-monitor-default-options"),Rt=(0,Z.i$)({passive:!0,capture:!0});let mn=(()=>{class U{constructor(X,ce,Ce,ke,Ie){this._ngZone=X,this._platform=ce,this._inputModalityDetector=Ce,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new g.x,this._rootNodeFocusAndBlurListener=Qe=>{for(let yt=(0,Z.sA)(Qe);yt;yt=yt.parentElement)"focus"===Qe.type?this._onFocus(Qe,yt):this._onBlur(Qe,yt)},this._document=ke,this._detectionMode=Ie?.detectionMode||0}monitor(X,ce=!1){const Ce=(0,pt.fI)(X);if(!this._platform.isBrowser||1!==Ce.nodeType)return(0,Ze.of)(null);const ke=(0,Z.kV)(Ce)||this._getDocument(),Ie=this._elementInfo.get(Ce);if(Ie)return ce&&(Ie.checkChildren=!0),Ie.subject;const Qe={checkChildren:ce,subject:new g.x,rootNode:ke};return this._elementInfo.set(Ce,Qe),this._registerGlobalListeners(Qe),Qe.subject}stopMonitoring(X){const ce=(0,pt.fI)(X),Ce=this._elementInfo.get(ce);Ce&&(Ce.subject.complete(),this._setClasses(ce),this._elementInfo.delete(ce),this._removeGlobalListeners(Ce))}focusVia(X,ce,Ce){const ke=(0,pt.fI)(X);ke===this._getDocument().activeElement?this._getClosestElementsInfo(ke).forEach(([Qe,Ft])=>this._originChanged(Qe,ce,Ft)):(this._setOrigin(ce),"function"==typeof ke.focus&&ke.focus(Ce))}ngOnDestroy(){this._elementInfo.forEach((X,ce)=>this.stopMonitoring(ce))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(X){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(X)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:X&&this._isLastInteractionFromInputLabel(X)?"mouse":"program"}_shouldBeAttributedToTouch(X){return 1===this._detectionMode||!!X?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(X,ce){X.classList.toggle("cdk-focused",!!ce),X.classList.toggle("cdk-touch-focused","touch"===ce),X.classList.toggle("cdk-keyboard-focused","keyboard"===ce),X.classList.toggle("cdk-mouse-focused","mouse"===ce),X.classList.toggle("cdk-program-focused","program"===ce)}_setOrigin(X,ce=!1){this._ngZone.runOutsideAngular(()=>{this._origin=X,this._originFromTouchInteraction="touch"===X&&ce,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(X,ce){const Ce=this._elementInfo.get(ce),ke=(0,Z.sA)(X);!Ce||!Ce.checkChildren&&ce!==ke||this._originChanged(ce,this._getFocusOrigin(ke),Ce)}_onBlur(X,ce){const Ce=this._elementInfo.get(ce);!Ce||Ce.checkChildren&&X.relatedTarget instanceof Node&&ce.contains(X.relatedTarget)||(this._setClasses(ce),this._emitOrigin(Ce,null))}_emitOrigin(X,ce){X.subject.observers.length&&this._ngZone.run(()=>X.subject.next(ce))}_registerGlobalListeners(X){if(!this._platform.isBrowser)return;const ce=X.rootNode,Ce=this._rootNodeFocusListenerCount.get(ce)||0;Ce||this._ngZone.runOutsideAngular(()=>{ce.addEventListener("focus",this._rootNodeFocusAndBlurListener,Rt),ce.addEventListener("blur",this._rootNodeFocusAndBlurListener,Rt)}),this._rootNodeFocusListenerCount.set(ce,Ce+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,mt.R)(this._stopInputModalityDetector)).subscribe(ke=>{this._setOrigin(ke,!0)}))}_removeGlobalListeners(X){const ce=X.rootNode;if(this._rootNodeFocusListenerCount.has(ce)){const Ce=this._rootNodeFocusListenerCount.get(ce);Ce>1?this._rootNodeFocusListenerCount.set(ce,Ce-1):(ce.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Rt),ce.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Rt),this._rootNodeFocusListenerCount.delete(ce))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(X,ce,Ce){this._setClasses(X,ce),this._emitOrigin(Ce,ce),this._lastFocusOrigin=ce}_getClosestElementsInfo(X){const ce=[];return this._elementInfo.forEach((Ce,ke)=>{(ke===X||Ce.checkChildren&&ke.contains(X))&&ce.push([ke,Ce])}),ce}_isLastInteractionFromInputLabel(X){const{_mostRecentTarget:ce,mostRecentModality:Ce}=this._inputModalityDetector;if("mouse"!==Ce||!ce||ce===X||"INPUT"!==X.nodeName&&"TEXTAREA"!==X.nodeName||X.disabled)return!1;const ke=X.labels;if(ke)for(let Ie=0;Ie<ke.length;Ie++)if(ke[Ie].contains(ce))return!0;return!1}}return U.\u0275fac=function(X){return new(X||U)(l.LFG(l.R0b),l.LFG(Z.t4),l.LFG(ye),l.LFG(T.K0,8),l.LFG(ln,8))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();const ji="cdk-high-contrast-black-on-white",Lt="cdk-high-contrast-white-on-black",ft="cdk-high-contrast-active";let ie=(()=>{class U{constructor(X,ce){this._platform=X,this._document=ce,this._breakpointSubscription=(0,l.f3M)(tn.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const X=this._document.createElement("div");X.style.backgroundColor="rgb(1,2,3)",X.style.position="absolute",this._document.body.appendChild(X);const ce=this._document.defaultView||window,Ce=ce&&ce.getComputedStyle?ce.getComputedStyle(X):null,ke=(Ce&&Ce.backgroundColor||"").replace(/ /g,"");switch(X.remove(),ke){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const X=this._document.body.classList;X.remove(ft,ji,Lt),this._hasCheckedHighContrastMode=!0;const ce=this.getHighContrastMode();1===ce?X.add(ft,ji):2===ce&&X.add(ft,Lt)}}}return U.\u0275fac=function(X){return new(X||U)(l.LFG(Z.t4),l.LFG(T.K0))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})(),V=(()=>{class U{constructor(X){X._applyBodyHighContrastModeCssClasses()}}return U.\u0275fac=function(X){return new(X||U)(l.LFG(ie))},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({imports:[wt.Q8]}),U})()},445:(sn,ut,j)=>{"use strict";j.d(ut,{Is:()=>Ze,vT:()=>Ue});var T=j(4650),l=j(6895);const Z=new T.OlP("cdk-dir-doc",{providedIn:"root",factory:function g(){return(0,T.f3M)(l.K0)}}),Ge=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ze=(()=>{class je{constructor(Le){if(this.value="ltr",this.change=new T.vpe,Le){const qe=Le.documentElement?Le.documentElement.dir:null;this.value=function _e(je){const Je=je?.toLowerCase()||"";return"auto"===Je&&typeof navigator<"u"&&navigator?.language?Ge.test(navigator.language)?"rtl":"ltr":"rtl"===Je?"rtl":"ltr"}((Le.body?Le.body.dir:null)||qe||"ltr")}}ngOnDestroy(){this.change.complete()}}return je.\u0275fac=function(Le){return new(Le||je)(T.LFG(Z,8))},je.\u0275prov=T.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),Ue=(()=>{class je{}return je.\u0275fac=function(Le){return new(Le||je)},je.\u0275mod=T.oAB({type:je}),je.\u0275inj=T.cJS({}),je})()},1281:(sn,ut,j)=>{"use strict";j.d(ut,{Eq:()=>Ge,HM:()=>_e,Ig:()=>l,fI:()=>Ze,su:()=>Z});var T=j(4650);function l(Ue){return null!=Ue&&"false"!=`${Ue}`}function Z(Ue,je=0){return function g(Ue){return!isNaN(parseFloat(Ue))&&!isNaN(Number(Ue))}(Ue)?Number(Ue):je}function Ge(Ue){return Array.isArray(Ue)?Ue:[Ue]}function _e(Ue){return null==Ue?"":"string"==typeof Ue?Ue:`${Ue}px`}function Ze(Ue){return Ue instanceof T.SBq?Ue.nativeElement:Ue}},5017:(sn,ut,j)=>{"use strict";j.d(ut,{A8:()=>je,Ov:()=>Ae});var T=j(7579),l=j(4650);class Ae{constructor(et=!1,qe,$e=!0,mt){this._multiple=et,this._emitChanges=$e,this.compareWith=mt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new T.x,qe&&qe.length&&(et?qe.forEach(pt=>this._markSelected(pt)):this._markSelected(qe[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...et){this._verifyValueAssignment(et),et.forEach($e=>this._markSelected($e));const qe=this._hasQueuedChanges();return this._emitChangeEvent(),qe}deselect(...et){this._verifyValueAssignment(et),et.forEach($e=>this._unmarkSelected($e));const qe=this._hasQueuedChanges();return this._emitChangeEvent(),qe}setSelection(...et){this._verifyValueAssignment(et);const qe=this.selected,$e=new Set(et);et.forEach(pt=>this._markSelected(pt)),qe.filter(pt=>!$e.has(pt)).forEach(pt=>this._unmarkSelected(pt));const mt=this._hasQueuedChanges();return this._emitChangeEvent(),mt}toggle(et){return this.isSelected(et)?this.deselect(et):this.select(et)}clear(et=!0){this._unmarkAll();const qe=this._hasQueuedChanges();return et&&this._emitChangeEvent(),qe}isSelected(et){if(this.compareWith){for(const qe of this._selection)if(this.compareWith(qe,et))return!0;return!1}return this._selection.has(et)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(et){this._multiple&&this.selected&&this._selected.sort(et)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(et){this.isSelected(et)||(this._multiple||this._unmarkAll(),this.isSelected(et)||this._selection.add(et),this._emitChanges&&this._selectedToEmit.push(et))}_unmarkSelected(et){this.isSelected(et)&&(this._selection.delete(et),this._emitChanges&&this._deselectedToEmit.push(et))}_unmarkAll(){this.isEmpty()||this._selection.forEach(et=>this._unmarkSelected(et))}_verifyValueAssignment(et){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let je=(()=>{class Le{constructor(){this._listeners=[]}notify(qe,$e){for(let mt of this._listeners)mt(qe,$e)}listen(qe){return this._listeners.push(qe),()=>{this._listeners=this._listeners.filter($e=>qe!==$e)}}ngOnDestroy(){this._listeners=[]}}return Le.\u0275fac=function(qe){return new(qe||Le)},Le.\u0275prov=l.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})()},9521:(sn,ut,j)=>{"use strict";j.d(ut,{A:()=>Xn,JH:()=>Zt,JU:()=>_e,K5:()=>Ge,LH:()=>wt,L_:()=>Le,MW:()=>Pe,Mf:()=>Z,SV:()=>tn,Sd:()=>mt,Vb:()=>Ii,Z:()=>ge,aO:()=>On,b2:()=>Rr,hY:()=>Je,jx:()=>Ze,oh:()=>pt,uR:()=>$e,xE:()=>At,zL:()=>Ae});const Z=9,Ge=13,_e=16,Ze=17,Ae=18,Je=27,Le=32,$e=35,mt=36,pt=37,wt=38,tn=39,Zt=40,At=48,On=57,Xn=65,ge=90,Pe=91,Rr=224;function Ii(Zn,...lr){return lr.length?lr.some(cr=>Zn[cr]):Zn.altKey||Zn.shiftKey||Zn.ctrlKey||Zn.metaKey}},2289:(sn,ut,j)=>{"use strict";j.d(ut,{Yg:()=>Zt,u3:()=>Re});var T=j(4650),l=j(1281),Z=j(7579),g=j(9841),Ge=j(7272),_e=j(9751),Ze=j(5698),Ae=j(5684),Ue=j(8372),je=j(4004),Je=j(8675),Le=j(2722),et=j(3353);const $e=new Set;let mt,pt=(()=>{class ze{constructor(At){this._platform=At,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):tn}matchMedia(At){return(this._platform.WEBKIT||this._platform.BLINK)&&function wt(ze){if(!$e.has(ze))try{mt||(mt=document.createElement("style"),mt.setAttribute("type","text/css"),document.head.appendChild(mt)),mt.sheet&&(mt.sheet.insertRule(`@media ${ze} {body{ }}`,0),$e.add(ze))}catch(It){console.error(It)}}(At),this._matchMedia(At)}}return ze.\u0275fac=function(At){return new(At||ze)(T.LFG(et.t4))},ze.\u0275prov=T.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})();function tn(ze){return{matches:"all"===ze||""===ze,media:ze,addListener:()=>{},removeListener:()=>{}}}let Zt=(()=>{class ze{constructor(At,kt){this._mediaMatcher=At,this._zone=kt,this._queries=new Map,this._destroySubject=new Z.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(At){return bt((0,l.Eq)(At)).some(jt=>this._registerQuery(jt).mql.matches)}observe(At){const jt=bt((0,l.Eq)(At)).map(at=>this._registerQuery(at).observable);let nt=(0,g.a)(jt);return nt=(0,Ge.z)(nt.pipe((0,Ze.q)(1)),nt.pipe((0,Ae.T)(1),(0,Ue.b)(0))),nt.pipe((0,je.U)(at=>{const xt={matches:!1,breakpoints:{}};return at.forEach(({matches:_t,query:Yt})=>{xt.matches=xt.matches||_t,xt.breakpoints[Yt]=_t}),xt}))}_registerQuery(At){if(this._queries.has(At))return this._queries.get(At);const kt=this._mediaMatcher.matchMedia(At),nt={observable:new _e.y(at=>{const xt=_t=>this._zone.run(()=>at.next(_t));return kt.addListener(xt),()=>{kt.removeListener(xt)}}).pipe((0,Je.O)(kt),(0,je.U)(({matches:at})=>({query:At,matches:at})),(0,Le.R)(this._destroySubject)),mql:kt};return this._queries.set(At,nt),nt}}return ze.\u0275fac=function(At){return new(At||ze)(T.LFG(pt),T.LFG(T.R0b))},ze.\u0275prov=T.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})();function bt(ze){return ze.map(It=>It.split(",")).reduce((It,At)=>It.concat(At)).map(It=>It.trim())}const Re={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},9643:(sn,ut,j)=>{"use strict";j.d(ut,{Q8:()=>Ue,wD:()=>Ae});var T=j(1281),l=j(4650),Z=j(9751),g=j(7579),Ge=j(8372);let _e=(()=>{class je{create(Le){return typeof MutationObserver>"u"?null:new MutationObserver(Le)}}return je.\u0275fac=function(Le){return new(Le||je)},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),Ze=(()=>{class je{constructor(Le){this._mutationObserverFactory=Le,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Le,et)=>this._cleanupObserver(et))}observe(Le){const et=(0,T.fI)(Le);return new Z.y(qe=>{const mt=this._observeElement(et).subscribe(qe);return()=>{mt.unsubscribe(),this._unobserveElement(et)}})}_observeElement(Le){if(this._observedElements.has(Le))this._observedElements.get(Le).count++;else{const et=new g.x,qe=this._mutationObserverFactory.create($e=>et.next($e));qe&&qe.observe(Le,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Le,{observer:qe,stream:et,count:1})}return this._observedElements.get(Le).stream}_unobserveElement(Le){this._observedElements.has(Le)&&(this._observedElements.get(Le).count--,this._observedElements.get(Le).count||this._cleanupObserver(Le))}_cleanupObserver(Le){if(this._observedElements.has(Le)){const{observer:et,stream:qe}=this._observedElements.get(Le);et&&et.disconnect(),qe.complete(),this._observedElements.delete(Le)}}}return je.\u0275fac=function(Le){return new(Le||je)(l.LFG(_e))},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),Ae=(()=>{class je{constructor(Le,et,qe){this._contentObserver=Le,this._elementRef=et,this._ngZone=qe,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(Le){this._disabled=(0,T.Ig)(Le),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Le){this._debounce=(0,T.su)(Le),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Le=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Le.pipe((0,Ge.b)(this.debounce)):Le).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return je.\u0275fac=function(Le){return new(Le||je)(l.Y36(Ze),l.Y36(l.SBq),l.Y36(l.R0b))},je.\u0275dir=l.lG2({type:je,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),je})(),Ue=(()=>{class je{}return je.\u0275fac=function(Le){return new(Le||je)},je.\u0275mod=l.oAB({type:je}),je.\u0275inj=l.cJS({providers:[_e]}),je})()},8184:(sn,ut,j)=>{"use strict";j.d(ut,{U8:()=>un,aV:()=>xn,pI:()=>Fi,xu:()=>pi});var T=j(8605),l=j(6895),Z=j(4650),g=j(1281),Ge=j(3353),_e=j(445),Ze=j(4080),Ae=j(7579),Ue=j(727),je=j(6451),Je=j(5698),Le=j(2722),et=j(2529),qe=j(9521);const $e=(0,Ge.Mq)();class mt{constructor(Y,te){this._viewportRuler=Y,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=te}attach(){}enable(){if(this._canBeEnabled()){const Y=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=Y.style.left||"",this._previousHTMLStyles.top=Y.style.top||"",Y.style.left=(0,g.HM)(-this._previousScrollPosition.left),Y.style.top=(0,g.HM)(-this._previousScrollPosition.top),Y.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const Y=this._document.documentElement,Se=Y.style,Ke=this._document.body.style,me=Se.scrollBehavior||"",ye=Ke.scrollBehavior||"";this._isEnabled=!1,Se.left=this._previousHTMLStyles.left,Se.top=this._previousHTMLStyles.top,Y.classList.remove("cdk-global-scrollblock"),$e&&(Se.scrollBehavior=Ke.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),$e&&(Se.scrollBehavior=me,Ke.scrollBehavior=ye)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const te=this._document.body,Se=this._viewportRuler.getViewportSize();return te.scrollHeight>Se.height||te.scrollWidth>Se.width}}class wt{constructor(Y,te,Se,Ke){this._scrollDispatcher=Y,this._ngZone=te,this._viewportRuler=Se,this._config=Ke,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(Y){this._overlayRef=Y}enable(){if(this._scrollSubscription)return;const Y=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=Y.subscribe(()=>{const te=this._viewportRuler.getViewportScrollPosition().top;Math.abs(te-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=Y.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class tn{enable(){}disable(){}attach(){}}function Zt(Xe,Y){return Y.some(te=>Xe.bottom<te.top||Xe.top>te.bottom||Xe.right<te.left||Xe.left>te.right)}function bt(Xe,Y){return Y.some(te=>Xe.top<te.top||Xe.bottom>te.bottom||Xe.left<te.left||Xe.right>te.right)}class Re{constructor(Y,te,Se,Ke){this._scrollDispatcher=Y,this._viewportRuler=te,this._ngZone=Se,this._config=Ke,this._scrollSubscription=null}attach(Y){this._overlayRef=Y}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const te=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Se,height:Ke}=this._viewportRuler.getViewportSize();Zt(te,[{width:Se,height:Ke,bottom:Ke,right:Se,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ze=(()=>{class Xe{constructor(te,Se,Ke,me){this._scrollDispatcher=te,this._viewportRuler=Se,this._ngZone=Ke,this.noop=()=>new tn,this.close=ye=>new wt(this._scrollDispatcher,this._ngZone,this._viewportRuler,ye),this.block=()=>new mt(this._viewportRuler,this._document),this.reposition=ye=>new Re(this._scrollDispatcher,this._viewportRuler,this._ngZone,ye),this._document=me}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.LFG(T.mF),Z.LFG(T.rL),Z.LFG(Z.R0b),Z.LFG(l.K0))},Xe.\u0275prov=Z.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})();class It{constructor(Y){if(this.scrollStrategy=new tn,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,Y){const te=Object.keys(Y);for(const Se of te)void 0!==Y[Se]&&(this[Se]=Y[Se])}}}class jt{constructor(Y,te){this.connectionPair=Y,this.scrollableViewProperties=te}}let xt=(()=>{class Xe{constructor(te){this._attachedOverlays=[],this._document=te}ngOnDestroy(){this.detach()}add(te){this.remove(te),this._attachedOverlays.push(te)}remove(te){const Se=this._attachedOverlays.indexOf(te);Se>-1&&this._attachedOverlays.splice(Se,1),0===this._attachedOverlays.length&&this.detach()}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.LFG(l.K0))},Xe.\u0275prov=Z.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})(),_t=(()=>{class Xe extends xt{constructor(te,Se){super(te),this._ngZone=Se,this._keydownListener=Ke=>{const me=this._attachedOverlays;for(let ye=me.length-1;ye>-1;ye--)if(me[ye]._keydownEvents.observers.length>0){const he=me[ye]._keydownEvents;this._ngZone?this._ngZone.run(()=>he.next(Ke)):he.next(Ke);break}}}add(te){super.add(te),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.LFG(l.K0),Z.LFG(Z.R0b,8))},Xe.\u0275prov=Z.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})(),Yt=(()=>{class Xe extends xt{constructor(te,Se,Ke){super(te),this._platform=Se,this._ngZone=Ke,this._cursorStyleIsSet=!1,this._pointerDownListener=me=>{this._pointerDownEventTarget=(0,Ge.sA)(me)},this._clickListener=me=>{const ye=(0,Ge.sA)(me),he="click"===me.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:ye;this._pointerDownEventTarget=null;const ge=this._attachedOverlays.slice();for(let Pe=ge.length-1;Pe>-1;Pe--){const rt=ge[Pe];if(rt._outsidePointerEvents.observers.length<1||!rt.hasAttached())continue;if(rt.overlayElement.contains(ye)||rt.overlayElement.contains(he))break;const ct=rt._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>ct.next(me)):ct.next(me)}}}add(te){if(super.add(te),!this._isAttached){const Se=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(Se)):this._addEventListeners(Se),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Se.style.cursor,Se.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const te=this._document.body;te.removeEventListener("pointerdown",this._pointerDownListener,!0),te.removeEventListener("click",this._clickListener,!0),te.removeEventListener("auxclick",this._clickListener,!0),te.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(te.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(te){te.addEventListener("pointerdown",this._pointerDownListener,!0),te.addEventListener("click",this._clickListener,!0),te.addEventListener("auxclick",this._clickListener,!0),te.addEventListener("contextmenu",this._clickListener,!0)}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.LFG(l.K0),Z.LFG(Ge.t4),Z.LFG(Z.R0b,8))},Xe.\u0275prov=Z.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})(),qt=(()=>{class Xe{constructor(te,Se){this._platform=Se,this._document=te}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const te="cdk-overlay-container";if(this._platform.isBrowser||(0,Ge.Oy)()){const Ke=this._document.querySelectorAll(`.${te}[platform="server"], .${te}[platform="test"]`);for(let me=0;me<Ke.length;me++)Ke[me].remove()}const Se=this._document.createElement("div");Se.classList.add(te),(0,Ge.Oy)()?Se.setAttribute("platform","test"):this._platform.isBrowser||Se.setAttribute("platform","server"),this._document.body.appendChild(Se),this._containerElement=Se}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.LFG(l.K0),Z.LFG(Ge.t4))},Xe.\u0275prov=Z.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})();class On{constructor(Y,te,Se,Ke,me,ye,he,ge,Pe,rt=!1){this._portalOutlet=Y,this._host=te,this._pane=Se,this._config=Ke,this._ngZone=me,this._keyboardDispatcher=ye,this._document=he,this._location=ge,this._outsideClickDispatcher=Pe,this._animationsDisabled=rt,this._backdropElement=null,this._backdropClick=new Ae.x,this._attachments=new Ae.x,this._detachments=new Ae.x,this._locationChanges=Ue.w0.EMPTY,this._backdropClickHandler=ct=>this._backdropClick.next(ct),this._backdropTransitionendHandler=ct=>{this._disposeBackdrop(ct.target)},this._keydownEvents=new Ae.x,this._outsidePointerEvents=new Ae.x,Ke.scrollStrategy&&(this._scrollStrategy=Ke.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Ke.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(Y){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const te=this._portalOutlet.attach(Y);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Je.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof te?.onDestroy&&te.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),te}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const Y=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),Y}dispose(){const Y=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,Y&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(Y){Y!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=Y,this.hasAttached()&&(Y.attach(this),this.updatePosition()))}updateSize(Y){this._config={...this._config,...Y},this._updateElementSize()}setDirection(Y){this._config={...this._config,direction:Y},this._updateElementDirection()}addPanelClass(Y){this._pane&&this._toggleClasses(this._pane,Y,!0)}removePanelClass(Y){this._pane&&this._toggleClasses(this._pane,Y,!1)}getDirection(){const Y=this._config.direction;return Y?"string"==typeof Y?Y:Y.value:"ltr"}updateScrollStrategy(Y){Y!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=Y,this.hasAttached()&&(Y.attach(this),Y.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const Y=this._pane.style;Y.width=(0,g.HM)(this._config.width),Y.height=(0,g.HM)(this._config.height),Y.minWidth=(0,g.HM)(this._config.minWidth),Y.minHeight=(0,g.HM)(this._config.minHeight),Y.maxWidth=(0,g.HM)(this._config.maxWidth),Y.maxHeight=(0,g.HM)(this._config.maxHeight)}_togglePointerEvents(Y){this._pane.style.pointerEvents=Y?"":"none"}_attachBackdrop(){const Y="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(Y)})}):this._backdropElement.classList.add(Y)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const Y=this._backdropElement;if(Y){if(this._animationsDisabled)return void this._disposeBackdrop(Y);Y.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{Y.addEventListener("transitionend",this._backdropTransitionendHandler)}),Y.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(Y)},500))}}_toggleClasses(Y,te,Se){const Ke=(0,g.Eq)(te||[]).filter(me=>!!me);Ke.length&&(Se?Y.classList.add(...Ke):Y.classList.remove(...Ke))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const Y=this._ngZone.onStable.pipe((0,Le.R)((0,je.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),Y.unsubscribe())})})}_disposeScrollStrategy(){const Y=this._scrollStrategy;Y&&(Y.disable(),Y.detach&&Y.detach())}_disposeBackdrop(Y){Y&&(Y.removeEventListener("click",this._backdropClickHandler),Y.removeEventListener("transitionend",this._backdropTransitionendHandler),Y.remove(),this._backdropElement===Y&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Jn="cdk-overlay-connected-position-bounding-box",hi=/([A-Za-z%]+)$/;class Xt{constructor(Y,te,Se,Ke,me){this._viewportRuler=te,this._document=Se,this._platform=Ke,this._overlayContainer=me,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ae.x,this._resizeSubscription=Ue.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(Y)}get positions(){return this._preferredPositions}attach(Y){this._validatePositions(),Y.hostElement.classList.add(Jn),this._overlayRef=Y,this._boundingBox=Y.hostElement,this._pane=Y.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Y=this._originRect,te=this._overlayRect,Se=this._viewportRect,Ke=this._containerRect,me=[];let ye;for(let he of this._preferredPositions){let ge=this._getOriginPoint(Y,Ke,he),Pe=this._getOverlayPoint(ge,te,he),rt=this._getOverlayFit(Pe,te,Se,he);if(rt.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(he,ge);this._canFitWithFlexibleDimensions(rt,Pe,Se)?me.push({position:he,origin:ge,overlayRect:te,boundingBoxRect:this._calculateBoundingBoxRect(ge,he)}):(!ye||ye.overlayFit.visibleArea<rt.visibleArea)&&(ye={overlayFit:rt,overlayPoint:Pe,originPoint:ge,position:he,overlayRect:te})}if(me.length){let he=null,ge=-1;for(const Pe of me){const rt=Pe.boundingBoxRect.width*Pe.boundingBoxRect.height*(Pe.position.weight||1);rt>ge&&(ge=rt,he=Pe)}return this._isPushed=!1,void this._applyPosition(he.position,he.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(ye.position,ye.originPoint);this._applyPosition(ye.position,ye.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ui(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Jn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const Y=this._lastPosition;if(Y){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const te=this._getOriginPoint(this._originRect,this._containerRect,Y);this._applyPosition(Y,te)}else this.apply()}withScrollableContainers(Y){return this._scrollables=Y,this}withPositions(Y){return this._preferredPositions=Y,-1===Y.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(Y){return this._viewportMargin=Y,this}withFlexibleDimensions(Y=!0){return this._hasFlexibleDimensions=Y,this}withGrowAfterOpen(Y=!0){return this._growAfterOpen=Y,this}withPush(Y=!0){return this._canPush=Y,this}withLockedPosition(Y=!0){return this._positionLocked=Y,this}setOrigin(Y){return this._origin=Y,this}withDefaultOffsetX(Y){return this._offsetX=Y,this}withDefaultOffsetY(Y){return this._offsetY=Y,this}withTransformOriginOn(Y){return this._transformOriginSelector=Y,this}_getOriginPoint(Y,te,Se){let Ke,me;if("center"==Se.originX)Ke=Y.left+Y.width/2;else{const ye=this._isRtl()?Y.right:Y.left,he=this._isRtl()?Y.left:Y.right;Ke="start"==Se.originX?ye:he}return te.left<0&&(Ke-=te.left),me="center"==Se.originY?Y.top+Y.height/2:"top"==Se.originY?Y.top:Y.bottom,te.top<0&&(me-=te.top),{x:Ke,y:me}}_getOverlayPoint(Y,te,Se){let Ke,me;return Ke="center"==Se.overlayX?-te.width/2:"start"===Se.overlayX?this._isRtl()?-te.width:0:this._isRtl()?0:-te.width,me="center"==Se.overlayY?-te.height/2:"top"==Se.overlayY?0:-te.height,{x:Y.x+Ke,y:Y.y+me}}_getOverlayFit(Y,te,Se,Ke){const me=ai(te);let{x:ye,y:he}=Y,ge=this._getOffset(Ke,"x"),Pe=this._getOffset(Ke,"y");ge&&(ye+=ge),Pe&&(he+=Pe);let ln=0-he,Rt=he+me.height-Se.height,mn=this._subtractOverflows(me.width,0-ye,ye+me.width-Se.width),gn=this._subtractOverflows(me.height,ln,Rt),ji=mn*gn;return{visibleArea:ji,isCompletelyWithinViewport:me.width*me.height===ji,fitsInViewportVertically:gn===me.height,fitsInViewportHorizontally:mn==me.width}}_canFitWithFlexibleDimensions(Y,te,Se){if(this._hasFlexibleDimensions){const Ke=Se.bottom-te.y,me=Se.right-te.x,ye=Xn(this._overlayRef.getConfig().minHeight),he=Xn(this._overlayRef.getConfig().minWidth),Pe=Y.fitsInViewportHorizontally||null!=he&&he<=me;return(Y.fitsInViewportVertically||null!=ye&&ye<=Ke)&&Pe}return!1}_pushOverlayOnScreen(Y,te,Se){if(this._previousPushAmount&&this._positionLocked)return{x:Y.x+this._previousPushAmount.x,y:Y.y+this._previousPushAmount.y};const Ke=ai(te),me=this._viewportRect,ye=Math.max(Y.x+Ke.width-me.width,0),he=Math.max(Y.y+Ke.height-me.height,0),ge=Math.max(me.top-Se.top-Y.y,0),Pe=Math.max(me.left-Se.left-Y.x,0);let rt=0,ct=0;return rt=Ke.width<=me.width?Pe||-ye:Y.x<this._viewportMargin?me.left-Se.left-Y.x:0,ct=Ke.height<=me.height?ge||-he:Y.y<this._viewportMargin?me.top-Se.top-Y.y:0,this._previousPushAmount={x:rt,y:ct},{x:Y.x+rt,y:Y.y+ct}}_applyPosition(Y,te){if(this._setTransformOrigin(Y),this._setOverlayElementStyles(te,Y),this._setBoundingBoxStyles(te,Y),Y.panelClass&&this._addPanelClasses(Y.panelClass),this._lastPosition=Y,this._positionChanges.observers.length){const Se=this._getScrollVisibility(),Ke=new jt(Y,Se);this._positionChanges.next(Ke)}this._isInitialRender=!1}_setTransformOrigin(Y){if(!this._transformOriginSelector)return;const te=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Se,Ke=Y.overlayY;Se="center"===Y.overlayX?"center":this._isRtl()?"start"===Y.overlayX?"right":"left":"start"===Y.overlayX?"left":"right";for(let me=0;me<te.length;me++)te[me].style.transformOrigin=`${Se} ${Ke}`}_calculateBoundingBoxRect(Y,te){const Se=this._viewportRect,Ke=this._isRtl();let me,ye,he,rt,ct,ln;if("top"===te.overlayY)ye=Y.y,me=Se.height-ye+this._viewportMargin;else if("bottom"===te.overlayY)he=Se.height-Y.y+2*this._viewportMargin,me=Se.height-he+this._viewportMargin;else{const Rt=Math.min(Se.bottom-Y.y+Se.top,Y.y),mn=this._lastBoundingBoxSize.height;me=2*Rt,ye=Y.y-Rt,me>mn&&!this._isInitialRender&&!this._growAfterOpen&&(ye=Y.y-mn/2)}if("end"===te.overlayX&&!Ke||"start"===te.overlayX&&Ke)ln=Se.width-Y.x+this._viewportMargin,rt=Y.x-this._viewportMargin;else if("start"===te.overlayX&&!Ke||"end"===te.overlayX&&Ke)ct=Y.x,rt=Se.right-Y.x;else{const Rt=Math.min(Se.right-Y.x+Se.left,Y.x),mn=this._lastBoundingBoxSize.width;rt=2*Rt,ct=Y.x-Rt,rt>mn&&!this._isInitialRender&&!this._growAfterOpen&&(ct=Y.x-mn/2)}return{top:ye,left:ct,bottom:he,right:ln,width:rt,height:me}}_setBoundingBoxStyles(Y,te){const Se=this._calculateBoundingBoxRect(Y,te);!this._isInitialRender&&!this._growAfterOpen&&(Se.height=Math.min(Se.height,this._lastBoundingBoxSize.height),Se.width=Math.min(Se.width,this._lastBoundingBoxSize.width));const Ke={};if(this._hasExactPosition())Ke.top=Ke.left="0",Ke.bottom=Ke.right=Ke.maxHeight=Ke.maxWidth="",Ke.width=Ke.height="100%";else{const me=this._overlayRef.getConfig().maxHeight,ye=this._overlayRef.getConfig().maxWidth;Ke.height=(0,g.HM)(Se.height),Ke.top=(0,g.HM)(Se.top),Ke.bottom=(0,g.HM)(Se.bottom),Ke.width=(0,g.HM)(Se.width),Ke.left=(0,g.HM)(Se.left),Ke.right=(0,g.HM)(Se.right),Ke.alignItems="center"===te.overlayX?"center":"end"===te.overlayX?"flex-end":"flex-start",Ke.justifyContent="center"===te.overlayY?"center":"bottom"===te.overlayY?"flex-end":"flex-start",me&&(Ke.maxHeight=(0,g.HM)(me)),ye&&(Ke.maxWidth=(0,g.HM)(ye))}this._lastBoundingBoxSize=Se,ui(this._boundingBox.style,Ke)}_resetBoundingBoxStyles(){ui(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ui(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(Y,te){const Se={},Ke=this._hasExactPosition(),me=this._hasFlexibleDimensions,ye=this._overlayRef.getConfig();if(Ke){const rt=this._viewportRuler.getViewportScrollPosition();ui(Se,this._getExactOverlayY(te,Y,rt)),ui(Se,this._getExactOverlayX(te,Y,rt))}else Se.position="static";let he="",ge=this._getOffset(te,"x"),Pe=this._getOffset(te,"y");ge&&(he+=`translateX(${ge}px) `),Pe&&(he+=`translateY(${Pe}px)`),Se.transform=he.trim(),ye.maxHeight&&(Ke?Se.maxHeight=(0,g.HM)(ye.maxHeight):me&&(Se.maxHeight="")),ye.maxWidth&&(Ke?Se.maxWidth=(0,g.HM)(ye.maxWidth):me&&(Se.maxWidth="")),ui(this._pane.style,Se)}_getExactOverlayY(Y,te,Se){let Ke={top:"",bottom:""},me=this._getOverlayPoint(te,this._overlayRect,Y);return this._isPushed&&(me=this._pushOverlayOnScreen(me,this._overlayRect,Se)),"bottom"===Y.overlayY?Ke.bottom=this._document.documentElement.clientHeight-(me.y+this._overlayRect.height)+"px":Ke.top=(0,g.HM)(me.y),Ke}_getExactOverlayX(Y,te,Se){let ye,Ke={left:"",right:""},me=this._getOverlayPoint(te,this._overlayRect,Y);return this._isPushed&&(me=this._pushOverlayOnScreen(me,this._overlayRect,Se)),ye=this._isRtl()?"end"===Y.overlayX?"left":"right":"end"===Y.overlayX?"right":"left","right"===ye?Ke.right=this._document.documentElement.clientWidth-(me.x+this._overlayRect.width)+"px":Ke.left=(0,g.HM)(me.x),Ke}_getScrollVisibility(){const Y=this._getOriginRect(),te=this._pane.getBoundingClientRect(),Se=this._scrollables.map(Ke=>Ke.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:bt(Y,Se),isOriginOutsideView:Zt(Y,Se),isOverlayClipped:bt(te,Se),isOverlayOutsideView:Zt(te,Se)}}_subtractOverflows(Y,...te){return te.reduce((Se,Ke)=>Se-Math.max(Ke,0),Y)}_getNarrowedViewportRect(){const Y=this._document.documentElement.clientWidth,te=this._document.documentElement.clientHeight,Se=this._viewportRuler.getViewportScrollPosition();return{top:Se.top+this._viewportMargin,left:Se.left+this._viewportMargin,right:Se.left+Y-this._viewportMargin,bottom:Se.top+te-this._viewportMargin,width:Y-2*this._viewportMargin,height:te-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(Y,te){return"x"===te?Y.offsetX??this._offsetX:Y.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(Y){this._pane&&(0,g.Eq)(Y).forEach(te=>{""!==te&&-1===this._appliedPanelClasses.indexOf(te)&&(this._appliedPanelClasses.push(te),this._pane.classList.add(te))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(Y=>{this._pane.classList.remove(Y)}),this._appliedPanelClasses=[])}_getOriginRect(){const Y=this._origin;if(Y instanceof Z.SBq)return Y.nativeElement.getBoundingClientRect();if(Y instanceof Element)return Y.getBoundingClientRect();const te=Y.width||0,Se=Y.height||0;return{top:Y.y,bottom:Y.y+Se,left:Y.x,right:Y.x+te,height:Se,width:te}}}function ui(Xe,Y){for(let te in Y)Y.hasOwnProperty(te)&&(Xe[te]=Y[te]);return Xe}function Xn(Xe){if("number"!=typeof Xe&&null!=Xe){const[Y,te]=Xe.split(hi);return te&&"px"!==te?null:parseFloat(Y)}return Xe||null}function ai(Xe){return{top:Math.floor(Xe.top),right:Math.floor(Xe.right),bottom:Math.floor(Xe.bottom),left:Math.floor(Xe.left),width:Math.floor(Xe.width),height:Math.floor(Xe.height)}}const dt="cdk-global-overlay-wrapper";class Mt{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(Y){const te=Y.getConfig();this._overlayRef=Y,this._width&&!te.width&&Y.updateSize({width:this._width}),this._height&&!te.height&&Y.updateSize({height:this._height}),Y.hostElement.classList.add(dt),this._isDisposed=!1}top(Y=""){return this._bottomOffset="",this._topOffset=Y,this._alignItems="flex-start",this}left(Y=""){return this._xOffset=Y,this._xPosition="left",this}bottom(Y=""){return this._topOffset="",this._bottomOffset=Y,this._alignItems="flex-end",this}right(Y=""){return this._xOffset=Y,this._xPosition="right",this}start(Y=""){return this._xOffset=Y,this._xPosition="start",this}end(Y=""){return this._xOffset=Y,this._xPosition="end",this}width(Y=""){return this._overlayRef?this._overlayRef.updateSize({width:Y}):this._width=Y,this}height(Y=""){return this._overlayRef?this._overlayRef.updateSize({height:Y}):this._height=Y,this}centerHorizontally(Y=""){return this.left(Y),this._xPosition="center",this}centerVertically(Y=""){return this.top(Y),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const Y=this._overlayRef.overlayElement.style,te=this._overlayRef.hostElement.style,Se=this._overlayRef.getConfig(),{width:Ke,height:me,maxWidth:ye,maxHeight:he}=Se,ge=!("100%"!==Ke&&"100vw"!==Ke||ye&&"100%"!==ye&&"100vw"!==ye),Pe=!("100%"!==me&&"100vh"!==me||he&&"100%"!==he&&"100vh"!==he),rt=this._xPosition,ct=this._xOffset,ln="rtl"===this._overlayRef.getConfig().direction;let Rt="",mn="",gn="";ge?gn="flex-start":"center"===rt?(gn="center",ln?mn=ct:Rt=ct):ln?"left"===rt||"end"===rt?(gn="flex-end",Rt=ct):("right"===rt||"start"===rt)&&(gn="flex-start",mn=ct):"left"===rt||"start"===rt?(gn="flex-start",Rt=ct):("right"===rt||"end"===rt)&&(gn="flex-end",mn=ct),Y.position=this._cssPosition,Y.marginLeft=ge?"0":Rt,Y.marginTop=Pe?"0":this._topOffset,Y.marginBottom=this._bottomOffset,Y.marginRight=ge?"0":mn,te.justifyContent=gn,te.alignItems=Pe?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const Y=this._overlayRef.overlayElement.style,te=this._overlayRef.hostElement,Se=te.style;te.classList.remove(dt),Se.justifyContent=Se.alignItems=Y.marginTop=Y.marginBottom=Y.marginLeft=Y.marginRight=Y.position="",this._overlayRef=null,this._isDisposed=!0}}let Kt=(()=>{class Xe{constructor(te,Se,Ke,me){this._viewportRuler=te,this._document=Se,this._platform=Ke,this._overlayContainer=me}global(){return new Mt}flexibleConnectedTo(te){return new Xt(te,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.LFG(T.rL),Z.LFG(l.K0),Z.LFG(Ge.t4),Z.LFG(qt))},Xe.\u0275prov=Z.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})(),Qt=0,xn=(()=>{class Xe{constructor(te,Se,Ke,me,ye,he,ge,Pe,rt,ct,ln,Rt){this.scrollStrategies=te,this._overlayContainer=Se,this._componentFactoryResolver=Ke,this._positionBuilder=me,this._keyboardDispatcher=ye,this._injector=he,this._ngZone=ge,this._document=Pe,this._directionality=rt,this._location=ct,this._outsideClickDispatcher=ln,this._animationsModuleType=Rt}create(te){const Se=this._createHostElement(),Ke=this._createPaneElement(Se),me=this._createPortalOutlet(Ke),ye=new It(te);return ye.direction=ye.direction||this._directionality.value,new On(me,Se,Ke,ye,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(te){const Se=this._document.createElement("div");return Se.id="cdk-overlay-"+Qt++,Se.classList.add("cdk-overlay-pane"),te.appendChild(Se),Se}_createHostElement(){const te=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(te),te}_createPortalOutlet(te){return this._appRef||(this._appRef=this._injector.get(Z.z2F)),new Ze.u0(te,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.LFG(ze),Z.LFG(qt),Z.LFG(Z._Vd),Z.LFG(Kt),Z.LFG(_t),Z.LFG(Z.zs3),Z.LFG(Z.R0b),Z.LFG(l.K0),Z.LFG(_e.Is),Z.LFG(l.Ye),Z.LFG(Yt),Z.LFG(Z.QbO,8))},Xe.\u0275prov=Z.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const Vn=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Qn=new Z.OlP("cdk-connected-overlay-scroll-strategy");let pi=(()=>{class Xe{constructor(te){this.elementRef=te}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.Y36(Z.SBq))},Xe.\u0275dir=Z.lG2({type:Xe,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),Xe})(),Fi=(()=>{class Xe{constructor(te,Se,Ke,me,ye){this._overlay=te,this._dir=ye,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Ue.w0.EMPTY,this._attachSubscription=Ue.w0.EMPTY,this._detachSubscription=Ue.w0.EMPTY,this._positionSubscription=Ue.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Z.vpe,this.positionChange=new Z.vpe,this.attach=new Z.vpe,this.detach=new Z.vpe,this.overlayKeydown=new Z.vpe,this.overlayOutsideClick=new Z.vpe,this._templatePortal=new Ze.UE(Se,Ke),this._scrollStrategyFactory=me,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(te){this._offsetX=te,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(te){this._offsetY=te,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(te){this._hasBackdrop=(0,g.Ig)(te)}get lockPosition(){return this._lockPosition}set lockPosition(te){this._lockPosition=(0,g.Ig)(te)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(te){this._flexibleDimensions=(0,g.Ig)(te)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(te){this._growAfterOpen=(0,g.Ig)(te)}get push(){return this._push}set push(te){this._push=(0,g.Ig)(te)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(te){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),te.origin&&this.open&&this._position.apply()),te.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Vn);const te=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=te.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=te.detachments().subscribe(()=>this.detach.emit()),te.keydownEvents().subscribe(Se=>{this.overlayKeydown.next(Se),Se.keyCode===qe.hY&&!this.disableClose&&!(0,qe.Vb)(Se)&&(Se.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(Se=>{this.overlayOutsideClick.next(Se)})}_buildConfig(){const te=this._position=this.positionStrategy||this._createPositionStrategy(),Se=new It({direction:this._dir,positionStrategy:te,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(Se.width=this.width),(this.height||0===this.height)&&(Se.height=this.height),(this.minWidth||0===this.minWidth)&&(Se.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(Se.minHeight=this.minHeight),this.backdropClass&&(Se.backdropClass=this.backdropClass),this.panelClass&&(Se.panelClass=this.panelClass),Se}_updatePositionStrategy(te){const Se=this.positions.map(Ke=>({originX:Ke.originX,originY:Ke.originY,overlayX:Ke.overlayX,overlayY:Ke.overlayY,offsetX:Ke.offsetX||this.offsetX,offsetY:Ke.offsetY||this.offsetY,panelClass:Ke.panelClass||void 0}));return te.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(Se).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const te=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(te),te}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof pi?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(te=>{this.backdropClick.emit(te)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,et.o)(()=>this.positionChange.observers.length>0)).subscribe(te=>{this.positionChange.emit(te),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.Y36(xn),Z.Y36(Z.Rgc),Z.Y36(Z.s_b),Z.Y36(Qn),Z.Y36(_e.Is,8))},Xe.\u0275dir=Z.lG2({type:Xe,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Z.TTD]}),Xe})();const yi={provide:Qn,deps:[xn],useFactory:function _i(Xe){return()=>Xe.scrollStrategies.reposition()}};let un=(()=>{class Xe{}return Xe.\u0275fac=function(te){return new(te||Xe)},Xe.\u0275mod=Z.oAB({type:Xe}),Xe.\u0275inj=Z.cJS({providers:[xn,yi],imports:[_e.vT,Ze.eL,T.Cl,T.Cl]}),Xe})()},3353:(sn,ut,j)=>{"use strict";j.d(ut,{Mq:()=>qe,Oy:()=>bt,_i:()=>$e,i$:()=>Je,kV:()=>wt,qK:()=>Ae,sA:()=>Zt,t4:()=>g});var T=j(4650),l=j(6895);let Z;try{Z=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Z=!1}let _e,g=(()=>{class Re{constructor(It){this._platformId=It,this.isBrowser=this._platformId?(0,l.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Z)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Re.\u0275fac=function(It){return new(It||Re)(T.LFG(T.Lbi))},Re.\u0275prov=T.Yz7({token:Re,factory:Re.\u0275fac,providedIn:"root"}),Re})();const Ze=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Ae(){if(_e)return _e;if("object"!=typeof document||!document)return _e=new Set(Ze),_e;let Re=document.createElement("input");return _e=new Set(Ze.filter(ze=>(Re.setAttribute("type",ze),Re.type===ze))),_e}let Ue,Le,et,mt;function Je(Re){return function je(){if(null==Ue&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ue=!0}))}finally{Ue=Ue||!1}return Ue}()?Re:!!Re.capture}function qe(){if(null==et){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return et=!1,et;if("scrollBehavior"in document.documentElement.style)et=!0;else{const Re=Element.prototype.scrollTo;et=!!Re&&!/\{\s*\[native code\]\s*\}/.test(Re.toString())}}return et}function $e(){if("object"!=typeof document||!document)return 0;if(null==Le){const Re=document.createElement("div"),ze=Re.style;Re.dir="rtl",ze.width="1px",ze.overflow="auto",ze.visibility="hidden",ze.pointerEvents="none",ze.position="absolute";const It=document.createElement("div"),At=It.style;At.width="2px",At.height="1px",Re.appendChild(It),document.body.appendChild(Re),Le=0,0===Re.scrollLeft&&(Re.scrollLeft=1,Le=0===Re.scrollLeft?1:2),Re.remove()}return Le}function wt(Re){if(function pt(){if(null==mt){const Re=typeof document<"u"?document.head:null;mt=!(!Re||!Re.createShadowRoot&&!Re.attachShadow)}return mt}()){const ze=Re.getRootNode?Re.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&ze instanceof ShadowRoot)return ze}return null}function Zt(Re){return Re.composedPath?Re.composedPath()[0]:Re.target}function bt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},4080:(sn,ut,j)=>{"use strict";j.d(ut,{C5:()=>Ue,UE:()=>je,bH:()=>pt,eL:()=>Zt,ig:()=>mt,u0:()=>qe});var T=j(4650);class Ae{attach(ze){return this._attachedHost=ze,ze.attach(this)}detach(){let ze=this._attachedHost;null!=ze&&(this._attachedHost=null,ze.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ze){this._attachedHost=ze}}class Ue extends Ae{constructor(ze,It,At,kt){super(),this.component=ze,this.viewContainerRef=It,this.injector=At,this.componentFactoryResolver=kt}}class je extends Ae{constructor(ze,It,At,kt){super(),this.templateRef=ze,this.viewContainerRef=It,this.context=At,this.injector=kt}get origin(){return this.templateRef.elementRef}attach(ze,It=this.context){return this.context=It,super.attach(ze)}detach(){return this.context=void 0,super.detach()}}class Je extends Ae{constructor(ze){super(),this.element=ze instanceof T.SBq?ze.nativeElement:ze}}class qe extends class Le{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ze){return ze instanceof Ue?(this._attachedPortal=ze,this.attachComponentPortal(ze)):ze instanceof je?(this._attachedPortal=ze,this.attachTemplatePortal(ze)):this.attachDomPortal&&ze instanceof Je?(this._attachedPortal=ze,this.attachDomPortal(ze)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ze){this._disposeFn=ze}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(ze,It,At,kt,jt){super(),this.outletElement=ze,this._componentFactoryResolver=It,this._appRef=At,this._defaultInjector=kt,this.attachDomPortal=nt=>{const at=nt.element,xt=this._document.createComment("dom-portal");at.parentNode.insertBefore(xt,at),this.outletElement.appendChild(at),this._attachedPortal=nt,super.setDisposeFn(()=>{xt.parentNode&&xt.parentNode.replaceChild(at,xt)})},this._document=jt}attachComponentPortal(ze){const At=(ze.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ze.component);let kt;return ze.viewContainerRef?(kt=ze.viewContainerRef.createComponent(At,ze.viewContainerRef.length,ze.injector||ze.viewContainerRef.injector),this.setDisposeFn(()=>kt.destroy())):(kt=At.create(ze.injector||this._defaultInjector||T.zs3.NULL),this._appRef.attachView(kt.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(kt.hostView),kt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(kt)),this._attachedPortal=ze,kt}attachTemplatePortal(ze){let It=ze.viewContainerRef,At=It.createEmbeddedView(ze.templateRef,ze.context,{injector:ze.injector});return At.rootNodes.forEach(kt=>this.outletElement.appendChild(kt)),At.detectChanges(),this.setDisposeFn(()=>{let kt=It.indexOf(At);-1!==kt&&It.remove(kt)}),this._attachedPortal=ze,At}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(ze){return ze.hostView.rootNodes[0]}}let mt=(()=>{class Re extends je{constructor(It,At){super(It,At)}}return Re.\u0275fac=function(It){return new(It||Re)(T.Y36(T.Rgc),T.Y36(T.s_b))},Re.\u0275dir=T.lG2({type:Re,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[T.qOj]}),Re})(),pt=(()=>{class Re extends mt{}return Re.\u0275fac=function(){let ze;return function(At){return(ze||(ze=T.n5z(Re)))(At||Re)}}(),Re.\u0275dir=T.lG2({type:Re,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[T._Bn([{provide:mt,useExisting:Re}]),T.qOj]}),Re})(),Zt=(()=>{class Re{}return Re.\u0275fac=function(It){return new(It||Re)},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({}),Re})()},8605:(sn,ut,j)=>{"use strict";j.d(ut,{PQ:()=>Vn,ZD:()=>Ke,mF:()=>xn,Cl:()=>me,rL:()=>pi});var T=j(1281),l=j(4650),Z=j(7579),g=j(9646),Ge=j(9751),_e=j(4968),Ze=j(4408),Ae=j(727);const Ue={schedule(ye){let he=requestAnimationFrame,ge=cancelAnimationFrame;const{delegate:Pe}=Ue;Pe&&(he=Pe.requestAnimationFrame,ge=Pe.cancelAnimationFrame);const rt=he(ct=>{ge=void 0,ye(ct)});return new Ae.w0(()=>ge?.(rt))},requestAnimationFrame(...ye){const{delegate:he}=Ue;return(he?.requestAnimationFrame||requestAnimationFrame)(...ye)},cancelAnimationFrame(...ye){const{delegate:he}=Ue;return(he?.cancelAnimationFrame||cancelAnimationFrame)(...ye)},delegate:void 0};var Je=j(7565);new class Le extends Je.v{flush(he){this._active=!0;const ge=this._scheduled;this._scheduled=void 0;const{actions:Pe}=this;let rt;he=he||Pe.shift();do{if(rt=he.execute(he.state,he.delay))break}while((he=Pe[0])&&he.id===ge&&Pe.shift());if(this._active=!1,rt){for(;(he=Pe[0])&&he.id===ge&&Pe.shift();)he.unsubscribe();throw rt}}}(class je extends Ze.o{constructor(he,ge){super(he,ge),this.scheduler=he,this.work=ge}requestAsyncId(he,ge,Pe=0){return null!==Pe&&Pe>0?super.requestAsyncId(he,ge,Pe):(he.actions.push(this),he._scheduled||(he._scheduled=Ue.requestAnimationFrame(()=>he.flush(void 0))))}recycleAsyncId(he,ge,Pe=0){var rt;if(null!=Pe?Pe>0:this.delay>0)return super.recycleAsyncId(he,ge,Pe);const{actions:ct}=he;null!=ge&&(null===(rt=ct[ct.length-1])||void 0===rt?void 0:rt.id)!==ge&&(Ue.cancelAnimationFrame(ge),he._scheduled=void 0)}});let mt,$e=1;const pt={};function wt(ye){return ye in pt&&(delete pt[ye],!0)}const tn={setImmediate(ye){const he=$e++;return pt[he]=!0,mt||(mt=Promise.resolve()),mt.then(()=>wt(he)&&ye()),he},clearImmediate(ye){wt(ye)}},{setImmediate:bt,clearImmediate:Re}=tn,ze={setImmediate(...ye){const{delegate:he}=ze;return(he?.setImmediate||bt)(...ye)},clearImmediate(ye){const{delegate:he}=ze;return(he?.clearImmediate||Re)(ye)},delegate:void 0};new class At extends Je.v{flush(he){this._active=!0;const ge=this._scheduled;this._scheduled=void 0;const{actions:Pe}=this;let rt;he=he||Pe.shift();do{if(rt=he.execute(he.state,he.delay))break}while((he=Pe[0])&&he.id===ge&&Pe.shift());if(this._active=!1,rt){for(;(he=Pe[0])&&he.id===ge&&Pe.shift();)he.unsubscribe();throw rt}}}(class It extends Ze.o{constructor(he,ge){super(he,ge),this.scheduler=he,this.work=ge}requestAsyncId(he,ge,Pe=0){return null!==Pe&&Pe>0?super.requestAsyncId(he,ge,Pe):(he.actions.push(this),he._scheduled||(he._scheduled=ze.setImmediate(he.flush.bind(he,void 0))))}recycleAsyncId(he,ge,Pe=0){var rt;if(null!=Pe?Pe>0:this.delay>0)return super.recycleAsyncId(he,ge,Pe);const{actions:ct}=he;null!=ge&&(null===(rt=ct[ct.length-1])||void 0===rt?void 0:rt.id)!==ge&&(ze.clearImmediate(ge),he._scheduled=void 0)}});var nt=j(4986),at=j(4482),xt=j(8421),_t=j(5403),qt=j(5963);function On(ye,he=nt.z){return function Yt(ye){return(0,at.e)((he,ge)=>{let Pe=!1,rt=null,ct=null,ln=!1;const Rt=()=>{if(ct?.unsubscribe(),ct=null,Pe){Pe=!1;const gn=rt;rt=null,ge.next(gn)}ln&&ge.complete()},mn=()=>{ct=null,ln&&ge.complete()};he.subscribe((0,_t.x)(ge,gn=>{Pe=!0,rt=gn,ct||(0,xt.Xf)(ye(gn)).subscribe(ct=(0,_t.x)(ge,Rt,mn))},()=>{ln=!0,(!Pe||!ct||ct.closed)&&ge.complete()}))})}(()=>(0,qt.H)(ye,he))}var Jn=j(9300),hi=j(2722),Xt=j(3353),ui=j(6895),Xn=j(445);let xn=(()=>{class ye{constructor(ge,Pe,rt){this._ngZone=ge,this._platform=Pe,this._scrolled=new Z.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=rt}register(ge){this.scrollContainers.has(ge)||this.scrollContainers.set(ge,ge.elementScrolled().subscribe(()=>this._scrolled.next(ge)))}deregister(ge){const Pe=this.scrollContainers.get(ge);Pe&&(Pe.unsubscribe(),this.scrollContainers.delete(ge))}scrolled(ge=20){return this._platform.isBrowser?new Ge.y(Pe=>{this._globalSubscription||this._addGlobalListener();const rt=ge>0?this._scrolled.pipe(On(ge)).subscribe(Pe):this._scrolled.subscribe(Pe);return this._scrolledCount++,()=>{rt.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,g.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((ge,Pe)=>this.deregister(Pe)),this._scrolled.complete()}ancestorScrolled(ge,Pe){const rt=this.getAncestorScrollContainers(ge);return this.scrolled(Pe).pipe((0,Jn.h)(ct=>!ct||rt.indexOf(ct)>-1))}getAncestorScrollContainers(ge){const Pe=[];return this.scrollContainers.forEach((rt,ct)=>{this._scrollableContainsElement(ct,ge)&&Pe.push(ct)}),Pe}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(ge,Pe){let rt=(0,T.fI)(Pe),ct=ge.getElementRef().nativeElement;do{if(rt==ct)return!0}while(rt=rt.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const ge=this._getWindow();return(0,_e.R)(ge.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return ye.\u0275fac=function(ge){return new(ge||ye)(l.LFG(l.R0b),l.LFG(Xt.t4),l.LFG(ui.K0,8))},ye.\u0275prov=l.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})(),Vn=(()=>{class ye{constructor(ge,Pe,rt,ct){this.elementRef=ge,this.scrollDispatcher=Pe,this.ngZone=rt,this.dir=ct,this._destroyed=new Z.x,this._elementScrolled=new Ge.y(ln=>this.ngZone.runOutsideAngular(()=>(0,_e.R)(this.elementRef.nativeElement,"scroll").pipe((0,hi.R)(this._destroyed)).subscribe(ln)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(ge){const Pe=this.elementRef.nativeElement,rt=this.dir&&"rtl"==this.dir.value;null==ge.left&&(ge.left=rt?ge.end:ge.start),null==ge.right&&(ge.right=rt?ge.start:ge.end),null!=ge.bottom&&(ge.top=Pe.scrollHeight-Pe.clientHeight-ge.bottom),rt&&0!=(0,Xt._i)()?(null!=ge.left&&(ge.right=Pe.scrollWidth-Pe.clientWidth-ge.left),2==(0,Xt._i)()?ge.left=ge.right:1==(0,Xt._i)()&&(ge.left=ge.right?-ge.right:ge.right)):null!=ge.right&&(ge.left=Pe.scrollWidth-Pe.clientWidth-ge.right),this._applyScrollToOptions(ge)}_applyScrollToOptions(ge){const Pe=this.elementRef.nativeElement;(0,Xt.Mq)()?Pe.scrollTo(ge):(null!=ge.top&&(Pe.scrollTop=ge.top),null!=ge.left&&(Pe.scrollLeft=ge.left))}measureScrollOffset(ge){const Pe="left",ct=this.elementRef.nativeElement;if("top"==ge)return ct.scrollTop;if("bottom"==ge)return ct.scrollHeight-ct.clientHeight-ct.scrollTop;const ln=this.dir&&"rtl"==this.dir.value;return"start"==ge?ge=ln?"right":Pe:"end"==ge&&(ge=ln?Pe:"right"),ln&&2==(0,Xt._i)()?ge==Pe?ct.scrollWidth-ct.clientWidth-ct.scrollLeft:ct.scrollLeft:ln&&1==(0,Xt._i)()?ge==Pe?ct.scrollLeft+ct.scrollWidth-ct.clientWidth:-ct.scrollLeft:ge==Pe?ct.scrollLeft:ct.scrollWidth-ct.clientWidth-ct.scrollLeft}}return ye.\u0275fac=function(ge){return new(ge||ye)(l.Y36(l.SBq),l.Y36(xn),l.Y36(l.R0b),l.Y36(Xn.Is,8))},ye.\u0275dir=l.lG2({type:ye,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),ye})(),pi=(()=>{class ye{constructor(ge,Pe,rt){this._platform=ge,this._change=new Z.x,this._changeListener=ct=>{this._change.next(ct)},this._document=rt,Pe.runOutsideAngular(()=>{if(ge.isBrowser){const ct=this._getWindow();ct.addEventListener("resize",this._changeListener),ct.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const ge=this._getWindow();ge.removeEventListener("resize",this._changeListener),ge.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const ge={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),ge}getViewportRect(){const ge=this.getViewportScrollPosition(),{width:Pe,height:rt}=this.getViewportSize();return{top:ge.top,left:ge.left,bottom:ge.top+rt,right:ge.left+Pe,height:rt,width:Pe}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const ge=this._document,Pe=this._getWindow(),rt=ge.documentElement,ct=rt.getBoundingClientRect();return{top:-ct.top||ge.body.scrollTop||Pe.scrollY||rt.scrollTop||0,left:-ct.left||ge.body.scrollLeft||Pe.scrollX||rt.scrollLeft||0}}change(ge=20){return ge>0?this._change.pipe(On(ge)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const ge=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:ge.innerWidth,height:ge.innerHeight}:{width:0,height:0}}}return ye.\u0275fac=function(ge){return new(ge||ye)(l.LFG(Xt.t4),l.LFG(l.R0b),l.LFG(ui.K0,8))},ye.\u0275prov=l.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})(),Ke=(()=>{class ye{}return ye.\u0275fac=function(ge){return new(ge||ye)},ye.\u0275mod=l.oAB({type:ye}),ye.\u0275inj=l.cJS({}),ye})(),me=(()=>{class ye{}return ye.\u0275fac=function(ge){return new(ge||ye)},ye.\u0275mod=l.oAB({type:ye}),ye.\u0275inj=l.cJS({imports:[Xn.vT,Ke,Xn.vT,Ke]}),ye})()},6895:(sn,ut,j)=>{"use strict";j.d(ut,{Do:()=>Zt,ED:()=>us,EM:()=>qa,HT:()=>Ge,JF:()=>fs,K0:()=>Ze,Mx:()=>Er,NF:()=>ps,O5:()=>Zn,Ov:()=>Ia,PC:()=>es,RF:()=>Hs,S$:()=>pt,V_:()=>je,Ye:()=>bt,b0:()=>tn,bD:()=>hs,ez:()=>Ks,mk:()=>mi,n9:()=>$s,q:()=>Z,sg:()=>Gr,tP:()=>fa,w_:()=>_e});var T=j(4650);let l=null;function Z(){return l}function Ge(H){l||(l=H)}class _e{}const Ze=new T.OlP("DocumentToken");let Ae=(()=>{class H{historyGo(K){throw new Error("Not implemented")}}return H.\u0275fac=function(K){return new(K||H)},H.\u0275prov=T.Yz7({token:H,factory:function(){return function Ue(){return(0,T.LFG)(Je)}()},providedIn:"platform"}),H})();const je=new T.OlP("Location Initialized");let Je=(()=>{class H extends Ae{constructor(K){super(),this._doc=K,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(K){const we=Z().getGlobalEventTarget(this._doc,"window");return we.addEventListener("popstate",K,!1),()=>we.removeEventListener("popstate",K)}onHashChange(K){const we=Z().getGlobalEventTarget(this._doc,"window");return we.addEventListener("hashchange",K,!1),()=>we.removeEventListener("hashchange",K)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(K){this.location.pathname=K}pushState(K,we,Ye){Le()?this._history.pushState(K,we,Ye):this.location.hash=Ye}replaceState(K,we,Ye){Le()?this._history.replaceState(K,we,Ye):this.location.hash=Ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(K=0){this._history.go(K)}getState(){return this._history.state}}return H.\u0275fac=function(K){return new(K||H)(T.LFG(Ze))},H.\u0275prov=T.Yz7({token:H,factory:function(){return function et(){return new Je((0,T.LFG)(Ze))}()},providedIn:"platform"}),H})();function Le(){return!!window.history.pushState}function qe(H,ue){if(0==H.length)return ue;if(0==ue.length)return H;let K=0;return H.endsWith("/")&&K++,ue.startsWith("/")&&K++,2==K?H+ue.substring(1):1==K?H+ue:H+"/"+ue}function $e(H){const ue=H.match(/#|\?|$/),K=ue&&ue.index||H.length;return H.slice(0,K-("/"===H[K-1]?1:0))+H.slice(K)}function mt(H){return H&&"?"!==H[0]?"?"+H:H}let pt=(()=>{class H{historyGo(K){throw new Error("Not implemented")}}return H.\u0275fac=function(K){return new(K||H)},H.\u0275prov=T.Yz7({token:H,factory:function(){return(0,T.f3M)(tn)},providedIn:"root"}),H})();const wt=new T.OlP("appBaseHref");let tn=(()=>{class H extends pt{constructor(K,we){super(),this._platformLocation=K,this._removeListenerFns=[],this._baseHref=we??this._platformLocation.getBaseHrefFromDOM()??(0,T.f3M)(Ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}prepareExternalUrl(K){return qe(this._baseHref,K)}path(K=!1){const we=this._platformLocation.pathname+mt(this._platformLocation.search),Ye=this._platformLocation.hash;return Ye&&K?`${we}${Ye}`:we}pushState(K,we,Ye,Ct){const zt=this.prepareExternalUrl(Ye+mt(Ct));this._platformLocation.pushState(K,we,zt)}replaceState(K,we,Ye,Ct){const zt=this.prepareExternalUrl(Ye+mt(Ct));this._platformLocation.replaceState(K,we,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(K=0){this._platformLocation.historyGo?.(K)}}return H.\u0275fac=function(K){return new(K||H)(T.LFG(Ae),T.LFG(wt,8))},H.\u0275prov=T.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})(),Zt=(()=>{class H extends pt{constructor(K,we){super(),this._platformLocation=K,this._baseHref="",this._removeListenerFns=[],null!=we&&(this._baseHref=we)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}path(K=!1){let we=this._platformLocation.hash;return null==we&&(we="#"),we.length>0?we.substring(1):we}prepareExternalUrl(K){const we=qe(this._baseHref,K);return we.length>0?"#"+we:we}pushState(K,we,Ye,Ct){let zt=this.prepareExternalUrl(Ye+mt(Ct));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.pushState(K,we,zt)}replaceState(K,we,Ye,Ct){let zt=this.prepareExternalUrl(Ye+mt(Ct));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.replaceState(K,we,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(K=0){this._platformLocation.historyGo?.(K)}}return H.\u0275fac=function(K){return new(K||H)(T.LFG(Ae),T.LFG(wt,8))},H.\u0275prov=T.Yz7({token:H,factory:H.\u0275fac}),H})(),bt=(()=>{class H{constructor(K){this._subject=new T.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=K;const we=this._locationStrategy.getBaseHref();this._baseHref=$e(It(we)),this._locationStrategy.onPopState(Ye=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ye.state,type:Ye.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(K=!1){return this.normalize(this._locationStrategy.path(K))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(K,we=""){return this.path()==this.normalize(K+mt(we))}normalize(K){return H.stripTrailingSlash(function ze(H,ue){return H&&ue.startsWith(H)?ue.substring(H.length):ue}(this._baseHref,It(K)))}prepareExternalUrl(K){return K&&"/"!==K[0]&&(K="/"+K),this._locationStrategy.prepareExternalUrl(K)}go(K,we="",Ye=null){this._locationStrategy.pushState(Ye,"",K,we),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+mt(we)),Ye)}replaceState(K,we="",Ye=null){this._locationStrategy.replaceState(Ye,"",K,we),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+mt(we)),Ye)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(K=0){this._locationStrategy.historyGo?.(K)}onUrlChange(K){return this._urlChangeListeners.push(K),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(we=>{this._notifyUrlChangeListeners(we.url,we.state)})),()=>{const we=this._urlChangeListeners.indexOf(K);this._urlChangeListeners.splice(we,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(K="",we){this._urlChangeListeners.forEach(Ye=>Ye(K,we))}subscribe(K,we,Ye){return this._subject.subscribe({next:K,error:we,complete:Ye})}}return H.normalizeQueryParams=mt,H.joinWithSlash=qe,H.stripTrailingSlash=$e,H.\u0275fac=function(K){return new(K||H)(T.LFG(pt))},H.\u0275prov=T.Yz7({token:H,factory:function(){return function Re(){return new bt((0,T.LFG)(pt))}()},providedIn:"root"}),H})();function It(H){return H.replace(/\/index.html$/,"")}function Er(H,ue){ue=encodeURIComponent(ue);for(const K of H.split(";")){const we=K.indexOf("="),[Ye,Ct]=-1==we?[K,""]:[K.slice(0,we),K.slice(we+1)];if(Ye.trim()===ue)return decodeURIComponent(Ct)}return null}let mi=(()=>{class H{constructor(K,we,Ye,Ct){this._iterableDiffers=K,this._keyValueDiffers=we,this._ngEl=Ye,this._renderer=Ct,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(K){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof K?K.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(K){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof K?K.split(/\s+/):K,this._rawClass&&((0,T.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const K=this._iterableDiffer.diff(this._rawClass);K&&this._applyIterableChanges(K)}else if(this._keyValueDiffer){const K=this._keyValueDiffer.diff(this._rawClass);K&&this._applyKeyValueChanges(K)}}_applyKeyValueChanges(K){K.forEachAddedItem(we=>this._toggleClass(we.key,we.currentValue)),K.forEachChangedItem(we=>this._toggleClass(we.key,we.currentValue)),K.forEachRemovedItem(we=>{we.previousValue&&this._toggleClass(we.key,!1)})}_applyIterableChanges(K){K.forEachAddedItem(we=>{if("string"!=typeof we.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,T.AaK)(we.item)}`);this._toggleClass(we.item,!0)}),K.forEachRemovedItem(we=>this._toggleClass(we.item,!1))}_applyClasses(K){K&&(Array.isArray(K)||K instanceof Set?K.forEach(we=>this._toggleClass(we,!0)):Object.keys(K).forEach(we=>this._toggleClass(we,!!K[we])))}_removeClasses(K){K&&(Array.isArray(K)||K instanceof Set?K.forEach(we=>this._toggleClass(we,!1)):Object.keys(K).forEach(we=>this._toggleClass(we,!1)))}_toggleClass(K,we){(K=K.trim())&&K.split(/\s+/g).forEach(Ye=>{we?this._renderer.addClass(this._ngEl.nativeElement,Ye):this._renderer.removeClass(this._ngEl.nativeElement,Ye)})}}return H.\u0275fac=function(K){return new(K||H)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},H.\u0275dir=T.lG2({type:H,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),H})();class Pi{constructor(ue,K,we,Ye){this.$implicit=ue,this.ngForOf=K,this.index=we,this.count=Ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gr=(()=>{class H{constructor(K,we,Ye){this._viewContainer=K,this._template=we,this._differs=Ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(K){this._ngForOf=K,this._ngForOfDirty=!0}set ngForTrackBy(K){this._trackByFn=K}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(K){K&&(this._template=K)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const K=this._ngForOf;!this._differ&&K&&(this._differ=this._differs.find(K).create(this.ngForTrackBy))}if(this._differ){const K=this._differ.diff(this._ngForOf);K&&this._applyChanges(K)}}_applyChanges(K){const we=this._viewContainer;K.forEachOperation((Ye,Ct,zt)=>{if(null==Ye.previousIndex)we.createEmbeddedView(this._template,new Pi(Ye.item,this._ngForOf,-1,-1),null===zt?void 0:zt);else if(null==zt)we.remove(null===Ct?void 0:Ct);else if(null!==Ct){const kn=we.get(Ct);we.move(kn,zt),Rr(kn,Ye)}});for(let Ye=0,Ct=we.length;Ye<Ct;Ye++){const kn=we.get(Ye).context;kn.index=Ye,kn.count=Ct,kn.ngForOf=this._ngForOf}K.forEachIdentityChange(Ye=>{Rr(we.get(Ye.currentIndex),Ye)})}static ngTemplateContextGuard(K,we){return!0}}return H.\u0275fac=function(K){return new(K||H)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},H.\u0275dir=T.lG2({type:H,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),H})();function Rr(H,ue){H.context.$implicit=ue.item}let Zn=(()=>{class H{constructor(K,we){this._viewContainer=K,this._context=new lr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=we}set ngIf(K){this._context.$implicit=this._context.ngIf=K,this._updateView()}set ngIfThen(K){cr("ngIfThen",K),this._thenTemplateRef=K,this._thenViewRef=null,this._updateView()}set ngIfElse(K){cr("ngIfElse",K),this._elseTemplateRef=K,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(K,we){return!0}}return H.\u0275fac=function(K){return new(K||H)(T.Y36(T.s_b),T.Y36(T.Rgc))},H.\u0275dir=T.lG2({type:H,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),H})();class lr{constructor(){this.$implicit=null,this.ngIf=null}}function cr(H,ue){if(ue&&!ue.createEmbeddedView)throw new Error(`${H} must be a TemplateRef, but received '${(0,T.AaK)(ue)}'.`)}class br{constructor(ue,K){this._viewContainerRef=ue,this._templateRef=K,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ue){ue&&!this._created?this.create():!ue&&this._created&&this.destroy()}}let Hs=(()=>{class H{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(K){this._ngSwitch=K,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(K){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(K)}_matchCase(K){const we=K==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||we,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),we}_updateDefaultCases(K){if(this._defaultViews&&K!==this._defaultUsed){this._defaultUsed=K;for(let we=0;we<this._defaultViews.length;we++)this._defaultViews[we].enforceState(K)}}}return H.\u0275fac=function(K){return new(K||H)},H.\u0275dir=T.lG2({type:H,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),H})(),$s=(()=>{class H{constructor(K,we,Ye){this.ngSwitch=Ye,Ye._addCase(),this._view=new br(K,we)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return H.\u0275fac=function(K){return new(K||H)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(Hs,9))},H.\u0275dir=T.lG2({type:H,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),H})(),us=(()=>{class H{constructor(K,we,Ye){Ye._addDefault(new br(K,we))}}return H.\u0275fac=function(K){return new(K||H)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(Hs,9))},H.\u0275dir=T.lG2({type:H,selectors:[["","ngSwitchDefault",""]],standalone:!0}),H})(),es=(()=>{class H{constructor(K,we,Ye){this._ngEl=K,this._differs=we,this._renderer=Ye,this._ngStyle=null,this._differ=null}set ngStyle(K){this._ngStyle=K,!this._differ&&K&&(this._differ=this._differs.find(K).create())}ngDoCheck(){if(this._differ){const K=this._differ.diff(this._ngStyle);K&&this._applyChanges(K)}}_setStyle(K,we){const[Ye,Ct]=K.split("."),zt=-1===Ye.indexOf("-")?void 0:T.JOm.DashCase;null!=we?this._renderer.setStyle(this._ngEl.nativeElement,Ye,Ct?`${we}${Ct}`:we,zt):this._renderer.removeStyle(this._ngEl.nativeElement,Ye,zt)}_applyChanges(K){K.forEachRemovedItem(we=>this._setStyle(we.key,null)),K.forEachAddedItem(we=>this._setStyle(we.key,we.currentValue)),K.forEachChangedItem(we=>this._setStyle(we.key,we.currentValue))}}return H.\u0275fac=function(K){return new(K||H)(T.Y36(T.SBq),T.Y36(T.aQg),T.Y36(T.Qsj))},H.\u0275dir=T.lG2({type:H,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),H})(),fa=(()=>{class H{constructor(K){this._viewContainerRef=K,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(K){if(K.ngTemplateOutlet||K.ngTemplateOutletInjector){const we=this._viewContainerRef;if(this._viewRef&&we.remove(we.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ye,ngTemplateOutletContext:Ct,ngTemplateOutletInjector:zt}=this;this._viewRef=we.createEmbeddedView(Ye,Ct,zt?{injector:zt}:void 0)}else this._viewRef=null}else this._viewRef&&K.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return H.\u0275fac=function(K){return new(K||H)(T.Y36(T.s_b))},H.\u0275dir=T.lG2({type:H,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[T.TTD]}),H})();class Pl{createSubscription(ue,K){return ue.subscribe({next:K,error:we=>{throw we}})}dispose(ue){ue.unsubscribe()}}class Ol{createSubscription(ue,K){return ue.then(K,we=>{throw we})}dispose(ue){}}const kl=new Ol,Gs=new Pl;let Ia=(()=>{class H{constructor(K){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=K}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(K){return this._obj?K!==this._obj?(this._dispose(),this.transform(K)):this._latestValue:(K&&this._subscribe(K),this._latestValue)}_subscribe(K){this._obj=K,this._strategy=this._selectStrategy(K),this._subscription=this._strategy.createSubscription(K,we=>this._updateLatestValue(K,we))}_selectStrategy(K){if((0,T.QGY)(K))return kl;if((0,T.F4k)(K))return Gs;throw function co(H,ue){return new T.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(K,we){K===this._obj&&(this._latestValue=we,this._ref.markForCheck())}}return H.\u0275fac=function(K){return new(K||H)(T.Y36(T.sBO,16))},H.\u0275pipe=T.Yjl({name:"async",type:H,pure:!1,standalone:!0}),H})(),Ks=(()=>{class H{}return H.\u0275fac=function(K){return new(K||H)},H.\u0275mod=T.oAB({type:H}),H.\u0275inj=T.cJS({}),H})();const hs="browser";function ps(H){return H===hs}let qa=(()=>{class H{}return H.\u0275prov=(0,T.Yz7)({token:H,providedIn:"root",factory:()=>new Ka((0,T.LFG)(Ze),window)}),H})();class Ka{constructor(ue,K){this.document=ue,this.window=K,this.offset=()=>[0,0]}setOffset(ue){this.offset=Array.isArray(ue)?()=>ue:ue}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ue){this.supportsScrolling()&&this.window.scrollTo(ue[0],ue[1])}scrollToAnchor(ue){if(!this.supportsScrolling())return;const K=function ur(H,ue){const K=H.getElementById(ue)||H.getElementsByName(ue)[0];if(K)return K;if("function"==typeof H.createTreeWalker&&H.body&&(H.body.createShadowRoot||H.body.attachShadow)){const we=H.createTreeWalker(H.body,NodeFilter.SHOW_ELEMENT);let Ye=we.currentNode;for(;Ye;){const Ct=Ye.shadowRoot;if(Ct){const zt=Ct.getElementById(ue)||Ct.querySelector(`[name="${ue}"]`);if(zt)return zt}Ye=we.nextNode()}}return null}(this.document,ue);K&&(this.scrollToElement(K),K.focus())}setHistoryScrollRestoration(ue){if(this.supportScrollRestoration()){const K=this.window.history;K&&K.scrollRestoration&&(K.scrollRestoration=ue)}}scrollToElement(ue){const K=ue.getBoundingClientRect(),we=K.left+this.window.pageXOffset,Ye=K.top+this.window.pageYOffset,Ct=this.offset();this.window.scrollTo(we-Ct[0],Ye-Ct[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ue=Oa(this.window.history)||Oa(Object.getPrototypeOf(this.window.history));return!(!ue||!ue.writable&&!ue.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Oa(H){return Object.getOwnPropertyDescriptor(H,"scrollRestoration")}class fs{}},529:(sn,ut,j)=>{"use strict";j.d(ut,{JF:()=>te,eN:()=>qt});var T=j(6895),l=j(4650),Z=j(9646),g=j(9751),Ge=j(4351),_e=j(9300),Ze=j(4004);class Ae{}class Ue{}class je{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?this.lazyInit="string"==typeof ye?()=>{this.headers=new Map,ye.split("\n").forEach(he=>{const ge=he.indexOf(":");if(ge>0){const Pe=he.slice(0,ge),rt=Pe.toLowerCase(),ct=he.slice(ge+1).trim();this.maybeSetNormalizedName(Pe,rt),this.headers.has(rt)?this.headers.get(rt).push(ct):this.headers.set(rt,[ct])}})}:()=>{this.headers=new Map,Object.keys(ye).forEach(he=>{let ge=ye[he];const Pe=he.toLowerCase();"string"==typeof ge&&(ge=[ge]),ge.length>0&&(this.headers.set(Pe,ge),this.maybeSetNormalizedName(he,Pe))})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const he=this.headers.get(ye.toLowerCase());return he&&he.length>0?he[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,he){return this.clone({name:ye,value:he,op:"a"})}set(ye,he){return this.clone({name:ye,value:he,op:"s"})}delete(ye,he){return this.clone({name:ye,value:he,op:"d"})}maybeSetNormalizedName(ye,he){this.normalizedNames.has(he)||this.normalizedNames.set(he,ye)}init(){this.lazyInit&&(this.lazyInit instanceof je?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(he=>{this.headers.set(he,ye.headers.get(he)),this.normalizedNames.set(he,ye.normalizedNames.get(he))})}clone(ye){const he=new je;return he.lazyInit=this.lazyInit&&this.lazyInit instanceof je?this.lazyInit:this,he.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),he}applyUpdate(ye){const he=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let ge=ye.value;if("string"==typeof ge&&(ge=[ge]),0===ge.length)return;this.maybeSetNormalizedName(ye.name,he);const Pe=("a"===ye.op?this.headers.get(he):void 0)||[];Pe.push(...ge),this.headers.set(he,Pe);break;case"d":const rt=ye.value;if(rt){let ct=this.headers.get(he);if(!ct)return;ct=ct.filter(ln=>-1===rt.indexOf(ln)),0===ct.length?(this.headers.delete(he),this.normalizedNames.delete(he)):this.headers.set(he,ct)}else this.headers.delete(he),this.normalizedNames.delete(he)}}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(he=>ye(this.normalizedNames.get(he),this.headers.get(he)))}}class Le{encodeKey(ye){return mt(ye)}encodeValue(ye){return mt(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const qe=/%(\d[a-f0-9])/gi,$e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mt(me){return encodeURIComponent(me).replace(qe,(ye,he)=>$e[he]??ye)}function pt(me){return`${me}`}class wt{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new Le,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function et(me,ye){const he=new Map;return me.length>0&&me.replace(/^\?/,"").split("&").forEach(Pe=>{const rt=Pe.indexOf("="),[ct,ln]=-1==rt?[ye.decodeKey(Pe),""]:[ye.decodeKey(Pe.slice(0,rt)),ye.decodeValue(Pe.slice(rt+1))],Rt=he.get(ct)||[];Rt.push(ln),he.set(ct,Rt)}),he}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(he=>{const ge=ye.fromObject[he],Pe=Array.isArray(ge)?ge.map(pt):[pt(ge)];this.map.set(he,Pe)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const he=this.map.get(ye);return he?he[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,he){return this.clone({param:ye,value:he,op:"a"})}appendAll(ye){const he=[];return Object.keys(ye).forEach(ge=>{const Pe=ye[ge];Array.isArray(Pe)?Pe.forEach(rt=>{he.push({param:ge,value:rt,op:"a"})}):he.push({param:ge,value:Pe,op:"a"})}),this.clone(he)}set(ye,he){return this.clone({param:ye,value:he,op:"s"})}delete(ye,he){return this.clone({param:ye,value:he,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const he=this.encoder.encodeKey(ye);return this.map.get(ye).map(ge=>he+"="+this.encoder.encodeValue(ge)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const he=new wt({encoder:this.encoder});return he.cloneFrom=this.cloneFrom||this,he.updates=(this.updates||[]).concat(ye),he}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const he=("a"===ye.op?this.map.get(ye.param):void 0)||[];he.push(pt(ye.value)),this.map.set(ye.param,he);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let ge=this.map.get(ye.param)||[];const Pe=ge.indexOf(pt(ye.value));-1!==Pe&&ge.splice(Pe,1),ge.length>0?this.map.set(ye.param,ge):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class Zt{constructor(){this.map=new Map}set(ye,he){return this.map.set(ye,he),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function Re(me){return typeof ArrayBuffer<"u"&&me instanceof ArrayBuffer}function ze(me){return typeof Blob<"u"&&me instanceof Blob}function It(me){return typeof FormData<"u"&&me instanceof FormData}class kt{constructor(ye,he,ge,Pe){let rt;if(this.url=he,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function bt(me){switch(me){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Pe?(this.body=void 0!==ge?ge:null,rt=Pe):rt=ge,rt&&(this.reportProgress=!!rt.reportProgress,this.withCredentials=!!rt.withCredentials,rt.responseType&&(this.responseType=rt.responseType),rt.headers&&(this.headers=rt.headers),rt.context&&(this.context=rt.context),rt.params&&(this.params=rt.params)),this.headers||(this.headers=new je),this.context||(this.context=new Zt),this.params){const ct=this.params.toString();if(0===ct.length)this.urlWithParams=he;else{const ln=he.indexOf("?");this.urlWithParams=he+(-1===ln?"?":ln<he.length-1?"&":"")+ct}}else this.params=new wt,this.urlWithParams=he}serializeBody(){return null===this.body?null:Re(this.body)||ze(this.body)||It(this.body)||function At(me){return typeof URLSearchParams<"u"&&me instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof wt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||It(this.body)?null:ze(this.body)?this.body.type||null:Re(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const he=ye.method||this.method,ge=ye.url||this.url,Pe=ye.responseType||this.responseType,rt=void 0!==ye.body?ye.body:this.body,ct=void 0!==ye.withCredentials?ye.withCredentials:this.withCredentials,ln=void 0!==ye.reportProgress?ye.reportProgress:this.reportProgress;let Rt=ye.headers||this.headers,mn=ye.params||this.params;const gn=ye.context??this.context;return void 0!==ye.setHeaders&&(Rt=Object.keys(ye.setHeaders).reduce((ji,Lt)=>ji.set(Lt,ye.setHeaders[Lt]),Rt)),ye.setParams&&(mn=Object.keys(ye.setParams).reduce((ji,Lt)=>ji.set(Lt,ye.setParams[Lt]),mn)),new kt(he,ge,rt,{params:mn,headers:Rt,context:gn,reportProgress:ln,responseType:Pe,withCredentials:ct})}}var jt=(()=>((jt=jt||{})[jt.Sent=0]="Sent",jt[jt.UploadProgress=1]="UploadProgress",jt[jt.ResponseHeader=2]="ResponseHeader",jt[jt.DownloadProgress=3]="DownloadProgress",jt[jt.Response=4]="Response",jt[jt.User=5]="User",jt))();class nt{constructor(ye,he=200,ge="OK"){this.headers=ye.headers||new je,this.status=void 0!==ye.status?ye.status:he,this.statusText=ye.statusText||ge,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class at extends nt{constructor(ye={}){super(ye),this.type=jt.ResponseHeader}clone(ye={}){return new at({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class xt extends nt{constructor(ye={}){super(ye),this.type=jt.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new xt({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class _t extends nt{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}function Yt(me,ye){return{body:ye,headers:me.headers,context:me.context,observe:me.observe,params:me.params,reportProgress:me.reportProgress,responseType:me.responseType,withCredentials:me.withCredentials}}let qt=(()=>{class me{constructor(he){this.handler=he}request(he,ge,Pe={}){let rt;if(he instanceof kt)rt=he;else{let Rt,mn;Rt=Pe.headers instanceof je?Pe.headers:new je(Pe.headers),Pe.params&&(mn=Pe.params instanceof wt?Pe.params:new wt({fromObject:Pe.params})),rt=new kt(he,ge,void 0!==Pe.body?Pe.body:null,{headers:Rt,context:Pe.context,params:mn,reportProgress:Pe.reportProgress,responseType:Pe.responseType||"json",withCredentials:Pe.withCredentials})}const ct=(0,Z.of)(rt).pipe((0,Ge.b)(Rt=>this.handler.handle(Rt)));if(he instanceof kt||"events"===Pe.observe)return ct;const ln=ct.pipe((0,_e.h)(Rt=>Rt instanceof xt));switch(Pe.observe||"body"){case"body":switch(rt.responseType){case"arraybuffer":return ln.pipe((0,Ze.U)(Rt=>{if(null!==Rt.body&&!(Rt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Rt.body}));case"blob":return ln.pipe((0,Ze.U)(Rt=>{if(null!==Rt.body&&!(Rt.body instanceof Blob))throw new Error("Response is not a Blob.");return Rt.body}));case"text":return ln.pipe((0,Ze.U)(Rt=>{if(null!==Rt.body&&"string"!=typeof Rt.body)throw new Error("Response is not a string.");return Rt.body}));default:return ln.pipe((0,Ze.U)(Rt=>Rt.body))}case"response":return ln;default:throw new Error(`Unreachable: unhandled observe type ${Pe.observe}}`)}}delete(he,ge={}){return this.request("DELETE",he,ge)}get(he,ge={}){return this.request("GET",he,ge)}head(he,ge={}){return this.request("HEAD",he,ge)}jsonp(he,ge){return this.request("JSONP",he,{params:(new wt).append(ge,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(he,ge={}){return this.request("OPTIONS",he,ge)}patch(he,ge,Pe={}){return this.request("PATCH",he,Yt(Pe,ge))}post(he,ge,Pe={}){return this.request("POST",he,Yt(Pe,ge))}put(he,ge,Pe={}){return this.request("PUT",he,Yt(Pe,ge))}}return me.\u0275fac=function(he){return new(he||me)(l.LFG(Ae))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();class On{constructor(ye,he){this.next=ye,this.interceptor=he}handle(ye){return this.interceptor.intercept(ye,this.next)}}const Jn=new l.OlP("HTTP_INTERCEPTORS");let hi=(()=>{class me{intercept(he,ge){return ge.handle(he)}}return me.\u0275fac=function(he){return new(he||me)},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();const Qt=/^\)\]\}',?\n/;let Vn=(()=>{class me{constructor(he){this.xhrFactory=he}handle(he){if("JSONP"===he.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new g.y(ge=>{const Pe=this.xhrFactory.build();if(Pe.open(he.method,he.urlWithParams),he.withCredentials&&(Pe.withCredentials=!0),he.headers.forEach((ft,ie)=>Pe.setRequestHeader(ft,ie.join(","))),he.headers.has("Accept")||Pe.setRequestHeader("Accept","application/json, text/plain, */*"),!he.headers.has("Content-Type")){const ft=he.detectContentTypeHeader();null!==ft&&Pe.setRequestHeader("Content-Type",ft)}if(he.responseType){const ft=he.responseType.toLowerCase();Pe.responseType="json"!==ft?ft:"text"}const rt=he.serializeBody();let ct=null;const ln=()=>{if(null!==ct)return ct;const ft=Pe.statusText||"OK",ie=new je(Pe.getAllResponseHeaders()),V=function xn(me){return"responseURL"in me&&me.responseURL?me.responseURL:/^X-Request-URL:/m.test(me.getAllResponseHeaders())?me.getResponseHeader("X-Request-URL"):null}(Pe)||he.url;return ct=new at({headers:ie,status:Pe.status,statusText:ft,url:V}),ct},Rt=()=>{let{headers:ft,status:ie,statusText:V,url:U}=ln(),$=null;204!==ie&&($=typeof Pe.response>"u"?Pe.responseText:Pe.response),0===ie&&(ie=$?200:0);let X=ie>=200&&ie<300;if("json"===he.responseType&&"string"==typeof $){const ce=$;$=$.replace(Qt,"");try{$=""!==$?JSON.parse($):null}catch(Ce){$=ce,X&&(X=!1,$={error:Ce,text:$})}}X?(ge.next(new xt({body:$,headers:ft,status:ie,statusText:V,url:U||void 0})),ge.complete()):ge.error(new _t({error:$,headers:ft,status:ie,statusText:V,url:U||void 0}))},mn=ft=>{const{url:ie}=ln(),V=new _t({error:ft,status:Pe.status||0,statusText:Pe.statusText||"Unknown Error",url:ie||void 0});ge.error(V)};let gn=!1;const ji=ft=>{gn||(ge.next(ln()),gn=!0);let ie={type:jt.DownloadProgress,loaded:ft.loaded};ft.lengthComputable&&(ie.total=ft.total),"text"===he.responseType&&!!Pe.responseText&&(ie.partialText=Pe.responseText),ge.next(ie)},Lt=ft=>{let ie={type:jt.UploadProgress,loaded:ft.loaded};ft.lengthComputable&&(ie.total=ft.total),ge.next(ie)};return Pe.addEventListener("load",Rt),Pe.addEventListener("error",mn),Pe.addEventListener("timeout",mn),Pe.addEventListener("abort",mn),he.reportProgress&&(Pe.addEventListener("progress",ji),null!==rt&&Pe.upload&&Pe.upload.addEventListener("progress",Lt)),Pe.send(rt),ge.next({type:jt.Sent}),()=>{Pe.removeEventListener("error",mn),Pe.removeEventListener("abort",mn),Pe.removeEventListener("load",Rt),Pe.removeEventListener("timeout",mn),he.reportProgress&&(Pe.removeEventListener("progress",ji),null!==rt&&Pe.upload&&Pe.upload.removeEventListener("progress",Lt)),Pe.readyState!==Pe.DONE&&Pe.abort()}})}}return me.\u0275fac=function(he){return new(he||me)(l.LFG(T.JF))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();const Qn=new l.OlP("XSRF_COOKIE_NAME"),pi=new l.OlP("XSRF_HEADER_NAME");class Fi{}let _i=(()=>{class me{constructor(he,ge,Pe){this.doc=he,this.platform=ge,this.cookieName=Pe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const he=this.doc.cookie||"";return he!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,T.Mx)(he,this.cookieName),this.lastCookieString=he),this.lastToken}}return me.\u0275fac=function(he){return new(he||me)(l.LFG(T.K0),l.LFG(l.Lbi),l.LFG(Qn))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})(),yi=(()=>{class me{constructor(he,ge){this.tokenService=he,this.headerName=ge}intercept(he,ge){const Pe=he.url.toLowerCase();if("GET"===he.method||"HEAD"===he.method||Pe.startsWith("http://")||Pe.startsWith("https://"))return ge.handle(he);const rt=this.tokenService.getToken();return null!==rt&&!he.headers.has(this.headerName)&&(he=he.clone({headers:he.headers.set(this.headerName,rt)})),ge.handle(he)}}return me.\u0275fac=function(he){return new(he||me)(l.LFG(Fi),l.LFG(pi))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})(),un=(()=>{class me{constructor(he,ge){this.backend=he,this.injector=ge,this.chain=null}handle(he){if(null===this.chain){const ge=this.injector.get(Jn,[]);this.chain=ge.reduceRight((Pe,rt)=>new On(Pe,rt),this.backend)}return this.chain.handle(he)}}return me.\u0275fac=function(he){return new(he||me)(l.LFG(Ue),l.LFG(l.zs3))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})(),Y=(()=>{class me{static disable(){return{ngModule:me,providers:[{provide:yi,useClass:hi}]}}static withOptions(he={}){return{ngModule:me,providers:[he.cookieName?{provide:Qn,useValue:he.cookieName}:[],he.headerName?{provide:pi,useValue:he.headerName}:[]]}}}return me.\u0275fac=function(he){return new(he||me)},me.\u0275mod=l.oAB({type:me}),me.\u0275inj=l.cJS({providers:[yi,{provide:Jn,useExisting:yi,multi:!0},{provide:Fi,useClass:_i},{provide:Qn,useValue:"XSRF-TOKEN"},{provide:pi,useValue:"X-XSRF-TOKEN"}]}),me})(),te=(()=>{class me{}return me.\u0275fac=function(he){return new(he||me)},me.\u0275mod=l.oAB({type:me}),me.\u0275inj=l.cJS({providers:[qt,{provide:Ae,useClass:un},Vn,{provide:Ue,useExisting:Vn}],imports:[Y.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),me})()},4650:(sn,ut,j)=>{"use strict";j.d(ut,{$8M:()=>bo,$Z:()=>Ri,AFp:()=>s_,ALo:()=>Nv,AaK:()=>Ae,Akn:()=>fl,BQk:()=>fh,CHM:()=>Xs,CRH:()=>qv,CZH:()=>cm,CqO:()=>ty,D6c:()=>CC,DdM:()=>Iv,EJc:()=>wh,EiD:()=>Nc,EpF:()=>gg,F$t:()=>xg,F4k:()=>yg,FYo:()=>$u,FiY:()=>Yi,G48:()=>Mi,Gf:()=>Zv,GfV:()=>Zc,GkF:()=>qf,Gpc:()=>Je,Gre:()=>Mg,Hsn:()=>sy,Ikx:()=>Sg,JOm:()=>xa,JVY:()=>ym,Jf7:()=>_f,KtG:()=>er,L6k:()=>Ah,LAX:()=>yd,LFG:()=>mr,LSH:()=>zu,Lbi:()=>Fw,Lck:()=>Vg,MAs:()=>J_,MMx:()=>Cv,NdJ:()=>vg,O4$:()=>kn,OlP:()=>zi,Oqu:()=>Dg,PXZ:()=>Yw,Q6J:()=>Zf,QGY:()=>_g,QP$:()=>dn,QbO:()=>dm,Qsj:()=>Om,R0b:()=>Tl,RDi:()=>mm,Rgc:()=>Pp,SBq:()=>Hu,Sil:()=>Vw,Suo:()=>Wv,TTD:()=>ds,TgZ:()=>hh,Tol:()=>Yf,Udp:()=>wg,VKq:()=>Tp,WFA:()=>bg,WLB:()=>Av,XFs:()=>un,Xpm:()=>U,Xts:()=>Uu,Y36:()=>Yr,YKP:()=>zg,YNc:()=>X_,Yjl:()=>Ft,Yz7:()=>an,Z0I:()=>Kt,ZZ4:()=>Qw,_Bn:()=>xv,_UZ:()=>ph,_Vd:()=>uu,_c5:()=>xC,_uU:()=>Py,aQg:()=>e1,c2e:()=>Nw,cJS:()=>dt,cg1:()=>Ig,d8E:()=>Tg,dDg:()=>rC,dqk:()=>Pe,eBb:()=>$p,eFA:()=>u,ekj:()=>Cg,eoX:()=>D0,f3M:()=>Ua,g9A:()=>um,h0i:()=>vh,hGG:()=>wC,hij:()=>Jf,iGM:()=>Gv,ifc:()=>ge,ip1:()=>dd,jDz:()=>jg,kEZ:()=>Pv,kL8:()=>Jy,kcU:()=>ni,lG2:()=>Qe,lcZ:()=>Bv,lqb:()=>jc,lri:()=>Dc,mCW:()=>bd,n5z:()=>ei,n_E:()=>rm,oAB:()=>Ce,oJD:()=>Rh,oxw:()=>oy,pB0:()=>Lu,q3G:()=>fo,qLn:()=>fc,qOj:()=>jf,qZA:()=>Wf,qzn:()=>Fc,rFY:()=>Gg,rWj:()=>E0,sBO:()=>Ma,sIi:()=>vp,s_b:()=>sm,soG:()=>Rp,tb:()=>a_,tp0:()=>Ls,uIk:()=>$_,vHH:()=>$e,vpe:()=>Ec,wAp:()=>wi,xp6:()=>D,ynx:()=>wp,z2F:()=>Nt,z3N:()=>ol,zSh:()=>Dd,zs3:()=>it});var T=j(7579),l=j(727),Z=j(9751),g=j(6451),Ge=j(3099);function _e(n){for(let r in n)if(n[r]===_e)return r;throw Error("Could not find renamed property on target object.")}function Ze(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ae(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ae).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ue(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const je=_e({__forward_ref__:_e});function Je(n){return n.__forward_ref__=Je,n.toString=function(){return Ae(this())},n}function Le(n){return et(n)?n():n}function et(n){return"function"==typeof n&&n.hasOwnProperty(je)&&n.__forward_ref__===Je}class $e extends Error{constructor(r,s){super(function mt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function pt(n){return"string"==typeof n?n:null==n?"":String(n)}function Re(n,r){throw new $e(-201,!1)}function hi(n,r){null==n&&function Xt(n,r,s,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${s} ${d} ${r} <=Actual]`))}(r,n,null,"!=")}function an(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function dt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Mt(n){return Qt(n,pi)||Qt(n,_i)}function Kt(n){return null!==Mt(n)}function Qt(n,r){return n.hasOwnProperty(r)?n[r]:null}function Qn(n){return n&&(n.hasOwnProperty(Fi)||n.hasOwnProperty(yi))?n[Fi]:null}const pi=_e({\u0275prov:_e}),Fi=_e({\u0275inj:_e}),_i=_e({ngInjectableDef:_e}),yi=_e({ngInjectorDef:_e});var un=(()=>((un=un||{})[un.Default=0]="Default",un[un.Host=1]="Host",un[un.Self=2]="Self",un[un.SkipSelf=4]="SkipSelf",un[un.Optional=8]="Optional",un))();let Rn;function Y(n){const r=Rn;return Rn=n,r}function te(n,r,s){const d=Mt(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:s&un.Optional?null:void 0!==r?r:void Re(Ae(n))}function Ke(n){return{toString:n}.toString()}var me=(()=>((me=me||{})[me.OnPush=0]="OnPush",me[me.Default=1]="Default",me))(),ge=(()=>{return(n=ge||(ge={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ge;var n})();const Pe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ln={},Rt=[],mn=_e({\u0275cmp:_e}),gn=_e({\u0275dir:_e}),ji=_e({\u0275pipe:_e}),Lt=_e({\u0275mod:_e}),ft=_e({\u0275fac:_e}),ie=_e({__NG_ELEMENT_ID__:_e});let V=0;function U(n){return Ke(()=>{const s=!0===n.standalone,d={},_={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===me.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Rt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ge.Emulated,id:"c"+V++,styles:n.styles||Rt,_:null,setInput:null,schemas:n.schemas||null,tView:null},w=n.dependencies,P=n.features;return _.inputs=Ie(n.inputs,d),_.outputs=Ie(n.outputs),P&&P.forEach(F=>F(_)),_.directiveDefs=w?()=>("function"==typeof w?w():w).map(X).filter(ce):null,_.pipeDefs=w?()=>("function"==typeof w?w():w).map(nn).filter(ce):null,_})}function X(n){return yt(n)||Pt(n)}function ce(n){return null!==n}function Ce(n){return Ke(()=>({type:n.type,bootstrap:n.bootstrap||Rt,declarations:n.declarations||Rt,imports:n.imports||Rt,exports:n.exports||Rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ie(n,r){if(null==n)return ln;const s={};for(const d in n)if(n.hasOwnProperty(d)){let _=n[d],w=_;Array.isArray(_)&&(w=_[1],_=_[0]),s[_]=d,r&&(r[_]=w)}return s}const Qe=U;function Ft(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function yt(n){return n[mn]||null}function Pt(n){return n[gn]||null}function nn(n){return n[ji]||null}function dn(n){const r=yt(n)||Pt(n)||nn(n);return null!==r&&r.standalone}function on(n,r){const s=n[Lt]||null;if(!s&&!0===r)throw new Error(`Type ${Ae(n)} does not have '\u0275mod' property.`);return s}function cr(n){return Array.isArray(n)&&"object"==typeof n[1]}function br(n){return Array.isArray(n)&&!0===n[1]}function Hs(n){return 0!=(8&n.flags)}function $s(n){return 2==(2&n.flags)}function us(n){return 1==(1&n.flags)}function Jr(n){return null!==n.template}function Zr(n){return 0!=(256&n[2])}function uo(n,r){return n.hasOwnProperty(ft)?n[ft]:null}class ts{constructor(r,s,d){this.previousValue=r,this.currentValue=s,this.firstChange=d}isFirstChange(){return this.firstChange}}function ds(){return Ai}function Ai(n){return n.type.prototype.ngOnChanges&&(n.setInput=Vr),Dr}function Dr(){const n=qs(this),r=n?.current;if(r){const s=n.previous;if(s===ln)n.previous=r;else for(let d in r)s[d]=r[d];n.current=null,this.ngOnChanges(r)}}function Vr(n,r,s,d){const _=qs(n)||function Ks(n,r){return n[Pa]=r}(n,{previous:ln,current:null}),w=_.current||(_.current={}),P=_.previous,F=this.declaredInputs[s],G=P[F];w[F]=new ts(G&&G.currentValue,r,P===ln),n[d]=r}ds.ngInherit=!0;const Pa="__ngSimpleChanges__";function qs(n){return n[Pa]||null}function Wi(n){for(;Array.isArray(n);)n=n[0];return n}function Oa(n,r){return Wi(r[n])}function ur(n,r){return Wi(r[n.index])}function fs(n,r){return n.data[r]}function Po(n,r){return n[r]}function Bi(n,r){const s=r[n];return cr(s)?s:s[0]}function Oo(n){return 64==(64&n[2])}function vr(n,r){return null==r?null:n[r]}function Ts(n){n[18]=0}function Uo(n,r){n[5]+=r;let s=n,d=n[3];for(;null!==d&&(1===r&&1===s[5]||-1===r&&0===s[5]);)d[5]+=r,s=d,d=d[3]}const oi={lFrame:Ra(null),bindingsEnabled:!0};function Ei(){return oi.bindingsEnabled}function Wt(){return oi.lFrame.lView}function yn(){return oi.lFrame.tView}function Xs(n){return oi.lFrame.contextLView=n,n[8]}function er(n){return oi.lFrame.contextLView=null,n}function gi(){let n=ne();for(;null!==n&&64===n.type;)n=n.parent;return n}function ne(){return oi.lFrame.currentTNode}function q(n,r){const s=oi.lFrame;s.currentTNode=n,s.isParent=r}function be(){return oi.lFrame.isParent}function Bt(){oi.lFrame.isParent=!1}function qi(){const n=oi.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Xa(){return oi.lFrame.bindingIndex++}function As(n){const r=oi.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Sc(n,r){const s=oi.lFrame;s.bindingIndex=s.bindingRootIndex=n,ga(r)}function ga(n){oi.lFrame.currentDirectiveIndex=n}function Js(n){const r=oi.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function Ja(){return oi.lFrame.currentQueryIndex}function Qs(n){oi.lFrame.currentQueryIndex=n}function Cr(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function gs(n,r,s){if(s&un.SkipSelf){let _=r,w=n;for(;!(_=_.parent,null!==_||s&un.Host||(_=Cr(w),null===_||(w=w[15],10&_.type))););if(null===_)return!1;r=_,n=w}const d=oi.lFrame=vl();return d.currentTNode=r,d.lView=n,!0}function ko(n){const r=vl(),s=n[1];oi.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function vl(){const n=oi.lFrame,r=null===n?null:n.child;return null===r?Ra(n):r}function Ra(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Sr(){const n=oi.lFrame;return oi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const H=Sr;function ue(){const n=Sr();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ye(){return oi.lFrame.selectedIndex}function Ct(n){oi.lFrame.selectedIndex=n}function zt(){const n=oi.lFrame;return fs(n.tView,n.selectedIndex)}function kn(){oi.lFrame.currentNamespace="svg"}function ni(){!function vi(){oi.lFrame.currentNamespace=null}()}function Di(n,r){for(let s=r.directiveStart,d=r.directiveEnd;s<d;s++){const w=n.data[s].type.prototype,{ngAfterContentInit:P,ngAfterContentChecked:F,ngAfterViewInit:G,ngAfterViewChecked:le,ngOnDestroy:Ee}=w;P&&(n.contentHooks||(n.contentHooks=[])).push(-s,P),F&&((n.contentHooks||(n.contentHooks=[])).push(s,F),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,F)),G&&(n.viewHooks||(n.viewHooks=[])).push(-s,G),le&&((n.viewHooks||(n.viewHooks=[])).push(s,le),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,le)),null!=Ee&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Ee)}}function bi(n,r,s){Ki(n,r,3,s)}function Qr(n,r,s,d){(3&n[2])===s&&Ki(n,r,s,d)}function Wr(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Ki(n,r,s,d){const w=d??-1,P=r.length-1;let F=0;for(let G=void 0!==d?65535&n[18]:0;G<P;G++)if("number"==typeof r[G+1]){if(F=r[G],null!=d&&F>=d)break}else r[G]<0&&(n[18]+=65536),(F<w||-1==w)&&(Tr(n,s,r,G),n[18]=(4294901760&n[18])+G+2),G++}function Tr(n,r,s,d){const _=s[d]<0,w=s[d+1],F=n[_?-s[d]:s[d]];if(_){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{w.call(F)}finally{}}}else try{w.call(F)}finally{}}class Ir{constructor(r,s,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=d}}function nc(n,r,s){let d=0;for(;d<s.length;){const _=s[d];if("number"==typeof _){if(0!==_)break;d++;const w=s[d++],P=s[d++],F=s[d++];n.setAttribute(r,P,F,w)}else{const w=_,P=s[++d];ya(w)?n.setProperty(r,w,P):n.setAttribute(r,w,P),d++}}return d}function Fa(n){return 3===n||4===n||6===n}function ya(n){return 64===n.charCodeAt(0)}function Ps(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let d=0;d<r.length;d++){const _=r[d];"number"==typeof _?s=_:0===s||bn(n,s,_,null,-1===s||2===s?r[++d]:null)}}return n}function bn(n,r,s,d,_){let w=0,P=n.length;if(-1===r)P=-1;else for(;w<n.length;){const F=n[w++];if("number"==typeof F){if(F===r){P=-1;break}if(F>r){P=w-1;break}}}for(;w<n.length;){const F=n[w];if("number"==typeof F)break;if(F===s){if(null===d)return void(null!==_&&(n[w+1]=_));if(d===n[w+1])return void(n[w+2]=_)}w++,null!==d&&w++,null!==_&&w++}-1!==P&&(n.splice(P,0,r),w=P+1),n.splice(w++,0,s),null!==d&&n.splice(w++,0,d),null!==_&&n.splice(w++,0,_)}function xl(n){return-1!==n}function _s(n){return 32767&n}function Os(n,r){let s=function wl(n){return n>>16}(n),d=r;for(;s>0;)d=d[15],s--;return d}let Cl=!0;function el(n){const r=Cl;return Cl=n,r}let tl=0;const is={};function qr(n,r){const s=oc(n,r);if(-1!==s)return s;const d=r[1];d.firstCreatePass&&(n.injectorIndex=r.length,ea(d.data,n),ea(r,null),ea(d.blueprint,null));const _=rs(n,r),w=n.injectorIndex;if(xl(_)){const P=_s(_),F=Os(_,r),G=F[1].data;for(let le=0;le<8;le++)r[w+le]=F[P+le]|G[P+le]}return r[w+8]=_,w}function ea(n,r){n.push(0,0,0,0,0,0,0,0,r)}function oc(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function rs(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,d=null,_=r;for(;null!==_;){if(d=ks(_),null===d)return-1;if(s++,_=_[15],-1!==d.injectorIndex)return d.injectorIndex|s<<16}return-1}function Na(n,r,s){!function Fl(n,r,s){let d;"string"==typeof s?d=s.charCodeAt(0)||0:s.hasOwnProperty(ie)&&(d=s[ie]),null==d&&(d=s[ie]=tl++);const _=255&d;r.data[n+(_>>5)]|=1<<_}(n,r,s)}function sc(n,r,s){if(s&un.Optional||void 0!==n)return n;Re()}function os(n,r,s,d){if(s&un.Optional&&void 0===d&&(d=null),0==(s&(un.Self|un.Host))){const _=n[9],w=Y(void 0);try{return _?_.get(r,d,s&un.Optional):te(r,d,s&un.Optional)}finally{Y(w)}}return sc(d,0,s)}function hr(n,r,s,d=un.Default,_){if(null!==n){if(1024&r[2]){const P=function Ac(n,r,s,d,_){let w=n,P=r;for(;null!==w&&null!==P&&1024&P[2]&&!(256&P[2]);){const F=di(w,P,s,d|un.Self,is);if(F!==is)return F;let G=w.parent;if(!G){const le=P[21];if(le){const Ee=le.get(s,is,d);if(Ee!==is)return Ee}G=ks(P),P=P[15]}w=G}return _}(n,r,s,d,is);if(P!==is)return P}const w=di(n,r,s,d,is);if(w!==is)return w}return os(r,s,d,_)}function di(n,r,s,d,_){const w=function ac(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(ie)?n[ie]:void 0;return"number"==typeof r?r>=0?255&r:Cn:r}(s);if("function"==typeof w){if(!gs(r,n,d))return d&un.Host?sc(_,0,d):os(r,s,d,_);try{const P=w(d);if(null!=P||d&un.Optional)return P;Re()}finally{H()}}else if("number"==typeof w){let P=null,F=oc(n,r),G=-1,le=d&un.Host?r[16][6]:null;for((-1===F||d&un.SkipSelf)&&(G=-1===F?rs(n,r):r[F+8],-1!==G&&Ur(d,!1)?(P=r[1],F=_s(G),r=Os(G,r)):F=-1);-1!==F;){const Ee=r[1];if(zl(w,F,Ee.data)){const Be=Fr(F,r,s,P,d,le);if(Be!==is)return Be}G=r[F+8],-1!==G&&Ur(d,r[1].data[F+8]===le)&&zl(w,F,r)?(P=Ee,F=_s(G),r=Os(G,r)):F=-1}}return _}function Fr(n,r,s,d,_,w){const P=r[1],F=P.data[n+8],Ee=Bl(F,P,s,null==d?$s(F)&&Cl:d!=P&&0!=(3&F.type),_&un.Host&&w===F);return null!==Ee?Ba(r,P,Ee,F):is}function Bl(n,r,s,d,_){const w=n.providerIndexes,P=r.data,F=1048575&w,G=n.directiveStart,Ee=w>>20,lt=_?F+Ee:n.directiveEnd;for(let Tt=d?F:F+Ee;Tt<lt;Tt++){const Gt=P[Tt];if(Tt<G&&s===Gt||Tt>=G&&Gt.type===s)return Tt}if(_){const Tt=P[G];if(Tt&&Jr(Tt)&&Tt.type===s)return G}return null}function Ba(n,r,s,d){let _=n[s];const w=r.data;if(function $o(n){return n instanceof Ir}(_)){const P=_;P.resolving&&function tn(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new $e(-200,`Circular dependency in DI detected for ${n}${s}`)}(function wt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():pt(n)}(w[s]));const F=el(P.canSeeViewProviders);P.resolving=!0;const G=P.injectImpl?Y(P.injectImpl):null;gs(n,d,un.Default);try{_=n[s]=P.factory(void 0,w,n,d),r.firstCreatePass&&s>=d.directiveStart&&function tr(n,r,s){const{ngOnChanges:d,ngOnInit:_,ngDoCheck:w}=r.type.prototype;if(d){const P=Ai(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,P),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,P)}_&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,_),w&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,w),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,w))}(s,w[s],r)}finally{null!==G&&Y(G),el(F),P.resolving=!1,H()}}return _}function zl(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ur(n,r){return!(n&un.Self||n&un.Host&&r)}class va{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,d){return hr(this._tNode,this._lView,r,d,s)}}function Cn(){return new va(gi(),Wt())}function ei(n){return Ke(()=>{const r=n.prototype.constructor,s=r[ft]||Vl(r),d=Object.prototype;let _=Object.getPrototypeOf(n.prototype).constructor;for(;_&&_!==d;){const w=_[ft]||Vl(_);if(w&&w!==s)return w;_=Object.getPrototypeOf(_)}return w=>new w})}function Vl(n){return et(n)?()=>{const r=Vl(Le(n));return r&&r()}:uo(n)}function ks(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function bo(n){return function Nl(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const d=s.length;let _=0;for(;_<d;){const w=s[_];if(Fa(w))break;if(0===w)_+=2;else if("number"==typeof w)for(_++;_<d&&"string"==typeof s[_];)_++;else{if(w===r)return s[_+1];_+=2}}}return null}(gi(),n)}const jr="__parameters__";function pr(n,r,s){return Ke(()=>{const d=function nr(n){return function(...s){if(n){const d=n(...s);for(const _ in d)this[_]=d[_]}}}(r);function _(...w){if(this instanceof _)return d.apply(this,w),this;const P=new _(...w);return F.annotation=P,F;function F(G,le,Ee){const Be=G.hasOwnProperty(jr)?G[jr]:Object.defineProperty(G,jr,{value:[]})[jr];for(;Be.length<=Ee;)Be.push(null);return(Be[Ee]=Be[Ee]||[]).push(P),G}}return s&&(_.prototype=Object.create(s.prototype)),_.prototype.ngMetadataName=n,_.annotationCls=_,_})}class zi{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=an({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function B(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let d=n[s];Array.isArray(d)?(r===n&&(r=n.slice(0,s)),B(d,r)):r!==n&&r.push(d)}return r}function z(n,r){n.forEach(s=>Array.isArray(s)?z(s,r):r(s))}function W(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function se(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ae(n,r){const s=[];for(let d=0;d<n;d++)s.push(r);return s}function fe(n,r,s){let d=Oe(n,r);return d>=0?n[1|d]=s:(d=~d,function C(n,r,s,d){let _=n.length;if(_==r)n.push(s,d);else if(1===_)n.push(d,n[0]),n[0]=s;else{for(_--,n.push(n[_-1],n[_]);_>r;)n[_]=n[_-2],_--;n[r]=s,n[r+1]=d}}(n,d,r,s)),d}function oe(n,r){const s=Oe(n,r);if(s>=0)return n[1|s]}function Oe(n,r){return function Et(n,r,s){let d=0,_=n.length>>s;for(;_!==d;){const w=d+(_-d>>1),P=n[w<<s];if(r===P)return w<<s;P>r?_=w:d=w+1}return~(_<<s)}(n,r,1)}const Hi={},Kr="__NG_DI_FLAG__",Oi="ngTempTokenPath",fr=/\n/gm,$i="__source";let eo;function to(n){const r=eo;return eo=n,r}function na(n,r=un.Default){if(void 0===eo)throw new $e(-203,!1);return null===eo?te(n,void 0,r):eo.get(n,r&un.Optional?null:void 0,r)}function mr(n,r=un.Default){return(function Xe(){return Rn}()||na)(Le(n),r)}function Ua(n,r=un.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),mr(n,r)}function Hl(n){const r=[];for(let s=0;s<n.length;s++){const d=Le(n[s]);if(Array.isArray(d)){if(0===d.length)throw new $e(900,!1);let _,w=un.Default;for(let P=0;P<d.length;P++){const F=d[P],G=po(F);"number"==typeof G?-1===G?_=F.token:w|=G:_=F}r.push(mr(_,w))}else r.push(mr(d))}return r}function ir(n,r){return n[Kr]=r,n.prototype[Kr]=r,n}function po(n){return n[Kr]}const Yi=ir(pr("Optional"),8),Ls=ir(pr("SkipSelf"),4);let Ou,ku,rr;function mm(n){Ou=n}function rl(n){return function gd(){if(void 0===ku&&(ku=null,Pe.trustedTypes))try{ku=Pe.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ku}()?.createHTML(n)||n}function Th(n){return function _d(){if(void 0===rr&&(rr=null,Pe.trustedTypes))try{rr=Pe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rr}()?.createHTML(n)||n}class ba{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Rc extends ba{getTypeName(){return"HTML"}}class Hp extends ba{getTypeName(){return"Style"}}class Lc extends ba{getTypeName(){return"Script"}}class _m extends ba{getTypeName(){return"URL"}}class Gl extends ba{getTypeName(){return"ResourceURL"}}function ol(n){return n instanceof ba?n.changingThisBreaksApplicationSecurity:n}function Fc(n,r){const s=function Ih(n){return n instanceof ba&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function ym(n){return new Rc(n)}function Ah(n){return new Hp(n)}function $p(n){return new Lc(n)}function yd(n){return new _m(n)}function Lu(n){return new Gl(n)}class vd{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(rl(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class Gp{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const d=this.inertDocument.createElement("body");s.appendChild(d)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=rl(r),s;const d=this.inertDocument.createElement("body");return d.innerHTML=rl(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(r){const s=r.attributes;for(let _=s.length-1;0<_;_--){const P=s.item(_).name;("xmlns:ns1"===P||0===P.indexOf("ns1:"))&&r.removeAttribute(P)}let d=r.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const vm=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function bd(n){return(n=String(n)).match(vm)?n:"unsafe:"+n}function sl(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function cc(...n){const r={};for(const s of n)for(const d in s)s.hasOwnProperty(d)&&(r[d]=!0);return r}const Ph=sl("area,br,col,hr,img,wbr"),uc=sl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ou=sl("rp,rt"),Oh=cc(Ph,cc(uc,sl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cc(ou,sl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cc(ou,uc)),kh=sl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wd=cc(kh,sl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bm=sl("script,style,template");class su{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,d=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?d=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,d&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let _=this.checkClobberedElement(s,s.nextSibling);if(_){s=_;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Oh.hasOwnProperty(s))return this.sanitizedSomething=!0,!bm.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const d=r.attributes;for(let _=0;_<d.length;_++){const w=d.item(_),P=w.name,F=P.toLowerCase();if(!wd.hasOwnProperty(F)){this.sanitizedSomething=!0;continue}let G=w.value;kh[F]&&(G=bd(G)),this.buf.push(" ",P,'="',Fu(G),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Oh.hasOwnProperty(s)&&!Ph.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Fu(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const xm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,no=/([^\#-~ |!])/g;function Fu(n){return n.replace(/&/g,"&amp;").replace(xm,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(no,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Nu;function Nc(n,r){let s=null;try{Nu=Nu||function oa(n){const r=new Gp(n);return function Zp(){try{return!!(new window.DOMParser).parseFromString(rl(""),"text/html")}catch{return!1}}()?new vd(r):r}(n);let d=r?String(r):"";s=Nu.getInertBodyElement(d);let _=5,w=d;do{if(0===_)throw new Error("Failed to sanitize html because the input is unstable");_--,d=w,w=s.innerHTML,s=Nu.getInertBodyElement(d)}while(d!==w);return rl((new su).sanitizeChildren(au(s)||s))}finally{if(s){const d=au(s)||s;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function au(n){return"content"in n&&function dc(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var fo=(()=>((fo=fo||{})[fo.NONE=0]="NONE",fo[fo.HTML=1]="HTML",fo[fo.STYLE=2]="STYLE",fo[fo.SCRIPT=3]="SCRIPT",fo[fo.URL=4]="URL",fo[fo.RESOURCE_URL=5]="RESOURCE_URL",fo))();function Rh(n){const r=zc();return r?Th(r.sanitize(fo.HTML,n)||""):Fc(n,"HTML")?Th(ol(n)):Nc(function md(){return void 0!==Ou?Ou:typeof document<"u"?document:void 0}(),pt(n))}function zu(n){const r=zc();return r?r.sanitize(fo.URL,n)||"":Fc(n,"URL")?ol(n):bd(pt(n))}function zc(){const n=Wt();return n&&n[12]}const Uu=new zi("ENVIRONMENT_INITIALIZER"),Ed=new zi("INJECTOR",-1),Fh=new zi("INJECTOR_DEF_TYPES");class Nh{get(r,s=Hi){if(s===Hi){const d=new Error(`NullInjectorError: No provider for ${Ae(r)}!`);throw d.name="NullInjectorError",d}return s}}function Em(...n){return{\u0275providers:Yp(0,n)}}function Yp(n,...r){const s=[],d=new Set;let _;return z(r,w=>{const P=w;Bh(P,s,[],d)&&(_||(_=[]),_.push(P))}),void 0!==_&&Xp(_,s),s}function Xp(n,r){for(let s=0;s<n.length;s++){const{providers:_}=n[s];z(_,w=>{r.push(w)})}}function Bh(n,r,s,d){if(!(n=Le(n)))return!1;let _=null,w=Qn(n);const P=!w&&yt(n);if(w||P){if(P&&!P.standalone)return!1;_=n}else{const G=n.ngModule;if(w=Qn(G),!w)return!1;_=G}const F=d.has(_);if(P){if(F)return!1;if(d.add(_),P.dependencies){const G="function"==typeof P.dependencies?P.dependencies():P.dependencies;for(const le of G)Bh(le,r,s,d)}}else{if(!w)return!1;{if(null!=w.imports&&!F){let le;d.add(_);try{z(w.imports,Ee=>{Bh(Ee,r,s,d)&&(le||(le=[]),le.push(Ee))})}finally{}void 0!==le&&Xp(le,r)}if(!F){const le=uo(_)||(()=>new _);r.push({provide:_,useFactory:le,deps:Rt},{provide:Fh,useValue:_,multi:!0},{provide:Uu,useValue:()=>mr(_),multi:!0})}const G=w.providers;null==G||F||z(G,Ee=>{r.push(Ee)})}}return _!==n&&void 0!==n.providers}const Dm=_e({provide:String,useValue:_e});function hc(n){return null!==n&&"object"==typeof n&&Dm in n}function Uc(n){return"function"==typeof n}const Dd=new zi("Set Injector scope."),ju={},Sm={};let zh;function Md(){return void 0===zh&&(zh=new Nh),zh}class jc{}class Sd extends jc{constructor(r,s,d,_){super(),this.parent=s,this.source=d,this.scopes=_,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uh(r,P=>this.processProvider(P)),this.records.set(Ed,$c(void 0,this)),_.has("environment")&&this.records.set(jc,$c(void 0,this));const w=this.records.get(Dd);null!=w&&"string"==typeof w.value&&this.scopes.add(w.value),this.injectorDefTypes=new Set(this.get(Fh.multi,Rt,un.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=to(this),d=Y(void 0);try{return r()}finally{to(s),Y(d)}}get(r,s=Hi,d=un.Default){this.assertNotDestroyed();const _=to(this),w=Y(void 0);try{if(!(d&un.SkipSelf)){let F=this.records.get(r);if(void 0===F){const G=function ef(n){return"function"==typeof n||"object"==typeof n&&n instanceof zi}(r)&&Mt(r);F=G&&this.injectableDefInScope(G)?$c(Hc(r),ju):null,this.records.set(r,F)}if(null!=F)return this.hydrate(r,F)}return(d&un.Self?Md():this.parent).get(r,s=d&un.Optional&&s===Hi?null:s)}catch(P){if("NullInjectorError"===P.name){if((P[Oi]=P[Oi]||[]).unshift(Ae(r)),_)throw P;return function Zi(n,r,s,d){const _=n[Oi];throw r[$i]&&_.unshift(r[$i]),n.message=function Ro(n,r,s,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let _=Ae(r);if(Array.isArray(r))_=r.map(Ae).join(" -> ");else if("object"==typeof r){let w=[];for(let P in r)if(r.hasOwnProperty(P)){let F=r[P];w.push(P+":"+("string"==typeof F?JSON.stringify(F):Ae(F)))}_=`{${w.join(", ")}}`}return`${s}${d?"("+d+")":""}[${_}]: ${n.replace(fr,"\n  ")}`}("\n"+n.message,_,s,d),n.ngTokenPath=_,n[Oi]=null,n}(P,r,"R3InjectorError",this.source)}throw P}finally{Y(w),to(_)}}resolveInjectorInitializers(){const r=to(this),s=Y(void 0);try{const d=this.get(Uu.multi,Rt,un.Self);for(const _ of d)_()}finally{to(r),Y(s)}}toString(){const r=[],s=this.records;for(const d of s.keys())r.push(Ae(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $e(205,!1)}processProvider(r){let s=Uc(r=Le(r))?r:Le(r&&r.provide);const d=function Tm(n){return hc(n)?$c(void 0,n.useValue):$c(Qp(n),ju)}(r);if(Uc(r)||!0!==r.multi)this.records.get(s);else{let _=this.records.get(s);_||(_=$c(void 0,ju,!0),_.factory=()=>Hl(_.multi),this.records.set(s,_)),s=r,_.multi.push(r)}this.records.set(s,d)}hydrate(r,s){return s.value===ju&&(s.value=Sm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function cu(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Le(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Hc(n){const r=Mt(n),s=null!==r?r.factory:uo(n);if(null!==s)return s;if(n instanceof zi)throw new $e(204,!1);if(n instanceof Function)return function Vh(n){const r=n.length;if(r>0)throw ae(r,"?"),new $e(204,!1);const s=function xn(n){const r=n&&(n[pi]||n[_i]);if(r){const s=function Vn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new $e(204,!1)}function Qp(n,r,s){let d;if(Uc(n)){const _=Le(n);return uo(_)||Hc(_)}if(hc(n))d=()=>Le(n.useValue);else if(function Jp(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Hl(n.deps||[]));else if(function Vc(n){return!(!n||!n.useExisting)}(n))d=()=>mr(Le(n.useExisting));else{const _=Le(n&&(n.useClass||n.provide));if(!function lu(n){return!!n.deps}(n))return uo(_)||Hc(_);d=()=>new _(...Hl(n.deps))}return d}function $c(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Im(n){return!!n.\u0275providers}function Uh(n,r){for(const s of n)Array.isArray(s)?Uh(s,r):Im(s)?Uh(s.\u0275providers,r):r(s)}class tf{}class jh{resolveComponentFactory(r){throw function Td(n){const r=Error(`No component factory found for ${Ae(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let uu=(()=>{class n{}return n.NULL=new jh,n})();function rf(){return Gc(gi(),Wt())}function Gc(n,r){return new Hu(ur(n,r))}let Hu=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=rf,n})();function Id(n){return n instanceof Hu?n.nativeElement:n}class $u{}let Om=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function km(){const n=Wt(),s=Bi(gi().index,n);return(cr(s)?s:n)[11]}(),n})(),sf=(()=>{class n{}return n.\u0275prov=an({token:n,providedIn:"root",factory:()=>null}),n})();class Zc{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Gu=new Zc("14.2.5"),Wc={};function $h(n){return n.ngOriginalError}class fc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&$h(r);for(;s&&$h(s);)s=$h(s);return s||null}}const Ku=new Map;let pf=0;const Gh="__ngContext__";function Go(n,r){cr(r)?(n[Gh]=r[20],function Yu(n){Ku.set(n[20],n)}(r)):n[Gh]=r}function _f(n){return n.ownerDocument.defaultView}function cl(n){return n instanceof Function?n():n}var xa=(()=>((xa=xa||{})[xa.Important=1]="Important",xa[xa.DashCase=2]="DashCase",xa))();function Vd(n,r){return undefined(n,r)}function _u(n){const r=n[3];return br(r)?r[3]:r}function Ml(n){return tp(n[13])}function Ud(n){return tp(n[4])}function tp(n){for(;null!==n&&!br(n);)n=n[4];return n}function wa(n,r,s,d,_){if(null!=d){let w,P=!1;br(d)?w=d:cr(d)&&(P=!0,d=d[0]);const F=Wi(d);0===n&&null!==s?null==_?op(r,s,F):bc(r,s,F,_||null,!0):1===n&&null!==s?bc(r,s,F,_||null,!0):2===n?function Yc(n,r,s){const d=td(n,r);d&&function Zm(n,r,s,d){n.removeChild(r,s,d)}(n,d,r,s)}(r,F,P):3===n&&r.destroyNode(F),null!=w&&function Sf(n,r,s,d,_){const w=s[7];w!==Wi(s)&&wa(r,n,d,w,_);for(let F=10;F<s.length;F++){const G=s[F];xu(G[1],G,n,r,d,w)}}(r,n,w,s,_)}}function Qu(n,r,s){return n.createElement(r,s)}function Hd(n,r){const s=n[9],d=s.indexOf(r),_=r[3];512&r[2]&&(r[2]&=-513,Uo(_,-1)),s.splice(d,1)}function $d(n,r){if(n.length<=10)return;const s=10+r,d=n[s];if(d){const _=d[17];null!==_&&_!==n&&Hd(_,d),r>0&&(n[s-1][4]=d[4]);const w=se(n,10+r);!function yu(n,r){xu(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(d[1],d);const P=w[19];null!==P&&P.detachView(w[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function ip(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&xu(n,r,s,3,null,null),function ed(n){let r=n[13];if(!r)return Gd(n[1],n);for(;r;){let s=null;if(cr(r))s=r[13];else{const d=r[10];d&&(s=d)}if(!s){for(;r&&!r[4]&&r!==n;)cr(r)&&Gd(r[1],r),r=r[3];null===r&&(r=n),cr(r)&&Gd(r[1],r),s=r&&r[4]}r=s}}(r)}}function Gd(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Cf(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let d=0;d<s.length;d+=2){const _=r[s[d]];if(!(_ instanceof Ir)){const w=s[d+1];if(Array.isArray(w))for(let P=0;P<w.length;P+=2){const F=_[w[P]],G=w[P+1];try{G.call(F)}finally{}}else try{w.call(_)}finally{}}}}(n,r),function Gm(n,r){const s=n.cleanup,d=r[7];let _=-1;if(null!==s)for(let w=0;w<s.length-1;w+=2)if("string"==typeof s[w]){const P=s[w+1],F="function"==typeof P?P(r):Wi(r[P]),G=d[_=s[w+2]],le=s[w+3];"boolean"==typeof le?F.removeEventListener(s[w],G,le):le>=0?d[_=le]():d[_=-le].unsubscribe(),w+=2}else{const P=d[_=s[w+1]];s[w].call(P)}if(null!==d){for(let w=_+1;w<d.length;w++)(0,d[w])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&br(r[3])){s!==r[3]&&Hd(s,r);const d=r[19];null!==d&&d.detachView(n)}!function pu(n){Ku.delete(n[20])}(r)}}function Sl(n,r,s){return function rp(n,r,s){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return s[0];if(2&d.flags){const _=n.data[d.directiveStart].encapsulation;if(_===ge.None||_===ge.Emulated)return null}return ur(d,s)}(n,r.parent,s)}function bc(n,r,s,d,_){n.insertBefore(r,s,d,_)}function op(n,r,s){n.appendChild(r,s)}function Zd(n,r,s,d,_){null!==d?bc(n,r,s,d,_):op(n,r,s)}function td(n,r){return n.parentNode(r)}function qc(n,r,s){return nd(n,r,s)}let nd=function sp(n,r,s){return 40&n.type?ur(n,s):null};function Wd(n,r,s,d){const _=Sl(n,d,r),w=r[11],F=qc(d.parent||r[6],d,r);if(null!=_)if(Array.isArray(s))for(let G=0;G<s.length;G++)Zd(w,_,s[G],F,!1);else Zd(w,_,s,F,!1)}function bu(n,r){if(null!==r){const s=r.type;if(3&s)return ur(r,n);if(4&s)return ap(-1,n[r.index]);if(8&s){const d=r.child;if(null!==d)return bu(n,d);{const _=n[r.index];return br(_)?ap(-1,_):Wi(_)}}if(32&s)return Vd(r,n)()||Wi(n[r.index]);{const d=Df(n,r);return null!==d?Array.isArray(d)?d[0]:bu(_u(n[16]),d):bu(n,r.next)}}return null}function Df(n,r){return null!==r?n[16][6].projection[r.projection]:null}function ap(n,r){const s=10+n+1;if(s<r.length){const d=r[s],_=d[1].firstChild;if(null!==_)return bu(d,_)}return r[7]}function id(n,r,s,d,_,w,P){for(;null!=s;){const F=d[s.index],G=s.type;if(P&&0===r&&(F&&Go(Wi(F),d),s.flags|=4),64!=(64&s.flags))if(8&G)id(n,r,s.child,d,_,w,!1),wa(r,n,_,F,w);else if(32&G){const le=Vd(s,d);let Ee;for(;Ee=le();)wa(r,n,_,Ee,w);wa(r,n,_,F,w)}else 16&G?Mf(n,r,d,s,_,w):wa(r,n,_,F,w);s=P?s.projectionNext:s.next}}function xu(n,r,s,d,_,w){id(s,d,n.firstChild,r,_,w,!1)}function Mf(n,r,s,d,_,w){const P=s[16],G=P[6].projection[d.projection];if(Array.isArray(G))for(let le=0;le<G.length;le++)wa(r,n,_,G[le],w);else id(n,r,G,P[3],_,w,!0)}function If(n,r,s){n.setAttribute(r,"style",s)}function qd(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function rd(n,r,s){let d=n.length;for(;;){const _=n.indexOf(r,s);if(-1===_)return _;if(0===_||n.charCodeAt(_-1)<=32){const w=r.length;if(_+w===d||n.charCodeAt(_+w)<=32)return _}s=_+1}}const Kd="ng-template";function od(n,r,s){let d=0;for(;d<n.length;){let _=n[d++];if(s&&"class"===_){if(_=n[d],-1!==rd(_.toLowerCase(),r,0))return!0}else if(1===_){for(;d<n.length&&"string"==typeof(_=n[d++]);)if(_.toLowerCase()===r)return!0;return!1}}return!1}function Yd(n){return 4===n.type&&n.value!==Kd}function Af(n,r,s){return r===(4!==n.type||s?n.value:Kd)}function up(n,r,s){let d=4;const _=n.attrs||[],w=function dp(n){for(let r=0;r<n.length;r++)if(Fa(n[r]))return r;return n.length}(_);let P=!1;for(let F=0;F<r.length;F++){const G=r[F];if("number"!=typeof G){if(!P)if(4&d){if(d=2|1&d,""!==G&&!Af(n,G,s)||""===G&&1===r.length){if(Ns(d))return!1;P=!0}}else{const le=8&d?G:r[++F];if(8&d&&null!==n.attrs){if(!od(n.attrs,le,s)){if(Ns(d))return!1;P=!0}continue}const Be=sd(8&d?"class":G,_,Yd(n),s);if(-1===Be){if(Ns(d))return!1;P=!0;continue}if(""!==le){let lt;lt=Be>w?"":_[Be+1].toLowerCase();const Tt=8&d?lt:null;if(Tt&&-1!==rd(Tt,le,0)||2&d&&le!==lt){if(Ns(d))return!1;P=!0}}}}else{if(!P&&!Ns(d)&&!Ns(G))return!1;if(P&&Ns(G))continue;P=!1,d=G|1&d}}return Ns(d)||P}function Ns(n){return 0==(1&n)}function sd(n,r,s,d){if(null===r)return-1;let _=0;if(d||!s){let w=!1;for(;_<r.length;){const P=r[_];if(P===n)return _;if(3===P||6===P)w=!0;else{if(1===P||2===P){let F=r[++_];for(;"string"==typeof F;)F=r[++_];continue}if(4===P)break;if(0===P){_+=4;continue}}_+=w?1:2}return-1}return function Pf(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const d=n[s];if("number"==typeof d)return-1;if(d===r)return s;s++}return-1}(r,n)}function Xd(n,r,s=!1){for(let d=0;d<r.length;d++)if(up(n,r[d],s))return!0;return!1}function o(n,r){e:for(let s=0;s<r.length;s++){const d=r[s];if(n.length===d.length){for(let _=0;_<n.length;_++)if(n[_]!==d[_])continue e;return!0}}return!1}function e(n,r){return n?":not("+r.trim()+")":r}function a(n){let r=n[0],s=1,d=2,_="",w=!1;for(;s<n.length;){let P=n[s];if("string"==typeof P)if(2&d){const F=n[++s];_+="["+P+(F.length>0?'="'+F+'"':"")+"]"}else 8&d?_+="."+P:4&d&&(_+=" "+P);else""!==_&&!Ns(P)&&(r+=e(w,_),_=""),d=P,w=w||!Ns(d);s++}return""!==_&&(r+=e(w,_)),r}const x={};function D(n){O(yn(),Wt(),Ye()+n,!1)}function O(n,r,s,d){if(!d)if(3==(3&r[2])){const w=n.preOrderCheckHooks;null!==w&&bi(r,w,s)}else{const w=n.preOrderHooks;null!==w&&Qr(r,w,0,s)}Ct(s)}function st(n,r=null,s=null,d){const _=gt(n,r,s,d);return _.resolveInjectorInitializers(),_}function gt(n,r=null,s=null,d,_=new Set){const w=[s||Rt,Em(n)];return d=d||("object"==typeof n?void 0:Ae(n)),new Sd(w,r||Md(),d||null,_)}let it=(()=>{class n{static create(s,d){if(Array.isArray(s))return st({name:""},d,s,"");{const _=s.name??"";return st({name:_},s.parent,s.providers,_)}}}return n.THROW_IF_NOT_FOUND=Hi,n.NULL=new Nh,n.\u0275prov=an({token:n,providedIn:"any",factory:()=>mr(Ed)}),n.__NG_ELEMENT_ID__=-1,n})();function Yr(n,r=un.Default){const s=Wt();return null===s?mr(n,r):hr(gi(),s,Le(n),r)}function Ri(){throw new Error("invalid")}function wo(n,r){return n<<17|r<<2}function Pr(n){return n>>17&32767}function Da(n){return 2|n}function as(n){return(131068&n)>>2}function Us(n,r){return-131069&n|r<<2}function ls(n){return 1|n}function ng(n,r){const s=n.contentQueries;if(null!==s)for(let d=0;d<s.length;d+=2){const _=s[d],w=s[d+1];if(-1!==w){const P=n.data[w];Qs(_),P.contentQueries(2,r[w],w)}}}function Lf(n,r,s,d,_,w,P,F,G,le,Ee){const Be=r.blueprint.slice();return Be[0]=_,Be[2]=76|d,(null!==Ee||n&&1024&n[2])&&(Be[2]|=1024),Ts(Be),Be[3]=Be[15]=n,Be[8]=s,Be[10]=P||n&&n[10],Be[11]=F||n&&n[11],Be[12]=G||n&&n[12]||null,Be[9]=le||n&&n[9]||null,Be[6]=w,Be[20]=function kd(){return pf++}(),Be[21]=Ee,Be[16]=2==r.type?n[16]:Be,Be}function ih(n,r,s,d,_){let w=n.data[r];if(null===w)w=function ig(n,r,s,d,_){const w=ne(),P=be(),G=n.data[r]=function F0(n,r,s,d,_,w){return{type:s,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:_,attrs:w,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,P?w:w&&w.parent,s,r,d,_);return null===n.firstChild&&(n.firstChild=G),null!==w&&(P?null==w.child&&null!==G.parent&&(w.child=G):null===w.next&&(w.next=G)),G}(n,r,s,d,_),function Rl(){return oi.lFrame.inI18n}()&&(w.flags|=64);else if(64&w.type){w.type=s,w.value=d,w.attrs=_;const P=function Q(){const n=oi.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();w.injectorIndex=null===P?-1:P.injectorIndex}return q(w,!0),w}function rh(n,r,s,d){if(0===s)return-1;const _=r.length;for(let w=0;w<s;w++)r.push(d),n.blueprint.push(d),n.data.push(null);return _}function rg(n,r,s){ko(r);try{const d=n.viewQuery;null!==d&&zf(1,d,s);const _=n.template;null!==_&&D_(n,r,_,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ng(n,r),n.staticViewQueries&&zf(2,n.viewQuery,s);const w=n.components;null!==w&&function k0(n,r){for(let s=0;s<r.length;s++)Y0(n,r[s])}(r,w)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[2]&=-5,ue()}}function fp(n,r,s,d){const _=r[2];if(128!=(128&_)){ko(r);try{Ts(r),function ka(n){return oi.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&D_(n,r,s,2,d);const P=3==(3&_);if(P){const le=n.preOrderCheckHooks;null!==le&&bi(r,le,null)}else{const le=n.preOrderHooks;null!==le&&Qr(r,le,0,null),Wr(r,0)}if(function q0(n){for(let r=Ml(n);null!==r;r=Ud(r)){if(!r[2])continue;const s=r[9];for(let d=0;d<s.length;d++){const _=s[d],w=_[3];0==(512&_[2])&&Uo(w,1),_[2]|=512}}}(r),function Nf(n){for(let r=Ml(n);null!==r;r=Ud(r))for(let s=10;s<r.length;s++){const d=r[s],_=d[1];Oo(d)&&fp(_,d,_.template,d[8])}}(r),null!==n.contentQueries&&ng(n,r),P){const le=n.contentCheckHooks;null!==le&&bi(r,le)}else{const le=n.contentHooks;null!==le&&Qr(r,le,1),Wr(r,1)}!function P0(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let d=0;d<s.length;d++){const _=s[d];if(_<0)Ct(~_);else{const w=_,P=s[++d],F=s[++d];Sc(P,w),F(2,r[w])}}}finally{Ct(-1)}}(n,r);const F=n.components;null!==F&&function O0(n,r){for(let s=0;s<r.length;s++)K0(n,r[s])}(r,F);const G=n.viewQuery;if(null!==G&&zf(2,G,d),P){const le=n.viewCheckHooks;null!==le&&bi(r,le)}else{const le=n.viewHooks;null!==le&&Qr(r,le,2),Wr(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Uo(r[3],-1))}finally{ue()}}}function D_(n,r,s,d,_){const w=Ye(),P=2&d;try{Ct(-1),P&&r.length>22&&O(n,r,22,!1),s(d,_)}finally{Ct(w)}}function M_(n,r,s){if(Hs(r)){const _=r.directiveEnd;for(let w=r.directiveStart;w<_;w++){const P=n.data[w];P.contentQueries&&P.contentQueries(1,s[w],w)}}}function og(n,r,s){!Ei()||(function V0(n,r,s,d){const _=s.directiveStart,w=s.directiveEnd;n.firstCreatePass||qr(s,r),Go(d,r);const P=s.initialInputs;for(let F=_;F<w;F++){const G=n.data[F],le=Jr(G);le&&G0(r,s,G);const Ee=Ba(r,n,F,s);Go(Ee,r),null!==P&&Z0(0,F-_,Ee,G,0,P),le&&(Bi(s.index,r)[8]=Ee)}}(n,r,s,ur(s,r)),128==(128&s.flags)&&function U0(n,r,s){const d=s.directiveStart,_=s.directiveEnd,w=s.index,P=function Tc(){return oi.lFrame.currentDirectiveIndex}();try{Ct(w);for(let F=d;F<_;F++){const G=n.data[F],le=r[F];ga(F),(null!==G.hostBindings||0!==G.hostVars||null!==G.hostAttrs)&&O_(G,le)}}finally{Ct(-1),ga(P)}}(n,r,s))}function sg(n,r,s=ur){const d=r.localNames;if(null!==d){let _=r.index+1;for(let w=0;w<d.length;w+=2){const P=d[w+1],F=-1===P?s(r,n):n[P];n[_++]=F}}}function S_(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Ff(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Ff(n,r,s,d,_,w,P,F,G,le){const Ee=22+d,Be=Ee+_,lt=function R0(n,r){const s=[];for(let d=0;d<r;d++)s.push(d<n?null:x);return s}(Ee,Be),Tt="function"==typeof le?le():le;return lt[1]={type:n,blueprint:lt,template:s,queries:null,viewQuery:F,declTNode:r,data:lt.slice().fill(null,Ee),bindingStartIndex:Ee,expandoStartIndex:Be,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof w?w():w,pipeRegistry:"function"==typeof P?P():P,firstChild:null,schemas:G,consts:Tt,incompleteFirstPass:!1}}function T_(n,r,s,d){const _=F_(r);null===s?_.push(d):(_.push(s),n.firstCreatePass&&N_(n).push(d,_.length-1))}function ag(n,r,s){for(let d in n)if(n.hasOwnProperty(d)){const _=n[d];(s=null===s?{}:s).hasOwnProperty(d)?s[d].push(r,_):s[d]=[r,_]}return s}function I_(n,r){const d=r.directiveEnd,_=n.data,w=r.attrs,P=[];let F=null,G=null;for(let le=r.directiveStart;le<d;le++){const Ee=_[le],Be=Ee.inputs,lt=null===w||Yd(r)?null:W0(Be,w);P.push(lt),F=ag(Be,le,F),G=ag(Ee.outputs,le,G)}null!==F&&(F.hasOwnProperty("class")&&(r.flags|=16),F.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=P,r.inputs=F,r.outputs=G}function hl(n,r,s,d,_,w,P,F){const G=ur(r,s);let Ee,le=r.inputs;!F&&null!=le&&(Ee=le[d])?(Vf(n,s,Ee,d,_),$s(r)&&A_(s,r.index)):3&r.type&&(d=function N0(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),_=null!=P?P(_,r.value||"",d):_,w.setProperty(G,d,_))}function A_(n,r){const s=Bi(r,n);16&s[2]||(s[2]|=32)}function lg(n,r,s,d){let _=!1;if(Ei()){const w=function j0(n,r,s){const d=n.directiveRegistry;let _=null;if(d)for(let w=0;w<d.length;w++){const P=d[w];Xd(s,P.selectors,!1)&&(_||(_=[]),Na(qr(s,r),n,P.type),Jr(P)?(k_(n,s),_.unshift(P)):_.push(P))}return _}(n,r,s),P=null===d?null:{"":-1};if(null!==w){_=!0,R_(s,n.data.length,w.length);for(let Ee=0;Ee<w.length;Ee++){const Be=w[Ee];Be.providersResolver&&Be.providersResolver(Be)}let F=!1,G=!1,le=rh(n,r,w.length,null);for(let Ee=0;Ee<w.length;Ee++){const Be=w[Ee];s.mergedAttrs=Ps(s.mergedAttrs,Be.hostAttrs),L_(n,s,r,le,Be),$0(le,Be,P),null!==Be.contentQueries&&(s.flags|=8),(null!==Be.hostBindings||null!==Be.hostAttrs||0!==Be.hostVars)&&(s.flags|=128);const lt=Be.type.prototype;!F&&(lt.ngOnChanges||lt.ngOnInit||lt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),F=!0),!G&&(lt.ngOnChanges||lt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),G=!0),le++}I_(n,s)}P&&function H0(n,r,s){if(r){const d=n.localNames=[];for(let _=0;_<r.length;_+=2){const w=s[r[_+1]];if(null==w)throw new $e(-301,!1);d.push(r[_],w)}}}(s,d,P)}return s.mergedAttrs=Ps(s.mergedAttrs,s.attrs),_}function cg(n,r,s,d,_,w){const P=w.hostBindings;if(P){let F=n.hostBindingOpCodes;null===F&&(F=n.hostBindingOpCodes=[]);const G=~r.index;(function z0(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(F)!=G&&F.push(G),F.push(d,_,P)}}function O_(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function k_(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function $0(n,r,s){if(s){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)s[r.exportAs[d]]=n;Jr(r)&&(s[""]=n)}}function R_(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function L_(n,r,s,d,_){n.data[d]=_;const w=_.factory||(_.factory=uo(_.type)),P=new Ir(w,Jr(_),Yr);n.blueprint[d]=P,s[d]=P,cg(n,r,0,d,rh(n,s,_.hostVars,x),_)}function G0(n,r,s){const d=ur(r,n),_=S_(s),w=n[10],P=mp(n,Lf(n,_,null,s.onPush?32:16,d,r,w,w.createRenderer(d,s),null,null,null));n[r.index]=P}function xc(n,r,s,d,_,w){const P=ur(n,r);!function ug(n,r,s,d,_,w,P){if(null==w)n.removeAttribute(r,_,s);else{const F=null==P?pt(w):P(w,d||"",_);n.setAttribute(r,_,F,s)}}(r[11],P,w,n.value,s,d,_)}function Z0(n,r,s,d,_,w){const P=w[r];if(null!==P){const F=d.setInput;for(let G=0;G<P.length;){const le=P[G++],Ee=P[G++],Be=P[G++];null!==F?d.setInput(s,Be,le,Ee):s[Ee]=Be}}}function W0(n,r){let s=null,d=0;for(;d<r.length;){const _=r[d];if(0!==_)if(5!==_){if("number"==typeof _)break;n.hasOwnProperty(_)&&(null===s&&(s=[]),s.push(_,n[_],r[d+1])),d+=2}else d+=2;else d+=4}return s}function Hr(n,r,s,d){return new Array(n,!0,!1,r,null,0,d,s,null,null)}function K0(n,r){const s=Bi(r,n);if(Oo(s)){const d=s[1];48&s[2]?fp(d,s,d.template,s[8]):s[5]>0&&dg(s)}}function dg(n){for(let d=Ml(n);null!==d;d=Ud(d))for(let _=10;_<d.length;_++){const w=d[_];if(Oo(w))if(512&w[2]){const P=w[1];fp(P,w,P.template,w[8])}else w[5]>0&&dg(w)}const s=n[1].components;if(null!==s)for(let d=0;d<s.length;d++){const _=Bi(s[d],n);Oo(_)&&_[5]>0&&dg(_)}}function Y0(n,r){const s=Bi(r,n),d=s[1];(function X0(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(d,s),rg(d,s,s[8])}function mp(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Bf(n){for(;n;){n[2]|=32;const r=_u(n);if(Zr(n)&&!r)return n;n=r}return null}function oh(n,r,s,d=!0){const _=r[10];_.begin&&_.begin();try{fp(n,r,n.template,s)}catch(P){throw d&&z_(r,P),P}finally{_.end&&_.end()}}function zf(n,r,s){Qs(0),r(n,s)}function F_(n){return n[7]||(n[7]=[])}function N_(n){return n.cleanup||(n.cleanup=[])}function B_(n,r,s){return(null===n||Jr(n))&&(s=function qa(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(s[r.index])),s[11]}function z_(n,r){const s=n[9],d=s?s.get(fc,null):null;d&&d.handleError(r)}function Vf(n,r,s,d,_){for(let w=0;w<s.length;){const P=s[w++],F=s[w++],G=r[P],le=n.data[P];null!==le.setInput?le.setInput(G,_,d,F):G[F]=_}}function Uf(n,r,s){let d=s?n.styles:null,_=s?n.classes:null,w=0;if(null!==r)for(let P=0;P<r.length;P++){const F=r[P];"number"==typeof F?w=F:1==w?_=Ue(_,F):2==w&&(d=Ue(d,F+": "+r[++P]+";"))}s?n.styles=d:n.stylesWithoutHost=d,s?n.classes=_:n.classesWithoutHost=_}function wc(n,r,s,d,_=!1){for(;null!==s;){const w=r[s.index];if(null!==w&&d.push(Wi(w)),br(w))for(let F=10;F<w.length;F++){const G=w[F],le=G[1].firstChild;null!==le&&wc(G[1],G,le,d)}const P=s.type;if(8&P)wc(n,r,s.child,d);else if(32&P){const F=Vd(s,r);let G;for(;G=F();)d.push(G)}else if(16&P){const F=Df(r,s);if(Array.isArray(F))d.push(...F);else{const G=_u(r[16]);wc(G[1],G,F,d,!0)}}s=_?s.projectionNext:s.next}return d}class ii{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return wc(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(br(r)){const s=r[8],d=s?s.indexOf(this):-1;d>-1&&($d(r,d),se(s,d))}this._attachedToViewContainer=!1}ip(this._lView[1],this._lView)}onDestroy(r){T_(this._lView[1],this._lView,null,r)}markForCheck(){Bf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){oh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sa(n,r){xu(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new $e(902,!1);this._appRef=r}}class Li extends ii{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;oh(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class pl extends uu{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=yt(r);return new _p(s,this.ngModule)}}function gp(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Q0{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,d){const _=this.injector.get(r,Wc,d);return _!==Wc||s===Wc?_:this.parentInjector.get(r,s,d)}}class _p extends tf{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function p(n){return n.map(a).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return gp(this.componentDef.inputs)}get outputs(){return gp(this.componentDef.outputs)}create(r,s,d,_){let w=(_=_||this.ngModule)instanceof jc?_:_?.injector;w&&null!==this.componentDef.getStandaloneInjector&&(w=this.componentDef.getStandaloneInjector(w)||w);const P=w?new Q0(r,w):r,F=P.get($u,null);if(null===F)throw new $e(407,!1);const G=P.get(sf,null),le=F.createRenderer(null,this.componentDef),Ee=this.componentDef.selectors[0][0]||"div",Be=d?function L0(n,r,s){return n.selectRootElement(r,s===ge.ShadowDom)}(le,d,this.componentDef.encapsulation):Qu(F.createRenderer(null,this.componentDef),Ee,function ql(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ee)),lt=this.componentDef.onPush?288:272,Tt=Ff(0,null,null,1,0,null,null,null,null,null),Gt=Lf(null,Tt,null,lt,null,null,F,le,G,P,null);let _n,Pn;ko(Gt);try{const ti=function nb(n,r,s,d,_,w){const P=s[1];s[22]=n;const G=ih(P,22,2,"#host",null),le=G.mergedAttrs=r.hostAttrs;null!==le&&(Uf(G,le,!0),null!==n&&(nc(_,n,le),null!==G.classes&&qd(_,n,G.classes),null!==G.styles&&If(_,n,G.styles)));const Ee=d.createRenderer(n,r),Be=Lf(s,S_(r),null,r.onPush?32:16,s[22],G,d,Ee,w||null,null,null);return P.firstCreatePass&&(Na(qr(G,s),P,r.type),k_(P,G),R_(G,s.length,1)),mp(s,Be),s[22]=Be}(Be,this.componentDef,Gt,F,le);if(Be)if(d)nc(le,Be,["ng-version",Gu.full]);else{const{attrs:Ci,classes:en}=function y(n){const r=[],s=[];let d=1,_=2;for(;d<n.length;){let w=n[d];if("string"==typeof w)2===_?""!==w&&r.push(w,n[++d]):8===_&&s.push(w);else{if(!Ns(_))break;_=w}d++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Ci&&nc(le,Be,Ci),en&&en.length>0&&qd(le,Be,en.join(" "))}if(Pn=fs(Tt,22),void 0!==s){const Ci=Pn.projection=[];for(let en=0;en<this.ngContentSelectors.length;en++){const Si=s[en];Ci.push(null!=Si?Array.from(Si):null)}}_n=function ib(n,r,s,d){const _=s[1],w=function B0(n,r,s){const d=gi();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),L_(n,d,r,rh(n,r,1,null),s),I_(n,d));const _=Ba(r,n,d.directiveStart,d);Go(_,r);const w=ur(d,r);return w&&Go(w,r),_}(_,s,r);if(n[8]=s[8]=w,null!==d)for(const F of d)F(w,r);if(r.contentQueries){const F=gi();r.contentQueries(1,w,F.directiveStart)}const P=gi();return!_.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ct(P.index),cg(s[1],P,0,P.directiveStart,P.directiveEnd,r),O_(r,w)),w}(ti,this.componentDef,Gt,[rb]),rg(Tt,Gt,null)}finally{ue()}return new tb(this.componentType,_n,Gc(Pn,Gt),Gt,Pn)}}class tb extends class Am{}{constructor(r,s,d,_,w){super(),this.location=d,this._rootLView=_,this._tNode=w,this.instance=s,this.hostView=this.changeDetectorRef=new Li(_),this.componentType=r}setInput(r,s){const d=this._tNode.inputs;let _;if(null!==d&&(_=d[r])){const w=this._rootLView;Vf(w[1],w,_,r,s),A_(w,this._tNode.index)}}get injector(){return new va(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function rb(){const n=gi();Di(Wt()[1],n)}function jf(n){let r=function V_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const d=[n];for(;r;){let _;if(Jr(n))_=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new $e(903,!1);_=r.\u0275dir}if(_){if(s){d.push(_);const P=n;P.inputs=Hf(n.inputs),P.declaredInputs=Hf(n.declaredInputs),P.outputs=Hf(n.outputs);const F=_.hostBindings;F&&ab(n,F);const G=_.viewQuery,le=_.contentQueries;if(G&&U_(n,G),le&&sb(n,le),Ze(n.inputs,_.inputs),Ze(n.declaredInputs,_.declaredInputs),Ze(n.outputs,_.outputs),Jr(_)&&_.data.animation){const Ee=n.data;Ee.animation=(Ee.animation||[]).concat(_.data.animation)}}const w=_.features;if(w)for(let P=0;P<w.length;P++){const F=w[P];F&&F.ngInherit&&F(n),F===jf&&(s=!1)}}r=Object.getPrototypeOf(r)}!function ob(n){let r=0,s=null;for(let d=n.length-1;d>=0;d--){const _=n[d];_.hostVars=r+=_.hostVars,_.hostAttrs=Ps(_.hostAttrs,s=Ps(s,_.hostAttrs))}}(d)}function Hf(n){return n===ln?{}:n===Rt?[]:n}function U_(n,r){const s=n.viewQuery;n.viewQuery=s?(d,_)=>{r(d,_),s(d,_)}:r}function sb(n,r){const s=n.contentQueries;n.contentQueries=s?(d,_,w)=>{r(d,_,w),s(d,_,w)}:r}function ab(n,r){const s=n.hostBindings;n.hostBindings=s?(d,_)=>{r(d,_),s(d,_)}:r}let yp=null;function ld(){if(!yp){const n=Pe.Symbol;if(n&&n.iterator)yp=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const d=r[s];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(yp=d)}}}return yp}function vp(n){return!!$f(n)&&(Array.isArray(n)||!(n instanceof Map)&&ld()in n)}function $f(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ca(n,r,s){return n[r]=s}function ua(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Iu(n,r,s,d){const _=ua(n,r,s);return ua(n,r+1,d)||_}function $_(n,r,s,d){const _=Wt();return ua(_,Xa(),r)&&(yn(),xc(zt(),_,n,r,s,d)),$_}function bp(n,r,s,d){return ua(n,Xa(),s)?r+pt(s)+d:x}function X_(n,r,s,d,_,w,P,F){const G=Wt(),le=yn(),Ee=n+22,Be=le.firstCreatePass?function pb(n,r,s,d,_,w,P,F,G){const le=r.consts,Ee=ih(r,n,4,P||null,vr(le,F));lg(r,s,Ee,vr(le,G)),Di(r,Ee);const Be=Ee.tViews=Ff(2,Ee,d,_,w,r.directiveRegistry,r.pipeRegistry,null,r.schemas,le);return null!==r.queries&&(r.queries.template(r,Ee),Be.queries=r.queries.embeddedTView(Ee)),Ee}(Ee,le,G,r,s,d,_,w,P):le.data[Ee];q(Be,!1);const lt=G[11].createComment("");Wd(le,G,lt,Be),Go(lt,G),mp(G,G[Ee]=Hr(lt,G,lt,Be)),us(Be)&&og(le,G,Be),null!=P&&sg(G,Be,F)}function J_(n){return Po(function wr(){return oi.lFrame.contextLView}(),22+n)}function Zf(n,r,s){const d=Wt();return ua(d,Xa(),r)&&hl(yn(),zt(),d,n,r,d[11],s,!1),Zf}function Q_(n,r,s,d,_){const P=_?"class":"style";Vf(n,s,r.inputs[P],P,d)}function hh(n,r,s,d){const _=Wt(),w=yn(),P=22+n,F=_[11],G=_[P]=Qu(F,r,function $n(){return oi.lFrame.currentNamespace}()),le=w.firstCreatePass?function mb(n,r,s,d,_,w,P){const F=r.consts,le=ih(r,n,2,_,vr(F,w));return lg(r,s,le,vr(F,P)),null!==le.attrs&&Uf(le,le.attrs,!1),null!==le.mergedAttrs&&Uf(le,le.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,le),le}(P,w,_,0,r,s,d):w.data[P];q(le,!0);const Ee=le.mergedAttrs;null!==Ee&&nc(F,G,Ee);const Be=le.classes;null!==Be&&qd(F,G,Be);const lt=le.styles;return null!==lt&&If(F,G,lt),64!=(64&le.flags)&&Wd(w,_,G,le),0===function dr(){return oi.lFrame.elementDepthCount}()&&Go(G,_),function Is(){oi.lFrame.elementDepthCount++}(),us(le)&&(og(w,_,le),M_(w,le,_)),null!==d&&sg(_,le),hh}function Wf(){let n=gi();be()?Bt():(n=n.parent,q(n,!1));const r=n;!function yl(){oi.lFrame.elementDepthCount--}();const s=yn();return s.firstCreatePass&&(Di(s,n),Hs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ic(n){return 0!=(16&n.flags)}(r)&&Q_(s,r,Wt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Qa(n){return 0!=(32&n.flags)}(r)&&Q_(s,r,Wt(),r.stylesWithoutHost,!1),Wf}function ph(n,r,s,d){return hh(n,r,s,d),Wf(),ph}function wp(n,r,s){const d=Wt(),_=yn(),w=n+22,P=_.firstCreatePass?function ey(n,r,s,d,_){const w=r.consts,P=vr(w,d),F=ih(r,n,8,"ng-container",P);return null!==P&&Uf(F,P,!0),lg(r,s,F,vr(w,_)),null!==r.queries&&r.queries.elementStart(r,F),F}(w,_,d,r,s):_.data[w];q(P,!0);const F=d[w]=d[11].createComment("");return Wd(_,d,F,P),Go(F,d),us(P)&&(og(_,d,P),M_(_,P,d)),null!=s&&sg(d,P),wp}function fh(){let n=gi();const r=yn();return be()?Bt():(n=n.parent,q(n,!1)),r.firstCreatePass&&(Di(r,n),Hs(n)&&r.queries.elementEnd(n)),fh}function qf(n,r,s){return wp(n,r,s),fh(),qf}function gg(){return Wt()}function _g(n){return!!n&&"function"==typeof n.then}function yg(n){return!!n&&"function"==typeof n.subscribe}const ty=yg;function vg(n,r,s,d){const _=Wt(),w=yn(),P=gi();return ny(w,_,_[11],P,n,r,0,d),vg}function bg(n,r){const s=gi(),d=Wt(),_=yn();return ny(_,d,B_(Js(_.data),s,d),s,n,r),bg}function ny(n,r,s,d,_,w,P,F){const G=us(d),Ee=n.firstCreatePass&&N_(n),Be=r[8],lt=F_(r);let Tt=!0;if(3&d.type||F){const Pn=ur(d,r),ti=F?F(Pn):Pn,Ci=lt.length,en=F?kr=>F(Wi(kr[d.index])):d.index;let Si=null;if(!F&&G&&(Si=function gb(n,r,s,d){const _=n.cleanup;if(null!=_)for(let w=0;w<_.length-1;w+=2){const P=_[w];if(P===s&&_[w+1]===d){const F=r[7],G=_[w+2];return F.length>G?F[G]:null}"string"==typeof P&&(w+=2)}return null}(n,r,_,d.index)),null!==Si)(Si.__ngLastListenerFn__||Si).__ngNextListenerFn__=w,Si.__ngLastListenerFn__=w,Tt=!1;else{w=ry(d,r,Be,w,!1);const kr=s.listen(ti,_,w);lt.push(w,kr),Ee&&Ee.push(_,en,Ci,Ci+1)}}else w=ry(d,r,Be,w,!1);const Gt=d.outputs;let _n;if(Tt&&null!==Gt&&(_n=Gt[_])){const Pn=_n.length;if(Pn)for(let ti=0;ti<Pn;ti+=2){const To=r[_n[ti]][_n[ti+1]].subscribe(w),Np=lt.length;lt.push(w,To),Ee&&Ee.push(_,d.index,Np,-(Np+1))}}}function iy(n,r,s,d){try{return!1!==s(d)}catch(_){return z_(n,_),!1}}function ry(n,r,s,d,_){return function w(P){if(P===Function)return d;Bf(2&n.flags?Bi(n.index,r):r);let G=iy(r,0,d,P),le=w.__ngNextListenerFn__;for(;le;)G=iy(r,0,le,P)&&G,le=le.__ngNextListenerFn__;return _&&!1===G&&(P.preventDefault(),P.returnValue=!1),G}}function oy(n=1){return function K(n){return(oi.lFrame.contextLView=function we(n,r){for(;n>0;)r=r[15],n--;return r}(n,oi.lFrame.contextLView))[8]}(n)}function _b(n,r){let s=null;const d=function wu(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let _=0;_<r.length;_++){const w=r[_];if("*"!==w){if(null===d?Xd(n,w,!0):o(d,w))return _}else s=_}return s}function xg(n){const r=Wt()[16][6];if(!r.projection){const d=r.projection=ae(n?n.length:1,null),_=d.slice();let w=r.child;for(;null!==w;){const P=n?_b(w,n):0;null!==P&&(_[P]?_[P].projectionNext=w:d[P]=w,_[P]=w),w=w.next}}}function sy(n,r=0,s){const d=Wt(),_=yn(),w=ih(_,22+n,16,null,s||null);null===w.projection&&(w.projection=r),Bt(),64!=(64&w.flags)&&function lp(n,r,s){Mf(r[11],0,r,s,Sl(n,s,r),qc(s.parent||r[6],s,r))}(_,d,w)}function gy(n,r,s,d,_){const w=n[s+1],P=null===r;let F=d?Pr(w):as(w),G=!1;for(;0!==F&&(!1===G||P);){const Ee=n[F+1];_y(n[F],r)&&(G=!0,n[F+1]=d?ls(Ee):Da(Ee)),F=d?Pr(Ee):as(Ee)}G&&(n[s+1]=d?Da(w):ls(w))}function _y(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Oe(n,r)>=0}const Yo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yy(n){return n.substring(Yo.key,Yo.keyEnd)}function vy(n){return n.substring(Yo.value,Yo.valueEnd)}function by(n,r){const s=Yo.textEnd;return s===r?-1:(r=Yo.keyEnd=function xb(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,Yo.key=r,s),mh(n,r,s))}function xy(n,r){const s=Yo.textEnd;let d=Yo.key=mh(n,r,s);return s===d?-1:(d=Yo.keyEnd=function wb(n,r,s){let d;for(;r<s&&(45===(d=n.charCodeAt(r))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)r++;return r}(n,d,s),d=Cy(n,d,s),d=Yo.value=mh(n,d,s),d=Yo.valueEnd=function Cb(n,r,s){let d=-1,_=-1,w=-1,P=r,F=P;for(;P<s;){const G=n.charCodeAt(P++);if(59===G)return F;34===G||39===G?F=P=Ey(n,G,P,s):r===P-4&&85===w&&82===_&&76===d&&40===G?F=P=Ey(n,41,P,s):G>32&&(F=P),w=_,_=d,d=-33&G}return F}(n,d,s),Cy(n,d,s))}function wy(n){Yo.key=0,Yo.keyEnd=0,Yo.value=0,Yo.valueEnd=0,Yo.textEnd=n.length}function mh(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Cy(n,r,s,d){return(r=mh(n,r,s))<s&&r++,r}function Ey(n,r,s,d){let _=-1,w=s;for(;w<d;){const P=n.charCodeAt(w++);if(P==r&&92!==_)return w;_=92==P&&92===_?0:P}throw new Error}function wg(n,r,s){return Yl(n,r,s,!1),wg}function Cg(n,r){return Yl(n,r,null,!0),Cg}function fl(n){Xl(Sy,Eb,n,!1)}function Eb(n,r){for(let s=function bb(n){return wy(n),xy(n,mh(n,0,Yo.textEnd))}(r);s>=0;s=xy(r,s))Sy(n,yy(r),vy(r))}function Yf(n){Xl(fe,Cc,n,!0)}function Cc(n,r){for(let s=function vb(n){return wy(n),by(n,mh(n,0,Yo.textEnd))}(r);s>=0;s=by(r,s))fe(n,yy(r),!0)}function Yl(n,r,s,d){const _=Wt(),w=yn(),P=As(2);w.firstUpdatePass&&My(w,n,P,d),r!==x&&ua(_,P,r)&&Ty(w,w.data[Ye()],_,_[11],n,_[P+1]=function Pb(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ae(ol(n)))),n}(r,s),d,P)}function Xl(n,r,s,d){const _=yn(),w=As(2);_.firstUpdatePass&&My(_,null,w,d);const P=Wt();if(s!==x&&ua(P,w,s)){const F=_.data[Ye()];if(Ay(F,d)&&!Dy(_,w)){let G=d?F.classesWithoutHost:F.stylesWithoutHost;null!==G&&(s=Ue(G,s||"")),Q_(_,F,P,s,d)}else!function Ab(n,r,s,d,_,w,P,F){_===x&&(_=Rt);let G=0,le=0,Ee=0<_.length?_[0]:null,Be=0<w.length?w[0]:null;for(;null!==Ee||null!==Be;){const lt=G<_.length?_[G+1]:void 0,Tt=le<w.length?w[le+1]:void 0;let _n,Gt=null;Ee===Be?(G+=2,le+=2,lt!==Tt&&(Gt=Be,_n=Tt)):null===Be||null!==Ee&&Ee<Be?(G+=2,Gt=Ee):(le+=2,Gt=Be,_n=Tt),null!==Gt&&Ty(n,r,s,d,Gt,_n,P,F),Ee=G<_.length?_[G]:null,Be=le<w.length?w[le]:null}}(_,F,P,P[11],P[w+1],P[w+1]=function Ib(n,r,s){if(null==s||""===s)return Rt;const d=[],_=ol(s);if(Array.isArray(_))for(let w=0;w<_.length;w++)n(d,_[w],!0);else if("object"==typeof _)for(const w in _)_.hasOwnProperty(w)&&n(d,w,_[w]);else"string"==typeof _&&r(d,_);return d}(n,r,s),d,w)}}function Dy(n,r){return r>=n.expandoStartIndex}function My(n,r,s,d){const _=n.data;if(null===_[s+1]){const w=_[Ye()],P=Dy(n,s);Ay(w,d)&&null===r&&!P&&(r=!1),r=function Db(n,r,s,d){const _=Js(n);let w=d?r.residualClasses:r.residualStyles;if(null===_)0===(d?r.classBindings:r.styleBindings)&&(s=Cp(s=Eg(null,n,r,s,d),r.attrs,d),w=null);else{const P=r.directiveStylingLast;if(-1===P||n[P]!==_)if(s=Eg(_,n,r,s,d),null===w){let G=function Mb(n,r,s){const d=s?r.classBindings:r.styleBindings;if(0!==as(d))return n[Pr(d)]}(n,r,d);void 0!==G&&Array.isArray(G)&&(G=Eg(null,n,r,G[1],d),G=Cp(G,r.attrs,d),function Sb(n,r,s,d){n[Pr(s?r.classBindings:r.styleBindings)]=d}(n,r,d,G))}else w=function Tb(n,r,s){let d;const _=r.directiveEnd;for(let w=1+r.directiveStylingLast;w<_;w++)d=Cp(d,n[w].hostAttrs,s);return Cp(d,r.attrs,s)}(n,r,d)}return void 0!==w&&(d?r.residualClasses=w:r.residualStyles=w),s}(_,w,r,d),function Vi(n,r,s,d,_,w){let P=w?r.classBindings:r.styleBindings,F=Pr(P),G=as(P);n[d]=s;let Ee,le=!1;if(Array.isArray(s)){const Be=s;Ee=Be[1],(null===Ee||Oe(Be,Ee)>0)&&(le=!0)}else Ee=s;if(_)if(0!==G){const lt=Pr(n[F+1]);n[d+1]=wo(lt,F),0!==lt&&(n[lt+1]=Us(n[lt+1],d)),n[F+1]=function ul(n,r){return 131071&n|r<<17}(n[F+1],d)}else n[d+1]=wo(F,0),0!==F&&(n[F+1]=Us(n[F+1],d)),F=d;else n[d+1]=wo(G,0),0===F?F=d:n[G+1]=Us(n[G+1],d),G=d;le&&(n[d+1]=Da(n[d+1])),gy(n,Ee,d,!0),gy(n,Ee,d,!1),function yb(n,r,s,d,_){const w=_?n.residualClasses:n.residualStyles;null!=w&&"string"==typeof r&&Oe(w,r)>=0&&(s[d+1]=ls(s[d+1]))}(r,Ee,n,d,w),P=wo(F,G),w?r.classBindings=P:r.styleBindings=P}(_,w,r,s,P,d)}}function Eg(n,r,s,d,_){let w=null;const P=s.directiveEnd;let F=s.directiveStylingLast;for(-1===F?F=s.directiveStart:F++;F<P&&(w=r[F],d=Cp(d,w.hostAttrs,_),w!==n);)F++;return null!==n&&(s.directiveStylingLast=F),d}function Cp(n,r,s){const d=s?1:2;let _=-1;if(null!==r)for(let w=0;w<r.length;w++){const P=r[w];"number"==typeof P?_=P:_===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fe(n,P,!!s||r[++w]))}return void 0===n?null:n}function Sy(n,r,s){fe(n,r,ol(s))}function Ty(n,r,s,d,_,w,P,F){if(!(3&r.type))return;const G=n.data,le=G[F+1];Xf(function aa(n){return 1==(1&n)}(le)?Iy(G,r,s,_,as(le),P):void 0)||(Xf(w)||function Ea(n){return 2==(2&n)}(le)&&(w=Iy(G,null,s,_,F,P)),function Tf(n,r,s,d,_){if(r)_?n.addClass(s,d):n.removeClass(s,d);else{let w=-1===d.indexOf("-")?void 0:xa.DashCase;null==_?n.removeStyle(s,d,w):("string"==typeof _&&_.endsWith("!important")&&(_=_.slice(0,-10),w|=xa.Important),n.setStyle(s,d,_,w))}}(d,P,Oa(Ye(),s),_,w))}function Iy(n,r,s,d,_,w){const P=null===r;let F;for(;_>0;){const G=n[_],le=Array.isArray(G),Ee=le?G[1]:G,Be=null===Ee;let lt=s[_+1];lt===x&&(lt=Be?Rt:void 0);let Tt=Be?oe(lt,d):Ee===d?lt:void 0;if(le&&!Xf(Tt)&&(Tt=oe(G,d)),Xf(Tt)&&(F=Tt,P))return F;const Gt=n[_+1];_=P?Pr(Gt):as(Gt)}if(null!==r){let G=w?r.residualClasses:r.residualStyles;null!=G&&(F=oe(G,d))}return F}function Xf(n){return void 0!==n}function Ay(n,r){return 0!=(n.flags&(r?16:32))}function Py(n,r=""){const s=Wt(),d=yn(),_=n+22,w=d.firstCreatePass?ih(d,_,1,r,null):d.data[_],P=s[_]=function vc(n,r){return n.createText(r)}(s[11],r);Wd(d,s,P,w),q(w,!1)}function Dg(n){return Jf("",n,""),Dg}function Jf(n,r,s){const d=Wt(),_=bp(d,n,r,s);return _!==x&&function _o(n,r,s){const d=Oa(r,n);!function jd(n,r,s){n.setValue(r,s)}(n[11],d,s)}(d,Ye(),_),Jf}function Mg(n,r,s){Xl(fe,Cc,bp(Wt(),n,r,s),!0)}function Sg(n,r,s){const d=Wt();return ua(d,Xa(),r)&&hl(yn(),zt(),d,n,r,d[11],s,!0),Sg}function Tg(n,r,s){const d=Wt();if(ua(d,Xa(),r)){const w=yn(),P=zt();hl(w,P,d,n,r,B_(Js(w.data),P,d),s,!0)}return Tg}const ud=void 0;var Zb=["en",[["a","p"],["AM","PM"],ud],[["AM","PM"],ud,ud],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ud,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ud,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ud,"{1} 'at' {0}",ud],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Gb(n){const s=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===d?1:5}];let _h={};function Ig(n){const r=function Wb(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Qy(r);if(s)return s;const d=r.split("-")[0];if(s=Qy(d),s)return s;if("en"===d)return Zb;throw new $e(701,!1)}function Jy(n){return Ig(n)[wi.PluralCase]}function Qy(n){return n in _h||(_h[n]=Pe.ng&&Pe.ng.common&&Pe.ng.common.locales&&Pe.ng.common.locales[n]),_h[n]}var wi=(()=>((wi=wi||{})[wi.LocaleId=0]="LocaleId",wi[wi.DayPeriodsFormat=1]="DayPeriodsFormat",wi[wi.DayPeriodsStandalone=2]="DayPeriodsStandalone",wi[wi.DaysFormat=3]="DaysFormat",wi[wi.DaysStandalone=4]="DaysStandalone",wi[wi.MonthsFormat=5]="MonthsFormat",wi[wi.MonthsStandalone=6]="MonthsStandalone",wi[wi.Eras=7]="Eras",wi[wi.FirstDayOfWeek=8]="FirstDayOfWeek",wi[wi.WeekendRange=9]="WeekendRange",wi[wi.DateFormat=10]="DateFormat",wi[wi.TimeFormat=11]="TimeFormat",wi[wi.DateTimeFormat=12]="DateTimeFormat",wi[wi.NumberSymbols=13]="NumberSymbols",wi[wi.NumberFormats=14]="NumberFormats",wi[wi.CurrencyCode=15]="CurrencyCode",wi[wi.CurrencySymbol=16]="CurrencySymbol",wi[wi.CurrencyName=17]="CurrencyName",wi[wi.Currencies=18]="Currencies",wi[wi.Directionality=19]="Directionality",wi[wi.PluralCase=20]="PluralCase",wi[wi.ExtraData=21]="ExtraData",wi))();const yh="en-US";let Xb=yh;function Rg(n,r,s,d,_){if(n=Le(n),Array.isArray(n))for(let w=0;w<n.length;w++)Rg(n[w],r,s,d,_);else{const w=yn(),P=Wt();let F=Uc(n)?n:Le(n.provide),G=Qp(n);const le=gi(),Ee=1048575&le.providerIndexes,Be=le.directiveStart,lt=le.providerIndexes>>20;if(Uc(n)||!n.multi){const Tt=new Ir(G,_,Yr),Gt=Ng(F,r,_?Ee:Ee+lt,Be);-1===Gt?(Na(qr(le,P),w,F),Lg(w,n,r.length),r.push(F),le.directiveStart++,le.directiveEnd++,_&&(le.providerIndexes+=1048576),s.push(Tt),P.push(Tt)):(s[Gt]=Tt,P[Gt]=Tt)}else{const Tt=Ng(F,r,Ee+lt,Be),Gt=Ng(F,r,Ee,Ee+lt),_n=Tt>=0&&s[Tt],Pn=Gt>=0&&s[Gt];if(_&&!Pn||!_&&!_n){Na(qr(le,P),w,F);const ti=function jx(n,r,s,d,_){const w=new Ir(n,s,Yr);return w.multi=[],w.index=r,w.componentProviders=0,Fg(w,_,d&&!s),w}(_?Ux:Vx,s.length,_,d,G);!_&&Pn&&(s[Gt].providerFactory=ti),Lg(w,n,r.length,0),r.push(F),le.directiveStart++,le.directiveEnd++,_&&(le.providerIndexes+=1048576),s.push(ti),P.push(ti)}else Lg(w,n,Tt>-1?Tt:Gt,Fg(s[_?Gt:Tt],G,!_&&d));!_&&d&&Pn&&s[Gt].componentProviders++}}}function Lg(n,r,s,d){const _=Uc(r),w=function Mm(n){return!!n.useClass}(r);if(_||w){const G=(w?Le(r.useClass):r).prototype.ngOnDestroy;if(G){const le=n.destroyHooks||(n.destroyHooks=[]);if(!_&&r.multi){const Ee=le.indexOf(s);-1===Ee?le.push(s,[d,G]):le[Ee+1].push(d,G)}else le.push(s,G)}}}function Fg(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Ng(n,r,s,d){for(let _=s;_<d;_++)if(r[_]===n)return _;return-1}function Vx(n,r,s,d){return Bg(this.multi,[])}function Ux(n,r,s,d){const _=this.multi;let w;if(this.providerFactory){const P=this.providerFactory.componentProviders,F=Ba(s,s[1],this.providerFactory.index,d);w=F.slice(0,P),Bg(_,w);for(let G=P;G<F.length;G++)w.push(F[G])}else w=[],Bg(_,w);return w}function Bg(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function xv(n,r=[]){return s=>{s.providersResolver=(d,_)=>function zx(n,r,s){const d=yn();if(d.firstCreatePass){const _=Jr(n);Rg(s,d.data,d.blueprint,_,!0),Rg(r,d.data,d.blueprint,_,!1)}}(d,_?_(n):n,r)}}class vh{}class zg{}function Vg(n,r){return new wv(n,r??null)}class wv extends vh{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pl(this);const d=on(r);this._bootstrapComponents=cl(d.bootstrap),this._r3Injector=gt(r,s,[{provide:vh,useValue:this},{provide:uu,useValue:this.componentFactoryResolver}],Ae(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Ug extends zg{constructor(r){super(),this.moduleType=r}create(r){return new wv(this.moduleType,r)}}class $x extends vh{constructor(r,s,d){super(),this.componentFactoryResolver=new pl(this),this.instance=null;const _=new Sd([...r,{provide:vh,useValue:this},{provide:uu,useValue:this.componentFactoryResolver}],s||Md(),d,new Set(["environment"]));this.injector=_,_.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Cv(n,r,s=null){return new $x(n,r,s).injector}let Ev=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const d=Yp(0,s.type),_=d.length>0?Cv([d],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,_)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=an({token:n,providedIn:"environment",factory:()=>new n(mr(jc))}),n})();function jg(n){n.getStandaloneInjector=r=>r.get(Ev).getOrCreateStandaloneInjector(n)}function Iv(n,r,s){const d=qi()+n,_=Wt();return _[d]===x?ca(_,d,s?r.call(s):r()):function $a(n,r){return n[r]}(_,d)}function Tp(n,r,s,d){return Ov(Wt(),qi(),n,r,s,d)}function Av(n,r,s,d,_){return function kv(n,r,s,d,_,w,P){const F=r+s;return Iu(n,F,_,w)?ca(n,F+2,P?d.call(P,_,w):d(_,w)):Ip(n,F+2)}(Wt(),qi(),n,r,s,d,_)}function Pv(n,r,s,d,_,w){return function Rv(n,r,s,d,_,w,P,F){const G=r+s;return function Gf(n,r,s,d,_){const w=Iu(n,r,s,d);return ua(n,r+2,_)||w}(n,G,_,w,P)?ca(n,G+3,F?d.call(F,_,w,P):d(_,w,P)):Ip(n,G+3)}(Wt(),qi(),n,r,s,d,_,w)}function Gg(n,r,s,d){return function Fv(n,r,s,d,_,w){let P=r+s,F=!1;for(let G=0;G<_.length;G++)ua(n,P++,_[G])&&(F=!0);return F?ca(n,P,d.apply(w,_)):Ip(n,P)}(Wt(),qi(),n,r,s,d)}function Ip(n,r){const s=n[r];return s===x?void 0:s}function Ov(n,r,s,d,_,w){const P=r+s;return ua(n,P,_)?ca(n,P+1,w?d.call(w,_):d(_)):Ip(n,P+1)}function Nv(n,r){const s=yn();let d;const _=n+22;s.firstCreatePass?(d=function iw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const d=r[s];if(n===d.name)return d}}(r,s.pipeRegistry),s.data[_]=d,d.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(_,d.onDestroy)):d=s.data[_];const w=d.factory||(d.factory=uo(d.type)),P=Y(Yr);try{const F=el(!1),G=w();return el(F),function fb(n,r,s,d){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=d}(s,Wt(),_,G),G}finally{Y(P)}}function Bv(n,r,s){const d=n+22,_=Wt(),w=Po(_,d);return function Ap(n,r){return n[1].data[r].pure}(_,d)?Ov(_,qi(),r,w.transform,s,w):w.transform(s)}function im(n){return r=>{setTimeout(n,void 0,r)}}const Ec=class aw extends T.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,d){let _=r,w=s||(()=>null),P=d;if(r&&"object"==typeof r){const G=r;_=G.next?.bind(G),w=G.error?.bind(G),P=G.complete?.bind(G)}this.__isAsync&&(w=im(w),_&&(_=im(_)),P&&(P=im(P)));const F=super.subscribe({next:_,error:w,complete:P});return r instanceof l.w0&&r.add(F),F}};function lw(){return this._results[ld()]()}class rm{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=ld(),d=rm.prototype;d[s]||(d[s]=lw)}get changes(){return this._changes||(this._changes=new Ec)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const d=this;d.dirty=!1;const _=B(r);(this._changesDetected=!function k(n,r,s){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let _=n[d],w=r[d];if(s&&(_=s(_),w=s(w)),w!==_)return!1}return!0}(d._results,_,s))&&(d._results=_,d.length=_.length,d.last=_[this.length-1],d.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pp=(()=>{class n{}return n.__NG_ELEMENT_ID__=dw,n})();const cw=Pp,uw=class extends cw{constructor(r,s,d){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=d}createEmbeddedView(r,s){const d=this._declarationTContainer.tViews,_=Lf(this._declarationLView,d,r,16,null,d.declTNode,null,null,null,null,s||null);_[17]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[19];return null!==P&&(_[19]=P.createEmbeddedView(d)),rg(d,_,r),new ii(_)}};function dw(){return om(gi(),Wt())}function om(n,r){return 4&n.type?new uw(r,n,Gc(n,r)):null}let sm=(()=>{class n{}return n.__NG_ELEMENT_ID__=hw,n})();function hw(){return Uv(gi(),Wt())}const pw=sm,zv=class extends pw{constructor(r,s,d){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=d}get element(){return Gc(this._hostTNode,this._hostLView)}get injector(){return new va(this._hostTNode,this._hostLView)}get parentInjector(){const r=rs(this._hostTNode,this._hostLView);if(xl(r)){const s=Os(r,this._hostLView),d=_s(r);return new va(s[1].data[d+8],s)}return new va(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Vv(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,d){let _,w;"number"==typeof d?_=d:null!=d&&(_=d.index,w=d.injector);const P=r.createEmbeddedView(s||{},w);return this.insert(P,_),P}createComponent(r,s,d,_,w){const P=r&&!function b(n){return"function"==typeof n}(r);let F;if(P)F=s;else{const Be=s||{};F=Be.index,d=Be.injector,_=Be.projectableNodes,w=Be.environmentInjector||Be.ngModuleRef}const G=P?r:new _p(yt(r)),le=d||this.parentInjector;if(!w&&null==G.ngModule){const lt=(P?le:this.parentInjector).get(jc,null);lt&&(w=lt)}const Ee=G.create(le,_,void 0,w);return this.insert(Ee.hostView,F),Ee}insert(r,s){const d=r._lView,_=d[1];if(function Ss(n){return br(n[3])}(d)){const Ee=this.indexOf(r);if(-1!==Ee)this.detach(Ee);else{const Be=d[3],lt=new zv(Be,Be[6],Be[3]);lt.detach(lt.indexOf(r))}}const w=this._adjustIndex(s),P=this._lContainer;!function wf(n,r,s,d){const _=10+d,w=s.length;d>0&&(s[_-1][4]=r),d<w-10?(r[4]=s[_],W(s,10+d,r)):(s.push(r),r[4]=null),r[3]=s;const P=r[17];null!==P&&s!==P&&function np(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(P,r);const F=r[19];null!==F&&F.insertView(n),r[2]|=64}(_,d,P,w);const F=ap(w,P),G=d[11],le=td(G,P[7]);return null!==le&&function xf(n,r,s,d,_,w){d[0]=_,d[6]=r,xu(n,d,s,1,_,w)}(_,P[6],G,d,le,F),r.attachToViewContainerRef(),W(Zg(P),w,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Vv(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),d=$d(this._lContainer,s);d&&(se(Zg(this._lContainer),s),ip(d[1],d))}detach(r){const s=this._adjustIndex(r,-1),d=$d(this._lContainer,s);return d&&null!=se(Zg(this._lContainer),s)?new ii(d):null}_adjustIndex(r,s=0){return r??this.length+s}};function Vv(n){return n[8]}function Zg(n){return n[8]||(n[8]=[])}function Uv(n,r){let s;const d=r[n.index];if(br(d))s=d;else{let _;if(8&n.type)_=Wi(d);else{const w=r[11];_=w.createComment("");const P=ur(n,r);bc(w,td(w,P),_,function Ef(n,r){return n.nextSibling(r)}(w,P),!1)}r[n.index]=s=Hr(d,r,_,n),mp(r,s)}return new zv(s,n,r)}class Wg{constructor(r){this.queryList=r,this.matches=null}clone(){return new Wg(this.queryList)}setDirty(){this.queryList.setDirty()}}class qg{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const d=null!==r.contentQueries?r.contentQueries[0]:s.length,_=[];for(let w=0;w<d;w++){const P=s.getByIndex(w);_.push(this.queries[P.indexInDeclarationView].clone())}return new qg(_)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Xv(r,s).matches&&this.queries[s].setDirty()}}class jv{constructor(r,s,d=null){this.predicate=r,this.flags=s,this.read=d}}class Kg{constructor(r=[]){this.queries=r}elementStart(r,s){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let d=0;d<this.length;d++){const _=null!==s?s.length:0,w=this.getByIndex(d).embeddedTView(r,_);w&&(w.indexInDeclarationView=d,null!==s?s.push(w):s=[w])}return null!==s?new Kg(s):null}template(r,s){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Yg{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new Yg(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==s;)d=d.parent;return s===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const d=this.metadata.predicate;if(Array.isArray(d))for(let _=0;_<d.length;_++){const w=d[_];this.matchTNodeWithReadOption(r,s,gw(s,w)),this.matchTNodeWithReadOption(r,s,Bl(s,r,w,!1,!1))}else d===Pp?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Bl(s,r,d,!1,!1))}matchTNodeWithReadOption(r,s,d){if(null!==d){const _=this.metadata.read;if(null!==_)if(_===Hu||_===sm||_===Pp&&4&s.type)this.addMatch(s.index,-2);else{const w=Bl(s,r,_,!1,!1);null!==w&&this.addMatch(s.index,w)}else this.addMatch(s.index,d)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function gw(n,r){const s=n.localNames;if(null!==s)for(let d=0;d<s.length;d+=2)if(s[d]===r)return s[d+1];return null}function Hv(n,r,s,d){return-1===s?function _w(n,r){return 11&n.type?Gc(n,r):4&n.type?om(n,r):null}(r,n):-2===s?function yw(n,r,s){return s===Hu?Gc(r,n):s===Pp?om(r,n):s===sm?Uv(r,n):void 0}(n,r,d):Ba(n,n[1],s,r)}function $v(n,r,s,d){const _=r[19].queries[d];if(null===_.matches){const w=n.data,P=s.matches,F=[];for(let G=0;G<P.length;G+=2){const le=P[G];F.push(le<0?null:Hv(r,w[le],P[G+1],s.metadata.read))}_.matches=F}return _.matches}function Xg(n,r,s,d){const _=n.queries.getByIndex(s),w=_.matches;if(null!==w){const P=$v(n,r,_,s);for(let F=0;F<w.length;F+=2){const G=w[F];if(G>0)d.push(P[F/2]);else{const le=w[F+1],Ee=r[-G];for(let Be=10;Be<Ee.length;Be++){const lt=Ee[Be];lt[17]===lt[3]&&Xg(lt[1],lt,le,d)}if(null!==Ee[9]){const Be=Ee[9];for(let lt=0;lt<Be.length;lt++){const Tt=Be[lt];Xg(Tt[1],Tt,le,d)}}}}}return d}function Gv(n){const r=Wt(),s=yn(),d=Ja();Qs(d+1);const _=Xv(s,d);if(n.dirty&&function gl(n){return 4==(4&n[2])}(r)===(2==(2&_.metadata.flags))){if(null===_.matches)n.reset([]);else{const w=_.crossesNgTemplate?Xg(s,r,d,[]):$v(s,r,_,d);n.reset(w,Id),n.notifyOnChanges()}return!0}return!1}function Zv(n,r,s){const d=yn();d.firstCreatePass&&(Yv(d,new jv(n,r,s),-1),2==(2&r)&&(d.staticViewQueries=!0)),Kv(d,Wt(),r)}function Wv(n,r,s,d){const _=yn();if(_.firstCreatePass){const w=gi();Yv(_,new jv(r,s,d),w.index),function bw(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(_,n),2==(2&s)&&(_.staticContentQueries=!0)}Kv(_,Wt(),s)}function qv(){return function vw(n,r){return n[19].queries[r].queryList}(Wt(),Ja())}function Kv(n,r,s){const d=new rm(4==(4&s));T_(n,r,d,d.destroy),null===r[19]&&(r[19]=new qg),r[19].queries.push(new Wg(d))}function Yv(n,r,s){null===n.queries&&(n.queries=new Kg),n.queries.track(new Yg(r,s))}function Xv(n,r){return n.queries.getByIndex(r)}function lm(...n){}const dd=new zi("Application Initializer");let cm=(()=>{class n{constructor(s){this.appInits=s,this.resolve=lm,this.reject=lm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,_)=>{this.resolve=d,this.reject=_})}runInitializers(){if(this.initialized)return;const s=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let _=0;_<this.appInits.length;_++){const w=this.appInits[_]();if(_g(w))s.push(w);else if(ty(w)){const P=new Promise((F,G)=>{w.subscribe({complete:F,error:G})});s.push(P)}}Promise.all(s).then(()=>{d()}).catch(_=>{this.reject(_)}),0===s.length&&d(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(mr(dd,8))},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const s_=new zi("AppId",{providedIn:"root",factory:function hd(){return`${kp()}${kp()}${kp()}`}});function kp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const um=new zi("Platform Initializer"),Fw=new zi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),a_=new zi("appBootstrapListener"),dm=new zi("AnimationModuleType");let Nw=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Rp=new zi("LocaleId",{providedIn:"root",factory:()=>Ua(Rp,un.Optional|un.SkipSelf)||function Bw(){return typeof $localize<"u"&&$localize.locale||yh}()}),wh=new zi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class hm{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Vw=(()=>{class n{compileModuleSync(s){return new Ug(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const d=this.compileModuleSync(s),w=cl(on(s).declarations).reduce((P,F)=>{const G=yt(F);return G&&P.push(new _p(G)),P},[]);return new hm(d,w)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hw=(()=>Promise.resolve(0))();function Lp(n){typeof Zone>"u"?Hw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Tl{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ec(!1),this.onMicrotaskEmpty=new Ec(!1),this.onStable=new Ec(!1),this.onError=new Ec(!1),typeof Zone>"u")throw new $e(908,!1);Zone.assertZonePatched();const _=this;if(_._nesting=0,_._outer=_._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const w=Zone.AsyncStackTaggingZoneSpec;_._inner=_._inner.fork(new w("Angular"))}Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!d&&s,_.shouldCoalesceRunChangeDetection=d,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function x0(){let n=Pe.requestAnimationFrame,r=Pe.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Gw(n){const r=()=>{!function d_(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Pe,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,h_(n),n.isCheckStableRunning=!0,u_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),h_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,d,_,w,P,F)=>{try{return w0(n),s.invokeTask(_,w,P,F)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===w.type||n.shouldCoalesceRunChangeDetection)&&r(),C0(n)}},onInvoke:(s,d,_,w,P,F,G)=>{try{return w0(n),s.invoke(_,w,P,F,G)}finally{n.shouldCoalesceRunChangeDetection&&r(),C0(n)}},onHasTask:(s,d,_,w)=>{s.hasTask(_,w),d===_&&("microTask"==w.change?(n._hasPendingMicrotasks=w.microTask,h_(n),u_(n)):"macroTask"==w.change&&(n.hasPendingMacrotasks=w.macroTask))},onHandleError:(s,d,_,w)=>(s.handleError(_,w),n.runOutsideAngular(()=>n.onError.emit(w)),!1)})}(_)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tl.isInAngularZone())throw new $e(909,!1)}static assertNotInAngularZone(){if(Tl.isInAngularZone())throw new $e(909,!1)}run(r,s,d){return this._inner.run(r,s,d)}runTask(r,s,d,_){const w=this._inner,P=w.scheduleEventTask("NgZoneEvent: "+_,r,$w,lm,lm);try{return w.runTask(P,s,d)}finally{w.cancelTask(P)}}runGuarded(r,s,d){return this._inner.runGuarded(r,s,d)}runOutsideAngular(r){return this._outer.run(r)}}const $w={};function u_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function h_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function w0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function C0(n){n._nesting--,u_(n)}class Zw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ec,this.onMicrotaskEmpty=new Ec,this.onStable=new Ec,this.onError=new Ec}run(r,s,d){return r.apply(s,d)}runGuarded(r,s,d){return r.apply(s,d)}runOutsideAngular(r){return r()}runTask(r,s,d,_){return r.apply(s,d)}}const Dc=new zi(""),E0=new zi("");let p_,rC=(()=>{class n{constructor(s,d,_){this._ngZone=s,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,p_||(function Ww(n){p_=n}(_),_.addToWindow(d)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tl.assertNotInAngularZone(),Lp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Lp(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(s)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,d,_){let w=-1;d&&d>0&&(w=setTimeout(()=>{this._callbacks=this._callbacks.filter(P=>P.timeoutId!==w),s(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:s,timeoutId:w,updateCb:_})}whenStable(s,d,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,d,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,d,_){return[]}}return n.\u0275fac=function(s){return new(s||n)(mr(Tl),mr(D0),mr(E0))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n})(),D0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,d){this._applications.set(s,d)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,d=!0){return p_?.findTestabilityInTree(this,s,d)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),li=null;const fm=new zi("AllowMultipleToken"),f_=new zi("PlatformDestroyListeners");class Yw{constructor(r,s){this.name=r,this.token=s}}function u(n,r,s=[]){const d=`Platform: ${r}`,_=new zi(d);return(w=[])=>{let P=I();if(!P||P.injector.get(fm,!1)){const F=[...s,...w,{provide:_,useValue:!0}];n?n(F):function Xw(n){if(li&&!li.get(fm,!1))throw new $e(400,!1);li=n;const r=n.get(N);(function M0(n){const r=n.get(um,null);r&&r.forEach(s=>s())})(n)}(function i(n=[],r){return it.create({name:r,providers:[{provide:Dd,useValue:"platform"},{provide:f_,useValue:new Set([()=>li=null])},...n]})}(F,d))}return function h(n){const r=I();if(!r)throw new $e(401,!1);return r}()}}function I(){return li?.get(N)??null}let N=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,d){const _=function Me(n,r){let s;return s="noop"===n?new Zw:("zone.js"===n?void 0:n)||new Tl(r),s}(d?.ngZone,function pe(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),w=[{provide:Tl,useValue:_}];return _.run(()=>{const P=it.create({providers:w,parent:this.injector,name:s.moduleType.name}),F=s.create(P),G=F.injector.get(fc,null);if(!G)throw new $e(402,!1);return _.runOutsideAngular(()=>{const le=_.onError.subscribe({next:Ee=>{G.handleError(Ee)}});F.onDestroy(()=>{Vt(this._modules,F),le.unsubscribe()})}),function We(n,r,s){try{const d=s();return _g(d)?d.catch(_=>{throw r.runOutsideAngular(()=>n.handleError(_)),_}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(G,_,()=>{const le=F.injector.get(cm);return le.runInitializers(),le.donePromise.then(()=>(function Jb(n){hi(n,"Expected localeId to be defined"),"string"==typeof n&&(Xb=n.toLowerCase().replace(/_/g,"-"))}(F.injector.get(Rp,yh)||yh),this._moduleDoBootstrap(F),F))})})}bootstrapModule(s,d=[]){const _=ht({},d);return function qw(n,r,s){const d=new Ug(s);return Promise.resolve(d)}(0,0,s).then(w=>this.bootstrapModuleFactory(w,_))}_moduleDoBootstrap(s){const d=s.injector.get(Nt);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(_=>d.bootstrap(_));else{if(!s.instance.ngDoBootstrap)throw new $e(403,!1);s.instance.ngDoBootstrap(d)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const s=this._injector.get(f_,null);s&&(s.forEach(d=>d()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(mr(it))},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function ht(n,r){return Array.isArray(r)?r.reduce(ht,n):{...n,...r}}let Nt=(()=>{class n{constructor(s,d,_){this._zone=s,this._injector=d,this._exceptionHandler=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new Z.y(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),P=new Z.y(F=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{Tl.assertNotInAngularZone(),Lp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const le=this._zone.onUnstable.subscribe(()=>{Tl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{G.unsubscribe(),le.unsubscribe()}});this.isStable=(0,g.T)(w,P.pipe((0,Ge.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,d){const _=s instanceof tf;if(!this._injector.get(cm).done)throw!_&&dn(s),new $e(405,false);let P;P=_?s:this._injector.get(uu).resolveComponentFactory(s),this.componentTypes.push(P.componentType);const F=function Kw(n){return n.isBoundToModule}(P)?void 0:this._injector.get(vh),le=P.create(it.NULL,[],d||P.selector,F),Ee=le.location.nativeElement,Be=le.injector.get(Dc,null);return Be?.registerApplication(Ee),le.onDestroy(()=>{this.detachView(le.hostView),Vt(this.components,le),Be?.unregisterApplication(Ee)}),this._loadComponent(le),le}tick(){if(this._runningTick)throw new $e(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const d=s;this._views.push(d),d.attachToAppRef(this)}detachView(s){const d=s;Vt(this._views,d),d.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(a_,[]).concat(this._bootstrapListeners).forEach(_=>_(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Vt(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new $e(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(mr(Tl),mr(jc),mr(fc))},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vt(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let An=!0;function Mi(){An=!1}let Ma=(()=>{class n{}return n.__NG_ELEMENT_ID__=Sa,n})();function Sa(n){return function $r(n,r,s){if($s(n)&&!s){const d=Bi(n.index,r);return new ii(d,d)}return 47&n.type?new ii(r[16],r):null}(gi(),Wt(),16==(16&n))}class fd{constructor(){}supports(r){return vp(r)}create(r){return new fC(r)}}const m_=(n,r)=>r;class fC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||m_}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,d=this._removalsHead,_=0,w=null;for(;s||d;){const P=!d||s&&s.currentIndex<aC(d,_,w)?s:d,F=aC(P,_,w),G=P.currentIndex;if(P===d)_--,d=d._nextRemoved;else if(s=s._next,null==P.previousIndex)_++;else{w||(w=[]);const le=F-_,Ee=G-_;if(le!=Ee){for(let lt=0;lt<le;lt++){const Tt=lt<w.length?w[lt]:w[lt]=0,Gt=Tt+lt;Ee<=Gt&&Gt<le&&(w[lt]=Tt+1)}w[P.previousIndex]=Ee-le}}F!==G&&r(P,F,G)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!vp(r))throw new $e(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let _,w,P,s=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let F=0;F<this.length;F++)w=r[F],P=this._trackByFn(F,w),null!==s&&Object.is(s.trackById,P)?(d&&(s=this._verifyReinsertion(s,w,P,F)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,P,F),d=!0),s=s._next}else _=0,function ub(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[ld()]();let d;for(;!(d=s.next()).done;)r(d.value)}}(r,F=>{P=this._trackByFn(_,F),null!==s&&Object.is(s.trackById,P)?(d&&(s=this._verifyReinsertion(s,F,P,_)),Object.is(s.item,F)||this._addIdentityChange(s,F)):(s=this._mismatch(s,F,P,_),d=!0),s=s._next,_++}),this.length=_;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,d,_){let w;return null===r?w=this._itTail:(w=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,w,_)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,_))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,w,_)):r=this._addAfter(new mC(s,d),w,_),r}_verifyReinsertion(r,s,d,_){let w=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==w?r=this._reinsertAfter(w,r._prev,_):r.currentIndex!=_&&(r.currentIndex=_,this._addToMoves(r,_)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const _=r._prevRemoved,w=r._nextRemoved;return null===_?this._removalsHead=w:_._nextRemoved=w,null===w?this._removalsTail=_:w._prevRemoved=_,this._insertAfter(r,s,d),this._addToMoves(r,d),r}_moveAfter(r,s,d){return this._unlink(r),this._insertAfter(r,s,d),this._addToMoves(r,d),r}_addAfter(r,s,d){return this._insertAfter(r,s,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,d){const _=null===s?this._itHead:s._next;return r._next=_,r._prev=s,null===_?this._itTail=r:_._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new sC),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,d=r._next;return null===s?this._itHead=d:s._next=d,null===d?this._itTail=s:d._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class mC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===s||s<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const s=r._prevDup,d=r._nextDup;return null===s?this._head=d:s._nextDup=d,null===d?this._tail=s:d._prevDup=s,null===this._head}}class sC{constructor(){this.map=new Map}put(r){const s=r.trackById;let d=this.map.get(s);d||(d=new gC,this.map.set(s,d)),d.add(r)}get(r,s){const _=this.map.get(r);return _?_.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aC(n,r,s){const d=n.previousIndex;if(null===d)return d;let _=0;return s&&d<s.length&&(_=s[d]),d+r+_}class lC{constructor(){}supports(r){return r instanceof Map||$f(r)}create(){return new _C}}class _C{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||$f(r)))throw new $e(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,_)=>{if(s&&s.key===_)this._maybeAddToChanges(s,d),this._appendAfter=s,s=s._next;else{const w=this._getOrCreateRecordForKey(_,d);s=this._insertBeforeOrAppend(s,w)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let d=s;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const d=r._prev;return s._next=r,s._prev=d,r._prev=s,d&&(d._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const _=this._records.get(r);this._maybeAddToChanges(_,s);const w=_._prev,P=_._next;return w&&(w._next=P),P&&(P._prev=w),_._next=null,_._prev=null,_}const d=new yC(r);return this._records.set(r,d),d.currentValue=s,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(d=>s(r[d],d))}}class yC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cC(){return new Qw([new fd])}let Qw=(()=>{class n{constructor(s){this.factories=s}static create(s,d){if(null!=d){const _=d.factories.slice();s=s.concat(_)}return new n(s)}static extend(s){return{provide:n,useFactory:d=>n.create(s,d||cC()),deps:[[n,new Ls,new Yi]]}}find(s){const d=this.factories.find(_=>_.supports(s));if(null!=d)return d;throw new $e(901,!1)}}return n.\u0275prov=an({token:n,providedIn:"root",factory:cC}),n})();function uC(){return new e1([new lC])}let e1=(()=>{class n{constructor(s){this.factories=s}static create(s,d){if(d){const _=d.factories.slice();s=s.concat(_)}return new n(s)}static extend(s){return{provide:n,useFactory:d=>n.create(s,d||uC()),deps:[[n,new Ls,new Yi]]}}find(s){const d=this.factories.find(_=>_.supports(s));if(d)return d;throw new $e(901,!1)}}return n.\u0275prov=an({token:n,providedIn:"root",factory:uC}),n})();const xC=u(null,"core",[]);let wC=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(mr(Nt))},n.\u0275mod=Ce({type:n}),n.\u0275inj=dt({}),n})();function CC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(sn,ut,j)=>{"use strict";j.d(ut,{Cf:()=>wt,F:()=>Br,Fj:()=>qe,JJ:()=>un,JU:()=>Ae,On:()=>es,Zs:()=>fs,a5:()=>pi,kI:()=>bt,sg:()=>vo,u5:()=>Is});var T=j(4650),l=j(6895),Z=j(2076),g=j(4128),Ge=j(4004);let _e=(()=>{class ne{constructor(q,be){this._renderer=q,this._elementRef=be,this.onChange=Bt=>{},this.onTouched=()=>{}}setProperty(q,be){this._renderer.setProperty(this._elementRef.nativeElement,q,be)}registerOnTouched(q){this.onTouched=q}registerOnChange(q){this.onChange=q}setDisabledState(q){this.setProperty("disabled",q)}}return ne.\u0275fac=function(q){return new(q||ne)(T.Y36(T.Qsj),T.Y36(T.SBq))},ne.\u0275dir=T.lG2({type:ne}),ne})(),Ze=(()=>{class ne extends _e{}return ne.\u0275fac=function(){let Q;return function(be){return(Q||(Q=T.n5z(ne)))(be||ne)}}(),ne.\u0275dir=T.lG2({type:ne,features:[T.qOj]}),ne})();const Ae=new T.OlP("NgValueAccessor"),Je={provide:Ae,useExisting:(0,T.Gpc)(()=>qe),multi:!0},et=new T.OlP("CompositionEventMode");let qe=(()=>{class ne extends _e{constructor(q,be,Bt){super(q,be),this._compositionMode=Bt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Le(){const ne=(0,l.q)()?(0,l.q)().getUserAgent():"";return/android (\d+)/.test(ne.toLowerCase())}())}writeValue(q){this.setProperty("value",q??"")}_handleInput(q){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(q)}_compositionStart(){this._composing=!0}_compositionEnd(q){this._composing=!1,this._compositionMode&&this.onChange(q)}}return ne.\u0275fac=function(q){return new(q||ne)(T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(et,8))},ne.\u0275dir=T.lG2({type:ne,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(q,be){1&q&&T.NdJ("input",function(Yn){return be._handleInput(Yn.target.value)})("blur",function(){return be.onTouched()})("compositionstart",function(){return be._compositionStart()})("compositionend",function(Yn){return be._compositionEnd(Yn.target.value)})},features:[T._Bn([Je]),T.qOj]}),ne})();function mt(ne){return null==ne||("string"==typeof ne||Array.isArray(ne))&&0===ne.length}function pt(ne){return null!=ne&&"number"==typeof ne.length}const wt=new T.OlP("NgValidators"),tn=new T.OlP("NgAsyncValidators"),Zt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bt{static min(Q){return function Re(ne){return Q=>{if(mt(Q.value)||mt(ne))return null;const q=parseFloat(Q.value);return!isNaN(q)&&q<ne?{min:{min:ne,actual:Q.value}}:null}}(Q)}static max(Q){return function ze(ne){return Q=>{if(mt(Q.value)||mt(ne))return null;const q=parseFloat(Q.value);return!isNaN(q)&&q>ne?{max:{max:ne,actual:Q.value}}:null}}(Q)}static required(Q){return It(Q)}static requiredTrue(Q){return At(Q)}static email(Q){return function kt(ne){return mt(ne.value)||Zt.test(ne.value)?null:{email:!0}}(Q)}static minLength(Q){return function jt(ne){return Q=>mt(Q.value)||!pt(Q.value)?null:Q.value.length<ne?{minlength:{requiredLength:ne,actualLength:Q.value.length}}:null}(Q)}static maxLength(Q){return function nt(ne){return Q=>pt(Q.value)&&Q.value.length>ne?{maxlength:{requiredLength:ne,actualLength:Q.value.length}}:null}(Q)}static pattern(Q){return function at(ne){if(!ne)return xt;let Q,q;return"string"==typeof ne?(q="","^"!==ne.charAt(0)&&(q+="^"),q+=ne,"$"!==ne.charAt(ne.length-1)&&(q+="$"),Q=new RegExp(q)):(q=ne.toString(),Q=ne),be=>{if(mt(be.value))return null;const Bt=be.value;return Q.test(Bt)?null:{pattern:{requiredPattern:q,actualValue:Bt}}}}(Q)}static nullValidator(Q){return null}static compose(Q){return Xt(Q)}static composeAsync(Q){return Xn(Q)}}function It(ne){return mt(ne.value)?{required:!0}:null}function At(ne){return!0===ne.value?null:{required:!0}}function xt(ne){return null}function _t(ne){return null!=ne}function Yt(ne){return(0,T.QGY)(ne)?(0,Z.D)(ne):ne}function qt(ne){let Q={};return ne.forEach(q=>{Q=null!=q?{...Q,...q}:Q}),0===Object.keys(Q).length?null:Q}function On(ne,Q){return Q.map(q=>q(ne))}function hi(ne){return ne.map(Q=>function Jn(ne){return!ne.validate}(Q)?Q:q=>Q.validate(q))}function Xt(ne){if(!ne)return null;const Q=ne.filter(_t);return 0==Q.length?null:function(q){return qt(On(q,Q))}}function ui(ne){return null!=ne?Xt(hi(ne)):null}function Xn(ne){if(!ne)return null;const Q=ne.filter(_t);return 0==Q.length?null:function(q){const be=On(q,Q).map(Yt);return(0,g.D)(be).pipe((0,Ge.U)(qt))}}function ai(ne){return null!=ne?Xn(hi(ne)):null}function an(ne,Q){return null===ne?[Q]:Array.isArray(ne)?[...ne,Q]:[ne,Q]}function hn(ne){return ne._rawValidators}function dt(ne){return ne._rawAsyncValidators}function Mt(ne){return ne?Array.isArray(ne)?ne:[ne]:[]}function Kt(ne,Q){return Array.isArray(ne)?ne.includes(Q):ne===Q}function Qt(ne,Q){const q=Mt(Q);return Mt(ne).forEach(Bt=>{Kt(q,Bt)||q.push(Bt)}),q}function xn(ne,Q){return Mt(Q).filter(q=>!Kt(ne,q))}class Vn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Q){this._rawValidators=Q||[],this._composedValidatorFn=ui(this._rawValidators)}_setAsyncValidators(Q){this._rawAsyncValidators=Q||[],this._composedAsyncValidatorFn=ai(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Q){this._onDestroyCallbacks.push(Q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Q=>Q()),this._onDestroyCallbacks=[]}reset(Q){this.control&&this.control.reset(Q)}hasError(Q,q){return!!this.control&&this.control.hasError(Q,q)}getError(Q,q){return this.control?this.control.getError(Q,q):null}}class Qn extends Vn{get formDirective(){return null}get path(){return null}}class pi extends Vn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let un=(()=>{class ne extends class Fi{constructor(Q){this._cd=Q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(q){super(q)}}return ne.\u0275fac=function(q){return new(q||ne)(T.Y36(pi,2))},ne.\u0275dir=T.lG2({type:ne,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(q,be){2&q&&T.ekj("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)},features:[T.qOj]}),ne})();const ft="VALID",ie="INVALID",V="PENDING",U="DISABLED";function $(ne){return(ke(ne)?ne.validators:ne)||null}function X(ne){return Array.isArray(ne)?ui(ne):ne||null}function ce(ne,Q){return(ke(Q)?Q.asyncValidators:ne)||null}function Ce(ne){return Array.isArray(ne)?ai(ne):ne||null}function ke(ne){return null!=ne&&!Array.isArray(ne)&&"object"==typeof ne}class Ft{constructor(Q,q){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=Q,this._rawAsyncValidators=q,this._composedValidatorFn=X(this._rawValidators),this._composedAsyncValidatorFn=Ce(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(Q){this._rawValidators=this._composedValidatorFn=Q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Q){this._rawAsyncValidators=this._composedAsyncValidatorFn=Q}get parent(){return this._parent}get valid(){return this.status===ft}get invalid(){return this.status===ie}get pending(){return this.status==V}get disabled(){return this.status===U}get enabled(){return this.status!==U}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Q){this._rawValidators=Q,this._composedValidatorFn=X(Q)}setAsyncValidators(Q){this._rawAsyncValidators=Q,this._composedAsyncValidatorFn=Ce(Q)}addValidators(Q){this.setValidators(Qt(Q,this._rawValidators))}addAsyncValidators(Q){this.setAsyncValidators(Qt(Q,this._rawAsyncValidators))}removeValidators(Q){this.setValidators(xn(Q,this._rawValidators))}removeAsyncValidators(Q){this.setAsyncValidators(xn(Q,this._rawAsyncValidators))}hasValidator(Q){return Kt(this._rawValidators,Q)}hasAsyncValidator(Q){return Kt(this._rawAsyncValidators,Q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Q={}){this.touched=!0,this._parent&&!Q.onlySelf&&this._parent.markAsTouched(Q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Q=>Q.markAllAsTouched())}markAsUntouched(Q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(q=>{q.markAsUntouched({onlySelf:!0})}),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q)}markAsDirty(Q={}){this.pristine=!1,this._parent&&!Q.onlySelf&&this._parent.markAsDirty(Q)}markAsPristine(Q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(q=>{q.markAsPristine({onlySelf:!0})}),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q)}markAsPending(Q={}){this.status=V,!1!==Q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Q.onlySelf&&this._parent.markAsPending(Q)}disable(Q={}){const q=this._parentMarkedDirty(Q.onlySelf);this.status=U,this.errors=null,this._forEachChild(be=>{be.disable({...Q,onlySelf:!0})}),this._updateValue(),!1!==Q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Q,skipPristineCheck:q}),this._onDisabledChange.forEach(be=>be(!0))}enable(Q={}){const q=this._parentMarkedDirty(Q.onlySelf);this.status=ft,this._forEachChild(be=>{be.enable({...Q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent}),this._updateAncestors({...Q,skipPristineCheck:q}),this._onDisabledChange.forEach(be=>be(!1))}_updateAncestors(Q){this._parent&&!Q.onlySelf&&(this._parent.updateValueAndValidity(Q),Q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Q){this._parent=Q}getRawValue(){return this.value}updateValueAndValidity(Q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ft||this.status===V)&&this._runAsyncValidator(Q.emitEvent)),!1!==Q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Q.onlySelf&&this._parent.updateValueAndValidity(Q)}_updateTreeValidity(Q={emitEvent:!0}){this._forEachChild(q=>q._updateTreeValidity(Q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?U:ft}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Q){if(this.asyncValidator){this.status=V,this._hasOwnPendingAsyncValidator=!0;const q=Yt(this.asyncValidator(this));this._asyncValidationSubscription=q.subscribe(be=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(be,{emitEvent:Q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Q,q={}){this.errors=Q,this._updateControlsErrors(!1!==q.emitEvent)}get(Q){let q=Q;return null==q||(Array.isArray(q)||(q=q.split(".")),0===q.length)?null:q.reduce((be,Bt)=>be&&be._find(Bt),this)}getError(Q,q){const be=q?this.get(q):this;return be&&be.errors?be.errors[Q]:null}hasError(Q,q){return!!this.getError(Q,q)}get root(){let Q=this;for(;Q._parent;)Q=Q._parent;return Q}_updateControlsErrors(Q){this.status=this._calculateStatus(),Q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Q)}_initObservables(){this.valueChanges=new T.vpe,this.statusChanges=new T.vpe}_calculateStatus(){return this._allControlsDisabled()?U:this.errors?ie:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(V)?V:this._anyControlsHaveStatus(ie)?ie:ft}_anyControlsHaveStatus(Q){return this._anyControls(q=>q.status===Q)}_anyControlsDirty(){return this._anyControls(Q=>Q.dirty)}_anyControlsTouched(){return this._anyControls(Q=>Q.touched)}_updatePristine(Q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q)}_updateTouched(Q={}){this.touched=this._anyControlsTouched(),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q)}_registerOnCollectionChange(Q){this._onCollectionChange=Q}_setUpdateStrategy(Q){ke(Q)&&null!=Q.updateOn&&(this._updateOn=Q.updateOn)}_parentMarkedDirty(Q){return!Q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Q){return null}}class yt extends Ft{constructor(Q,q,be){super($(q),ce(be,q)),this.controls=Q,this._initObservables(),this._setUpdateStrategy(q),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Q,q){return this.controls[Q]?this.controls[Q]:(this.controls[Q]=q,q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange),q)}addControl(Q,q,be={}){this.registerControl(Q,q),this.updateValueAndValidity({emitEvent:be.emitEvent}),this._onCollectionChange()}removeControl(Q,q={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}setControl(Q,q,be={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],q&&this.registerControl(Q,q),this.updateValueAndValidity({emitEvent:be.emitEvent}),this._onCollectionChange()}contains(Q){return this.controls.hasOwnProperty(Q)&&this.controls[Q].enabled}setValue(Q,q={}){(function Qe(ne,Q,q){ne._forEachChild((be,Bt)=>{if(void 0===q[Bt])throw new T.vHH(1002,"")})})(this,0,Q),Object.keys(Q).forEach(be=>{(function Ie(ne,Q,q){const be=ne.controls;if(!(Q?Object.keys(be):be).length)throw new T.vHH(1e3,"");if(!be[q])throw new T.vHH(1001,"")})(this,!0,be),this.controls[be].setValue(Q[be],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q)}patchValue(Q,q={}){null!=Q&&(Object.keys(Q).forEach(be=>{const Bt=this.controls[be];Bt&&Bt.patchValue(Q[be],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q))}reset(Q={},q={}){this._forEachChild((be,Bt)=>{be.reset(Q[Bt],{onlySelf:!0,emitEvent:q.emitEvent})}),this._updatePristine(q),this._updateTouched(q),this.updateValueAndValidity(q)}getRawValue(){return this._reduceChildren({},(Q,q,be)=>(Q[be]=q.getRawValue(),Q))}_syncPendingControls(){let Q=this._reduceChildren(!1,(q,be)=>!!be._syncPendingControls()||q);return Q&&this.updateValueAndValidity({onlySelf:!0}),Q}_forEachChild(Q){Object.keys(this.controls).forEach(q=>{const be=this.controls[q];be&&Q(be,q)})}_setUpControls(){this._forEachChild(Q=>{Q.setParent(this),Q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Q){for(const[q,be]of Object.entries(this.controls))if(this.contains(q)&&Q(be))return!0;return!1}_reduceValue(){return this._reduceChildren({},(q,be,Bt)=>((be.enabled||this.disabled)&&(q[Bt]=be.value),q))}_reduceChildren(Q,q){let be=Q;return this._forEachChild((Bt,Yn)=>{be=q(be,Bt,Yn)}),be}_allControlsDisabled(){for(const Q of Object.keys(this.controls))if(this.controls[Q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Q){return this.controls.hasOwnProperty(Q)?this.controls[Q]:null}}function Fe(ne,Q){St(ne,Q),Q.valueAccessor.writeValue(ne.value),ne.disabled&&Q.valueAccessor.setDisabledState?.(!0),function Ln(ne,Q){Q.valueAccessor.registerOnChange(q=>{ne._pendingValue=q,ne._pendingChange=!0,ne._pendingDirty=!0,"change"===ne.updateOn&&Ji(ne,Q)})}(ne,Q),function Qo(ne,Q){const q=(be,Bt)=>{Q.valueAccessor.writeValue(be),Bt&&Q.viewToModelUpdate(be)};ne.registerOnChange(q),Q._registerOnDestroy(()=>{ne._unregisterOnChange(q)})}(ne,Q),function Bn(ne,Q){Q.valueAccessor.registerOnTouched(()=>{ne._pendingTouched=!0,"blur"===ne.updateOn&&ne._pendingChange&&Ji(ne,Q),"submit"!==ne.updateOn&&ne.markAsTouched()})}(ne,Q),function ot(ne,Q){if(Q.valueAccessor.setDisabledState){const q=be=>{Q.valueAccessor.setDisabledState(be)};ne.registerOnDisabledChange(q),Q._registerOnDestroy(()=>{ne._unregisterOnDisabledChange(q)})}}(ne,Q)}function Ne(ne,Q,q=!0){const be=()=>{};Q.valueAccessor&&(Q.valueAccessor.registerOnChange(be),Q.valueAccessor.registerOnTouched(be)),rn(ne,Q),ne&&(Q._invokeOnDestroyCallbacks(),ne._registerOnCollectionChange(()=>{}))}function Te(ne,Q){ne.forEach(q=>{q.registerOnValidatorChange&&q.registerOnValidatorChange(Q)})}function St(ne,Q){const q=hn(ne);null!==Q.validator?ne.setValidators(an(q,Q.validator)):"function"==typeof q&&ne.setValidators([q]);const be=dt(ne);null!==Q.asyncValidator?ne.setAsyncValidators(an(be,Q.asyncValidator)):"function"==typeof be&&ne.setAsyncValidators([be]);const Bt=()=>ne.updateValueAndValidity();Te(Q._rawValidators,Bt),Te(Q._rawAsyncValidators,Bt)}function rn(ne,Q){let q=!1;if(null!==ne){if(null!==Q.validator){const Bt=hn(ne);if(Array.isArray(Bt)&&Bt.length>0){const Yn=Bt.filter(wr=>wr!==Q.validator);Yn.length!==Bt.length&&(q=!0,ne.setValidators(Yn))}}if(null!==Q.asyncValidator){const Bt=dt(ne);if(Array.isArray(Bt)&&Bt.length>0){const Yn=Bt.filter(wr=>wr!==Q.asyncValidator);Yn.length!==Bt.length&&(q=!0,ne.setAsyncValidators(Yn))}}}const be=()=>{};return Te(Q._rawValidators,be),Te(Q._rawAsyncValidators,be),q}function Ji(ne,Q){ne._pendingDirty&&ne.markAsDirty(),ne.setValue(ne._pendingValue,{emitModelToViewChange:!1}),Q.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1}function ri(ne,Q){St(ne,Q)}function lo(ne,Q){ne._syncPendingControls(),Q.forEach(q=>{const be=q.control;"submit"===be.updateOn&&be._pendingChange&&(q.viewToModelUpdate(be._pendingValue),be._pendingChange=!1)})}const Nr={provide:Qn,useExisting:(0,T.Gpc)(()=>Br)},cs=(()=>Promise.resolve())();let Br=(()=>{class ne extends Qn{constructor(q,be){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new T.vpe,this.form=new yt({},ui(q),ai(be))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(q){cs.then(()=>{const be=this._findContainer(q.path);q.control=be.registerControl(q.name,q.control),Fe(q.control,q),q.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(q)})}getControl(q){return this.form.get(q.path)}removeControl(q){cs.then(()=>{const be=this._findContainer(q.path);be&&be.removeControl(q.name),this._directives.delete(q)})}addFormGroup(q){cs.then(()=>{const be=this._findContainer(q.path),Bt=new yt({});ri(Bt,q),be.registerControl(q.name,Bt),Bt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(q){cs.then(()=>{const be=this._findContainer(q.path);be&&be.removeControl(q.name)})}getFormGroup(q){return this.form.get(q.path)}updateModel(q,be){cs.then(()=>{this.form.get(q.path).setValue(be)})}setValue(q){this.control.setValue(q)}onSubmit(q){return this.submitted=!0,lo(this.form,this._directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q){this.form.reset(q),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(q){return q.pop(),q.length?this.form.get(q):this.form}}return ne.\u0275fac=function(q){return new(q||ne)(T.Y36(wt,10),T.Y36(tn,10))},ne.\u0275dir=T.lG2({type:ne,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(q,be){1&q&&T.NdJ("submit",function(Yn){return be.onSubmit(Yn)})("reset",function(){return be.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([Nr]),T.qOj]}),ne})();function Pi(ne,Q){const q=ne.indexOf(Q);q>-1&&ne.splice(q,1)}function Gr(ne){return"object"==typeof ne&&null!==ne&&2===Object.keys(ne).length&&"value"in ne&&"disabled"in ne}const Rr=class extends Ft{constructor(Q=null,q,be){super($(q),ce(be,q)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Q),this._setUpdateStrategy(q),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ke(q)&&(q.nonNullable||q.initialValueIsDefault)&&(this.defaultValue=Gr(Q)?Q.value:Q)}setValue(Q,q={}){this.value=this._pendingValue=Q,this._onChange.length&&!1!==q.emitModelToViewChange&&this._onChange.forEach(be=>be(this.value,!1!==q.emitViewToModelChange)),this.updateValueAndValidity(q)}patchValue(Q,q={}){this.setValue(Q,q)}reset(Q=this.defaultValue,q={}){this._applyFormState(Q),this.markAsPristine(q),this.markAsUntouched(q),this.setValue(this.value,q),this._pendingChange=!1}_updateValue(){}_anyControls(Q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Q){this._onChange.push(Q)}_unregisterOnChange(Q){Pi(this._onChange,Q)}registerOnDisabledChange(Q){this._onDisabledChange.push(Q)}_unregisterOnDisabledChange(Q){Pi(this._onDisabledChange,Q)}_forEachChild(Q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Q){Gr(Q)?(this.value=this._pendingValue=Q.value,Q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Q}},Zr={provide:pi,useExisting:(0,T.Gpc)(()=>es)},pa=(()=>Promise.resolve())();let es=(()=>{class ne extends pi{constructor(q,be,Bt,Yn,wr){super(),this._changeDetectorRef=wr,this.control=new Rr,this._registered=!1,this.update=new T.vpe,this._parent=q,this._setValidators(be),this._setAsyncValidators(Bt),this.valueAccessor=function Vo(ne,Q){if(!Q)return null;let q,be,Bt;return Array.isArray(Q),Q.forEach(Yn=>{Yn.constructor===qe?q=Yn:function Ti(ne){return Object.getPrototypeOf(ne.constructor)===Ze}(Yn)?be=Yn:Bt=Yn}),Bt||be||q||null}(0,Yn)}ngOnChanges(q){if(this._checkForErrors(),!this._registered||"name"in q){if(this._registered&&(this._checkName(),this.formDirective)){const be=q.name.previousValue;this.formDirective.removeControl({name:be,path:this._getPath(be)})}this._setUpControl()}"isDisabled"in q&&this._updateDisabled(q),function yr(ne,Q){if(!ne.hasOwnProperty("model"))return!1;const q=ne.model;return!!q.isFirstChange()||!Object.is(Q,q.currentValue)}(q,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fe(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(q){pa.then(()=>{this.control.setValue(q,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(q){const be=q.isDisabled.currentValue,Bt=0!==be&&(0,T.D6c)(be);pa.then(()=>{Bt&&!this.control.disabled?this.control.disable():!Bt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(q){return this._parent?function cn(ne,Q){return[...Q.path,ne]}(q,this._parent):[q]}}return ne.\u0275fac=function(q){return new(q||ne)(T.Y36(Qn,9),T.Y36(wt,10),T.Y36(tn,10),T.Y36(Ae,10),T.Y36(T.sBO,8))},ne.\u0275dir=T.lG2({type:ne,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[T._Bn([Zr]),T.qOj,T.TTD]}),ne})(),kl=(()=>{class ne{}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275mod=T.oAB({type:ne}),ne.\u0275inj=T.cJS({}),ne})();const Zs={provide:Qn,useExisting:(0,T.Gpc)(()=>vo)};let vo=(()=>{class ne extends Qn{constructor(q,be){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new T.vpe,this._setValidators(q),this._setAsyncValidators(be)}ngOnChanges(q){this._checkFormPresent(),q.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(q){const be=this.form.get(q.path);return Fe(be,q),be.updateValueAndValidity({emitEvent:!1}),this.directives.push(q),be}getControl(q){return this.form.get(q.path)}removeControl(q){Ne(q.control||null,q,!1),function Er(ne,Q){const q=ne.indexOf(Q);q>-1&&ne.splice(q,1)}(this.directives,q)}addFormGroup(q){this._setUpFormContainer(q)}removeFormGroup(q){this._cleanUpFormContainer(q)}getFormGroup(q){return this.form.get(q.path)}addFormArray(q){this._setUpFormContainer(q)}removeFormArray(q){this._cleanUpFormContainer(q)}getFormArray(q){return this.form.get(q.path)}updateModel(q,be){this.form.get(q.path).setValue(be)}onSubmit(q){return this.submitted=!0,lo(this.form,this.directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q){this.form.reset(q),this.submitted=!1}_updateDomValue(){this.directives.forEach(q=>{const be=q.control,Bt=this.form.get(q.path);be!==Bt&&(Ne(be||null,q),(ne=>ne instanceof Rr)(Bt)&&(Fe(Bt,q),q.control=Bt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(q){const be=this.form.get(q.path);ri(be,q),be.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(q){if(this.form){const be=this.form.get(q.path);be&&function Qi(ne,Q){return rn(ne,Q)}(be,q)&&be.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){St(this.form,this),this._oldForm&&rn(this._oldForm,this)}_checkFormPresent(){}}return ne.\u0275fac=function(q){return new(q||ne)(T.Y36(wt,10),T.Y36(tn,10))},ne.\u0275dir=T.lG2({type:ne,selectors:[["","formGroup",""]],hostBindings:function(q,be){1&q&&T.NdJ("submit",function(Yn){return be.onSubmit(Yn)})("reset",function(){return be.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([Zs]),T.qOj,T.TTD]}),ne})(),ns=(()=>{class ne{constructor(){this._validator=xt}ngOnChanges(q){if(this.inputName in q){const be=this.normalizeInput(q[this.inputName].currentValue);this._enabled=this.enabled(be),this._validator=this._enabled?this.createValidator(be):xt,this._onChange&&this._onChange()}}validate(q){return this._validator(q)}registerOnValidatorChange(q){this._onChange=q}enabled(q){return null!=q}}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275dir=T.lG2({type:ne,features:[T.TTD]}),ne})();const Oa={provide:wt,useExisting:(0,T.Gpc)(()=>Ya),multi:!0},ur={provide:wt,useExisting:(0,T.Gpc)(()=>fs),multi:!0};let Ya=(()=>{class ne extends ns{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=T.D6c,this.createValidator=q=>It}enabled(q){return q}}return ne.\u0275fac=function(){let Q;return function(be){return(Q||(Q=T.n5z(ne)))(be||ne)}}(),ne.\u0275dir=T.lG2({type:ne,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(q,be){2&q&&T.uIk("required",be._enabled?"":null)},inputs:{required:"required"},features:[T._Bn([Oa]),T.qOj]}),ne})(),fs=(()=>{class ne extends Ya{constructor(){super(...arguments),this.createValidator=q=>At}}return ne.\u0275fac=function(){let Q;return function(be){return(Q||(Q=T.n5z(ne)))(be||ne)}}(),ne.\u0275dir=T.lG2({type:ne,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(q,be){2&q&&T.uIk("required",be._enabled?"":null)},features:[T._Bn([ur]),T.qOj]}),ne})(),dr=(()=>{class ne{}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275mod=T.oAB({type:ne}),ne.\u0275inj=T.cJS({imports:[kl]}),ne})(),Is=(()=>{class ne{}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275mod=T.oAB({type:ne}),ne.\u0275inj=T.cJS({imports:[dr]}),ne})()},4859:(sn,ut,j)=>{"use strict";j.d(ut,{lW:()=>je,ot:()=>Le,zs:()=>Je});var T=j(4650),l=j(3238),Z=j(2687);const g=["mat-button",""],Ge=["*"],Ae=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Ue=(0,l.pj)((0,l.Id)((0,l.Kr)(class{constructor(et){this._elementRef=et}})));let je=(()=>{class et extends Ue{constructor($e,mt,pt){super($e),this._focusMonitor=mt,this._animationMode=pt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const wt of Ae)this._hasHostAttributes(wt)&&this._getHostElement().classList.add(wt);$e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus($e,mt){$e?this._focusMonitor.focusVia(this._getHostElement(),$e,mt):this._getHostElement().focus(mt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...$e){return $e.some(mt=>this._getHostElement().hasAttribute(mt))}}return et.\u0275fac=function($e){return new($e||et)(T.Y36(T.SBq),T.Y36(Z.tE),T.Y36(T.QbO,8))},et.\u0275cmp=T.Xpm({type:et,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function($e,mt){if(1&$e&&T.Gf(l.wG,5),2&$e){let pt;T.iGM(pt=T.CRH())&&(mt.ripple=pt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function($e,mt){2&$e&&(T.uIk("disabled",mt.disabled||null),T.ekj("_mat-animation-noopable","NoopAnimations"===mt._animationMode)("mat-button-disabled",mt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[T.qOj],attrs:g,ngContentSelectors:Ge,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function($e,mt){1&$e&&(T.F$t(),T.TgZ(0,"span",0),T.Hsn(1),T.qZA(),T._UZ(2,"span",1)(3,"span",2)),2&$e&&(T.xp6(2),T.ekj("mat-button-ripple-round",mt.isRoundButton||mt.isIconButton),T.Q6J("matRippleDisabled",mt._isRippleDisabled())("matRippleCentered",mt.isIconButton)("matRippleTrigger",mt._getHostElement()))},dependencies:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),et})(),Je=(()=>{class et extends je{constructor($e,mt,pt,wt){super(mt,$e,pt),this._ngZone=wt,this._haltDisabledEvents=tn=>{this.disabled&&(tn.preventDefault(),tn.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return et.\u0275fac=function($e){return new($e||et)(T.Y36(Z.tE),T.Y36(T.SBq),T.Y36(T.QbO,8),T.Y36(T.R0b,8))},et.\u0275cmp=T.Xpm({type:et,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function($e,mt){2&$e&&(T.uIk("tabindex",mt.disabled?-1:mt.tabIndex)("disabled",mt.disabled||null)("aria-disabled",mt.disabled.toString()),T.ekj("_mat-animation-noopable","NoopAnimations"===mt._animationMode)("mat-button-disabled",mt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[T.qOj],attrs:g,ngContentSelectors:Ge,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function($e,mt){1&$e&&(T.F$t(),T.TgZ(0,"span",0),T.Hsn(1),T.qZA(),T._UZ(2,"span",1)(3,"span",2)),2&$e&&(T.xp6(2),T.ekj("mat-button-ripple-round",mt.isRoundButton||mt.isIconButton),T.Q6J("matRippleDisabled",mt._isRippleDisabled())("matRippleCentered",mt.isIconButton)("matRippleTrigger",mt._getHostElement()))},dependencies:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),et})(),Le=(()=>{class et{}return et.\u0275fac=function($e){return new($e||et)},et.\u0275mod=T.oAB({type:et}),et.\u0275inj=T.cJS({imports:[l.si,l.BQ,l.BQ]}),et})()},3238:(sn,ut,j)=>{"use strict";j.d(ut,{rD:()=>dt,K7:()=>Pe,HF:()=>me,BQ:()=>Re,X2:()=>Mt,uc:()=>xn,ey:()=>mn,Ng:()=>Lt,nP:()=>Se,us:()=>Ke,wG:()=>Y,si:()=>te,CB:()=>gn,jH:()=>ji,pj:()=>jt,Kr:()=>nt,Id:()=>kt,FD:()=>xt,dB:()=>_t,sb:()=>at,E0:()=>Kt});var T=j(4650),l=j(2687),Z=j(445),Ge=j(6895),_e=j(3353),Ze=j(1281),Ae=j(9751),Ue=j(7579),je=j(8675),Je=j(9521);function qe(ft,ie){if(1&ft&&T._UZ(0,"mat-pseudo-checkbox",4),2&ft){const V=T.oxw();T.Q6J("state",V.selected?"checked":"unchecked")("disabled",V.disabled)}}function $e(ft,ie){if(1&ft&&(T.TgZ(0,"span",5),T._uU(1),T.qZA()),2&ft){const V=T.oxw();T.xp6(1),T.hij("(",V.group.label,")")}}const mt=["*"],bt=new T.OlP("mat-sanity-checks",{providedIn:"root",factory:function Zt(){return!0}});let Re=(()=>{class ft{constructor(V,U,$){this._sanityChecks=U,this._document=$,this._hasDoneGlobalChecks=!1,V._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(V){return!(0,_e.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[V])}}return ft.\u0275fac=function(V){return new(V||ft)(T.LFG(l.qm),T.LFG(bt,8),T.LFG(Ge.K0))},ft.\u0275mod=T.oAB({type:ft}),ft.\u0275inj=T.cJS({imports:[Z.vT,Z.vT]}),ft})();function kt(ft){return class extends ft{constructor(...ie){super(...ie),this._disabled=!1}get disabled(){return this._disabled}set disabled(ie){this._disabled=(0,Ze.Ig)(ie)}}}function jt(ft,ie){return class extends ft{constructor(...V){super(...V),this.defaultColor=ie,this.color=ie}get color(){return this._color}set color(V){const U=V||this.defaultColor;U!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),U&&this._elementRef.nativeElement.classList.add(`mat-${U}`),this._color=U)}}}function nt(ft){return class extends ft{constructor(...ie){super(...ie),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(ie){this._disableRipple=(0,Ze.Ig)(ie)}}}function at(ft,ie=0){return class extends ft{constructor(...V){super(...V),this._tabIndex=ie,this.defaultTabIndex=ie}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(V){this._tabIndex=null!=V?(0,Ze.su)(V):this.defaultTabIndex}}}function xt(ft){return class extends ft{constructor(...ie){super(...ie),this.errorState=!1}updateErrorState(){const ie=this.errorState,X=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);X!==ie&&(this.errorState=X,this.stateChanges.next())}}}function _t(ft){return class extends ft{constructor(...ie){super(...ie),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Ae.y(V=>{this._isInitialized?this._notifySubscriber(V):this._pendingSubscribers.push(V)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(ie){ie.next(),ie.complete()}}}let dt=(()=>{class ft{isErrorState(V,U){return!!(V&&V.invalid&&(V.touched||U&&U.submitted))}}return ft.\u0275fac=function(V){return new(V||ft)},ft.\u0275prov=T.Yz7({token:ft,factory:ft.\u0275fac,providedIn:"root"}),ft})(),Mt=(()=>{class ft{}return ft.\u0275fac=function(V){return new(V||ft)},ft.\u0275dir=T.lG2({type:ft,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),ft})();function Kt(ft,ie,V="mat"){ft.changes.pipe((0,je.O)(ft)).subscribe(({length:U})=>{Qt(ie,`${V}-2-line`,!1),Qt(ie,`${V}-3-line`,!1),Qt(ie,`${V}-multi-line`,!1),2===U||3===U?Qt(ie,`${V}-${U}-line`,!0):U>3&&Qt(ie,`${V}-multi-line`,!0)})}function Qt(ft,ie,V){ft.nativeElement.classList.toggle(ie,V)}let xn=(()=>{class ft{}return ft.\u0275fac=function(V){return new(V||ft)},ft.\u0275mod=T.oAB({type:ft}),ft.\u0275inj=T.cJS({imports:[Re,Re]}),ft})();class Vn{constructor(ie,V,U,$=!1){this._renderer=ie,this.element=V,this.config=U,this._animationForciblyDisabledThroughCss=$,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Qn={enterDuration:225,exitDuration:150},Fi=(0,_e.i$)({passive:!0}),_i=["mousedown","touchstart"],yi=["mouseup","mouseleave","touchend","touchcancel"];class un{constructor(ie,V,U,$){this._target=ie,this._ngZone=V,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,$.isBrowser&&(this._containerElement=(0,Ze.fI)(U))}fadeInRipple(ie,V,U={}){const $=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),X={...Qn,...U.animation};U.centered&&(ie=$.left+$.width/2,V=$.top+$.height/2);const ce=U.radius||function Rn(ft,ie,V){const U=Math.max(Math.abs(ft-V.left),Math.abs(ft-V.right)),$=Math.max(Math.abs(ie-V.top),Math.abs(ie-V.bottom));return Math.sqrt(U*U+$*$)}(ie,V,$),Ce=ie-$.left,ke=V-$.top,Ie=X.enterDuration,Qe=document.createElement("div");Qe.classList.add("mat-ripple-element"),Qe.style.left=Ce-ce+"px",Qe.style.top=ke-ce+"px",Qe.style.height=2*ce+"px",Qe.style.width=2*ce+"px",null!=U.color&&(Qe.style.backgroundColor=U.color),Qe.style.transitionDuration=`${Ie}ms`,this._containerElement.appendChild(Qe);const Ft=window.getComputedStyle(Qe),Pt=Ft.transitionDuration,nn="none"===Ft.transitionProperty||"0s"===Pt||"0s, 0s"===Pt,dn=new Vn(this,Qe,U,nn);Qe.style.transform="scale3d(1, 1, 1)",dn.state=0,U.persistent||(this._mostRecentTransientRipple=dn);let on=null;return!nn&&(Ie||X.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const cn=()=>this._finishRippleTransition(dn),Fe=()=>this._destroyRipple(dn);Qe.addEventListener("transitionend",cn),Qe.addEventListener("transitioncancel",Fe),on={onTransitionEnd:cn,onTransitionCancel:Fe}}),this._activeRipples.set(dn,on),(nn||!Ie)&&this._finishRippleTransition(dn),dn}fadeOutRipple(ie){if(2===ie.state||3===ie.state)return;const V=ie.element,U={...Qn,...ie.config.animation};V.style.transitionDuration=`${U.exitDuration}ms`,V.style.opacity="0",ie.state=2,(ie._animationForciblyDisabledThroughCss||!U.exitDuration)&&this._finishRippleTransition(ie)}fadeOutAll(){this._getActiveRipples().forEach(ie=>ie.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(ie=>{ie.config.persistent||ie.fadeOut()})}setupTriggerEvents(ie){const V=(0,Ze.fI)(ie);!V||V===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=V,this._registerEvents(_i))}handleEvent(ie){"mousedown"===ie.type?this._onMousedown(ie):"touchstart"===ie.type?this._onTouchStart(ie):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(yi),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(ie){0===ie.state?this._startFadeOutTransition(ie):2===ie.state&&this._destroyRipple(ie)}_startFadeOutTransition(ie){const V=ie===this._mostRecentTransientRipple,{persistent:U}=ie.config;ie.state=1,!U&&(!V||!this._isPointerDown)&&ie.fadeOut()}_destroyRipple(ie){const V=this._activeRipples.get(ie)??null;this._activeRipples.delete(ie),this._activeRipples.size||(this._containerRect=null),ie===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),ie.state=3,null!==V&&(ie.element.removeEventListener("transitionend",V.onTransitionEnd),ie.element.removeEventListener("transitioncancel",V.onTransitionCancel)),ie.element.remove()}_onMousedown(ie){const V=(0,l.X6)(ie),U=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!V&&!U&&(this._isPointerDown=!0,this.fadeInRipple(ie.clientX,ie.clientY,this._target.rippleConfig))}_onTouchStart(ie){if(!this._target.rippleDisabled&&!(0,l.yG)(ie)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const V=ie.changedTouches;for(let U=0;U<V.length;U++)this.fadeInRipple(V[U].clientX,V[U].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(ie=>{!ie.config.persistent&&(1===ie.state||ie.config.terminateOnPointerUp&&0===ie.state)&&ie.fadeOut()}))}_registerEvents(ie){this._ngZone.runOutsideAngular(()=>{ie.forEach(V=>{this._triggerElement.addEventListener(V,this,Fi)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(_i.forEach(ie=>{this._triggerElement.removeEventListener(ie,this,Fi)}),this._pointerUpEventsRegistered&&yi.forEach(ie=>{this._triggerElement.removeEventListener(ie,this,Fi)}))}}const Xe=new T.OlP("mat-ripple-global-options");let Y=(()=>{class ft{constructor(V,U,$,X,ce){this._elementRef=V,this._animationMode=ce,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=X||{},this._rippleRenderer=new un(this,U,V,$)}get disabled(){return this._disabled}set disabled(V){V&&this.fadeOutAllNonPersistent(),this._disabled=V,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(V){this._trigger=V,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(V,U=0,$){return"number"==typeof V?this._rippleRenderer.fadeInRipple(V,U,{...this.rippleConfig,...$}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...V})}}return ft.\u0275fac=function(V){return new(V||ft)(T.Y36(T.SBq),T.Y36(T.R0b),T.Y36(_e.t4),T.Y36(Xe,8),T.Y36(T.QbO,8))},ft.\u0275dir=T.lG2({type:ft,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(V,U){2&V&&T.ekj("mat-ripple-unbounded",U.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),ft})(),te=(()=>{class ft{}return ft.\u0275fac=function(V){return new(V||ft)},ft.\u0275mod=T.oAB({type:ft}),ft.\u0275inj=T.cJS({imports:[Re,Re]}),ft})(),Se=(()=>{class ft{constructor(V){this._animationMode=V,this.state="unchecked",this.disabled=!1}}return ft.\u0275fac=function(V){return new(V||ft)(T.Y36(T.QbO,8))},ft.\u0275cmp=T.Xpm({type:ft,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(V,U){2&V&&T.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===U.state)("mat-pseudo-checkbox-checked","checked"===U.state)("mat-pseudo-checkbox-disabled",U.disabled)("_mat-animation-noopable","NoopAnimations"===U._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(V,U){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),ft})(),Ke=(()=>{class ft{}return ft.\u0275fac=function(V){return new(V||ft)},ft.\u0275mod=T.oAB({type:ft}),ft.\u0275inj=T.cJS({imports:[Re]}),ft})();const me=new T.OlP("MAT_OPTION_PARENT_COMPONENT"),Pe=new T.OlP("MatOptgroup");let ct=0;class ln{constructor(ie,V=!1){this.source=ie,this.isUserInput=V}}let Rt=(()=>{class ft{constructor(V,U,$,X){this._element=V,this._changeDetectorRef=U,this._parent=$,this.group=X,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+ct++,this.onSelectionChange=new T.vpe,this._stateChanges=new Ue.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(V){this._disabled=(0,Ze.Ig)(V)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(V,U){const $=this._getHostElement();"function"==typeof $.focus&&$.focus(U)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(V){(V.keyCode===Je.K5||V.keyCode===Je.L_)&&!(0,Je.Vb)(V)&&(this._selectViaInteraction(),V.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const V=this.viewValue;V!==this._mostRecentViewValue&&(this._mostRecentViewValue=V,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(V=!1){this.onSelectionChange.emit(new ln(this,V))}}return ft.\u0275fac=function(V){T.$Z()},ft.\u0275dir=T.lG2({type:ft,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),ft})(),mn=(()=>{class ft extends Rt{constructor(V,U,$,X){super(V,U,$,X)}}return ft.\u0275fac=function(V){return new(V||ft)(T.Y36(T.SBq),T.Y36(T.sBO),T.Y36(me,8),T.Y36(Pe,8))},ft.\u0275cmp=T.Xpm({type:ft,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(V,U){1&V&&T.NdJ("click",function(){return U._selectViaInteraction()})("keydown",function(X){return U._handleKeydown(X)}),2&V&&(T.Ikx("id",U.id),T.uIk("tabindex",U._getTabIndex())("aria-selected",U._getAriaSelected())("aria-disabled",U.disabled.toString()),T.ekj("mat-selected",U.selected)("mat-option-multiple",U.multiple)("mat-active",U.active)("mat-option-disabled",U.disabled))},exportAs:["matOption"],features:[T.qOj],ngContentSelectors:mt,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(V,U){1&V&&(T.F$t(),T.YNc(0,qe,1,2,"mat-pseudo-checkbox",0),T.TgZ(1,"span",1),T.Hsn(2),T.qZA(),T.YNc(3,$e,2,1,"span",2),T._UZ(4,"div",3)),2&V&&(T.Q6J("ngIf",U.multiple),T.xp6(3),T.Q6J("ngIf",U.group&&U.group._inert),T.xp6(1),T.Q6J("matRippleTrigger",U._getHostElement())("matRippleDisabled",U.disabled||U.disableRipple))},dependencies:[Y,Ge.O5,Se],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),ft})();function gn(ft,ie,V){if(V.length){let U=ie.toArray(),$=V.toArray(),X=0;for(let ce=0;ce<ft+1;ce++)U[ce].group&&U[ce].group===$[X]&&X++;return X}return 0}function ji(ft,ie,V,U){return ft<V?ft:ft+ie>V+U?Math.max(0,ft-U+ie):V}let Lt=(()=>{class ft{}return ft.\u0275fac=function(V){return new(V||ft)},ft.\u0275mod=T.oAB({type:ft}),ft.\u0275inj=T.cJS({imports:[te,Ge.ez,Re,Ke]}),ft})()},9549:(sn,ut,j)=>{"use strict";j.d(ut,{Eo:()=>Jn,G_:()=>yi,KE:()=>un,R9:()=>xn,lN:()=>Rn});var T=j(9643),l=j(6895),Z=j(4650),g=j(3238),Ge=j(445),_e=j(1281),Ze=j(7579),Ae=j(6451),Ue=j(4968),je=j(8675),Je=j(2722),Le=j(5698),et=j(7340),qe=j(3353);const $e=["connectionContainer"],mt=["inputContainer"],pt=["label"];function wt(Xe,Y){1&Xe&&(Z.ynx(0),Z.TgZ(1,"div",14),Z._UZ(2,"div",15)(3,"div",16)(4,"div",17),Z.qZA(),Z.TgZ(5,"div",18),Z._UZ(6,"div",15)(7,"div",16)(8,"div",17),Z.qZA(),Z.BQk())}function tn(Xe,Y){if(1&Xe){const te=Z.EpF();Z.TgZ(0,"div",19),Z.NdJ("cdkObserveContent",function(){Z.CHM(te);const Ke=Z.oxw();return Z.KtG(Ke.updateOutlineGap())}),Z.Hsn(1,1),Z.qZA()}if(2&Xe){const te=Z.oxw();Z.Q6J("cdkObserveContentDisabled","outline"!=te.appearance)}}function Zt(Xe,Y){if(1&Xe&&(Z.ynx(0),Z.Hsn(1,2),Z.TgZ(2,"span"),Z._uU(3),Z.qZA(),Z.BQk()),2&Xe){const te=Z.oxw(2);Z.xp6(3),Z.Oqu(te._control.placeholder)}}function bt(Xe,Y){1&Xe&&Z.Hsn(0,3,["*ngSwitchCase","true"])}function Re(Xe,Y){1&Xe&&(Z.TgZ(0,"span",23),Z._uU(1," *"),Z.qZA())}function ze(Xe,Y){if(1&Xe){const te=Z.EpF();Z.TgZ(0,"label",20,21),Z.NdJ("cdkObserveContent",function(){Z.CHM(te);const Ke=Z.oxw();return Z.KtG(Ke.updateOutlineGap())}),Z.YNc(2,Zt,4,1,"ng-container",12),Z.YNc(3,bt,1,0,"ng-content",12),Z.YNc(4,Re,2,0,"span",22),Z.qZA()}if(2&Xe){const te=Z.oxw();Z.ekj("mat-empty",te._control.empty&&!te._shouldAlwaysFloat())("mat-form-field-empty",te._control.empty&&!te._shouldAlwaysFloat())("mat-accent","accent"==te.color)("mat-warn","warn"==te.color),Z.Q6J("cdkObserveContentDisabled","outline"!=te.appearance)("id",te._labelId)("ngSwitch",te._hasLabel()),Z.uIk("for",te._control.id)("aria-owns",te._control.id),Z.xp6(2),Z.Q6J("ngSwitchCase",!1),Z.xp6(1),Z.Q6J("ngSwitchCase",!0),Z.xp6(1),Z.Q6J("ngIf",!te.hideRequiredMarker&&te._control.required&&!te._control.disabled)}}function It(Xe,Y){1&Xe&&(Z.TgZ(0,"div",24),Z.Hsn(1,4),Z.qZA())}function At(Xe,Y){if(1&Xe&&(Z.TgZ(0,"div",25),Z._UZ(1,"span",26),Z.qZA()),2&Xe){const te=Z.oxw();Z.xp6(1),Z.ekj("mat-accent","accent"==te.color)("mat-warn","warn"==te.color)}}function kt(Xe,Y){if(1&Xe&&(Z.TgZ(0,"div"),Z.Hsn(1,5),Z.qZA()),2&Xe){const te=Z.oxw();Z.Q6J("@transitionMessages",te._subscriptAnimationState)}}function jt(Xe,Y){if(1&Xe&&(Z.TgZ(0,"div",30),Z._uU(1),Z.qZA()),2&Xe){const te=Z.oxw(2);Z.Q6J("id",te._hintLabelId),Z.xp6(1),Z.Oqu(te.hintLabel)}}function nt(Xe,Y){if(1&Xe&&(Z.TgZ(0,"div",27),Z.YNc(1,jt,2,2,"div",28),Z.Hsn(2,6),Z._UZ(3,"div",29),Z.Hsn(4,7),Z.qZA()),2&Xe){const te=Z.oxw();Z.Q6J("@transitionMessages",te._subscriptAnimationState),Z.xp6(1),Z.Q6J("ngIf",te.hintLabel)}}const at=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],xt=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Yt=new Z.OlP("MatError"),On={transitionMessages:(0,et.X$)("transitionMessages",[(0,et.SB)("enter",(0,et.oB)({opacity:1,transform:"translateY(0%)"})),(0,et.eR)("void => enter",[(0,et.oB)({opacity:0,transform:"translateY(-5px)"}),(0,et.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Jn=(()=>{class Xe{}return Xe.\u0275fac=function(te){return new(te||Xe)},Xe.\u0275dir=Z.lG2({type:Xe}),Xe})();const ai=new Z.OlP("MatHint");let hn=(()=>{class Xe{}return Xe.\u0275fac=function(te){return new(te||Xe)},Xe.\u0275dir=Z.lG2({type:Xe,selectors:[["mat-label"]]}),Xe})(),dt=(()=>{class Xe{}return Xe.\u0275fac=function(te){return new(te||Xe)},Xe.\u0275dir=Z.lG2({type:Xe,selectors:[["mat-placeholder"]]}),Xe})();const Mt=new Z.OlP("MatPrefix"),Qt=new Z.OlP("MatSuffix");let xn=(()=>{class Xe{}return Xe.\u0275fac=function(te){return new(te||Xe)},Xe.\u0275dir=Z.lG2({type:Xe,selectors:[["","matSuffix",""]],features:[Z._Bn([{provide:Qt,useExisting:Xe}])]}),Xe})(),Vn=0;const Fi=(0,g.pj)(class{constructor(Xe){this._elementRef=Xe}},"primary"),_i=new Z.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),yi=new Z.OlP("MatFormField");let un=(()=>{class Xe extends Fi{constructor(te,Se,Ke,me,ye,he,ge){super(te),this._changeDetectorRef=Se,this._dir=Ke,this._defaults=me,this._platform=ye,this._ngZone=he,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Ze.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Vn++,this._labelId="mat-form-field-label-"+Vn++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==ge,this.appearance=me?.appearance||"legacy",me&&(this._hideRequiredMarker=Boolean(me.hideRequiredMarker),me.color&&(this.color=this.defaultColor=me.color))}get appearance(){return this._appearance}set appearance(te){const Se=this._appearance;this._appearance=te||this._defaults?.appearance||"legacy","outline"===this._appearance&&Se!==te&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(te){this._hideRequiredMarker=(0,_e.Ig)(te)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(te){this._hintLabel=te,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(te){te!==this._floatLabel&&(this._floatLabel=te||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(te){this._explicitFormFieldControl=te}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const te=this._control;te.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${te.controlType}`),te.stateChanges.pipe((0,je.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),te.ngControl&&te.ngControl.valueChanges&&te.ngControl.valueChanges.pipe((0,Je.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Je.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Ae.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,je.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,je.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,Je.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(te){const Se=this._control?this._control.ngControl:null;return Se&&Se[te]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,Ue.R)(this._label.nativeElement,"transitionend").pipe((0,Le.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let te=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&te.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const Se=this._hintChildren?this._hintChildren.find(me=>"start"===me.align):null,Ke=this._hintChildren?this._hintChildren.find(me=>"end"===me.align):null;Se?te.push(Se.id):this._hintLabel&&te.push(this._hintLabelId),Ke&&te.push(Ke.id)}else this._errorChildren&&te.push(...this._errorChildren.map(Se=>Se.id));this._control.setDescribedByIds(te)}}_validateControlChild(){}updateOutlineGap(){const te=this._label?this._label.nativeElement:null,Se=this._connectionContainerRef.nativeElement,Ke=".mat-form-field-outline-start",me=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!te||!te.children.length||!te.textContent.trim()){const rt=Se.querySelectorAll(`${Ke}, ${me}`);for(let ct=0;ct<rt.length;ct++)rt[ct].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let ye=0,he=0;const ge=Se.querySelectorAll(Ke),Pe=Se.querySelectorAll(me);if(this._label&&this._label.nativeElement.children.length){const rt=Se.getBoundingClientRect();if(0===rt.width&&0===rt.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const ct=this._getStartEnd(rt),ln=te.children,Rt=this._getStartEnd(ln[0].getBoundingClientRect());let mn=0;for(let gn=0;gn<ln.length;gn++)mn+=ln[gn].offsetWidth;ye=Math.abs(Rt-ct)-5,he=mn>0?.75*mn+10:0}for(let rt=0;rt<ge.length;rt++)ge[rt].style.width=`${ye}px`;for(let rt=0;rt<Pe.length;rt++)Pe[rt].style.width=`${he}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(te){return this._dir&&"rtl"===this._dir.value?te.right:te.left}_isAttachedToDOM(){const te=this._elementRef.nativeElement;if(te.getRootNode){const Se=te.getRootNode();return Se&&Se!==te}return document.documentElement.contains(te)}}return Xe.\u0275fac=function(te){return new(te||Xe)(Z.Y36(Z.SBq),Z.Y36(Z.sBO),Z.Y36(Ge.Is,8),Z.Y36(_i,8),Z.Y36(qe.t4),Z.Y36(Z.R0b),Z.Y36(Z.QbO,8))},Xe.\u0275cmp=Z.Xpm({type:Xe,selectors:[["mat-form-field"]],contentQueries:function(te,Se,Ke){if(1&te&&(Z.Suo(Ke,Jn,5),Z.Suo(Ke,Jn,7),Z.Suo(Ke,hn,5),Z.Suo(Ke,hn,7),Z.Suo(Ke,dt,5),Z.Suo(Ke,Yt,5),Z.Suo(Ke,ai,5),Z.Suo(Ke,Mt,5),Z.Suo(Ke,Qt,5)),2&te){let me;Z.iGM(me=Z.CRH())&&(Se._controlNonStatic=me.first),Z.iGM(me=Z.CRH())&&(Se._controlStatic=me.first),Z.iGM(me=Z.CRH())&&(Se._labelChildNonStatic=me.first),Z.iGM(me=Z.CRH())&&(Se._labelChildStatic=me.first),Z.iGM(me=Z.CRH())&&(Se._placeholderChild=me.first),Z.iGM(me=Z.CRH())&&(Se._errorChildren=me),Z.iGM(me=Z.CRH())&&(Se._hintChildren=me),Z.iGM(me=Z.CRH())&&(Se._prefixChildren=me),Z.iGM(me=Z.CRH())&&(Se._suffixChildren=me)}},viewQuery:function(te,Se){if(1&te&&(Z.Gf($e,7),Z.Gf(mt,5),Z.Gf(pt,5)),2&te){let Ke;Z.iGM(Ke=Z.CRH())&&(Se._connectionContainerRef=Ke.first),Z.iGM(Ke=Z.CRH())&&(Se._inputContainerRef=Ke.first),Z.iGM(Ke=Z.CRH())&&(Se._label=Ke.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(te,Se){2&te&&Z.ekj("mat-form-field-appearance-standard","standard"==Se.appearance)("mat-form-field-appearance-fill","fill"==Se.appearance)("mat-form-field-appearance-outline","outline"==Se.appearance)("mat-form-field-appearance-legacy","legacy"==Se.appearance)("mat-form-field-invalid",Se._control.errorState)("mat-form-field-can-float",Se._canLabelFloat())("mat-form-field-should-float",Se._shouldLabelFloat())("mat-form-field-has-label",Se._hasFloatingLabel())("mat-form-field-hide-placeholder",Se._hideControlPlaceholder())("mat-form-field-disabled",Se._control.disabled)("mat-form-field-autofilled",Se._control.autofilled)("mat-focused",Se._control.focused)("ng-untouched",Se._shouldForward("untouched"))("ng-touched",Se._shouldForward("touched"))("ng-pristine",Se._shouldForward("pristine"))("ng-dirty",Se._shouldForward("dirty"))("ng-valid",Se._shouldForward("valid"))("ng-invalid",Se._shouldForward("invalid"))("ng-pending",Se._shouldForward("pending"))("_mat-animation-noopable",!Se._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Z._Bn([{provide:yi,useExisting:Xe}]),Z.qOj],ngContentSelectors:xt,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(te,Se){1&te&&(Z.F$t(at),Z.TgZ(0,"div",0)(1,"div",1,2),Z.NdJ("click",function(me){return Se._control.onContainerClick&&Se._control.onContainerClick(me)}),Z.YNc(3,wt,9,0,"ng-container",3),Z.YNc(4,tn,2,1,"div",4),Z.TgZ(5,"div",5,6),Z.Hsn(7),Z.TgZ(8,"span",7),Z.YNc(9,ze,5,16,"label",8),Z.qZA()(),Z.YNc(10,It,2,0,"div",9),Z.qZA(),Z.YNc(11,At,2,4,"div",10),Z.TgZ(12,"div",11),Z.YNc(13,kt,2,1,"div",12),Z.YNc(14,nt,5,2,"div",13),Z.qZA()()),2&te&&(Z.xp6(3),Z.Q6J("ngIf","outline"==Se.appearance),Z.xp6(1),Z.Q6J("ngIf",Se._prefixChildren.length),Z.xp6(5),Z.Q6J("ngIf",Se._hasFloatingLabel()),Z.xp6(1),Z.Q6J("ngIf",Se._suffixChildren.length),Z.xp6(1),Z.Q6J("ngIf","outline"!=Se.appearance),Z.xp6(1),Z.Q6J("ngSwitch",Se._getDisplayedMessages()),Z.xp6(1),Z.Q6J("ngSwitchCase","error"),Z.xp6(1),Z.Q6J("ngSwitchCase","hint"))},dependencies:[l.O5,l.RF,l.n9,T.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[On.transitionMessages]},changeDetection:0}),Xe})(),Rn=(()=>{class Xe{}return Xe.\u0275fac=function(te){return new(te||Xe)},Xe.\u0275mod=Z.oAB({type:Xe}),Xe.\u0275inj=Z.cJS({imports:[l.ez,g.BQ,T.Q8,g.BQ]}),Xe})()},7392:(sn,ut,j)=>{"use strict";j.d(ut,{Hw:()=>Xn,Ps:()=>ai,jv:()=>kt});var T=j(4650),l=j(3238),Z=j(1281),g=j(6895),Ge=j(9646),_e=j(2843),Ze=j(4128),Ae=j(727),Ue=j(8505),je=j(4004),Je=j(262),Le=j(8746),et=j(3099),qe=j(5698),$e=j(529),mt=j(1481);const pt=["*"];let wt;function Zt(an){return function tn(){if(void 0===wt&&(wt=null,typeof window<"u")){const an=window;void 0!==an.trustedTypes&&(wt=an.trustedTypes.createPolicy("angular#components",{createHTML:hn=>hn}))}return wt}()?.createHTML(an)||an}function bt(an){return Error(`Unable to find icon with the name "${an}"`)}function ze(an){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${an}".`)}function It(an){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${an}".`)}class At{constructor(hn,dt,Mt){this.url=hn,this.svgText=dt,this.options=Mt}}let kt=(()=>{class an{constructor(dt,Mt,Kt,Qt){this._httpClient=dt,this._sanitizer=Mt,this._errorHandler=Qt,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=Kt}addSvgIcon(dt,Mt,Kt){return this.addSvgIconInNamespace("",dt,Mt,Kt)}addSvgIconLiteral(dt,Mt,Kt){return this.addSvgIconLiteralInNamespace("",dt,Mt,Kt)}addSvgIconInNamespace(dt,Mt,Kt,Qt){return this._addSvgIconConfig(dt,Mt,new At(Kt,null,Qt))}addSvgIconResolver(dt){return this._resolvers.push(dt),this}addSvgIconLiteralInNamespace(dt,Mt,Kt,Qt){const xn=this._sanitizer.sanitize(T.q3G.HTML,Kt);if(!xn)throw It(Kt);const Vn=Zt(xn);return this._addSvgIconConfig(dt,Mt,new At("",Vn,Qt))}addSvgIconSet(dt,Mt){return this.addSvgIconSetInNamespace("",dt,Mt)}addSvgIconSetLiteral(dt,Mt){return this.addSvgIconSetLiteralInNamespace("",dt,Mt)}addSvgIconSetInNamespace(dt,Mt,Kt){return this._addSvgIconSetConfig(dt,new At(Mt,null,Kt))}addSvgIconSetLiteralInNamespace(dt,Mt,Kt){const Qt=this._sanitizer.sanitize(T.q3G.HTML,Mt);if(!Qt)throw It(Mt);const xn=Zt(Qt);return this._addSvgIconSetConfig(dt,new At("",xn,Kt))}registerFontClassAlias(dt,Mt=dt){return this._fontCssClassesByAlias.set(dt,Mt),this}classNameForFontAlias(dt){return this._fontCssClassesByAlias.get(dt)||dt}setDefaultFontSetClass(...dt){return this._defaultFontSetClass=dt,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(dt){const Mt=this._sanitizer.sanitize(T.q3G.RESOURCE_URL,dt);if(!Mt)throw ze(dt);const Kt=this._cachedIconsByUrl.get(Mt);return Kt?(0,Ge.of)(at(Kt)):this._loadSvgIconFromConfig(new At(dt,null)).pipe((0,Ue.b)(Qt=>this._cachedIconsByUrl.set(Mt,Qt)),(0,je.U)(Qt=>at(Qt)))}getNamedSvgIcon(dt,Mt=""){const Kt=xt(Mt,dt);let Qt=this._svgIconConfigs.get(Kt);if(Qt)return this._getSvgFromConfig(Qt);if(Qt=this._getIconConfigFromResolvers(Mt,dt),Qt)return this._svgIconConfigs.set(Kt,Qt),this._getSvgFromConfig(Qt);const xn=this._iconSetConfigs.get(Mt);return xn?this._getSvgFromIconSetConfigs(dt,xn):(0,_e._)(bt(Kt))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(dt){return dt.svgText?(0,Ge.of)(at(this._svgElementFromConfig(dt))):this._loadSvgIconFromConfig(dt).pipe((0,je.U)(Mt=>at(Mt)))}_getSvgFromIconSetConfigs(dt,Mt){const Kt=this._extractIconWithNameFromAnySet(dt,Mt);if(Kt)return(0,Ge.of)(Kt);const Qt=Mt.filter(xn=>!xn.svgText).map(xn=>this._loadSvgIconSetFromConfig(xn).pipe((0,Je.K)(Vn=>{const pi=`Loading icon set URL: ${this._sanitizer.sanitize(T.q3G.RESOURCE_URL,xn.url)} failed: ${Vn.message}`;return this._errorHandler.handleError(new Error(pi)),(0,Ge.of)(null)})));return(0,Ze.D)(Qt).pipe((0,je.U)(()=>{const xn=this._extractIconWithNameFromAnySet(dt,Mt);if(!xn)throw bt(dt);return xn}))}_extractIconWithNameFromAnySet(dt,Mt){for(let Kt=Mt.length-1;Kt>=0;Kt--){const Qt=Mt[Kt];if(Qt.svgText&&Qt.svgText.toString().indexOf(dt)>-1){const xn=this._svgElementFromConfig(Qt),Vn=this._extractSvgIconFromSet(xn,dt,Qt.options);if(Vn)return Vn}}return null}_loadSvgIconFromConfig(dt){return this._fetchIcon(dt).pipe((0,Ue.b)(Mt=>dt.svgText=Mt),(0,je.U)(()=>this._svgElementFromConfig(dt)))}_loadSvgIconSetFromConfig(dt){return dt.svgText?(0,Ge.of)(null):this._fetchIcon(dt).pipe((0,Ue.b)(Mt=>dt.svgText=Mt))}_extractSvgIconFromSet(dt,Mt,Kt){const Qt=dt.querySelector(`[id="${Mt}"]`);if(!Qt)return null;const xn=Qt.cloneNode(!0);if(xn.removeAttribute("id"),"svg"===xn.nodeName.toLowerCase())return this._setSvgAttributes(xn,Kt);if("symbol"===xn.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(xn),Kt);const Vn=this._svgElementFromString(Zt("<svg></svg>"));return Vn.appendChild(xn),this._setSvgAttributes(Vn,Kt)}_svgElementFromString(dt){const Mt=this._document.createElement("DIV");Mt.innerHTML=dt;const Kt=Mt.querySelector("svg");if(!Kt)throw Error("<svg> tag not found");return Kt}_toSvgElement(dt){const Mt=this._svgElementFromString(Zt("<svg></svg>")),Kt=dt.attributes;for(let Qt=0;Qt<Kt.length;Qt++){const{name:xn,value:Vn}=Kt[Qt];"id"!==xn&&Mt.setAttribute(xn,Vn)}for(let Qt=0;Qt<dt.childNodes.length;Qt++)dt.childNodes[Qt].nodeType===this._document.ELEMENT_NODE&&Mt.appendChild(dt.childNodes[Qt].cloneNode(!0));return Mt}_setSvgAttributes(dt,Mt){return dt.setAttribute("fit",""),dt.setAttribute("height","100%"),dt.setAttribute("width","100%"),dt.setAttribute("preserveAspectRatio","xMidYMid meet"),dt.setAttribute("focusable","false"),Mt&&Mt.viewBox&&dt.setAttribute("viewBox",Mt.viewBox),dt}_fetchIcon(dt){const{url:Mt,options:Kt}=dt,Qt=Kt?.withCredentials??!1;if(!this._httpClient)throw function Re(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==Mt)throw Error(`Cannot fetch icon from URL "${Mt}".`);const xn=this._sanitizer.sanitize(T.q3G.RESOURCE_URL,Mt);if(!xn)throw ze(Mt);const Vn=this._inProgressUrlFetches.get(xn);if(Vn)return Vn;const Qn=this._httpClient.get(xn,{responseType:"text",withCredentials:Qt}).pipe((0,je.U)(pi=>Zt(pi)),(0,Le.x)(()=>this._inProgressUrlFetches.delete(xn)),(0,et.B)());return this._inProgressUrlFetches.set(xn,Qn),Qn}_addSvgIconConfig(dt,Mt,Kt){return this._svgIconConfigs.set(xt(dt,Mt),Kt),this}_addSvgIconSetConfig(dt,Mt){const Kt=this._iconSetConfigs.get(dt);return Kt?Kt.push(Mt):this._iconSetConfigs.set(dt,[Mt]),this}_svgElementFromConfig(dt){if(!dt.svgElement){const Mt=this._svgElementFromString(dt.svgText);this._setSvgAttributes(Mt,dt.options),dt.svgElement=Mt}return dt.svgElement}_getIconConfigFromResolvers(dt,Mt){for(let Kt=0;Kt<this._resolvers.length;Kt++){const Qt=this._resolvers[Kt](Mt,dt);if(Qt)return _t(Qt)?new At(Qt.url,null,Qt.options):new At(Qt,null)}}}return an.\u0275fac=function(dt){return new(dt||an)(T.LFG($e.eN,8),T.LFG(mt.H7),T.LFG(g.K0,8),T.LFG(T.qLn))},an.\u0275prov=T.Yz7({token:an,factory:an.\u0275fac,providedIn:"root"}),an})();function at(an){return an.cloneNode(!0)}function xt(an,hn){return an+":"+hn}function _t(an){return!(!an.url||!an.options)}const Yt=(0,l.pj)(class{constructor(an){this._elementRef=an}}),qt=new T.OlP("MAT_ICON_DEFAULT_OPTIONS"),On=new T.OlP("mat-icon-location",{providedIn:"root",factory:function Jn(){const an=(0,T.f3M)(g.K0),hn=an?an.location:null;return{getPathname:()=>hn?hn.pathname+hn.search:""}}}),hi=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Xt=hi.map(an=>`[${an}]`).join(", "),ui=/^url\(['"]?#(.*?)['"]?\)$/;let Xn=(()=>{class an extends Yt{constructor(dt,Mt,Kt,Qt,xn,Vn){super(dt),this._iconRegistry=Mt,this._location=Qt,this._errorHandler=xn,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Ae.w0.EMPTY,Vn&&(Vn.color&&(this.color=this.defaultColor=Vn.color),Vn.fontSet&&(this.fontSet=Vn.fontSet)),Kt||dt.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(dt){this._inline=(0,Z.Ig)(dt)}get svgIcon(){return this._svgIcon}set svgIcon(dt){dt!==this._svgIcon&&(dt?this._updateSvgIcon(dt):this._svgIcon&&this._clearSvgElement(),this._svgIcon=dt)}get fontSet(){return this._fontSet}set fontSet(dt){const Mt=this._cleanupFontValue(dt);Mt!==this._fontSet&&(this._fontSet=Mt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(dt){const Mt=this._cleanupFontValue(dt);Mt!==this._fontIcon&&(this._fontIcon=Mt,this._updateFontIconClasses())}_splitIconName(dt){if(!dt)return["",""];const Mt=dt.split(":");switch(Mt.length){case 1:return["",Mt[0]];case 2:return Mt;default:throw Error(`Invalid icon name: "${dt}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const dt=this._elementsWithExternalReferences;if(dt&&dt.size){const Mt=this._location.getPathname();Mt!==this._previousPath&&(this._previousPath=Mt,this._prependPathToReferences(Mt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(dt){this._clearSvgElement();const Mt=this._location.getPathname();this._previousPath=Mt,this._cacheChildrenWithExternalReferences(dt),this._prependPathToReferences(Mt),this._elementRef.nativeElement.appendChild(dt)}_clearSvgElement(){const dt=this._elementRef.nativeElement;let Mt=dt.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Mt--;){const Kt=dt.childNodes[Mt];(1!==Kt.nodeType||"svg"===Kt.nodeName.toLowerCase())&&Kt.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const dt=this._elementRef.nativeElement,Mt=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(Kt=>Kt.length>0);this._previousFontSetClass.forEach(Kt=>dt.classList.remove(Kt)),Mt.forEach(Kt=>dt.classList.add(Kt)),this._previousFontSetClass=Mt,this.fontIcon!==this._previousFontIconClass&&!Mt.includes("mat-ligature-font")&&(this._previousFontIconClass&&dt.classList.remove(this._previousFontIconClass),this.fontIcon&&dt.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(dt){return"string"==typeof dt?dt.trim().split(" ")[0]:dt}_prependPathToReferences(dt){const Mt=this._elementsWithExternalReferences;Mt&&Mt.forEach((Kt,Qt)=>{Kt.forEach(xn=>{Qt.setAttribute(xn.name,`url('${dt}#${xn.value}')`)})})}_cacheChildrenWithExternalReferences(dt){const Mt=dt.querySelectorAll(Xt),Kt=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Qt=0;Qt<Mt.length;Qt++)hi.forEach(xn=>{const Vn=Mt[Qt],Qn=Vn.getAttribute(xn),pi=Qn?Qn.match(ui):null;if(pi){let Fi=Kt.get(Vn);Fi||(Fi=[],Kt.set(Vn,Fi)),Fi.push({name:xn,value:pi[1]})}})}_updateSvgIcon(dt){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),dt){const[Mt,Kt]=this._splitIconName(dt);Mt&&(this._svgNamespace=Mt),Kt&&(this._svgName=Kt),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Kt,Mt).pipe((0,qe.q)(1)).subscribe(Qt=>this._setSvgElement(Qt),Qt=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Mt}:${Kt}! ${Qt.message}`))})}}}return an.\u0275fac=function(dt){return new(dt||an)(T.Y36(T.SBq),T.Y36(kt),T.$8M("aria-hidden"),T.Y36(On),T.Y36(T.qLn),T.Y36(qt,8))},an.\u0275cmp=T.Xpm({type:an,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(dt,Mt){2&dt&&(T.uIk("data-mat-icon-type",Mt._usingFontIcon()?"font":"svg")("data-mat-icon-name",Mt._svgName||Mt.fontIcon)("data-mat-icon-namespace",Mt._svgNamespace||Mt.fontSet),T.ekj("mat-icon-inline",Mt.inline)("mat-icon-no-color","primary"!==Mt.color&&"accent"!==Mt.color&&"warn"!==Mt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[T.qOj],ngContentSelectors:pt,decls:1,vars:0,template:function(dt,Mt){1&dt&&(T.F$t(),T.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),an})(),ai=(()=>{class an{}return an.\u0275fac=function(dt){return new(dt||an)},an.\u0275mod=T.oAB({type:an}),an.\u0275inj=T.cJS({imports:[l.BQ,l.BQ]}),an})()},4385:(sn,ut,j)=>{"use strict";j.d(ut,{LD:()=>un,gD:()=>yi});var T=j(8184),l=j(6895),Z=j(4650),g=j(3238),Ge=j(9549),_e=j(8605),Ze=j(2687),Ae=j(445),Ue=j(1281),je=j(5017),Je=j(9521),Le=j(4006),et=j(7579),qe=j(9770),$e=j(6451),mt=j(8675),pt=j(3900),wt=j(5698),tn=j(9300),Zt=j(4004),bt=j(1884),Re=j(2722),ze=j(7340);const It=["trigger"],At=["panel"];function kt(Rn,Xe){if(1&Rn&&(Z.TgZ(0,"span",8),Z._uU(1),Z.qZA()),2&Rn){const Y=Z.oxw();Z.xp6(1),Z.Oqu(Y.placeholder)}}function jt(Rn,Xe){if(1&Rn&&(Z.TgZ(0,"span",12),Z._uU(1),Z.qZA()),2&Rn){const Y=Z.oxw(2);Z.xp6(1),Z.Oqu(Y.triggerValue)}}function nt(Rn,Xe){1&Rn&&Z.Hsn(0,0,["*ngSwitchCase","true"])}function at(Rn,Xe){if(1&Rn&&(Z.TgZ(0,"span",9),Z.YNc(1,jt,2,1,"span",10),Z.YNc(2,nt,1,0,"ng-content",11),Z.qZA()),2&Rn){const Y=Z.oxw();Z.Q6J("ngSwitch",!!Y.customTrigger),Z.xp6(2),Z.Q6J("ngSwitchCase",!0)}}function xt(Rn,Xe){if(1&Rn){const Y=Z.EpF();Z.TgZ(0,"div",13)(1,"div",14,15),Z.NdJ("@transformPanel.done",function(Se){Z.CHM(Y);const Ke=Z.oxw();return Z.KtG(Ke._panelDoneAnimatingStream.next(Se.toState))})("keydown",function(Se){Z.CHM(Y);const Ke=Z.oxw();return Z.KtG(Ke._handleKeydown(Se))}),Z.Hsn(3,1),Z.qZA()()}if(2&Rn){const Y=Z.oxw();Z.Q6J("@transformPanelWrap",void 0),Z.xp6(1),Z.Gre("mat-select-panel ",Y._getPanelTheme(),""),Z.Udp("transform-origin",Y._transformOrigin)("font-size",Y._triggerFontSize,"px"),Z.Q6J("ngClass",Y.panelClass)("@transformPanel",Y.multiple?"showing-multiple":"showing"),Z.uIk("id",Y.id+"-panel")("aria-multiselectable",Y.multiple)("aria-label",Y.ariaLabel||null)("aria-labelledby",Y._getPanelAriaLabelledby())}}const _t=[[["mat-select-trigger"]],"*"],Yt=["mat-select-trigger","*"],qt={transformPanelWrap:(0,ze.X$)("transformPanelWrap",[(0,ze.eR)("* => void",(0,ze.IO)("@transformPanel",[(0,ze.pV)()],{optional:!0}))]),transformPanel:(0,ze.X$)("transformPanel",[(0,ze.SB)("void",(0,ze.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,ze.SB)("showing",(0,ze.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,ze.SB)("showing-multiple",(0,ze.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,ze.eR)("void => *",(0,ze.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,ze.eR)("* => void",(0,ze.jt)("100ms 25ms linear",(0,ze.oB)({opacity:0})))])};let Xt=0;const Mt=new Z.OlP("mat-select-scroll-strategy"),Qt=new Z.OlP("MAT_SELECT_CONFIG"),xn={provide:Mt,deps:[T.aV],useFactory:function Kt(Rn){return()=>Rn.scrollStrategies.reposition()}};class Vn{constructor(Xe,Y){this.source=Xe,this.value=Y}}const Qn=(0,g.Kr)((0,g.sb)((0,g.Id)((0,g.FD)(class{constructor(Rn,Xe,Y,te,Se){this._elementRef=Rn,this._defaultErrorStateMatcher=Xe,this._parentForm=Y,this._parentFormGroup=te,this.ngControl=Se,this.stateChanges=new et.x}})))),pi=new Z.OlP("MatSelectTrigger");let _i=(()=>{class Rn extends Qn{constructor(Y,te,Se,Ke,me,ye,he,ge,Pe,rt,ct,ln,Rt,mn){super(me,Ke,he,ge,rt),this._viewportRuler=Y,this._changeDetectorRef=te,this._ngZone=Se,this._dir=ye,this._parentFormField=Pe,this._liveAnnouncer=Rt,this._defaultOptions=mn,this._panelOpen=!1,this._compareWith=(gn,ji)=>gn===ji,this._uid="mat-select-"+Xt++,this._triggerAriaLabelledBy=null,this._destroy=new et.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Xt++,this._panelDoneAnimatingStream=new et.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,qe.P)(()=>{const gn=this.options;return gn?gn.changes.pipe((0,mt.O)(gn),(0,pt.w)(()=>(0,$e.T)(...gn.map(ji=>ji.onSelectionChange)))):this._ngZone.onStable.pipe((0,wt.q)(1),(0,pt.w)(()=>this.optionSelectionChanges))}),this.openedChange=new Z.vpe,this._openedStream=this.openedChange.pipe((0,tn.h)(gn=>gn),(0,Zt.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,tn.h)(gn=>!gn),(0,Zt.U)(()=>{})),this.selectionChange=new Z.vpe,this.valueChange=new Z.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=mn?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=mn.typeaheadDebounceInterval),this._scrollStrategyFactory=ln,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(ct)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(Y){this._placeholder=Y,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Le.kI.required)??!1}set required(Y){this._required=(0,Ue.Ig)(Y),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(Y){this._multiple=(0,Ue.Ig)(Y)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(Y){this._disableOptionCentering=(0,Ue.Ig)(Y)}get compareWith(){return this._compareWith}set compareWith(Y){this._compareWith=Y,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(Y){this._assignValue(Y)&&this._onChange(Y)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(Y){this._typeaheadDebounceInterval=(0,Ue.su)(Y)}get id(){return this._id}set id(Y){this._id=Y||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new je.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,bt.x)(),(0,Re.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Re.R)(this._destroy)).subscribe(Y=>{Y.added.forEach(te=>te.select()),Y.removed.forEach(te=>te.deselect())}),this.options.changes.pipe((0,mt.O)(null),(0,Re.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const Y=this._getTriggerAriaLabelledby(),te=this.ngControl;if(Y!==this._triggerAriaLabelledBy){const Se=this._elementRef.nativeElement;this._triggerAriaLabelledBy=Y,Y?Se.setAttribute("aria-labelledby",Y):Se.removeAttribute("aria-labelledby")}te&&(this._previousControl!==te.control&&(void 0!==this._previousControl&&null!==te.disabled&&te.disabled!==this.disabled&&(this.disabled=te.disabled),this._previousControl=te.control),this.updateErrorState())}ngOnChanges(Y){(Y.disabled||Y.userAriaDescribedBy)&&this.stateChanges.next(),Y.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(Y){this._assignValue(Y)}registerOnChange(Y){this._onChange=Y}registerOnTouched(Y){this._onTouched=Y}setDisabledState(Y){this.disabled=Y,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const Y=this._selectionModel.selected.map(te=>te.viewValue);return this._isRtl()&&Y.reverse(),Y.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(Y){this.disabled||(this.panelOpen?this._handleOpenKeydown(Y):this._handleClosedKeydown(Y))}_handleClosedKeydown(Y){const te=Y.keyCode,Se=te===Je.JH||te===Je.LH||te===Je.oh||te===Je.SV,Ke=te===Je.K5||te===Je.L_,me=this._keyManager;if(!me.isTyping()&&Ke&&!(0,Je.Vb)(Y)||(this.multiple||Y.altKey)&&Se)Y.preventDefault(),this.open();else if(!this.multiple){const ye=this.selected;me.onKeydown(Y);const he=this.selected;he&&ye!==he&&this._liveAnnouncer.announce(he.viewValue,1e4)}}_handleOpenKeydown(Y){const te=this._keyManager,Se=Y.keyCode,Ke=Se===Je.JH||Se===Je.LH,me=te.isTyping();if(Ke&&Y.altKey)Y.preventDefault(),this.close();else if(me||Se!==Je.K5&&Se!==Je.L_||!te.activeItem||(0,Je.Vb)(Y))if(!me&&this._multiple&&Se===Je.A&&Y.ctrlKey){Y.preventDefault();const ye=this.options.some(he=>!he.disabled&&!he.selected);this.options.forEach(he=>{he.disabled||(ye?he.select():he.deselect())})}else{const ye=te.activeItemIndex;te.onKeydown(Y),this._multiple&&Ke&&Y.shiftKey&&te.activeItem&&te.activeItemIndex!==ye&&te.activeItem._selectViaInteraction()}else Y.preventDefault(),te.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,wt.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(Y){if(this._selectionModel.selected.forEach(te=>te.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&Y)Array.isArray(Y),Y.forEach(te=>this._selectOptionByValue(te)),this._sortValues();else{const te=this._selectOptionByValue(Y);te?this._keyManager.updateActiveItem(te):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(Y){const te=this.options.find(Se=>{if(this._selectionModel.isSelected(Se))return!1;try{return null!=Se.value&&this._compareWith(Se.value,Y)}catch{return!1}});return te&&this._selectionModel.select(te),te}_assignValue(Y){return!!(Y!==this._value||this._multiple&&Array.isArray(Y))&&(this.options&&this._setSelectionByValue(Y),this._value=Y,!0)}_initKeyManager(){this._keyManager=new Ze.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,Re.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,Re.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const Y=(0,$e.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Re.R)(Y)).subscribe(te=>{this._onSelect(te.source,te.isUserInput),te.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,$e.T)(...this.options.map(te=>te._stateChanges)).pipe((0,Re.R)(Y)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(Y,te){const Se=this._selectionModel.isSelected(Y);null!=Y.value||this._multiple?(Se!==Y.selected&&(Y.selected?this._selectionModel.select(Y):this._selectionModel.deselect(Y)),te&&this._keyManager.setActiveItem(Y),this.multiple&&(this._sortValues(),te&&this.focus())):(Y.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(Y.value)),Se!==this._selectionModel.isSelected(Y)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const Y=this.options.toArray();this._selectionModel.sort((te,Se)=>this.sortComparator?this.sortComparator(te,Se,Y):Y.indexOf(te)-Y.indexOf(Se)),this.stateChanges.next()}}_propagateChanges(Y){let te=null;te=this.multiple?this.selected.map(Se=>Se.value):this.selected?this.selected.value:Y,this._value=te,this.valueChange.emit(te),this._onChange(te),this.selectionChange.emit(this._getChangeEvent(te)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(Y){this._elementRef.nativeElement.focus(Y)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const Y=this._parentFormField?.getLabelId();return this.ariaLabelledby?(Y?Y+" ":"")+this.ariaLabelledby:Y}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const Y=this._parentFormField?.getLabelId();let te=(Y?Y+" ":"")+this._valueId;return this.ariaLabelledby&&(te+=" "+this.ariaLabelledby),te}_panelDoneAnimating(Y){this.openedChange.emit(Y)}setDescribedByIds(Y){Y.length?this._elementRef.nativeElement.setAttribute("aria-describedby",Y.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Rn.\u0275fac=function(Y){return new(Y||Rn)(Z.Y36(_e.rL),Z.Y36(Z.sBO),Z.Y36(Z.R0b),Z.Y36(g.rD),Z.Y36(Z.SBq),Z.Y36(Ae.Is,8),Z.Y36(Le.F,8),Z.Y36(Le.sg,8),Z.Y36(Ge.G_,8),Z.Y36(Le.a5,10),Z.$8M("tabindex"),Z.Y36(Mt),Z.Y36(Ze.Kd),Z.Y36(Qt,8))},Rn.\u0275dir=Z.lG2({type:Rn,viewQuery:function(Y,te){if(1&Y&&(Z.Gf(It,5),Z.Gf(At,5),Z.Gf(T.pI,5)),2&Y){let Se;Z.iGM(Se=Z.CRH())&&(te.trigger=Se.first),Z.iGM(Se=Z.CRH())&&(te.panel=Se.first),Z.iGM(Se=Z.CRH())&&(te._overlayDir=Se.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Z.qOj,Z.TTD]}),Rn})(),yi=(()=>{class Rn extends _i{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(Y,te,Se){const Ke=this._getItemHeight();return Math.min(Math.max(0,Ke*Y-te+Ke/2),Se)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Re.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,wt.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(Y){const te=(0,g.CB)(Y,this.options,this.optionGroups),Se=this._getItemHeight();this.panel.nativeElement.scrollTop=0===Y&&1===te?0:(0,g.jH)((Y+te)*Se,Se,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(Y){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(Y)}_getChangeEvent(Y){return new Vn(this,Y)}_calculateOverlayOffsetX(){const Y=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),te=this._viewportRuler.getViewportSize(),Se=this._isRtl(),Ke=this.multiple?56:32;let me;if(this.multiple)me=40;else if(this.disableOptionCentering)me=16;else{let ge=this._selectionModel.selected[0]||this.options.first;me=ge&&ge.group?32:16}Se||(me*=-1);const ye=0-(Y.left+me-(Se?Ke:0)),he=Y.right+me-te.width+(Se?0:Ke);ye>0?me+=ye+8:he>0&&(me-=he+8),this._overlayDir.offsetX=Math.round(me),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(Y,te,Se){const Ke=this._getItemHeight(),me=(Ke-this._triggerRect.height)/2,ye=Math.floor(256/Ke);let he;return this.disableOptionCentering?0:(he=0===this._scrollTop?Y*Ke:this._scrollTop===Se?(Y-(this._getItemCount()-ye))*Ke+(Ke-(this._getItemCount()*Ke-256)%Ke):te-Ke/2,Math.round(-1*he-me))}_checkOverlayWithinViewport(Y){const te=this._getItemHeight(),Se=this._viewportRuler.getViewportSize(),Ke=this._triggerRect.top-8,me=Se.height-this._triggerRect.bottom-8,ye=Math.abs(this._offsetY),ge=Math.min(this._getItemCount()*te,256)-ye-this._triggerRect.height;ge>me?this._adjustPanelUp(ge,me):ye>Ke?this._adjustPanelDown(ye,Ke,Y):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(Y,te){const Se=Math.round(Y-te);this._scrollTop-=Se,this._offsetY-=Se,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(Y,te,Se){const Ke=Math.round(Y-te);if(this._scrollTop+=Ke,this._offsetY+=Ke,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=Se)return this._scrollTop=Se,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const Y=this._getItemHeight(),te=this._getItemCount(),Se=Math.min(te*Y,256),me=te*Y-Se;let ye;ye=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),ye+=(0,g.CB)(ye,this.options,this.optionGroups);const he=Se/2;this._scrollTop=this._calculateOverlayScroll(ye,he,me),this._offsetY=this._calculateOverlayOffsetY(ye,he,me),this._checkOverlayWithinViewport(me)}_getOriginBasedOnOption(){const Y=this._getItemHeight(),te=(Y-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-te+Y/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return Rn.\u0275fac=function(){let Xe;return function(te){return(Xe||(Xe=Z.n5z(Rn)))(te||Rn)}}(),Rn.\u0275cmp=Z.Xpm({type:Rn,selectors:[["mat-select"]],contentQueries:function(Y,te,Se){if(1&Y&&(Z.Suo(Se,pi,5),Z.Suo(Se,g.ey,5),Z.Suo(Se,g.K7,5)),2&Y){let Ke;Z.iGM(Ke=Z.CRH())&&(te.customTrigger=Ke.first),Z.iGM(Ke=Z.CRH())&&(te.options=Ke),Z.iGM(Ke=Z.CRH())&&(te.optionGroups=Ke)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(Y,te){1&Y&&Z.NdJ("keydown",function(Ke){return te._handleKeydown(Ke)})("focus",function(){return te._onFocus()})("blur",function(){return te._onBlur()}),2&Y&&(Z.uIk("id",te.id)("tabindex",te.tabIndex)("aria-controls",te.panelOpen?te.id+"-panel":null)("aria-expanded",te.panelOpen)("aria-label",te.ariaLabel||null)("aria-required",te.required.toString())("aria-disabled",te.disabled.toString())("aria-invalid",te.errorState)("aria-activedescendant",te._getAriaActiveDescendant()),Z.ekj("mat-select-disabled",te.disabled)("mat-select-invalid",te.errorState)("mat-select-required",te.required)("mat-select-empty",te.empty)("mat-select-multiple",te.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Z._Bn([{provide:Ge.Eo,useExisting:Rn},{provide:g.HF,useExisting:Rn}]),Z.qOj],ngContentSelectors:Yt,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(Y,te){if(1&Y&&(Z.F$t(_t),Z.TgZ(0,"div",0,1),Z.NdJ("click",function(){return te.toggle()}),Z.TgZ(3,"div",2),Z.YNc(4,kt,2,1,"span",3),Z.YNc(5,at,3,2,"span",4),Z.qZA(),Z.TgZ(6,"div",5),Z._UZ(7,"div",6),Z.qZA()(),Z.YNc(8,xt,4,14,"ng-template",7),Z.NdJ("backdropClick",function(){return te.close()})("attach",function(){return te._onAttached()})("detach",function(){return te.close()})),2&Y){const Se=Z.MAs(1);Z.uIk("aria-owns",te.panelOpen?te.id+"-panel":null),Z.xp6(3),Z.Q6J("ngSwitch",te.empty),Z.uIk("id",te._valueId),Z.xp6(1),Z.Q6J("ngSwitchCase",!0),Z.xp6(1),Z.Q6J("ngSwitchCase",!1),Z.xp6(3),Z.Q6J("cdkConnectedOverlayPanelClass",te._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",te._scrollStrategy)("cdkConnectedOverlayOrigin",Se)("cdkConnectedOverlayOpen",te.panelOpen)("cdkConnectedOverlayPositions",te._positions)("cdkConnectedOverlayMinWidth",null==te._triggerRect?null:te._triggerRect.width)("cdkConnectedOverlayOffsetY",te._offsetY)}},dependencies:[l.mk,l.RF,l.n9,l.ED,T.pI,T.xu],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[qt.transformPanelWrap,qt.transformPanel]},changeDetection:0}),Rn})(),un=(()=>{class Rn{}return Rn.\u0275fac=function(Y){return new(Y||Rn)},Rn.\u0275mod=Z.oAB({type:Rn}),Rn.\u0275inj=Z.cJS({providers:[xn],imports:[l.ez,T.U8,g.Ng,g.BQ,_e.ZD,Ge.lN,g.Ng,g.BQ]}),Rn})()},3683:(sn,ut,j)=>{"use strict";j.d(ut,{Ye:()=>Ue,g0:()=>Je});var T=j(4650),l=j(3238),Z=j(3353),g=j(6895);const Ge=["*",[["mat-toolbar-row"]]],_e=["*","mat-toolbar-row"],Ze=(0,l.pj)(class{constructor(Le){this._elementRef=Le}});let Ae=(()=>{class Le{}return Le.\u0275fac=function(qe){return new(qe||Le)},Le.\u0275dir=T.lG2({type:Le,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),Le})(),Ue=(()=>{class Le extends Ze{constructor(qe,$e,mt){super(qe),this._platform=$e,this._document=mt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return Le.\u0275fac=function(qe){return new(qe||Le)(T.Y36(T.SBq),T.Y36(Z.t4),T.Y36(g.K0))},Le.\u0275cmp=T.Xpm({type:Le,selectors:[["mat-toolbar"]],contentQueries:function(qe,$e,mt){if(1&qe&&T.Suo(mt,Ae,5),2&qe){let pt;T.iGM(pt=T.CRH())&&($e._toolbarRows=pt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(qe,$e){2&qe&&T.ekj("mat-toolbar-multiple-rows",$e._toolbarRows.length>0)("mat-toolbar-single-row",0===$e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[T.qOj],ngContentSelectors:_e,decls:2,vars:0,template:function(qe,$e){1&qe&&(T.F$t(Ge),T.Hsn(0),T.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),Le})(),Je=(()=>{class Le{}return Le.\u0275fac=function(qe){return new(qe||Le)},Le.\u0275mod=T.oAB({type:Le}),Le.\u0275inj=T.cJS({imports:[l.BQ,l.BQ]}),Le})()},1481:(sn,ut,j)=>{"use strict";j.d(ut,{Dx:()=>me,H7:()=>nn,b2:()=>Xe,q6:()=>_i,se:()=>_t});var T=j(6895),l=j(4650);class Z extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class g extends Z{static makeCurrent(){(0,T.HT)(new g)}onAndCancel(Ne,Te,ot){return Ne.addEventListener(Te,ot,!1),()=>{Ne.removeEventListener(Te,ot,!1)}}dispatchEvent(Ne,Te){Ne.dispatchEvent(Te)}remove(Ne){Ne.parentNode&&Ne.parentNode.removeChild(Ne)}createElement(Ne,Te){return(Te=Te||this.getDefaultDocument()).createElement(Ne)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ne){return Ne.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ne){return Ne instanceof DocumentFragment}getGlobalEventTarget(Ne,Te){return"window"===Te?window:"document"===Te?Ne:"body"===Te?Ne.body:null}getBaseHref(Ne){const Te=function _e(){return Ge=Ge||document.querySelector("base"),Ge?Ge.getAttribute("href"):null}();return null==Te?null:function Ae(Fe){Ze=Ze||document.createElement("a"),Ze.setAttribute("href",Fe);const Ne=Ze.pathname;return"/"===Ne.charAt(0)?Ne:`/${Ne}`}(Te)}resetBaseElement(){Ge=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ne){return(0,T.Mx)(document.cookie,Ne)}}let Ze,Ge=null;const Ue=new l.OlP("TRANSITION_ID"),Je=[{provide:l.ip1,useFactory:function je(Fe,Ne,Te){return()=>{Te.get(l.CZH).donePromise.then(()=>{const ot=(0,T.q)(),St=Ne.querySelectorAll(`style[ng-transition="${Fe}"]`);for(let rn=0;rn<St.length;rn++)ot.remove(St[rn])})}},deps:[Ue,T.K0,l.zs3],multi:!0}];let et=(()=>{class Fe{build(){return new XMLHttpRequest}}return Fe.\u0275fac=function(Te){return new(Te||Fe)},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const qe=new l.OlP("EventManagerPlugins");let $e=(()=>{class Fe{constructor(Te,ot){this._zone=ot,this._eventNameToPlugin=new Map,Te.forEach(St=>St.manager=this),this._plugins=Te.slice().reverse()}addEventListener(Te,ot,St){return this._findPluginFor(ot).addEventListener(Te,ot,St)}addGlobalEventListener(Te,ot,St){return this._findPluginFor(ot).addGlobalEventListener(Te,ot,St)}getZone(){return this._zone}_findPluginFor(Te){const ot=this._eventNameToPlugin.get(Te);if(ot)return ot;const St=this._plugins;for(let rn=0;rn<St.length;rn++){const Ln=St[rn];if(Ln.supports(Te))return this._eventNameToPlugin.set(Te,Ln),Ln}throw new Error(`No event manager plugin found for event ${Te}`)}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(qe),l.LFG(l.R0b))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();class mt{constructor(Ne){this._doc=Ne}addGlobalEventListener(Ne,Te,ot){const St=(0,T.q)().getGlobalEventTarget(this._doc,Ne);if(!St)throw new Error(`Unsupported event target ${St} for event ${Te}`);return this.addEventListener(St,Te,ot)}}let pt=(()=>{class Fe{constructor(){this._stylesSet=new Set}addStyles(Te){const ot=new Set;Te.forEach(St=>{this._stylesSet.has(St)||(this._stylesSet.add(St),ot.add(St))}),this.onStylesAdded(ot)}onStylesAdded(Te){}getAllStyles(){return Array.from(this._stylesSet)}}return Fe.\u0275fac=function(Te){return new(Te||Fe)},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})(),wt=(()=>{class Fe extends pt{constructor(Te){super(),this._doc=Te,this._hostNodes=new Map,this._hostNodes.set(Te.head,[])}_addStylesToHost(Te,ot,St){Te.forEach(rn=>{const Ln=this._doc.createElement("style");Ln.textContent=rn,St.push(ot.appendChild(Ln))})}addHost(Te){const ot=[];this._addStylesToHost(this._stylesSet,Te,ot),this._hostNodes.set(Te,ot)}removeHost(Te){const ot=this._hostNodes.get(Te);ot&&ot.forEach(tn),this._hostNodes.delete(Te)}onStylesAdded(Te){this._hostNodes.forEach((ot,St)=>{this._addStylesToHost(Te,St,ot)})}ngOnDestroy(){this._hostNodes.forEach(Te=>Te.forEach(tn))}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(T.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();function tn(Fe){(0,T.q)().remove(Fe)}const Zt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bt=/%COMP%/g;function nt(Fe,Ne,Te){for(let ot=0;ot<Ne.length;ot++){let St=Ne[ot];Array.isArray(St)?nt(Fe,St,Te):(St=St.replace(bt,Fe),Te.push(St))}return Te}function at(Fe){return Ne=>{if("__ngUnwrap__"===Ne)return Fe;!1===Fe(Ne)&&(Ne.preventDefault(),Ne.returnValue=!1)}}let _t=(()=>{class Fe{constructor(Te,ot,St){this.eventManager=Te,this.sharedStylesHost=ot,this.appId=St,this.rendererByCompId=new Map,this.defaultRenderer=new Yt(Te)}createRenderer(Te,ot){if(!Te||!ot)return this.defaultRenderer;switch(ot.encapsulation){case l.ifc.Emulated:{let St=this.rendererByCompId.get(ot.id);return St||(St=new hi(this.eventManager,this.sharedStylesHost,ot,this.appId),this.rendererByCompId.set(ot.id,St)),St.applyToHost(Te),St}case 1:case l.ifc.ShadowDom:return new Xt(this.eventManager,this.sharedStylesHost,Te,ot);default:if(!this.rendererByCompId.has(ot.id)){const St=nt(ot.id,ot.styles,[]);this.sharedStylesHost.addStyles(St),this.rendererByCompId.set(ot.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG($e),l.LFG(wt),l.LFG(l.AFp))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();class Yt{constructor(Ne){this.eventManager=Ne,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ne,Te){return Te?document.createElementNS(Zt[Te]||Te,Ne):document.createElement(Ne)}createComment(Ne){return document.createComment(Ne)}createText(Ne){return document.createTextNode(Ne)}appendChild(Ne,Te){(Jn(Ne)?Ne.content:Ne).appendChild(Te)}insertBefore(Ne,Te,ot){Ne&&(Jn(Ne)?Ne.content:Ne).insertBefore(Te,ot)}removeChild(Ne,Te){Ne&&Ne.removeChild(Te)}selectRootElement(Ne,Te){let ot="string"==typeof Ne?document.querySelector(Ne):Ne;if(!ot)throw new Error(`The selector "${Ne}" did not match any elements`);return Te||(ot.textContent=""),ot}parentNode(Ne){return Ne.parentNode}nextSibling(Ne){return Ne.nextSibling}setAttribute(Ne,Te,ot,St){if(St){Te=St+":"+Te;const rn=Zt[St];rn?Ne.setAttributeNS(rn,Te,ot):Ne.setAttribute(Te,ot)}else Ne.setAttribute(Te,ot)}removeAttribute(Ne,Te,ot){if(ot){const St=Zt[ot];St?Ne.removeAttributeNS(St,Te):Ne.removeAttribute(`${ot}:${Te}`)}else Ne.removeAttribute(Te)}addClass(Ne,Te){Ne.classList.add(Te)}removeClass(Ne,Te){Ne.classList.remove(Te)}setStyle(Ne,Te,ot,St){St&(l.JOm.DashCase|l.JOm.Important)?Ne.style.setProperty(Te,ot,St&l.JOm.Important?"important":""):Ne.style[Te]=ot}removeStyle(Ne,Te,ot){ot&l.JOm.DashCase?Ne.style.removeProperty(Te):Ne.style[Te]=""}setProperty(Ne,Te,ot){Ne[Te]=ot}setValue(Ne,Te){Ne.nodeValue=Te}listen(Ne,Te,ot){return"string"==typeof Ne?this.eventManager.addGlobalEventListener(Ne,Te,at(ot)):this.eventManager.addEventListener(Ne,Te,at(ot))}}function Jn(Fe){return"TEMPLATE"===Fe.tagName&&void 0!==Fe.content}class hi extends Yt{constructor(Ne,Te,ot,St){super(Ne),this.component=ot;const rn=nt(St+"-"+ot.id,ot.styles,[]);Te.addStyles(rn),this.contentAttr=function kt(Fe){return"_ngcontent-%COMP%".replace(bt,Fe)}(St+"-"+ot.id),this.hostAttr=function jt(Fe){return"_nghost-%COMP%".replace(bt,Fe)}(St+"-"+ot.id)}applyToHost(Ne){super.setAttribute(Ne,this.hostAttr,"")}createElement(Ne,Te){const ot=super.createElement(Ne,Te);return super.setAttribute(ot,this.contentAttr,""),ot}}class Xt extends Yt{constructor(Ne,Te,ot,St){super(Ne),this.sharedStylesHost=Te,this.hostEl=ot,this.shadowRoot=ot.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const rn=nt(St.id,St.styles,[]);for(let Ln=0;Ln<rn.length;Ln++){const Bn=document.createElement("style");Bn.textContent=rn[Ln],this.shadowRoot.appendChild(Bn)}}nodeOrShadowRoot(Ne){return Ne===this.hostEl?this.shadowRoot:Ne}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ne,Te){return super.appendChild(this.nodeOrShadowRoot(Ne),Te)}insertBefore(Ne,Te,ot){return super.insertBefore(this.nodeOrShadowRoot(Ne),Te,ot)}removeChild(Ne,Te){return super.removeChild(this.nodeOrShadowRoot(Ne),Te)}parentNode(Ne){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ne)))}}let ui=(()=>{class Fe extends mt{constructor(Te){super(Te)}supports(Te){return!0}addEventListener(Te,ot,St){return Te.addEventListener(ot,St,!1),()=>this.removeEventListener(Te,ot,St)}removeEventListener(Te,ot,St){return Te.removeEventListener(ot,St)}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(T.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const Xn=["alt","control","meta","shift"],ai={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},an={alt:Fe=>Fe.altKey,control:Fe=>Fe.ctrlKey,meta:Fe=>Fe.metaKey,shift:Fe=>Fe.shiftKey};let hn=(()=>{class Fe extends mt{constructor(Te){super(Te)}supports(Te){return null!=Fe.parseEventName(Te)}addEventListener(Te,ot,St){const rn=Fe.parseEventName(ot),Ln=Fe.eventCallback(rn.fullKey,St,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(Te,rn.domEventName,Ln))}static parseEventName(Te){const ot=Te.toLowerCase().split("."),St=ot.shift();if(0===ot.length||"keydown"!==St&&"keyup"!==St)return null;const rn=Fe._normalizeKey(ot.pop());let Ln="",Bn=ot.indexOf("code");if(Bn>-1&&(ot.splice(Bn,1),Ln="code."),Xn.forEach(Qo=>{const ri=ot.indexOf(Qo);ri>-1&&(ot.splice(ri,1),Ln+=Qo+".")}),Ln+=rn,0!=ot.length||0===rn.length)return null;const Ji={};return Ji.domEventName=St,Ji.fullKey=Ln,Ji}static matchEventFullKeyCode(Te,ot){let St=ai[Te.key]||Te.key,rn="";return ot.indexOf("code.")>-1&&(St=Te.code,rn="code."),!(null==St||!St)&&(St=St.toLowerCase()," "===St?St="space":"."===St&&(St="dot"),Xn.forEach(Ln=>{Ln!==St&&(0,an[Ln])(Te)&&(rn+=Ln+".")}),rn+=St,rn===ot)}static eventCallback(Te,ot,St){return rn=>{Fe.matchEventFullKeyCode(rn,Te)&&St.runGuarded(()=>ot(rn))}}static _normalizeKey(Te){return"esc"===Te?"escape":Te}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(T.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const _i=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:T.bD},{provide:l.g9A,useValue:function Vn(){g.makeCurrent()},multi:!0},{provide:T.K0,useFactory:function pi(){return(0,l.RDi)(document),document},deps:[]}]),yi=new l.OlP(""),un=[{provide:l.rWj,useClass:class Le{addToWindow(Ne){l.dqk.getAngularTestability=(ot,St=!0)=>{const rn=Ne.findTestabilityInTree(ot,St);if(null==rn)throw new Error("Could not find testability for element.");return rn},l.dqk.getAllAngularTestabilities=()=>Ne.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>Ne.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(ot=>{const St=l.dqk.getAllAngularTestabilities();let rn=St.length,Ln=!1;const Bn=function(Ji){Ln=Ln||Ji,rn--,0==rn&&ot(Ln)};St.forEach(function(Ji){Ji.whenStable(Bn)})})}findTestabilityInTree(Ne,Te,ot){return null==Te?null:Ne.getTestability(Te)??(ot?(0,T.q)().isShadowRoot(Te)?this.findTestabilityInTree(Ne,Te.host,!0):this.findTestabilityInTree(Ne,Te.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Rn=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Qn(){return new l.qLn},deps:[]},{provide:qe,useClass:ui,multi:!0,deps:[T.K0,l.R0b,l.Lbi]},{provide:qe,useClass:hn,multi:!0,deps:[T.K0]},{provide:_t,useClass:_t,deps:[$e,wt,l.AFp]},{provide:l.FYo,useExisting:_t},{provide:pt,useExisting:wt},{provide:wt,useClass:wt,deps:[T.K0]},{provide:$e,useClass:$e,deps:[qe,l.R0b]},{provide:T.JF,useClass:et,deps:[]},[]];let Xe=(()=>{class Fe{constructor(Te){}static withServerTransition(Te){return{ngModule:Fe,providers:[{provide:l.AFp,useValue:Te.appId},{provide:Ue,useExisting:l.AFp},Je]}}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(yi,12))},Fe.\u0275mod=l.oAB({type:Fe}),Fe.\u0275inj=l.cJS({providers:[...Rn,...un],imports:[T.ez,l.hGG]}),Fe})(),me=(()=>{class Fe{constructor(Te){this._doc=Te}getTitle(){return this._doc.title}setTitle(Te){this._doc.title=Te||""}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(T.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:function(Te){let ot=null;return ot=Te?new Te:function Ke(){return new me((0,l.LFG)(T.K0))}(),ot},providedIn:"root"}),Fe})();typeof window<"u"&&window;let nn=(()=>{class Fe{}return Fe.\u0275fac=function(Te){return new(Te||Fe)},Fe.\u0275prov=l.Yz7({token:Fe,factory:function(Te){let ot=null;return ot=Te?new(Te||Fe):l.LFG(on),ot},providedIn:"root"}),Fe})(),on=(()=>{class Fe extends nn{constructor(Te){super(),this._doc=Te}sanitize(Te,ot){if(null==ot)return null;switch(Te){case l.q3G.NONE:return ot;case l.q3G.HTML:return(0,l.qzn)(ot,"HTML")?(0,l.z3N)(ot):(0,l.EiD)(this._doc,String(ot)).toString();case l.q3G.STYLE:return(0,l.qzn)(ot,"Style")?(0,l.z3N)(ot):ot;case l.q3G.SCRIPT:if((0,l.qzn)(ot,"Script"))return(0,l.z3N)(ot);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(ot,"URL")?(0,l.z3N)(ot):(0,l.mCW)(String(ot));case l.q3G.RESOURCE_URL:if((0,l.qzn)(ot,"ResourceURL"))return(0,l.z3N)(ot);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Te} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Te){return(0,l.JVY)(Te)}bypassSecurityTrustStyle(Te){return(0,l.L6k)(Te)}bypassSecurityTrustScript(Te){return(0,l.eBb)(Te)}bypassSecurityTrustUrl(Te){return(0,l.LAX)(Te)}bypassSecurityTrustResourceUrl(Te){return(0,l.pB0)(Te)}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(T.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:function(Te){let ot=null;return ot=Te?new Te:function dn(Fe){return new on(Fe.get(T.K0))}(l.LFG(l.zs3)),ot},providedIn:"root"}),Fe})()},2510:(sn,ut,j)=>{"use strict";j.d(ut,{gz:()=>vo,F0:()=>Fr,Od:()=>Ur,yS:()=>zl,Bz:()=>m,lC:()=>ns});var T=j(4650),l=j(2076),Z=j(9646),g=j(1135),Ge=j(6805),_e=j(9841),Ze=j(7272),Ae=j(9770),Ue=j(9635),je=j(2843),Je=j(9751),Le=j(515),et=j(727),qe=j(4482),$e=j(5403);function mt(){return(0,qe.e)((E,S)=>{let C=null;E._refCount++;const A=(0,$e.x)(S,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(C=null);const R=E._connection,ee=C;C=null,R&&(!ee||R===ee)&&R.unsubscribe(),S.unsubscribe()});E.subscribe(A),A.closed||(C=E.connect())})}class pt extends Je.y{constructor(S,C){super(),this.source=S,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,qe.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new et.w0;const C=this.getSubject();S.add(this.source.subscribe((0,$e.x)(C,void 0,()=>{this._teardown(),C.complete()},A=>{this._teardown(),C.error(A)},()=>this._teardown()))),S.closed&&(this._connection=null,S=et.w0.EMPTY)}return S}refCount(){return mt()(this)}}var wt=j(7579),tn=j(6895),Zt=j(4004),bt=j(3900),Re=j(5698),ze=j(8675),It=j(9300),At=j(5577),kt=j(590),jt=j(4351),nt=j(8505),at=j(262);function xt(E,S,C,A,R){return(ee,fe)=>{let oe=C,Oe=S,tt=0;ee.subscribe((0,$e.x)(fe,Et=>{const vt=tt++;Oe=oe?E(Oe,Et,vt):(oe=!0,Et),A&&fe.next(Oe)},R&&(()=>{oe&&fe.next(Oe),fe.complete()})))}}function _t(E,S){return(0,qe.e)(xt(E,S,arguments.length>=2,!0))}function Yt(E){return E<=0?()=>Le.E:(0,qe.e)((S,C)=>{let A=[];S.subscribe((0,$e.x)(C,R=>{A.push(R),E<A.length&&A.shift()},()=>{for(const R of A)C.next(R);C.complete()},void 0,()=>{A=null}))})}var qt=j(8068),On=j(6590),Jn=j(4671);function hi(E,S){const C=arguments.length>=2;return A=>A.pipe(E?(0,It.h)((R,ee)=>E(R,ee,A)):Jn.y,Yt(1),C?(0,On.d)(S):(0,qt.T)(()=>new Ge.K))}var Xt=j(2529),ui=j(9718),Xn=j(8746),ai=j(8189),an=j(1481);const hn="primary",dt=Symbol("RouteTitle");class Mt{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const C=this.params[S];return Array.isArray(C)?C[0]:C}return null}getAll(S){if(this.has(S)){const C=this.params[S];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function Kt(E){return new Mt(E)}function Qt(E,S,C){const A=C.path.split("/");if(A.length>E.length||"full"===C.pathMatch&&(S.hasChildren()||A.length<E.length))return null;const R={};for(let ee=0;ee<A.length;ee++){const fe=A[ee],oe=E[ee];if(fe.startsWith(":"))R[fe.substring(1)]=oe;else if(fe!==oe.path)return null}return{consumed:E.slice(0,A.length),posParams:R}}function Vn(E,S){const C=E?Object.keys(E):void 0,A=S?Object.keys(S):void 0;if(!C||!A||C.length!=A.length)return!1;let R;for(let ee=0;ee<C.length;ee++)if(R=C[ee],!Qn(E[R],S[R]))return!1;return!0}function Qn(E,S){if(Array.isArray(E)&&Array.isArray(S)){if(E.length!==S.length)return!1;const C=[...E].sort(),A=[...S].sort();return C.every((R,ee)=>A[ee]===R)}return E===S}function pi(E){return Array.prototype.concat.apply([],E)}function Fi(E){return E.length>0?E[E.length-1]:null}function yi(E,S){for(const C in E)E.hasOwnProperty(C)&&S(E[C],C)}function un(E){return(0,T.CqO)(E)?E:(0,T.QGY)(E)?(0,l.D)(Promise.resolve(E)):(0,Z.of)(E)}const Y={exact:function me(E,S,C){if(!mn(E.segments,S.segments)||!Pe(E.segments,S.segments,C)||E.numberOfChildren!==S.numberOfChildren)return!1;for(const A in S.children)if(!E.children[A]||!me(E.children[A],S.children[A],C))return!1;return!0},subset:he},te={exact:function Ke(E,S){return Vn(E,S)},subset:function ye(E,S){return Object.keys(S).length<=Object.keys(E).length&&Object.keys(S).every(C=>Qn(E[C],S[C]))},ignored:()=>!0};function Se(E,S,C){return Y[C.paths](E.root,S.root,C.matrixParams)&&te[C.queryParams](E.queryParams,S.queryParams)&&!("exact"===C.fragment&&E.fragment!==S.fragment)}function he(E,S,C){return ge(E,S,S.segments,C)}function ge(E,S,C,A){if(E.segments.length>C.length){const R=E.segments.slice(0,C.length);return!(!mn(R,C)||S.hasChildren()||!Pe(R,C,A))}if(E.segments.length===C.length){if(!mn(E.segments,C)||!Pe(E.segments,C,A))return!1;for(const R in S.children)if(!E.children[R]||!he(E.children[R],S.children[R],A))return!1;return!0}{const R=C.slice(0,E.segments.length),ee=C.slice(E.segments.length);return!!(mn(E.segments,R)&&Pe(E.segments,R,A)&&E.children[hn])&&ge(E.children[hn],S,ee,A)}}function Pe(E,S,C){return S.every((A,R)=>te[C](E[R].parameters,A.parameters))}class rt{constructor(S,C,A){this.root=S,this.queryParams=C,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kt(this.queryParams)),this._queryParamMap}toString(){return ft.serialize(this)}}class ct{constructor(S,C){this.segments=S,this.children=C,this.parent=null,yi(C,(A,R)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ie(this)}}class ln{constructor(S,C){this.path=S,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=Kt(this.parameters)),this._parameterMap}toString(){return Ie(this)}}function mn(E,S){return E.length===S.length&&E.every((C,A)=>C.path===S[A].path)}let ji=(()=>{class E{}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=T.Yz7({token:E,factory:function(){return new Lt},providedIn:"root"}),E})();class Lt{parse(S){const C=new Fe(S);return new rt(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(S){const C=`/${V(S.root,!0)}`,A=function Ft(E){const S=Object.keys(E).map(C=>{const A=E[C];return Array.isArray(A)?A.map(R=>`${$(C)}=${$(R)}`).join("&"):`${$(C)}=${$(A)}`}).filter(C=>!!C);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${C}${A}${"string"==typeof S.fragment?`#${function X(E){return encodeURI(E)}(S.fragment)}`:""}`}}const ft=new Lt;function ie(E){return E.segments.map(S=>Ie(S)).join("/")}function V(E,S){if(!E.hasChildren())return ie(E);if(S){const C=E.children[hn]?V(E.children[hn],!1):"",A=[];return yi(E.children,(R,ee)=>{ee!==hn&&A.push(`${ee}:${V(R,!1)}`)}),A.length>0?`${C}(${A.join("//")})`:C}{const C=function gn(E,S){let C=[];return yi(E.children,(A,R)=>{R===hn&&(C=C.concat(S(A,R)))}),yi(E.children,(A,R)=>{R!==hn&&(C=C.concat(S(A,R)))}),C}(E,(A,R)=>R===hn?[V(E.children[hn],!1)]:[`${R}:${V(A,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[hn]?`${ie(E)}/${C[0]}`:`${ie(E)}/(${C.join("//")})`}}function U(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $(E){return U(E).replace(/%3B/gi,";")}function ce(E){return U(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ce(E){return decodeURIComponent(E)}function ke(E){return Ce(E.replace(/\+/g,"%20"))}function Ie(E){return`${ce(E.path)}${function Qe(E){return Object.keys(E).map(S=>`;${ce(S)}=${ce(E[S])}`).join("")}(E.parameters)}`}const yt=/^[^\/()?;=#]+/;function Pt(E){const S=E.match(yt);return S?S[0]:""}const nn=/^[^=?&#]+/,on=/^[^&#]+/;class Fe{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ct([],{}):new ct([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(S.length>0||Object.keys(C).length>0)&&(A[hn]=new ct(S,C)),A}parseSegment(){const S=Pt(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new T.vHH(4009,!1);return this.capture(S),new ln(Ce(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const C=Pt(this.remaining);if(!C)return;this.capture(C);let A="";if(this.consumeOptional("=")){const R=Pt(this.remaining);R&&(A=R,this.capture(A))}S[Ce(C)]=Ce(A)}parseQueryParam(S){const C=function dn(E){const S=E.match(nn);return S?S[0]:""}(this.remaining);if(!C)return;this.capture(C);let A="";if(this.consumeOptional("=")){const fe=function cn(E){const S=E.match(on);return S?S[0]:""}(this.remaining);fe&&(A=fe,this.capture(A))}const R=ke(C),ee=ke(A);if(S.hasOwnProperty(R)){let fe=S[R];Array.isArray(fe)||(fe=[fe],S[R]=fe),fe.push(ee)}else S[R]=ee}parseParens(S){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Pt(this.remaining),R=this.remaining[A.length];if("/"!==R&&")"!==R&&";"!==R)throw new T.vHH(4010,!1);let ee;A.indexOf(":")>-1?(ee=A.slice(0,A.indexOf(":")),this.capture(ee),this.capture(":")):S&&(ee=hn);const fe=this.parseChildren();C[ee]=1===Object.keys(fe).length?fe[hn]:new ct([],fe),this.consumeOptional("//")}return C}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new T.vHH(4011,!1)}}function Ne(E){return E.segments.length>0?new ct([],{[hn]:E}):E}function Te(E){const S={};for(const A of Object.keys(E.children)){const ee=Te(E.children[A]);(ee.segments.length>0||ee.hasChildren())&&(S[A]=ee)}return function ot(E){if(1===E.numberOfChildren&&E.children[hn]){const S=E.children[hn];return new ct(E.segments.concat(S.segments),S.children)}return E}(new ct(E.segments,S))}function St(E){return E instanceof rt}function Qo(E,S,C,A,R){if(0===C.length)return Xr(S.root,S.root,S.root,A,R);const ee=function _r(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new ao(!0,0,E);let S=0,C=!1;const A=E.reduce((R,ee,fe)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const oe={};return yi(ee.outlets,(Oe,tt)=>{oe[tt]="string"==typeof Oe?Oe.split("/"):Oe}),[...R,{outlets:oe}]}if(ee.segmentPath)return[...R,ee.segmentPath]}return"string"!=typeof ee?[...R,ee]:0===fe?(ee.split("/").forEach((oe,Oe)=>{0==Oe&&"."===oe||(0==Oe&&""===oe?C=!0:".."===oe?S++:""!=oe&&R.push(oe))}),R):[...R,ee]},[]);return new ao(C,S,A)}(C);return ee.toRoot()?Xr(S.root,S.root,new ct([],{}),A,R):function fe(Oe){const tt=function lo(E,S,C,A){if(E.isAbsolute)return new yr(S.root,!0,0);if(-1===A)return new yr(C,C===S.root,0);return function Vo(E,S,C){let A=E,R=S,ee=C;for(;ee>R;){if(ee-=R,A=A.parent,!A)throw new T.vHH(4005,!1);R=A.segments.length}return new yr(A,!1,R-ee)}(C,A+(ri(E.commands[0])?0:1),E.numberOfDoubleDots)}(ee,S,E.snapshot?._urlSegment,Oe),Et=tt.processChildren?Nr(tt.segmentGroup,tt.index,ee.commands):mi(tt.segmentGroup,tt.index,ee.commands);return Xr(S.root,tt.segmentGroup,Et,A,R)}(E.snapshot?._lastPathIndex)}function ri(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function Qi(E){return"object"==typeof E&&null!=E&&E.outlets}function Xr(E,S,C,A,R){let fe,ee={};A&&yi(A,(Oe,tt)=>{ee[tt]=Array.isArray(Oe)?Oe.map(Et=>`${Et}`):`${Oe}`}),fe=E===S?C:so(E,S,C);const oe=Ne(Te(fe));return new rt(oe,ee,R)}function so(E,S,C){const A={};return yi(E.children,(R,ee)=>{A[ee]=R===S?C:so(R,S,C)}),new ct(E.segments,A)}class ao{constructor(S,C,A){if(this.isAbsolute=S,this.numberOfDoubleDots=C,this.commands=A,S&&A.length>0&&ri(A[0]))throw new T.vHH(4003,!1);const R=A.find(Qi);if(R&&R!==Fi(A))throw new T.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yr{constructor(S,C,A){this.segmentGroup=S,this.processChildren=C,this.index=A}}function mi(E,S,C){if(E||(E=new ct([],{})),0===E.segments.length&&E.hasChildren())return Nr(E,S,C);const A=function cs(E,S,C){let A=0,R=S;const ee={match:!1,pathIndex:0,commandIndex:0};for(;R<E.segments.length;){if(A>=C.length)return ee;const fe=E.segments[R],oe=C[A];if(Qi(oe))break;const Oe=`${oe}`,tt=A<C.length-1?C[A+1]:null;if(R>0&&void 0===Oe)break;if(Oe&&tt&&"object"==typeof tt&&void 0===tt.outlets){if(!Rr(Oe,tt,fe))return ee;A+=2}else{if(!Rr(Oe,{},fe))return ee;A++}R++}return{match:!0,pathIndex:R,commandIndex:A}}(E,S,C),R=C.slice(A.commandIndex);if(A.match&&A.pathIndex<E.segments.length){const ee=new ct(E.segments.slice(0,A.pathIndex),{});return ee.children[hn]=new ct(E.segments.slice(A.pathIndex),E.children),Nr(ee,0,R)}return A.match&&0===R.length?new ct(E.segments,{}):A.match&&!E.hasChildren()?Br(E,S,C):A.match?Nr(E,0,R):Br(E,S,C)}function Nr(E,S,C){if(0===C.length)return new ct(E.segments,{});{const A=function Er(E){return Qi(E[0])?E[0].outlets:{[hn]:E}}(C),R={};return yi(A,(ee,fe)=>{"string"==typeof ee&&(ee=[ee]),null!==ee&&(R[fe]=mi(E.children[fe],S,ee))}),yi(E.children,(ee,fe)=>{void 0===A[fe]&&(R[fe]=ee)}),new ct(E.segments,R)}}function Br(E,S,C){const A=E.segments.slice(0,S);let R=0;for(;R<C.length;){const ee=C[R];if(Qi(ee)){const Oe=Pi(ee.outlets);return new ct(A,Oe)}if(0===R&&ri(C[0])){A.push(new ln(E.segments[S].path,Gr(C[0]))),R++;continue}const fe=Qi(ee)?ee.outlets[hn]:`${ee}`,oe=R<C.length-1?C[R+1]:null;fe&&oe&&ri(oe)?(A.push(new ln(fe,Gr(oe))),R+=2):(A.push(new ln(fe,{})),R++)}return new ct(A,{})}function Pi(E){const S={};return yi(E,(C,A)=>{"string"==typeof C&&(C=[C]),null!==C&&(S[A]=Br(new ct([],{}),0,C))}),S}function Gr(E){const S={};return yi(E,(C,A)=>S[A]=`${C}`),S}function Rr(E,S,C){return E==C.path&&Vn(S,C.parameters)}class Ii{constructor(S,C){this.id=S,this.url=C}}class Zn extends Ii{constructor(S,C,A="imperative",R=null){super(S,C),this.type=0,this.navigationTrigger=A,this.restoredState=R}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lr extends Ii{constructor(S,C,A){super(S,C),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cr extends Ii{constructor(S,C,A,R){super(S,C),this.reason=A,this.code=R,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class br extends Ii{constructor(S,C,A,R){super(S,C),this.error=A,this.target=R,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hs extends Ii{constructor(S,C,A,R){super(S,C),this.urlAfterRedirects=A,this.state=R,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $s extends Ii{constructor(S,C,A,R){super(S,C),this.urlAfterRedirects=A,this.state=R,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class us extends Ii{constructor(S,C,A,R,ee){super(S,C),this.urlAfterRedirects=A,this.state=R,this.shouldActivate=ee,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jr extends Ii{constructor(S,C,A,R){super(S,C),this.urlAfterRedirects=A,this.state=R,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zr extends Ii{constructor(S,C,A,R){super(S,C),this.urlAfterRedirects=A,this.state=R,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pa{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class es{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fa{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mc{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class co{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pl{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ol{constructor(S,C,A){this.routerEvent=S,this.position=C,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Gs{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const C=this.pathFromRoot(S);return C.length>1?C[C.length-2]:null}children(S){const C=Ia(S,this._root);return C?C.children.map(A=>A.value):[]}firstChild(S){const C=Ia(S,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(S){const C=Cs(S,this._root);return C.length<2?[]:C[C.length-2].children.map(R=>R.value).filter(R=>R!==S)}pathFromRoot(S){return Cs(S,this._root).map(C=>C.value)}}function Ia(E,S){if(E===S.value)return S;for(const C of S.children){const A=Ia(E,C);if(A)return A}return null}function Cs(E,S){if(E===S.value)return[S];for(const C of S.children){const A=Cs(E,C);if(A.length)return A.unshift(S),A}return[]}class Co{constructor(S,C){this.value=S,this.children=C}toString(){return`TreeNode(${this.value})`}}function Io(E){const S={};return E&&E.children.forEach(C=>S[C.value.outlet]=C),S}class Za extends Gs{constructor(S,C){super(S),this.snapshot=C,Ms(this,S)}toString(){return this.snapshot.toString()}}function Aa(E,S){const C=function Zs(E,S){const fe=new Ws([],{},{},"",{},hn,S,null,E.root,-1,{});return new Ds("",new Co(fe,[]))}(E,S),A=new g.X([new ln("",{})]),R=new g.X({}),ee=new g.X({}),fe=new g.X({}),oe=new g.X(""),Oe=new vo(A,R,fe,oe,ee,hn,S,C.root);return Oe.snapshot=C.root,new Za(new Co(Oe,[]),C)}class vo{constructor(S,C,A,R,ee,fe,oe,Oe){this.url=S,this.params=C,this.queryParams=A,this.fragment=R,this.data=ee,this.outlet=fe,this.component=oe,this.title=this.data?.pipe((0,Zt.U)(tt=>tt[dt]))??(0,Z.of)(void 0),this._futureSnapshot=Oe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Zt.U)(S=>Kt(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Zt.U)(S=>Kt(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zr(E,S="emptyOnly"){const C=E.pathFromRoot;let A=0;if("always"!==S)for(A=C.length-1;A>=1;){const R=C[A],ee=C[A-1];if(R.routeConfig&&""===R.routeConfig.path)A--;else{if(ee.component)break;A--}}return function Es(E){return E.reduce((S,C)=>({params:{...S.params,...C.params},data:{...S.data,...C.data},resolve:{...C.data,...S.resolve,...C.routeConfig?.data,...C._resolvedData}}),{params:{},data:{},resolve:{}})}(C.slice(A))}class Ws{constructor(S,C,A,R,ee,fe,oe,Oe,tt,Et,vt,Ut){this.url=S,this.params=C,this.queryParams=A,this.fragment=R,this.data=ee,this.outlet=fe,this.component=oe,this.title=this.data?.[dt],this.routeConfig=Oe,this._urlSegment=tt,this._lastPathIndex=Et,this._correctedLastPathIndex=Ut??Et,this._resolve=vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ds extends Gs{constructor(S,C){super(C),this.url=S,Ms(this,C)}toString(){return uo(this._root)}}function Ms(E,S){S.value._routerState=E,S.children.forEach(C=>Ms(E,C))}function uo(E){const S=E.children.length>0?` { ${E.children.map(uo).join(", ")} } `:"";return`${E.value}${S}`}function ts(E){if(E.snapshot){const S=E.snapshot,C=E._futureSnapshot;E.snapshot=C,Vn(S.queryParams,C.queryParams)||E.queryParams.next(C.queryParams),S.fragment!==C.fragment&&E.fragment.next(C.fragment),Vn(S.params,C.params)||E.params.next(C.params),function xn(E,S){if(E.length!==S.length)return!1;for(let C=0;C<E.length;++C)if(!Vn(E[C],S[C]))return!1;return!0}(S.url,C.url)||E.url.next(C.url),Vn(S.data,C.data)||E.data.next(C.data)}else E.snapshot=E._futureSnapshot,E.data.next(E._futureSnapshot.data)}function ds(E,S){const C=Vn(E.params,S.params)&&function Rt(E,S){return mn(E,S)&&E.every((C,A)=>Vn(C.parameters,S[A].parameters))}(E.url,S.url);return C&&!(!E.parent!=!S.parent)&&(!E.parent||ds(E.parent,S.parent))}function Dr(E,S,C){if(C&&E.shouldReuseRoute(S.value,C.value.snapshot)){const A=C.value;A._futureSnapshot=S.value;const R=function Vr(E,S,C){return S.children.map(A=>{for(const R of C.children)if(E.shouldReuseRoute(A.value,R.value.snapshot))return Dr(E,A,R);return Dr(E,A)})}(E,S,C);return new Co(A,R)}{if(E.shouldAttach(S.value)){const ee=E.retrieve(S.value);if(null!==ee){const fe=ee.route;return fe.value._futureSnapshot=S.value,fe.children=S.children.map(oe=>Dr(E,oe)),fe}}const A=function Pa(E){return new vo(new g.X(E.url),new g.X(E.params),new g.X(E.queryParams),new g.X(E.fragment),new g.X(E.data),E.outlet,E.component,E)}(S.value),R=S.children.map(ee=>Dr(E,ee));return new Co(A,R)}}const qs="ngNavigationCancelingError";function Ks(E,S){const{redirectTo:C,navigationBehaviorOptions:A}=St(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,R=hs(!1,0,S);return R.url=C,R.navigationBehaviorOptions=A,R}function hs(E,S,C){const A=new Error("NavigationCancelingError: "+(E||""));return A[qs]=!0,A.cancellationCode=S,C&&(A.url=C),A}function Wa(E){return Lr(E)&&St(E.url)}function Lr(E){return E&&E[qs]}class Ys{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ps,this.attachRef=null}}let ps=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(C,A){const R=this.getOrCreateContext(C);R.outlet=A,this.contexts.set(C,R)}onChildOutletDestroyed(C){const A=this.getContext(C);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let A=this.getContext(C);return A||(A=new Ys,this.contexts.set(C,A)),A}getContext(C){return this.contexts.get(C)||null}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const Ao=!1;let ns=(()=>{class E{constructor(C,A,R,ee,fe){this.parentContexts=C,this.location=A,this.changeDetector=ee,this.environmentInjector=fe,this.activated=null,this._activatedRoute=null,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.name=R||hn,C.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const C=this.parentContexts.getContext(this.name);C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.vHH(4012,Ao);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.vHH(4012,Ao);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.vHH(4012,Ao);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,A){this.activated=C,this._activatedRoute=A,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,A){if(this.isActivated)throw new T.vHH(4013,Ao);this._activatedRoute=C;const R=this.location,fe=C._futureSnapshot.component,oe=this.parentContexts.getOrCreateContext(this.name).children,Oe=new tc(C,oe,R.injector);if(A&&function Wi(E){return!!E.resolveComponentFactory}(A)){const tt=A.resolveComponentFactory(fe);this.activated=R.createComponent(tt,R.length,Oe)}else this.activated=R.createComponent(fe,{index:R.length,injector:Oe,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return E.\u0275fac=function(C){return new(C||E)(T.Y36(ps),T.Y36(T.s_b),T.$8M("name"),T.Y36(T.sBO),T.Y36(T.lqb))},E.\u0275dir=T.lG2({type:E,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),E})();class tc{constructor(S,C,A){this.route=S,this.childContexts=C,this.parent=A}get(S,C){return S===vo?this.route:S===ps?this.childContexts:this.parent.get(S,C)}}let qa=(()=>{class E{}return E.\u0275fac=function(C){return new(C||E)},E.\u0275cmp=T.Xpm({type:E,selectors:[["ng-component"]],standalone:!0,features:[T.jDz],decls:1,vars:0,template:function(C,A){1&C&&T._UZ(0,"router-outlet")},dependencies:[ns],encapsulation:2}),E})();function Ka(E,S){return E.providers&&!E._injector&&(E._injector=(0,T.MMx)(E.providers,S,`Route: ${E.path}`)),E._injector??S}function Ss(E){const S=E.children&&E.children.map(Ss),C=S?{...E,children:S}:{...E};return!C.component&&!C.loadComponent&&(S||C.loadChildren)&&C.outlet&&C.outlet!==hn&&(C.component=qa),C}function vr(E){return E.outlet||hn}function Ts(E,S){const C=E.filter(A=>vr(A)===S);return C.push(...E.filter(A=>vr(A)!==S)),C}function Uo(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let S=E.parent;S;S=S.parent){const C=S.routeConfig;if(C?._loadedInjector)return C._loadedInjector;if(C?._injector)return C._injector}return null}class _l{constructor(S,C,A,R){this.routeReuseStrategy=S,this.futureState=C,this.currState=A,this.forwardEvent=R}activate(S){const C=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,A,S),ts(this.futureState.root),this.activateChildRoutes(C,A,S)}deactivateChildRoutes(S,C,A){const R=Io(C);S.children.forEach(ee=>{const fe=ee.value.outlet;this.deactivateRoutes(ee,R[fe],A),delete R[fe]}),yi(R,(ee,fe)=>{this.deactivateRouteAndItsChildren(ee,A)})}deactivateRoutes(S,C,A){const R=S.value,ee=C?C.value:null;if(R===ee)if(R.component){const fe=A.getContext(R.outlet);fe&&this.deactivateChildRoutes(S,C,fe.children)}else this.deactivateChildRoutes(S,C,A);else ee&&this.deactivateRouteAndItsChildren(C,A)}deactivateRouteAndItsChildren(S,C){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,C):this.deactivateRouteAndOutlet(S,C)}detachAndStoreRouteSubtree(S,C){const A=C.getContext(S.value.outlet),R=A&&S.value.component?A.children:C,ee=Io(S);for(const fe of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[fe],R);if(A&&A.outlet){const fe=A.outlet.detach(),oe=A.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:fe,route:S,contexts:oe})}}deactivateRouteAndOutlet(S,C){const A=C.getContext(S.value.outlet),R=A&&S.value.component?A.children:C,ee=Io(S);for(const fe of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[fe],R);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(S,C,A){const R=Io(C);S.children.forEach(ee=>{this.activateRoutes(ee,R[ee.value.outlet],A),this.forwardEvent(new Pl(ee.value.snapshot))}),S.children.length&&this.forwardEvent(new Mc(S.value.snapshot))}activateRoutes(S,C,A){const R=S.value,ee=C?C.value:null;if(ts(R),R===ee)if(R.component){const fe=A.getOrCreateContext(R.outlet);this.activateChildRoutes(S,C,fe.children)}else this.activateChildRoutes(S,C,A);else if(R.component){const fe=A.getOrCreateContext(R.outlet);if(this.routeReuseStrategy.shouldAttach(R.snapshot)){const oe=this.routeReuseStrategy.retrieve(R.snapshot);this.routeReuseStrategy.store(R.snapshot,null),fe.children.onOutletReAttached(oe.contexts),fe.attachRef=oe.componentRef,fe.route=oe.route.value,fe.outlet&&fe.outlet.attach(oe.componentRef,oe.route.value),ts(oe.route.value),this.activateChildRoutes(S,null,fe.children)}else{const oe=Uo(R.snapshot),Oe=oe?.get(T._Vd)??null;fe.attachRef=null,fe.route=R,fe.resolver=Oe,fe.injector=oe,fe.outlet&&fe.outlet.activateWith(R,fe.injector),this.activateChildRoutes(S,null,fe.children)}}else this.activateChildRoutes(S,null,A)}}class ma{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class dr{constructor(S,C){this.component=S,this.route=C}}function Is(E,S,C){const A=E._root;return ms(A,S?S._root:null,C,[A.value])}function Ei(E,S){const C=Symbol(),A=S.get(E,C);return A===C?"function"!=typeof E||(0,T.Z0I)(E)?S.get(E):E:A}function ms(E,S,C,A,R={canDeactivateChecks:[],canActivateChecks:[]}){const ee=Io(S);return E.children.forEach(fe=>{(function xr(E,S,C,A,R={canDeactivateChecks:[],canActivateChecks:[]}){const ee=E.value,fe=S?S.value:null,oe=C?C.getContext(E.value.outlet):null;if(fe&&ee.routeConfig===fe.routeConfig){const Oe=function Wt(E,S,C){if("function"==typeof C)return C(E,S);switch(C){case"pathParamsChange":return!mn(E.url,S.url);case"pathParamsOrQueryParamsChange":return!mn(E.url,S.url)||!Vn(E.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ds(E,S)||!Vn(E.queryParams,S.queryParams);default:return!ds(E,S)}}(fe,ee,ee.routeConfig.runGuardsAndResolvers);Oe?R.canActivateChecks.push(new ma(A)):(ee.data=fe.data,ee._resolvedData=fe._resolvedData),ms(E,S,ee.component?oe?oe.children:null:C,A,R),Oe&&oe&&oe.outlet&&oe.outlet.isActivated&&R.canDeactivateChecks.push(new dr(oe.outlet.component,fe))}else fe&&yn(S,oe,R),R.canActivateChecks.push(new ma(A)),ms(E,null,ee.component?oe?oe.children:null:C,A,R)})(fe,ee[fe.value.outlet],C,A.concat([fe.value]),R),delete ee[fe.value.outlet]}),yi(ee,(fe,oe)=>yn(fe,C.getContext(oe),R)),R}function yn(E,S,C){const A=Io(E),R=E.value;yi(A,(ee,fe)=>{yn(ee,R.component?S?S.children.getContext(fe):null:S,C)}),C.canDeactivateChecks.push(new dr(R.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,R))}function Xs(E){return"function"==typeof E}function wr(E){return E instanceof Ge.K||"EmptyError"===E?.name}const ho=Symbol("INITIAL_VALUE");function Mr(){return(0,bt.w)(E=>(0,_e.a)(E.map(S=>S.pipe((0,Re.q)(1),(0,ze.O)(ho)))).pipe((0,Zt.U)(S=>{for(const C of S)if(!0!==C){if(C===ho)return ho;if(!1===C||C instanceof rt)return C}return!0}),(0,It.h)(S=>S!==ho),(0,Re.q)(1)))}function ga(E){return(0,Ue.z)((0,nt.b)(S=>{if(St(S))throw Ks(0,S)}),(0,Zt.U)(S=>!0===S))}const Ja={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qs(E,S,C,A,R){const ee=Cr(E,S,C);return ee.matched?function Js(E,S,C,A){const R=S.canMatch;if(!R||0===R.length)return(0,Z.of)(!0);const ee=R.map(fe=>{const oe=Ei(fe,E);return un(function be(E){return E&&Xs(E.canMatch)}(oe)?oe.canMatch(S,C):E.runInContext(()=>oe(S,C)))});return(0,Z.of)(ee).pipe(Mr(),ga())}(A=Ka(S,A),S,C).pipe((0,Zt.U)(fe=>!0===fe?ee:{...Ja})):(0,Z.of)(ee)}function Cr(E,S,C){if(""===S.path)return"full"===S.pathMatch&&(E.hasChildren()||C.length>0)?{...Ja}:{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const R=(S.matcher||Qt)(C,E,S);if(!R)return{...Ja};const ee={};yi(R.posParams,(oe,Oe)=>{ee[Oe]=oe.path});const fe=R.consumed.length>0?{...ee,...R.consumed[R.consumed.length-1].parameters}:ee;return{matched:!0,consumedSegments:R.consumed,remainingSegments:C.slice(R.consumed.length),parameters:fe,positionalParamSegments:R.posParams??{}}}function gs(E,S,C,A,R="corrected"){if(C.length>0&&function Ra(E,S,C){return C.some(A=>H(E,S,A)&&vr(A)!==hn)}(E,C,A)){const fe=new ct(S,function vl(E,S,C,A){const R={};R[hn]=A,A._sourceSegment=E,A._segmentIndexShift=S.length;for(const ee of C)if(""===ee.path&&vr(ee)!==hn){const fe=new ct([],{});fe._sourceSegment=E,fe._segmentIndexShift=S.length,R[vr(ee)]=fe}return R}(E,S,A,new ct(C,E.children)));return fe._sourceSegment=E,fe._segmentIndexShift=S.length,{segmentGroup:fe,slicedSegments:[]}}if(0===C.length&&function Sr(E,S,C){return C.some(A=>H(E,S,A))}(E,C,A)){const fe=new ct(E.segments,function ko(E,S,C,A,R,ee){const fe={};for(const oe of A)if(H(E,C,oe)&&!R[vr(oe)]){const Oe=new ct([],{});Oe._sourceSegment=E,Oe._segmentIndexShift="legacy"===ee?E.segments.length:S.length,fe[vr(oe)]=Oe}return{...R,...fe}}(E,S,C,A,E.children,R));return fe._sourceSegment=E,fe._segmentIndexShift=S.length,{segmentGroup:fe,slicedSegments:C}}const ee=new ct(E.segments,E.children);return ee._sourceSegment=E,ee._segmentIndexShift=S.length,{segmentGroup:ee,slicedSegments:C}}function H(E,S,C){return(!(E.hasChildren()||S.length>0)||"full"!==C.pathMatch)&&""===C.path}function ue(E,S,C,A){return!!(vr(E)===A||A!==hn&&H(S,C,E))&&("**"===E.path||Cr(S,E,C).matched)}function K(E,S,C){return 0===S.length&&!E.children[C]}const we=!1;class Ye{constructor(S){this.segmentGroup=S||null}}class Ct{constructor(S){this.urlTree=S}}function zt(E){return(0,je._)(new Ye(E))}function kn(E){return(0,je._)(new Ct(E))}class $n{constructor(S,C,A,R,ee){this.injector=S,this.configLoader=C,this.urlSerializer=A,this.urlTree=R,this.config=ee,this.allowRedirects=!0}apply(){const S=gs(this.urlTree.root,[],[],this.config).segmentGroup,C=new ct(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,C,hn).pipe((0,Zt.U)(ee=>this.createUrlTree(Te(ee),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,at.K)(ee=>{if(ee instanceof Ct)return this.allowRedirects=!1,this.match(ee.urlTree);throw ee instanceof Ye?this.noMatchError(ee):ee}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,hn).pipe((0,Zt.U)(R=>this.createUrlTree(Te(R),S.queryParams,S.fragment))).pipe((0,at.K)(R=>{throw R instanceof Ye?this.noMatchError(R):R}))}noMatchError(S){return new T.vHH(4002,we)}createUrlTree(S,C,A){const R=Ne(S);return new rt(R,C,A)}expandSegmentGroup(S,C,A,R){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(S,C,A).pipe((0,Zt.U)(ee=>new ct([],ee))):this.expandSegment(S,A,C,A.segments,R,!0)}expandChildren(S,C,A){const R=[];for(const ee of Object.keys(A.children))"primary"===ee?R.unshift(ee):R.push(ee);return(0,l.D)(R).pipe((0,jt.b)(ee=>{const fe=A.children[ee],oe=Ts(C,ee);return this.expandSegmentGroup(S,oe,fe,ee).pipe((0,Zt.U)(Oe=>({segment:Oe,outlet:ee})))}),_t((ee,fe)=>(ee[fe.outlet]=fe.segment,ee),{}),hi())}expandSegment(S,C,A,R,ee,fe){return(0,l.D)(A).pipe((0,jt.b)(oe=>this.expandSegmentAgainstRoute(S,C,A,oe,R,ee,fe).pipe((0,at.K)(tt=>{if(tt instanceof Ye)return(0,Z.of)(null);throw tt}))),(0,kt.P)(oe=>!!oe),(0,at.K)((oe,Oe)=>{if(wr(oe))return K(C,R,ee)?(0,Z.of)(new ct([],{})):zt(C);throw oe}))}expandSegmentAgainstRoute(S,C,A,R,ee,fe,oe){return ue(R,C,ee,fe)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(S,C,R,ee,fe):oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,C,A,R,ee,fe):zt(C):zt(C)}expandSegmentAgainstRouteUsingRedirect(S,C,A,R,ee,fe){return"**"===R.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,A,R,fe):this.expandRegularSegmentAgainstRouteUsingRedirect(S,C,A,R,ee,fe)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,C,A,R){const ee=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?kn(ee):this.lineralizeSegments(A,ee).pipe((0,At.z)(fe=>{const oe=new ct(fe,{});return this.expandSegment(S,oe,C,fe,R,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,C,A,R,ee,fe){const{matched:oe,consumedSegments:Oe,remainingSegments:tt,positionalParamSegments:Et}=Cr(C,R,ee);if(!oe)return zt(C);const vt=this.applyRedirectCommands(Oe,R.redirectTo,Et);return R.redirectTo.startsWith("/")?kn(vt):this.lineralizeSegments(R,vt).pipe((0,At.z)(Ut=>this.expandSegment(S,C,A,Ut.concat(tt),fe,!1)))}matchSegmentAgainstRoute(S,C,A,R,ee){return"**"===A.path?(S=Ka(A,S),A.loadChildren?(A._loadedRoutes?(0,Z.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(S,A)).pipe((0,Zt.U)(oe=>(A._loadedRoutes=oe.routes,A._loadedInjector=oe.injector,new ct(R,{})))):(0,Z.of)(new ct(R,{}))):Qs(C,A,R,S).pipe((0,bt.w)(({matched:fe,consumedSegments:oe,remainingSegments:Oe})=>fe?this.getChildConfig(S=A._injector??S,A,R).pipe((0,At.z)(Et=>{const vt=Et.injector??S,Ut=Et.routes,{segmentGroup:$t,slicedSegments:pn}=gs(C,oe,Oe,Ut),zn=new ct($t.segments,$t.children);if(0===pn.length&&zn.hasChildren())return this.expandChildren(vt,Ut,zn).pipe((0,Zt.U)(In=>new ct(oe,In)));if(0===Ut.length&&0===pn.length)return(0,Z.of)(new ct(oe,{}));const Gn=vr(A)===ee;return this.expandSegment(vt,zn,Ut,pn,Gn?hn:ee,!0).pipe((0,Zt.U)(qn=>new ct(oe.concat(qn.segments),qn.children)))})):zt(C)))}getChildConfig(S,C,A){return C.children?(0,Z.of)({routes:C.children,injector:S}):C.loadChildren?void 0!==C._loadedRoutes?(0,Z.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):function Tc(E,S,C,A){const R=S.canLoad;if(void 0===R||0===R.length)return(0,Z.of)(!0);const ee=R.map(fe=>{const oe=Ei(fe,E);return un(function gi(E){return E&&Xs(E.canLoad)}(oe)?oe.canLoad(S,C):E.runInContext(()=>oe(S,C)))});return(0,Z.of)(ee).pipe(Mr(),ga())}(S,C,A).pipe((0,At.z)(R=>R?this.configLoader.loadChildren(S,C).pipe((0,nt.b)(ee=>{C._loadedRoutes=ee.routes,C._loadedInjector=ee.injector})):function ni(E){return(0,je._)(hs(we,3))}())):(0,Z.of)({routes:[],injector:S})}lineralizeSegments(S,C){let A=[],R=C.root;for(;;){if(A=A.concat(R.segments),0===R.numberOfChildren)return(0,Z.of)(A);if(R.numberOfChildren>1||!R.children[hn])return(0,je._)(new T.vHH(4e3,we));R=R.children[hn]}}applyRedirectCommands(S,C,A){return this.applyRedirectCreateUrlTree(C,this.urlSerializer.parse(C),S,A)}applyRedirectCreateUrlTree(S,C,A,R){const ee=this.createSegmentGroup(S,C.root,A,R);return new rt(ee,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(S,C){const A={};return yi(S,(R,ee)=>{if("string"==typeof R&&R.startsWith(":")){const oe=R.substring(1);A[ee]=C[oe]}else A[ee]=R}),A}createSegmentGroup(S,C,A,R){const ee=this.createSegments(S,C.segments,A,R);let fe={};return yi(C.children,(oe,Oe)=>{fe[Oe]=this.createSegmentGroup(S,oe,A,R)}),new ct(ee,fe)}createSegments(S,C,A,R){return C.map(ee=>ee.path.startsWith(":")?this.findPosParam(S,ee,R):this.findOrReturn(ee,A))}findPosParam(S,C,A){const R=A[C.path.substring(1)];if(!R)throw new T.vHH(4001,we);return R}findOrReturn(S,C){let A=0;for(const R of C){if(R.path===S.path)return C.splice(A),R;A++}return S}}class bi{}class Ki{constructor(S,C,A,R,ee,fe,oe,Oe){this.injector=S,this.rootComponentType=C,this.config=A,this.urlTree=R,this.url=ee,this.paramsInheritanceStrategy=fe,this.relativeLinkResolution=oe,this.urlSerializer=Oe}recognize(){const S=gs(this.urlTree.root,[],[],this.config.filter(C=>void 0===C.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,hn).pipe((0,Zt.U)(C=>{if(null===C)return null;const A=new Ws([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},hn,this.rootComponentType,null,this.urlTree.root,-1,{}),R=new Co(A,C),ee=new Ds(this.url,R);return this.inheritParamsAndData(ee._root),ee}))}inheritParamsAndData(S){const C=S.value,A=zr(C,this.paramsInheritanceStrategy);C.params=Object.freeze(A.params),C.data=Object.freeze(A.data),S.children.forEach(R=>this.inheritParamsAndData(R))}processSegmentGroup(S,C,A,R){return 0===A.segments.length&&A.hasChildren()?this.processChildren(S,C,A):this.processSegment(S,C,A,A.segments,R)}processChildren(S,C,A){return(0,l.D)(Object.keys(A.children)).pipe((0,jt.b)(R=>{const ee=A.children[R],fe=Ts(C,R);return this.processSegmentGroup(S,fe,ee,R)}),_t((R,ee)=>R&&ee?(R.push(...ee),R):null),(0,Xt.o)(R=>null!==R),(0,On.d)(null),hi(),(0,Zt.U)(R=>{if(null===R)return null;const ee=$o(R);return function Tr(E){E.sort((S,C)=>S.value.outlet===hn?-1:C.value.outlet===hn?1:S.value.outlet.localeCompare(C.value.outlet))}(ee),ee}))}processSegment(S,C,A,R,ee){return(0,l.D)(C).pipe((0,jt.b)(fe=>this.processSegmentAgainstRoute(fe._injector??S,fe,A,R,ee)),(0,kt.P)(fe=>!!fe),(0,at.K)(fe=>{if(wr(fe))return K(A,R,ee)?(0,Z.of)([]):(0,Z.of)(null);throw fe}))}processSegmentAgainstRoute(S,C,A,R,ee){if(C.redirectTo||!ue(C,A,R,ee))return(0,Z.of)(null);let fe;if("**"===C.path){const oe=R.length>0?Fi(R).parameters:{},Oe=bl(A)+R.length,tt=new Ws(R,oe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qa(C),vr(C),C.component??C._loadedComponent??null,C,La(A),Oe,_a(C),Oe);fe=(0,Z.of)({snapshot:tt,consumedSegments:[],remainingSegments:[]})}else fe=Qs(A,C,R,S).pipe((0,Zt.U)(({matched:oe,consumedSegments:Oe,remainingSegments:tt,parameters:Et})=>{if(!oe)return null;const vt=bl(A)+Oe.length;return{snapshot:new Ws(Oe,Et,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qa(C),vr(C),C.component??C._loadedComponent??null,C,La(A),vt,_a(C),vt),consumedSegments:Oe,remainingSegments:tt}}));return fe.pipe((0,bt.w)(oe=>{if(null===oe)return(0,Z.of)(null);const{snapshot:Oe,consumedSegments:tt,remainingSegments:Et}=oe;S=C._injector??S;const vt=C._loadedInjector??S,Ut=function Ho(E){return E.children?E.children:E.loadChildren?E._loadedRoutes:[]}(C),{segmentGroup:$t,slicedSegments:pn}=gs(A,tt,Et,Ut.filter(Gn=>void 0===Gn.redirectTo),this.relativeLinkResolution);if(0===pn.length&&$t.hasChildren())return this.processChildren(vt,Ut,$t).pipe((0,Zt.U)(Gn=>null===Gn?null:[new Co(Oe,Gn)]));if(0===Ut.length&&0===pn.length)return(0,Z.of)([new Co(Oe,[])]);const zn=vr(C)===ee;return this.processSegment(vt,Ut,$t,pn,zn?hn:ee).pipe((0,Zt.U)(Gn=>null===Gn?null:[new Co(Oe,Gn)]))}))}}function Ir(E){const S=E.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function $o(E){const S=[],C=new Set;for(const A of E){if(!Ir(A)){S.push(A);continue}const R=S.find(ee=>A.value.routeConfig===ee.value.routeConfig);void 0!==R?(R.children.push(...A.children),C.add(R)):S.push(A)}for(const A of C){const R=$o(A.children);S.push(new Co(A.value,R))}return S.filter(A=>!C.has(A))}function La(E){let S=E;for(;S._sourceSegment;)S=S._sourceSegment;return S}function bl(E){let S=E,C=S._segmentIndexShift??0;for(;S._sourceSegment;)S=S._sourceSegment,C+=S._segmentIndexShift??0;return C-1}function Qa(E){return E.data||{}}function _a(E){return E.resolve||{}}function xl(E){return"string"==typeof E.title||null===E.title}function _s(E){return(0,bt.w)(S=>{const C=E(S);return C?(0,l.D)(C).pipe((0,Zt.U)(()=>S)):(0,Z.of)(S)})}let wl=(()=>{class E{buildTitle(C){let A,R=C.root;for(;void 0!==R;)A=this.getResolvedTitleForRoute(R)??A,R=R.children.find(ee=>ee.outlet===hn);return A}getResolvedTitleForRoute(C){return C.data[dt]}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=T.Yz7({token:E,factory:function(){return(0,T.f3M)(Os)},providedIn:"root"}),E})(),Os=(()=>{class E extends wl{constructor(C){super(),this.title=C}updateTitle(C){const A=this.buildTitle(C);void 0!==A&&this.title.setTitle(A)}}return E.\u0275fac=function(C){return new(C||E)(T.LFG(an.Dx))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();class el{}class ic extends class Qc{shouldDetach(S){return!1}store(S,C){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,C){return S.routeConfig===C.routeConfig}}{}const tl=new T.OlP("",{providedIn:"root",factory:()=>({})}),Fl=new T.OlP("ROUTES");let qr=(()=>{class E{constructor(C,A){this.injector=C,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return(0,Z.of)(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const A=un(C.loadComponent()).pipe((0,nt.b)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=ee}),(0,Xn.x)(()=>{this.componentLoaders.delete(C)})),R=new pt(A,()=>new wt.x).pipe(mt());return this.componentLoaders.set(C,R),R}loadChildren(C,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,Z.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const ee=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,Zt.U)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(A);let Oe,tt,Et=!1;Array.isArray(oe)?tt=oe:(Oe=oe.create(C).injector,tt=pi(Oe.get(Fl,[],T.XFs.Self|T.XFs.Optional)));return{routes:tt.map(Ss),injector:Oe}}),(0,Xn.x)(()=>{this.childrenLoaders.delete(A)})),fe=new pt(ee,()=>new wt.x).pipe(mt());return this.childrenLoaders.set(A,fe),fe}loadModuleFactoryOrRoutes(C){return un(C()).pipe((0,At.z)(A=>A instanceof T.YKP||Array.isArray(A)?(0,Z.of)(A):(0,l.D)(this.compiler.compileModuleAsync(A))))}}return E.\u0275fac=function(C){return new(C||E)(T.LFG(T.zs3),T.LFG(T.Sil))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();class ea{}class oc{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,C){return S}}function Na(E){throw E}function Nl(E,S,C){return S.parse("/")}const sc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},os={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function di(){const E=(0,T.f3M)(ji),S=(0,T.f3M)(ps),C=(0,T.f3M)(tn.Ye),A=(0,T.f3M)(T.zs3),R=(0,T.f3M)(T.Sil),ee=(0,T.f3M)(Fl,{optional:!0})??[],fe=(0,T.f3M)(tl,{optional:!0})??{},oe=(0,T.f3M)(Os),Oe=(0,T.f3M)(wl,{optional:!0}),tt=(0,T.f3M)(ea,{optional:!0}),Et=(0,T.f3M)(el,{optional:!0}),vt=new Fr(null,E,S,C,A,R,pi(ee));return tt&&(vt.urlHandlingStrategy=tt),Et&&(vt.routeReuseStrategy=Et),vt.titleStrategy=Oe??oe,function hr(E,S){E.errorHandler&&(S.errorHandler=E.errorHandler),E.malformedUriErrorHandler&&(S.malformedUriErrorHandler=E.malformedUriErrorHandler),E.onSameUrlNavigation&&(S.onSameUrlNavigation=E.onSameUrlNavigation),E.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=E.paramsInheritanceStrategy),E.relativeLinkResolution&&(S.relativeLinkResolution=E.relativeLinkResolution),E.urlUpdateStrategy&&(S.urlUpdateStrategy=E.urlUpdateStrategy),E.canceledNavigationResolution&&(S.canceledNavigationResolution=E.canceledNavigationResolution)}(fe,vt),vt}let Fr=(()=>{class E{constructor(C,A,R,ee,fe,oe,Oe){this.rootComponentType=C,this.urlSerializer=A,this.rootContexts=R,this.location=ee,this.config=Oe,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new wt.x,this.errorHandler=Na,this.malformedUriErrorHandler=Nl,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,Z.of)(void 0),this.urlHandlingStrategy=new oc,this.routeReuseStrategy=new ic,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=fe.get(qr),this.configLoader.onLoadEndListener=Ut=>this.triggerEvent(new es(Ut)),this.configLoader.onLoadStartListener=Ut=>this.triggerEvent(new pa(Ut)),this.ngModule=fe.get(T.h0i),this.console=fe.get(T.c2e);const vt=fe.get(T.R0b);this.isNgZoneEnabled=vt instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(Oe),this.currentUrlTree=function Xe(){return new rt(new ct([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Aa(this.currentUrlTree,this.rootComponentType),this.transitions=new g.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(C){const A=this.events;return C.pipe((0,It.h)(R=>0!==R.id),(0,Zt.U)(R=>({...R,extractedUrl:this.urlHandlingStrategy.extract(R.rawUrl)})),(0,bt.w)(R=>{let ee=!1,fe=!1;return(0,Z.of)(R).pipe((0,nt.b)(oe=>{this.currentNavigation={id:oe.id,initialUrl:oe.rawUrl,extractedUrl:oe.extractedUrl,trigger:oe.source,extras:oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,bt.w)(oe=>{const Oe=this.browserUrlTree.toString(),tt=!this.navigated||oe.extractedUrl.toString()!==Oe||Oe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||tt)&&this.urlHandlingStrategy.shouldProcessUrl(oe.rawUrl))return Ba(oe.source)&&(this.browserUrlTree=oe.extractedUrl),(0,Z.of)(oe).pipe((0,bt.w)(vt=>{const Ut=this.transitions.getValue();return A.next(new Zn(vt.id,this.serializeUrl(vt.extractedUrl),vt.source,vt.restoredState)),Ut!==this.transitions.getValue()?Le.E:Promise.resolve(vt)}),function tr(E,S,C,A){return(0,bt.w)(R=>function vi(E,S,C,A,R){return new $n(E,S,C,A,R).apply()}(E,S,C,R.extractedUrl,A).pipe((0,Zt.U)(ee=>({...R,urlAfterRedirects:ee}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,nt.b)(vt=>{this.currentNavigation={...this.currentNavigation,finalUrl:vt.urlAfterRedirects},R.urlAfterRedirects=vt.urlAfterRedirects}),function Tn(E,S,C,A,R,ee){return(0,At.z)(fe=>function Wr(E,S,C,A,R,ee,fe="emptyOnly",oe="legacy"){return new Ki(E,S,C,A,R,fe,oe,ee).recognize().pipe((0,bt.w)(Oe=>null===Oe?function Qr(E){return new Je.y(S=>S.error(E))}(new bi):(0,Z.of)(Oe)))}(E,S,C,fe.urlAfterRedirects,A.serialize(fe.urlAfterRedirects),A,R,ee).pipe((0,Zt.U)(oe=>({...fe,targetSnapshot:oe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,nt.b)(vt=>{if(R.targetSnapshot=vt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!vt.extras.skipLocationChange){const $t=this.urlHandlingStrategy.merge(vt.urlAfterRedirects,vt.rawUrl);this.setBrowserUrl($t,vt)}this.browserUrlTree=vt.urlAfterRedirects}const Ut=new Hs(vt.id,this.serializeUrl(vt.extractedUrl),this.serializeUrl(vt.urlAfterRedirects),vt.targetSnapshot);A.next(Ut)}));if(tt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ut,extractedUrl:$t,source:pn,restoredState:zn,extras:Gn}=oe,Sn=new Zn(Ut,this.serializeUrl($t),pn,zn);A.next(Sn);const qn=Aa($t,this.rootComponentType).snapshot;return R={...oe,targetSnapshot:qn,urlAfterRedirects:$t,extras:{...Gn,skipLocationChange:!1,replaceUrl:!1}},(0,Z.of)(R)}return this.rawUrlTree=oe.rawUrl,oe.resolve(null),Le.E}),(0,nt.b)(oe=>{const Oe=new $s(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot);this.triggerEvent(Oe)}),(0,Zt.U)(oe=>R={...oe,guards:Is(oe.targetSnapshot,oe.currentSnapshot,this.rootContexts)}),function qi(E,S){return(0,At.z)(C=>{const{targetSnapshot:A,currentSnapshot:R,guards:{canActivateChecks:ee,canDeactivateChecks:fe}}=C;return 0===fe.length&&0===ee.length?(0,Z.of)({...C,guardsResult:!0}):function jo(E,S,C,A){return(0,l.D)(E).pipe((0,At.z)(R=>function Sc(E,S,C,A,R){const ee=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,Z.of)(!0);const fe=ee.map(oe=>{const Oe=Uo(S)??R,tt=Ei(oe,Oe);return un(function q(E){return E&&Xs(E.canDeactivate)}(tt)?tt.canDeactivate(E,S,C,A):Oe.runInContext(()=>tt(E,S,C,A))).pipe((0,kt.P)())});return(0,Z.of)(fe).pipe(Mr())}(R.component,R.route,C,S,A)),(0,kt.P)(R=>!0!==R,!0))}(fe,A,R,E).pipe((0,At.z)(oe=>oe&&function er(E){return"boolean"==typeof E}(oe)?function ka(E,S,C,A){return(0,l.D)(S).pipe((0,jt.b)(R=>(0,Ze.z)(function As(E,S){return null!==E&&S&&S(new fa(E)),(0,Z.of)(!0)}(R.route.parent,A),function Xa(E,S){return null!==E&&S&&S(new co(E)),(0,Z.of)(!0)}(R.route,A),function Ll(E,S,C){const A=S[S.length-1],ee=S.slice(0,S.length-1).reverse().map(fe=>function yl(E){const S=E.routeConfig?E.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:E,guards:S}:null}(fe)).filter(fe=>null!==fe).map(fe=>(0,Ae.P)(()=>{const oe=fe.guards.map(Oe=>{const tt=Uo(fe.node)??C,Et=Ei(Oe,tt);return un(function Q(E){return E&&Xs(E.canActivateChild)}(Et)?Et.canActivateChild(A,E):tt.runInContext(()=>Et(A,E))).pipe((0,kt.P)())});return(0,Z.of)(oe).pipe(Mr())}));return(0,Z.of)(ee).pipe(Mr())}(E,R.path,C),function Rl(E,S,C){const A=S.routeConfig?S.routeConfig.canActivate:null;if(!A||0===A.length)return(0,Z.of)(!0);const R=A.map(ee=>(0,Ae.P)(()=>{const fe=Uo(S)??C,oe=Ei(ee,fe);return un(function ne(E){return E&&Xs(E.canActivate)}(oe)?oe.canActivate(S,E):fe.runInContext(()=>oe(S,E))).pipe((0,kt.P)())}));return(0,Z.of)(R).pipe(Mr())}(E,R.route,C))),(0,kt.P)(R=>!0!==R,!0))}(A,ee,E,S):(0,Z.of)(oe)),(0,Zt.U)(oe=>({...C,guardsResult:oe})))})}(this.ngModule.injector,oe=>this.triggerEvent(oe)),(0,nt.b)(oe=>{if(R.guardsResult=oe.guardsResult,St(oe.guardsResult))throw Ks(0,oe.guardsResult);const Oe=new us(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot,!!oe.guardsResult);this.triggerEvent(Oe)}),(0,It.h)(oe=>!!oe.guardsResult||(this.restoreHistory(oe),this.cancelNavigationTransition(oe,"",3),!1)),_s(oe=>{if(oe.guards.canActivateChecks.length)return(0,Z.of)(oe).pipe((0,nt.b)(Oe=>{const tt=new Jr(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot);this.triggerEvent(tt)}),(0,bt.w)(Oe=>{let tt=!1;return(0,Z.of)(Oe).pipe(function nc(E,S){return(0,At.z)(C=>{const{targetSnapshot:A,guards:{canActivateChecks:R}}=C;if(!R.length)return(0,Z.of)(C);let ee=0;return(0,l.D)(R).pipe((0,jt.b)(fe=>function Fa(E,S,C,A){const R=E.routeConfig,ee=E._resolve;return void 0!==R?.title&&!xl(R)&&(ee[dt]=R.title),function ya(E,S,C,A){const R=function Ps(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===R.length)return(0,Z.of)({});const ee={};return(0,l.D)(R).pipe((0,At.z)(fe=>function bn(E,S,C,A){const R=Uo(S)??A,ee=Ei(E,R);return un(ee.resolve?ee.resolve(S,C):R.runInContext(()=>ee(S,C)))}(E[fe],S,C,A).pipe((0,kt.P)(),(0,nt.b)(oe=>{ee[fe]=oe}))),Yt(1),(0,ui.h)(ee),(0,at.K)(fe=>wr(fe)?Le.E:(0,je._)(fe)))}(ee,E,S,A).pipe((0,Zt.U)(fe=>(E._resolvedData=fe,E.data=zr(E,C).resolve,R&&xl(R)&&(E.data[dt]=R.title),null)))}(fe.route,A,E,S)),(0,nt.b)(()=>ee++),Yt(1),(0,At.z)(fe=>ee===R.length?(0,Z.of)(C):Le.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,nt.b)({next:()=>tt=!0,complete:()=>{tt||(this.restoreHistory(Oe),this.cancelNavigationTransition(Oe,"",2))}}))}),(0,nt.b)(Oe=>{const tt=new Zr(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot);this.triggerEvent(tt)}))}),_s(oe=>{const Oe=tt=>{const Et=[];tt.routeConfig?.loadComponent&&!tt.routeConfig._loadedComponent&&Et.push(this.configLoader.loadComponent(tt.routeConfig).pipe((0,nt.b)(vt=>{tt.component=vt}),(0,Zt.U)(()=>{})));for(const vt of tt.children)Et.push(...Oe(vt));return Et};return(0,_e.a)(Oe(oe.targetSnapshot.root)).pipe((0,On.d)(),(0,Re.q)(1))}),_s(()=>this.afterPreactivation()),(0,Zt.U)(oe=>{const Oe=function Ai(E,S,C){const A=Dr(E,S._root,C?C._root:void 0);return new Za(A,S)}(this.routeReuseStrategy,oe.targetSnapshot,oe.currentRouterState);return R={...oe,targetRouterState:Oe}}),(0,nt.b)(oe=>{this.currentUrlTree=oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(oe.urlAfterRedirects,oe.rawUrl),this.routerState=oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,oe),this.browserUrlTree=oe.urlAfterRedirects)}),((E,S,C)=>(0,Zt.U)(A=>(new _l(S,A.targetRouterState,A.currentRouterState,C).activate(E),A)))(this.rootContexts,this.routeReuseStrategy,oe=>this.triggerEvent(oe)),(0,nt.b)({next(){ee=!0},complete(){ee=!0}}),(0,Xn.x)(()=>{ee||fe||this.cancelNavigationTransition(R,"",1),this.currentNavigation?.id===R.id&&(this.currentNavigation=null)}),(0,at.K)(oe=>{if(fe=!0,Lr(oe)){Wa(oe)||(this.navigated=!0,this.restoreHistory(R,!0));const Oe=new cr(R.id,this.serializeUrl(R.extractedUrl),oe.message,oe.cancellationCode);if(A.next(Oe),Wa(oe)){const tt=this.urlHandlingStrategy.merge(oe.url,this.rawUrlTree),Et={skipLocationChange:R.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ba(R.source)};this.scheduleNavigation(tt,"imperative",null,Et,{resolve:R.resolve,reject:R.reject,promise:R.promise})}else R.resolve(!1)}else{this.restoreHistory(R,!0);const Oe=new br(R.id,this.serializeUrl(R.extractedUrl),oe,R.targetSnapshot??void 0);A.next(Oe);try{R.resolve(this.errorHandler(oe))}catch(tt){R.reject(tt)}}return Le.E}))}))}resetRootComponentType(C){this.rootComponentType=C,this.routerState.root.component=this.rootComponentType}setTransition(C){this.transitions.next({...this.transitions.value,...C})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const A="popstate"===C.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{const R={replaceUrl:!0},ee=C.state?.navigationId?C.state:null;if(ee){const oe={...ee};delete oe.navigationId,delete oe.\u0275routerPageId,0!==Object.keys(oe).length&&(R.state=oe)}const fe=this.parseUrl(C.url);this.scheduleNavigation(fe,A,ee,R)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(C){this.events.next(C)}resetConfig(C){this.config=C.map(Ss),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,A={}){const{relativeTo:R,queryParams:ee,fragment:fe,queryParamsHandling:oe,preserveFragment:Oe}=A,tt=R||this.routerState.root,Et=Oe?this.currentUrlTree.fragment:fe;let vt=null;switch(oe){case"merge":vt={...this.currentUrlTree.queryParams,...ee};break;case"preserve":vt=this.currentUrlTree.queryParams;break;default:vt=ee||null}return null!==vt&&(vt=this.removeEmptyProps(vt)),Qo(tt,this.currentUrlTree,C,vt,Et??null)}navigateByUrl(C,A={skipLocationChange:!1}){const R=St(C)?C:this.parseUrl(C),ee=this.urlHandlingStrategy.merge(R,this.rawUrlTree);return this.scheduleNavigation(ee,"imperative",null,A)}navigate(C,A={skipLocationChange:!1}){return function Bl(E){for(let S=0;S<E.length;S++){if(null==E[S])throw new T.vHH(4008,false)}}(C),this.navigateByUrl(this.createUrlTree(C,A),A)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let A;try{A=this.urlSerializer.parse(C)}catch(R){A=this.malformedUriErrorHandler(R,this.urlSerializer,C)}return A}isActive(C,A){let R;if(R=!0===A?{...sc}:!1===A?{...os}:A,St(C))return Se(this.currentUrlTree,C,R);const ee=this.parseUrl(C);return Se(this.currentUrlTree,ee,R)}removeEmptyProps(C){return Object.keys(C).reduce((A,R)=>{const ee=C[R];return null!=ee&&(A[R]=ee),A},{})}processNavigations(){this.navigations.subscribe(C=>{this.navigated=!0,this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId,this.events.next(new lr(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),C.resolve(!0)},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}scheduleNavigation(C,A,R,ee,fe){if(this.disposed)return Promise.resolve(!1);let oe,Oe,tt;fe?(oe=fe.resolve,Oe=fe.reject,tt=fe.promise):tt=new Promise((Ut,$t)=>{oe=Ut,Oe=$t});const Et=++this.navigationId;let vt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(R=this.location.getState()),vt=R&&R.\u0275routerPageId?R.\u0275routerPageId:ee.replaceUrl||ee.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):vt=0,this.setTransition({id:Et,targetPageId:vt,source:A,restoredState:R,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:C,extras:ee,resolve:oe,reject:Oe,promise:tt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tt.catch(Ut=>Promise.reject(Ut))}setBrowserUrl(C,A){const R=this.urlSerializer.serialize(C),ee={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(R)||A.extras.replaceUrl?this.location.replaceState(R,"",ee):this.location.go(R,"",ee)}restoreHistory(C,A=!1){if("computed"===this.canceledNavigationResolution){const R=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===R?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===R&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(R)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(C,A,R){const ee=new cr(C.id,this.serializeUrl(C.extractedUrl),A,R);this.triggerEvent(ee),C.resolve(!1)}generateNgRouterState(C,A){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:A}:{navigationId:C}}}return E.\u0275fac=function(C){T.$Z()},E.\u0275prov=T.Yz7({token:E,factory:function(){return di()},providedIn:"root"}),E})();function Ba(E){return"imperative"!==E}let ac=(()=>{class E{constructor(C,A,R,ee,fe){this.router=C,this.route=A,this.tabIndexAttribute=R,this.renderer=ee,this.el=fe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new wt.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(C){this._preserveFragment=(0,T.D6c)(C)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(C){this._skipLocationChange=(0,T.D6c)(C)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(C){this._replaceUrl=(0,T.D6c)(C)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(C){if(null!=this.tabIndexAttribute)return;const A=this.renderer,R=this.el.nativeElement;null!==C?A.setAttribute(R,"tabindex",C):A.removeAttribute(R,"tabindex")}ngOnChanges(C){this.onChanges.next(this)}set routerLink(C){null!=C?(this.commands=Array.isArray(C)?C:[C],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return E.\u0275fac=function(C){return new(C||E)(T.Y36(Fr),T.Y36(vo),T.$8M("tabindex"),T.Y36(T.Qsj),T.Y36(T.SBq))},E.\u0275dir=T.lG2({type:E,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(C,A){1&C&&T.NdJ("click",function(){return A.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[T.TTD]}),E})(),zl=(()=>{class E{constructor(C,A,R){this.router=C,this.route=A,this.locationStrategy=R,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new wt.x,this.subscription=C.events.subscribe(ee=>{ee instanceof lr&&this.updateTargetUrlAndHref()})}set preserveFragment(C){this._preserveFragment=(0,T.D6c)(C)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(C){this._skipLocationChange=(0,T.D6c)(C)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(C){this._replaceUrl=(0,T.D6c)(C)}get replaceUrl(){return this._replaceUrl}set routerLink(C){this.commands=null!=C?Array.isArray(C)?C:[C]:null}ngOnChanges(C){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(C,A,R,ee,fe){return!!(0!==C||A||R||ee||fe||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return E.\u0275fac=function(C){return new(C||E)(T.Y36(Fr),T.Y36(vo),T.Y36(tn.S$))},E.\u0275dir=T.lG2({type:E,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(C,A){1&C&&T.NdJ("click",function(ee){return A.onClick(ee.button,ee.ctrlKey,ee.shiftKey,ee.altKey,ee.metaKey)}),2&C&&T.uIk("target",A.target)("href",A.href,T.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[T.TTD]}),E})(),Ur=(()=>{class E{constructor(C,A,R,ee,fe,oe){this.router=C,this.element=A,this.renderer=R,this.cdr=ee,this.link=fe,this.linkWithHref=oe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new T.vpe,this.routerEventsSubscription=C.events.subscribe(Oe=>{Oe instanceof lr&&this.update()})}ngAfterContentInit(){(0,Z.of)(this.links.changes,this.linksWithHrefs.changes,(0,Z.of)(null)).pipe((0,ai.J)()).subscribe(C=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const C=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(A=>!!A).map(A=>A.onChanges);this.linkInputChangesSubscription=(0,l.D)(C).pipe((0,ai.J)()).subscribe(A=>{this.isActive!==this.isLinkActive(this.router)(A)&&this.update()})}set routerLinkActive(C){const A=Array.isArray(C)?C:C.split(" ");this.classes=A.filter(R=>!!R)}ngOnChanges(C){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const C=this.hasActiveLinks();this.isActive!==C&&(this.isActive=C,this.cdr.markForCheck(),this.classes.forEach(A=>{C?this.renderer.addClass(this.element.nativeElement,A):this.renderer.removeClass(this.element.nativeElement,A)}),C&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(C))})}isLinkActive(C){const A=function va(E){return!!E.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return R=>!!R.urlTree&&C.isActive(R.urlTree,A)}hasActiveLinks(){const C=this.isLinkActive(this.router);return this.link&&C(this.link)||this.linkWithHref&&C(this.linkWithHref)||this.links.some(C)||this.linksWithHrefs.some(C)}}return E.\u0275fac=function(C){return new(C||E)(T.Y36(Fr),T.Y36(T.SBq),T.Y36(T.Qsj),T.Y36(T.sBO),T.Y36(ac,8),T.Y36(zl,8))},E.\u0275dir=T.lG2({type:E,selectors:[["","routerLinkActive",""]],contentQueries:function(C,A,R){if(1&C&&(T.Suo(R,ac,5),T.Suo(R,zl,5)),2&C){let ee;T.iGM(ee=T.CRH())&&(A.links=ee),T.iGM(ee=T.CRH())&&(A.linksWithHrefs=ee)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[T.TTD]}),E})();class Cn{}let Ac=(()=>{class E{constructor(C,A,R,ee,fe){this.router=C,this.injector=R,this.preloadingStrategy=ee,this.loader=fe}setUpPreloading(){this.subscription=this.router.events.pipe((0,It.h)(C=>C instanceof lr),(0,jt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,A){const R=[];for(const ee of A){ee.providers&&!ee._injector&&(ee._injector=(0,T.MMx)(ee.providers,C,`Route: ${ee.path}`));const fe=ee._injector??C,oe=ee._loadedInjector??fe;ee.loadChildren&&!ee._loadedRoutes&&void 0===ee.canLoad||ee.loadComponent&&!ee._loadedComponent?R.push(this.preloadConfig(fe,ee)):(ee.children||ee._loadedRoutes)&&R.push(this.processRoutes(oe,ee.children??ee._loadedRoutes))}return(0,l.D)(R).pipe((0,ai.J)())}preloadConfig(C,A){return this.preloadingStrategy.preload(A,()=>{let R;R=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(C,A):(0,Z.of)(null);const ee=R.pipe((0,At.z)(fe=>null===fe?(0,Z.of)(void 0):(A._loadedRoutes=fe.routes,A._loadedInjector=fe.injector,this.processRoutes(fe.injector??C,fe.routes))));if(A.loadComponent&&!A._loadedComponent){const fe=this.loader.loadComponent(A);return(0,l.D)([ee,fe]).pipe((0,ai.J)())}return ee})}}return E.\u0275fac=function(C){return new(C||E)(T.LFG(Fr),T.LFG(T.Sil),T.LFG(T.lqb),T.LFG(Cn),T.LFG(qr))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const ks=new T.OlP("");let bo=(()=>{class E{constructor(C,A,R={}){this.router=C,this.viewportScroller=A,this.options=R,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},R.scrollPositionRestoration=R.scrollPositionRestoration||"disabled",R.anchorScrolling=R.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Zn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof lr&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.router.parseUrl(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Ol&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,A){this.router.triggerEvent(new Ol(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return E.\u0275fac=function(C){T.$Z()},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();function vs(E,S){return{\u0275kind:E,\u0275providers:S}}function nr(E){return[{provide:Fl,multi:!0,useValue:E}]}function eu(){const E=(0,T.f3M)(T.zs3);return S=>{const C=E.get(T.z2F);if(S!==C.components[0])return;const A=E.get(Fr),R=E.get(ta);1===E.get(zi)&&A.initialNavigation(),E.get(Ul,null,T.XFs.Optional)?.setUpPreloading(),E.get(ks,null,T.XFs.Optional)?.init(),A.resetRootComponentType(C.componentTypes[0]),R.next(),R.complete()}}const ta=new T.OlP("",{factory:()=>new wt.x}),zi=new T.OlP("",{providedIn:"root",factory:()=>1});const Ul=new T.OlP("");function tu(E){return vs(0,[{provide:Ul,useExisting:Ac},{provide:Cn,useExisting:E}])}const v=new T.OlP("ROUTER_FORROOT_GUARD"),t=[tn.Ye,{provide:ji,useClass:Lt},{provide:Fr,useFactory:di},ps,{provide:vo,useFactory:function za(E){return E.routerState.root},deps:[Fr]},qr];function c(){return new T.PXZ("Router",Fr)}let m=(()=>{class E{constructor(C){}static forRoot(C,A){return{ngModule:E,providers:[t,[],nr(C),{provide:v,useFactory:B,deps:[[Fr,new T.FiY,new T.tp0]]},{provide:tl,useValue:A||{}},A?.useHash?{provide:tn.S$,useClass:tn.Do}:{provide:tn.S$,useClass:tn.b0},{provide:ks,useFactory:()=>{const E=(0,T.f3M)(Fr),S=(0,T.f3M)(tn.EM),C=(0,T.f3M)(tl);return C.scrollOffset&&S.setOffset(C.scrollOffset),new bo(E,S,C)}},A?.preloadingStrategy?tu(A.preloadingStrategy).\u0275providers:[],{provide:T.PXZ,multi:!0,useFactory:c},A?.initialNavigation?z(A):[],[{provide:W,useFactory:eu},{provide:T.tb,multi:!0,useExisting:W}]]}}static forChild(C){return{ngModule:E,providers:[nr(C)]}}}return E.\u0275fac=function(C){return new(C||E)(T.LFG(v,8))},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({imports:[qa]}),E})();function B(E){return"guarded"}function z(E){return["disabled"===E.initialNavigation?vs(3,[{provide:T.ip1,multi:!0,useFactory:()=>{const S=(0,T.f3M)(Fr);return()=>{S.setUpLocationChangeListener()}}},{provide:zi,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?vs(2,[{provide:zi,useValue:0},{provide:T.ip1,multi:!0,deps:[T.zs3],useFactory:S=>{const C=S.get(tn.V_,Promise.resolve());let A=!1;return()=>C.then(()=>new Promise(ee=>{const fe=S.get(Fr),oe=S.get(ta);(function R(ee){S.get(Fr).events.pipe((0,It.h)(oe=>oe instanceof lr||oe instanceof cr||oe instanceof br),(0,Zt.U)(oe=>oe instanceof lr||oe instanceof cr&&(0===oe.code||1===oe.code)&&null),(0,It.h)(oe=>null!==oe),(0,Re.q)(1)).subscribe(()=>{ee()})})(()=>{ee(!0),A=!0}),fe.afterPreactivation=()=>(ee(!0),A||oe.closed?(0,Z.of)(void 0):oe),fe.initialNavigation()}))}}]).\u0275providers:[]]}const W=new T.OlP("")}},sn=>{sn(sn.s=3932)}]);