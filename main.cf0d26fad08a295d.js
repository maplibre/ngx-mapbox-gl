(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[179],{7558:(yi,pt,j)=>{"use strict";j.d(pt,{a:()=>Ze});var w=j(4080),a=j(4650);function se(he,$e){1&he&&a.Hsn(0)}const _=["*"];let Ze=(()=>{class he{constructor(Ae,Ve,je){this.componentFactoryResolver=Ae,this.injector=Ve,this.appRef=je}ngAfterViewInit(){this.portalOutlet=new w.u0(document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items"),this.componentFactoryResolver,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}}return he.\u0275fac=function(Ae){return new(Ae||he)(a.Y36(a._Vd),a.Y36(a.zs3),a.Y36(a.z2F))},he.\u0275cmp=a.Xpm({type:he,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(Ae,Ve){if(1&Ae&&a.Gf(w.ig,5),2&Ae){let je;a.iGM(je=a.CRH())&&(Ve.portal=je.first)}},inputs:{position:"position"},ngContentSelectors:_,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(Ae,Ve){1&Ae&&(a.F$t(),a.YNc(0,se,1,0,"ng-template",0))},dependencies:[w.bH],encapsulation:2}),he})()},8683:(yi,pt,j)=>{"use strict";j.d(pt,{$:()=>he});var w=j(4650),a=j(2510),se=j(3683),_=j(7392),Ze=j(4859);let he=(()=>{class $e{}return $e.\u0275fac=function(Ve){return new(Ve||$e)},$e.\u0275cmp=w.Xpm({type:$e,selectors:[["ng-component"]],decls:16,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-button","","routerLink","/"],["svgIcon","ngx-maplibre-gl"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/maplibre/ngx-maplibre-gl"],["svgIcon","github"]],template:function(Ve,je){1&Ve&&(w.TgZ(0,"mat-toolbar",0)(1,"div"),w._UZ(2,"div",1),w.TgZ(3,"a",2),w._UZ(4,"mat-icon",3),w._uU(5," ngx-maplibre-gl "),w.qZA(),w.TgZ(6,"a",4),w._uU(7," Demo "),w.qZA(),w.TgZ(8,"a",5),w._uU(9," Documentation "),w.qZA()(),w.TgZ(10,"div"),w._UZ(11,"div",6),w.TgZ(12,"a",7),w._UZ(13,"mat-icon",8),w._uU(14," GitHub "),w.qZA()()(),w._UZ(15,"router-outlet"))},dependencies:[a.lC,a.rH,se.Ye,_.Hw,Ze.zs],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]}),$e})()},2484:(yi,pt,j)=>{"use strict";j.d(pt,{x:()=>Xe});var w=j(4080),a=j(6895),se=j(4859),_=j(7392),Ze=j(3683),he=j(2510),Ve=(j(7558),j(8683),j(4650));let Xe=(()=>{class ke{}return ke.\u0275fac=function(Ye){return new(Ye||ke)},ke.\u0275mod=Ve.oAB({type:ke}),ke.\u0275inj=Ve.cJS({imports:[a.ez,he.Bz,Ze.g0,_.Ps,se.ot,w.eL]}),ke})()},8435:(yi,pt,j)=>{"use strict";var w=j(1481),a=j(4650),se=j(2510);let _=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-root"]],decls:1,vars:0,template:function(r,h){1&r&&a._UZ(0,"router-outlet")},dependencies:[se.lC],encapsulation:2}),c})();var Ze=j(7392),he=j(7340);function Ae(c){return new a.vHH(3e3,!1)}function ei(){return typeof window<"u"&&typeof window.document<"u"}function pi(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ct(c){switch(c.length){case 0:return new he.ZN;case 1:return c[0];default:return new he.ZE(c)}}function Ti(c,m,r,h,T=new Map,e=new Map){const i=[],s=[];let u=-1,f=null;if(h.forEach(x=>{const S=x.get("offset"),O=S==u,z=O&&f||new Map;x.forEach((J,de)=>{let Te=de,qe=J;if("offset"!==de)switch(Te=m.normalizePropertyName(Te,i),qe){case he.k1:qe=T.get(de);break;case he.l3:qe=e.get(de);break;default:qe=m.normalizeStyleValue(de,Te,qe,i)}z.set(Te,qe)}),O||s.push(z),f=z,u=S}),i.length)throw function At(c){return new a.vHH(3502,!1)}();return s}function fi(c,m,r,h){switch(m){case"start":c.onStart(()=>h(r&&bi(r,"start",c)));break;case"done":c.onDone(()=>h(r&&bi(r,"done",c)));break;case"destroy":c.onDestroy(()=>h(r&&bi(r,"destroy",c)))}}function bi(c,m,r){const e=rt(c.element,c.triggerName,c.fromState,c.toState,m||c.phaseName,r.totalTime??c.totalTime,!!r.disabled),i=c._data;return null!=i&&(e._data=i),e}function rt(c,m,r,h,T="",e=0,i){return{element:c,triggerName:m,fromState:r,toState:h,phaseName:T,totalTime:e,disabled:!!i}}function Dt(c,m,r){let h=c.get(m);return h||c.set(m,h=r),h}function _i(c){const m=c.indexOf(":");return[c.substring(1,m),c.slice(m+1)]}let Ui=(c,m)=>!1,wi=(c,m,r)=>[],nn=null;function Pt(c){const m=c.parentNode||c.host;return m===nn?null:m}(pi()||typeof Element<"u")&&(ei()?(nn=(()=>document.documentElement)(),Ui=(c,m)=>{for(;m;){if(m===c)return!0;m=Pt(m)}return!1}):Ui=(c,m)=>c.contains(m),wi=(c,m,r)=>{if(r)return Array.from(c.querySelectorAll(m));const h=c.querySelector(m);return h?[h]:[]});let st=null,xt=!1;const be=Ui,_e=wi;let ze=(()=>{class c{validateStyleProperty(r){return function Nt(c){st||(st=function De(){return typeof document<"u"?document.body:null}()||{},xt=!!st.style&&"WebkitAppearance"in st.style);let m=!0;return st.style&&!function Ee(c){return"ebkit"==c.substring(1,6)}(c)&&(m=c in st.style,!m&&xt&&(m="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in st.style)),m}(r)}matchesElement(r,h){return!1}containsElement(r,h){return be(r,h)}getParentElement(r){return Pt(r)}query(r,h,T){return _e(r,h,T)}computeStyle(r,h,T){return T||""}animate(r,h,T,e,i,s=[],u){return new he.ZN(T,e)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})(),et=(()=>{class c{}return c.NOOP=new ze,c})();const Ei=1e3,Li="ng-enter",pn="ng-leave",Se="ng-trigger",re=".ng-trigger",me="ng-animating",K=".ng-animating";function V(c){if("number"==typeof c)return c;const m=c.match(/^(-?[\.\d]+)(m?s)/);return!m||m.length<2?0:U(parseFloat(m[1]),m[2])}function U(c,m){return"s"===m?c*Ei:c}function ce(c,m,r){return c.hasOwnProperty("duration")?c:function fe(c,m,r){let T,e=0,i="";if("string"==typeof c){const s=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===s)return m.push(Ae()),{duration:0,delay:0,easing:""};T=U(parseFloat(s[1]),s[2]);const u=s[3];null!=u&&(e=U(parseFloat(u),s[4]));const f=s[5];f&&(i=f)}else T=c;if(!r){let s=!1,u=m.length;T<0&&(m.push(function Ve(){return new a.vHH(3100,!1)}()),s=!0),e<0&&(m.push(function je(){return new a.vHH(3101,!1)}()),s=!0),s&&m.splice(u,0,Ae())}return{duration:T,delay:e,easing:i}}(c,m,r)}function Ie(c,m={}){return Object.keys(c).forEach(r=>{m[r]=c[r]}),m}function We(c){const m=new Map;return Object.keys(c).forEach(r=>{m.set(r,c[r])}),m}function Tt(c,m=new Map,r){if(r)for(let[h,T]of r)m.set(h,T);for(let[h,T]of c)m.set(h,T);return m}function ni(c,m,r){return r?m+":"+r+";":""}function it(c){let m="";for(let r=0;r<c.style.length;r++){const h=c.style.item(r);m+=ni(0,h,c.style.getPropertyValue(h))}for(const r in c.style)c.style.hasOwnProperty(r)&&!r.startsWith("_")&&(m+=ni(0,_n(r),c.style[r]));c.setAttribute("style",m)}function ae(c,m,r){c.style&&(m.forEach((h,T)=>{const e=un(T);r&&!r.has(T)&&r.set(T,c.style[e]),c.style[e]=h}),pi()&&it(c))}function Y(c,m){c.style&&(m.forEach((r,h)=>{const T=un(h);c.style[T]=""}),pi()&&it(c))}function Q(c){return Array.isArray(c)?1==c.length?c[0]:(0,he.vP)(c):c}const Re=new RegExp("{{\\s*(.+?)\\s*}}","g");function ht(c){let m=[];if("string"==typeof c){let r;for(;r=Re.exec(c);)m.push(r[1]);Re.lastIndex=0}return m}function Jt(c,m,r){const h=c.toString(),T=h.replace(Re,(e,i)=>{let s=m[i];return null==s&&(r.push(function ke(c){return new a.vHH(3003,!1)}()),s=""),s.toString()});return T==h?c:T}function Fi(c){const m=[];let r=c.next();for(;!r.done;)m.push(r.value),r=c.next();return m}const an=/-+([a-z0-9])/g;function un(c){return c.replace(an,(...m)=>m[1].toUpperCase())}function _n(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function wn(c,m,r){switch(m.type){case 7:return c.visitTrigger(m,r);case 0:return c.visitState(m,r);case 1:return c.visitTransition(m,r);case 2:return c.visitSequence(m,r);case 3:return c.visitGroup(m,r);case 4:return c.visitAnimate(m,r);case 5:return c.visitKeyframes(m,r);case 6:return c.visitStyle(m,r);case 8:return c.visitReference(m,r);case 9:return c.visitAnimateChild(m,r);case 10:return c.visitAnimateRef(m,r);case 11:return c.visitQuery(m,r);case 12:return c.visitStagger(m,r);default:throw function ot(c){return new a.vHH(3004,!1)}()}}function Mr(c,m){return window.getComputedStyle(c)[m]}const Xr="*";function Rn(c,m){const r=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(h=>function Ri(c,m,r){if(":"==c[0]){const u=function Ji(c,m){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,h)=>parseFloat(h)>parseFloat(r);case":decrement":return(r,h)=>parseFloat(h)<parseFloat(r);default:return m.push(function gi(c){return new a.vHH(3016,!1)}()),"* => *"}}(c,r);if("function"==typeof u)return void m.push(u);c=u}const h=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return r.push(function ai(c){return new a.vHH(3015,!1)}()),m;const T=h[1],e=h[2],i=h[3];m.push(vr(T,i));"<"==e[0]&&!(T==Xr&&i==Xr)&&m.push(vr(i,T))}(h,r,m)):r.push(c),r}const tr=new Set(["true","1"]),$n=new Set(["false","0"]);function vr(c,m){const r=tr.has(c)||$n.has(c),h=tr.has(m)||$n.has(m);return(T,e)=>{let i=c==Xr||c==T,s=m==Xr||m==e;return!i&&r&&"boolean"==typeof T&&(i=T?tr.has(c):$n.has(c)),!s&&h&&"boolean"==typeof e&&(s=e?tr.has(m):$n.has(m)),i&&s}}const zn=new RegExp("s*:selfs*,?","g");function ji(c,m,r,h){return new Eo(c).build(m,r,h)}class Eo{constructor(m){this._driver=m}build(m,r,h){const T=new ws(r);return this._resetContextStyleTimingState(T),wn(this,Q(m),T)}_resetContextStyleTimingState(m){m.currentQuerySelector="",m.collectedStyles=new Map,m.collectedStyles.set("",new Map),m.currentTime=0}visitTrigger(m,r){let h=r.queryCount=0,T=r.depCount=0;const e=[],i=[];return"@"==m.name.charAt(0)&&r.errors.push(function mt(){return new a.vHH(3006,!1)}()),m.definitions.forEach(s=>{if(this._resetContextStyleTimingState(r),0==s.type){const u=s,f=u.name;f.toString().split(/\s*,\s*/).forEach(x=>{u.name=x,e.push(this.visitState(u,r))}),u.name=f}else if(1==s.type){const u=this.visitTransition(s,r);h+=u.queryCount,T+=u.depCount,i.push(u)}else r.errors.push(function Gt(){return new a.vHH(3007,!1)}())}),{type:7,name:m.name,states:e,transitions:i,queryCount:h,depCount:T,options:null}}visitState(m,r){const h=this.visitStyle(m.styles,r),T=m.options&&m.options.params||null;if(h.containsDynamicStyles){const e=new Set,i=T||{};h.styles.forEach(s=>{s instanceof Map&&s.forEach(u=>{ht(u).forEach(f=>{i.hasOwnProperty(f)||e.add(f)})})}),e.size&&(Fi(e.values()),r.errors.push(function wt(c,m){return new a.vHH(3008,!1)}()))}return{type:0,name:m.name,style:h,options:T?{params:T}:null}}visitTransition(m,r){r.queryCount=0,r.depCount=0;const h=wn(this,Q(m.animation),r);return{type:1,matchers:Rn(m.expr,r.errors),animation:h,queryCount:r.queryCount,depCount:r.depCount,options:or(m.options)}}visitSequence(m,r){return{type:2,steps:m.steps.map(h=>wn(this,h,r)),options:or(m.options)}}visitGroup(m,r){const h=r.currentTime;let T=0;const e=m.steps.map(i=>{r.currentTime=h;const s=wn(this,i,r);return T=Math.max(T,r.currentTime),s});return r.currentTime=T,{type:3,steps:e,options:or(m.options)}}visitAnimate(m,r){const h=function Cs(c,m){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return js(ce(c,m).duration,0,"");const r=c;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=js(0,0,"");return e.dynamic=!0,e.strValue=r,e}const T=ce(r,m);return js(T.duration,T.delay,T.easing)}(m.timings,r.errors);r.currentAnimateTimings=h;let T,e=m.styles?m.styles:(0,he.oB)({});if(5==e.type)T=this.visitKeyframes(e,r);else{let i=m.styles,s=!1;if(!i){s=!0;const f={};h.easing&&(f.easing=h.easing),i=(0,he.oB)(f)}r.currentTime+=h.duration+h.delay;const u=this.visitStyle(i,r);u.isEmptyStep=s,T=u}return r.currentAnimateTimings=null,{type:4,timings:h,style:T,options:null}}visitStyle(m,r){const h=this._makeStyleAst(m,r);return this._validateStyleAst(h,r),h}_makeStyleAst(m,r){const h=[],T=Array.isArray(m.styles)?m.styles:[m.styles];for(let s of T)"string"==typeof s?s===he.l3?h.push(s):r.errors.push(new a.vHH(3002,!1)):h.push(We(s));let e=!1,i=null;return h.forEach(s=>{if(s instanceof Map&&(s.has("easing")&&(i=s.get("easing"),s.delete("easing")),!e))for(let u of s.values())if(u.toString().indexOf("{{")>=0){e=!0;break}}),{type:6,styles:h,easing:i,offset:m.offset,containsDynamicStyles:e,options:null}}_validateStyleAst(m,r){const h=r.currentAnimateTimings;let T=r.currentTime,e=r.currentTime;h&&e>0&&(e-=h.duration+h.delay),m.styles.forEach(i=>{"string"!=typeof i&&i.forEach((s,u)=>{const f=r.collectedStyles.get(r.currentQuerySelector),x=f.get(u);let S=!0;x&&(e!=T&&e>=x.startTime&&T<=x.endTime&&(r.errors.push(function Wt(c,m,r,h,T){return new a.vHH(3010,!1)}()),S=!1),e=x.startTime),S&&f.set(u,{startTime:e,endTime:T}),r.options&&function xe(c,m,r){const h=m.params||{},T=ht(c);T.length&&T.forEach(e=>{h.hasOwnProperty(e)||r.push(function Xe(c){return new a.vHH(3001,!1)}())})}(s,r.options,r.errors)})})}visitKeyframes(m,r){const h={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push(function Ct(){return new a.vHH(3011,!1)}()),h;let e=0;const i=[];let s=!1,u=!1,f=0;const x=m.steps.map(qe=>{const _t=this._makeStyleAst(qe,r);let Ht=null!=_t.offset?_t.offset:function sa(c){if("string"==typeof c)return null;let m=null;if(Array.isArray(c))c.forEach(r=>{if(r instanceof Map&&r.has("offset")){const h=r;m=parseFloat(h.get("offset")),h.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const r=c;m=parseFloat(r.get("offset")),r.delete("offset")}return m}(_t.styles),si=0;return null!=Ht&&(e++,si=_t.offset=Ht),u=u||si<0||si>1,s=s||si<f,f=si,i.push(si),_t});u&&r.errors.push(function Oe(){return new a.vHH(3012,!1)}()),s&&r.errors.push(function tt(){return new a.vHH(3200,!1)}());const S=m.steps.length;let O=0;e>0&&e<S?r.errors.push(function kt(){return new a.vHH(3202,!1)}()):0==e&&(O=1/(S-1));const z=S-1,J=r.currentTime,de=r.currentAnimateTimings,Te=de.duration;return x.forEach((qe,_t)=>{const Ht=O>0?_t==z?1:O*_t:i[_t],si=Ht*Te;r.currentTime=J+de.delay+si,de.duration=si,this._validateStyleAst(qe,r),qe.offset=Ht,h.styles.push(qe)}),h}visitReference(m,r){return{type:8,animation:wn(this,Q(m.animation),r),options:or(m.options)}}visitAnimateChild(m,r){return r.depCount++,{type:9,options:or(m.options)}}visitAnimateRef(m,r){return{type:10,animation:this.visitReference(m.animation,r),options:or(m.options)}}visitQuery(m,r){const h=r.currentQuerySelector,T=m.options||{};r.queryCount++,r.currentQuery=m;const[e,i]=function sn(c){const m=!!c.split(/\s*,\s*/).find(r=>":self"==r);return m&&(c=c.replace(zn,"")),c=c.replace(/@\*/g,re).replace(/@\w+/g,r=>re+"-"+r.slice(1)).replace(/:animating/g,K),[c,m]}(m.selector);r.currentQuerySelector=h.length?h+" "+e:e,Dt(r.collectedStyles,r.currentQuerySelector,new Map);const s=wn(this,Q(m.animation),r);return r.currentQuery=null,r.currentQuerySelector=h,{type:11,selector:e,limit:T.limit||0,optional:!!T.optional,includeSelf:i,animation:s,originalSelector:m.selector,options:or(m.options)}}visitStagger(m,r){r.currentQuery||r.errors.push(function Ot(){return new a.vHH(3013,!1)}());const h="full"===m.timings?{duration:0,delay:0,easing:"full"}:ce(m.timings,r.errors,!0);return{type:12,animation:wn(this,Q(m.animation),r),timings:h,options:null}}}class ws{constructor(m){this.errors=m,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function or(c){return c?(c=Ie(c)).params&&(c.params=function Fo(c){return c?Ie(c):null}(c.params)):c={},c}function js(c,m,r){return{duration:c,delay:m,easing:r}}function po(c,m,r,h,T,e,i=null,s=!1){return{type:1,element:c,keyframes:m,preStyleProps:r,postStyleProps:h,duration:T,delay:e,totalTime:T+e,easing:i,subTimeline:s}}class Jr{constructor(){this._map=new Map}get(m){return this._map.get(m)||[]}append(m,r){let h=this._map.get(m);h||this._map.set(m,h=[]),h.push(...r)}has(m){return this._map.has(m)}clear(){this._map.clear()}}const Wn=new RegExp(":enter","g"),hs=new RegExp(":leave","g");function zr(c,m,r,h,T,e=new Map,i=new Map,s,u,f=[]){return(new Hs).buildKeyframes(c,m,r,h,T,e,i,s,u,f)}class Hs{buildKeyframes(m,r,h,T,e,i,s,u,f,x=[]){f=f||new Jr;const S=new ao(m,r,f,T,e,x,[]);S.options=u;const O=u.delay?V(u.delay):0;S.currentTimeline.delayNextStep(O),S.currentTimeline.setStyles([i],null,S.errors,u),wn(this,h,S);const z=S.timelines.filter(J=>J.containsAnimation());if(z.length&&s.size){let J;for(let de=z.length-1;de>=0;de--){const Te=z[de];if(Te.element===r){J=Te;break}}J&&!J.allowOnlyTimelineStyles()&&J.setStyles([s],null,S.errors,u)}return z.length?z.map(J=>J.buildKeyframes()):[po(r,[],[],[],0,O,"",!1)]}visitTrigger(m,r){}visitState(m,r){}visitTransition(m,r){}visitAnimateChild(m,r){const h=r.subInstructions.get(r.element);if(h){const T=r.createSubContext(m.options),e=r.currentTimeline.currentTime,i=this._visitSubInstructions(h,T,T.options);e!=i&&r.transformIntoNewTimeline(i)}r.previousNode=m}visitAnimateRef(m,r){const h=r.createSubContext(m.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([m.options,m.animation.options],r,h),this.visitReference(m.animation,h),r.transformIntoNewTimeline(h.currentTimeline.currentTime),r.previousNode=m}_applyAnimationRefDelays(m,r,h){for(const T of m){const e=T?.delay;if(e){const i="number"==typeof e?e:V(Jt(e,T?.params??{},r.errors));h.delayNextStep(i)}}}_visitSubInstructions(m,r,h){let e=r.currentTimeline.currentTime;const i=null!=h.duration?V(h.duration):null,s=null!=h.delay?V(h.delay):null;return 0!==i&&m.forEach(u=>{const f=r.appendInstructionToTimeline(u,i,s);e=Math.max(e,f.duration+f.delay)}),e}visitReference(m,r){r.updateOptions(m.options,!0),wn(this,m.animation,r),r.previousNode=m}visitSequence(m,r){const h=r.subContextCount;let T=r;const e=m.options;if(e&&(e.params||e.delay)&&(T=r.createSubContext(e),T.transformIntoNewTimeline(),null!=e.delay)){6==T.previousNode.type&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=Mo);const i=V(e.delay);T.delayNextStep(i)}m.steps.length&&(m.steps.forEach(i=>wn(this,i,T)),T.currentTimeline.applyStylesToKeyframe(),T.subContextCount>h&&T.transformIntoNewTimeline()),r.previousNode=m}visitGroup(m,r){const h=[];let T=r.currentTimeline.currentTime;const e=m.options&&m.options.delay?V(m.options.delay):0;m.steps.forEach(i=>{const s=r.createSubContext(m.options);e&&s.delayNextStep(e),wn(this,i,s),T=Math.max(T,s.currentTimeline.currentTime),h.push(s.currentTimeline)}),h.forEach(i=>r.currentTimeline.mergeTimelineCollectedStyles(i)),r.transformIntoNewTimeline(T),r.previousNode=m}_visitTiming(m,r){if(m.dynamic){const h=m.strValue;return ce(r.params?Jt(h,r.params,r.errors):h,r.errors)}return{duration:m.duration,delay:m.delay,easing:m.easing}}visitAnimate(m,r){const h=r.currentAnimateTimings=this._visitTiming(m.timings,r),T=r.currentTimeline;h.delay&&(r.incrementTime(h.delay),T.snapshotCurrentStyles());const e=m.style;5==e.type?this.visitKeyframes(e,r):(r.incrementTime(h.duration),this.visitStyle(e,r),T.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=m}visitStyle(m,r){const h=r.currentTimeline,T=r.currentAnimateTimings;!T&&h.hasCurrentStyleProperties()&&h.forwardFrame();const e=T&&T.easing||m.easing;m.isEmptyStep?h.applyEmptyStep(e):h.setStyles(m.styles,e,r.errors,r.options),r.previousNode=m}visitKeyframes(m,r){const h=r.currentAnimateTimings,T=r.currentTimeline.duration,e=h.duration,s=r.createSubContext().currentTimeline;s.easing=h.easing,m.styles.forEach(u=>{s.forwardTime((u.offset||0)*e),s.setStyles(u.styles,u.easing,r.errors,r.options),s.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(s),r.transformIntoNewTimeline(T+e),r.previousNode=m}visitQuery(m,r){const h=r.currentTimeline.currentTime,T=m.options||{},e=T.delay?V(T.delay):0;e&&(6===r.previousNode.type||0==h&&r.currentTimeline.hasCurrentStyleProperties())&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Mo);let i=h;const s=r.invokeQuery(m.selector,m.originalSelector,m.limit,m.includeSelf,!!T.optional,r.errors);r.currentQueryTotal=s.length;let u=null;s.forEach((f,x)=>{r.currentQueryIndex=x;const S=r.createSubContext(m.options,f);e&&S.delayNextStep(e),f===r.element&&(u=S.currentTimeline),wn(this,m.animation,S),S.currentTimeline.applyStylesToKeyframe(),i=Math.max(i,S.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(i),u&&(r.currentTimeline.mergeTimelineCollectedStyles(u),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=m}visitStagger(m,r){const h=r.parentContext,T=r.currentTimeline,e=m.timings,i=Math.abs(e.duration),s=i*(r.currentQueryTotal-1);let u=i*r.currentQueryIndex;switch(e.duration<0?"reverse":e.easing){case"reverse":u=s-u;break;case"full":u=h.currentStaggerTime}const x=r.currentTimeline;u&&x.delayNextStep(u);const S=x.currentTime;wn(this,m.animation,r),r.previousNode=m,h.currentStaggerTime=T.currentTime-S+(T.startTime-h.currentTimeline.startTime)}}const Mo={};class ao{constructor(m,r,h,T,e,i,s,u){this._driver=m,this.element=r,this.subInstructions=h,this._enterClassName=T,this._leaveClassName=e,this.errors=i,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Mo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new dr(this._driver,r,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(m,r){if(!m)return;const h=m;let T=this.options;null!=h.duration&&(T.duration=V(h.duration)),null!=h.delay&&(T.delay=V(h.delay));const e=h.params;if(e){let i=T.params;i||(i=this.options.params={}),Object.keys(e).forEach(s=>{(!r||!i.hasOwnProperty(s))&&(i[s]=Jt(e[s],i,this.errors))})}}_copyOptions(){const m={};if(this.options){const r=this.options.params;if(r){const h=m.params={};Object.keys(r).forEach(T=>{h[T]=r[T]})}}return m}createSubContext(m=null,r,h){const T=r||this.element,e=new ao(this._driver,T,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(T,h||0));return e.previousNode=this.previousNode,e.currentAnimateTimings=this.currentAnimateTimings,e.options=this._copyOptions(),e.updateOptions(m),e.currentQueryIndex=this.currentQueryIndex,e.currentQueryTotal=this.currentQueryTotal,e.parentContext=this,this.subContextCount++,e}transformIntoNewTimeline(m){return this.previousNode=Mo,this.currentTimeline=this.currentTimeline.fork(this.element,m),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(m,r,h){const T={duration:r??m.duration,delay:this.currentTimeline.currentTime+(h??0)+m.delay,easing:""},e=new aa(this._driver,m.element,m.keyframes,m.preStyleProps,m.postStyleProps,T,m.stretchStartingKeyframe);return this.timelines.push(e),T}incrementTime(m){this.currentTimeline.forwardTime(this.currentTimeline.duration+m)}delayNextStep(m){m>0&&this.currentTimeline.delayNextStep(m)}invokeQuery(m,r,h,T,e,i){let s=[];if(T&&s.push(this.element),m.length>0){m=(m=m.replace(Wn,"."+this._enterClassName)).replace(hs,"."+this._leaveClassName);let f=this._driver.query(this.element,m,1!=h);0!==h&&(f=h<0?f.slice(f.length+h,f.length):f.slice(0,h)),s.push(...f)}return!e&&0==s.length&&i.push(function Vt(c){return new a.vHH(3014,!1)}()),s}}class dr{constructor(m,r,h,T){this._driver=m,this.element=r,this.startTime=h,this._elementTimelineStylesLookup=T,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(m){const r=1===this._keyframes.size&&this._pendingStyles.size;this.duration||r?(this.forwardTime(this.currentTime+m),r&&this.snapshotCurrentStyles()):this.startTime+=m}fork(m,r){return this.applyStylesToKeyframe(),new dr(this._driver,m,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(m){this.applyStylesToKeyframe(),this.duration=m,this._loadKeyframe()}_updateStyle(m,r){this._localTimelineStyles.set(m,r),this._globalTimelineStyles.set(m,r),this._styleSummary.set(m,{time:this.currentTime,value:r})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(m){m&&this._previousKeyframe.set("easing",m);for(let[r,h]of this._globalTimelineStyles)this._backFill.set(r,h||he.l3),this._currentKeyframe.set(r,he.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(m,r,h,T){r&&this._previousKeyframe.set("easing",r);const e=T&&T.params||{},i=function Fr(c,m){const r=new Map;let h;return c.forEach(T=>{if("*"===T){h=h||m.keys();for(let e of h)r.set(e,he.l3)}else Tt(T,r)}),r}(m,this._globalTimelineStyles);for(let[s,u]of i){const f=Jt(u,e,h);this._pendingStyles.set(s,f),this._localTimelineStyles.has(s)||this._backFill.set(s,this._globalTimelineStyles.get(s)??he.l3),this._updateStyle(s,f)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((m,r)=>{this._currentKeyframe.set(r,m)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((m,r)=>{this._currentKeyframe.has(r)||this._currentKeyframe.set(r,m)}))}snapshotCurrentStyles(){for(let[m,r]of this._localTimelineStyles)this._pendingStyles.set(m,r),this._updateStyle(m,r)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const m=[];for(let r in this._currentKeyframe)m.push(r);return m}mergeTimelineCollectedStyles(m){m._styleSummary.forEach((r,h)=>{const T=this._styleSummary.get(h);(!T||r.time>T.time)&&this._updateStyle(h,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const m=new Set,r=new Set,h=1===this._keyframes.size&&0===this.duration;let T=[];this._keyframes.forEach((s,u)=>{const f=Tt(s,new Map,this._backFill);f.forEach((x,S)=>{x===he.k1?m.add(S):x===he.l3&&r.add(S)}),h||f.set("offset",u/this.duration),T.push(f)});const e=m.size?Fi(m.values()):[],i=r.size?Fi(r.values()):[];if(h){const s=T[0],u=new Map(s);s.set("offset",0),u.set("offset",1),T=[s,u]}return po(this.element,T,e,i,this.duration,this.startTime,this.easing,!1)}}class aa extends dr{constructor(m,r,h,T,e,i,s=!1){super(m,r,i.delay),this.keyframes=h,this.preStyleProps=T,this.postStyleProps=e,this._stretchStartingKeyframe=s,this.timings={duration:i.duration,delay:i.delay,easing:i.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let m=this.keyframes,{delay:r,duration:h,easing:T}=this.timings;if(this._stretchStartingKeyframe&&r){const e=[],i=h+r,s=r/i,u=Tt(m[0]);u.set("offset",0),e.push(u);const f=Tt(m[0]);f.set("offset",fr(s)),e.push(f);const x=m.length-1;for(let S=1;S<=x;S++){let O=Tt(m[S]);const z=O.get("offset");O.set("offset",fr((r+z*h)/i)),e.push(O)}h=i,r=0,T="",m=e}return po(this.element,m,this.preStyleProps,this.postStyleProps,h,r,T,!0)}}function fr(c,m=3){const r=Math.pow(10,m-1);return Math.round(c*r)/r}class Yn{}const Br=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class xa extends Yn{normalizePropertyName(m,r){return un(m)}normalizeStyleValue(m,r,h,T){let e="";const i=h.toString().trim();if(Br.has(r)&&0!==h&&"0"!==h)if("number"==typeof h)e="px";else{const s=h.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&0==s[1].length&&T.push(function Ye(c,m){return new a.vHH(3005,!1)}())}return i+e}}function fo(c,m,r,h,T,e,i,s,u,f,x,S,O){return{type:0,element:c,triggerName:m,isRemovalTransition:T,fromState:r,fromStyles:e,toState:h,toStyles:i,timelines:s,queriedElements:u,preStyleProps:f,postStyleProps:x,totalTime:S,errors:O}}const $s={};class Gs{constructor(m,r,h){this._triggerName=m,this.ast=r,this._stateStyles=h}match(m,r,h,T){return function En(c,m,r,h,T){return c.some(e=>e(m,r,h,T))}(this.ast.matchers,m,r,h,T)}buildStyles(m,r,h){let T=this._stateStyles.get("*");return void 0!==m&&(T=this._stateStyles.get(m?.toString())||T),T?T.buildStyles(r,h):new Map}build(m,r,h,T,e,i,s,u,f,x){const S=[],O=this.ast.options&&this.ast.options.params||$s,J=this.buildStyles(h,s&&s.params||$s,S),de=u&&u.params||$s,Te=this.buildStyles(T,de,S),qe=new Set,_t=new Map,Ht=new Map,si="void"===T,Mi={params:Ws(de,O),delay:this.ast.options?.delay},Ni=x?[]:zr(m,r,this.ast.animation,e,i,J,Te,Mi,f,S);let Vi=0;if(Ni.forEach(tn=>{Vi=Math.max(tn.duration+tn.delay,Vi)}),S.length)return fo(r,this._triggerName,h,T,si,J,Te,[],[],_t,Ht,Vi,S);Ni.forEach(tn=>{const Jn=tn.element,Zn=Dt(_t,Jn,new Set);tn.preStyleProps.forEach(kc=>Zn.add(kc));const Pl=Dt(Ht,Jn,new Set);tn.postStyleProps.forEach(kc=>Pl.add(kc)),Jn!==r&&qe.add(Jn)});const ri=Fi(qe.values());return fo(r,this._triggerName,h,T,si,J,Te,Ni,ri,_t,Ht,Vi)}}function Ws(c,m){const r=Ie(m);for(const h in c)c.hasOwnProperty(h)&&null!=c[h]&&(r[h]=c[h]);return r}class wa{constructor(m,r,h){this.styles=m,this.defaultParams=r,this.normalizer=h}buildStyles(m,r){const h=new Map,T=Ie(this.defaultParams);return Object.keys(m).forEach(e=>{const i=m[e];null!==i&&(T[e]=i)}),this.styles.styles.forEach(e=>{"string"!=typeof e&&e.forEach((i,s)=>{i&&(i=Jt(i,T,r));const u=this.normalizer.normalizePropertyName(s,r);i=this.normalizer.normalizeStyleValue(s,u,i,r),h.set(s,i)})}),h}}class Pa{constructor(m,r,h){this.name=m,this.ast=r,this._normalizer=h,this.transitionFactories=[],this.states=new Map,r.states.forEach(T=>{this.states.set(T.name,new wa(T.style,T.options&&T.options.params||{},h))}),Ms(this.states,"true","1"),Ms(this.states,"false","0"),r.transitions.forEach(T=>{this.transitionFactories.push(new Gs(m,T,this.states))}),this.fallbackTransition=function Ko(c,m,r){return new Gs(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(i,s)=>!0],options:null,queryCount:0,depCount:0},m)}(m,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(m,r,h,T){return this.transitionFactories.find(i=>i.match(m,r,h,T))||null}matchStyles(m,r,h){return this.fallbackTransition.buildStyles(m,r,h)}}function Ms(c,m,r){c.has(m)?c.has(r)||c.set(r,c.get(m)):c.has(r)&&c.set(m,c.get(r))}const ac=new Jr;class Rl{constructor(m,r,h){this.bodyNode=m,this._driver=r,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(m,r){const h=[],T=[],e=ji(this._driver,r,h,T);if(h.length)throw function Bt(c){return new a.vHH(3503,!1)}();this._animations.set(m,e)}_buildPlayer(m,r,h){const T=m.element,e=Ti(0,this._normalizer,0,m.keyframes,r,h);return this._driver.animate(T,e,m.duration,m.delay,m.easing,[],!0)}create(m,r,h={}){const T=[],e=this._animations.get(m);let i;const s=new Map;if(e?(i=zr(this._driver,r,e,Li,pn,new Map,new Map,h,ac,T),i.forEach(x=>{const S=Dt(s,x.element,new Map);x.postStyleProps.forEach(O=>S.set(O,null))})):(T.push(function $t(){return new a.vHH(3300,!1)}()),i=[]),T.length)throw function Kt(c){return new a.vHH(3504,!1)}();s.forEach((x,S)=>{x.forEach((O,z)=>{x.set(z,this._driver.computeStyle(S,z,he.l3))})});const f=ct(i.map(x=>{const S=s.get(x.element);return this._buildPlayer(x,new Map,S)}));return this._playersById.set(m,f),f.onDestroy(()=>this.destroy(m)),this.players.push(f),f}destroy(m){const r=this._getPlayer(m);r.destroy(),this._playersById.delete(m);const h=this.players.indexOf(r);h>=0&&this.players.splice(h,1)}_getPlayer(m){const r=this._playersById.get(m);if(!r)throw function ci(c){return new a.vHH(3301,!1)}();return r}listen(m,r,h,T){const e=rt(r,"","","");return fi(this._getPlayer(m),h,e,T),()=>{}}command(m,r,h,T){if("register"==h)return void this.register(m,T[0]);if("create"==h)return void this.create(m,r,T[0]||{});const e=this._getPlayer(m);switch(h){case"play":e.play();break;case"pause":e.pause();break;case"reset":e.reset();break;case"restart":e.restart();break;case"finish":e.finish();break;case"init":e.init();break;case"setPosition":e.setPosition(parseFloat(T[0]));break;case"destroy":this.destroy(m)}}}const Oa="ng-animate-queued",Ds="ng-animate-disabled",Do=[],Yr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ea={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},eo="__ng_removed";class Ss{get params(){return this.options.params}constructor(m,r=""){this.namespaceId=r;const h=m&&m.hasOwnProperty("value");if(this.value=function xn(c){return c??null}(h?m.value:m),h){const e=Ie(m);delete e.value,this.options=e}else this.options={};this.options.params||(this.options.params={})}absorbOptions(m){const r=m.params;if(r){const h=this.options.params;Object.keys(r).forEach(T=>{null==h[T]&&(h[T]=r[T])})}}}const lo="void",Ys=new Ss(lo);class ms{constructor(m,r,h){this.id=m,this.hostElement=r,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+m,Ur(r,this._hostClassName)}listen(m,r,h,T){if(!this._triggers.has(r))throw function oi(c,m){return new a.vHH(3302,!1)}();if(null==h||0==h.length)throw function zt(c){return new a.vHH(3303,!1)}();if(!function Qa(c){return"start"==c||"done"==c}(h))throw function Lt(c,m){return new a.vHH(3400,!1)}();const e=Dt(this._elementListeners,m,[]),i={name:r,phase:h,callback:T};e.push(i);const s=Dt(this._engine.statesByElement,m,new Map);return s.has(r)||(Ur(m,Se),Ur(m,Se+"-"+r),s.set(r,Ys)),()=>{this._engine.afterFlush(()=>{const u=e.indexOf(i);u>=0&&e.splice(u,1),this._triggers.has(r)||s.delete(r)})}}register(m,r){return!this._triggers.has(m)&&(this._triggers.set(m,r),!0)}_getTrigger(m){const r=this._triggers.get(m);if(!r)throw function Xt(c){return new a.vHH(3401,!1)}();return r}trigger(m,r,h,T=!0){const e=this._getTrigger(r),i=new Fa(this.id,r,m);let s=this._engine.statesByElement.get(m);s||(Ur(m,Se),Ur(m,Se+"-"+r),this._engine.statesByElement.set(m,s=new Map));let u=s.get(r);const f=new Ss(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&u&&f.absorbOptions(u.options),s.set(r,f),u||(u=Ys),f.value!==lo&&u.value===f.value){if(!function fn(c,m){const r=Object.keys(c),h=Object.keys(m);if(r.length!=h.length)return!1;for(let T=0;T<r.length;T++){const e=r[T];if(!m.hasOwnProperty(e)||c[e]!==m[e])return!1}return!0}(u.params,f.params)){const de=[],Te=e.matchStyles(u.value,u.params,de),qe=e.matchStyles(f.value,f.params,de);de.length?this._engine.reportError(de):this._engine.afterFlush(()=>{Y(m,Te),ae(m,qe)})}return}const O=Dt(this._engine.playersByElement,m,[]);O.forEach(de=>{de.namespaceId==this.id&&de.triggerName==r&&de.queued&&de.destroy()});let z=e.matchTransition(u.value,f.value,m,f.params),J=!1;if(!z){if(!T)return;z=e.fallbackTransition,J=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:m,triggerName:r,transition:z,fromState:u,toState:f,player:i,isFallbackTransition:J}),J||(Ur(m,Oa),i.onStart(()=>{ir(m,Oa)})),i.onDone(()=>{let de=this.players.indexOf(i);de>=0&&this.players.splice(de,1);const Te=this._engine.playersByElement.get(m);if(Te){let qe=Te.indexOf(i);qe>=0&&Te.splice(qe,1)}}),this.players.push(i),O.push(i),i}deregister(m){this._triggers.delete(m),this._engine.statesByElement.forEach(r=>r.delete(m)),this._elementListeners.forEach((r,h)=>{this._elementListeners.set(h,r.filter(T=>T.name!=m))})}clearElementCache(m){this._engine.statesByElement.delete(m),this._elementListeners.delete(m);const r=this._engine.playersByElement.get(m);r&&(r.forEach(h=>h.destroy()),this._engine.playersByElement.delete(m))}_signalRemovalForInnerTriggers(m,r){const h=this._engine.driver.query(m,re,!0);h.forEach(T=>{if(T[eo])return;const e=this._engine.fetchNamespacesByElement(T);e.size?e.forEach(i=>i.triggerLeaveAnimation(T,r,!1,!0)):this.clearElementCache(T)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(T=>this.clearElementCache(T)))}triggerLeaveAnimation(m,r,h,T){const e=this._engine.statesByElement.get(m),i=new Map;if(e){const s=[];if(e.forEach((u,f)=>{if(i.set(f,u.value),this._triggers.has(f)){const x=this.trigger(m,f,lo,T);x&&s.push(x)}}),s.length)return this._engine.markElementAsRemoved(this.id,m,!0,r,i),h&&ct(s).onDone(()=>this._engine.processLeaveNode(m)),!0}return!1}prepareLeaveAnimationListeners(m){const r=this._elementListeners.get(m),h=this._engine.statesByElement.get(m);if(r&&h){const T=new Set;r.forEach(e=>{const i=e.name;if(T.has(i))return;T.add(i);const u=this._triggers.get(i).fallbackTransition,f=h.get(i)||Ys,x=new Ss(lo),S=new Fa(this.id,i,m);this._engine.totalQueuedPlayers++,this._queue.push({element:m,triggerName:i,transition:u,fromState:f,toState:x,player:S,isFallbackTransition:!0})})}}removeNode(m,r){const h=this._engine;if(m.childElementCount&&this._signalRemovalForInnerTriggers(m,r),this.triggerLeaveAnimation(m,r,!0))return;let T=!1;if(h.totalAnimations){const e=h.players.length?h.playersByQueriedElement.get(m):[];if(e&&e.length)T=!0;else{let i=m;for(;i=i.parentNode;)if(h.statesByElement.get(i)){T=!0;break}}}if(this.prepareLeaveAnimationListeners(m),T)h.markElementAsRemoved(this.id,m,!1,r);else{const e=m[eo];(!e||e===Yr)&&(h.afterFlush(()=>this.clearElementCache(m)),h.destroyInnerAnimations(m),h._onRemovalComplete(m,r))}}insertNode(m,r){Ur(m,this._hostClassName)}drainQueuedTransitions(m){const r=[];return this._queue.forEach(h=>{const T=h.player;if(T.destroyed)return;const e=h.element,i=this._elementListeners.get(e);i&&i.forEach(s=>{if(s.name==h.triggerName){const u=rt(e,h.triggerName,h.fromState.value,h.toState.value);u._data=m,fi(h.player,s.phase,u,s.callback)}}),T.markedForDestroy?this._engine.afterFlush(()=>{T.destroy()}):r.push(h)}),this._queue=[],r.sort((h,T)=>{const e=h.transition.ast.depCount,i=T.transition.ast.depCount;return 0==e||0==i?e-i:this._engine.driver.containsElement(h.element,T.element)?1:-1})}destroy(m){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,m)}elementContainsData(m){let r=!1;return this._elementListeners.has(m)&&(r=!0),r=!!this._queue.find(h=>h.element===m)||r,r}}class Ts{_onRemovalComplete(m,r){this.onRemovalComplete(m,r)}constructor(m,r,h){this.bodyNode=m,this.driver=r,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(T,e)=>{}}get queuedPlayers(){const m=[];return this._namespaceList.forEach(r=>{r.players.forEach(h=>{h.queued&&m.push(h)})}),m}createNamespace(m,r){const h=new ms(m,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(h,r):(this.newHostElements.set(r,h),this.collectEnterElement(r)),this._namespaceLookup[m]=h}_balanceNamespaceList(m,r){const h=this._namespaceList,T=this.namespacesByHostElement;if(h.length-1>=0){let i=!1,s=this.driver.getParentElement(r);for(;s;){const u=T.get(s);if(u){const f=h.indexOf(u);h.splice(f+1,0,m),i=!0;break}s=this.driver.getParentElement(s)}i||h.unshift(m)}else h.push(m);return T.set(r,m),m}register(m,r){let h=this._namespaceLookup[m];return h||(h=this.createNamespace(m,r)),h}registerTrigger(m,r,h){let T=this._namespaceLookup[m];T&&T.register(r,h)&&this.totalAnimations++}destroy(m,r){if(!m)return;const h=this._fetchNamespace(m);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[m];const T=this._namespaceList.indexOf(h);T>=0&&this._namespaceList.splice(T,1)}),this.afterFlushAnimationsDone(()=>h.destroy(r))}_fetchNamespace(m){return this._namespaceLookup[m]}fetchNamespacesByElement(m){const r=new Set,h=this.statesByElement.get(m);if(h)for(let T of h.values())if(T.namespaceId){const e=this._fetchNamespace(T.namespaceId);e&&r.add(e)}return r}trigger(m,r,h,T){if(Lr(r)){const e=this._fetchNamespace(m);if(e)return e.trigger(r,h,T),!0}return!1}insertNode(m,r,h,T){if(!Lr(r))return;const e=r[eo];if(e&&e.setForRemoval){e.setForRemoval=!1,e.setForMove=!0;const i=this.collectedLeaveElements.indexOf(r);i>=0&&this.collectedLeaveElements.splice(i,1)}if(m){const i=this._fetchNamespace(m);i&&i.insertNode(r,h)}T&&this.collectEnterElement(r)}collectEnterElement(m){this.collectedEnterElements.push(m)}markElementAsDisabled(m,r){r?this.disabledNodes.has(m)||(this.disabledNodes.add(m),Ur(m,Ds)):this.disabledNodes.has(m)&&(this.disabledNodes.delete(m),ir(m,Ds))}removeNode(m,r,h,T){if(Lr(r)){const e=m?this._fetchNamespace(m):null;if(e?e.removeNode(r,T):this.markElementAsRemoved(m,r,!1,T),h){const i=this.namespacesByHostElement.get(r);i&&i.id!==m&&i.removeNode(r,T)}}else this._onRemovalComplete(r,T)}markElementAsRemoved(m,r,h,T,e){this.collectedLeaveElements.push(r),r[eo]={namespaceId:m,setForRemoval:T,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:e}}listen(m,r,h,T,e){return Lr(r)?this._fetchNamespace(m).listen(r,h,T,e):()=>{}}_buildInstruction(m,r,h,T,e){return m.transition.build(this.driver,m.element,m.fromState.value,m.toState.value,h,T,m.fromState.options,m.toState.options,r,e)}destroyInnerAnimations(m){let r=this.driver.query(m,re,!0);r.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(m,K,!0),r.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(m){const r=this.playersByElement.get(m);r&&r.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(m){const r=this.playersByQueriedElement.get(m);r&&r.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(m=>{if(this.players.length)return ct(this.players).onDone(()=>m());m()})}processLeaveNode(m){const r=m[eo];if(r&&r.setForRemoval){if(m[eo]=Yr,r.namespaceId){this.destroyInnerAnimations(m);const h=this._fetchNamespace(r.namespaceId);h&&h.clearElementCache(m)}this._onRemovalComplete(m,r.setForRemoval)}m.classList?.contains(Ds)&&this.markElementAsDisabled(m,!1),this.driver.query(m,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(m=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,T)=>this._balanceNamespaceList(h,T)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)Ur(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{r=this._flushAnimations(h,m)}finally{for(let T=0;T<h.length;T++)h[T]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],r.length?ct(r).onDone(()=>{h.forEach(T=>T())}):h.forEach(T=>T())}}reportError(m){throw function ft(c){return new a.vHH(3402,!1)}()}_flushAnimations(m,r){const h=new Jr,T=[],e=new Map,i=[],s=new Map,u=new Map,f=new Map,x=new Set;this.disabledNodes.forEach(Xi=>{x.add(Xi);const rn=this.driver.query(Xi,".ng-animate-queued",!0);for(let dn=0;dn<rn.length;dn++)x.add(rn[dn])});const S=this.bodyNode,O=Array.from(this.statesByElement.keys()),z=Vr(O,this.collectedEnterElements),J=new Map;let de=0;z.forEach((Xi,rn)=>{const dn=Li+de++;J.set(rn,dn),Xi.forEach(Qn=>Ur(Qn,dn))});const Te=[],qe=new Set,_t=new Set;for(let Xi=0;Xi<this.collectedLeaveElements.length;Xi++){const rn=this.collectedLeaveElements[Xi],dn=rn[eo];dn&&dn.setForRemoval&&(Te.push(rn),qe.add(rn),dn.hasAnimation?this.driver.query(rn,".ng-star-inserted",!0).forEach(Qn=>qe.add(Qn)):_t.add(rn))}const Ht=new Map,si=Vr(O,Array.from(qe));si.forEach((Xi,rn)=>{const dn=pn+de++;Ht.set(rn,dn),Xi.forEach(Qn=>Ur(Qn,dn))}),m.push(()=>{z.forEach((Xi,rn)=>{const dn=J.get(rn);Xi.forEach(Qn=>ir(Qn,dn))}),si.forEach((Xi,rn)=>{const dn=Ht.get(rn);Xi.forEach(Qn=>ir(Qn,dn))}),Te.forEach(Xi=>{this.processLeaveNode(Xi)})});const Mi=[],Ni=[];for(let Xi=this._namespaceList.length-1;Xi>=0;Xi--)this._namespaceList[Xi].drainQueuedTransitions(r).forEach(dn=>{const Qn=dn.player,Oo=dn.element;if(Mi.push(Qn),this.collectedEnterElements.length){const ls=Oo[eo];if(ls&&ls.setForMove){if(ls.previousTriggersValues&&ls.previousTriggersValues.has(dn.triggerName)){const td=ls.previousTriggersValues.get(dn.triggerName),Ja=this.statesByElement.get(dn.element);if(Ja&&Ja.has(dn.triggerName)){const Op=Ja.get(dn.triggerName);Op.value=td,Ja.set(dn.triggerName,Op)}}return void Qn.destroy()}}const Xa=!S||!this.driver.containsElement(S,Oo),oa=Ht.get(Oo),Ol=J.get(Oo),Pr=this._buildInstruction(dn,h,Ol,oa,Xa);if(Pr.errors&&Pr.errors.length)return void Ni.push(Pr);if(Xa)return Qn.onStart(()=>Y(Oo,Pr.fromStyles)),Qn.onDestroy(()=>ae(Oo,Pr.toStyles)),void T.push(Qn);if(dn.isFallbackTransition)return Qn.onStart(()=>Y(Oo,Pr.fromStyles)),Qn.onDestroy(()=>ae(Oo,Pr.toStyles)),void T.push(Qn);const ed=[];Pr.timelines.forEach(ls=>{ls.stretchStartingKeyframe=!0,this.disabledNodes.has(ls.element)||ed.push(ls)}),Pr.timelines=ed,h.append(Oo,Pr.timelines),i.push({instruction:Pr,player:Qn,element:Oo}),Pr.queriedElements.forEach(ls=>Dt(s,ls,[]).push(Qn)),Pr.preStyleProps.forEach((ls,td)=>{if(ls.size){let Ja=u.get(td);Ja||u.set(td,Ja=new Set),ls.forEach((Op,zw)=>Ja.add(zw))}}),Pr.postStyleProps.forEach((ls,td)=>{let Ja=f.get(td);Ja||f.set(td,Ja=new Set),ls.forEach((Op,zw)=>Ja.add(zw))})});if(Ni.length){const Xi=[];Ni.forEach(rn=>{Xi.push(function Je(c,m){return new a.vHH(3505,!1)}())}),Mi.forEach(rn=>rn.destroy()),this.reportError(Xi)}const Vi=new Map,ri=new Map;i.forEach(Xi=>{const rn=Xi.element;h.has(rn)&&(ri.set(rn,rn),this._beforeAnimationBuild(Xi.player.namespaceId,Xi.instruction,Vi))}),T.forEach(Xi=>{const rn=Xi.element;this._getPreviousPlayers(rn,!1,Xi.namespaceId,Xi.triggerName,null).forEach(Qn=>{Dt(Vi,rn,[]).push(Qn),Qn.destroy()})});const tn=Te.filter(Xi=>La(Xi,u,f)),Jn=new Map;sr(Jn,this.driver,_t,f,he.l3).forEach(Xi=>{La(Xi,u,f)&&tn.push(Xi)});const Pl=new Map;z.forEach((Xi,rn)=>{sr(Pl,this.driver,new Set(Xi),u,he.k1)}),tn.forEach(Xi=>{const rn=Jn.get(Xi),dn=Pl.get(Xi);Jn.set(Xi,new Map([...Array.from(rn?.entries()??[]),...Array.from(dn?.entries()??[])]))});const kc=[],kp=[],tm={};i.forEach(Xi=>{const{element:rn,player:dn,instruction:Qn}=Xi;if(h.has(rn)){if(x.has(rn))return dn.onDestroy(()=>ae(rn,Qn.toStyles)),dn.disabled=!0,dn.overrideTotalTime(Qn.totalTime),void T.push(dn);let Oo=tm;if(ri.size>1){let oa=rn;const Ol=[];for(;oa=oa.parentNode;){const Pr=ri.get(oa);if(Pr){Oo=Pr;break}Ol.push(oa)}Ol.forEach(Pr=>ri.set(Pr,Oo))}const Xa=this._buildAnimation(dn.namespaceId,Qn,Vi,e,Pl,Jn);if(dn.setRealPlayer(Xa),Oo===tm)kc.push(dn);else{const oa=this.playersByElement.get(Oo);oa&&oa.length&&(dn.parentPlayer=ct(oa)),T.push(dn)}}else Y(rn,Qn.fromStyles),dn.onDestroy(()=>ae(rn,Qn.toStyles)),kp.push(dn),x.has(rn)&&T.push(dn)}),kp.forEach(Xi=>{const rn=e.get(Xi.element);if(rn&&rn.length){const dn=ct(rn);Xi.setRealPlayer(dn)}}),T.forEach(Xi=>{Xi.parentPlayer?Xi.syncPlayerEvents(Xi.parentPlayer):Xi.destroy()});for(let Xi=0;Xi<Te.length;Xi++){const rn=Te[Xi],dn=rn[eo];if(ir(rn,pn),dn&&dn.hasAnimation)continue;let Qn=[];if(s.size){let Xa=s.get(rn);Xa&&Xa.length&&Qn.push(...Xa);let oa=this.driver.query(rn,K,!0);for(let Ol=0;Ol<oa.length;Ol++){let Pr=s.get(oa[Ol]);Pr&&Pr.length&&Qn.push(...Pr)}}const Oo=Qn.filter(Xa=>!Xa.destroyed);Oo.length?Fl(this,rn,Oo):this.processLeaveNode(rn)}return Te.length=0,kc.forEach(Xi=>{this.players.push(Xi),Xi.onDone(()=>{Xi.destroy();const rn=this.players.indexOf(Xi);this.players.splice(rn,1)}),Xi.play()}),kc}elementContainsData(m,r){let h=!1;const T=r[eo];return T&&T.setForRemoval&&(h=!0),this.playersByElement.has(r)&&(h=!0),this.playersByQueriedElement.has(r)&&(h=!0),this.statesByElement.has(r)&&(h=!0),this._fetchNamespace(m).elementContainsData(r)||h}afterFlush(m){this._flushFns.push(m)}afterFlushAnimationsDone(m){this._whenQuietFns.push(m)}_getPreviousPlayers(m,r,h,T,e){let i=[];if(r){const s=this.playersByQueriedElement.get(m);s&&(i=s)}else{const s=this.playersByElement.get(m);if(s){const u=!e||e==lo;s.forEach(f=>{f.queued||!u&&f.triggerName!=T||i.push(f)})}}return(h||T)&&(i=i.filter(s=>!(h&&h!=s.namespaceId||T&&T!=s.triggerName))),i}_beforeAnimationBuild(m,r,h){const e=r.element,i=r.isRemovalTransition?void 0:m,s=r.isRemovalTransition?void 0:r.triggerName;for(const u of r.timelines){const f=u.element,x=f!==e,S=Dt(h,f,[]);this._getPreviousPlayers(f,x,i,s,r.toState).forEach(z=>{const J=z.getRealPlayer();J.beforeDestroy&&J.beforeDestroy(),z.destroy(),S.push(z)})}Y(e,r.fromStyles)}_buildAnimation(m,r,h,T,e,i){const s=r.triggerName,u=r.element,f=[],x=new Set,S=new Set,O=r.timelines.map(J=>{const de=J.element;x.add(de);const Te=de[eo];if(Te&&Te.removedBeforeQueried)return new he.ZN(J.duration,J.delay);const qe=de!==u,_t=function Da(c){const m=[];return Lo(c,m),m}((h.get(de)||Do).map(Vi=>Vi.getRealPlayer())).filter(Vi=>!!Vi.element&&Vi.element===de),Ht=e.get(de),si=i.get(de),Mi=Ti(0,this._normalizer,0,J.keyframes,Ht,si),Ni=this._buildPlayer(J,Mi,_t);if(J.subTimeline&&T&&S.add(de),qe){const Vi=new Fa(m,s,de);Vi.setRealPlayer(Ni),f.push(Vi)}return Ni});f.forEach(J=>{Dt(this.playersByQueriedElement,J.element,[]).push(J),J.onDone(()=>function Ma(c,m,r){let h=c.get(m);if(h){if(h.length){const T=h.indexOf(r);h.splice(T,1)}0==h.length&&c.delete(m)}return h}(this.playersByQueriedElement,J.element,J))}),x.forEach(J=>Ur(J,me));const z=ct(O);return z.onDestroy(()=>{x.forEach(J=>ir(J,me)),ae(u,r.toStyles)}),S.forEach(J=>{Dt(T,J,[]).push(z)}),z}_buildPlayer(m,r,h){return r.length>0?this.driver.animate(m.element,r,m.duration,m.delay,m.easing,h):new he.ZN(m.duration,m.delay)}}class Fa{constructor(m,r,h){this.namespaceId=m,this.triggerName=r,this.element=h,this._player=new he.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(m){this._containsRealPlayer||(this._player=m,this._queuedCallbacks.forEach((r,h)=>{r.forEach(T=>fi(m,h,void 0,T))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(m.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(m){this.totalTime=m}syncPlayerEvents(m){const r=this._player;r.triggerCallback&&m.onStart(()=>r.triggerCallback("start")),m.onDone(()=>this.finish()),m.onDestroy(()=>this.destroy())}_queueEvent(m,r){Dt(this._queuedCallbacks,m,[]).push(r)}onDone(m){this.queued&&this._queueEvent("done",m),this._player.onDone(m)}onStart(m){this.queued&&this._queueEvent("start",m),this._player.onStart(m)}onDestroy(m){this.queued&&this._queueEvent("destroy",m),this._player.onDestroy(m)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(m){this.queued||this._player.setPosition(m)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(m){const r=this._player;r.triggerCallback&&r.triggerCallback(m)}}function Lr(c){return c&&1===c.nodeType}function da(c,m){const r=c.style.display;return c.style.display=m??"none",r}function sr(c,m,r,h,T){const e=[];r.forEach(u=>e.push(da(u)));const i=[];h.forEach((u,f)=>{const x=new Map;u.forEach(S=>{const O=m.computeStyle(f,S,T);x.set(S,O),(!O||0==O.length)&&(f[eo]=Ea,i.push(f))}),c.set(f,x)});let s=0;return r.forEach(u=>da(u,e[s++])),i}function Vr(c,m){const r=new Map;if(c.forEach(s=>r.set(s,[])),0==m.length)return r;const h=1,T=new Set(m),e=new Map;function i(s){if(!s)return h;let u=e.get(s);if(u)return u;const f=s.parentNode;return u=r.has(f)?f:T.has(f)?h:i(f),e.set(s,u),u}return m.forEach(s=>{const u=i(s);u!==h&&r.get(u).push(s)}),r}function Ur(c,m){c.classList?.add(m)}function ir(c,m){c.classList?.remove(m)}function Fl(c,m,r){ct(r).onDone(()=>c.processLeaveNode(m))}function Lo(c,m){for(let r=0;r<c.length;r++){const h=c[r];h instanceof he.ZE?Lo(h.players,m):m.push(h)}}function La(c,m,r){const h=r.get(c);if(!h)return!1;let T=m.get(c);return T?h.forEach(e=>T.add(e)):m.set(c,h),r.delete(c),!0}class on{constructor(m,r,h){this.bodyNode=m,this._driver=r,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(T,e)=>{},this._transitionEngine=new Ts(m,r,h),this._timelineEngine=new Rl(m,r,h),this._transitionEngine.onRemovalComplete=(T,e)=>this.onRemovalComplete(T,e)}registerTrigger(m,r,h,T,e){const i=m+"-"+T;let s=this._triggerCache[i];if(!s){const u=[],f=[],x=ji(this._driver,e,u,f);if(u.length)throw function xi(c,m){return new a.vHH(3404,!1)}();s=function Ca(c,m,r){return new Pa(c,m,r)}(T,x,this._normalizer),this._triggerCache[i]=s}this._transitionEngine.registerTrigger(r,T,s)}register(m,r){this._transitionEngine.register(m,r)}destroy(m,r){this._transitionEngine.destroy(m,r)}onInsert(m,r,h,T){this._transitionEngine.insertNode(m,r,h,T)}onRemove(m,r,h,T){this._transitionEngine.removeNode(m,r,T||!1,h)}disableAnimations(m,r){this._transitionEngine.markElementAsDisabled(m,r)}process(m,r,h,T){if("@"==h.charAt(0)){const[e,i]=_i(h);this._timelineEngine.command(e,r,i,T)}else this._transitionEngine.trigger(m,r,h,T)}listen(m,r,h,T,e){if("@"==h.charAt(0)){const[i,s]=_i(h);return this._timelineEngine.listen(i,r,s,e)}return this._transitionEngine.listen(m,r,h,T,e)}flush(m=-1){this._transitionEngine.flush(m)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let vn=(()=>{class c{constructor(r,h,T){this._element=r,this._startStyles=h,this._endStyles=T,this._state=0;let e=c.initialStylesByElement.get(r);e||c.initialStylesByElement.set(r,e=new Map),this._initialStyles=e}start(){this._state<1&&(this._startStyles&&ae(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ae(this._element,this._initialStyles),this._endStyles&&(ae(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(Y(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Y(this._element,this._endStyles),this._endStyles=null),ae(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function Bn(c){let m=null;return c.forEach((r,h)=>{(function Is(c){return"display"===c||"position"===c})(h)&&(m=m||new Map,m.set(h,r))}),m}class en{constructor(m,r,h,T){this.element=m,this.keyframes=r,this.options=h,this._specialStyles=T,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(m=>m()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const m=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,m,this.options),this._finalKeyframe=m.length?m[m.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(m){const r=[];return m.forEach(h=>{r.push(Object.fromEntries(h))}),r}_triggerWebAnimation(m,r,h){return m.animate(this._convertKeyframesToObject(r),h)}onStart(m){this._originalOnStartFns.push(m),this._onStartFns.push(m)}onDone(m){this._originalOnDoneFns.push(m),this._onDoneFns.push(m)}onDestroy(m){this._onDestroyFns.push(m)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(m=>m()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(m=>m()),this._onDestroyFns=[])}setPosition(m){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=m*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const m=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,T)=>{"offset"!==T&&m.set(T,this._finished?h:Mr(this.element,T))}),this.currentSnapshot=m}triggerCallback(m){const r="start"===m?this._onStartFns:this._onDoneFns;r.forEach(h=>h()),r.length=0}}class As{validateStyleProperty(m){return!0}validateAnimatableStyleProperty(m){return!0}matchesElement(m,r){return!1}containsElement(m,r){return be(m,r)}getParentElement(m){return Pt(m)}query(m,r,h){return _e(m,r,h)}computeStyle(m,r,h){return window.getComputedStyle(m)[r]}animate(m,r,h,T,e,i=[]){const u={duration:h,delay:T,fill:0==T?"both":"forwards"};e&&(u.easing=e);const f=new Map,x=i.filter(z=>z instanceof en);(function cs(c,m){return 0===c||0===m})(h,T)&&x.forEach(z=>{z.currentSnapshot.forEach((J,de)=>f.set(de,J))});let S=function St(c){return c.length?c[0]instanceof Map?c:c.map(m=>We(m)):[]}(r).map(z=>Tt(z));S=function Ro(c,m,r){if(r.size&&m.length){let h=m[0],T=[];if(r.forEach((e,i)=>{h.has(i)||T.push(i),h.set(i,e)}),T.length)for(let e=1;e<m.length;e++){let i=m[e];T.forEach(s=>i.set(s,Mr(c,s)))}}return m}(m,S,f);const O=function ps(c,m){let r=null,h=null;return Array.isArray(m)&&m.length?(r=Bn(m[0]),m.length>1&&(h=Bn(m[m.length-1]))):m instanceof Map&&(r=Bn(m)),r||h?new vn(c,r,h):null}(m,S);return new en(m,S,u,O)}}var X=j(6895);let q=(()=>{class c extends he._j{constructor(r,h){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(h.body,{id:"0",encapsulation:a.ifc.None,styles:[],data:{animation:[]}})}build(r){const h=this._nextAnimationId.toString();this._nextAnimationId++;const T=Array.isArray(r)?(0,he.vP)(r):r;return Ut(this._renderer,null,h,"register",[T]),new $(h,this._renderer)}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.FYo),a.LFG(X.K0))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();class $ extends he.LC{constructor(m,r){super(),this._id=m,this._renderer=r}create(m,r){return new Me(this._id,m,r||{},this._renderer)}}class Me{constructor(m,r,h,T){this.id=m,this.element=r,this._renderer=T,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(m,r){return this._renderer.listen(this.element,`@@${this.id}:${m}`,r)}_command(m,...r){return Ut(this._renderer,this.element,this.id,m,r)}onDone(m){this._listen("done",m)}onStart(m){this._listen("start",m)}onDestroy(m){this._listen("destroy",m)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(m){this._command("setPosition",m)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ut(c,m,r,h,T){return c.setProperty(m,`@@${r}:${h}`,T)}const mr="@.disabled";let jt=(()=>{class c{constructor(r,h,T){this.delegate=r,this.engine=h,this._zone=T,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),h.onRemovalComplete=(e,i)=>{const s=i?.parentNode(e);s&&i.removeChild(s,e)}}createRenderer(r,h){const e=this.delegate.createRenderer(r,h);if(!(r&&h&&h.data&&h.data.animation)){let x=this._rendererCache.get(e);return x||(x=new gn("",e,this.engine,()=>this._rendererCache.delete(e)),this._rendererCache.set(e,x)),x}const i=h.id,s=h.id+"-"+this._currentId;this._currentId++,this.engine.register(s,r);const u=x=>{Array.isArray(x)?x.forEach(u):this.engine.registerTrigger(i,s,r,x.name,x)};return h.data.animation.forEach(u),new ks(this,s,e,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,h,T){r>=0&&r<this._microtaskId?this._zone.run(()=>h(T)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[i,s]=e;i(s)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,T]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.FYo),a.LFG(on),a.LFG(a.R0b))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();class gn{constructor(m,r,h,T){this.namespaceId=m,this.delegate=r,this.engine=h,this._onDestroy=T,this.destroyNode=this.delegate.destroyNode?e=>r.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(m,r){return this.delegate.createElement(m,r)}createComment(m){return this.delegate.createComment(m)}createText(m){return this.delegate.createText(m)}appendChild(m,r){this.delegate.appendChild(m,r),this.engine.onInsert(this.namespaceId,r,m,!1)}insertBefore(m,r,h,T=!0){this.delegate.insertBefore(m,r,h),this.engine.onInsert(this.namespaceId,r,m,T)}removeChild(m,r,h){this.engine.onRemove(this.namespaceId,r,this.delegate,h)}selectRootElement(m,r){return this.delegate.selectRootElement(m,r)}parentNode(m){return this.delegate.parentNode(m)}nextSibling(m){return this.delegate.nextSibling(m)}setAttribute(m,r,h,T){this.delegate.setAttribute(m,r,h,T)}removeAttribute(m,r,h){this.delegate.removeAttribute(m,r,h)}addClass(m,r){this.delegate.addClass(m,r)}removeClass(m,r){this.delegate.removeClass(m,r)}setStyle(m,r,h,T){this.delegate.setStyle(m,r,h,T)}removeStyle(m,r,h){this.delegate.removeStyle(m,r,h)}setProperty(m,r,h){"@"==r.charAt(0)&&r==mr?this.disableAnimations(m,!!h):this.delegate.setProperty(m,r,h)}setValue(m,r){this.delegate.setValue(m,r)}listen(m,r,h){return this.delegate.listen(m,r,h)}disableAnimations(m,r){this.engine.disableAnimations(m,r)}}class ks extends gn{constructor(m,r,h,T,e){super(r,h,T,e),this.factory=m,this.namespaceId=r}setProperty(m,r,h){"@"==r.charAt(0)?"."==r.charAt(1)&&r==mr?this.disableAnimations(m,h=void 0===h||!!h):this.engine.process(this.namespaceId,m,r.slice(1),h):this.delegate.setProperty(m,r,h)}listen(m,r,h){if("@"==r.charAt(0)){const T=function ar(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(m);let e=r.slice(1),i="";return"@"!=e.charAt(0)&&([e,i]=function br(c){const m=c.indexOf(".");return[c.substring(0,m),c.slice(m+1)]}(e)),this.engine.listen(this.namespaceId,T,e,i,s=>{this.factory.scheduleListenerCallback(s._data||-1,h,s)})}return this.delegate.listen(m,r,h)}}let No=(()=>{class c extends on{constructor(r,h,T,e){super(r.body,h,T)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(X.K0),a.LFG(et),a.LFG(Yn),a.LFG(a.z2F))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();const el=[{provide:he._j,useClass:q},{provide:Yn,useFactory:function Na(){return new xa}},{provide:on,useClass:No},{provide:a.FYo,useFactory:function zo(c,m,r){return new jt(c,m,r)},deps:[w.se,on,a.R0b]}],fs=[{provide:et,useFactory:()=>new As},{provide:a.QbO,useValue:"BrowserAnimations"},...el],za=[{provide:et,useClass:ze},{provide:a.QbO,useValue:"NoopAnimations"},...el];let Sa=(()=>{class c{static withConfig(r){return{ngModule:c,providers:r.disableAnimations?za:fs}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({providers:fs,imports:[w.b2]}),c})(),Xo=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[X.ez]}),c})();function gs(c,m,r,h,T,e,i){try{var s=c[e](i),u=s.value}catch(f){return void r(f)}s.done?m(u):Promise.resolve(u).then(h,T)}function In(c){return function(){var m=this,r=arguments;return new Promise(function(h,T){var e=c.apply(m,r);function i(u){gs(e,h,T,i,s,"next",u)}function s(u){gs(e,h,T,i,s,"throw",u)}i(void 0)})}}var Kr=j(1943),xr=j(7579);class Nl extends xr.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(m){const{hasError:r,_hasValue:h,_value:T,thrownError:e,isStopped:i,_isComplete:s}=this;r?m.error(e):(i||s)&&(h&&m.next(T),m.complete())}next(m){this.isStopped||(this._value=m,this._hasValue=!0)}complete(){const{_hasValue:m,_value:r,_isComplete:h}=this;h||(this._isComplete=!0,m&&super.next(r),super.complete())}}var Jo=j(727),Ba=j(590);let lr=(()=>{class c{constructor(r){this.zone=r,this.mapCreated=new Nl,this.mapLoaded=new Nl,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new Jo.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(r){this.zone.onStable.pipe((0,Ba.P)()).subscribe(()=>{this.createMap(r.mapOptions),this.hookEvents(r.mapEvents),this.mapEvents=r.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),r.mapOptions.terrain&&this.mapInstance.on("load",()=>{this.updateTerrain(r.mapOptions.terrain)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(r)})}updateMaxZoom(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(r)})}updateMinPitch(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(r)})}updateMaxPitch(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(r)})}updateRenderWorldCopies(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(r)})}updateScrollZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(r)})}updateMaxBounds(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(r)})}updateTerrain(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setTerrain(r)})}getTerrain(){return this.zone.runOutsideAngular(()=>this.mapInstance.getTerrain())}changeCanvasCursor(r){this.mapInstance.getCanvasContainer().style.cursor=r}queryRenderedFeatures(r,h){return this.mapInstance.queryRenderedFeatures(r,h)}panTo(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(r,h)})}move(r,h,T,e,i,s){return this.zone.runOutsideAngular(()=>{this.mapInstance[r]({...h,zoom:T??this.mapInstance.getZoom(),center:e??this.mapInstance.getCenter(),bearing:i??this.mapInstance.getBearing(),pitch:s??this.mapInstance.getPitch()})})}addLayer(r,h,T){this.zone.runOutsideAngular(()=>{Object.keys(r.layerOptions).forEach(e=>{void 0===r.layerOptions[e]&&delete r.layerOptions[e]}),this.mapInstance.addLayer(r.layerOptions,T),h&&(r.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerClick.emit(e)})}),r.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerDblClick.emit(e)})}),r.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerMouseDown.emit(e)})}),r.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerMouseUp.emit(e)})}),r.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerMouseEnter.emit(e)})}),r.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerMouseLeave.emit(e)})}),r.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerMouseMove.emit(e)})}),r.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerMouseOver.emit(e)})}),r.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerMouseOut.emit(e)})}),r.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerContextMenu.emit(e)})}),r.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerTouchStart.emit(e)})}),r.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerTouchEnd.emit(e)})}),r.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",r.layerOptions.id,e=>{this.zone.run(()=>{r.layerEvents.layerTouchCancel.emit(e)})}))})}removeLayer(r){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(r)&&this.mapInstance.removeLayer(r)})}addMarker(r){const h={offset:r.markersOptions.offset,anchor:r.markersOptions.anchor,draggable:!!r.markersOptions.draggable,rotationAlignment:r.markersOptions.rotationAlignment,pitchAlignment:r.markersOptions.pitchAlignment,clickTolerance:r.markersOptions.clickTolerance};r.markersOptions.element.childNodes.length>0&&(h.element=r.markersOptions.element);const T=new Kr.Marker(h);return r.markersEvents.markerDragStart.observers.length&&T.on("dragstart",i=>{if(i){const{target:s}=i;this.zone.run(()=>{r.markersEvents.markerDragStart.emit(s)})}}),r.markersEvents.markerDrag.observers.length&&T.on("drag",i=>{if(i){const{target:s}=i;this.zone.run(()=>{r.markersEvents.markerDrag.emit(s)})}}),r.markersEvents.markerDragEnd.observers.length&&T.on("dragend",i=>{if(i){const{target:s}=i;this.zone.run(()=>{r.markersEvents.markerDragEnd.emit(s)})}}),T.setLngLat(r.markersOptions.feature?r.markersOptions.feature.geometry.coordinates:r.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(T.addTo(this.mapInstance),T))}removeMarker(r){this.markersToRemove.push(r)}createPopup(r,h){return this.zone.runOutsideAngular(()=>{Object.keys(r.popupOptions).forEach(e=>void 0===r.popupOptions[e]&&delete r.popupOptions[e]);const T=new Kr.Popup(r.popupOptions);return T.setDOMContent(h),r.popupEvents.popupClose.observers.length&&T.on("close",()=>{this.zone.run(()=>{r.popupEvents.popupClose.emit()})}),r.popupEvents.popupOpen.observers.length&&T.on("open",()=>{this.zone.run(()=>{r.popupEvents.popupOpen.emit()})}),T})}addPopupToMap(r,h,T=!1){return this.zone.runOutsideAngular(()=>{T&&r._listeners&&delete r._listeners.open,r.setLngLat(h),r.addTo(this.mapInstance)})}addPopupToMarker(r,h){return this.zone.runOutsideAngular(()=>{r.setPopup(h)})}removePopupFromMap(r,h=!1){h&&r._listeners&&delete r._listeners.close,this.popupsToRemove.push(r)}removePopupFromMarker(r){return this.zone.runOutsideAngular(()=>{r.setPopup(void 0)})}addControl(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(r,h)})}removeControl(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(r)})}loadAndAddImage(r,h,T){var e=this;return In(function*(){return e.zone.runOutsideAngular(()=>new Promise((i,s)=>{e.mapInstance.loadImage(h,(u,f)=>{u?s(u):(e.addImage(r,f,T),i())})}))})()}addImage(r,h,T){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(r,h,T)})}removeImage(r){this.imageIdsToRemove.push(r)}addSource(r,h){return this.zone.runOutsideAngular(()=>{Object.keys(h).forEach(T=>void 0===h[T]&&delete h[T]),this.mapInstance.addSource(r,h)})}getSource(r){return this.mapInstance.getSource(r)}removeSource(r){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(r).forEach(h=>this.mapInstance.removeLayer(h.id)),this.mapInstance.removeSource(r)})}setAllLayerPaintProperty(r,h){return this.zone.runOutsideAngular(()=>{Object.keys(h).forEach(T=>{this.mapInstance.setPaintProperty(r,T,h[T])})})}setAllLayerLayoutProperty(r,h){return this.zone.runOutsideAngular(()=>{Object.keys(h).forEach(T=>{this.mapInstance.setLayoutProperty(r,T,h[T])})})}setLayerFilter(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(r,h)})}setLayerBefore(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(r,h)})}setLayerZoomRange(r,h,T){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(r,h||0,T||20)})}fitBounds(r,h){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(r,h)})}fitScreenCoordinates(r,h,T){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(r[0],r[1],h,T)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(r){a.R0b.assertNotInAngularZone(),Object.keys(r).forEach(T=>{void 0===r[T]&&delete r[T]}),this.mapInstance=new Kr.Map(r),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(r.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const r of this.markersToRemove)r.remove();this.markersToRemove=[]}removePopups(){for(const r of this.popupsToRemove)r.remove();this.popupsToRemove=[]}removeImages(){for(const r of this.imageIdsToRemove)this.mapInstance.removeImage(r);this.imageIdsToRemove=[]}findLayersBySourceId(r){const h=this.mapInstance.getStyle().layers;return null==h?[]:h.filter(T=>"source"in T&&T.source===r)}hookEvents(r){this.mapInstance.on("load",h=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{r.mapLoad.emit(h.target)})}),r.mapResize.observers.length&&this.mapInstance.on("resize",h=>this.zone.run(()=>{r.mapResize.emit(h)})),r.mapRemove.observers.length&&this.mapInstance.on("remove",h=>this.zone.run(()=>{r.mapRemove.emit(h)})),r.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",h=>this.zone.run(()=>{r.mapMouseDown.emit(h)})),r.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",h=>this.zone.run(()=>{r.mapMouseUp.emit(h)})),r.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",h=>this.zone.run(()=>{r.mapMouseMove.emit(h)})),r.mapClick.observers.length&&this.mapInstance.on("click",h=>this.zone.run(()=>{r.mapClick.emit(h)})),r.mapDblClick.observers.length&&this.mapInstance.on("dblclick",h=>this.zone.run(()=>{r.mapDblClick.emit(h)})),r.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",h=>this.zone.run(()=>{r.mapMouseOver.emit(h)})),r.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",h=>this.zone.run(()=>{r.mapMouseOut.emit(h)})),r.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",h=>this.zone.run(()=>{r.mapContextMenu.emit(h)})),r.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",h=>this.zone.run(()=>{r.mapTouchStart.emit(h)})),r.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",h=>this.zone.run(()=>{r.mapTouchEnd.emit(h)})),r.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",h=>this.zone.run(()=>{r.mapTouchMove.emit(h)})),r.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",h=>this.zone.run(()=>{r.mapTouchCancel.emit(h)})),r.mapWheel.observers.length&&this.mapInstance.on("wheel",h=>this.zone.run(()=>{r.mapWheel.emit(h)})),r.moveStart.observers.length&&this.mapInstance.on("movestart",h=>this.zone.run(()=>r.moveStart.emit(h))),r.move.observers.length&&this.mapInstance.on("move",h=>this.zone.run(()=>r.move.emit(h))),r.moveEnd.observers.length&&this.mapInstance.on("moveend",h=>this.zone.run(()=>r.moveEnd.emit(h))),r.mapDragStart.observers.length&&this.mapInstance.on("dragstart",h=>this.zone.run(()=>{r.mapDragStart.emit(h)})),r.mapDrag.observers.length&&this.mapInstance.on("drag",h=>this.zone.run(()=>{r.mapDrag.emit(h)})),r.mapDragEnd.observers.length&&this.mapInstance.on("dragend",h=>this.zone.run(()=>{r.mapDragEnd.emit(h)})),r.zoomStart.observers.length&&this.mapInstance.on("zoomstart",h=>this.zone.run(()=>r.zoomStart.emit(h))),r.zoomEvt.observers.length&&this.mapInstance.on("zoom",h=>this.zone.run(()=>r.zoomEvt.emit(h))),r.zoomEnd.observers.length&&this.mapInstance.on("zoomend",h=>this.zone.run(()=>r.zoomEnd.emit(h))),r.rotateStart.observers.length&&this.mapInstance.on("rotatestart",h=>this.zone.run(()=>r.rotateStart.emit(h))),r.rotate.observers.length&&this.mapInstance.on("rotate",h=>this.zone.run(()=>r.rotate.emit(h))),r.rotateEnd.observers.length&&this.mapInstance.on("rotateend",h=>this.zone.run(()=>r.rotateEnd.emit(h))),r.pitchStart.observers.length&&this.mapInstance.on("pitchstart",h=>this.zone.run(()=>r.pitchStart.emit(h))),r.pitchEvt.observers.length&&this.mapInstance.on("pitch",h=>this.zone.run(()=>r.pitchEvt.emit(h))),r.pitchEnd.observers.length&&this.mapInstance.on("pitchend",h=>this.zone.run(()=>r.pitchEnd.emit(h))),r.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",h=>this.zone.run(()=>r.boxZoomStart.emit(h))),r.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",h=>this.zone.run(()=>r.boxZoomEnd.emit(h))),r.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",h=>this.zone.run(()=>r.boxZoomCancel.emit(h))),r.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",h=>this.zone.run(()=>r.webGlContextLost.emit(h))),r.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",h=>this.zone.run(()=>r.webGlContextRestored.emit(h))),r.render.observers.length&&this.mapInstance.on("render",h=>this.zone.run(()=>r.render.emit(h))),r.mapError.observers.length&&this.mapInstance.on("error",h=>this.zone.run(()=>{r.mapError.emit(h)})),r.data.observers.length&&this.mapInstance.on("data",h=>this.zone.run(()=>r.data.emit(h))),r.styleData.observers.length&&this.mapInstance.on("styledata",h=>this.zone.run(()=>r.styleData.emit(h))),r.sourceData.observers.length&&this.mapInstance.on("sourcedata",h=>this.zone.run(()=>r.sourceData.emit(h))),r.dataLoading.observers.length&&this.mapInstance.on("dataloading",h=>this.zone.run(()=>r.dataLoading.emit(h))),r.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",h=>this.zone.run(()=>r.styleDataLoading.emit(h))),r.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",h=>this.zone.run(()=>r.sourceDataLoading.emit(h))),r.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",h=>this.zone.run(()=>r.styleImageMissing.emit(h))),r.idle.observers.length&&this.mapInstance.on("idle",h=>this.zone.run(()=>r.idle.emit(h)))}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(a.R0b))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c})();const Ta=["content"],tl=["*"];class Vo{constructor(m){this.container=m}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let Ln=(()=>{class c{constructor(r){this.mapService=r}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new Vo(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position)}))}ngOnDestroy(){this.mapService.mapInstance.hasControl(this.control)&&this.mapService.removeControl(this.control)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-control"]],viewQuery:function(r,h){if(1&r&&a.Gf(Ta,7),2&r){let T;a.iGM(T=a.CRH())&&(h.content=T.first)}},inputs:{position:"position"},ngContentSelectors:tl,decls:3,vars:0,consts:[[1,"maplibregl-ctrl"],["content",""]],template:function(r,h){1&r&&(a.F$t(),a.TgZ(0,"div",0,1),a.Hsn(2),a.qZA())},encapsulation:2,changeDetection:0}),c})();var Wr=j(4968),bn=j(9300),Qo=j(8505),_s=j(3900),Dr=j(2722),Va=j(5698),ua=j(8372);let go=(()=>{class c{constructor(r,h){this.mapService=r,this.zone=h,this.type="geojson",this.updateFeatureData=new xr.x,this.sub=new Jo.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const r=this.mapService.mapLoaded$.subscribe(()=>{this.init();const h=(0,Wr.R)(this.mapService.mapInstance,"styledata").pipe((0,bn.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(h)});this.sub.add(r)}ngOnChanges(r){if(this.sourceAdded&&((r.maxzoom&&!r.maxzoom.isFirstChange()||r.attribution&&!r.attribution.isFirstChange()||r.buffer&&!r.buffer.isFirstChange()||r.tolerance&&!r.tolerance.isFirstChange()||r.cluster&&!r.cluster.isFirstChange()||r.clusterRadius&&!r.clusterRadius.isFirstChange()||r.clusterMaxZoom&&!r.clusterMaxZoom.isFirstChange()||r.clusterMinPoints&&!r.clusterMinPoints.isFirstChange()||r.clusterProperties&&!r.clusterProperties.isFirstChange()||r.lineMetrics&&!r.lineMetrics.isFirstChange()||r.generateId&&!r.generateId.isFirstChange()||r.promoteId&&!r.promoteId.isFirstChange()||r.filter&&!r.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),r.data&&!r.data.isFirstChange())){const h=this.mapService.getSource(this.id);if(void 0===h)return;h.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(r){var h=this;return In(function*(){const T=h.mapService.getSource(h.id);return h.zone.run(In(function*(){return new Promise((e,i)=>{T.getClusterExpansionZoom(r,(s,u)=>{s?i(s):e(u)})})}))})()}getClusterChildren(r){var h=this;return In(function*(){const T=h.mapService.getSource(h.id);return h.zone.run(In(function*(){return new Promise((e,i)=>{T.getClusterChildren(r,(s,u)=>{s?i(s):e(u)})})}))})()}getClusterLeaves(r,h,T){var e=this;return In(function*(){const i=e.mapService.getSource(e.id);return e.zone.run(In(function*(){return new Promise((s,u)=>{i.getClusterLeaves(r,h,T,(f,x)=>{f?u(f):s(x)})})}))})()}_addFeature(r){this.data.features.push(r),this.updateFeatureData.next(void 0)}_removeFeature(r){const h=this.data,T=h.features.indexOf(r);T>-1&&h.features.splice(T,1),this.updateFeatureData.next(void 0)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const h=this.updateFeatureData.pipe((0,ua.b)(0)).subscribe(()=>{const T=this.mapService.getSource(this.id);void 0!==T&&T.setData(this.data)});this.sub.add(h),this.sourceAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[a.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})(),qn=(()=>{class c{constructor(r){this.geoJSONSourceComponent=r,this.type="Feature"}ngOnInit(){this.id||(this.id=this.geoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.geoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.geoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(r){this.feature.geometry.coordinates=r,this.geoJSONSourceComponent.updateFeatureData.next(void 0)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36((0,a.Gpc)(()=>go)))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})(),Ai=(()=>{class c{constructor(r,h,T){this.mapService=r,this.ngZone=h,this.featureComponent=T,this.featureDragStart=new a.vpe,this.featureDragEnd=new a.vpe,this.featureDrag=new a.vpe,this.sub=new Jo.w0}ngOnInit(){let r,h,T;if(!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(r=this.layer.layerMouseEnter,h=this.layer.layerMouseLeave,T=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(r,h,T)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(r,h,T){let e=!1,i=!1;this.mapService.mapCreated$.subscribe(()=>{const s=(0,Wr.R)(this.mapService.mapInstance,"mouseup"),u=r.pipe((0,bn.h)(()=>!e),(0,bn.h)(S=>this.filterFeature(S)),(0,Qo.b)(()=>{i=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,_s.w)(()=>(0,Wr.R)(this.mapService.mapInstance,"mousedown").pipe((0,Dr.R)(h)))),f=u.pipe((0,_s.w)(()=>(0,Wr.R)(this.mapService.mapInstance,"mousemove").pipe((0,Dr.R)(s)))),x=u.pipe((0,_s.w)(()=>s.pipe((0,Va.q)(1))));this.sub.add(u.subscribe(S=>{e=!0,this.featureDragStart.observers.length&&this.ngZone.run(()=>{this.featureDragStart.emit(S)})})),this.sub.add(f.subscribe(S=>{T([S.lngLat.lng,S.lngLat.lat]),this.featureDrag.observers.length&&this.ngZone.run(()=>{this.featureDrag.emit(S)})})),this.sub.add(x.subscribe(S=>{e=!1,this.featureDragEnd.observers.length&&this.ngZone.run(()=>{this.featureDragEnd.emit(S)}),i||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(h.pipe((0,Qo.b)(()=>i=!1),(0,bn.h)(()=>!e)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(r){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(r.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(a.R0b),a.Y36(qn,9))},c.\u0275dir=a.lG2({type:c,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag"}}),c})();var Gn=j(4004),Ps=j(8675);let cr=(()=>{class c{constructor(r){this.mapService=r,this.layerClick=new a.vpe,this.layerDblClick=new a.vpe,this.layerMouseDown=new a.vpe,this.layerMouseUp=new a.vpe,this.layerMouseEnter=new a.vpe,this.layerMouseLeave=new a.vpe,this.layerMouseMove=new a.vpe,this.layerMouseOver=new a.vpe,this.layerMouseOut=new a.vpe,this.layerContextMenu=new a.vpe,this.layerTouchStart=new a.vpe,this.layerTouchEnd=new a.vpe,this.layerTouchCancel=new a.vpe,this.layerAdded=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,_s.w)(()=>(0,Wr.R)(this.mapService.mapInstance,"styledata").pipe((0,Gn.U)(()=>!1),(0,bn.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,Ps.O)(!0)))).subscribe(r=>this.init(r))}ngOnChanges(r){this.layerAdded&&(r.paint&&!r.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,r.paint.currentValue),r.layout&&!r.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,r.layout.currentValue),r.filter&&!r.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,r.filter.currentValue),r.before&&!r.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,r.before.currentValue),(r.minzoom&&!r.minzoom.isFirstChange()||r.maxzoom&&!r.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&(this.mapService.removeLayer(this.id),void 0!==this.sourceIdAdded&&this.mapService.getSource(this.sourceIdAdded)&&this.mapService.removeSource(this.sourceIdAdded)),this.sub&&this.sub.unsubscribe()}init(r){const h={layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel}};this.removeSource&&"string"!=typeof this.source&&void 0===this.mapService.getSource(this.id)&&(this.sourceIdAdded=this.id),this.mapService.addLayer(h,r,this.before),void 0!==this.sourceIdAdded&&void 0===this.mapService.getSource(this.sourceIdAdded)&&(this.sourceIdAdded=void 0),this.layerAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",removeSource:"removeSource",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel"},features:[a.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2}),c})(),il=(()=>{class c{constructor(r,h){this.mapService=r,this.zone=h,this.imageError=new a.vpe,this.imageLoaded=new a.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,_s.w)(()=>(0,Wr.R)(this.mapService.mapInstance,"styledata").pipe((0,Ps.O)(void 0),(0,bn.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(r){(r.data&&!r.data.isFirstChange()||r.options&&!r.options.isFirstChange()||r.url&&!r.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var r=this;return In(function*(){if(r.isAdding=!0,r.data)r.mapService.addImage(r.id,r.data,r.options),r.isAdded=!0,r.isAdding=!1;else if(r.url)try{yield r.mapService.loadAndAddImage(r.id,r.url,r.options),r.isAdded=!0,r.isAdding=!1,r.zone.run(()=>{r.imageLoaded.emit()})}catch(h){r.zone.run(()=>{r.imageError.emit(h)})}})()}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded"},features:[a.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2}),c})(),Di=(()=>{class c{constructor(r){this.mapService=r,this.type="vector",this.sourceAdded=!1,this.sub=new Jo.w0}ngOnInit(){const r=this.mapService.mapLoaded$.subscribe(()=>{this.init();const h=(0,Wr.R)(this.mapService.mapInstance,"styledata").pipe((0,bn.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(h)});this.sub.add(r)}ngOnChanges(r){if(this.sourceAdded)if(r.bounds&&!r.bounds.isFirstChange()||r.scheme&&!r.scheme.isFirstChange()||r.minzoom&&!r.minzoom.isFirstChange()||r.maxzoom&&!r.maxzoom.isFirstChange()||r.attribution&&!r.attribution.isFirstChange()||r.promoteId&&!r.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(r.url&&!r.url.isFirstChange()||r.tiles&&!r.tiles.isFirstChange()){const h=this.mapService.getSource(this.id);if(void 0===h)return;r.url&&this.url&&h.setUrl(this.url),r.tiles&&this.tiles&&h.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[a.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})(),nl=(()=>{class c{constructor(r){this.mapService=r,this.type="image"}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(r){if(void 0===this.sourceId)return;const h=this.mapService.getSource(this.sourceId);void 0!==h&&h.updateImage({url:void 0===r.url?void 0:this.url,coordinates:void 0===r.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[a.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})(),qs=(()=>{class c{constructor(r){this.mapService=r,this.type="raster-dem",this.sourceAdded=!1,this.sub=new Jo.w0}ngOnInit(){const r=this.mapService.mapLoaded$.subscribe(()=>{this.init();const h=(0,Wr.R)(this.mapService.mapInstance,"styledata").pipe((0,bn.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(h)});this.sub.add(r)}ngOnChanges(r){this.sourceAdded&&(r.url&&!r.url.isFirstChange()||r.tiles&&!r.tiles.isFirstChange()||r.bounds&&!r.bounds.isFirstChange()||r.minzoom&&!r.minzoom.isFirstChange()||r.maxzoom&&!r.maxzoom.isFirstChange()||r.tileSize&&!r.tileSize.isFirstChange()||r.attribution&&!r.attribution.isFirstChange()||r.encoding&&!r.encoding.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize,attribution:this.attribution,encoding:this.encoding}),this.sourceAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-raster-dem-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize",attribution:"attribution",encoding:"encoding"},features:[a.TTD],decls:0,vars:0,template:function(r,h){},encapsulation:2,changeDetection:0}),c})();const B=["content"],ne=["*"];let H=(()=>{class c{constructor(r){this.mapService=r,this.markerDragStart=new a.vpe,this.markerDragEnd=new a.vpe,this.markerDrag=new a.vpe}ngOnInit(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(r){r.lngLat&&!r.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),r.feature&&!r.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),r.draggable&&!r.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),r.popupShown&&!r.popupShown.isFirstChange()&&(r.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),r.pitchAlignment&&!r.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(r.pitchAlignment.currentValue),r.rotationAlignment&&!r.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(r.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(r){this.markerInstance.setLngLat(r)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-marker"]],viewQuery:function(r,h){if(1&r&&a.Gf(B,7),2&r){let T;a.iGM(T=a.CRH())&&(h.content=T.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},features:[a.TTD],ngContentSelectors:ne,decls:3,vars:2,consts:[["content",""]],template:function(r,h){1&r&&(a.F$t(),a.TgZ(0,"div",null,0),a.Hsn(2),a.qZA()),2&r&&a.Tol(h.className)},encapsulation:2,changeDetection:0}),c})();const ye=["content"],Ge=["*"];let Ft=(()=>{class c{constructor(r){this.mapService=r,this.popupClose=new a.vpe,this.popupOpen=new a.vpe}ngOnInit(){if(this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(r){if(r.feature&&!r.feature.isFirstChange()){const h=r.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const T=this.createPopup();this.mapService.addPopupToMap(T,h,this.popupInstance.isOpen()),this.popupInstance=T}if(r.lngLat&&!r.lngLat.isFirstChange()&&this.popupInstance.setLngLat(this.lngLat),r.marker&&!r.marker.isFirstChange()){const h=r.marker.previousValue;h.markerInstance&&this.mapService.removePopupFromMarker(h.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}r.offset&&!r.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(r){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(r,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,r)}})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-popup"]],viewQuery:function(r,h){if(1&r&&a.Gf(ye,7),2&r){let T;a.iGM(T=a.CRH())&&(h.content=T.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},features:[a.TTD],ngContentSelectors:Ge,decls:3,vars:0,consts:[["content",""]],template:function(r,h){1&r&&(a.F$t(),a.TgZ(0,"div",null,0),a.Hsn(2),a.qZA())},encapsulation:2,changeDetection:0}),c})(),Qt=(()=>{class c{onFullscreen(){this.mapService.mapInstance.resize()}constructor(r,h){this.mapService=r,this.controlComponent=h}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new Kr.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(Ln,1))},c.\u0275dir=a.lG2({type:c,selectors:[["","mglFullscreen",""]],hostBindings:function(r,h){1&r&&a.NdJ("webkitfullscreenchange",function(e){return h.onFullscreen(e.target)},!1,a.Jf7)},inputs:{container:"container"}}),c})(),ki=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h,this.geolocate=new a.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation};Object.keys(r).forEach(h=>{void 0===r[h]&&delete r[h]}),this.controlComponent.control=new Kr.GeolocateControl(r),this.controlComponent.control.on("geolocate",h=>{this.geolocate.emit(h)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(Ln,1))},c.\u0275dir=a.lG2({type:c,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),c})(),Mn=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.showCompass&&(r.showCompass=this.showCompass),void 0!==this.showZoom&&(r.showZoom=this.showZoom),null!=this.visualizePitch&&(r.visualizePitch=this.visualizePitch),this.controlComponent.control=new Kr.NavigationControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(Ln,1))},c.\u0275dir=a.lG2({type:c,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom",visualizePitch:"visualizePitch"}}),c})(),Un=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.compact&&(r.compact=this.compact),void 0!==this.customAttribution&&(r.customAttribution=this.customAttribution),this.controlComponent.control=new Kr.AttributionControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(Ln,1))},c.\u0275dir=a.lG2({type:c,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),c})(),Dn=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h}ngOnChanges(r){r.unit&&!r.unit.isFirstChange()&&this.controlComponent.control.setUnit(r.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.maxWidth&&(r.maxWidth=this.maxWidth),void 0!==this.unit&&(r.unit=this.unit),this.controlComponent.control=new Kr.ScaleControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(Ln,1))},c.\u0275dir=a.lG2({type:c,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[a.TTD]}),c})();var hn=j(6451);function nr(c,m){1&c&&a.GkF(0)}const Vn=function(c){return{$implicit:c}};function Hn(c,m){if(1&c&&(a.ynx(0),a.TgZ(1,"mgl-marker",3),a.YNc(2,nr,1,0,"ng-container",4),a.qZA(),a.BQk()),2&c){const r=a.oxw().$implicit,h=a.oxw();a.xp6(1),a.Q6J("feature",r),a.xp6(1),a.Q6J("ngTemplateOutlet",h.clusterPointTpl)("ngTemplateOutletContext",a.VKq(3,Vn,r))}}function An(c,m){1&c&&a.GkF(0)}function jr(c,m){if(1&c&&(a.ynx(0),a.TgZ(1,"mgl-marker",3),a.YNc(2,An,1,0,"ng-container",4),a.qZA(),a.BQk()),2&c){const r=a.oxw().$implicit,h=a.oxw();a.xp6(1),a.Q6J("feature",r),a.xp6(1),a.Q6J("ngTemplateOutlet",h.pointTpl)("ngTemplateOutletContext",a.VKq(3,Vn,r))}}function Uo(c,m){if(1&c&&(a.ynx(0),a.YNc(1,Hn,3,5,"ng-container",2),a.YNc(2,jr,3,5,"ng-container",2),a.BQk()),2&c){const r=m.$implicit;a.xp6(1),a.Q6J("ngIf",r.properties.cluster),a.xp6(1),a.Q6J("ngIf",!r.properties.cluster)}}const _o=function(){return{"circle-radius":0}};let to=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","mglPoint",""]]}),c})(),ys=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["ng-template","mglClusterPoint",""]]}),c})(),es=0,ts=(()=>{class c{constructor(r,h,T){this.mapService=r,this.changeDetectorRef=h,this.ngZone=T,this.layerId="mgl-markers-for-clusters-"+es++,this.sub=new Jo.w0}ngAfterContentInit(){const h=this.mapService.mapCreated$.pipe((0,_s.w)(()=>(0,Wr.R)(this.mapService.mapInstance,"data").pipe((0,bn.h)(T=>T.sourceId===this.source&&"metadata"!==T.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,_s.w)(()=>(0,hn.T)((0,Wr.R)(this.mapService.mapInstance,"move"),(0,Wr.R)(this.mapService.mapInstance,"moveend")).pipe((0,Ps.O)(void 0)))).subscribe(()=>{this.ngZone.run(()=>{this.updateCluster()})});this.sub.add(h)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(r,h){return h.id}updateCluster(){const r={layers:[this.layerId]};this.pointTpl||(r.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(r),this.changeDetectorRef.markForCheck()}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(a.sBO),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(r,h,T){if(1&r&&(a.Suo(T,to,5,a.Rgc),a.Suo(T,ys,5,a.Rgc)),2&r){let e;a.iGM(e=a.CRH())&&(h.pointTpl=e.first),a.iGM(e=a.CRH())&&(h.clusterPointTpl=e.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,h){1&r&&(a._UZ(0,"mgl-layer",0),a.YNc(1,Uo,3,2,"ng-container",1)),2&r&&(a.Q6J("id",h.layerId)("source",h.source)("paint",a.DdM(5,_o)),a.xp6(1),a.Q6J("ngForOf",h.clusterPoints)("ngForTrackBy",h.trackByClusterPoint))},dependencies:[X.sg,X.O5,X.tP,cr,H],encapsulation:2,changeDetection:0}),c})(),Ua=(()=>{class c{constructor(r,h){this.mapService=r,this.controlComponent=h}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new Kr.TerrainControl({source:this.source,exaggeration:this.exaggeration??1}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr),a.Y36(Ln,1))},c.\u0275dir=a.lG2({type:c,selectors:[["","mglTerrain",""]],inputs:{source:"source",exaggeration:"exaggeration"}}),c})();const Zi=["container"];let mi=(()=>{class c{get mapInstance(){return this.mapService.mapInstance}constructor(r){this.mapService=r,this.movingMethod="flyTo",this.mapResize=new a.vpe,this.mapRemove=new a.vpe,this.mapMouseDown=new a.vpe,this.mapMouseUp=new a.vpe,this.mapMouseMove=new a.vpe,this.mapClick=new a.vpe,this.mapDblClick=new a.vpe,this.mapMouseOver=new a.vpe,this.mapMouseOut=new a.vpe,this.mapContextMenu=new a.vpe,this.mapTouchStart=new a.vpe,this.mapTouchEnd=new a.vpe,this.mapTouchMove=new a.vpe,this.mapTouchCancel=new a.vpe,this.mapWheel=new a.vpe,this.moveStart=new a.vpe,this.move=new a.vpe,this.moveEnd=new a.vpe,this.mapDragStart=new a.vpe,this.mapDrag=new a.vpe,this.mapDragEnd=new a.vpe,this.zoomStart=new a.vpe,this.zoomEvt=new a.vpe,this.zoomEnd=new a.vpe,this.rotateStart=new a.vpe,this.rotate=new a.vpe,this.rotateEnd=new a.vpe,this.pitchStart=new a.vpe,this.pitchEvt=new a.vpe,this.pitchEnd=new a.vpe,this.boxZoomStart=new a.vpe,this.boxZoomEnd=new a.vpe,this.boxZoomCancel=new a.vpe,this.webGlContextLost=new a.vpe,this.webGlContextRestored=new a.vpe,this.mapLoad=new a.vpe,this.idle=new a.vpe,this.render=new a.vpe,this.mapError=new a.vpe,this.data=new a.vpe,this.styleData=new a.vpe,this.sourceData=new a.vpe,this.dataLoading=new a.vpe,this.styleDataLoading=new a.vpe,this.sourceDataLoading=new a.vpe,this.styleImageMissing=new a.vpe}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,terrain:this.terrain},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(r){var h=this;return In(function*(){yield h.mapService.mapCreated$.toPromise(),r.cursorStyle&&!r.cursorStyle.isFirstChange()&&h.mapService.changeCanvasCursor(r.cursorStyle.currentValue),r.minZoom&&!r.minZoom.isFirstChange()&&h.mapService.updateMinZoom(r.minZoom.currentValue),r.maxZoom&&!r.maxZoom.isFirstChange()&&h.mapService.updateMaxZoom(r.maxZoom.currentValue),r.minPitch&&!r.minPitch.isFirstChange()&&h.mapService.updateMinPitch(r.minPitch.currentValue),r.maxPitch&&!r.maxPitch.isFirstChange()&&h.mapService.updateMaxPitch(r.maxPitch.currentValue),r.renderWorldCopies&&!r.renderWorldCopies.isFirstChange()&&h.mapService.updateRenderWorldCopies(r.renderWorldCopies.currentValue),r.scrollZoom&&!r.scrollZoom.isFirstChange()&&h.mapService.updateScrollZoom(r.scrollZoom.currentValue),r.dragRotate&&!r.dragRotate.isFirstChange()&&h.mapService.updateDragRotate(r.dragRotate.currentValue),r.touchPitch&&!r.touchPitch.isFirstChange()&&h.mapService.updateTouchPitch(r.touchPitch.currentValue),r.touchZoomRotate&&!r.touchZoomRotate.isFirstChange()&&h.mapService.updateTouchZoomRotate(r.touchZoomRotate.currentValue),r.doubleClickZoom&&!r.doubleClickZoom.isFirstChange()&&h.mapService.updateDoubleClickZoom(r.doubleClickZoom.currentValue),r.keyboard&&!r.keyboard.isFirstChange()&&h.mapService.updateKeyboard(r.keyboard.currentValue),r.dragPan&&!r.dragPan.isFirstChange()&&h.mapService.updateDragPan(r.dragPan.currentValue),r.boxZoom&&!r.boxZoom.isFirstChange()&&h.mapService.updateBoxZoom(r.boxZoom.currentValue),r.style&&!r.style.isFirstChange()&&h.mapService.updateStyle(r.style.currentValue),r.maxBounds&&!r.maxBounds.isFirstChange()&&h.mapService.updateMaxBounds(r.maxBounds.currentValue),r.fitBounds&&r.fitBounds.currentValue&&!r.fitBounds.isFirstChange()&&h.mapService.fitBounds(r.fitBounds.currentValue,h.fitBoundsOptions),r.fitScreenCoordinates&&r.fitScreenCoordinates.currentValue&&((h.center||h.zoom||h.pitch||h.fitBounds)&&r.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-maplibre-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),h.mapService.fitScreenCoordinates(r.fitScreenCoordinates.currentValue,h.bearing?h.bearing[0]:0,h.movingOptions)),!h.centerWithPanTo||!r.center||r.center.isFirstChange()||r.zoom||r.bearing||r.pitch?(r.center&&!r.center.isFirstChange()||r.zoom&&!r.zoom.isFirstChange()||r.bearing&&!r.bearing.isFirstChange()&&!r.fitScreenCoordinates||r.pitch&&!r.pitch.isFirstChange())&&h.mapService.move(h.movingMethod,h.movingOptions,r.zoom&&h.zoom?h.zoom[0]:void 0,r.center?h.center:void 0,r.bearing&&h.bearing?h.bearing[0]:void 0,r.pitch&&h.pitch?h.pitch[0]:void 0):h.mapService.panTo(h.center,h.panToOptions),r.terrain&&!r.terrain.isFirstChange()&&h.mapService.updateTerrain(r.terrain.currentValue)})()}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(lr))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mgl-map"]],viewQuery:function(r,h){if(1&r&&a.Gf(Zi,7),2&r){let T;a.iGM(T=a.CRH())&&(h.mapContainer=T.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",terrain:"terrain",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[a._Bn([lr]),a.TTD],decls:2,vars:0,consts:[["container",""]],template:function(r,h){1&r&&a._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),c})();var ja=j(2484);const So="object"==typeof global&&global&&global.Object===Object&&global;var jo="object"==typeof self&&self&&self.Object===Object&&self;const Hr=So||jo||Function("return this")(),jn=Hr.Symbol;var gr=Object.prototype,Sr=gr.hasOwnProperty,Vl=gr.toString,Os=jn?jn.toStringTag:void 0;var $a=Object.prototype.toString;var co=jn?jn.toStringTag:void 0;const Ks=function sl(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":co&&co in Object(c)?function ol(c){var m=Sr.call(c,Os),r=c[Os];try{c[Os]=void 0;var h=!0}catch{}var T=Vl.call(c);return h&&(m?c[Os]=r:delete c[Os]),T}(c):function To(c){return $a.call(c)}(c)},Ho=function is(c){var m=typeof c;return null!=c&&("object"==m||"function"==m)};const v=function Js(c){if(!Ho(c))return!1;var m=Ks(c);return"[object Function]"==m||"[object GeneratorFunction]"==m||"[object AsyncFunction]"==m||"[object Proxy]"==m};var c,n=Hr["__core-js_shared__"],g=(c=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";var N=Function.prototype.toString;const G=function L(c){if(null!=c){try{return N.call(c)}catch{}try{return c+""}catch{}}return""};var te=/^\[object .+?Constructor\]$/,Be=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Et=function at(c){return!(!Ho(c)||function b(c){return!!g&&g in c}(c))&&(v(c)?Be:te).test(G(c))},ii=function Rt(c,m){var r=function He(c,m){return c?.[m]}(c,m);return Et(r)?r:void 0};var I=function(){try{var c=ii(Object,"defineProperty");return c({},"",{}),c}catch{}}();const A=I,F=function D(c,m,r){"__proto__"==m&&A?A(c,m,{configurable:!0,enumerable:!0,value:r,writable:!0}):c[m]=r},ue=function Z(c,m,r,h){for(var T=-1,e=null==c?0:c.length;++T<e;){var i=c[T];m(h,i,r(i),c)}return h};var ut=function le(c){return function(m,r,h){for(var T=-1,e=Object(m),i=h(m),s=i.length;s--;){var u=i[c?s:++T];if(!1===r(e[u],u,e))break}return m}}();const di=ut,kn=function Wi(c){return null!=c&&"object"==typeof c};const rr=function ur(c){return kn(c)&&"[object Arguments]"==Ks(c)};var Io=Object.prototype,yo=Io.hasOwnProperty,$o=Io.propertyIsEnumerable,uo=rr(function(){return arguments}())?rr:function(c){return kn(c)&&yo.call(c,"callee")&&!$o.call(c,"callee")};const Qs=uo,wr=Array.isArray;var $r="object"==typeof exports&&exports&&!exports.nodeType&&exports,no=$r&&"object"==typeof module&&module&&!module.nodeType&&module,ro=no&&no.exports===$r?Hr.Buffer:void 0;const ea=(ro?ro.isBuffer:void 0)||function ho(){return!1};var id=/^(?:0|[1-9]\d*)$/;const nd=function Ir(c,m){var r=typeof c;return!!(m=m??9007199254740991)&&("number"==r||"symbol"!=r&&id.test(c))&&c>-1&&c%1==0&&c<m};const bl=function Za(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991};var Xn={};Xn["[object Float32Array]"]=Xn["[object Float64Array]"]=Xn["[object Int8Array]"]=Xn["[object Int16Array]"]=Xn["[object Int32Array]"]=Xn["[object Uint8Array]"]=Xn["[object Uint8ClampedArray]"]=Xn["[object Uint16Array]"]=Xn["[object Uint32Array]"]=!0,Xn["[object Arguments]"]=Xn["[object Array]"]=Xn["[object ArrayBuffer]"]=Xn["[object Boolean]"]=Xn["[object DataView]"]=Xn["[object Date]"]=Xn["[object Error]"]=Xn["[object Function]"]=Xn["[object Map]"]=Xn["[object Number]"]=Xn["[object Object]"]=Xn["[object RegExp]"]=Xn["[object Set]"]=Xn["[object String]"]=Xn["[object WeakMap]"]=!1;const od=function lm(c){return function(m){return c(m)}};var Zd="object"==typeof exports&&exports&&!exports.nodeType&&exports,hc=Zd&&"object"==typeof module&&module&&!module.nodeType&&module,sd=hc&&hc.exports===Zd&&So.process;const Go=function(){try{return hc&&hc.require&&hc.require("util").types||sd&&sd.binding&&sd.binding("util")}catch{}}();var qu=Go&&Go.isTypedArray;const Wd=qu?od(qu):function Gd(c){return kn(c)&&bl(c.length)&&!!Xn[Ks(c)]};var Ku=Object.prototype.hasOwnProperty;const xl=function Zo(c,m){var r=wr(c),h=!r&&Qs(c),T=!r&&!h&&ea(c),e=!r&&!h&&!T&&Wd(c),i=r||h||T||e,s=i?function vi(c,m){for(var r=-1,h=Array(c);++r<c;)h[r]=m(r);return h}(c.length,String):[],u=s.length;for(var f in c)(m||Ku.call(c,f))&&(!i||!("length"==f||T&&("offset"==f||"parent"==f)||e&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||nd(f,u)))&&s.push(f);return s};var Xu=Object.prototype;const mc=function $l(c){var m=c&&c.constructor;return c===("function"==typeof m&&m.prototype||Xu)},hm=function um(c,m){return function(r){return c(m(r))}},Vp=hm(Object.keys,Object);var Up=Object.prototype.hasOwnProperty;const Gl=function Ju(c){return null!=c&&bl(c.length)&&!v(c)},Ar=function ld(c){return Gl(c)?xl(c):function jp(c){if(!mc(c))return Vp(c);var m=[];for(var r in Object(c))Up.call(c,r)&&"constructor"!=r&&m.push(r);return m}(c)};var ll=function Fc(c,m){return function(r,h){if(null==r)return r;if(!Gl(r))return c(r,h);for(var T=r.length,e=m?T:-1,i=Object(r);(m?e--:++e<T)&&!1!==h(i[e],e,i););return r}}(function Yd(c,m){return c&&di(c,m,Ar)});const Xd=ll,cd=function Qu(c,m,r,h){return Xd(c,function(T,e,i){m(h,T,r(T),i)}),h},th=function fm(c,m){return c===m||c!=c&&m!=m},Zl=function gm(c,m){for(var r=c.length;r--;)if(th(c[r][0],m))return r;return-1};var Jd=Array.prototype.splice;function fc(c){var m=-1,r=null==c?0:c.length;for(this.clear();++m<r;){var h=c[m];this.set(h[0],h[1])}}fc.prototype.clear=function dd(){this.__data__=[],this.size=0},fc.prototype.delete=function ih(c){var m=this.__data__,r=Zl(m,c);return!(r<0||(r==m.length-1?m.pop():Jd.call(m,r,1),--this.size,0))},fc.prototype.get=function ud(c){var m=this.__data__,r=Zl(m,c);return r<0?void 0:m[r][1]},fc.prototype.has=function _m(c){return Zl(this.__data__,c)>-1},fc.prototype.set=function ym(c,m){var r=this.__data__,h=Zl(r,c);return h<0?(++this.size,r.push([c,m])):r[h][1]=m,this};const hd=fc,Yl=ii(Hr,"Map"),Nc=ii(Object,"create");var Cm=Object.prototype.hasOwnProperty;var Em=Object.prototype.hasOwnProperty;function Bc(c){var m=-1,r=null==c?0:c.length;for(this.clear();++m<r;){var h=c[m];this.set(h[0],h[1])}}Bc.prototype.clear=function sh(){this.__data__=Nc?Nc(null):{},this.size=0},Bc.prototype.delete=function gc(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m},Bc.prototype.get=function Gp(c){var m=this.__data__;if(Nc){var r=m[c];return"__lodash_hash_undefined__"===r?void 0:r}return Cm.call(m,c)?m[c]:void 0},Bc.prototype.has=function iu(c){var m=this.__data__;return Nc?void 0!==m[c]:Em.call(m,c)},Bc.prototype.set=function Zp(c,m){var r=this.__data__;return this.size+=this.has(c)?0:1,r[c]=Nc&&void 0===m?"__lodash_hash_undefined__":m,this};const nu=Bc,Uc=function Vc(c,m){var r=c.__data__;return function ch(c){var m=typeof c;return"string"==m||"number"==m||"symbol"==m||"boolean"==m?"__proto__"!==c:null===c}(m)?r["string"==typeof m?"string":"hash"]:r.map};function Fs(c){var m=-1,r=null==c?0:c.length;for(this.clear();++m<r;){var h=c[m];this.set(h[0],h[1])}}Fs.prototype.clear=function ru(){this.size=0,this.__data__={hash:new nu,map:new(Yl||hd),string:new nu}},Fs.prototype.delete=function Dm(c){var m=Uc(this,c).delete(c);return this.size-=m?1:0,m},Fs.prototype.get=function yc(c){return Uc(this,c).get(c)},Fs.prototype.has=function Yp(c){return Uc(this,c).has(c)},Fs.prototype.set=function gd(c,m){var r=Uc(this,c),h=r.size;return r.set(c,m),this.size+=r.size==h?0:1,this};const cl=Fs;function vc(c){var m=this.__data__=new hd(c);this.size=m.size}vc.prototype.clear=function Wl(){this.__data__=new hd,this.size=0},vc.prototype.delete=function md(c){var m=this.__data__,r=m.delete(c);return this.size=m.size,r},vc.prototype.get=function vm(c){return this.__data__.get(c)},vc.prototype.has=function xm(c){return this.__data__.has(c)},vc.prototype.set=function hr(c,m){var r=this.__data__;if(r instanceof hd){var h=r.__data__;if(!Yl||h.length<199)return h.push([c,m]),this.size=++r.size,this;r=this.__data__=new cl(h)}return r.set(c,m),this.size=r.size,this};const jc=vc;function su(c){var m=-1,r=null==c?0:c.length;for(this.__data__=new cl;++m<r;)this.add(c[m])}su.prototype.add=su.prototype.push=function bc(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this},su.prototype.has=function Kp(c){return this.__data__.has(c)};const au=su,_d=function Cl(c,m){for(var r=-1,h=null==c?0:c.length;++r<h;)if(m(c[r],r,c))return!0;return!1},Pm=function km(c,m){return c.has(m)};const Rm=function yd(c,m,r,h,T,e){var i=1&r,s=c.length,u=m.length;if(s!=u&&!(i&&u>s))return!1;var f=e.get(c),x=e.get(m);if(f&&x)return f==m&&x==c;var S=-1,O=!0,z=2&r?new au:void 0;for(e.set(c,m),e.set(m,c);++S<s;){var J=c[S],de=m[S];if(h)var Te=i?h(de,J,S,m,c,e):h(J,de,S,c,m,e);if(void 0!==Te){if(Te)continue;O=!1;break}if(z){if(!_d(m,function(qe,_t){if(!Pm(z,_t)&&(J===qe||T(J,qe,r,h,e)))return z.push(_t)})){O=!1;break}}else if(J!==de&&!T(J,de,r,h,e)){O=!1;break}}return e.delete(c),e.delete(m),O},ql=Hr.Uint8Array,$g=function Hg(c){var m=-1,r=Array(c.size);return c.forEach(function(h,T){r[++m]=[T,h]}),r},Lm=function Fm(c){var m=-1,r=Array(c.size);return c.forEach(function(h){r[++m]=h}),r};var cu=jn?jn.prototype:void 0,bd=cu?cu.valueOf:void 0;const Ml=function gh(c,m){for(var r=-1,h=m.length,T=c.length;++r<h;)c[T+r]=m[r];return c},wc=function xc(c,m,r){var h=m(c);return wr(c)?h:Ml(h,r(c))},Gc=function Bm(){return[]};var nf=Object.prototype.propertyIsEnumerable,wd=Object.getOwnPropertySymbols,du=wd?function(c){return null==c?[]:(c=Object(c),function xd(c,m){for(var r=-1,h=null==c?0:c.length,T=0,e=[];++r<h;){var i=c[r];m(i,r,c)&&(e[T++]=i)}return e}(wd(c),function(m){return nf.call(c,m)}))}:Gc;const ul=du,Zc=function rf(c){return wc(c,Ar,ul)};var Cd=Object.prototype.hasOwnProperty;const Ed=ii(Hr,"DataView"),bh=ii(Hr,"Promise"),Kl=ii(Hr,"Set"),Md=ii(Hr,"WeakMap");var Dd="[object Map]",wh="[object Promise]",mu="[object Set]",Dl="[object WeakMap]",Sd="[object DataView]",jm=G(Ed),Ch=G(Yl),pu=G(bh),ma=G(Kl),Wc=G(Md),Xl=Ks;(Ed&&Xl(new Ed(new ArrayBuffer(1)))!=Sd||Yl&&Xl(new Yl)!=Dd||bh&&Xl(bh.resolve())!=wh||Kl&&Xl(new Kl)!=mu||Md&&Xl(new Md)!=Dl)&&(Xl=function(c){var m=Ks(c),r="[object Object]"==m?c.constructor:void 0,h=r?G(r):"";if(h)switch(h){case jm:return Sd;case Ch:return Dd;case pu:return wh;case ma:return mu;case Wc:return Dl}return m});const Ec=Xl;var Eh="[object Arguments]",Mc="[object Array]",Td="[object Object]",Dc=Object.prototype.hasOwnProperty;const Mh=function Jl(c,m,r,h,T,e){var i=wr(c),s=wr(m),u=i?Mc:Ec(c),f=s?Mc:Ec(m),x=(u=u==Eh?Td:u)==Td,S=(f=f==Eh?Td:f)==Td,O=u==f;if(O&&ea(c)){if(!ea(m))return!1;i=!0,x=!1}if(O&&!x)return e||(e=new jc),i||Wd(c)?Rm(c,m,r,h,T,e):function ef(c,m,r,h,T,e,i){switch(r){case"[object DataView]":if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case"[object ArrayBuffer]":return!(c.byteLength!=m.byteLength||!e(new ql(c),new ql(m)));case"[object Boolean]":case"[object Date]":case"[object Number]":return th(+c,+m);case"[object Error]":return c.name==m.name&&c.message==m.message;case"[object RegExp]":case"[object String]":return c==m+"";case"[object Map]":var s=$g;case"[object Set]":if(s||(s=Lm),c.size!=m.size&&!(1&h))return!1;var f=i.get(c);if(f)return f==m;h|=2,i.set(c,m);var x=Rm(s(c),s(m),h,T,e,i);return i.delete(c),x;case"[object Symbol]":if(bd)return bd.call(c)==bd.call(m)}return!1}(c,m,u,r,h,T,e);if(!(1&r)){var z=x&&Dc.call(c,"__wrapped__"),J=S&&Dc.call(m,"__wrapped__");if(z||J){var de=z?c.value():c,Te=J?m.value():m;return e||(e=new jc),T(de,Te,r,h,e)}}return!!O&&(e||(e=new jc),function vh(c,m,r,h,T,e){var i=1&r,s=Zc(c),u=s.length;if(u!=Zc(m).length&&!i)return!1;for(var S=u;S--;){var O=s[S];if(!(i?O in m:Cd.call(m,O)))return!1}var z=e.get(c),J=e.get(m);if(z&&J)return z==m&&J==c;var de=!0;e.set(c,m),e.set(m,c);for(var Te=i;++S<u;){var qe=c[O=s[S]],_t=m[O];if(h)var Ht=i?h(_t,qe,O,m,c,e):h(qe,_t,O,c,m,e);if(!(void 0===Ht?qe===_t||T(qe,_t,r,h,e):Ht)){de=!1;break}Te||(Te="constructor"==O)}if(de&&!Te){var si=c.constructor,Mi=m.constructor;si!=Mi&&"constructor"in c&&"constructor"in m&&!("function"==typeof si&&si instanceof si&&"function"==typeof Mi&&Mi instanceof Mi)&&(de=!1)}return e.delete(c),e.delete(m),de}(c,m,r,h,T,e))},Sh=function Dh(c,m,r,h,T){return c===m||(null==c||null==m||!kn(c)&&!kn(m)?c!=c&&m!=m:Mh(c,m,r,h,Dh,T))};const Id=function gu(c){return c==c&&!Ho(c)},Ad=function yu(c,m){return function(r){return null!=r&&r[c]===m&&(void 0!==m||c in Object(r))}},cf=function lf(c){var m=function _u(c){for(var m=Ar(c),r=m.length;r--;){var h=m[r],T=c[h];m[r]=[h,T,Id(T)]}return m}(c);return 1==m.length&&m[0][2]?Ad(m[0][0],m[0][1]):function(r){return r===c||function af(c,m,r,h){var T=r.length,e=T,i=!h;if(null==c)return!e;for(c=Object(c);T--;){var s=r[T];if(i&&s[2]?s[1]!==c[s[0]]:!(s[0]in c))return!1}for(;++T<e;){var u=(s=r[T])[0],f=c[u],x=s[1];if(i&&s[2]){if(void 0===f&&!(u in c))return!1}else{var S=new jc;if(h)var O=h(f,x,u,c,m,S);if(!(void 0===O?Sh(x,f,3,h,S):O))return!1}}return!0}(r,c,m)}};const ec=function df(c){return"symbol"==typeof c||kn(c)&&"[object Symbol]"==Ks(c)};var tc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hl=/^\w*$/;const Ih=function Th(c,m){if(wr(c))return!1;var r=typeof c;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=c&&!ec(c))||hl.test(c)||!tc.test(c)||null!=m&&c in Object(m)};var uf="Expected a function";function Ah(c,m){if("function"!=typeof c||null!=m&&"function"!=typeof m)throw new TypeError(uf);var r=function(){var h=arguments,T=m?m.apply(this,h):h[0],e=r.cache;if(e.has(T))return e.get(T);var i=c.apply(this,h);return r.cache=e.set(T,i)||e,i};return r.cache=new(Ah.Cache||cl),r}Ah.Cache=cl;const Zm=Ah;var Wm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qc=/\\(\\)?/g,kh=function vu(c){var m=Zm(c,function(h){return 500===r.size&&r.clear(),h}),r=m.cache;return m}(function(c){var m=[];return 46===c.charCodeAt(0)&&m.push(""),c.replace(Wm,function(r,h,T,e){m.push(T?e.replace(qc,"$1"):h||r)}),m});const Ym=kh;var wu=jn?jn.prototype:void 0,Cu=wu?wu.toString:void 0;const mf=function Eu(c){if("string"==typeof c)return c;if(wr(c))return function pa(c,m){for(var r=-1,h=null==c?0:c.length,T=Array(h);++r<h;)T[r]=m(c[r],r,c);return T}(c,Eu)+"";if(ec(c))return Cu?Cu.call(c):"";var m=c+"";return"0"==m&&1/c==-Infinity?"-0":m},p=function l(c,m){return wr(c)?c:Ih(c,m)?[c]:Ym(function o(c){return null==c?"":mf(c)}(c))};const M=function C(c){if("string"==typeof c||ec(c))return c;var m=c+"";return"0"==m&&1/c==-Infinity?"-0":m},R=function k(c,m){for(var r=0,h=(m=p(m,c)).length;null!=c&&r<h;)c=c[M(m[r++])];return r&&r==h?c:void 0},pe=function oe(c,m){return null!=c&&m in Object(c)},Le=function Ue(c,m){return null!=c&&function ge(c,m,r){for(var h=-1,T=(m=p(m,c)).length,e=!1;++h<T;){var i=M(m[h]);if(!(e=null!=c&&r(c,i)))break;c=c[i]}return e||++h!=T?e:!!(T=null==c?0:c.length)&&bl(T)&&nd(i,T)&&(wr(c)||Qs(c))}(c,m,pe)};const Mt=function lt(c,m){return Ih(c)&&Id(m)?Ad(M(c),m):function(r){var h=function W(c,m,r){var h=null==c?void 0:R(c,m);return void 0===h?r:h}(r,c);return void 0===h&&h===m?Le(r,c):Sh(m,h,3)}},ti=function It(c){return c},Oi=function Ci(c){return Ih(c)?function Bi(c){return function(m){return m?.[c]}}(M(c)):function Pi(c){return function(m){return R(m,c)}}(c)};var Cr=Object.prototype.hasOwnProperty,Er=function Ki(c,m){return function(r,h){var T=wr(r)?ue:cd,e=m?m():{};return T(r,c,function Ii(c){return"function"==typeof c?c:null==c?ti:"object"==typeof c?wr(c)?Mt(c[0],c[1]):cf(c):Oi(c)}(h),e)}}(function(c,m,r){Cr.call(c,r)?c[r].push(m):F(c,r,[m])});const mo=Er;var bo=Object.prototype.hasOwnProperty;const Yo=function ko(c,m,r){var h=c[m];(!bo.call(c,m)||!th(h,r)||void 0===r&&!(m in c))&&F(c,m,r)},Nr=function vs(c,m,r,h){var T=!r;r||(r={});for(var e=-1,i=m.length;++e<i;){var s=m[e],u=h?h(r[s],c[s],s,r,c):void 0;void 0===u&&(u=c[s]),T?F(r,s,u):Yo(r,s,u)}return r};var _r=Object.prototype.hasOwnProperty;const Sn=function Po(c){if(!Ho(c))return function qo(c){var m=[];if(null!=c)for(var r in Object(c))m.push(r);return m}(c);var m=mc(c),r=[];for(var h in c)"constructor"==h&&(m||!_r.call(c,h))||r.push(h);return r},wo=function Ns(c){return Gl(c)?xl(c,!0):Sn(c)};var os="object"==typeof exports&&exports&&!exports.nodeType&&exports,na=os&&"object"==typeof module&&module&&!module.nodeType&&module,Bs=na&&na.exports===os?Hr.Buffer:void 0,ss=Bs?Bs.allocUnsafe:void 0;const Ph=hm(Object.getPrototypeOf,Object);var Oh=Object.getOwnPropertySymbols?function(c){for(var m=[];c;)Ml(m,ul(c)),c=Ph(c);return m}:Gc;const Tu=Oh,_a=function ff(c){return wc(c,wo,Tu)};var _f=Object.prototype.hasOwnProperty;const Xc=function Aa(c){var m=new c.constructor(c.byteLength);return new ql(m).set(new ql(c)),m};var Ya=/\w*$/;var Rd=jn?jn.prototype:void 0,ic=Rd?Rd.valueOf:void 0;const Kg=function qg(c,m,r){var h=c.constructor;switch(m){case"[object ArrayBuffer]":return Xc(c);case"[object Boolean]":case"[object Date]":return new h(+c);case"[object DataView]":return function Km(c,m){var r=m?Xc(c.buffer):c.buffer;return new c.constructor(r,c.byteOffset,c.byteLength)}(c,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function yb(c,m){var r=m?Xc(c.buffer):c.buffer;return new c.constructor(r,c.byteOffset,c.length)}(c,r);case"[object Map]":case"[object Set]":return new h;case"[object Number]":case"[object String]":return new h(c);case"[object RegExp]":return function Pd(c){var m=new c.constructor(c.source,Ya.exec(c));return m.lastIndex=c.lastIndex,m}(c);case"[object Symbol]":return function gb(c){return ic?Object(ic.call(c)):{}}(c)}};var ep=Object.create,Tc=function(){function c(){}return function(m){if(!Ho(m))return{};if(ep)return ep(m);c.prototype=m;var r=new c;return c.prototype=void 0,r}}();const tp=Tc;var Qg=Go&&Go.isMap;const Lh=Qg?od(Qg):function Xg(c){return kn(c)&&"[object Map]"==Ec(c)};var e_=Go&&Go.isSet;const Pb=e_?od(e_):function Uw(c){return kn(c)&&"[object Set]"==Ec(c)};var xf="[object Arguments]",t_="[object Function]",i_="[object Object]",kr={};kr[xf]=kr["[object Array]"]=kr["[object ArrayBuffer]"]=kr["[object DataView]"]=kr["[object Boolean]"]=kr["[object Date]"]=kr["[object Float32Array]"]=kr["[object Float64Array]"]=kr["[object Int8Array]"]=kr["[object Int16Array]"]=kr["[object Int32Array]"]=kr["[object Map]"]=kr["[object Number]"]=kr[i_]=kr["[object RegExp]"]=kr["[object Set]"]=kr["[object String]"]=kr["[object Symbol]"]=kr["[object Uint8Array]"]=kr["[object Uint8ClampedArray]"]=kr["[object Uint16Array]"]=kr["[object Uint32Array]"]=!0,kr["[object Error]"]=kr[t_]=kr["[object WeakMap]"]=!1;const Mf=function ya(c,m,r,h,T,e){var i,s=1&m,u=2&m,f=4&m;if(r&&(i=T?r(c,h,T,e):r(c)),void 0!==i)return i;if(!Ho(c))return c;var x=wr(c);if(x){if(i=function Gg(c){var m=c.length,r=new c.constructor(m);return m&&"string"==typeof c[0]&&_f.call(c,"index")&&(r.index=c.index,r.input=c.input),r}(c),!s)return function Sc(c,m){var r=-1,h=c.length;for(m||(m=Array(h));++r<h;)m[r]=c[r];return m}(c,i)}else{var S=Ec(c),O=S==t_||"[object GeneratorFunction]"==S;if(ea(c))return function xs(c,m){if(m)return c.slice();var r=c.length,h=ss?ss(r):new c.constructor(r);return c.copy(h),h}(c,s);if(S==i_||S==xf||O&&!T){if(i=u||O?{}:function ip(c){return"function"!=typeof c.constructor||mc(c)?{}:tp(Ph(c))}(c),!s)return u?function qm(c,m){return Nr(c,Tu(c),m)}(c,function rs(c,m){return c&&Nr(m,wo(m),c)}(i,c)):function Du(c,m){return Nr(c,ul(c),m)}(c,function xo(c,m){return c&&Nr(m,Ar(m),c)}(i,c))}else{if(!kr[S])return T?c:{};i=Kg(c,S,s)}}e||(e=new jc);var z=e.get(c);if(z)return z;e.set(c,i),Pb(c)?c.forEach(function(Te){i.add(ya(Te,m,r,Te,c,e))}):Lh(c)&&c.forEach(function(Te,qe){i.set(qe,ya(Te,m,r,qe,c,e))});var de=x?void 0:(f?u?_a:Zc:u?wo:Ar)(c);return function fa(c,m){for(var r=-1,h=null==c?0:c.length;++r<h&&!1!==m(c[r],r,c););}(de||c,function(Te,qe){de&&(Te=c[qe=Te]),Yo(i,qe,ya(Te,m,r,qe,c,e))}),i};function Ld(c){return"object"==typeof c&&null!=c&&1===c.nodeType}function Nd(c,m){return(!m||"hidden"!==c)&&"visible"!==c&&"clip"!==c}function Jc(c,m){if(c.clientHeight<c.scrollHeight||c.clientWidth<c.scrollWidth){var r=getComputedStyle(c,null);return Nd(r.overflowY,m)||Nd(r.overflowX,m)||!!(T=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch{return null}}(h=c))&&(T.clientHeight<h.scrollHeight||T.clientWidth<h.scrollWidth)}var h,T;return!1}function Ic(c,m,r,h,T,e,i,s){return e<c&&i>m||e>c&&i<m?0:e<=c&&s<=r||i>=m&&s>=r?e-c-h:i>m&&s<r||e<c&&s>r?i-m+T:0}function zd(c,m){var r=window,h=m.scrollMode,T=m.block,e=m.inline,i=m.boundary,s=m.skipOverflowHiddenElements,u="function"==typeof i?i:function(Op){return Op!==i};if(!Ld(c))throw new TypeError("Invalid target");for(var f=document.scrollingElement||document.documentElement,x=[],S=c;Ld(S)&&u(S);){if((S=S.parentElement)===f){x.push(S);break}null!=S&&S===document.body&&Jc(S)&&!Jc(document.documentElement)||null!=S&&Jc(S,s)&&x.push(S)}for(var O=r.visualViewport?r.visualViewport.width:innerWidth,z=r.visualViewport?r.visualViewport.height:innerHeight,J=window.scrollX||pageXOffset,de=window.scrollY||pageYOffset,Te=c.getBoundingClientRect(),qe=Te.height,_t=Te.width,Ht=Te.top,si=Te.right,Mi=Te.bottom,Ni=Te.left,Vi="start"===T||"nearest"===T?Ht:"end"===T?Mi:Ht+qe/2,ri="center"===e?Ni+_t/2:"end"===e?si:Ni,tn=[],Jn=0;Jn<x.length;Jn++){var Zn=x[Jn],Pl=Zn.getBoundingClientRect(),kc=Pl.height,kp=Pl.width,tm=Pl.top,Xi=Pl.right,rn=Pl.bottom,dn=Pl.left;if("if-needed"===h&&Ht>=0&&Ni>=0&&Mi<=z&&si<=O&&Ht>=tm&&Mi<=rn&&Ni>=dn&&si<=Xi)return tn;var Qn=getComputedStyle(Zn),Oo=parseInt(Qn.borderLeftWidth,10),Xa=parseInt(Qn.borderTopWidth,10),oa=parseInt(Qn.borderRightWidth,10),Ol=parseInt(Qn.borderBottomWidth,10),Pr=0,ed=0,Pp="offsetWidth"in Zn?Zn.offsetWidth-Zn.clientWidth-Oo-oa:0,ls="offsetHeight"in Zn?Zn.offsetHeight-Zn.clientHeight-Xa-Ol:0;if(f===Zn)Pr="start"===T?Vi:"end"===T?Vi-z:"nearest"===T?Ic(de,de+z,z,Xa,Ol,de+Vi,de+Vi+qe,qe):Vi-z/2,ed="start"===e?ri:"center"===e?ri-O/2:"end"===e?ri-O:Ic(J,J+O,O,Oo,oa,J+ri,J+ri+_t,_t),Pr=Math.max(0,Pr+de),ed=Math.max(0,ed+J);else{Pr="start"===T?Vi-tm-Xa:"end"===T?Vi-rn+Ol+ls:"nearest"===T?Ic(tm,rn,kc,Xa,Ol+ls,Vi,Vi+qe,qe):Vi-(tm+kc/2)+ls/2,ed="start"===e?ri-dn-Oo:"center"===e?ri-(dn+kp/2)+Pp/2:"end"===e?ri-Xi+oa+Pp:Ic(dn,Xi,kp,Oo,oa+Pp,ri,ri+_t,_t);var td=Zn.scrollLeft,Ja=Zn.scrollTop;Vi+=Ja-(Pr=Math.max(0,Math.min(Ja+Pr,Zn.scrollHeight-kc+ls))),ri+=td-(ed=Math.max(0,Math.min(td+ed,Zn.scrollWidth-kp+Pp)))}tn.push({el:Zn,top:Pr,left:ed})}return tn}function Df(c){return c===Object(c)&&0!==Object.keys(c).length}let Sf=(()=>{class c{constructor(){this.resize$=new xr.x}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var Us=j(4006),d_=j(7558),oc=j(4859),mn=j(1281),ml=j(3353),Tn=j(3238),Tf=j(9643);let u_=(()=>{class c{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(r){this._vertical=(0,mn.Ig)(r)}get inset(){return this._inset}set inset(r){this._inset=(0,mn.Ig)(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,h){2&r&&(a.uIk("aria-orientation",h.vertical?"vertical":"horizontal"),a.ekj("mat-divider-vertical",h.vertical)("mat-divider-horizontal",!h.vertical)("mat-divider-inset",h.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(r,h){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),c})(),If=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Tn.BQ,Tn.BQ]}),c})();var pl=j(7253),rp=j(5017),Tl=j(9521);const Ou=["*"],zh='@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}',h_=["unscopedContent"],op=["text"],sp=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Af=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],Lf=new a.OlP("ListOption");let Nf=(()=>{class c{constructor(r){this._elementRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]}),c})(),zf=(()=>{class c{constructor(r){this._elementRef=r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]}),c})(),C_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]}),c})(),Bf=(()=>{class c{constructor(r){this._listOption=r}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Lf,8))},c.\u0275dir=a.lG2({type:c,hostVars:4,hostBindings:function(r,h){2&r&&a.ekj("mdc-list-item__start",h._isAlignedAtStart())("mdc-list-item__end",!h._isAlignedAtStart())}}),c})(),E_=(()=>{class c extends Bf{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=a.n5z(c)))(h||c)}}(),c.\u0275dir=a.lG2({type:c,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[a.qOj]}),c})(),M_=(()=>{class c extends Bf{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=a.n5z(c)))(h||c)}}(),c.\u0275dir=a.lG2({type:c,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[a.qOj]}),c})();const ap=new a.OlP("MAT_LIST_CONFIG");let va=(()=>{class c{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=(0,a.f3M)(ap,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=(0,mn.Ig)(r)}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,mn.Ig)(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,hostVars:1,hostBindings:function(r,h){2&r&&a.uIk("aria-disabled",h.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}}),c})(),Vf=(()=>{class c{set lines(r){this._explicitLines=(0,mn.su)(r,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(r){this._disableRipple=(0,mn.Ig)(r)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(r){this._disabled=(0,mn.Ig)(r)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(r,h,T,e,i,s){this._elementRef=r,this._ngZone=h,this._listBase=T,this._platform=e,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new Jo.w0,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=i||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===s,T&&!T._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Tn.IR(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add((0,hn.T)(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(r){if(!this._lines||!this._titles||!this._unscopedContent)return;r&&this._checkDomForUnscopedTextContent();const h=this._explicitLines??this._inferLinesFromContent(),T=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",h<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",h<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===h),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===h),this._hasUnscopedTextContent){const e=0===this._titles.length&&1===h;T.classList.toggle("mdc-list-item__primary-text",e),T.classList.toggle("mdc-list-item__secondary-text",!e)}else T.classList.remove("mdc-list-item__primary-text"),T.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let r=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(r+=1),r}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(r=>r.nodeType!==r.COMMENT_NODE).some(r=>!(!r.textContent||!r.textContent.trim()))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(va,8),a.Y36(ml.t4),a.Y36(Tn.Y2,8),a.Y36(a.QbO,8))},c.\u0275dir=a.lG2({type:c,contentQueries:function(r,h,T){if(1&r&&(a.Suo(T,E_,4),a.Suo(T,M_,4)),2&r){let e;a.iGM(e=a.CRH())&&(h._avatars=e),a.iGM(e=a.CRH())&&(h._icons=e)}},hostVars:4,hostBindings:function(r,h){2&r&&(a.uIk("aria-disabled",h.disabled)("disabled",h._isButtonElement&&h.disabled||null),a.ekj("mdc-list-item--disabled",h.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}}),c})(),Uf=(()=>{class c extends va{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=a.n5z(c)))(h||c)}}(),c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[a._Bn([{provide:va,useExisting:c}]),a.qOj],ngContentSelectors:Ou,decls:1,vars:0,template:function(r,h){1&r&&(a.F$t(),a.Hsn(0))},styles:[zh],encapsulation:2,changeDetection:0}),c})(),S_=(()=>{class c extends Vf{get activated(){return this._activated}set activated(r){this._activated=(0,mn.Ig)(r)}constructor(r,h,T,e,i,s){super(r,h,T,e,i,s),this._activated=!1}_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(va,8),a.Y36(ml.t4),a.Y36(Tn.Y2,8),a.Y36(a.QbO,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,h,T){if(1&r&&(a.Suo(T,zf,5),a.Suo(T,Nf,5),a.Suo(T,C_,5)),2&r){let e;a.iGM(e=a.CRH())&&(h._lines=e),a.iGM(e=a.CRH())&&(h._titles=e),a.iGM(e=a.CRH())&&(h._meta=e)}},viewQuery:function(r,h){if(1&r&&(a.Gf(h_,5),a.Gf(op,5)),2&r){let T;a.iGM(T=a.CRH())&&(h._unscopedContent=T.first),a.iGM(T=a.CRH())&&(h._itemText=T.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(r,h){2&r&&(a.uIk("aria-current",h._getAriaCurrent()),a.ekj("mdc-list-item--activated",h.activated)("mdc-list-item--with-leading-avatar",0!==h._avatars.length)("mdc-list-item--with-leading-icon",0!==h._icons.length)("mdc-list-item--with-trailing-meta",0!==h._meta.length)("_mat-animation-noopable",h._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[a.qOj],ngContentSelectors:Af,decls:10,vars:0,consts:[[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],[1,"mat-mdc-focus-indicator"]],template:function(r,h){1&r&&(a.F$t(sp),a.Hsn(0),a.TgZ(1,"span",0),a.Hsn(2,1),a.Hsn(3,2),a.TgZ(4,"span",1,2),a.NdJ("cdkObserveContent",function(){return h._updateItemLines(!0)}),a.Hsn(6,3),a.qZA()(),a.Hsn(7,4),a.Hsn(8,5),a._UZ(9,"div",3))},dependencies:[Tf.wD],encapsulation:2,changeDetection:0}),c})(),Zw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=a.lG2({type:c,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"]}),c})(),Yb=(()=>{class c extends va{constructor(){super(...arguments),this._isNonInteractive=!1}}return c.\u0275fac=function(){let m;return function(h){return(m||(m=a.n5z(c)))(h||c)}}(),c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[a._Bn([{provide:va,useExisting:c}]),a.qOj],ngContentSelectors:Ou,decls:1,vars:0,template:function(r,h){1&r&&(a.F$t(),a.Hsn(0))},styles:[zh],encapsulation:2,changeDetection:0}),c})(),I_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Tf.Q8,X.ez,Tn.BQ,Tn.si,Tn.us,If]}),c})();var Kb=j(515);const A_=(0,ml.i$)({passive:!0});let k_=(()=>{class c{constructor(r,h){this._platform=r,this._ngZone=h,this._monitoredElements=new Map}monitor(r){if(!this._platform.isBrowser)return Kb.E;const h=(0,mn.fI)(r),T=this._monitoredElements.get(h);if(T)return T.subject;const e=new xr.x,i="cdk-text-field-autofilled",s=u=>{"cdk-text-field-autofill-start"!==u.animationName||h.classList.contains(i)?"cdk-text-field-autofill-end"===u.animationName&&h.classList.contains(i)&&(h.classList.remove(i),this._ngZone.run(()=>e.next({target:u.target,isAutofilled:!1}))):(h.classList.add(i),this._ngZone.run(()=>e.next({target:u.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{h.addEventListener("animationstart",s,A_),h.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(h,{subject:e,unlisten:()=>{h.removeEventListener("animationstart",s,A_)}}),e}stopMonitoring(r){const h=(0,mn.fI)(r),T=this._monitoredElements.get(h);T&&(T.unlisten(),T.subject.complete(),h.classList.remove("cdk-text-field-autofill-monitored"),h.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(h))}ngOnDestroy(){this._monitoredElements.forEach((r,h)=>this.stopMonitoring(h))}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(ml.t4),a.LFG(a.R0b))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),P_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})();var fl=j(9549);const Jb=new a.OlP("MAT_INPUT_VALUE_ACCESSOR"),O_=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Qb=0;const R_=(0,Tn.FD)(class{constructor(c,m,r,h){this._defaultErrorStateMatcher=c,this._parentForm=m,this._parentFormGroup=r,this.ngControl=h,this.stateChanges=new xr.x}});let Kw=(()=>{class c extends R_{get disabled(){return this._disabled}set disabled(r){this._disabled=(0,mn.Ig)(r),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(r){this._id=r||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Us.kI.required)??!1}set required(r){this._required=(0,mn.Ig)(r)}get type(){return this._type}set type(r){this._type=r||"text",this._validateType(),!this._isTextarea&&(0,ml.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(r){r!==this.value&&(this._inputValueAccessor.value=r,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(r){this._readonly=(0,mn.Ig)(r)}constructor(r,h,T,e,i,s,u,f,x,S){super(s,e,i,T),this._elementRef=r,this._platform=h,this._autofillMonitor=f,this._formField=S,this._uid="mat-input-"+Qb++,this.focused=!1,this.stateChanges=new xr.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(J=>(0,ml.qK)().has(J)),this._iOSKeyupListener=J=>{const de=J.target;!de.value&&0===de.selectionStart&&0===de.selectionEnd&&(de.setSelectionRange(1,1),de.setSelectionRange(0,0))};const O=this._elementRef.nativeElement,z=O.nodeName.toLowerCase();this._inputValueAccessor=u||O,this._previousNativeValue=this.value,this.id=this.id,h.IOS&&x.runOutsideAngular(()=>{r.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===z,this._isTextarea="textarea"===z,this._isInFormField=!!S,this._isNativeSelect&&(this.controlType=O.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(r=>{this.autofilled=r.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(r){this._elementRef.nativeElement.focus(r)}_focusChanged(r){r!==this.focused&&(this.focused=r,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const r=this._elementRef.nativeElement.value;this._previousNativeValue!==r&&(this._previousNativeValue=r,this.stateChanges.next())}_dirtyCheckPlaceholder(){const r=this._getPlaceholder();if(r!==this._previousPlaceholder){const h=this._elementRef.nativeElement;this._previousPlaceholder=r,r?h.setAttribute("placeholder",r):h.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){O_.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let r=this._elementRef.nativeElement.validity;return r&&r.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const r=this._elementRef.nativeElement,h=r.options[0];return this.focused||r.multiple||!this.empty||!!(r.selectedIndex>-1&&h&&h.label)}return this.focused||!this.empty}setDescribedByIds(r){r.length?this._elementRef.nativeElement.setAttribute("aria-describedby",r.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const r=this._elementRef.nativeElement;return this._isNativeSelect&&(r.multiple||r.size>1)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(ml.t4),a.Y36(Us.a5,10),a.Y36(Us.F,8),a.Y36(Us.sg,8),a.Y36(Tn.rD),a.Y36(Jb,10),a.Y36(k_),a.Y36(a.R0b),a.Y36(fl.G_,8))},c.\u0275dir=a.lG2({type:c,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,h){1&r&&a.NdJ("focus",function(){return h._focusChanged(!0)})("blur",function(){return h._focusChanged(!1)})("input",function(){return h._onInput()}),2&r&&(a.Ikx("id",h.id)("disabled",h.disabled)("required",h.required),a.uIk("name",h.name||null)("readonly",h.readonly&&!h._isNativeSelect||null)("aria-invalid",h.empty&&h.required?null:h.errorState)("aria-required",h.required)("id",h.id),a.ekj("mat-input-server",h._isServer)("mat-mdc-form-field-textarea-control",h._isInFormField&&h._isTextarea)("mat-mdc-form-field-input-control",h._isInFormField)("mdc-text-field__input",h._isInFormField)("mat-mdc-native-select-inline",h._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[a._Bn([{provide:fl.Eo,useExisting:c}]),a.qOj,a.TTD]}),c})(),jf=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Tn.BQ,fl.lN,fl.lN,P_,Tn.BQ]}),c})();var ka=j(8605),gl=j(445),F_=j(9718),L_=j(1884);const qa=["*"],Il=["content"];function Al(c,m){if(1&c){const r=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T._onBackdropClicked())}),a.qZA()}if(2&c){const r=a.oxw();a.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function N_(c,m){1&c&&(a.TgZ(0,"mat-drawer-content"),a.Hsn(1,2),a.qZA())}const z_=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],e0=["mat-drawer","mat-drawer-content","*"];function t0(c,m){if(1&c){const r=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T._onBackdropClicked())}),a.qZA()}if(2&c){const r=a.oxw();a.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function n0(c,m){1&c&&(a.TgZ(0,"mat-sidenav-content"),a.Hsn(1,2),a.qZA())}const r0=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Hf=["mat-sidenav","mat-sidenav-content","*"],B_={transformDrawer:(0,he.X$)("transform",[(0,he.SB)("open, open-instant",(0,he.oB)({transform:"none",visibility:"visible"})),(0,he.SB)("void",(0,he.oB)({"box-shadow":"none",visibility:"hidden"})),(0,he.eR)("void => open-instant",(0,he.jt)("0ms")),(0,he.eR)("void <=> open, open-instant => void",(0,he.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},s0=new a.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function V_(){return!1}}),$f=new a.OlP("MAT_DRAWER_CONTAINER");let Vh=(()=>{class c extends ka.PQ{constructor(r,h,T,e,i){super(T,e,i),this._changeDetectorRef=r,this._container=h}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.sBO),a.Y36((0,a.Gpc)(()=>U_)),a.Y36(a.SBq),a.Y36(ka.mF),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,h){2&r&&a.Udp("margin-left",h._container._contentMargins.left,"px")("margin-right",h._container._contentMargins.right,"px")},features:[a._Bn([{provide:ka.PQ,useExisting:c}]),a.qOj],ngContentSelectors:qa,decls:1,vars:0,template:function(r,h){1&r&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),Uh=(()=>{class c{get position(){return this._position}set position(r){(r="end"===r?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(r),this._position=r,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(r){this._mode=r,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(r){this._disableClose=(0,mn.Ig)(r)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(r){("true"===r||"false"===r||null==r)&&(r=(0,mn.Ig)(r)),this._autoFocus=r}get opened(){return this._opened}set opened(r){this.toggle((0,mn.Ig)(r))}constructor(r,h,T,e,i,s,u,f){this._elementRef=r,this._focusTrapFactory=h,this._focusMonitor=T,this._platform=e,this._ngZone=i,this._interactivityChecker=s,this._doc=u,this._container=f,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new xr.x,this._animationEnd=new xr.x,this._animationState="void",this.openedChange=new a.vpe(!0),this._openedStream=this.openedChange.pipe((0,bn.h)(x=>x),(0,Gn.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,bn.h)(x=>x.fromState!==x.toState&&0===x.toState.indexOf("open")),(0,F_.h)(void 0)),this._closedStream=this.openedChange.pipe((0,bn.h)(x=>!x),(0,Gn.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,bn.h)(x=>x.fromState!==x.toState&&"void"===x.toState),(0,F_.h)(void 0)),this._destroyed=new xr.x,this.onPositionChanged=new a.vpe,this._modeChanged=new xr.x,this.openedChange.subscribe(x=>{x?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Wr.R)(this._elementRef.nativeElement,"keydown").pipe((0,bn.h)(x=>x.keyCode===Tl.hY&&!this.disableClose&&!(0,Tl.Vb)(x)),(0,Dr.R)(this._destroyed)).subscribe(x=>this._ngZone.run(()=>{this.close(),x.stopPropagation(),x.preventDefault()}))}),this._animationEnd.pipe((0,L_.x)((x,S)=>x.fromState===S.fromState&&x.toState===S.toState)).subscribe(x=>{const{fromState:S,toState:O}=x;(0===O.indexOf("open")&&"void"===S||"void"===O&&0===S.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(r,h){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const T=()=>{r.removeEventListener("blur",T),r.removeEventListener("mousedown",T),r.removeAttribute("tabindex")};r.addEventListener("blur",T),r.addEventListener("mousedown",T)})),r.focus(h)}_focusByCssSelector(r,h){let T=this._elementRef.nativeElement.querySelector(r);T&&this._forceFocus(T,h)}_takeFocus(){if(!this._focusTrap)return;const r=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(h=>{!h&&"function"==typeof this._elementRef.nativeElement.focus&&r.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(r){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,r):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const r=this._doc.activeElement;return!!r&&this._elementRef.nativeElement.contains(r)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(r){return this.toggle(!0,r)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(r=!this.opened,h){r&&h&&(this._openedVia=h);const T=this._setOpen(r,!r&&this._isFocusWithinDrawer(),this._openedVia||"program");return r||(this._openedVia=null),T}_setOpen(r,h,T){return this._opened=r,r?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",h&&this._restoreFocus(T)),this._updateFocusTrapState(),new Promise(e=>{this.openedChange.pipe((0,Va.q)(1)).subscribe(i=>e(i?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(r){const h=this._elementRef.nativeElement,T=h.parentNode;"end"===r?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),T.insertBefore(this._anchor,h)),T.appendChild(h)):this._anchor&&this._anchor.parentNode.insertBefore(h,this._anchor)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(pl.qV),a.Y36(pl.tE),a.Y36(ml.t4),a.Y36(a.R0b),a.Y36(pl.ic),a.Y36(X.K0,8),a.Y36($f,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-drawer"]],viewQuery:function(r,h){if(1&r&&a.Gf(Il,5),2&r){let T;a.iGM(T=a.CRH())&&(h._content=T.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(r,h){1&r&&a.WFA("@transform.start",function(e){return h._animationStarted.next(e)})("@transform.done",function(e){return h._animationEnd.next(e)}),2&r&&(a.uIk("align",null),a.d8E("@transform",h._animationState),a.ekj("mat-drawer-end","end"===h.position)("mat-drawer-over","over"===h.mode)("mat-drawer-push","push"===h.mode)("mat-drawer-side","side"===h.mode)("mat-drawer-opened",h.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:qa,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,h){1&r&&(a.F$t(),a.TgZ(0,"div",0,1),a.Hsn(2),a.qZA())},dependencies:[ka.PQ],encapsulation:2,data:{animation:[B_.transformDrawer]},changeDetection:0}),c})(),U_=(()=>{class c{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(r){this._autosize=(0,mn.Ig)(r)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(r){this._backdropOverride=null==r?null:(0,mn.Ig)(r)}get scrollable(){return this._userContent||this._content}constructor(r,h,T,e,i,s=!1,u){this._dir=r,this._element=h,this._ngZone=T,this._changeDetectorRef=e,this._animationMode=u,this._drawers=new a.n_E,this.backdropClick=new a.vpe,this._destroyed=new xr.x,this._doCheckSubject=new xr.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new xr.x,r&&r.change.pipe((0,Dr.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),i.change().pipe((0,Dr.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=s}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Ps.O)(this._allDrawers),(0,Dr.R)(this._destroyed)).subscribe(r=>{this._drawers.reset(r.filter(h=>!h._container||h._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Ps.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(r=>{this._watchDrawerToggle(r),this._watchDrawerPosition(r),this._watchDrawerMode(r)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,ua.b)(10),(0,Dr.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(r=>r.open())}close(){this._drawers.forEach(r=>r.close())}updateContentMargins(){let r=0,h=0;if(this._left&&this._left.opened)if("side"==this._left.mode)r+=this._left._getWidth();else if("push"==this._left.mode){const T=this._left._getWidth();r+=T,h-=T}if(this._right&&this._right.opened)if("side"==this._right.mode)h+=this._right._getWidth();else if("push"==this._right.mode){const T=this._right._getWidth();h+=T,r-=T}r=r||null,h=h||null,(r!==this._contentMargins.left||h!==this._contentMargins.right)&&(this._contentMargins={left:r,right:h},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(r){r._animationStarted.pipe((0,bn.h)(h=>h.fromState!==h.toState),(0,Dr.R)(this._drawers.changes)).subscribe(h=>{"open-instant"!==h.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==r.mode&&r.openedChange.pipe((0,Dr.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(r.opened))}_watchDrawerPosition(r){r&&r.onPositionChanged.pipe((0,Dr.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Va.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(r){r&&r._modeChanged.pipe((0,Dr.R)((0,hn.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(r){const h=this._element.nativeElement.classList,T="mat-drawer-container-has-open";r?h.add(T):h.remove(T)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(r=>{"end"==r.position?this._end=r:this._start=r}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(r=>r&&!r.disableClose&&this._canHaveBackdrop(r)).forEach(r=>r._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(r){return"side"!==r.mode||!!this._backdropOverride}_isDrawerOpen(r){return null!=r&&r.opened}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(gl.Is,8),a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(ka.rL),a.Y36(s0),a.Y36(a.QbO,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-drawer-container"]],contentQueries:function(r,h,T){if(1&r&&(a.Suo(T,Vh,5),a.Suo(T,Uh,5)),2&r){let e;a.iGM(e=a.CRH())&&(h._content=e.first),a.iGM(e=a.CRH())&&(h._allDrawers=e)}},viewQuery:function(r,h){if(1&r&&a.Gf(Vh,5),2&r){let T;a.iGM(T=a.CRH())&&(h._userContent=T.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,h){2&r&&a.ekj("mat-drawer-container-explicit-backdrop",h._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[a._Bn([{provide:$f,useExisting:c}])],ngContentSelectors:e0,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,h){1&r&&(a.F$t(z_),a.YNc(0,Al,1,2,"div",0),a.Hsn(1),a.Hsn(2,1),a.YNc(3,N_,2,0,"mat-drawer-content",1)),2&r&&(a.Q6J("ngIf",h.hasBackdrop),a.xp6(3),a.Q6J("ngIf",!h._content))},dependencies:[X.O5,Vh],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),cp=(()=>{class c extends Vh{constructor(r,h,T,e,i){super(r,h,T,e,i)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.sBO),a.Y36((0,a.Gpc)(()=>dp)),a.Y36(a.SBq),a.Y36(ka.mF),a.Y36(a.R0b))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(r,h){2&r&&a.Udp("margin-left",h._container._contentMargins.left,"px")("margin-right",h._container._contentMargins.right,"px")},features:[a._Bn([{provide:ka.PQ,useExisting:c}]),a.qOj],ngContentSelectors:qa,decls:1,vars:0,template:function(r,h){1&r&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),Gf=(()=>{class c extends Uh{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(r){this._fixedInViewport=(0,mn.Ig)(r)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(r){this._fixedTopGap=(0,mn.su)(r)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(r){this._fixedBottomGap=(0,mn.su)(r)}}return c.\u0275fac=function(){let m;return function(h){return(m||(m=a.n5z(c)))(h||c)}}(),c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(r,h){2&r&&(a.uIk("align",null),a.Udp("top",h.fixedInViewport?h.fixedTopGap:null,"px")("bottom",h.fixedInViewport?h.fixedBottomGap:null,"px"),a.ekj("mat-drawer-end","end"===h.position)("mat-drawer-over","over"===h.mode)("mat-drawer-push","push"===h.mode)("mat-drawer-side","side"===h.mode)("mat-drawer-opened",h.opened)("mat-sidenav-fixed",h.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[a.qOj],ngContentSelectors:qa,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,h){1&r&&(a.F$t(),a.TgZ(0,"div",0,1),a.Hsn(2),a.qZA())},dependencies:[ka.PQ],encapsulation:2,data:{animation:[B_.transformDrawer]},changeDetection:0}),c})(),dp=(()=>{class c extends U_{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=a.n5z(c)))(h||c)}}(),c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-sidenav-container"]],contentQueries:function(r,h,T){if(1&r&&(a.Suo(T,cp,5),a.Suo(T,Gf,5)),2&r){let e;a.iGM(e=a.CRH())&&(h._content=e.first),a.iGM(e=a.CRH())&&(h._allDrawers=e)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,h){2&r&&a.ekj("mat-drawer-container-explicit-backdrop",h._backdropOverride)},exportAs:["matSidenavContainer"],features:[a._Bn([{provide:$f,useExisting:c}]),a.qOj],ngContentSelectors:Hf,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,h){1&r&&(a.F$t(r0),a.YNc(0,t0,1,2,"div",0),a.Hsn(1),a.Hsn(2,1),a.YNc(3,n0,2,0,"mat-sidenav-content",1)),2&r&&(a.Q6J("ngIf",h.hasBackdrop),a.xp6(3),a.Q6J("ngIf",!h._content))},dependencies:[X.O5,cp],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),up=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[X.ez,Tn.BQ,ka.ZD,ka.ZD,Tn.BQ]}),c})();const j_=["switch"],H_=["*"],$_=new a.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})}),G_={provide:Us.JU,useExisting:(0,a.Gpc)(()=>Wf),multi:!0};class Zf{constructor(m,r){this.source=m,this.checked=r}}let Z_=0;const W_=(0,Tn.sb)((0,Tn.pj)((0,Tn.Kr)((0,Tn.Id)(class{constructor(c){this._elementRef=c}}))));let Y_=(()=>{class c extends W_{get required(){return this._required}set required(r){this._required=(0,mn.Ig)(r)}get checked(){return this._checked}set checked(r){this._checked=(0,mn.Ig)(r),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(r,h,T,e,i,s,u){super(r),this._focusMonitor=h,this._changeDetectorRef=T,this.defaults=i,this._onChange=f=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new a.vpe,this.toggleChange=new a.vpe,this.tabIndex=parseInt(e)||0,this.color=this.defaultColor=i.color||"accent",this._noopAnimations="NoopAnimations"===s,this.id=this._uniqueId=`${u}${++Z_}`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(r=>{"keyboard"===r||"program"===r?(this._focused=!0,this._changeDetectorRef.markForCheck()):r||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(r){this.checked=!!r}registerOnChange(r){this._onChange=r}registerOnTouched(r){this._onTouched=r}setDisabledState(r){this.disabled=r,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return c.\u0275fac=function(r){a.$Z()},c.\u0275dir=a.lG2({type:c,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[a.qOj]}),c})(),Wf=(()=>{class c extends Y_{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(r,h,T,e,i,s){super(r,h,T,e,i,s,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new Zf(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(r){return new Zf(this,r)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(pl.tE),a.Y36(a.sBO),a.$8M("tabindex"),a.Y36($_),a.Y36(a.QbO,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-slide-toggle"]],viewQuery:function(r,h){if(1&r&&a.Gf(j_,5),2&r){let T;a.iGM(T=a.CRH())&&(h._switchElement=T.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(r,h){2&r&&(a.Ikx("id",h.id),a.uIk("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),a.ekj("mat-mdc-slide-toggle-focused",h._focused)("mat-mdc-slide-toggle-checked",h.checked)("_mat-animation-noopable",h._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[a._Bn([G_]),a.qOj],ngContentSelectors:H_,decls:17,vars:24,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"],[3,"for","click"]],template:function(r,h){if(1&r&&(a.F$t(),a.TgZ(0,"div",0)(1,"button",1,2),a.NdJ("click",function(){return h._handleClick()}),a._UZ(3,"div",3),a.TgZ(4,"div",4)(5,"div",5)(6,"div",6),a._UZ(7,"div",7),a.qZA(),a.TgZ(8,"div",8),a._UZ(9,"div",9),a.qZA(),a.TgZ(10,"div",10),a.O4$(),a.TgZ(11,"svg",11),a._UZ(12,"path",12),a.qZA(),a.TgZ(13,"svg",13),a._UZ(14,"path",14),a.qZA()()()()(),a.kcU(),a.TgZ(15,"label",15),a.NdJ("click",function(e){return e.stopPropagation()}),a.Hsn(16),a.qZA()()),2&r){const T=a.MAs(2);a.ekj("mdc-form-field--align-end","before"==h.labelPosition),a.xp6(1),a.ekj("mdc-switch--selected",h.checked)("mdc-switch--unselected",!h.checked)("mdc-switch--checked",h.checked)("mdc-switch--disabled",h.disabled),a.Q6J("tabIndex",h.tabIndex)("disabled",h.disabled),a.uIk("id",h.buttonId)("name",h.name)("aria-label",h.ariaLabel)("aria-labelledby",h._getAriaLabelledBy())("aria-describedby",h.ariaDescribedby)("aria-required",h.required||null)("aria-checked",h.checked),a.xp6(8),a.Q6J("matRippleTrigger",T)("matRippleDisabled",h.disableRipple||h.disabled)("matRippleCentered",!0),a.xp6(6),a.Q6J("for",h.buttonId),a.uIk("id",h._labelId)}},dependencies:[Tn.wG],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mdc-switch{width:var(--mdc-switch-track-width, 36px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, #616161)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color, var(--mdc-theme-surface, #fff))}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__focus-ring-wrapper,.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height, 20px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape, 10px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width, 20px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width, 20px))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 18px);height:var(--mdc-switch-selected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 18px);height:var(--mdc-switch-unselected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size, 48px);width:var(--mdc-switch-state-layer-size, 48px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height, 14px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape, 7px)}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}'],encapsulation:2,changeDetection:0}),c})(),q_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})(),c0=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[q_,Tn.BQ,Tn.si,X.ez,q_,Tn.BQ]}),c})();const d0=["exampleLink"];function u0(c,m){if(1&c){const r=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.clearSearch())}),a.TgZ(1,"mat-icon"),a._uU(2,"close"),a.qZA()()}}const h0=function(c){return{_routerLinkActiveWakeUpHack_:c}};function m0(c,m){if(1&c&&(a.TgZ(0,"a",14,15),a._uU(2),a.qZA()),2&c){const r=a.oxw().$implicit,h=a.oxw(2);a.Q6J("routerLink","/demo/"+(h.isEditMode?"/edit/":"")+r.path)("routerLinkActiveOptions",a.VKq(3,h0,h.isEditMode)),a.xp6(2),a.hij(" ",r.data.label," ")}}function p0(c,m){if(1&c&&(a.ynx(0),a.YNc(1,m0,3,5,"a",13),a.BQk()),2&c){const r=m.$implicit;a.xp6(1),a.Q6J("ngIf",r)}}function f0(c,m){if(1&c&&(a.ynx(0),a.TgZ(1,"h3",12),a._uU(2),a.qZA(),a.YNc(3,p0,2,1,"ng-container",9),a._UZ(4,"mat-divider"),a.BQk()),2&c){const r=m.$implicit,h=a.oxw();a.xp6(2),a.Oqu(r),a.xp6(1),a.Q6J("ngForOf",h.routes[r])}}let g0=(()=>{class c{constructor(r,h,T,e){this.zone=r,this.router=h,this.activatedRoute=T,this.mapResizeService=e,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild.params.demoUrl,this.originalRoutes=mo(fb[0].children,i=>i.data?i.data.cat:null),this.categories=[cn.STYLES,cn.LAYERS,cn.SOURCES,cn.USER_INTERACTION,cn.CAMERA,cn.CONTROLS_AND_OVERLAYS,cn.TERRAIN]}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(r){const h=this.activatedRoute.snapshot.firstChild;this.router.navigate(r.checked?["demo","edit",h.url[0].path]:["demo",h.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function ku(c){return Mf(c,5)}(this.originalRoutes),Object.values(this.routes).forEach(r=>{r.forEach((h,T)=>{h.data&&!h.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete r[T]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,Ba.P)()).subscribe(()=>{const r=this.exampleLinks.find(h=>h.nativeElement.classList.contains("active"));r&&function l_(c,m){var r=!c.ownerDocument.documentElement.contains(c);if(Df(m)&&"function"==typeof m.behavior)return m.behavior(r?[]:zd(c,m));if(!r){var h=function a_(c){return!1===c?{block:"end",inline:"nearest"}:Df(c)?c:{block:"start",inline:"nearest"}}(m);(function s_(c,m){void 0===m&&(m="auto");var r="scrollBehavior"in document.body.style;c.forEach(function(h){var T=h.el,e=h.top,i=h.left;T.scroll&&r?T.scroll({top:e,left:i,behavior:m}):(T.scrollTop=e,T.scrollLeft=i)})})(zd(c,h),h.behavior)}}(r.nativeElement,{block:"center",scrollMode:"if-needed"})})}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.R0b),a.Y36(se.F0),a.Y36(se.gz),a.Y36(Sf))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ng-component"]],viewQuery:function(r,h){if(1&r&&a.Gf(d0,5,a.SBq),2&r){let T;a.iGM(T=a.CRH())&&(h.exampleLinks=T)}},decls:18,vars:5,consts:[["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModel","ngModelChange","change"],["mode","side",3,"opened","openedChange"],["sidenav",""],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["exampleLink",""]],template:function(r,h){1&r&&(a.TgZ(0,"showcase-layout-toolbar-menu",0)(1,"button",1),a.NdJ("click",function(){return h.toggleSidenav()}),a.TgZ(2,"mat-icon"),a._uU(3,"menu"),a.qZA()()(),a.TgZ(4,"showcase-layout-toolbar-menu",2)(5,"mat-slide-toggle",3),a.NdJ("ngModelChange",function(e){return h.isEditMode=e})("change",function(e){return h.toggleEdit(e)}),a._uU(6," Edit! "),a.qZA()(),a.TgZ(7,"mat-sidenav-container")(8,"mat-sidenav",4,5),a.NdJ("openedChange",function(){return h.onSidenavChange()}),a.TgZ(10,"mat-form-field",6)(11,"input",7),a.NdJ("ngModelChange",function(e){return h.searchTerm=e})("ngModelChange",function(){return h.search()}),a.qZA(),a.YNc(12,u0,3,0,"button",8),a.qZA(),a.TgZ(13,"mat-nav-list"),a.YNc(14,f0,5,2,"ng-container",9),a.qZA()(),a.TgZ(15,"mat-sidenav-content")(16,"section",10),a._UZ(17,"router-outlet"),a.qZA()()()),2&r&&(a.xp6(5),a.Q6J("ngModel",h.isEditMode),a.xp6(3),a.Q6J("opened",h.sidenavIsOpen),a.xp6(3),a.Q6J("ngModel",h.searchTerm),a.xp6(1),a.Q6J("ngIf",h.searchTerm),a.xp6(2),a.Q6J("ngForOf",h.categories))},dependencies:[se.lC,se.rH,se.Od,X.sg,X.O5,Us.Fj,Us.JJ,Us.On,d_.a,oc.lW,oc.RK,Yb,S_,Zw,u_,Kw,fl.KE,fl.R9,Ze.Hw,Gf,dp,cp,Wf],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]}),c})(),Pn=(()=>{class c{constructor(r,h){this.mapResizeService=r,this.map=h,this.sub=new Jo.w0}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Sf),a.Y36(mi))},c.\u0275dir=a.lG2({type:c,selectors:[["mgl-map"]]}),c})(),On=(()=>{class c{constructor(r){this.map=r,null!=window.Cypress&&(console.info("Cypress detected. Setting preserveDrawingBuffer=true"),this.map.preserveDrawingBuffer=!0)}onMapIdle(r){window.mglMapTestHelper.map=r.target,window.mglMapTestHelper.idle=!0}onMapRender(r){window.mglMapTestHelper.map=r.target,window.mglMapTestHelper.idle=!1}onMapLoad(r){window.mglMapTestHelper.map=r.target,window.mglMapTestHelper.loaded=!0}ngOnInit(){window.mglMapTestHelper={mapComponent:this.map}}ngOnDestroy(){window.mglMapTestHelper=void 0}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(mi))},c.\u0275dir=a.lG2({type:c,selectors:[["mgl-map"]],hostBindings:function(r,h){1&r&&a.NdJ("idle",function(e){return h.onMapIdle(e)})("render",function(e){return h.onMapRender(e)})("mapLoad",function(e){return h.onMapLoad(e)})}}),c})();const _0=function(c){return[c,40.7135]},y0=function(){return["==","extrude","true"]},K_=function(){return["linear"]},X_=function(){return["zoom"]},J_=function(){return["get","height"]},Yf=function(c,m,r){return["interpolate",c,m,15,0,15.05,r]},Q_=function(){return["get","min_height"]},ey=function(c,m){return{"fill-extrusion-color":"#aaa","fill-extrusion-height":c,"fill-extrusion-base":m,"fill-extrusion-opacity":.6}};let ty=(()=>{class c{onLoad(r){const h=r.getStyle().layers;for(let T=0;T<h.length;T++)if("symbol"===h[T].type&&h[T].layout["text-field"]){this.labelLayerId=h[T].id;break}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:30,consts:[[3,"zoom","center","pitch","bearing","mapLoad"],["id","3d-buildings","source","openmaptiles","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.NdJ("mapLoad",function(e){return h.onLoad(e)}),a._UZ(1,"mgl-layer",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",15.5)("center",a.VKq(10,_0,-74.0066))("pitch",45)("bearing",-17.6),a.xp6(1),a.Q6J("filter",a.DdM(12,y0))("minzoom",15)("paint",a.WLB(27,ey,a.kEZ(16,Yf,a.DdM(13,K_),a.DdM(14,X_),a.DdM(15,J_)),a.kEZ(23,Yf,a.DdM(20,K_),a.DdM(21,X_),a.DdM(22,Q_))))("before",h.labelLayerId))},dependencies:[mi,cr,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const iy=function(c){return{width:64,height:64,data:c}},ny=function(){return[0,0]},ry=function(c){return{type:"Point",coordinates:c}},oy=function(c){return{type:"Feature",geometry:c}},qf=function(c){return[c]},Kf=function(c){return{type:"FeatureCollection",features:c}},Bd=function(c){return{type:"geojson",data:c}},v0=function(){return{"icon-image":"gradient"}};let b0=(()=>{class c{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const T=new Uint8Array(16384);for(let e=0;e<64;e++)for(let i=0;i<64;i++){const s=4*(64*i+e);T[s+0]=i/64*255,T[s+1]=e/64*255,T[s+2]=128,T[s+3]=255}return T}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:19,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map"),a._UZ(1,"mgl-image",0)(2,"mgl-layer",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.xp6(1),a.Q6J("data",a.VKq(5,iy,h.imageData)),a.xp6(1),a.Q6J("source",a.VKq(16,Bd,a.VKq(14,Kf,a.VKq(12,qf,a.VKq(10,oy,a.VKq(8,ry,a.DdM(7,ny)))))))("layout",a.DdM(18,v0)))},dependencies:[mi,cr,il,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Fu(c,m){if(1&c&&a._UZ(0,"mgl-image",3),2&c){const r=m.$implicit;a.Q6J("id",r.id)("data",r)}}const Xw=function(){return[0,0]},jh=function(c){return{type:"Point",coordinates:c}},Jw=function(){return{color:"255,0,0"}},hp=function(c,m){return{type:"Feature",geometry:c,properties:m}},sy=function(){return[50,0]},Qw=function(){return{color:"255,209,28"}},ln=function(c){return[c,0]},x0=function(){return{color:"242,127,32"}},w0=function(c,m,r){return[c,m,r]},C0=function(c){return{type:"FeatureCollection",features:c}},Lu=function(c){return{type:"geojson",data:c}},E0=function(){return["get","color"]},mp=function(c){return["concat","square-rgb-",c]},pp=function(c){return{"icon-image":c}};let Co=(()=>{class c{constructor(){this.imagesData=[]}generateImage({id:r}){const h="square-rgb-";if(0!==r.indexOf(h))return;const T=r.replace(h,"").split(",").map(Number),s=new Uint8Array(16384);for(let f=0;f<64;f++)for(let x=0;x<64;x++){const S=4*(64*x+f);s[S+0]=T[0],s[S+1]=T[1],s[S+2]=T[2],s[S+3]=255}this.imagesData=[...this.imagesData,{id:r,width:64,height:64,data:s}]}trackByImage(r,h){return h.id}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.NdJ("styleImageMissing",function(e){return h.generateImage(e)}),a.YNc(1,Fu,1,2,"mgl-image",1),a._UZ(2,"mgl-layer",2),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.xp6(1),a.Q6J("ngForOf",h.imagesData)("ngForTrackBy",h.trackByImage),a.xp6(1),a.Q6J("source",a.VKq(34,Lu,a.VKq(32,C0,a.kEZ(28,w0,a.WLB(10,hp,a.VKq(7,jh,a.DdM(6,Xw)),a.DdM(9,Jw)),a.WLB(17,hp,a.VKq(14,jh,a.DdM(13,sy)),a.DdM(16,Qw)),a.WLB(25,hp,a.VKq(22,jh,a.VKq(20,ln,-50)),a.DdM(24,x0))))))("layout",a.VKq(39,pp,a.VKq(37,mp,a.DdM(36,E0)))))},dependencies:[X.sg,mi,cr,il,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const e1=function(){return[0,0]},ay=function(c){return{type:"Point",coordinates:c}},ly=function(c){return{type:"Feature",geometry:c}},M0=function(c){return[c]},cy=function(c){return{type:"FeatureCollection",features:c}},dy=function(c){return{type:"geojson",data:c}},uy=function(){return{"icon-image":"cat","icon-size":.25}};function hy(c,m){1&c&&a._UZ(0,"mgl-layer",2),2&c&&a.Q6J("source",a.VKq(11,dy,a.VKq(9,cy,a.VKq(7,M0,a.VKq(5,ly,a.VKq(3,ay,a.DdM(2,e1)))))))("layout",a.DdM(13,uy))}let D0=(()=>{class c{constructor(){this.imageLoaded=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map")(1,"mgl-image",0),a.NdJ("imageLoaded",function(){return h.imageLoaded=!0}),a.qZA(),a.YNc(2,hy,1,14,"mgl-layer",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.xp6(2),a.Q6J("ngIf",h.imageLoaded))},dependencies:[X.O5,mi,cr,il,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const S0=function(c){return[c,38.907]},T0=function(){return[11.15]};let Hh=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-control",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("center",a.VKq(5,S0,-77.04))("zoom",a.DdM(7,T0))("attributionControl",!1))},dependencies:[mi,Ln,Un,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function I0(c,m){1&c&&a._UZ(0,"mgl-feature",4),2&c&&a.Q6J("geometry",m.$implicit)}const A0=function(){return[8]},k0=function(){return{"icon-image":"oneway"}};let fp=(()=>{class c{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(r){this.center=r.features[0].geometry.coordinates}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle","mapLoad"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"geometry"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.NdJ("mapLoad",function(e){return h.map=e}),a.TgZ(1,"mgl-geojson-source",1),a.YNc(2,I0,1,1,"mgl-feature",2),a.qZA(),a.TgZ(3,"mgl-layer",3),a.NdJ("layerClick",function(e){return h.centerMapTo(e)})("layerMouseEnter",function(){return h.cursorStyle="pointer"})("layerMouseLeave",function(){return h.cursorStyle=""}),a.qZA()()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(7,A0))("center",h.center)("cursorStyle",h.cursorStyle),a.xp6(2),a.Q6J("ngForOf",h.geometries),a.xp6(1),a.Q6J("layout",a.DdM(8,k0)))},dependencies:[X.sg,mi,cr,go,qn,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function my(c,m){1&c&&a._UZ(0,"showcase-cluster-point",6),2&c&&a.Q6J("properties",m.$implicit.properties)}const py=function(){return[.3]},fy=function(){return[0,20]},gy=function(){return["!=","cluster",!0]},$h=function(c){return{fill:c}};function Gh(c,m){if(1&c&&(a.O4$(),a._UZ(0,"path",4)),2&c){const r=m.$implicit;a.Q6J("ngStyle",a.VKq(2,$h,r.fill)),a.uIk("d",r.d)}}const P0=function(c){return{font:c}},Nu=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let O0=(()=>{class c{constructor(){const r=["<",["get","mag"],2],h=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],T=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],e=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",r,1,0]],mag2:["+",["case",h,1,0]],mag3:["+",["case",T,1,0]],mag4:["+",["case",e,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",r,Nu[0],h,Nu[1],T,Nu[2],e,Nu[3],Nu[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://maplibre.org/maplibre-gl-js-docs/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-geojson-source",1),a.TgZ(2,"mgl-markers-for-clusters",2),a.YNc(3,my,1,1,"ng-template",3),a.qZA(),a._UZ(4,"mgl-layer",4)(5,"mgl-layer",5),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(12,py))("center",a.DdM(13,fy)),a.xp6(1),a.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",h.clusterProperties),a.xp6(3),a.Q6J("filter",a.DdM(14,gy))("paint",h.circlePaint),a.xp6(1),a.Q6J("filter",a.DdM(15,gy))("layout",h.labelLayout)("paint",h.labelPaint))},dependencies:function(){return[mi,cr,go,ys,ts,Pn,_y,On]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),_y=(()=>{class c{ngOnInit(){const r=[],h=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let T=0;for(let i=0;i<h.length;i++)r.push(T),T+=h[i];this.font=(T>=1e3?22:T>=100?20:T>=10?18:16)+"px sans-serif",this.r=T>=1e3?50:T>=100?32:T>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let i=0;i<h.length;i++)this.segments.push(this.donutSegment(r[i]/T,(r[i]+h[i])/T,Nu[i]));this.totalString=T.toLocaleString()}donutSegment(r,h,T){h-r==1&&(h-=1e-5);const e=2*Math.PI*(r-.25),i=2*Math.PI*(h-.25),s=Math.cos(e),u=Math.sin(e),f=Math.cos(i),x=Math.sin(i),S=h-r>.5?1:0;return{d:`M ${this.r+this.r0*s} ${this.r+this.r0*u} L ${this.r+this.r*s} ${this.r+this.r*u} A ${this.r} ${this.r} 0 ${S} 1 ${this.r+this.r*f} ${this.r+this.r*x} L ${this.r+this.r0*f} ${this.r+this.r0*x} A ${this.r0} ${this.r0} 0 ${S} 0 ${this.r+this.r0*s} ${this.r+this.r0*u}`,fill:T}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(r,h){1&r&&(a.O4$(),a.TgZ(0,"svg",0),a.YNc(1,Gh,1,4,"path",1),a._UZ(2,"circle",2),a.TgZ(3,"text",3),a._uU(4),a.qZA()()),2&r&&(a.Q6J("ngStyle",a.VKq(10,P0,h.font)),a.uIk("width",h.w)("height",h.w)("viewbox",h.viewbox),a.xp6(1),a.Q6J("ngForOf",h.segments),a.xp6(1),a.uIk("cx",h.r)("cy",h.r)("r",h.r0),a.xp6(1),a.uIk("transform",h.textTransform),a.xp6(1),a.hij(" ",h.totalString," "))},dependencies:[X.sg,X.PC],encapsulation:2}),c})();const Xf=function(){return["has","point_count"]},yy=function(){return[0,"#51bbd6"]},R0=function(){return[100,"#f1f075"]},vy=function(){return[750,"#f28cb1"]},by=function(c,m,r){return[c,m,r]},xy=function(c){return{property:"point_count",type:"interval",stops:c}},t1=function(){return[0,20]},n1=function(){return[100,30]},r1=function(){return[750,40]},o1=function(c,m){return{"circle-color":c,"circle-radius":m}},wy=function(){return["DIN Offc Pro Medium","Arial Unicode MS Bold"]},gp=function(c){return{"text-field":"{point_count_abbreviated}","text-font":c,"text-size":12}},F0=function(){return["!has","point_count"]},L0=function(){return{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}};function Cy(c,m){if(1&c&&(a.ynx(0),a._UZ(1,"mgl-geojson-source",2)(2,"mgl-layer",3)(3,"mgl-layer",4)(4,"mgl-layer",5),a.BQk()),2&c){const r=a.oxw();a.xp6(1),a.Q6J("data",r.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),a.xp6(1),a.Q6J("filter",a.DdM(10,Xf))("paint",a.WLB(29,o1,a.VKq(18,xy,a.kEZ(14,by,a.DdM(11,yy),a.DdM(12,R0),a.DdM(13,vy))),a.VKq(27,xy,a.kEZ(23,by,a.DdM(20,t1),a.DdM(21,n1),a.DdM(22,r1))))),a.xp6(1),a.Q6J("filter",a.DdM(32,Xf))("layout",a.VKq(34,gp,a.DdM(33,wy))),a.xp6(1),a.Q6J("filter",a.DdM(36,F0))("paint",a.DdM(37,L0))}}const Zh=function(){return[3]},N0=function(c){return[c,40.66995747013945]};let z0=(()=>{class c{ngOnInit(){var r=this;return In(function*(){r.earthquakes=yield j.e(45).then(j.t.bind(j,3045,19))})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.YNc(1,Cy,5,38,"ng-container",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(5,Zh))("center",a.VKq(6,N0,-103.59179687498357)),a.xp6(1),a.Q6J("ngIf",h.earthquakes))},dependencies:[X.O5,mi,cr,go,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const B0=function(c){return[c,38.907]},V0=function(){return[11.15]},U0=function(){return['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"]};let Ey=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-control",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("center",a.VKq(6,B0,-77.04))("zoom",a.DdM(8,V0))("attributionControl",!1),a.xp6(1),a.Q6J("customAttribution",a.DdM(9,U0)))},dependencies:[mi,Ln,Un,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const j0=function(){return[36.235656,50.00387]},H0=function(){return[11.15]};let Wh=(()=>{class c{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-control",1)(2,"mgl-control",2)(3,"mgl-control",3)(4,"mgl-control",4),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("center",a.DdM(5,j0))("zoom",a.DdM(6,H0))("locale",h.locale))},dependencies:[mi,Ln,Qt,Mn,ki,Dn,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const $0=function(c,m,r){return{"background-image":c,width:m,height:r}};function My(c,m){if(1&c){const r=a.EpF();a.TgZ(0,"mgl-marker",2)(1,"div",3),a.NdJ("click",function(){const e=a.CHM(r).$implicit,i=a.oxw();return a.KtG(i.alert(e.properties.message))}),a.qZA()()}if(2&c){const r=m.$implicit;a.Q6J("feature",r),a.xp6(1),a.Q6J("ngStyle",a.kEZ(2,$0,"url(https://placekitten.com/g/"+r.properties.iconSize.join("/")+"/)",r.properties.iconSize[0]+"px",r.properties.iconSize[1]+"px"))}}const G0=function(){return[5]},Dy=function(c,m){return[c,m]};let Z0=(()=>{class c{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(r){alert(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"ngStyle","click"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.YNc(1,My,2,6,"mgl-marker",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(5,G0))("center",a.WLB(6,Dy,-65.017,-16.457)),a.xp6(1),a.Q6J("ngForOf",h.geojson.features))},dependencies:[X.sg,X.PC,mi,H,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),c})();const Sy=function(){return[3]},W0=function(c){return[c,39]};let Jf=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(r,h){1&r&&a._UZ(0,"mgl-map",0),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(4,Sy))("center",a.VKq(5,W0,-77.38)))},dependencies:[mi,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Y0=function(){return[9]},Ty=function(c){return[c,40]};let Iy=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(r,h){1&r&&a._UZ(0,"mgl-map",0),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(4,Y0))("center",a.VKq(5,Ty,-74.5)))},dependencies:[mi,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const q0=["*"],Ay=new a.OlP("MAT_CARD_CONFIG");let eg=(()=>{class c{constructor(r){this.appearance=r?.appearance||"raised"}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Ay,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,h){2&r&&a.ekj("mat-mdc-card-outlined","outlined"===h.appearance)("mdc-card--outlined","outlined"===h.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:q0,decls:1,vars:0,template:function(r,h){1&r&&(a.F$t(),a.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),c})(),cx=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Tn.BQ,X.ez,Tn.BQ]}),c})();function tg(c,m){if(1&c&&(a.TgZ(0,"mgl-control",3)(1,"mat-card",4)(2,"div"),a._uU(3),a.qZA(),a.TgZ(4,"div"),a._uU(5),a.qZA()()()),2&c){const r=a.oxw();a.xp6(3),a.hij("Longitude:\xa0",r.coordinates[0],""),a.xp6(2),a.hij("Latitude:\xa0",r.coordinates[1],"")}}const ig=function(){return[2]},ng=function(){return[0,0]};let rg=(()=>{class c{constructor(){this.color="#3887be"}onDragEnd(r){this.coordinates=r.getLngLat().toArray()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"lngLat","draggable","markerDragEnd"],["position","bottom-left",4,"ngIf"],["position","bottom-left"],["appearance","outlined"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0)(1,"mgl-marker",1),a.NdJ("markerDragEnd",function(e){return h.onDragEnd(e)}),a.qZA(),a.YNc(2,tg,6,2,"mgl-control",2),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(7,ig))("center",a.DdM(8,ng)),a.xp6(1),a.Q6J("lngLat",a.DdM(9,ng))("draggable",!0),a.xp6(1),a.Q6J("ngIf",h.coordinates))},dependencies:[X.O5,mi,H,Ln,eg,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const dx=function(){return[13]},ux=function(){return[11.255,43.77]};let og=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-control",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(4,dx))("center",a.DdM(5,ux)))},dependencies:[mi,Ln,Qt,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const hx=function(){return[15]},Ry=function(c){return[c,37.830348]},zu=function(){return{}},Fy=function(c){return[c,37.83381888486939]},mx=function(c){return[c,37.83317489144141]},l1=function(c){return[c,37.83270036637107]},Ly=function(c){return[c,37.832056363179625]},sg=function(c){return[c,37.83114119107971]},px=function(c){return[c,37.83049717427869]},ag=function(c){return[c,37.829920943955045]},fx=function(c){return[c,37.82954808664175]},Ny=function(c){return[c,37.82944639795659]},lg=function(c){return[c,37.82880236636284]},zy=function(c){return[c,37.82931081282506]},By=function(c){return[c,37.83080223556934]},Vy=function(c){return[c,37.83168351665737]},Uy=function(c){return[c,37.832158048267786]},gx=function(c){return[c,37.83297152392784]},_x=function(c){return[c,37.83263257682617]},yx=function(c){return[c,37.832937629287755]},vx=function(c){return[c,37.832429207817725]},jy=function(c){return[c,37.832564787218985]},c1=function(c){return[c,37.83337825839438]},Hy=function(c){return[c,37.83368330777276]},bx=function(c,m,r,h,T,e,i,s,u,f,x,S,O,z,J,de,Te,qe,_t,Ht,si){return[c,m,r,h,T,e,i,s,u,f,x,S,O,z,J,de,Te,qe,_t,Ht,si]},xx=function(c){return{type:"LineString",coordinates:c}},d1=function(c,m){return{type:"Feature",properties:c,geometry:m}},wx=function(c){return{type:"geojson",data:c}},Cx=function(){return{"line-join":"round","line-cap":"round"}},$y=function(){return{"line-color":"#888","line-width":8}};let Gy=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-layer",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(7,hx))("center",a.VKq(8,Ry,-122.486052)),a.xp6(1),a.Q6J("source",a.VKq(80,wx,a.WLB(77,d1,a.DdM(10,zu),a.VKq(75,xx,a.rFY(53,bx,[a.VKq(11,Fy,-122.48369693756104),a.VKq(13,mx,-122.48348236083984),a.VKq(15,l1,-122.48339653015138),a.VKq(17,Ly,-122.48356819152832),a.VKq(19,sg,-122.48404026031496),a.VKq(21,px,-122.48404026031496),a.VKq(23,ag,-122.48348236083984),a.VKq(25,fx,-122.48356819152832),a.VKq(27,Ny,-122.48507022857666),a.VKq(29,lg,-122.48610019683838),a.VKq(31,zy,-122.48695850372314),a.VKq(33,By,-122.48700141906738),a.VKq(35,Vy,-122.48751640319824),a.VKq(37,Uy,-122.48803138732912),a.VKq(39,gx,-122.48888969421387),a.VKq(41,_x,-122.48987674713133),a.VKq(43,yx,-122.49043464660643),a.VKq(45,vx,-122.49125003814696),a.VKq(47,jy,-122.49163627624512),a.VKq(49,c1,-122.49223709106445),a.VKq(51,Hy,-122.49378204345702)])))))("layout",a.DdM(82,Cx))("paint",a.DdM(83,$y)))},dependencies:[mi,cr,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Zy(c,m){if(1&c&&a._UZ(0,"mgl-layer",5),2&c){const r=m.$implicit;a.Q6J("id",r.id)("type",r.type)("filter",r.filter)("paint",r.paint)}}const Wy=function(){return["!=","cluster",!0]},Ex=function(){return{"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1}};function Mx(c,m){if(1&c&&(a.ynx(0),a._UZ(1,"mgl-geojson-source",2),a.YNc(2,Zy,1,4,"mgl-layer",3),a._UZ(3,"mgl-layer",4),a.BQk()),2&c){const r=a.oxw();a.xp6(1),a.Q6J("data",r.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),a.xp6(1),a.Q6J("ngForOf",r.clusterLayers),a.xp6(1),a.Q6J("filter",a.DdM(7,Wy))("paint",a.DdM(8,Ex))}}const Dx=function(){return[3]},Sx=function(c){return[c,40.66995747013945]};let Tx=(()=>{class c{ngOnInit(){var r=this;return In(function*(){r.earthquakes=yield j.e(45).then(j.t.bind(j,3045,19));const h=[[0,"green"],[20,"orange"],[200,"red"]];r.clusterLayers=h.map((T,e)=>({type:"circle",id:`cluster-${e}`,paint:{"circle-color":T[1],"circle-radius":70,"circle-blur":1},filter:e===h.length-1?[">=","point_count",T[0]]:["all",[">=","point_count",T[0]],["<","point_count",h[e+1][0]]]}))})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"],["source","earthquakes",3,"id","type","filter","paint"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.YNc(1,Mx,4,9,"ng-container",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(5,Dx))("center",a.VKq(6,Sx,-103.59179687498357)),a.xp6(1),a.Q6J("ngIf",h.earthquakes))},dependencies:[X.sg,X.O5,mi,cr,go,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Yy=function(){return[2]},Yh=function(c){return[c,37.830348]},qy=function(){return{"fill-color":"#627BC1","fill-opacity":.5}},Ky=function(){return{"line-color":"#627BC1","line-width":2}},Xy=function(){return{"fill-color":"#627BC1","fill-opacity":1}};let Jy=(()=>{class c{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(r){this.hoverFilter=["==","name",r.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"paint","layerMouseMove","layerMouseLeave"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-geojson-source",1),a.TgZ(2,"mgl-layer",2),a.NdJ("layerMouseMove",function(e){return h.activateHoverOn(e)})("layerMouseLeave",function(){return h.disableHover()}),a.qZA(),a._UZ(3,"mgl-layer",3)(4,"mgl-layer",4),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(8,Yy))("center",a.VKq(9,Yh,-100.486052)),a.xp6(2),a.Q6J("paint",a.DdM(11,qy)),a.xp6(1),a.Q6J("paint",a.DdM(12,Ky)),a.xp6(1),a.Q6J("paint",a.DdM(13,Xy))("filter",h.hoverFilter))},dependencies:[mi,cr,go,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Qy=function(){return[9]},ev=function(c){return[c,40]};let Ix=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(r,h){1&r&&a._UZ(0,"mgl-map",0),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(5,Qy))("center",a.VKq(6,ev,-74.5))("interactive",!1))},dependencies:[mi,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const u1=function(){return[2.9]},tv=function(){return[16.05,48]};let Ax=(()=>{class c{changeLangTo(r){this.map&&(this.map.setLayoutProperty("country_1","text-field","{name:"+r+"}"),this.map.setLayoutProperty("country_2","text-field","{name:"+r+"}"),this.map.setLayoutProperty("country_3","text-field","{name:"+r+"}"))}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:10,vars:6,consts:[[3,"zoom","center","mapLoad"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.NdJ("mapLoad",function(e){return h.map=e}),a.TgZ(1,"mgl-control")(2,"button",1),a.NdJ("click",function(){return h.changeLangTo("fr")}),a._uU(3," French "),a.qZA(),a.TgZ(4,"button",1),a.NdJ("click",function(){return h.changeLangTo("ru")}),a._uU(5," Russian "),a.qZA(),a.TgZ(6,"button",1),a.NdJ("click",function(){return h.changeLangTo("de")}),a._uU(7," German "),a.qZA(),a.TgZ(8,"button",1),a.NdJ("click",function(){return h.changeLangTo("es")}),a._uU(9," Spanish "),a.qZA()()()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(4,u1))("center",a.DdM(5,tv)))},dependencies:[mi,Ln,oc.lW,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function kx(c,m){if(1&c&&a._UZ(0,"mgl-geojson-source",3),2&c){const r=a.oxw();a.Q6J("data",r.data)}}const Px=function(){return{"line-color":"yellow","line-opacity":.75,"line-width":5}};function Ox(c,m){1&c&&a._UZ(0,"mgl-layer",4),2&c&&a.Q6J("paint",a.DdM(1,Px))}let qh=(()=>{class c{constructor(){this.zoom=[0]}ngOnInit(){var r=this;return In(function*(){const h=yield j.e(330).then(j.t.bind(j,3330,19)),T=h.features[0].geometry.coordinates;h.features[0].geometry.coordinates=[T[0]],r.data=h,r.center=T[0],r.zoom=[14],r.pitch=30;let e=0;r.timer=window.setInterval(()=>{e<T.length?(r.center=T[e],h.features[0].geometry.coordinates.push(T[e]),r.data={...r.data},e++):window.clearInterval(r.timer)},10)})()}ngOnDestroy(){window.clearInterval(this.timer)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:8,consts:[["movingMethod","jumpTo",3,"zoom","center","centerWithPanTo","pitch"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.YNc(1,kx,1,1,"mgl-geojson-source",1),a.YNc(2,Ox,1,2,"mgl-layer",2),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",h.zoom)("center",h.center)("centerWithPanTo",!0)("pitch",h.pitch),a.xp6(1),a.Q6J("ngIf",h.data),a.xp6(1),a.Q6J("ngIf",h.data))},dependencies:[X.O5,mi,cr,go,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();var Rx=j(4986),cg=j(5963);const Fx=function(){return[14]},_p=function(){return{"raster-fade-duration":0}};let Kh=(()=>{class c{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){var r=this;return In(function*(){const T=(yield j.e(330).then(j.t.bind(j,3330,19))).features[0].geometry.coordinates,e=T.map(s=>r.makeRectangle(s));r.center=T[0],r.coordinates=e[0];let i=0;r.sub=function sc(c=0,m=Rx.z){return c<0&&(c=0),(0,cg.H)(c,c,m)}(250).subscribe(()=>{r.url=Math.random()<.5?"assets/red.png":"assets/blue.png",r.coordinates=e[i],i=(i+1)%e.length})})()}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([r,h]){return[[r,h],[r+this.size,h],[r+this.size,h-this.size],[r,h-this.size]]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-image-source",1)(2,"mgl-layer",2),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("center",h.center)("zoom",a.DdM(7,Fx)),a.xp6(1),a.Q6J("url",h.url)("coordinates",h.coordinates),a.xp6(1),a.Q6J("paint",a.DdM(8,_p)))},dependencies:[mi,cr,nl,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Lx=function(){return{enableHighAccuracy:!0}};let Nx=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:5,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map"),a._UZ(1,"mgl-control",0),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.xp6(1),a.Q6J("positionOptions",a.DdM(4,Lx))("trackUserLocation",!0))},dependencies:[mi,Ln,ki,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const iv=function(c){return[c]},yp=function(){return[17]},vp=function(){return[4.577979,51.038189]},zx=function(){return[4.577979,51.03816]};let Bx=(()=>{class c{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let r=0;setInterval(()=>{r+=.01,1===r&&(r=0),this.pitch=45+15*Math.cos(r),this.bearing=20*Math.sin(r)-103},20)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),a.O4$(),a.TgZ(3,"svg",3),a._UZ(4,"polygon",4)(5,"polygon",5)(6,"polygon",6),a.qZA()()()()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("interactive",!1)("pitch",a.VKq(8,iv,h.pitch))("bearing",a.VKq(10,iv,h.bearing))("zoom",a.DdM(12,yp))("center",a.DdM(13,vp)),a.xp6(1),a.Q6J("lngLat",a.DdM(14,zx)))},dependencies:[mi,H,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]}),c})();const nv=function(){return[9]},rv=function(c){return[c,40]};let dg=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-control",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(4,nv))("center",a.VKq(5,rv,-74.5)))},dependencies:[mi,Ln,Mn,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();var ug=j(4385),Xh=j(8184),hg=j(4080);const ov=["tooltip"],av=new a.OlP("mat-tooltip-scroll-strategy"),Ux={provide:av,deps:[Xh.aV],useFactory:function Vx(c){return()=>c.scrollStrategies.reposition({scrollThrottle:20})}},lv=new a.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function jx(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),pg="tooltip-panel",fg=(0,ml.i$)({passive:!0});let $x=(()=>{class c{get position(){return this._position}set position(r){r!==this._position&&(this._position=r,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(r){this._positionAtOrigin=(0,mn.Ig)(r),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,mn.Ig)(r),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(r){this._showDelay=(0,mn.su)(r)}get hideDelay(){return this._hideDelay}set hideDelay(r){this._hideDelay=(0,mn.su)(r),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(r){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=r?String(r).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(r){this._tooltipClass=r,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(r,h,T,e,i,s,u,f,x,S,O,z){this._overlay=r,this._elementRef=h,this._scrollDispatcher=T,this._viewContainerRef=e,this._ngZone=i,this._platform=s,this._ariaDescriber=u,this._focusMonitor=f,this._dir=S,this._defaultOptions=O,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new xr.x,this._scrollStrategy=x,this._document=z,O&&(O.position&&(this.position=O.position),O.positionAtOrigin&&(this.positionAtOrigin=O.positionAtOrigin),O.touchGestures&&(this.touchGestures=O.touchGestures)),S.change.pipe((0,Dr.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,Dr.R)(this._destroyed)).subscribe(r=>{r?"keyboard"===r&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const r=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([h,T])=>{r.removeEventListener(h,T,fg)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(r,this.message,"tooltip"),this._focusMonitor.stopMonitoring(r)}show(r=this.showDelay,h){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const T=this._createOverlay(h);this._detach(),this._portal=this._portal||new hg.C5(this._tooltipComponent,this._viewContainerRef);const e=this._tooltipInstance=T.attach(this._portal).instance;e._triggerElement=this._elementRef.nativeElement,e._mouseLeaveHideDelay=this._hideDelay,e.afterHidden().pipe((0,Dr.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),e.show(r)}hide(r=this.hideDelay){const h=this._tooltipInstance;h&&(h.isVisible()?h.hide(r):(h._cancelPendingAnimations(),this._detach()))}toggle(r){this._isTooltipVisible()?this.hide():this.show(void 0,r)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(r){if(this._overlayRef){const e=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!r)&&e._origin instanceof a.SBq)return this._overlayRef;this._detach()}const h=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),T=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&r||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(h);return T.positionChanges.pipe((0,Dr.R)(this._destroyed)).subscribe(e=>{this._updateCurrentPositionClass(e.connectionPair),this._tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:T,panelClass:`${this._cssClassPrefix}-${pg}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,Dr.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,Dr.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,Dr.R)(this._destroyed)).subscribe(e=>{this._isTooltipVisible()&&e.keyCode===Tl.hY&&!(0,Tl.Vb)(e)&&(e.preventDefault(),e.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(r){const h=r.getConfig().positionStrategy,T=this._getOrigin(),e=this._getOverlayPosition();h.withPositions([this._addOffset({...T.main,...e.main}),this._addOffset({...T.fallback,...e.fallback})])}_addOffset(r){return r}_getOrigin(){const r=!this._dir||"ltr"==this._dir.value,h=this.position;let T;"above"==h||"below"==h?T={originX:"center",originY:"above"==h?"top":"bottom"}:"before"==h||"left"==h&&r||"right"==h&&!r?T={originX:"start",originY:"center"}:("after"==h||"right"==h&&r||"left"==h&&!r)&&(T={originX:"end",originY:"center"});const{x:e,y:i}=this._invertPosition(T.originX,T.originY);return{main:T,fallback:{originX:e,originY:i}}}_getOverlayPosition(){const r=!this._dir||"ltr"==this._dir.value,h=this.position;let T;"above"==h?T={overlayX:"center",overlayY:"bottom"}:"below"==h?T={overlayX:"center",overlayY:"top"}:"before"==h||"left"==h&&r||"right"==h&&!r?T={overlayX:"end",overlayY:"center"}:("after"==h||"right"==h&&r||"left"==h&&!r)&&(T={overlayX:"start",overlayY:"center"});const{x:e,y:i}=this._invertPosition(T.overlayX,T.overlayY);return{main:T,fallback:{overlayX:e,overlayY:i}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,Va.q)(1),(0,Dr.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(r){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=r,this._tooltipInstance._markForCheck())}_invertPosition(r,h){return"above"===this.position||"below"===this.position?"top"===h?h="bottom":"bottom"===h&&(h="top"):"end"===r?r="start":"start"===r&&(r="end"),{x:r,y:h}}_updateCurrentPositionClass(r){const{overlayY:h,originX:T,originY:e}=r;let i;if(i="center"===h?this._dir&&"rtl"===this._dir.value?"end"===T?"left":"right":"start"===T?"left":"right":"bottom"===h&&"top"===e?"above":"below",i!==this._currentPosition){const s=this._overlayRef;if(s){const u=`${this._cssClassPrefix}-${pg}-`;s.removePanelClass(u+this._currentPosition),s.addPanelClass(u+i)}this._currentPosition=i}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",r=>{let h;this._setupPointerExitEventsIfNeeded(),void 0!==r.x&&void 0!==r.y&&(h=r),this.show(void 0,h)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",r=>{const h=r.targetTouches?.[0],T=h?{x:h.clientX,y:h.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,T),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const r=[];if(this._platformSupportsMouseEvents())r.push(["mouseleave",h=>{const T=h.relatedTarget;(!T||!this._overlayRef?.overlayElement.contains(T))&&this.hide()}],["wheel",h=>this._wheelListener(h)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const h=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};r.push(["touchend",h],["touchcancel",h])}this._addListeners(r),this._passiveListeners.push(...r)}_addListeners(r){r.forEach(([h,T])=>{this._elementRef.nativeElement.addEventListener(h,T,fg)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(r){if(this._isTooltipVisible()){const h=this._document.elementFromPoint(r.clientX,r.clientY),T=this._elementRef.nativeElement;h!==T&&!T.contains(h)&&this.hide()}}_disableNativeGesturesIfNecessary(){const r=this.touchGestures;if("off"!==r){const h=this._elementRef.nativeElement,T=h.style;("on"===r||"INPUT"!==h.nodeName&&"TEXTAREA"!==h.nodeName)&&(T.userSelect=T.msUserSelect=T.webkitUserSelect=T.MozUserSelect="none"),("on"===r||!h.draggable)&&(T.webkitUserDrag="none"),T.touchAction="none",T.webkitTapHighlightColor="transparent"}}}return c.\u0275fac=function(r){a.$Z()},c.\u0275dir=a.lG2({type:c,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),c})(),pv=(()=>{class c extends $x{constructor(r,h,T,e,i,s,u,f,x,S,O,z){super(r,h,T,e,i,s,u,f,x,S,O,z),this._tooltipComponent=ba,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(r){const T=!this._dir||"ltr"==this._dir.value;return"top"===r.originY?r.offsetY=-8:"bottom"===r.originY?r.offsetY=8:"start"===r.originX?r.offsetX=T?-8:8:"end"===r.originX&&(r.offsetX=T?8:-8),r}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Xh.aV),a.Y36(a.SBq),a.Y36(ka.mF),a.Y36(a.s_b),a.Y36(a.R0b),a.Y36(ml.t4),a.Y36(pl.$s),a.Y36(pl.tE),a.Y36(av),a.Y36(gl.Is,8),a.Y36(lv,8),a.Y36(X.K0))},c.\u0275dir=a.lG2({type:c,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[a.qOj]}),c})(),fv=(()=>{class c{constructor(r,h){this._changeDetectorRef=r,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new xr.x,this._animationsDisabled="NoopAnimations"===h}show(r){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},r)}hide(r){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},r)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:r}){(!r||!this._triggerElement.contains(r))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:r}){(r===this._showAnimation||r===this._hideAnimation)&&this._finalizeAnimation(r===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(r){r?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(r){const h=this._tooltip.nativeElement,T=this._showAnimation,e=this._hideAnimation;if(h.classList.remove(r?e:T),h.classList.add(r?T:e),this._isVisible=r,r&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const i=getComputedStyle(h);("0s"===i.getPropertyValue("animation-duration")||"none"===i.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}r&&this._onShow(),this._animationsDisabled&&(h.classList.add("_mat-animation-noopable"),this._finalizeAnimation(r))}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.sBO),a.Y36(a.QbO,8))},c.\u0275dir=a.lG2({type:c}),c})(),ba=(()=>{class c extends fv{constructor(r,h,T){super(r,T),this._elementRef=h,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const r=this._elementRef.nativeElement.getBoundingClientRect();return r.height>24&&r.width>=200}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.QbO,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-tooltip-component"]],viewQuery:function(r,h){if(1&r&&a.Gf(ov,7),2&r){let T;a.iGM(T=a.CRH())&&(h._tooltip=T.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(r,h){1&r&&a.NdJ("mouseleave",function(e){return h._handleMouseLeave(e)}),2&r&&a.Udp("zoom",h.isVisible()?1:null)},features:[a.qOj],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(r,h){1&r&&(a.TgZ(0,"div",0,1),a.NdJ("animationend",function(e){return h._handleAnimationEnd(e)}),a.TgZ(2,"div",2),a._uU(3),a.qZA()()),2&r&&(a.ekj("mdc-tooltip--multiline",h._isMultiline),a.Q6J("ngClass",h.tooltipClass),a.xp6(3),a.Oqu(h.message))},dependencies:[X.mk],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),c})(),Gx=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({providers:[Ux],imports:[pl.rt,X.ez,Xh.U8,Tn.BQ,Tn.BQ,ka.ZD]}),c})();function Zx(c,m){if(1&c&&(a.TgZ(0,"mat-option",19),a._uU(1),a.qZA()),2&c){const r=m.$implicit;a.Q6J("value",r),a.xp6(1),a.hij(" ",r," ")}}function h1(c,m){if(1&c){const r=a.EpF();a.TgZ(0,"mat-form-field",16)(1,"mat-select",17),a.NdJ("selectionChange",function(T){a.CHM(r);const e=a.oxw(2);return a.KtG(e._changePageSize(T.value))}),a.YNc(2,Zx,2,2,"mat-option",18),a.qZA()()}if(2&c){const r=a.oxw(2);a.Q6J("appearance",r._formFieldAppearance)("color",r.color),a.xp6(1),a.Q6J("value",r.pageSize)("disabled",r.disabled)("aria-labelledby",r._pageSizeLabelId)("panelClass",r.selectConfig.panelClass||"")("disableOptionCentering",r.selectConfig.disableOptionCentering),a.xp6(1),a.Q6J("ngForOf",r._displayedPageSizeOptions)}}function m1(c,m){if(1&c&&(a.TgZ(0,"div",20),a._uU(1),a.qZA()),2&c){const r=a.oxw(2);a.xp6(1),a.Oqu(r.pageSize)}}function gv(c,m){if(1&c&&(a.TgZ(0,"div",12)(1,"div",13),a._uU(2),a.qZA(),a.YNc(3,h1,3,8,"mat-form-field",14),a.YNc(4,m1,2,1,"div",15),a.qZA()),2&c){const r=a.oxw();a.xp6(1),a.s9C("id",r._pageSizeLabelId),a.xp6(1),a.hij(" ",r._intl.itemsPerPageLabel," "),a.xp6(1),a.Q6J("ngIf",r._displayedPageSizeOptions.length>1),a.xp6(1),a.Q6J("ngIf",r._displayedPageSizeOptions.length<=1)}}function gg(c,m){if(1&c){const r=a.EpF();a.TgZ(0,"button",21),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.firstPage())}),a.O4$(),a.TgZ(1,"svg",7),a._UZ(2,"path",22),a.qZA()()}if(2&c){const r=a.oxw();a.Q6J("matTooltip",r._intl.firstPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("matTooltipPosition","above")("disabled",r._previousButtonsDisabled()),a.uIk("aria-label",r._intl.firstPageLabel)}}function Qh(c,m){if(1&c){const r=a.EpF();a.O4$(),a.kcU(),a.TgZ(0,"button",23),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.lastPage())}),a.O4$(),a.TgZ(1,"svg",7),a._UZ(2,"path",24),a.qZA()()}if(2&c){const r=a.oxw();a.Q6J("matTooltip",r._intl.lastPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("matTooltipPosition","above")("disabled",r._nextButtonsDisabled()),a.uIk("aria-label",r._intl.lastPageLabel)}}let bp=(()=>{class c{constructor(){this.changes=new xr.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(r,h,T)=>{if(0==T||0==h)return`0 of ${T}`;const e=r*h;return`${e+1} \u2013 ${e<(T=Math.max(T,0))?Math.min(e+h,T):e+h} of ${T}`}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const Wx={provide:bp,deps:[[new a.FiY,new a.tp0,bp]],useFactory:function _g(c){return c||new bp}},Yx=new a.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),qx=(0,Tn.Id)((0,Tn.dB)(class{}));let yg=(()=>{class c extends qx{get pageIndex(){return this._pageIndex}set pageIndex(r){this._pageIndex=Math.max((0,mn.su)(r),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(r){this._length=(0,mn.su)(r),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(r){this._pageSize=Math.max((0,mn.su)(r),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(r){this._pageSizeOptions=(r||[]).map(h=>(0,mn.su)(h)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(r){this._hidePageSize=(0,mn.Ig)(r)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(r){this._showFirstLastButtons=(0,mn.Ig)(r)}constructor(r,h,T){if(super(),this._intl=r,this._changeDetectorRef=h,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new a.vpe,this._intlChanges=r.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),T){const{pageSize:e,pageSizeOptions:i,hidePageSize:s,showFirstLastButtons:u}=T;null!=e&&(this._pageSize=e),null!=i&&(this._pageSizeOptions=i),null!=s&&(this._hidePageSize=s),null!=u&&(this._showFirstLastButtons=u)}}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const r=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(r)}previousPage(){if(!this.hasPreviousPage())return;const r=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(r)}firstPage(){if(!this.hasPreviousPage())return;const r=this.pageIndex;this.pageIndex=0,this._emitPageEvent(r)}lastPage(){if(!this.hasNextPage())return;const r=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(r)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const r=this.getNumberOfPages()-1;return this.pageIndex<r&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(r){const T=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/r)||0,this.pageSize=r,this._emitPageEvent(T)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((r,h)=>r-h),this._changeDetectorRef.markForCheck())}_emitPageEvent(r){this.page.emit({previousPageIndex:r,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return c.\u0275fac=function(r){a.$Z()},c.\u0275dir=a.lG2({type:c,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[a.qOj]}),c})(),yv=0,vg=(()=>{class c extends yg{constructor(r,h,T){super(r,h,T),this._pageSizeLabelId="mat-paginator-page-size-label-"+yv++,this._formFieldAppearance=T?.formFieldAppearance||"outline"}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(bp),a.Y36(a.sBO),a.Y36(Yx,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[a.qOj],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],["hideSingleSelectionIndicator","",3,"value","disabled","aria-labelledby","panelClass","disableOptionCentering","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(r,h){1&r&&(a.TgZ(0,"div",0)(1,"div",1),a.YNc(2,gv,5,4,"div",2),a.TgZ(3,"div",3)(4,"div",4),a._uU(5),a.qZA(),a.YNc(6,gg,3,5,"button",5),a.TgZ(7,"button",6),a.NdJ("click",function(){return h.previousPage()}),a.O4$(),a.TgZ(8,"svg",7),a._UZ(9,"path",8),a.qZA()(),a.kcU(),a.TgZ(10,"button",9),a.NdJ("click",function(){return h.nextPage()}),a.O4$(),a.TgZ(11,"svg",7),a._UZ(12,"path",10),a.qZA()(),a.YNc(13,Qh,3,5,"button",11),a.qZA()()()),2&r&&(a.xp6(2),a.Q6J("ngIf",!h.hidePageSize),a.xp6(3),a.hij(" ",h._intl.getRangeLabel(h.pageIndex,h.pageSize,h.length)," "),a.xp6(1),a.Q6J("ngIf",h.showFirstLastButtons),a.xp6(1),a.Q6J("matTooltip",h._intl.previousPageLabel)("matTooltipDisabled",h._previousButtonsDisabled())("matTooltipPosition","above")("disabled",h._previousButtonsDisabled()),a.uIk("aria-label",h._intl.previousPageLabel),a.xp6(3),a.Q6J("matTooltip",h._intl.nextPageLabel)("matTooltipDisabled",h._nextButtonsDisabled())("matTooltipPosition","above")("disabled",h._nextButtonsDisabled()),a.uIk("aria-label",h._intl.nextPageLabel),a.xp6(3),a.Q6J("ngIf",h.showFirstLastButtons))},dependencies:[X.sg,X.O5,oc.RK,fl.KE,ug.gD,Tn.ey,pv],styles:[".mat-mdc-paginator{display:block}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),c})(),xp=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({providers:[Wx],imports:[X.ez,oc.ot,ug.LD,Gx]}),c})();function bg(c,m){if(1&c&&(a.TgZ(0,"div",8),a._uU(1),a.qZA()),2&c){const r=m.$implicit;a.Q6J("title",r.properties["Secondary ID"]),a.xp6(1),a.hij(" ",r.properties["Primary ID"]," ")}}function f1(c,m){if(1&c){const r=a.EpF();a.TgZ(0,"div",9),a.NdJ("click",function(T){const i=a.CHM(r).$implicit,s=a.oxw(2);return a.KtG(s.selectCluster(T,i))}),a._uU(1),a.qZA()}if(2&c){const r=m.$implicit;a.xp6(1),a.hij(" ",null==r.properties?null:r.properties.point_count," ")}}function vv(c,m){if(1&c&&(a.TgZ(0,"mgl-popup",10),a._UZ(1,"showcase-cluster-popup",11),a.qZA()),2&c){a.oxw();const r=a.MAs(2),h=a.oxw();a.Q6J("feature",h.selectedCluster),a.xp6(1),a.Q6J("clusterComponent",r)("selectedCluster",h.selectedCluster)}}function Kx(c,m){if(1&c&&(a.ynx(0),a._UZ(1,"mgl-geojson-source",2,3),a.TgZ(3,"mgl-markers-for-clusters",4),a.YNc(4,bg,2,2,"ng-template",5),a.YNc(5,f1,2,1,"ng-template",6),a.qZA(),a.YNc(6,vv,2,3,"mgl-popup",7),a.BQk()),2&c){const r=a.oxw();a.xp6(1),a.Q6J("data",r.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),a.xp6(5),a.Q6J("ngIf",r.selectedCluster)}}const bv=function(){return[3]},Bu=function(c){return[c,40.66995747013945]};function Xx(c,m){if(1&c&&(a.TgZ(0,"mat-list-item"),a._uU(1),a.qZA()),2&c){const r=m.$implicit;a.xp6(1),a.hij(" ",r.properties["Primary ID"]," ")}}let xv=(()=>{class c{ngOnInit(){var r=this;return In(function*(){const h=yield j.e(45).then(j.t.bind(j,3045,19));setInterval(()=>{h.features.length&&h.features.pop(),r.earthquakes={...h}},500)})()}selectCluster(r,h){r.stopPropagation(),this.selectedCluster={geometry:h.geometry,properties:h.properties}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["clusterComponent",""],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.YNc(1,Kx,7,5,"ng-container",1),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(5,bv))("center",a.VKq(6,Bu,-103.59179687498357)),a.xp6(1),a.Q6J("ngIf",h.earthquakes))},dependencies:function(){return[X.O5,mi,go,Ft,to,ys,ts,Pn,xg,On]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]}),c})(),xg=(()=>{class c{ngOnChanges(r){this.changePage(),r.selectedCluster&&!r.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(r){var h=this;return In(function*(){let T=0;r&&(T=5*r.pageIndex),h.leaves=yield h.clusterComponent.getClusterLeaves(h.selectedCluster.properties.cluster_id,5,T)})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-cluster-popup"]],viewQuery:function(r,h){if(1&r&&a.Gf(vg,7),2&r){let T;a.iGM(T=a.CRH())&&(h.paginator=T.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[a.TTD],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"length","pageSize","page"]],template:function(r,h){1&r&&(a.TgZ(0,"mat-list"),a.YNc(1,Xx,2,1,"mat-list-item",0),a.qZA(),a.TgZ(2,"mat-paginator",1),a.NdJ("page",function(e){return h.changePage(e)}),a.qZA()),2&r&&(a.xp6(1),a.Q6J("ngForOf",h.leaves),a.xp6(1),a.Q6J("length",null==h.selectedCluster.properties?null:h.selectedCluster.properties.point_count)("pageSize",5))},dependencies:[X.sg,Uf,S_,vg],encapsulation:2}),c})();function g1(c,m){if(1&c){const r=a.EpF();a.ynx(0),a.TgZ(1,"mgl-control")(2,"button",3),a.NdJ("click",function(){a.CHM(r);const T=a.oxw();return a.KtG(T.alert("Hello"))}),a._uU(3," Hello "),a.qZA()(),a._UZ(4,"mgl-control",4)(5,"mgl-control",5),a.TgZ(6,"mgl-control",6),a.NdJ("geolocate",function(T){a.CHM(r);const e=a.oxw();return a.KtG(e.onGeolocate(T))}),a.qZA(),a._UZ(7,"mgl-control",7)(8,"mgl-control",8),a.BQk()}}let Jx=(()=>{class c{constructor(){this.visible=!0}alert(r){alert(r)}onGeolocate(r){console.log("geolocate",r)}toggleControls(){this.visible=!this.visible}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:4,consts:[[4,"ngIf"],["position","bottom-right"],["mat-flat-button","","color","accent",3,"click"],["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map"),a.YNc(1,g1,9,0,"ng-container",0),a.TgZ(2,"mgl-control",1)(3,"button",2),a.NdJ("click",function(){return h.toggleControls()}),a._uU(4),a.qZA()()()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.xp6(1),a.Q6J("ngIf",h.visible),a.xp6(3),a.hij(" ",h.visible?"Hide Controls":"Show Controls"," "))},dependencies:[X.O5,mi,Ln,Qt,Mn,ki,Un,Dn,oc.lW,oc.cs,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const _1=function(){return[5]},wp=function(c,m){return[c,m]};let Qx=(()=>{class c{alert(r){alert(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),a.NdJ("click",function(){return h.alert("Foo")}),a.qZA()(),a.TgZ(3,"mgl-marker",1)(4,"div",3),a.NdJ("click",function(){return h.alert("Bar")}),a.qZA()(),a.TgZ(5,"mgl-marker",1)(6,"div",4),a.NdJ("click",function(){return h.alert("Baz")}),a.qZA()()()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(7,_1))("center",a.WLB(8,wp,-65.017,-16.457)),a.xp6(1),a.Q6J("lngLat",a.WLB(11,wp,-66.324462890625,-16.024695711685304)),a.xp6(2),a.Q6J("lngLat",a.WLB(14,wp,-61.2158203125,-15.97189158092897)),a.xp6(2),a.Q6J("lngLat",a.WLB(17,wp,-63.29223632812499,-18.28151823530889)))},dependencies:[mi,H,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),c})();const ew=function(){return[2]},wg=function(){return[0,0]},wv=function(c){return{type:"Point",coordinates:c}};let tw=(()=>{class c{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(r){console.log("onDragStart",r)}onDragEnd(r){console.log("onDragEnd",r)}onDrag(r){console.log("onDrag",r),this.coordinates=r.lngLat.toArray()}changeColor(r){this.layerPaint={...this.layerPaint,"circle-color":r}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[[3,"zoom","center"],["id","point"],[3,"properties","geometry","mglDraggable","featureDragStart","featureDragEnd","featureDrag"],["id","point","type","circle","source","point",3,"paint","layerMouseEnter","layerMouseLeave"],["targetLayer",""],["position","bottom-left"],["appearance","outlined"]],template:function(r,h){if(1&r&&(a.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1)(2,"mgl-feature",2),a.NdJ("featureDragStart",function(e){return h.onDragStart(e)})("featureDragEnd",function(e){return h.onDragEnd(e)})("featureDrag",function(e){return h.onDrag(e)}),a.qZA()(),a.TgZ(3,"mgl-layer",3,4),a.NdJ("layerMouseEnter",function(){return h.changeColor("#3bb2d0")})("layerMouseLeave",function(){return h.changeColor("#3887be")}),a.qZA(),a.TgZ(5,"mgl-control",5)(6,"mat-card",6)(7,"div"),a._uU(8),a.qZA(),a.TgZ(9,"div"),a._uU(10),a.qZA()()()()),2&r){const T=a.MAs(4);a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(9,ew))("center",a.DdM(10,wg)),a.xp6(2),a.Q6J("geometry",a.VKq(12,wv,a.DdM(11,wg)))("mglDraggable",T),a.xp6(1),a.Q6J("paint",h.layerPaint),a.xp6(5),a.hij("Longitude:\xa0",h.coordinates[0],""),a.xp6(2),a.hij("Latitude:\xa0",h.coordinates[1],"")}},dependencies:[mi,cr,Ai,go,qn,Ln,eg,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Cv=function(){return[15]},Ev=function(c){return[c,37.830348]},iw=function(){return{"line-join":"round","line-cap":"round"}},nw=function(){return{"line-color":"#888","line-width":8}};let Mv=(()=>{class c{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1),a._UZ(2,"mgl-feature",2),a.qZA(),a._UZ(3,"mgl-layer",3),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(7,Cv))("center",a.VKq(8,Ev,-122.486052)),a.xp6(2),a.Q6J("geometry",h.geometry),a.xp6(1),a.Q6J("layout",a.DdM(10,iw))("paint",a.DdM(11,nw)))},dependencies:[mi,cr,go,qn,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),rw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map"),a._UZ(1,"mgl-control",0),a.qZA()),2&r&&a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},dependencies:[mi,Ln,Dn,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Dv=function(){return[12]},Sv=function(){return[11.39085,47.27574]};let Tv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:7,consts:[[3,"zoom","center","pitch"],["id","terrainSource","url","https://demotiles.maplibre.org/terrain-tiles/tiles.json","tileSize","256"],["mglNavigation","","showCompass","true","showZoom","true","visualizePitch","true"],["mglTerrain","","source","terrainSource","exaggeration","5","position","top-right"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-raster-dem-source",1)(2,"mgl-control",2)(3,"mgl-control",3),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(5,Dv))("center",a.DdM(6,Sv))("pitch",52))},dependencies:[mi,qs,Ln,Mn,Ua,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Iv(c,m){if(1&c&&(a.TgZ(0,"mgl-popup",3),a._UZ(1,"span",4),a.qZA()),2&c){const r=a.oxw();a.Q6J("lngLat",r.selectedLngLat)("closeOnClick",!1),a.xp6(1),a.Q6J("innerHTML",null==r.selectedElement?null:r.selectedElement.name,a.oJD)}}const ow=function(){return[3]},sw=function(c){return[c,38.907]},Av=function(){return{type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}},v1=function(){return{"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"}};let b1=(()=>{class c{onClick(r){this.selectedLngLat=r.lngLat,this.selectedElement=r.features[0].properties}onMapClick(){this.selectedElement=null}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle","mapClick"],["id","states-layer","type","fill",3,"source","paint","layerMouseEnter","layerMouseLeave","layerClick"],[3,"lngLat","closeOnClick",4,"ngIf"],[3,"lngLat","closeOnClick"],[3,"innerHTML"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.NdJ("mapClick",function(){return h.onMapClick()}),a.TgZ(1,"mgl-layer",1),a.NdJ("layerMouseEnter",function(){return h.cursorStyle="pointer"})("layerMouseLeave",function(){return h.cursorStyle=""})("layerClick",function(e){return h.onClick(e)}),a.qZA(),a.YNc(2,Iv,2,3,"mgl-popup",2),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(8,ow))("center",a.VKq(9,sw,-100.04))("cursorStyle",h.cursorStyle),a.xp6(1),a.Q6J("source",a.DdM(11,Av))("paint",a.DdM(12,v1)),a.xp6(1),a.Q6J("ngIf",h.selectedElement&&h.selectedLngLat))},dependencies:[X.O5,mi,cr,Ft,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function x1(c,m){if(1&c&&(a.TgZ(0,"mgl-popup",4),a._UZ(1,"span",5),a.qZA()),2&c){const r=a.oxw();a.Q6J("feature",r.selectedPoint),a.xp6(1),a.Q6J("innerHTML",null==r.selectedPoint.properties?null:r.selectedPoint.properties.description,a.oJD)}}const w1=function(){return[11.15]},C1=function(c){return[c,38.907]},E1=function(){return["get","icon"]},M1=function(c){return{"icon-image":c,"icon-allow-overlap":!0}};let D1=(()=>{class c{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar_15"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art_gallery_15"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle_15"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star_15"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(r){this.selectedPoint=r.features[0]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:14,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-geojson-source",1),a.TgZ(2,"mgl-layer",2),a.NdJ("layerClick",function(e){return h.onClick(e)})("layerMouseEnter",function(){return h.cursorStyle="pointer"})("layerMouseLeave",function(){return h.cursorStyle=""}),a.qZA(),a.YNc(3,x1,2,2,"mgl-popup",3),a.qZA()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(8,w1))("center",a.VKq(9,C1,-77.04))("cursorStyle",h.cursorStyle),a.xp6(1),a.Q6J("data",h.points),a.xp6(1),a.Q6J("layout",a.VKq(12,M1,a.DdM(11,E1))),a.xp6(1),a.Q6J("ngIf",h.selectedPoint))},dependencies:[X.O5,mi,cr,go,Ft,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Cp=function(){return[3]},aw=function(c){return[c,37.8]};let kv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0)(1,"mgl-popup",1)(2,"h1"),a._uU(3,"Hello world !"),a.qZA()()()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(7,Cp))("center",a.VKq(8,aw,-96)),a.xp6(1),a.Q6J("lngLat",a.VKq(10,aw,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},dependencies:[mi,Ft,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]}),c})();const Pv=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Ov=function(c){return{satellite:c}},S1=function(){return{visibility:"visible"}},Cg=function(){return{"raster-opacity":1}},Rv=function(c,m){return{id:"satellite",layout:c,minzoom:0,paint:m,"raster-opacity":1,source:"satellite",type:"raster"}},lw=function(c){return[c]},T1=function(c,m){return{version:8,sources:c,layers:m}},cw=function(){return[9]},dw=function(){return[137.9150899566626,36.25956997955441]};let uw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:19,consts:[[3,"zoom","center"]],template:function(r,h){1&r&&a._UZ(0,"mgl-map",0),2&r&&(a.Akn(a.WLB(14,T1,a.VKq(5,Ov,a.DdM(4,Pv)),a.VKq(12,lw,a.WLB(9,Rv,a.DdM(7,S1),a.DdM(8,Cg))))),a.Q6J("zoom",a.DdM(17,cw))("center",a.DdM(18,dw)))},dependencies:[mi,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Mp=function(){return[15]},Fv=function(c){return[c,38.8895]},A1=function(){return{"background-image":"url(https://maplibre.org/maplibre-gl-js-docs/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"}};let k1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[[3,"zoom","center"],[3,"lngLat"],["myMarker",""],[3,"ngStyle"],[3,"marker"]],template:function(r,h){if(1&r&&(a.TgZ(0,"mgl-map",0)(1,"mgl-marker",1,2),a._UZ(3,"div",3),a.qZA(),a.TgZ(4,"mgl-popup",4),a._uU(5," Construction on the Washington Monument began in 1848. "),a.qZA()()),2&r){const T=a.MAs(2);a.Akn("https://demotiles.maplibre.org/style.json"),a.Q6J("zoom",a.DdM(7,Mp))("center",a.VKq(8,Fv,-77.0353)),a.xp6(1),a.Q6J("lngLat",a.VKq(10,Fv,-77.0353)),a.xp6(2),a.Q6J("ngStyle",a.DdM(12,A1)),a.xp6(1),a.Q6J("marker",T)}},dependencies:[X.PC,mi,H,Ft,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const hw=["input"],mw=["*"];let Lv=0;class pw{constructor(m,r){this.source=m,this.value=r}}const fw={provide:Us.JU,useExisting:(0,a.Gpc)(()=>yw),multi:!0},Eg=new a.OlP("MatRadioGroup"),Nv=new a.OlP("mat-radio-default-options",{providedIn:"root",factory:function P1(){return{color:"accent"}}});let kl=(()=>{class c{get name(){return this._name}set name(r){this._name=r,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(r){this._labelPosition="before"===r?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(r){this._selected=r,this.value=r?r.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,mn.Ig)(r),this._markRadiosForCheck()}get required(){return this._required}set required(r){this._required=(0,mn.Ig)(r),this._markRadiosForCheck()}constructor(r){this._changeDetector=r,this._value=null,this._name="mat-radio-group-"+Lv++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new a.vpe}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(r=>{r.name=this.name,r._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(h=>{h.checked=this.value===h.value,h.checked&&(this._selected=h)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new pw(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(r=>r._markForCheck())}writeValue(r){this.value=r,this._changeDetector.markForCheck()}registerOnChange(r){this._controlValueAccessorChangeFn=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r,this._changeDetector.markForCheck()}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.sBO))},c.\u0275dir=a.lG2({type:c,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),c})();class gw{constructor(m){this._elementRef=m}}const Mg=(0,Tn.Kr)((0,Tn.sb)(gw));let _w=(()=>{class c extends Mg{get checked(){return this._checked}set checked(r){const h=(0,mn.Ig)(r);this._checked!==h&&(this._checked=h,h&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!h&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),h&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===r),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(r){this._labelPosition=r}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(r){this._setDisabled((0,mn.Ig)(r))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(r){this._required=(0,mn.Ig)(r)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(r){this._color=r}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(r,h,T,e,i,s,u,f){super(h),this._changeDetector=T,this._focusMonitor=e,this._radioDispatcher=i,this._providerOverride=u,this._uniqueId="mat-radio-"+ ++Lv,this.id=this._uniqueId,this.change=new a.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=r,this._noopAnimations="NoopAnimations"===s,f&&(this.tabIndex=(0,mn.su)(f,0))}focus(r,h){h?this._focusMonitor.focusVia(this._inputElement,h,r):this._inputElement.nativeElement.focus(r)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((r,h)=>{r!==this.id&&h===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(r=>{!r&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new pw(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(r){r.stopPropagation()}_onInputInteraction(r){if(r.stopPropagation(),!this.checked&&!this.disabled){const h=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),h&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(r){this._onInputInteraction(r),this.disabled||this._inputElement.nativeElement.focus()}_setDisabled(r){this._disabled!==r&&(this._disabled=r,this._changeDetector.markForCheck())}_updateTabIndex(){const r=this.radioGroup;let h;if(h=r&&r.selected&&!this.disabled?r.selected===this?this.tabIndex:-1:this.tabIndex,h!==this._previousTabIndex){const T=this._inputElement?.nativeElement;T&&(T.setAttribute("tabindex",h+""),this._previousTabIndex=h)}}}return c.\u0275fac=function(r){a.$Z()},c.\u0275dir=a.lG2({type:c,viewQuery:function(r,h){if(1&r&&a.Gf(hw,5),2&r){let T;a.iGM(T=a.CRH())&&(h._inputElement=T.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[a.qOj]}),c})(),yw=(()=>{class c extends kl{}return c.\u0275fac=function(){let m;return function(h){return(m||(m=a.n5z(c)))(h||c)}}(),c.\u0275dir=a.lG2({type:c,selectors:[["mat-radio-group"]],contentQueries:function(r,h,T){if(1&r&&a.Suo(T,Ka,5),2&r){let e;a.iGM(e=a.CRH())&&(h._radios=e)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],exportAs:["matRadioGroup"],features:[a._Bn([fw,{provide:Eg,useExisting:c}]),a.qOj]}),c})(),Ka=(()=>{class c extends _w{constructor(r,h,T,e,i,s,u,f){super(r,h,T,e,i,s,u,f)}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Eg,8),a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(pl.tE),a.Y36(rp.A8),a.Y36(a.QbO,8),a.Y36(Nv,8),a.$8M("tabindex"))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-mdc-radio-button"],hostVars:15,hostBindings:function(r,h){1&r&&a.NdJ("focus",function(){return h._inputElement.nativeElement.focus()}),2&r&&(a.uIk("id",h.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),a.ekj("mat-primary","primary"===h.color)("mat-accent","accent"===h.color)("mat-warn","warn"===h.color)("mat-mdc-radio-checked",h.checked)("_mat-animation-noopable",h._noopAnimations))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[a.qOj],ngContentSelectors:mw,decls:13,vars:17,consts:[[1,"mdc-form-field"],["formField",""],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"id","checked","disabled","required","change"],["input",""],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[3,"for"]],template:function(r,h){if(1&r&&(a.F$t(),a.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3),a.NdJ("click",function(e){return h._onTouchTargetClick(e)}),a.qZA(),a.TgZ(4,"input",4,5),a.NdJ("change",function(e){return h._onInputInteraction(e)}),a.qZA(),a.TgZ(6,"div",6),a._UZ(7,"div",7)(8,"div",8),a.qZA(),a.TgZ(9,"div",9),a._UZ(10,"div",10),a.qZA()(),a.TgZ(11,"label",11),a.Hsn(12),a.qZA()()),2&r){const T=a.MAs(1);a.ekj("mdc-form-field--align-end","before"==h.labelPosition),a.xp6(2),a.ekj("mdc-radio--disabled",h.disabled),a.xp6(2),a.Q6J("id",h.inputId)("checked",h.checked)("disabled",h.disabled)("required",h.required),a.uIk("name",h.name)("value",h.value)("aria-label",h.ariaLabel)("aria-labelledby",h.ariaLabelledby)("aria-describedby",h.ariaDescribedby),a.xp6(5),a.Q6J("matRippleTrigger",T)("matRippleDisabled",h._isRippleDisabled())("matRippleCentered",!0),a.xp6(2),a.Q6J("for",h.inputId)}},dependencies:[Tn.wG],styles:['.mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mdc-radio[hidden]{display:none}.mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mdc-radio__native-control:checked+.mdc-radio__background,.mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio--disabled{cursor:default;pointer-events:none}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:disabled+.mdc-radio__background,[aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px) / 2)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-focus-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-hover-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, #000)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, #000)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{top:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control{top:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);right:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);left:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{background-color:var(--mat-mdc-radio-ripple-color, transparent)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-mdc-radio-checked-ripple-color, transparent)}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element{background-color:var(--mat-mdc-radio-checked-ripple-color, transparent)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}[dir=rtl] .mat-mdc-radio-touch-target{left:0;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0}),c})(),vw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Tn.BQ,X.ez,Tn.si,Tn.BQ]}),c})();const Dg=function(){return[13]},bw=function(){return[4.899,52.372]};let xw=(()=>{class c{constructor(){this.layerId="streets"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(r){this.style="streets"===r?"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL":{version:8,sources:{raster:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],minzoom:0,maxzoom:15,scheme:"xyz",tileSize:256}},layers:[{id:"some-raster-layer-id",type:"raster",source:"raster",layout:{visibility:"visible"},paint:{"raster-opacity":1}}]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:7,consts:[[3,"zoom","center"],[1,"radio-group",3,"ngModel","ngModelChange"],["value","streets"],["value","code"]],template:function(r,h){1&r&&(a._UZ(0,"mgl-map",0),a.TgZ(1,"mat-radio-group",1),a.NdJ("ngModelChange",function(e){return h.changeStyle(e)}),a.TgZ(2,"mat-radio-button",2),a._uU(3,"streets"),a.qZA(),a.TgZ(4,"mat-radio-button",3),a._uU(5,"from code"),a.qZA()()),2&r&&(a.Akn(h.style),a.Q6J("zoom",a.DdM(5,Dg))("center",a.DdM(6,bw)),a.xp6(1),a.Q6J("ngModel",h.layerId))},dependencies:[Us.JJ,Us.On,mi,yw,Ka,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]}),c})();const zv=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},ww=function(){return{type:"raster-dem",url:"https://demotiles.maplibre.org/terrain-tiles/tiles.json",tileSize:256}},Vv=function(c,m){return{satelliteSource:c,terrainSource:m}},Uv=function(){return{id:"satellite",type:"raster",source:"satelliteSource"}},Cw=function(c){return[c]},jv=function(){return{source:"terrainSource",exaggeration:1}},Ew=function(c,m,r){return{version:8,sources:c,layers:m,terrain:r}},Tg=function(){return[12]},Ac=function(){return[11.39085,47.27574]};let Qc=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:20,consts:[[3,"zoom","center","pitch"]],template:function(r,h){1&r&&a._UZ(0,"mgl-map",0),2&r&&(a.Akn(a.kEZ(14,Ew,a.WLB(7,Vv,a.DdM(5,zv),a.DdM(6,ww)),a.VKq(11,Cw,a.DdM(10,Uv)),a.DdM(13,jv))),a.Q6J("zoom",a.DdM(18,Tg))("center",a.DdM(19,Ac))("pitch",52))},dependencies:[mi,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Hv=function(){return[12]},Ig=function(){return[11.39085,47.27574]};let $v=(()=>{class c{constructor(){this.mapLibreExampleSource="https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",this.terrainSpec={source:"terrainSource",exaggeration:1}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center","pitch","terrain"],["id","terrainSource","url","https://demotiles.maplibre.org/terrain-tiles/tiles.json","tileSize","256"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-raster-dem-source",1),a.qZA()),2&r&&(a.Akn(h.mapLibreExampleSource),a.Q6J("zoom",a.DdM(6,Hv))("center",a.DdM(7,Ig))("pitch",52)("terrain",h.terrainSpec))},dependencies:[mi,qs,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Mw=["button"],O1=["*"],Gv=new a.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Zv=new a.OlP("MatButtonToggleGroup");let Wv=0;class Ag{constructor(m,r){this.source=m,this.value=r}}const Yv=(0,Tn.Kr)(class{});let qv=(()=>{class c extends Yv{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(r){this._appearance=r}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(r){const h=(0,mn.Ig)(r);h!==this._checked&&(this._checked=h,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(r){this._disabled=(0,mn.Ig)(r)}constructor(r,h,T,e,i,s){super(),this._changeDetectorRef=h,this._elementRef=T,this._focusMonitor=e,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new a.vpe;const u=Number(i);this.tabIndex=u||0===u?u:null,this.buttonToggleGroup=r,this.appearance=s&&s.appearance?s.appearance:"standard"}ngOnInit(){const r=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+Wv++,r&&(r._isPrechecked(this)?this.checked=!0:r._isSelected(this)!==this._checked&&r._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const r=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),r&&r._isSelected(this)&&r._syncButtonToggle(this,!1,!1,!0)}focus(r){this._buttonElement.nativeElement.focus(r)}_onButtonClick(){const r=!!this._isSingleSelector()||!this._checked;r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new Ag(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(Zv,8),a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(pl.tE),a.$8M("tabindex"),a.Y36(Gv,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-button-toggle"]],viewQuery:function(r,h){if(1&r&&a.Gf(Mw,5),2&r){let T;a.iGM(T=a.CRH())&&(h._buttonElement=T.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(r,h){1&r&&a.NdJ("focus",function(){return h.focus()}),2&r&&(a.uIk("aria-label",null)("aria-labelledby",null)("id",h.id)("name",null),a.ekj("mat-button-toggle-standalone",!h.buttonToggleGroup)("mat-button-toggle-checked",h.checked)("mat-button-toggle-disabled",h.disabled)("mat-button-toggle-appearance-standard","standard"===h.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[a.qOj],ngContentSelectors:O1,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,h){if(1&r&&(a.F$t(),a.TgZ(0,"button",0,1),a.NdJ("click",function(){return h._onButtonClick()}),a.TgZ(2,"span",2),a.Hsn(3),a.qZA()(),a._UZ(4,"span",3)(5,"span",4)),2&r){const T=a.MAs(1);a.Q6J("id",h.buttonId)("disabled",h.disabled||null),a.uIk("tabindex",h.disabled?-1:h.tabIndex)("aria-pressed",h.checked)("name",h._getButtonName())("aria-label",h.ariaLabel)("aria-labelledby",h.ariaLabelledby),a.xp6(5),a.Q6J("matRippleTrigger",T)("matRippleDisabled",h.disableRipple||h.disabled)}},dependencies:[Tn.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),c})(),Kv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Tn.BQ,Tn.si,Tn.BQ]}),c})();const F1=function(){return[3]},kg=function(c,m){return[c,m]},Jv=function(){return["https://demotiles.maplibre.org/tiles/{z}/{x}/{y}.pbf"]},Qv=function(){return{"line-color":"blue"}};let eb=(()=>{class c{constructor(){this.layouts={countries:{visibility:"none"},names:{visibility:"none","text-field":"{name:latin}","text-size":30}}}ngOnInit(){}toggleLayer(r){this.layouts[r.value]={...this.layouts[r.value],visibility:"visible"===this.layouts[r.value].visibility?"none":"visible"}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:10,vars:16,consts:[[3,"zoom","center"],["id","countries",3,"tiles"],["id","everything","url","https://api.maptiler.com/tiles/v3/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"],["id","countries-layer","type","line","source","countries","sourceLayer","countries",3,"layout","paint"],["id","names","type","symbol","source","everything","sourceLayer","place",3,"layout"],[1,"menu"],["value","names",3,"checked","change"],["value","countries",3,"checked","change"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a._UZ(1,"mgl-vector-source",1)(2,"mgl-vector-source",2)(3,"mgl-layer",3)(4,"mgl-layer",4),a.qZA(),a.TgZ(5,"div",5)(6,"mat-button-toggle",6),a.NdJ("change",function(e){return h.toggleLayer(e)}),a._uU(7,"countries names"),a.qZA(),a.TgZ(8,"mat-button-toggle",7),a.NdJ("change",function(e){return h.toggleLayer(e)}),a._uU(9,"countries border"),a.qZA()()),2&r&&(a.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a.Q6J("zoom",a.DdM(10,F1))("center",a.WLB(11,kg,-71.97722138410576,-13.517379300798098)),a.xp6(1),a.Q6J("tiles",a.DdM(14,Jv)),a.xp6(2),a.Q6J("layout",h.layouts.countries)("paint",a.DdM(15,Qv)),a.xp6(1),a.Q6J("layout",h.layouts.names),a.xp6(2),a.Q6J("checked",!0),a.xp6(2),a.Q6J("checked",!0))},dependencies:[mi,cr,Di,qv,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]}),c})();const tb=function(){return[12]},Dp=function(c){return[c,38.897]},Sp=function(){return{padding:20}},ib=function(){return{"line-color":"#BF93E4","line-width":5}},Sw=function(){return{"line-join":"round","line-cap":"round"}};let L1=(()=>{class c{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const r=this.source.data.features[0].geometry.coordinates;this.bounds=r.reduce((h,T)=>h.extend(T),new Kr.LngLatBounds(r[0],r[0]))}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:15,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0)(1,"mgl-control")(2,"button",1),a.NdJ("click",function(){return h.zoomToBounds()}),a._uU(3," Zoom to bounds "),a.qZA()(),a._UZ(4,"mgl-layer",2),a.qZA()),2&r&&(a.Akn("https://demotiles.maplibre.org/style.json"),a.Q6J("zoom",a.DdM(9,tb))("center",a.VKq(10,Dp,-77.0214))("fitBounds",h.bounds)("fitBoundsOptions",a.DdM(12,Sp)),a.xp6(4),a.Q6J("source",h.source)("paint",a.DdM(13,ib))("layout",a.DdM(14,Sw)))},dependencies:[mi,cr,Ln,oc.lW,Pn,On],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),nb=(()=>{class c{constructor(r){this.router=r}canActivate(r){return!!fb[0].children.some(h=>h.path===r.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(se.F0))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function em(c){return c&&c.origin?c.origin:"https://stackblitz.com"}var N1="300";function Pg(){return Math.random().toString(36).substring(7)}function Vu(c){var m=[];return c&&(c.forceEmbedLayout&&m.push("embed=1"),c.clickToLoad&&m.push("ctl=1"),"string"==typeof c.openFile&&m.push("file="+c.openFile),Array.isArray(c.openFile)&&c.openFile.forEach(function(r){"string"==typeof r&&m.push("file="+r)}),"preview"!==c.view&&"editor"!==c.view||m.push("view="+c.view),"light"!==c.theme&&"dark"!==c.theme||m.push("theme="+c.theme),c.hideExplorer&&m.push("hideExplorer=1"),c.hideNavigation&&m.push("hideNavigation=1"),c.hideDevTools&&m.push("hidedevtools=1"),"number"==typeof c.devToolsHeight&&c.devToolsHeight>=0&&c.devToolsHeight<=100&&m.push("devtoolsheight="+Math.round(c.devToolsHeight))),m.length?"?"+m.join("&"):""}function Og(c,m,r){if(null===c.parentNode)throw new Error("Invalid Element");m.id=c.id,function z1(c,m){m&&(m.hasOwnProperty("height")&&(c.height=""+m.height),m.hasOwnProperty("width")&&(c.width=""+m.width)),c.height||(c.height=N1),c.width||c.setAttribute("style","width:100%;")}(m,r),c.parentNode.replaceChild(m,c)}function Rg(c){if("string"==typeof c){var m=document.getElementById(c);if(null!==m)return m}else if(c instanceof HTMLElement)return c;throw new Error("Invalid Element")}function rb(c){return c&&!1===c.newWindow?"_self":"_blank"}var Tw=function(c){var m=this;this.pending={},this.port=c,this.port.onmessage=function(r){if(r.data.payload.__reqid){var h=r.data.payload.__reqid,T=r.data.payload.__success;if(m.pending[h]){if(delete r.data.payload.__reqid,delete r.data.payload.__success,T){var e=0===Object.keys(r.data.payload).length&&r.data.payload.constructor===Object?null:r.data.payload;m.pending[h].resolve(e)}else m.pending[h].reject(r.data.payload.error?r.data.type+": "+r.data.payload.error:r.data.type);delete m.pending[h]}}}};Tw.prototype.request=function(c){var m=this,r=Pg();return new Promise(function(h,T){m.pending[r]={resolve:h,reject:T},c.payload.__reqid=r,m.port.postMessage(c)})};var Fg=function(c,m){var r=this;this.rdc=new Tw(c),this.preview={},Object.defineProperty(this.preview,"origin",{value:m.previewOrigin,writable:!1}),this.editor={openFile:function(h){return r.rdc.request({type:"SDK_OPEN_FILE",payload:{path:h}})}}};Fg.prototype.applyFsDiff=function(c){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:c})},Fg.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},Fg.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var Lg=[],Iw=function(c){var m=this;this.id=Pg(),this.element=c,this.pending=new Promise(function(r,h){var T=function(f){f.data.action&&"SDK_INIT_SUCCESS"===f.data.action&&f.data.id===m.id&&(m.vm=new Fg(f.ports[0],f.data.payload),r(m.vm),i())},e=function(){m.element.contentWindow&&m.element.contentWindow.postMessage({action:"SDK_INIT",id:m.id},"*")};function i(){window.clearInterval(u),window.removeEventListener("message",T)}window.addEventListener("message",T),e();var s=0,u=window.setInterval(function(){if(m.vm)i();else{if(s>=20)return i(),h("Timeout: Unable to establish a connection with the StackBlitz VM"),void Lg.forEach(function(f,x){f.id===m.id&&Lg.splice(x,1)});s++,e()}},500)}),Lg.push(this)},ob=["angular-cli","create-react-app","javascript","node","polymer","html","typescript","vue"];function Uu(c,m){var r=document.createElement("input");return r.type="hidden",r.name=c,r.value=m,r}function Ng(c){-1===ob.indexOf(c.template)&&console.warn("Unsupported project template, must be one of: "+ob.join(", "));var m=document.createElement("form");return m.method="POST",m.setAttribute("style","display:none!important;"),m.appendChild(Uu("project[title]",c.title)),m.appendChild(Uu("project[description]",c.description)),m.appendChild(Uu("project[template]",c.template)),c.dependencies&&m.appendChild(Uu("project[dependencies]",JSON.stringify(c.dependencies))),c.settings&&m.appendChild(Uu("project[settings]",JSON.stringify(c.settings))),Object.keys(c.files).forEach(function(r){m.appendChild(Uu("project[files]["+r+"]",c.files[r]))}),m}var ju={connect:function(c){if(!c||!c.contentWindow)return Promise.reject("Provided element is not an iframe.");var m=function(c){var m=c instanceof Element?"element":"id";return Lg.find(function(h){return h[m]===c})||null}(c);return m?m.pending:new Iw(c).pending},openGithubProject:function(c,m){window.open(em(m)+"/github/"+c+Vu(m),rb(m))},openProject:function(c,m){!function sb(c,m){var r=Ng(c);r.action=em(m)+"/run"+Vu(m),r.target=rb(m),document.body.appendChild(r),r.submit(),document.body.removeChild(r)}(c,m)},openProjectId:function(c,m){window.open(em(m)+"/edit/"+c+Vu(m),rb(m))},embedGithubProject:function(c,m,r){var h=Rg(c),T=document.createElement("iframe");return T.src=em(r)+"/github/"+m+Vu(r),Og(h,T,r),ju.connect(T)},embedProject:function(c,m,r){var h=Rg(c),T=function Vd(c,m){var r=Ng(c);return r.action=em(m)+"/run"+Vu(m),r.id="sb","<html><head><title></title></head><body>"+r.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(m,r),e=document.createElement("iframe");return Og(h,e,r),e.contentDocument&&e.contentDocument.write(T),ju.connect(e)},embedProjectId:function(c,m,r){var h=Rg(c),T=document.createElement("iframe");return T.src=em(r)+"/edit/"+m+Vu(r),Og(h,T,r),ju.connect(T)}};const zg=ju;var Bg=j(4128),Ip=j(9646),Vg=j(2076),Hu=j(3151),B1=j(8746);function V1(c){return c.replace(/(^\w|-\w)/g,U1)}function U1(c){return c.replace(/-/,"").toUpperCase()}var Ap=j(529);const ab="app/demo/examples/";let Aw=(()=>{class c{constructor(r){this.http=r,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(r){let h=this.fileCache.get(r);return h||(h=this.http.get(`${ab}${r}.component.ts`,{responseType:"text"}).pipe((0,_s.w)(T=>this.loadAdditionnalFilesIfNecessary(T)),(0,Hu.d)(1)),this.fileCache.set(r,h),h)}loadAdditionnalFilesIfNecessary(r){const h=/'\.\/([\w-.]+\.\w+)'/g;let T;const e=[],i={"src/demo.ts":r};for(;T=h.exec(r);)e.push(this.loadFile(T[1]));return e.length?(0,Bg.D)(e).pipe((0,Gn.U)(s=>({...Object.assign({},...s),...i}))):(0,Ip.of)(i)}loadFile(r){let h=this.fileCache.get(r);return h||(h=this.http.get(`${ab}${r}`,{responseType:"text"}).pipe((0,Gn.U)(T=>({[`src/${r}`]:T})),(0,Hu.d)(1)),this.fileCache.set(r,h),h)}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Ap.eN))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const kw=["determinateSpinner"];function Pw(c,m){if(1&c&&(a.O4$(),a.TgZ(0,"svg",11),a._UZ(1,"circle",12),a.qZA()),2&c){const r=a.oxw();a.uIk("viewBox",r._viewBox()),a.xp6(1),a.Udp("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeCircumference()/2,"px")("stroke-width",r._circleStrokeWidth(),"%"),a.uIk("r",r._circleRadius())}}const lb=(0,Tn.pj)(class{constructor(c){this._elementRef=c}},"primary"),cb=new a.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function db(){return{diameter:ub}}}),ub=100;let hb=(()=>{class c extends lb{constructor(r,h,T){super(r),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=ub,this._noopAnimations="NoopAnimations"===h&&!!T&&!T._forceAnimations,T&&(T.color&&(this.color=this.defaultColor=T.color),T.diameter&&(this.diameter=T.diameter),T.strokeWidth&&(this.strokeWidth=T.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(r){this._value=Math.max(0,Math.min(100,(0,mn.su)(r)))}get diameter(){return this._diameter}set diameter(r){this._diameter=(0,mn.su)(r)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(r){this._strokeWidth=(0,mn.su)(r)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const r=2*this._circleRadius()+this.strokeWidth;return`0 0 ${r} ${r}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.SBq),a.Y36(a.QbO,8),a.Y36(cb))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,h){if(1&r&&a.Gf(kw,5),2&r){let T;a.iGM(T=a.CRH())&&(h._determinateCircle=T.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(r,h){2&r&&(a.uIk("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===h.mode?h.value:null)("mode",h.mode),a.Udp("width",h.diameter,"px")("height",h.diameter,"px"),a.ekj("_mat-animation-noopable",h._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===h.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[a.qOj],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,h){if(1&r&&(a.YNc(0,Pw,2,8,"ng-template",null,0,a.W1O),a.TgZ(2,"div",1,2),a.O4$(),a.TgZ(4,"svg",3),a._UZ(5,"circle",4),a.qZA()(),a.kcU(),a.TgZ(6,"div",5)(7,"div",6)(8,"div",7),a.GkF(9,8),a.qZA(),a.TgZ(10,"div",9),a.GkF(11,8),a.qZA(),a.TgZ(12,"div",10),a.GkF(13,8),a.qZA()()()),2&r){const T=a.MAs(1);a.xp6(4),a.uIk("viewBox",h._viewBox()),a.xp6(1),a.Udp("stroke-dasharray",h._strokeCircumference(),"px")("stroke-dashoffset",h._strokeDashOffset(),"px")("stroke-width",h._circleStrokeWidth(),"%"),a.uIk("r",h._circleRadius()),a.xp6(4),a.Q6J("ngTemplateOutlet",T),a.xp6(2),a.Q6J("ngTemplateOutlet",T),a.xp6(2),a.Q6J("ngTemplateOutlet",T)}},dependencies:[X.tP],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),c})(),H1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[X.ez,Tn.BQ]}),c})();const pb=["container"];function Ug(c,m){1&c&&(a.TgZ(0,"div",2),a._UZ(1,"mat-spinner")(2,"div"),a.qZA())}let Rw=(()=>{class c{constructor(r,h,T,e,i){this.zone=r,this.activatedRoute=h,this.demoFileLoaderService=T,this.http=e,this.ChangeDetectorRef=i,this.loading=!0,this.projectbase$=(0,Bg.D)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe((0,Hu.d)(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,Qo.b)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,_s.w)(r=>(0,Bg.D)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(r.demoUrl),(0,Ip.of)(r.demoUrl)])),(0,_s.w)(([r,h,T])=>(0,Vg.D)(this.openExample(r,h,T)).pipe((0,B1.x)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(r,h,T){var e=this;return In(function*(){if(e.vm)return void(yield e.vm.applyFsDiff({create:h,destroy:[]}));const i=function j1(c,m,r){return{files:{"src/main.ts":c[0].replace(/###/g,V1(r)+"Component"),"angular.json":c[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n",...m},title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","maplibre-gl":"*","@maplibre/ngx-maplibre-gl":"*","@angular/cdk":"^13","@angular/material":"^13","@angular/animations":"^13","@angular/forms":"^13","@angular/common":"^13","@angular/compiler":"^13","@angular/core":"^13","@angular/platform-browser":"^13","@angular/platform-browser-dynamic":"^13","@angular/router":"^13",url:"*",querystring:"*",events:"*","@types/supercluster":"*","@types/geojson":"*"}}}(r,h,T);yield e.zone.runOutsideAngular(In(function*(){e.vm=yield zg.embedProject(e.stackblitzContainer.nativeElement,i,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})()}}return c.\u0275fac=function(r){return new(r||c)(a.Y36(a.R0b),a.Y36(se.gz),a.Y36(Aw),a.Y36(Ap.eN),a.Y36(a.sBO))},c.\u0275cmp=a.Xpm({type:c,selectors:[["ng-component"]],viewQuery:function(r,h){if(1&r&&a.Gf(pb,5),2&r){let T;a.iGM(T=a.CRH())&&(h.stackblitzContainer=T.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(r,h){1&r&&(a._UZ(0,"div",null,0),a.YNc(2,Ug,3,0,"div",1)),2&r&&(a.xp6(2),a.Q6J("ngIf",h.loading))},dependencies:[X.O5,hb],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),c})();var cn=(()=>(function(c){c.STYLES="Styles",c.LAYERS="Layers",c.SOURCES="Sources",c.USER_INTERACTION="User interaction",c.CAMERA="Camera",c.CONTROLS_AND_OVERLAYS="Controls and overlays",c.TERRAIN="3D Terrain"}(cn||(cn={})),cn))();const fb=[{path:"",component:g0,children:[{path:"edit/:demoUrl",component:Rw,canActivate:[nb]},{path:"display-map",component:Iy,data:{label:"Display a map",cat:cn.STYLES}},{path:"custom-style-id",component:Jf,data:{label:"Display a map with a custom style",cat:cn.STYLES}},{path:"set-style",component:xw,data:{label:"Change a map's style",cat:cn.STYLES}},{path:"satellite-map",component:uw,data:{label:"Display a satellite map",cat:cn.STYLES}},{path:"add-image-generated",component:b0,data:{label:"Add a generated icon to the map",cat:cn.LAYERS}},{path:"add-image",component:D0,data:{label:"Add an icon to the map",cat:cn.LAYERS}},{path:"toggle-layers",component:eb,data:{label:"Show and hide layers",cat:cn.LAYERS}},{path:"3d-buildings",component:ty,data:{label:"Display 3d buildings",cat:cn.LAYERS}},{path:"cluster",component:z0,data:{label:"Create and style clusters",cat:cn.LAYERS}},{path:"heatmap",component:Tx,data:{label:"Create a heatmap layer",cat:cn.LAYERS}},{path:"geojson-line",component:Gy,data:{label:"Add a GeoJSON line",cat:cn.LAYERS}},{path:"ngx-geojson-line",component:Mv,data:{label:"[NGX] Add a GeoJSON line",cat:cn.LAYERS}},{path:"custom-marker-icons",component:Z0,data:{label:"Add custom icons with Markers",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:Qx,data:{label:"[NGX] Add custom icons with Markers",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:qh,data:{label:"Update a feature in realtime",cat:cn.SOURCES}},{path:"live-update-image-source",component:Kh,data:{label:"Update an image source in realtime",cat:cn.SOURCES}},{path:"popup",component:kv,data:{label:"Display a popup",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:k1,data:{label:"Attach a popup to a marker instance",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:og,data:{label:"View a fullscreen map",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:dg,data:{label:"Display map navigation controls",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:Nx,data:{label:"Locate the user",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:Hh,data:{label:"Change the default position for attribution",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:rw,data:{label:"[NGX] Show scale information",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:Jx,data:{label:"[NGX] Add a custom control",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:Ix,data:{label:"Display a non-interactive map",cat:cn.USER_INTERACTION}},{path:"language-switch",component:Ax,data:{label:"Change a map's language",cat:cn.USER_INTERACTION}},{path:"center-on-symbol",component:fp,data:{label:"Center the map on a clicked symbol",cat:cn.USER_INTERACTION}},{path:"ngx-drag-a-point",component:tw,data:{label:"[NGX] Create a draggable point",cat:cn.USER_INTERACTION}},{path:"drag-a-marker",component:rg,data:{label:"Create a draggable marker",cat:cn.USER_INTERACTION}},{path:"hover-styles",component:Jy,data:{label:"Create a hover effect",cat:cn.USER_INTERACTION}},{path:"popup-on-click",component:D1,data:{label:"Display a popup on click",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:L1,data:{label:"Fit to the bounds of a LineString",cat:cn.USER_INTERACTION}},{path:"cluster-html",component:O0,data:{label:"Display HTML clusters with custom properties",cat:cn.LAYERS}},{path:"ngx-cluster-html",component:xv,data:{label:"[NGX] Display HTML clusters with custom properties",cat:cn.LAYERS}},{path:"polygon-popup-on-click",component:b1,data:{label:"Show polygon information on click",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:Co,data:{label:"Generate and add a missing icon to the map",cat:cn.STYLES}},{path:"custom-attribution",component:Ey,data:{label:"Add custom attributions",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:Wh,data:{label:"Add custom localization for controls",cat:cn.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:Bx,data:{label:"Marker alignment options",cat:cn.CAMERA}},{path:"terrain-style",component:Qc,data:{label:"Initialize 3D Terrain using style",cat:cn.TERRAIN}},{path:"terrain-control",component:Tv,data:{label:"Terrain Control",cat:cn.TERRAIN}},{path:"terrain",component:$v,data:{label:"[NGX] Initialize 3D Terrain declaratively",cat:cn.TERRAIN}},{path:"**",redirectTo:"display-map"}]}],$1=function(){return[2]},Fw=[{path:"",component:(()=>{class c{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:r=>r}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const r=this.center[0];0===r?this.center=[90,0]:90===r?this.center=[180,0]:180===r?this.center=[-90,0]:-90===r&&(this.center=[0,0])}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"zoom","center","centerWithPanTo","panToOptions","interactive","mapLoad","moveEnd"],[1,"main"],["svgIcon","ngx-maplibre-gl-red",1,"logo"]],template:function(r,h){1&r&&(a.TgZ(0,"mgl-map",0),a.NdJ("mapLoad",function(){return h.moveCenter()})("moveEnd",function(){return h.moveCenter()}),a.qZA(),a.TgZ(1,"div",1),a._UZ(2,"mat-icon",2),a.TgZ(3,"h1"),a._uU(4,"Angular binding of maplibre-gl-js"),a.qZA()()),2&r&&(a.Akn("https://demotiles.maplibre.org/style.json"),a.Q6J("zoom",a.DdM(7,$1))("center",h.center)("centerWithPanTo",!0)("panToOptions",h.panToOptions)("interactive",!1))},dependencies:[mi,Ze.Hw],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]}),c})(),pathMatch:"full"}],Z1=[{path:"",component:j(8683).$,children:[{path:"demo",children:fb},...Fw,{path:"doc",loadChildren:()=>j.e(260).then(j.bind(j,4260)).then(c=>c.DocModule)}]},{path:"**",redirectTo:""}];let W1=(()=>{class c{constructor(r,h){r.addSvgIcon("ngx-maplibre-gl",h.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl.svg")),r.addSvgIcon("ngx-maplibre-gl-red",h.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl-red.svg")),r.addSvgIcon("github",h.bypassSecurityTrustResourceUrl("assets/github.svg"))}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(Ze.jv),a.LFG(w.H7))},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[w.b2,Sa,Ze.Ps,se.Bz.forRoot(Z1,{}),Xo,ja.x]}),c})(),Y1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({providers:[nb],imports:[se.Bz,Ap.JF,X.ez,Us.u5,Xo,ja.x,vw,Kv,oc.ot,I_,cx,H1,jf,Ze.Ps,up,xp,c0]}),c})(),q1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[Xo,Ze.Ps]}),c})(),Nw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=a.oAB({type:c,bootstrap:[_]}),c.\u0275inj=a.cJS({imports:[se.Bz,W1,q1,Y1]}),c})();(0,a.G48)(),w.q6().bootstrapModule(Nw).catch(c=>console.log(c))},1135:(yi,pt,j)=>{"use strict";j.d(pt,{X:()=>a});var w=j(7579);class a extends w.x{constructor(_){super(),this._value=_}get value(){return this.getValue()}_subscribe(_){const Ze=super._subscribe(_);return!Ze.closed&&_.next(this._value),Ze}getValue(){const{hasError:_,thrownError:Ze,_value:he}=this;if(_)throw Ze;return this._throwIfClosed(),he}next(_){super.next(this._value=_)}}},9751:(yi,pt,j)=>{"use strict";j.d(pt,{y:()=>Ae});var w=j(930),a=j(727),se=j(8822),_=j(9635),Ze=j(2416),he=j(576),$e=j(2806);let Ae=(()=>{class ke{constructor(Ye){Ye&&(this._subscribe=Ye)}lift(Ye){const mt=new ke;return mt.source=this,mt.operator=Ye,mt}subscribe(Ye,mt,Gt){const wt=function Xe(ke){return ke&&ke instanceof w.Lv||function je(ke){return ke&&(0,he.m)(ke.next)&&(0,he.m)(ke.error)&&(0,he.m)(ke.complete)}(ke)&&(0,a.Nn)(ke)}(Ye)?Ye:new w.Hp(Ye,mt,Gt);return(0,$e.x)(()=>{const{operator:Yt,source:Zt}=this;wt.add(Yt?Yt.call(wt,Zt):Zt?this._subscribe(wt):this._trySubscribe(wt))}),wt}_trySubscribe(Ye){try{return this._subscribe(Ye)}catch(mt){Ye.error(mt)}}forEach(Ye,mt){return new(mt=Ve(mt))((Gt,wt)=>{const Yt=new w.Hp({next:Zt=>{try{Ye(Zt)}catch(Wt){wt(Wt),Yt.unsubscribe()}},error:wt,complete:Gt});this.subscribe(Yt)})}_subscribe(Ye){var mt;return null===(mt=this.source)||void 0===mt?void 0:mt.subscribe(Ye)}[se.L](){return this}pipe(...Ye){return(0,_.U)(Ye)(this)}toPromise(Ye){return new(Ye=Ve(Ye))((mt,Gt)=>{let wt;this.subscribe(Yt=>wt=Yt,Yt=>Gt(Yt),()=>mt(wt))})}}return ke.create=ot=>new ke(ot),ke})();function Ve(ke){var ot;return null!==(ot=ke??Ze.v.Promise)&&void 0!==ot?ot:Promise}},7579:(yi,pt,j)=>{"use strict";j.d(pt,{x:()=>$e});var w=j(9751),a=j(727);const _=(0,j(3888).d)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=j(8737),he=j(2806);let $e=(()=>{class Ve extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Xe){const ke=new Ae(this,this);return ke.operator=Xe,ke}_throwIfClosed(){if(this.closed)throw new _}next(Xe){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ke of this.currentObservers)ke.next(Xe)}})}error(Xe){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Xe;const{observers:ke}=this;for(;ke.length;)ke.shift().error(Xe)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Xe}=this;for(;Xe.length;)Xe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Xe;return(null===(Xe=this.observers)||void 0===Xe?void 0:Xe.length)>0}_trySubscribe(Xe){return this._throwIfClosed(),super._trySubscribe(Xe)}_subscribe(Xe){return this._throwIfClosed(),this._checkFinalizedStatuses(Xe),this._innerSubscribe(Xe)}_innerSubscribe(Xe){const{hasError:ke,isStopped:ot,observers:Ye}=this;return ke||ot?a.Lc:(this.currentObservers=null,Ye.push(Xe),new a.w0(()=>{this.currentObservers=null,(0,Ze.P)(Ye,Xe)}))}_checkFinalizedStatuses(Xe){const{hasError:ke,thrownError:ot,isStopped:Ye}=this;ke?Xe.error(ot):Ye&&Xe.complete()}asObservable(){const Xe=new w.y;return Xe.source=this,Xe}}return Ve.create=(je,Xe)=>new Ae(je,Xe),Ve})();class Ae extends $e{constructor(je,Xe){super(),this.destination=je,this.source=Xe}next(je){var Xe,ke;null===(ke=null===(Xe=this.destination)||void 0===Xe?void 0:Xe.next)||void 0===ke||ke.call(Xe,je)}error(je){var Xe,ke;null===(ke=null===(Xe=this.destination)||void 0===Xe?void 0:Xe.error)||void 0===ke||ke.call(Xe,je)}complete(){var je,Xe;null===(Xe=null===(je=this.destination)||void 0===je?void 0:je.complete)||void 0===Xe||Xe.call(je)}_subscribe(je){var Xe,ke;return null!==(ke=null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(je))&&void 0!==ke?ke:a.Lc}}},930:(yi,pt,j)=>{"use strict";j.d(pt,{Hp:()=>Gt,Lv:()=>ke});var w=j(576),a=j(727),se=j(2416),_=j(7849),Ze=j(5032);const he=Ve("C",void 0,void 0);function Ve(Ct,Oe,tt){return{kind:Ct,value:Oe,error:tt}}var je=j(3410),Xe=j(2806);class ke extends a.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,a.Nn)(Oe)&&Oe.add(this)):this.destination=Wt}static create(Oe,tt,kt){return new Gt(Oe,tt,kt)}next(Oe){this.isStopped?Zt(function Ae(Ct){return Ve("N",Ct,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?Zt(function $e(Ct){return Ve("E",void 0,Ct)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?Zt(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ot=Function.prototype.bind;function Ye(Ct,Oe){return ot.call(Ct,Oe)}class mt{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:tt}=this;if(tt.next)try{tt.next(Oe)}catch(kt){wt(kt)}}error(Oe){const{partialObserver:tt}=this;if(tt.error)try{tt.error(Oe)}catch(kt){wt(kt)}else wt(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(tt){wt(tt)}}}class Gt extends ke{constructor(Oe,tt,kt){let Ot;if(super(),(0,w.m)(Oe)||!Oe)Ot={next:Oe??void 0,error:tt??void 0,complete:kt??void 0};else{let Vt;this&&se.v.useDeprecatedNextContext?(Vt=Object.create(Oe),Vt.unsubscribe=()=>this.unsubscribe(),Ot={next:Oe.next&&Ye(Oe.next,Vt),error:Oe.error&&Ye(Oe.error,Vt),complete:Oe.complete&&Ye(Oe.complete,Vt)}):Ot=Oe}this.destination=new mt(Ot)}}function wt(Ct){se.v.useDeprecatedSynchronousErrorHandling?(0,Xe.O)(Ct):(0,_.h)(Ct)}function Zt(Ct,Oe){const{onStoppedNotification:tt}=se.v;tt&&je.z.setTimeout(()=>tt(Ct,Oe))}const Wt={closed:!0,next:Ze.Z,error:function Yt(Ct){throw Ct},complete:Ze.Z}},727:(yi,pt,j)=>{"use strict";j.d(pt,{Lc:()=>he,w0:()=>Ze,Nn:()=>$e});var w=j(576);const se=(0,j(3888).d)(Ve=>function(Xe){Ve(this),this.message=Xe?`${Xe.length} errors occurred during unsubscription:\n${Xe.map((ke,ot)=>`${ot+1}) ${ke.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Xe});var _=j(8737);class Ze{constructor(je){this.initialTeardown=je,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let je;if(!this.closed){this.closed=!0;const{_parentage:Xe}=this;if(Xe)if(this._parentage=null,Array.isArray(Xe))for(const Ye of Xe)Ye.remove(this);else Xe.remove(this);const{initialTeardown:ke}=this;if((0,w.m)(ke))try{ke()}catch(Ye){je=Ye instanceof se?Ye.errors:[Ye]}const{_finalizers:ot}=this;if(ot){this._finalizers=null;for(const Ye of ot)try{Ae(Ye)}catch(mt){je=je??[],mt instanceof se?je=[...je,...mt.errors]:je.push(mt)}}if(je)throw new se(je)}}add(je){var Xe;if(je&&je!==this)if(this.closed)Ae(je);else{if(je instanceof Ze){if(je.closed||je._hasParent(this))return;je._addParent(this)}(this._finalizers=null!==(Xe=this._finalizers)&&void 0!==Xe?Xe:[]).push(je)}}_hasParent(je){const{_parentage:Xe}=this;return Xe===je||Array.isArray(Xe)&&Xe.includes(je)}_addParent(je){const{_parentage:Xe}=this;this._parentage=Array.isArray(Xe)?(Xe.push(je),Xe):Xe?[Xe,je]:je}_removeParent(je){const{_parentage:Xe}=this;Xe===je?this._parentage=null:Array.isArray(Xe)&&(0,_.P)(Xe,je)}remove(je){const{_finalizers:Xe}=this;Xe&&(0,_.P)(Xe,je),je instanceof Ze&&je._removeParent(this)}}Ze.EMPTY=(()=>{const Ve=new Ze;return Ve.closed=!0,Ve})();const he=Ze.EMPTY;function $e(Ve){return Ve instanceof Ze||Ve&&"closed"in Ve&&(0,w.m)(Ve.remove)&&(0,w.m)(Ve.add)&&(0,w.m)(Ve.unsubscribe)}function Ae(Ve){(0,w.m)(Ve)?Ve():Ve.unsubscribe()}},2416:(yi,pt,j)=>{"use strict";j.d(pt,{v:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(yi,pt,j)=>{"use strict";j.d(pt,{a:()=>je});var w=j(9751),a=j(4742),se=j(2076),_=j(4671),Ze=j(3268),he=j(3269),$e=j(1810),Ae=j(5403),Ve=j(9672);function je(...ot){const Ye=(0,he.yG)(ot),mt=(0,he.jO)(ot),{args:Gt,keys:wt}=(0,a.D)(ot);if(0===Gt.length)return(0,se.D)([],Ye);const Yt=new w.y(function Xe(ot,Ye,mt=_.y){return Gt=>{ke(Ye,()=>{const{length:wt}=ot,Yt=new Array(wt);let Zt=wt,Wt=wt;for(let Ct=0;Ct<wt;Ct++)ke(Ye,()=>{const Oe=(0,se.D)(ot[Ct],Ye);let tt=!1;Oe.subscribe((0,Ae.x)(Gt,kt=>{Yt[Ct]=kt,tt||(tt=!0,Wt--),Wt||Gt.next(mt(Yt.slice()))},()=>{--Zt||Gt.complete()}))},Gt)},Gt)}}(Gt,Ye,wt?Zt=>(0,$e.n)(wt,Zt):_.y));return mt?Yt.pipe((0,Ze.Z)(mt)):Yt}function ke(ot,Ye,mt){ot?(0,Ve.f)(mt,ot,Ye):Ye()}},7272:(yi,pt,j)=>{"use strict";j.d(pt,{z:()=>Ze});var w=j(8189),se=j(3269),_=j(2076);function Ze(...he){return function a(){return(0,w.J)(1)}()((0,_.D)(he,(0,se.yG)(he)))}},9770:(yi,pt,j)=>{"use strict";j.d(pt,{P:()=>se});var w=j(9751),a=j(8421);function se(_){return new w.y(Ze=>{(0,a.Xf)(_()).subscribe(Ze)})}},515:(yi,pt,j)=>{"use strict";j.d(pt,{E:()=>a});const a=new(j(9751).y)(Ze=>Ze.complete())},4128:(yi,pt,j)=>{"use strict";j.d(pt,{D:()=>Ae});var w=j(9751),a=j(4742),se=j(8421),_=j(3269),Ze=j(5403),he=j(3268),$e=j(1810);function Ae(...Ve){const je=(0,_.jO)(Ve),{args:Xe,keys:ke}=(0,a.D)(Ve),ot=new w.y(Ye=>{const{length:mt}=Xe;if(!mt)return void Ye.complete();const Gt=new Array(mt);let wt=mt,Yt=mt;for(let Zt=0;Zt<mt;Zt++){let Wt=!1;(0,se.Xf)(Xe[Zt]).subscribe((0,Ze.x)(Ye,Ct=>{Wt||(Wt=!0,Yt--),Gt[Zt]=Ct},()=>wt--,void 0,()=>{(!wt||!Wt)&&(Yt||Ye.next(ke?(0,$e.n)(ke,Gt):Gt),Ye.complete())}))}});return je?ot.pipe((0,he.Z)(je)):ot}},2076:(yi,pt,j)=>{"use strict";j.d(pt,{D:()=>kt});var w=j(8421),a=j(9672),se=j(4482),_=j(5403);function Ze(Ot,Vt=0){return(0,se.e)((ai,gi)=>{ai.subscribe((0,_.x)(gi,hi=>(0,a.f)(gi,Ot,()=>gi.next(hi),Vt),()=>(0,a.f)(gi,Ot,()=>gi.complete(),Vt),hi=>(0,a.f)(gi,Ot,()=>gi.error(hi),Vt)))})}function he(Ot,Vt=0){return(0,se.e)((ai,gi)=>{gi.add(Ot.schedule(()=>ai.subscribe(gi),Vt))})}var Ve=j(9751),Xe=j(2202),ke=j(576);function Ye(Ot,Vt){if(!Ot)throw new Error("Iterable cannot be null");return new Ve.y(ai=>{(0,a.f)(ai,Vt,()=>{const gi=Ot[Symbol.asyncIterator]();(0,a.f)(ai,Vt,()=>{gi.next().then(hi=>{hi.done?ai.complete():ai.next(hi.value)})},0,!0)})})}var mt=j(3670),Gt=j(8239),wt=j(1144),Yt=j(6495),Zt=j(2206),Wt=j(4532),Ct=j(3260);function kt(Ot,Vt){return Vt?function tt(Ot,Vt){if(null!=Ot){if((0,mt.c)(Ot))return function $e(Ot,Vt){return(0,w.Xf)(Ot).pipe(he(Vt),Ze(Vt))}(Ot,Vt);if((0,wt.z)(Ot))return function je(Ot,Vt){return new Ve.y(ai=>{let gi=0;return Vt.schedule(function(){gi===Ot.length?ai.complete():(ai.next(Ot[gi++]),ai.closed||this.schedule())})})}(Ot,Vt);if((0,Gt.t)(Ot))return function Ae(Ot,Vt){return(0,w.Xf)(Ot).pipe(he(Vt),Ze(Vt))}(Ot,Vt);if((0,Zt.D)(Ot))return Ye(Ot,Vt);if((0,Yt.T)(Ot))return function ot(Ot,Vt){return new Ve.y(ai=>{let gi;return(0,a.f)(ai,Vt,()=>{gi=Ot[Xe.h](),(0,a.f)(ai,Vt,()=>{let hi,zi;try{({value:hi,done:zi}=gi.next())}catch(xi){return void ai.error(xi)}zi?ai.complete():ai.next(hi)},0,!0)}),()=>(0,ke.m)(gi?.return)&&gi.return()})}(Ot,Vt);if((0,Ct.L)(Ot))return function Oe(Ot,Vt){return Ye((0,Ct.Q)(Ot),Vt)}(Ot,Vt)}throw(0,Wt.z)(Ot)}(Ot,Vt):(0,w.Xf)(Ot)}},4968:(yi,pt,j)=>{"use strict";j.d(pt,{R:()=>je});var w=j(8421),a=j(9751),se=j(5577),_=j(1144),Ze=j(576),he=j(3268);const $e=["addListener","removeListener"],Ae=["addEventListener","removeEventListener"],Ve=["on","off"];function je(mt,Gt,wt,Yt){if((0,Ze.m)(wt)&&(Yt=wt,wt=void 0),Yt)return je(mt,Gt,wt).pipe((0,he.Z)(Yt));const[Zt,Wt]=function Ye(mt){return(0,Ze.m)(mt.addEventListener)&&(0,Ze.m)(mt.removeEventListener)}(mt)?Ae.map(Ct=>Oe=>mt[Ct](Gt,Oe,wt)):function ke(mt){return(0,Ze.m)(mt.addListener)&&(0,Ze.m)(mt.removeListener)}(mt)?$e.map(Xe(mt,Gt)):function ot(mt){return(0,Ze.m)(mt.on)&&(0,Ze.m)(mt.off)}(mt)?Ve.map(Xe(mt,Gt)):[];if(!Zt&&(0,_.z)(mt))return(0,se.z)(Ct=>je(Ct,Gt,wt))((0,w.Xf)(mt));if(!Zt)throw new TypeError("Invalid event target");return new a.y(Ct=>{const Oe=(...tt)=>Ct.next(1<tt.length?tt:tt[0]);return Zt(Oe),()=>Wt(Oe)})}function Xe(mt,Gt){return wt=>Yt=>mt[wt](Gt,Yt)}},8421:(yi,pt,j)=>{"use strict";j.d(pt,{Xf:()=>ot});var w=j(655),a=j(1144),se=j(8239),_=j(9751),Ze=j(3670),he=j(2206),$e=j(4532),Ae=j(6495),Ve=j(3260),je=j(576),Xe=j(7849),ke=j(8822);function ot(Ct){if(Ct instanceof _.y)return Ct;if(null!=Ct){if((0,Ze.c)(Ct))return function Ye(Ct){return new _.y(Oe=>{const tt=Ct[ke.L]();if((0,je.m)(tt.subscribe))return tt.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ct);if((0,a.z)(Ct))return function mt(Ct){return new _.y(Oe=>{for(let tt=0;tt<Ct.length&&!Oe.closed;tt++)Oe.next(Ct[tt]);Oe.complete()})}(Ct);if((0,se.t)(Ct))return function Gt(Ct){return new _.y(Oe=>{Ct.then(tt=>{Oe.closed||(Oe.next(tt),Oe.complete())},tt=>Oe.error(tt)).then(null,Xe.h)})}(Ct);if((0,he.D)(Ct))return Yt(Ct);if((0,Ae.T)(Ct))return function wt(Ct){return new _.y(Oe=>{for(const tt of Ct)if(Oe.next(tt),Oe.closed)return;Oe.complete()})}(Ct);if((0,Ve.L)(Ct))return function Zt(Ct){return Yt((0,Ve.Q)(Ct))}(Ct)}throw(0,$e.z)(Ct)}function Yt(Ct){return new _.y(Oe=>{(function Wt(Ct,Oe){var tt,kt,Ot,Vt;return(0,w.mG)(this,void 0,void 0,function*(){try{for(tt=(0,w.KL)(Ct);!(kt=yield tt.next()).done;)if(Oe.next(kt.value),Oe.closed)return}catch(ai){Ot={error:ai}}finally{try{kt&&!kt.done&&(Vt=tt.return)&&(yield Vt.call(tt))}finally{if(Ot)throw Ot.error}}Oe.complete()})})(Ct,Oe).catch(tt=>Oe.error(tt))})}},6451:(yi,pt,j)=>{"use strict";j.d(pt,{T:()=>he});var w=j(8189),a=j(8421),se=j(515),_=j(3269),Ze=j(2076);function he(...$e){const Ae=(0,_.yG)($e),Ve=(0,_._6)($e,1/0),je=$e;return je.length?1===je.length?(0,a.Xf)(je[0]):(0,w.J)(Ve)((0,Ze.D)(je,Ae)):se.E}},9646:(yi,pt,j)=>{"use strict";j.d(pt,{of:()=>se});var w=j(3269),a=j(2076);function se(..._){const Ze=(0,w.yG)(_);return(0,a.D)(_,Ze)}},2843:(yi,pt,j)=>{"use strict";j.d(pt,{_:()=>se});var w=j(9751),a=j(576);function se(_,Ze){const he=(0,a.m)(_)?_:()=>_,$e=Ae=>Ae.error(he());return new w.y(Ze?Ae=>Ze.schedule($e,0,Ae):$e)}},5963:(yi,pt,j)=>{"use strict";j.d(pt,{H:()=>Ze});var w=j(9751),a=j(4986),se=j(3532);function Ze(he=0,$e,Ae=a.P){let Ve=-1;return null!=$e&&((0,se.K)($e)?Ae=$e:Ve=$e),new w.y(je=>{let Xe=function _(he){return he instanceof Date&&!isNaN(he)}(he)?+he-Ae.now():he;Xe<0&&(Xe=0);let ke=0;return Ae.schedule(function(){je.closed||(je.next(ke++),0<=Ve?this.schedule(void 0,Ve):je.complete())},Xe)})}},5403:(yi,pt,j)=>{"use strict";j.d(pt,{x:()=>a});var w=j(930);function a(_,Ze,he,$e,Ae){return new se(_,Ze,he,$e,Ae)}class se extends w.Lv{constructor(Ze,he,$e,Ae,Ve,je){super(Ze),this.onFinalize=Ve,this.shouldUnsubscribe=je,this._next=he?function(Xe){try{he(Xe)}catch(ke){Ze.error(ke)}}:super._next,this._error=Ae?function(Xe){try{Ae(Xe)}catch(ke){Ze.error(ke)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(Xe){Ze.error(Xe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ze;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(Ze=this.onFinalize)||void 0===Ze||Ze.call(this))}}}},262:(yi,pt,j)=>{"use strict";j.d(pt,{K:()=>_});var w=j(8421),a=j(5403),se=j(4482);function _(Ze){return(0,se.e)((he,$e)=>{let je,Ae=null,Ve=!1;Ae=he.subscribe((0,a.x)($e,void 0,void 0,Xe=>{je=(0,w.Xf)(Ze(Xe,_(Ze)(he))),Ae?(Ae.unsubscribe(),Ae=null,je.subscribe($e)):Ve=!0})),Ve&&(Ae.unsubscribe(),Ae=null,je.subscribe($e))})}},4351:(yi,pt,j)=>{"use strict";j.d(pt,{b:()=>se});var w=j(5577),a=j(576);function se(_,Ze){return(0,a.m)(Ze)?(0,w.z)(_,Ze,1):(0,w.z)(_,1)}},8372:(yi,pt,j)=>{"use strict";j.d(pt,{b:()=>_});var w=j(4986),a=j(4482),se=j(5403);function _(Ze,he=w.z){return(0,a.e)(($e,Ae)=>{let Ve=null,je=null,Xe=null;const ke=()=>{if(Ve){Ve.unsubscribe(),Ve=null;const Ye=je;je=null,Ae.next(Ye)}};function ot(){const Ye=Xe+Ze,mt=he.now();if(mt<Ye)return Ve=this.schedule(void 0,Ye-mt),void Ae.add(Ve);ke()}$e.subscribe((0,se.x)(Ae,Ye=>{je=Ye,Xe=he.now(),Ve||(Ve=he.schedule(ot,Ze),Ae.add(Ve))},()=>{ke(),Ae.complete()},void 0,()=>{je=Ve=null}))})}},6590:(yi,pt,j)=>{"use strict";j.d(pt,{d:()=>se});var w=j(4482),a=j(5403);function se(_){return(0,w.e)((Ze,he)=>{let $e=!1;Ze.subscribe((0,a.x)(he,Ae=>{$e=!0,he.next(Ae)},()=>{$e||he.next(_),he.complete()}))})}},1884:(yi,pt,j)=>{"use strict";j.d(pt,{x:()=>_});var w=j(4671),a=j(4482),se=j(5403);function _(he,$e=w.y){return he=he??Ze,(0,a.e)((Ae,Ve)=>{let je,Xe=!0;Ae.subscribe((0,se.x)(Ve,ke=>{const ot=$e(ke);(Xe||!he(je,ot))&&(Xe=!1,je=ot,Ve.next(ke))}))})}function Ze(he,$e){return he===$e}},9300:(yi,pt,j)=>{"use strict";j.d(pt,{h:()=>se});var w=j(4482),a=j(5403);function se(_,Ze){return(0,w.e)((he,$e)=>{let Ae=0;he.subscribe((0,a.x)($e,Ve=>_.call(Ze,Ve,Ae++)&&$e.next(Ve)))})}},8746:(yi,pt,j)=>{"use strict";j.d(pt,{x:()=>a});var w=j(4482);function a(se){return(0,w.e)((_,Ze)=>{try{_.subscribe(Ze)}finally{Ze.add(se)}})}},590:(yi,pt,j)=>{"use strict";j.d(pt,{P:()=>$e});var w=j(6805),a=j(9300),se=j(5698),_=j(6590),Ze=j(8068),he=j(4671);function $e(Ae,Ve){const je=arguments.length>=2;return Xe=>Xe.pipe(Ae?(0,a.h)((ke,ot)=>Ae(ke,ot,Xe)):he.y,(0,se.q)(1),je?(0,_.d)(Ve):(0,Ze.T)(()=>new w.K))}},4004:(yi,pt,j)=>{"use strict";j.d(pt,{U:()=>se});var w=j(4482),a=j(5403);function se(_,Ze){return(0,w.e)((he,$e)=>{let Ae=0;he.subscribe((0,a.x)($e,Ve=>{$e.next(_.call(Ze,Ve,Ae++))}))})}},9718:(yi,pt,j)=>{"use strict";j.d(pt,{h:()=>a});var w=j(4004);function a(se){return(0,w.U)(()=>se)}},8189:(yi,pt,j)=>{"use strict";j.d(pt,{J:()=>se});var w=j(5577),a=j(4671);function se(_=1/0){return(0,w.z)(a.y,_)}},5577:(yi,pt,j)=>{"use strict";j.d(pt,{z:()=>Ae});var w=j(4004),a=j(8421),se=j(4482),_=j(9672),Ze=j(5403),$e=j(576);function Ae(Ve,je,Xe=1/0){return(0,$e.m)(je)?Ae((ke,ot)=>(0,w.U)((Ye,mt)=>je(ke,Ye,ot,mt))((0,a.Xf)(Ve(ke,ot))),Xe):("number"==typeof je&&(Xe=je),(0,se.e)((ke,ot)=>function he(Ve,je,Xe,ke,ot,Ye,mt,Gt){const wt=[];let Yt=0,Zt=0,Wt=!1;const Ct=()=>{Wt&&!wt.length&&!Yt&&je.complete()},Oe=kt=>Yt<ke?tt(kt):wt.push(kt),tt=kt=>{Ye&&je.next(kt),Yt++;let Ot=!1;(0,a.Xf)(Xe(kt,Zt++)).subscribe((0,Ze.x)(je,Vt=>{ot?.(Vt),Ye?Oe(Vt):je.next(Vt)},()=>{Ot=!0},void 0,()=>{if(Ot)try{for(Yt--;wt.length&&Yt<ke;){const Vt=wt.shift();mt?(0,_.f)(je,mt,()=>tt(Vt)):tt(Vt)}Ct()}catch(Vt){je.error(Vt)}}))};return Ve.subscribe((0,Ze.x)(je,Oe,()=>{Wt=!0,Ct()})),()=>{Gt?.()}}(ke,ot,Ve,Xe)))}},3099:(yi,pt,j)=>{"use strict";j.d(pt,{B:()=>Ze});var w=j(8421),a=j(7579),se=j(930),_=j(4482);function Ze($e={}){const{connector:Ae=(()=>new a.x),resetOnError:Ve=!0,resetOnComplete:je=!0,resetOnRefCountZero:Xe=!0}=$e;return ke=>{let ot,Ye,mt,Gt=0,wt=!1,Yt=!1;const Zt=()=>{Ye?.unsubscribe(),Ye=void 0},Wt=()=>{Zt(),ot=mt=void 0,wt=Yt=!1},Ct=()=>{const Oe=ot;Wt(),Oe?.unsubscribe()};return(0,_.e)((Oe,tt)=>{Gt++,!Yt&&!wt&&Zt();const kt=mt=mt??Ae();tt.add(()=>{Gt--,0===Gt&&!Yt&&!wt&&(Ye=he(Ct,Xe))}),kt.subscribe(tt),!ot&&Gt>0&&(ot=new se.Hp({next:Ot=>kt.next(Ot),error:Ot=>{Yt=!0,Zt(),Ye=he(Wt,Ve,Ot),kt.error(Ot)},complete:()=>{wt=!0,Zt(),Ye=he(Wt,je),kt.complete()}}),(0,w.Xf)(Oe).subscribe(ot))})(ke)}}function he($e,Ae,...Ve){if(!0===Ae)return void $e();if(!1===Ae)return;const je=new se.Hp({next:()=>{je.unsubscribe(),$e()}});return Ae(...Ve).subscribe(je)}},3151:(yi,pt,j)=>{"use strict";j.d(pt,{d:()=>Ze});var w=j(7579),a=j(6063);class se extends w.x{constructor($e=1/0,Ae=1/0,Ve=a.l){super(),this._bufferSize=$e,this._windowTime=Ae,this._timestampProvider=Ve,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ae===1/0,this._bufferSize=Math.max(1,$e),this._windowTime=Math.max(1,Ae)}next($e){const{isStopped:Ae,_buffer:Ve,_infiniteTimeWindow:je,_timestampProvider:Xe,_windowTime:ke}=this;Ae||(Ve.push($e),!je&&Ve.push(Xe.now()+ke)),this._trimBuffer(),super.next($e)}_subscribe($e){this._throwIfClosed(),this._trimBuffer();const Ae=this._innerSubscribe($e),{_infiniteTimeWindow:Ve,_buffer:je}=this,Xe=je.slice();for(let ke=0;ke<Xe.length&&!$e.closed;ke+=Ve?1:2)$e.next(Xe[ke]);return this._checkFinalizedStatuses($e),Ae}_trimBuffer(){const{_bufferSize:$e,_timestampProvider:Ae,_buffer:Ve,_infiniteTimeWindow:je}=this,Xe=(je?1:2)*$e;if($e<1/0&&Xe<Ve.length&&Ve.splice(0,Ve.length-Xe),!je){const ke=Ae.now();let ot=0;for(let Ye=1;Ye<Ve.length&&Ve[Ye]<=ke;Ye+=2)ot=Ye;ot&&Ve.splice(0,ot+1)}}}var _=j(3099);function Ze(he,$e,Ae){let Ve,je=!1;return he&&"object"==typeof he?({bufferSize:Ve=1/0,windowTime:$e=1/0,refCount:je=!1,scheduler:Ae}=he):Ve=he??1/0,(0,_.B)({connector:()=>new se(Ve,$e,Ae),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:je})}},8675:(yi,pt,j)=>{"use strict";j.d(pt,{O:()=>_});var w=j(7272),a=j(3269),se=j(4482);function _(...Ze){const he=(0,a.yG)(Ze);return(0,se.e)(($e,Ae)=>{(he?(0,w.z)(Ze,$e,he):(0,w.z)(Ze,$e)).subscribe(Ae)})}},3900:(yi,pt,j)=>{"use strict";j.d(pt,{w:()=>_});var w=j(8421),a=j(4482),se=j(5403);function _(Ze,he){return(0,a.e)(($e,Ae)=>{let Ve=null,je=0,Xe=!1;const ke=()=>Xe&&!Ve&&Ae.complete();$e.subscribe((0,se.x)(Ae,ot=>{Ve?.unsubscribe();let Ye=0;const mt=je++;(0,w.Xf)(Ze(ot,mt)).subscribe(Ve=(0,se.x)(Ae,Gt=>Ae.next(he?he(ot,Gt,mt,Ye++):Gt),()=>{Ve=null,ke()}))},()=>{Xe=!0,ke()}))})}},5698:(yi,pt,j)=>{"use strict";j.d(pt,{q:()=>_});var w=j(515),a=j(4482),se=j(5403);function _(Ze){return Ze<=0?()=>w.E:(0,a.e)((he,$e)=>{let Ae=0;he.subscribe((0,se.x)($e,Ve=>{++Ae<=Ze&&($e.next(Ve),Ze<=Ae&&$e.complete())}))})}},2722:(yi,pt,j)=>{"use strict";j.d(pt,{R:()=>Ze});var w=j(4482),a=j(5403),se=j(8421),_=j(5032);function Ze(he){return(0,w.e)(($e,Ae)=>{(0,se.Xf)(he).subscribe((0,a.x)(Ae,()=>Ae.complete(),_.Z)),!Ae.closed&&$e.subscribe(Ae)})}},2529:(yi,pt,j)=>{"use strict";j.d(pt,{o:()=>se});var w=j(4482),a=j(5403);function se(_,Ze=!1){return(0,w.e)((he,$e)=>{let Ae=0;he.subscribe((0,a.x)($e,Ve=>{const je=_(Ve,Ae++);(je||Ze)&&$e.next(Ve),!je&&$e.complete()}))})}},8505:(yi,pt,j)=>{"use strict";j.d(pt,{b:()=>Ze});var w=j(576),a=j(4482),se=j(5403),_=j(4671);function Ze(he,$e,Ae){const Ve=(0,w.m)(he)||$e||Ae?{next:he,error:$e,complete:Ae}:he;return Ve?(0,a.e)((je,Xe)=>{var ke;null===(ke=Ve.subscribe)||void 0===ke||ke.call(Ve);let ot=!0;je.subscribe((0,se.x)(Xe,Ye=>{var mt;null===(mt=Ve.next)||void 0===mt||mt.call(Ve,Ye),Xe.next(Ye)},()=>{var Ye;ot=!1,null===(Ye=Ve.complete)||void 0===Ye||Ye.call(Ve),Xe.complete()},Ye=>{var mt;ot=!1,null===(mt=Ve.error)||void 0===mt||mt.call(Ve,Ye),Xe.error(Ye)},()=>{var Ye,mt;ot&&(null===(Ye=Ve.unsubscribe)||void 0===Ye||Ye.call(Ve)),null===(mt=Ve.finalize)||void 0===mt||mt.call(Ve)}))}):_.y}},8068:(yi,pt,j)=>{"use strict";j.d(pt,{T:()=>_});var w=j(6805),a=j(4482),se=j(5403);function _(he=Ze){return(0,a.e)(($e,Ae)=>{let Ve=!1;$e.subscribe((0,se.x)(Ae,je=>{Ve=!0,Ae.next(je)},()=>Ve?Ae.complete():Ae.error(he())))})}function Ze(){return new w.K}},4408:(yi,pt,j)=>{"use strict";j.d(pt,{o:()=>Ze});var w=j(727);class a extends w.w0{constructor($e,Ae){super()}schedule($e,Ae=0){return this}}const se={setInterval(he,$e,...Ae){const{delegate:Ve}=se;return Ve?.setInterval?Ve.setInterval(he,$e,...Ae):setInterval(he,$e,...Ae)},clearInterval(he){const{delegate:$e}=se;return($e?.clearInterval||clearInterval)(he)},delegate:void 0};var _=j(8737);class Ze extends a{constructor($e,Ae){super($e,Ae),this.scheduler=$e,this.work=Ae,this.pending=!1}schedule($e,Ae=0){var Ve;if(this.closed)return this;this.state=$e;const je=this.id,Xe=this.scheduler;return null!=je&&(this.id=this.recycleAsyncId(Xe,je,Ae)),this.pending=!0,this.delay=Ae,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(Xe,this.id,Ae),this}requestAsyncId($e,Ae,Ve=0){return se.setInterval($e.flush.bind($e,this),Ve)}recycleAsyncId($e,Ae,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return Ae;null!=Ae&&se.clearInterval(Ae)}execute($e,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute($e,Ae);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute($e,Ae){let je,Ve=!1;try{this.work($e)}catch(Xe){Ve=!0,je=Xe||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),je}unsubscribe(){if(!this.closed){const{id:$e,scheduler:Ae}=this,{actions:Ve}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,_.P)(Ve,this),null!=$e&&(this.id=this.recycleAsyncId(Ae,$e,null)),this.delay=null,super.unsubscribe()}}}},7565:(yi,pt,j)=>{"use strict";j.d(pt,{v:()=>se});var w=j(6063);class a{constructor(Ze,he=a.now){this.schedulerActionCtor=Ze,this.now=he}schedule(Ze,he=0,$e){return new this.schedulerActionCtor(this,Ze).schedule($e,he)}}a.now=w.l.now;class se extends a{constructor(Ze,he=a.now){super(Ze,he),this.actions=[],this._active=!1}flush(Ze){const{actions:he}=this;if(this._active)return void he.push(Ze);let $e;this._active=!0;do{if($e=Ze.execute(Ze.state,Ze.delay))break}while(Ze=he.shift());if(this._active=!1,$e){for(;Ze=he.shift();)Ze.unsubscribe();throw $e}}}},4986:(yi,pt,j)=>{"use strict";j.d(pt,{P:()=>_,z:()=>se});var w=j(4408);const se=new(j(7565).v)(w.o),_=se},6063:(yi,pt,j)=>{"use strict";j.d(pt,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},3410:(yi,pt,j)=>{"use strict";j.d(pt,{z:()=>w});const w={setTimeout(a,se,..._){const{delegate:Ze}=w;return Ze?.setTimeout?Ze.setTimeout(a,se,..._):setTimeout(a,se,..._)},clearTimeout(a){const{delegate:se}=w;return(se?.clearTimeout||clearTimeout)(a)},delegate:void 0}},2202:(yi,pt,j)=>{"use strict";j.d(pt,{h:()=>a});const a=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yi,pt,j)=>{"use strict";j.d(pt,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(yi,pt,j)=>{"use strict";j.d(pt,{K:()=>a});const a=(0,j(3888).d)(se=>function(){se(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(yi,pt,j)=>{"use strict";j.d(pt,{_6:()=>he,jO:()=>_,yG:()=>Ze});var w=j(576),a=j(3532);function se($e){return $e[$e.length-1]}function _($e){return(0,w.m)(se($e))?$e.pop():void 0}function Ze($e){return(0,a.K)(se($e))?$e.pop():void 0}function he($e,Ae){return"number"==typeof se($e)?$e.pop():Ae}},4742:(yi,pt,j)=>{"use strict";j.d(pt,{D:()=>Ze});const{isArray:w}=Array,{getPrototypeOf:a,prototype:se,keys:_}=Object;function Ze($e){if(1===$e.length){const Ae=$e[0];if(w(Ae))return{args:Ae,keys:null};if(function he($e){return $e&&"object"==typeof $e&&a($e)===se}(Ae)){const Ve=_(Ae);return{args:Ve.map(je=>Ae[je]),keys:Ve}}}return{args:$e,keys:null}}},8737:(yi,pt,j)=>{"use strict";function w(a,se){if(a){const _=a.indexOf(se);0<=_&&a.splice(_,1)}}j.d(pt,{P:()=>w})},3888:(yi,pt,j)=>{"use strict";function w(a){const _=a(Ze=>{Error.call(Ze),Ze.stack=(new Error).stack});return _.prototype=Object.create(Error.prototype),_.prototype.constructor=_,_}j.d(pt,{d:()=>w})},1810:(yi,pt,j)=>{"use strict";function w(a,se){return a.reduce((_,Ze,he)=>(_[Ze]=se[he],_),{})}j.d(pt,{n:()=>w})},2806:(yi,pt,j)=>{"use strict";j.d(pt,{O:()=>_,x:()=>se});var w=j(2416);let a=null;function se(Ze){if(w.v.useDeprecatedSynchronousErrorHandling){const he=!a;if(he&&(a={errorThrown:!1,error:null}),Ze(),he){const{errorThrown:$e,error:Ae}=a;if(a=null,$e)throw Ae}}else Ze()}function _(Ze){w.v.useDeprecatedSynchronousErrorHandling&&a&&(a.errorThrown=!0,a.error=Ze)}},9672:(yi,pt,j)=>{"use strict";function w(a,se,_,Ze=0,he=!1){const $e=se.schedule(function(){_(),he?a.add(this.schedule(null,Ze)):this.unsubscribe()},Ze);if(a.add($e),!he)return $e}j.d(pt,{f:()=>w})},4671:(yi,pt,j)=>{"use strict";function w(a){return a}j.d(pt,{y:()=>w})},1144:(yi,pt,j)=>{"use strict";j.d(pt,{z:()=>w});const w=a=>a&&"number"==typeof a.length&&"function"!=typeof a},2206:(yi,pt,j)=>{"use strict";j.d(pt,{D:()=>a});var w=j(576);function a(se){return Symbol.asyncIterator&&(0,w.m)(se?.[Symbol.asyncIterator])}},576:(yi,pt,j)=>{"use strict";function w(a){return"function"==typeof a}j.d(pt,{m:()=>w})},3670:(yi,pt,j)=>{"use strict";j.d(pt,{c:()=>se});var w=j(8822),a=j(576);function se(_){return(0,a.m)(_[w.L])}},6495:(yi,pt,j)=>{"use strict";j.d(pt,{T:()=>se});var w=j(2202),a=j(576);function se(_){return(0,a.m)(_?.[w.h])}},8239:(yi,pt,j)=>{"use strict";j.d(pt,{t:()=>a});var w=j(576);function a(se){return(0,w.m)(se?.then)}},3260:(yi,pt,j)=>{"use strict";j.d(pt,{L:()=>_,Q:()=>se});var w=j(655),a=j(576);function se(Ze){return(0,w.FC)(this,arguments,function*(){const $e=Ze.getReader();try{for(;;){const{value:Ae,done:Ve}=yield(0,w.qq)($e.read());if(Ve)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(Ae)}}finally{$e.releaseLock()}})}function _(Ze){return(0,a.m)(Ze?.getReader)}},3532:(yi,pt,j)=>{"use strict";j.d(pt,{K:()=>a});var w=j(576);function a(se){return se&&(0,w.m)(se.schedule)}},4482:(yi,pt,j)=>{"use strict";j.d(pt,{A:()=>a,e:()=>se});var w=j(576);function a(_){return(0,w.m)(_?.lift)}function se(_){return Ze=>{if(a(Ze))return Ze.lift(function(he){try{return _(he,this)}catch($e){this.error($e)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(yi,pt,j)=>{"use strict";j.d(pt,{Z:()=>_});var w=j(4004);const{isArray:a}=Array;function _(Ze){return(0,w.U)(he=>function se(Ze,he){return a(he)?Ze(...he):Ze(he)}(Ze,he))}},5032:(yi,pt,j)=>{"use strict";function w(){}j.d(pt,{Z:()=>w})},9635:(yi,pt,j)=>{"use strict";j.d(pt,{U:()=>se,z:()=>a});var w=j(4671);function a(..._){return se(_)}function se(_){return 0===_.length?w.y:1===_.length?_[0]:function(he){return _.reduce(($e,Ae)=>Ae($e),he)}}},7849:(yi,pt,j)=>{"use strict";j.d(pt,{h:()=>se});var w=j(2416),a=j(3410);function se(_){a.z.setTimeout(()=>{const{onUnhandledError:Ze}=w.v;if(!Ze)throw _;Ze(_)})}},4532:(yi,pt,j)=>{"use strict";function w(a){return new TypeError(`You provided ${null!==a&&"object"==typeof a?"an invalid object":`'${a}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(pt,{z:()=>w})},655:(yi,pt,j)=>{"use strict";function ke(At,Bt,$t,Kt){return new($t||($t=Promise))(function(oi,zt){function Lt(qt){try{ft(Kt.next(qt))}catch(Je){zt(Je)}}function Xt(qt){try{ft(Kt.throw(qt))}catch(Je){zt(Je)}}function ft(qt){qt.done?oi(qt.value):function ci(oi){return oi instanceof $t?oi:new $t(function(zt){zt(oi)})}(qt.value).then(Lt,Xt)}ft((Kt=Kt.apply(At,Bt||[])).next())})}function Ct(At){return this instanceof Ct?(this.v=At,this):new Ct(At)}function Oe(At,Bt,$t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ci,Kt=$t.apply(At,Bt||[]),oi=[];return ci={},zt("next"),zt("throw"),zt("return"),ci[Symbol.asyncIterator]=function(){return this},ci;function zt(yt){Kt[yt]&&(ci[yt]=function(ei){return new Promise(function(pi,ct){oi.push([yt,ei,pi,ct])>1||Lt(yt,ei)})})}function Lt(yt,ei){try{!function Xt(yt){yt.value instanceof Ct?Promise.resolve(yt.value.v).then(ft,qt):Je(oi[0][2],yt)}(Kt[yt](ei))}catch(pi){Je(oi[0][3],pi)}}function ft(yt){Lt("next",yt)}function qt(yt){Lt("throw",yt)}function Je(yt,ei){yt(ei),oi.shift(),oi.length&&Lt(oi[0][0],oi[0][1])}}function kt(At){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $t,Bt=At[Symbol.asyncIterator];return Bt?Bt.call(At):(At=function Gt(At){var Bt="function"==typeof Symbol&&Symbol.iterator,$t=Bt&&At[Bt],Kt=0;if($t)return $t.call(At);if(At&&"number"==typeof At.length)return{next:function(){return At&&Kt>=At.length&&(At=void 0),{value:At&&At[Kt++],done:!At}}};throw new TypeError(Bt?"Object is not iterable.":"Symbol.iterator is not defined.")}(At),$t={},Kt("next"),Kt("throw"),Kt("return"),$t[Symbol.asyncIterator]=function(){return this},$t);function Kt(oi){$t[oi]=At[oi]&&function(zt){return new Promise(function(Lt,Xt){!function ci(oi,zt,Lt,Xt){Promise.resolve(Xt).then(function(ft){oi({value:ft,done:Lt})},zt)}(Lt,Xt,(zt=At[oi](zt)).done,zt.value)})}}}j.d(pt,{FC:()=>Oe,KL:()=>kt,mG:()=>ke,qq:()=>Ct})},1943:function(yi){yi.exports=function(){"use strict";var pt,j,w;function a(_,Ze){if(pt)if(j){var he="var sharedChunk = {}; ("+pt+")(sharedChunk); ("+j+")(sharedChunk);",$e={};pt($e),w=Ze($e),typeof window<"u"&&(w.workerUrl=window.URL.createObjectURL(new Blob([he],{type:"text/javascript"})))}else j=Ze;else pt=Ze}return a(0,function(_){function Ze(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var he=$e;function $e(o,t){this.x=o,this.y=t}$e.prototype={clone:function(){return new $e(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,t){return this.clone()._rotateAround(o,t)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var t=o.x-this.x,l=o.y-this.y;return t*t+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,t){return Math.atan2(this.x*t-this.y*o,this.x*o+this.y*t)},_matMult:function(o){var t=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=t,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var t=Math.cos(o),l=Math.sin(o),p=l*this.x+t*this.y;return this.x=t*this.x-l*this.y,this.y=p,this},_rotateAround:function(o,t){var l=Math.cos(o),p=Math.sin(o),y=t.y+p*(this.x-t.x)+l*(this.y-t.y);return this.x=t.x+l*(this.x-t.x)-p*(this.y-t.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$e.convert=function(o){return o instanceof $e?o:Array.isArray(o)?new $e(o[0],o[1]):o};var Ae=Ze(he),Ve=je;function je(o,t,l,p){this.cx=3*o,this.bx=3*(l-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(p-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=t,this.p2x=l,this.p2y=p}je.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,t){if(void 0===t&&(t=1e-6),o<0)return 0;if(o>1)return 1;for(var l=o,p=0;p<8;p++){var y=this.sampleCurveX(l)-o;if(Math.abs(y)<t)return l;var C=this.sampleCurveDerivativeX(l);if(Math.abs(C)<1e-6)break;l-=y/C}var M=0,k=1;for(l=o,p=0;p<20&&(y=this.sampleCurveX(l),!(Math.abs(y-o)<t));p++)o>y?M=l:k=l,l=.5*(k-M)+M;return l},solve:function(o,t){return this.sampleCurveY(this.solveCurveX(o,t))}};var Xe=Ze(Ve);function ke(o,t,l,p){const y=new Xe(o,t,l,p);return function(C){return y.solve(C)}}const ot=ke(.25,.1,.25,1);function Ye(o,t,l){return Math.min(l,Math.max(t,o))}function mt(o,t,l){const p=l-t,y=((o-t)%p+p)%p+t;return y===t?l:y}function Gt(o,...t){for(const l of t)for(const p in l)o[p]=l[p];return o}let wt=1;function Yt(o,t){o.forEach(l=>{t[l]&&(t[l]=t[l].bind(t))})}function Zt(o,t,l){const p={};for(const y in o)p[y]=t.call(l||this,o[y],y,o);return p}function Wt(o,t,l){const p={};for(const y in o)t.call(l||this,o[y],y,o)&&(p[y]=o[y]);return p}function Ct(o){return Array.isArray(o)?o.map(Ct):"object"==typeof o&&o?Zt(o,Ct):o}const Oe={};function tt(o){Oe[o]||(typeof console<"u"&&console.warn(o),Oe[o]=!0)}function kt(o,t,l){return(l.y-o.y)*(t.x-o.x)>(t.y-o.y)*(l.x-o.x)}function Ot(o){let t=0;for(let l,p,y=0,C=o.length,M=C-1;y<C;M=y++)l=o[y],p=o[M],t+=(p.x-l.x)*(l.y+p.y);return t}function Vt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ai=null;function gi(o){if(null==ai){const t=o.navigator?o.navigator.userAgent:null;ai=!!o.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return ai}function hi(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const zi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let xi,At;const Bt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const t=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(o,t=0){return this.getImageCanvasContext(o).getImageData(-t,-t,o.width+2*t,o.height+2*t)},getImageCanvasContext(o){const t=window.document.createElement("canvas"),l=t.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return t.width=o.width,t.height=o.height,l.drawImage(o,0,0,o.width,o.height),l},resolveURL:o=>(xi||(xi=document.createElement("a")),xi.href=o,xi.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==At&&(At=matchMedia("(prefers-reduced-motion: reduce)")),At.matches)}},$t={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Kt extends Error{constructor(t,l,p,y){super(`AJAXError: ${l} (${t}): ${p}`),this.status=t,this.statusText=l,this.url=p,this.body=y}}const ci=Vt()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,oi=o=>$t.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function zt(o,t){const l=new AbortController,p=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:ci(),signal:l.signal});let y=!1,C=!1;return"json"===o.type&&p.headers.set("Accept","application/json"),C||fetch(p).then(M=>{return M.ok?(k=M,void("arrayBuffer"===o.type||"image"===o.type?k.arrayBuffer():"json"===o.type?k.json():k.text()).then(R=>{C||(y=!0,t(null,R,k.headers.get("Cache-Control"),k.headers.get("Expires")))}).catch(R=>{C||t(new Error(R.message))})):M.blob().then(k=>t(new Kt(M.status,M.statusText,o.url,k)));var k}).catch(M=>{20!==M.code&&t(new Error(M.message))}),{cancel:()=>{C=!0,y||l.abort()}}}const Lt=function(o,t){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Vt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,t);if(!Vt())return(oi(o.url)||zt)(o,t)}if(!(/^file:/.test(l=o.url)||/^file:/.test(ci())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return zt(o,t);if(Vt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,t,void 0,!0)}var l;return function(p,y){const C=new XMLHttpRequest;C.open(p.method||"GET",p.url,!0),"arrayBuffer"!==p.type&&"image"!==p.type||(C.responseType="arraybuffer");for(const M in p.headers)C.setRequestHeader(M,p.headers[M]);return"json"===p.type&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials="include"===p.credentials,C.onerror=()=>{y(new Error(C.statusText))},C.onload=()=>{if((C.status>=200&&C.status<300||0===C.status)&&null!==C.response){let M=C.response;if("json"===p.type)try{M=JSON.parse(C.response)}catch(k){return y(k)}y(null,M,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else{const M=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});y(new Kt(C.status,C.statusText,p.url,M))}},C.send(p.body),{cancel:()=>C.abort()}}(o,t)},Xt=function(o,t){return Lt(Gt(o,{type:"arrayBuffer"}),t)};function ft(o){if(!o||o.indexOf("://")<=0||0===o.indexOf("data:image/")||0===o.indexOf("blob:"))return!0;const t=new URL(o),l=window.location;return t.protocol===l.protocol&&t.host===l.host}function qt(o,t,l){l[o]&&-1!==l[o].indexOf(t)||(l[o]=l[o]||[],l[o].push(t))}function Je(o,t,l){if(l&&l[o]){const p=l[o].indexOf(t);-1!==p&&l[o].splice(p,1)}}class yt{constructor(t,l={}){Gt(this,l),this.type=t}}class ei extends yt{constructor(t,l={}){super("error",Gt({error:t},l))}}class pi{on(t,l){return this._listeners=this._listeners||{},qt(t,l,this._listeners),this}off(t,l){return Je(t,l,this._listeners),Je(t,l,this._oneTimeListeners),this}once(t,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},qt(t,l,this._oneTimeListeners),this):new Promise(p=>this.once(t,p))}fire(t,l){"string"==typeof t&&(t=new yt(t,l||{}));const p=t.type;if(this.listens(p)){t.target=this;const y=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const k of y)k.call(this,t);const C=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const k of C)Je(p,k,this._oneTimeListeners),k.call(this,t);const M=this._eventedParent;M&&(Gt(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),M.fire(t))}else t instanceof ei&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,l){return this._eventedParent=t,this._eventedParentData=l,this}}var ct={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ti=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function fi(o,t){const l={};for(const p in o)"ref"!==p&&(l[p]=o[p]);return Ti.forEach(p=>{p in t&&(l[p]=t[p])}),l}function bi(o,t){if(Array.isArray(o)){if(!Array.isArray(t)||o.length!==t.length)return!1;for(let l=0;l<o.length;l++)if(!bi(o[l],t[l]))return!1;return!0}if("object"==typeof o&&null!==o&&null!==t){if("object"!=typeof t||Object.keys(o).length!==Object.keys(t).length)return!1;for(const l in o)if(!bi(o[l],t[l]))return!1;return!0}return o===t}const rt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Dt(o,t,l){l.push({command:rt.addSource,args:[o,t[o]]})}function _i(o,t,l){t.push({command:rt.removeSource,args:[o]}),l[o]=!0}function Ui(o,t,l,p){_i(o,l,p),Dt(o,t,l)}function wi(o,t,l){let p;for(p in o[l])if(Object.prototype.hasOwnProperty.call(o[l],p)&&"data"!==p&&!bi(o[l][p],t[l][p]))return!1;for(p in t[l])if(Object.prototype.hasOwnProperty.call(t[l],p)&&"data"!==p&&!bi(o[l][p],t[l][p]))return!1;return!0}function nn(o,t,l,p,y,C){let M;for(M in t=t||{},o=o||{})Object.prototype.hasOwnProperty.call(o,M)&&(bi(o[M],t[M])||l.push({command:C,args:[p,M,t[M],y]}));for(M in t)Object.prototype.hasOwnProperty.call(t,M)&&!Object.prototype.hasOwnProperty.call(o,M)&&(bi(o[M],t[M])||l.push({command:C,args:[p,M,t[M],y]}))}function Pt(o){return o.id}function Ce(o,t){return o[t.id]=t,o}class Ee{constructor(t,l,p,y){this.message=(t?`${t}: `:"")+p,y&&(this.identifier=y),null!=l&&l.__line__&&(this.line=l.__line__)}}function st(o,...t){for(const l of t)for(const p in l)o[p]=l[p];return o}class xt extends Error{constructor(t,l){super(l),this.message=l,this.key=t}}class Nt{constructor(t,l=[]){this.parent=t,this.bindings={};for(const[p,y]of l)this.bindings[p]=y}concat(t){return new Nt(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const nt={kind:"null"},De={kind:"number"},be={kind:"string"},_e={kind:"boolean"},Qe={kind:"color"},ze={kind:"object"},et={kind:"value"},Ei={kind:"collator"},li={kind:"formatted"},qi={kind:"padding"},Li={kind:"resolvedImage"};function pn(o,t){return{kind:"array",itemType:o,N:t}}function Se(o){if("array"===o.kind){const t=Se(o.itemType);return"number"==typeof o.N?`array<${t}, ${o.N}>`:"value"===o.itemType.kind?"array":`array<${t}>`}return o.kind}const re=[nt,De,be,_e,Qe,li,ze,pn(et),qi,Li];function me(o,t){if("error"===t.kind)return null;if("array"===o.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!me(o.itemType,t.itemType))&&("number"!=typeof o.N||o.N===t.N))return null}else{if(o.kind===t.kind)return null;if("value"===o.kind)for(const l of re)if(!me(l,t))return null}return`Expected ${Se(o)} but found ${Se(t)} instead.`}function K(o,t){return t.some(l=>l.kind===o.kind)}function V(o,t){return t.some(l=>"null"===l?null===o:"array"===l?Array.isArray(o):"object"===l?o&&!Array.isArray(o)&&"object"==typeof o:l===typeof o)}function U(o,t){return"array"===o.kind&&"array"===t.kind?o.itemType.kind===t.itemType.kind&&"number"==typeof o.N:o.kind===t.kind}const ce=.96422,fe=.82521,Ie=4/29,We=6/29,St=3*We*We,vt=Math.PI/180,Tt=180/Math.PI;function ni(o){return(o%=360)<0&&(o+=360),o}function it([o,t,l,p]){let y,C;const M=Y((.2225045*(o=ae(o))+.7168786*(t=ae(t))+.0606169*(l=ae(l)))/1);o===t&&t===l?y=C=M:(y=Y((.4360747*o+.3850649*t+.1430804*l)/ce),C=Y((.0139322*o+.0971045*t+.7141733*l)/fe));const k=116*M-16;return[k<0?0:k,500*(y-M),200*(M-C),p]}function ae(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Y(o){return o>.008856451679035631?Math.pow(o,1/3):o/St+Ie}function Q([o,t,l,p]){let y=(o+16)/116,C=isNaN(t)?y:y+t/500,M=isNaN(l)?y:y-l/200;return y=1*Re(y),C=ce*Re(C),M=fe*Re(M),[xe(3.1338561*C-1.6168667*y-.4906146*M),xe(-.9787684*C+1.9161415*y+.033454*M),xe(.0719453*C-.2289914*y+1.4052427*M),p]}function xe(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Re(o){return o>We?o*o*o:St*(o-Ie)}function ht(o){return parseInt(o.padEnd(2,o),16)/255}function Jt(o,t){return Fi(t?o/100:o,0,1)}function Fi(o,t,l){return Math.min(Math.max(t,o),l)}function an(o){return!o.some(Number.isNaN)}const un={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class _n{constructor(t,l,p,y=1,C=!0){this.r=t,this.g=l,this.b=p,this.a=y,C||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[t,l,p,y]))}static parse(t){if(t instanceof _n)return t;if("string"!=typeof t)return;const l=function(p){if("transparent"===(p=p.toLowerCase()))return[0,0,0,0];const y=un[p];if(y){const[k,R,W]=y;return[k/255,R/255,W/255,1]}if(/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const k=p.length<6?1:2;let R=1;return[ht(p.slice(R,R+=k)),ht(p.slice(R,R+=k)),ht(p.slice(R,R+=k)),ht(p.slice(R,R+k)||"ff")]}const C=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[k,R,W,ee,oe,pe,ge,we,Ue,Le,dt,gt]=C,lt=[ee||" ",ge||" ",Le].join("");if("  "===lt||"  /"===lt||",,"===lt||",,,"===lt){const Mt=[W,pe,Ue].join(""),It="%%%"===Mt?100:""===Mt?255:0;if(It){const ti=[Fi(+R/It,0,1),Fi(+oe/It,0,1),Fi(+we/It,0,1),dt?Jt(+dt,gt):1];if(an(ti))return ti}}return}const M=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[k,R,W,ee,oe,pe,ge,we,Ue]=M,Le=[W||" ",oe||" ",ge].join("");if("  "===Le||"  /"===Le||",,"===Le||",,,"===Le){const dt=[+R,Fi(+ee,0,100),Fi(+pe,0,100),we?Jt(+we,Ue):1];if(an(dt))return function([gt,lt,Mt,It]){function ti(Bi){const $i=(Bi+gt/30)%12,Pi=lt*Math.min(Mt,1-Mt);return Mt-Pi*Math.max(-1,Math.min($i-3,9-$i,1))}return gt=ni(gt),lt/=100,Mt/=100,[ti(0),ti(8),ti(4),It]}(dt)}}}(t);return l?new _n(...l,!1):void 0}get rgb(){const{r:t,g:l,b:p,a:y}=this,C=y||1/0;return this.overwriteGetter("rgb",[t/C,l/C,p/C,y])}get hcl(){return this.overwriteGetter("hcl",function(t){const[l,p,y,C]=it(t),M=Math.sqrt(p*p+y*y);return[Math.round(1e4*M)?ni(Math.atan2(y,p)*Tt):NaN,M,l,C]}(this.rgb))}get lab(){return this.overwriteGetter("lab",it(this.rgb))}overwriteGetter(t,l){return Object.defineProperty(this,t,{value:l}),l}toString(){const[t,l,p,y]=this.rgb;return`rgba(${[t,l,p].map(C=>Math.round(255*C)).join(",")},${y})`}}_n.black=new _n(0,0,0,1),_n.white=new _n(1,1,1,1),_n.transparent=new _n(0,0,0,0),_n.red=new _n(1,0,0,1);class cs{constructor(t,l,p){this.sensitivity=t?l?"variant":"case":l?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,l){return this.collator.compare(t,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ro{constructor(t,l,p,y,C){this.text=t,this.image=l,this.scale=p,this.fontStack=y,this.textColor=C}}class wn{constructor(t){this.sections=t}static fromString(t){return new wn([new Ro(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof wn?t:wn.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}}class Mr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Mr)return t;if("number"==typeof t)return new Mr([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const l of t)if("number"!=typeof l)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Mr(t)}}toString(){return JSON.stringify(this.values)}}class Qi{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Qi({name:t,available:!1}):null}}function pr(o,t,l,p){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof l&&l>=0&&l<=255?void 0===p||"number"==typeof p&&p>=0&&p<=1?null:`Invalid rgba value [${[o,t,l,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof p?[o,t,l,p]:[o,t,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function er(o){if(null===o||"string"==typeof o||"boolean"==typeof o||"number"==typeof o||o instanceof _n||o instanceof cs||o instanceof wn||o instanceof Mr||o instanceof Qi)return!0;if(Array.isArray(o)){for(const t of o)if(!er(t))return!1;return!0}if("object"==typeof o){for(const t in o)if(!er(o[t]))return!1;return!0}return!1}function Cn(o){if(null===o)return nt;if("string"==typeof o)return be;if("boolean"==typeof o)return _e;if("number"==typeof o)return De;if(o instanceof _n)return Qe;if(o instanceof cs)return Ei;if(o instanceof wn)return li;if(o instanceof Mr)return qi;if(o instanceof Qi)return Li;if(Array.isArray(o)){const t=o.length;let l;for(const p of o){const y=Cn(p);if(l){if(l===y)continue;l=et;break}l=y}return pn(l||et,t)}return ze}function Or(o){const t=typeof o;return null===o?"":"string"===t||"number"===t||"boolean"===t?String(o):o instanceof _n||o instanceof wn||o instanceof Mr||o instanceof Qi?o.toString():JSON.stringify(o)}class ds{constructor(t,l){this.type=t,this.value=l}static parse(t,l){if(2!==t.length)return l.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!er(t[1]))return l.error("invalid value");const p=t[1];let y=Cn(p);const C=l.expectedType;return"array"!==y.kind||0!==y.N||!C||"array"!==C.kind||"number"==typeof C.N&&0!==C.N||(y=C),new ds(y,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class yr{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Xr={string:be,number:De,boolean:_e,object:ze};class Rn{constructor(t,l){this.type=t,this.args=l}static parse(t,l){if(t.length<2)return l.error("Expected at least one argument.");let p,y=1;const C=t[0];if("array"===C){let k,R;if(t.length>2){const W=t[1];if("string"!=typeof W||!(W in Xr)||"object"===W)return l.error('The item type argument of "array" must be one of string, number, boolean',1);k=Xr[W],y++}else k=et;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return l.error('The length argument to "array" must be a positive integer literal',2);R=t[2],y++}p=pn(k,R)}else{if(!Xr[C])throw new Error(`Types doesn't contain name = ${C}`);p=Xr[C]}const M=[];for(;y<t.length;y++){const k=l.parse(t[y],y,et);if(!k)return null;M.push(k)}return new Rn(p,M)}evaluate(t){for(let l=0;l<this.args.length;l++){const p=this.args[l].evaluate(t);if(!me(this.type,Cn(p)))return p;if(l===this.args.length-1)throw new yr(`Expected value to be of type ${Se(this.type)}, but found ${Se(Cn(p))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Ri={"to-boolean":_e,"to-color":Qe,"to-number":De,"to-string":be};class Ji{constructor(t,l){this.type=t,this.args=l}static parse(t,l){if(t.length<2)return l.error("Expected at least one argument.");const p=t[0];if(!Ri[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if(("to-boolean"===p||"to-string"===p)&&2!==t.length)return l.error("Expected one argument.");const y=Ri[p],C=[];for(let M=1;M<t.length;M++){const k=l.parse(t[M],M,et);if(!k)return null;C.push(k)}return new Ji(y,C)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let l,p;for(const y of this.args){if(l=y.evaluate(t),p=null,l instanceof _n)return l;if("string"==typeof l){const C=t.parseColor(l);if(C)return C}else if(Array.isArray(l)&&(p=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:pr(l[0],l[1],l[2],l[3]),!p))return new _n(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new yr(p||`Could not parse color from value '${"string"==typeof l?l:JSON.stringify(l)}'`)}if("padding"===this.type.kind){let l;for(const p of this.args){l=p.evaluate(t);const y=Mr.parse(l);if(y)return y}throw new yr(`Could not parse padding from value '${"string"==typeof l?l:JSON.stringify(l)}'`)}if("number"===this.type.kind){let l=null;for(const p of this.args){if(l=p.evaluate(t),null===l)return 0;const y=Number(l);if(!isNaN(y))return y}throw new yr(`Could not convert ${JSON.stringify(l)} to number.`)}return"formatted"===this.type.kind?wn.fromString(Or(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Qi.fromString(Or(this.args[0].evaluate(t))):Or(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const tr=["Unknown","Point","LineString","Polygon"];class $n{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?tr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let l=this._parseColorCache[t];return l||(l=this._parseColorCache[t]=_n.parse(t)),l}}class vr{constructor(t,l,p=[],y,C=new Nt,M=[]){this.registry=t,this.path=p,this.key=p.map(k=>`[${k}]`).join(""),this.scope=C,this.errors=M,this.expectedType=y,this._isConstant=l}parse(t,l,p,y,C={}){return l?this.concat(l,p,y)._parse(t,C):this._parse(t,C)}_parse(t,l){function p(y,C,M){return"assert"===M?new Rn(C,[y]):"coerce"===M?new Ji(C,[y]):y}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=t[0];if("string"!=typeof y)return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[y];if(C){let M=C.parse(t,this);if(!M)return null;if(this.expectedType){const k=this.expectedType,R=M.type;if("string"!==k.kind&&"number"!==k.kind&&"boolean"!==k.kind&&"object"!==k.kind&&"array"!==k.kind||"value"!==R.kind)if("color"!==k.kind&&"formatted"!==k.kind&&"resolvedImage"!==k.kind||"value"!==R.kind&&"string"!==R.kind)if("padding"!==k.kind||"value"!==R.kind&&"number"!==R.kind&&"array"!==R.kind){if(this.checkSubtype(k,R))return null}else M=p(M,k,l.typeAnnotation||"coerce");else M=p(M,k,l.typeAnnotation||"coerce");else M=p(M,k,l.typeAnnotation||"assert")}if(!(M instanceof ds)&&"resolvedImage"!==M.type.kind&&this._isConstant(M)){const k=new $n;try{M=new ds(M.type,M.evaluate(k))}catch(R){return this.error(R.message),null}}return M}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,l,p){const y="number"==typeof t?this.path.concat(t):this.path,C=p?this.scope.concat(p):this.scope;return new vr(this.registry,this._isConstant,y,l||null,C,this.errors)}error(t,...l){const p=`${this.key}${l.map(y=>`[${y}]`).join("")}`;this.errors.push(new xt(p,t))}checkSubtype(t,l){const p=me(t,l);return p&&this.error(p),p}}class Fn{constructor(t,l,p){this.type=Ei,this.locale=p,this.caseSensitive=t,this.diacriticSensitive=l}static parse(t,l){if(2!==t.length)return l.error("Expected one argument.");const p=t[1];if("object"!=typeof p||Array.isArray(p))return l.error("Collator options argument must be an object.");const y=l.parse(void 0!==p["case-sensitive"]&&p["case-sensitive"],1,_e);if(!y)return null;const C=l.parse(void 0!==p["diacritic-sensitive"]&&p["diacritic-sensitive"],1,_e);if(!C)return null;let M=null;return p.locale&&(M=l.parse(p.locale,1,be),!M)?null:new Fn(y,C,M)}evaluate(t){return new cs(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const zn=8192;function ji(o,t){o[0]=Math.min(o[0],t[0]),o[1]=Math.min(o[1],t[1]),o[2]=Math.max(o[2],t[0]),o[3]=Math.max(o[3],t[1])}function Rr(o,t){return!(o[0]<=t[0]||o[2]>=t[2]||o[1]<=t[1]||o[3]>=t[3])}function Eo(o,t){const l=(180+o[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,y=Math.pow(2,t.z);return[Math.round(l*y*zn),Math.round(p*y*zn)]}function sn(o,t,l){const p=o[0]-t[0],y=o[1]-t[1],C=o[0]-l[0],M=o[1]-l[1];return p*M-C*y==0&&p*C<=0&&y*M<=0}function Fo(o,t){let l=!1;for(let M=0,k=t.length;M<k;M++){const R=t[M];for(let W=0,ee=R.length;W<ee-1;W++){if(sn(o,R[W],R[W+1]))return!1;(y=R[W])[1]>(p=o)[1]!=(C=R[W+1])[1]>p[1]&&p[0]<(C[0]-y[0])*(p[1]-y[1])/(C[1]-y[1])+y[0]&&(l=!l)}}var p,y,C;return l}function ws(o,t){for(let l=0;l<t.length;l++)if(Fo(o,t[l]))return!0;return!1}function sa(o,t,l,p){const y=p[0]-l[0],C=p[1]-l[1],M=(o[0]-l[0])*C-y*(o[1]-l[1]),k=(t[0]-l[0])*C-y*(t[1]-l[1]);return M>0&&k<0||M<0&&k>0}function Cs(o,t,l){for(const W of l)for(let ee=0;ee<W.length-1;++ee)if((k=[(M=W[ee+1])[0]-(C=W[ee])[0],M[1]-C[1]])[0]*(R=[(y=t)[0]-(p=o)[0],y[1]-p[1]])[1]-k[1]*R[0]!=0&&sa(p,y,C,M)&&sa(C,M,p,y))return!0;var p,y,C,M,k,R;return!1}function or(o,t){for(let l=0;l<o.length;++l)if(!Fo(o[l],t))return!1;for(let l=0;l<o.length-1;++l)if(Cs(o[l],o[l+1],t))return!1;return!0}function js(o,t){for(let l=0;l<t.length;l++)if(or(o,t[l]))return!0;return!1}function po(o,t,l){const p=[];for(let y=0;y<o.length;y++){const C=[];for(let M=0;M<o[y].length;M++){const k=Eo(o[y][M],l);ji(t,k),C.push(k)}p.push(C)}return p}function Jr(o,t,l){const p=[];for(let y=0;y<o.length;y++){const C=po(o[y],t,l);p.push(C)}return p}function us(o,t,l,p){if(o[0]<l[0]||o[0]>l[2]){const y=.5*p;let C=o[0]-l[0]>y?-p:l[0]-o[0]>y?p:0;0===C&&(C=o[0]-l[2]>y?-p:l[2]-o[0]>y?p:0),o[0]+=C}ji(t,o)}function Es(o,t,l,p){const y=Math.pow(2,p.z)*zn,C=[p.x*zn,p.y*zn],M=[];for(const k of o)for(const R of k){const W=[R.x+C[0],R.y+C[1]];us(W,t,l,y),M.push(W)}return M}function Wn(o,t,l,p){const y=Math.pow(2,p.z)*zn,C=[p.x*zn,p.y*zn],M=[];for(const R of o){const W=[];for(const ee of R){const oe=[ee.x+C[0],ee.y+C[1]];ji(t,oe),W.push(oe)}M.push(W)}if(t[2]-t[0]<=y/2){(k=t)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const R of M)for(const W of R)us(W,t,l,y)}var k;return M}class Gr{constructor(t,l){this.type=_e,this.geojson=t,this.geometries=l}static parse(t,l){if(2!==t.length)return l.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(er(t[1])){const p=t[1];if("FeatureCollection"===p.type)for(let y=0;y<p.features.length;++y){const C=p.features[y].geometry.type;if("Polygon"===C||"MultiPolygon"===C)return new Gr(p,p.features[y].geometry)}else if("Feature"===p.type){const y=p.geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new Gr(p,p.geometry)}else if("Polygon"===p.type||"MultiPolygon"===p.type)return new Gr(p,p)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(l,p){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],M=l.canonicalID();if("Polygon"===p.type){const k=po(p.coordinates,C,M),R=Es(l.geometry(),y,C,M);if(!Rr(y,C))return!1;for(const W of R)if(!Fo(W,k))return!1}if("MultiPolygon"===p.type){const k=Jr(p.coordinates,C,M),R=Es(l.geometry(),y,C,M);if(!Rr(y,C))return!1;for(const W of R)if(!ws(W,k))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(l,p){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],M=l.canonicalID();if("Polygon"===p.type){const k=po(p.coordinates,C,M),R=Wn(l.geometry(),y,C,M);if(!Rr(y,C))return!1;for(const W of R)if(!or(W,k))return!1}if("MultiPolygon"===p.type){const k=Jr(p.coordinates,C,M),R=Wn(l.geometry(),y,C,M);if(!Rr(y,C))return!1;for(const W of R)if(!js(W,k))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class hs{constructor(t,l){this.type=l.type,this.name=t,this.boundExpression=l}static parse(t,l){if(2!==t.length||"string"!=typeof t[1])return l.error("'var' expression requires exactly one string literal argument.");const p=t[1];return l.scope.has(p)?new hs(p,l.scope.get(p)):l.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class zr{constructor(t,l,p,y){this.name=t,this.type=l,this._evaluate=p,this.args=y}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,l){const p=t[0],y=zr.definitions[p];if(!y)return l.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(y)?y[0]:y.type,M=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,k=M.filter(([W])=>!Array.isArray(W)||W.length===t.length-1);let R=null;for(const[W,ee]of k){R=new vr(l.registry,Hs,l.path,null,l.scope);const oe=[];let pe=!1;for(let ge=1;ge<t.length;ge++){const we=t[ge],Ue=Array.isArray(W)?W[ge-1]:W.type,Le=R.parse(we,1+oe.length,Ue);if(!Le){pe=!0;break}oe.push(Le)}if(!pe)if(Array.isArray(W)&&W.length!==oe.length)R.error(`Expected ${W.length} arguments, but found ${oe.length} instead.`);else{for(let ge=0;ge<oe.length;ge++){const we=Array.isArray(W)?W[ge]:W.type,Ue=oe[ge];R.concat(ge+1).checkSubtype(we,Ue.type)}if(0===R.errors.length)return new zr(p,C,ee,oe)}}if(1===k.length)l.errors.push(...R.errors);else{const W=(k.length?k:M).map(([oe])=>{return pe=oe,Array.isArray(pe)?`(${pe.map(Se).join(", ")})`:`(${Se(pe.type)}...)`;var pe}).join(" | "),ee=[];for(let oe=1;oe<t.length;oe++){const pe=l.parse(t[oe],1+ee.length);if(!pe)return null;ee.push(Se(pe.type))}l.error(`Expected arguments of type ${W}, but found (${ee.join(", ")}) instead.`)}return null}static register(t,l){zr.definitions=l;for(const p in l)t[p]=zr}}function Hs(o){if(o instanceof hs)return Hs(o.boundExpression);if(o instanceof zr&&"error"===o.name||o instanceof Fn||o instanceof Gr)return!1;const t=o instanceof Ji||o instanceof Rn;let l=!0;return o.eachChild(p=>{l=t?l&&Hs(p):l&&p instanceof ds}),!!l&&Mo(o)&&dr(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Mo(o){if(o instanceof zr&&("get"===o.name&&1===o.args.length||"feature-state"===o.name||"has"===o.name&&1===o.args.length||"properties"===o.name||"geometry-type"===o.name||"id"===o.name||/^filter-/.test(o.name))||o instanceof Gr)return!1;let t=!0;return o.eachChild(l=>{t&&!Mo(l)&&(t=!1)}),t}function ao(o){if(o instanceof zr&&"feature-state"===o.name)return!1;let t=!0;return o.eachChild(l=>{t&&!ao(l)&&(t=!1)}),t}function dr(o,t){if(o instanceof zr&&t.indexOf(o.name)>=0)return!1;let l=!0;return o.eachChild(p=>{l&&!dr(p,t)&&(l=!1)}),l}function aa(o,t){const l=o.length-1;let p,y,C=0,M=l,k=0;for(;C<=M;)if(k=Math.floor((C+M)/2),p=o[k],y=o[k+1],p<=t){if(k===l||t<y)return k;C=k+1}else{if(!(p>t))throw new yr("Input is not a number.");M=k-1}return 0}class fr{constructor(t,l,p){this.type=t,this.input=l,this.labels=[],this.outputs=[];for(const[y,C]of p)this.labels.push(y),this.outputs.push(C)}static parse(t,l){if(t.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return l.error("Expected an even number of arguments.");const p=l.parse(t[1],1,De);if(!p)return null;const y=[];let C=null;l.expectedType&&"value"!==l.expectedType.kind&&(C=l.expectedType);for(let M=1;M<t.length;M+=2){const k=1===M?-1/0:t[M],R=t[M+1],W=M,ee=M+1;if("number"!=typeof k)return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(y.length&&y[y.length-1][0]>=k)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const oe=l.parse(R,ee,C);if(!oe)return null;C=C||oe.type,y.push([k,oe])}return new fr(C,p,y)}evaluate(t){const l=this.labels,p=this.outputs;if(1===l.length)return p[0].evaluate(t);const y=this.input.evaluate(t);if(y<=l[0])return p[0].evaluate(t);const C=l.length;return y>=l[C-1]?p[C-1].evaluate(t):p[aa(l,y)].evaluate(t)}eachChild(t){t(this.input);for(const l of this.outputs)t(l)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Fr(o,t,l){return o+l*(t-o)}function Qr(o,t,l){return o.map((p,y)=>Fr(p,t[y],l))}const Yn={number:Fr,color:function(o,t,l,p="rgb"){switch(p){case"rgb":{const[y,C,M,k]=Qr(o.rgb,t.rgb,l);return new _n(y,C,M,k,!1)}case"hcl":{const[y,C,M,k]=o.hcl,[R,W,ee,oe]=t.hcl;let pe,ge;if(isNaN(y)||isNaN(R))isNaN(y)?isNaN(R)?pe=NaN:(pe=R,1!==M&&0!==M||(ge=W)):(pe=y,1!==ee&&0!==ee||(ge=C));else{let gt=R-y;R>y&&gt>180?gt-=360:R<y&&y-R>180&&(gt+=360),pe=y+l*gt}const[we,Ue,Le,dt]=function([gt,lt,Mt,It]){return gt=isNaN(gt)?0:gt*vt,Q([Mt,Math.cos(gt)*lt,Math.sin(gt)*lt,It])}([pe,ge??Fr(C,W,l),Fr(M,ee,l),Fr(k,oe,l)]);return new _n(we,Ue,Le,dt,!1)}case"lab":{const[y,C,M,k]=Q(Qr(o.lab,t.lab,l));return new _n(y,C,M,k,!1)}}},array:Qr,padding:function(o,t,l){return new Mr(Qr(o.values,t.values,l))}};class Zr{constructor(t,l,p,y,C){this.type=t,this.operator=l,this.interpolation=p,this.input=y,this.labels=[],this.outputs=[];for(const[M,k]of C)this.labels.push(M),this.outputs.push(k)}static interpolationFactor(t,l,p,y){let C=0;if("exponential"===t.name)C=Br(l,t.base,p,y);else if("linear"===t.name)C=Br(l,1,p,y);else if("cubic-bezier"===t.name){const M=t.controlPoints;C=new Xe(M[0],M[1],M[2],M[3]).solve(Br(l,1,p,y))}return C}static parse(t,l){let[p,y,C,...M]=t;if(!Array.isArray(y)||0===y.length)return l.error("Expected an interpolation type expression.",1);if("linear"===y[0])y={name:"linear"};else if("exponential"===y[0]){const W=y[1];if("number"!=typeof W)return l.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:W}}else{if("cubic-bezier"!==y[0])return l.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const W=y.slice(1);if(4!==W.length||W.some(ee=>"number"!=typeof ee||ee<0||ee>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:W}}}if(t.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(C=l.parse(C,2,De),!C)return null;const k=[];let R=null;"interpolate-hcl"===p||"interpolate-lab"===p?R=Qe:l.expectedType&&"value"!==l.expectedType.kind&&(R=l.expectedType);for(let W=0;W<M.length;W+=2){const ee=M[W],oe=M[W+1],pe=W+3,ge=W+4;if("number"!=typeof ee)return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',pe);if(k.length&&k[k.length-1][0]>=ee)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',pe);const we=l.parse(oe,ge,R);if(!we)return null;R=R||we.type,k.push([ee,we])}return U(R,De)||U(R,Qe)||U(R,qi)||U(R,pn(De))?new Zr(R,p,y,C,k):l.error(`Type ${Se(R)} is not interpolatable.`)}evaluate(t){const l=this.labels,p=this.outputs;if(1===l.length)return p[0].evaluate(t);const y=this.input.evaluate(t);if(y<=l[0])return p[0].evaluate(t);const C=l.length;if(y>=l[C-1])return p[C-1].evaluate(t);const M=aa(l,y),k=Zr.interpolationFactor(this.interpolation,y,l[M],l[M+1]),R=p[M].evaluate(t),W=p[M+1].evaluate(t);switch(this.operator){case"interpolate":return Yn[this.type.kind](R,W,k);case"interpolate-hcl":return Yn.color(R,W,k,"hcl");case"interpolate-lab":return Yn.color(R,W,k,"lab")}}eachChild(t){t(this.input);for(const l of this.outputs)t(l)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Br(o,t,l,p){const y=p-l,C=o-l;return 0===y?0:1===t?C/y:(Math.pow(t,C)-1)/(Math.pow(t,y)-1)}class xa{constructor(t,l){this.type=t,this.args=l}static parse(t,l){if(t.length<2)return l.error("Expectected at least one argument.");let p=null;const y=l.expectedType;y&&"value"!==y.kind&&(p=y);const C=[];for(const k of t.slice(1)){const R=l.parse(k,1+C.length,p,void 0,{typeAnnotation:"omit"});if(!R)return null;p=p||R.type,C.push(R)}if(!p)throw new Error("No output type");const M=y&&C.some(k=>me(y,k.type));return new xa(M?et:p,C)}evaluate(t){let l,p=null,y=0;for(const C of this.args)if(y++,p=C.evaluate(t),p&&p instanceof Qi&&!p.available&&(l||(l=p.name),p=null,y===this.args.length&&(p=l)),null!==p)break;return p}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}class fo{constructor(t,l){this.type=l.type,this.bindings=[].concat(t),this.result=l}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const l of this.bindings)t(l[1]);t(this.result)}static parse(t,l){if(t.length<4)return l.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const p=[];for(let C=1;C<t.length-1;C+=2){const M=t[C];if("string"!=typeof M)return l.error(`Expected string, but found ${typeof M} instead.`,C);if(/[^a-zA-Z0-9_]/.test(M))return l.error("Variable names must contain only alphanumeric characters or '_'.",C);const k=l.parse(t[C+1],C+1);if(!k)return null;p.push([M,k])}const y=l.parse(t[t.length-1],t.length-1,l.expectedType,p);return y?new fo(p,y):null}outputDefined(){return this.result.outputDefined()}}class $s{constructor(t,l,p){this.type=t,this.index=l,this.input=p}static parse(t,l){if(3!==t.length)return l.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const p=l.parse(t[1],1,De),y=l.parse(t[2],2,pn(l.expectedType||et));return p&&y?new $s(y.type.itemType,p,y):null}evaluate(t){const l=this.index.evaluate(t),p=this.input.evaluate(t);if(l<0)throw new yr(`Array index out of bounds: ${l} < 0.`);if(l>=p.length)throw new yr(`Array index out of bounds: ${l} > ${p.length-1}.`);if(l!==Math.floor(l))throw new yr(`Array index must be an integer, but found ${l} instead.`);return p[l]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Gs{constructor(t,l){this.type=_e,this.needle=t,this.haystack=l}static parse(t,l){if(3!==t.length)return l.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const p=l.parse(t[1],1,et),y=l.parse(t[2],2,et);return p&&y?K(p.type,[_e,be,De,nt,et])?new Gs(p,y):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Se(p.type)} instead`):null}evaluate(t){const l=this.needle.evaluate(t),p=this.haystack.evaluate(t);if(!p)return!1;if(!V(l,["boolean","string","number","null"]))throw new yr(`Expected first argument to be of type boolean, string, number or null, but found ${Se(Cn(l))} instead.`);if(!V(p,["string","array"]))throw new yr(`Expected second argument to be of type array or string, but found ${Se(Cn(p))} instead.`);return p.indexOf(l)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Zs{constructor(t,l,p){this.type=De,this.needle=t,this.haystack=l,this.fromIndex=p}static parse(t,l){if(t.length<=2||t.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const p=l.parse(t[1],1,et),y=l.parse(t[2],2,et);if(!p||!y)return null;if(!K(p.type,[_e,be,De,nt,et]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Se(p.type)} instead`);if(4===t.length){const C=l.parse(t[3],3,De);return C?new Zs(p,y,C):null}return new Zs(p,y)}evaluate(t){const l=this.needle.evaluate(t),p=this.haystack.evaluate(t);if(!V(l,["boolean","string","number","null"]))throw new yr(`Expected first argument to be of type boolean, string, number or null, but found ${Se(Cn(l))} instead.`);if(!V(p,["string","array"]))throw new yr(`Expected second argument to be of type array or string, but found ${Se(Cn(p))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(t);return p.indexOf(l,y)}return p.indexOf(l)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class En{constructor(t,l,p,y,C,M){this.inputType=t,this.type=l,this.input=p,this.cases=y,this.outputs=C,this.otherwise=M}static parse(t,l){if(t.length<5)return l.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return l.error("Expected an even number of arguments.");let p,y;l.expectedType&&"value"!==l.expectedType.kind&&(y=l.expectedType);const C={},M=[];for(let W=2;W<t.length-1;W+=2){let ee=t[W];const oe=t[W+1];Array.isArray(ee)||(ee=[ee]);const pe=l.concat(W);if(0===ee.length)return pe.error("Expected at least one branch label.");for(const we of ee){if("number"!=typeof we&&"string"!=typeof we)return pe.error("Branch labels must be numbers or strings.");if("number"==typeof we&&Math.abs(we)>Number.MAX_SAFE_INTEGER)return pe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof we&&Math.floor(we)!==we)return pe.error("Numeric branch labels must be integer values.");if(p){if(pe.checkSubtype(p,Cn(we)))return null}else p=Cn(we);if(void 0!==C[String(we)])return pe.error("Branch labels must be unique.");C[String(we)]=M.length}const ge=l.parse(oe,W,y);if(!ge)return null;y=y||ge.type,M.push(ge)}const k=l.parse(t[1],1,et);if(!k)return null;const R=l.parse(t[t.length-1],t.length-1,y);return R?"value"!==k.type.kind&&l.concat(1).checkSubtype(p,k.type)?null:new En(p,y,k,C,M,R):null}evaluate(t){const l=this.input.evaluate(t);return(Cn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class Ws{constructor(t,l,p){this.type=t,this.branches=l,this.otherwise=p}static parse(t,l){if(t.length<4)return l.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return l.error("Expected an odd number of arguments.");let p;l.expectedType&&"value"!==l.expectedType.kind&&(p=l.expectedType);const y=[];for(let M=1;M<t.length-1;M+=2){const k=l.parse(t[M],M,_e);if(!k)return null;const R=l.parse(t[M+1],M+1,p);if(!R)return null;y.push([k,R]),p=p||R.type}const C=l.parse(t[t.length-1],t.length-1,p);if(!C)return null;if(!p)throw new Error("Can't infer output type");return new Ws(p,y,C)}evaluate(t){for(const[l,p]of this.branches)if(l.evaluate(t))return p.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[l,p]of this.branches)t(l),t(p);t(this.otherwise)}outputDefined(){return this.branches.every(([t,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class wa{constructor(t,l,p,y){this.type=t,this.input=l,this.beginIndex=p,this.endIndex=y}static parse(t,l){if(t.length<=2||t.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const p=l.parse(t[1],1,et),y=l.parse(t[2],2,De);if(!p||!y)return null;if(!K(p.type,[pn(et),be,et]))return l.error(`Expected first argument to be of type array or string, but found ${Se(p.type)} instead`);if(4===t.length){const C=l.parse(t[3],3,De);return C?new wa(p.type,p,y,C):null}return new wa(p.type,p,y)}evaluate(t){const l=this.input.evaluate(t),p=this.beginIndex.evaluate(t);if(!V(l,["string","array"]))throw new yr(`Expected first argument to be of type array or string, but found ${Se(Cn(l))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(t);return l.slice(p,y)}return l.slice(p)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Ca(o,t){return"=="===o||"!="===o?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Pa(o,t,l,p){return 0===p.compare(t,l)}function Ko(o,t,l){const p="=="!==o&&"!="!==o;return class K1{constructor(C,M,k){this.type=_e,this.lhs=C,this.rhs=M,this.collator=k,this.hasUntypedArgument="value"===C.type.kind||"value"===M.type.kind}static parse(C,M){if(3!==C.length&&4!==C.length)return M.error("Expected two or three arguments.");const k=C[0];let R=M.parse(C[1],1,et);if(!R)return null;if(!Ca(k,R.type))return M.concat(1).error(`"${k}" comparisons are not supported for type '${Se(R.type)}'.`);let W=M.parse(C[2],2,et);if(!W)return null;if(!Ca(k,W.type))return M.concat(2).error(`"${k}" comparisons are not supported for type '${Se(W.type)}'.`);if(R.type.kind!==W.type.kind&&"value"!==R.type.kind&&"value"!==W.type.kind)return M.error(`Cannot compare types '${Se(R.type)}' and '${Se(W.type)}'.`);p&&("value"===R.type.kind&&"value"!==W.type.kind?R=new Rn(W.type,[R]):"value"!==R.type.kind&&"value"===W.type.kind&&(W=new Rn(R.type,[W])));let ee=null;if(4===C.length){if("string"!==R.type.kind&&"string"!==W.type.kind&&"value"!==R.type.kind&&"value"!==W.type.kind)return M.error("Cannot use collator to compare non-string types.");if(ee=M.parse(C[3],3,Ei),!ee)return null}return new K1(R,W,ee)}evaluate(C){const M=this.lhs.evaluate(C),k=this.rhs.evaluate(C);if(p&&this.hasUntypedArgument){const R=Cn(M),W=Cn(k);if(R.kind!==W.kind||"string"!==R.kind&&"number"!==R.kind)throw new yr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${R.kind}, ${W.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const R=Cn(M),W=Cn(k);if("string"!==R.kind||"string"!==W.kind)return t(C,M,k)}return this.collator?l(C,M,k,this.collator.evaluate(C)):t(C,M,k)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const Ms=Ko("==",function(o,t,l){return t===l},Pa),ac=Ko("!=",function(o,t,l){return t!==l},function(o,t,l,p){return!Pa(0,t,l,p)}),Rl=Ko("<",function(o,t,l){return t<l},function(o,t,l,p){return p.compare(t,l)<0}),Oa=Ko(">",function(o,t,l){return t>l},function(o,t,l,p){return p.compare(t,l)>0}),_l=Ko("<=",function(o,t,l){return t<=l},function(o,t,l,p){return p.compare(t,l)<=0}),Ds=Ko(">=",function(o,t,l){return t>=l},function(o,t,l,p){return p.compare(t,l)>=0});class la{constructor(t,l,p,y,C){this.type=be,this.number=t,this.locale=l,this.currency=p,this.minFractionDigits=y,this.maxFractionDigits=C}static parse(t,l){if(3!==t.length)return l.error("Expected two arguments.");const p=l.parse(t[1],1,De);if(!p)return null;const y=t[2];if("object"!=typeof y||Array.isArray(y))return l.error("NumberFormat options argument must be an object.");let C=null;if(y.locale&&(C=l.parse(y.locale,1,be),!C))return null;let M=null;if(y.currency&&(M=l.parse(y.currency,1,be),!M))return null;let k=null;if(y["min-fraction-digits"]&&(k=l.parse(y["min-fraction-digits"],1,De),!k))return null;let R=null;return y["max-fraction-digits"]&&(R=l.parse(y["max-fraction-digits"],1,De),!R)?null:new la(p,C,M,k,R)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class ca{constructor(t){this.type=li,this.sections=t}static parse(t,l){if(t.length<2)return l.error("Expected at least one argument.");const p=t[1];if(!Array.isArray(p)&&"object"==typeof p)return l.error("First argument must be an image or text section.");const y=[];let C=!1;for(let M=1;M<=t.length-1;++M){const k=t[M];if(C&&"object"==typeof k&&!Array.isArray(k)){C=!1;let R=null;if(k["font-scale"]&&(R=l.parse(k["font-scale"],1,De),!R))return null;let W=null;if(k["text-font"]&&(W=l.parse(k["text-font"],1,pn(be)),!W))return null;let ee=null;if(k["text-color"]&&(ee=l.parse(k["text-color"],1,Qe),!ee))return null;const oe=y[y.length-1];oe.scale=R,oe.font=W,oe.textColor=ee}else{const R=l.parse(t[M],1,et);if(!R)return null;const W=R.type.kind;if("string"!==W&&"value"!==W&&"null"!==W&&"resolvedImage"!==W)return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,y.push({content:R,scale:null,font:null,textColor:null})}}return new ca(y)}evaluate(t){return new wn(this.sections.map(l=>{const p=l.content.evaluate(t);return Cn(p)===Li?new Ro("",p,null,null,null):new Ro(Or(p),null,l.scale?l.scale.evaluate(t):null,l.font?l.font.evaluate(t).join(","):null,l.textColor?l.textColor.evaluate(t):null)}))}eachChild(t){for(const l of this.sections)t(l.content),l.scale&&t(l.scale),l.font&&t(l.font),l.textColor&&t(l.textColor)}outputDefined(){return!1}}class Ra{constructor(t){this.type=Li,this.input=t}static parse(t,l){if(2!==t.length)return l.error("Expected two arguments.");const p=l.parse(t[1],1,be);return p?new Ra(p):l.error("No image name provided.")}evaluate(t){const l=this.input.evaluate(t),p=Qi.fromString(l);return p&&t.availableImages&&(p.available=t.availableImages.indexOf(l)>-1),p}eachChild(t){t(this.input)}outputDefined(){return!1}}class Do{constructor(t){this.type=De,this.input=t}static parse(t,l){if(2!==t.length)return l.error(`Expected 1 argument, but found ${t.length-1} instead.`);const p=l.parse(t[1],1);return p?"array"!==p.type.kind&&"string"!==p.type.kind&&"value"!==p.type.kind?l.error(`Expected argument of type string or array, but found ${Se(p.type)} instead.`):new Do(p):null}evaluate(t){const l=this.input.evaluate(t);if("string"==typeof l||Array.isArray(l))return l.length;throw new yr(`Expected value to be of type string or array, but found ${Se(Cn(l))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Yr={"==":Ms,"!=":ac,">":Oa,"<":Rl,">=":Ds,"<=":_l,array:Rn,at:$s,boolean:Rn,case:Ws,coalesce:xa,collator:Fn,format:ca,image:Ra,in:Gs,"index-of":Zs,interpolate:Zr,"interpolate-hcl":Zr,"interpolate-lab":Zr,length:Do,let:fo,literal:ds,match:En,number:Rn,"number-format":la,object:Rn,slice:wa,step:fr,string:Rn,"to-boolean":Ji,"to-color":Ji,"to-number":Ji,"to-string":Ji,var:hs,within:Gr};function Ea(o,[t,l,p,y]){t=t.evaluate(o),l=l.evaluate(o),p=p.evaluate(o);const C=y?y.evaluate(o):1,M=pr(t,l,p,C);if(M)throw new yr(M);return new _n(t/255,l/255,p/255,C,!1)}function eo(o,t){return o in t}function Ss(o,t){const l=t[o];return void 0===l?null:l}function lo(o){return{type:o}}function Ys(o){return{result:"success",value:o}}function ms(o){return{result:"error",value:o}}function Ts(o){return"data-driven"===o["property-type"]||"cross-faded-data-driven"===o["property-type"]}function Fa(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ma(o){return!!o.expression&&o.expression.interpolated}function xn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":null===o?"null":typeof o}function Lr(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}function Qa(o){return o}function da(o,t){const l="color"===t.type,p=o.stops&&"object"==typeof o.stops[0][0],y=p||!(p||void 0!==o.property),C=o.type||(Ma(t)?"exponential":"interval");if(l||"padding"===t.type){const ee=l?_n.parse:Mr.parse;(o=st({},o)).stops&&(o.stops=o.stops.map(oe=>[oe[0],ee(oe[1])])),o.default=ee(o.default?o.default:t.default)}if(o.colorSpace&&"rgb"!==(M=o.colorSpace)&&"hcl"!==M&&"lab"!==M)throw new Error(`Unknown color space: "${o.colorSpace}"`);var M;let k,R,W;if("exponential"===C)k=ir;else if("interval"===C)k=Ur;else if("categorical"===C){k=Vr,R=Object.create(null);for(const ee of o.stops)R[ee[0]]=ee[1];W=typeof o.stops[0][0]}else{if("identity"!==C)throw new Error(`Unknown function type "${C}"`);k=Fl}if(p){const ee={},oe=[];for(let we=0;we<o.stops.length;we++){const Ue=o.stops[we],Le=Ue[0].zoom;void 0===ee[Le]&&(ee[Le]={zoom:Le,type:o.type,property:o.property,default:o.default,stops:[]},oe.push(Le)),ee[Le].stops.push([Ue[0].value,Ue[1]])}const pe=[];for(const we of oe)pe.push([ee[we].zoom,da(ee[we],t)]);const ge={name:"linear"};return{kind:"composite",interpolationType:ge,interpolationFactor:Zr.interpolationFactor.bind(void 0,ge),zoomStops:pe.map(we=>we[0]),evaluate:({zoom:we},Ue)=>ir({stops:pe,base:o.base},t,we).evaluate(we,Ue)}}if(y){const ee="exponential"===C?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:ee,interpolationFactor:Zr.interpolationFactor.bind(void 0,ee),zoomStops:o.stops.map(oe=>oe[0]),evaluate:({zoom:oe})=>k(o,t,oe,R,W)}}return{kind:"source",evaluate(ee,oe){const pe=oe&&oe.properties?oe.properties[o.property]:void 0;return void 0===pe?sr(o.default,t.default):k(o,t,pe,R,W)}}}function sr(o,t,l){return void 0!==o?o:void 0!==t?t:void 0!==l?l:void 0}function Vr(o,t,l,p,y){return sr(typeof l===y?p[l]:void 0,o.default,t.default)}function Ur(o,t,l){if("number"!==xn(l))return sr(o.default,t.default);const p=o.stops.length;if(1===p||l<=o.stops[0][0])return o.stops[0][1];if(l>=o.stops[p-1][0])return o.stops[p-1][1];const y=aa(o.stops.map(C=>C[0]),l);return o.stops[y][1]}function ir(o,t,l){const p=void 0!==o.base?o.base:1;if("number"!==xn(l))return sr(o.default,t.default);const y=o.stops.length;if(1===y||l<=o.stops[0][0])return o.stops[0][1];if(l>=o.stops[y-1][0])return o.stops[y-1][1];const C=aa(o.stops.map(ee=>ee[0]),l),M=function(ee,oe,pe,ge){const we=ge-pe,Ue=ee-pe;return 0===we?0:1===oe?Ue/we:(Math.pow(oe,Ue)-1)/(Math.pow(oe,we)-1)}(l,p,o.stops[C][0],o.stops[C+1][0]),k=o.stops[C][1],R=o.stops[C+1][1],W=Yn[t.type]||Qa;return"function"==typeof k.evaluate?{evaluate(...ee){const oe=k.evaluate.apply(void 0,ee),pe=R.evaluate.apply(void 0,ee);if(void 0!==oe&&void 0!==pe)return W(oe,pe,M,o.colorSpace)}}:W(k,R,M,o.colorSpace)}function Fl(o,t,l){switch(t.type){case"color":l=_n.parse(l);break;case"formatted":l=wn.fromString(l.toString());break;case"resolvedImage":l=Qi.fromString(l.toString());break;case"padding":l=Mr.parse(l);break;default:xn(l)===t.type||"enum"===t.type&&t.values[l]||(l=void 0)}return sr(l,o.default,t.default)}zr.register(Yr,{error:[{kind:"error"},[be],(o,[t])=>{throw new yr(t.evaluate(o))}],typeof:[be,[et],(o,[t])=>Se(Cn(t.evaluate(o)))],"to-rgba":[pn(De,4),[Qe],(o,[t])=>{const[l,p,y,C]=t.evaluate(o).rgb;return[255*l,255*p,255*y,C]}],rgb:[Qe,[De,De,De],Ea],rgba:[Qe,[De,De,De,De],Ea],has:{type:_e,overloads:[[[be],(o,[t])=>eo(t.evaluate(o),o.properties())],[[be,ze],(o,[t,l])=>eo(t.evaluate(o),l.evaluate(o))]]},get:{type:et,overloads:[[[be],(o,[t])=>Ss(t.evaluate(o),o.properties())],[[be,ze],(o,[t,l])=>Ss(t.evaluate(o),l.evaluate(o))]]},"feature-state":[et,[be],(o,[t])=>Ss(t.evaluate(o),o.featureState||{})],properties:[ze,[],o=>o.properties()],"geometry-type":[be,[],o=>o.geometryType()],id:[et,[],o=>o.id()],zoom:[De,[],o=>o.globals.zoom],"heatmap-density":[De,[],o=>o.globals.heatmapDensity||0],"line-progress":[De,[],o=>o.globals.lineProgress||0],accumulated:[et,[],o=>void 0===o.globals.accumulated?null:o.globals.accumulated],"+":[De,lo(De),(o,t)=>{let l=0;for(const p of t)l+=p.evaluate(o);return l}],"*":[De,lo(De),(o,t)=>{let l=1;for(const p of t)l*=p.evaluate(o);return l}],"-":{type:De,overloads:[[[De,De],(o,[t,l])=>t.evaluate(o)-l.evaluate(o)],[[De],(o,[t])=>-t.evaluate(o)]]},"/":[De,[De,De],(o,[t,l])=>t.evaluate(o)/l.evaluate(o)],"%":[De,[De,De],(o,[t,l])=>t.evaluate(o)%l.evaluate(o)],ln2:[De,[],()=>Math.LN2],pi:[De,[],()=>Math.PI],e:[De,[],()=>Math.E],"^":[De,[De,De],(o,[t,l])=>Math.pow(t.evaluate(o),l.evaluate(o))],sqrt:[De,[De],(o,[t])=>Math.sqrt(t.evaluate(o))],log10:[De,[De],(o,[t])=>Math.log(t.evaluate(o))/Math.LN10],ln:[De,[De],(o,[t])=>Math.log(t.evaluate(o))],log2:[De,[De],(o,[t])=>Math.log(t.evaluate(o))/Math.LN2],sin:[De,[De],(o,[t])=>Math.sin(t.evaluate(o))],cos:[De,[De],(o,[t])=>Math.cos(t.evaluate(o))],tan:[De,[De],(o,[t])=>Math.tan(t.evaluate(o))],asin:[De,[De],(o,[t])=>Math.asin(t.evaluate(o))],acos:[De,[De],(o,[t])=>Math.acos(t.evaluate(o))],atan:[De,[De],(o,[t])=>Math.atan(t.evaluate(o))],min:[De,lo(De),(o,t)=>Math.min(...t.map(l=>l.evaluate(o)))],max:[De,lo(De),(o,t)=>Math.max(...t.map(l=>l.evaluate(o)))],abs:[De,[De],(o,[t])=>Math.abs(t.evaluate(o))],round:[De,[De],(o,[t])=>{const l=t.evaluate(o);return l<0?-Math.round(-l):Math.round(l)}],floor:[De,[De],(o,[t])=>Math.floor(t.evaluate(o))],ceil:[De,[De],(o,[t])=>Math.ceil(t.evaluate(o))],"filter-==":[_e,[be,et],(o,[t,l])=>o.properties()[t.value]===l.value],"filter-id-==":[_e,[et],(o,[t])=>o.id()===t.value],"filter-type-==":[_e,[be],(o,[t])=>o.geometryType()===t.value],"filter-<":[_e,[be,et],(o,[t,l])=>{const p=o.properties()[t.value],y=l.value;return typeof p==typeof y&&p<y}],"filter-id-<":[_e,[et],(o,[t])=>{const l=o.id(),p=t.value;return typeof l==typeof p&&l<p}],"filter->":[_e,[be,et],(o,[t,l])=>{const p=o.properties()[t.value],y=l.value;return typeof p==typeof y&&p>y}],"filter-id->":[_e,[et],(o,[t])=>{const l=o.id(),p=t.value;return typeof l==typeof p&&l>p}],"filter-<=":[_e,[be,et],(o,[t,l])=>{const p=o.properties()[t.value],y=l.value;return typeof p==typeof y&&p<=y}],"filter-id-<=":[_e,[et],(o,[t])=>{const l=o.id(),p=t.value;return typeof l==typeof p&&l<=p}],"filter->=":[_e,[be,et],(o,[t,l])=>{const p=o.properties()[t.value],y=l.value;return typeof p==typeof y&&p>=y}],"filter-id->=":[_e,[et],(o,[t])=>{const l=o.id(),p=t.value;return typeof l==typeof p&&l>=p}],"filter-has":[_e,[et],(o,[t])=>t.value in o.properties()],"filter-has-id":[_e,[],o=>null!==o.id()&&void 0!==o.id()],"filter-type-in":[_e,[pn(be)],(o,[t])=>t.value.indexOf(o.geometryType())>=0],"filter-id-in":[_e,[pn(et)],(o,[t])=>t.value.indexOf(o.id())>=0],"filter-in-small":[_e,[be,pn(et)],(o,[t,l])=>l.value.indexOf(o.properties()[t.value])>=0],"filter-in-large":[_e,[be,pn(et)],(o,[t,l])=>function(p,y,C,M){for(;C<=M;){const k=C+M>>1;if(y[k]===p)return!0;y[k]>p?M=k-1:C=k+1}return!1}(o.properties()[t.value],l.value,0,l.value.length-1)],all:{type:_e,overloads:[[[_e,_e],(o,[t,l])=>t.evaluate(o)&&l.evaluate(o)],[lo(_e),(o,t)=>{for(const l of t)if(!l.evaluate(o))return!1;return!0}]]},any:{type:_e,overloads:[[[_e,_e],(o,[t,l])=>t.evaluate(o)||l.evaluate(o)],[lo(_e),(o,t)=>{for(const l of t)if(l.evaluate(o))return!0;return!1}]]},"!":[_e,[_e],(o,[t])=>!t.evaluate(o)],"is-supported-script":[_e,[be],(o,[t])=>{const l=o.globals&&o.globals.isSupportedScript;return!l||l(t.evaluate(o))}],upcase:[be,[be],(o,[t])=>t.evaluate(o).toUpperCase()],downcase:[be,[be],(o,[t])=>t.evaluate(o).toLowerCase()],concat:[be,lo(et),(o,t)=>t.map(l=>Or(l.evaluate(o))).join("")],"resolved-locale":[be,[Ei],(o,[t])=>t.evaluate(o).resolvedLocale()]});class Da{constructor(t,l){var p;this.expression=t,this._warningHistory={},this._evaluator=new $n,this._defaultValue=l?"color"===(p=l).type&&Lr(p.default)?new _n(0,0,0,0):"color"===p.type?_n.parse(p.default)||null:"padding"===p.type?Mr.parse(p.default)||null:void 0===p.default?null:p.default:null,this._enumValues=l&&"enum"===l.type?l.values:null}evaluateWithoutErrorHandling(t,l,p,y,C,M){return this._evaluator.globals=t,this._evaluator.feature=l,this._evaluator.featureState=p,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(t,l,p,y,C,M){this._evaluator.globals=t,this._evaluator.feature=l||null,this._evaluator.featureState=p||null,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=M||null;try{const k=this.expression.evaluate(this._evaluator);if(null==k||"number"==typeof k&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new yr(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function Lo(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in Yr}function fn(o,t){const l=new vr(Yr,Hs,[],t?function(y){const C={color:Qe,string:be,number:De,enum:be,boolean:_e,formatted:li,padding:qi,resolvedImage:Li};return"array"===y.type?pn(C[y.value]||et,y.length):C[y.type]}(t):void 0),p=l.parse(o,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return p?Ys(new Da(p,t)):ms(l.errors)}class La{constructor(t,l){this.kind=t,this._styleExpression=l,this.isStateDependent="constant"!==t&&!ao(l.expression)}evaluateWithoutErrorHandling(t,l,p,y,C,M){return this._styleExpression.evaluateWithoutErrorHandling(t,l,p,y,C,M)}evaluate(t,l,p,y,C,M){return this._styleExpression.evaluate(t,l,p,y,C,M)}}class on{constructor(t,l,p,y){this.kind=t,this.zoomStops=p,this._styleExpression=l,this.isStateDependent="camera"!==t&&!ao(l.expression),this.interpolationType=y}evaluateWithoutErrorHandling(t,l,p,y,C,M){return this._styleExpression.evaluateWithoutErrorHandling(t,l,p,y,C,M)}evaluate(t,l,p,y,C,M){return this._styleExpression.evaluate(t,l,p,y,C,M)}interpolationFactor(t,l,p){return this.interpolationType?Zr.interpolationFactor(this.interpolationType,t,l,p):0}}function ps(o,t){const l=fn(o,t);if("error"===l.result)return l;const p=l.value.expression,y=Mo(p);if(!y&&!Ts(t))return ms([new xt("","data expressions not supported")]);const C=dr(p,["zoom"]);if(!C&&!Fa(t))return ms([new xt("","zoom expressions not supported")]);const M=Bn(p);return M||C?M instanceof xt?ms([M]):M instanceof Zr&&!Ma(t)?ms([new xt("",'"interpolate" expressions cannot be used with this property')]):Ys(M?new on(y?"camera":"composite",l.value,M.labels,M instanceof Zr?M.interpolation:void 0):new La(y?"constant":"source",l.value)):ms([new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class vn{constructor(t,l){this._parameters=t,this._specification=l,st(this,da(this._parameters,this._specification))}static deserialize(t){return new vn(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Bn(o){let t=null;if(o instanceof fo)t=Bn(o.result);else if(o instanceof xa){for(const l of o.args)if(t=Bn(l),t)break}else(o instanceof fr||o instanceof Zr)&&o.input instanceof zr&&"zoom"===o.input.name&&(t=o);return t instanceof xt||o.eachChild(l=>{const p=Bn(l);p instanceof xt?t=p:!t&&p?t=new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&p&&t!==p&&(t=new xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Is(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const t of o.slice(1))if(!Is(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const en={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function As(o){if(null==o)return{filter:()=>!0,needGeometry:!1};Is(o)||(o=$(o));const t=fn(o,en);if("error"===t.result)throw new Error(t.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,p,y)=>t.value.evaluate(l,p,{},y),needGeometry:q(o)}}function X(o,t){return o<t?-1:o>t?1:0}function q(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(let t=1;t<o.length;t++)if(q(o[t]))return!0;return!1}function $(o){if(!o)return!0;const t=o[0];return o.length<=1?"any"!==t:"=="===t?Me(o[1],o[2],"=="):"!="===t?mr(Me(o[1],o[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Me(o[1],o[2],t):"any"===t?(l=o.slice(1),["any"].concat(l.map($))):"all"===t?["all"].concat(o.slice(1).map($)):"none"===t?["all"].concat(o.slice(1).map($).map(mr)):"in"===t?Ut(o[1],o.slice(2)):"!in"===t?mr(Ut(o[1],o.slice(2))):"has"===t?Yi(o[1]):"!has"===t?mr(Yi(o[1])):"within"!==t||o;var l}function Me(o,t,l){switch(o){case"$type":return[`filter-type-${l}`,t];case"$id":return[`filter-id-${l}`,t];default:return[`filter-${l}`,o,t]}}function Ut(o,t){if(0===t.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(l=>typeof l!=typeof t[0])?["filter-in-large",o,["literal",t.sort(X)]]:["filter-in-small",o,["literal",t]]}}function Yi(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function mr(o){return["!",o]}function jt(o){const t=typeof o;if("number"===t||"boolean"===t||"string"===t||null==o)return JSON.stringify(o);if(Array.isArray(o)){let y="[";for(const C of o)y+=`${jt(C)},`;return`${y}]`}const l=Object.keys(o).sort();let p="{";for(let y=0;y<l.length;y++)p+=`${JSON.stringify(l[y])}:${jt(o[l[y]])},`;return`${p}}`}function gn(o){let t="";for(const l of Ti)t+=`/${jt(o[l])}`;return t}function ks(o){const t=o.value;return t?[new Ee(o.key,t,"constants have been deprecated as of v8")]:[]}function ar(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function br(o){if(Array.isArray(o))return o.map(br);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const t={};for(const l in o)t[l]=br(o[l]);return t}return ar(o)}function No(o){const t=o.key,l=o.value,p=o.valueSpec||{},y=o.objectElementValidators||{},C=o.style,M=o.styleSpec,k=o.validateSpec;let R=[];const W=xn(l);if("object"!==W)return[new Ee(t,l,`object expected, ${W} found`)];for(const ee in l){const oe=ee.split(".")[0],pe=p[oe]||p["*"];let ge;if(y[oe])ge=y[oe];else if(p[oe])ge=k;else if(y["*"])ge=y["*"];else{if(!p["*"]){R.push(new Ee(t,l[ee],`unknown property "${ee}"`));continue}ge=k}R=R.concat(ge({key:(t&&`${t}.`)+ee,value:l[ee],valueSpec:pe,style:C,styleSpec:M,object:l,objectKey:ee,validateSpec:k},l))}for(const ee in p)y[ee]||p[ee].required&&void 0===p[ee].default&&void 0===l[ee]&&R.push(new Ee(t,l,`missing required property "${ee}"`));return R}function Na(o){const t=o.value,l=o.valueSpec,p=o.style,y=o.styleSpec,C=o.key,M=o.arrayElementValidator||o.validateSpec;if("array"!==xn(t))return[new Ee(C,t,`array expected, ${xn(t)} found`)];if(l.length&&t.length!==l.length)return[new Ee(C,t,`array length ${l.length} expected, length ${t.length} found`)];if(l["min-length"]&&t.length<l["min-length"])return[new Ee(C,t,`array length at least ${l["min-length"]} expected, length ${t.length} found`)];let k={type:l.value,values:l.values};y.$version<7&&(k.function=l.function),"object"===xn(l.value)&&(k=l.value);let R=[];for(let W=0;W<t.length;W++)R=R.concat(M({array:t,arrayIndex:W,value:t[W],valueSpec:k,validateSpec:o.validateSpec,style:p,styleSpec:y,key:`${C}[${W}]`}));return R}function zo(o){const t=o.key,l=o.value,p=o.valueSpec;let y=xn(l);return"number"===y&&l!=l&&(y="NaN"),"number"!==y?[new Ee(t,l,`number expected, ${y} found`)]:"minimum"in p&&l<p.minimum?[new Ee(t,l,`${l} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&l>p.maximum?[new Ee(t,l,`${l} is greater than the maximum value ${p.maximum}`)]:[]}function el(o){const t=o.valueSpec,l=ar(o.value.type);let p,y,C,M={};const k="categorical"!==l&&void 0===o.value.property,R=!k,W="array"===xn(o.value.stops)&&"array"===xn(o.value.stops[0])&&"object"===xn(o.value.stops[0][0]),ee=No({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ge){if("identity"===l)return[new Ee(ge.key,ge.value,'identity function may not have a "stops" property')];let we=[];const Ue=ge.value;return we=we.concat(Na({key:ge.key,value:Ue,valueSpec:ge.valueSpec,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec,arrayElementValidator:oe})),"array"===xn(Ue)&&0===Ue.length&&we.push(new Ee(ge.key,Ue,"array must have at least one stop")),we},default:function(ge){return ge.validateSpec({key:ge.key,value:ge.value,valueSpec:t,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec})}}});return"identity"===l&&k&&ee.push(new Ee(o.key,o.value,'missing required property "property"')),"identity"===l||o.value.stops||ee.push(new Ee(o.key,o.value,'missing required property "stops"')),"exponential"===l&&o.valueSpec.expression&&!Ma(o.valueSpec)&&ee.push(new Ee(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(R&&!Ts(o.valueSpec)?ee.push(new Ee(o.key,o.value,"property functions not supported")):k&&!Fa(o.valueSpec)&&ee.push(new Ee(o.key,o.value,"zoom functions not supported"))),"categorical"!==l&&!W||void 0!==o.value.property||ee.push(new Ee(o.key,o.value,'"property" property is required')),ee;function oe(ge){let we=[];const Ue=ge.value,Le=ge.key;if("array"!==xn(Ue))return[new Ee(Le,Ue,`array expected, ${xn(Ue)} found`)];if(2!==Ue.length)return[new Ee(Le,Ue,`array length 2 expected, length ${Ue.length} found`)];if(W){if("object"!==xn(Ue[0]))return[new Ee(Le,Ue,`object expected, ${xn(Ue[0])} found`)];if(void 0===Ue[0].zoom)return[new Ee(Le,Ue,"object stop key must have zoom")];if(void 0===Ue[0].value)return[new Ee(Le,Ue,"object stop key must have value")];if(C&&C>ar(Ue[0].zoom))return[new Ee(Le,Ue[0].zoom,"stop zoom values must appear in ascending order")];ar(Ue[0].zoom)!==C&&(C=ar(Ue[0].zoom),y=void 0,M={}),we=we.concat(No({key:`${Le}[0]`,value:Ue[0],valueSpec:{zoom:{}},validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec,objectElementValidators:{zoom:zo,value:pe}}))}else we=we.concat(pe({key:`${Le}[0]`,value:Ue[0],valueSpec:{},validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec},Ue));return Lo(br(Ue[1]))?we.concat([new Ee(`${Le}[1]`,Ue[1],"expressions are not allowed in function stops.")]):we.concat(ge.validateSpec({key:`${Le}[1]`,value:Ue[1],valueSpec:t,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec}))}function pe(ge,we){const Ue=xn(ge.value),Le=ar(ge.value),dt=null!==ge.value?ge.value:we;if(p){if(Ue!==p)return[new Ee(ge.key,dt,`${Ue} stop domain type must match previous stop domain type ${p}`)]}else p=Ue;if("number"!==Ue&&"string"!==Ue&&"boolean"!==Ue)return[new Ee(ge.key,dt,"stop domain value must be a number, string, or boolean")];if("number"!==Ue&&"categorical"!==l){let gt=`number expected, ${Ue} found`;return Ts(t)&&void 0===l&&(gt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ee(ge.key,dt,gt)]}return"categorical"!==l||"number"!==Ue||isFinite(Le)&&Math.floor(Le)===Le?"categorical"!==l&&"number"===Ue&&void 0!==y&&Le<y?[new Ee(ge.key,dt,"stop domain values must appear in ascending order")]:(y=Le,"categorical"===l&&Le in M?[new Ee(ge.key,dt,"stop domain values must be unique")]:(M[Le]=!0,[])):[new Ee(ge.key,dt,`integer expected, found ${Le}`)]}}function fs(o){const t=("property"===o.expressionContext?ps:fn)(br(o.value),o.valueSpec);if("error"===t.result)return t.value.map(p=>new Ee(`${o.key}${p.key}`,o.value,p.message));const l=t.value.expression||t.value._styleExpression.expression;if("property"===o.expressionContext&&"text-font"===o.propertyKey&&!l.outputDefined())return[new Ee(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===o.expressionContext&&"layout"===o.propertyType&&!ao(l))return[new Ee(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===o.expressionContext&&!ao(l))return[new Ee(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&0===o.expressionContext.indexOf("cluster")){if(!dr(l,["zoom","feature-state"]))return[new Ee(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===o.expressionContext&&!Mo(l))return[new Ee(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function za(o){const t=o.key,l=o.value,p=o.valueSpec,y=[];return Array.isArray(p.values)?-1===p.values.indexOf(ar(l))&&y.push(new Ee(t,l,`expected one of [${p.values.join(", ")}], ${JSON.stringify(l)} found`)):-1===Object.keys(p.values).indexOf(ar(l))&&y.push(new Ee(t,l,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(l)} found`)),y}function Sa(o){return Is(br(o.value))?fs(st({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ll(o)}function Ll(o){const t=o.value,l=o.key;if("array"!==xn(t))return[new Ee(l,t,`array expected, ${xn(t)} found`)];const p=o.styleSpec;let y,C=[];if(t.length<1)return[new Ee(l,t,"filter array must have at least 1 element")];switch(C=C.concat(za({key:`${l}[0]`,value:t[0],valueSpec:p.filter_operator,style:o.style,styleSpec:o.styleSpec})),ar(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===ar(t[1])&&C.push(new Ee(l,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&C.push(new Ee(l,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(y=xn(t[1]),"string"!==y&&C.push(new Ee(`${l}[1]`,t[1],`string expected, ${y} found`)));for(let M=2;M<t.length;M++)y=xn(t[M]),"$type"===ar(t[1])?C=C.concat(za({key:`${l}[${M}]`,value:t[M],valueSpec:p.geometry_type,style:o.style,styleSpec:o.styleSpec})):"string"!==y&&"number"!==y&&"boolean"!==y&&C.push(new Ee(`${l}[${M}]`,t[M],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let M=1;M<t.length;M++)C=C.concat(Ll({key:`${l}[${M}]`,value:t[M],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":y=xn(t[1]),2!==t.length?C.push(new Ee(l,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==y&&C.push(new Ee(`${l}[1]`,t[1],`string expected, ${y} found`));break;case"within":y=xn(t[1]),2!==t.length?C.push(new Ee(l,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==y&&C.push(new Ee(`${l}[1]`,t[1],`object expected, ${y} found`))}return C}function qr(o,t){const l=o.key,p=o.validateSpec,y=o.style,C=o.styleSpec,M=o.value,k=o.objectKey,R=C[`${t}_${o.layerType}`];if(!R)return[];const W=k.match(/^(.*)-transition$/);if("paint"===t&&W&&R[W[1]]&&R[W[1]].transition)return p({key:l,value:M,valueSpec:C.transition,style:y,styleSpec:C});const ee=o.valueSpec||R[k];if(!ee)return[new Ee(l,M,`unknown property "${k}"`)];let oe;if("string"===xn(M)&&Ts(ee)&&!ee.tokens&&(oe=/^{([^}]+)}$/.exec(M)))return[new Ee(l,M,`"${k}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(oe[1])} }\`.`)];const pe=[];return"symbol"===o.layerType&&("text-field"===k&&y&&!y.glyphs&&pe.push(new Ee(l,M,'use of "text-field" requires a style "glyphs" property')),"text-font"===k&&Lr(br(M))&&"identity"===ar(M.type)&&pe.push(new Ee(l,M,'"text-font" does not support identity functions'))),pe.concat(p({key:o.key,value:M,valueSpec:ee,style:y,styleSpec:C,expressionContext:"property",propertyType:t,propertyKey:k}))}function Bo(o){return qr(o,"paint")}function Xo(o){return qr(o,"layout")}function gs(o){let t=[];const l=o.value,p=o.key,y=o.style,C=o.styleSpec;l.type||l.ref||t.push(new Ee(p,l,'either "type" or "ref" is required'));let M=ar(l.type);const k=ar(l.ref);if(l.id){const R=ar(l.id);for(let W=0;W<o.arrayIndex;W++){const ee=y.layers[W];ar(ee.id)===R&&t.push(new Ee(p,l.id,`duplicate layer id "${l.id}", previously used at line ${ee.id.__line__}`))}}if("ref"in l){let R;["type","source","source-layer","filter","layout"].forEach(W=>{W in l&&t.push(new Ee(p,l[W],`"${W}" is prohibited for ref layers`))}),y.layers.forEach(W=>{ar(W.id)===k&&(R=W)}),R?R.ref?t.push(new Ee(p,l.ref,"ref cannot reference another ref layer")):M=ar(R.type):t.push(new Ee(p,l.ref,`ref layer "${k}" not found`))}else if("background"!==M)if(l.source){const R=y.sources&&y.sources[l.source],W=R&&ar(R.type);R?"vector"===W&&"raster"===M?t.push(new Ee(p,l.source,`layer "${l.id}" requires a raster source`)):"raster"===W&&"raster"!==M?t.push(new Ee(p,l.source,`layer "${l.id}" requires a vector source`)):"vector"!==W||l["source-layer"]?"raster-dem"===W&&"hillshade"!==M?t.push(new Ee(p,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==M||!l.paint||!l.paint["line-gradient"]||"geojson"===W&&R.lineMetrics||t.push(new Ee(p,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ee(p,l,`layer "${l.id}" must specify a "source-layer"`)):t.push(new Ee(p,l.source,`source "${l.source}" not found`))}else t.push(new Ee(p,l,'missing required property "source"'));return t=t.concat(No({key:p,value:l,valueSpec:C.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${p}.type`,value:l.type,valueSpec:C.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:l,objectKey:"type"}),filter:Sa,layout:R=>No({layer:l,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,validateSpec:R.validateSpec,objectElementValidators:{"*":W=>Xo(st({layerType:M},W))}}),paint:R=>No({layer:l,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,validateSpec:R.validateSpec,objectElementValidators:{"*":W=>Bo(st({layerType:M},W))}})}})),t}function In(o){const t=o.value,l=o.key,p=xn(t);return"string"!==p?[new Ee(l,t,`string expected, ${p} found`)]:[]}const Kr={promoteId:function({key:o,value:t}){if("string"===xn(t))return In({key:o,value:t});{const l=[];for(const p in t)l.push(...In({key:`${o}.${p}`,value:t[p]}));return l}}};function xr(o){const t=o.value,l=o.key,p=o.styleSpec,y=o.style,C=o.validateSpec;if(!t.type)return[new Ee(l,t,'"type" is required')];const M=ar(t.type);let k;switch(M){case"vector":case"raster":case"raster-dem":return k=No({key:l,value:t,valueSpec:p[`source_${M.replace("-","_")}`],style:o.style,styleSpec:p,objectElementValidators:Kr,validateSpec:C}),k;case"geojson":if(k=No({key:l,value:t,valueSpec:p.source_geojson,style:y,styleSpec:p,validateSpec:C,objectElementValidators:Kr}),t.cluster)for(const R in t.clusterProperties){const[W,ee]=t.clusterProperties[R],oe="string"==typeof W?[W,["accumulated"],["get",R]]:W;k.push(...fs({key:`${l}.${R}.map`,value:ee,validateSpec:C,expressionContext:"cluster-map"})),k.push(...fs({key:`${l}.${R}.reduce`,value:oe,validateSpec:C,expressionContext:"cluster-reduce"}))}return k;case"video":return No({key:l,value:t,valueSpec:p.source_video,style:y,validateSpec:C,styleSpec:p});case"image":return No({key:l,value:t,valueSpec:p.source_image,style:y,validateSpec:C,styleSpec:p});case"canvas":return[new Ee(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return za({key:`${l}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:C,styleSpec:p})}}function Nl(o){const t=o.value,l=o.styleSpec,p=l.light,y=o.style;let C=[];const M=xn(t);if(void 0===t)return C;if("object"!==M)return C=C.concat([new Ee("light",t,`object expected, ${M} found`)]),C;for(const k in t){const R=k.match(/^(.*)-transition$/);C=C.concat(R&&p[R[1]]&&p[R[1]].transition?o.validateSpec({key:k,value:t[k],valueSpec:l.transition,validateSpec:o.validateSpec,style:y,styleSpec:l}):p[k]?o.validateSpec({key:k,value:t[k],valueSpec:p[k],validateSpec:o.validateSpec,style:y,styleSpec:l}):[new Ee(k,t[k],`unknown property "${k}"`)])}return C}function Jo(o){const t=o.value,l=o.styleSpec,p=l.terrain,y=o.style;let C=[];const M=xn(t);if(void 0===t)return C;if("object"!==M)return C=C.concat([new Ee("terrain",t,`object expected, ${M} found`)]),C;for(const k in t)C=C.concat(p[k]?o.validateSpec({key:k,value:t[k],valueSpec:p[k],validateSpec:o.validateSpec,style:y,styleSpec:l}):[new Ee(k,t[k],`unknown property "${k}"`)]);return C}function Ba(o){let t=[];const l=o.value,p=o.key;if(Array.isArray(l)){const y=[],C=[];for(const M in l)l[M].id&&y.includes(l[M].id)&&t.push(new Ee(p,l,`all the sprites' ids must be unique, but ${l[M].id} is duplicated`)),y.push(l[M].id),l[M].url&&C.includes(l[M].url)&&t.push(new Ee(p,l,`all the sprites' URLs must be unique, but ${l[M].url} is duplicated`)),C.push(l[M].url),t=t.concat(No({key:`${p}[${M}]`,value:l[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return t}return In({key:p,value:l})}const lr={"*":()=>[],array:Na,boolean:function(o){const t=o.value,l=o.key,p=xn(t);return"boolean"!==p?[new Ee(l,t,`boolean expected, ${p} found`)]:[]},number:zo,color:function(o){const t=o.key,l=o.value,p=xn(l);return"string"!==p?[new Ee(t,l,`color expected, ${p} found`)]:_n.parse(String(l))?[]:[new Ee(t,l,`color expected, "${l}" found`)]},constants:ks,enum:za,filter:Sa,function:el,layer:gs,object:No,source:xr,light:Nl,terrain:Jo,string:In,formatted:function(o){return 0===In(o).length?[]:fs(o)},resolvedImage:function(o){return 0===In(o).length?[]:fs(o)},padding:function(o){const t=o.key,l=o.value;if("array"===xn(l)){if(l.length<1||l.length>4)return[new Ee(t,l,`padding requires 1 to 4 values; ${l.length} values found`)];const p={type:"number"};let y=[];for(let C=0;C<l.length;C++)y=y.concat(o.validateSpec({key:`${t}[${C}]`,value:l[C],validateSpec:o.validateSpec,valueSpec:p}));return y}return zo({key:t,value:l,valueSpec:{}})},sprite:Ba};function Ta(o){const t=o.value,l=o.valueSpec,p=o.styleSpec;return o.validateSpec=Ta,l.expression&&Lr(ar(t))?el(o):l.expression&&Lo(br(t))?fs(o):l.type&&lr[l.type]?lr[l.type](o):No(st({},o,{valueSpec:l.type?p[l.type]:l}))}function tl(o){const t=o.value,l=o.key,p=In(o);return p.length||(-1===t.indexOf("{fontstack}")&&p.push(new Ee(l,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&p.push(new Ee(l,t,'"glyphs" url must include a "{range}" token'))),p}function Vo(o,t=ct){let l=[];return l=l.concat(Ta({key:"",value:o,valueSpec:t.$root,styleSpec:t,style:o,validateSpec:Ta,objectElementValidators:{glyphs:tl,"*":()=>[]}})),o.constants&&(l=l.concat(ks({key:"constants",value:o.constants,style:o,styleSpec:t,validateSpec:Ta}))),Wr(l)}function Ln(o){return function(t){return o({...t,validateSpec:Ta})}}function Wr(o){return[].concat(o).sort((t,l)=>t.line-l.line)}function bn(o){return function(...t){return Wr(o.apply(this,t))}}Vo.source=bn(Ln(xr)),Vo.sprite=bn(Ln(Ba)),Vo.glyphs=bn(Ln(tl)),Vo.light=bn(Ln(Nl)),Vo.terrain=bn(Ln(Jo)),Vo.layer=bn(Ln(gs)),Vo.filter=bn(Ln(Sa)),Vo.paintProperty=bn(Ln(Bo)),Vo.layoutProperty=bn(Ln(Xo));const Qo=Vo,_s=Qo.light,Dr=Qo.paintProperty,Va=Qo.layoutProperty;function ua(o,t){let l=!1;if(t&&t.length)for(const p of t)o.fire(new ei(new Error(p.message))),l=!0;return l}class go{constructor(t,l,p){const y=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const M=new Int32Array(this.arrayBuffer);t=M[0],this.d=(l=M[1])+2*(p=M[2]);for(let R=0;R<this.d*this.d;R++){const W=M[3+R],ee=M[3+R+1];y.push(W===ee?null:M.subarray(W,ee))}const k=M[3+y.length+1];this.keys=M.subarray(M[3+y.length],k),this.bboxes=M.subarray(k),this.insert=this._insertReadonly}else{this.d=l+2*p;for(let M=0;M<this.d*this.d;M++)y.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=t,this.padding=p,this.scale=l/t,this.uid=0;const C=p/l*t;this.min=-C,this.max=t+C}insert(t,l,p,y,C){this._forEachCell(l,p,y,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,l,p,y,C,M){this.cells[C].push(M)}query(t,l,p,y,C){const M=this.min,k=this.max;if(t<=M&&l<=M&&k<=p&&k<=y&&!C)return Array.prototype.slice.call(this.keys);{const R=[];return this._forEachCell(t,l,p,y,this._queryCell,R,{},C),R}}_queryCell(t,l,p,y,C,M,k,R){const W=this.cells[C];if(null!==W){const ee=this.keys,oe=this.bboxes;for(let pe=0;pe<W.length;pe++){const ge=W[pe];if(void 0===k[ge]){const we=4*ge;(R?R(oe[we+0],oe[we+1],oe[we+2],oe[we+3]):t<=oe[we+2]&&l<=oe[we+3]&&p>=oe[we+0]&&y>=oe[we+1])?(k[ge]=!0,M.push(ee[ge])):k[ge]=!1}}}}_forEachCell(t,l,p,y,C,M,k,R){const W=this._convertToCellCoord(t),ee=this._convertToCellCoord(l),oe=this._convertToCellCoord(p),pe=this._convertToCellCoord(y);for(let ge=W;ge<=oe;ge++)for(let we=ee;we<=pe;we++){const Ue=this.d*we+ge;if((!R||R(this._convertFromCellCoord(ge),this._convertFromCellCoord(we),this._convertFromCellCoord(ge+1),this._convertFromCellCoord(we+1)))&&C.call(this,t,l,p,y,Ue,M,k,R))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,l=3+this.cells.length+1+1;let p=0;for(let M=0;M<this.cells.length;M++)p+=this.cells[M].length;const y=new Int32Array(l+p+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let C=l;for(let M=0;M<t.length;M++){const k=t[M];y[3+M]=C,y.set(k,C),C+=k.length}return y[3+t.length]=C,y.set(this.keys,C),C+=this.keys.length,y[3+t.length+1]=C,y.set(this.bboxes,C),C+=this.bboxes.length,y.buffer}static serialize(t,l){const p=t.toArrayBuffer();return l&&l.push(p),{buffer:p}}static deserialize(t){return new go(t.buffer)}}const qn={};function Ai(o,t,l={}){if(qn[o])throw new Error(`${o} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:o,writeable:!1}),qn[o]={klass:t,omit:l.omit||[],shallow:l.shallow||[]}}Ai("Object",Object),Ai("TransferableGridIndex",go),Ai("Color",_n),Ai("Error",Error),Ai("AJAXError",Kt),Ai("ResolvedImage",Qi),Ai("StylePropertyFunction",vn),Ai("StyleExpression",Da,{omit:["_evaluator"]}),Ai("ZoomDependentExpression",on),Ai("ZoomConstantExpression",La),Ai("CompoundExpression",zr,{omit:["_evaluate"]});for(const o in Yr)Yr[o]._classRegistryKey||Ai(`Expression_${o}`,Yr[o]);function Gn(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&"ArrayBuffer"===o.constructor.name)}function Ps(o,t){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Gn(o)||hi(o))return t&&t.push(o),o;if(ArrayBuffer.isView(o)){const l=o;return t&&t.push(l.buffer),l}if(o instanceof ImageData)return t&&t.push(o.data.buffer),o;if(Array.isArray(o)){const l=[];for(const p of o)l.push(Ps(p,t));return l}if("object"==typeof o){const l=o.constructor,p=l._classRegistryKey;if(!p)throw new Error("can't serialize object of unregistered class");if(!qn[p])throw new Error(`${p} is not registered.`);const y=l.serialize?l.serialize(o,t):{};if(l.serialize){if(t&&y===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in o){if(!o.hasOwnProperty(C)||qn[p].omit.indexOf(C)>=0)continue;const M=o[C];y[C]=qn[p].shallow.indexOf(C)>=0?M:Ps(M,t)}o instanceof Error&&(y.message=o.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==p&&(y.$name=p),y}throw new Error("can't serialize object of type "+typeof o)}function cr(o){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Gn(o)||hi(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(cr);if("object"==typeof o){const t=o.$name||"Object";if(!qn[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:l}=qn[t];if(!l)throw new Error(`can't deserialize unregistered class ${t}`);if(l.deserialize)return l.deserialize(o);const p=Object.create(l.prototype);for(const y of Object.keys(o)){if("$name"===y)continue;const C=o[y];p[y]=qn[t].shallow.indexOf(y)>=0?C:cr(C)}return p}throw new Error("can't deserialize object of type "+typeof o)}class il{constructor(){this.first=!0}update(t,l){const p=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=l),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=p,!0))}}const Di={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function zl(o){for(const t of o)if(qs(t.charCodeAt(0)))return!0;return!1}function Bl(o){for(const t of o)if(!nl(t.charCodeAt(0)))return!1;return!0}function nl(o){return!(Di.Arabic(o)||Di["Arabic Supplement"](o)||Di["Arabic Extended-A"](o)||Di["Arabic Presentation Forms-A"](o)||Di["Arabic Presentation Forms-B"](o))}function qs(o){return!(746!==o&&747!==o&&(o<4352||!(Di["Bopomofo Extended"](o)||Di.Bopomofo(o)||Di["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Di["CJK Compatibility Ideographs"](o)||Di["CJK Compatibility"](o)||Di["CJK Radicals Supplement"](o)||Di["CJK Strokes"](o)||!(!Di["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||12336===o)||Di["CJK Unified Ideographs Extension A"](o)||Di["CJK Unified Ideographs"](o)||Di["Enclosed CJK Letters and Months"](o)||Di["Hangul Compatibility Jamo"](o)||Di["Hangul Jamo Extended-A"](o)||Di["Hangul Jamo Extended-B"](o)||Di["Hangul Jamo"](o)||Di["Hangul Syllables"](o)||Di.Hiragana(o)||Di["Ideographic Description Characters"](o)||Di.Kanbun(o)||Di["Kangxi Radicals"](o)||Di["Katakana Phonetic Extensions"](o)||Di.Katakana(o)&&12540!==o||!(!Di["Halfwidth and Fullwidth Forms"](o)||65288===o||65289===o||65293===o||o>=65306&&o<=65310||65339===o||65341===o||65343===o||o>=65371&&o<=65503||65507===o||o>=65512&&o<=65519)||!(!Di["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Di["Unified Canadian Aboriginal Syllabics"](o)||Di["Unified Canadian Aboriginal Syllabics Extended"](o)||Di["Vertical Forms"](o)||Di["Yijing Hexagram Symbols"](o)||Di["Yi Syllables"](o)||Di["Yi Radicals"](o))))}function rl(o){return!(qs(o)||(t=o,Di["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Di["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Di["Letterlike Symbols"](t)||Di["Number Forms"](t)||Di["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Di["Control Pictures"](t)&&9251!==t||Di["Optical Character Recognition"](t)||Di["Enclosed Alphanumerics"](t)||Di["Geometric Shapes"](t)||Di["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Di["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Di["CJK Symbols and Punctuation"](t)||Di.Katakana(t)||Di["Private Use Area"](t)||Di["CJK Compatibility Forms"](t)||Di["Small Form Variants"](t)||Di["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t));var t}function B(o){return o>=1424&&o<=2303||Di["Arabic Presentation Forms-A"](o)||Di["Arabic Presentation Forms-B"](o)}function ne(o,t){return!(!t&&B(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Di.Khmer(o))}function H(o){for(const t of o)if(B(t.charCodeAt(0)))return!0;return!1}const ye="deferred",Ge="loading",Ft="loaded";let Qt=null,ki="unavailable",Mn=null;const Un=function(o){o&&"string"==typeof o&&o.indexOf("NetworkError")>-1&&(ki="error"),Qt&&Qt(o)};function Dn(){hn.fire(new yt("pluginStateChange",{pluginStatus:ki,pluginURL:Mn}))}const hn=new pi,nr=function(){return ki},Vn=function(){if(ki!==ye||!Mn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ki=Ge,Dn(),Mn&&Xt({url:Mn},o=>{o?Un(o):(ki=Ft,Dn())})},Hn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ki===Ft||null!=Hn.applyArabicShaping,isLoading:()=>ki===Ge,setState(o){if(!Vt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ki=o.pluginStatus,Mn=o.pluginURL},isParsed(){if(!Vt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Hn.applyArabicShaping&&null!=Hn.processBidirectionalText&&null!=Hn.processStyledBidirectionalText},getPluginURL(){if(!Vt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Mn}};class An{constructor(t,l){this.zoom=t,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new il,this.transition={})}isSupportedScript(t){return function(l,p){for(const y of l)if(!ne(y.charCodeAt(0),p))return!1;return!0}(t,Hn.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,l=t-Math.floor(t),p=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*l}}}class jr{constructor(t,l){this.property=t,this.value=l,this.expression=function(p,y){if(Lr(p))return new vn(p,y);if(Lo(p)){const C=ps(p,y);if("error"===C.result)throw new Error(C.value.map(M=>`${M.key}: ${M.message}`).join(", "));return C.value}{let C=p;return"color"===y.type&&"string"==typeof p?C=_n.parse(p):"padding"!==y.type||"number"!=typeof p&&!Array.isArray(p)||(C=Mr.parse(p)),{kind:"constant",evaluate:()=>C}}}(void 0===l?t.specification.default:l,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,l,p){return this.property.possiblyEvaluate(this,t,l,p)}}class Uo{constructor(t){this.property=t,this.value=new jr(t,void 0)}transitioned(t,l){return new to(this.property,this.value,l,Gt({},t.transition,this.transition),t.now)}untransitioned(){return new to(this.property,this.value,null,{},0)}}class _o{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return Ct(this._values[t].value.value)}setValue(t,l){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Uo(this._values[t].property)),this._values[t].value=new jr(this._values[t].property,null===l?void 0:Ct(l))}getTransition(t){return Ct(this._values[t].transition)}setTransition(t,l){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Uo(this._values[t].property)),this._values[t].transition=Ct(l)||void 0}serialize(){const t={};for(const l of Object.keys(this._values)){const p=this.getValue(l);void 0!==p&&(t[l]=p);const y=this.getTransition(l);void 0!==y&&(t[`${l}-transition`]=y)}return t}transitioned(t,l){const p=new ys(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].transitioned(t,l._values[y]);return p}untransitioned(){const t=new ys(this._properties);for(const l of Object.keys(this._values))t._values[l]=this._values[l].untransitioned();return t}}class to{constructor(t,l,p,y,C){this.property=t,this.value=l,this.begin=C+y.delay||0,this.end=this.begin+y.duration||0,t.specification.transition&&(y.delay||y.duration)&&(this.prior=p)}possiblyEvaluate(t,l,p){const y=t.now||0,C=this.value.possiblyEvaluate(t,l,p),M=this.prior;if(M){if(y>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(y<this.begin)return M.possiblyEvaluate(t,l,p);{const k=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(t,l,p),C,function(R){if(R<=0)return 0;if(R>=1)return 1;const W=R*R,ee=W*R;return 4*(R<.5?ee:3*(R-W)+ee-.75)}(k))}}return C}}class ys{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,l,p){const y=new Ua(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(t,l,p);return y}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class es{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return Ct(this._values[t].value)}setValue(t,l){this._values[t]=new jr(this._values[t].property,null===l?void 0:Ct(l))}serialize(){const t={};for(const l of Object.keys(this._values)){const p=this.getValue(l);void 0!==p&&(t[l]=p)}return t}possiblyEvaluate(t,l,p){const y=new Ua(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(t,l,p);return y}}class ts{constructor(t,l,p){this.property=t,this.value=l,this.parameters=p}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,l,p,y){return this.property.evaluate(this.value,this.parameters,t,l,p,y)}}class Ua{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Zi{constructor(t){this.specification=t}possiblyEvaluate(t,l){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(l)}interpolate(t,l,p){const y=Yn[this.specification.type];return y?y(t,l,p):t}}class mi{constructor(t,l){this.specification=t,this.overrides=l}possiblyEvaluate(t,l,p,y){return new ts(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(l,null,{},p,y)}:t.expression,l)}interpolate(t,l,p){if("constant"!==t.value.kind||"constant"!==l.value.kind)return t;if(void 0===t.value.value||void 0===l.value.value)return new ts(this,{kind:"constant",value:void 0},t.parameters);const y=Yn[this.specification.type];if(y){const C=y(t.value.value,l.value.value,p);return new ts(this,{kind:"constant",value:C},t.parameters)}return t}evaluate(t,l,p,y,C,M){return"constant"===t.kind?t.value:t.evaluate(l,p,y,C,M)}}class ja extends mi{possiblyEvaluate(t,l,p,y){if(void 0===t.value)return new ts(this,{kind:"constant",value:void 0},l);if("constant"===t.expression.kind){const C=t.expression.evaluate(l,null,{},p,y),M="resolvedImage"===t.property.specification.type&&"string"!=typeof C?C.name:C,k=this._calculate(M,M,M,l);return new ts(this,{kind:"constant",value:k},l)}if("camera"===t.expression.kind){const C=this._calculate(t.expression.evaluate({zoom:l.zoom-1}),t.expression.evaluate({zoom:l.zoom}),t.expression.evaluate({zoom:l.zoom+1}),l);return new ts(this,{kind:"constant",value:C},l)}return new ts(this,t.expression,l)}evaluate(t,l,p,y,C,M){if("source"===t.kind){const k=t.evaluate(l,p,y,C,M);return this._calculate(k,k,k,l)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(l.zoom)-1},p,y),t.evaluate({zoom:Math.floor(l.zoom)},p,y),t.evaluate({zoom:Math.floor(l.zoom)+1},p,y),l):t.value}_calculate(t,l,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:t,to:l}:{from:p,to:l}}interpolate(t){return t}}class lc{constructor(t){this.specification=t}possiblyEvaluate(t,l,p,y){if(void 0!==t.value){if("constant"===t.expression.kind){const C=t.expression.evaluate(l,null,{},p,y);return this._calculate(C,C,C,l)}return this._calculate(t.expression.evaluate(new An(Math.floor(l.zoom-1),l)),t.expression.evaluate(new An(Math.floor(l.zoom),l)),t.expression.evaluate(new An(Math.floor(l.zoom+1),l)),l)}}_calculate(t,l,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:t,to:l}:{from:p,to:l}}interpolate(t){return t}}class So{constructor(t){this.specification=t}possiblyEvaluate(t,l,p,y){return!!t.expression.evaluate(l,null,{},p,y)}interpolate(){return!1}}class jo{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in t){const p=t[l];p.specification.overridable&&this.overridableProperties.push(l);const y=this.defaultPropertyValues[l]=new jr(p,void 0),C=this.defaultTransitionablePropertyValues[l]=new Uo(p);this.defaultTransitioningPropertyValues[l]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=y.possiblyEvaluate({})}}}Ai("DataDrivenProperty",mi),Ai("DataConstantProperty",Zi),Ai("CrossFadedDataDrivenProperty",ja),Ai("CrossFadedProperty",lc),Ai("ColorRampProperty",So);const Ha="-transition";class Hr extends pi{constructor(t,l){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),l.layout&&(this._unevaluatedLayout=new es(l.layout)),l.paint)){this._transitionablePaint=new _o(l.paint);for(const p in t.paint)this.setPaintProperty(p,t.paint[p],{validate:!1});for(const p in t.layout)this.setLayoutProperty(p,t.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ua(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,l,p={}){null!=l&&this._validate(Va,`layers.${this.id}.layout.${t}`,t,l,p)||("visibility"!==t?this._unevaluatedLayout.setValue(t,l):this.visibility=l)}getPaintProperty(t){return t.endsWith(Ha)?this._transitionablePaint.getTransition(t.slice(0,-Ha.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,l,p={}){if(null!=l&&this._validate(Dr,`layers.${this.id}.paint.${t}`,t,l,p))return!1;if(t.endsWith(Ha))return this._transitionablePaint.setTransition(t.slice(0,-Ha.length),l||void 0),!1;{const y=this._transitionablePaint._values[t],C="cross-faded-data-driven"===y.property.specification["property-type"],M=y.value.isDataDriven(),k=y.value;this._transitionablePaint.setValue(t,l),this._handleSpecialPaintPropertyUpdate(t);const R=this._transitionablePaint._values[t].value;return R.isDataDriven()||M||C||this._handleOverridablePaintPropertyUpdate(t,k,R)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,l,p){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,l){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,l)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Wt(t,(l,p)=>!(void 0===l||"layout"===p&&!Object.keys(l).length||"paint"===p&&!Object.keys(l).length))}_validate(t,l,p,y,C={}){return(!C||!1!==C.validate)&&ua(this,t.call(Qo,{key:l,layerType:this.type,objectKey:p,value:y,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const l=this.paint.get(t);if(l instanceof ts&&Ts(l.property.specification)&&("source"===l.value.kind||"composite"===l.value.kind)&&l.value.isStateDependent)return!0}return!1}}const Pc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class jn{constructor(t,l){this._structArray=t,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,l){return t._trim(),l&&(t.isTransferred=!0,l.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const l=Object.create(this.prototype);return l.arrayBuffer=t.arrayBuffer,l.length=t.length,l.capacity=t.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Sr(o,t=1){let l=0,p=0;return{members:o.map(y=>{const C=Pc[y.type].BYTES_PER_ELEMENT,M=l=Vl(l,Math.max(t,C)),k=y.components||1;return p=Math.max(p,C),l+=C*k,{name:y.name,type:y.type,components:k,offset:M}}),size:Vl(l,Math.max(p,t)),alignment:t}}function Vl(o,t){return Math.ceil(o/t)*t}class Os extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,l){const p=this.length;return this.resize(p+1),this.emplace(p,t,l)}emplace(t,l,p){const y=2*t;return this.int16[y+0]=l,this.int16[y+1]=p,t}}Os.prototype.bytesPerElement=4,Ai("StructArrayLayout2i4",Os);class ol extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,t,l,p)}emplace(t,l,p,y){const C=3*t;return this.int16[C+0]=l,this.int16[C+1]=p,this.int16[C+2]=y,t}}ol.prototype.bytesPerElement=6,Ai("StructArrayLayout3i6",ol);class cc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,l,p,y){const C=this.length;return this.resize(C+1),this.emplace(C,t,l,p,y)}emplace(t,l,p,y,C){const M=4*t;return this.int16[M+0]=l,this.int16[M+1]=p,this.int16[M+2]=y,this.int16[M+3]=C,t}}cc.prototype.bytesPerElement=8,Ai("StructArrayLayout4i8",cc);class ha extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C,M){const k=this.length;return this.resize(k+1),this.emplace(k,t,l,p,y,C,M)}emplace(t,l,p,y,C,M,k){const R=6*t;return this.int16[R+0]=l,this.int16[R+1]=p,this.int16[R+2]=y,this.int16[R+3]=C,this.int16[R+4]=M,this.int16[R+5]=k,t}}ha.prototype.bytesPerElement=12,Ai("StructArrayLayout2i4i12",ha);class $a extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C,M){const k=this.length;return this.resize(k+1),this.emplace(k,t,l,p,y,C,M)}emplace(t,l,p,y,C,M,k){const R=4*t,W=8*t;return this.int16[R+0]=l,this.int16[R+1]=p,this.uint8[W+4]=y,this.uint8[W+5]=C,this.uint8[W+6]=M,this.uint8[W+7]=k,t}}$a.prototype.bytesPerElement=8,Ai("StructArrayLayout2i4ub8",$a);class To extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,l){const p=this.length;return this.resize(p+1),this.emplace(p,t,l)}emplace(t,l,p){const y=2*t;return this.float32[y+0]=l,this.float32[y+1]=p,t}}To.prototype.bytesPerElement=8,Ai("StructArrayLayout2f8",To);class yl extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C,M,k,R,W,ee){const oe=this.length;return this.resize(oe+1),this.emplace(oe,t,l,p,y,C,M,k,R,W,ee)}emplace(t,l,p,y,C,M,k,R,W,ee,oe){const pe=10*t;return this.uint16[pe+0]=l,this.uint16[pe+1]=p,this.uint16[pe+2]=y,this.uint16[pe+3]=C,this.uint16[pe+4]=M,this.uint16[pe+5]=k,this.uint16[pe+6]=R,this.uint16[pe+7]=W,this.uint16[pe+8]=ee,this.uint16[pe+9]=oe,t}}yl.prototype.bytesPerElement=20,Ai("StructArrayLayout10ui20",yl);class io extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C,M,k,R,W,ee,oe,pe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,t,l,p,y,C,M,k,R,W,ee,oe,pe)}emplace(t,l,p,y,C,M,k,R,W,ee,oe,pe,ge){const we=12*t;return this.int16[we+0]=l,this.int16[we+1]=p,this.int16[we+2]=y,this.int16[we+3]=C,this.uint16[we+4]=M,this.uint16[we+5]=k,this.uint16[we+6]=R,this.uint16[we+7]=W,this.int16[we+8]=ee,this.int16[we+9]=oe,this.int16[we+10]=pe,this.int16[we+11]=ge,t}}io.prototype.bytesPerElement=24,Ai("StructArrayLayout4i4ui4i24",io);class Ul extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,t,l,p)}emplace(t,l,p,y){const C=3*t;return this.float32[C+0]=l,this.float32[C+1]=p,this.float32[C+2]=y,t}}Ul.prototype.bytesPerElement=12,Ai("StructArrayLayout3f12",Ul);class co extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const l=this.length;return this.resize(l+1),this.emplace(l,t)}emplace(t,l){return this.uint32[1*t+0]=l,t}}co.prototype.bytesPerElement=4,Ai("StructArrayLayout1ul4",co);class sl extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C,M,k,R,W){const ee=this.length;return this.resize(ee+1),this.emplace(ee,t,l,p,y,C,M,k,R,W)}emplace(t,l,p,y,C,M,k,R,W,ee){const oe=10*t,pe=5*t;return this.int16[oe+0]=l,this.int16[oe+1]=p,this.int16[oe+2]=y,this.int16[oe+3]=C,this.int16[oe+4]=M,this.int16[oe+5]=k,this.uint32[pe+3]=R,this.uint16[oe+8]=W,this.uint16[oe+9]=ee,t}}sl.prototype.bytesPerElement=20,Ai("StructArrayLayout6i1ul2ui20",sl);class Ks extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C,M){const k=this.length;return this.resize(k+1),this.emplace(k,t,l,p,y,C,M)}emplace(t,l,p,y,C,M,k){const R=6*t;return this.int16[R+0]=l,this.int16[R+1]=p,this.int16[R+2]=y,this.int16[R+3]=C,this.int16[R+4]=M,this.int16[R+5]=k,t}}Ks.prototype.bytesPerElement=12,Ai("StructArrayLayout2i2i2i12",Ks);class is extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C){const M=this.length;return this.resize(M+1),this.emplace(M,t,l,p,y,C)}emplace(t,l,p,y,C,M){const k=4*t,R=8*t;return this.float32[k+0]=l,this.float32[k+1]=p,this.float32[k+2]=y,this.int16[R+6]=C,this.int16[R+7]=M,t}}is.prototype.bytesPerElement=16,Ai("StructArrayLayout2f1f2i16",is);class Ho extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,l,p,y){const C=this.length;return this.resize(C+1),this.emplace(C,t,l,p,y)}emplace(t,l,p,y,C){const M=12*t,k=3*t;return this.uint8[M+0]=l,this.uint8[M+1]=p,this.float32[k+1]=y,this.float32[k+2]=C,t}}Ho.prototype.bytesPerElement=12,Ai("StructArrayLayout2ub2f12",Ho);class vl extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,t,l,p)}emplace(t,l,p,y){const C=3*t;return this.uint16[C+0]=l,this.uint16[C+1]=p,this.uint16[C+2]=y,t}}vl.prototype.bytesPerElement=6,Ai("StructArrayLayout3ui6",vl);class jl extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C,M,k,R,W,ee,oe,pe,ge,we,Ue,Le,dt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,t,l,p,y,C,M,k,R,W,ee,oe,pe,ge,we,Ue,Le,dt)}emplace(t,l,p,y,C,M,k,R,W,ee,oe,pe,ge,we,Ue,Le,dt,gt){const lt=24*t,Mt=12*t,It=48*t;return this.int16[lt+0]=l,this.int16[lt+1]=p,this.uint16[lt+2]=y,this.uint16[lt+3]=C,this.uint32[Mt+2]=M,this.uint32[Mt+3]=k,this.uint32[Mt+4]=R,this.uint16[lt+10]=W,this.uint16[lt+11]=ee,this.uint16[lt+12]=oe,this.float32[Mt+7]=pe,this.float32[Mt+8]=ge,this.uint8[It+36]=we,this.uint8[It+37]=Ue,this.uint8[It+38]=Le,this.uint32[Mt+10]=dt,this.int16[lt+22]=gt,t}}jl.prototype.bytesPerElement=48,Ai("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jl);class Ia extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,l,p,y,C,M,k,R,W,ee,oe,pe,ge,we,Ue,Le,dt,gt,lt,Mt,It,ti,Bi,$i,Pi,Si,Ci,Oi){const Ii=this.length;return this.resize(Ii+1),this.emplace(Ii,t,l,p,y,C,M,k,R,W,ee,oe,pe,ge,we,Ue,Le,dt,gt,lt,Mt,It,ti,Bi,$i,Pi,Si,Ci,Oi)}emplace(t,l,p,y,C,M,k,R,W,ee,oe,pe,ge,we,Ue,Le,dt,gt,lt,Mt,It,ti,Bi,$i,Pi,Si,Ci,Oi,Ii){const ui=34*t,Ki=17*t;return this.int16[ui+0]=l,this.int16[ui+1]=p,this.int16[ui+2]=y,this.int16[ui+3]=C,this.int16[ui+4]=M,this.int16[ui+5]=k,this.int16[ui+6]=R,this.int16[ui+7]=W,this.uint16[ui+8]=ee,this.uint16[ui+9]=oe,this.uint16[ui+10]=pe,this.uint16[ui+11]=ge,this.uint16[ui+12]=we,this.uint16[ui+13]=Ue,this.uint16[ui+14]=Le,this.uint16[ui+15]=dt,this.uint16[ui+16]=gt,this.uint16[ui+17]=lt,this.uint16[ui+18]=Mt,this.uint16[ui+19]=It,this.uint16[ui+20]=ti,this.uint16[ui+21]=Bi,this.uint16[ui+22]=$i,this.uint32[Ki+12]=Pi,this.float32[Ki+13]=Si,this.float32[Ki+14]=Ci,this.float32[Ki+15]=Oi,this.float32[Ki+16]=Ii,t}}Ia.prototype.bytesPerElement=68,Ai("StructArrayLayout8i15ui1ul4f68",Ia);class Xs extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const l=this.length;return this.resize(l+1),this.emplace(l,t)}emplace(t,l){return this.float32[1*t+0]=l,t}}Xs.prototype.bytesPerElement=4,Ai("StructArrayLayout1f4",Xs);class Js extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,t,l,p)}emplace(t,l,p,y){const C=4*t;return this.uint32[2*t+0]=l,this.uint16[C+2]=p,this.uint16[C+3]=y,t}}Js.prototype.bytesPerElement=8,Ai("StructArrayLayout1ul2ui8",Js);class v extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,l){const p=this.length;return this.resize(p+1),this.emplace(p,t,l)}emplace(t,l,p){const y=2*t;return this.uint16[y+0]=l,this.uint16[y+1]=p,t}}v.prototype.bytesPerElement=4,Ai("StructArrayLayout2ui4",v);class n extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const l=this.length;return this.resize(l+1),this.emplace(l,t)}emplace(t,l){return this.uint16[1*t+0]=l,t}}n.prototype.bytesPerElement=2,Ai("StructArrayLayout1ui2",n);class d extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,l,p,y){const C=this.length;return this.resize(C+1),this.emplace(C,t,l,p,y)}emplace(t,l,p,y,C){const M=4*t;return this.float32[M+0]=l,this.float32[M+1]=p,this.float32[M+2]=y,this.float32[M+3]=C,t}}d.prototype.bytesPerElement=16,Ai("StructArrayLayout4f16",d);class g extends jn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ae(this.anchorPointX,this.anchorPointY)}}g.prototype.size=20;class b extends sl{get(t){return new g(this,t)}}Ai("CollisionBoxArray",b);class E extends jn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}E.prototype.size=48;class P extends jl{get(t){return new E(this,t)}}Ai("PlacedSymbolArray",P);class N extends jn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}N.prototype.size=68;class L extends Ia{get(t){return new N(this,t)}}Ai("SymbolInstanceArray",L);class G extends Xs{getoffsetX(t){return this.float32[1*t+0]}}Ai("GlyphOffsetArray",G);class ie extends ol{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Ai("SymbolLineVertexArray",ie);class te extends jn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}te.prototype.size=8;class ve extends Js{get(t){return new te(this,t)}}Ai("FeatureIndexArray",ve);class Fe extends Os{}class Pe extends Os{}class Ne extends Os{}class Be extends ha{}class at extends $a{}class Et extends To{}class He extends yl{}class bt extends io{}class Rt extends Ul{}class ii extends co{}class I extends Ks{}class A extends Ho{}class D extends vl{}class F extends v{}const Z=Sr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ue}=Z;class le{constructor(t=[]){this.segments=t}prepareSegment(t,l,p,y){let C=this.segments[this.segments.length-1];return t>le.MAX_VERTEX_ARRAY_LENGTH&&tt(`Max vertices per segment is ${le.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!C||C.vertexLength+t>le.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==y)&&(C={vertexOffset:l.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},void 0!==y&&(C.sortKey=y),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const t of this.segments)for(const l in t.vaos)t.vaos[l].destroy()}static simpleSegment(t,l,p,y){return new le([{vertexOffset:t,primitiveOffset:l,vertexLength:p,primitiveLength:y,vaos:{},sortKey:0}])}}function Ke(o,t){return 256*(o=Ye(Math.floor(o),0,255))+Ye(Math.floor(t),0,255)}le.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ai("SegmentVector",le);const ut=Sr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var di={exports:{}},kn=function(o,t){var l,p,y,C,M,k,R,W;for(p=o.length-(l=3&o.length),y=t,M=3432918353,k=461845907,W=0;W<p;)R=255&o.charCodeAt(W)|(255&o.charCodeAt(++W))<<8|(255&o.charCodeAt(++W))<<16|(255&o.charCodeAt(++W))<<24,++W,y=27492+(65535&(C=5*(65535&(y=(y^=R=(65535&(R=(R=(65535&R)*M+(((R>>>16)*M&65535)<<16)&4294967295)<<15|R>>>17))*k+(((R>>>16)*k&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(R=0,l){case 3:R^=(255&o.charCodeAt(W+2))<<16;case 2:R^=(255&o.charCodeAt(W+1))<<8;case 1:y^=R=(65535&(R=(R=(65535&(R^=255&o.charCodeAt(W)))*M+(((R>>>16)*M&65535)<<16)&4294967295)<<15|R>>>17))*k+(((R>>>16)*k&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0},Tr=function(o,t){for(var l,p=o.length,y=t^p,C=0;p>=4;)l=1540483477*(65535&(l=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(l>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++C;switch(p){case 3:y^=(255&o.charCodeAt(C+2))<<16;case 2:y^=(255&o.charCodeAt(C+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(C)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};di.exports=kn,di.exports.murmur3=kn,di.exports.murmur2=Tr;var ur=Ze(di.exports);class rr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,l,p,y){this.ids.push(Io(t)),this.positions.push(l,p,y)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Io(t);let p=0,y=this.ids.length-1;for(;p<y;){const M=p+y>>1;this.ids[M]>=l?y=M:p=M+1}const C=[];for(;this.ids[p]===l;)C.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return C}static serialize(t,l){const p=new Float64Array(t.ids),y=new Uint32Array(t.positions);return yo(p,y,0,p.length-1),l&&l.push(p.buffer,y.buffer),{ids:p,positions:y}}static deserialize(t){const l=new rr;return l.ids=t.ids,l.positions=t.positions,l.indexed=!0,l}}function Io(o){const t=+o;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ur(String(o))}function yo(o,t,l,p){for(;l<p;){const y=o[l+p>>1];let C=l-1,M=p+1;for(;;){do{C++}while(o[C]<y);do{M--}while(o[M]>y);if(C>=M)break;$o(o,C,M),$o(t,3*C,3*M),$o(t,3*C+1,3*M+1),$o(t,3*C+2,3*M+2)}M-l<p-M?(yo(o,t,l,M),l=M+1):(yo(o,t,M+1,p),p=M)}}function $o(o,t,l){const p=o[t];o[t]=o[l],o[l]=p}Ai("FeaturePositionMap",rr);class uo{constructor(t,l){this.gl=t.gl,this.location=l}}class Qs extends uo{constructor(t,l){super(t,l),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Ga extends uo{constructor(t,l){super(t,l),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class wr extends uo{constructor(t,l){super(t,l),this.current=_n.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const ho=new Float32Array(16);function Nn(o){return[Ke(255*o.r,255*o.g),Ke(255*o.b,255*o.a)]}class $r{constructor(t,l,p){this.value=t,this.uniformNames=l.map(y=>`u_${y}`),this.type=p}setUniform(t,l,p){t.set(p.constantOr(this.value))}getBinding(t,l,p){return"color"===this.type?new wr(t,l):new Qs(t,l)}}class no{constructor(t,l){this.uniformNames=l.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=t.tlbr}setUniform(t,l,p,y){const C="u_pattern_to"===y?this.patternTo:"u_pattern_from"===y?this.patternFrom:"u_pixel_ratio_to"===y?this.pixelRatioTo:"u_pixel_ratio_from"===y?this.pixelRatioFrom:null;C&&t.set(C)}getBinding(t,l,p){return"u_pattern"===p.substr(0,9)?new Ga(t,l):new Qs(t,l)}}class Kn{constructor(t,l,p,y){this.expression=t,this.type=p,this.maxValue=0,this.paintVertexAttributes=l.map(C=>({name:`a_${C}`,type:"Float32",components:"color"===p?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(t,l,p,y,C){const M=this.paintVertexArray.length,k=this.expression.evaluate(new An(0),l,{},y,[],C);this.paintVertexArray.resize(t),this._setPaintValue(M,t,k)}updatePaintArray(t,l,p,y){const C=this.expression.evaluate({zoom:0},p,y);this._setPaintValue(t,l,C)}_setPaintValue(t,l,p){if("color"===this.type){const y=Nn(p);for(let C=t;C<l;C++)this.paintVertexArray.emplace(C,y[0],y[1])}else{for(let y=t;y<l;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ro{constructor(t,l,p,y,C,M){this.expression=t,this.uniformNames=l.map(k=>`u_${k}_t`),this.type=p,this.useIntegerZoom=y,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=l.map(k=>({name:`a_${k}`,type:"Float32",components:"color"===p?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(t,l,p,y,C){const M=this.expression.evaluate(new An(this.zoom),l,{},y,[],C),k=this.expression.evaluate(new An(this.zoom+1),l,{},y,[],C),R=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(R,t,M,k)}updatePaintArray(t,l,p,y){const C=this.expression.evaluate({zoom:this.zoom},p,y),M=this.expression.evaluate({zoom:this.zoom+1},p,y);this._setPaintValue(t,l,C,M)}_setPaintValue(t,l,p,y){if("color"===this.type){const C=Nn(p),M=Nn(y);for(let k=t;k<l;k++)this.paintVertexArray.emplace(k,C[0],C[1],M[0],M[1])}else{for(let C=t;C<l;C++)this.paintVertexArray.emplace(C,p,y);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(y))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,l){const p=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,y=Ye(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);t.set(y)}getBinding(t,l,p){return new Qs(t,l)}}class vo{constructor(t,l,p,y,C,M){this.expression=t,this.type=l,this.useIntegerZoom=p,this.zoom=y,this.layerId=M,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(t,l,p){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(y,t,l.patterns&&l.patterns[this.layerId],p)}updatePaintArray(t,l,p,y,C){this._setPaintValues(t,l,p.patterns&&p.patterns[this.layerId],C)}_setPaintValues(t,l,p,y){if(!y||!p)return;const{min:C,mid:M,max:k}=p,R=y[C],W=y[M],ee=y[k];if(R&&W&&ee)for(let oe=t;oe<l;oe++)this.zoomInPaintVertexArray.emplace(oe,W.tl[0],W.tl[1],W.br[0],W.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],W.pixelRatio,R.pixelRatio),this.zoomOutPaintVertexArray.emplace(oe,W.tl[0],W.tl[1],W.br[0],W.br[1],ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],W.pixelRatio,ee.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,ut.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,ut.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class al{constructor(t,l,p){this.binders={},this._buffers=[];const y=[];for(const C in t.paint._values){if(!p(C))continue;const M=t.paint.get(C);if(!(M instanceof ts&&Ts(M.property.specification)))continue;const k=im(C,t.type),R=M.value,W=M.property.specification.type,ee=M.property.useIntegerZoom,oe=M.property.specification["property-type"],pe="cross-faded"===oe||"cross-faded-data-driven"===oe;if("constant"===R.kind)this.binders[C]=pe?new no(R.value,k):new $r(R.value,k,W),y.push(`/u_${C}`);else if("source"===R.kind||pe){const ge=id(C,W,"source");this.binders[C]=pe?new vo(R,W,ee,l,ge,t.id):new Kn(R,k,W,ge),y.push(`/a_${C}`)}else{const ge=id(C,W,"composite");this.binders[C]=new ro(R,k,W,ee,l,ge),y.push(`/z_${C}`)}}this.cacheKey=y.sort().join("")}getMaxValue(t){const l=this.binders[t];return l instanceof Kn||l instanceof ro?l.maxValue:0}populatePaintArrays(t,l,p,y,C){for(const M in this.binders){const k=this.binders[M];(k instanceof Kn||k instanceof ro||k instanceof vo)&&k.populatePaintArray(t,l,p,y,C)}}setConstantPatternPositions(t,l){for(const p in this.binders){const y=this.binders[p];y instanceof no&&y.setConstantPatternPositions(t,l)}}updatePaintArrays(t,l,p,y,C){let M=!1;for(const k in t){const R=l.getPositions(k);for(const W of R){const ee=p.feature(W.index);for(const oe in this.binders){const pe=this.binders[oe];if((pe instanceof Kn||pe instanceof ro||pe instanceof vo)&&!0===pe.expression.isStateDependent){const ge=y.paint.get(oe);pe.expression=ge.value,pe.updatePaintArray(W.start,W.end,ee,t[k],C),M=!0}}}}return M}defines(){const t=[];for(const l in this.binders){const p=this.binders[l];(p instanceof $r||p instanceof no)&&t.push(...p.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return t}getBinderAttributes(){const t=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof Kn||p instanceof ro)for(let y=0;y<p.paintVertexAttributes.length;y++)t.push(p.paintVertexAttributes[y].name);else if(p instanceof vo)for(let y=0;y<ut.members.length;y++)t.push(ut.members[y].name)}return t}getBinderUniforms(){const t=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof $r||p instanceof no||p instanceof ro)for(const y of p.uniformNames)t.push(y)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,l){const p=[];for(const y in this.binders){const C=this.binders[y];if(C instanceof $r||C instanceof no||C instanceof ro)for(const M of C.uniformNames)if(l[M]){const k=C.getBinding(t,l[M],M);p.push({name:M,property:y,binding:k})}}return p}setUniforms(t,l,p,y){for(const{name:C,property:M,binding:k}of l)this.binders[M].setUniform(k,y,p.get(M),C)}updatePaintBuffers(t){this._buffers=[];for(const l in this.binders){const p=this.binders[l];if(t&&p instanceof vo){const y=2===t.fromScale?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(p instanceof Kn||p instanceof ro)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(t){for(const l in this.binders){const p=this.binders[l];(p instanceof Kn||p instanceof ro||p instanceof vo)&&p.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const l=this.binders[t];(l instanceof Kn||l instanceof ro||l instanceof vo)&&l.destroy()}}}class ea{constructor(t,l,p=(()=>!0)){this.programConfigurations={};for(const y of t)this.programConfigurations[y.id]=new al(y,l,p);this.needsUpload=!1,this._featureMap=new rr,this._bufferOffset=0}populatePaintArrays(t,l,p,y,C,M){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(t,l,y,C,M);void 0!==l.id&&this._featureMap.add(l.id,p,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,l,p,y){for(const C of p)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(t,this._featureMap,l,C,y)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function im(o,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${t}-`,"").replace(/-/g,"_")]}function id(o,t,l){const y={"line-pattern":{source:He,composite:He},"fill-pattern":{source:He,composite:He},"fill-extrusion-pattern":{source:He,composite:He}}[o];return y&&y[l]||{color:{source:To,composite:d},number:{source:Xs,composite:To}}[t][l]}Ai("ConstantBinder",$r),Ai("CrossFadedConstantBinder",no),Ai("SourceExpressionBinder",Kn),Ai("CrossFadedCompositeBinder",vo),Ai("CompositeExpressionBinder",ro),Ai("ProgramConfiguration",al,{omit:["_buffers"]}),Ai("ProgramConfigurationSet",ea);var Ir=8192;const nd=Math.pow(2,14)-1,dc=-nd-1;function Za(o){const t=Ir/o.extent,l=o.loadGeometry();for(let p=0;p<l.length;p++){const y=l[p];for(let C=0;C<y.length;C++){const M=y[C],k=Math.round(M.x*t),R=Math.round(M.y*t);M.x=Ye(k,dc,nd),M.y=Ye(R,dc,nd),(k<M.x||k>M.x+1||R<M.y||R>M.y+1)&&tt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function bl(o,t){return{type:o.type,id:o.id,properties:o.properties,geometry:t?Za(o):[]}}function uc(o,t,l,p,y){o.emplaceBack(2*t+(p+1)/2,2*l+(y+1)/2)}class Ud{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(l=>l.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Pe,this.indexArray=new D,this.segments=new le,this.programConfigurations=new ea(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(t,l,p){const y=this.layers[0],C=[];let M=null,k=!1;"circle"===y.type&&(M=y.layout.get("circle-sort-key"),k=!M.isConstant());for(const{feature:R,id:W,index:ee,sourceLayerIndex:oe}of t){const pe=this.layers[0]._featureFilter.needGeometry,ge=bl(R,pe);if(!this.layers[0]._featureFilter.filter(new An(this.zoom),ge,p))continue;const we=k?M.evaluate(ge,{},p):void 0,Ue={id:W,properties:R.properties,type:R.type,sourceLayerIndex:oe,index:ee,geometry:pe?ge.geometry:Za(R),patterns:{},sortKey:we};C.push(Ue)}k&&C.sort((R,W)=>R.sortKey-W.sortKey);for(const R of C){const{geometry:W,index:ee,sourceLayerIndex:oe}=R,pe=t[ee].feature;this.addFeature(R,W,ee,p),l.featureIndex.insert(pe,W,ee,oe,this.index)}}update(t,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,l,this.stateDependentLayers,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ue),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,l,p,y){for(const C of l)for(const M of C){const k=M.x,R=M.y;if(k<0||k>=Ir||R<0||R>=Ir)continue;const W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),ee=W.vertexLength;uc(this.layoutVertexArray,k,R,-1,-1),uc(this.layoutVertexArray,k,R,1,-1),uc(this.layoutVertexArray,k,R,1,1),uc(this.layoutVertexArray,k,R,-1,1),this.indexArray.emplaceBack(ee,ee+1,ee+2),this.indexArray.emplaceBack(ee,ee+3,ee+2),W.vertexLength+=4,W.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,p,{},y)}}function nm(o,t){for(let l=0;l<o.length;l++)if(rd(t,o[l]))return!0;for(let l=0;l<t.length;l++)if(rd(o,t[l]))return!0;return!!sm(o,t)}function rm(o,t,l){return!!rd(o,t)||!!$u(t,o,l)}function Rp(o,t){if(1===o.length)return Lp(t,o[0]);for(let l=0;l<t.length;l++){const p=t[l];for(let y=0;y<p.length;y++)if(rd(o,p[y]))return!0}for(let l=0;l<o.length;l++)if(Lp(t,o[l]))return!0;for(let l=0;l<t.length;l++)if(sm(o,t[l]))return!0;return!1}function om(o,t,l){if(o.length>1){if(sm(o,t))return!0;for(let p=0;p<t.length;p++)if($u(t[p],o,l))return!0}for(let p=0;p<o.length;p++)if($u(o[p],t,l))return!0;return!1}function sm(o,t){if(0===o.length||0===t.length)return!1;for(let l=0;l<o.length-1;l++){const p=o[l],y=o[l+1];for(let C=0;C<t.length-1;C++)if(Fp(p,y,t[C],t[C+1]))return!0}return!1}function Fp(o,t,l,p){return kt(o,l,p)!==kt(t,l,p)&&kt(o,t,l)!==kt(o,t,p)}function $u(o,t,l){const p=l*l;if(1===t.length)return o.distSqr(t[0])<p;for(let y=1;y<t.length;y++)if(jd(o,t[y-1],t[y])<p)return!0;return!1}function jd(o,t,l){const p=t.distSqr(l);if(0===p)return o.distSqr(t);const y=((o.x-t.x)*(l.x-t.x)+(o.y-t.y)*(l.y-t.y))/p;return o.distSqr(y<0?t:y>1?l:l.sub(t)._mult(y)._add(t))}function Lp(o,t){let l,p,y,C=!1;for(let M=0;M<o.length;M++){l=o[M];for(let k=0,R=l.length-1;k<l.length;R=k++)p=l[k],y=l[R],p.y>t.y!=y.y>t.y&&t.x<(y.x-p.x)*(t.y-p.y)/(y.y-p.y)+p.x&&(C=!C)}return C}function rd(o,t){let l=!1;for(let p=0,y=o.length-1;p<o.length;y=p++){const C=o[p],M=o[y];C.y>t.y!=M.y>t.y&&t.x<(M.x-C.x)*(t.y-C.y)/(M.y-C.y)+C.x&&(l=!l)}return l}function Gu(o,t,l){const p=l[0],y=l[2];if(o.x<p.x&&t.x<p.x||o.x>y.x&&t.x>y.x||o.y<p.y&&t.y<p.y||o.y>y.y&&t.y>y.y)return!1;const C=kt(o,t,l[0]);return C!==kt(o,t,l[1])||C!==kt(o,t,l[2])||C!==kt(o,t,l[3])}function Hd(o,t,l){const p=t.paint.get(o).value;return"constant"===p.kind?p.value:l.programConfigurations.get(t.id).getMaxValue(o)}function Zu(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Wu(o,t,l,p,y){if(!t[0]&&!t[1])return o;const C=Ae.convert(t)._mult(y);"viewport"===l&&C._rotate(-p);const M=[];for(let k=0;k<o.length;k++)M.push(o[k].sub(C));return M}let Np,zp;Ai("CircleBucket",Ud,{omit:["layers"]});var Bp={get paint(){return zp=zp||new jo({"circle-radius":new mi(ct.paint_circle["circle-radius"]),"circle-color":new mi(ct.paint_circle["circle-color"]),"circle-blur":new mi(ct.paint_circle["circle-blur"]),"circle-opacity":new mi(ct.paint_circle["circle-opacity"]),"circle-translate":new Zi(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new Zi(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zi(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zi(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mi(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mi(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mi(ct.paint_circle["circle-stroke-opacity"])})},get layout(){return Np=Np||new jo({"circle-sort-key":new mi(ct.layout_circle["circle-sort-key"])})}},ns=1e-6,Hl=typeof Float32Array<"u"?Float32Array:Array;function $d(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Yu(o,t,l){var p=t[0],y=t[1],C=t[2],M=t[3],k=t[4],R=t[5],W=t[6],ee=t[7],oe=t[8],pe=t[9],ge=t[10],we=t[11],Ue=t[12],Le=t[13],dt=t[14],gt=t[15],lt=l[0],Mt=l[1],It=l[2],ti=l[3];return o[0]=lt*p+Mt*k+It*oe+ti*Ue,o[1]=lt*y+Mt*R+It*pe+ti*Le,o[2]=lt*C+Mt*W+It*ge+ti*dt,o[3]=lt*M+Mt*ee+It*we+ti*gt,o[4]=(lt=l[4])*p+(Mt=l[5])*k+(It=l[6])*oe+(ti=l[7])*Ue,o[5]=lt*y+Mt*R+It*pe+ti*Le,o[6]=lt*C+Mt*W+It*ge+ti*dt,o[7]=lt*M+Mt*ee+It*we+ti*gt,o[8]=(lt=l[8])*p+(Mt=l[9])*k+(It=l[10])*oe+(ti=l[11])*Ue,o[9]=lt*y+Mt*R+It*pe+ti*Le,o[10]=lt*C+Mt*W+It*ge+ti*dt,o[11]=lt*M+Mt*ee+It*we+ti*gt,o[12]=(lt=l[12])*p+(Mt=l[13])*k+(It=l[14])*oe+(ti=l[15])*Ue,o[13]=lt*y+Mt*R+It*pe+ti*Le,o[14]=lt*C+Mt*W+It*ge+ti*dt,o[15]=lt*M+Mt*ee+It*we+ti*gt,o}Math.hypot||(Math.hypot=function(){for(var o=0,t=arguments.length;t--;)o+=arguments[t]*arguments[t];return Math.sqrt(o)});var Oc,Xn=Yu;function Gd(o,t,l){var p=t[0],y=t[1],C=t[2],M=t[3];return o[0]=l[0]*p+l[4]*y+l[8]*C+l[12]*M,o[1]=l[1]*p+l[5]*y+l[9]*C+l[13]*M,o[2]=l[2]*p+l[6]*y+l[10]*C+l[14]*M,o[3]=l[3]*p+l[7]*y+l[11]*C+l[15]*M,o}function am(o,t){const l=Gd([],[o.x,o.y,0,1],t);return new Ae(l[0]/l[3],l[1]/l[3])}Oc=new Hl(4),Hl!=Float32Array&&(Oc[0]=0,Oc[1]=0,Oc[2]=0,Oc[3]=0);class lm extends Ud{}let od;Ai("HeatmapBucket",lm,{omit:["layers"]});var Zd={get paint(){return od=od||new jo({"heatmap-radius":new mi(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mi(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zi(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new So(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zi(ct.paint_heatmap["heatmap-opacity"])})}};function hc(o,{width:t,height:l},p,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==t*l*p)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${t*l*p}`)}else y=new Uint8Array(t*l*p);return o.width=t,o.height=l,o.data=y,o}function cm(o,{width:t,height:l},p){if(t===o.width&&l===o.height)return;const y=hc({},{width:t,height:l},p);sd(o,y,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,t),height:Math.min(o.height,l)},p),o.width=t,o.height=l,o.data=y.data}function sd(o,t,l,p,y,C){if(0===y.width||0===y.height)return t;if(y.width>o.width||y.height>o.height||l.x>o.width-y.width||l.y>o.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>t.width||y.height>t.height||p.x>t.width-y.width||p.y>t.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const M=o.data,k=t.data;if(M===k)throw new Error("srcData equals dstData, so image is already copied");for(let R=0;R<y.height;R++){const W=((l.y+R)*o.width+l.x)*C,ee=((p.y+R)*t.width+p.x)*C;for(let oe=0;oe<y.width*C;oe++)k[ee+oe]=M[W+oe]}return t}class Rc{constructor(t,l){hc(this,t,1,l)}resize(t){cm(this,t,1)}clone(){return new Rc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,l,p,y,C){sd(t,l,p,y,C,1)}}class Go{constructor(t,l){hc(this,t,4,l)}resize(t){cm(this,t,4)}replace(t,l){l?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Go({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,l,p,y,C){sd(t,l,p,y,C,4)}}function qu(o){const t={},l=o.resolution||256,p=o.clips?o.clips.length:1,y=o.image||new Go({width:l,height:p});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const C=(M,k,R)=>{t[o.evaluationKey]=R;const W=o.expression.evaluate(t);y.data[M+k+0]=Math.floor(255*W.r/W.a),y.data[M+k+1]=Math.floor(255*W.g/W.a),y.data[M+k+2]=Math.floor(255*W.b/W.a),y.data[M+k+3]=Math.floor(255*W.a)};if(o.clips)for(let M=0,k=0;M<p;++M,k+=4*l)for(let R=0,W=0;R<l;R++,W+=4){const ee=R/(l-1),{start:oe,end:pe}=o.clips[M];C(k,W,oe*(1-ee)+pe*ee)}else for(let M=0,k=0;M<l;M++,k+=4)C(0,k,M/(l-1));return y}let Rs;Ai("AlphaImage",Rc),Ai("RGBAImage",Go);var Wd={get paint(){return Rs=Rs||new jo({"hillshade-illumination-direction":new Zi(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zi(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zi(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zi(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zi(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zi(ct.paint_hillshade["hillshade-accent-color"])})}};const dm=Sr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ku}=dm;var Zo={exports:{}};function xl(o,t,l){l=l||2;var p,y,C,M,k,R,W,ee=t&&t.length,oe=ee?t[0]*l:o.length,pe=Xu(o,0,oe,l,!0),ge=[];if(!pe||pe.next===pe.prev)return ge;if(ee&&(pe=function(Ue,Le,dt,gt){var lt,Mt,It,ti=[];for(lt=0,Mt=Le.length;lt<Mt;lt++)(It=Xu(Ue,Le[lt]*gt,lt<Mt-1?Le[lt+1]*gt:Ue.length,gt,!1))===It.next&&(It.steiner=!0),ti.push(Ju(It));for(ti.sort(pm),lt=0;lt<ti.length;lt++)dt=Up(ti[lt],dt);return dt}(o,t,pe,l)),o.length>80*l){p=C=o[0],y=M=o[1];for(var we=l;we<oe;we+=l)(k=o[we])<p&&(p=k),(R=o[we+1])<y&&(y=R),k>C&&(C=k),R>M&&(M=R);W=0!==(W=Math.max(C-p,M-y))?32767/W:0}return mc(pe,ge,l,p,y,W,0),ge}function Xu(o,t,l,p,y){var C,M;if(y===eh(o,t,l,p)>0)for(C=t;C<l;C+=p)M=Qu(C,o[C],o[C+1],M);else for(C=l-p;C>=t;C-=p)M=Qu(C,o[C],o[C+1],M);return M&&Yd(M,M.next)&&(cd(M),M=M.next),M}function $l(o,t){if(!o)return o;t||(t=o);var l,p=o;do{if(l=!1,p.steiner||!Yd(p,p.next)&&0!==Ar(p.prev,p,p.next))p=p.next;else{if(cd(p),(p=t=p.prev)===p.next)break;l=!0}}while(l||p!==t);return t}function mc(o,t,l,p,y,C,M){if(o){!M&&C&&function(ee,oe,pe,ge){var we=ee;do{0===we.z&&(we.z=ad(we.x,we.y,oe,pe,ge)),we.prevZ=we.prev,we.nextZ=we.next,we=we.next}while(we!==ee);we.prevZ.nextZ=null,we.prevZ=null,function(Ue){var Le,dt,gt,lt,Mt,It,ti,Bi,$i=1;do{for(dt=Ue,Ue=null,Mt=null,It=0;dt;){for(It++,gt=dt,ti=0,Le=0;Le<$i&&(ti++,gt=gt.nextZ);Le++);for(Bi=$i;ti>0||Bi>0&&gt;)0!==ti&&(0===Bi||!gt||dt.z<=gt.z)?(lt=dt,dt=dt.nextZ,ti--):(lt=gt,gt=gt.nextZ,Bi--),Mt?Mt.nextZ=lt:Ue=lt,lt.prevZ=Mt,Mt=lt;dt=gt}Mt.nextZ=null,$i*=2}while(It>1)}(we)}(o,p,y,C);for(var k,R,W=o;o.prev!==o.next;)if(k=o.prev,R=o.next,C?hm(o,p,y,C):um(o))t.push(k.i/l|0),t.push(o.i/l|0),t.push(R.i/l|0),cd(o),o=R.next,W=R.next;else if((o=R)===W){M?1===M?mc(o=mm($l(o),t,l),t,l,p,y,C,2):2===M&&Vp(o,t,l,p,y,C):mc($l(o),t,l,p,y,C,1);break}}}function um(o){var t=o.prev,l=o,p=o.next;if(Ar(t,l,p)>=0)return!1;for(var y=t.x,C=l.x,M=p.x,k=t.y,R=l.y,W=p.y,ee=y<C?y<M?y:M:C<M?C:M,oe=k<R?k<W?k:W:R<W?R:W,pe=y>C?y>M?y:M:C>M?C:M,ge=k>R?k>W?k:W:R>W?R:W,we=p.next;we!==t;){if(we.x>=ee&&we.x<=pe&&we.y>=oe&&we.y<=ge&&Gl(y,k,C,R,M,W,we.x,we.y)&&Ar(we.prev,we,we.next)>=0)return!1;we=we.next}return!0}function hm(o,t,l,p){var y=o.prev,C=o,M=o.next;if(Ar(y,C,M)>=0)return!1;for(var k=y.x,R=C.x,W=M.x,ee=y.y,oe=C.y,pe=M.y,ge=k<R?k<W?k:W:R<W?R:W,we=ee<oe?ee<pe?ee:pe:oe<pe?oe:pe,Ue=k>R?k>W?k:W:R>W?R:W,Le=ee>oe?ee>pe?ee:pe:oe>pe?oe:pe,dt=ad(ge,we,t,l,p),gt=ad(Ue,Le,t,l,p),lt=o.prevZ,Mt=o.nextZ;lt&&lt.z>=dt&&Mt&&Mt.z<=gt;){if(lt.x>=ge&&lt.x<=Ue&&lt.y>=we&&lt.y<=Le&&lt!==y&&lt!==M&&Gl(k,ee,R,oe,W,pe,lt.x,lt.y)&&Ar(lt.prev,lt,lt.next)>=0||(lt=lt.prevZ,Mt.x>=ge&&Mt.x<=Ue&&Mt.y>=we&&Mt.y<=Le&&Mt!==y&&Mt!==M&&Gl(k,ee,R,oe,W,pe,Mt.x,Mt.y)&&Ar(Mt.prev,Mt,Mt.next)>=0))return!1;Mt=Mt.nextZ}for(;lt&&lt.z>=dt;){if(lt.x>=ge&&lt.x<=Ue&&lt.y>=we&&lt.y<=Le&&lt!==y&&lt!==M&&Gl(k,ee,R,oe,W,pe,lt.x,lt.y)&&Ar(lt.prev,lt,lt.next)>=0)return!1;lt=lt.prevZ}for(;Mt&&Mt.z<=gt;){if(Mt.x>=ge&&Mt.x<=Ue&&Mt.y>=we&&Mt.y<=Le&&Mt!==y&&Mt!==M&&Gl(k,ee,R,oe,W,pe,Mt.x,Mt.y)&&Ar(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.nextZ}return!0}function mm(o,t,l){var p=o;do{var y=p.prev,C=p.next.next;!Yd(y,C)&&qd(y,p,p.next,C)&&ll(y,C)&&ll(C,y)&&(t.push(y.i/l|0),t.push(p.i/l|0),t.push(C.i/l|0),cd(p),cd(p.next),p=o=C),p=p.next}while(p!==o);return $l(p)}function Vp(o,t,l,p,y,C){var M=o;do{for(var k=M.next.next;k!==M.prev;){if(M.i!==k.i&&ld(M,k)){var R=Xd(M,k);return M=$l(M,M.next),R=$l(R,R.next),mc(M,t,l,p,y,C,0),void mc(R,t,l,p,y,C,0)}k=k.next}M=M.next}while(M!==o)}function pm(o,t){return o.x-t.x}function Up(o,t){var l=function(y,C){var M,k=C,R=y.x,W=y.y,ee=-1/0;do{if(W<=k.y&&W>=k.next.y&&k.next.y!==k.y){var oe=k.x+(W-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(oe<=R&&oe>ee&&(ee=oe,M=k.x<k.next.x?k:k.next,oe===R))return M}k=k.next}while(k!==C);if(!M)return null;var pe,ge=M,we=M.x,Ue=M.y,Le=1/0;k=M;do{R>=k.x&&k.x>=we&&R!==k.x&&Gl(W<Ue?R:ee,W,we,Ue,W<Ue?ee:R,W,k.x,k.y)&&(pe=Math.abs(W-k.y)/(R-k.x),ll(k,y)&&(pe<Le||pe===Le&&(k.x>M.x||k.x===M.x&&jp(M,k)))&&(M=k,Le=pe)),k=k.next}while(k!==ge);return M}(o,t);if(!l)return t;var p=Xd(l,o);return $l(p,p.next),$l(l,l.next)}function jp(o,t){return Ar(o.prev,o,t.prev)<0&&Ar(t.next,o,o.next)<0}function ad(o,t,l,p,y){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-l)*y|0)|o<<8))|o<<4))|o<<2))|o<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-p)*y|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ju(o){var t=o,l=o;do{(t.x<l.x||t.x===l.x&&t.y<l.y)&&(l=t),t=t.next}while(t!==o);return l}function Gl(o,t,l,p,y,C,M,k){return(y-M)*(t-k)>=(o-M)*(C-k)&&(o-M)*(p-k)>=(l-M)*(t-k)&&(l-M)*(C-k)>=(y-M)*(p-k)}function ld(o,t){return o.next.i!==t.i&&o.prev.i!==t.i&&!function(l,p){var y=l;do{if(y.i!==l.i&&y.next.i!==l.i&&y.i!==p.i&&y.next.i!==p.i&&qd(y,y.next,l,p))return!0;y=y.next}while(y!==l);return!1}(o,t)&&(ll(o,t)&&ll(t,o)&&function(l,p){var y=l,C=!1,M=(l.x+p.x)/2,k=(l.y+p.y)/2;do{y.y>k!=y.next.y>k&&y.next.y!==y.y&&M<(y.next.x-y.x)*(k-y.y)/(y.next.y-y.y)+y.x&&(C=!C),y=y.next}while(y!==l);return C}(o,t)&&(Ar(o.prev,o,t.prev)||Ar(o,t.prev,t))||Yd(o,t)&&Ar(o.prev,o,o.next)>0&&Ar(t.prev,t,t.next)>0)}function Ar(o,t,l){return(t.y-o.y)*(l.x-t.x)-(t.x-o.x)*(l.y-t.y)}function Yd(o,t){return o.x===t.x&&o.y===t.y}function qd(o,t,l,p){var y=Kd(Ar(o,t,l)),C=Kd(Ar(o,t,p)),M=Kd(Ar(l,p,o)),k=Kd(Ar(l,p,t));return y!==C&&M!==k||!(0!==y||!Fc(o,l,t))||!(0!==C||!Fc(o,p,t))||!(0!==M||!Fc(l,o,p))||!(0!==k||!Fc(l,t,p))}function Fc(o,t,l){return t.x<=Math.max(o.x,l.x)&&t.x>=Math.min(o.x,l.x)&&t.y<=Math.max(o.y,l.y)&&t.y>=Math.min(o.y,l.y)}function Kd(o){return o>0?1:o<0?-1:0}function ll(o,t){return Ar(o.prev,o,o.next)<0?Ar(o,t,o.next)>=0&&Ar(o,o.prev,t)>=0:Ar(o,t,o.prev)<0||Ar(o,o.next,t)<0}function Xd(o,t){var l=new dd(o.i,o.x,o.y),p=new dd(t.i,t.x,t.y),y=o.next,C=t.prev;return o.next=t,t.prev=o,l.next=y,y.prev=l,p.next=l,l.prev=p,C.next=p,p.prev=C,p}function Qu(o,t,l,p){var y=new dd(o,t,l);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function cd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function dd(o,t,l){this.i=o,this.x=t,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function eh(o,t,l,p){for(var y=0,C=t,M=l-p;C<l;C+=p)y+=(o[M]-o[C])*(o[C+1]+o[M+1]),M=C;return y}Zo.exports=xl,Zo.exports.default=xl,xl.deviation=function(o,t,l,p){var y=t&&t.length,C=Math.abs(eh(o,0,y?t[0]*l:o.length,l));if(y)for(var M=0,k=t.length;M<k;M++)C-=Math.abs(eh(o,t[M]*l,M<k-1?t[M+1]*l:o.length,l));var R=0;for(M=0;M<p.length;M+=3){var W=p[M]*l,ee=p[M+1]*l,oe=p[M+2]*l;R+=Math.abs((o[W]-o[oe])*(o[ee+1]-o[W+1])-(o[W]-o[ee])*(o[oe+1]-o[W+1]))}return 0===C&&0===R?0:Math.abs((R-C)/C)},xl.flatten=function(o){for(var t=o[0][0].length,l={vertices:[],holes:[],dimensions:t},p=0,y=0;y<o.length;y++){for(var C=0;C<o[y].length;C++)for(var M=0;M<t;M++)l.vertices.push(o[y][C][M]);y>0&&l.holes.push(p+=o[y-1].length)}return l};var fm=Ze(Zo.exports);function th(o,t,l,p,y){gm(o,t,l||0,p||o.length-1,y||Hp)}function gm(o,t,l,p,y){for(;p>l;){if(p-l>600){var C=p-l+1,M=t-l+1,k=Math.log(C),R=.5*Math.exp(2*k/3),W=.5*Math.sqrt(k*R*(C-R)/C)*(M-C/2<0?-1:1);gm(o,t,Math.max(l,Math.floor(t-M*R/C+W)),Math.min(p,Math.floor(t+(C-M)*R/C+W)),y)}var ee=o[t],oe=l,pe=p;for(Zl(o,l,t),y(o[p],ee)>0&&Zl(o,l,p);oe<pe;){for(Zl(o,oe,pe),oe++,pe--;y(o[oe],ee)<0;)oe++;for(;y(o[pe],ee)>0;)pe--}0===y(o[l],ee)?Zl(o,l,pe):Zl(o,++pe,p),pe<=t&&(l=pe+1),t<=pe&&(p=pe-1)}}function Zl(o,t,l){var p=o[t];o[t]=o[l],o[l]=p}function Hp(o,t){return o<t?-1:o>t?1:0}function Jd(o,t){const l=o.length;if(l<=1)return[o];const p=[];let y,C;for(let M=0;M<l;M++){const k=Ot(o[M]);0!==k&&(o[M].area=Math.abs(k),void 0===C&&(C=k<0),C===k<0?(y&&p.push(y),y=[o[M]]):y.push(o[M]))}if(y&&p.push(y),t>1)for(let M=0;M<p.length;M++)p[M].length<=t||(th(p[M],t,1,p[M].length-1,ih),p[M]=p[M].slice(0,t));return p}function ih(o,t){return t.area-o.area}function Qd(o,t,l){const p=l.patternDependencies;let y=!1;for(const C of t){const M=C.paint.get(`${o}-pattern`);M.isConstant()||(y=!0);const k=M.constantOr(null);k&&(y=!0,p[k.to]=!0,p[k.from]=!0)}return y}function ud(o,t,l,p,y){const C=y.patternDependencies;for(const M of t){const k=M.paint.get(`${o}-pattern`).value;if("constant"!==k.kind){let R=k.evaluate({zoom:p-1},l,{},y.availableImages),W=k.evaluate({zoom:p},l,{},y.availableImages),ee=k.evaluate({zoom:p+1},l,{},y.availableImages);R=R&&R.name?R.name:R,W=W&&W.name?W.name:W,ee=ee&&ee.name?ee.name:ee,C[R]=!0,C[W]=!0,C[ee]=!0,l.patterns[M.id]={min:R,mid:W,max:ee}}}return l}class nh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(l=>l.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ne,this.indexArray=new D,this.indexArray2=new F,this.programConfigurations=new ea(t.layers,t.zoom),this.segments=new le,this.segments2=new le,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(t,l,p){this.hasPattern=Qd("fill",this.layers,l);const y=this.layers[0].layout.get("fill-sort-key"),C=!y.isConstant(),M=[];for(const{feature:k,id:R,index:W,sourceLayerIndex:ee}of t){const oe=this.layers[0]._featureFilter.needGeometry,pe=bl(k,oe);if(!this.layers[0]._featureFilter.filter(new An(this.zoom),pe,p))continue;const ge=C?y.evaluate(pe,{},p,l.availableImages):void 0,we={id:R,properties:k.properties,type:k.type,sourceLayerIndex:ee,index:W,geometry:oe?pe.geometry:Za(k),patterns:{},sortKey:ge};M.push(we)}C&&M.sort((k,R)=>k.sortKey-R.sortKey);for(const k of M){const{geometry:R,index:W,sourceLayerIndex:ee}=k;if(this.hasPattern){const oe=ud("fill",this.layers,k,this.zoom,l);this.patternFeatures.push(oe)}else this.addFeature(k,R,W,p,{});l.featureIndex.insert(t[W].feature,R,W,ee,this.index)}}update(t,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,l,this.stateDependentLayers,p)}addFeatures(t,l,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ku),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,l,p,y,C){for(const M of Jd(l,500)){let k=0;for(const ge of M)k+=ge.length;const R=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),W=R.vertexLength,ee=[],oe=[];for(const ge of M){if(0===ge.length)continue;ge!==M[0]&&oe.push(ee.length/2);const we=this.segments2.prepareSegment(ge.length,this.layoutVertexArray,this.indexArray2),Ue=we.vertexLength;this.layoutVertexArray.emplaceBack(ge[0].x,ge[0].y),this.indexArray2.emplaceBack(Ue+ge.length-1,Ue),ee.push(ge[0].x),ee.push(ge[0].y);for(let Le=1;Le<ge.length;Le++)this.layoutVertexArray.emplaceBack(ge[Le].x,ge[Le].y),this.indexArray2.emplaceBack(Ue+Le-1,Ue+Le),ee.push(ge[Le].x),ee.push(ge[Le].y);we.vertexLength+=ge.length,we.primitiveLength+=ge.length}const pe=fm(ee,oe);for(let ge=0;ge<pe.length;ge+=3)this.indexArray.emplaceBack(W+pe[ge],W+pe[ge+1],W+pe[ge+2]);R.vertexLength+=k,R.primitiveLength+=pe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,p,C,y)}}let _m,rh;Ai("FillBucket",nh,{omit:["layers","patternFeatures"]});var ym={get paint(){return rh=rh||new jo({"fill-antialias":new Zi(ct.paint_fill["fill-antialias"]),"fill-opacity":new mi(ct.paint_fill["fill-opacity"]),"fill-color":new mi(ct.paint_fill["fill-color"]),"fill-outline-color":new mi(ct.paint_fill["fill-outline-color"]),"fill-translate":new Zi(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new Zi(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new ja(ct.paint_fill["fill-pattern"])})},get layout(){return _m=_m||new jo({"fill-sort-key":new mi(ct.layout_fill["fill-sort-key"])})}};const pc=Sr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),fc=Sr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hd}=pc;var Wl={},jg=he,md=Lc;function Lc(o,t,l,p,y){this.properties={},this.extent=l,this.type=0,this._pbf=o,this._geometry=-1,this._keys=p,this._values=y,o.readFields(vm,this,t)}function vm(o,t,l){1==o?t.id=l.readVarint():2==o?function(p,y){for(var C=p.readVarint()+p.pos;p.pos<C;){var M=y._keys[p.readVarint()],k=y._values[p.readVarint()];y.properties[M]=k}}(l,t):3==o?t.type=l.readVarint():4==o&&(t._geometry=l.pos)}function bm(o){for(var t,l,p=0,y=0,C=o.length,M=C-1;y<C;M=y++)p+=((l=o[M]).x-(t=o[y]).x)*(t.y+l.y);return p}Lc.types=["Unknown","Point","LineString","Polygon"],Lc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var t,l=o.readVarint()+o.pos,p=1,y=0,C=0,M=0,k=[];o.pos<l;){if(y<=0){var R=o.readVarint();p=7&R,y=R>>3}if(y--,1===p||2===p)C+=o.readSVarint(),M+=o.readSVarint(),1===p&&(t&&k.push(t),t=[]),t.push(new jg(C,M));else{if(7!==p)throw new Error("unknown command "+p);t&&t.push(t[0].clone())}}return t&&k.push(t),k},Lc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var t=o.readVarint()+o.pos,l=1,p=0,y=0,C=0,M=1/0,k=-1/0,R=1/0,W=-1/0;o.pos<t;){if(p<=0){var ee=o.readVarint();l=7&ee,p=ee>>3}if(p--,1===l||2===l)(y+=o.readSVarint())<M&&(M=y),y>k&&(k=y),(C+=o.readSVarint())<R&&(R=C),C>W&&(W=C);else if(7!==l)throw new Error("unknown command "+l)}return[M,R,k,W]},Lc.prototype.toGeoJSON=function(o,t,l){var p,y,C=this.extent*Math.pow(2,l),M=this.extent*o,k=this.extent*t,R=this.loadGeometry(),W=Lc.types[this.type];function ee(ge){for(var we=0;we<ge.length;we++){var Ue=ge[we];ge[we]=[360*(Ue.x+M)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ue.y+k)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(p=0;p<R.length;p++)oe[p]=R[p][0];ee(R=oe);break;case 2:for(p=0;p<R.length;p++)ee(R[p]);break;case 3:for(R=function(ge){var we=ge.length;if(we<=1)return[ge];for(var Ue,Le,dt=[],gt=0;gt<we;gt++){var lt=bm(ge[gt]);0!==lt&&(void 0===Le&&(Le=lt<0),Le===lt<0?(Ue&&dt.push(Ue),Ue=[ge[gt]]):Ue.push(ge[gt]))}return Ue&&dt.push(Ue),dt}(R),p=0;p<R.length;p++)for(y=0;y<R[p].length;y++)ee(R[p][y])}1===R.length?R=R[0]:W="Multi"+W;var pe={type:"Feature",geometry:{type:W,coordinates:R},properties:this.properties};return"id"in this&&(pe.id=this.id),pe};var xm=md,eu=oh;function oh(o,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Yl,this,t),this.length=this._features.length}function Yl(o,t,l){15===o?t.version=l.readVarint():1===o?t.name=l.readString():5===o?t.extent=l.readVarint():2===o?t._features.push(l.pos):3===o?t._keys.push(l.readString()):4===o&&t._values.push(function(p){for(var y=null,C=p.readVarint()+p.pos;p.pos<C;){var M=p.readVarint()>>3;y=1===M?p.readString():2===M?p.readFloat():3===M?p.readDouble():4===M?p.readVarint64():5===M?p.readVarint():6===M?p.readSVarint():7===M?p.readBoolean():null}return y}(l))}oh.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var t=this._pbf.readVarint()+this._pbf.pos;return new xm(this._pbf,t,this.extent,this._keys,this._values)};var tu=eu;function Nc(o,t,l){if(3===o){var p=new tu(l,l.readVarint()+l.pos);p.length&&(t[p.name]=p)}}Wl.VectorTile=function(o,t){this.layers=o.readFields(Nc,{},t)},Wl.VectorTileFeature=md,Wl.VectorTileLayer=eu;const sh=Wl.VectorTileFeature.types,pd=Math.pow(2,13);function gc(o,t,l,p,y,C,M,k){o.emplaceBack(t,l,2*Math.floor(p*pd)+M,y*pd*2,C*pd*2,Math.round(k))}class _c{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(l=>l.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Be,this.centroidVertexArray=new Fe,this.indexArray=new D,this.programConfigurations=new ea(t.layers,t.zoom),this.segments=new le,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(t,l,p){this.features=[],this.hasPattern=Qd("fill-extrusion",this.layers,l);for(const{feature:y,id:C,index:M,sourceLayerIndex:k}of t){const R=this.layers[0]._featureFilter.needGeometry,W=bl(y,R);if(!this.layers[0]._featureFilter.filter(new An(this.zoom),W,p))continue;const ee={id:C,sourceLayerIndex:k,index:M,geometry:R?W.geometry:Za(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(ud("fill-extrusion",this.layers,ee,this.zoom,l)):this.addFeature(ee,ee.geometry,M,p,{}),l.featureIndex.insert(y,ee.geometry,M,k,this.index,!0)}}addFeatures(t,l,p){for(const y of this.features){const{geometry:C}=y;this.addFeature(y,C,y.index,l,p)}}update(t,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,l,this.stateDependentLayers,p)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hd),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,fc.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,l,p,y,C){const M={x:0,y:0,vertexCount:0};for(const k of Jd(l,500)){let R=0;for(const we of k)R+=we.length;let W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const we of k){if(0===we.length||((o=we).every(t=>t.x<0)||o.every(t=>t.x>Ir)||o.every(t=>t.y<0)||o.every(t=>t.y>Ir)))continue;let Ue=0;for(let Le=0;Le<we.length;Le++){const dt=we[Le];if(Le>=1){const gt=we[Le-1];if(!$p(dt,gt)){W.vertexLength+4>le.MAX_VERTEX_ARRAY_LENGTH&&(W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const lt=dt.sub(gt)._perp()._unit(),Mt=gt.dist(dt);Ue+Mt>32768&&(Ue=0),gc(this.layoutVertexArray,dt.x,dt.y,lt.x,lt.y,0,0,Ue),gc(this.layoutVertexArray,dt.x,dt.y,lt.x,lt.y,0,1,Ue),M.x+=2*dt.x,M.y+=2*dt.y,M.vertexCount+=2,Ue+=Mt,gc(this.layoutVertexArray,gt.x,gt.y,lt.x,lt.y,0,0,Ue),gc(this.layoutVertexArray,gt.x,gt.y,lt.x,lt.y,0,1,Ue),M.x+=2*gt.x,M.y+=2*gt.y,M.vertexCount+=2;const It=W.vertexLength;this.indexArray.emplaceBack(It,It+2,It+1),this.indexArray.emplaceBack(It+1,It+2,It+3),W.vertexLength+=4,W.primitiveLength+=2}}}}if(W.vertexLength+R>le.MAX_VERTEX_ARRAY_LENGTH&&(W=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray)),"Polygon"!==sh[t.type])continue;const ee=[],oe=[],pe=W.vertexLength;for(const we of k)if(0!==we.length){we!==k[0]&&oe.push(ee.length/2);for(let Ue=0;Ue<we.length;Ue++){const Le=we[Ue];gc(this.layoutVertexArray,Le.x,Le.y,0,0,1,1,0),M.x+=Le.x,M.y+=Le.y,M.vertexCount+=1,ee.push(Le.x),ee.push(Le.y)}}const ge=fm(ee,oe);for(let we=0;we<ge.length;we+=3)this.indexArray.emplaceBack(pe+ge[we],pe+ge[we+2],pe+ge[we+1]);W.primitiveLength+=ge.length/3,W.vertexLength+=R}var o;for(let k=0;k<M.vertexCount;k++)this.centroidVertexArray.emplaceBack(Math.floor(M.x/M.vertexCount),Math.floor(M.y/M.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,p,C,y)}}function $p(o,t){return o.x===t.x&&(o.x<0||o.x>Ir)||o.y===t.y&&(o.y<0||o.y>Ir)}let Cm;Ai("FillExtrusionBucket",_c,{omit:["layers","features"]});var Gp={get paint(){return Cm=Cm||new jo({"fill-extrusion-opacity":new Zi(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mi(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zi(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zi(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ja(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mi(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mi(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zi(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function fd(o,t){return o.x*t.x+o.y*t.y}function ah(o,t){if(1===o.length){let l=0;const p=t[l++];let y;for(;!y||p.equals(y);)if(y=t[l++],!y)return 1/0;for(;l<t.length;l++){const C=t[l],M=o[0],k=y.sub(p),R=C.sub(p),W=M.sub(p),ee=fd(k,k),oe=fd(k,R),pe=fd(R,R),ge=fd(W,k),we=fd(W,R),Ue=ee*pe-oe*oe,Le=(pe*ge-oe*we)/Ue,dt=(ee*we-oe*ge)/Ue,gt=p.z*(1-Le-dt)+y.z*Le+C.z*dt;if(isFinite(gt))return gt}return 1/0}{let l=1/0;for(const p of t)l=Math.min(l,p.z);return l}}const Em=Sr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:iu}=Em,lh=Sr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:zc}=lh,Zp=Wl.VectorTileFeature.types,Wp=Math.cos(Math.PI/180*37.5),Bc=Math.pow(2,14)/.5;class nu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(l=>l.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new at,this.layoutVertexArray2=new Et,this.indexArray=new D,this.programConfigurations=new ea(t.layers,t.zoom),this.segments=new le,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(t,l,p){this.hasPattern=Qd("line",this.layers,l);const y=this.layers[0].layout.get("line-sort-key"),C=!y.isConstant(),M=[];for(const{feature:k,id:R,index:W,sourceLayerIndex:ee}of t){const oe=this.layers[0]._featureFilter.needGeometry,pe=bl(k,oe);if(!this.layers[0]._featureFilter.filter(new An(this.zoom),pe,p))continue;const ge=C?y.evaluate(pe,{},p):void 0,we={id:R,properties:k.properties,type:k.type,sourceLayerIndex:ee,index:W,geometry:oe?pe.geometry:Za(k),patterns:{},sortKey:ge};M.push(we)}C&&M.sort((k,R)=>k.sortKey-R.sortKey);for(const k of M){const{geometry:R,index:W,sourceLayerIndex:ee}=k;if(this.hasPattern){const oe=ud("line",this.layers,k,this.zoom,l);this.patternFeatures.push(oe)}else this.addFeature(k,R,W,p,{});l.featureIndex.insert(t[W].feature,R,W,ee,this.index)}}update(t,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,l,this.stateDependentLayers,p)}addFeatures(t,l,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,zc)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,iu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,l,p,y,C){const M=this.layers[0].layout,k=M.get("line-join").evaluate(t,{}),R=M.get("line-cap"),W=M.get("line-miter-limit"),ee=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const oe of l)this.addLine(oe,t,k,R,W,ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,p,C,y)}addLine(t,l,p,y,C,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let dt=0;dt<t.length-1;dt++)this.totalDistance+=t[dt].dist(t[dt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k="Polygon"===Zp[l.type];let R=t.length;for(;R>=2&&t[R-1].equals(t[R-2]);)R--;let W=0;for(;W<R-1&&t[W].equals(t[W+1]);)W++;if(R<(k?3:2))return;"bevel"===p&&(C=1.05);const ee=this.overscaling<=16?122880/(512*this.overscaling):0,oe=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray);let pe,ge,we,Ue,Le;this.e1=this.e2=-1,k&&(pe=t[R-2],Le=t[W].sub(pe)._unit()._perp());for(let dt=W;dt<R;dt++){if(we=dt===R-1?k?t[W+1]:void 0:t[dt+1],we&&t[dt].equals(we))continue;Le&&(Ue=Le),pe&&(ge=pe),pe=t[dt],Le=we?we.sub(pe)._unit()._perp():Ue,Ue=Ue||Le;let gt=Ue.add(Le);0===gt.x&&0===gt.y||gt._unit();const lt=Ue.x*Le.x+Ue.y*Le.y,Mt=gt.x*Le.x+gt.y*Le.y,It=0!==Mt?1/Mt:1/0,ti=2*Math.sqrt(2-2*Mt),Bi=Mt<Wp&&ge&&we,$i=Ue.x*Le.y-Ue.y*Le.x>0;if(Bi&&dt>W){const Ci=pe.dist(ge);if(Ci>2*ee){const Oi=pe.sub(pe.sub(ge)._mult(ee/Ci)._round());this.updateDistance(ge,Oi),this.addCurrentVertex(Oi,Ue,0,0,oe),ge=Oi}}const Pi=ge&&we;let Si=Pi?p:k?"butt":y;if(Pi&&"round"===Si&&(It<M?Si="miter":It<=2&&(Si="fakeround")),"miter"===Si&&It>C&&(Si="bevel"),"bevel"===Si&&(It>2&&(Si="flipbevel"),It<C&&(Si="miter")),ge&&this.updateDistance(ge,pe),"miter"===Si)gt._mult(It),this.addCurrentVertex(pe,gt,0,0,oe);else if("flipbevel"===Si){if(It>100)gt=Le.mult(-1);else{const Ci=It*Ue.add(Le).mag()/Ue.sub(Le).mag();gt._perp()._mult(Ci*($i?-1:1))}this.addCurrentVertex(pe,gt,0,0,oe),this.addCurrentVertex(pe,gt.mult(-1),0,0,oe)}else if("bevel"===Si||"fakeround"===Si){const Ci=-Math.sqrt(It*It-1),Oi=$i?Ci:0,Ii=$i?0:Ci;if(ge&&this.addCurrentVertex(pe,Ue,Oi,Ii,oe),"fakeround"===Si){const ui=Math.round(180*ti/Math.PI/20);for(let Ki=1;Ki<ui;Ki++){let Gi=Ki/ui;if(.5!==Gi){const Cr=Gi-.5;Gi+=Gi*Cr*(Gi-1)*((1.0904+lt*(lt*(3.55645-1.43519*lt)-3.2452))*Cr*Cr+(.848013+lt*(.215638*lt-1.06021)))}const yn=Le.sub(Ue)._mult(Gi)._add(Ue)._unit()._mult($i?-1:1);this.addHalfVertex(pe,yn.x,yn.y,!1,$i,0,oe)}}we&&this.addCurrentVertex(pe,Le,-Oi,-Ii,oe)}else if("butt"===Si)this.addCurrentVertex(pe,gt,0,0,oe);else if("square"===Si){const Ci=ge?1:-1;this.addCurrentVertex(pe,gt,Ci,Ci,oe)}else"round"===Si&&(ge&&(this.addCurrentVertex(pe,Ue,0,0,oe),this.addCurrentVertex(pe,Ue,1,1,oe,!0)),we&&(this.addCurrentVertex(pe,Le,-1,-1,oe,!0),this.addCurrentVertex(pe,Le,0,0,oe)));if(Bi&&dt<R-1){const Ci=pe.dist(we);if(Ci>2*ee){const Oi=pe.add(we.sub(pe)._mult(ee/Ci)._round());this.updateDistance(pe,Oi),this.addCurrentVertex(Oi,Le,0,0,oe),pe=Oi}}}}addCurrentVertex(t,l,p,y,C,M=!1){const k=l.y*y-l.x,R=-l.y-l.x*y;this.addHalfVertex(t,l.x+l.y*p,l.y-l.x*p,M,!1,p,C),this.addHalfVertex(t,k,R,M,!0,-y,C),this.distance>Bc/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,l,p,y,C,M))}addHalfVertex({x:t,y:l},p,y,C,M,k,R){const W=.5*(this.lineClips?this.scaledDistance*(Bc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(C?1:0),(l<<1)+(M?1:0),Math.round(63*p)+128,Math.round(63*y)+128,1+(0===k?0:k<0?-1:1)|(63&W)<<2,W>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ee=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ee),R.primitiveLength++),M?this.e2=ee:this.e1=ee}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,l){this.distance+=t.dist(l),this.updateScaledDistance()}}let ru,Mm;Ai("LineBucket",nu,{omit:["layers","patternFeatures"]});var ch={get paint(){return Mm=Mm||new jo({"line-opacity":new mi(ct.paint_line["line-opacity"]),"line-color":new mi(ct.paint_line["line-color"]),"line-translate":new Zi(ct.paint_line["line-translate"]),"line-translate-anchor":new Zi(ct.paint_line["line-translate-anchor"]),"line-width":new mi(ct.paint_line["line-width"]),"line-gap-width":new mi(ct.paint_line["line-gap-width"]),"line-offset":new mi(ct.paint_line["line-offset"]),"line-blur":new mi(ct.paint_line["line-blur"]),"line-dasharray":new lc(ct.paint_line["line-dasharray"]),"line-pattern":new ja(ct.paint_line["line-pattern"]),"line-gradient":new So(ct.paint_line["line-gradient"])})},get layout(){return ru=ru||new jo({"line-cap":new Zi(ct.layout_line["line-cap"]),"line-join":new mi(ct.layout_line["line-join"]),"line-miter-limit":new Zi(ct.layout_line["line-miter-limit"]),"line-round-limit":new Zi(ct.layout_line["line-round-limit"]),"line-sort-key":new mi(ct.layout_line["line-sort-key"])})}};class ou extends mi{possiblyEvaluate(t,l){return l=new An(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(t,l)}evaluate(t,l,p,y){return l=Gt({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(t,l,p,y)}}let Vc;function Uc(o,t){return t>0?t+2*o:o}const Dm=Sr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Sm=Sr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Sr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const yc=Sr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Sr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Tm=Sr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Yp=Sr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qp(o,t,l){return o.sections.forEach(p=>{p.text=function(y,C,M){const k=C.layout.get("text-transform").evaluate(M,{});return"uppercase"===k?y=y.toLocaleUpperCase():"lowercase"===k&&(y=y.toLocaleLowerCase()),Hn.applyArabicShaping&&(y=Hn.applyArabicShaping(y)),y}(p.text,t,l)}),o}Sr([{name:"triangle",components:3,type:"Uint16"}]),Sr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Sr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Sr([{type:"Float32",name:"offsetX"}]),Sr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const gd={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Ao=24,Fs=hr,cl=function(o,t,l,p,y){var C,M,k=8*y-p-1,R=(1<<k)-1,W=R>>1,ee=-7,oe=l?y-1:0,pe=l?-1:1,ge=o[t+oe];for(oe+=pe,C=ge&(1<<-ee)-1,ge>>=-ee,ee+=k;ee>0;C=256*C+o[t+oe],oe+=pe,ee-=8);for(M=C&(1<<-ee)-1,C>>=-ee,ee+=p;ee>0;M=256*M+o[t+oe],oe+=pe,ee-=8);if(0===C)C=1-W;else{if(C===R)return M?NaN:1/0*(ge?-1:1);M+=Math.pow(2,p),C-=W}return(ge?-1:1)*M*Math.pow(2,C-p)},Im=function(o,t,l,p,y,C){var M,k,R,W=8*C-y-1,ee=(1<<W)-1,oe=ee>>1,pe=23===y?Math.pow(2,-24)-Math.pow(2,-77):0,ge=p?0:C-1,we=p?1:-1,Ue=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(k=isNaN(t)?1:0,M=ee):(M=Math.floor(Math.log(t)/Math.LN2),t*(R=Math.pow(2,-M))<1&&(M--,R*=2),(t+=M+oe>=1?pe/R:pe*Math.pow(2,1-oe))*R>=2&&(M++,R/=2),M+oe>=ee?(k=0,M=ee):M+oe>=1?(k=(t*R-1)*Math.pow(2,y),M+=oe):(k=t*Math.pow(2,oe-1)*Math.pow(2,y),M=0));y>=8;o[l+ge]=255&k,ge+=we,k/=256,y-=8);for(M=M<<y|k,W+=y;W>0;o[l+ge]=255&M,ge+=we,M/=256,W-=8);o[l+ge-we]|=128*Ue};function hr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}hr.Varint=0,hr.Fixed64=1,hr.Bytes=2,hr.Fixed32=5;var dh=4294967296,vc=1/dh,jc=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function wl(o){return o.type===hr.Bytes?o.readVarint()+o.pos:o.pos+1}function Am(o,t,l){var p=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));l.realloc(p);for(var y=l.pos-1;y>=o;y--)l.buf[y+p]=l.buf[y]}function Kp(o,t){for(var l=0;l<o.length;l++)t.writeVarint(o[l])}function Xp(o,t){for(var l=0;l<o.length;l++)t.writeSVarint(o[l])}function su(o,t){for(var l=0;l<o.length;l++)t.writeFloat(o[l])}function au(o,t){for(var l=0;l<o.length;l++)t.writeDouble(o[l])}function Cl(o,t){for(var l=0;l<o.length;l++)t.writeBoolean(o[l])}function _d(o,t){for(var l=0;l<o.length;l++)t.writeFixed32(o[l])}function km(o,t){for(var l=0;l<o.length;l++)t.writeSFixed32(o[l])}function Pm(o,t){for(var l=0;l<o.length;l++)t.writeFixed64(o[l])}function Om(o,t){for(var l=0;l<o.length;l++)t.writeSFixed64(o[l])}function uh(o,t){return(o[t]|o[t+1]<<8|o[t+2]<<16)+16777216*o[t+3]}function yd(o,t,l){o[l]=t,o[l+1]=t>>>8,o[l+2]=t>>>16,o[l+3]=t>>>24}function Rm(o,t){return(o[t]|o[t+1]<<8|o[t+2]<<16)+(o[t+3]<<24)}hr.prototype={destroy:function(){this.buf=null},readFields:function(o,t,l){for(l=l||this.length;this.pos<l;){var p=this.readVarint(),y=p>>3,C=this.pos;this.type=7&p,o(y,t,this),this.pos===C&&this.skip(p)}return t},readMessage:function(o,t){return this.readFields(o,t,this.readVarint()+this.pos)},readFixed32:function(){var o=uh(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Rm(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=uh(this.buf,this.pos)+uh(this.buf,this.pos+4)*dh;return this.pos+=8,o},readSFixed64:function(){var o=uh(this.buf,this.pos)+Rm(this.buf,this.pos+4)*dh;return this.pos+=8,o},readFloat:function(){var o=cl(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=cl(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var t,l,p=this.buf;return t=127&(l=p[this.pos++]),l<128?t:(t|=(127&(l=p[this.pos++]))<<7,l<128?t:(t|=(127&(l=p[this.pos++]))<<14,l<128?t:(t|=(127&(l=p[this.pos++]))<<21,l<128?t:function(y,C,M){var k,R,W=M.buf;if(k=(112&(R=W[M.pos++]))>>4,R<128||(k|=(127&(R=W[M.pos++]))<<3,R<128)||(k|=(127&(R=W[M.pos++]))<<10,R<128)||(k|=(127&(R=W[M.pos++]))<<17,R<128)||(k|=(127&(R=W[M.pos++]))<<24,R<128)||(k|=(1&(R=W[M.pos++]))<<31,R<128))return function bc(o,t,l){return l?4294967296*t+(o>>>0):4294967296*(t>>>0)+(o>>>0)}(y,k,C);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(l=p[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,t=this.pos;return this.pos=o,o-t>=12&&jc?jc.decode(this.buf.subarray(t,o)):function(l,p,y){for(var C="",M=p;M<y;){var k,R,W,ee=l[M],oe=null,pe=ee>239?4:ee>223?3:ee>191?2:1;if(M+pe>y)break;1===pe?ee<128&&(oe=ee):2===pe?128==(192&(k=l[M+1]))&&(oe=(31&ee)<<6|63&k)<=127&&(oe=null):3===pe?(R=l[M+2],128==(192&(k=l[M+1]))&&128==(192&R)&&((oe=(15&ee)<<12|(63&k)<<6|63&R)<=2047||oe>=55296&&oe<=57343)&&(oe=null)):4===pe&&(R=l[M+2],W=l[M+3],128==(192&(k=l[M+1]))&&128==(192&R)&&128==(192&W)&&((oe=(15&ee)<<18|(63&k)<<12|(63&R)<<6|63&W)<=65535||oe>=1114112)&&(oe=null)),null===oe?(oe=65533,pe=1):oe>65535&&(oe-=65536,C+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),C+=String.fromCharCode(oe),M+=pe}return C}(this.buf,t,o)},readBytes:function(){var o=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,o);return this.pos=o,t},readPackedVarint:function(o,t){if(this.type!==hr.Bytes)return o.push(this.readVarint(t));var l=wl(this);for(o=o||[];this.pos<l;)o.push(this.readVarint(t));return o},readPackedSVarint:function(o){if(this.type!==hr.Bytes)return o.push(this.readSVarint());var t=wl(this);for(o=o||[];this.pos<t;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==hr.Bytes)return o.push(this.readBoolean());var t=wl(this);for(o=o||[];this.pos<t;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==hr.Bytes)return o.push(this.readFloat());var t=wl(this);for(o=o||[];this.pos<t;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==hr.Bytes)return o.push(this.readDouble());var t=wl(this);for(o=o||[];this.pos<t;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==hr.Bytes)return o.push(this.readFixed32());var t=wl(this);for(o=o||[];this.pos<t;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==hr.Bytes)return o.push(this.readSFixed32());var t=wl(this);for(o=o||[];this.pos<t;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==hr.Bytes)return o.push(this.readFixed64());var t=wl(this);for(o=o||[];this.pos<t;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==hr.Bytes)return o.push(this.readSFixed64());var t=wl(this);for(o=o||[];this.pos<t;)o.push(this.readSFixed64());return o},skip:function(o){var t=7&o;if(t===hr.Varint)for(;this.buf[this.pos++]>127;);else if(t===hr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===hr.Fixed32)this.pos+=4;else{if(t!==hr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(o,t){this.writeVarint(o<<3|t)},realloc:function(o){for(var t=this.length||16;t<this.pos+o;)t*=2;if(t!==this.length){var l=new Uint8Array(t);l.set(this.buf),this.buf=l,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),yd(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),yd(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),yd(this.buf,-1&o,this.pos),yd(this.buf,Math.floor(o*vc),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),yd(this.buf,-1&o,this.pos),yd(this.buf,Math.floor(o*vc),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(t,l){var p,y,C,k;if(t>=0?(p=t%4294967296|0,y=t/4294967296|0):(y=~(-t/4294967296),4294967295^(p=~(-t%4294967296))?p=p+1|0:(p=0,y=y+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),C=p,(k=l).buf[k.pos++]=127&C|128,C>>>=7,k.buf[k.pos++]=127&C|128,C>>>=7,k.buf[k.pos++]=127&C|128,C>>>=7,k.buf[k.pos++]=127&C|128,k.buf[k.pos]=127&(C>>>=7),function(C,M){var k=(7&C)<<4;M.buf[M.pos++]|=k|((C>>>=3)?128:0),C&&(M.buf[M.pos++]=127&C|((C>>>=7)?128:0),C&&(M.buf[M.pos++]=127&C|((C>>>=7)?128:0),C&&(M.buf[M.pos++]=127&C|((C>>>=7)?128:0),C&&(M.buf[M.pos++]=127&C|((C>>>=7)?128:0),C&&(M.buf[M.pos++]=127&C)))))}(y,l)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var t=this.pos;this.pos=function(p,y,C){for(var M,k,R=0;R<y.length;R++){if((M=y.charCodeAt(R))>55295&&M<57344){if(!k){M>56319||R+1===y.length?(p[C++]=239,p[C++]=191,p[C++]=189):k=M;continue}if(M<56320){p[C++]=239,p[C++]=191,p[C++]=189,k=M;continue}M=k-55296<<10|M-56320|65536,k=null}else k&&(p[C++]=239,p[C++]=191,p[C++]=189,k=null);M<128?p[C++]=M:(M<2048?p[C++]=M>>6|192:(M<65536?p[C++]=M>>12|224:(p[C++]=M>>18|240,p[C++]=M>>12&63|128),p[C++]=M>>6&63|128),p[C++]=63&M|128)}return C}(this.buf,o,this.pos);var l=this.pos-t;l>=128&&Am(t,l,this),this.pos=t-1,this.writeVarint(l),this.pos+=l},writeFloat:function(o){this.realloc(4),Im(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Im(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var t=o.length;this.writeVarint(t),this.realloc(t);for(var l=0;l<t;l++)this.buf[this.pos++]=o[l]},writeRawMessage:function(o,t){this.pos++;var l=this.pos;o(t,this);var p=this.pos-l;p>=128&&Am(l,p,this),this.pos=l-1,this.writeVarint(p),this.pos+=p},writeMessage:function(o,t,l){this.writeTag(o,hr.Bytes),this.writeRawMessage(t,l)},writePackedVarint:function(o,t){t.length&&this.writeMessage(o,Kp,t)},writePackedSVarint:function(o,t){t.length&&this.writeMessage(o,Xp,t)},writePackedBoolean:function(o,t){t.length&&this.writeMessage(o,Cl,t)},writePackedFloat:function(o,t){t.length&&this.writeMessage(o,su,t)},writePackedDouble:function(o,t){t.length&&this.writeMessage(o,au,t)},writePackedFixed32:function(o,t){t.length&&this.writeMessage(o,_d,t)},writePackedSFixed32:function(o,t){t.length&&this.writeMessage(o,km,t)},writePackedFixed64:function(o,t){t.length&&this.writeMessage(o,Pm,t)},writePackedSFixed64:function(o,t){t.length&&this.writeMessage(o,Om,t)},writeBytesField:function(o,t){this.writeTag(o,hr.Bytes),this.writeBytes(t)},writeFixed32Field:function(o,t){this.writeTag(o,hr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(o,t){this.writeTag(o,hr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(o,t){this.writeTag(o,hr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(o,t){this.writeTag(o,hr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(o,t){this.writeTag(o,hr.Varint),this.writeVarint(t)},writeSVarintField:function(o,t){this.writeTag(o,hr.Varint),this.writeSVarint(t)},writeStringField:function(o,t){this.writeTag(o,hr.Bytes),this.writeString(t)},writeFloatField:function(o,t){this.writeTag(o,hr.Fixed32),this.writeFloat(t)},writeDoubleField:function(o,t){this.writeTag(o,hr.Fixed64),this.writeDouble(t)},writeBooleanField:function(o,t){this.writeVarintField(o,Boolean(t))}};var dl,ql=Ze(Fs);function Hg(o,t,l){1===o&&l.readMessage($g,t)}function $g(o,t,l){if(3===o){const{id:p,bitmap:y,width:C,height:M,left:k,top:R,advance:W}=l.readMessage(Fm,{});t.push({id:p,bitmap:new Rc({width:C+6,height:M+6},y),metrics:{width:C,height:M,left:k,top:R,advance:W}})}}function Fm(o,t,l){1===o?t.id=l.readVarint():2===o?t.bitmap=l.readBytes():3===o?t.width=l.readVarint():4===o?t.height=l.readVarint():5===o?t.left=l.readSVarint():6===o?t.top=l.readSVarint():7===o&&(t.advance=l.readVarint())}function Lm(o){let t=0,l=0;for(const M of o)t+=M.w*M.h,l=Math.max(l,M.w);o.sort((M,k)=>k.h-M.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),l),h:1/0}];let y=0,C=0;for(const M of o)for(let k=p.length-1;k>=0;k--){const R=p[k];if(!(M.w>R.w||M.h>R.h)){if(M.x=R.x,M.y=R.y,C=Math.max(C,M.y+M.h),y=Math.max(y,M.x+M.w),M.w===R.w&&M.h===R.h){const W=p.pop();k<p.length&&(p[k]=W)}else M.h===R.h?(R.x+=M.w,R.w-=M.w):M.w===R.w?(R.y+=M.h,R.h-=M.h):(p.push({x:R.x+M.w,y:R.y,w:R.w-M.w,h:M.h}),R.y+=M.h,R.h-=M.h);break}}return{w:y,h:C,fill:t/(y*C)||0}}class hh{constructor(t,{pixelRatio:l,version:p,stretchX:y,stretchY:C,content:M}){this.paddedRect=t,this.pixelRatio=l,this.stretchX=y,this.stretchY=C,this.content=M,this.version=p}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Nm{constructor(t,l){const p={},y={};this.haveRenderCallbacks=[];const C=[];this.addImages(t,p,C),this.addImages(l,y,C);const{w:M,h:k}=Lm(C),R=new Go({width:M||1,height:k||1});for(const W in t){const ee=t[W],oe=p[W].paddedRect;Go.copy(ee.data,R,{x:0,y:0},{x:oe.x+1,y:oe.y+1},ee.data)}for(const W in l){const ee=l[W],oe=y[W].paddedRect,pe=oe.x+1,ge=oe.y+1,we=ee.data.width,Ue=ee.data.height;Go.copy(ee.data,R,{x:0,y:0},{x:pe,y:ge},ee.data),Go.copy(ee.data,R,{x:0,y:Ue-1},{x:pe,y:ge-1},{width:we,height:1}),Go.copy(ee.data,R,{x:0,y:0},{x:pe,y:ge+Ue},{width:we,height:1}),Go.copy(ee.data,R,{x:we-1,y:0},{x:pe-1,y:ge},{width:1,height:Ue}),Go.copy(ee.data,R,{x:0,y:0},{x:pe+we,y:ge},{width:1,height:Ue})}this.image=R,this.iconPositions=p,this.patternPositions=y}addImages(t,l,p){for(const y in t){const C=t[y],M={x:0,y:0,w:C.data.width+2,h:C.data.height+2};p.push(M),l[y]=new hh(M,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(t,l){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in t.updatedImages)this.patchUpdatedImage(this.iconPositions[p],t.getImage(p),l),this.patchUpdatedImage(this.patternPositions[p],t.getImage(p),l)}patchUpdatedImage(t,l,p){if(!t||!l||t.version===l.version)return;t.version=l.version;const[y,C]=t.tl;p.update(l.data,void 0,{x:y,y:C})}}Ai("ImagePosition",hh),Ai("ImageAtlas",Nm),_.WritingMode=void 0,(dl=_.WritingMode||(_.WritingMode={}))[dl.none=0]="none",dl[dl.horizontal=1]="horizontal",dl[dl.vertical=2]="vertical",dl[dl.horizontalOnly=3]="horizontalOnly";const lu=-17;class Hc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,l){const p=new Hc;return p.scale=t||1,p.fontStack=l,p}static forImage(t){const l=new Hc;return l.imageName=t,l}}class El{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,l){const p=new El;for(let y=0;y<t.sections.length;y++){const C=t.sections[y];C.image?p.addImageSection(C):p.addTextSection(C,l)}return p}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let l="";for(let p=0;p<t.length;p++){const y=t.charCodeAt(p+1)||null,C=t.charCodeAt(p-1)||null;l+=y&&rl(y)&&!gd[t[p+1]]||C&&rl(C)&&!gd[t[p-1]]||!gd[t[p]]?t[p]:gd[t[p]]}return l}(this.text)}trim(){let t=0;for(let p=0;p<this.text.length&&$c[this.text.charCodeAt(p)];p++)t++;let l=this.text.length;for(let p=this.text.length-1;p>=0&&p>=t&&$c[this.text.charCodeAt(p)];p--)l--;this.text=this.text.substring(t,l),this.sectionIndex=this.sectionIndex.slice(t,l)}substring(t,l){const p=new El;return p.text=this.text.substring(t,l),p.sectionIndex=this.sectionIndex.slice(t,l),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,l)=>Math.max(t,this.sections[l].scale),0)}addTextSection(t,l){this.text+=t.text,this.sections.push(Hc.forText(t.scale,t.fontStack||l));const p=this.sections.length-1;for(let y=0;y<t.text.length;++y)this.sectionIndex.push(p)}addImageSection(t){const l=t.image?t.image.name:"";if(0===l.length)return void tt("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Hc.forImage(l)),this.sectionIndex.push(this.sections.length-1)):tt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function vd(o,t,l,p,y,C,M,k,R,W,ee,oe,pe,ge,we,Ue){const Le=El.fromFeature(o,y);let dt;oe===_.WritingMode.vertical&&Le.verticalizePunctuation();const{processBidirectionalText:gt,processStyledBidirectionalText:lt}=Hn;if(gt&&1===Le.sections.length){dt=[];const ti=gt(Le.toString(),cu(Le,W,C,t,p,ge,we));for(const Bi of ti){const $i=new El;$i.text=Bi,$i.sections=Le.sections;for(let Pi=0;Pi<Bi.length;Pi++)$i.sectionIndex.push(0);dt.push($i)}}else if(lt){dt=[];const ti=lt(Le.text,Le.sectionIndex,cu(Le,W,C,t,p,ge,we));for(const Bi of ti){const $i=new El;$i.text=Bi[0],$i.sectionIndex=Bi[1],$i.sections=Le.sections,dt.push($i)}}else dt=function(ti,Bi){const $i=[],Pi=ti.text;let Si=0;for(const Ci of Bi)$i.push(ti.substring(Si,Ci)),Si=Ci;return Si<Pi.length&&$i.push(ti.substring(Si,Pi.length)),$i}(Le,cu(Le,W,C,t,p,ge,we));const Mt=[],It={positionedLines:Mt,text:Le.toString(),top:ee[1],bottom:ee[1],left:ee[0],right:ee[0],writingMode:oe,iconsInText:!1,verticalizable:!1};return function(ti,Bi,$i,Pi,Si,Ci,Oi,Ii,ui,Ki,Gi,yn){let Cr=0,Er=lu,mo=0,fa=0;const Wo="right"===Ii?1:"left"===Ii?0:.5;let so=0;for(const Nr of Si){Nr.trim();const xo=Nr.getMaxScale(),bs=(xo-1)*Ao,qo={positionedGlyphs:[],lineOffset:0};ti.positionedLines[so]=qo;const Ls=qo.positionedGlyphs;let ia=0;if(!Nr.length()){Er+=Ci,++so;continue}for(let Po=0;Po<Nr.length();Po++){const Sn=Nr.getSection(Po),Ns=Nr.getSectionIndex(Po),wo=Nr.getCharCode(Po);let rs=0,zs=null,os=null,na=null,ga=Ao;const Bs=!(ui===_.WritingMode.horizontal||!Gi&&!qs(wo)||Gi&&($c[wo]||(bo=wo,Di.Arabic(bo)||Di["Arabic Supplement"](bo)||Di["Arabic Extended-A"](bo)||Di["Arabic Presentation Forms-A"](bo)||Di["Arabic Presentation Forms-B"](bo))));if(Sn.imageName){const ss=Pi[Sn.imageName];if(!ss)continue;na=Sn.imageName,ti.iconsInText=ti.iconsInText||!0,os=ss.paddedRect;const xs=ss.displaySize;Sn.scale=Sn.scale*Ao/yn,zs={width:xs[0],height:xs[1],left:1,top:-3,advance:Bs?xs[1]:xs[0]},rs=bs+(Ao-xs[1]*Sn.scale),ga=zs.advance;const Wa=Bs?xs[0]*Sn.scale-Ao*xo:xs[1]*Sn.scale-Ao*xo;Wa>0&&Wa>ia&&(ia=Wa)}else{const ss=$i[Sn.fontStack],xs=ss&&ss[wo];if(xs&&xs.rect)os=xs.rect,zs=xs.metrics;else{const Wa=Bi[Sn.fontStack],Sc=Wa&&Wa[wo];if(!Sc)continue;zs=Sc.metrics}rs=(xo-Sn.scale)*Ao}Bs?(ti.verticalizable=!0,Ls.push({glyph:wo,imageName:na,x:Cr,y:Er+rs,vertical:Bs,scale:Sn.scale,fontStack:Sn.fontStack,sectionIndex:Ns,metrics:zs,rect:os}),Cr+=ga*Sn.scale+Ki):(Ls.push({glyph:wo,imageName:na,x:Cr,y:Er+rs,vertical:Bs,scale:Sn.scale,fontStack:Sn.fontStack,sectionIndex:Ns,metrics:zs,rect:os}),Cr+=zs.advance*Sn.scale+Ki)}0!==Ls.length&&(mo=Math.max(Cr-Ki,mo),ef(Ls,0,Ls.length-1,Wo,ia)),Cr=0;const _r=Ci*xo+ia;qo.lineOffset=Math.max(ia,bs),Er+=_r,fa=Math.max(_r,fa),++so}var bo;const ko=Er-lu,{horizontalAlign:Yo,verticalAlign:vs}=bd(Oi);(function(Nr,xo,bs,qo,Ls,ia,_r,Po,Sn){const Ns=(xo-bs)*Ls;let wo=0;wo=ia!==_r?-Po*qo-lu:(-qo*Sn+.5)*_r;for(const rs of Nr)for(const zs of rs.positionedGlyphs)zs.x+=Ns,zs.y+=wo})(ti.positionedLines,Wo,Yo,vs,mo,fa,Ci,ko,Si.length),ti.top+=-vs*ko,ti.bottom=ti.top+ko,ti.left+=-Yo*mo,ti.right=ti.left+mo}(It,t,l,p,dt,M,k,R,oe,W,pe,Ue),!function(ti){for(const Bi of ti)if(0!==Bi.positionedGlyphs.length)return!1;return!0}(Mt)&&It}const $c={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Jp={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function oo(o,t,l,p,y,C){if(t.imageName){const M=p[t.imageName];return M?M.displaySize[0]*t.scale*Ao/C+y:0}{const M=l[t.fontStack],k=M&&M[o];return k?k.metrics.advance*t.scale+y:0}}function mh(o,t,l,p){const y=Math.pow(o-t,2);return p?o<t?y/2:2*y:y+Math.abs(l)*l}function Qp(o,t,l){let p=0;return 10===o&&(p-=1e4),l&&(p+=150),40!==o&&65288!==o||(p+=50),41!==t&&65289!==t||(p+=50),p}function ph(o,t,l,p,y,C){let M=null,k=mh(t,l,y,C);for(const R of p){const W=mh(t-R.x,l,y,C)+R.badness;W<=k&&(M=R,k=W)}return{index:o,x:t,priorBreak:M,badness:k}}function fh(o){return o?fh(o.priorBreak).concat(o.index):[]}function cu(o,t,l,p,y,C,M){if("point"!==C)return[];if(!o)return[];const k=[],R=function(pe,ge,we,Ue,Le,dt){let gt=0;for(let lt=0;lt<pe.length();lt++){const Mt=pe.getSection(lt);gt+=oo(pe.getCharCode(lt),Mt,Ue,Le,ge,dt)}return gt/Math.max(1,Math.ceil(gt/we))}(o,t,l,p,y,M),W=o.text.indexOf("\u200b")>=0;let ee=0;for(let pe=0;pe<o.length();pe++){const ge=o.getSection(pe),we=o.getCharCode(pe);if($c[we]||(ee+=oo(we,ge,p,y,t,M)),pe<o.length()-1){const Ue=!((oe=we)<11904||!(Di["Bopomofo Extended"](oe)||Di.Bopomofo(oe)||Di["CJK Compatibility Forms"](oe)||Di["CJK Compatibility Ideographs"](oe)||Di["CJK Compatibility"](oe)||Di["CJK Radicals Supplement"](oe)||Di["CJK Strokes"](oe)||Di["CJK Symbols and Punctuation"](oe)||Di["CJK Unified Ideographs Extension A"](oe)||Di["CJK Unified Ideographs"](oe)||Di["Enclosed CJK Letters and Months"](oe)||Di["Halfwidth and Fullwidth Forms"](oe)||Di.Hiragana(oe)||Di["Ideographic Description Characters"](oe)||Di["Kangxi Radicals"](oe)||Di["Katakana Phonetic Extensions"](oe)||Di.Katakana(oe)||Di["Vertical Forms"](oe)||Di["Yi Radicals"](oe)||Di["Yi Syllables"](oe)));(Jp[we]||Ue||ge.imageName)&&k.push(ph(pe+1,ee,R,k,Qp(we,o.getCharCode(pe+1),Ue&&W),!1))}}var oe;return fh(ph(o.length(),ee,R,k,0,!0))}function bd(o){let t=.5,l=.5;switch(o){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:t,verticalAlign:l}}function ef(o,t,l,p,y){if(!p&&!y)return;const C=o[l],M=(o[l].x+C.metrics.advance*C.scale)*p;for(let k=t;k<=l;k++)o[k].x-=M,o[k].y+=y}function tf(o,t,l){const{horizontalAlign:p,verticalAlign:y}=bd(l),C=t[0]-o.displaySize[0]*p,M=t[1]-o.displaySize[1]*y;return{image:o,top:M,bottom:M+o.displaySize[1],left:C,right:C+o.displaySize[0]}}function gh(o,t,l,p,y,C){const M=o.image;let k;if(M.content){const Le=M.content,dt=M.pixelRatio||1;k=[Le[0]/dt,Le[1]/dt,M.displaySize[0]-Le[2]/dt,M.displaySize[1]-Le[3]/dt]}const R=t.left*C,W=t.right*C;let ee,oe,pe,ge;"width"===l||"both"===l?(ge=y[0]+R-p[3],oe=y[0]+W+p[1]):(ge=y[0]+(R+W-M.displaySize[0])/2,oe=ge+M.displaySize[0]);const we=t.top*C,Ue=t.bottom*C;return"height"===l||"both"===l?(ee=y[1]+we-p[0],pe=y[1]+Ue+p[2]):(ee=y[1]+(we+Ue-M.displaySize[1])/2,pe=ee+M.displaySize[1]),{image:M,top:ee,right:oe,bottom:pe,left:ge,collisionPadding:k}}const Ml=128,xc=32640;function wc(o,t){const{expression:l}=t;if("constant"===l.kind)return{kind:"constant",layoutSize:l.evaluate(new An(o+1))};if("source"===l.kind)return{kind:"source"};{const{zoomStops:p,interpolationType:y}=l;let C=0;for(;C<p.length&&p[C]<=o;)C++;C=Math.max(0,C-1);let M=C;for(;M<p.length&&p[M]<o+1;)M++;M=Math.min(p.length-1,M);const k=p[C],R=p[M];return"composite"===l.kind?{kind:"composite",minZoom:k,maxZoom:R,interpolationType:y}:{kind:"camera",minZoom:k,maxZoom:R,minSize:l.evaluate(new An(k)),maxSize:l.evaluate(new An(R)),interpolationType:y}}}function xd(o,t,l){let p="never";const y=o.get(t);return y?p=y:o.get(l)&&(p="always"),p}const zm=Wl.VectorTileFeature.types,Bm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gc(o,t,l,p,y,C,M,k,R,W,ee,oe,pe){const ge=k?Math.min(xc,Math.round(k[0])):0,we=k?Math.min(xc,Math.round(k[1])):0;o.emplaceBack(t,l,Math.round(32*p),Math.round(32*y),C,M,(ge<<1)+(R?1:0),we,16*W,16*ee,256*oe,256*pe)}function _h(o,t,l){o.emplaceBack(t.x,t.y,l),o.emplaceBack(t.x,t.y,l),o.emplaceBack(t.x,t.y,l),o.emplaceBack(t.x,t.y,l)}function nf(o){for(const t of o.sections)if(H(t.text))return!0;return!1}class wd{constructor(t){this.layoutVertexArray=new bt,this.indexArray=new D,this.programConfigurations=t,this.segments=new le,this.dynamicLayoutVertexArray=new Rt,this.opacityVertexArray=new ii,this.hasVisibleVertices=!1,this.placedSymbolArray=new P}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,l,p,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Dm.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Sm.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Bm,!0),this.opacityVertexBuffer.itemSize=1),(p||y)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ai("SymbolBuffers",wd);class du{constructor(t,l,p){this.layoutVertexArray=new t,this.layoutAttributes=l,this.indexArray=new p,this.segments=new le,this.collisionVertexArray=new A}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,yc.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ai("CollisionBuffers",du);class ul{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(M=>M.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$d([]),this.placementViewportMatrix=$d([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wc(this.zoom,l["text-size"]),this.iconSizeData=wc(this.zoom,l["icon-size"]);const p=this.layers[0].layout,y=p.get("symbol-sort-key"),C=p.get("symbol-z-order");this.canOverlap="never"!==xd(p,"text-overlap","text-allow-overlap")||"never"!==xd(p,"icon-overlap","icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==C&&!y.isConstant(),this.sortFeaturesByY=("viewport-y"===C||"auto"===C&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===p.get("symbol-placement")&&(this.writingModes=p.get("text-writing-mode").map(M=>_.WritingMode[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=t.sourceID}createArrays(){this.text=new wd(new ea(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new wd(new ea(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new G,this.lineVertexArray=new ie,this.symbolInstances=new L}calculateGlyphDependencies(t,l,p,y,C){for(let M=0;M<t.length;M++)if(l[t.charCodeAt(M)]=!0,(p||y)&&C){const k=gd[t.charAt(M)];k&&(l[k.charCodeAt(0)]=!0)}}populate(t,l,p){const y=this.layers[0],C=y.layout,M=C.get("text-font"),k=C.get("text-field"),R=C.get("icon-image"),W=("constant"!==k.value.kind||k.value.value instanceof wn&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&("constant"!==M.value.kind||M.value.value.length>0),ee="constant"!==R.value.kind||!!R.value.value||Object.keys(R.parameters).length>0,oe=C.get("symbol-sort-key");if(this.features=[],!W&&!ee)return;const pe=l.iconDependencies,ge=l.glyphDependencies,we=l.availableImages,Ue=new An(this.zoom);for(const{feature:Le,id:dt,index:gt,sourceLayerIndex:lt}of t){const Mt=y._featureFilter.needGeometry,It=bl(Le,Mt);if(!y._featureFilter.filter(Ue,It,p))continue;let ti,Bi;if(Mt||(It.geometry=Za(Le)),W){const Pi=y.getValueAndResolveTokens("text-field",It,p,we),Si=wn.factory(Pi);nf(Si)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===nr()||this.hasRTLText&&Hn.isParsed())&&(ti=qp(Si,y,It))}if(ee){const Pi=y.getValueAndResolveTokens("icon-image",It,p,we);Bi=Pi instanceof Qi?Pi:Qi.fromString(Pi)}if(!ti&&!Bi)continue;const $i=this.sortFeaturesByKey?oe.evaluate(It,{},p):void 0;if(this.features.push({id:dt,text:ti,icon:Bi,index:gt,sourceLayerIndex:lt,geometry:It.geometry,properties:Le.properties,type:zm[Le.type],sortKey:$i}),Bi&&(pe[Bi.name]=!0),ti){const Pi=M.evaluate(It,{},p).join(","),Si="viewport"!==C.get("text-rotation-alignment")&&"point"!==C.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_.WritingMode.vertical)>=0;for(const Ci of ti.sections)if(Ci.image)pe[Ci.image.name]=!0;else{const Oi=zl(ti.toString()),Ii=Ci.fontStack||Pi,ui=ge[Ii]=ge[Ii]||{};this.calculateGlyphDependencies(Ci.text,ui,Si,this.allowVerticalPlacement,Oi)}}}"line"===C.get("symbol-placement")&&(this.features=function(Le){const dt={},gt={},lt=[];let Mt=0;function It(Pi){lt.push(Le[Pi]),Mt++}function ti(Pi,Si,Ci){const Oi=gt[Pi];return delete gt[Pi],gt[Si]=Oi,lt[Oi].geometry[0].pop(),lt[Oi].geometry[0]=lt[Oi].geometry[0].concat(Ci[0]),Oi}function Bi(Pi,Si,Ci){const Oi=dt[Si];return delete dt[Si],dt[Pi]=Oi,lt[Oi].geometry[0].shift(),lt[Oi].geometry[0]=Ci[0].concat(lt[Oi].geometry[0]),Oi}function $i(Pi,Si,Ci){const Oi=Ci?Si[0][Si[0].length-1]:Si[0][0];return`${Pi}:${Oi.x}:${Oi.y}`}for(let Pi=0;Pi<Le.length;Pi++){const Si=Le[Pi],Ci=Si.geometry,Oi=Si.text?Si.text.toString():null;if(!Oi){It(Pi);continue}const Ii=$i(Oi,Ci),ui=$i(Oi,Ci,!0);if(Ii in gt&&ui in dt&&gt[Ii]!==dt[ui]){const Ki=Bi(Ii,ui,Ci),Gi=ti(Ii,ui,lt[Ki].geometry);delete dt[Ii],delete gt[ui],gt[$i(Oi,lt[Gi].geometry,!0)]=Gi,lt[Ki].geometry=null}else Ii in gt?ti(Ii,ui,Ci):ui in dt?Bi(Ii,ui,Ci):(It(Pi),dt[Ii]=Mt-1,gt[ui]=Mt-1)}return lt.filter(Pi=>Pi.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Le,dt)=>Le.sortKey-dt.sortKey)}update(t,l,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,l,this.layers,p),this.icon.programConfigurations.updatePaintArrays(t,l,this.layers,p))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,l){const p=this.lineVertexArray.length;if(void 0!==t.segment){let y=t.dist(l[t.segment+1]),C=t.dist(l[t.segment]);const M={};for(let k=t.segment+1;k<l.length;k++)M[k]={x:l[k].x,y:l[k].y,tileUnitDistanceFromAnchor:y},k<l.length-1&&(y+=l[k+1].dist(l[k]));for(let k=t.segment||0;k>=0;k--)M[k]={x:l[k].x,y:l[k].y,tileUnitDistanceFromAnchor:C},k>0&&(C+=l[k-1].dist(l[k]));for(let k=0;k<l.length;k++){const R=M[k];this.lineVertexArray.emplaceBack(R.x,R.y,R.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(t,l,p,y,C,M,k,R,W,ee,oe,pe){const ge=t.indexArray,we=t.layoutVertexArray,Ue=t.segments.prepareSegment(4*l.length,we,ge,this.canOverlap?M.sortKey:void 0),Le=this.glyphOffsetArray.length,dt=Ue.vertexLength,gt=this.allowVerticalPlacement&&k===_.WritingMode.vertical?Math.PI/2:0,lt=M.text&&M.text.sections;for(let Mt=0;Mt<l.length;Mt++){const{tl:It,tr:ti,bl:Bi,br:$i,tex:Pi,pixelOffsetTL:Si,pixelOffsetBR:Ci,minFontScaleX:Oi,minFontScaleY:Ii,glyphOffset:ui,isSDF:Ki,sectionIndex:Gi}=l[Mt],yn=Ue.vertexLength,Cr=ui[1];Gc(we,R.x,R.y,It.x,Cr+It.y,Pi.x,Pi.y,p,Ki,Si.x,Si.y,Oi,Ii),Gc(we,R.x,R.y,ti.x,Cr+ti.y,Pi.x+Pi.w,Pi.y,p,Ki,Ci.x,Si.y,Oi,Ii),Gc(we,R.x,R.y,Bi.x,Cr+Bi.y,Pi.x,Pi.y+Pi.h,p,Ki,Si.x,Ci.y,Oi,Ii),Gc(we,R.x,R.y,$i.x,Cr+$i.y,Pi.x+Pi.w,Pi.y+Pi.h,p,Ki,Ci.x,Ci.y,Oi,Ii),_h(t.dynamicLayoutVertexArray,R,gt),ge.emplaceBack(yn,yn+1,yn+2),ge.emplaceBack(yn+1,yn+2,yn+3),Ue.vertexLength+=4,Ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ui[0]),Mt!==l.length-1&&Gi===l[Mt+1].sectionIndex||t.programConfigurations.populatePaintArrays(we.length,M,M.index,{},pe,lt&&lt[Gi])}t.placedSymbolArray.emplaceBack(R.x,R.y,Le,this.glyphOffsetArray.length-Le,dt,W,ee,R.segment,p?p[0]:0,p?p[1]:0,y[0],y[1],k,0,!1,0,oe)}_addCollisionDebugVertex(t,l,p,y,C,M){return l.emplaceBack(0,0),t.emplaceBack(p.x,p.y,y,C,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(t,l,p,y,C,M,k){const R=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),W=R.vertexLength,ee=C.layoutVertexArray,oe=C.collisionVertexArray,pe=k.anchorX,ge=k.anchorY;this._addCollisionDebugVertex(ee,oe,M,pe,ge,new Ae(t,l)),this._addCollisionDebugVertex(ee,oe,M,pe,ge,new Ae(p,l)),this._addCollisionDebugVertex(ee,oe,M,pe,ge,new Ae(p,y)),this._addCollisionDebugVertex(ee,oe,M,pe,ge,new Ae(t,y)),R.vertexLength+=4;const we=C.indexArray;we.emplaceBack(W,W+1),we.emplaceBack(W+1,W+2),we.emplaceBack(W+2,W+3),we.emplaceBack(W+3,W),R.primitiveLength+=4}addDebugCollisionBoxes(t,l,p,y){for(let C=t;C<l;C++){const M=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,y?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new du(I,Tm.members,F),this.iconCollisionBox=new du(I,Tm.members,F);for(let t=0;t<this.symbolInstances.length;t++){const l=this.symbolInstances.get(t);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(t,l,p,y,C,M,k,R,W){const ee={};for(let oe=l;oe<p;oe++){const pe=t.get(oe);ee.textBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},ee.textFeatureIndex=pe.featureIndex;break}for(let oe=y;oe<C;oe++){const pe=t.get(oe);ee.verticalTextBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},ee.verticalTextFeatureIndex=pe.featureIndex;break}for(let oe=M;oe<k;oe++){const pe=t.get(oe);ee.iconBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},ee.iconFeatureIndex=pe.featureIndex;break}for(let oe=R;oe<W;oe++){const pe=t.get(oe);ee.verticalIconBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},ee.verticalIconFeatureIndex=pe.featureIndex;break}return ee}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const p=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,l){const p=t.placedSymbolArray.get(l),y=p.vertexStartIndex+4*p.numGlyphs;for(let C=p.vertexStartIndex;C<y;C+=4)t.indexArray.emplaceBack(C,C+1,C+2),t.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const l=Math.sin(t),p=Math.cos(t),y=[],C=[],M=[];for(let k=0;k<this.symbolInstances.length;++k){M.push(k);const R=this.symbolInstances.get(k);y.push(0|Math.round(l*R.anchorX+p*R.anchorY)),C.push(R.featureIndex)}return M.sort((k,R)=>y[k]-y[R]||C[R]-C[k]),M}addToSortKeyRanges(t,l){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===l?p.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const p=this.symbolInstances.get(l);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((y,C,M)=>{y>=0&&M.indexOf(y)===C&&this.addIndicesForPlacedSymbol(this.text,y)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let rf,Zc;Ai("SymbolBucket",ul,{omit:["layers","collisionBoxArray","features","compareText"]}),ul.MAX_GLYPHS=65535,ul.addDynamicAttributes=_h;var yh={get paint(){return Zc=Zc||new jo({"icon-opacity":new mi(ct.paint_symbol["icon-opacity"]),"icon-color":new mi(ct.paint_symbol["icon-color"]),"icon-halo-color":new mi(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new mi(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mi(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new Zi(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zi(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new mi(ct.paint_symbol["text-opacity"]),"text-color":new mi(ct.paint_symbol["text-color"],{runtimeType:Qe,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new mi(ct.paint_symbol["text-halo-color"]),"text-halo-width":new mi(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new mi(ct.paint_symbol["text-halo-blur"]),"text-translate":new Zi(ct.paint_symbol["text-translate"]),"text-translate-anchor":new Zi(ct.paint_symbol["text-translate-anchor"])})},get layout(){return rf=rf||new jo({"symbol-placement":new Zi(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new Zi(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zi(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mi(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zi(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zi(ct.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zi(ct.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zi(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zi(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zi(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new mi(ct.layout_symbol["icon-size"]),"icon-text-fit":new Zi(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zi(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new mi(ct.layout_symbol["icon-image"]),"icon-rotate":new mi(ct.layout_symbol["icon-rotate"]),"icon-padding":new mi(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new Zi(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new mi(ct.layout_symbol["icon-offset"]),"icon-anchor":new mi(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zi(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zi(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zi(ct.layout_symbol["text-rotation-alignment"]),"text-field":new mi(ct.layout_symbol["text-field"]),"text-font":new mi(ct.layout_symbol["text-font"]),"text-size":new mi(ct.layout_symbol["text-size"]),"text-max-width":new mi(ct.layout_symbol["text-max-width"]),"text-line-height":new Zi(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new mi(ct.layout_symbol["text-letter-spacing"]),"text-justify":new mi(ct.layout_symbol["text-justify"]),"text-radial-offset":new mi(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zi(ct.layout_symbol["text-variable-anchor"]),"text-anchor":new mi(ct.layout_symbol["text-anchor"]),"text-max-angle":new Zi(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new Zi(ct.layout_symbol["text-writing-mode"]),"text-rotate":new mi(ct.layout_symbol["text-rotate"]),"text-padding":new Zi(ct.layout_symbol["text-padding"]),"text-keep-upright":new Zi(ct.layout_symbol["text-keep-upright"]),"text-transform":new mi(ct.layout_symbol["text-transform"]),"text-offset":new mi(ct.layout_symbol["text-offset"]),"text-allow-overlap":new Zi(ct.layout_symbol["text-allow-overlap"]),"text-overlap":new Zi(ct.layout_symbol["text-overlap"]),"text-ignore-placement":new Zi(ct.layout_symbol["text-ignore-placement"]),"text-optional":new Zi(ct.layout_symbol["text-optional"])})}};class uu{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:nt,this.defaultValue=t}evaluate(t){if(t.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(t.formattedSection))return l.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ai("FormatSectionOverride",uu,{omit:["defaultValue"]});class Cd extends Hr{constructor(t){super(t,yh)}recalculate(t,l){if(super.recalculate(t,l),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const p=this.layout.get("text-writing-mode");if(p){const y=[];for(const C of p)y.indexOf(C)<0&&y.push(C);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,l,p,y){const C=this.layout.get(t).evaluate(l,{},p,y),M=this._unevaluatedLayout._values[t];return M.isDataDriven()||Lo(M.value)||!C?C:(k=l.properties,C.replace(/{([^{}]+)}/g,(W,ee)=>ee in k?String(k[ee]):""));var k}createBucket(t){return new ul(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of yh.paint.overridableProperties){if(!Cd.hasPaintOverride(this.layout,t))continue;const l=this.paint.get(t),p=new uu(l),y=new Da(p,l.property.specification);let C=null;C="constant"===l.value.kind||"source"===l.value.kind?new La("source",y):new on("composite",y,l.value.zoomStops),this.paint._values[t]=new ts(l.property,C,l.parameters)}}_handleOverridablePaintPropertyUpdate(t,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&Cd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,l){const p=t.get("text-field"),y=yh.paint.properties[l];let C=!1;const M=k=>{for(const R of k)if(y.overrides&&y.overrides.hasOverride(R))return void(C=!0)};if("constant"===p.value.kind&&p.value.value instanceof wn)M(p.value.value.sections);else if("source"===p.value.kind){const k=W=>{C||(W instanceof ds&&Cn(W.value)===li?M(W.value.sections):W instanceof ca?M(W.sections):W.eachChild(k))},R=p.value;R._styleExpression&&k(R._styleExpression.expression)}return C}}let vh;var Cc={get paint(){return vh=vh||new jo({"background-color":new Zi(ct.paint_background["background-color"]),"background-pattern":new lc(ct.paint_background["background-pattern"]),"background-opacity":new Zi(ct.paint_background["background-opacity"])})}};let Vm;var Ed={get paint(){return Vm=Vm||new jo({"raster-opacity":new Zi(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zi(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zi(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zi(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new Zi(ct.paint_raster["raster-saturation"]),"raster-contrast":new Zi(ct.paint_raster["raster-contrast"]),"raster-resampling":new Zi(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new Zi(ct.paint_raster["raster-fade-duration"])})}};class hu extends Hr{constructor(t){super(t,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const bh={circle:class extends Hr{constructor(o){super(o,Bp)}createBucket(o){return new Ud(o)}queryRadius(o){const t=o;return Hd("circle-radius",this,t)+Hd("circle-stroke-width",this,t)+Zu(this.paint.get("circle-translate"))}queryIntersectsFeature(o,t,l,p,y,C,M,k){const R=Wu(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,M),W=this.paint.get("circle-radius").evaluate(t,l)+this.paint.get("circle-stroke-width").evaluate(t,l),ee="map"===this.paint.get("circle-pitch-alignment"),oe=ee?R:(we=k,R.map(Ue=>am(Ue,we))),pe=ee?W*M:W;var we;for(const ge of p)for(const we of ge){const Ue=ee?we:am(we,k);let Le=pe;const dt=Gd([],[we.x,we.y,0,1],k);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Le*=dt[3]/C.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Le*=C.cameraToCenterDistance/dt[3]),rm(oe,Ue,Le))return!0}return!1}},heatmap:class extends Hr{createBucket(o){return new lm(o)}constructor(o){super(o,Zd),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends Hr{constructor(o){super(o,Wd)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends Hr{constructor(o){super(o,ym)}recalculate(o,t){super.recalculate(o,t);const l=this.paint._values["fill-outline-color"];"constant"===l.value.kind&&void 0===l.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new nh(o)}queryRadius(){return Zu(this.paint.get("fill-translate"))}queryIntersectsFeature(o,t,l,p,y,C,M){return Rp(Wu(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,M),p)}isTileClipped(){return!0}},"fill-extrusion":class extends Hr{constructor(o){super(o,Gp)}createBucket(o){return new _c(o)}queryRadius(){return Zu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,t,l,p,y,C,M,k){const R=Wu(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,M),W=this.paint.get("fill-extrusion-height").evaluate(t,l),ee=this.paint.get("fill-extrusion-base").evaluate(t,l),oe=function(ge,we,Ue,Le){const dt=[];for(const gt of ge){const lt=[gt.x,gt.y,0,1];Gd(lt,lt,we),dt.push(new Ae(lt[0]/lt[3],lt[1]/lt[3]))}return dt}(R,k),pe=function(ge,we,Ue,Le){const dt=[],gt=[],lt=Le[8]*we,Mt=Le[9]*we,It=Le[10]*we,ti=Le[11]*we,Bi=Le[8]*Ue,$i=Le[9]*Ue,Pi=Le[10]*Ue,Si=Le[11]*Ue;for(const Ci of ge){const Oi=[],Ii=[];for(const ui of Ci){const Ki=ui.x,Gi=ui.y,yn=Le[0]*Ki+Le[4]*Gi+Le[12],Cr=Le[1]*Ki+Le[5]*Gi+Le[13],Er=Le[2]*Ki+Le[6]*Gi+Le[14],mo=Le[3]*Ki+Le[7]*Gi+Le[15],fa=Er+It,Wo=mo+ti,so=yn+Bi,bo=Cr+$i,ko=Er+Pi,Yo=mo+Si,vs=new Ae((yn+lt)/Wo,(Cr+Mt)/Wo);vs.z=fa/Wo,Oi.push(vs);const Nr=new Ae(so/Yo,bo/Yo);Nr.z=ko/Yo,Ii.push(Nr)}dt.push(Oi),gt.push(Ii)}return[dt,gt]}(p,ee,W,k);return function(ge,we,Ue){let Le=1/0;Rp(Ue,we)&&(Le=ah(Ue,we[0]));for(let dt=0;dt<we.length;dt++){const gt=we[dt],lt=ge[dt];for(let Mt=0;Mt<gt.length-1;Mt++){const It=gt[Mt],ti=[It,gt[Mt+1],lt[Mt+1],lt[Mt],It];nm(Ue,ti)&&(Le=Math.min(Le,ah(Ue,ti)))}}return Le!==1/0&&Le}(pe[0],pe[1],oe)}},line:class extends Hr{constructor(o){super(o,ch),this.gradientVersion=0,Vc||(Vc=new ou(ch.paint.properties["line-width"].specification),Vc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){"line-gradient"===o&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,t){super.recalculate(o,t),this.paint._values["line-floorwidth"]=Vc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new nu(o)}queryRadius(o){const t=o,l=Uc(Hd("line-width",this,t),Hd("line-gap-width",this,t)),p=Hd("line-offset",this,t);return l/2+Math.abs(p)+Zu(this.paint.get("line-translate"))}queryIntersectsFeature(o,t,l,p,y,C,M){const k=Wu(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,M),R=M/2*Uc(this.paint.get("line-width").evaluate(t,l),this.paint.get("line-gap-width").evaluate(t,l)),W=this.paint.get("line-offset").evaluate(t,l);return W&&(p=function(ee,oe){const pe=[];for(let ge=0;ge<ee.length;ge++){const we=ee[ge],Ue=[];for(let Le=0;Le<we.length;Le++){const dt=we[Le-1],gt=we[Le],lt=we[Le+1],Mt=0===Le?new Ae(0,0):gt.sub(dt)._unit()._perp(),It=Le===we.length-1?new Ae(0,0):lt.sub(gt)._unit()._perp(),ti=Mt._add(It)._unit(),Bi=ti.x*It.x+ti.y*It.y;0!==Bi&&ti._mult(1/Bi),Ue.push(ti._mult(oe)._add(gt))}pe.push(Ue)}return pe}(p,W*M)),function(ee,oe,pe){for(let ge=0;ge<oe.length;ge++){const we=oe[ge];if(ee.length>=3)for(let Ue=0;Ue<we.length;Ue++)if(rd(ee,we[Ue]))return!0;if(om(ee,we,pe))return!0}return!1}(k,p,R)}isTileClipped(){return!0}},symbol:Cd,background:class extends Hr{constructor(o){super(o,Cc)}},raster:class extends Hr{constructor(o){super(o,Ed)}}};class xh{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Kl=6371008.8;class ta{constructor(t,l){if(isNaN(t)||isNaN(l))throw new Error(`Invalid LngLat object: (${t}, ${l})`);if(this.lng=+t,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ta(mt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const l=Math.PI/180,p=this.lat*l,y=t.lat*l,C=Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos((t.lng-this.lng)*l);return Kl*Math.acos(Math.min(C,1))}static convert(t){if(t instanceof ta)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new ta(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new ta(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Md=2*Math.PI*Kl;function Dd(o){return Md*Math.cos(o*Math.PI/180)}function Um(o){return(180+o)/360}function wh(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function mu(o,t){return o/Dd(t)}function Dl(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Sd{constructor(t,l,p=0){this.x=+t,this.y=+l,this.z=+p}static fromLngLat(t,l=0){const p=ta.convert(t);return new Sd(Um(p.lng),wh(p.lat),mu(l,p.lat))}toLngLat(){return new ta(360*this.x-180,Dl(this.y))}toAltitude(){return this.z*Dd(Dl(this.y))}meterInMercatorCoordinateUnits(){return 1/Md*(t=Dl(this.y),1/Math.cos(t*Math.PI/180));var t}}function jm(o,t,l){var p=2*Math.PI*6378137/256/Math.pow(2,l);return[o*p-2*Math.PI*6378137/2,t*p-2*Math.PI*6378137/2]}class Ch{constructor(t,l,p){if(t<0||t>25||p<0||p>=Math.pow(2,t)||l<0||l>=Math.pow(2,t))throw new Error(`x=${l}, y=${p}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=l,this.y=p,this.key=Wc(0,t,t,l,p)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,l,p){const y=(M=this.y,k=this.z,R=jm(256*(C=this.x),256*(M=Math.pow(2,k)-M-1),k),W=jm(256*(C+1),256*(M+1),k),R[0]+","+R[1]+","+W[0]+","+W[1]);var C,M,k,R,W;const ee=function(oe,pe,ge){let we,Ue="";for(let Le=oe;Le>0;Le--)we=1<<Le-1,Ue+=(pe&we?1:0)+(ge&we?2:0);return Ue}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===p?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,ee).replace(/{bbox-epsg-3857}/g,y)}isChildOf(t){const l=this.z-t.z;return l>0&&t.x===this.x>>l&&t.y===this.y>>l}getTilePoint(t){const l=Math.pow(2,this.z);return new Ae((t.x*l-this.x)*Ir,(t.y*l-this.y)*Ir)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pu{constructor(t,l){this.wrap=t,this.canonical=l,this.key=Wc(t,l.z,l.z,l.x,l.y)}}class ma{constructor(t,l,p,y,C){if(t<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${p}`);this.overscaledZ=t,this.wrap=l,this.canonical=new Ch(p,+y,+C),this.key=Wc(l,t,p,y,C)}clone(){return new ma(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-t;return t>this.canonical.z?new ma(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ma(t,this.wrap,t,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(t,l){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-t;return t>this.canonical.z?Wc(this.wrap*+l,t,this.canonical.z,this.canonical.x,this.canonical.y):Wc(this.wrap*+l,t,t,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const l=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>l&&t.canonical.y===this.canonical.y>>l}children(t){if(this.overscaledZ>=t)return[new ma(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,p=2*this.canonical.x,y=2*this.canonical.y;return[new ma(l,this.wrap,l,p,y),new ma(l,this.wrap,l,p+1,y),new ma(l,this.wrap,l,p,y+1),new ma(l,this.wrap,l,p+1,y+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new ma(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new ma(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pu(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Sd(t.x-this.wrap,t.y))}}function Wc(o,t,l,p,y){(o*=2)<0&&(o=-1*o-1);const C=1<<l;return(C*C*o+C*y+p).toString(36)+l.toString(36)+t.toString(36)}Ai("CanonicalTileID",Ch),Ai("OverscaledTileID",ma,{omit:["posMatrix"]});class Xl{constructor(t,l,p){if(this.uid=t,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(p&&"mapbox"!==p&&"terrarium"!==p)return void tt(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const y=this.dim=l.height-2;this.data=new Uint32Array(l.data.buffer),this.encoding=p||"mapbox";for(let C=0;C<y;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(y,C)]=this.data[this._idx(y-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,y)]=this.data[this._idx(C,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let C=0;C<y;C++)for(let M=0;M<y;M++){const k=this.get(C,M);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(t,l){const p=new Uint8Array(this.data.buffer),y=4*this._idx(t,l);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(p[y],p[y+1],p[y+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,l){if(t<-1||t>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(t+1)}_unpackMapbox(t,l,p){return(256*t*256+256*l+p)/10-1e4}_unpackTerrarium(t,l,p){return 256*t+l+p/256-32768}getPixels(){return new Go({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,l,p){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let y=l*this.dim,C=l*this.dim+this.dim,M=p*this.dim,k=p*this.dim+this.dim;switch(l){case-1:y=C-1;break;case 1:C=y+1}switch(p){case-1:M=k-1;break;case 1:k=M+1}const R=-l*this.dim,W=-p*this.dim;for(let ee=M;ee<k;ee++)for(let oe=y;oe<C;oe++)this.data[this._idx(oe,ee)]=t.data[this._idx(oe+R,ee+W)]}}Ai("DEMData",Xl);class Ec{constructor(t){this._stringToNumber={},this._numberToString=[];for(let l=0;l<t.length;l++){const p=t[l];this._stringToNumber[p]=l,this._numberToString[l]=p}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class sf{constructor(t,l,p,y,C){this.type="Feature",this._vectorTileFeature=t,t._z=l,t._x=p,t._y=y,this.properties=t.properties,this.id=C}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const l in this)"_geometry"!==l&&"_vectorTileFeature"!==l&&(t[l]=this[l]);return t}}class Eh{constructor(t,l){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new go(Ir,16,0),this.grid3D=new go(Ir,16,0),this.featureIndexArray=new ve,this.promoteId=l}insert(t,l,p,y,C,M){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,y,C);const R=M?this.grid3D:this.grid;for(let W=0;W<l.length;W++){const ee=l[W],oe=[1/0,1/0,-1/0,-1/0];for(let pe=0;pe<ee.length;pe++){const ge=ee[pe];oe[0]=Math.min(oe[0],ge.x),oe[1]=Math.min(oe[1],ge.y),oe[2]=Math.max(oe[2],ge.x),oe[3]=Math.max(oe[3],ge.y)}oe[0]<Ir&&oe[1]<Ir&&oe[2]>=0&&oe[3]>=0&&R.insert(k,oe[0],oe[1],oe[2],oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Wl.VectorTile(new ql(this.rawTileData)).layers,this.sourceLayerCoder=new Ec(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,l,p,y){this.loadVTLayers();const C=t.params||{},M=Ir/t.tileSize/t.scale,k=As(C.filter),R=t.queryGeometry,W=t.queryPadding*M,ee=Td(R),oe=this.grid.query(ee.minX-W,ee.minY-W,ee.maxX+W,ee.maxY+W),pe=Td(t.cameraQueryGeometry),ge=this.grid3D.query(pe.minX-W,pe.minY-W,pe.maxX+W,pe.maxY+W,(Le,dt,gt,lt)=>function(Mt,It,ti,Bi,$i){for(const Si of Mt)if(It<=Si.x&&ti<=Si.y&&Bi>=Si.x&&$i>=Si.y)return!0;const Pi=[new Ae(It,ti),new Ae(It,$i),new Ae(Bi,$i),new Ae(Bi,ti)];if(Mt.length>2)for(const Si of Pi)if(rd(Mt,Si))return!0;for(let Si=0;Si<Mt.length-1;Si++)if(Gu(Mt[Si],Mt[Si+1],Pi))return!0;return!1}(t.cameraQueryGeometry,Le-W,dt-W,gt+W,lt+W));for(const Le of ge)oe.push(Le);oe.sort(Yc);const we={};let Ue;for(let Le=0;Le<oe.length;Le++){const dt=oe[Le];if(dt===Ue)continue;Ue=dt;const gt=this.featureIndexArray.get(dt);let lt=null;this.loadMatchingFeature(we,gt.bucketIndex,gt.sourceLayerIndex,gt.featureIndex,k,C.layers,C.availableImages,l,p,y,(Mt,It,ti)=>(lt||(lt=Za(Mt)),It.queryIntersectsFeature(R,Mt,ti,lt,this.z,t.transform,M,t.pixelPosMatrix)))}return we}loadMatchingFeature(t,l,p,y,C,M,k,R,W,ee,oe){const pe=this.bucketLayerIDs[l];if(M&&!function(Le,dt){for(let gt=0;gt<Le.length;gt++)if(dt.indexOf(Le[gt])>=0)return!0;return!1}(M,pe))return;const ge=this.sourceLayerCoder.decode(p),we=this.vtLayers[ge].feature(y);if(C.needGeometry){const Le=bl(we,!0);if(!C.filter(new An(this.tileID.overscaledZ),Le,this.tileID.canonical))return}else if(!C.filter(new An(this.tileID.overscaledZ),we))return;const Ue=this.getId(we,ge);for(let Le=0;Le<pe.length;Le++){const dt=pe[Le];if(M&&M.indexOf(dt)<0)continue;const gt=R[dt];if(!gt)continue;let lt={};Ue&&ee&&(lt=ee.getState(gt.sourceLayer||"_geojsonTileLayer",Ue));const Mt=Gt({},W[dt]);Mt.paint=Mc(Mt.paint,gt.paint,we,lt,k),Mt.layout=Mc(Mt.layout,gt.layout,we,lt,k);const It=!oe||oe(we,gt,lt);if(!It)continue;const ti=new sf(we,this.z,this.x,this.y,Ue);ti.layer=Mt;let Bi=t[dt];void 0===Bi&&(Bi=t[dt]=[]),Bi.push({featureIndex:y,feature:ti,intersectionZ:It})}}lookupSymbolFeatures(t,l,p,y,C,M,k,R){const W={};this.loadVTLayers();const ee=As(C);for(const oe of t)this.loadMatchingFeature(W,p,y,oe,ee,M,k,R,l);return W}hasLayer(t){for(const l of this.bucketLayerIDs)for(const p of l)if(t===p)return!0;return!1}getId(t,l){let p=t.id;return this.promoteId&&(p=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[l]],"boolean"==typeof p&&(p=Number(p))),p}}function Mc(o,t,l,p,y){return Zt(o,(C,M)=>{const k=t instanceof Ua?t.get(M):null;return k&&k.evaluate?k.evaluate(l,p,y):k})}function Td(o){let t=1/0,l=1/0,p=-1/0,y=-1/0;for(const C of o)t=Math.min(t,C.x),l=Math.min(l,C.y),p=Math.max(p,C.x),y=Math.max(y,C.y);return{minX:t,minY:l,maxX:p,maxY:y}}function Yc(o,t){return t-o}function Dc(o,t,l,p,y){const C=[];for(let M=0;M<o.length;M++){const k=o[M];let R;for(let W=0;W<k.length-1;W++){let ee=k[W],oe=k[W+1];ee.x<t&&oe.x<t||(ee.x<t?ee=new Ae(t,ee.y+(t-ee.x)/(oe.x-ee.x)*(oe.y-ee.y))._round():oe.x<t&&(oe=new Ae(t,ee.y+(t-ee.x)/(oe.x-ee.x)*(oe.y-ee.y))._round()),ee.y<l&&oe.y<l||(ee.y<l?ee=new Ae(ee.x+(l-ee.y)/(oe.y-ee.y)*(oe.x-ee.x),l)._round():oe.y<l&&(oe=new Ae(ee.x+(l-ee.y)/(oe.y-ee.y)*(oe.x-ee.x),l)._round()),ee.x>=p&&oe.x>=p||(ee.x>=p?ee=new Ae(p,ee.y+(p-ee.x)/(oe.x-ee.x)*(oe.y-ee.y))._round():oe.x>=p&&(oe=new Ae(p,ee.y+(p-ee.x)/(oe.x-ee.x)*(oe.y-ee.y))._round()),ee.y>=y&&oe.y>=y||(ee.y>=y?ee=new Ae(ee.x+(y-ee.y)/(oe.y-ee.y)*(oe.x-ee.x),y)._round():oe.y>=y&&(oe=new Ae(ee.x+(y-ee.y)/(oe.y-ee.y)*(oe.x-ee.x),y)._round()),R&&ee.equals(R[R.length-1])||(R=[ee],C.push(R)),R.push(oe)))))}}return C}Ai("FeatureIndex",Eh,{omit:["rawTileData","sourceLayerCoder"]});class Jl extends Ae{constructor(t,l,p,y){super(t,l),this.angle=p,void 0!==y&&(this.segment=y)}clone(){return new Jl(this.x,this.y,this.angle,this.segment)}}function Mh(o,t,l,p,y){if(void 0===t.segment)return!0;let C=t,M=t.segment+1,k=0;for(;k>-l/2;){if(M--,M<0)return!1;k-=o[M].dist(C),C=o[M]}k+=o[M].dist(o[M+1]),M++;const R=[];let W=0;for(;k<l/2;){const ee=o[M],oe=o[M+1];if(!oe)return!1;let pe=o[M-1].angleTo(ee)-ee.angleTo(oe);for(pe=Math.abs((pe+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:k,angleDelta:pe}),W+=pe;k-R[0].distance>p;)W-=R.shift().angleDelta;if(W>y)return!1;M++,k+=ee.dist(oe)}return!0}function Dh(o){let t=0;for(let l=0;l<o.length-1;l++)t+=o[l].dist(o[l+1]);return t}function Sh(o,t,l){return o?.6*t*l:0}function Hm(o,t){return Math.max(o?o.right-o.left:0,t?t.right-t.left:0)}function $m(o,t,l,p,y,C){const M=Sh(l,y,C),k=Hm(l,p)*C;let R=0;const W=Dh(o)/2;for(let ee=0;ee<o.length-1;ee++){const oe=o[ee],pe=o[ee+1],ge=oe.dist(pe);if(R+ge>W){const we=(W-R)/ge,Ue=Yn.number(oe.x,pe.x,we),Le=Yn.number(oe.y,pe.y,we),dt=new Jl(Ue,Le,pe.angleTo(oe),ee);return dt._round(),!M||Mh(o,dt,k,M,t)?dt:void 0}R+=ge}}function af(o,t,l,p,y,C,M,k,R){const W=Sh(p,C,M),ee=Hm(p,y),oe=ee*M,pe=0===o[0].x||o[0].x===R||0===o[0].y||o[0].y===R;return t-oe<t/4&&(t=oe+t/4),fu(o,pe?t/2*k%t:(ee/2+2*C)*M*k%t,t,W,l,oe,pe,!1,R)}function fu(o,t,l,p,y,C,M,k,R){const W=C/2,ee=Dh(o);let oe=0,pe=t-l,ge=[];for(let we=0;we<o.length-1;we++){const Ue=o[we],Le=o[we+1],dt=Ue.dist(Le),gt=Le.angleTo(Ue);for(;pe+l<oe+dt;){pe+=l;const lt=(pe-oe)/dt,Mt=Yn.number(Ue.x,Le.x,lt),It=Yn.number(Ue.y,Le.y,lt);if(Mt>=0&&Mt<R&&It>=0&&It<R&&pe-W>=0&&pe+W<=ee){const ti=new Jl(Mt,It,gt,we);ti._round(),p&&!Mh(o,ti,C,p,y)||ge.push(ti)}}oe+=dt}return k||ge.length||M||(ge=fu(o,oe/2,l,p,y,C,M,!0,R)),ge}function gu(o,t,l,p){const y=[],C=o.image,M=C.pixelRatio,k=C.paddedRect.w-2,R=C.paddedRect.h-2,W=o.right-o.left,ee=o.bottom-o.top,oe=C.stretchX||[[0,k]],pe=C.stretchY||[[0,R]],ge=(Ci,Oi)=>Ci+Oi[1]-Oi[0],we=oe.reduce(ge,0),Ue=pe.reduce(ge,0),Le=k-we,dt=R-Ue;let gt=0,lt=we,Mt=0,It=Ue,ti=0,Bi=Le,$i=0,Pi=dt;if(C.content&&p){const Ci=C.content;gt=Id(oe,0,Ci[0]),Mt=Id(pe,0,Ci[1]),lt=Id(oe,Ci[0],Ci[2]),It=Id(pe,Ci[1],Ci[3]),ti=Ci[0]-gt,$i=Ci[1]-Mt,Bi=Ci[2]-Ci[0]-lt,Pi=Ci[3]-Ci[1]-It}const Si=(Ci,Oi,Ii,ui)=>{const Ki=Ql(Ci.stretch-gt,lt,W,o.left),Gi=yu(Ci.fixed-ti,Bi,Ci.stretch,we),yn=Ql(Oi.stretch-Mt,It,ee,o.top),Cr=yu(Oi.fixed-$i,Pi,Oi.stretch,Ue),Er=Ql(Ii.stretch-gt,lt,W,o.left),mo=yu(Ii.fixed-ti,Bi,Ii.stretch,we),fa=Ql(ui.stretch-Mt,It,ee,o.top),Wo=yu(ui.fixed-$i,Pi,ui.stretch,Ue),so=new Ae(Ki,yn),bo=new Ae(Er,yn),ko=new Ae(Er,fa),Yo=new Ae(Ki,fa),vs=new Ae(Gi/M,Cr/M),Nr=new Ae(mo/M,Wo/M),xo=t*Math.PI/180;if(xo){const Ls=Math.sin(xo),ia=Math.cos(xo),_r=[ia,-Ls,Ls,ia];so._matMult(_r),bo._matMult(_r),Yo._matMult(_r),ko._matMult(_r)}const bs=Ci.stretch+Ci.fixed,qo=Oi.stretch+Oi.fixed;return{tl:so,tr:bo,bl:Yo,br:ko,tex:{x:C.paddedRect.x+1+bs,y:C.paddedRect.y+1+qo,w:Ii.stretch+Ii.fixed-bs,h:ui.stretch+ui.fixed-qo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vs,pixelOffsetBR:Nr,minFontScaleX:Bi/M/W,minFontScaleY:Pi/M/ee,isSDF:l}};if(p&&(C.stretchX||C.stretchY)){const Ci=_u(oe,Le,we),Oi=_u(pe,dt,Ue);for(let Ii=0;Ii<Ci.length-1;Ii++){const ui=Ci[Ii],Ki=Ci[Ii+1];for(let Gi=0;Gi<Oi.length-1;Gi++)y.push(Si(ui,Oi[Gi],Ki,Oi[Gi+1]))}}else y.push(Si({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:R+1}));return y}function Id(o,t,l){let p=0;for(const y of o)p+=Math.max(t,Math.min(l,y[1]))-Math.max(t,Math.min(l,y[0]));return p}function _u(o,t,l){const p=[{fixed:-1,stretch:0}];for(const[y,C]of o){const M=p[p.length-1];p.push({fixed:y-M.stretch,stretch:M.stretch}),p.push({fixed:y-M.stretch,stretch:M.stretch+(C-y)})}return p.push({fixed:t+1,stretch:l}),p}function Ql(o,t,l,p){return o/t*l+p}function yu(o,t,l,p){return o-t*l/p}Ai("Anchor",Jl);class Ad{constructor(t,l,p,y,C,M,k,R,W,ee){if(this.boxStartIndex=t.length,W){let oe=M.top,pe=M.bottom;const ge=M.collisionPadding;ge&&(oe-=ge[1],pe+=ge[3]);let we=pe-oe;we>0&&(we=Math.max(10,we),this.circleDiameter=we)}else{let oe=M.top*k-R[0],pe=M.bottom*k+R[2],ge=M.left*k-R[3],we=M.right*k+R[1];const Ue=M.collisionPadding;if(Ue&&(ge-=Ue[0]*k,oe-=Ue[1]*k,we+=Ue[2]*k,pe+=Ue[3]*k),ee){const Le=new Ae(ge,oe),dt=new Ae(we,oe),gt=new Ae(ge,pe),lt=new Ae(we,pe),Mt=ee*Math.PI/180;Le._rotate(Mt),dt._rotate(Mt),gt._rotate(Mt),lt._rotate(Mt),ge=Math.min(Le.x,dt.x,gt.x,lt.x),we=Math.max(Le.x,dt.x,gt.x,lt.x),oe=Math.min(Le.y,dt.y,gt.y,lt.y),pe=Math.max(Le.y,dt.y,gt.y,lt.y)}t.emplaceBack(l.x,l.y,ge,oe,we,pe,p,y,C)}this.boxEndIndex=t.length}}class lf{constructor(t=[],l=cf){if(this.data=t,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:l,compare:p}=this,y=l[t];for(;t>0;){const C=t-1>>1,M=l[C];if(p(y,M)>=0)break;l[t]=M,t=C}l[t]=y}_down(t){const{data:l,compare:p}=this,y=this.length>>1,C=l[t];for(;t<y;){let M=1+(t<<1),k=l[M];const R=M+1;if(R<this.length&&p(l[R],k)<0&&(M=R,k=l[R]),p(k,C)>=0)break;l[t]=k,t=M}l[t]=C}}function cf(o,t){return o<t?-1:o>t?1:0}function Gm(o,t=1,l=!1){let p=1/0,y=1/0,C=-1/0,M=-1/0;const k=o[0];for(let ge=0;ge<k.length;ge++){const we=k[ge];(!ge||we.x<p)&&(p=we.x),(!ge||we.y<y)&&(y=we.y),(!ge||we.x>C)&&(C=we.x),(!ge||we.y>M)&&(M=we.y)}const R=Math.min(C-p,M-y);let W=R/2;const ee=new lf([],df);if(0===R)return new Ae(p,y);for(let ge=p;ge<C;ge+=R)for(let we=y;we<M;we+=R)ee.push(new ec(ge+W,we+W,W,o));let oe=function(ge){let we=0,Ue=0,Le=0;const dt=ge[0];for(let gt=0,lt=dt.length,Mt=lt-1;gt<lt;Mt=gt++){const It=dt[gt],ti=dt[Mt],Bi=It.x*ti.y-ti.x*It.y;Ue+=(It.x+ti.x)*Bi,Le+=(It.y+ti.y)*Bi,we+=3*Bi}return new ec(Ue/we,Le/we,0,ge)}(o),pe=ee.length;for(;ee.length;){const ge=ee.pop();(ge.d>oe.d||!oe.d)&&(oe=ge,l&&console.log("found best %d after %d probes",Math.round(1e4*ge.d)/1e4,pe)),ge.max-oe.d<=t||(W=ge.h/2,ee.push(new ec(ge.p.x-W,ge.p.y-W,W,o)),ee.push(new ec(ge.p.x+W,ge.p.y-W,W,o)),ee.push(new ec(ge.p.x-W,ge.p.y+W,W,o)),ee.push(new ec(ge.p.x+W,ge.p.y+W,W,o)),pe+=4)}return l&&(console.log(`num probes: ${pe}`),console.log(`best distance: ${oe.d}`)),oe.p}function df(o,t){return t.max-o.max}function ec(o,t,l,p){this.p=new Ae(o,t),this.h=l,this.d=function(y,C){let M=!1,k=1/0;for(let R=0;R<C.length;R++){const W=C[R];for(let ee=0,oe=W.length,pe=oe-1;ee<oe;pe=ee++){const ge=W[ee],we=W[pe];ge.y>y.y!=we.y>y.y&&y.x<(we.x-ge.x)*(y.y-ge.y)/(we.y-ge.y)+ge.x&&(M=!M),k=Math.min(k,jd(y,ge,we))}}return(M?1:-1)*Math.sqrt(k)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}const tc=Number.POSITIVE_INFINITY;function hl(o,t){return t[1]!==tc?function(l,p,y){let C=0,M=0;switch(p=Math.abs(p),y=Math.abs(y),l){case"top-right":case"top-left":case"top":M=y-7;break;case"bottom-right":case"bottom-left":case"bottom":M=7-y}switch(l){case"top-right":case"bottom-right":case"right":C=-p;break;case"top-left":case"bottom-left":case"left":C=p}return[C,M]}(o,t[0],t[1]):function(l,p){let y=0,C=0;p<0&&(p=0);const M=p/Math.sqrt(2);switch(l){case"top-right":case"top-left":C=M-7;break;case"bottom-right":case"bottom-left":C=7-M;break;case"bottom":C=7-p;break;case"top":C=p-7}switch(l){case"top-right":case"bottom-right":y=-M;break;case"top-left":case"bottom-left":y=M;break;case"left":y=p;break;case"right":y=-p}return[y,C]}(o,t[0])}function Th(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ih(o,t,l,p,y,C,M,k,R,W,ee){let oe=C.textMaxSize.evaluate(t,{});void 0===oe&&(oe=M);const pe=o.layers[0].layout,ge=pe.get("icon-offset").evaluate(t,{},ee),we=Ah(l.horizontal),Ue=M/24,Le=o.tilePixelRatio*Ue,dt=o.tilePixelRatio*oe/24,gt=o.tilePixelRatio*k,lt=o.tilePixelRatio*pe.get("symbol-spacing"),Mt=pe.get("text-padding")*o.tilePixelRatio,It=function(ui,Ki,Gi,yn=1){const Cr=ui.get("icon-padding").evaluate(Ki,{},Gi),Er=Cr&&Cr.values;return[Er[0]*yn,Er[1]*yn,Er[2]*yn,Er[3]*yn]}(pe,t,ee,o.tilePixelRatio),ti=pe.get("text-max-angle")/180*Math.PI,Bi="viewport"!==pe.get("text-rotation-alignment")&&"point"!==pe.get("symbol-placement"),$i="map"===pe.get("icon-rotation-alignment")&&"point"!==pe.get("symbol-placement"),Pi=pe.get("symbol-placement"),Si=lt/2,Ci=pe.get("icon-text-fit");let Oi;p&&"none"!==Ci&&(o.allowVerticalPlacement&&l.vertical&&(Oi=gh(p,l.vertical,Ci,pe.get("icon-text-fit-padding"),ge,Ue)),we&&(p=gh(p,we,Ci,pe.get("icon-text-fit-padding"),ge,Ue)));const Ii=(ui,Ki)=>{Ki.x<0||Ki.x>=Ir||Ki.y<0||Ki.y>=Ir||function(Gi,yn,Cr,Er,mo,fa,Wo,so,bo,ko,Yo,vs,Nr,xo,bs,qo,Ls,ia,_r,Po,Sn,Ns,wo,rs,zs){const os=Gi.addToLineVertexArray(yn,Cr);let na,ga,Bs,ss,xs=0,Wa=0,Sc=0,Mu=0,Du=-1,kd=-1;const Sl={};let Ph=ur(""),Su=0,Oh=0;if(void 0===so._unevaluatedLayout.getValue("text-radial-offset")?[Su,Oh]=so.layout.get("text-offset").evaluate(Sn,{},rs).map(Vs=>Vs*Ao):(Su=so.layout.get("text-radial-offset").evaluate(Sn,{},rs)*Ao,Oh=tc),Gi.allowVerticalPlacement&&Er.vertical){const Vs=so.layout.get("text-rotate").evaluate(Sn,{},rs)+90;Bs=new Ad(bo,yn,ko,Yo,vs,Er.vertical,Nr,xo,bs,Vs),Wo&&(ss=new Ad(bo,yn,ko,Yo,vs,Wo,Ls,ia,bs,Vs))}if(mo){const Vs=so.layout.get("icon-rotate").evaluate(Sn,{}),Ya="none"!==so.layout.get("icon-text-fit"),Pd=gu(mo,Vs,wo,Ya),Od=Wo?gu(Wo,Vs,wo,Ya):void 0;ga=new Ad(bo,yn,ko,Yo,vs,mo,Ls,ia,!1,Vs),xs=4*Pd.length;const Rd=Gi.iconSizeData;let ic=null;"source"===Rd.kind?(ic=[Ml*so.layout.get("icon-size").evaluate(Sn,{})],ic[0]>xc&&tt(`${Gi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Rd.kind&&(ic=[Ml*Ns.compositeIconSizes[0].evaluate(Sn,{},rs),Ml*Ns.compositeIconSizes[1].evaluate(Sn,{},rs)],(ic[0]>xc||ic[1]>xc)&&tt(`${Gi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Gi.addSymbols(Gi.icon,Pd,ic,Po,_r,Sn,_.WritingMode.none,yn,os.lineStartIndex,os.lineLength,-1,rs),Du=Gi.icon.placedSymbolArray.length-1,Od&&(Wa=4*Od.length,Gi.addSymbols(Gi.icon,Od,ic,Po,_r,Sn,_.WritingMode.vertical,yn,os.lineStartIndex,os.lineLength,-1,rs),kd=Gi.icon.placedSymbolArray.length-1)}const Tu=Object.keys(Er.horizontal);for(const Vs of Tu){const Ya=Er.horizontal[Vs];if(!na){Ph=ur(Ya.text);const Od=so.layout.get("text-rotate").evaluate(Sn,{},rs);na=new Ad(bo,yn,ko,Yo,vs,Ya,Nr,xo,bs,Od)}const Pd=1===Ya.positionedLines.length;if(Sc+=uf(Gi,yn,Ya,fa,so,bs,Sn,qo,os,Er.vertical?_.WritingMode.horizontal:_.WritingMode.horizontalOnly,Pd?Tu:[Vs],Sl,Du,Ns,rs),Pd)break}Er.vertical&&(Mu+=uf(Gi,yn,Er.vertical,fa,so,bs,Sn,qo,os,_.WritingMode.vertical,["vertical"],Sl,kd,Ns,rs));const qm=na?na.boxStartIndex:Gi.collisionBoxArray.length,pf=na?na.boxEndIndex:Gi.collisionBoxArray.length,ff=Bs?Bs.boxStartIndex:Gi.collisionBoxArray.length,_a=Bs?Bs.boxEndIndex:Gi.collisionBoxArray.length,gf=ga?ga.boxStartIndex:Gi.collisionBoxArray.length,_f=ga?ga.boxEndIndex:Gi.collisionBoxArray.length,Gg=ss?ss.boxStartIndex:Gi.collisionBoxArray.length,Rh=ss?ss.boxEndIndex:Gi.collisionBoxArray.length;let Aa=-1;const Xc=(Vs,Ya)=>Vs&&Vs.circleDiameter?Math.max(Vs.circleDiameter,Ya):Ya;Aa=Xc(na,Aa),Aa=Xc(Bs,Aa),Aa=Xc(ga,Aa),Aa=Xc(ss,Aa);const Km=Aa>-1?1:0;Km&&(Aa*=zs/Ao),Gi.glyphOffsetArray.length>=ul.MAX_GLYPHS&&tt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Sn.sortKey&&Gi.addToSortKeyRanges(Gi.symbolInstances.length,Sn.sortKey),Gi.symbolInstances.emplaceBack(yn.x,yn.y,Sl.right>=0?Sl.right:-1,Sl.center>=0?Sl.center:-1,Sl.left>=0?Sl.left:-1,Sl.vertical||-1,Du,kd,Ph,qm,pf,ff,_a,gf,_f,Gg,Rh,ko,Sc,Mu,xs,Wa,Km,0,Nr,Su,Oh,Aa)}(o,Ki,ui,l,p,y,Oi,o.layers[0],o.collisionBoxArray,t.index,t.sourceLayerIndex,o.index,Le,[Mt,Mt,Mt,Mt],Bi,R,gt,It,$i,ge,t,C,W,ee,M)};if("line"===Pi)for(const ui of Dc(t.geometry,0,0,Ir,Ir)){const Ki=af(ui,lt,ti,l.vertical||we,p,24,dt,o.overscaling,Ir);for(const Gi of Ki)we&&Zm(o,we.text,Si,Gi)||Ii(ui,Gi)}else if("line-center"===Pi){for(const ui of t.geometry)if(ui.length>1){const Ki=$m(ui,ti,l.vertical||we,p,24,dt);Ki&&Ii(ui,Ki)}}else if("Polygon"===t.type)for(const ui of Jd(t.geometry,0)){const Ki=Gm(ui,16);Ii(ui[0],new Jl(Ki.x,Ki.y,0))}else if("LineString"===t.type)for(const ui of t.geometry)Ii(ui,new Jl(ui[0].x,ui[0].y,0));else if("Point"===t.type)for(const ui of t.geometry)for(const Ki of ui)Ii([Ki],new Jl(Ki.x,Ki.y,0))}function uf(o,t,l,p,y,C,M,k,R,W,ee,oe,pe,ge,we){const Ue=function(gt,lt,Mt,It,ti,Bi,$i,Pi){const Si=It.layout.get("text-rotate").evaluate(Bi,{})*Math.PI/180,Ci=[];for(const Oi of lt.positionedLines)for(const Ii of Oi.positionedGlyphs){if(!Ii.rect)continue;const ui=Ii.rect||{};let Ki=4,Gi=!0,yn=1,Cr=0;const Er=(ti||Pi)&&Ii.vertical,mo=Ii.metrics.advance*Ii.scale/2;if(Pi&&lt.verticalizable&&(Cr=Oi.lineOffset/2-(Ii.imageName?-(Ao-Ii.metrics.width*Ii.scale)/2:(Ii.scale-1)*Ao)),Ii.imageName){const _r=$i[Ii.imageName];Gi=_r.sdf,yn=_r.pixelRatio,Ki=1/yn}const fa=ti?[Ii.x+mo,Ii.y]:[0,0];let Wo=ti?[0,0]:[Ii.x+mo+Mt[0],Ii.y+Mt[1]-Cr],so=[0,0];Er&&(so=Wo,Wo=[0,0]);const bo=(Ii.metrics.left-Ki)*Ii.scale-mo+Wo[0],ko=(-Ii.metrics.top-Ki)*Ii.scale+Wo[1],Yo=bo+ui.w*Ii.scale/yn,vs=ko+ui.h*Ii.scale/yn,Nr=new Ae(bo,ko),xo=new Ae(Yo,ko),bs=new Ae(bo,vs),qo=new Ae(Yo,vs);if(Er){const _r=new Ae(-mo,mo-lu),Po=-Math.PI/2,Sn=12-mo,Ns=new Ae(22-Sn,-(Ii.imageName?Sn:0)),wo=new Ae(...so);Nr._rotateAround(Po,_r)._add(Ns)._add(wo),xo._rotateAround(Po,_r)._add(Ns)._add(wo),bs._rotateAround(Po,_r)._add(Ns)._add(wo),qo._rotateAround(Po,_r)._add(Ns)._add(wo)}if(Si){const _r=Math.sin(Si),Po=Math.cos(Si),Sn=[Po,-_r,_r,Po];Nr._matMult(Sn),xo._matMult(Sn),bs._matMult(Sn),qo._matMult(Sn)}const Ls=new Ae(0,0),ia=new Ae(0,0);Ci.push({tl:Nr,tr:xo,bl:bs,br:qo,tex:ui,writingMode:lt.writingMode,glyphOffset:fa,sectionIndex:Ii.sectionIndex,isSDF:Gi,pixelOffsetTL:Ls,pixelOffsetBR:ia,minFontScaleX:0,minFontScaleY:0})}return Ci}(0,l,k,y,C,M,p,o.allowVerticalPlacement),Le=o.textSizeData;let dt=null;"source"===Le.kind?(dt=[Ml*y.layout.get("text-size").evaluate(M,{})],dt[0]>xc&&tt(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===Le.kind&&(dt=[Ml*ge.compositeTextSizes[0].evaluate(M,{},we),Ml*ge.compositeTextSizes[1].evaluate(M,{},we)],(dt[0]>xc||dt[1]>xc)&&tt(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Ue,dt,k,C,M,W,t,R.lineStartIndex,R.lineLength,pe,we);for(const gt of ee)oe[gt]=o.text.placedSymbolArray.length-1;return 4*Ue.length}function Ah(o){for(const t in o)return o[t];return null}function Zm(o,t,l,p){const y=o.compareText;if(t in y){const C=y[t];for(let M=C.length-1;M>=0;M--)if(p.dist(C[M])<l)return!0}else y[t]=[];return y[t].push(p),!1}const hf=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class vu{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,p]=new Uint8Array(t,0,2);if(219!==l)throw new Error("Data does not appear to be in a KDBush format.");const y=p>>4;if(1!==y)throw new Error(`Got v${y} data when expected v1.`);const C=hf[15&p];if(!C)throw new Error("Unrecognized array type.");const[M]=new Uint16Array(t,2,1),[k]=new Uint32Array(t,4,1);return new vu(k,M,C,t)}constructor(t,l=64,p=Float64Array,y){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=p,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const C=hf.indexOf(this.ArrayType),M=2*t*this.ArrayType.BYTES_PER_ELEMENT,k=t*this.IndexArrayType.BYTES_PER_ELEMENT,R=(8-k%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${p}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+k+R,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+M+k+R),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+k+R,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=t)}add(t,l){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=t,this.coords[this._pos++]=l,p}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return bu(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,l,p,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:M,nodeSize:k}=this,R=[0,C.length-1,0],W=[];for(;R.length;){const ee=R.pop()||0,oe=R.pop()||0,pe=R.pop()||0;if(oe-pe<=k){for(let Le=pe;Le<=oe;Le++){const dt=M[2*Le],gt=M[2*Le+1];dt>=t&&dt<=p&&gt>=l&&gt<=y&&W.push(C[Le])}continue}const ge=pe+oe>>1,we=M[2*ge],Ue=M[2*ge+1];we>=t&&we<=p&&Ue>=l&&Ue<=y&&W.push(C[ge]),(0===ee?t<=we:l<=Ue)&&(R.push(pe),R.push(ge-1),R.push(1-ee)),(0===ee?p>=we:y>=Ue)&&(R.push(ge+1),R.push(oe),R.push(1-ee))}return W}within(t,l,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:C,nodeSize:M}=this,k=[0,y.length-1,0],R=[],W=p*p;for(;k.length;){const ee=k.pop()||0,oe=k.pop()||0,pe=k.pop()||0;if(oe-pe<=M){for(let Le=pe;Le<=oe;Le++)Ym(C[2*Le],C[2*Le+1],t,l)<=W&&R.push(y[Le]);continue}const ge=pe+oe>>1,we=C[2*ge],Ue=C[2*ge+1];Ym(we,Ue,t,l)<=W&&R.push(y[ge]),(0===ee?t-p<=we:l-p<=Ue)&&(k.push(pe),k.push(ge-1),k.push(1-ee)),(0===ee?t+p>=we:l+p>=Ue)&&(k.push(ge+1),k.push(oe),k.push(1-ee))}return R}}function bu(o,t,l,p,y,C){if(y-p<=l)return;const M=p+y>>1;Wm(o,t,M,p,y,C),bu(o,t,l,p,M-1,1-C),bu(o,t,l,M+1,y,1-C)}function Wm(o,t,l,p,y,C){for(;y>p;){if(y-p>600){const W=y-p+1,ee=l-p+1,oe=Math.log(W),pe=.5*Math.exp(2*oe/3),ge=.5*Math.sqrt(oe*pe*(W-pe)/W)*(ee-W/2<0?-1:1);Wm(o,t,l,Math.max(p,Math.floor(l-ee*pe/W+ge)),Math.min(y,Math.floor(l+(W-ee)*pe/W+ge)),C)}const M=t[2*l+C];let k=p,R=y;for(qc(o,t,p,l),t[2*y+C]>M&&qc(o,t,p,y);k<R;){for(qc(o,t,k,R),k++,R--;t[2*k+C]<M;)k++;for(;t[2*R+C]>M;)R--}t[2*p+C]===M?qc(o,t,p,R):(R++,qc(o,t,R,y)),R<=l&&(p=R+1),l<=R&&(y=R-1)}}function qc(o,t,l,p){kh(o,l,p),kh(t,2*l,2*p),kh(t,2*l+1,2*p+1)}function kh(o,t,l){const p=o[t];o[t]=o[l],o[l]=p}function Ym(o,t,l,p){const y=o-l,C=t-p;return y*y+C*C}var pa;_.PerformanceMarkers=void 0,(pa=_.PerformanceMarkers||(_.PerformanceMarkers={})).create="create",pa.load="load",pa.fullLoad="fullLoad";let xu=null,Kc=[];const wu=1e3/60,Cu="loadTime",Eu="fullLoadTime",mf={mark(o){performance.mark(o)},frame(o){const t=o;null!=xu&&Kc.push(t-xu),xu=t},clearMetrics(){xu=null,Kc=[],performance.clearMeasures(Cu),performance.clearMeasures(Eu);for(const o in _.PerformanceMarkers)performance.clearMarks(_.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(Cu,_.PerformanceMarkers.create,_.PerformanceMarkers.load),performance.measure(Eu,_.PerformanceMarkers.create,_.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(Cu)[0].duration,t=performance.getEntriesByName(Eu)[0].duration,l=Kc.length,p=1/(Kc.reduce((C,M)=>C+M,0)/l/1e3),y=Kc.filter(C=>C>wu).reduce((C,M)=>C+(M-wu)/wu,0);return{loadTime:o,fullLoadTime:t,fps:p,percentDroppedFrames:y/(l+y)*100,totalFrames:l}}};_.AJAXError=Kt,_.ARRAY_TYPE=Hl,_.Actor=class{constructor(o,t,l){this.target=o,this.parent=t,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Yt(["receive","process"],this),this.invoker=new xh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Vt()?o:window}send(o,t,l,p,y=!1){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[C]=l);const M=gi(this.globalScope)?void 0:[];return this.target.postMessage({id:C,type:o,hasCallback:!!l,targetMapId:p,mustQueue:y,sourceMapId:this.mapId,data:Ps(t,M)},M),{cancel:()=>{l&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(o){const t=o.data,l=t.id;if(l&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[l];const p=this.cancelCallbacks[l];delete this.cancelCallbacks[l],p&&p()}else Vt()||t.mustQueue?(this.tasks[l]=t,this.taskQueue.push(l),this.invoker.trigger()):this.processTask(l,t)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),t=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(o,t)}processTask(o,t){if("<response>"===t.type){const l=this.callbacks[o];delete this.callbacks[o],l&&(t.error?l(cr(t.error)):l(null,cr(t.data)))}else{let l=!1;const p=gi(this.globalScope)?void 0:[],y=t.hasCallback?(k,R)=>{l=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:k?Ps(k):null,data:Ps(R,p)},p)}:k=>{l=!0};let C=null;const M=cr(t.data);if(this.parent[t.type])C=this.parent[t.type](t.sourceMapId,M,y);else if(this.parent.getWorkerSource){const k=t.type.split(".");C=this.parent.getWorkerSource(t.sourceMapId,k[0],M.source)[k[1]](M,y)}else y(new Error(`Could not find function ${t.type}`));!l&&C&&C.cancel&&(this.cancelCallbacks[o]=C.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},_.AlphaImage=Rc,_.CanonicalTileID=Ch,_.CollisionBoxArray=b,_.CollisionCircleLayoutArray=class extends is{},_.Color=_n,_.DEMData=Xl,_.DataConstantProperty=Zi,_.DictionaryCoder=Ec,_.EXTENT=Ir,_.ErrorEvent=ei,_.EvaluationParameters=An,_.Event=yt,_.Evented=pi,_.FeatureIndex=Eh,_.FillBucket=nh,_.FillExtrusionBucket=_c,_.GeoJSONFeature=sf,_.ImageAtlas=Nm,_.ImagePosition=hh,_.KDBush=vu,_.LineBucket=nu,_.LineStripIndexArray=class extends n{},_.LngLat=ta,_.MercatorCoordinate=Sd,_.ONE_EM=Ao,_.OverscaledTileID=ma,_.PerformanceUtils=mf,_.Point=Ae,_.Pos3dArray=class extends ol{},_.PosArray=Fe,_.Properties=jo,_.Protobuf=ql,_.QuadTriangleArray=class extends vl{},_.RGBAImage=Go,_.RasterBoundsArray=class extends cc{},_.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return 0===o.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},_.SegmentVector=le,_.SymbolBucket=ul,_.Transitionable=_o,_.TriangleIndexArray=D,_.Uniform1f=Qs,_.Uniform1i=class extends uo{constructor(o,t){super(o,t),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},_.Uniform2f=class extends uo{constructor(o,t){super(o,t),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},_.Uniform3f=class extends uo{constructor(o,t){super(o,t),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},_.Uniform4f=Ga,_.UniformColor=wr,_.UniformMatrix4f=class extends uo{constructor(o,t){super(o,t),this.current=ho}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let t=1;t<16;t++)if(o[t]!==this.current[t]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},_.UnwrappedTileID=pu,_.ValidationError=Ee,_.ZoomHistory=il,_.addDynamicAttributes=_h,_.arrayBufferToImage=function(o,t){const l=new Image;l.onload=()=>{t(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=zi})},l.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(o)],{type:"image/png"});l.src=o.byteLength?URL.createObjectURL(p):zi},_.arrayBufferToImageBitmap=function(o,t){const l=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(l).then(p=>{t(null,p)}).catch(p=>{t(new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},_.asyncAll=function(o,t,l){if(!o.length)return l(null,[]);let p=o.length;const y=new Array(o.length);let C=null;o.forEach((M,k)=>{t(M,(R,W)=>{R&&(C=R),y[k]=W,0==--p&&l(C,y)})})},_.bezier=ke,_.bindAll=Yt,_.clamp=Ye,_.clipLine=Dc,_.clone=function(o){var t=new Hl(16);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t},_.clone$1=Ct,_.collisionCircleLayout=Yp,_.config=$t,_.copy=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o},_.create=function(){var o=new Hl(16);return Hl!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},_.createExpression=fn,_.createFilter=As,_.createLayout=Sr,_.createStyleLayer=function(o){return"custom"===o.type?new hu(o):new bh[o.type](o)},_.deepEqual=function o(t,l){if(Array.isArray(t)){if(!Array.isArray(l)||t.length!==l.length)return!1;for(let p=0;p<t.length;p++)if(!o(t[p],l[p]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==l){if("object"!=typeof l||Object.keys(t).length!==Object.keys(l).length)return!1;for(const p in t)if(!o(t[p],l[p]))return!1;return!0}return t===l},_.derefLayers=function(o){o=o.slice();const t=Object.create(null);for(let l=0;l<o.length;l++)t[o[l].id]=o[l];for(let l=0;l<o.length;l++)"ref"in o[l]&&(o[l]=fi(o[l],t[o[l].ref]));return o},_.diffStyles=function(o,t){if(!o)return[{command:rt.setStyle,args:[t]}];let l=[];try{if(!bi(o.version,t.version))return[{command:rt.setStyle,args:[t]}];bi(o.center,t.center)||l.push({command:rt.setCenter,args:[t.center]}),bi(o.zoom,t.zoom)||l.push({command:rt.setZoom,args:[t.zoom]}),bi(o.bearing,t.bearing)||l.push({command:rt.setBearing,args:[t.bearing]}),bi(o.pitch,t.pitch)||l.push({command:rt.setPitch,args:[t.pitch]}),bi(o.sprite,t.sprite)||l.push({command:rt.setSprite,args:[t.sprite]}),bi(o.glyphs,t.glyphs)||l.push({command:rt.setGlyphs,args:[t.glyphs]}),bi(o.transition,t.transition)||l.push({command:rt.setTransition,args:[t.transition]}),bi(o.light,t.light)||l.push({command:rt.setLight,args:[t.light]});const p={},y=[];!function(M,k,R,W){let ee;for(ee in k=k||{},M=M||{})Object.prototype.hasOwnProperty.call(M,ee)&&(Object.prototype.hasOwnProperty.call(k,ee)||_i(ee,R,W));for(ee in k)Object.prototype.hasOwnProperty.call(k,ee)&&(Object.prototype.hasOwnProperty.call(M,ee)?bi(M[ee],k[ee])||("geojson"===M[ee].type&&"geojson"===k[ee].type&&wi(M,k,ee)?R.push({command:rt.setGeoJSONSourceData,args:[ee,k[ee].data]}):Ui(ee,k,R,W)):Dt(ee,k,R))}(o.sources,t.sources,y,p);const C=[];o.layers&&o.layers.forEach(M=>{p[M.source]?l.push({command:rt.removeLayer,args:[M.id]}):C.push(M)}),l=l.concat(y),function(M,k,R){k=k||[];const W=(M=M||[]).map(Pt),ee=k.map(Pt),oe=M.reduce(Ce,{}),pe=k.reduce(Ce,{}),ge=W.slice(),we=Object.create(null);let Ue,Le,dt,gt,lt,Mt,It;for(Ue=0,Le=0;Ue<W.length;Ue++)dt=W[Ue],Object.prototype.hasOwnProperty.call(pe,dt)?Le++:(R.push({command:rt.removeLayer,args:[dt]}),ge.splice(ge.indexOf(dt,Le),1));for(Ue=0,Le=0;Ue<ee.length;Ue++)dt=ee[ee.length-1-Ue],ge[ge.length-1-Ue]!==dt&&(Object.prototype.hasOwnProperty.call(oe,dt)?(R.push({command:rt.removeLayer,args:[dt]}),ge.splice(ge.lastIndexOf(dt,ge.length-Le),1)):Le++,Mt=ge[ge.length-Ue],R.push({command:rt.addLayer,args:[pe[dt],Mt]}),ge.splice(ge.length-Ue,0,dt),we[dt]=!0);for(Ue=0;Ue<ee.length;Ue++)if(dt=ee[Ue],gt=oe[dt],lt=pe[dt],!we[dt]&&!bi(gt,lt))if(bi(gt.source,lt.source)&&bi(gt["source-layer"],lt["source-layer"])&&bi(gt.type,lt.type)){for(It in nn(gt.layout,lt.layout,R,dt,null,rt.setLayoutProperty),nn(gt.paint,lt.paint,R,dt,null,rt.setPaintProperty),bi(gt.filter,lt.filter)||R.push({command:rt.setFilter,args:[dt,lt.filter]}),bi(gt.minzoom,lt.minzoom)&&bi(gt.maxzoom,lt.maxzoom)||R.push({command:rt.setLayerZoomRange,args:[dt,lt.minzoom,lt.maxzoom]}),gt)Object.prototype.hasOwnProperty.call(gt,It)&&"layout"!==It&&"paint"!==It&&"filter"!==It&&"metadata"!==It&&"minzoom"!==It&&"maxzoom"!==It&&(0===It.indexOf("paint.")?nn(gt[It],lt[It],R,dt,It.slice(6),rt.setPaintProperty):bi(gt[It],lt[It])||R.push({command:rt.setLayerProperty,args:[dt,It,lt[It]]}));for(It in lt)Object.prototype.hasOwnProperty.call(lt,It)&&!Object.prototype.hasOwnProperty.call(gt,It)&&"layout"!==It&&"paint"!==It&&"filter"!==It&&"metadata"!==It&&"minzoom"!==It&&"maxzoom"!==It&&(0===It.indexOf("paint.")?nn(gt[It],lt[It],R,dt,It.slice(6),rt.setPaintProperty):bi(gt[It],lt[It])||R.push({command:rt.setLayerProperty,args:[dt,It,lt[It]]}))}else R.push({command:rt.removeLayer,args:[dt]}),Mt=ge[ge.lastIndexOf(dt)+1],R.push({command:rt.addLayer,args:[lt,Mt]})}(C,t.layers,l)}catch(p){console.warn("Unable to compute style diff:",p),l=[{command:rt.setStyle,args:[t]}]}return l},_.dot=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]*t[3]},_.earthRadius=Kl,_.ease=ot,_.emitValidationErrors=ua,_.emptyStyle=function(){const o={},t=ct.$version;for(const l in ct.$root){const p=ct.$root[l];if(p.required){let y=null;y="version"===l?t:"array"===p.type?[]:{},null!=y&&(o[l]=y)}}return o},_.equals=function(o,t){var l=o[0],p=o[1],y=o[2],C=o[3],M=o[4],k=o[5],R=o[6],W=o[7],ee=o[8],oe=o[9],pe=o[10],ge=o[11],we=o[12],Ue=o[13],Le=o[14],dt=o[15],gt=t[0],lt=t[1],Mt=t[2],It=t[3],ti=t[4],Bi=t[5],$i=t[6],Pi=t[7],Si=t[8],Ci=t[9],Oi=t[10],Ii=t[11],ui=t[12],Ki=t[13],Gi=t[14],yn=t[15];return Math.abs(l-gt)<=ns*Math.max(1,Math.abs(l),Math.abs(gt))&&Math.abs(p-lt)<=ns*Math.max(1,Math.abs(p),Math.abs(lt))&&Math.abs(y-Mt)<=ns*Math.max(1,Math.abs(y),Math.abs(Mt))&&Math.abs(C-It)<=ns*Math.max(1,Math.abs(C),Math.abs(It))&&Math.abs(M-ti)<=ns*Math.max(1,Math.abs(M),Math.abs(ti))&&Math.abs(k-Bi)<=ns*Math.max(1,Math.abs(k),Math.abs(Bi))&&Math.abs(R-$i)<=ns*Math.max(1,Math.abs(R),Math.abs($i))&&Math.abs(W-Pi)<=ns*Math.max(1,Math.abs(W),Math.abs(Pi))&&Math.abs(ee-Si)<=ns*Math.max(1,Math.abs(ee),Math.abs(Si))&&Math.abs(oe-Ci)<=ns*Math.max(1,Math.abs(oe),Math.abs(Ci))&&Math.abs(pe-Oi)<=ns*Math.max(1,Math.abs(pe),Math.abs(Oi))&&Math.abs(ge-Ii)<=ns*Math.max(1,Math.abs(ge),Math.abs(Ii))&&Math.abs(we-ui)<=ns*Math.max(1,Math.abs(we),Math.abs(ui))&&Math.abs(Ue-Ki)<=ns*Math.max(1,Math.abs(Ue),Math.abs(Ki))&&Math.abs(Le-Gi)<=ns*Math.max(1,Math.abs(Le),Math.abs(Gi))&&Math.abs(dt-yn)<=ns*Math.max(1,Math.abs(dt),Math.abs(yn))},_.evaluateSizeForFeature=function(o,{uSize:t,uSizeT:l},{lowerSize:p,upperSize:y}){return"source"===o.kind?p/Ml:"composite"===o.kind?Yn.number(p/Ml,y/Ml,l):t},_.evaluateSizeForZoom=function(o,t){let l=0,p=0;if("constant"===o.kind)p=o.layoutSize;else if("source"!==o.kind){const{interpolationType:y,minZoom:C,maxZoom:M}=o,k=y?Ye(Zr.interpolationFactor(y,t,C,M),0,1):0;"camera"===o.kind?p=Yn.number(o.minSize,o.maxSize,k):l=k}return{uSizeT:l,uSize:p}},_.evaluateVariableOffset=hl,_.evented=hn,_.exported=Bt,_.extend=Gt,_.filterObject=Wt,_.findLineIntersection=function(o,t,l,p){const y=t.y-o.y,C=t.x-o.x,M=p.y-l.y,k=p.x-l.x,R=M*C-k*y;if(0===R)return null;const W=(k*(o.y-l.y)-M*(o.x-l.x))/R;return new Ae(o.x+W*C,o.y+W*y)},_.fromScaling=function(o,t){return o[0]=t[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=t[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=t[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},_.getAnchorAlignment=bd,_.getAnchorJustification=Th,_.getArrayBuffer=Xt,_.getDefaultExportFromCjs=Ze,_.getJSON=function(o,t){return Lt(Gt(o,{type:"json"}),t)},_.getOverlapMode=xd,_.getProtocolAction=oi,_.getRTLTextPluginStatus=nr,_.getReferrer=ci,_.getVideo=function(o,t){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){t(null,l)};for(let p=0;p<o.length;p++){const y=window.document.createElement("source");ft(o[p])||(l.crossOrigin="Anonymous"),y.src=o[p],l.appendChild(y)}return{cancel:()=>{}}},_.groupByLayout=function(o,t){const l={};for(let y=0;y<o.length;y++){const C=t&&t[o[y].id]||gn(o[y]);t&&(t[o[y].id]=C);let M=l[C];M||(M=l[C]=[]),M.push(o[y])}const p=[];for(const y in l)p.push(l[y]);return p},_.identity=$d,_.interpolate=Yn,_.invert=function(o,t){var l=t[0],p=t[1],y=t[2],C=t[3],M=t[4],k=t[5],R=t[6],W=t[7],ee=t[8],oe=t[9],pe=t[10],ge=t[11],we=t[12],Ue=t[13],Le=t[14],dt=t[15],gt=l*k-p*M,lt=l*R-y*M,Mt=l*W-C*M,It=p*R-y*k,ti=p*W-C*k,Bi=y*W-C*R,$i=ee*Ue-oe*we,Pi=ee*Le-pe*we,Si=ee*dt-ge*we,Ci=oe*Le-pe*Ue,Oi=oe*dt-ge*Ue,Ii=pe*dt-ge*Le,ui=gt*Ii-lt*Oi+Mt*Ci+It*Si-ti*Pi+Bi*$i;return ui?(o[0]=(k*Ii-R*Oi+W*Ci)*(ui=1/ui),o[1]=(y*Oi-p*Ii-C*Ci)*ui,o[2]=(Ue*Bi-Le*ti+dt*It)*ui,o[3]=(pe*ti-oe*Bi-ge*It)*ui,o[4]=(R*Si-M*Ii-W*Pi)*ui,o[5]=(l*Ii-y*Si+C*Pi)*ui,o[6]=(Le*Mt-we*Bi-dt*lt)*ui,o[7]=(ee*Bi-pe*Mt+ge*lt)*ui,o[8]=(M*Oi-k*Si+W*$i)*ui,o[9]=(p*Si-l*Oi-C*$i)*ui,o[10]=(we*ti-Ue*Mt+dt*gt)*ui,o[11]=(oe*Mt-ee*ti-ge*gt)*ui,o[12]=(k*Pi-M*Ci-R*$i)*ui,o[13]=(l*Ci-p*Pi+y*$i)*ui,o[14]=(Ue*lt-we*It-Le*gt)*ui,o[15]=(ee*It-oe*lt+pe*gt)*ui,o):null},_.isImageBitmap=hi,_.isSafari=gi,_.isWorker=Vt,_.keysDifference=function(o,t){const l=[];for(const p in o)p in t||l.push(p);return l},_.lazyLoadRTLTextPlugin=function(){Hn.isLoading()||Hn.isLoaded()||"deferred"!==nr()||Vn()},_.makeRequest=Lt,_.mapObject=Zt,_.mercatorXfromLng=Um,_.mercatorYfromLat=wh,_.mercatorZfromAltitude=mu,_.mul=Xn,_.mul$1=function(o,t,l){return o[0]=t[0]*l[0],o[1]=t[1]*l[1],o[2]=t[2]*l[2],o[3]=t[3]*l[3],o},_.multiply=Yu,_.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},_.operations=rt,_.ortho=function(o,t,l,p,y,C,M){var k=1/(t-l),R=1/(p-y),W=1/(C-M);return o[0]=-2*k,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*R,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*W,o[11]=0,o[12]=(t+l)*k,o[13]=(y+p)*R,o[14]=(M+C)*W,o[15]=1,o},_.parseCacheControl=function(o){const t={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,p,y,C)=>{const M=y||C;return t[p]=!M||M.toLowerCase(),""}),t["max-age"]){const l=parseInt(t["max-age"],10);isNaN(l)?delete t["max-age"]:t["max-age"]=l}return t},_.parseGlyphPbf=function(o){return new ql(o).readFields(Hg,[])},_.pbf=Fs,_.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Ir/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const t=o.bucket.layers[0].layout,l=o.bucket.layers[0]._unevaluatedLayout._values,p={layoutIconSize:l["icon-size"].possiblyEvaluate(new An(o.bucket.zoom+1),o.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new An(o.bucket.zoom+1),o.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new An(18))};if("composite"===o.bucket.textSizeData.kind){const{minZoom:R,maxZoom:W}=o.bucket.textSizeData;p.compositeTextSizes=[l["text-size"].possiblyEvaluate(new An(R),o.canonical),l["text-size"].possiblyEvaluate(new An(W),o.canonical)]}if("composite"===o.bucket.iconSizeData.kind){const{minZoom:R,maxZoom:W}=o.bucket.iconSizeData;p.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new An(R),o.canonical),l["icon-size"].possiblyEvaluate(new An(W),o.canonical)]}const y=t.get("text-line-height")*Ao,C="viewport"!==t.get("text-rotation-alignment")&&"point"!==t.get("symbol-placement"),M=t.get("text-keep-upright"),k=t.get("text-size");for(const R of o.bucket.features){const W=t.get("text-font").evaluate(R,{},o.canonical).join(","),ee=k.evaluate(R,{},o.canonical),oe=p.layoutTextSize.evaluate(R,{},o.canonical),pe=p.layoutIconSize.evaluate(R,{},o.canonical),ge={horizontal:{},vertical:void 0},we=R.text;let Ue,Le=[0,0];if(we){const lt=we.toString(),Mt=t.get("text-letter-spacing").evaluate(R,{},o.canonical)*Ao,It=Bl(lt)?Mt:0,ti=t.get("text-anchor").evaluate(R,{},o.canonical),Bi=t.get("text-variable-anchor");if(!Bi){const Oi=t.get("text-radial-offset").evaluate(R,{},o.canonical);Le=Oi?hl(ti,[Oi*Ao,tc]):t.get("text-offset").evaluate(R,{},o.canonical).map(Ii=>Ii*Ao)}let $i=C?"center":t.get("text-justify").evaluate(R,{},o.canonical);const Pi=t.get("symbol-placement"),Si="point"===Pi?t.get("text-max-width").evaluate(R,{},o.canonical)*Ao:0,Ci=()=>{o.bucket.allowVerticalPlacement&&zl(lt)&&(ge.vertical=vd(we,o.glyphMap,o.glyphPositions,o.imagePositions,W,Si,y,ti,"left",It,Le,_.WritingMode.vertical,!0,Pi,oe,ee))};if(!C&&Bi){const Oi="auto"===$i?Bi.map(ui=>Th(ui)):[$i];let Ii=!1;for(let ui=0;ui<Oi.length;ui++){const Ki=Oi[ui];if(!ge.horizontal[Ki])if(Ii)ge.horizontal[Ki]=ge.horizontal[0];else{const Gi=vd(we,o.glyphMap,o.glyphPositions,o.imagePositions,W,Si,y,"center",Ki,It,Le,_.WritingMode.horizontal,!1,Pi,oe,ee);Gi&&(ge.horizontal[Ki]=Gi,Ii=1===Gi.positionedLines.length)}}Ci()}else{"auto"===$i&&($i=Th(ti));const Oi=vd(we,o.glyphMap,o.glyphPositions,o.imagePositions,W,Si,y,ti,$i,It,Le,_.WritingMode.horizontal,!1,Pi,oe,ee);Oi&&(ge.horizontal[$i]=Oi),Ci(),zl(lt)&&C&&M&&(ge.vertical=vd(we,o.glyphMap,o.glyphPositions,o.imagePositions,W,Si,y,ti,$i,It,Le,_.WritingMode.vertical,!1,Pi,oe,ee))}}let dt=!1;if(R.icon&&R.icon.name){const lt=o.imageMap[R.icon.name];lt&&(Ue=tf(o.imagePositions[R.icon.name],t.get("icon-offset").evaluate(R,{},o.canonical),t.get("icon-anchor").evaluate(R,{},o.canonical)),dt=!!lt.sdf,void 0===o.bucket.sdfIcons?o.bucket.sdfIcons=dt:o.bucket.sdfIcons!==dt&&tt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lt.pixelRatio!==o.bucket.pixelRatio||0!==t.get("icon-rotate").constantOr(1))&&(o.bucket.iconsNeedLinear=!0))}const gt=Ah(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!gt&&gt.iconsInText,(gt||Ue)&&Ih(o.bucket,R,ge,Ue,o.imageMap,p,oe,pe,Le,dt,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},_.perspective=function(o,t,l,p,y){var C,M=1/Math.tan(t/2);return o[0]=M/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=y&&y!==1/0?(o[10]=(y+p)*(C=1/(p-y)),o[14]=2*y*p*C):(o[10]=-1,o[14]=-2*p),o},_.pick=function(o,t){const l={};for(let p=0;p<t.length;p++){const y=t[p];y in o&&(l[y]=o[y])}return l},_.plugin=Hn,_.pointGeometry=he,_.polygonIntersectsPolygon=nm,_.potpack=Lm,_.register=Ai,_.registerForPluginStateChange=function(o){return o({pluginStatus:ki,pluginURL:Mn}),hn.on("pluginStateChange",o),o},_.renderColorRamp=qu,_.rotateX=function(o,t,l){var p=Math.sin(l),y=Math.cos(l),C=t[4],M=t[5],k=t[6],R=t[7],W=t[8],ee=t[9],oe=t[10],pe=t[11];return t!==o&&(o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[4]=C*y+W*p,o[5]=M*y+ee*p,o[6]=k*y+oe*p,o[7]=R*y+pe*p,o[8]=W*y-C*p,o[9]=ee*y-M*p,o[10]=oe*y-k*p,o[11]=pe*y-R*p,o},_.rotateZ=function(o,t,l){var p=Math.sin(l),y=Math.cos(l),C=t[0],M=t[1],k=t[2],R=t[3],W=t[4],ee=t[5],oe=t[6],pe=t[7];return t!==o&&(o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=C*y+W*p,o[1]=M*y+ee*p,o[2]=k*y+oe*p,o[3]=R*y+pe*p,o[4]=W*y-C*p,o[5]=ee*y-M*p,o[6]=oe*y-k*p,o[7]=pe*y-R*p,o},_.sameOrigin=ft,_.scale=function(o,t,l){var p=l[0],y=l[1],C=l[2];return o[0]=t[0]*p,o[1]=t[1]*p,o[2]=t[2]*p,o[3]=t[3]*p,o[4]=t[4]*y,o[5]=t[5]*y,o[6]=t[6]*y,o[7]=t[7]*y,o[8]=t[8]*C,o[9]=t[9]*C,o[10]=t[10]*C,o[11]=t[11]*C,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o},_.setRTLTextPlugin=function(o,t,l=!1){if(ki===ye||ki===Ge||ki===Ft)throw new Error("setRTLTextPlugin cannot be called multiple times.");Mn=Bt.resolveURL(o),ki=ye,Qt=t,Dn(),l||Vn()},_.sphericalToCartesian=function([o,t,l]){return t+=90,t*=Math.PI/180,l*=Math.PI/180,{x:o*Math.cos(t)*Math.sin(l),y:o*Math.sin(t)*Math.sin(l),z:o*Math.cos(l)}},_.toEvaluationFeature=bl,_.transformMat4=Gd,_.translate=function(o,t,l){var p,y,C,M,k,R,W,ee,oe,pe,ge,we,Ue=l[0],Le=l[1],dt=l[2];return t===o?(o[12]=t[0]*Ue+t[4]*Le+t[8]*dt+t[12],o[13]=t[1]*Ue+t[5]*Le+t[9]*dt+t[13],o[14]=t[2]*Ue+t[6]*Le+t[10]*dt+t[14],o[15]=t[3]*Ue+t[7]*Le+t[11]*dt+t[15]):(y=t[1],C=t[2],M=t[3],k=t[4],R=t[5],W=t[6],ee=t[7],oe=t[8],pe=t[9],ge=t[10],we=t[11],o[0]=p=t[0],o[1]=y,o[2]=C,o[3]=M,o[4]=k,o[5]=R,o[6]=W,o[7]=ee,o[8]=oe,o[9]=pe,o[10]=ge,o[11]=we,o[12]=p*Ue+k*Le+oe*dt+t[12],o[13]=y*Ue+R*Le+pe*dt+t[13],o[14]=C*Ue+W*Le+ge*dt+t[14],o[15]=M*Ue+ee*Le+we*dt+t[15]),o},_.triggerPluginCompletionEvent=Un,_.unicodeBlockLookup=Di,_.uniqueId=function(){return wt++},_.v8Spec=ct,_.validateCustomStyleLayer=function(o){const t=[],l=o.id;return void 0===l&&t.push({message:`layers.${l}: missing required property "id"`}),void 0===o.render&&t.push({message:`layers.${l}: missing required method "render"`}),o.renderingMode&&"2d"!==o.renderingMode&&"3d"!==o.renderingMode&&t.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),t},_.validateLight=_s,_.validateStyle=Qo,_.vectorTile=Wl,_.warnOnce=tt,_.wrap=mt}),a(0,function(_){class Ze{constructor(re){this.keyCache={},re&&this.replace(re)}replace(re){this._layerConfigs={},this._layers={},this.update(re,[])}update(re,me){for(const V of re){this._layerConfigs[V.id]=V;const U=this._layers[V.id]=_.createStyleLayer(V);U._featureFilter=_.createFilter(U.filter),this.keyCache[V.id]&&delete this.keyCache[V.id]}for(const V of me)delete this.keyCache[V],delete this._layerConfigs[V],delete this._layers[V];this.familiesBySource={};const K=_.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const V of K){const U=V.map(vt=>this._layers[vt.id]),ce=U[0];if("none"===ce.visibility)continue;const fe=ce.source||"";let Ie=this.familiesBySource[fe];Ie||(Ie=this.familiesBySource[fe]={});const We=ce.sourceLayer||"_geojsonTileLayer";let St=Ie[We];St||(St=Ie[We]=[]),St.push(U)}}}class he{constructor(re){const me={},K=[];for(const fe in re){const Ie=re[fe],We=me[fe]={};for(const St in Ie){const vt=Ie[+St];if(!vt||0===vt.bitmap.width||0===vt.bitmap.height)continue;const Tt={x:0,y:0,w:vt.bitmap.width+2,h:vt.bitmap.height+2};K.push(Tt),We[St]={rect:Tt,metrics:vt.metrics}}}const{w:V,h:U}=_.potpack(K),ce=new _.AlphaImage({width:V||1,height:U||1});for(const fe in re){const Ie=re[fe];for(const We in Ie){const St=Ie[+We];if(!St||0===St.bitmap.width||0===St.bitmap.height)continue;const vt=me[fe][We].rect;_.AlphaImage.copy(St.bitmap,ce,{x:0,y:0},{x:vt.x+1,y:vt.y+1},St.bitmap)}}this.image=ce,this.positions=me}}_.register("GlyphAtlas",he);class $e{constructor(re){this.tileID=new _.OverscaledTileID(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId}parse(re,me,K,V,U){this.status="parsing",this.data=re,this.collisionBoxArray=new _.CollisionBoxArray;const ce=new _.DictionaryCoder(Object.keys(re.layers).sort()),fe=new _.FeatureIndex(this.tileID,this.promoteId);fe.bucketLayerIDs=[];const Ie={},We={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},St=me.familiesBySource[this.source];for(const Re in St){const ht=re.layers[Re];if(!ht)continue;1===ht.version&&_.warnOnce(`Vector tile source "${this.source}" layer "${Re}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Jt=ce.encode(Re),Fi=[];for(let an=0;an<ht.length;an++){const un=ht.feature(an),_n=fe.getId(un,Re);Fi.push({feature:un,id:_n,index:an,sourceLayerIndex:Jt})}for(const an of St[Re]){const un=an[0];un.source!==this.source&&_.warnOnce(`layer.source = ${un.source} does not equal this.source = ${this.source}`),un.minzoom&&this.zoom<Math.floor(un.minzoom)||un.maxzoom&&this.zoom>=un.maxzoom||"none"!==un.visibility&&(Ae(an,this.zoom,K),(Ie[un.id]=un.createBucket({index:fe.bucketLayerIDs.length,layers:an,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jt,sourceID:this.source})).populate(Fi,We,this.tileID.canonical),fe.bucketLayerIDs.push(an.map(_n=>_n.id)))}}let vt,Tt,ni,it;const ae=_.mapObject(We.glyphDependencies,Re=>Object.keys(Re).map(Number));Object.keys(ae).length?V.send("getGlyphs",{uid:this.uid,stacks:ae,source:this.source,tileID:this.tileID,type:"glyphs"},(Re,ht)=>{vt||(vt=Re,Tt=ht,xe.call(this))}):Tt={};const Y=Object.keys(We.iconDependencies);Y.length?V.send("getImages",{icons:Y,source:this.source,tileID:this.tileID,type:"icons"},(Re,ht)=>{vt||(vt=Re,ni=ht,xe.call(this))}):ni={};const Q=Object.keys(We.patternDependencies);function xe(){if(vt)return U(vt);if(Tt&&ni&&it){const Re=new he(Tt),ht=new _.ImageAtlas(ni,it);for(const Jt in Ie){const Fi=Ie[Jt];Fi instanceof _.SymbolBucket?(Ae(Fi.layers,this.zoom,K),_.performSymbolLayout({bucket:Fi,glyphMap:Tt,glyphPositions:Re.positions,imageMap:ni,imagePositions:ht.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Fi.hasPattern&&(Fi instanceof _.LineBucket||Fi instanceof _.FillBucket||Fi instanceof _.FillExtrusionBucket)&&(Ae(Fi.layers,this.zoom,K),Fi.addFeatures(We,this.tileID.canonical,ht.patternPositions))}this.status="done",U(null,{buckets:Object.values(Ie).filter(Jt=>!Jt.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Re.image,imageAtlas:ht,glyphMap:this.returnDependencies?Tt:null,iconMap:this.returnDependencies?ni:null,glyphPositions:this.returnDependencies?Re.positions:null})}}Q.length?V.send("getImages",{icons:Q,source:this.source,tileID:this.tileID,type:"patterns"},(Re,ht)=>{vt||(vt=Re,it=ht,xe.call(this))}):it={},xe.call(this)}}function Ae(Se,re,me){const K=new _.EvaluationParameters(re);for(const V of Se)V.recalculate(K,me)}function Ve(Se,re){const me=_.getArrayBuffer(Se.request,(K,V,U,ce)=>{K?re(K):V&&re(null,{vectorTile:new _.vectorTile.VectorTile(new _.Protobuf(V)),rawData:V,cacheControl:U,expires:ce})});return()=>{me.cancel(),re()}}class je{constructor(re,me,K,V){this.actor=re,this.layerIndex=me,this.availableImages=K,this.loadVectorData=V||Ve,this.loading={},this.loaded={}}loadTile(re,me){const K=re.uid;this.loading||(this.loading={});const V=!!(re&&re.request&&re.request.collectResourceTiming)&&new _.RequestPerformance(re.request),U=this.loading[K]=new $e(re);U.abort=this.loadVectorData(re,(ce,fe)=>{if(delete this.loading[K],ce||!fe)return U.status="done",this.loaded[K]=U,me(ce);const Ie=fe.rawData,We={};fe.expires&&(We.expires=fe.expires),fe.cacheControl&&(We.cacheControl=fe.cacheControl);const St={};if(V){const vt=V.finish();vt&&(St.resourceTiming=JSON.parse(JSON.stringify(vt)))}U.vectorTile=fe.vectorTile,U.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(vt,Tt)=>{if(vt||!Tt)return me(vt);me(null,_.extend({rawTileData:Ie.slice(0)},Tt,We,St))}),this.loaded=this.loaded||{},this.loaded[K]=U})}reloadTile(re,me){const K=this.loaded,V=re.uid,U=this;if(K&&K[V]){const ce=K[V];ce.showCollisionBoxes=re.showCollisionBoxes;const fe=(Ie,We)=>{const St=ce.reloadCallback;St&&(delete ce.reloadCallback,ce.parse(ce.vectorTile,U.layerIndex,this.availableImages,U.actor,St)),me(Ie,We)};"parsing"===ce.status?ce.reloadCallback=fe:"done"===ce.status&&(ce.vectorTile?ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,fe):fe())}}abortTile(re,me){const K=this.loading,V=re.uid;K&&K[V]&&K[V].abort&&(K[V].abort(),delete K[V]),me()}removeTile(re,me){const K=this.loaded,V=re.uid;K&&K[V]&&delete K[V],me()}}class Xe{constructor(){this.loaded={}}loadTile(re,me){const{uid:K,encoding:V,rawImageData:U}=re,ce=_.isImageBitmap(U)?this.getImageData(U):U,fe=new _.DEMData(K,ce,V);this.loaded=this.loaded||{},this.loaded[K]=fe,me(null,fe)}getImageData(re){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(re.width,re.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=re.width,this.offscreenCanvas.height=re.height,this.offscreenCanvasContext.drawImage(re,0,0,re.width,re.height);const me=this.offscreenCanvasContext.getImageData(-1,-1,re.width+2,re.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new _.RGBAImage({width:me.width,height:me.height},me.data)}removeTile(re){const me=this.loaded,K=re.uid;me&&me[K]&&delete me[K]}}function ke(Se,re){if(0!==Se.length){ot(Se[0],re);for(var me=1;me<Se.length;me++)ot(Se[me],!re)}}function ot(Se,re){for(var me=0,K=0,V=0,U=Se.length,ce=U-1;V<U;ce=V++){var fe=(Se[V][0]-Se[ce][0])*(Se[ce][1]+Se[V][1]),Ie=me+fe;K+=Math.abs(me)>=Math.abs(fe)?me-Ie+fe:fe-Ie+me,me=Ie}me+K>=0!=!!re&&Se.reverse()}var Ye=_.getDefaultExportFromCjs(function Se(re,me){var K,V=re&&re.type;if("FeatureCollection"===V)for(K=0;K<re.features.length;K++)Se(re.features[K],me);else if("GeometryCollection"===V)for(K=0;K<re.geometries.length;K++)Se(re.geometries[K],me);else if("Feature"===V)Se(re.geometry,me);else if("Polygon"===V)ke(re.coordinates,me);else if("MultiPolygon"===V)for(K=0;K<re.coordinates.length;K++)ke(re.coordinates[K],me);return re});const mt=_.vectorTile.VectorTileFeature.prototype.toGeoJSON;var Gt={exports:{}},wt=_.pointGeometry,Yt=_.vectorTile.VectorTileFeature,Zt=Wt;function Wt(Se,re){this.options=re||{},this.features=Se,this.length=Se.length}function Ct(Se,re){this.id="number"==typeof Se.id?Se.id:void 0,this.type=Se.type,this.rawGeometry=1===Se.type?[Se.geometry]:Se.geometry,this.properties=Se.tags,this.extent=re||4096}Wt.prototype.feature=function(Se){return new Ct(this.features[Se],this.options.extent)},Ct.prototype.loadGeometry=function(){var Se=this.rawGeometry;this.geometry=[];for(var re=0;re<Se.length;re++){for(var me=Se[re],K=[],V=0;V<me.length;V++)K.push(new wt(me[V][0],me[V][1]));this.geometry.push(K)}return this.geometry},Ct.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Se=this.geometry,re=1/0,me=-1/0,K=1/0,V=-1/0,U=0;U<Se.length;U++)for(var ce=Se[U],fe=0;fe<ce.length;fe++){var Ie=ce[fe];re=Math.min(re,Ie.x),me=Math.max(me,Ie.x),K=Math.min(K,Ie.y),V=Math.max(V,Ie.y)}return[re,K,me,V]},Ct.prototype.toGeoJSON=Yt.prototype.toGeoJSON;var Oe=_.pbf,tt=Zt;function kt(Se){var re=new Oe;return function(me,K){for(var V in me.layers)K.writeMessage(3,Ot,me.layers[V])}(Se,re),re.finish()}function Ot(Se,re){var me;re.writeVarintField(15,Se.version||1),re.writeStringField(1,Se.name||""),re.writeVarintField(5,Se.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(me=0;me<Se.length;me++)K.feature=Se.feature(me),re.writeMessage(2,Vt,K);var V=K.keys;for(me=0;me<V.length;me++)re.writeStringField(3,V[me]);var U=K.values;for(me=0;me<U.length;me++)re.writeMessage(4,xi,U[me])}function Vt(Se,re){var me=Se.feature;void 0!==me.id&&re.writeVarintField(1,me.id),re.writeMessage(2,ai,Se),re.writeVarintField(3,me.type),re.writeMessage(4,zi,me)}function ai(Se,re){var me=Se.feature,K=Se.keys,V=Se.values,U=Se.keycache,ce=Se.valuecache;for(var fe in me.properties){var Ie=me.properties[fe],We=U[fe];if(null!==Ie){void 0===We&&(K.push(fe),U[fe]=We=K.length-1),re.writeVarint(We);var St=typeof Ie;"string"!==St&&"boolean"!==St&&"number"!==St&&(Ie=JSON.stringify(Ie));var vt=St+":"+Ie,Tt=ce[vt];void 0===Tt&&(V.push(Ie),ce[vt]=Tt=V.length-1),re.writeVarint(Tt)}}}function gi(Se,re){return(re<<3)+(7&Se)}function hi(Se){return Se<<1^Se>>31}function zi(Se,re){for(var me=Se.loadGeometry(),K=Se.type,V=0,U=0,ce=me.length,fe=0;fe<ce;fe++){var Ie=me[fe],We=1;1===K&&(We=Ie.length),re.writeVarint(gi(1,We));for(var St=3===K?Ie.length-1:Ie.length,vt=0;vt<St;vt++){1===vt&&1!==K&&re.writeVarint(gi(2,St-1));var Tt=Ie[vt].x-V,ni=Ie[vt].y-U;re.writeVarint(hi(Tt)),re.writeVarint(hi(ni)),V+=Tt,U+=ni}3===K&&re.writeVarint(gi(7,1))}}function xi(Se,re){var me=typeof Se;"string"===me?re.writeStringField(1,Se):"boolean"===me?re.writeBooleanField(7,Se):"number"===me&&(Se%1!=0?re.writeDoubleField(3,Se):Se<0?re.writeSVarintField(6,Se):re.writeVarintField(5,Se))}Gt.exports=kt,Gt.exports.fromVectorTileJs=kt,Gt.exports.fromGeojsonVt=function(Se,re){re=re||{};var me={};for(var K in Se)me[K]=new tt(Se[K].features,re),me[K].name=K,me[K].version=re.version,me[K].extent=re.extent;return kt({layers:me})},Gt.exports.GeoJSONWrapper=tt;var At=_.getDefaultExportFromCjs(Gt.exports);const Bt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Se=>Se},$t=Math.fround||(Kt=new Float32Array(1),Se=>(Kt[0]=+Se,Kt[0]));var Kt;class ci{constructor(re){this.options=Object.assign(Object.create(Bt),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:me,minZoom:K,maxZoom:V}=this.options;me&&console.time("total time");const U=`prepare ${re.length} points`;me&&console.time(U),this.points=re;const ce=[];for(let Ie=0;Ie<re.length;Ie++){const We=re[Ie];if(!We.geometry)continue;const[St,vt]=We.geometry.coordinates,Tt=$t(Lt(St)),ni=$t(Xt(vt));ce.push(Tt,ni,1/0,Ie,-1,1),this.options.reduce&&ce.push(0)}let fe=this.trees[V+1]=this._createTree(ce);me&&console.timeEnd(U);for(let Ie=V;Ie>=K;Ie--){const We=+Date.now();fe=this.trees[Ie]=this._createTree(this._cluster(fe,Ie)),me&&console.log("z%d: %d clusters in %dms",Ie,fe.numItems,+Date.now()-We)}return me&&console.timeEnd("total time"),this}getClusters(re,me){let K=((re[0]+180)%360+360)%360-180;const V=Math.max(-90,Math.min(90,re[1]));let U=180===re[2]?180:((re[2]+180)%360+360)%360-180;const ce=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)K=-180,U=180;else if(K>U){const vt=this.getClusters([K,V,180,ce],me),Tt=this.getClusters([-180,V,U,ce],me);return vt.concat(Tt)}const fe=this.trees[this._limitZoom(me)],Ie=fe.range(Lt(K),Xt(ce),Lt(U),Xt(V)),We=fe.data,St=[];for(const vt of Ie){const Tt=this.stride*vt;St.push(We[Tt+5]>1?oi(We,Tt,this.clusterProps):this.points[We[Tt+3]])}return St}getChildren(re){const me=this._getOriginId(re),K=this._getOriginZoom(re),V="No cluster with the specified id.",U=this.trees[K];if(!U)throw new Error(V);const ce=U.data;if(me*this.stride>=ce.length)throw new Error(V);const fe=this.options.radius/(this.options.extent*Math.pow(2,K-1)),Ie=U.within(ce[me*this.stride],ce[me*this.stride+1],fe),We=[];for(const St of Ie){const vt=St*this.stride;ce[vt+4]===re&&We.push(ce[vt+5]>1?oi(ce,vt,this.clusterProps):this.points[ce[vt+3]])}if(0===We.length)throw new Error(V);return We}getLeaves(re,me,K){const V=[];return this._appendLeaves(V,re,me=me||10,K=K||0,0),V}getTile(re,me,K){const V=this.trees[this._limitZoom(re)],U=Math.pow(2,re),{extent:ce,radius:fe}=this.options,Ie=fe/ce,We=(K-Ie)/U,St=(K+1+Ie)/U,vt={features:[]};return this._addTileFeatures(V.range((me-Ie)/U,We,(me+1+Ie)/U,St),V.data,me,K,U,vt),0===me&&this._addTileFeatures(V.range(1-Ie/U,We,1,St),V.data,U,K,U,vt),me===U-1&&this._addTileFeatures(V.range(0,We,Ie/U,St),V.data,-1,K,U,vt),vt.features.length?vt:null}getClusterExpansionZoom(re){let me=this._getOriginZoom(re)-1;for(;me<=this.options.maxZoom;){const K=this.getChildren(re);if(me++,1!==K.length)break;re=K[0].properties.cluster_id}return me}_appendLeaves(re,me,K,V,U){const ce=this.getChildren(me);for(const fe of ce){const Ie=fe.properties;if(Ie&&Ie.cluster?U+Ie.point_count<=V?U+=Ie.point_count:U=this._appendLeaves(re,Ie.cluster_id,K,V,U):U<V?U++:re.push(fe),re.length===K)break}return U}_createTree(re){const me=new _.KDBush(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<re.length;K+=this.stride)me.add(re[K],re[K+1]);return me.finish(),me.data=re,me}_addTileFeatures(re,me,K,V,U,ce){for(const fe of re){const Ie=fe*this.stride,We=me[Ie+5]>1;let St,vt,Tt;if(We)St=zt(me,Ie,this.clusterProps),vt=me[Ie],Tt=me[Ie+1];else{const ae=this.points[me[Ie+3]];St=ae.properties;const[Y,Q]=ae.geometry.coordinates;vt=Lt(Y),Tt=Xt(Q)}const ni={type:1,geometry:[[Math.round(this.options.extent*(vt*U-K)),Math.round(this.options.extent*(Tt*U-V))]],tags:St};let it;it=We||this.options.generateId?me[Ie+3]:this.points[me[Ie+3]].id,void 0!==it&&(ni.id=it),ce.features.push(ni)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,me){const{radius:K,extent:V,reduce:U,minPoints:ce}=this.options,fe=K/(V*Math.pow(2,me)),Ie=re.data,We=[],St=this.stride;for(let vt=0;vt<Ie.length;vt+=St){if(Ie[vt+2]<=me)continue;Ie[vt+2]=me;const Tt=Ie[vt],ni=Ie[vt+1],it=re.within(Ie[vt],Ie[vt+1],fe),ae=Ie[vt+5];let Y=ae;for(const Q of it){const xe=Q*St;Ie[xe+2]>me&&(Y+=Ie[xe+5])}if(Y>ae&&Y>=ce){let Q,xe=Tt*ae,Re=ni*ae,ht=-1;const Jt=((vt/St|0)<<5)+(me+1)+this.points.length;for(const Fi of it){const an=Fi*St;if(Ie[an+2]<=me)continue;Ie[an+2]=me;const un=Ie[an+5];xe+=Ie[an]*un,Re+=Ie[an+1]*un,Ie[an+4]=Jt,U&&(Q||(Q=this._map(Ie,vt,!0),ht=this.clusterProps.length,this.clusterProps.push(Q)),U(Q,this._map(Ie,an)))}Ie[vt+4]=Jt,We.push(xe/Y,Re/Y,1/0,Jt,-1,Y),U&&We.push(ht)}else{for(let Q=0;Q<St;Q++)We.push(Ie[vt+Q]);if(Y>1)for(const Q of it){const xe=Q*St;if(!(Ie[xe+2]<=me)){Ie[xe+2]=me;for(let Re=0;Re<St;Re++)We.push(Ie[xe+Re])}}}}return We}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,me,K){if(re[me+5]>1){const ce=this.clusterProps[re[me+6]];return K?Object.assign({},ce):ce}const V=this.points[re[me+3]].properties,U=this.options.map(V);return K&&U===V?Object.assign({},U):U}}function oi(Se,re,me){return{type:"Feature",id:Se[re+3],properties:zt(Se,re,me),geometry:{type:"Point",coordinates:[(K=Se[re],360*(K-.5)),ft(Se[re+1])]}};var K}function zt(Se,re,me){const K=Se[re+5],V=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,U=Se[re+6],ce=-1===U?{}:Object.assign({},me[U]);return Object.assign(ce,{cluster:!0,cluster_id:Se[re+3],point_count:K,point_count_abbreviated:V})}function Lt(Se){return Se/360+.5}function Xt(Se){const re=Math.sin(Se*Math.PI/180),me=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return me<0?0:me>1?1:me}function ft(Se){const re=(180-360*Se)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function qt(Se,re,me,K){for(var V,U=K,ce=me-re>>1,fe=me-re,Ie=Se[re],We=Se[re+1],St=Se[me],vt=Se[me+1],Tt=re+3;Tt<me;Tt+=3){var ni=Je(Se[Tt],Se[Tt+1],Ie,We,St,vt);if(ni>U)V=Tt,U=ni;else if(ni===U){var it=Math.abs(Tt-ce);it<fe&&(V=Tt,fe=it)}}U>K&&(V-re>3&&qt(Se,re,V,K),Se[V+2]=U,me-V>3&&qt(Se,V,me,K))}function Je(Se,re,me,K,V,U){var ce=V-me,fe=U-K;if(0!==ce||0!==fe){var Ie=((Se-me)*ce+(re-K)*fe)/(ce*ce+fe*fe);Ie>1?(me=V,K=U):Ie>0&&(me+=ce*Ie,K+=fe*Ie)}return(ce=Se-me)*ce+(fe=re-K)*fe}function yt(Se,re,me,K){var V={id:void 0===Se?null:Se,type:re,geometry:me,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(U){var ce=U.geometry,fe=U.type;if("Point"===fe||"MultiPoint"===fe||"LineString"===fe)ei(U,ce);else if("Polygon"===fe||"MultiLineString"===fe)for(var Ie=0;Ie<ce.length;Ie++)ei(U,ce[Ie]);else if("MultiPolygon"===fe)for(Ie=0;Ie<ce.length;Ie++)for(var We=0;We<ce[Ie].length;We++)ei(U,ce[Ie][We])}(V),V}function ei(Se,re){for(var me=0;me<re.length;me+=3)Se.minX=Math.min(Se.minX,re[me]),Se.minY=Math.min(Se.minY,re[me+1]),Se.maxX=Math.max(Se.maxX,re[me]),Se.maxY=Math.max(Se.maxY,re[me+1])}function pi(Se,re,me,K){if(re.geometry){var V=re.geometry.coordinates,U=re.geometry.type,ce=Math.pow(me.tolerance/((1<<me.maxZoom)*me.extent),2),fe=[],Ie=re.id;if(me.promoteId?Ie=re.properties[me.promoteId]:me.generateId&&(Ie=K||0),"Point"===U)ct(V,fe);else if("MultiPoint"===U)for(var We=0;We<V.length;We++)ct(V[We],fe);else if("LineString"===U)Ti(V,fe,ce,!1);else if("MultiLineString"===U){if(me.lineMetrics){for(We=0;We<V.length;We++)Ti(V[We],fe=[],ce,!1),Se.push(yt(Ie,"LineString",fe,re.properties));return}fi(V,fe,ce,!1)}else if("Polygon"===U)fi(V,fe,ce,!0);else{if("MultiPolygon"!==U){if("GeometryCollection"===U){for(We=0;We<re.geometry.geometries.length;We++)pi(Se,{id:Ie,geometry:re.geometry.geometries[We],properties:re.properties},me,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(We=0;We<V.length;We++){var St=[];fi(V[We],St,ce,!0),fe.push(St)}}Se.push(yt(Ie,U,fe,re.properties))}}function ct(Se,re){re.push(bi(Se[0])),re.push(rt(Se[1])),re.push(0)}function Ti(Se,re,me,K){for(var V,U,ce=0,fe=0;fe<Se.length;fe++){var Ie=bi(Se[fe][0]),We=rt(Se[fe][1]);re.push(Ie),re.push(We),re.push(0),fe>0&&(ce+=K?(V*We-Ie*U)/2:Math.sqrt(Math.pow(Ie-V,2)+Math.pow(We-U,2))),V=Ie,U=We}var St=re.length-3;re[2]=1,qt(re,0,St,me),re[St+2]=1,re.size=Math.abs(ce),re.start=0,re.end=re.size}function fi(Se,re,me,K){for(var V=0;V<Se.length;V++){var U=[];Ti(Se[V],U,me,K),re.push(U)}}function bi(Se){return Se/360+.5}function rt(Se){var re=Math.sin(Se*Math.PI/180),me=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return me<0?0:me>1?1:me}function Dt(Se,re,me,K,V,U,ce,fe){if(K/=re,U>=(me/=re)&&ce<K)return Se;if(ce<me||U>=K)return null;for(var Ie=[],We=0;We<Se.length;We++){var St=Se[We],vt=St.geometry,Tt=St.type,ni=0===V?St.minX:St.minY,it=0===V?St.maxX:St.maxY;if(ni>=me&&it<K)Ie.push(St);else if(!(it<me||ni>=K)){var ae=[];if("Point"===Tt||"MultiPoint"===Tt)_i(vt,ae,me,K,V);else if("LineString"===Tt)Ui(vt,ae,me,K,V,!1,fe.lineMetrics);else if("MultiLineString"===Tt)nn(vt,ae,me,K,V,!1);else if("Polygon"===Tt)nn(vt,ae,me,K,V,!0);else if("MultiPolygon"===Tt)for(var Y=0;Y<vt.length;Y++){var Q=[];nn(vt[Y],Q,me,K,V,!0),Q.length&&ae.push(Q)}if(ae.length){if(fe.lineMetrics&&"LineString"===Tt){for(Y=0;Y<ae.length;Y++)Ie.push(yt(St.id,Tt,ae[Y],St.tags));continue}"LineString"!==Tt&&"MultiLineString"!==Tt||(1===ae.length?(Tt="LineString",ae=ae[0]):Tt="MultiLineString"),"Point"!==Tt&&"MultiPoint"!==Tt||(Tt=3===ae.length?"Point":"MultiPoint"),Ie.push(yt(St.id,Tt,ae,St.tags))}}}return Ie.length?Ie:null}function _i(Se,re,me,K,V){for(var U=0;U<Se.length;U+=3){var ce=Se[U+V];ce>=me&&ce<=K&&(re.push(Se[U]),re.push(Se[U+1]),re.push(Se[U+2]))}}function Ui(Se,re,me,K,V,U,ce){for(var fe,Ie,We=wi(Se),St=0===V?Ce:Ee,vt=Se.start,Tt=0;Tt<Se.length-3;Tt+=3){var ni=Se[Tt],it=Se[Tt+1],ae=Se[Tt+2],Y=Se[Tt+3],Q=Se[Tt+4],xe=0===V?ni:it,Re=0===V?Y:Q,ht=!1;ce&&(fe=Math.sqrt(Math.pow(ni-Y,2)+Math.pow(it-Q,2))),xe<me?Re>me&&(Ie=St(We,ni,it,Y,Q,me),ce&&(We.start=vt+fe*Ie)):xe>K?Re<K&&(Ie=St(We,ni,it,Y,Q,K),ce&&(We.start=vt+fe*Ie)):Pt(We,ni,it,ae),Re<me&&xe>=me&&(Ie=St(We,ni,it,Y,Q,me),ht=!0),Re>K&&xe<=K&&(Ie=St(We,ni,it,Y,Q,K),ht=!0),!U&&ht&&(ce&&(We.end=vt+fe*Ie),re.push(We),We=wi(Se)),ce&&(vt+=fe)}var Jt=Se.length-3;ni=Se[Jt],it=Se[Jt+1],ae=Se[Jt+2],(xe=0===V?ni:it)>=me&&xe<=K&&Pt(We,ni,it,ae),Jt=We.length-3,U&&Jt>=3&&(We[Jt]!==We[0]||We[Jt+1]!==We[1])&&Pt(We,We[0],We[1],We[2]),We.length&&re.push(We)}function wi(Se){var re=[];return re.size=Se.size,re.start=Se.start,re.end=Se.end,re}function nn(Se,re,me,K,V,U){for(var ce=0;ce<Se.length;ce++)Ui(Se[ce],re,me,K,V,U,!1)}function Pt(Se,re,me,K){Se.push(re),Se.push(me),Se.push(K)}function Ce(Se,re,me,K,V,U){var ce=(U-re)/(K-re);return Se.push(U),Se.push(me+(V-me)*ce),Se.push(1),ce}function Ee(Se,re,me,K,V,U){var ce=(U-me)/(V-me);return Se.push(re+(K-re)*ce),Se.push(U),Se.push(1),ce}function st(Se,re){for(var me=[],K=0;K<Se.length;K++){var V,U=Se[K],ce=U.type;if("Point"===ce||"MultiPoint"===ce||"LineString"===ce)V=xt(U.geometry,re);else if("MultiLineString"===ce||"Polygon"===ce){V=[];for(var fe=0;fe<U.geometry.length;fe++)V.push(xt(U.geometry[fe],re))}else if("MultiPolygon"===ce)for(V=[],fe=0;fe<U.geometry.length;fe++){for(var Ie=[],We=0;We<U.geometry[fe].length;We++)Ie.push(xt(U.geometry[fe][We],re));V.push(Ie)}me.push(yt(U.id,ce,V,U.tags))}return me}function xt(Se,re){var me=[];me.size=Se.size,void 0!==Se.start&&(me.start=Se.start,me.end=Se.end);for(var K=0;K<Se.length;K+=3)me.push(Se[K]+re,Se[K+1],Se[K+2]);return me}function Nt(Se,re){if(Se.transformed)return Se;var me,K,V,U=1<<Se.z,ce=Se.x,fe=Se.y;for(me=0;me<Se.features.length;me++){var Ie=Se.features[me],We=Ie.geometry,St=Ie.type;if(Ie.geometry=[],1===St)for(K=0;K<We.length;K+=2)Ie.geometry.push(nt(We[K],We[K+1],re,U,ce,fe));else for(K=0;K<We.length;K++){var vt=[];for(V=0;V<We[K].length;V+=2)vt.push(nt(We[K][V],We[K][V+1],re,U,ce,fe));Ie.geometry.push(vt)}}return Se.transformed=!0,Se}function nt(Se,re,me,K,V,U){return[Math.round(me*(Se*K-V)),Math.round(me*(re*K-U))]}function De(Se,re,me,K,V){for(var U=re===V.maxZoom?0:V.tolerance/((1<<re)*V.extent),ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:me,y:K,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fe=0;fe<Se.length;fe++){ce.numFeatures++,be(ce,Se[fe],U,V);var Ie=Se[fe].minX,We=Se[fe].minY,St=Se[fe].maxX,vt=Se[fe].maxY;Ie<ce.minX&&(ce.minX=Ie),We<ce.minY&&(ce.minY=We),St>ce.maxX&&(ce.maxX=St),vt>ce.maxY&&(ce.maxY=vt)}return ce}function be(Se,re,me,K){var V=re.geometry,U=re.type,ce=[];if("Point"===U||"MultiPoint"===U)for(var fe=0;fe<V.length;fe+=3)ce.push(V[fe]),ce.push(V[fe+1]),Se.numPoints++,Se.numSimplified++;else if("LineString"===U)_e(ce,V,Se,me,!1,!1);else if("MultiLineString"===U||"Polygon"===U)for(fe=0;fe<V.length;fe++)_e(ce,V[fe],Se,me,"Polygon"===U,0===fe);else if("MultiPolygon"===U)for(var Ie=0;Ie<V.length;Ie++){var We=V[Ie];for(fe=0;fe<We.length;fe++)_e(ce,We[fe],Se,me,!0,0===fe)}if(ce.length){var St=re.tags||null;if("LineString"===U&&K.lineMetrics){for(var vt in St={},re.tags)St[vt]=re.tags[vt];St.mapbox_clip_start=V.start/V.size,St.mapbox_clip_end=V.end/V.size}var Tt={geometry:ce,type:"Polygon"===U||"MultiPolygon"===U?3:"LineString"===U||"MultiLineString"===U?2:1,tags:St};null!==re.id&&(Tt.id=re.id),Se.features.push(Tt)}}function _e(Se,re,me,K,V,U){var ce=K*K;if(K>0&&re.size<(V?ce:K))me.numPoints+=re.length/3;else{for(var fe=[],Ie=0;Ie<re.length;Ie+=3)(0===K||re[Ie+2]>ce)&&(me.numSimplified++,fe.push(re[Ie]),fe.push(re[Ie+1])),me.numPoints++;V&&function(We,St){for(var vt=0,Tt=0,ni=We.length,it=ni-2;Tt<ni;it=Tt,Tt+=2)vt+=(We[Tt]-We[it])*(We[Tt+1]+We[it+1]);if(vt>0===St)for(Tt=0,ni=We.length;Tt<ni/2;Tt+=2){var ae=We[Tt],Y=We[Tt+1];We[Tt]=We[ni-2-Tt],We[Tt+1]=We[ni-1-Tt],We[ni-2-Tt]=ae,We[ni-1-Tt]=Y}}(fe,U),Se.push(fe)}}function Qe(Se,re){var me=(re=this.options=function(V,U){for(var ce in U)V[ce]=U[ce];return V}(Object.create(this.options),re)).debug;if(me&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var V,U,ce,fe,Ie,We,K=function(V,U){var ce=[];if("FeatureCollection"===V.type)for(var fe=0;fe<V.features.length;fe++)pi(ce,V.features[fe],U,fe);else pi(ce,"Feature"===V.type?V:{geometry:V},U);return ce}(Se,re);this.tiles={},this.tileCoords=[],me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fe=V=K,Ie=Dt(V,1,-1-(ce=(U=re).buffer/U.extent),ce,0,-1,2,U),We=Dt(V,1,1-ce,2+ce,0,-1,2,U),(Ie||We)&&(fe=Dt(V,1,-ce,1+ce,0,-1,2,U)||[],Ie&&(fe=st(Ie,1).concat(fe)),We&&(fe=fe.concat(st(We,-1)))),(K=fe).length&&this.splitTile(K,0,0,0),me&&(K.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ze(Se,re,me){return 32*((1<<Se)*me+re)+Se}function et(Se,re){return re?Se.properties[re]:Se.id}function Ei(Se,re){if(null==Se)return!0;if("Feature"===Se.type)return null!=et(Se,re);if("FeatureCollection"===Se.type){const me=new Set;for(const K of Se.features){const V=et(K,re);if(null==V||me.has(V))return!1;me.add(V)}return!0}return!1}function li(Se,re){const me=new Map;if(null!=Se)if("Feature"===Se.type)me.set(et(Se,re),Se);else for(const K of Se.features)me.set(et(K,re),K);return me}function qi(Se,re){const me=Se.tileID.canonical;if(!this._geoJSONIndex)return re(null,null);const K=this._geoJSONIndex.getTile(me.z,me.x,me.y);if(!K)return re(null,null);const V=new class{constructor(ce){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=_.EXTENT,this.length=ce.length,this._features=ce}feature(ce){return new class{constructor(fe){this._feature=fe,this.extent=_.EXTENT,this.type=fe.type,this.properties=fe.tags,"id"in fe&&!isNaN(fe.id)&&(this.id=parseInt(fe.id,10))}loadGeometry(){if(1===this._feature.type){const fe=[];for(const Ie of this._feature.geometry)fe.push([new _.Point(Ie[0],Ie[1])]);return fe}{const fe=[];for(const Ie of this._feature.geometry){const We=[];for(const St of Ie)We.push(new _.Point(St[0],St[1]));fe.push(We)}return fe}}toGeoJSON(fe,Ie,We){return mt.call(this,fe,Ie,We)}}(this._features[ce])}}(K.features);let U=At(V);0===U.byteOffset&&U.byteLength===U.buffer.byteLength||(U=new Uint8Array(U)),re(null,{vectorTile:V,rawData:U.buffer})}Qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qe.prototype.splitTile=function(Se,re,me,K,V,U,ce){for(var fe=[Se,re,me,K],Ie=this.options,We=Ie.debug;fe.length;){K=fe.pop(),me=fe.pop(),re=fe.pop(),Se=fe.pop();var St=1<<re,vt=ze(re,me,K),Tt=this.tiles[vt];if(!Tt&&(We>1&&console.time("creation"),Tt=this.tiles[vt]=De(Se,re,me,K,Ie),this.tileCoords.push({z:re,x:me,y:K}),We)){We>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,me,K,Tt.numFeatures,Tt.numPoints,Tt.numSimplified),console.timeEnd("creation"));var ni="z"+re;this.stats[ni]=(this.stats[ni]||0)+1,this.total++}if(Tt.source=Se,V){if(re===Ie.maxZoom||re===V)continue;var it=1<<V-re;if(me!==Math.floor(U/it)||K!==Math.floor(ce/it))continue}else if(re===Ie.indexMaxZoom||Tt.numPoints<=Ie.indexMaxPoints)continue;if(Tt.source=null,0!==Se.length){We>1&&console.time("clipping");var ae,Y,Q,xe,Re,ht,Jt=.5*Ie.buffer/Ie.extent,Fi=.5-Jt,an=.5+Jt,un=1+Jt;ae=Y=Q=xe=null,Re=Dt(Se,St,me-Jt,me+an,0,Tt.minX,Tt.maxX,Ie),ht=Dt(Se,St,me+Fi,me+un,0,Tt.minX,Tt.maxX,Ie),Se=null,Re&&(ae=Dt(Re,St,K-Jt,K+an,1,Tt.minY,Tt.maxY,Ie),Y=Dt(Re,St,K+Fi,K+un,1,Tt.minY,Tt.maxY,Ie),Re=null),ht&&(Q=Dt(ht,St,K-Jt,K+an,1,Tt.minY,Tt.maxY,Ie),xe=Dt(ht,St,K+Fi,K+un,1,Tt.minY,Tt.maxY,Ie),ht=null),We>1&&console.timeEnd("clipping"),fe.push(ae||[],re+1,2*me,2*K),fe.push(Y||[],re+1,2*me,2*K+1),fe.push(Q||[],re+1,2*me+1,2*K),fe.push(xe||[],re+1,2*me+1,2*K+1)}}},Qe.prototype.getTile=function(Se,re,me){var K=this.options,V=K.extent,U=K.debug;if(Se<0||Se>24)return null;var ce=1<<Se,fe=ze(Se,re=(re%ce+ce)%ce,me);if(this.tiles[fe])return Nt(this.tiles[fe],V);U>1&&console.log("drilling down to z%d-%d-%d",Se,re,me);for(var Ie,We=Se,St=re,vt=me;!Ie&&We>0;)We--,St=Math.floor(St/2),vt=Math.floor(vt/2),Ie=this.tiles[ze(We,St,vt)];return Ie&&Ie.source?(U>1&&console.log("found parent tile z%d-%d-%d",We,St,vt),U>1&&console.time("drilling down"),this.splitTile(Ie.source,We,St,vt,Se,re,me),U>1&&console.timeEnd("drilling down"),this.tiles[fe]?Nt(this.tiles[fe],V):null):null};class Li extends je{constructor(re,me,K,V){super(re,me,K,qi),this._dataUpdateable=new Map,this.loadGeoJSON=(U,ce)=>{const{promoteId:fe}=U;if(U.request)return _.getJSON(U.request,(Ie,We,St,vt)=>{this._dataUpdateable=Ei(We,fe)?li(We,fe):void 0,ce(Ie,We,St,vt)});if("string"==typeof U.data)try{const Ie=JSON.parse(U.data);this._dataUpdateable=Ei(Ie,fe)?li(Ie,fe):void 0,ce(null,Ie)}catch{ce(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`))}else U.dataDiff?this._dataUpdateable?(function(Ie,We,St){var vt,Tt,ni,it;if(We.removeAll&&Ie.clear(),We.remove)for(const ae of We.remove)Ie.delete(ae);if(We.add)for(const ae of We.add){const Y=et(ae,St);null!=Y&&Ie.set(Y,ae)}if(We.update)for(const ae of We.update){let Y=Ie.get(ae.id);if(null==Y)continue;const Q=!ae.removeAllProperties&&((null===(vt=ae.removeProperties)||void 0===vt?void 0:vt.length)>0||(null===(Tt=ae.addOrUpdateProperties)||void 0===Tt?void 0:Tt.length)>0);if((ae.newGeometry||ae.removeAllProperties||Q)&&(Y={...Y},Ie.set(ae.id,Y),Q&&(Y.properties={...Y.properties})),ae.newGeometry&&(Y.geometry=ae.newGeometry),ae.removeAllProperties)Y.properties={};else if((null===(ni=ae.removeProperties)||void 0===ni?void 0:ni.length)>0)for(const xe of ae.removeProperties)Object.prototype.hasOwnProperty.call(Y.properties,xe)&&delete Y.properties[xe];if((null===(it=ae.addOrUpdateProperties)||void 0===it?void 0:it.length)>0)for(const{key:xe,value:Re}of ae.addOrUpdateProperties)Y.properties[xe]=Re}}(this._dataUpdateable,U.dataDiff,fe),ce(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):ce(new Error(`Cannot update existing geojson data in ${U.source}`)):ce(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},V&&(this.loadGeoJSON=V)}loadData(re,me){var K;null===(K=this._pendingRequest)||void 0===K||K.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const V=!!(re&&re.request&&re.request.collectResourceTiming)&&new _.RequestPerformance(re.request);this._pendingCallback=me,this._pendingRequest=this.loadGeoJSON(re,(U,ce)=>{if(delete this._pendingCallback,delete this._pendingRequest,U||!ce)return me(U);if("object"!=typeof ce)return me(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));{Ye(ce,!0);try{if(re.filter){const Ie=_.createExpression(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Ie.result)throw new Error(Ie.value.map(St=>`${St.key}: ${St.message}`).join(", "));ce={type:"FeatureCollection",features:ce.features.filter(St=>Ie.value.evaluate({zoom:0},St))}}this._geoJSONIndex=re.cluster?new ci(function({superclusterOptions:Ie,clusterProperties:We}){if(!We||!Ie)return Ie;const St={},vt={},Tt={accumulated:null,zoom:0},ni={properties:null},it=Object.keys(We);for(const ae of it){const[Y,Q]=We[ae],xe=_.createExpression(Q),Re=_.createExpression("string"==typeof Y?[Y,["accumulated"],["get",ae]]:Y);St[ae]=xe.value,vt[ae]=Re.value}return Ie.map=ae=>{ni.properties=ae;const Y={};for(const Q of it)Y[Q]=St[Q].evaluate(Tt,ni);return Y},Ie.reduce=(ae,Y)=>{ni.properties=Y;for(const Q of it)Tt.accumulated=ae[Q],ae[Q]=vt[Q].evaluate(Tt,ni)},Ie}(re)).load(ce.features):new Qe(Ie=ce,re.geojsonVtOptions)}catch(Ie){return me(Ie)}this.loaded={};const fe={};if(V){const Ie=V.finish();Ie&&(fe.resourceTiming={},fe.resourceTiming[re.source]=JSON.parse(JSON.stringify(Ie)))}me(null,fe)}var Ie})}reloadTile(re,me){const K=this.loaded;return K&&K[re.uid]?super.reloadTile(re,me):this.loadTile(re,me)}removeSource(re,me){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),me()}getClusterExpansionZoom(re,me){try{me(null,this._geoJSONIndex.getClusterExpansionZoom(re.clusterId))}catch(K){me(K)}}getClusterChildren(re,me){try{me(null,this._geoJSONIndex.getChildren(re.clusterId))}catch(K){me(K)}}getClusterLeaves(re,me){try{me(null,this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset))}catch(K){me(K)}}}class pn{constructor(re){this.self=re,this.actor=new _.Actor(re,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:je,geojson:Li},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(me,K)=>{if(this.workerSourceTypes[me])throw new Error(`Worker source with name "${me}" already registered.`);this.workerSourceTypes[me]=K},this.self.registerRTLTextPlugin=me=>{if(_.plugin.isParsed())throw new Error("RTL text plugin already registered.");_.plugin.applyArabicShaping=me.applyArabicShaping,_.plugin.processBidirectionalText=me.processBidirectionalText,_.plugin.processStyledBidirectionalText=me.processStyledBidirectionalText}}setReferrer(re,me){this.referrer=me}setImages(re,me,K){this.availableImages[re]=me;for(const V in this.workerSources[re]){const U=this.workerSources[re][V];for(const ce in U)U[ce].availableImages=me}K()}setLayers(re,me,K){this.getLayerIndex(re).replace(me),K()}updateLayers(re,me,K){this.getLayerIndex(re).update(me.layers,me.removedIds),K()}loadTile(re,me,K){this.getWorkerSource(re,me.type,me.source).loadTile(me,K)}loadDEMTile(re,me,K){this.getDEMWorkerSource(re,me.source).loadTile(me,K)}reloadTile(re,me,K){this.getWorkerSource(re,me.type,me.source).reloadTile(me,K)}abortTile(re,me,K){this.getWorkerSource(re,me.type,me.source).abortTile(me,K)}removeTile(re,me,K){this.getWorkerSource(re,me.type,me.source).removeTile(me,K)}removeDEMTile(re,me){this.getDEMWorkerSource(re,me.source).removeTile(me)}removeSource(re,me,K){if(!this.workerSources[re]||!this.workerSources[re][me.type]||!this.workerSources[re][me.type][me.source])return;const V=this.workerSources[re][me.type][me.source];delete this.workerSources[re][me.type][me.source],void 0!==V.removeSource?V.removeSource(me,K):K()}loadWorkerSource(re,me,K){try{this.self.importScripts(me.url),K()}catch(V){K(V.toString())}}syncRTLPluginState(re,me,K){try{_.plugin.setState(me);const V=_.plugin.getPluginURL();if(_.plugin.isLoaded()&&!_.plugin.isParsed()&&null!=V){this.self.importScripts(V);const U=_.plugin.isParsed();K(U?void 0:new Error(`RTL Text Plugin failed to import scripts from ${V}`),U)}}catch(V){K(V.toString())}}getAvailableImages(re){let me=this.availableImages[re];return me||(me=[]),me}getLayerIndex(re){let me=this.layerIndexes[re];return me||(me=this.layerIndexes[re]=new Ze),me}getWorkerSource(re,me,K){return this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][me]||(this.workerSources[re][me]={}),this.workerSources[re][me][K]||(this.workerSources[re][me][K]=new this.workerSourceTypes[me]({send:(U,ce,fe)=>{this.actor.send(U,ce,fe,re)}},this.getLayerIndex(re),this.getAvailableImages(re))),this.workerSources[re][me][K]}getDEMWorkerSource(re,me){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][me]||(this.demWorkerSources[re][me]=new Xe),this.demWorkerSources[re][me]}}return _.isWorker()&&(self.worker=new pn(self)),pn}),a(0,function(_){class he{static testProp(n){if(!he.docStyle)return n[0];for(let d=0;d<n.length;d++)if(n[d]in he.docStyle)return n[d];return n[0]}static create(n,d,g){const b=window.document.createElement(n);return void 0!==d&&(b.className=d),g&&g.appendChild(b),b}static createNS(n,d){return window.document.createElementNS(n,d)}static disableDrag(){he.docStyle&&he.selectProp&&(he.userSelect=he.docStyle[he.selectProp],he.docStyle[he.selectProp]="none")}static enableDrag(){he.docStyle&&he.selectProp&&(he.docStyle[he.selectProp]=he.userSelect)}static setTransform(n,d){n.style[he.transformProp]=d}static addEventListener(n,d,g,b={}){n.addEventListener(d,g,"passive"in b?b:b.capture)}static removeEventListener(n,d,g,b={}){n.removeEventListener(d,g,"passive"in b?b:b.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",he.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",he.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",he.suppressClickInternal,!0)},0)}static mousePos(n,d){const g=n.getBoundingClientRect();return new _.Point(d.clientX-g.left-n.clientLeft,d.clientY-g.top-n.clientTop)}static touchPos(n,d){const g=n.getBoundingClientRect(),b=[];for(let E=0;E<d.length;E++)b.push(new _.Point(d[E].clientX-g.left-n.clientLeft,d[E].clientY-g.top-n.clientTop));return b}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}he.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,he.selectProp=he.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),he.transformProp=he.testProp(["transform","WebkitTransform"]);const $e={supported:!1,testSupport:function(v){!je&&Ve&&(Xe?ke(v):Ae=v)}};let Ae,Ve,je=!1,Xe=!1;function ke(v){const n=v.createTexture();v.bindTexture(v.TEXTURE_2D,n);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,Ve),v.isContextLost())return;$e.supported=!0}catch{}v.deleteTexture(n),je=!0}var ot;typeof document<"u"&&(Ve=document.createElement("img"),Ve.onload=function(){Ae&&ke(Ae),Ae=null,Xe=!0},Ve.onerror=function(){je=!0,Ae=null},Ve.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let n,d,g,b;v.resetRequestQueue=()=>{n=[],d=0,g=0,b={}},v.addThrottleControl=G=>{const ie=g++;return b[ie]=G,ie},v.removeThrottleControl=G=>{delete b[G],N()},v.getImage=(G,ie,te=!0)=>{$e.supported&&(G.headers||(G.headers={}),G.headers.accept="image/webp,*/*");const ve={requestParameters:G,supportImageRefresh:te,callback:ie,cancelled:!1,completed:!1,cancel:()=>{ve.completed||ve.cancelled||(ve.cancelled=!0,ve.innerRequest&&(ve.innerRequest.cancel(),d--),N())}};return n.push(ve),N(),ve};const E=G=>{const{requestParameters:ie,supportImageRefresh:te,callback:ve}=G;return _.extend(ie,{type:"image"}),(!1!==te||_.isWorker()||_.getProtocolAction(ie.url)||ie.headers&&!Object.keys(ie.headers).reduce((Fe,Pe)=>Fe&&"accept"===Pe,!0)?_.makeRequest:L)(ie,(Fe,Pe,Ne,Be)=>{P(G,ve,Fe,Pe,Ne,Be)})},P=(G,ie,te,ve,Fe,Pe)=>{var Ne,Be;te?ie(te):ve instanceof HTMLImageElement||ve instanceof ImageBitmap?ie(null,ve):ve&&(Ne=ve,Be=(Ne,Be)=>{null!=Ne?ie(Ne):null!=Be&&ie(null,Be,{cacheControl:Fe,expires:Pe})},"function"==typeof createImageBitmap?_.arrayBufferToImageBitmap(Ne,Be):_.arrayBufferToImage(Ne,Be)),G.cancelled||(G.completed=!0,d--,N())},N=()=>{const G=(()=>{const ie=Object.keys(b);let te=!1;if(ie.length>0)for(const ve of ie)if(te=b[ve](),te)break;return te})()?_.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:_.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let ie=d;ie<G&&n.length>0;ie++){const te=n.shift();if(te.cancelled){ie--;continue}const ve=E(te);d++,te.innerRequest=ve}},L=(G,ie)=>{const te=new Image,ve=G.url;let Fe=!1;const Pe=G.credentials;return Pe&&"include"===Pe?te.crossOrigin="use-credentials":(Pe&&"same-origin"===Pe||!_.sameOrigin(ve))&&(te.crossOrigin="anonymous"),te.fetchPriority="high",te.onload=()=>{ie(null,te),te.onerror=te.onload=null},te.onerror=()=>{Fe||ie(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),te.onerror=te.onload=null},te.src=ve,{cancel:()=>{Fe=!0,te.src=""}}}}(ot||(ot={})),ot.resetRequestQueue();var Ye,v,mt=ot;(v=Ye||(Ye={})).Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown";class Gt{constructor(n){this._transformRequestFn=n}transformRequest(n,d){return this._transformRequestFn&&this._transformRequestFn(n,d)||{url:n}}normalizeSpriteURL(n,d,g){const b=function(E){const P=E.match(wt);if(!P)throw new Error(`Unable to parse URL "${E}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(n);return b.path+=`${d}${g}`,function(E){const P=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${P}`}(b)}setTransformRequest(n){this._transformRequestFn=n}}const wt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Yt(v){var n=new _.ARRAY_TYPE(3);return n[0]=v[0],n[1]=v[1],n[2]=v[2],n}var Zt,Wt=function(v,n,d){return v[0]=n[0]-d[0],v[1]=n[1]-d[1],v[2]=n[2]-d[2],v};Zt=new _.ARRAY_TYPE(3),_.ARRAY_TYPE!=Float32Array&&(Zt[0]=0,Zt[1]=0,Zt[2]=0);var Ct=function(v){var n=v[0],d=v[1];return n*n+d*d};function Oe(v){const n=[];if("string"==typeof v)n.push({id:"default",url:v});else if(v&&v.length>0){const d=[];for(const{id:g,url:b}of v){const E=`${g}${b}`;-1===d.indexOf(E)&&(d.push(E),n.push({id:g,url:b}))}}return n}function tt(v,n,d,g,b){if(g)return void v(g);if(b!==Object.values(n).length||b!==Object.values(d).length)return;const E={};for(const P in n){E[P]={};const N=_.exported.getImageCanvasContext(d[P]),L=n[P];for(const G in L){const{width:ie,height:te,x:ve,y:Fe,sdf:Pe,pixelRatio:Ne,stretchX:Be,stretchY:at,content:Et}=L[G];E[P][G]={data:null,pixelRatio:Ne,sdf:Pe,stretchX:Be,stretchY:at,content:Et,spriteData:{width:ie,height:te,x:ve,y:Fe,context:N}}}}v(null,E)}!function(){var v=new _.ARRAY_TYPE(2);_.ARRAY_TYPE!=Float32Array&&(v[0]=0,v[1]=0)}();class kt{constructor(n,d,g,b){this.context=n,this.format=g,this.texture=n.gl.createTexture(),this.update(d,b)}update(n,d,g){const{width:b,height:E}=n,P=!(this.size&&this.size[0]===b&&this.size[1]===E||g),{context:N}=this,{gl:L}=N;if(this.useMipmap=Boolean(d&&d.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),N.pixelStoreUnpackFlipY.set(!1),N.pixelStoreUnpack.set(1),N.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!d||!1!==d.premultiply)),P)this.size=[b,E],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||_.isImageBitmap(n)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,n):L.texImage2D(L.TEXTURE_2D,0,this.format,b,E,0,this.format,L.UNSIGNED_BYTE,n.data);else{const{x:G,y:ie}=g||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||_.isImageBitmap(n)?L.texSubImage2D(L.TEXTURE_2D,0,G,ie,L.RGBA,L.UNSIGNED_BYTE,n):L.texSubImage2D(L.TEXTURE_2D,0,G,ie,b,E,L.RGBA,L.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D)}bind(n,d,g){const{context:b}=this,{gl:E}=b;E.bindTexture(E.TEXTURE_2D,this.texture),g!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=E.LINEAR),n!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,n),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,g||n),this.filter=n),d!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,d),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function Ot(v){const{userImage:n}=v;return!!(n&&n.render&&n.render())&&(v.data.replace(new Uint8Array(n.data.buffer)),!0)}class Vt extends _.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new _.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:d,callback:g}of this.requestors)this._notify(d,g);this.requestors=[]}}getImage(n){const d=this.images[n];if(d&&!d.data&&d.spriteData){const g=d.spriteData;d.data=new _.RGBAImage({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),d.spriteData=null}return d}addImage(n,d){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,d)&&(this.images[n]=d)}_validate(n,d){let g=!0;const b=d.data||d.spriteData;return this._validateStretch(d.stretchX,b&&b.width)||(this.fire(new _.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,b&&b.height)||(this.fire(new _.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new _.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),g=!1),g}_validateStretch(n,d){if(!n)return!0;let g=0;for(const b of n){if(b[0]<g||b[1]<b[0]||d<b[1])return!1;g=b[1]}return!0}_validateContent(n,d){if(!n)return!0;if(4!==n.length)return!1;const g=d.spriteData,b=g&&g.width||d.data.width,E=g&&g.height||d.data.height;return!(n[0]<0||b<n[0]||n[1]<0||E<n[1]||n[2]<0||b<n[2]||n[3]<0||E<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,d,g=!0){const b=this.getImage(n);if(g&&(b.data.width!==d.data.width||b.data.height!==d.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=b.version+1,this.images[n]=d,this.updatedImages[n]=!0}removeImage(n){const d=this.images[n];delete this.images[n],delete this.patterns[n],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,d){let g=!0;if(!this.isLoaded())for(const b of n)this.images[b]||(g=!1);this.isLoaded()||g?this._notify(n,d):this.requestors.push({ids:n,callback:d})}_notify(n,d){const g={};for(const b of n){let E=this.getImage(b);E||(this.fire(new _.Event("styleimagemissing",{id:b})),E=this.getImage(b)),E?g[b]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:Boolean(E.userImage&&E.userImage.render)}:_.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,g)}getPixelSize(){const{width:n,height:d}=this.atlasImage;return{width:n,height:d}}getPattern(n){const d=this.patterns[n],g=this.getImage(n);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const b={w:g.data.width+2,h:g.data.height+2,x:0,y:0},E=new _.ImagePosition(b,g);this.patterns[n]={bin:b,position:E}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const d=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new kt(n,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const E in this.patterns)n.push(this.patterns[E].bin);const{w:d,h:g}=_.potpack(n),b=this.atlasImage;b.resize({width:d||1,height:g||1});for(const E in this.patterns){const{bin:P}=this.patterns[E],N=P.x+1,L=P.y+1,G=this.getImage(E).data,ie=G.width,te=G.height;_.RGBAImage.copy(G,b,{x:0,y:0},{x:N,y:L},{width:ie,height:te}),_.RGBAImage.copy(G,b,{x:0,y:te-1},{x:N,y:L-1},{width:ie,height:1}),_.RGBAImage.copy(G,b,{x:0,y:0},{x:N,y:L+te},{width:ie,height:1}),_.RGBAImage.copy(G,b,{x:ie-1,y:0},{x:N-1,y:L},{width:1,height:te}),_.RGBAImage.copy(G,b,{x:0,y:0},{x:N+ie,y:L},{width:1,height:te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const d of n){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.getImage(d);g||_.warnOnce(`Image with ID: "${d}" was not found`),Ot(g)&&this.updateImage(d,g)}}}const ai=1e20;function gi(v,n,d,g,b,E,P,N,L){for(let G=n;G<n+g;G++)hi(v,d*E+G,E,b,P,N,L);for(let G=d;G<d+b;G++)hi(v,G*E+n,1,g,P,N,L)}function hi(v,n,d,g,b,E,P){E[0]=0,P[0]=-ai,P[1]=ai,b[0]=v[n];for(let N=1,L=0,G=0;N<g;N++){b[N]=v[n+N*d];const ie=N*N;do{const te=E[L];G=(b[N]-b[te]+ie-te*te)/(N-te)/2}while(G<=P[L]&&--L>-1);L++,E[L]=N,P[L]=G,P[L+1]=ai}for(let N=0,L=0;N<g;N++){for(;P[L+1]<N;)L++;const G=E[L],ie=N-G;v[n+N*d]=b[G]+ie*ie}}class zi{constructor(n,d){this.requestManager=n,this.localIdeographFontFamily=d,this.entries={}}setURL(n){this.url=n}getGlyphs(n,d){const g=[];for(const b in n)for(const E of n[b])g.push({stack:b,id:E});_.asyncAll(g,({stack:b,id:E},P)=>{let N=this.entries[b];N||(N=this.entries[b]={glyphs:{},requests:{},ranges:{}});let L=N.glyphs[E];if(void 0!==L)return void P(null,{stack:b,id:E,glyph:L});if(L=this._tinySDF(N,b,E),L)return N.glyphs[E]=L,void P(null,{stack:b,id:E,glyph:L});const G=Math.floor(E/256);if(256*G>65535)return void P(new Error("glyphs > 65535 not supported"));if(N.ranges[G])return void P(null,{stack:b,id:E,glyph:L});if(!this.url)return void P(new Error("glyphsUrl is not set"));let ie=N.requests[G];ie||(ie=N.requests[G]=[],zi.loadGlyphRange(b,G,this.url,this.requestManager,(te,ve)=>{if(ve){for(const Fe in ve)this._doesCharSupportLocalGlyph(+Fe)||(N.glyphs[+Fe]=ve[+Fe]);N.ranges[G]=!0}for(const Fe of ie)Fe(te,ve);delete N.requests[G]})),ie.push((te,ve)=>{te?P(te):ve&&P(null,{stack:b,id:E,glyph:ve[E]||null})})},(b,E)=>{if(b)d(b);else if(E){const P={};for(const{stack:N,id:L,glyph:G}of E)(P[N]||(P[N]={}))[L]=G&&{id:G.id,bitmap:G.bitmap.clone(),metrics:G.metrics};d(null,P)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(_.unicodeBlockLookup["CJK Unified Ideographs"](n)||_.unicodeBlockLookup["Hangul Syllables"](n)||_.unicodeBlockLookup.Hiragana(n)||_.unicodeBlockLookup.Katakana(n))}_tinySDF(n,d,g){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(g))return;let E=n.tinySDF;if(!E){let N="400";/bold/i.test(d)?N="900":/medium/i.test(d)?N="500":/light/i.test(d)&&(N="200"),E=n.tinySDF=new zi.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:b,fontWeight:N})}const P=E.draw(String.fromCharCode(g));return{id:g,bitmap:new _.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop-27||-8,advance:P.glyphAdvance||24}}}}zi.loadGlyphRange=function(v,n,d,g,b){const E=256*n,P=E+255,N=g.transformRequest(d.replace("{fontstack}",v).replace("{range}",`${E}-${P}`),Ye.Glyphs);_.getArrayBuffer(N,(L,G)=>{if(L)b(L);else if(G){const ie={};for(const te of _.parseGlyphPbf(G))ie[te.id]=te;b(null,ie)}})},zi.TinySDF=class{constructor({fontSize:v=24,buffer:n=3,radius:d=8,cutoff:g=.25,fontFamily:b="sans-serif",fontWeight:E="normal",fontStyle:P="normal"}={}){this.buffer=n,this.cutoff=g,this.radius=d;const N=this.size=v+4*n,L=this._createCanvas(N),G=this.ctx=L.getContext("2d",{willReadFrequently:!0});G.font=`${P} ${E} ${v}px ${b}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(v){const n=document.createElement("canvas");return n.width=n.height=v,n}draw(v){const{width:n,actualBoundingBoxAscent:d,actualBoundingBoxDescent:g,actualBoundingBoxLeft:b,actualBoundingBoxRight:E}=this.ctx.measureText(v),P=Math.ceil(d),N=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-b))),L=Math.min(this.size-this.buffer,P+Math.ceil(g)),G=N+2*this.buffer,ie=L+2*this.buffer,te=Math.max(G*ie,0),ve=new Uint8ClampedArray(te),Fe={data:ve,width:G,height:ie,glyphWidth:N,glyphHeight:L,glyphTop:P,glyphLeft:0,glyphAdvance:n};if(0===N||0===L)return Fe;const{ctx:Pe,buffer:Ne,gridInner:Be,gridOuter:at}=this;Pe.clearRect(Ne,Ne,N,L),Pe.fillText(v,Ne,Ne+P);const Et=Pe.getImageData(Ne,Ne,N,L);at.fill(ai,0,te),Be.fill(0,0,te);for(let He=0;He<L;He++)for(let bt=0;bt<N;bt++){const Rt=Et.data[4*(He*N+bt)+3]/255;if(0===Rt)continue;const ii=(He+Ne)*G+bt+Ne;if(1===Rt)at[ii]=0,Be[ii]=ai;else{const I=.5-Rt;at[ii]=I>0?I*I:0,Be[ii]=I<0?I*I:0}}gi(at,0,0,G,ie,G,this.f,this.v,this.z),gi(Be,Ne,Ne,N,L,G,this.f,this.v,this.z);for(let He=0;He<te;He++){const bt=Math.sqrt(at[He])-Math.sqrt(Be[He]);ve[He]=Math.round(255-255*(bt/this.radius+this.cutoff))}return Fe}};class xi{constructor(){this.specification=_.v8Spec.light.position}possiblyEvaluate(n,d){return _.sphericalToCartesian(n.expression.evaluate(d))}interpolate(n,d,g){return{x:_.interpolate.number(n.x,d.x,g),y:_.interpolate.number(n.y,d.y,g),z:_.interpolate.number(n.z,d.z,g)}}}const At="-transition";let Bt,$t;class Kt extends _.Evented{constructor(n){super(),Bt=Bt||new _.Properties({anchor:new _.DataConstantProperty(_.v8Spec.light.anchor),position:new xi,color:new _.DataConstantProperty(_.v8Spec.light.color),intensity:new _.DataConstantProperty(_.v8Spec.light.intensity)}),this._transitionable=new _.Transitionable(Bt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,d={}){if(!this._validate(_.validateLight,n,d))for(const g in n){const b=n[g];g.endsWith(At)?this._transitionable.setTransition(g.slice(0,-At.length),b):this._transitionable.setValue(g,b)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,d,g){return(!g||!1!==g.validate)&&_.emitValidationErrors(this,n.call(_.validateStyle,_.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:_.v8Spec})))}}class ci{constructor(n,d){this.width=n,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,d){const g=n.join(",")+String(d);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(n,d)),this.dashEntry[g]}getDashRanges(n,d,g){const b=[];let E=n.length%2==1?-n[n.length-1]*g:0,P=n[0]*g,N=!0;b.push({left:E,right:P,isDash:N,zeroLength:0===n[0]});let L=n[0];for(let G=1;G<n.length;G++){N=!N;const ie=n[G];E=L*g,L+=ie,P=L*g,b.push({left:E,right:P,isDash:N,zeroLength:0===ie})}return b}addRoundDash(n,d,g){const b=d/2;for(let E=-g;E<=g;E++){const P=this.width*(this.nextRow+g+E);let N=0,L=n[N];for(let G=0;G<this.width;G++){G/L.right>1&&(L=n[++N]);const ie=Math.abs(G-L.left),te=Math.abs(G-L.right),ve=Math.min(ie,te);let Fe;const Pe=E/g*(b+1);if(L.isDash){const Ne=b-Math.abs(Pe);Fe=Math.sqrt(ve*ve+Ne*Ne)}else Fe=b-Math.sqrt(ve*ve+Pe*Pe);this.data[P+G]=Math.max(0,Math.min(255,Fe+128))}}}addRegularDash(n){for(let N=n.length-1;N>=0;--N){const L=n[N],G=n[N+1];L.zeroLength?n.splice(N,1):G&&G.isDash===L.isDash&&(G.left=L.left,n.splice(N,1))}const d=n[0],g=n[n.length-1];d.isDash===g.isDash&&(d.left=g.left-this.width,g.right=d.right+this.width);const b=this.width*this.nextRow;let E=0,P=n[E];for(let N=0;N<this.width;N++){N/P.right>1&&(P=n[++E]);const L=Math.abs(N-P.left),G=Math.abs(N-P.right),ie=Math.min(L,G);this.data[b+N]=Math.max(0,Math.min(255,(P.isDash?ie:-ie)+128))}}addDash(n,d){const g=d?7:0,b=2*g+1;if(this.nextRow+b>this.height)return _.warnOnce("LineAtlas out of space"),null;let E=0;for(let N=0;N<n.length;N++)E+=n[N];if(0!==E){const N=this.width/E,L=this.getDashRanges(n,this.width,N);d?this.addRoundDash(L,N,g):this.addRegularDash(L)}const P={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:E};return this.nextRow+=b,this.dirty=!0,P}bind(n){const d=n.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class oi{constructor(n,d,g){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=g;const b=this.workerPool.acquire(g);for(let E=0;E<b.length;E++){const P=new oi.Actor(b[E],d,g);P.name=`Worker ${E}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,d,g){_.asyncAll(this.actors,(b,E)=>{b.send(n,d,E)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}}function zt(v,n,d){const g=function(b,E){if(b)return d(b);if(E){const P=_.pick(_.extend(E,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(P.vectorLayers=E.vector_layers,P.vectorLayerIds=P.vectorLayers.map(N=>N.id)),d(null,P)}};return v.url?_.getJSON(n.transformRequest(v.url,Ye.Source),g):_.exported.frame(()=>g(null,v))}oi.Actor=_.Actor;class Lt{constructor(n,d){n&&(d?this.setSouthWest(n).setNorthEast(d):Array.isArray(n)&&(4===n.length?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof _.LngLat?new _.LngLat(n.lng,n.lat):_.LngLat.convert(n),this}setSouthWest(n){return this._sw=n instanceof _.LngLat?new _.LngLat(n.lng,n.lat):_.LngLat.convert(n),this}extend(n){const d=this._sw,g=this._ne;let b,E;if(n instanceof _.LngLat)b=n,E=n;else{if(!(n instanceof Lt))return Array.isArray(n)?4===n.length||n.every(Array.isArray)?this.extend(Lt.convert(n)):this.extend(_.LngLat.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(_.LngLat.convert(n)):this;if(b=n._sw,E=n._ne,!b||!E)return this}return d||g?(d.lng=Math.min(b.lng,d.lng),d.lat=Math.min(b.lat,d.lat),g.lng=Math.max(E.lng,g.lng),g.lat=Math.max(E.lat,g.lat)):(this._sw=new _.LngLat(b.lng,b.lat),this._ne=new _.LngLat(E.lng,E.lat)),this}getCenter(){return new _.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new _.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new _.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:d,lat:g}=_.LngLat.convert(n);let b=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&b}static convert(n){return n instanceof Lt?n:n&&new Lt(n)}static fromLngLat(n,d=0){const g=360*d/40075017,b=g/Math.cos(Math.PI/180*n.lat);return new Lt(new _.LngLat(n.lng-b,n.lat-g),new _.LngLat(n.lng+b,n.lat+g))}}class Xt{constructor(n,d,g){this.bounds=Lt.convert(this.validateBounds(n)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(n){return Array.isArray(n)&&4===n.length?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const d=Math.pow(2,n.z),g=Math.floor(_.mercatorXfromLng(this.bounds.getWest())*d),b=Math.floor(_.mercatorYfromLat(this.bounds.getNorth())*d),E=Math.ceil(_.mercatorXfromLng(this.bounds.getEast())*d),P=Math.ceil(_.mercatorYfromLat(this.bounds.getSouth())*d);return n.x>=g&&n.x<E&&n.y>=b&&n.y<P}}class ft extends _.Evented{constructor(n,d,g,b){if(super(),this.id=n,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,_.extend(this,_.pick(d,["url","scheme","tileSize","promoteId"])),this._options=_.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=zt(this._options,this.map._requestManager,(n,d)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n?this.fire(new _.ErrorEvent(n)):d&&(_.extend(this,d),d.bounds&&(this.tileBounds=new Xt(d.bounds,this.minzoom,this.maxzoom)),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return _.extend({},this._options)}loadTile(n,d){const g=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(g,Ye.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(P,N){return delete n.request,n.aborted?d(null):P&&404!==P.status?d(P):(N&&N.resourceTiming&&(n.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&N&&n.setExpiryData(N),n.loadVectorData(N,this.map.painter),d(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,n.actor&&"expired"!==n.state?"loading"===n.state?n.reloadCallback=d:n.request=n.actor.send("reloadTile",b,E.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",b,E.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class qt extends _.Evented{constructor(n,d,g,b){super(),this.id=n,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=_.extend({type:"raster"},d),_.extend(this,_.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=zt(this._options,this.map._requestManager,(n,d)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new _.ErrorEvent(n)):d&&(_.extend(this,d),d.bounds&&(this.tileBounds=new Xt(d.bounds,this.minzoom,this.maxzoom)),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return _.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,d){const g=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=mt.getImage(this.map._requestManager.transformRequest(g,Ye.Tile),(b,E,P)=>{if(delete n.request,n.aborted)n.state="unloaded",d(null);else if(b)n.state="errored",d(b);else if(E){this.map._refreshExpiredTiles&&P&&n.setExpiryData(P);const N=this.map.painter.context,L=N.gl;n.texture=this.map.painter.getTileTexture(E.width),n.texture?n.texture.update(E,{useMipmap:!0}):(n.texture=new kt(N,E,L.RGBA,{useMipmap:!0}),n.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),N.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax)),n.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(n,d){n.request&&(n.request.cancel(),delete n.request),d()}unloadTile(n,d){n.texture&&this.map.painter.saveTileTexture(n.texture),d()}hasTransition(){return!1}}class Je extends qt{constructor(n,d,g,b){super(n,d,g,b),this.type="raster-dem",this.maxzoom=22,this._options=_.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,d){const g=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function b(E,P){E&&(n.state="errored",d(E)),P&&(n.dem=P,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",d(null))}n.request=mt.getImage(this.map._requestManager.transformRequest(g,Ye.Tile),function(E,P){if(delete n.request,n.aborted)n.state="unloaded",d(null);else if(E)n.state="errored",d(E);else if(P){this.map._refreshExpiredTiles&&n.setExpiryData(P),delete P.cacheControl,delete P.expires;const N=_.isImageBitmap(P)&&(null==$t&&($t=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),$t)?P:_.exported.getImageData(P,1),L={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:N,encoding:this.encoding};n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",L,b.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(n){const d=n.canonical,g=Math.pow(2,d.z),b=(d.x-1+g)%g,E=0===d.x?n.wrap-1:n.wrap,P=(d.x+1+g)%g,N=d.x+1===g?n.wrap+1:n.wrap,L={};return L[new _.OverscaledTileID(n.overscaledZ,E,d.z,b,d.y).key]={backfilled:!1},L[new _.OverscaledTileID(n.overscaledZ,N,d.z,P,d.y).key]={backfilled:!1},d.y>0&&(L[new _.OverscaledTileID(n.overscaledZ,E,d.z,b,d.y-1).key]={backfilled:!1},L[new _.OverscaledTileID(n.overscaledZ,n.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},L[new _.OverscaledTileID(n.overscaledZ,N,d.z,P,d.y-1).key]={backfilled:!1}),d.y+1<g&&(L[new _.OverscaledTileID(n.overscaledZ,E,d.z,b,d.y+1).key]={backfilled:!1},L[new _.OverscaledTileID(n.overscaledZ,n.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},L[new _.OverscaledTileID(n.overscaledZ,N,d.z,P,d.y+1).key]={backfilled:!1}),L}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class yt extends _.Evented{constructor(n,d,g,b){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(b),this._data=d.data,this._options=_.extend({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const E=_.EXTENT/this.tileSize;this.workerOptions=_.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*E,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*E,extent:_.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:_.EXTENT,radius:(d.clusterRadius||50)*E,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(void 0!==n.clusterRadius&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),void 0!==n.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},d),this}getClusterChildren(n,d){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},d),this}getClusterLeaves(n,d,g,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:d,offset:g},b),this}_updateWorkerData(n){const d=_.extend({},this.workerOptions);n?d.dataDiff=n:"string"==typeof this._data?(d.request=this.map._requestManager.transformRequest(_.exported.resolveURL(this._data),Ye.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new _.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(g,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new _.Event("dataabort",{dataType:"source"}));let E=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(E=b.resourceTiming[this.id].slice(0)),g)return void this.fire(new _.ErrorEvent(g));const P={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&_.extend(P,{resourceTiming:E}),this.fire(new _.Event("data",{...P,sourceDataType:"metadata"})),this.fire(new _.Event("data",{...P,sourceDataType:"content"}))})}loaded(){return 0===this._pendingLoads}loadTile(n,d){const g=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const b={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(g,b,(E,P)=>(delete n.request,n.unloadVectorData(),n.aborted?d(null):E?d(E):(n.loadVectorData(P,this.map.painter,"reloadTile"===g),d(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return _.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ei=_.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class pi extends _.Evented{constructor(n,d,g,b){super(),this.id=n,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=d}load(n,d){this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=mt.getImage(this.map._requestManager.transformRequest(this.url,Ye.Image),(g,b)=>{this._request=null,this._loaded=!0,g?this.fire(new _.ErrorEvent(g)):b&&(this.image=b,n&&(this.coordinates=n),d&&d(),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(n){this.coordinates=n;const d=n.map(_.MercatorCoordinate.fromLngLat);this.tileID=function(b){let E=1/0,P=1/0,N=-1/0,L=-1/0;for(const ve of b)E=Math.min(E,ve.x),P=Math.min(P,ve.y),N=Math.max(N,ve.x),L=Math.max(L,ve.y);const G=Math.max(N-E,L-P),ie=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),te=Math.pow(2,ie);return new _.CanonicalTileID(ie,Math.floor((E+N)/2*te),Math.floor((P+L)/2*te))}(d),this.minzoom=this.maxzoom=this.tileID.z;const g=d.map(b=>this.tileID.getTilePoint(b)._round());return this._boundsArray=new _.RasterBoundsArray,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,_.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,_.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,_.EXTENT,_.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const n=this.map.painter.context,d=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,ei.members)),this.boundsSegments||(this.boundsSegments=_.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new kt(n,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let g=!1;for(const b in this.tiles){const E=this.tiles[b];"loaded"!==E.state&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new _.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n,d){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},d(null)):(n.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ct extends pi{constructor(n,d,g,b){super(n,d,g,b),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const n=this.options;this.urls=[];for(const d of n.urls)this.urls.push(this.map._requestManager.transformRequest(d,Ye.Source).url);_.getVideo(this.urls,(d,g)=>{this._loaded=!0,d?this.fire(new _.ErrorEvent(d)):g&&(this.video=g,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const d=this.video.seekable;n<d.start(0)||n>d.end(0)?this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const n=this.map.painter.context,d=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,ei.members)),this.boundsSegments||(this.boundsSegments=_.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new kt(n,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let g=!1;for(const b in this.tiles){const E=this.tiles[b];"loaded"!==E.state&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new _.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ti extends pi{constructor(n,d,g,b){super(n,d,g,b),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(E=>!Array.isArray(E)||2!==E.length||E.some(P=>"number"!=typeof P))||this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof HTMLCanvasElement||this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new _.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const d=this.map.painter.context,g=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ei.members)),this.boundsSegments||(this.boundsSegments=_.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new kt(d,this.canvas,g.RGBA,{premultiply:!0});let b=!1;for(const E in this.tiles){const P=this.tiles[E];"loaded"!==P.state&&(P.state="loaded",P.texture=this.texture,b=!0)}b&&this.fire(new _.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const fi={vector:ft,raster:qt,"raster-dem":Je,geojson:yt,video:ct,image:pi,canvas:Ti};function bi(v,n){const d=_.create();return _.translate(d,d,[1,1,0]),_.scale(d,d,[.5*v.width,.5*v.height,1]),_.multiply(d,d,v.calculatePosMatrix(n.toUnwrapped()))}function rt(v,n,d,g,b,E){const P=function(te,ve,Fe){if(te)for(const Pe of te){const Ne=ve[Pe];if(Ne&&Ne.source===Fe&&"fill-extrusion"===Ne.type)return!0}else for(const Pe in ve){const Ne=ve[Pe];if(Ne.source===Fe&&"fill-extrusion"===Ne.type)return!0}return!1}(b&&b.layers,n,v.id),N=E.maxPitchScaleFactor(),L=v.tilesIn(g,N,P);L.sort(Dt);const G=[];for(const te of L)G.push({wrappedTileID:te.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(n,d,v._state,te.queryGeometry,te.cameraQueryGeometry,te.scale,b,E,N,bi(v.transform,te.tileID))});const ie=function(te){const ve={},Fe={};for(const Pe of te){const Ne=Pe.queryResults,Be=Pe.wrappedTileID,at=Fe[Be]=Fe[Be]||{};for(const Et in Ne){const He=Ne[Et],bt=at[Et]=at[Et]||{},Rt=ve[Et]=ve[Et]||[];for(const ii of He)bt[ii.featureIndex]||(bt[ii.featureIndex]=!0,Rt.push(ii))}}return ve}(G);for(const te in ie)ie[te].forEach(ve=>{const Fe=ve.feature,Pe=v.getFeatureState(Fe.layer["source-layer"],Fe.id);Fe.source=Fe.layer.source,Fe.layer["source-layer"]&&(Fe.sourceLayer=Fe.layer["source-layer"]),Fe.state=Pe});return ie}function Dt(v,n){const d=v.tileID,g=n.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}class _i{constructor(n,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=_.uniqueId(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const d=n+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(b,E){const P={};if(!E)return P;for(const N of b){const L=N.layerIds.map(G=>E.getLayer(G)).filter(Boolean);if(0!==L.length){N.layers=L,N.stateDependentLayerIds&&(N.stateDependentLayers=N.stateDependentLayerIds.map(G=>L.filter(ie=>ie.id===G)[0]));for(const G of L)P[G.id]=N}}return P}(n.buckets,d.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const E=this.buckets[b];if(E instanceof _.SymbolBucket){if(this.hasSymbolBuckets=!0,!g)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const E=this.buckets[b];if(E instanceof _.SymbolBucket&&E.hasRTLText){this.hasRTLText=!0,_.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const b in this.buckets){const E=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(b).queryRadius(E))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new _.CollisionBoxArray}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const g in this.buckets){const b=this.buckets[g];b.uploadPending()&&b.upload(n)}const d=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new kt(n,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new kt(n,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,d,g,b,E,P,N,L,G,ie){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:E,scale:P,tileSize:this.tileSize,pixelPosMatrix:ie,transform:L,params:N,queryPadding:this.queryPadding*G},n,d,g):{}}querySourceFeatures(n,d){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const b=g.loadVTLayers(),E=d&&d.sourceLayer?d.sourceLayer:"",P=b._geojsonTileLayer||b[E];if(!P)return;const N=_.createFilter(d&&d.filter),{z:L,x:G,y:ie}=this.tileID.canonical,te={z:L,x:G,y:ie};for(let ve=0;ve<P.length;ve++){const Fe=P.feature(ve);if(N.needGeometry){const Be=_.toEvaluationFeature(Fe,!0);if(!N.filter(new _.EvaluationParameters(this.tileID.overscaledZ),Be,this.tileID.canonical))continue}else if(!N.filter(new _.EvaluationParameters(this.tileID.overscaledZ),Fe))continue;const Pe=g.getId(Fe,E),Ne=new _.GeoJSONFeature(Fe,L,G,ie,Pe);Ne.tile=te,n.push(Ne)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const d=this.expirationTime;if(n.cacheControl){const g=_.parseCacheControl(n.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const g=Date.now();let b=!1;if(this.expirationTime>g)b=!1;else if(d)if(this.expirationTime<d)b=!0;else{const E=this.expirationTime-d;E?this.expirationTime=g+Math.max(E,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(n,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(n).length)return;const g=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!d.style.hasLayer(b))continue;const E=this.buckets[b],P=E.layers[0].sourceLayer||"_geojsonTileLayer",N=g[P],L=n[P];if(!N||!L||0===Object.keys(L).length)continue;E.update(L,N,this.imageAtlas&&this.imageAtlas.patternPositions||{});const G=d&&d.style&&d.style.getLayer(b);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(E)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<_.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=_.exported.now()+n}setDependencies(n,d){const g={};for(const b of d)g[b]=!0;this.dependencies[n]=g}hasDependency(n,d){for(const g of n){const b=this.dependencies[g];if(b)for(const E of d)if(b[E])return!0}return!1}}class Ui{constructor(n,d){this.max=n,this.onRemove=d,this.reset()}reset(){for(const n in this.data)for(const d of this.data[n])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(n,d,g){const b=n.wrapped().key;void 0===this.data[b]&&(this.data[b]=[]);const E={value:d,timeout:void 0};if(void 0!==g&&(E.timeout=setTimeout(()=>{this.remove(n,E)},g)),this.data[b].push(E),this.order.push(b),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const d=this.data[n].shift();return d.timeout&&clearTimeout(d.timeout),0===this.data[n].length&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),d.value}getByKey(n){const d=this.data[n];return d?d[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,d){if(!this.has(n))return this;const g=n.wrapped().key,b=void 0===d?0:this.data[g].indexOf(d),E=this.data[g][b];return this.data[g].splice(b,1),E.timeout&&clearTimeout(E.timeout),0===this.data[g].length&&delete this.data[g],this.onRemove(E.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(n){const d=[];for(const g in this.data)for(const b of this.data[g])n(b.value)||d.push(b);for(const g of d)this.remove(g.value.tileID,g)}}class wi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,d,g){const b=String(d);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][b]=this.stateChanges[n][b]||{},_.extend(this.stateChanges[n][b],g),null===this.deletedStates[n]){this.deletedStates[n]={};for(const E in this.state[n])E!==b&&(this.deletedStates[n][E]=null)}else if(this.deletedStates[n]&&null===this.deletedStates[n][b]){this.deletedStates[n][b]={};for(const E in this.state[n][b])g[E]||(this.deletedStates[n][b][E]=null)}else for(const E in g)this.deletedStates[n]&&this.deletedStates[n][b]&&null===this.deletedStates[n][b][E]&&delete this.deletedStates[n][b][E]}removeFeatureState(n,d,g){if(null===this.deletedStates[n])return;const b=String(d);if(this.deletedStates[n]=this.deletedStates[n]||{},g&&void 0!==d)null!==this.deletedStates[n][b]&&(this.deletedStates[n][b]=this.deletedStates[n][b]||{},this.deletedStates[n][b][g]=null);else if(void 0!==d)if(this.stateChanges[n]&&this.stateChanges[n][b])for(g in this.deletedStates[n][b]={},this.stateChanges[n][b])this.deletedStates[n][b][g]=null;else this.deletedStates[n][b]=null;else this.deletedStates[n]=null}getState(n,d){const g=String(d),b=_.extend({},(this.state[n]||{})[g],(this.stateChanges[n]||{})[g]);if(null===this.deletedStates[n])return{};if(this.deletedStates[n]){const E=this.deletedStates[n][d];if(null===E)return{};for(const P in E)delete b[P]}return b}initializeTileState(n,d){n.setFeatureState(this.state,d)}coalesceChanges(n,d){const g={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const E={};for(const P in this.stateChanges[b])this.state[b][P]||(this.state[b][P]={}),_.extend(this.state[b][P],this.stateChanges[b][P]),E[P]=this.state[b][P];g[b]=E}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const E={};if(null===this.deletedStates[b])for(const P in this.state[b])E[P]={},this.state[b][P]={};else for(const P in this.deletedStates[b]){if(null===this.deletedStates[b][P])this.state[b][P]={};else for(const N of Object.keys(this.deletedStates[b][P]))delete this.state[b][P][N];E[P]=this.state[b][P]}g[b]=g[b]||{},_.extend(g[b],E)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(g).length)for(const b in n)n[b].setFeatureState(g,d)}}class nn extends _.Evented{constructor(n,d,g){super(),this.id=n,this.dispatcher=g,this.on("data",b=>{"source"===b.dataType&&"metadata"===b.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===b.dataType&&"content"===b.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(b,E,P,N){const L=new fi[E.type](b,E,P,N);if(L.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${L.id}`);return _.bindAll(["load","abort","unload","serialize","prepare"],L),L}(n,d,g,this),this._tiles={},this._cache=new Ui(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new wi,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const d=this._tiles[n];if("loaded"!==d.state&&"errored"!==d.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,d){return this._source.loadTile(n,d)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new _.Event("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const g=this._tiles[d];g.upload(n),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Pt).map(n=>n.key)}getRenderableIds(n){const d=[];for(const g in this._tiles)this._isIdRenderable(g,n)&&d.push(this._tiles[g]);return n?d.sort((g,b)=>{const E=g.tileID,P=b.tileID,N=new _.Point(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),L=new _.Point(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-P.overscaledZ||L.y-N.y||L.x-N.x}).map(g=>g.tileID.key):d.map(g=>g.tileID).sort(Pt).map(g=>g.key)}hasRenderableParent(n){const d=this.findLoadedParent(n,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(n,d){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(d||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)"errored"!==this._tiles[n].state&&this._reloadTile(n,"reloading")}}_reloadTile(n,d){const g=this._tiles[n];g&&("loading"!==g.state&&(g.state=d),this._loadTile(g,this._tileLoaded.bind(this,g,n,d)))}_tileLoaded(n,d,g,b){if(b)return n.state="errored",void(404!==b.status?this._source.fire(new _.ErrorEvent(b,{tile:n})):this.update(this.transform,this.terrain));n.timeAdded=_.exported.now(),"expired"===g&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(d,n),"raster-dem"===this.getSource().type&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new _.Event("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const d=this.getRenderableIds();for(let b=0;b<d.length;b++){const E=d[b];if(n.neighboringTiles&&n.neighboringTiles[E]){const P=this.getTileByID(E);g(n,P),g(P,n)}}function g(b,E){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let P=E.tileID.canonical.x-b.tileID.canonical.x;const N=E.tileID.canonical.y-b.tileID.canonical.y,L=Math.pow(2,b.tileID.canonical.z),G=E.tileID.key;0===P&&0===N||Math.abs(N)>1||(Math.abs(P)>1&&(1===Math.abs(P+L)?P+=L:1===Math.abs(P-L)&&(P-=L)),E.dem&&b.dem&&(b.dem.backfillBorder(E.dem,P,N),b.neighboringTiles&&b.neighboringTiles[G]&&(b.neighboringTiles[G].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,d,g,b){for(const E in this._tiles){let P=this._tiles[E];if(b[E]||!P.hasData()||P.tileID.overscaledZ<=d||P.tileID.overscaledZ>g)continue;let N=P.tileID;for(;P&&P.tileID.overscaledZ>d+1;){const G=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[G.key],P&&P.hasData()&&(N=G)}let L=N;for(;L.overscaledZ>d;)if(L=L.scaledTo(L.overscaledZ-1),n[L.key]){b[N.key]=N;break}}}findLoadedParent(n,d){if(n.key in this._loadedParentTiles){const g=this._loadedParentTiles[n.key];return g&&g.tileID.overscaledZ>=d?g:null}for(let g=n.overscaledZ-1;g>=d;g--){const b=n.scaledTo(g),E=this._getLoadedTile(b);if(E)return E}}_getLoadedTile(n){const d=this._tiles[n.key];return d&&d.hasData()?d:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const d=Math.ceil(n.width/this._source.tileSize)+1,g=Math.ceil(n.height/this._source.tileSize)+1,b=Math.floor(d*g*5),E="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(E)}handleWrapJump(n){const d=Math.round((n-(void 0===this._prevLng?n:this._prevLng))/360);if(this._prevLng=n,d){const g={};for(const b in this._tiles){const E=this._tiles[b];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+d),g[E.tileID.key]=E}this._tiles=g;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}update(n,d){if(this.transform=n,this.terrain=d,!this._sourceLoaded||this._paused)return;let g;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(ie=>new _.OverscaledTileID(ie.canonical.z,ie.wrap,ie.canonical.z,ie.canonical.x,ie.canonical.y)):(g=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(g=g.filter(ie=>this._source.hasTile(ie)))):g=[];const b=n.coveringZoomLevel(this._source),E=Math.max(b-nn.maxOverzooming,this._source.minzoom),P=Math.max(b+nn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ie={};for(const te of g)if(te.canonical.z>this._source.minzoom){const ve=te.scaledTo(te.canonical.z-1);ie[ve.key]=ve;const Fe=te.scaledTo(Math.max(this._source.minzoom,Math.min(te.canonical.z,5)));ie[Fe.key]=Fe}g=g.concat(Object.values(ie))}const N=0===g.length&&!this._updated&&this._didEmitContent;this._updated=!0,N&&this.fire(new _.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const L=this._updateRetainedTiles(g,b);if(Ce(this._source.type)){const ie={},te={},ve=Object.keys(L),Fe=_.exported.now();for(const Pe of ve){const Ne=L[Pe],Be=this._tiles[Pe];if(!Be||0!==Be.fadeEndTime&&Be.fadeEndTime<=Fe)continue;const at=this.findLoadedParent(Ne,E);at&&(this._addTile(at.tileID),ie[at.tileID.key]=at.tileID),te[Pe]=Ne}this._retainLoadedChildren(te,b,P,L);for(const Pe in ie)L[Pe]||(this._coveredTiles[Pe]=!0,L[Pe]=ie[Pe]);if(d){const Pe={},Ne={};for(const Be of g)this._tiles[Be.key].hasData()?Pe[Be.key]=Be:Ne[Be.key]=Be;for(const Be in Ne){const at=Ne[Be].children(this._source.maxzoom);this._tiles[at[0].key]&&this._tiles[at[1].key]&&this._tiles[at[2].key]&&this._tiles[at[3].key]&&(Pe[at[0].key]=L[at[0].key]=at[0],Pe[at[1].key]=L[at[1].key]=at[1],Pe[at[2].key]=L[at[2].key]=at[2],Pe[at[3].key]=L[at[3].key]=at[3],delete Ne[Be])}for(const Be in Ne){const at=this.findLoadedParent(Ne[Be],this._source.minzoom);if(at){Pe[at.tileID.key]=L[at.tileID.key]=at.tileID;for(const Et in Pe)Pe[Et].isChildOf(at.tileID)&&delete Pe[Et]}}for(const Be in this._tiles)Pe[Be]||(this._coveredTiles[Be]=!0)}}for(const ie in L)this._tiles[ie].clearFadeHold();const G=_.keysDifference(this._tiles,L);for(const ie of G){const te=this._tiles[ie];te.hasSymbolBuckets&&!te.holdingForFade()?te.setHoldDuration(this.map._fadeDuration):te.hasSymbolBuckets&&!te.symbolFadeFinished()||this._removeTile(ie)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,d){const g={},b={},E=Math.max(d-nn.maxOverzooming,this._source.minzoom),P=Math.max(d+nn.maxUnderzooming,this._source.minzoom),N={};for(const L of n){const G=this._addTile(L);g[L.key]=L,G.hasData()||d<this._source.maxzoom&&(N[L.key]=L)}this._retainLoadedChildren(N,d,P,g);for(const L of n){let G=this._tiles[L.key];if(G.hasData())continue;if(d+1>this._source.maxzoom){const te=L.children(this._source.maxzoom)[0],ve=this.getTile(te);if(ve&&ve.hasData()){g[te.key]=te;continue}}else{const te=L.children(this._source.maxzoom);if(g[te[0].key]&&g[te[1].key]&&g[te[2].key]&&g[te[3].key])continue}let ie=G.wasRequested();for(let te=L.overscaledZ-1;te>=E;--te){const ve=L.scaledTo(te);if(b[ve.key])break;if(b[ve.key]=!0,G=this.getTile(ve),!G&&ie&&(G=this._addTile(ve)),G){const Fe=G.hasData();if((ie||Fe)&&(g[ve.key]=ve),ie=G.wasRequested(),Fe)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const d=[];let g,b=this._tiles[n].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){g=this._loadedParentTiles[b.key];break}d.push(b.key);const E=b.scaledTo(b.overscaledZ-1);if(g=this._getLoadedTile(E),g)break;b=E}for(const E of d)this._loadedParentTiles[E]=g}}_addTile(n){let d=this._tiles[n.key];if(d)return d;d=this._cache.getAndRemove(n),d&&(this._setTileReloadTimer(n.key,d),d.tileID=n,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,d)));const g=d;return d||(d=new _i(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,n.key,d.state))),d.uses++,this._tiles[n.key]=d,g||this._source.fire(new _.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(n,d){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const g=d.getExpiryTimeout();g&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},g))}_removeTile(n){const d=this._tiles[n];d&&(d.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),d.uses>0||(d.hasData()&&"reloading"!==d.state?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,d,g){const b=[],E=this.transform;if(!E)return b;const P=g?E.getCameraQueryGeometry(n):n,N=n.map(Pe=>E.pointCoordinate(Pe,this.terrain)),L=P.map(Pe=>E.pointCoordinate(Pe,this.terrain)),G=this.getIds();let ie=1/0,te=1/0,ve=-1/0,Fe=-1/0;for(const Pe of L)ie=Math.min(ie,Pe.x),te=Math.min(te,Pe.y),ve=Math.max(ve,Pe.x),Fe=Math.max(Fe,Pe.y);for(let Pe=0;Pe<G.length;Pe++){const Ne=this._tiles[G[Pe]];if(Ne.holdingForFade())continue;const Be=Ne.tileID,at=Math.pow(2,E.zoom-Ne.tileID.overscaledZ),Et=d*Ne.queryPadding*_.EXTENT/Ne.tileSize/at,He=[Be.getTilePoint(new _.MercatorCoordinate(ie,te)),Be.getTilePoint(new _.MercatorCoordinate(ve,Fe))];if(He[0].x-Et<_.EXTENT&&He[0].y-Et<_.EXTENT&&He[1].x+Et>=0&&He[1].y+Et>=0){const bt=N.map(ii=>Be.getTilePoint(ii)),Rt=L.map(ii=>Be.getTilePoint(ii));b.push({tile:Ne,tileID:Be,queryGeometry:bt,cameraQueryGeometry:Rt,scale:at})}}return b}getVisibleCoordinates(n){const d=this.getRenderableIds(n).map(g=>this._tiles[g].tileID);for(const g of d)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(Ce(this._source.type)){const n=_.exported.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=n)return!0}return!1}setFeatureState(n,d,g){this._state.updateState(n=n||"_geojsonTileLayer",d,g)}removeFeatureState(n,d,g){this._state.removeFeatureState(n=n||"_geojsonTileLayer",d,g)}getFeatureState(n,d){return this._state.getState(n=n||"_geojsonTileLayer",d)}setDependencies(n,d,g){const b=this._tiles[n];b&&b.setDependencies(d,g)}reloadTilesForDependencies(n,d){for(const g in this._tiles)this._tiles[g].hasDependency(n,d)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(n,d))}}function Pt(v,n){const d=Math.abs(2*v.wrap)-+(v.wrap<0),g=Math.abs(2*n.wrap)-+(n.wrap<0);return v.overscaledZ-n.overscaledZ||g-d||n.canonical.y-v.canonical.y||n.canonical.x-v.canonical.x}function Ce(v){return"raster"===v||"image"===v||"video"===v}nn.maxOverzooming=10,nn.maxUnderzooming=3;const Ee="mapboxgl_preloaded_worker_pool";class st{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<st.workerCount;)this.workers.push(new Worker(_.config.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ee]}numActive(){return Object.keys(this.active).length}}const xt=Math.floor(_.exported.hardwareConcurrency/2);let Nt;function nt(){return Nt||(Nt=new st),Nt}st.workerCount=_.isSafari(globalThis)?Math.max(Math.min(xt,3),1):1;class De{constructor(n,d){this.reset(n,d)}reset(n,d){this.points=n||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(1===this.points.length)return this.points[0];n=_.clamp(n,0,1);let d=1,g=this._distances[d];const b=n*this.paddedLength+this.padding;for(;g<b&&d<this._distances.length;)g=this._distances[++d];const E=d-1,P=this._distances[E],N=g-P,L=N>0?(b-P)/N:0;return this.points[E].mult(1-L).add(this.points[d].mult(L))}}function be(v,n){let d=!0;return"always"===v||"never"!==v&&"never"!==n||(d=!1),d}class _e{constructor(n,d,g){const b=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(n/g),this.yCellCount=Math.ceil(d/g);for(let P=0;P<this.xCellCount*this.yCellCount;P++)b.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=d,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,d,g,b,E){this._forEachCell(d,g,b,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(E)}insertCircle(n,d,g,b){this._forEachCell(d-b,g-b,d+b,g+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(d),this.circles.push(g),this.circles.push(b)}_insertBoxCell(n,d,g,b,E,P){this.boxCells[E].push(P)}_insertCircleCell(n,d,g,b,E,P){this.circleCells[E].push(P)}_query(n,d,g,b,E,P,N){if(g<0||n>this.width||b<0||d>this.height)return[];const L=[];if(n<=0&&d<=0&&this.width<=g&&this.height<=b){if(E)return[{key:null,x1:n,y1:d,x2:g,y2:b}];for(let G=0;G<this.boxKeys.length;G++)L.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const ie=this.circles[3*G],te=this.circles[3*G+1],ve=this.circles[3*G+2];L.push({key:this.circleKeys[G],x1:ie-ve,y1:te-ve,x2:ie+ve,y2:te+ve})}}else this._forEachCell(n,d,g,b,this._queryCell,L,{hitTest:E,overlapMode:P,seenUids:{box:{},circle:{}}},N);return L}query(n,d,g,b){return this._query(n,d,g,b,!1,null)}hitTest(n,d,g,b,E,P){return this._query(n,d,g,b,!0,E,P).length>0}hitTestCircle(n,d,g,b,E){const P=n-g,N=n+g,L=d-g,G=d+g;if(N<0||P>this.width||G<0||L>this.height)return!1;const ie=[];return this._forEachCell(P,L,N,G,this._queryCellCircle,ie,{hitTest:!0,overlapMode:b,circle:{x:n,y:d,radius:g},seenUids:{box:{},circle:{}}},E),ie.length>0}_queryCell(n,d,g,b,E,P,N,L){const{seenUids:G,hitTest:ie,overlapMode:te}=N,ve=this.boxCells[E];if(null!==ve){const Pe=this.bboxes;for(const Ne of ve)if(!G.box[Ne]){G.box[Ne]=!0;const Be=4*Ne,at=this.boxKeys[Ne];if(n<=Pe[Be+2]&&d<=Pe[Be+3]&&g>=Pe[Be+0]&&b>=Pe[Be+1]&&(!L||L(at))&&(!ie||!be(te,at.overlapMode))&&(P.push({key:at,x1:Pe[Be],y1:Pe[Be+1],x2:Pe[Be+2],y2:Pe[Be+3]}),ie))return!0}}const Fe=this.circleCells[E];if(null!==Fe){const Pe=this.circles;for(const Ne of Fe)if(!G.circle[Ne]){G.circle[Ne]=!0;const Be=3*Ne,at=this.circleKeys[Ne];if(this._circleAndRectCollide(Pe[Be],Pe[Be+1],Pe[Be+2],n,d,g,b)&&(!L||L(at))&&(!ie||!be(te,at.overlapMode))){const Et=Pe[Be],He=Pe[Be+1],bt=Pe[Be+2];if(P.push({key:at,x1:Et-bt,y1:He-bt,x2:Et+bt,y2:He+bt}),ie)return!0}}}return!1}_queryCellCircle(n,d,g,b,E,P,N,L){const{circle:G,seenUids:ie,overlapMode:te}=N,ve=this.boxCells[E];if(null!==ve){const Pe=this.bboxes;for(const Ne of ve)if(!ie.box[Ne]){ie.box[Ne]=!0;const Be=4*Ne,at=this.boxKeys[Ne];if(this._circleAndRectCollide(G.x,G.y,G.radius,Pe[Be+0],Pe[Be+1],Pe[Be+2],Pe[Be+3])&&(!L||L(at))&&!be(te,at.overlapMode))return P.push(!0),!0}}const Fe=this.circleCells[E];if(null!==Fe){const Pe=this.circles;for(const Ne of Fe)if(!ie.circle[Ne]){ie.circle[Ne]=!0;const Be=3*Ne,at=this.circleKeys[Ne];if(this._circlesCollide(Pe[Be],Pe[Be+1],Pe[Be+2],G.x,G.y,G.radius)&&(!L||L(at))&&!be(te,at.overlapMode))return P.push(!0),!0}}}_forEachCell(n,d,g,b,E,P,N,L){const G=this._convertToXCellCoord(n),ie=this._convertToYCellCoord(d),te=this._convertToXCellCoord(g),ve=this._convertToYCellCoord(b);for(let Fe=G;Fe<=te;Fe++)for(let Pe=ie;Pe<=ve;Pe++)if(E.call(this,n,d,g,b,this.xCellCount*Pe+Fe,P,N,L))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,d,g,b,E,P){const N=b-n,L=E-d,G=g+P;return G*G>N*N+L*L}_circleAndRectCollide(n,d,g,b,E,P,N){const L=(P-b)/2,G=Math.abs(n-(b+L));if(G>L+g)return!1;const ie=(N-E)/2,te=Math.abs(d-(E+ie));if(te>ie+g)return!1;if(G<=L||te<=ie)return!0;const ve=G-L,Fe=te-ie;return ve*ve+Fe*Fe<=g*g}}function Qe(v,n,d,g,b){const E=_.create();return n?(_.scale(E,E,[1/b,1/b,1]),d||_.rotateZ(E,E,g.angle)):_.multiply(E,g.labelPlaneMatrix,v),E}function ze(v,n,d,g,b){if(n){const E=_.clone(v);return _.scale(E,E,[b,b,1]),d||_.rotateZ(E,E,-g.angle),E}return g.glCoordMatrix}function et(v,n,d){let g;d?(g=[v.x,v.y,d(v.x,v.y),1],_.transformMat4(g,g,n)):(g=[v.x,v.y,0,1],Ie(g,g,n));const b=g[3];return{point:new _.Point(g[0]/b,g[1]/b),signedDistanceFromCamera:b}}function Ei(v,n){return.5+v/n*.5}function li(v,n){const d=v[0]/v[3],g=v[1]/v[3];return d>=-n[0]&&d<=n[0]&&g>=-n[1]&&g<=n[1]}function qi(v,n,d,g,b,E,P,N,L,G){const ie=g?v.textSizeData:v.iconSizeData,te=_.evaluateSizeForZoom(ie,d.transform.zoom),ve=[256/d.width*2+1,256/d.height*2+1],Fe=g?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Fe.clear();const Pe=v.lineVertexArray,Ne=g?v.text.placedSymbolArray:v.icon.placedSymbolArray,Be=d.transform.width/d.transform.height;let at=!1;for(let Et=0;Et<Ne.length;Et++){const He=Ne.get(Et);if(He.hidden||He.writingMode===_.WritingMode.vertical&&!at){fe(He.numGlyphs,Fe);continue}let bt;if(at=!1,G?(bt=[He.anchorX,He.anchorY,G(He.anchorX,He.anchorY),1],_.transformMat4(bt,bt,n)):(bt=[He.anchorX,He.anchorY,0,1],Ie(bt,bt,n)),!li(bt,ve)){fe(He.numGlyphs,Fe);continue}const Rt=Ei(d.transform.cameraToCenterDistance,bt[3]),ii=_.evaluateSizeForFeature(ie,te,He),I=P?ii/Rt:ii*Rt,A=new _.Point(He.anchorX,He.anchorY),D=et(A,b,G).point,F={projections:{},offsets:{}},Z=Se(He,I,!1,N,n,b,E,v.glyphOffsetArray,Pe,Fe,D,A,F,Be,L,G);at=Z.useVertical,(Z.notEnoughRoom||at||Z.needsFlipping&&Se(He,I,!0,N,n,b,E,v.glyphOffsetArray,Pe,Fe,D,A,F,Be,L,G).notEnoughRoom)&&fe(He.numGlyphs,Fe)}g?v.text.dynamicLayoutVertexBuffer.updateData(Fe):v.icon.dynamicLayoutVertexBuffer.updateData(Fe)}function Li(v,n,d,g,b,E,P,N,L,G,ie,te,ve){const Fe=N.glyphStartIndex+N.numGlyphs,Pe=N.lineStartIndex,Ne=N.lineStartIndex+N.lineLength,Be=n.getoffsetX(N.glyphStartIndex),at=n.getoffsetX(Fe-1),Et=U(v*Be,d,g,b,E,P,N.segment,Pe,Ne,L,G,ie,te,ve);if(!Et)return null;const He=U(v*at,d,g,b,E,P,N.segment,Pe,Ne,L,G,ie,te,ve);return He?{first:Et,last:He}:null}function pn(v,n,d,g){return v===_.WritingMode.horizontal&&Math.abs(d.y-n.y)>Math.abs(d.x-n.x)*g?{useVertical:!0}:(v===_.WritingMode.vertical?n.y<d.y:n.x>d.x)?{needsFlipping:!0}:null}function Se(v,n,d,g,b,E,P,N,L,G,ie,te,ve,Fe,Pe,Ne){const Be=n/24,at=v.lineOffsetX*Be,Et=v.lineOffsetY*Be;let He;if(v.numGlyphs>1){const bt=v.glyphStartIndex+v.numGlyphs,Rt=v.lineStartIndex,ii=v.lineStartIndex+v.lineLength,I=Li(Be,N,at,Et,d,ie,te,v,L,E,ve,Pe,Ne);if(!I)return{notEnoughRoom:!0};const A=et(I.first.point,P,Ne).point,D=et(I.last.point,P,Ne).point;if(g&&!d){const F=pn(v.writingMode,A,D,Fe);if(F)return F}He=[I.first];for(let F=v.glyphStartIndex+1;F<bt-1;F++)He.push(U(Be*N.getoffsetX(F),at,Et,d,ie,te,v.segment,Rt,ii,L,E,ve,Pe,Ne));He.push(I.last)}else{if(g&&!d){const Rt=et(te,b,Ne).point,ii=v.lineStartIndex+v.segment+1,I=new _.Point(L.getx(ii),L.gety(ii)),A=et(I,b,Ne),D=A.signedDistanceFromCamera>0?A.point:re(te,I,Rt,1,b,Ne),F=pn(v.writingMode,Rt,D,Fe);if(F)return F}const bt=U(Be*N.getoffsetX(v.glyphStartIndex),at,Et,d,ie,te,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,L,E,ve,Pe,Ne);if(!bt)return{notEnoughRoom:!0};He=[bt]}for(const bt of He)_.addDynamicAttributes(G,bt.point,bt.angle);return{}}function re(v,n,d,g,b,E){const P=et(v.add(v.sub(n)._unit()),b,E).point,N=d.sub(P);return d.add(N._mult(g/N.mag()))}function me(v,n){const{projectionCache:d,lineVertexArray:g,labelPlaneMatrix:b,tileAnchorPoint:E,distanceFromAnchor:P,getElevation:N,previousVertex:L,direction:G,absOffsetX:ie}=n;if(d.projections[v])return d.projections[v];const te=new _.Point(g.getx(v),g.gety(v)),ve=et(te,b,N);if(ve.signedDistanceFromCamera>0)return d.projections[v]=ve.point,ve.point;const Fe=v-G;return re(0===P?E:new _.Point(g.getx(Fe),g.gety(Fe)),te,L,ie-P+1,b,N)}function K(v,n,d){return v._unit()._perp()._mult(n*d)}function V(v,n,d,g,b,E,P,N){const{projectionCache:L,direction:G}=N;if(L.offsets[v])return L.offsets[v];const ie=d.add(n);if(v+G<g||v+G>=b)return L.offsets[v]=ie,ie;const te=me(v+G,N),ve=K(te.sub(d),P,G),Fe=d.add(ve),Pe=te.add(ve);return L.offsets[v]=_.findLineIntersection(E,ie,Fe,Pe)||ie,L.offsets[v]}function U(v,n,d,g,b,E,P,N,L,G,ie,te,ve,Fe){const Pe=g?v-n:v+n;let Ne=Pe>0?1:-1,Be=0;g&&(Ne*=-1,Be=Math.PI),Ne<0&&(Be+=Math.PI);let at,Et,He=Ne>0?N+P:N+P+1,bt=b,Rt=b,ii=0,I=0;const A=Math.abs(Pe),D=[];let F;for(;ii+I<=A;){if(He+=Ne,He<N||He>=L)return null;ii+=I,Rt=bt,Et=at;const le={projectionCache:te,lineVertexArray:G,labelPlaneMatrix:ie,tileAnchorPoint:E,distanceFromAnchor:ii,getElevation:Fe,previousVertex:Rt,direction:Ne,absOffsetX:A};if(bt=me(He,le),0===d)D.push(Rt),F=bt.sub(Rt);else{let Ke;const ut=bt.sub(Rt);Ke=0===ut.mag()?K(me(He+Ne,le).sub(bt),d,Ne):K(ut,d,Ne),Et||(Et=Rt.add(Ke)),at=V(He,Ke,bt,N,L,Et,d,le),D.push(Et),F=at.sub(Et)}I=F.mag()}const Z=F._mult((A-ii)/I)._add(Et||Rt),ue=Be+Math.atan2(bt.y-Rt.y,bt.x-Rt.x);return D.push(Z),{point:Z,angle:ve?ue:0,path:D}}const ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function fe(v,n){for(let d=0;d<v;d++){const g=n.length;n.resize(g+4),n.float32.set(ce,3*g)}}function Ie(v,n,d){const g=n[0],b=n[1];return v[0]=d[0]*g+d[4]*b+d[12],v[1]=d[1]*g+d[5]*b+d[13],v[3]=d[3]*g+d[7]*b+d[15],v}const We=100;class St{constructor(n,d=new _e(n.width+200,n.height+200,25),g=new _e(n.width+200,n.height+200,25)){this.transform=n,this.grid=d,this.ignoredGrid=g,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+We,this.screenBottomBoundary=n.height+We,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,d,g,b,E,P){const N=this.projectAndGetPerspectiveRatio(b,n.anchorPointX,n.anchorPointY,P),L=g*N.perspectiveRatio,G=n.x1*L+N.point.x,ie=n.y1*L+N.point.y,te=n.x2*L+N.point.x,ve=n.y2*L+N.point.y;return!this.isInsideGrid(G,ie,te,ve)||"always"!==d&&this.grid.hitTest(G,ie,te,ve,d,E)||N.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[G,ie,te,ve],offscreen:this.isOffscreen(G,ie,te,ve)}}placeCollisionCircles(n,d,g,b,E,P,N,L,G,ie,te,ve,Fe,Pe){const Ne=[],Be=new _.Point(d.anchorX,d.anchorY),at=et(Be,P,Pe),Et=Ei(this.transform.cameraToCenterDistance,at.signedDistanceFromCamera),He=(ie?E/Et:E*Et)/_.ONE_EM,bt=et(Be,N,Pe).point,Rt=Li(He,b,d.lineOffsetX*He,d.lineOffsetY*He,!1,bt,Be,d,g,N,{projections:{},offsets:{}},!1,Pe);let ii=!1,I=!1,A=!0;if(Rt){const D=.5*ve*Et+Fe,F=new _.Point(-100,-100),Z=new _.Point(this.screenRightBoundary,this.screenBottomBoundary),ue=new De,le=Rt.first,Ke=Rt.last;let ut=[];for(let Hi=le.path.length-1;Hi>=1;Hi--)ut.push(le.path[Hi]);for(let Hi=1;Hi<Ke.path.length;Hi++)ut.push(Ke.path[Hi]);const di=2.5*D;if(L){const Hi=ut.map(Wi=>et(Wi,L,Pe));ut=Hi.some(Wi=>Wi.signedDistanceFromCamera<=0)?[]:Hi.map(Wi=>Wi.point)}let vi=[];if(ut.length>0){const Hi=ut[0].clone(),Wi=ut[0].clone();for(let kn=1;kn<ut.length;kn++)Hi.x=Math.min(Hi.x,ut[kn].x),Hi.y=Math.min(Hi.y,ut[kn].y),Wi.x=Math.max(Wi.x,ut[kn].x),Wi.y=Math.max(Wi.y,ut[kn].y);vi=Hi.x>=F.x&&Wi.x<=Z.x&&Hi.y>=F.y&&Wi.y<=Z.y?[ut]:Wi.x<F.x||Hi.x>Z.x||Wi.y<F.y||Hi.y>Z.y?[]:_.clipLine([ut],F.x,F.y,Z.x,Z.y)}for(const Hi of vi){ue.reset(Hi,.25*D);let Wi=0;Wi=ue.length<=.5*D?1:Math.ceil(ue.paddedLength/di)+1;for(let kn=0;kn<Wi;kn++){const Tr=kn/Math.max(Wi-1,1),ur=ue.lerp(Tr),rr=ur.x+We,Io=ur.y+We;Ne.push(rr,Io,D,0);const yo=rr-D,$o=Io-D,uo=rr+D,Qs=Io+D;if(A=A&&this.isOffscreen(yo,$o,uo,Qs),I=I||this.isInsideGrid(yo,$o,uo,Qs),"always"!==n&&this.grid.hitTestCircle(rr,Io,D,n,te)&&(ii=!0,!G))return{circles:[],offscreen:!1,collisionDetected:ii}}}}return{circles:!G&&ii||!I||Et<this.perspectiveRatioCutoff?[]:Ne,offscreen:A,collisionDetected:ii}}queryRenderedSymbols(n){if(0===n.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let g=1/0,b=1/0,E=-1/0,P=-1/0;for(const ie of n){const te=new _.Point(ie.x+We,ie.y+We);g=Math.min(g,te.x),b=Math.min(b,te.y),E=Math.max(E,te.x),P=Math.max(P,te.y),d.push(te)}const N=this.grid.query(g,b,E,P).concat(this.ignoredGrid.query(g,b,E,P)),L={},G={};for(const ie of N){const te=ie.key;if(void 0===L[te.bucketInstanceId]&&(L[te.bucketInstanceId]={}),L[te.bucketInstanceId][te.featureIndex])continue;const ve=[new _.Point(ie.x1,ie.y1),new _.Point(ie.x2,ie.y1),new _.Point(ie.x2,ie.y2),new _.Point(ie.x1,ie.y2)];_.polygonIntersectsPolygon(d,ve)&&(L[te.bucketInstanceId][te.featureIndex]=!0,void 0===G[te.bucketInstanceId]&&(G[te.bucketInstanceId]=[]),G[te.bucketInstanceId].push(te.featureIndex))}return G}insertCollisionBox(n,d,g,b,E,P){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:E,collisionGroupID:P,overlapMode:d},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,d,g,b,E,P){const N=g?this.ignoredGrid:this.grid,L={bucketInstanceId:b,featureIndex:E,collisionGroupID:P,overlapMode:d};for(let G=0;G<n.length;G+=4)N.insertCircle(L,n[G],n[G+1],n[G+2])}projectAndGetPerspectiveRatio(n,d,g,b){let E;return b?(E=[d,g,b(d,g),1],_.transformMat4(E,E,n)):(E=[d,g,0,1],Ie(E,E,n)),{point:new _.Point((E[0]/E[3]+1)/2*this.transform.width+We,(-E[1]/E[3]+1)/2*this.transform.height+We),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}}isOffscreen(n,d,g,b){return g<We||n>=this.screenRightBoundary||b<We||d>this.screenBottomBoundary}isInsideGrid(n,d,g,b){return g>=0&&n<this.gridRightBoundary&&b>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const n=_.identity([]);return _.translate(n,n,[-100,-100,0]),n}}function vt(v,n,d){return n*(_.EXTENT/(v.tileSize*Math.pow(2,d-v.tileID.overscaledZ)))}class Tt{constructor(n,d,g,b){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?d:-d))):b&&g?1:0,this.placed=g}isHidden(){return 0===this.opacity&&!this.placed}}class ni{constructor(n,d,g,b,E){this.text=new Tt(n?n.text:null,d,g,E),this.icon=new Tt(n?n.icon:null,d,b,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class it{constructor(n,d,g){this.text=n,this.icon=d,this.skipFade=g}}class ae{constructor(){this.invProjMatrix=_.create(),this.viewportMatrix=_.create(),this.circles=[]}}class Y{constructor(n,d,g,b,E){this.bucketInstanceId=n,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=b,this.tileID=E}}class Q{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const d=++this.maxGroupID;this.collisionGroups[n]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[n]}}function xe(v,n,d,g,b){const{horizontalAlign:E,verticalAlign:P}=_.getAnchorAlignment(v),N=-(E-.5)*n,L=-(P-.5)*d,G=_.evaluateVariableOffset(v,g);return new _.Point(N+G[0]*b,L+G[1]*b)}function Re(v,n,d,g,b,E){const{x1:P,x2:N,y1:L,y2:G,anchorPointX:ie,anchorPointY:te}=v,ve=new _.Point(n,d);return g&&ve._rotate(b?E:-E),{x1:P+ve.x,y1:L+ve.y,x2:N+ve.x,y2:G+ve.y,anchorPointX:ie,anchorPointY:te}}class ht{constructor(n,d,g,b,E){this.transform=n.clone(),this.terrain=d,this.collisionIndex=new St(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Q(b),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,d,g,b){const E=g.getBucket(d),P=g.latestFeatureIndex;if(!E||!P||d.id!==E.layerIds[0])return;const N=g.collisionBoxArray,L=E.layers[0].layout,G=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),ie=g.tileSize/_.EXTENT,te=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),ve="map"===L.get("text-pitch-alignment"),Fe="map"===L.get("text-rotation-alignment"),Pe=vt(g,1,this.transform.zoom),Ne=Qe(te,ve,Fe,this.transform,Pe);let Be=null;if(ve){const Et=ze(te,ve,Fe,this.transform,Pe);Be=_.multiply([],this.transform.labelPlaneMatrix,Et)}this.retainedQueryData[E.bucketInstanceId]=new Y(E.bucketInstanceId,P,E.sourceLayerIndex,E.index,g.tileID);const at={bucket:E,layout:L,posMatrix:te,textLabelPlaneMatrix:Ne,labelToScreenMatrix:Be,scale:G,textPixelRatio:ie,holdingForFade:g.holdingForFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:_.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(b)for(const Et of E.sortKeyRanges){const{sortKey:He,symbolInstanceStart:bt,symbolInstanceEnd:Rt}=Et;n.push({sortKey:He,symbolInstanceStart:bt,symbolInstanceEnd:Rt,parameters:at})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:at})}attemptAnchorPlacement(n,d,g,b,E,P,N,L,G,ie,te,ve,Fe,Pe,Ne,Be){const at=[ve.textOffset0,ve.textOffset1],Et=xe(n,g,b,at,E),He=this.collisionIndex.placeCollisionBox(Re(d,Et.x,Et.y,P,N,this.transform.angle),te,L,G,ie.predicate,Be);if((!Ne||0!==this.collisionIndex.placeCollisionBox(Re(Ne,Et.x,Et.y,P,N,this.transform.angle),te,L,G,ie.predicate,Be).box.length)&&He.box.length>0){let bt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ve.crossTileID]&&this.prevPlacement.placements[ve.crossTileID]&&this.prevPlacement.placements[ve.crossTileID].text&&(bt=this.prevPlacement.variableOffsets[ve.crossTileID].anchor),0===ve.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ve.crossTileID]={textOffset:at,width:g,height:b,anchor:n,textBoxScale:E,prevAnchor:bt},this.markUsedJustification(Fe,n,ve,Pe),Fe.allowVerticalPlacement&&(this.markUsedOrientation(Fe,Pe,ve),this.placedOrientations[ve.crossTileID]=Pe),{shift:Et,placedGlyphBoxes:He}}}placeLayerBucketPart(n,d,g){const{bucket:b,layout:E,posMatrix:P,textLabelPlaneMatrix:N,labelToScreenMatrix:L,textPixelRatio:G,holdingForFade:ie,collisionBoxArray:te,partiallyEvaluatedTextSize:ve,collisionGroup:Fe}=n.parameters,Pe=E.get("text-optional"),Ne=E.get("icon-optional"),Be=_.getOverlapMode(E,"text-overlap","text-allow-overlap"),at="always"===Be,Et=_.getOverlapMode(E,"icon-overlap","icon-allow-overlap"),He="always"===Et,bt="map"===E.get("text-rotation-alignment"),Rt="map"===E.get("text-pitch-alignment"),ii="none"!==E.get("icon-text-fit"),I="viewport-y"===E.get("symbol-z-order"),A=at&&(He||!b.hasIconData()||Ne),D=He&&(at||!b.hasTextData()||Pe);!b.collisionArrays&&te&&b.deserializeCollisionBoxes(te);const F=this.retainedQueryData[b.bucketInstanceId].tileID,Z=this.terrain?(le,Ke)=>this.terrain.getElevation(F,le,Ke):null,ue=(le,Ke)=>{if(d[le.crossTileID])return;if(ie)return void(this.placements[le.crossTileID]=new it(!1,!1,!1));let ut=!1,di=!1,vi=!0,Hi=null,Wi={box:null,offscreen:null},kn={box:null,offscreen:null},Tr=null,ur=null,rr=null,Io=0,yo=0,$o=0;Ke.textFeatureIndex?Io=Ke.textFeatureIndex:le.useRuntimeCollisionCircles&&(Io=le.featureIndex),Ke.verticalTextFeatureIndex&&(yo=Ke.verticalTextFeatureIndex);const uo=Ke.textBox;if(uo){const wr=Nn=>{let $r=_.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Nn&&this.prevPlacement){const no=this.prevPlacement.placedOrientations[le.crossTileID];no&&(this.placedOrientations[le.crossTileID]=no,$r=no,this.markUsedOrientation(b,$r,le))}return $r},ho=(Nn,$r)=>{if(b.allowVerticalPlacement&&le.numVerticalGlyphVertices>0&&Ke.verticalTextBox){for(const no of b.writingModes)if(no===_.WritingMode.vertical?(Wi=$r(),kn=Wi):Wi=Nn(),Wi&&Wi.box&&Wi.box.length)break}else Wi=Nn()};if(E.get("text-variable-anchor")){let Nn=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]){const Kn=this.prevPlacement.variableOffsets[le.crossTileID];Nn.indexOf(Kn.anchor)>0&&(Nn=Nn.filter(ro=>ro!==Kn.anchor),Nn.unshift(Kn.anchor))}const $r=(Kn,ro,vo)=>{const al=Kn.x2-Kn.x1,ea=Kn.y2-Kn.y1,im=le.textBoxScale,id=ii&&"never"===Et?ro:null;let Ir={box:[],offscreen:!1};const nd="never"!==Be?2*Nn.length:Nn.length;for(let dc=0;dc<nd;++dc){const Za=this.attemptAnchorPlacement(Nn[dc%Nn.length],Kn,al,ea,im,bt,Rt,G,P,Fe,dc>=Nn.length?Be:"never",le,b,vo,id,Z);if(Za&&(Ir=Za.placedGlyphBoxes,Ir&&Ir.box&&Ir.box.length)){ut=!0,Hi=Za.shift;break}}return Ir};ho(()=>$r(uo,Ke.iconBox,_.WritingMode.horizontal),()=>{const Kn=Ke.verticalTextBox;return b.allowVerticalPlacement&&!(Wi&&Wi.box&&Wi.box.length)&&le.numVerticalGlyphVertices>0&&Kn?$r(Kn,Ke.verticalIconBox,_.WritingMode.vertical):{box:null,offscreen:null}}),Wi&&(ut=Wi.box,vi=Wi.offscreen);const no=wr(Wi&&Wi.box);if(!ut&&this.prevPlacement){const Kn=this.prevPlacement.variableOffsets[le.crossTileID];Kn&&(this.variableOffsets[le.crossTileID]=Kn,this.markUsedJustification(b,Kn.anchor,le,no))}}else{const Nn=($r,no)=>{const Kn=this.collisionIndex.placeCollisionBox($r,Be,G,P,Fe.predicate,Z);return Kn&&Kn.box&&Kn.box.length&&(this.markUsedOrientation(b,no,le),this.placedOrientations[le.crossTileID]=no),Kn};ho(()=>Nn(uo,_.WritingMode.horizontal),()=>{const $r=Ke.verticalTextBox;return b.allowVerticalPlacement&&le.numVerticalGlyphVertices>0&&$r?Nn($r,_.WritingMode.vertical):{box:null,offscreen:null}}),wr(Wi&&Wi.box&&Wi.box.length)}}if(Tr=Wi,ut=Tr&&Tr.box&&Tr.box.length>0,vi=Tr&&Tr.offscreen,le.useRuntimeCollisionCircles){const wr=b.text.placedSymbolArray.get(le.centerJustifiedTextSymbolIndex),ho=_.evaluateSizeForFeature(b.textSizeData,ve,wr),Nn=E.get("text-padding");ur=this.collisionIndex.placeCollisionCircles(Be,wr,b.lineVertexArray,b.glyphOffsetArray,ho,P,N,L,g,Rt,Fe.predicate,le.collisionCircleDiameter,Nn,Z),ur.circles.length&&ur.collisionDetected&&!g&&_.warnOnce("Collisions detected, but collision boxes are not shown"),ut=at||ur.circles.length>0&&!ur.collisionDetected,vi=vi&&ur.offscreen}if(Ke.iconFeatureIndex&&($o=Ke.iconFeatureIndex),Ke.iconBox){const wr=ho=>{const Nn=ii&&Hi?Re(ho,Hi.x,Hi.y,bt,Rt,this.transform.angle):ho;return this.collisionIndex.placeCollisionBox(Nn,Et,G,P,Fe.predicate,Z)};kn&&kn.box&&kn.box.length&&Ke.verticalIconBox?(rr=wr(Ke.verticalIconBox),di=rr.box.length>0):(rr=wr(Ke.iconBox),di=rr.box.length>0),vi=vi&&rr.offscreen}const Qs=Pe||0===le.numHorizontalGlyphVertices&&0===le.numVerticalGlyphVertices,Ga=Ne||0===le.numIconVertices;if(Qs||Ga?Ga?Qs||(di=di&&ut):ut=di&&ut:di=ut=di&&ut,ut&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,Be,E.get("text-ignore-placement"),b.bucketInstanceId,kn&&kn.box&&yo?yo:Io,Fe.ID),di&&rr&&this.collisionIndex.insertCollisionBox(rr.box,Et,E.get("icon-ignore-placement"),b.bucketInstanceId,$o,Fe.ID),ur&&(ut&&this.collisionIndex.insertCollisionCircles(ur.circles,Be,E.get("text-ignore-placement"),b.bucketInstanceId,Io,Fe.ID),g)){const wr=b.bucketInstanceId;let ho=this.collisionCircleArrays[wr];void 0===ho&&(ho=this.collisionCircleArrays[wr]=new ae);for(let Nn=0;Nn<ur.circles.length;Nn+=4)ho.circles.push(ur.circles[Nn+0]),ho.circles.push(ur.circles[Nn+1]),ho.circles.push(ur.circles[Nn+2]),ho.circles.push(ur.collisionDetected?1:0)}if(0===le.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===b.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[le.crossTileID]=new it(ut||A,di||D,vi||b.justReloaded),d[le.crossTileID]=!0};if(I){if(0!==n.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const le=b.getSortedSymbolIndexes(this.transform.angle);for(let Ke=le.length-1;Ke>=0;--Ke){const ut=le[Ke];ue(b.symbolInstances.get(ut),b.collisionArrays[ut])}}else for(let le=n.symbolInstanceStart;le<n.symbolInstanceEnd;le++)ue(b.symbolInstances.get(le),b.collisionArrays[le]);if(g&&b.bucketInstanceId in this.collisionCircleArrays){const le=this.collisionCircleArrays[b.bucketInstanceId];_.invert(le.invProjMatrix,P),le.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(n,d,g,b){let E;E=b===_.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[_.getAnchorJustification(d)];const P=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const N of P)N>=0&&(n.text.placedSymbolArray.get(N).crossTileID=E>=0&&N!==E?0:g.crossTileID)}markUsedOrientation(n,d,g){const b=d===_.WritingMode.horizontal||d===_.WritingMode.horizontalOnly?d:0,E=d===_.WritingMode.vertical?d:0,P=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const N of P)n.text.placedSymbolArray.get(N).placedOrientation=b;g.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const b=d?d.symbolFadeChange(n):1,E=d?d.opacities:{},P=d?d.variableOffsets:{},N=d?d.placedOrientations:{};for(const L in this.placements){const G=this.placements[L],ie=E[L];ie?(this.opacities[L]=new ni(ie,b,G.text,G.icon),g=g||G.text!==ie.text.placed||G.icon!==ie.icon.placed):(this.opacities[L]=new ni(null,b,G.text,G.icon,G.skipFade),g=g||G.text||G.icon)}for(const L in E){const G=E[L];if(!this.opacities[L]){const ie=new ni(G,b,!1,!1);ie.isHidden()||(this.opacities[L]=ie,g=g||G.text.placed||G.icon.placed)}}for(const L in P)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=P[L]);for(const L in N)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=N[L]);if(d&&void 0===d.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=n:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:n)}updateLayerOpacities(n,d){const g={};for(const b of d){const E=b.getBucket(n);E&&b.latestFeatureIndex&&n.id===E.layerIds[0]&&this.updateBucketOpacities(E,g,b.collisionBoxArray)}}updateBucketOpacities(n,d,g){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const b=n.layers[0].layout,E=new ni(null,0,!1,!1,!0),P=b.get("text-allow-overlap"),N=b.get("icon-allow-overlap"),L=b.get("text-variable-anchor"),G="map"===b.get("text-rotation-alignment"),ie="map"===b.get("text-pitch-alignment"),te="none"!==b.get("icon-text-fit"),ve=new ni(null,0,P&&(N||!n.hasIconData()||b.get("icon-optional")),N&&(P||!n.hasTextData()||b.get("text-optional")),!0);!n.collisionArrays&&g&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(g);const Fe=(Pe,Ne,Be)=>{for(let at=0;at<Ne/4;at++)Pe.opacityVertexArray.emplaceBack(Be);Pe.hasVisibleVertices=Pe.hasVisibleVertices||Be!==Qi};for(let Pe=0;Pe<n.symbolInstances.length;Pe++){const Ne=n.symbolInstances.get(Pe),{numHorizontalGlyphVertices:Be,numVerticalGlyphVertices:at,crossTileID:Et}=Ne;let He=this.opacities[Et];d[Et]?He=E:He||(He=ve,this.opacities[Et]=He),d[Et]=!0;const bt=Ne.numIconVertices>0,Rt=this.placedOrientations[Ne.crossTileID],ii=Rt===_.WritingMode.vertical,I=Rt===_.WritingMode.horizontal||Rt===_.WritingMode.horizontalOnly;if(Be>0||at>0){const A=Mr(He.text);Fe(n.text,Be,ii?Qi:A),Fe(n.text,at,I?Qi:A);const D=He.text.isHidden();[Ne.rightJustifiedTextSymbolIndex,Ne.centerJustifiedTextSymbolIndex,Ne.leftJustifiedTextSymbolIndex].forEach(ue=>{ue>=0&&(n.text.placedSymbolArray.get(ue).hidden=D||ii?1:0)}),Ne.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(Ne.verticalPlacedTextSymbolIndex).hidden=D||I?1:0);const F=this.variableOffsets[Ne.crossTileID];F&&this.markUsedJustification(n,F.anchor,Ne,Rt);const Z=this.placedOrientations[Ne.crossTileID];Z&&(this.markUsedJustification(n,"left",Ne,Z),this.markUsedOrientation(n,Z,Ne))}if(bt){const A=Mr(He.icon),D=!(te&&Ne.verticalPlacedIconSymbolIndex&&ii);Ne.placedIconSymbolIndex>=0&&(Fe(n.icon,Ne.numIconVertices,D?A:Qi),n.icon.placedSymbolArray.get(Ne.placedIconSymbolIndex).hidden=He.icon.isHidden()),Ne.verticalPlacedIconSymbolIndex>=0&&(Fe(n.icon,Ne.numVerticalIconVertices,D?Qi:A),n.icon.placedSymbolArray.get(Ne.verticalPlacedIconSymbolIndex).hidden=He.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const A=n.collisionArrays[Pe];if(A){let D=new _.Point(0,0);if(A.textBox||A.verticalTextBox){let Z=!0;if(L){const ue=this.variableOffsets[Et];ue?(D=xe(ue.anchor,ue.width,ue.height,ue.textOffset,ue.textBoxScale),G&&D._rotate(ie?this.transform.angle:-this.transform.angle)):Z=!1}A.textBox&&Jt(n.textCollisionBox.collisionVertexArray,He.text.placed,!Z||ii,D.x,D.y),A.verticalTextBox&&Jt(n.textCollisionBox.collisionVertexArray,He.text.placed,!Z||I,D.x,D.y)}const F=Boolean(!I&&A.verticalIconBox);A.iconBox&&Jt(n.iconCollisionBox.collisionVertexArray,He.icon.placed,F,te?D.x:0,te?D.y:0),A.verticalIconBox&&Jt(n.iconCollisionBox.collisionVertexArray,He.icon.placed,!F,te?D.x:0,te?D.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const Pe=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=Pe.invProjMatrix,n.placementViewportMatrix=Pe.viewportMatrix,n.collisionCircleArray=Pe.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return 0===this.fadeDuration?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>n}setStale(){this.stale=!0}}function Jt(v,n,d,g,b){v.emplaceBack(n?1:0,d?1:0,g||0,b||0),v.emplaceBack(n?1:0,d?1:0,g||0,b||0),v.emplaceBack(n?1:0,d?1:0,g||0,b||0),v.emplaceBack(n?1:0,d?1:0,g||0,b||0)}const Fi=Math.pow(2,25),an=Math.pow(2,24),un=Math.pow(2,17),_n=Math.pow(2,16),cs=Math.pow(2,9),Ro=Math.pow(2,8),wn=Math.pow(2,1);function Mr(v){if(0===v.opacity&&!v.placed)return 0;if(1===v.opacity&&v.placed)return 4294967295;const n=v.placed?1:0,d=Math.floor(127*v.opacity);return d*Fi+n*an+d*un+n*_n+d*cs+n*Ro+d*wn+n}const Qi=0;class pr{constructor(n){this._sortAcrossTiles="viewport-y"!==n.layout.get("symbol-z-order")&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,d,g,b,E){const P=this._bucketParts;for(;this._currentTileIndex<n.length;)if(d.getBucketParts(P,b,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((N,L)=>N.sortKey-L.sortKey));this._currentPartIndex<P.length;)if(d.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,E())return!0;return!1}}class er{constructor(n,d,g,b,E,P,N,L){this.placement=new ht(n,d,P,N,L),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(n,d,g){const b=_.exported.now(),E=()=>!this._forceFullPlacement&&_.exported.now()-b>2;for(;this._currentPlacementIndex>=0;){const P=d[n[this._currentPlacementIndex]],N=this.placement.collisionIndex.transform.zoom;if("symbol"===P.type&&(!P.minzoom||P.minzoom<=N)&&(!P.maxzoom||P.maxzoom>N)){if(this._inProgressLayer||(this._inProgressLayer=new pr(P)),this._inProgressLayer.continuePlacement(g[P.source],this.placement,this._showCollisionBoxes,P,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Cn=512/_.EXTENT/2;class Or{constructor(n,d,g){this.tileID=n,this.bucketInstanceId=g,this._symbolsByKey={};const b=new Map;for(let E=0;E<d.length;E++){const P=d.get(E),N=P.key,L=b.get(N);L?L.push(P):b.set(N,[P])}for(const[E,P]of b){const N={positions:P.map(L=>({x:Math.floor(L.anchorX*Cn),y:Math.floor(L.anchorY*Cn)})),crossTileIDs:P.map(L=>L.crossTileID)};if(N.positions.length>128){const L=new _.KDBush(N.positions.length,16,Uint16Array);for(const{x:G,y:ie}of N.positions)L.add(G,ie);L.finish(),delete N.positions,N.index=L}this._symbolsByKey[E]=N}}getScaledCoordinates(n,d){const{x:g,y:b,z:E}=this.tileID.canonical,{x:P,y:N,z:L}=d.canonical,G=Cn/Math.pow(2,L-E),ie=(N*_.EXTENT+n.anchorY)*G,te=b*_.EXTENT*Cn;return{x:Math.floor((P*_.EXTENT+n.anchorX)*G-g*_.EXTENT*Cn),y:Math.floor(ie-te)}}findMatches(n,d,g){const b=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let E=0;E<n.length;E++){const P=n.get(E);if(P.crossTileID)continue;const N=this._symbolsByKey[P.key];if(!N)continue;const L=this.getScaledCoordinates(P,d);if(N.index){const G=N.index.range(L.x-b,L.y-b,L.x+b,L.y+b).sort();for(const ie of G){const te=N.crossTileIDs[ie];if(!g[te]){g[te]=!0,P.crossTileID=te;break}}}else if(N.positions)for(let G=0;G<N.positions.length;G++){const ie=N.positions[G],te=N.crossTileIDs[G];if(Math.abs(ie.x-L.x)<=b&&Math.abs(ie.y-L.y)<=b&&!g[te]){g[te]=!0,P.crossTileID=te;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class ds{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const d=Math.round((n-this.lng)/360);if(0!==d)for(const g in this.indexes){const b=this.indexes[g],E={};for(const P in b){const N=b[P];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+d),E[N.tileID.key]=N}this.indexes[g]=E}this.lng=n}addBucket(n,d,g){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let E=0;E<d.symbolInstances.length;E++)d.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const b=this.usedCrossTileIDs[n.overscaledZ];for(const E in this.indexes){const P=this.indexes[E];if(Number(E)>n.overscaledZ)for(const N in P){const L=P[N];L.tileID.isChildOf(n)&&L.findMatches(d.symbolInstances,n,b)}else{const N=P[n.scaledTo(Number(E)).key];N&&N.findMatches(d.symbolInstances,n,b)}}for(let E=0;E<d.symbolInstances.length;E++){const P=d.symbolInstances.get(E);P.crossTileID||(P.crossTileID=g.generate(),b[P.crossTileID]=!0)}return void 0===this.indexes[n.overscaledZ]&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Or(n,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(n,d){for(const g of d.getCrossTileIDsLists())for(const b of g)delete this.usedCrossTileIDs[n][b]}removeStaleBuckets(n){let d=!1;for(const g in this.indexes){const b=this.indexes[g];for(const E in b)n[b[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,b[E]),delete b[E],d=!0)}return d}}class Xr{constructor(){this.layerIndexes={},this.crossTileIDs=new ds,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,d,g){let b=this.layerIndexes[n.id];void 0===b&&(b=this.layerIndexes[n.id]=new yr);let E=!1;const P={};b.handleWrapJump(g);for(const N of d){const L=N.getBucket(n);L&&n.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(N.tileID,L,this.crossTileIDs)&&(E=!0),P[L.bucketInstanceId]=!0)}return b.removeStaleBuckets(P)&&(E=!0),E}pruneUnusedLayers(n){const d={};n.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}const Rn=(v,n)=>_.emitValidationErrors(v,n&&n.filter(d=>"source.canvas"!==d.identifier)),Ri=_.pick(_.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Ji=_.pick(_.operations,["setCenter","setZoom","setBearing","setPitch"]),tr=_.emptyStyle();class $n extends _.Evented{constructor(n,d={}){super(),this.map=n,this.dispatcher=new oi(nt(),this,n._getMapId()),this.imageManager=new Vt,this.imageManager.setEventedParent(this),this.glyphManager=new zi(n._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ci(256,512),this.crossTileSymbolIndex=new Xr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new _.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",_.getReferrer());const g=this;this._rtlTextPluginCallback=$n.registerForPluginStateChange(b=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(E,P)=>{if(_.triggerPluginCompletionEvent(E),P&&P.every(N=>N))for(const N in g.sourceCaches){const L=g.sourceCaches[N].getSource().type;"vector"!==L&&"geojson"!==L||g.sourceCaches[N].reload()}})}),this.on("data",b=>{if("source"!==b.dataType||"metadata"!==b.sourceDataType)return;const E=this.sourceCaches[b.sourceId];if(!E)return;const P=E.getSource();if(P&&P.vectorLayerIds)for(const N in this._layers){const L=this._layers[N];L.source===P.id&&this._validateLayer(L)}})}loadURL(n,d={},g){this.fire(new _.Event("dataloading",{dataType:"style"})),d.validate="boolean"!=typeof d.validate||d.validate;const b=this.map._requestManager.transformRequest(n,Ye.Style);this._request=_.getJSON(b,(E,P)=>{this._request=null,E?this.fire(new _.ErrorEvent(E)):P&&this._load(P,d,g)})}loadJSON(n,d={},g){this.fire(new _.Event("dataloading",{dataType:"style"})),this._request=_.exported.frame(()=>{this._request=null,d.validate=!1!==d.validate,this._load(n,d,g)})}loadEmpty(){this.fire(new _.Event("dataloading",{dataType:"style"})),this._load(tr,{validate:!1})}_load(n,d,g){const b=d.transformStyle?d.transformStyle(g,n):n;if(!d.validate||!Rn(this,_.validateStyle(b))){this._loaded=!0,this.stylesheet=b;for(const E in b.sources)this.addSource(E,b.sources[E],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Kt(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new _.Event("data",{dataType:"style"})),this.fire(new _.Event("style.load"))}}_createLayers(){const n=_.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",n),this._order=n.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of n){const g=_.createStyleLayer(d);g.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=g}}_loadSprite(n,d=!1,g){this.imageManager.setLoaded(!1),this._spriteRequest=function(b,E,P,N){const L=Oe(b),G=L.length,ie=P>1?"@2x":"",te={},ve={},Fe={};for(const{id:Pe,url:Ne}of L){const Be=E.transformRequest(E.normalizeSpriteURL(Ne,ie,".json"),Ye.SpriteJSON),at=`${Pe}_${Be.url}`;te[at]=_.getJSON(Be,(bt,Rt)=>{delete te[at],ve[Pe]=Rt,tt(N,ve,Fe,bt,G)});const Et=E.transformRequest(E.normalizeSpriteURL(Ne,ie,".png"),Ye.SpriteImage),He=`${Pe}_${Et.url}`;te[He]=mt.getImage(Et,(bt,Rt)=>{delete te[He],Fe[Pe]=Rt,tt(N,ve,Fe,bt,G)})}return{cancel(){for(const Pe of Object.values(te))Pe.cancel()}}}(n,this.map._requestManager,this.map.getPixelRatio(),(b,E)=>{if(this._spriteRequest=null,b)this.fire(new _.ErrorEvent(b));else if(E)for(const P in E){this._spritesImagesIds[P]=[];const N=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(L=>!(L in E)):[];for(const L of N)this.imageManager.removeImage(L),this._changedImages[L]=!0;for(const L in E[P]){const G="default"===P?L:`${P}:${L}`;this._spritesImagesIds[P].push(G),G in this.imageManager.images?this.imageManager.updateImage(G,E[P][L],!1):this.imageManager.addImage(G,E[P][L]),d&&(this._changedImages[G]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.Event("data",{dataType:"style"})),g&&g(b)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.Event("data",{dataType:"style"}))}_validateLayer(n){const d=this.sourceCaches[n.source];if(!d)return;const g=n.sourceLayer;if(!g)return;const b=d.getSource();("geojson"===b.type||b.vectorLayerIds&&-1===b.vectorLayerIds.indexOf(g))&&this.fire(new _.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${b.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const d=this._serializedAllLayers();if(!n||0===n.length)return Object.values(d);const g=[];for(const b of n)d[b]&&g.push(d[b]);return g}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const d=Object.keys(this._layers);for(const g of d){const b=this._layers[g];"custom"!==b.type&&(n[g]=b.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const d=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(b.length||E.length)&&this._updateWorkerLayers(b,E);for(const P in this._updatedSources){const N=this._updatedSources[P];if("reload"===N)this._reloadSource(P);else{if("clear"!==N)throw new Error(`Invalid action ${N}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const g={};for(const b in this.sourceCaches){const E=this.sourceCaches[b];g[b]=E.used,E.used=!1}for(const b of this._order){const E=this._layers[b];E.recalculate(n,this._availableImages),!E.isHidden(n.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const b in g){const E=this.sourceCaches[b];g[b]!==E.used&&E.fire(new _.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(n),this.z=n.zoom,d&&this.fire(new _.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(n),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,d={}){this._checkLoaded();const g=this.serialize();if(n=d.transformStyle?d.transformStyle(g,n):n,Rn(this,_.validateStyle(n)))return!1;(n=_.clone$1(n)).layers=_.derefLayers(n.layers);const b=_.diffStyles(g,n).filter(P=>!(P.command in Ji));if(0===b.length)return!1;const E=b.filter(P=>!(P.command in Ri));if(E.length>0)throw new Error(`Unimplemented: ${E.map(P=>P.command).join(", ")}.`);for(const P of b)"setTransition"!==P.command&&this[P.command].apply(this,P.args);return this.stylesheet=n,!0}addImage(n,d){if(this.getImage(n))return this.fire(new _.ErrorEvent(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,d),this._afterImageUpdated(n)}updateImage(n,d){this.imageManager.updateImage(n,d)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new _.ErrorEvent(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,d,g={}){if(this._checkLoaded(),void 0!==this.sourceCaches[n])throw new Error(`Source "${n}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(_.validateStyle.source,`sources.${n}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const b=this.sourceCaches[n]=new nn(n,d,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:n})),b.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===n)return this.fire(new _.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${g}" is using it.`)));const d=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],d.fire(new _.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,d){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw new Error(`There is no source with this ID=${n}`);const g=this.sourceCaches[n].getSource();if("geojson"!==g.type)throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(d),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,d,g={}){this._checkLoaded();const b=n.id;if(this.getLayer(b))return void this.fire(new _.ErrorEvent(new Error(`Layer "${b}" already exists on this map.`)));let E;if("custom"===n.type){if(Rn(this,_.validateCustomStyleLayer(n)))return;E=_.createStyleLayer(n)}else{if("object"==typeof n.source&&(this.addSource(b,n.source),n=_.clone$1(n),n=_.extend(n,{source:b})),this._validate(_.validateStyle.layer,`layers.${b}`,n,{arrayIndex:-1},g))return;E=_.createStyleLayer(n),this._validateLayer(E),E.setEventedParent(this,{layer:{id:b}})}const P=d?this._order.indexOf(d):this._order.length;if(d&&-1===P)this.fire(new _.ErrorEvent(new Error(`Cannot add layer "${b}" before non-existing layer "${d}".`)));else{if(this._order.splice(P,0,b),this._layerOrderChanged=!0,this._layers[b]=E,this._removedLayers[b]&&E.source&&"custom"!==E.type){const N=this._removedLayers[b];delete this._removedLayers[b],N.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(n,d){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new _.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===d)return;const g=this._order.indexOf(n);this._order.splice(g,1);const b=d?this._order.indexOf(d):this._order.length;d&&-1===b?this.fire(new _.ErrorEvent(new Error(`Cannot move layer "${n}" before non-existing layer "${d}".`))):(this._order.splice(b,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const d=this._layers[n];if(!d)return void this.fire(new _.ErrorEvent(new Error(`Cannot remove non-existing layer "${n}".`)));d.setEventedParent(null);const g=this._order.indexOf(n);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=d,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],d.onRemove&&d.onRemove(this.map)}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,d,g){this._checkLoaded();const b=this.getLayer(n);b?b.minzoom===d&&b.maxzoom===g||(null!=d&&(b.minzoom=d),null!=g&&(b.maxzoom=g),this._updateLayer(b)):this.fire(new _.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,d,g={}){this._checkLoaded();const b=this.getLayer(n);if(b){if(!_.deepEqual(b.filter,d))return null==d?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(_.validateStyle.filter,`layers.${b.id}.filter`,d,null,g)||(b.filter=_.clone$1(d),this._updateLayer(b)))}else this.fire(new _.ErrorEvent(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return _.clone$1(this.getLayer(n).filter)}setLayoutProperty(n,d,g,b={}){this._checkLoaded();const E=this.getLayer(n);E?_.deepEqual(E.getLayoutProperty(d),g)||(E.setLayoutProperty(d,g,b),this._updateLayer(E)):this.fire(new _.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,d){const g=this.getLayer(n);if(g)return g.getLayoutProperty(d);this.fire(new _.ErrorEvent(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,d,g,b={}){this._checkLoaded();const E=this.getLayer(n);E?_.deepEqual(E.getPaintProperty(d),g)||(E.setPaintProperty(d,g,b)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new _.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,d){return this.getLayer(n).getPaintProperty(d)}setFeatureState(n,d){this._checkLoaded();const g=n.source,b=n.sourceLayer,E=this.sourceCaches[g];if(void 0===E)return void this.fire(new _.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const P=E.getSource().type;"geojson"===P&&b?this.fire(new _.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==P||b?(void 0===n.id&&this.fire(new _.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(b,n.id,d)):this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,d){this._checkLoaded();const g=n.source,b=this.sourceCaches[g];if(void 0===b)return void this.fire(new _.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const E=b.getSource().type,P="vector"===E?n.sourceLayer:void 0;"vector"!==E||P?d&&"string"!=typeof n.id&&"number"!=typeof n.id?this.fire(new _.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(P,n.id,d):this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const d=n.source,g=n.sourceLayer,b=this.sourceCaches[d];if(void 0!==b)return"vector"!==b.getSource().type||g?(void 0===n.id&&this.fire(new _.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(g,n.id)):void this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new _.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return _.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const n=_.mapObject(this.sourceCaches,b=>b.serialize()),d=this._serializeByIds(this._order),g=this.stylesheet;return _.filterObject({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:n,layers:d},b=>void 0!==b)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&"raster"!==this.sourceCaches[n.source].getSource().type&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const d=P=>"fill-extrusion"===this._layers[P].type,g={},b=[];for(let P=this._order.length-1;P>=0;P--){const N=this._order[P];if(d(N)){g[N]=P;for(const L of n){const G=L[N];if(G)for(const ie of G)b.push(ie)}}}b.sort((P,N)=>N.intersectionZ-P.intersectionZ);const E=[];for(let P=this._order.length-1;P>=0;P--){const N=this._order[P];if(d(N))for(let L=b.length-1;L>=0;L--){const G=b[L].feature;if(g[G.layer.id]<P)break;E.push(G),b.pop()}else for(const L of n){const G=L[N];if(G)for(const ie of G)E.push(ie.feature)}}return E}queryRenderedFeatures(n,d,g){d&&d.filter&&this._validate(_.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);const b={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new _.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const N of d.layers){const L=this._layers[N];if(!L)return this.fire(new _.ErrorEvent(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];b[L.source]=!0}}const E=[];d.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const N in this.sourceCaches)d.layers&&!b[N]||E.push(rt(this.sourceCaches[N],this._layers,P,n,d,g));return this.placement&&E.push(function(N,L,G,ie,te,ve,Fe){const Pe={},Ne=ve.queryRenderedSymbols(ie),Be=[];for(const at of Object.keys(Ne).map(Number))Be.push(Fe[at]);Be.sort(Dt);for(const at of Be){const Et=at.featureIndex.lookupSymbolFeatures(Ne[at.bucketInstanceId],L,at.bucketIndex,at.sourceLayerIndex,te.filter,te.layers,te.availableImages,N);for(const He in Et){const bt=Pe[He]=Pe[He]||[],Rt=Et[He];Rt.sort((ii,I)=>{const A=at.featureSortOrder;if(A){const D=A.indexOf(ii.featureIndex);return A.indexOf(I.featureIndex)-D}return I.featureIndex-ii.featureIndex});for(const ii of Rt)bt.push(ii)}}for(const at in Pe)Pe[at].forEach(Et=>{const He=Et.feature,bt=G[N[at].source].getFeatureState(He.layer["source-layer"],He.id);He.source=He.layer.source,He.layer["source-layer"]&&(He.sourceLayer=He.layer["source-layer"]),He.state=bt});return Pe}(this._layers,P,this.sourceCaches,n,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(n,d){d&&d.filter&&this._validate(_.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);const g=this.sourceCaches[n];return g?function(b,E){const P=b.getRenderableIds().map(G=>b.getTileByID(G)),N=[],L={};for(let G=0;G<P.length;G++){const ie=P[G],te=ie.tileID.canonical.key;L[te]||(L[te]=!0,ie.querySourceFeatures(N,E))}return N}(g,d):[]}addSourceType(n,d,g){return $n.getSourceType(n)?g(new Error(`A source type called "${n}" already exists.`)):($n.setSourceType(n,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:d.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(n,d={}){this._checkLoaded();const g=this.light.getLight();let b=!1;for(const P in n)if(!_.deepEqual(n[P],g[P])){b=!0;break}if(!b)return;const E={now:_.exported.now(),transition:_.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,d),this.light.updateTransitions(E)}_validate(n,d,g,b,E={}){return(!E||!1!==E.validate)&&Rn(this,n.call(_.validateStyle,_.extend({key:d,style:this.serialize(),value:g,styleSpec:_.v8Spec},b)))}_remove(n=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),_.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const g=this.sourceCaches[d];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const d in this.sourceCaches)this.sourceCaches[d].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,d,g,b,E=!1){let P=!1,N=!1;const L={};for(const G of this._order){const ie=this._layers[G];if("symbol"!==ie.type)continue;if(!L[ie.source]){const ve=this.sourceCaches[ie.source];L[ie.source]=ve.getRenderableIds(!0).map(Fe=>ve.getTileByID(Fe)).sort((Fe,Pe)=>Pe.tileID.overscaledZ-Fe.tileID.overscaledZ||(Fe.tileID.isLessThan(Pe.tileID)?-1:1))}const te=this.crossTileSymbolIndex.addLayer(ie,L[ie.source],n.center.lng);P=P||te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||0===g)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(_.exported.now(),n.zoom))&&(this.pauseablePlacement=new er(n,this.map.terrain,this._order,E,d,g,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(_.exported.now()),N=!0),P&&this.pauseablePlacement.placement.setStale()),N||P)for(const G of this._order){const ie=this._layers[G];"symbol"===ie.type&&this.placement.updateLayerOpacities(ie,L[ie.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(_.exported.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();const b=this.sourceCaches[d.source];b&&b.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(n,d,g){this.glyphManager.getGlyphs(d.stacks,g);const b=this.sourceCaches[d.source];b&&b.setDependencies(d.tileID.key,d.type,[""])}getResource(n,d,g){return _.makeRequest(d,g)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,d={}){this._checkLoaded(),n&&this._validate(_.validateStyle.glyphs,"glyphs",n,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,d,g={},b){this._checkLoaded();const E=[{id:n,url:d}],P=[...Oe(this.stylesheet.sprite),...E];this._validate(_.validateStyle.sprite,"sprite",P,null,g)||(this.stylesheet.sprite=P,this._loadSprite(E,!0,b))}removeSprite(n){this._checkLoaded();const d=Oe(this.stylesheet.sprite);if(d.find(g=>g.id===n)){if(this._spritesImagesIds[n])for(const g of this._spritesImagesIds[n])this.imageManager.removeImage(g),this._changedImages[g]=!0;d.splice(d.findIndex(g=>g.id===n),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.Event("data",{dataType:"style"}))}else this.fire(new _.ErrorEvent(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Oe(this.stylesheet.sprite)}setSprite(n,d={},g){this._checkLoaded(),n&&this._validate(_.validateStyle.sprite,"sprite",n,null,d)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,g):(this._unloadSprite(),g&&g(null)))}}$n.getSourceType=function(v){return fi[v]},$n.setSourceType=function(v,n){fi[v]=n},$n.registerForPluginStateChange=_.registerForPluginStateChange;var vr=_.createLayout([{name:"a_pos",type:"Int16",components:2}]),Fn="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const zn={prelude:ji("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:ji("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ji("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ji("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:ji("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ji("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:ji("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ji("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ji("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ji("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ji("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:ji("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:ji("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:ji("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:ji("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:ji("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:ji("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ji("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ji("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:ji("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:ji("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:ji("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:ji("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ji("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:ji("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:ji("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:ji("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Fn),terrainDepth:ji("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Fn),terrainCoords:ji("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Fn)};function ji(v,n){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=n.match(/attribute ([\w]+) ([\w]+)/g),b=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=E?E.concat(b):b,N={};return{fragmentSource:v=v.replace(d,(L,G,ie,te,ve)=>(N[ve]=!0,"define"===G?`\n#ifndef HAS_UNIFORM_u_${ve}\nvarying ${ie} ${te} ${ve};\n#else\nuniform ${ie} ${te} u_${ve};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${ve}\n    ${ie} ${te} ${ve} = u_${ve};\n#endif\n`)),vertexSource:n=n.replace(d,(L,G,ie,te,ve)=>{const Fe="float"===te?"vec2":"vec4",Pe=ve.match(/color/)?"color":Fe;return N[ve]?"define"===G?`\n#ifndef HAS_UNIFORM_u_${ve}\nuniform lowp float u_${ve}_t;\nattribute ${ie} ${Fe} a_${ve};\nvarying ${ie} ${te} ${ve};\n#else\nuniform ${ie} ${te} u_${ve};\n#endif\n`:"vec4"===Pe?`\n#ifndef HAS_UNIFORM_u_${ve}\n    ${ve} = a_${ve};\n#else\n    ${ie} ${te} ${ve} = u_${ve};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ve}\n    ${ve} = unpack_mix_${Pe}(a_${ve}, u_${ve}_t);\n#else\n    ${ie} ${te} ${ve} = u_${ve};\n#endif\n`:"define"===G?`\n#ifndef HAS_UNIFORM_u_${ve}\nuniform lowp float u_${ve}_t;\nattribute ${ie} ${Fe} a_${ve};\n#else\nuniform ${ie} ${te} u_${ve};\n#endif\n`:"vec4"===Pe?`\n#ifndef HAS_UNIFORM_u_${ve}\n    ${ie} ${te} ${ve} = a_${ve};\n#else\n    ${ie} ${te} ${ve} = u_${ve};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ve}\n    ${ie} ${te} ${ve} = unpack_mix_${Pe}(a_${ve}, u_${ve}_t);\n#else\n    ${ie} ${te} ${ve} = u_${ve};\n#endif\n`}),staticAttributes:g,staticUniforms:P}}class Rr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,d,g,b,E,P,N,L,G){this.context=n;let ie=this.boundPaintVertexBuffers.length!==b.length;for(let te=0;!ie&&te<b.length;te++)this.boundPaintVertexBuffers[te]!==b[te]&&(ie=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==g||ie||this.boundIndexBuffer!==E||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==G?this.freshBind(d,g,b,E,P,N,L,G):(n.bindVertexArray.set(this.vao),N&&N.bind(),E&&E.dynamicDraw&&E.bind(),L&&L.bind(),G&&G.bind())}freshBind(n,d,g,b,E,P,N,L){const G=n.numAttributes,ie=this.context,te=ie.gl;this.vao&&this.destroy(),this.vao=ie.createVertexArray(),ie.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=b,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=N,this.boundDynamicVertexBuffer3=L,d.enableAttributes(te,n);for(const ve of g)ve.enableAttributes(te,n);P&&P.enableAttributes(te,n),N&&N.enableAttributes(te,n),L&&L.enableAttributes(te,n),d.bind(),d.setVertexAttribPointers(te,n,E);for(const ve of g)ve.bind(),ve.setVertexAttribPointers(te,n,E);P&&(P.bind(),P.setVertexAttribPointers(te,n,E)),b&&b.bind(),N&&(N.bind(),N.setVertexAttribPointers(te,n,E)),L&&(L.bind(),L.setVertexAttribPointers(te,n,E)),ie.currentNumAttributes=G}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Eo(v){const n=[];for(let d=0;d<v.length;d++){if(null===v[d])continue;const g=v[d].split(" ");n.push(g.pop())}return n}class sn{constructor(n,d,g,b,E,P,N){const L=n.gl;this.program=L.createProgram();const G=Eo(g.staticAttributes),ie=b?b.getBinderAttributes():[],te=G.concat(ie),ve=zn.prelude.staticUniforms?Eo(zn.prelude.staticUniforms):[],Fe=g.staticUniforms?Eo(g.staticUniforms):[],Pe=b?b.getBinderUniforms():[],Ne=ve.concat(Fe).concat(Pe),Be=[];for(const I of Ne)Be.indexOf(I)<0&&Be.push(I);const at=b?b.defines():[];P&&at.push("#define OVERDRAW_INSPECTOR;"),N&&at.push("#define TERRAIN3D;");const Et=at.concat(zn.prelude.fragmentSource,g.fragmentSource).join("\n"),He=at.concat(zn.prelude.vertexSource,g.vertexSource).join("\n"),bt=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(bt,Et),L.compileShader(bt),L.attachShader(this.program,bt);const Rt=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Rt,He),L.compileShader(Rt),L.attachShader(this.program,Rt),this.attributes={};const ii={};this.numAttributes=te.length;for(let I=0;I<this.numAttributes;I++)te[I]&&(L.bindAttribLocation(this.program,I,te[I]),this.attributes[te[I]]=I);L.linkProgram(this.program),L.deleteShader(Rt),L.deleteShader(bt);for(let I=0;I<Be.length;I++){const A=Be[I];if(A&&!ii[A]){const D=L.getUniformLocation(this.program,A);D&&(ii[A]=D)}}var I,A;this.fixedUniforms=E(n,ii),this.terrainUniforms={u_depth:new _.Uniform1i(I=n,(A=ii).u_depth),u_terrain:new _.Uniform1i(I,A.u_terrain),u_terrain_dim:new _.Uniform1f(I,A.u_terrain_dim),u_terrain_matrix:new _.UniformMatrix4f(I,A.u_terrain_matrix),u_terrain_unpack:new _.Uniform4f(I,A.u_terrain_unpack),u_terrain_exaggeration:new _.Uniform1f(I,A.u_terrain_exaggeration)},this.binderUniforms=b?b.getUniforms(n,ii):[]}draw(n,d,g,b,E,P,N,L,G,ie,te,ve,Fe,Pe,Ne,Be,at,Et){const He=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(g),n.setStencilMode(b),n.setColorMode(E),n.setCullFace(P),L){n.activeTexture.set(He.TEXTURE2),He.bindTexture(He.TEXTURE_2D,L.depthTexture),n.activeTexture.set(He.TEXTURE3),He.bindTexture(He.TEXTURE_2D,L.texture);for(const Rt in this.terrainUniforms)this.terrainUniforms[Rt].set(L[Rt])}for(const Rt in this.fixedUniforms)this.fixedUniforms[Rt].set(N[Rt]);Ne&&Ne.setUniforms(n,this.binderUniforms,Fe,{zoom:Pe});let bt=0;switch(d){case He.LINES:bt=2;break;case He.TRIANGLES:bt=3;break;case He.LINE_STRIP:bt=1}for(const Rt of ve.get()){const ii=Rt.vaos||(Rt.vaos={});(ii[G]||(ii[G]=new Rr)).bind(n,this,ie,Ne?Ne.getPaintVertexBuffers():[],te,Rt.vertexOffset,Be,at,Et),He.drawElements(d,Rt.primitiveLength*bt,He.UNSIGNED_SHORT,Rt.primitiveOffset*bt*2)}}}function Fo(v,n,d){const g=1/vt(d,1,n.transform.tileZoom),b=Math.pow(2,d.tileID.overscaledZ),E=d.tileSize*Math.pow(2,n.transform.tileZoom)/b,P=E*(d.tileID.canonical.x+d.tileID.wrap*b),N=E*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[g,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[P>>16,N>>16],u_pixel_coord_lower:[65535&P,65535&N]}}const ws=(v,n,d,g)=>{const b=n.style.light,E=b.properties.get("position"),P=[E.x,E.y,E.z],N=(G=new _.ARRAY_TYPE(9),_.ARRAY_TYPE!=Float32Array&&(G[1]=0,G[2]=0,G[3]=0,G[5]=0,G[6]=0,G[7]=0),G[0]=1,G[4]=1,G[8]=1,G);var G;"viewport"===b.properties.get("anchor")&&function(G,ie){var te=Math.sin(ie),ve=Math.cos(ie);G[0]=ve,G[1]=te,G[2]=0,G[3]=-te,G[4]=ve,G[5]=0,G[6]=0,G[7]=0,G[8]=1}(N,-n.transform.angle),function(G,ie,te){var ve=ie[0],Fe=ie[1],Pe=ie[2];G[0]=ve*te[0]+Fe*te[3]+Pe*te[6],G[1]=ve*te[1]+Fe*te[4]+Pe*te[7],G[2]=ve*te[2]+Fe*te[5]+Pe*te[8]}(P,P,N);const L=b.properties.get("color");return{u_matrix:v,u_lightpos:P,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+d,u_opacity:g}},sa=(v,n,d,g,b,E,P)=>_.extend(ws(v,n,d,g),Fo(E,n,P),{u_height_factor:-Math.pow(2,b.overscaledZ)/P.tileSize/8}),Cs=v=>({u_matrix:v}),or=(v,n,d,g)=>_.extend(Cs(v),Fo(d,n,g)),js=(v,n)=>({u_matrix:v,u_world:n}),po=(v,n,d,g,b)=>_.extend(or(v,n,d,g),{u_world:b}),Jr=(v,n,d,g)=>{const b=v.transform;let E,P;if("map"===g.paint.get("circle-pitch-alignment")){const N=vt(d,1,b.zoom);E=!0,P=[N,N]}else E=!1,P=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+("map"===g.paint.get("circle-pitch-scale")),u_matrix:v.translatePosMatrix(n.posMatrix,d,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:P}},us=(v,n,d)=>{const g=vt(d,1,n.zoom),b=Math.pow(2,n.zoom-d.tileID.overscaledZ),E=d.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[n.pixelsToGLUnits[0]/(g*b),n.pixelsToGLUnits[1]/(g*b)],u_overscale_factor:E}},Es=(v,n,d=1)=>({u_matrix:v,u_color:n,u_overlay:0,u_overlay_scale:d}),Wn=v=>({u_matrix:v}),Gr=(v,n,d,g)=>({u_matrix:v,u_extrude_scale:vt(n,1,d),u_intensity:g});function hs(v,n){const d=Math.pow(2,n.canonical.z),g=n.canonical.y;return[new _.MercatorCoordinate(0,g/d).toLngLat().lat,new _.MercatorCoordinate(0,(g+1)/d).toLngLat().lat]}const zr=(v,n,d,g)=>{const b=v.transform;return{u_matrix:aa(v,n,d,g),u_ratio:1/vt(n,1,b.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Hs=(v,n,d,g,b)=>_.extend(zr(v,n,d,b),{u_image:0,u_image_height:g}),Mo=(v,n,d,g,b)=>{const E=v.transform,P=dr(n,E);return{u_matrix:aa(v,n,d,b),u_texsize:n.imageAtlasTexture.size,u_ratio:1/vt(n,1,E.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[P,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},ao=(v,n,d,g,b,E)=>{const P=v.lineAtlas,N=dr(n,v.transform),L="round"===d.layout.get("line-cap"),G=P.getDash(g.from,L),ie=P.getDash(g.to,L),te=G.width*b.fromScale,ve=ie.width*b.toScale;return _.extend(zr(v,n,d,E),{u_patternscale_a:[N/te,-G.height/2],u_patternscale_b:[N/ve,-ie.height/2],u_sdfgamma:P.width/(256*Math.min(te,ve)*v.pixelRatio)/2,u_image:0,u_tex_y_a:G.y,u_tex_y_b:ie.y,u_mix:b.t})};function dr(v,n){return 1/vt(v,1,n.tileZoom)}function aa(v,n,d,g){return v.translatePosMatrix(g?g.posMatrix:n.tileID.posMatrix,n,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const fr=(v,n,d,g,b)=>{return{u_matrix:v,u_tl_parent:n,u_scale_parent:d,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(P=b.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(E=b.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Fr(b.paint.get("raster-hue-rotate"))};var E,P};function Fr(v){v*=Math.PI/180;const n=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*n-d+1)/3,(Math.sqrt(3)*n-d+1)/3]}const Qr=(v,n,d,g,b,E,P,N,L,G)=>{const ie=b.transform;return{u_is_size_zoom_constant:+("constant"===v||"source"===v),u_is_size_feature_constant:+("constant"===v||"camera"===v),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:ie.cameraToCenterDistance,u_pitch:ie.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:ie.width/ie.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:P,u_coord_matrix:N,u_is_text:+L,u_pitch_with_map:+g,u_texsize:G,u_texture:0}},Yn=(v,n,d,g,b,E,P,N,L,G,ie)=>{const te=b.transform;return _.extend(Qr(v,n,d,g,b,E,P,N,L,G),{u_gamma_scale:g?Math.cos(te._pitch)*te.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+ie})},Zr=(v,n,d,g,b,E,P,N,L,G)=>_.extend(Yn(v,n,d,g,b,E,P,N,!0,L,!0),{u_texsize_icon:G,u_texture_icon:1}),Br=(v,n,d)=>({u_matrix:v,u_opacity:n,u_color:d}),xa=(v,n,d,g,b,E)=>_.extend(function(P,N,L,G){const ie=L.imageManager.getPattern(P.from.toString()),te=L.imageManager.getPattern(P.to.toString()),{width:ve,height:Fe}=L.imageManager.getPixelSize(),Pe=Math.pow(2,G.tileID.overscaledZ),Ne=G.tileSize*Math.pow(2,L.transform.tileZoom)/Pe,Be=Ne*(G.tileID.canonical.x+G.tileID.wrap*Pe),at=Ne*G.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ie.tl,u_pattern_br_a:ie.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[ve,Fe],u_mix:N.t,u_pattern_size_a:ie.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/vt(G,1,L.transform.tileZoom),u_pixel_coord_upper:[Be>>16,at>>16],u_pixel_coord_lower:[65535&Be,65535&at]}}(g,E,d,b),{u_matrix:v,u_opacity:n}),fo={fillExtrusion:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_lightpos:new _.Uniform3f(v,n.u_lightpos),u_lightintensity:new _.Uniform1f(v,n.u_lightintensity),u_lightcolor:new _.Uniform3f(v,n.u_lightcolor),u_vertical_gradient:new _.Uniform1f(v,n.u_vertical_gradient),u_opacity:new _.Uniform1f(v,n.u_opacity)}),fillExtrusionPattern:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_lightpos:new _.Uniform3f(v,n.u_lightpos),u_lightintensity:new _.Uniform1f(v,n.u_lightintensity),u_lightcolor:new _.Uniform3f(v,n.u_lightcolor),u_vertical_gradient:new _.Uniform1f(v,n.u_vertical_gradient),u_height_factor:new _.Uniform1f(v,n.u_height_factor),u_image:new _.Uniform1i(v,n.u_image),u_texsize:new _.Uniform2f(v,n.u_texsize),u_pixel_coord_upper:new _.Uniform2f(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new _.Uniform2f(v,n.u_pixel_coord_lower),u_scale:new _.Uniform3f(v,n.u_scale),u_fade:new _.Uniform1f(v,n.u_fade),u_opacity:new _.Uniform1f(v,n.u_opacity)}),fill:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix)}),fillPattern:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_image:new _.Uniform1i(v,n.u_image),u_texsize:new _.Uniform2f(v,n.u_texsize),u_pixel_coord_upper:new _.Uniform2f(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new _.Uniform2f(v,n.u_pixel_coord_lower),u_scale:new _.Uniform3f(v,n.u_scale),u_fade:new _.Uniform1f(v,n.u_fade)}),fillOutline:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_world:new _.Uniform2f(v,n.u_world)}),fillOutlinePattern:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_world:new _.Uniform2f(v,n.u_world),u_image:new _.Uniform1i(v,n.u_image),u_texsize:new _.Uniform2f(v,n.u_texsize),u_pixel_coord_upper:new _.Uniform2f(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new _.Uniform2f(v,n.u_pixel_coord_lower),u_scale:new _.Uniform3f(v,n.u_scale),u_fade:new _.Uniform1f(v,n.u_fade)}),circle:(v,n)=>({u_camera_to_center_distance:new _.Uniform1f(v,n.u_camera_to_center_distance),u_scale_with_map:new _.Uniform1i(v,n.u_scale_with_map),u_pitch_with_map:new _.Uniform1i(v,n.u_pitch_with_map),u_extrude_scale:new _.Uniform2f(v,n.u_extrude_scale),u_device_pixel_ratio:new _.Uniform1f(v,n.u_device_pixel_ratio),u_matrix:new _.UniformMatrix4f(v,n.u_matrix)}),collisionBox:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_camera_to_center_distance:new _.Uniform1f(v,n.u_camera_to_center_distance),u_pixels_to_tile_units:new _.Uniform1f(v,n.u_pixels_to_tile_units),u_extrude_scale:new _.Uniform2f(v,n.u_extrude_scale),u_overscale_factor:new _.Uniform1f(v,n.u_overscale_factor)}),collisionCircle:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_inv_matrix:new _.UniformMatrix4f(v,n.u_inv_matrix),u_camera_to_center_distance:new _.Uniform1f(v,n.u_camera_to_center_distance),u_viewport_size:new _.Uniform2f(v,n.u_viewport_size)}),debug:(v,n)=>({u_color:new _.UniformColor(v,n.u_color),u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_overlay:new _.Uniform1i(v,n.u_overlay),u_overlay_scale:new _.Uniform1f(v,n.u_overlay_scale)}),clippingMask:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix)}),heatmap:(v,n)=>({u_extrude_scale:new _.Uniform1f(v,n.u_extrude_scale),u_intensity:new _.Uniform1f(v,n.u_intensity),u_matrix:new _.UniformMatrix4f(v,n.u_matrix)}),heatmapTexture:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_world:new _.Uniform2f(v,n.u_world),u_image:new _.Uniform1i(v,n.u_image),u_color_ramp:new _.Uniform1i(v,n.u_color_ramp),u_opacity:new _.Uniform1f(v,n.u_opacity)}),hillshade:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_image:new _.Uniform1i(v,n.u_image),u_latrange:new _.Uniform2f(v,n.u_latrange),u_light:new _.Uniform2f(v,n.u_light),u_shadow:new _.UniformColor(v,n.u_shadow),u_highlight:new _.UniformColor(v,n.u_highlight),u_accent:new _.UniformColor(v,n.u_accent)}),hillshadePrepare:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_image:new _.Uniform1i(v,n.u_image),u_dimension:new _.Uniform2f(v,n.u_dimension),u_zoom:new _.Uniform1f(v,n.u_zoom),u_unpack:new _.Uniform4f(v,n.u_unpack)}),line:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_ratio:new _.Uniform1f(v,n.u_ratio),u_device_pixel_ratio:new _.Uniform1f(v,n.u_device_pixel_ratio),u_units_to_pixels:new _.Uniform2f(v,n.u_units_to_pixels)}),lineGradient:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_ratio:new _.Uniform1f(v,n.u_ratio),u_device_pixel_ratio:new _.Uniform1f(v,n.u_device_pixel_ratio),u_units_to_pixels:new _.Uniform2f(v,n.u_units_to_pixels),u_image:new _.Uniform1i(v,n.u_image),u_image_height:new _.Uniform1f(v,n.u_image_height)}),linePattern:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_texsize:new _.Uniform2f(v,n.u_texsize),u_ratio:new _.Uniform1f(v,n.u_ratio),u_device_pixel_ratio:new _.Uniform1f(v,n.u_device_pixel_ratio),u_image:new _.Uniform1i(v,n.u_image),u_units_to_pixels:new _.Uniform2f(v,n.u_units_to_pixels),u_scale:new _.Uniform3f(v,n.u_scale),u_fade:new _.Uniform1f(v,n.u_fade)}),lineSDF:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_ratio:new _.Uniform1f(v,n.u_ratio),u_device_pixel_ratio:new _.Uniform1f(v,n.u_device_pixel_ratio),u_units_to_pixels:new _.Uniform2f(v,n.u_units_to_pixels),u_patternscale_a:new _.Uniform2f(v,n.u_patternscale_a),u_patternscale_b:new _.Uniform2f(v,n.u_patternscale_b),u_sdfgamma:new _.Uniform1f(v,n.u_sdfgamma),u_image:new _.Uniform1i(v,n.u_image),u_tex_y_a:new _.Uniform1f(v,n.u_tex_y_a),u_tex_y_b:new _.Uniform1f(v,n.u_tex_y_b),u_mix:new _.Uniform1f(v,n.u_mix)}),raster:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_tl_parent:new _.Uniform2f(v,n.u_tl_parent),u_scale_parent:new _.Uniform1f(v,n.u_scale_parent),u_buffer_scale:new _.Uniform1f(v,n.u_buffer_scale),u_fade_t:new _.Uniform1f(v,n.u_fade_t),u_opacity:new _.Uniform1f(v,n.u_opacity),u_image0:new _.Uniform1i(v,n.u_image0),u_image1:new _.Uniform1i(v,n.u_image1),u_brightness_low:new _.Uniform1f(v,n.u_brightness_low),u_brightness_high:new _.Uniform1f(v,n.u_brightness_high),u_saturation_factor:new _.Uniform1f(v,n.u_saturation_factor),u_contrast_factor:new _.Uniform1f(v,n.u_contrast_factor),u_spin_weights:new _.Uniform3f(v,n.u_spin_weights)}),symbolIcon:(v,n)=>({u_is_size_zoom_constant:new _.Uniform1i(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new _.Uniform1i(v,n.u_is_size_feature_constant),u_size_t:new _.Uniform1f(v,n.u_size_t),u_size:new _.Uniform1f(v,n.u_size),u_camera_to_center_distance:new _.Uniform1f(v,n.u_camera_to_center_distance),u_pitch:new _.Uniform1f(v,n.u_pitch),u_rotate_symbol:new _.Uniform1i(v,n.u_rotate_symbol),u_aspect_ratio:new _.Uniform1f(v,n.u_aspect_ratio),u_fade_change:new _.Uniform1f(v,n.u_fade_change),u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_label_plane_matrix:new _.UniformMatrix4f(v,n.u_label_plane_matrix),u_coord_matrix:new _.UniformMatrix4f(v,n.u_coord_matrix),u_is_text:new _.Uniform1i(v,n.u_is_text),u_pitch_with_map:new _.Uniform1i(v,n.u_pitch_with_map),u_texsize:new _.Uniform2f(v,n.u_texsize),u_texture:new _.Uniform1i(v,n.u_texture)}),symbolSDF:(v,n)=>({u_is_size_zoom_constant:new _.Uniform1i(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new _.Uniform1i(v,n.u_is_size_feature_constant),u_size_t:new _.Uniform1f(v,n.u_size_t),u_size:new _.Uniform1f(v,n.u_size),u_camera_to_center_distance:new _.Uniform1f(v,n.u_camera_to_center_distance),u_pitch:new _.Uniform1f(v,n.u_pitch),u_rotate_symbol:new _.Uniform1i(v,n.u_rotate_symbol),u_aspect_ratio:new _.Uniform1f(v,n.u_aspect_ratio),u_fade_change:new _.Uniform1f(v,n.u_fade_change),u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_label_plane_matrix:new _.UniformMatrix4f(v,n.u_label_plane_matrix),u_coord_matrix:new _.UniformMatrix4f(v,n.u_coord_matrix),u_is_text:new _.Uniform1i(v,n.u_is_text),u_pitch_with_map:new _.Uniform1i(v,n.u_pitch_with_map),u_texsize:new _.Uniform2f(v,n.u_texsize),u_texture:new _.Uniform1i(v,n.u_texture),u_gamma_scale:new _.Uniform1f(v,n.u_gamma_scale),u_device_pixel_ratio:new _.Uniform1f(v,n.u_device_pixel_ratio),u_is_halo:new _.Uniform1i(v,n.u_is_halo)}),symbolTextAndIcon:(v,n)=>({u_is_size_zoom_constant:new _.Uniform1i(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new _.Uniform1i(v,n.u_is_size_feature_constant),u_size_t:new _.Uniform1f(v,n.u_size_t),u_size:new _.Uniform1f(v,n.u_size),u_camera_to_center_distance:new _.Uniform1f(v,n.u_camera_to_center_distance),u_pitch:new _.Uniform1f(v,n.u_pitch),u_rotate_symbol:new _.Uniform1i(v,n.u_rotate_symbol),u_aspect_ratio:new _.Uniform1f(v,n.u_aspect_ratio),u_fade_change:new _.Uniform1f(v,n.u_fade_change),u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_label_plane_matrix:new _.UniformMatrix4f(v,n.u_label_plane_matrix),u_coord_matrix:new _.UniformMatrix4f(v,n.u_coord_matrix),u_is_text:new _.Uniform1i(v,n.u_is_text),u_pitch_with_map:new _.Uniform1i(v,n.u_pitch_with_map),u_texsize:new _.Uniform2f(v,n.u_texsize),u_texsize_icon:new _.Uniform2f(v,n.u_texsize_icon),u_texture:new _.Uniform1i(v,n.u_texture),u_texture_icon:new _.Uniform1i(v,n.u_texture_icon),u_gamma_scale:new _.Uniform1f(v,n.u_gamma_scale),u_device_pixel_ratio:new _.Uniform1f(v,n.u_device_pixel_ratio),u_is_halo:new _.Uniform1i(v,n.u_is_halo)}),background:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_opacity:new _.Uniform1f(v,n.u_opacity),u_color:new _.UniformColor(v,n.u_color)}),backgroundPattern:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_opacity:new _.Uniform1f(v,n.u_opacity),u_image:new _.Uniform1i(v,n.u_image),u_pattern_tl_a:new _.Uniform2f(v,n.u_pattern_tl_a),u_pattern_br_a:new _.Uniform2f(v,n.u_pattern_br_a),u_pattern_tl_b:new _.Uniform2f(v,n.u_pattern_tl_b),u_pattern_br_b:new _.Uniform2f(v,n.u_pattern_br_b),u_texsize:new _.Uniform2f(v,n.u_texsize),u_mix:new _.Uniform1f(v,n.u_mix),u_pattern_size_a:new _.Uniform2f(v,n.u_pattern_size_a),u_pattern_size_b:new _.Uniform2f(v,n.u_pattern_size_b),u_scale_a:new _.Uniform1f(v,n.u_scale_a),u_scale_b:new _.Uniform1f(v,n.u_scale_b),u_pixel_coord_upper:new _.Uniform2f(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new _.Uniform2f(v,n.u_pixel_coord_lower),u_tile_units_to_pixels:new _.Uniform1f(v,n.u_tile_units_to_pixels)}),terrain:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_texture:new _.Uniform1i(v,n.u_texture),u_ele_delta:new _.Uniform1f(v,n.u_ele_delta)}),terrainDepth:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_ele_delta:new _.Uniform1f(v,n.u_ele_delta)}),terrainCoords:(v,n)=>({u_matrix:new _.UniformMatrix4f(v,n.u_matrix),u_texture:new _.Uniform1i(v,n.u_texture),u_terrain_coords_id:new _.Uniform1f(v,n.u_terrain_coords_id),u_ele_delta:new _.Uniform1f(v,n.u_ele_delta)})};class $s{constructor(n,d,g){this.context=n;const b=n.gl;this.buffer=b.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Gs={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Zs{constructor(n,d,g,b){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=b,this.context=n;const E=n.gl;this.buffer=E.createBuffer(),n.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,d){for(let g=0;g<this.attributes.length;g++){const b=d.attributes[this.attributes[g].name];void 0!==b&&n.enableVertexAttribArray(b)}}setVertexAttribPointers(n,d,g){for(let b=0;b<this.attributes.length;b++){const E=this.attributes[b],P=d.attributes[E.name];void 0!==P&&n.vertexAttribPointer(P,E.components,n[Gs[E.type]],!1,this.itemSize,E.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class En{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ws extends En{getDefault(){return _.Color.transparent}set(n){const d=this.current;(n.r!==d.r||n.g!==d.g||n.b!==d.b||n.a!==d.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class wa extends En{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Ca extends En{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Pa extends En{getDefault(){return[!0,!0,!0,!0]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||n[2]!==d[2]||n[3]!==d[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ko extends En{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Ms extends En{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class ac extends En{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const d=this.current;(n.func!==d.func||n.ref!==d.ref||n.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Rl extends En{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||n[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Oa extends En{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;n?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=n,this.dirty=!1}}class _l extends En{getDefault(){return[0,1]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ds extends En{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;n?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=n,this.dirty=!1}}class la extends En{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class ca extends En{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;n?d.enable(d.BLEND):d.disable(d.BLEND),this.current=n,this.dirty=!1}}class Ra extends En{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Do extends En{getDefault(){return _.Color.transparent}set(n){const d=this.current;(n.r!==d.r||n.g!==d.g||n.b!==d.b||n.a!==d.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Yr extends En{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Ea extends En{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;n?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=n,this.dirty=!1}}class eo extends En{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Ss extends En{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class lo extends En{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Ys extends En{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class ms extends En{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||n[2]!==d[2]||n[3]!==d[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ts extends En{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Fa extends En{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ma extends En{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class xn extends En{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Lr extends En{getDefault(){return null}set(n){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Qa extends En{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.bindVertexArray(n),this.current=n,this.dirty=!1)}}class da extends En{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class sr extends En{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Vr extends En{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Ur extends En{constructor(n,d){super(n),this.context=n,this.parent=d}getDefault(){return null}}class ir extends Ur{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Fl extends Ur{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Da extends Ur{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Lo{constructor(n,d,g,b,E){this.context=n,this.width=d,this.height=g;const P=n.gl,N=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new ir(n,N),b)this.depthAttachment=E?new Da(n,N):new Fl(n,N);else if(E)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,d=this.colorAttachment.get();if(d&&n.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&n.deleteRenderbuffer(g)}n.deleteFramebuffer(this.framebuffer)}}class fn{constructor(n,d,g){this.blendFunction=n,this.blendColor=d,this.mask=g}}fn.Replace=[1,0],fn.disabled=new fn(fn.Replace,_.Color.transparent,[!1,!1,!1,!1]),fn.unblended=new fn(fn.Replace,_.Color.transparent,[!0,!0,!0,!0]),fn.alphaBlended=new fn([1,771],_.Color.transparent,[!0,!0,!0,!0]);class La{constructor(n){this.gl=n,this.clearColor=new Ws(this),this.clearDepth=new wa(this),this.clearStencil=new Ca(this),this.colorMask=new Pa(this),this.depthMask=new Ko(this),this.stencilMask=new Ms(this),this.stencilFunc=new ac(this),this.stencilOp=new Rl(this),this.stencilTest=new Oa(this),this.depthRange=new _l(this),this.depthTest=new Ds(this),this.depthFunc=new la(this),this.blend=new ca(this),this.blendFunc=new Ra(this),this.blendColor=new Do(this),this.blendEquation=new Yr(this),this.cullFace=new Ea(this),this.cullFaceSide=new eo(this),this.frontFace=new Ss(this),this.program=new lo(this),this.activeTexture=new Ys(this),this.viewport=new ms(this),this.bindFramebuffer=new Ts(this),this.bindRenderbuffer=new Fa(this),this.bindTexture=new Ma(this),this.bindVertexBuffer=new xn(this),this.bindElementBuffer=new Lr(this),this.bindVertexArray=new Qa(this),this.pixelStoreUnpack=new da(this),this.pixelStoreUnpackPremultiplyAlpha=new sr(this),this.pixelStoreUnpackFlipY=new Vr(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.HALF_FLOAT=n.HALF_FLOAT,n.getExtension("EXT_color_buffer_half_float"),this.RGBA16F=n.RGBA16F,this.RGB16F=n.RGB16F}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,d){return new $s(this,n,d)}createVertexBuffer(n,d,g){return new Zs(this,n,d,g)}createRenderbuffer(n,d,g){const b=this.gl,E=b.createRenderbuffer();return this.bindRenderbuffer.set(E),b.renderbufferStorage(b.RENDERBUFFER,n,d,g),this.bindRenderbuffer.set(null),E}createFramebuffer(n,d,g,b){return new Lo(this,n,d,g,b)}clear({color:n,depth:d,stencil:g}){const b=this.gl;let E=0;n&&(E|=b.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(E|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==g&&(E|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),b.clear(E)}setCullFace(n){!1===n.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){_.deepEqual(n.blendFunction,fn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){return this.gl.createVertexArray()}deleteVertexArray(n){return this.gl.deleteVertexArray(n)}unbindVAO(){this.bindVertexArray.set(null)}}class on{constructor(n,d,g){this.func=n,this.mask=d,this.range=g}}on.ReadOnly=!1,on.ReadWrite=!0,on.disabled=new on(519,on.ReadOnly,[0,1]);class vn{constructor(n,d,g,b,E,P){this.test=n,this.ref=d,this.mask=g,this.fail=b,this.depthFail=E,this.pass=P}}vn.disabled=new vn({func:519,mask:0},0,0,7680,7680,7680);class Bn{constructor(n,d,g){this.enable=n,this.mode=d,this.frontFace=g}}let Is;function en(v,n,d,g,b,E,P){const N=v.context,L=N.gl,G=v.useProgram("collisionBox"),ie=[];let te=0,ve=0;for(let He=0;He<g.length;He++){const bt=g[He],Rt=n.getTile(bt),ii=Rt.getBucket(d);if(!ii)continue;let I=bt.posMatrix;0===b[0]&&0===b[1]||(I=v.translatePosMatrix(bt.posMatrix,Rt,b,E));const A=P?ii.textCollisionBox:ii.iconCollisionBox,D=ii.collisionCircleArray;if(D.length>0){const F=_.create(),Z=I;_.mul(F,ii.placementInvProjMatrix,v.transform.glCoordMatrix),_.mul(F,F,ii.placementViewportMatrix),ie.push({circleArray:D,circleOffset:ve,transform:Z,invTransform:F,coord:bt}),te+=D.length/4,ve=te}A&&G.draw(N,L.LINES,on.disabled,vn.disabled,v.colorModeForRenderPass(),Bn.disabled,us(I,v.transform,Rt),v.style.map.terrain&&v.style.map.terrain.getTerrainData(bt),d.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,null,v.transform.zoom,null,null,A.collisionVertexBuffer)}if(!P||!ie.length)return;const Fe=v.useProgram("collisionCircle"),Pe=new _.CollisionCircleLayoutArray;Pe.resize(4*te),Pe._trim();let Ne=0;for(const He of ie)for(let bt=0;bt<He.circleArray.length/4;bt++){const Rt=4*bt,ii=He.circleArray[Rt+0],I=He.circleArray[Rt+1],A=He.circleArray[Rt+2],D=He.circleArray[Rt+3];Pe.emplace(Ne++,ii,I,A,D,0),Pe.emplace(Ne++,ii,I,A,D,1),Pe.emplace(Ne++,ii,I,A,D,2),Pe.emplace(Ne++,ii,I,A,D,3)}(!Is||Is.length<2*te)&&(Is=function(He){const bt=2*He,Rt=new _.QuadTriangleArray;Rt.resize(bt),Rt._trim();for(let ii=0;ii<bt;ii++){const I=6*ii;Rt.uint16[I+0]=4*ii+0,Rt.uint16[I+1]=4*ii+1,Rt.uint16[I+2]=4*ii+2,Rt.uint16[I+3]=4*ii+2,Rt.uint16[I+4]=4*ii+3,Rt.uint16[I+5]=4*ii+0}return Rt}(te));const Be=N.createIndexBuffer(Is,!0),at=N.createVertexBuffer(Pe,_.collisionCircleLayout.members,!0);for(const He of ie){const bt={u_matrix:He.transform,u_inv_matrix:He.invTransform,u_camera_to_center_distance:(Et=v.transform).cameraToCenterDistance,u_viewport_size:[Et.width,Et.height]};Fe.draw(N,L.TRIANGLES,on.disabled,vn.disabled,v.colorModeForRenderPass(),Bn.disabled,bt,v.style.map.terrain&&v.style.map.terrain.getTerrainData(He.coord),d.id,at,Be,_.SegmentVector.simpleSegment(0,2*He.circleOffset,He.circleArray.length,He.circleArray.length/2),null,v.transform.zoom,null,null,null)}var Et;at.destroy(),Be.destroy()}Bn.disabled=new Bn(!1,1029,2305),Bn.backCCW=new Bn(!0,1029,2305);const As=_.identity(new Float32Array(16));function X(v,n,d,g,b,E){const{horizontalAlign:P,verticalAlign:N}=_.getAnchorAlignment(v),L=-(P-.5)*n,G=-(N-.5)*d,ie=_.evaluateVariableOffset(v,g);return new _.Point((L/b+ie[0])*E,(G/b+ie[1])*E)}function q(v,n,d,g,b,E,P,N,L,G,ie){const te=v.text.placedSymbolArray,ve=v.text.dynamicLayoutVertexArray,Fe=v.icon.dynamicLayoutVertexArray,Pe={};ve.clear();for(let Ne=0;Ne<te.length;Ne++){const Be=te.get(Ne),at=Be.hidden||!Be.crossTileID||v.allowVerticalPlacement&&!Be.placedOrientation?null:g[Be.crossTileID];if(at){const Et=new _.Point(Be.anchorX,Be.anchorY),He=et(Et,d?P:E,ie),bt=Ei(b.cameraToCenterDistance,He.signedDistanceFromCamera);let Rt=_.evaluateSizeForFeature(v.textSizeData,L,Be)*bt/_.ONE_EM;d&&(Rt*=v.tilePixelRatio/N);const{width:ii,height:I,anchor:A,textOffset:D,textBoxScale:F}=at,Z=X(A,ii,I,D,F,Rt),ue=d?et(Et.add(Z),E,ie).point:He.point.add(n?Z.rotate(-b.angle):Z),le=v.allowVerticalPlacement&&Be.placedOrientation===_.WritingMode.vertical?Math.PI/2:0;for(let Ke=0;Ke<Be.numGlyphs;Ke++)_.addDynamicAttributes(ve,ue,le);G&&Be.associatedIconIndex>=0&&(Pe[Be.associatedIconIndex]={shiftedAnchor:ue,angle:le})}else fe(Be.numGlyphs,ve)}if(G){Fe.clear();const Ne=v.icon.placedSymbolArray;for(let Be=0;Be<Ne.length;Be++){const at=Ne.get(Be);if(at.hidden)fe(at.numGlyphs,Fe);else{const Et=Pe[Be];if(Et)for(let He=0;He<at.numGlyphs;He++)_.addDynamicAttributes(Fe,Et.shiftedAnchor,Et.angle);else fe(at.numGlyphs,Fe)}}v.icon.dynamicLayoutVertexBuffer.updateData(Fe)}v.text.dynamicLayoutVertexBuffer.updateData(ve)}function $(v,n,d){return d.iconsInText&&n?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Me(v,n,d,g,b,E,P,N,L,G,ie,te){const ve=v.context,Fe=ve.gl,Pe=v.transform,Ne="map"===N,Be="map"===L,at="viewport"!==N&&"point"!==d.layout.get("symbol-placement"),Et=Ne&&!Be&&!at,He=!d.layout.get("symbol-sort-key").isConstant();let bt=!1;const Rt=v.depthModeForSublayer(0,on.ReadOnly),ii=d.layout.get("text-variable-anchor"),I=[];for(const A of g){const D=n.getTile(A),F=D.getBucket(d);if(!F)continue;const Z=b?F.text:F.icon;if(!Z||!Z.segments.get().length||!Z.hasVisibleVertices)continue;const ue=Z.programConfigurations.get(d.id),le=b||F.sdfIcons,Ke=b?F.textSizeData:F.iconSizeData,ut=Be||0!==Pe.pitch,di=v.useProgram($(le,b,F),ue),vi=_.evaluateSizeForZoom(Ke,Pe.zoom),Hi=v.style.map.terrain&&v.style.map.terrain.getTerrainData(A);let Wi,kn,Tr,ur,rr=[0,0],Io=null;if(b)kn=D.glyphAtlasTexture,Tr=Fe.LINEAR,Wi=D.glyphAtlasTexture.size,F.iconsInText&&(rr=D.imageAtlasTexture.size,Io=D.imageAtlasTexture,ur=ut||v.options.rotating||v.options.zooming||"composite"===Ke.kind||"camera"===Ke.kind?Fe.LINEAR:Fe.NEAREST);else{const ro=1!==d.layout.get("icon-size").constantOr(0)||F.iconsNeedLinear;kn=D.imageAtlasTexture,Tr=le||v.options.rotating||v.options.zooming||ro||ut?Fe.LINEAR:Fe.NEAREST,Wi=D.imageAtlasTexture.size}const yo=vt(D,1,v.transform.zoom),$o=Qe(A.posMatrix,Be,Ne,v.transform,yo),uo=ze(A.posMatrix,Be,Ne,v.transform,yo),Qs=ii&&F.hasTextData(),Ga="none"!==d.layout.get("icon-text-fit")&&Qs&&F.hasIconData();if(at){const ro=v.style.map.terrain?(al,ea)=>v.style.map.terrain.getElevation(A,al,ea):null,vo="map"===d.layout.get("text-rotation-alignment");qi(F,A.posMatrix,v,b,$o,uo,Be,G,vo,ro)}const wr=v.translatePosMatrix(A.posMatrix,D,E,P),ho=at||b&&ii||Ga?As:$o,Nn=v.translatePosMatrix(uo,D,E,P,!0),$r=le&&0!==d.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1);let no;no=le?F.iconsInText?Zr(Ke.kind,vi,Et,Be,v,wr,ho,Nn,Wi,rr):Yn(Ke.kind,vi,Et,Be,v,wr,ho,Nn,b,Wi,!0):Qr(Ke.kind,vi,Et,Be,v,wr,ho,Nn,b,Wi);const Kn={program:di,buffers:Z,uniformValues:no,atlasTexture:kn,atlasTextureIcon:Io,atlasInterpolation:Tr,atlasInterpolationIcon:ur,isSDF:le,hasHalo:$r};if(He&&F.canOverlap){bt=!0;const ro=Z.segments.get();for(const vo of ro)I.push({segments:new _.SegmentVector([vo]),sortKey:vo.sortKey,state:Kn,terrainData:Hi})}else I.push({segments:Z.segments,sortKey:0,state:Kn,terrainData:Hi})}bt&&I.sort((A,D)=>A.sortKey-D.sortKey);for(const A of I){const D=A.state;if(ve.activeTexture.set(Fe.TEXTURE0),D.atlasTexture.bind(D.atlasInterpolation,Fe.CLAMP_TO_EDGE),D.atlasTextureIcon&&(ve.activeTexture.set(Fe.TEXTURE1),D.atlasTextureIcon&&D.atlasTextureIcon.bind(D.atlasInterpolationIcon,Fe.CLAMP_TO_EDGE)),D.isSDF){const F=D.uniformValues;D.hasHalo&&(F.u_is_halo=1,Ut(D.buffers,A.segments,d,v,D.program,Rt,ie,te,F,A.terrainData)),F.u_is_halo=0}Ut(D.buffers,A.segments,d,v,D.program,Rt,ie,te,D.uniformValues,A.terrainData)}}function Ut(v,n,d,g,b,E,P,N,L,G){const ie=g.context;b.draw(ie,ie.gl.TRIANGLES,E,P,N,Bn.disabled,L,G,d.id,v.layoutVertexBuffer,v.indexBuffer,n,d.paint,g.transform.zoom,v.programConfigurations.get(d.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Yi(v,n,d,g,b){if(!d||!g||!g.imageAtlas)return;const E=g.imageAtlas.patternPositions;let P=E[d.to.toString()],N=E[d.from.toString()];if(!P||!N){const L=b.getPaintProperty(n);P=E[L],N=E[L]}P&&N&&v.setConstantPatternPositions(P,N)}function mr(v,n,d,g,b,E,P){const N=v.context.gl,L="fill-pattern",G=d.paint.get(L),ie=G&&G.constantOr(1),te=d.getCrossfadeParameters();let ve,Fe,Pe,Ne,Be;P?(Fe=ie&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ve=N.LINES):(Fe=ie?"fillPattern":"fill",ve=N.TRIANGLES);const at=G.constantOr(null);for(const Et of g){const He=n.getTile(Et);if(ie&&!He.patternsLoaded())continue;const bt=He.getBucket(d);if(!bt)continue;const Rt=bt.programConfigurations.get(d.id),ii=v.useProgram(Fe,Rt),I=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Et);ie&&(v.context.activeTexture.set(N.TEXTURE0),He.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Rt.updatePaintBuffers(te)),Yi(Rt,L,at,He,d);const A=I?Et:null,D=v.translatePosMatrix(A?A.posMatrix:Et.posMatrix,He,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(P){Ne=bt.indexBuffer2,Be=bt.segments2;const F=[N.drawingBufferWidth,N.drawingBufferHeight];Pe="fillOutlinePattern"===Fe&&ie?po(D,v,te,He,F):js(D,F)}else Ne=bt.indexBuffer,Be=bt.segments,Pe=ie?or(D,v,te,He):Cs(D);ii.draw(v.context,ve,b,v.stencilModeForClipping(Et),E,Bn.disabled,Pe,I,d.id,bt.layoutVertexBuffer,Ne,Be,d.paint,v.transform.zoom,Rt)}}function jt(v,n,d,g,b,E,P){const N=v.context,L=N.gl,G="fill-extrusion-pattern",ie=d.paint.get(G),te=ie.constantOr(1),ve=d.getCrossfadeParameters(),Fe=d.paint.get("fill-extrusion-opacity"),Pe=ie.constantOr(null);for(const Ne of g){const Be=n.getTile(Ne),at=Be.getBucket(d);if(!at)continue;const Et=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ne),He=at.programConfigurations.get(d.id),bt=v.useProgram(te?"fillExtrusionPattern":"fillExtrusion",He);te&&(v.context.activeTexture.set(L.TEXTURE0),Be.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),He.updatePaintBuffers(ve)),Yi(He,G,Pe,Be,d);const Rt=v.translatePosMatrix(Ne.posMatrix,Be,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ii=d.paint.get("fill-extrusion-vertical-gradient"),I=te?sa(Rt,v,ii,Fe,Ne,ve,Be):ws(Rt,v,ii,Fe);bt.draw(N,N.gl.TRIANGLES,b,E,P,Bn.backCCW,I,Et,d.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,d.paint,v.transform.zoom,He,v.style.map.terrain&&at.centroidVertexBuffer)}}function gn(v,n,d,g,b,E,P){const N=v.context,L=N.gl,G=d.fbo;if(!G)return;const ie=v.useProgram("hillshade"),te=v.style.map.terrain&&v.style.map.terrain.getTerrainData(n);N.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,G.colorAttachment.get()),ie.draw(N,L.TRIANGLES,b,E,P,Bn.disabled,((ve,Fe,Pe,Ne)=>{const Be=Pe.paint.get("hillshade-shadow-color"),at=Pe.paint.get("hillshade-highlight-color"),Et=Pe.paint.get("hillshade-accent-color");let He=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Pe.paint.get("hillshade-illumination-anchor")&&(He-=ve.transform.angle);const bt=!ve.options.moving;return{u_matrix:Ne?Ne.posMatrix:ve.transform.calculatePosMatrix(Fe.tileID.toUnwrapped(),bt),u_image:0,u_latrange:hs(0,Fe.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),He],u_shadow:Be,u_highlight:at,u_accent:Et}})(v,d,g,te?n:null),te,g.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function ks(v,n,d,g,b,E){const P=v.context,N=P.gl,L=n.dem;if(L&&L.data){const G=L.dim,ie=L.stride,te=L.getPixels();if(P.activeTexture.set(N.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||v.getTileTexture(ie),n.demTexture){const Fe=n.demTexture;Fe.update(te,{premultiply:!1}),Fe.bind(N.NEAREST,N.CLAMP_TO_EDGE)}else n.demTexture=new kt(P,te,N.RGBA,{premultiply:!1}),n.demTexture.bind(N.NEAREST,N.CLAMP_TO_EDGE);P.activeTexture.set(N.TEXTURE0);let ve=n.fbo;if(!ve){const Fe=new kt(P,{width:G,height:G,data:null},N.RGBA);Fe.bind(N.LINEAR,N.CLAMP_TO_EDGE),ve=n.fbo=P.createFramebuffer(G,G,!0,!1),ve.colorAttachment.set(Fe.texture)}P.bindFramebuffer.set(ve.framebuffer),P.viewport.set([0,0,G,G]),v.useProgram("hillshadePrepare").draw(P,N.TRIANGLES,g,b,E,Bn.disabled,((Fe,Pe)=>{const Ne=Pe.stride,Be=_.create();return _.ortho(Be,0,_.EXTENT,-_.EXTENT,0,0,1),_.translate(Be,Be,[0,-_.EXTENT,0]),{u_matrix:Be,u_image:1,u_dimension:[Ne,Ne],u_zoom:Fe.overscaledZ,u_unpack:Pe.getUnpackVector()}})(n.tileID,L),null,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ar(v,n,d,g,b,E){const P=g.paint.get("raster-fade-duration");if(!E&&P>0){const N=_.exported.now(),L=(N-v.timeAdded)/P,G=n?(N-n.timeAdded)/P:-1,ie=d.getSource(),te=b.coveringZoomLevel({tileSize:ie.tileSize,roundZoom:ie.roundZoom}),ve=!n||Math.abs(n.tileID.overscaledZ-te)>Math.abs(v.tileID.overscaledZ-te),Fe=ve&&v.refreshedUponExpiration?1:_.clamp(ve?L:1-G,0,1);return v.refreshedUponExpiration&&L>=1&&(v.refreshedUponExpiration=!1),n?{opacity:1,mix:1-Fe}:{opacity:Fe,mix:0}}return{opacity:1,mix:0}}const br=new _.Color(1,0,0,1),No=new _.Color(0,1,0,1),Na=new _.Color(0,0,1,1),zo=new _.Color(1,0,1,1),el=new _.Color(0,1,1,1);function fs(v,n,d,g){Sa(v,0,n+d/2,v.transform.width,d,g)}function za(v,n,d,g){Sa(v,n-d/2,0,d,v.transform.height,g)}function Sa(v,n,d,g,b,E){const P=v.context,N=P.gl;N.enable(N.SCISSOR_TEST),N.scissor(n*v.pixelRatio,d*v.pixelRatio,g*v.pixelRatio,b*v.pixelRatio),P.clear({color:E}),N.disable(N.SCISSOR_TEST)}function Ll(v,n,d){const g=v.context,b=g.gl,E=d.posMatrix,P=v.useProgram("debug"),N=on.disabled,L=vn.disabled,G=v.colorModeForRenderPass(),te=v.style.map.terrain&&v.style.map.terrain.getTerrainData(d);g.activeTexture.set(b.TEXTURE0);const ve=n.getTileByID(d.key).latestRawTileData,Fe=Math.floor((ve&&ve.byteLength||0)/1024),Pe=n.getTile(d).tileSize,Ne=512/Math.min(Pe,512)*(d.overscaledZ/v.transform.zoom)*.5;let Be=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Be+=` => ${d.overscaledZ}`),function(at,Et){at.initDebugOverlayCanvas();const He=at.debugOverlayCanvas,bt=at.context.gl,Rt=at.debugOverlayCanvas.getContext("2d");Rt.clearRect(0,0,He.width,He.height),Rt.shadowColor="white",Rt.shadowBlur=2,Rt.lineWidth=1.5,Rt.strokeStyle="white",Rt.textBaseline="top",Rt.font="bold 36px Open Sans, sans-serif",Rt.fillText(Et,5,5),Rt.strokeText(Et,5,5),at.debugOverlayTexture.update(He),at.debugOverlayTexture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE)}(v,`${Be} ${Fe}kB`),P.draw(g,b.TRIANGLES,N,L,fn.alphaBlended,Bn.disabled,Es(E,_.Color.transparent,Ne),null,"$debug",v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),P.draw(g,b.LINE_STRIP,N,L,G,Bn.disabled,Es(E,_.Color.red),te,"$debug",v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function qr(v,n,d){const g=v.context,b=g.gl,E=v.colorModeForRenderPass(),P=new on(b.LEQUAL,on.ReadWrite,v.depthRangeFor3D),N=v.useProgram("terrain"),L=n.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,v.width,v.height]);for(const G of d){const ie=v.renderToTexture.getTexture(G),te=n.getTerrainData(G.tileID);g.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,ie.texture);const ve={u_matrix:v.transform.calculatePosMatrix(G.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(v.transform.zoom)};N.draw(g,b.TRIANGLES,P,vn.disabled,E,Bn.backCCW,ve,te,"terrain",L.vertexBuffer,L.indexBuffer,L.segments)}}const Bo={symbol:function(v,n,d,g,b){if("translucent"!==v.renderPass)return;const E=vn.disabled,P=v.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(N,L,G,ie,te,ve,Fe){const Pe=L.transform,Ne="map"===te,Be="map"===ve;for(const at of N){const Et=ie.getTile(at),He=Et.getBucket(G);if(!He||!He.text||!He.text.segments.get().length)continue;const bt=_.evaluateSizeForZoom(He.textSizeData,Pe.zoom),Rt=vt(Et,1,L.transform.zoom),ii=Qe(at.posMatrix,Be,Ne,L.transform,Rt),I="none"!==G.layout.get("icon-text-fit")&&He.hasIconData();if(bt){const A=Math.pow(2,Pe.zoom-Et.tileID.overscaledZ);q(He,Ne,Be,Fe,Pe,ii,at.posMatrix,A,bt,I,L.style.map.terrain?(D,F)=>L.style.map.terrain.getElevation(at,D,F):null)}}}(g,v,d,n,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),b),0!==d.paint.get("icon-opacity").constantOr(1)&&Me(v,n,d,g,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),E,P),0!==d.paint.get("text-opacity").constantOr(1)&&Me(v,n,d,g,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),E,P),n.map.showCollisionBoxes&&(en(v,n,d,g,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),en(v,n,d,g,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(v,n,d,g){if("translucent"!==v.renderPass)return;const b=d.paint.get("circle-opacity"),E=d.paint.get("circle-stroke-width"),P=d.paint.get("circle-stroke-opacity"),N=!d.layout.get("circle-sort-key").isConstant();if(0===b.constantOr(1)&&(0===E.constantOr(1)||0===P.constantOr(1)))return;const L=v.context,G=L.gl,ie=v.depthModeForSublayer(0,on.ReadOnly),te=vn.disabled,ve=v.colorModeForRenderPass(),Fe=[];for(let Pe=0;Pe<g.length;Pe++){const Ne=g[Pe],Be=n.getTile(Ne),at=Be.getBucket(d);if(!at)continue;const Et=at.programConfigurations.get(d.id),He=v.useProgram("circle",Et),bt=at.layoutVertexBuffer,Rt=at.indexBuffer,ii=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ne),I={programConfiguration:Et,program:He,layoutVertexBuffer:bt,indexBuffer:Rt,uniformValues:Jr(v,Ne,Be,d),terrainData:ii};if(N){const A=at.segments.get();for(const D of A)Fe.push({segments:new _.SegmentVector([D]),sortKey:D.sortKey,state:I})}else Fe.push({segments:at.segments,sortKey:0,state:I})}N&&Fe.sort((Pe,Ne)=>Pe.sortKey-Ne.sortKey);for(const Pe of Fe){const{programConfiguration:Ne,program:Be,layoutVertexBuffer:at,indexBuffer:Et,uniformValues:He,terrainData:bt}=Pe.state;Be.draw(L,G.TRIANGLES,ie,te,ve,Bn.disabled,He,bt,d.id,at,Et,Pe.segments,d.paint,v.transform.zoom,Ne)}},heatmap:function(v,n,d,g){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===v.renderPass){const b=v.context,E=b.gl,P=vn.disabled,N=new fn([E.ONE,E.ONE],_.Color.transparent,[!0,!0,!0,!0]);(function(L,G,ie){const te=L.gl;L.activeTexture.set(te.TEXTURE1),L.viewport.set([0,0,G.width/4,G.height/4]);let ve=ie.heatmapFbo;if(ve)te.bindTexture(te.TEXTURE_2D,ve.colorAttachment.get()),L.bindFramebuffer.set(ve.framebuffer);else{const Fe=te.createTexture();te.bindTexture(te.TEXTURE_2D,Fe),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MAG_FILTER,te.LINEAR),ve=ie.heatmapFbo=L.createFramebuffer(G.width/4,G.height/4,!1,!1),function(Pe,Ne,Be,at){var Et,He;const bt=Pe.gl,Rt=null!==(Et=Pe.HALF_FLOAT)&&void 0!==Et?Et:bt.UNSIGNED_BYTE,ii=null!==(He=Pe.RGBA16F)&&void 0!==He?He:bt.RGBA;bt.texImage2D(bt.TEXTURE_2D,0,ii,Ne.width/4,Ne.height/4,0,bt.RGBA,Rt,null),at.colorAttachment.set(Be)}(L,G,Fe,ve)}})(b,v,d),b.clear({color:_.Color.transparent});for(let L=0;L<g.length;L++){const G=g[L];if(n.hasRenderableParent(G))continue;const ie=n.getTile(G),te=ie.getBucket(d);if(!te)continue;const ve=te.programConfigurations.get(d.id),Fe=v.useProgram("heatmap",ve),{zoom:Pe}=v.transform;Fe.draw(b,E.TRIANGLES,on.disabled,P,N,Bn.disabled,Gr(G.posMatrix,ie,Pe,d.paint.get("heatmap-intensity")),null,d.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,d.paint,v.transform.zoom,ve)}b.viewport.set([0,0,v.width,v.height])}else"translucent"===v.renderPass&&(v.context.setColorMode(v.colorModeForRenderPass()),function(b,E){const P=b.context,N=P.gl,L=E.heatmapFbo;if(!L)return;P.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,L.colorAttachment.get()),P.activeTexture.set(N.TEXTURE1);let G=E.colorRampTexture;G||(G=E.colorRampTexture=new kt(P,E.colorRamp,N.RGBA)),G.bind(N.LINEAR,N.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(P,N.TRIANGLES,on.disabled,vn.disabled,b.colorModeForRenderPass(),Bn.disabled,((ie,te,ve,Fe)=>{const Pe=_.create();_.ortho(Pe,0,ie.width,ie.height,0,0,1);const Ne=ie.context.gl;return{u_matrix:Pe,u_world:[Ne.drawingBufferWidth,Ne.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}})(b,E),null,E.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,E.paint,b.transform.zoom)}(v,d))},line:function(v,n,d,g){if("translucent"!==v.renderPass)return;const b=d.paint.get("line-opacity"),E=d.paint.get("line-width");if(0===b.constantOr(1)||0===E.constantOr(1))return;const P=v.depthModeForSublayer(0,on.ReadOnly),N=v.colorModeForRenderPass(),L=d.paint.get("line-dasharray"),G=d.paint.get("line-pattern"),ie=G.constantOr(1),te=d.paint.get("line-gradient"),ve=d.getCrossfadeParameters(),Fe=ie?"linePattern":L?"lineSDF":te?"lineGradient":"line",Pe=v.context,Ne=Pe.gl;let Be=!0;for(const at of g){const Et=n.getTile(at);if(ie&&!Et.patternsLoaded())continue;const He=Et.getBucket(d);if(!He)continue;const bt=He.programConfigurations.get(d.id),Rt=v.context.program.get(),ii=v.useProgram(Fe,bt),I=Be||ii.program!==Rt,A=v.style.map.terrain&&v.style.map.terrain.getTerrainData(at),D=G.constantOr(null);if(D&&Et.imageAtlas){const ue=Et.imageAtlas,le=ue.patternPositions[D.to.toString()],Ke=ue.patternPositions[D.from.toString()];le&&Ke&&bt.setConstantPatternPositions(le,Ke)}const F=A?at:null,Z=ie?Mo(v,Et,d,ve,F):L?ao(v,Et,d,L,ve,F):te?Hs(v,Et,d,He.lineClipsArray.length,F):zr(v,Et,d,F);if(ie)Pe.activeTexture.set(Ne.TEXTURE0),Et.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),bt.updatePaintBuffers(ve);else if(L&&(I||v.lineAtlas.dirty))Pe.activeTexture.set(Ne.TEXTURE0),v.lineAtlas.bind(Pe);else if(te){const ue=He.gradients[d.id];let le=ue.texture;if(d.gradientVersion!==ue.version){let Ke=256;if(d.stepInterpolant){const ut=n.getSource().maxzoom,di=at.canonical.z===ut?Math.ceil(1<<v.transform.maxZoom-at.canonical.z):1;Ke=_.clamp(_.nextPowerOfTwo(He.maxLineLength/_.EXTENT*1024*di),256,Pe.maxTextureSize)}ue.gradient=_.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Ke,image:ue.gradient||void 0,clips:He.lineClipsArray}),ue.texture?ue.texture.update(ue.gradient):ue.texture=new kt(Pe,ue.gradient,Ne.RGBA),ue.version=d.gradientVersion,le=ue.texture}Pe.activeTexture.set(Ne.TEXTURE0),le.bind(d.stepInterpolant?Ne.NEAREST:Ne.LINEAR,Ne.CLAMP_TO_EDGE)}ii.draw(Pe,Ne.TRIANGLES,P,v.stencilModeForClipping(at),N,Bn.disabled,Z,A,d.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,d.paint,v.transform.zoom,bt,He.layoutVertexBuffer2),Be=!1}},fill:function(v,n,d,g){const b=d.paint.get("fill-color"),E=d.paint.get("fill-opacity");if(0===E.constantOr(1))return;const P=v.colorModeForRenderPass(),N=d.paint.get("fill-pattern"),L=v.opaquePassEnabledForLayer()&&!N.constantOr(1)&&1===b.constantOr(_.Color.transparent).a&&1===E.constantOr(0)?"opaque":"translucent";if(v.renderPass===L){const G=v.depthModeForSublayer(1,"opaque"===v.renderPass?on.ReadWrite:on.ReadOnly);mr(v,n,d,g,G,P,!1)}if("translucent"===v.renderPass&&d.paint.get("fill-antialias")){const G=v.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,on.ReadOnly);mr(v,n,d,g,G,P,!0)}},"fill-extrusion":function(v,n,d,g){const b=d.paint.get("fill-extrusion-opacity");if(0!==b&&"translucent"===v.renderPass){const E=new on(v.context.gl.LEQUAL,on.ReadWrite,v.depthRangeFor3D);if(1!==b||d.paint.get("fill-extrusion-pattern").constantOr(1))jt(v,n,d,g,E,vn.disabled,fn.disabled),jt(v,n,d,g,E,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const P=v.colorModeForRenderPass();jt(v,n,d,g,E,vn.disabled,P)}}},hillshade:function(v,n,d,g){if("offscreen"!==v.renderPass&&"translucent"!==v.renderPass)return;const b=v.context,E=v.depthModeForSublayer(0,on.ReadOnly),P=v.colorModeForRenderPass(),[N,L]="translucent"===v.renderPass?v.stencilConfigForOverlap(g):[{},g];for(const G of L){const ie=n.getTile(G);void 0!==ie.needsHillshadePrepare&&ie.needsHillshadePrepare&&"offscreen"===v.renderPass?ks(v,ie,d,E,vn.disabled,P):"translucent"===v.renderPass&&gn(v,G,ie,d,E,N[G.overscaledZ],P)}b.viewport.set([0,0,v.width,v.height])},raster:function(v,n,d,g){if("translucent"!==v.renderPass||0===d.paint.get("raster-opacity")||!g.length)return;const b=v.context,E=b.gl,P=n.getSource(),N=v.useProgram("raster"),L=v.colorModeForRenderPass(),[G,ie]=P instanceof pi?[{},g]:v.stencilConfigForOverlap(g),te=ie[ie.length-1].overscaledZ,ve=!v.options.moving;for(const Fe of ie){const Pe=v.depthModeForSublayer(Fe.overscaledZ-te,1===d.paint.get("raster-opacity")?on.ReadWrite:on.ReadOnly,E.LESS),Ne=n.getTile(Fe);Ne.registerFadeDuration(d.paint.get("raster-fade-duration"));const Be=n.findLoadedParent(Fe,0),at=ar(Ne,Be,n,d,v.transform,v.style.map.terrain);let Et,He;const bt="nearest"===d.paint.get("raster-resampling")?E.NEAREST:E.LINEAR;b.activeTexture.set(E.TEXTURE0),Ne.texture.bind(bt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(E.TEXTURE1),Be?(Be.texture.bind(bt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Et=Math.pow(2,Be.tileID.overscaledZ-Ne.tileID.overscaledZ),He=[Ne.tileID.canonical.x*Et%1,Ne.tileID.canonical.y*Et%1]):Ne.texture.bind(bt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);const Rt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Fe),ii=Rt?Fe:null,I=ii?ii.posMatrix:v.transform.calculatePosMatrix(Fe.toUnwrapped(),ve),A=fr(I,He||[0,0],Et||1,at,d);P instanceof pi?N.draw(b,E.TRIANGLES,Pe,vn.disabled,L,Bn.disabled,A,Rt,d.id,P.boundsBuffer,v.quadTriangleIndexBuffer,P.boundsSegments):N.draw(b,E.TRIANGLES,Pe,G[Fe.overscaledZ],L,Bn.disabled,A,Rt,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}},background:function(v,n,d,g){const b=d.paint.get("background-color"),E=d.paint.get("background-opacity");if(0===E)return;const P=v.context,N=P.gl,L=v.transform,G=L.tileSize,ie=d.paint.get("background-pattern");if(v.isPatternMissing(ie))return;const te=!ie&&1===b.a&&1===E&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==te)return;const ve=vn.disabled,Fe=v.depthModeForSublayer(0,"opaque"===te?on.ReadWrite:on.ReadOnly),Pe=v.colorModeForRenderPass(),Ne=v.useProgram(ie?"backgroundPattern":"background"),Be=g||L.coveringTiles({tileSize:G,terrain:v.style.map.terrain});ie&&(P.activeTexture.set(N.TEXTURE0),v.imageManager.bind(v.context));const at=d.getCrossfadeParameters();for(const Et of Be){const He=g?Et.posMatrix:v.transform.calculatePosMatrix(Et.toUnwrapped()),bt=ie?xa(He,E,v,ie,{tileID:Et,tileSize:G},at):Br(He,E,b),Rt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Et);Ne.draw(P,N.TRIANGLES,Fe,ve,Pe,Bn.disabled,bt,Rt,d.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}},debug:function(v,n,d){for(let g=0;g<d.length;g++)Ll(v,n,d[g])},custom:function(v,n,d){const g=v.context,b=d.implementation;if("offscreen"===v.renderPass){const E=b.prerender;E&&(v.setCustomLayerDefaults(),g.setColorMode(v.colorModeForRenderPass()),E.call(b,g.gl,v.transform.customLayerMatrix()),g.setDirty(),v.setBaseState())}else if("translucent"===v.renderPass){v.setCustomLayerDefaults(),g.setColorMode(v.colorModeForRenderPass()),g.setStencilMode(vn.disabled);const E="3d"===b.renderingMode?new on(v.context.gl.LEQUAL,on.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,on.ReadOnly);g.setDepthMode(E),b.render(g.gl,v.transform.customLayerMatrix()),g.setDirty(),v.setBaseState(),g.bindFramebuffer.set(null)}}};class Xo{constructor(n,d){this.context=new La(n),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:_.create(),renderTime:0},this.setup(),this.numSublayers=nn.maxUnderzooming+nn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xr}resize(n,d,g){if(this.width=n*g,this.height=d*g,this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const n=this.context,d=new _.PosArray;d.emplaceBack(0,0),d.emplaceBack(_.EXTENT,0),d.emplaceBack(0,_.EXTENT),d.emplaceBack(_.EXTENT,_.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(d,vr.members),this.tileExtentSegments=_.SegmentVector.simpleSegment(0,0,4,2);const g=new _.PosArray;g.emplaceBack(0,0),g.emplaceBack(_.EXTENT,0),g.emplaceBack(0,_.EXTENT),g.emplaceBack(_.EXTENT,_.EXTENT),this.debugBuffer=n.createVertexBuffer(g,vr.members),this.debugSegments=_.SegmentVector.simpleSegment(0,0,4,5);const b=new _.RasterBoundsArray;b.emplaceBack(0,0,0,0),b.emplaceBack(_.EXTENT,0,_.EXTENT,0),b.emplaceBack(0,_.EXTENT,0,_.EXTENT),b.emplaceBack(_.EXTENT,_.EXTENT,_.EXTENT,_.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(b,ei.members),this.rasterBoundsSegments=_.SegmentVector.simpleSegment(0,0,4,2);const E=new _.PosArray;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(E,vr.members),this.viewportSegments=_.SegmentVector.simpleSegment(0,0,4,2);const P=new _.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(P);const N=new _.TriangleIndexArray;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(N);const L=this.context.gl;this.stencilClearMode=new vn({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO)}clearStencil(){const n=this.context,d=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=_.create();_.ortho(g,0,this.width,this.height,0,0,1),_.scale(g,g,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,d.TRIANGLES,on.disabled,this.stencilClearMode,fn.disabled,Bn.disabled,Wn(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,d){if(this.currentStencilSource===n.source||!n.isTileClipped()||!d||!d.length)return;this.currentStencilSource=n.source;const g=this.context,b=g.gl;this.nextStencilID+d.length>256&&this.clearStencil(),g.setColorMode(fn.disabled),g.setDepthMode(on.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of d){const N=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);E.draw(g,b.TRIANGLES,on.disabled,new vn({func:b.ALWAYS,mask:0},N,255,b.KEEP,b.KEEP,b.REPLACE),fn.disabled,Bn.disabled,Wn(P.posMatrix),L,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,d=this.context.gl;return new vn({func:d.NOTEQUAL,mask:255},n,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(n){const d=this.context.gl;return new vn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(n){const d=this.context.gl,g=n.sort((P,N)=>N.overscaledZ-P.overscaledZ),b=g[g.length-1].overscaledZ,E=g[0].overscaledZ-b+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const P={};for(let N=0;N<E;N++)P[N+b]=new vn({func:d.GEQUAL,mask:255},N+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=E,[P,g]}return[{[b]:vn.disabled},g]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new fn([n.CONSTANT_COLOR,n.ONE],new _.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?fn.unblended:fn.alphaBlended}depthModeForSublayer(n,d,g){if(!this.opaquePassEnabledForLayer())return on.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new on(g||this.context.gl.LEQUAL,d,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,d){this.style=n,this.options=d,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(_.exported.now()),this.imageManager.beginFrame();const g=this.style._order,b=this.style.sourceCaches,E={},P={},N={};for(const L in b){const G=b[L];G.used&&G.prepare(this.context),E[L]=G.getVisibleCoordinates(),P[L]=E[L].slice().reverse(),N[L]=G.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<g.length;L++)if(this.style._layers[g[L]].is3D()){this.opaquePassCutoff=L;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const L=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!_.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||L.length)&&(_.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(G,ie){const te=G.context,ve=te.gl,Fe=fn.unblended,Pe=new on(ve.LEQUAL,on.ReadWrite,[0,1]),Ne=ie.getTerrainMesh(),Be=ie.sourceCache.getRenderableTiles(),at=G.useProgram("terrainDepth");te.bindFramebuffer.set(ie.getFramebuffer("depth").framebuffer),te.viewport.set([0,0,G.width/devicePixelRatio,G.height/devicePixelRatio]),te.clear({color:_.Color.transparent,depth:1});for(const Et of Be){const He=ie.getTerrainData(Et.tileID),bt={u_matrix:G.transform.calculatePosMatrix(Et.tileID.toUnwrapped()),u_ele_delta:ie.getMeshFrameDelta(G.transform.zoom)};at.draw(te,ve.TRIANGLES,Pe,vn.disabled,Fe,Bn.backCCW,bt,He,"terrain",Ne.vertexBuffer,Ne.indexBuffer,Ne.segments)}te.bindFramebuffer.set(null),te.viewport.set([0,0,G.width,G.height])}(this,this.style.map.terrain),function(G,ie){const te=G.context,ve=te.gl,Fe=fn.unblended,Pe=new on(ve.LEQUAL,on.ReadWrite,[0,1]),Ne=ie.getTerrainMesh(),Be=ie.getCoordsTexture(),at=ie.sourceCache.getRenderableTiles(),Et=G.useProgram("terrainCoords");te.bindFramebuffer.set(ie.getFramebuffer("coords").framebuffer),te.viewport.set([0,0,G.width/devicePixelRatio,G.height/devicePixelRatio]),te.clear({color:_.Color.transparent,depth:1}),ie.coordsIndex=[];for(const He of at){const bt=ie.getTerrainData(He.tileID);te.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_2D,Be.texture);const Rt={u_matrix:G.transform.calculatePosMatrix(He.tileID.toUnwrapped()),u_terrain_coords_id:(255-ie.coordsIndex.length)/255,u_texture:0,u_ele_delta:ie.getMeshFrameDelta(G.transform.zoom)};Et.draw(te,ve.TRIANGLES,Pe,vn.disabled,Fe,Bn.backCCW,Rt,bt,"terrain",Ne.vertexBuffer,Ne.indexBuffer,Ne.segments),ie.coordsIndex.push(He.tileID.key)}te.bindFramebuffer.set(null),te.viewport.set([0,0,G.width,G.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const L of g){const G=this.style._layers[L];if(!G.hasOffscreenPass()||G.isHidden(this.transform.zoom))continue;const ie=P[G.source];("custom"===G.type||ie.length)&&this.renderLayer(this,b[G.source],G,ie)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?_.Color.black:_.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const L=this.style._layers[g[this.currentLayer]],G=b[L.source],ie=E[L.source];this._renderTileClippingMasks(L,ie),this.renderLayer(this,G,L,ie)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const L=this.style._layers[g[this.currentLayer]],G=b[L.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(L))continue;const ie=("symbol"===L.type?N:P)[L.source];this._renderTileClippingMasks(L,E[L.source]),this.renderLayer(this,G,L,ie)}if(this.options.showTileBoundaries){const L=function(G,ie){let te=null;const ve=Object.values(G._layers).flatMap(Be=>Be.source&&!Be.isHidden(ie)?[G.sourceCaches[Be.source]]:[]),Fe=ve.filter(Be=>"vector"===Be.getSource().type),Pe=ve.filter(Be=>"vector"!==Be.getSource().type),Ne=Be=>{(!te||te.getSource().maxzoom<Be.getSource().maxzoom)&&(te=Be)};return Fe.forEach(Be=>Ne(Be)),te||Pe.forEach(Be=>Ne(Be)),te}(this.style,this.transform.zoom);L&&Bo.debug(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){const G=L.transform.padding;fs(L,L.transform.height-(G.top||0),3,br),fs(L,G.bottom||0,3,No),za(L,G.left||0,3,Na),za(L,L.transform.width-(G.right||0),3,zo);const ie=L.transform.centerPoint;var te,ve,Fe,Pe;Sa(te=L,(ve=ie.x)-1,(Fe=L.transform.height-ie.y)-10,2,20,Pe=el),Sa(te,ve-10,Fe-1,20,2,Pe)}(this),this.context.setDefault()}renderLayer(n,d,g,b){g.isHidden(this.transform.zoom)||("background"===g.type||"custom"===g.type||(b||[]).length)&&(this.id=g.id,Bo[g.type](n,d,g,b,this.style.placement.variableOffsets))}translatePosMatrix(n,d,g,b,E){if(!g[0]&&!g[1])return n;const P=E?"map"===b?this.transform.angle:0:"viewport"===b?-this.transform.angle:0;if(P){const G=Math.sin(P),ie=Math.cos(P);g=[g[0]*ie-g[1]*G,g[0]*G+g[1]*ie]}const N=[E?g[0]:vt(d,g[0],this.transform.zoom),E?g[1]:vt(d,g[1],this.transform.zoom),0],L=new Float32Array(16);return _.translate(L,n,N),L}saveTileTexture(n){const d=this._tileTextures[n.size[0]];d?d.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const d=this._tileTextures[n];return d&&d.length>0?d.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const d=this.imageManager.getPattern(n.from.toString()),g=this.imageManager.getPattern(n.to.toString());return!d||!g}useProgram(n,d){this.cache=this.cache||{};const g=n+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new sn(this.context,n,zn[n],d,fo[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new kt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class gs{constructor(n,d){this.points=n,this.planes=d}static fromInvProjectionMatrix(n,d,g){const b=Math.pow(2,g),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(N=>{const L=1/(N=_.transformMat4([],N,n))[3]/d*b;return _.mul$1(N,N,[L,L,1/N[3],L])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(N=>{const L=function(ve,Fe){var Pe=Fe[0],Ne=Fe[1],Be=Fe[2],at=Pe*Pe+Ne*Ne+Be*Be;return at>0&&(at=1/Math.sqrt(at)),ve[0]=Fe[0]*at,ve[1]=Fe[1]*at,ve[2]=Fe[2]*at,ve}([],(ve=[],Fe=Wt([],E[N[0]],E[N[1]]),Pe=Wt([],E[N[2]],E[N[1]]),Ne=Fe[0],Et=Pe[0],ve[0]=(Be=Fe[1])*(bt=Pe[2])-(at=Fe[2])*(He=Pe[1]),ve[1]=at*Et-Ne*bt,ve[2]=Ne*He-Be*Et,ve)),G=-((ie=L)[0]*(te=E[N[1]])[0]+ie[1]*te[1]+ie[2]*te[2]);var ve,Fe,Pe,Ne,Be,at,Et,He,bt,ie,te;return L.concat(G)});return new gs(E,P)}}class In{constructor(n,d){var g,b,E;this.min=n,this.max=d,this.center=function(g,b,E){return g[0]=.5*b[0],g[1]=.5*b[1],g[2]=.5*b[2],g}([],((g=[])[0]=(b=this.min)[0]+(E=this.max)[0],g[1]=b[1]+E[1],g[2]=b[2]+E[2],g))}quadrant(n){const d=[n%2==0,n<2],g=Yt(this.min),b=Yt(this.max);for(let E=0;E<d.length;E++)g[E]=d[E]?this.min[E]:this.center[E],b[E]=d[E]?this.center[E]:this.max[E];return b[2]=this.max[2],new In(g,b)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let b=0;b<n.planes.length;b++){const E=n.planes[b];let P=0;for(let N=0;N<d.length;N++)_.dot(E,d[N])>=0&&P++;if(0===P)return 0;P!==d.length&&(g=!1)}if(g)return 2;for(let b=0;b<3;b++){let E=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let N=0;N<n.points.length;N++){const L=n.points[N][b]-this.min[b];E=Math.min(E,L),P=Math.max(P,L)}if(P<0||E>this.max[b]-this.min[b])return 0}return 1}}class Kr{constructor(n=0,d=0,g=0,b=0){if(isNaN(n)||n<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=d,this.left=g,this.right=b}interpolate(n,d,g){return null!=d.top&&null!=n.top&&(this.top=_.interpolate.number(n.top,d.top,g)),null!=d.bottom&&null!=n.bottom&&(this.bottom=_.interpolate.number(n.bottom,d.bottom,g)),null!=d.left&&null!=n.left&&(this.left=_.interpolate.number(n.left,d.left,g)),null!=d.right&&null!=n.right&&(this.right=_.interpolate.number(n.right,d.right,g)),this}getCenter(n,d){const g=_.clamp((this.left+n-this.right)/2,0,n),b=_.clamp((this.top+d-this.bottom)/2,0,d);return new _.Point(g,b)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Kr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class xr{constructor(n,d,g,b,E){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===E||!!E,this._minZoom=n||0,this._maxZoom=d||22,this._minPitch=g??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new _.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Kr,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const n=new xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){void 0===n?n=!0:null===n&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new _.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const d=-_.wrap(n,-180,180)*Math.PI/180;var g;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(g=new _.ARRAY_TYPE(4),_.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(g,b,E){var P=b[0],N=b[1],L=b[2],G=b[3],ie=Math.sin(E),te=Math.cos(E);g[0]=P*te+L*ie,g[1]=N*te+G*ie,g[2]=P*-ie+L*te,g[3]=N*-ie+G*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const d=_.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const d=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,d,g){this._unmodified=!1,this._edgeInsets.interpolate(n,d,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const d=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(n){const d=[new _.UnwrappedTileID(0,n)];if(this._renderWorldCopies){const g=this.pointCoordinate(new _.Point(0,0)),b=this.pointCoordinate(new _.Point(this.width,0)),E=this.pointCoordinate(new _.Point(this.width,this.height)),P=this.pointCoordinate(new _.Point(0,this.height)),N=Math.floor(Math.min(g.x,b.x,E.x,P.x)),L=Math.floor(Math.max(g.x,b.x,E.x,P.x)),G=1;for(let ie=N-G;ie<=L+G;ie++)0!==ie&&d.push(new _.UnwrappedTileID(ie,n))}return d}coveringTiles(n){var d,g;let b=this.coveringZoomLevel(n);const E=b;if(void 0!==n.minzoom&&b<n.minzoom)return[];void 0!==n.maxzoom&&b>n.maxzoom&&(b=n.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),N=_.MercatorCoordinate.fromLngLat(this.center),L=Math.pow(2,b),G=[L*P.x,L*P.y,0],ie=[L*N.x,L*N.y,0],te=gs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b);let ve=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ve=b);const Fe=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Pe=He=>({aabb:new In([He*L,0,0],[(He+1)*L,L,0]),zoom:0,x:0,y:0,wrap:He,fullyVisible:!1}),Ne=[],Be=[],at=b,Et=n.reparseOverscaled?E:b;if(this._renderWorldCopies)for(let He=1;He<=3;He++)Ne.push(Pe(-He)),Ne.push(Pe(He));for(Ne.push(Pe(0));Ne.length>0;){const He=Ne.pop(),bt=He.x,Rt=He.y;let ii=He.fullyVisible;if(!ii){const Z=He.aabb.intersects(te);if(0===Z)continue;ii=2===Z}const I=n.terrain?G:ie,A=He.aabb.distanceX(I),D=He.aabb.distanceY(I),F=Math.max(Math.abs(A),Math.abs(D));if(He.zoom===at||F>Fe+(1<<at-He.zoom)-2&&He.zoom>=ve){const Z=at-He.zoom,ue=G[0]-.5-(bt<<Z),le=G[1]-.5-(Rt<<Z);Be.push({tileID:new _.OverscaledTileID(He.zoom===at?Et:He.zoom,He.wrap,He.zoom,bt,Rt),distanceSq:Ct([ie[0]-.5-bt,ie[1]-.5-Rt]),tileDistanceToCamera:Math.sqrt(ue*ue+le*le)})}else for(let Z=0;Z<4;Z++){const ue=(bt<<1)+Z%2,le=(Rt<<1)+(Z>>1),Ke=He.zoom+1;let ut=He.aabb.quadrant(Z);if(n.terrain){const di=new _.OverscaledTileID(Ke,He.wrap,Ke,ue,le),vi=n.terrain.getMinMaxElevation(di),Hi=null!==(d=vi.minElevation)&&void 0!==d?d:this.elevation,Wi=null!==(g=vi.maxElevation)&&void 0!==g?g:this.elevation;ut=new In([ut.min[0],ut.min[1],Hi],[ut.max[0],ut.max[1],Wi])}Ne.push({aabb:ut,zoom:Ke,x:ue,y:le,wrap:He.wrap,fullyVisible:ii})}}return Be.sort((He,bt)=>He.distanceSq-bt.distanceSq).map(He=>He.tileID)}resize(n,d){this.width=n,this.height=d,this.pixelsToGLUnits=[2/n,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const d=_.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new _.Point(_.mercatorXfromLng(n.lng)*this.worldSize,_.mercatorYfromLat(d)*this.worldSize)}unproject(n){return new _.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(n){this.freezeElevation||(this.elevation=n?this.getElevation(this._center,n):0)}getElevation(n,d){const g=_.MercatorCoordinate.fromLngLat(n.wrap()),b=(1<<this.tileZoom)*_.EXTENT,E=g.x*b,P=g.y*b,N=Math.floor(E/_.EXTENT),L=Math.floor(P/_.EXTENT),G=new _.OverscaledTileID(this.tileZoom,0,this.tileZoom,N,L);return d.getElevation(G,E%_.EXTENT,P%_.EXTENT,_.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const d=this.pointLocation(this.centerPoint,n),g=this.getElevation(d,n);if(!(this.elevation-g))return;const b=this.getCameraPosition(),E=_.MercatorCoordinate.fromLngLat(b.lngLat,b.altitude),P=_.MercatorCoordinate.fromLngLat(d,g),N=E.x-P.x,L=E.y-P.y,G=E.z-P.z,ie=Math.sqrt(N*N+L*L+G*G),te=this.scaleZoom(this.cameraToCenterDistance/ie/this.tileSize);this._elevation=g,this._center=d,this.zoom=te}setLocationAtPoint(n,d){const g=this.pointCoordinate(d),b=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(n),P=new _.MercatorCoordinate(E.x-(g.x-b.x),E.y-(g.y-b.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,d){return d?this.coordinatePoint(this.locationCoordinate(n),this.getElevation(n,d),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,d){return this.coordinateLocation(this.pointCoordinate(n,d))}locationCoordinate(n){return _.MercatorCoordinate.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,d){if(d){const ve=d.pointCoordinate(n);if(null!=ve)return ve}const g=[n.x,n.y,0,1],b=[n.x,n.y,1,1];_.transformMat4(g,g,this.pixelMatrixInverse),_.transformMat4(b,b,this.pixelMatrixInverse);const E=g[3],P=b[3],N=g[1]/E,L=b[1]/P,G=g[2]/E,ie=b[2]/P,te=G===ie?0:(0-G)/(ie-G);return new _.MercatorCoordinate(_.interpolate.number(g[0]/E,b[0]/P,te)/this.worldSize,_.interpolate.number(N,L,te)/this.worldSize)}coordinatePoint(n,d=0,g=this.pixelMatrix){const b=[n.x*this.worldSize,n.y*this.worldSize,d,1];return _.transformMat4(b,b,g),new _.Point(b[0]/b[3],b[1]/b[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return(new Lt).extend(this.pointLocation(new _.Point(0,n))).extend(this.pointLocation(new _.Point(this.width,n))).extend(this.pointLocation(new _.Point(this.width,this.height))).extend(this.pointLocation(new _.Point(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Lt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,d=!1){const g=n.key,b=d?this._alignedPosMatrixCache:this._posMatrixCache;if(b[g])return b[g];const E=n.canonical,P=this.worldSize/this.zoomScale(E.z),N=E.x+Math.pow(2,E.z)*n.wrap,L=_.identity(new Float64Array(16));return _.translate(L,L,[N*P,E.y*P,0]),_.scale(L,L,[P/_.EXTENT,P/_.EXTENT,1]),_.multiply(L,d?this.alignedProjMatrix:this.projMatrix,L),b[g]=new Float32Array(L),b[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,d,g,b,E=-90,P=90,N=-180,L=180;const G=this.size,ie=this._unmodified;if(this.latRange){const Fe=this.latRange;E=_.mercatorYfromLat(Fe[1])*this.worldSize,P=_.mercatorYfromLat(Fe[0])*this.worldSize,n=P-E<G.y?G.y/(P-E):0}if(this.lngRange){const Fe=this.lngRange;N=_.wrap(_.mercatorXfromLng(Fe[0])*this.worldSize,0,this.worldSize),L=_.wrap(_.mercatorXfromLng(Fe[1])*this.worldSize,0,this.worldSize),L<N&&(L+=this.worldSize),d=L-N<G.x?G.x/(L-N):0}const te=this.point,ve=Math.max(d||0,n||0);if(ve)return this.center=this.unproject(new _.Point(d?(L+N)/2:te.x,n?(P+E)/2:te.y)),this.zoom+=this.scaleZoom(ve),this._unmodified=ie,void(this._constraining=!1);if(this.latRange){const Fe=te.y,Pe=G.y/2;Fe-Pe<E&&(b=E+Pe),Fe+Pe>P&&(b=P-Pe)}if(this.lngRange){const Fe=(N+L)/2,Pe=_.wrap(te.x,Fe-this.worldSize/2,Fe+this.worldSize/2),Ne=G.x/2;Pe-Ne<N&&(g=N+Ne),Pe+Ne>L&&(g=L-Ne)}void 0===g&&void 0===b||(this.center=this.unproject(new _.Point(void 0!==g?g:te.x,void 0!==b?b:te.y)).wrap()),this._unmodified=ie,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,d=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=_.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let b=_.identity(new Float64Array(16));_.scale(b,b,[this.width/2,-this.height/2,1]),_.translate(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=_.identity(new Float64Array(16)),_.scale(b,b,[1,-1,1]),_.translate(b,b,[-1,-1,0]),_.scale(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const E=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,P=Math.PI/2+this._pitch,N=this._fov*(.5+n.y/this.height),L=Math.sin(N)*E/Math.sin(_.clamp(Math.PI-P-N,.01,Math.PI-.01)),G=this.getHorizon(),ie=2*Math.atan(G/this.cameraToCenterDistance)*(.5+n.y/(2*G)),te=Math.sin(ie)*E/Math.sin(_.clamp(Math.PI-P-ie,.01,Math.PI-.01)),ve=Math.min(L,te),Fe=1.01*(Math.cos(Math.PI/2-this._pitch)*ve+E),Pe=this.height/50;b=new Float64Array(16),_.perspective(b,this._fov,this.width/this.height,Pe,Fe),b[8]=2*-n.x/this.width,b[9]=2*n.y/this.height,_.scale(b,b,[1,-1,1]),_.translate(b,b,[0,0,-this.cameraToCenterDistance]),_.rotateX(b,b,this._pitch),_.rotateZ(b,b,this.angle),_.translate(b,b,[-d,-g,0]),this.mercatorMatrix=_.scale([],b,[this.worldSize,this.worldSize,this.worldSize]),_.scale(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=_.multiply(new Float64Array(16),this.labelPlaneMatrix,b),_.translate(b,b,[0,0,-this.elevation]),this.projMatrix=b,this.invProjMatrix=_.invert([],b),this.pixelMatrix3D=_.multiply(new Float64Array(16),this.labelPlaneMatrix,b);const Ne=this.width%2/2,Be=this.height%2/2,at=Math.cos(this.angle),Et=Math.sin(this.angle),He=d-Math.round(d)+at*Ne+Et*Be,bt=g-Math.round(g)+at*Be+Et*Ne,Rt=new Float64Array(b);if(_.translate(Rt,Rt,[He>.5?He-1:He,bt>.5?bt-1:bt,0]),this.alignedProjMatrix=Rt,b=_.invert(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new _.Point(0,0)),d=[n.x*this.worldSize,n.y*this.worldSize,0,1];return _.transformMat4(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new _.Point(0,n))}getCameraQueryGeometry(n){const d=this.getCameraPoint();if(1===n.length)return[n[0],d];{let g=d.x,b=d.y,E=d.x,P=d.y;for(const N of n)g=Math.min(g,N.x),b=Math.min(b,N.y),E=Math.max(E,N.x),P=Math.max(P,N.y);return[new _.Point(g,b),new _.Point(E,b),new _.Point(E,P),new _.Point(g,P),new _.Point(g,b)]}}}class Nl{constructor(n){this._hashName=n&&encodeURIComponent(n),_.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(d,g){let b=!1,E=null;const P=()=>{E=null,b&&(d(),E=setTimeout(P,300),b=!1)};return()=>(b=!0,E||P(),E)}(this._updateHashUnthrottled.bind(this))}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const d=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,b=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,b),P=Math.round(d.lng*E)/E,N=Math.round(d.lat*E)/E,L=this._map.getBearing(),G=this._map.getPitch();let ie="";if(ie+=n?`/${P}/${N}/${g}`:`${g}/${N}/${P}`,(L||G)&&(ie+="/"+Math.round(10*L)/10),G&&(ie+=`/${Math.round(G)}`),this._hashName){const te=this._hashName;let ve=!1;const Fe=window.location.hash.slice(1).split("&").map(Pe=>{const Ne=Pe.split("=")[0];return Ne===te?(ve=!0,`${Ne}=${ie}`):Pe}).filter(Pe=>Pe);return ve||Fe.push(`${te}=${ie}`),`#${Fe.join("&")}`}return`#${ie}`}_getCurrentHash(){const n=window.location.hash.replace("#","");if(this._hashName){let d;return n.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._getCurrentHash();if(n.length>=3&&!n.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:d,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,n)}catch{}}}const Jo={linearity:.3,easing:_.bezier(0,0,.3,1)},Ba=_.extend({deceleration:2500,maxSpeed:1400},Jo),lr=_.extend({deceleration:20,maxSpeed:1400},Jo),Ta=_.extend({deceleration:1e3,maxSpeed:360},Jo),tl=_.extend({deceleration:1e3,maxSpeed:90},Jo);class Vo{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:_.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,d=_.exported.now();for(;n.length>0&&d-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new _.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)d.zoom+=E.zoomDelta||0,d.bearing+=E.bearingDelta||0,d.pitch+=E.pitchDelta||0,E.panDelta&&d.pan._add(E.panDelta),E.around&&(d.around=E.around),E.pinchAround&&(d.pinchAround=E.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(d.pan.mag()){const E=Wr(d.pan.mag(),g,_.extend({},Ba,n||{}));b.offset=d.pan.mult(E.amount/d.pan.mag()),b.center=this._map.transform.center,Ln(b,E)}if(d.zoom){const E=Wr(d.zoom,g,lr);b.zoom=this._map.transform.zoom+E.amount,Ln(b,E)}if(d.bearing){const E=Wr(d.bearing,g,Ta);b.bearing=this._map.transform.bearing+_.clamp(E.amount,-179,179),Ln(b,E)}if(d.pitch){const E=Wr(d.pitch,g,tl);b.pitch=this._map.transform.pitch+E.amount,Ln(b,E)}if(b.zoom||b.bearing){const E=void 0===d.pinchAround?d.around:d.pinchAround;b.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),_.extend(b,{noMoveStart:!0})}}function Ln(v,n){(!v.duration||v.duration<n.duration)&&(v.duration=n.duration,v.easing=n.easing)}function Wr(v,n,d){const{maxSpeed:g,linearity:b,deceleration:E}=d,P=_.clamp(v*b/(n/1e3),-g,g),N=Math.abs(P)/(E*b);return{easing:d.easing,duration:1e3*N,amount:P*(N/2)}}class bn extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,d,g,b={}){const E=he.mousePos(d.getCanvasContainer(),g),P=d.unproject(E);super(n,_.extend({point:E,lngLat:P,originalEvent:g},b)),this._defaultPrevented=!1,this.target=d}}class Qo extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,d,g){const b="touchend"===n?g.changedTouches:g.touches,E=he.touchPos(d.getCanvasContainer(),b),P=E.map(L=>d.unproject(L)),N=E.reduce((L,G,ie,te)=>L.add(G.div(te.length)),new _.Point(0,0));super(n,{points:E,point:N,lngLats:P,lngLat:d.unproject(N),originalEvent:g}),this._defaultPrevented=!1}}class _s extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,d,g){super(n,{originalEvent:g}),this._defaultPrevented=!1}}class Dr{constructor(n,d){this._map=n,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new _s(n.type,this._map,n))}mousedown(n,d){return this._mousedownPos=d,this._firePreventable(new bn(n.type,this._map,n))}mouseup(n){this._map.fire(new bn(n.type,this._map,n))}click(n,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new bn(n.type,this._map,n))}dblclick(n){return this._firePreventable(new bn(n.type,this._map,n))}mouseover(n){this._map.fire(new bn(n.type,this._map,n))}mouseout(n){this._map.fire(new bn(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Qo(n.type,this._map,n))}touchmove(n){this._map.fire(new Qo(n.type,this._map,n))}touchend(n){this._map.fire(new Qo(n.type,this._map,n))}touchcancel(n){this._map.fire(new Qo(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Va{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new bn(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new bn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new bn(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ua{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(_.Point.convert(n),this._map.terrain)}}class go{constructor(n,d){this._map=n,this._tr=new ua(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,d){this.isEnabled()&&n.shiftKey&&0===n.button&&(he.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(n,d){if(!this._active)return;const g=d;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=g,this._box||(this._box=he.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const E=Math.min(b.x,g.x),P=Math.max(b.x,g.x),N=Math.min(b.y,g.y),L=Math.max(b.y,g.y);he.setTransform(this._box,`translate(${E}px,${N}px)`),this._box.style.width=P-E+"px",this._box.style.height=L-N+"px"}mouseupWindow(n,d){if(!this._active||0!==n.button)return;const g=this._startPos,b=d;if(this.reset(),he.suppressClick(),g.x!==b.x||g.y!==b.y)return this._map.fire(new _.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:E=>E.fitScreenCoordinates(g,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&27===n.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(he.remove(this._box),this._box=null),he.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,d){return this._map.fire(new _.Event(n,{originalEvent:d}))}}function qn(v,n){if(v.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${n.length}`);const d={};for(let g=0;g<v.length;g++)d[v[g].identifier]=n[g];return d}class Ai{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=n.timeStamp),g.length===this.numTouches&&(this.centroid=function(b){const E=new _.Point(0,0);for(const P of b)E._add(P);return E.div(b.length)}(d),this.touches=qn(g,d)))}touchmove(n,d,g){if(this.aborted||!this.centroid)return;const b=qn(g,d);for(const E in this.touches){const P=b[E];(!P||P.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(n,d,g){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),0===g.length){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Gn{constructor(n){this.singleTap=new Ai(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,d,g){this.singleTap.touchstart(n,d,g)}touchmove(n,d,g){this.singleTap.touchmove(n,d,g)}touchend(n,d,g){const b=this.singleTap.touchend(n,d,g);if(b){const E=n.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(b)<30;if(E&&P||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class Ps{constructor(n){this._tr=new ua(n),this._zoomIn=new Gn({numTouches:1,numTaps:2}),this._zoomOut=new Gn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,d,g){this._zoomIn.touchstart(n,d,g),this._zoomOut.touchstart(n,d,g)}touchmove(n,d,g){this._zoomIn.touchmove(n,d,g),this._zoomOut.touchmove(n,d,g)}touchend(n,d,g){const b=this._zoomIn.touchend(n,d,g),E=this._zoomOut.touchend(n,d,g),P=this._tr;return b?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(b)},{originalEvent:n})}):E?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(E)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cr{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const d=this._moveFunction(...n);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(n,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,d){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const b=d.length?d[0]:d;return!this._moved&&b.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(g,b))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&he.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const il={0:1,2:2};class Di{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const d=he.mouseButton(n);this._eventButton=d}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(d,g){const b=il[g];return void 0===d.buttons||(d.buttons&b)!==b}(n,this._eventButton)}isValidEndEvent(n){return he.mouseButton(n)===this._eventButton}}class zl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return 1===n.targetTouches.length}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const Bl=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(n){n.preventDefault()}},nl=({enable:v,clickTolerance:n,bearingDegreesPerPixelMoved:d=.8})=>{const g=new Di({checkCorrectEvent:b=>0===he.mouseButton(b)&&b.ctrlKey||2===he.mouseButton(b)});return new cr({clickTolerance:n,move:(b,E)=>({bearingDelta:(E.x-b.x)*d}),moveStateManager:g,enable:v,assignEvents:Bl})},qs=({enable:v,clickTolerance:n,pitchDegreesPerPixelMoved:d=-.5})=>{const g=new Di({checkCorrectEvent:b=>0===he.mouseButton(b)&&b.ctrlKey||2===he.mouseButton(b)});return new cr({clickTolerance:n,move:(b,E)=>({pitchDelta:(E.y-b.y)*d}),moveStateManager:g,enable:v,assignEvents:Bl})};class rl{constructor(n,d){this._minTouches=n.cooperativeGestures?2:1,this._clickTolerance=n.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new _.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(n,d,g){return this._calculateTransform(n,d,g)}touchmove(n,d,g){if(this._map._cooperativeGestures&&(2===this._minTouches&&g.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(n,!1,g.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(g.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,d,g)}touchend(n,d,g){this._calculateTransform(n,d,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,d,g){g.length>0&&(this._active=!0);const b=qn(g,d),E=new _.Point(0,0),P=new _.Point(0,0);let N=0;for(const G in b){const ie=b[G],te=this._touches[G];te&&(E._add(ie),P._add(ie.sub(te)),N++,b[G]=ie)}if(this._touches=b,N<this._minTouches||!P.mag())return;const L=P.div(N);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(N),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class B{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(n){}_move(n,d,g){return{}}touchstart(n,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(n,d,g){if(!this._firstTwoTouches)return;n.preventDefault();const[b,E]=this._firstTwoTouches,P=ne(g,d,b),N=ne(g,d,E);if(!P||!N)return;const L=this._aroundCenter?null:P.add(N).div(2);return this._move([P,N],L,n)}touchend(n,d,g){if(!this._firstTwoTouches)return;const[b,E]=this._firstTwoTouches,P=ne(g,d,b),N=ne(g,d,E);P&&N||(this._active&&he.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&"center"===n.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ne(v,n,d){for(let g=0;g<v.length;g++)if(v[g].identifier===d)return n[g]}function H(v,n){return Math.log(v/n)/Math.LN2}class ye extends B{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,d){const g=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(H(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:H(this._distance,g),pinchAround:d}}}function Ge(v,n){return 180*v.angleWith(n)/Math.PI}class Ft extends B{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,d){const g=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ge(this._vector,g),pinchAround:d}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const d=25/(Math.PI*this._minDiameter)*360,g=Ge(n,this._startVector);return Math.abs(g)<d}}function Qt(v){return Math.abs(v.y)>Math.abs(v.x)}class ki extends B{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,d,g){super.touchstart(n,d,g),this._currentTouchCount=g.length}_start(n){this._lastPoints=n,Qt(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,d,g){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const b=n[0].sub(this._lastPoints[0]),E=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,E,g.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(b.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(n,d,g){if(void 0!==this._valid)return this._valid;const b=n.mag()>=2,E=d.mag()>=2;if(!b&&!E)return;if(!b||!E)return void 0===this._firstMove&&(this._firstMove=g),g-this._firstMove<100&&void 0;const P=n.y>0==d.y>0;return Qt(n)&&Qt(d)&&P}}const Mn={panStep:100,bearingStep:15,pitchStep:10};class Un{constructor(n){this._tr=new ua(n);const d=Mn;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let d=0,g=0,b=0,E=0,P=0;switch(n.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:n.shiftKey?g=-1:(n.preventDefault(),E=-1);break;case 39:n.shiftKey?g=1:(n.preventDefault(),E=1);break;case 38:n.shiftKey?b=1:(n.preventDefault(),P=-1);break;case 40:n.shiftKey?b=-1:(n.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(g=0,b=0),{cameraAnimation:N=>{const L=this._tr;N.easeTo({duration:300,easeId:"keyboardHandler",easing:Dn,zoom:d?Math.round(L.zoom)+d*(n.shiftKey?2:1):L.zoom,bearing:L.bearing+g*this._bearingStep,pitch:L.pitch+b*this._pitchStep,offset:[-E*this._panStep,-P*this._panStep],center:L.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Dn(v){return v*(2-v)}const hn=4.000244140625;class nr{constructor(n,d){this._map=n,this._tr=new ua(n),this._el=n.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,_.bindAll(["_onTimeout"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&"center"===n.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!n[this._map._metaKey])return;n.preventDefault()}let d=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const g=_.exported.now(),b=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,0!==d&&d%hn==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(b*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),n.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=n,this._delta-=d,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=he.mousePos(this._el,n),g=this._tr;this._around=_.LngLat.convert(this._aroundCenter?g.center:g.unproject(d)),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(0!==this._delta){const N="wheel"===this._type&&Math.abs(this._delta)>hn?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&0!==L&&(L=1/L);const G="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(G*L))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d="number"==typeof this._targetZoom?this._targetZoom:n.zoom,g=this._startZoom,b=this._easing;let E,P=!1;if("wheel"===this._type&&g&&b){const N=Math.min((_.exported.now()-this._lastWheelEventTime)/200,1),L=b(N);E=_.interpolate.number(g,d,L),N<1?this._frameId||(this._frameId=!0):P=!0}else E=d,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:E-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let d=_.ease;if(this._prevEase){const g=this._prevEase,b=(_.exported.now()-g.start)/g.duration,E=g.easing(b+.01)-g.easing(b),P=.27/Math.sqrt(E*E+1e-4)*.01,N=Math.sqrt(.0729-P*P);d=_.bezier(P,N,.25,1)}return this._prevEase={start:_.exported.now(),duration:n,easing:d},d}reset(){this._active=!1}}class Vn{constructor(n,d){this._clickZoom=n,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Hn{constructor(n){this._tr=new ua(n),this.reset()}reset(){this._active=!1}dblclick(n,d){return n.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class An{constructor(){this._tap=new Gn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(n,d,g){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=d[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(n,d,g))}touchmove(n,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const b=d[0],E=b.y-this._swipePoint.y;return this._swipePoint=b,n.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(n,d,g)}touchend(n,d,g){this._tapTime?this._swipePoint&&0===g.length&&this.reset():this._tap.touchend(n,d,g)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jr{constructor(n,d,g){this._el=n,this._mousePan=d,this._touchPan=g}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Uo{constructor(n,d,g){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=d,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _o{constructor(n,d,g,b){this._el=n,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const to=v=>v.zoom||v.drag||v.pitch||v.rotate;class ys extends _.Event{}function es(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class ts{constructor(n,d){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vo(n),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d),_.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,E,P]of this._listeners)he.addEventListener(b,E,b===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[n,d,g]of this._listeners)he.removeEventListener(n,d,n===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(n){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new Dr(d,n));const b=d.boxZoom=new go(d,n);this._add("boxZoom",b);const E=new Ps(d),P=new Hn(d);d.doubleClickZoom=new Vn(P,E),this._add("tapZoom",E),this._add("clickZoom",P);const N=new An;this._add("tapDragZoom",N);const L=d.touchPitch=new ki(d);this._add("touchPitch",L);const G=nl(n),ie=qs(n);d.dragRotate=new Uo(n,G,ie),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",ie,["mouseRotate"]);const te=(({enable:at,clickTolerance:Et})=>{const He=new Di({checkCorrectEvent:bt=>0===he.mouseButton(bt)&&!bt.ctrlKey});return new cr({clickTolerance:Et,move:(bt,Rt)=>({around:Rt,panDelta:Rt.sub(bt)}),activateOnStart:!0,moveStateManager:He,enable:at,assignEvents:Bl})})(n),ve=new rl(n,d);d.dragPan=new jr(g,te,ve),this._add("mousePan",te),this._add("touchPan",ve,["touchZoom","touchRotate"]);const Fe=new Ft,Pe=new ye;d.touchZoomRotate=new _o(g,Pe,Fe,N),this._add("touchRotate",Fe,["touchPan","touchZoom"]),this._add("touchZoom",Pe,["touchPan","touchRotate"]);const Ne=d.scrollZoom=new nr(d,this);this._add("scrollZoom",Ne,["mousePan"]);const Be=d.keyboard=new Un(d);this._add("keyboard",Be),this._add("blockableMapEvent",new Va(d));for(const at of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[at]&&d[at].enable(n[at])}_add(n,d,g){this._handlers.push({handlerName:n,handler:d,allowed:g}),this._handlersById[n]=d}stop(n){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(to(this._eventsInProgress))||this.isZooming()}_blockedByActive(n,d,g){for(const b in n)if(b!==g&&(!d||d.indexOf(b)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const d=[];for(const g of n)this._el.contains(g.target)&&d.push(g);return d}handleEvent(n,d){if("blur"===n.type)return void this.stop(!0);this._updatingCamera=!0;const g="renderFrame"===n.type?void 0:n,b={needsRenderFrame:!1},E={},P={},N=n.touches,L=N?this._getMapTouches(N):void 0,G=L?he.touchPos(this._el,L):he.mousePos(this._el,n);for(const{handlerName:ve,handler:Fe,allowed:Pe}of this._handlers){if(!Fe.isEnabled())continue;let Ne;this._blockedByActive(P,Pe,ve)?Fe.reset():Fe[d||n.type]&&(Ne=Fe[d||n.type](n,G,L),this.mergeHandlerResult(b,E,Ne,ve,g),Ne&&Ne.needsRenderFrame&&this._triggerRenderFrame()),(Ne||Fe.isActive())&&(P[ve]=Fe)}const ie={};for(const ve in this._previousActiveHandlers)P[ve]||(ie[ve]=g);this._previousActiveHandlers=P,(Object.keys(ie).length||es(b))&&(this._changes.push([b,E,ie]),this._triggerRenderFrame()),(Object.keys(P).length||es(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=b;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(n,d,g,b,E){if(!g)return;_.extend(n,g);const P={handlerName:b,originalEvent:g.originalEvent||E};void 0!==g.zoomDelta&&(d.zoom=P),void 0!==g.panDelta&&(d.drag=P),void 0!==g.pitchDelta&&(d.pitch=P),void 0!==g.bearingDelta&&(d.rotate=P)}_applyChanges(){const n={},d={},g={};for(const[b,E,P]of this._changes)b.panDelta&&(n.panDelta=(n.panDelta||new _.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+b.pitchDelta),void 0!==b.around&&(n.around=b.around),void 0!==b.pinchAround&&(n.pinchAround=b.pinchAround),b.noInertia&&(n.noInertia=b.noInertia),_.extend(d,E),_.extend(g,P);this._updateMapTransform(n,d,g),this._changes=[]}_updateMapTransform(n,d,g){const b=this._map,E=b._getTransformForUpdate(),P=b.terrain;if(!(es(n)||P&&this._terrainMovement))return this._fireEvents(d,g,!0);let{panDelta:N,zoomDelta:L,bearingDelta:G,pitchDelta:ie,around:te,pinchAround:ve}=n;void 0!==ve&&(te=ve),b._stop(!0),te=te||b.transform.centerPoint;const Fe=E.pointLocation(N?te.sub(N):te);G&&(E.bearing+=G),ie&&(E.pitch+=ie),L&&(E.zoom+=L),P?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?E.center=E.pointLocation(E.centerPoint.sub(N)):E.setLocationAtPoint(Fe,te):(this._terrainMovement=!0,E.freezeElevation=!0,E.setLocationAtPoint(Fe,te),this._map.once("moveend",()=>{E.freezeElevation=!1,this._terrainMovement=!1,E.recalculateZoom(b.terrain)})):E.setLocationAtPoint(Fe,te),b._applyUpdatedTransform(E),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(d,g,!0)}_fireEvents(n,d,g){const b=to(this._eventsInProgress),E=to(n),P={};for(const ie in n){const{originalEvent:te}=n[ie];this._eventsInProgress[ie]||(P[`${ie}start`]=te),this._eventsInProgress[ie]=n[ie]}!b&&E&&this._fireEvent("movestart",E.originalEvent);for(const ie in P)this._fireEvent(ie,P[ie]);E&&this._fireEvent("move",E.originalEvent);for(const ie in n){const{originalEvent:te}=n[ie];this._fireEvent(ie,te)}const N={};let L;for(const ie in this._eventsInProgress){const{handlerName:te,originalEvent:ve}=this._eventsInProgress[ie];this._handlersById[te].isActive()||(delete this._eventsInProgress[ie],L=d[te]||ve,N[`${ie}end`]=L)}for(const ie in N)this._fireEvent(ie,N[ie]);const G=to(this._eventsInProgress);if(g&&(b||E)&&!G){this._updatingCamera=!0;const ie=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ve=>0!==ve&&-this._bearingSnap<ve&&ve<this._bearingSnap;ie?(te(ie.bearing||this._map.getBearing())&&(ie.bearing=0),ie.freezeElevation=!0,this._map.easeTo(ie,{originalEvent:L})):(this._map.fire(new _.Event("moveend",{originalEvent:L})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,d){this._map.fire(new _.Event(n,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new ys("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ua={extend:(v,...n)=>_.extend(v,...n),run(v){v()},logToElement(v,n=!1,d="log"){const g=window.document.getElementById(d);g&&(n&&(g.innerHTML=""),g.innerHTML+=`<br>${v}`)}};class Zi extends _.Evented{constructor(n,d){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=d.bearingSnap,_.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new _.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,d){return this.jumpTo({center:n},d)}panBy(n,d,g){return n=_.Point.convert(n).mult(-1),this.panTo(this.transform.center,_.extend({offset:n},d),g)}panTo(n,d,g){return this.easeTo(_.extend({center:n},d),g)}getZoom(){return this.transform.zoom}setZoom(n,d){return this.jumpTo({zoom:n},d),this}zoomTo(n,d,g){return this.easeTo(_.extend({zoom:n},d),g)}zoomIn(n,d){return this.zoomTo(this.getZoom()+1,n,d),this}zoomOut(n,d){return this.zoomTo(this.getZoom()-1,n,d),this}getBearing(){return this.transform.bearing}setBearing(n,d){return this.jumpTo({bearing:n},d),this}getPadding(){return this.transform.padding}setPadding(n,d){return this.jumpTo({padding:n},d),this}rotateTo(n,d,g){return this.easeTo(_.extend({bearing:n},d),g)}resetNorth(n,d){return this.rotateTo(0,_.extend({duration:1e3},n),d),this}resetNorthPitch(n,d){return this.easeTo(_.extend({bearing:0,pitch:0,duration:1e3},n),d),this}snapToNorth(n,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,d):this}getPitch(){return this.transform.pitch}setPitch(n,d){return this.jumpTo({pitch:n},d),this}cameraForBounds(n,d){n=Lt.convert(n);const g=d&&d.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),g,d)}_cameraForBoxAndBearing(n,d,g,b){const E={top:0,bottom:0,right:0,left:0};if("number"==typeof(b=_.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding){const Rt=b.padding;b.padding={top:Rt,bottom:Rt,right:Rt,left:Rt}}b.padding=_.extend(E,b.padding);const P=this.transform,N=P.padding,L=P.project(_.LngLat.convert(n)),G=P.project(_.LngLat.convert(d)),ie=L.rotate(-g*Math.PI/180),te=G.rotate(-g*Math.PI/180),ve=new _.Point(Math.max(ie.x,te.x),Math.max(ie.y,te.y)),Fe=new _.Point(Math.min(ie.x,te.x),Math.min(ie.y,te.y)),Pe=ve.sub(Fe),Ne=(P.width-(N.left+N.right+b.padding.left+b.padding.right))/Pe.x,Be=(P.height-(N.top+N.bottom+b.padding.top+b.padding.bottom))/Pe.y;if(Be<0||Ne<0)return void _.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const at=Math.min(P.scaleZoom(P.scale*Math.min(Ne,Be)),b.maxZoom),Et=_.Point.convert(b.offset),He=new _.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(g*Math.PI/180),bt=Et.add(He).mult(P.scale/P.zoomScale(at));return{center:P.unproject(L.add(G).div(2).sub(bt)),zoom:at,bearing:g}}fitBounds(n,d,g){return this._fitInternal(this.cameraForBounds(n,d),d,g)}fitScreenCoordinates(n,d,g,b,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(_.Point.convert(n)),this.transform.pointLocation(_.Point.convert(d)),g,b),b,E)}_fitInternal(n,d,g){return n?(delete(d=_.extend(n,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(n,d){this.stop();const g=this._getTransformForUpdate();let b=!1,E=!1,P=!1;return"zoom"in n&&g.zoom!==+n.zoom&&(b=!0,g.zoom=+n.zoom),void 0!==n.center&&(g.center=_.LngLat.convert(n.center)),"bearing"in n&&g.bearing!==+n.bearing&&(E=!0,g.bearing=+n.bearing),"pitch"in n&&g.pitch!==+n.pitch&&(P=!0,g.pitch=+n.pitch),null==n.padding||g.isPaddingEqual(n.padding)||(g.padding=n.padding),this._applyUpdatedTransform(g),this.fire(new _.Event("movestart",d)).fire(new _.Event("move",d)),b&&this.fire(new _.Event("zoomstart",d)).fire(new _.Event("zoom",d)).fire(new _.Event("zoomend",d)),E&&this.fire(new _.Event("rotatestart",d)).fire(new _.Event("rotate",d)).fire(new _.Event("rotateend",d)),P&&this.fire(new _.Event("pitchstart",d)).fire(new _.Event("pitch",d)).fire(new _.Event("pitchend",d)),this.fire(new _.Event("moveend",d))}calculateCameraOptionsFromTo(n,d,g,b=0){const E=_.MercatorCoordinate.fromLngLat(n,d),P=_.MercatorCoordinate.fromLngLat(g,b),N=P.x-E.x,L=P.y-E.y,G=P.z-E.z,ie=Math.hypot(N,L,G);if(0===ie)throw new Error("Can't calculate camera options with same From and To");const te=Math.hypot(N,L),ve=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ie/this.transform.tileSize),Fe=180*Math.atan2(N,-L)/Math.PI;let Pe=180*Math.acos(te/ie)/Math.PI;return Pe=G<0?90-Pe:90+Pe,{center:P.toLngLat(),zoom:ve,pitch:Pe,bearing:Fe}}easeTo(n,d){this._stop(!1,n.easeId),(!1===(n=_.extend({offset:[0,0],duration:500,easing:_.ease},n)).animate||!n.essential&&_.exported.prefersReducedMotion)&&(n.duration=0);const g=this._getTransformForUpdate(),b=this.getZoom(),E=this.getBearing(),P=this.getPitch(),N=this.getPadding(),L="zoom"in n?+n.zoom:b,G="bearing"in n?this._normalizeBearing(n.bearing,E):E,ie="pitch"in n?+n.pitch:P,te="padding"in n?n.padding:g.padding,ve=_.Point.convert(n.offset);let Fe=g.centerPoint.add(ve);const Pe=g.pointLocation(Fe),Ne=_.LngLat.convert(n.center||Pe);this._normalizeCenter(Ne);const Be=g.project(Pe),at=g.project(Ne).sub(Be),Et=g.zoomScale(L-b);let He,bt;n.around&&(He=_.LngLat.convert(n.around),bt=g.locationPoint(He));const Rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||L!==b,this._rotating=this._rotating||E!==G,this._pitching=this._pitching||ie!==P,this._padding=!g.isPaddingEqual(te),this._easeId=n.easeId,this._prepareEase(d,n.noMoveStart,Rt),this.terrain&&this._prepareElevation(Ne),this._ease(ii=>{if(this._zooming&&(g.zoom=_.interpolate.number(b,L,ii)),this._rotating&&(g.bearing=_.interpolate.number(E,G,ii)),this._pitching&&(g.pitch=_.interpolate.number(P,ie,ii)),this._padding&&(g.interpolatePadding(N,te,ii),Fe=g.centerPoint.add(ve)),this.terrain&&!n.freezeElevation&&this._updateElevation(ii),He)g.setLocationAtPoint(He,bt);else{const I=g.zoomScale(g.zoom-b),A=L>b?Math.min(2,Et):Math.max(.5,Et),D=Math.pow(A,1-ii),F=g.unproject(Be.add(at.mult(ii*D)).mult(I));g.setLocationAtPoint(g.renderWorldCopies?F.wrap():F,Fe)}this._applyUpdatedTransform(g),this._fireMoveEvents(d)},ii=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,ii)},n),this}_prepareEase(n,d,g={}){this._moving=!0,d||g.moving||this.fire(new _.Event("movestart",n)),this._zooming&&!g.zooming&&this.fire(new _.Event("zoomstart",n)),this._rotating&&!g.rotating&&this.fire(new _.Event("rotatestart",n)),this._pitching&&!g.pitching&&this.fire(new _.Event("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(n,this.terrain),this.transform.freezeElevation=!0}_updateElevation(n){const d=this.transform.getElevation(this._elevationCenter,this.terrain);if(n<1&&d!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(g-(d-(g*n+this._elevationStart))/(1-n)),this._elevationTarget=d}this.transform.elevation=_.interpolate.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const d=n.clone(),{center:g,zoom:b,pitch:E,bearing:P,elevation:N}=this.transformCameraUpdate(d);g&&(d.center=g),void 0!==b&&(d.zoom=b),void 0!==E&&(d.pitch=E),void 0!==P&&(d.bearing=P),void 0!==N&&(d.elevation=N),this.transform.apply(d)}_fireMoveEvents(n){this.fire(new _.Event("move",n)),this._zooming&&this.fire(new _.Event("zoom",n)),this._rotating&&this.fire(new _.Event("rotate",n)),this._pitching&&this.fire(new _.Event("pitch",n))}_afterEase(n,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const g=this._zooming,b=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new _.Event("zoomend",n)),b&&this.fire(new _.Event("rotateend",n)),E&&this.fire(new _.Event("pitchend",n)),this.fire(new _.Event("moveend",n))}flyTo(n,d){if(!n.essential&&_.exported.prefersReducedMotion){const ut=_.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ut,d)}this.stop(),n=_.extend({offset:[0,0],speed:1.2,curve:1.42,easing:_.ease},n);const g=this._getTransformForUpdate(),b=this.getZoom(),E=this.getBearing(),P=this.getPitch(),N=this.getPadding(),L="zoom"in n?_.clamp(+n.zoom,g.minZoom,g.maxZoom):b,G="bearing"in n?this._normalizeBearing(n.bearing,E):E,ie="pitch"in n?+n.pitch:P,te="padding"in n?n.padding:g.padding,ve=g.zoomScale(L-b),Fe=_.Point.convert(n.offset);let Pe=g.centerPoint.add(Fe);const Ne=g.pointLocation(Pe),Be=_.LngLat.convert(n.center||Ne);this._normalizeCenter(Be);const at=g.project(Ne),Et=g.project(Be).sub(at);let He=n.curve;const bt=Math.max(g.width,g.height),Rt=bt/ve,ii=Et.mag();if("minZoom"in n){const ut=_.clamp(Math.min(n.minZoom,b,L),g.minZoom,g.maxZoom),di=bt/g.zoomScale(ut-b);He=Math.sqrt(di/ii*2)}const I=He*He;function A(ut){const di=(Rt*Rt-bt*bt+(ut?-1:1)*I*I*ii*ii)/(2*(ut?Rt:bt)*I*ii);return Math.log(Math.sqrt(di*di+1)-di)}function D(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function F(ut){return(Math.exp(ut)+Math.exp(-ut))/2}const Z=A(0);let ue=function(ut){return F(Z)/F(Z+He*ut)},le=function(ut){return bt*((F(Z)*(D(di=Z+He*ut)/F(di))-D(Z))/I)/ii;var di},Ke=(A(1)-Z)/He;if(Math.abs(ii)<1e-6||!isFinite(Ke)){if(Math.abs(bt-Rt)<1e-6)return this.easeTo(n,d);const ut=Rt<bt?-1:1;Ke=Math.abs(Math.log(Rt/bt))/He,le=function(){return 0},ue=function(di){return Math.exp(ut*He*di)}}return n.duration="duration"in n?+n.duration:1e3*Ke/("screenSpeed"in n?+n.screenSpeed/He:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=E!==G,this._pitching=ie!==P,this._padding=!g.isPaddingEqual(te),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(Be),this._ease(ut=>{const di=ut*Ke,vi=1/ue(di);g.zoom=1===ut?L:b+g.scaleZoom(vi),this._rotating&&(g.bearing=_.interpolate.number(E,G,ut)),this._pitching&&(g.pitch=_.interpolate.number(P,ie,ut)),this._padding&&(g.interpolatePadding(N,te,ut),Pe=g.centerPoint.add(Fe)),this.terrain&&!n.freezeElevation&&this._updateElevation(ut);const Hi=1===ut?Be:g.unproject(at.add(Et.mult(le(di))).mult(vi));g.setLocationAtPoint(g.renderWorldCopies?Hi.wrap():Hi,Pe),this._applyUpdatedTransform(g),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,d)}if(!n){const g=this.handlers;g&&g.stop(!1)}return this}_ease(n,d,g){!1===g.animate||0===g.duration?(n(1),d()):(this._easeStart=_.exported.now(),this._easeOptions=g,this._onEaseFrame=n,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((_.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,d){n=_.wrap(n,-180,180);const g=Math.abs(n-d);return Math.abs(n-360-d)<g&&(n-=360),Math.abs(n+360-d)<g&&(n+=360),n}_normalizeCenter(n){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const g=n.lng-d.center.lng;n.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(n){return this.terrain?this.transform.getElevation(_.LngLat.convert(n),this.terrain)-this.transform.elevation:null}}class mi{constructor(n={}){this.options=n,_.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=he.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=he.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=he.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){he.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,d){const g=this._map._getUIString(`AttributionControl.${d}`);n.title=g,n.setAttribute("aria-label",g)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(n){!n||"metadata"!==n.sourceDataType&&"visibility"!==n.sourceDataType&&"style"!==n.dataType&&"terrain"!==n.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(b=>"string"!=typeof b?"":b)):"string"==typeof this.options.customAttribution&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const d=this._map.style.sourceCaches;for(const b in d){const E=d[b];if(E.used||E.usedForTerrain){const P=E.getSource();P.attribution&&n.indexOf(P.attribution)<0&&n.push(P.attribution)}}n=n.filter(b=>String(b).trim()),n.sort((b,E)=>b.length-E.length),n=n.filter((b,E)=>{for(let P=E+1;P<n.length;P++)if(n[P].indexOf(b)>=0)return!1;return!0});const g=n.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,n.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class ja{constructor(n={}){this.options=n,_.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=he.create("div","maplibregl-ctrl");const d=he.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){he.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const n=this._container.children;if(n.length){const d=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}}}class lc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const d=++this._id;return this._queue.push({callback:n,id:d,cancelled:!1}),d}remove(n){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const b of g)if(b.id===n)return void(b.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const So={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var jo=_.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Ha extends _.Evented{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,d){this.sourceCache.update(n,d),this._renderableTilesKeys=[];const g={};for(const b of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))g[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),_.ortho(b.posMatrix,0,_.EXTENT,0,_.EXTENT,0,1),this._tiles[b.key]=new _i(b,this.tileSize));for(const b in this._tiles)g[b]||delete this._tiles[b]}freeRtt(n){for(const d in this._tiles){const g=this._tiles[d];(!n||g.tileID.equals(n)||g.tileID.isChildOf(n)||n.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const d={};for(const g of this._renderableTilesKeys){const b=this._tiles[g].tileID;if(b.canonical.equals(n.canonical)){const E=n.clone();E.posMatrix=new Float64Array(16),_.ortho(E.posMatrix,0,_.EXTENT,0,_.EXTENT,0,1),d[g]=E}else if(b.canonical.isChildOf(n.canonical)){const E=n.clone();E.posMatrix=new Float64Array(16);const P=b.canonical.z-n.canonical.z,N=b.canonical.x-(b.canonical.x>>P<<P),L=b.canonical.y-(b.canonical.y>>P<<P),G=_.EXTENT>>P;_.ortho(E.posMatrix,0,G,0,G,0,1),_.translate(E.posMatrix,E.posMatrix,[-N*G,-L*G,0]),d[g]=E}else if(n.canonical.isChildOf(b.canonical)){const E=n.clone();E.posMatrix=new Float64Array(16);const P=n.canonical.z-b.canonical.z,N=n.canonical.x-(n.canonical.x>>P<<P),L=n.canonical.y-(n.canonical.y>>P<<P),G=_.EXTENT>>P;_.ortho(E.posMatrix,0,_.EXTENT,0,_.EXTENT,0,1),_.translate(E.posMatrix,E.posMatrix,[N*G,L*G,0]),_.scale(E.posMatrix,E.posMatrix,[1/2**P,1/2**P,0]),d[g]=E}}return d}getSourceTile(n,d){const g=this.sourceCache._source;let b=n.overscaledZ-this.deltaZoom;if(b>g.maxzoom&&(b=g.maxzoom),b<g.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(b).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!E||!E.dem)&&d)for(;b>=g.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(n.scaledTo(b--).key);return E}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=n)}}class Hr{constructor(n,d,g){this.painter=n,this.sourceCache=new Ha(d),this.options=g,this.exaggeration="number"==typeof g.exaggeration?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,d,g,b=_.EXTENT){if(!(d>=0&&d<b&&g>=0&&g<b))return 0;let E=0;const P=this.getTerrainData(n);if(P.tile&&P.tile.dem){const N=((Pe=[])[0]=(Be=P.u_terrain_matrix)[0]*(at=(Ne=[d/b*_.EXTENT,g/b*_.EXTENT])[0])+Be[4]*(Et=Ne[1])+Be[12],Pe[1]=Be[1]*at+Be[5]*Et+Be[13],Pe),L=[N[0]*P.tile.dem.dim,N[1]*P.tile.dem.dim],G=[Math.floor(L[0]),Math.floor(L[1])],ie=P.tile.dem.get(G[0],G[1]),te=P.tile.dem.get(G[0],G[1]+1),ve=P.tile.dem.get(G[0]+1,G[1]),Fe=P.tile.dem.get(G[0]+1,G[1]+1);E=_.interpolate.number(_.interpolate.number(ie,te,L[0]-G[0]),_.interpolate.number(ve,Fe,L[0]-G[0]),L[1]-G[1])}var Pe,Ne,Be,at,Et;return E}getElevation(n,d,g,b=_.EXTENT){return this.getDEMElevation(n,d,g,b)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const b=this.painter.context,E=new _.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new kt(b,E,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new kt(b,new _.RGBAImage({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=_.identity([])}const d=this.sourceCache.getSourceTile(n,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const b=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new kt(b,d.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),d.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const g=d&&d+d.tileID.key+n.key;if(g&&!this._demMatrixCache[g]){const b=this.sourceCache.sourceCache._source.maxzoom;let E=n.canonical.z-d.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=b?E=n.canonical.z-b:_.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=n.canonical.x-(n.canonical.x>>E<<E),N=n.canonical.y-(n.canonical.y>>E<<E),L=_.fromScaling(new Float64Array(16),[1/(_.EXTENT<<E),1/(_.EXTENT<<E),0]);_.translate(L,L,[P*_.EXTENT,N*_.EXTENT,0]),this._demMatrixCache[n.key]={matrix:L,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(n){const d=this.painter,g=d.width/devicePixelRatio,b=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new kt(d.context,{width:g,height:b,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new kt(d.context,{width:g,height:b,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(g,b,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,g,b))),this._fbo.colorAttachment.set("coords"===n?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,P=0;E<this._coordsTextureSize;E++)for(let N=0;N<this._coordsTextureSize;N++,P+=4)d[P+0]=255&N,d[P+1]=255&E,d[P+2]=N>>8<<4|E>>8,d[P+3]=0;const g=new _.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),b=new kt(n,g,n.gl.RGBA,{premultiply:!1});return b.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(n){const d=new Uint8Array(4),g=this.painter.context,b=g.gl;g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,d),g.bindFramebuffer.set(null);const E=d[0]+(d[2]>>4<<8),P=d[1]+((15&d[2])<<8),N=this.coordsIndex[255-d[3]],L=N&&this.sourceCache.getTileByID(N);if(!L)return null;const G=this._coordsTextureSize,ie=(1<<L.tileID.canonical.z)*G;return new _.MercatorCoordinate((L.tileID.canonical.x*G+E)/ie,(L.tileID.canonical.y*G+P)/ie,this.getElevation(L.tileID,E,P,G))}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,d=new _.Pos3dArray,g=new _.TriangleIndexArray,b=this.meshSize,E=_.EXTENT/b,P=b*b;for(let te=0;te<=b;te++)for(let ve=0;ve<=b;ve++)d.emplaceBack(ve*E,te*E,0);for(let te=0;te<P;te+=b+1)for(let ve=0;ve<b;ve++)g.emplaceBack(ve+te,b+ve+te+1,b+ve+te+2),g.emplaceBack(ve+te,b+ve+te+2,ve+te+1);const N=d.length,L=N+2*(b+1);for(const te of[0,1])for(let ve=0;ve<=b;ve++)for(const Fe of[0,1])d.emplaceBack(ve*E,te*_.EXTENT,Fe);for(let te=0;te<2*b;te+=2)g.emplaceBack(L+te,L+te+1,L+te+3),g.emplaceBack(L+te,L+te+3,L+te+2),g.emplaceBack(N+te,N+te+3,N+te+1),g.emplaceBack(N+te,N+te+2,N+te+3);const G=d.length,ie=G+2*(b+1);for(const te of[0,1])for(let ve=0;ve<=b;ve++)for(const Fe of[0,1])d.emplaceBack(te*_.EXTENT,ve*E,Fe);for(let te=0;te<2*b;te+=2)g.emplaceBack(G+te,G+te+1,G+te+3),g.emplaceBack(G+te,G+te+3,G+te+2),g.emplaceBack(ie+te,ie+te+3,ie+te+1),g.emplaceBack(ie+te,ie+te+2,ie+te+3);return this._mesh={indexBuffer:n.createIndexBuffer(g),vertexBuffer:n.createVertexBuffer(d,jo.members),segments:_.SegmentVector.simpleSegment(0,0,d.length,g.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*_.earthRadius/Math.pow(2,n)/5}getMinMaxElevation(n){const d=this.getTerrainData(n).tile,g={minElevation:null,maxElevation:null};return d&&d.dem&&(g.minElevation=d.dem.min*this.exaggeration,g.maxElevation=d.dem.max*this.exaggeration),g}}class Pc{constructor(n,d,g){this._context=n,this._size=d,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new kt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(g.texture),{id:n,fbo:d,texture:g,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>n.id!==d),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(n=>!n.inUse)}}const jn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class gr{constructor(n,d){this.painter=n,this.terrain=d,this.pool=new Pc(n.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(g=>!n._layers[g].isHidden(d)),this._coordsDescendingInv={};for(const g in n.sourceCaches){this._coordsDescendingInv[g]={};const b=n.sourceCaches[g].getVisibleCoordinates();for(const E of b){const P=this.terrain.sourceCache.getTerrainCoords(E);for(const N in P)this._coordsDescendingInv[g][N]||(this._coordsDescendingInv[g][N]=[]),this._coordsDescendingInv[g][N].push(P[N])}}this._coordsDescendingInvStr={};for(const g of n._order){const b=n._layers[g],E=b.source;if(jn[b.type]&&!this._coordsDescendingInvStr[E]){this._coordsDescendingInvStr[E]={};for(const P in this._coordsDescendingInv[E])this._coordsDescendingInvStr[E][P]=this._coordsDescendingInv[E][P].map(N=>N.key).sort().join()}}for(const g of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const E=this._coordsDescendingInvStr[b][g.tileID.key];E&&E!==g.rttCoords[b]&&(g.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const d=n.type,g=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(jn[d]&&(this._prevType&&jn[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(n.id),!b))return!0;if(jn[this._prevType]||jn[d]&&b){this._prevType=d;const E=this._stacks.length-1,P=this._stacks[E]||[];for(const N of this._renderableTiles){if(this.pool.isFull()&&(qr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(N),N.rtt[E]){const G=this.pool.getObjectForId(N.rtt[E].id);if(G.stamp===N.rtt[E].stamp){this.pool.useObject(G);continue}}const L=this.pool.getOrCreateFreeObject();this.pool.useObject(L),this.pool.stampObject(L),N.rtt[E]={id:L.id,stamp:L.stamp},g.context.bindFramebuffer.set(L.fbo.framebuffer),g.context.clear({color:_.Color.transparent,stencil:0}),g.currentStencilSource=void 0;for(let G=0;G<P.length;G++){const ie=g.style._layers[P[G]],te=ie.source?this._coordsDescendingInv[ie.source][N.tileID.key]:[N.tileID];g.context.viewport.set([0,0,L.fbo.width,L.fbo.height]),g._renderTileClippingMasks(ie,te),g.renderLayer(g,g.style.sourceCaches[ie.source],ie,te),ie.source&&(N.rttCoords[ie.source]=this._coordsDescendingInvStr[ie.source][N.tileID.key])}}return qr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),jn[d]}return!1}}const Vl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},Os=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},ol={showCompass:!0,showZoom:!0,visualizePitch:!1};class cc{constructor(n,d,g=!1){this._clickTolerance=10;const b=n.dragRotate._mouseRotate.getClickTolerance(),E=n.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=nl({clickTolerance:b,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:N,bearingDegreesPerPixelMoved:L=.8})=>{const G=new zl;return new cr({clickTolerance:N,move:(ie,te)=>({bearingDelta:(te.x-ie.x)*L}),moveStateManager:G,enable:P,assignEvents:Os})})({clickTolerance:b,enable:!0}),this.map=n,g&&(this.mousePitch=qs({clickTolerance:E,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:N,pitchDegreesPerPixelMoved:L=-.5})=>{const G=new zl;return new cr({clickTolerance:N,move:(ie,te)=>({pitchDelta:(te.y-ie.y)*L}),moveStateManager:G,enable:P,assignEvents:Os})})({clickTolerance:E,enable:!0})),_.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),he.addEventListener(d,"mousedown",this.mousedown),he.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),he.addEventListener(d,"touchcancel",this.reset)}startMouse(n,d){this.mouseRotate.dragStart(n,d),this.mousePitch&&this.mousePitch.dragStart(n,d),he.disableDrag()}startTouch(n,d){this.touchRotate.dragStart(n,d),this.touchPitch&&this.touchPitch.dragStart(n,d),he.disableDrag()}moveMouse(n,d){const g=this.map,{bearingDelta:b}=this.mouseRotate.dragMove(n,d)||{};if(b&&g.setBearing(g.getBearing()+b),this.mousePitch){const{pitchDelta:E}=this.mousePitch.dragMove(n,d)||{};E&&g.setPitch(g.getPitch()+E)}}moveTouch(n,d){const g=this.map,{bearingDelta:b}=this.touchRotate.dragMove(n,d)||{};if(b&&g.setBearing(g.getBearing()+b),this.touchPitch){const{pitchDelta:E}=this.touchPitch.dragMove(n,d)||{};E&&g.setPitch(g.getPitch()+E)}}off(){const n=this.element;he.removeEventListener(n,"mousedown",this.mousedown),he.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),he.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),he.removeEventListener(window,"touchend",this.touchend),he.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){he.enableDrag(),he.removeEventListener(window,"mousemove",this.mousemove),he.removeEventListener(window,"mouseup",this.mouseup),he.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),he.removeEventListener(window,"touchend",this.touchend)}mousedown(n){this.startMouse(_.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),he.mousePos(this.element,n)),he.addEventListener(window,"mousemove",this.mousemove),he.addEventListener(window,"mouseup",this.mouseup)}mousemove(n){this.moveMouse(n,he.mousePos(this.element,n))}mouseup(n){this.mouseRotate.dragEnd(n),this.mousePitch&&this.mousePitch.dragEnd(n),this.offTemp()}touchstart(n){1!==n.targetTouches.length?this.reset():(this._startPos=this._lastPos=he.touchPos(this.element,n.targetTouches)[0],this.startTouch(n,this._startPos),he.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),he.addEventListener(window,"touchend",this.touchend))}touchmove(n){1!==n.targetTouches.length?this.reset():(this._lastPos=he.touchPos(this.element,n.targetTouches)[0],this.moveTouch(n,this._lastPos))}touchend(n){0===n.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let ha;function $a(v,n,d){if(v=new _.LngLat(v.lng,v.lat),n){const g=new _.LngLat(v.lng-360,v.lat),b=new _.LngLat(v.lng+360,v.lat),E=d.locationPoint(v).distSqr(n);d.locationPoint(g).distSqr(n)<E?v=g:d.locationPoint(b).distSqr(n)<E&&(v=b)}for(;Math.abs(v.lng-d.center.lng)>180;){const g=d.locationPoint(v);if(g.x>=0&&g.y>=0&&g.x<=d.width&&g.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v}const To={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function yl(v,n,d){const g=v.classList;for(const b in To)g.remove(`maplibregl-${d}-anchor-${b}`);g.add(`maplibregl-${d}-anchor-${n}`)}class io extends _.Evented{constructor(n,d){if(super(),(n instanceof HTMLElement||d)&&(n=_.extend({element:n},d)),_.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=_.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=he.create("div"),this._element.setAttribute("aria-label","Map marker");const g=he.createNS("http://www.w3.org/2000/svg","svg"),b=41,E=27;g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height",`${b}px`),g.setAttributeNS(null,"width",`${E}px`),g.setAttributeNS(null,"viewBox",`0 0 ${E} ${b}`);const P=he.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const N=he.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");const L=he.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const G=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Et of G){const He=he.createNS("http://www.w3.org/2000/svg","ellipse");He.setAttributeNS(null,"opacity","0.04"),He.setAttributeNS(null,"cx","10.5"),He.setAttributeNS(null,"cy","5.80029008"),He.setAttributeNS(null,"rx",Et.rx),He.setAttributeNS(null,"ry",Et.ry),L.appendChild(He)}const ie=he.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"fill",this._color);const te=he.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ie.appendChild(te);const ve=he.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"opacity","0.25"),ve.setAttributeNS(null,"fill","#000000");const Fe=he.createNS("http://www.w3.org/2000/svg","path");Fe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ve.appendChild(Fe);const Pe=he.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Pe.setAttributeNS(null,"fill","#FFFFFF");const Ne=he.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Be=he.createNS("http://www.w3.org/2000/svg","circle");Be.setAttributeNS(null,"fill","#000000"),Be.setAttributeNS(null,"opacity","0.25"),Be.setAttributeNS(null,"cx","5.5"),Be.setAttributeNS(null,"cy","5.5"),Be.setAttributeNS(null,"r","5.4999962");const at=he.createNS("http://www.w3.org/2000/svg","circle");at.setAttributeNS(null,"fill","#FFFFFF"),at.setAttributeNS(null,"cx","5.5"),at.setAttributeNS(null,"cy","5.5"),at.setAttributeNS(null,"r","5.4999962"),Ne.appendChild(Be),Ne.appendChild(at),N.appendChild(L),N.appendChild(ie),N.appendChild(ve),N.appendChild(Pe),N.appendChild(Ne),g.appendChild(N),g.setAttributeNS(null,"height",b*this._scale+"px"),g.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(g),this._offset=_.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()}),yl(this._element,this._anchor,"marker"),this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),he.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=_.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(24.6+b)],"bottom-right":[-b,-1*(24.6+b)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(n){const d=n.code,g=n.charCode||n.keyCode;"Space"!==d&&"Enter"!==d&&32!==g&&13!==g||this.togglePopup()}_onMapClick(n){const d=n.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_update(n){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=$a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let d="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?d=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let g="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?g="rotateX(0deg)":"map"===this._pitchAlignment&&(g=`rotateX(${this._map.getPitch()}deg)`),n&&"moveend"!==n.type||(this._pos=this._pos.round()),he.setTransform(this._element,`${To[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${g} ${d}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const b=this._map.unproject(this._pos),E=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=b.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(n){return this._offset=_.Point.convert(n),this._update(),this}_onMove(n){if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new _.Event("dragstart"))),this.fire(new _.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new _.Event("dragend")),this._state="inactive"}_addDragHandler(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&"auto"!==n?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ul={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let co=0,sl=!1;const Ks={maxWidth:100,unit:"metric"};function is(v,n,d){const g=d&&d.maxWidth||100,b=v._container.clientHeight/2,E=v.unproject([0,b]),P=v.unproject([g,b]),N=E.distanceTo(P);if(d&&"imperial"===d.unit){const L=3.2808*N;L>5280?Ho(n,g,L/5280,v._getUIString("ScaleControl.Miles")):Ho(n,g,L,v._getUIString("ScaleControl.Feet"))}else d&&"nautical"===d.unit?Ho(n,g,N/1852,v._getUIString("ScaleControl.NauticalMiles")):N>=1e3?Ho(n,g,N/1e3,v._getUIString("ScaleControl.Kilometers")):Ho(n,g,N,v._getUIString("ScaleControl.Meters"))}function Ho(v,n,d,g){const b=function(E){const P=Math.pow(10,`${Math.floor(E)}`.length-1);let N=E/P;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:function(L){const G=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*G)/G}(N),P*N}(d);v.style.width=n*(b/d)+"px",v.innerHTML=`${b}&nbsp;${g}`}const vl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ia(v){if(v){if("number"==typeof v){const n=Math.round(Math.sqrt(.5*Math.pow(v,2)));return{center:new _.Point(0,0),top:new _.Point(0,v),"top-left":new _.Point(n,n),"top-right":new _.Point(-n,n),bottom:new _.Point(0,-v),"bottom-left":new _.Point(n,-n),"bottom-right":new _.Point(-n,-n),left:new _.Point(v,0),right:new _.Point(-v,0)}}if(v instanceof _.Point||Array.isArray(v)){const n=_.Point.convert(v);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:_.Point.convert(v.center||[0,0]),top:_.Point.convert(v.top||[0,0]),"top-left":_.Point.convert(v["top-left"]||[0,0]),"top-right":_.Point.convert(v["top-right"]||[0,0]),bottom:_.Point.convert(v.bottom||[0,0]),"bottom-left":_.Point.convert(v["bottom-left"]||[0,0]),"bottom-right":_.Point.convert(v["bottom-right"]||[0,0]),left:_.Point.convert(v.left||[0,0]),right:_.Point.convert(v.right||[0,0])}}return Ia(new _.Point(0,0))}const Js={setRTLTextPlugin:_.setRTLTextPlugin,getRTLTextPluginStatus:_.getRTLTextPluginStatus,Map:class extends Zi{constructor(v){var n;if(_.PerformanceUtils.mark(_.PerformanceMarkers.create),null!=(v=_.extend({},Vl,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new xr(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._interactive=v.interactive,this._cooperativeGestures=v.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new lc,this._controls=[],this._mapId=_.uniqueId(),this._locale=_.extend({},So,v.locale),this._clickTolerance=v.clickTolerance,this._pixelRatio=null!==(n=v.pixelRatio)&&void 0!==n?n:devicePixelRatio,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=mt.addThrottleControl(()=>this.isMoving()),this._requestManager=new Gt(v.transformRequest),"string"==typeof v.container){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),_.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let d=!1;this._resizeObserver=new ResizeObserver(g=>{d?this._trackResize&&this.resize(g)._update():d=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ts(this,v),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=v.hash&&new Nl("string"==typeof v.hash&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,_.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new mi({customAttribution:v.customAttribution})),v.maplibreLogo&&this.addControl(new ja,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update("style"===d.dataType),this.fire(new _.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new _.Event(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new _.Event("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(v,n){if(void 0===n&&(n=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new _.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const g=this._controlPositions[n];return-1!==n.indexOf("bottom")?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new _.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(v);return n>-1&&this._controls.splice(n,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,n,d,g){return null==g&&this.terrain&&(g=this.transform.getElevation(d,this.terrain)),super.calculateCameraOptionsFromTo(v,n,d,g)}resize(v){var n;const d=this._containerDimensions(),g=d[0],b=d[1];this._resizeCanvas(g,b,this.getPixelRatio()),this.transform.resize(g,b),null===(n=this._requestedCameraState)||void 0===n||n.resize(g,b),this.painter.resize(g,b,this.getPixelRatio());const E=!this._moving;return E&&(this.stop(),this.fire(new _.Event("movestart",v)).fire(new _.Event("move",v))),this.fire(new _.Event("resize",v)),E&&this.fire(new _.Event("moveend",v)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(v){const[n,d]=this._containerDimensions();this._pixelRatio=v,this._resizeCanvas(n,d,v),this.painter.resize(n,d,v)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Lt.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(v){return this.transform.locationPoint(_.LngLat.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(_.Point.convert(v),this.terrain)}isMoving(){var v;return this._moving||(null===(v=this.handlers)||void 0===v?void 0:v.isMoving())}isZooming(){var v;return this._zooming||(null===(v=this.handlers)||void 0===v?void 0:v.isZooming())}isRotating(){var v;return this._rotating||(null===(v=this.handlers)||void 0===v?void 0:v.isRotating())}_createDelegatedListener(v,n,d){if("mouseenter"===v||"mouseover"===v){let g=!1;return{layer:n,listener:d,delegates:{mousemove:E=>{const P=this.getLayer(n)?this.queryRenderedFeatures(E.point,{layers:[n]}):[];P.length?g||(g=!0,d.call(this,new bn(v,this,E.originalEvent,{features:P}))):g=!1},mouseout:()=>{g=!1}}}}if("mouseleave"===v||"mouseout"===v){let g=!1;return{layer:n,listener:d,delegates:{mousemove:P=>{(this.getLayer(n)?this.queryRenderedFeatures(P.point,{layers:[n]}):[]).length?g=!0:g&&(g=!1,d.call(this,new bn(v,this,P.originalEvent)))},mouseout:P=>{g&&(g=!1,d.call(this,new bn(v,this,P.originalEvent)))}}}}{const g=b=>{const E=this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[];E.length&&(b.features=E,d.call(this,b),delete b.features)};return{layer:n,listener:d,delegates:{[v]:g}}}}on(v,n,d){if(void 0===d)return super.on(v,n);const g=this._createDelegatedListener(v,n,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(g);for(const b in g.delegates)this.on(b,g.delegates[b]);return this}once(v,n,d){if(void 0===d)return super.once(v,n);const g=this._createDelegatedListener(v,n,d);for(const b in g.delegates)this.once(b,g.delegates[b]);return this}off(v,n,d){return void 0===d?super.off(v,n):(this._delegatedListeners&&this._delegatedListeners[v]&&(g=>{const b=this._delegatedListeners[v];for(let E=0;E<b.length;E++){const P=b[E];if(P.layer===n&&P.listener===d){for(const N in P.delegates)this.off(N,P.delegates[N]);return b.splice(E,1),this}}})(),this)}queryRenderedFeatures(v,n){if(!this.style)return[];let d;const g=v instanceof _.Point||Array.isArray(v),b=g?v:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(g?{}:v)||{},b instanceof _.Point||"number"==typeof b[0])d=[_.Point.convert(b)];else{const E=_.Point.convert(b[0]),P=_.Point.convert(b[1]);d=[E,new _.Point(P.x,E.y),P,new _.Point(E.x,P.y),E]}return this.style.queryRenderedFeatures(d,n,this.transform)}querySourceFeatures(v,n){return this.style.querySourceFeatures(v,n)}setStyle(v,n){return!1!==(n=_.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(v,n))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const n=this._locale[v];if(null==n)throw new Error(`Missing UI string '${v}'`);return n}_updateStyle(v,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,n));const d=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new $n(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof v?this.style.loadURL(v,n,d):this.style.loadJSON(v,n,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new $n(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,n){if("string"==typeof v){const d=this._requestManager.transformRequest(v,Ye.Style);_.getJSON(d,(g,b)=>{g?this.fire(new _.ErrorEvent(g)):b&&this._updateDiff(b,n)})}else"object"==typeof v&&this._updateDiff(v,n)}_updateDiff(v,n){try{this.style.setState(v,n)&&this._update(!0)}catch(d){_.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(v,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():_.warnOnce("There is no style added to the map.")}addSource(v,n){return this._lazyInitEmptyStyle(),this.style.addSource(v,n),this._update(!0)}isSourceLoaded(v){const n=this.style&&this.style.sourceCaches[v];if(void 0!==n)return n.loaded();this.fire(new _.ErrorEvent(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const n=this.style.sourceCaches[v.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);for(const d in this.style._layers){const g=this.style._layers[d];"hillshade"===g.type&&g.source===v.source&&_.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Hr(this.painter,n,v),this.painter.renderToTexture=new gr(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=d=>{"style"===d.dataType?this.terrain.sourceCache.freeRtt():"source"===d.dataType&&d.tile&&(d.sourceId===v.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new _.Event("terrain",{terrain:v})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const n in v){const d=v[n]._tiles;for(const g in d){const b=d[g];if("loaded"!==b.state&&"errored"!==b.state)return!1}}return!0}addSourceType(v,n,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,n,d)}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,n,{pixelRatio:d=1,sdf:g=!1,stretchX:b,stretchY:E,content:P}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||_.isImageBitmap(n)){const{width:N,height:L,data:G}=_.exported.getImageData(n);this.style.addImage(v,{data:new _.RGBAImage({width:N,height:L},G),pixelRatio:d,stretchX:b,stretchY:E,content:P,sdf:g,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new _.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:N,height:L,data:G}=n,ie=n;this.style.addImage(v,{data:new _.RGBAImage({width:N,height:L},new Uint8Array(G)),pixelRatio:d,stretchX:b,stretchY:E,content:P,sdf:g,version:0,userImage:ie}),ie.onAdd&&ie.onAdd(this,v)}}}updateImage(v,n){const d=this.style.getImage(v);if(!d)return this.fire(new _.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=n instanceof HTMLImageElement||_.isImageBitmap(n)?_.exported.getImageData(n):n,{width:b,height:E,data:P}=g;if(void 0===b||void 0===E)return this.fire(new _.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==d.data.width||E!==d.data.height)return this.fire(new _.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const N=!(n instanceof HTMLImageElement||_.isImageBitmap(n));d.data.replace(P,N),this.style.updateImage(v,d)}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new _.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,n){mt.getImage(this._requestManager.transformRequest(v,Ye.Image),n)}listImages(){return this.style.listImages()}addLayer(v,n){return this._lazyInitEmptyStyle(),this.style.addLayer(v,n),this._update(!0)}moveLayer(v,n){return this.style.moveLayer(v,n),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,n,d){return this.style.setLayerZoomRange(v,n,d),this._update(!0)}setFilter(v,n,d={}){return this.style.setFilter(v,n,d),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,n,d,g={}){return this.style.setPaintProperty(v,n,d,g),this._update(!0)}getPaintProperty(v,n){return this.style.getPaintProperty(v,n)}setLayoutProperty(v,n,d,g={}){return this.style.setLayoutProperty(v,n,d,g),this._update(!0)}getLayoutProperty(v,n){return this.style.getLayoutProperty(v,n)}setGlyphs(v,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,n,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,n,d,g=>{g||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,n,d=>{d||this._update(!0)}),this}setLight(v,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,n){return this.style.setFeatureState(v,n),this._update()}removeFeatureState(v,n){return this.style.removeFeatureState(v,n),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,n=0;return this._container&&(v=this._container.clientWidth||400,n=this._container.clientHeight||300),[v,n]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const n=this._canvasContainer=he.create("div","maplibregl-canvas-container",v);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=he.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions();this._resizeCanvas(d[0],d[1],this.getPixelRatio());const g=this._controlContainer=he.create("div","maplibregl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{b[E]=he.create("div",`maplibregl-ctrl-${E} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(v){this._onCooperativeGesture(v,v[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=he.create("div","maplibregl-cooperative-gesture-screen",this._container);let v="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(v="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${v}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){he.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(v,n,d){this._canvas.width=d*v,this._canvas.height=d*n,this._canvas.style.width=`${v}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{n={requestedAttributes:v},g&&(n.statusMessage=g.statusMessage,n.type=g.type)},{once:!0});const d=this._canvas.getContext("webgl2",v);if(!d){const g="Failed to initialize WebGL";throw n?(n.message=g,new Error(JSON.stringify(n))):new Error(g)}this.painter=new Xo(d,this.transform),$e.testSupport(d)}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new _.Event("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new _.Event("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(v,n,d){return!n&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,E=_.exported.now();this.style.zoomHistory.update(b,E);const P=new _.EvaluationParameters(b,{now:E,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),N=P.crossFadingFactor();1===N&&N===this._crossFadingFactor||(d=!0,this._crossFadingFactor=N),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new _.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,_.PerformanceUtils.mark(_.PerformanceMarkers.load),this.fire(new _.Event("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new _.Event("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,_.PerformanceUtils.mark(_.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),mt.removeThrottleControl(this._imageQueueHandle),null===(v=this._resizeObserver)||void 0===v||v.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),he.remove(this._canvasContainer),he.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),_.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new _.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=_.exported.frame(v=>{_.PerformanceUtils.frame(v),this._frame=null,this._render(v)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return"3.0.0"}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(v){this.options=_.extend({},ol,v),this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(_.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),he.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),he.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(_.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=he.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map.getZoom(),n=v===this._map.getMaxZoom(),d=v===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())}_rotateCompassArrow(){const v=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=v}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){he.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,n){const d=he.create("button",v,this._container);return d.type="button",d.addEventListener("click",n),d}_setButtonTitle(v,n){const d=this._map._getUIString(`NavigationControl.${n}`);v.title=d,v.setAttribute("aria-label",d)}},GeolocateControl:class extends _.Evented{constructor(v){super(),this.options=_.extend({},Ul,v),_.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(v){return this._map=v,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(n,d=!1){void 0===ha||d?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(g=>{ha="denied"!==g.state,n(ha)}).catch(()=>{ha=!!window.navigator.geolocation,n(ha)}):(ha=!!window.navigator.geolocation,n(ha)):n(ha)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),he.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,co=0,sl=!1}_isOutOfMapMaxBounds(v){const n=this._map.getMaxBounds(),d=v.coords;return n&&(d.longitude<n.getWest()||d.longitude>n.getEast()||d.latitude<n.getSouth()||d.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new _.Event("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(v),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(v),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new _.Event("geolocate",v)),this._finish()}}_updateCamera(v){const n=new _.LngLat(v.coords.longitude,v.coords.latitude),d=v.coords.accuracy,g=this._map.getBearing(),b=_.extend({bearing:g},this.options.fitBoundsOptions),E=Lt.fromLngLat(n,d);this._map.fitBounds(E,b,{geolocateSource:!0})}_updateMarker(v){if(v){const n=new _.LngLat(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.getBounds(),n=v.getSouthEast(),d=v.getNorthEast(),g=n.distanceTo(d),b=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(v){if(this._map){if(this.options.trackUserLocation)if(1===v.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===v.code&&sl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new _.Event("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=he.create("button","maplibregl-ctrl-geolocate",this._container),he.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===v){_.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=he.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new io(this._dotElement),this._circleElement=he.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new io({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||"ACTIVE_LOCK"!==this._watchState||n.originalEvent&&"resize"===n.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new _.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return _.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new _.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":co--,sl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new _.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new _.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),co++,co>1?(v={maximumAge:6e5,timeout:0},sl=!0):(v=this.options.positionOptions,sl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:mi,LogoControl:ja,ScaleControl:class{constructor(v){this.options=_.extend({},Ks,v),_.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){is(this._map,this._container,this.options)}onAdd(v){return this._map=v,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){he.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(v){this.options.unit=v,is(this._map,this._container,this.options)}},FullscreenControl:class extends _.Evented{constructor(v={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:_.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=he.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){he.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=he.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);he.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new _.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new _.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(v){this.options=v,_.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(v){return this._map=v,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=he.create("button","maplibregl-ctrl-terrain",this._container),he.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){he.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends _.Evented{constructor(v){super(),this.options=_.extend(Object.create(vl),v),_.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new _.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&he.remove(this._content),this._container&&(he.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new _.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=_.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const n=document.createDocumentFragment(),d=document.createElement("body");let g;for(d.innerHTML=v;g=d.firstChild,g;)n.appendChild(g);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=he.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}_createCloseButton(){this.options.closeButton&&(this._closeButton=he.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(v){this._update(v.point)}_onMouseMove(v){this._update(v.point)}_onDrag(v){this._update(v.point)}_update(v){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=he.create("div","maplibregl-popup",this._map.getContainer()),this._tip=he.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=$a(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!v))return;const n=this._pos=this._trackPointer&&v?v:this._map.project(this._lngLat);let d=this.options.anchor;const g=Ia(this.options.offset);if(!d){const E=this._container.offsetWidth,P=this._container.offsetHeight;let N;N=n.y+g.bottom.y<P?["top"]:n.y>this._map.transform.height-P?["bottom"]:[],n.x<E/2?N.push("left"):n.x>this._map.transform.width-E/2&&N.push("right"),d=0===N.length?"bottom":N.join("-")}const b=n.add(g[d]).round();he.setTransform(this._container,`${To[d]} translate(${b.x}px,${b.y}px)`),yl(this._container,d,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(jl);v&&v.focus()}_onClose(){this.remove()}},Marker:io,Style:$n,LngLat:_.LngLat,LngLatBounds:Lt,Point:_.Point,MercatorCoordinate:_.MercatorCoordinate,Evented:_.Evented,AJAXError:_.AJAXError,config:_.config,CanvasSource:Ti,GeoJSONSource:yt,ImageSource:pi,RasterDEMTileSource:Je,RasterTileSource:qt,VectorTileSource:ft,VideoSource:ct,prewarm:function(){nt().acquire(Ee)},clearPrewarmedResources:function(){const v=Nt;v&&(v.isPreloaded()&&1===v.numActive()?(v.release(Ee),Nt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"3.0.0"},get workerCount(){return st.workerCount},set workerCount(v){st.workerCount=v},get maxParallelImageRequests(){return _.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){_.config.MAX_PARALLEL_IMAGE_REQUESTS=v},get workerUrl(){return _.config.WORKER_URL},set workerUrl(v){_.config.WORKER_URL=v},addProtocol(v,n){_.config.REGISTERED_PROTOCOLS[v]=n},removeProtocol(v){delete _.config.REGISTERED_PROTOCOLS[v]}};return Ua.extend(Js,{isSafari:_.isSafari,getPerformanceMetrics:_.PerformanceUtils.getPerformanceMetrics}),Js}),w}()},7340:(yi,pt,j)=>{"use strict";j.d(pt,{IO:()=>mt,LC:()=>a,SB:()=>Ve,X$:()=>_,ZE:()=>Zt,ZN:()=>Yt,_j:()=>w,eR:()=>Xe,jt:()=>Ze,k1:()=>Wt,l3:()=>se,oB:()=>Ae,pV:()=>ot,vP:()=>$e});class w{}class a{}const se="*";function _(Ct,Oe){return{type:7,name:Ct,definitions:Oe,options:{}}}function Ze(Ct,Oe=null){return{type:4,styles:Oe,timings:Ct}}function $e(Ct,Oe=null){return{type:2,steps:Ct,options:Oe}}function Ae(Ct){return{type:6,styles:Ct,offset:null}}function Ve(Ct,Oe,tt){return{type:0,name:Ct,styles:Oe,options:tt}}function Xe(Ct,Oe,tt=null){return{type:1,expr:Ct,animation:Oe,options:tt}}function ot(Ct=null){return{type:9,options:Ct}}function mt(Ct,Oe,tt=null){return{type:11,selector:Ct,animation:Oe,options:tt}}function wt(Ct){Promise.resolve().then(Ct)}class Yt{constructor(Oe=0,tt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Oe+tt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}onStart(Oe){this._originalOnStartFns.push(Oe),this._onStartFns.push(Oe)}onDone(Oe){this._originalOnDoneFns.push(Oe),this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Oe){this._position=this.totalTime?Oe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Oe){const tt="start"==Oe?this._onStartFns:this._onDoneFns;tt.forEach(kt=>kt()),tt.length=0}}class Zt{constructor(Oe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Oe;let tt=0,kt=0,Ot=0;const Vt=this.players.length;0==Vt?wt(()=>this._onFinish()):this.players.forEach(ai=>{ai.onDone(()=>{++tt==Vt&&this._onFinish()}),ai.onDestroy(()=>{++kt==Vt&&this._onDestroy()}),ai.onStart(()=>{++Ot==Vt&&this._onStart()})}),this.totalTime=this.players.reduce((ai,gi)=>Math.max(ai,gi.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}init(){this.players.forEach(Oe=>Oe.init())}onStart(Oe){this._onStartFns.push(Oe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[])}onDone(Oe){this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Oe=>Oe.play())}pause(){this.players.forEach(Oe=>Oe.pause())}restart(){this.players.forEach(Oe=>Oe.restart())}finish(){this._onFinish(),this.players.forEach(Oe=>Oe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Oe=>Oe.destroy()),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this.players.forEach(Oe=>Oe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Oe){const tt=Oe*this.totalTime;this.players.forEach(kt=>{const Ot=kt.totalTime?Math.min(1,tt/kt.totalTime):1;kt.setPosition(Ot)})}getPosition(){const Oe=this.players.reduce((tt,kt)=>null===tt||kt.totalTime>tt.totalTime?kt:tt,null);return null!=Oe?Oe.getPosition():0}beforeDestroy(){this.players.forEach(Oe=>{Oe.beforeDestroy&&Oe.beforeDestroy()})}triggerCallback(Oe){const tt="start"==Oe?this._onStartFns:this._onDoneFns;tt.forEach(kt=>kt()),tt.length=0}}const Wt="!"},7253:(yi,pt,j)=>{"use strict";j.d(pt,{rt:()=>it,s1:()=>yt,$s:()=>Xt,Em:()=>ei,tE:()=>Ie,qV:()=>xt,qm:()=>ni,ic:()=>ct,Kd:()=>V,X6:()=>ze,yG:()=>et});var w=j(6895),a=j(4650),se=j(3353),_=j(7579),Ze=j(727),he=j(1135),$e=j(9646),Ae=j(9521),Ve=j(8505),je=j(8372),Xe=j(9300),ke=j(4004),ot=j(5698);function Ye(ae){return(0,Xe.h)((Y,Q)=>ae<=Q)}var mt=j(1884),Gt=j(2722),wt=j(1281),Yt=j(9643),Zt=j(9841),Wt=j(7272),Ct=j(9751),Oe=j(8675);const kt=new Set;let Ot,Vt=(()=>{class ae{constructor(Q){this._platform=Q,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):gi}matchMedia(Q){return(this._platform.WEBKIT||this._platform.BLINK)&&function ai(ae){if(!kt.has(ae))try{Ot||(Ot=document.createElement("style"),Ot.setAttribute("type","text/css"),document.head.appendChild(Ot)),Ot.sheet&&(Ot.sheet.insertRule(`@media ${ae} {body{ }}`,0),kt.add(ae))}catch(Y){console.error(Y)}}(Q),this._matchMedia(Q)}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(se.t4))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})();function gi(ae){return{matches:"all"===ae||""===ae,media:ae,addListener:()=>{},removeListener:()=>{}}}let hi=(()=>{class ae{constructor(Q,xe){this._mediaMatcher=Q,this._zone=xe,this._queries=new Map,this._destroySubject=new _.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(Q){return zi((0,wt.Eq)(Q)).some(Re=>this._registerQuery(Re).mql.matches)}observe(Q){const Re=zi((0,wt.Eq)(Q)).map(Jt=>this._registerQuery(Jt).observable);let ht=(0,Zt.a)(Re);return ht=(0,Wt.z)(ht.pipe((0,ot.q)(1)),ht.pipe(Ye(1),(0,je.b)(0))),ht.pipe((0,ke.U)(Jt=>{const Fi={matches:!1,breakpoints:{}};return Jt.forEach(({matches:an,query:un})=>{Fi.matches=Fi.matches||an,Fi.breakpoints[un]=an}),Fi}))}_registerQuery(Q){if(this._queries.has(Q))return this._queries.get(Q);const xe=this._mediaMatcher.matchMedia(Q),ht={observable:new Ct.y(Jt=>{const Fi=an=>this._zone.run(()=>Jt.next(an));return xe.addListener(Fi),()=>{xe.removeListener(Fi)}}).pipe((0,Oe.O)(xe),(0,ke.U)(({matches:Jt})=>({query:Q,matches:Jt})),(0,Gt.R)(this._destroySubject)),mql:xe};return this._queries.set(Q,ht),ht}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(Vt),a.LFG(a.R0b))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})();function zi(ae){return ae.map(Y=>Y.split(",")).reduce((Y,Q)=>Y.concat(Q)).map(Y=>Y.trim())}function Kt(ae,Y){return(ae.getAttribute(Y)||"").match(/\S+/g)||[]}const oi="cdk-describedby-message",zt="cdk-describedby-host";let Lt=0,Xt=(()=>{class ae{constructor(Q,xe){this._platform=xe,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+Lt++,this._document=Q,this._id=(0,a.f3M)(a.AFp)+"-"+Lt++}describe(Q,xe,Re){if(!this._canBeDescribed(Q,xe))return;const ht=ft(xe,Re);"string"!=typeof xe?(qt(xe,this._id),this._messageRegistry.set(ht,{messageElement:xe,referenceCount:0})):this._messageRegistry.has(ht)||this._createMessageElement(xe,Re),this._isElementDescribedByMessage(Q,ht)||this._addMessageReference(Q,ht)}removeDescription(Q,xe,Re){if(!xe||!this._isElementNode(Q))return;const ht=ft(xe,Re);if(this._isElementDescribedByMessage(Q,ht)&&this._removeMessageReference(Q,ht),"string"==typeof xe){const Jt=this._messageRegistry.get(ht);Jt&&0===Jt.referenceCount&&this._deleteMessageElement(ht)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const Q=this._document.querySelectorAll(`[${zt}="${this._id}"]`);for(let xe=0;xe<Q.length;xe++)this._removeCdkDescribedByReferenceIds(Q[xe]),Q[xe].removeAttribute(zt);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(Q,xe){const Re=this._document.createElement("div");qt(Re,this._id),Re.textContent=Q,xe&&Re.setAttribute("role",xe),this._createMessagesContainer(),this._messagesContainer.appendChild(Re),this._messageRegistry.set(ft(Q,xe),{messageElement:Re,referenceCount:0})}_deleteMessageElement(Q){this._messageRegistry.get(Q)?.messageElement?.remove(),this._messageRegistry.delete(Q)}_createMessagesContainer(){if(this._messagesContainer)return;const Q="cdk-describedby-message-container",xe=this._document.querySelectorAll(`.${Q}[platform="server"]`);for(let ht=0;ht<xe.length;ht++)xe[ht].remove();const Re=this._document.createElement("div");Re.style.visibility="hidden",Re.classList.add(Q),Re.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&Re.setAttribute("platform","server"),this._document.body.appendChild(Re),this._messagesContainer=Re}_removeCdkDescribedByReferenceIds(Q){const xe=Kt(Q,"aria-describedby").filter(Re=>0!=Re.indexOf(oi));Q.setAttribute("aria-describedby",xe.join(" "))}_addMessageReference(Q,xe){const Re=this._messageRegistry.get(xe);(function Bt(ae,Y,Q){const xe=Kt(ae,Y);xe.some(Re=>Re.trim()==Q.trim())||(xe.push(Q.trim()),ae.setAttribute(Y,xe.join(" ")))})(Q,"aria-describedby",Re.messageElement.id),Q.setAttribute(zt,this._id),Re.referenceCount++}_removeMessageReference(Q,xe){const Re=this._messageRegistry.get(xe);Re.referenceCount--,function $t(ae,Y,Q){const Re=Kt(ae,Y).filter(ht=>ht!=Q.trim());Re.length?ae.setAttribute(Y,Re.join(" ")):ae.removeAttribute(Y)}(Q,"aria-describedby",Re.messageElement.id),Q.removeAttribute(zt)}_isElementDescribedByMessage(Q,xe){const Re=Kt(Q,"aria-describedby"),ht=this._messageRegistry.get(xe),Jt=ht&&ht.messageElement.id;return!!Jt&&-1!=Re.indexOf(Jt)}_canBeDescribed(Q,xe){if(!this._isElementNode(Q))return!1;if(xe&&"object"==typeof xe)return!0;const Re=null==xe?"":`${xe}`.trim(),ht=Q.getAttribute("aria-label");return!(!Re||ht&&ht.trim()===Re)}_isElementNode(Q){return Q.nodeType===this._document.ELEMENT_NODE}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(w.K0),a.LFG(se.t4))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})();function ft(ae,Y){return"string"==typeof ae?`${Y||""}/${ae}`:ae}function qt(ae,Y){ae.id||(ae.id=`${oi}-${Y}-${Lt++}`)}class Je{constructor(Y){this._items=Y,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new _.x,this._typeaheadSubscription=Ze.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=Q=>Q.disabled,this._pressedLetters=[],this.tabOut=new _.x,this.change=new _.x,Y instanceof a.n_E&&(this._itemChangesSubscription=Y.changes.subscribe(Q=>{if(this._activeItem){const Re=Q.toArray().indexOf(this._activeItem);Re>-1&&Re!==this._activeItemIndex&&(this._activeItemIndex=Re)}}))}skipPredicate(Y){return this._skipPredicateFn=Y,this}withWrap(Y=!0){return this._wrap=Y,this}withVerticalOrientation(Y=!0){return this._vertical=Y,this}withHorizontalOrientation(Y){return this._horizontal=Y,this}withAllowedModifierKeys(Y){return this._allowedModifierKeys=Y,this}withTypeAhead(Y=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Ve.b)(Q=>this._pressedLetters.push(Q)),(0,je.b)(Y),(0,Xe.h)(()=>this._pressedLetters.length>0),(0,ke.U)(()=>this._pressedLetters.join(""))).subscribe(Q=>{const xe=this._getItemsArray();for(let Re=1;Re<xe.length+1;Re++){const ht=(this._activeItemIndex+Re)%xe.length,Jt=xe[ht];if(!this._skipPredicateFn(Jt)&&0===Jt.getLabel().toUpperCase().trim().indexOf(Q)){this.setActiveItem(ht);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(Y=!0){return this._homeAndEnd=Y,this}withPageUpDown(Y=!0,Q=10){return this._pageUpAndDown={enabled:Y,delta:Q},this}setActiveItem(Y){const Q=this._activeItem;this.updateActiveItem(Y),this._activeItem!==Q&&this.change.next(this._activeItemIndex)}onKeydown(Y){const Q=Y.keyCode,Re=["altKey","ctrlKey","metaKey","shiftKey"].every(ht=>!Y[ht]||this._allowedModifierKeys.indexOf(ht)>-1);switch(Q){case Ae.Mf:return void this.tabOut.next();case Ae.JH:if(this._vertical&&Re){this.setNextItemActive();break}return;case Ae.LH:if(this._vertical&&Re){this.setPreviousItemActive();break}return;case Ae.SV:if(this._horizontal&&Re){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Ae.oh:if(this._horizontal&&Re){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Ae.Sd:if(this._homeAndEnd&&Re){this.setFirstItemActive();break}return;case Ae.uR:if(this._homeAndEnd&&Re){this.setLastItemActive();break}return;case Ae.Ku:if(this._pageUpAndDown.enabled&&Re){const ht=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(ht>0?ht:0,1);break}return;case Ae.VM:if(this._pageUpAndDown.enabled&&Re){const ht=this._activeItemIndex+this._pageUpAndDown.delta,Jt=this._getItemsArray().length;this._setActiveItemByIndex(ht<Jt?ht:Jt-1,-1);break}return;default:return void((Re||(0,Ae.Vb)(Y,"shiftKey"))&&(Y.key&&1===Y.key.length?this._letterKeyStream.next(Y.key.toLocaleUpperCase()):(Q>=Ae.A&&Q<=Ae.Z||Q>=Ae.xE&&Q<=Ae.aO)&&this._letterKeyStream.next(String.fromCharCode(Q))))}this._pressedLetters=[],Y.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Y){const Q=this._getItemsArray(),xe="number"==typeof Y?Y:Q.indexOf(Y);this._activeItem=Q[xe]??null,this._activeItemIndex=xe}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(Y){this._wrap?this._setActiveInWrapMode(Y):this._setActiveInDefaultMode(Y)}_setActiveInWrapMode(Y){const Q=this._getItemsArray();for(let xe=1;xe<=Q.length;xe++){const Re=(this._activeItemIndex+Y*xe+Q.length)%Q.length;if(!this._skipPredicateFn(Q[Re]))return void this.setActiveItem(Re)}}_setActiveInDefaultMode(Y){this._setActiveItemByIndex(this._activeItemIndex+Y,Y)}_setActiveItemByIndex(Y,Q){const xe=this._getItemsArray();if(xe[Y]){for(;this._skipPredicateFn(xe[Y]);)if(!xe[Y+=Q])return;this.setActiveItem(Y)}}_getItemsArray(){return this._items instanceof a.n_E?this._items.toArray():this._items}}class yt extends Je{setActiveItem(Y){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Y),this.activeItem&&this.activeItem.setActiveStyles()}}class ei extends Je{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Y){return this._origin=Y,this}setActiveItem(Y){super.setActiveItem(Y),this.activeItem&&this.activeItem.focus(this._origin)}}let ct=(()=>{class ae{constructor(Q){this._platform=Q}isDisabled(Q){return Q.hasAttribute("disabled")}isVisible(Q){return function fi(ae){return!!(ae.offsetWidth||ae.offsetHeight||"function"==typeof ae.getClientRects&&ae.getClientRects().length)}(Q)&&"visible"===getComputedStyle(Q).visibility}isTabbable(Q){if(!this._platform.isBrowser)return!1;const xe=function Ti(ae){try{return ae.frameElement}catch{return null}}(function Ee(ae){return ae.ownerDocument&&ae.ownerDocument.defaultView||window}(Q));if(xe&&(-1===nn(xe)||!this.isVisible(xe)))return!1;let Re=Q.nodeName.toLowerCase(),ht=nn(Q);return Q.hasAttribute("contenteditable")?-1!==ht:!("iframe"===Re||"object"===Re||this._platform.WEBKIT&&this._platform.IOS&&!function Pt(ae){let Y=ae.nodeName.toLowerCase(),Q="input"===Y&&ae.type;return"text"===Q||"password"===Q||"select"===Y||"textarea"===Y}(Q))&&("audio"===Re?!!Q.hasAttribute("controls")&&-1!==ht:"video"===Re?-1!==ht&&(null!==ht||this._platform.FIREFOX||Q.hasAttribute("controls")):Q.tabIndex>=0)}isFocusable(Q,xe){return function Ce(ae){return!function rt(ae){return function _i(ae){return"input"==ae.nodeName.toLowerCase()}(ae)&&"hidden"==ae.type}(ae)&&(function bi(ae){let Y=ae.nodeName.toLowerCase();return"input"===Y||"select"===Y||"button"===Y||"textarea"===Y}(ae)||function Dt(ae){return function Ui(ae){return"a"==ae.nodeName.toLowerCase()}(ae)&&ae.hasAttribute("href")}(ae)||ae.hasAttribute("contenteditable")||wi(ae))}(Q)&&!this.isDisabled(Q)&&(xe?.ignoreVisibility||this.isVisible(Q))}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(se.t4))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})();function wi(ae){if(!ae.hasAttribute("tabindex")||void 0===ae.tabIndex)return!1;let Y=ae.getAttribute("tabindex");return!(!Y||isNaN(parseInt(Y,10)))}function nn(ae){if(!wi(ae))return null;const Y=parseInt(ae.getAttribute("tabindex")||"",10);return isNaN(Y)?-1:Y}class st{get enabled(){return this._enabled}set enabled(Y){this._enabled=Y,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Y,this._startAnchor),this._toggleAnchorTabIndex(Y,this._endAnchor))}constructor(Y,Q,xe,Re,ht=!1){this._element=Y,this._checker=Q,this._ngZone=xe,this._document=Re,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,ht||this.attachAnchors()}destroy(){const Y=this._startAnchor,Q=this._endAnchor;Y&&(Y.removeEventListener("focus",this.startAnchorListener),Y.remove()),Q&&(Q.removeEventListener("focus",this.endAnchorListener),Q.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Y){return new Promise(Q=>{this._executeOnStable(()=>Q(this.focusInitialElement(Y)))})}focusFirstTabbableElementWhenReady(Y){return new Promise(Q=>{this._executeOnStable(()=>Q(this.focusFirstTabbableElement(Y)))})}focusLastTabbableElementWhenReady(Y){return new Promise(Q=>{this._executeOnStable(()=>Q(this.focusLastTabbableElement(Y)))})}_getRegionBoundary(Y){const Q=this._element.querySelectorAll(`[cdk-focus-region-${Y}], [cdkFocusRegion${Y}], [cdk-focus-${Y}]`);return"start"==Y?Q.length?Q[0]:this._getFirstTabbableElement(this._element):Q.length?Q[Q.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Y){const Q=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Q){if(!this._checker.isFocusable(Q)){const xe=this._getFirstTabbableElement(Q);return xe?.focus(Y),!!xe}return Q.focus(Y),!0}return this.focusFirstTabbableElement(Y)}focusFirstTabbableElement(Y){const Q=this._getRegionBoundary("start");return Q&&Q.focus(Y),!!Q}focusLastTabbableElement(Y){const Q=this._getRegionBoundary("end");return Q&&Q.focus(Y),!!Q}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Y){if(this._checker.isFocusable(Y)&&this._checker.isTabbable(Y))return Y;const Q=Y.children;for(let xe=0;xe<Q.length;xe++){const Re=Q[xe].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Q[xe]):null;if(Re)return Re}return null}_getLastTabbableElement(Y){if(this._checker.isFocusable(Y)&&this._checker.isTabbable(Y))return Y;const Q=Y.children;for(let xe=Q.length-1;xe>=0;xe--){const Re=Q[xe].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Q[xe]):null;if(Re)return Re}return null}_createAnchor(){const Y=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Y),Y.classList.add("cdk-visually-hidden"),Y.classList.add("cdk-focus-trap-anchor"),Y.setAttribute("aria-hidden","true"),Y}_toggleAnchorTabIndex(Y,Q){Y?Q.setAttribute("tabindex","0"):Q.removeAttribute("tabindex")}toggleAnchors(Y){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Y,this._startAnchor),this._toggleAnchorTabIndex(Y,this._endAnchor))}_executeOnStable(Y){this._ngZone.isStable?Y():this._ngZone.onStable.pipe((0,ot.q)(1)).subscribe(Y)}}let xt=(()=>{class ae{constructor(Q,xe,Re){this._checker=Q,this._ngZone=xe,this._document=Re}create(Q,xe=!1){return new st(Q,this._checker,this._ngZone,this._document,xe)}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(ct),a.LFG(a.R0b),a.LFG(w.K0))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})();function ze(ae){return 0===ae.buttons||0===ae.offsetX&&0===ae.offsetY}function et(ae){const Y=ae.touches&&ae.touches[0]||ae.changedTouches&&ae.changedTouches[0];return!(!Y||-1!==Y.identifier||null!=Y.radiusX&&1!==Y.radiusX||null!=Y.radiusY&&1!==Y.radiusY)}const Ei=new a.OlP("cdk-input-modality-detector-options"),li={ignoreKeys:[Ae.zL,Ae.jx,Ae.b2,Ae.MW,Ae.JU]},Li=(0,se.i$)({passive:!0,capture:!0});let pn=(()=>{class ae{get mostRecentModality(){return this._modality.value}constructor(Q,xe,Re,ht){this._platform=Q,this._mostRecentTarget=null,this._modality=new he.X(null),this._lastTouchMs=0,this._onKeydown=Jt=>{this._options?.ignoreKeys?.some(Fi=>Fi===Jt.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,se.sA)(Jt))},this._onMousedown=Jt=>{Date.now()-this._lastTouchMs<650||(this._modality.next(ze(Jt)?"keyboard":"mouse"),this._mostRecentTarget=(0,se.sA)(Jt))},this._onTouchstart=Jt=>{et(Jt)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,se.sA)(Jt))},this._options={...li,...ht},this.modalityDetected=this._modality.pipe(Ye(1)),this.modalityChanged=this.modalityDetected.pipe((0,mt.x)()),Q.isBrowser&&xe.runOutsideAngular(()=>{Re.addEventListener("keydown",this._onKeydown,Li),Re.addEventListener("mousedown",this._onMousedown,Li),Re.addEventListener("touchstart",this._onTouchstart,Li)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Li),document.removeEventListener("mousedown",this._onMousedown,Li),document.removeEventListener("touchstart",this._onTouchstart,Li))}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(se.t4),a.LFG(a.R0b),a.LFG(w.K0),a.LFG(Ei,8))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})();const Se=new a.OlP("liveAnnouncerElement",{providedIn:"root",factory:function re(){return null}}),me=new a.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let K=0,V=(()=>{class ae{constructor(Q,xe,Re,ht){this._ngZone=xe,this._defaultOptions=ht,this._document=Re,this._liveElement=Q||this._createLiveElement()}announce(Q,...xe){const Re=this._defaultOptions;let ht,Jt;return 1===xe.length&&"number"==typeof xe[0]?Jt=xe[0]:[ht,Jt]=xe,this.clear(),clearTimeout(this._previousTimeout),ht||(ht=Re&&Re.politeness?Re.politeness:"polite"),null==Jt&&Re&&(Jt=Re.duration),this._liveElement.setAttribute("aria-live",ht),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(Fi=>this._currentResolve=Fi)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Q,"number"==typeof Jt&&(this._previousTimeout=setTimeout(()=>this.clear(),Jt)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const Q="cdk-live-announcer-element",xe=this._document.getElementsByClassName(Q),Re=this._document.createElement("div");for(let ht=0;ht<xe.length;ht++)xe[ht].remove();return Re.classList.add(Q),Re.classList.add("cdk-visually-hidden"),Re.setAttribute("aria-atomic","true"),Re.setAttribute("aria-live","polite"),Re.id="cdk-live-announcer-"+K++,this._document.body.appendChild(Re),Re}_exposeAnnouncerToModals(Q){const xe=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let Re=0;Re<xe.length;Re++){const ht=xe[Re],Jt=ht.getAttribute("aria-owns");Jt?-1===Jt.indexOf(Q)&&ht.setAttribute("aria-owns",Jt+" "+Q):ht.setAttribute("aria-owns",Q)}}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(Se,8),a.LFG(a.R0b),a.LFG(w.K0),a.LFG(me,8))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})();const ce=new a.OlP("cdk-focus-monitor-default-options"),fe=(0,se.i$)({passive:!0,capture:!0});let Ie=(()=>{class ae{constructor(Q,xe,Re,ht,Jt){this._ngZone=Q,this._platform=xe,this._inputModalityDetector=Re,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new _.x,this._rootNodeFocusAndBlurListener=Fi=>{for(let un=(0,se.sA)(Fi);un;un=un.parentElement)"focus"===Fi.type?this._onFocus(Fi,un):this._onBlur(Fi,un)},this._document=ht,this._detectionMode=Jt?.detectionMode||0}monitor(Q,xe=!1){const Re=(0,wt.fI)(Q);if(!this._platform.isBrowser||1!==Re.nodeType)return(0,$e.of)(null);const ht=(0,se.kV)(Re)||this._getDocument(),Jt=this._elementInfo.get(Re);if(Jt)return xe&&(Jt.checkChildren=!0),Jt.subject;const Fi={checkChildren:xe,subject:new _.x,rootNode:ht};return this._elementInfo.set(Re,Fi),this._registerGlobalListeners(Fi),Fi.subject}stopMonitoring(Q){const xe=(0,wt.fI)(Q),Re=this._elementInfo.get(xe);Re&&(Re.subject.complete(),this._setClasses(xe),this._elementInfo.delete(xe),this._removeGlobalListeners(Re))}focusVia(Q,xe,Re){const ht=(0,wt.fI)(Q);ht===this._getDocument().activeElement?this._getClosestElementsInfo(ht).forEach(([Fi,an])=>this._originChanged(Fi,xe,an)):(this._setOrigin(xe),"function"==typeof ht.focus&&ht.focus(Re))}ngOnDestroy(){this._elementInfo.forEach((Q,xe)=>this.stopMonitoring(xe))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Q){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Q)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:Q&&this._isLastInteractionFromInputLabel(Q)?"mouse":"program"}_shouldBeAttributedToTouch(Q){return 1===this._detectionMode||!!Q?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(Q,xe){Q.classList.toggle("cdk-focused",!!xe),Q.classList.toggle("cdk-touch-focused","touch"===xe),Q.classList.toggle("cdk-keyboard-focused","keyboard"===xe),Q.classList.toggle("cdk-mouse-focused","mouse"===xe),Q.classList.toggle("cdk-program-focused","program"===xe)}_setOrigin(Q,xe=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Q,this._originFromTouchInteraction="touch"===Q&&xe,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Q,xe){const Re=this._elementInfo.get(xe),ht=(0,se.sA)(Q);!Re||!Re.checkChildren&&xe!==ht||this._originChanged(xe,this._getFocusOrigin(ht),Re)}_onBlur(Q,xe){const Re=this._elementInfo.get(xe);!Re||Re.checkChildren&&Q.relatedTarget instanceof Node&&xe.contains(Q.relatedTarget)||(this._setClasses(xe),this._emitOrigin(Re,null))}_emitOrigin(Q,xe){Q.subject.observers.length&&this._ngZone.run(()=>Q.subject.next(xe))}_registerGlobalListeners(Q){if(!this._platform.isBrowser)return;const xe=Q.rootNode,Re=this._rootNodeFocusListenerCount.get(xe)||0;Re||this._ngZone.runOutsideAngular(()=>{xe.addEventListener("focus",this._rootNodeFocusAndBlurListener,fe),xe.addEventListener("blur",this._rootNodeFocusAndBlurListener,fe)}),this._rootNodeFocusListenerCount.set(xe,Re+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Gt.R)(this._stopInputModalityDetector)).subscribe(ht=>{this._setOrigin(ht,!0)}))}_removeGlobalListeners(Q){const xe=Q.rootNode;if(this._rootNodeFocusListenerCount.has(xe)){const Re=this._rootNodeFocusListenerCount.get(xe);Re>1?this._rootNodeFocusListenerCount.set(xe,Re-1):(xe.removeEventListener("focus",this._rootNodeFocusAndBlurListener,fe),xe.removeEventListener("blur",this._rootNodeFocusAndBlurListener,fe),this._rootNodeFocusListenerCount.delete(xe))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Q,xe,Re){this._setClasses(Q,xe),this._emitOrigin(Re,xe),this._lastFocusOrigin=xe}_getClosestElementsInfo(Q){const xe=[];return this._elementInfo.forEach((Re,ht)=>{(ht===Q||Re.checkChildren&&ht.contains(Q))&&xe.push([ht,Re])}),xe}_isLastInteractionFromInputLabel(Q){const{_mostRecentTarget:xe,mostRecentModality:Re}=this._inputModalityDetector;if("mouse"!==Re||!xe||xe===Q||"INPUT"!==Q.nodeName&&"TEXTAREA"!==Q.nodeName||Q.disabled)return!1;const ht=Q.labels;if(ht)for(let Jt=0;Jt<ht.length;Jt++)if(ht[Jt].contains(xe))return!0;return!1}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(a.R0b),a.LFG(se.t4),a.LFG(pn),a.LFG(w.K0,8),a.LFG(ce,8))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})();const St="cdk-high-contrast-black-on-white",vt="cdk-high-contrast-white-on-black",Tt="cdk-high-contrast-active";let ni=(()=>{class ae{constructor(Q,xe){this._platform=Q,this._document=xe,this._breakpointSubscription=(0,a.f3M)(hi).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Q=this._document.createElement("div");Q.style.backgroundColor="rgb(1,2,3)",Q.style.position="absolute",this._document.body.appendChild(Q);const xe=this._document.defaultView||window,Re=xe&&xe.getComputedStyle?xe.getComputedStyle(Q):null,ht=(Re&&Re.backgroundColor||"").replace(/ /g,"");switch(Q.remove(),ht){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Q=this._document.body.classList;Q.remove(Tt,St,vt),this._hasCheckedHighContrastMode=!0;const xe=this.getHighContrastMode();1===xe?Q.add(Tt,St):2===xe&&Q.add(Tt,vt)}}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(se.t4),a.LFG(w.K0))},ae.\u0275prov=a.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})(),it=(()=>{class ae{constructor(Q){Q._applyBodyHighContrastModeCssClasses()}}return ae.\u0275fac=function(Q){return new(Q||ae)(a.LFG(ni))},ae.\u0275mod=a.oAB({type:ae}),ae.\u0275inj=a.cJS({imports:[Yt.Q8]}),ae})()},445:(yi,pt,j)=>{"use strict";j.d(pt,{Is:()=>$e,vT:()=>Ve});var w=j(4650),a=j(6895);const se=new w.OlP("cdk-dir-doc",{providedIn:"root",factory:function _(){return(0,w.f3M)(a.K0)}}),Ze=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $e=(()=>{class je{constructor(ke){this.value="ltr",this.change=new w.vpe,ke&&(this.value=function he(je){const Xe=je?.toLowerCase()||"";return"auto"===Xe&&typeof navigator<"u"&&navigator?.language?Ze.test(navigator.language)?"rtl":"ltr":"rtl"===Xe?"rtl":"ltr"}((ke.body?ke.body.dir:null)||(ke.documentElement?ke.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return je.\u0275fac=function(ke){return new(ke||je)(w.LFG(se,8))},je.\u0275prov=w.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),Ve=(()=>{class je{}return je.\u0275fac=function(ke){return new(ke||je)},je.\u0275mod=w.oAB({type:je}),je.\u0275inj=w.cJS({}),je})()},1281:(yi,pt,j)=>{"use strict";j.d(pt,{Eq:()=>Ze,HM:()=>he,Ig:()=>a,fI:()=>$e,su:()=>se});var w=j(4650);function a(Ve){return null!=Ve&&"false"!=`${Ve}`}function se(Ve,je=0){return function _(Ve){return!isNaN(parseFloat(Ve))&&!isNaN(Number(Ve))}(Ve)?Number(Ve):je}function Ze(Ve){return Array.isArray(Ve)?Ve:[Ve]}function he(Ve){return null==Ve?"":"string"==typeof Ve?Ve:`${Ve}px`}function $e(Ve){return Ve instanceof w.SBq?Ve.nativeElement:Ve}},5017:(yi,pt,j)=>{"use strict";j.d(pt,{A8:()=>je,Ov:()=>Ae});var w=j(7579),a=j(4650);class Ae{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(ot=!1,Ye,mt=!0,Gt){this._multiple=ot,this._emitChanges=mt,this.compareWith=Gt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new w.x,Ye&&Ye.length&&(ot?Ye.forEach(wt=>this._markSelected(wt)):this._markSelected(Ye[0]),this._selectedToEmit.length=0)}select(...ot){this._verifyValueAssignment(ot),ot.forEach(mt=>this._markSelected(mt));const Ye=this._hasQueuedChanges();return this._emitChangeEvent(),Ye}deselect(...ot){this._verifyValueAssignment(ot),ot.forEach(mt=>this._unmarkSelected(mt));const Ye=this._hasQueuedChanges();return this._emitChangeEvent(),Ye}setSelection(...ot){this._verifyValueAssignment(ot);const Ye=this.selected,mt=new Set(ot);ot.forEach(wt=>this._markSelected(wt)),Ye.filter(wt=>!mt.has(wt)).forEach(wt=>this._unmarkSelected(wt));const Gt=this._hasQueuedChanges();return this._emitChangeEvent(),Gt}toggle(ot){return this.isSelected(ot)?this.deselect(ot):this.select(ot)}clear(ot=!0){this._unmarkAll();const Ye=this._hasQueuedChanges();return ot&&this._emitChangeEvent(),Ye}isSelected(ot){return this._selection.has(this._getConcreteValue(ot))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(ot){this._multiple&&this.selected&&this._selected.sort(ot)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(ot){ot=this._getConcreteValue(ot),this.isSelected(ot)||(this._multiple||this._unmarkAll(),this.isSelected(ot)||this._selection.add(ot),this._emitChanges&&this._selectedToEmit.push(ot))}_unmarkSelected(ot){ot=this._getConcreteValue(ot),this.isSelected(ot)&&(this._selection.delete(ot),this._emitChanges&&this._deselectedToEmit.push(ot))}_unmarkAll(){this.isEmpty()||this._selection.forEach(ot=>this._unmarkSelected(ot))}_verifyValueAssignment(ot){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(ot){if(this.compareWith){for(let Ye of this._selection)if(this.compareWith(ot,Ye))return Ye;return ot}return ot}}let je=(()=>{class ke{constructor(){this._listeners=[]}notify(Ye,mt){for(let Gt of this._listeners)Gt(Ye,mt)}listen(Ye){return this._listeners.push(Ye),()=>{this._listeners=this._listeners.filter(mt=>Ye!==mt)}}ngOnDestroy(){this._listeners=[]}}return ke.\u0275fac=function(Ye){return new(Ye||ke)},ke.\u0275prov=a.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})()},9521:(yi,pt,j)=>{"use strict";j.d(pt,{A:()=>Lt,JH:()=>Wt,JU:()=>he,K5:()=>Ze,Ku:()=>ot,LH:()=>Yt,L_:()=>ke,MW:()=>be,Mf:()=>se,SV:()=>Zt,Sd:()=>Gt,VM:()=>Ye,Vb:()=>zn,Z:()=>De,aO:()=>$t,b2:()=>Fn,hY:()=>Xe,jx:()=>$e,oh:()=>wt,uR:()=>mt,xE:()=>Ot,zL:()=>Ae});const se=9,Ze=13,he=16,$e=17,Ae=18,Xe=27,ke=32,ot=33,Ye=34,mt=35,Gt=36,wt=37,Yt=38,Zt=39,Wt=40,Ot=48,$t=57,Lt=65,De=90,be=91,Fn=224;function zn(ji,...Rr){return Rr.length?Rr.some(Eo=>ji[Eo]):ji.altKey||ji.shiftKey||ji.ctrlKey||ji.metaKey}},9643:(yi,pt,j)=>{"use strict";j.d(pt,{Q8:()=>Ve,wD:()=>Ae});var w=j(1281),a=j(4650),se=j(9751),_=j(7579),Ze=j(8372);let he=(()=>{class je{create(ke){return typeof MutationObserver>"u"?null:new MutationObserver(ke)}}return je.\u0275fac=function(ke){return new(ke||je)},je.\u0275prov=a.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),$e=(()=>{class je{constructor(ke){this._mutationObserverFactory=ke,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((ke,ot)=>this._cleanupObserver(ot))}observe(ke){const ot=(0,w.fI)(ke);return new se.y(Ye=>{const Gt=this._observeElement(ot).subscribe(Ye);return()=>{Gt.unsubscribe(),this._unobserveElement(ot)}})}_observeElement(ke){if(this._observedElements.has(ke))this._observedElements.get(ke).count++;else{const ot=new _.x,Ye=this._mutationObserverFactory.create(mt=>ot.next(mt));Ye&&Ye.observe(ke,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(ke,{observer:Ye,stream:ot,count:1})}return this._observedElements.get(ke).stream}_unobserveElement(ke){this._observedElements.has(ke)&&(this._observedElements.get(ke).count--,this._observedElements.get(ke).count||this._cleanupObserver(ke))}_cleanupObserver(ke){if(this._observedElements.has(ke)){const{observer:ot,stream:Ye}=this._observedElements.get(ke);ot&&ot.disconnect(),Ye.complete(),this._observedElements.delete(ke)}}}return je.\u0275fac=function(ke){return new(ke||je)(a.LFG(he))},je.\u0275prov=a.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),Ae=(()=>{class je{get disabled(){return this._disabled}set disabled(ke){this._disabled=(0,w.Ig)(ke),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(ke){this._debounce=(0,w.su)(ke),this._subscribe()}constructor(ke,ot,Ye){this._contentObserver=ke,this._elementRef=ot,this._ngZone=Ye,this.event=new a.vpe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const ke=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?ke.pipe((0,Ze.b)(this.debounce)):ke).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return je.\u0275fac=function(ke){return new(ke||je)(a.Y36($e),a.Y36(a.SBq),a.Y36(a.R0b))},je.\u0275dir=a.lG2({type:je,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),je})(),Ve=(()=>{class je{}return je.\u0275fac=function(ke){return new(ke||je)},je.\u0275mod=a.oAB({type:je}),je.\u0275inj=a.cJS({providers:[he]}),je})()},8184:(yi,pt,j)=>{"use strict";j.d(pt,{U8:()=>wi,aV:()=>Ti,pI:()=>Dt,xu:()=>rt});var w=j(8605),a=j(6895),se=j(4650),_=j(1281),Ze=j(3353),he=j(9300),$e=j(5698),Ae=j(2722),Ve=j(2529),je=j(445),Xe=j(4080),ke=j(7579),ot=j(727),Ye=j(6451),mt=j(9521);const Gt=(0,Ze.Mq)();class wt{constructor(Ce,Ee){this._viewportRuler=Ce,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=Ee}attach(){}enable(){if(this._canBeEnabled()){const Ce=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=Ce.style.left||"",this._previousHTMLStyles.top=Ce.style.top||"",Ce.style.left=(0,_.HM)(-this._previousScrollPosition.left),Ce.style.top=(0,_.HM)(-this._previousScrollPosition.top),Ce.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const Ce=this._document.documentElement,st=Ce.style,xt=this._document.body.style,Nt=st.scrollBehavior||"",nt=xt.scrollBehavior||"";this._isEnabled=!1,st.left=this._previousHTMLStyles.left,st.top=this._previousHTMLStyles.top,Ce.classList.remove("cdk-global-scrollblock"),Gt&&(st.scrollBehavior=xt.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Gt&&(st.scrollBehavior=Nt,xt.scrollBehavior=nt)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const Ee=this._document.body,st=this._viewportRuler.getViewportSize();return Ee.scrollHeight>st.height||Ee.scrollWidth>st.width}}class Zt{constructor(Ce,Ee,st,xt){this._scrollDispatcher=Ce,this._ngZone=Ee,this._viewportRuler=st,this._config=xt,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(Ce){this._overlayRef=Ce}enable(){if(this._scrollSubscription)return;const Ce=this._scrollDispatcher.scrolled(0).pipe((0,he.h)(Ee=>!Ee||!this._overlayRef.overlayElement.contains(Ee.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=Ce.subscribe(()=>{const Ee=this._viewportRuler.getViewportScrollPosition().top;Math.abs(Ee-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=Ce.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Wt{enable(){}disable(){}attach(){}}function Ct(Pt,Ce){return Ce.some(Ee=>Pt.bottom<Ee.top||Pt.top>Ee.bottom||Pt.right<Ee.left||Pt.left>Ee.right)}function Oe(Pt,Ce){return Ce.some(Ee=>Pt.top<Ee.top||Pt.bottom>Ee.bottom||Pt.left<Ee.left||Pt.right>Ee.right)}class tt{constructor(Ce,Ee,st,xt){this._scrollDispatcher=Ce,this._viewportRuler=Ee,this._ngZone=st,this._config=xt,this._scrollSubscription=null}attach(Ce){this._overlayRef=Ce}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const Ee=this._overlayRef.overlayElement.getBoundingClientRect(),{width:st,height:xt}=this._viewportRuler.getViewportSize();Ct(Ee,[{width:st,height:xt,bottom:xt,right:st,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let kt=(()=>{class Pt{constructor(Ee,st,xt,Nt){this._scrollDispatcher=Ee,this._viewportRuler=st,this._ngZone=xt,this.noop=()=>new Wt,this.close=nt=>new Zt(this._scrollDispatcher,this._ngZone,this._viewportRuler,nt),this.block=()=>new wt(this._viewportRuler,this._document),this.reposition=nt=>new tt(this._scrollDispatcher,this._viewportRuler,this._ngZone,nt),this._document=Nt}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.LFG(w.mF),se.LFG(w.rL),se.LFG(se.R0b),se.LFG(a.K0))},Pt.\u0275prov=se.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();class Ot{constructor(Ce){if(this.scrollStrategy=new Wt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,Ce){const Ee=Object.keys(Ce);for(const st of Ee)void 0!==Ce[st]&&(this[st]=Ce[st])}}}class gi{constructor(Ce,Ee){this.connectionPair=Ce,this.scrollableViewProperties=Ee}}let xi=(()=>{class Pt{constructor(Ee){this._attachedOverlays=[],this._document=Ee}ngOnDestroy(){this.detach()}add(Ee){this.remove(Ee),this._attachedOverlays.push(Ee)}remove(Ee){const st=this._attachedOverlays.indexOf(Ee);st>-1&&this._attachedOverlays.splice(st,1),0===this._attachedOverlays.length&&this.detach()}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.LFG(a.K0))},Pt.\u0275prov=se.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})(),At=(()=>{class Pt extends xi{constructor(Ee,st){super(Ee),this._ngZone=st,this._keydownListener=xt=>{const Nt=this._attachedOverlays;for(let nt=Nt.length-1;nt>-1;nt--)if(Nt[nt]._keydownEvents.observers.length>0){const De=Nt[nt]._keydownEvents;this._ngZone?this._ngZone.run(()=>De.next(xt)):De.next(xt);break}}}add(Ee){super.add(Ee),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.LFG(a.K0),se.LFG(se.R0b,8))},Pt.\u0275prov=se.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})(),Bt=(()=>{class Pt extends xi{constructor(Ee,st,xt){super(Ee),this._platform=st,this._ngZone=xt,this._cursorStyleIsSet=!1,this._pointerDownListener=Nt=>{this._pointerDownEventTarget=(0,Ze.sA)(Nt)},this._clickListener=Nt=>{const nt=(0,Ze.sA)(Nt),De="click"===Nt.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:nt;this._pointerDownEventTarget=null;const be=this._attachedOverlays.slice();for(let _e=be.length-1;_e>-1;_e--){const Qe=be[_e];if(Qe._outsidePointerEvents.observers.length<1||!Qe.hasAttached())continue;if(Qe.overlayElement.contains(nt)||Qe.overlayElement.contains(De))break;const ze=Qe._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>ze.next(Nt)):ze.next(Nt)}}}add(Ee){if(super.add(Ee),!this._isAttached){const st=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(st)):this._addEventListeners(st),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=st.style.cursor,st.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const Ee=this._document.body;Ee.removeEventListener("pointerdown",this._pointerDownListener,!0),Ee.removeEventListener("click",this._clickListener,!0),Ee.removeEventListener("auxclick",this._clickListener,!0),Ee.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(Ee.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(Ee){Ee.addEventListener("pointerdown",this._pointerDownListener,!0),Ee.addEventListener("click",this._clickListener,!0),Ee.addEventListener("auxclick",this._clickListener,!0),Ee.addEventListener("contextmenu",this._clickListener,!0)}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.LFG(a.K0),se.LFG(Ze.t4),se.LFG(se.R0b,8))},Pt.\u0275prov=se.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})(),$t=(()=>{class Pt{constructor(Ee,st){this._platform=st,this._document=Ee}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Ee="cdk-overlay-container";if(this._platform.isBrowser||(0,Ze.Oy)()){const xt=this._document.querySelectorAll(`.${Ee}[platform="server"], .${Ee}[platform="test"]`);for(let Nt=0;Nt<xt.length;Nt++)xt[Nt].remove()}const st=this._document.createElement("div");st.classList.add(Ee),(0,Ze.Oy)()?st.setAttribute("platform","test"):this._platform.isBrowser||st.setAttribute("platform","server"),this._document.body.appendChild(st),this._containerElement=st}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.LFG(a.K0),se.LFG(Ze.t4))},Pt.\u0275prov=se.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();class Kt{constructor(Ce,Ee,st,xt,Nt,nt,De,be,_e,Qe=!1){this._portalOutlet=Ce,this._host=Ee,this._pane=st,this._config=xt,this._ngZone=Nt,this._keyboardDispatcher=nt,this._document=De,this._location=be,this._outsideClickDispatcher=_e,this._animationsDisabled=Qe,this._backdropElement=null,this._backdropClick=new ke.x,this._attachments=new ke.x,this._detachments=new ke.x,this._locationChanges=ot.w0.EMPTY,this._backdropClickHandler=ze=>this._backdropClick.next(ze),this._backdropTransitionendHandler=ze=>{this._disposeBackdrop(ze.target)},this._keydownEvents=new ke.x,this._outsidePointerEvents=new ke.x,xt.scrollStrategy&&(this._scrollStrategy=xt.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=xt.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(Ce){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const Ee=this._portalOutlet.attach(Ce);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,$e.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof Ee?.onDestroy&&Ee.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),Ee}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const Ce=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),Ce}dispose(){const Ce=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,Ce&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(Ce){Ce!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=Ce,this.hasAttached()&&(Ce.attach(this),this.updatePosition()))}updateSize(Ce){this._config={...this._config,...Ce},this._updateElementSize()}setDirection(Ce){this._config={...this._config,direction:Ce},this._updateElementDirection()}addPanelClass(Ce){this._pane&&this._toggleClasses(this._pane,Ce,!0)}removePanelClass(Ce){this._pane&&this._toggleClasses(this._pane,Ce,!1)}getDirection(){const Ce=this._config.direction;return Ce?"string"==typeof Ce?Ce:Ce.value:"ltr"}updateScrollStrategy(Ce){Ce!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=Ce,this.hasAttached()&&(Ce.attach(this),Ce.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const Ce=this._pane.style;Ce.width=(0,_.HM)(this._config.width),Ce.height=(0,_.HM)(this._config.height),Ce.minWidth=(0,_.HM)(this._config.minWidth),Ce.minHeight=(0,_.HM)(this._config.minHeight),Ce.maxWidth=(0,_.HM)(this._config.maxWidth),Ce.maxHeight=(0,_.HM)(this._config.maxHeight)}_togglePointerEvents(Ce){this._pane.style.pointerEvents=Ce?"":"none"}_attachBackdrop(){const Ce="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(Ce)})}):this._backdropElement.classList.add(Ce)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const Ce=this._backdropElement;if(Ce){if(this._animationsDisabled)return void this._disposeBackdrop(Ce);Ce.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{Ce.addEventListener("transitionend",this._backdropTransitionendHandler)}),Ce.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(Ce)},500))}}_toggleClasses(Ce,Ee,st){const xt=(0,_.Eq)(Ee||[]).filter(Nt=>!!Nt);xt.length&&(st?Ce.classList.add(...xt):Ce.classList.remove(...xt))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const Ce=this._ngZone.onStable.pipe((0,Ae.R)((0,Ye.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),Ce.unsubscribe())})})}_disposeScrollStrategy(){const Ce=this._scrollStrategy;Ce&&(Ce.disable(),Ce.detach&&Ce.detach())}_disposeBackdrop(Ce){Ce&&(Ce.removeEventListener("click",this._backdropClickHandler),Ce.removeEventListener("transitionend",this._backdropTransitionendHandler),Ce.remove(),this._backdropElement===Ce&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const ci="cdk-overlay-connected-position-bounding-box",oi=/([A-Za-z%]+)$/;class zt{get positions(){return this._preferredPositions}constructor(Ce,Ee,st,xt,Nt){this._viewportRuler=Ee,this._document=st,this._platform=xt,this._overlayContainer=Nt,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ke.x,this._resizeSubscription=ot.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(Ce)}attach(Ce){this._validatePositions(),Ce.hostElement.classList.add(ci),this._overlayRef=Ce,this._boundingBox=Ce.hostElement,this._pane=Ce.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Ce=this._originRect,Ee=this._overlayRect,st=this._viewportRect,xt=this._containerRect,Nt=[];let nt;for(let De of this._preferredPositions){let be=this._getOriginPoint(Ce,xt,De),_e=this._getOverlayPoint(be,Ee,De),Qe=this._getOverlayFit(_e,Ee,st,De);if(Qe.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(De,be);this._canFitWithFlexibleDimensions(Qe,_e,st)?Nt.push({position:De,origin:be,overlayRect:Ee,boundingBoxRect:this._calculateBoundingBoxRect(be,De)}):(!nt||nt.overlayFit.visibleArea<Qe.visibleArea)&&(nt={overlayFit:Qe,overlayPoint:_e,originPoint:be,position:De,overlayRect:Ee})}if(Nt.length){let De=null,be=-1;for(const _e of Nt){const Qe=_e.boundingBoxRect.width*_e.boundingBoxRect.height*(_e.position.weight||1);Qe>be&&(be=Qe,De=_e)}return this._isPushed=!1,void this._applyPosition(De.position,De.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(nt.position,nt.originPoint);this._applyPosition(nt.position,nt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Lt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ci),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const Ce=this._lastPosition;if(Ce){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Ee=this._getOriginPoint(this._originRect,this._containerRect,Ce);this._applyPosition(Ce,Ee)}else this.apply()}withScrollableContainers(Ce){return this._scrollables=Ce,this}withPositions(Ce){return this._preferredPositions=Ce,-1===Ce.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(Ce){return this._viewportMargin=Ce,this}withFlexibleDimensions(Ce=!0){return this._hasFlexibleDimensions=Ce,this}withGrowAfterOpen(Ce=!0){return this._growAfterOpen=Ce,this}withPush(Ce=!0){return this._canPush=Ce,this}withLockedPosition(Ce=!0){return this._positionLocked=Ce,this}setOrigin(Ce){return this._origin=Ce,this}withDefaultOffsetX(Ce){return this._offsetX=Ce,this}withDefaultOffsetY(Ce){return this._offsetY=Ce,this}withTransformOriginOn(Ce){return this._transformOriginSelector=Ce,this}_getOriginPoint(Ce,Ee,st){let xt,Nt;if("center"==st.originX)xt=Ce.left+Ce.width/2;else{const nt=this._isRtl()?Ce.right:Ce.left,De=this._isRtl()?Ce.left:Ce.right;xt="start"==st.originX?nt:De}return Ee.left<0&&(xt-=Ee.left),Nt="center"==st.originY?Ce.top+Ce.height/2:"top"==st.originY?Ce.top:Ce.bottom,Ee.top<0&&(Nt-=Ee.top),{x:xt,y:Nt}}_getOverlayPoint(Ce,Ee,st){let xt,Nt;return xt="center"==st.overlayX?-Ee.width/2:"start"===st.overlayX?this._isRtl()?-Ee.width:0:this._isRtl()?0:-Ee.width,Nt="center"==st.overlayY?-Ee.height/2:"top"==st.overlayY?0:-Ee.height,{x:Ce.x+xt,y:Ce.y+Nt}}_getOverlayFit(Ce,Ee,st,xt){const Nt=ft(Ee);let{x:nt,y:De}=Ce,be=this._getOffset(xt,"x"),_e=this._getOffset(xt,"y");be&&(nt+=be),_e&&(De+=_e);let et=0-De,Ei=De+Nt.height-st.height,li=this._subtractOverflows(Nt.width,0-nt,nt+Nt.width-st.width),qi=this._subtractOverflows(Nt.height,et,Ei),Li=li*qi;return{visibleArea:Li,isCompletelyWithinViewport:Nt.width*Nt.height===Li,fitsInViewportVertically:qi===Nt.height,fitsInViewportHorizontally:li==Nt.width}}_canFitWithFlexibleDimensions(Ce,Ee,st){if(this._hasFlexibleDimensions){const xt=st.bottom-Ee.y,Nt=st.right-Ee.x,nt=Xt(this._overlayRef.getConfig().minHeight),De=Xt(this._overlayRef.getConfig().minWidth);return(Ce.fitsInViewportVertically||null!=nt&&nt<=xt)&&(Ce.fitsInViewportHorizontally||null!=De&&De<=Nt)}return!1}_pushOverlayOnScreen(Ce,Ee,st){if(this._previousPushAmount&&this._positionLocked)return{x:Ce.x+this._previousPushAmount.x,y:Ce.y+this._previousPushAmount.y};const xt=ft(Ee),Nt=this._viewportRect,nt=Math.max(Ce.x+xt.width-Nt.width,0),De=Math.max(Ce.y+xt.height-Nt.height,0),be=Math.max(Nt.top-st.top-Ce.y,0),_e=Math.max(Nt.left-st.left-Ce.x,0);let Qe=0,ze=0;return Qe=xt.width<=Nt.width?_e||-nt:Ce.x<this._viewportMargin?Nt.left-st.left-Ce.x:0,ze=xt.height<=Nt.height?be||-De:Ce.y<this._viewportMargin?Nt.top-st.top-Ce.y:0,this._previousPushAmount={x:Qe,y:ze},{x:Ce.x+Qe,y:Ce.y+ze}}_applyPosition(Ce,Ee){if(this._setTransformOrigin(Ce),this._setOverlayElementStyles(Ee,Ce),this._setBoundingBoxStyles(Ee,Ce),Ce.panelClass&&this._addPanelClasses(Ce.panelClass),this._lastPosition=Ce,this._positionChanges.observers.length){const st=this._getScrollVisibility(),xt=new gi(Ce,st);this._positionChanges.next(xt)}this._isInitialRender=!1}_setTransformOrigin(Ce){if(!this._transformOriginSelector)return;const Ee=this._boundingBox.querySelectorAll(this._transformOriginSelector);let st,xt=Ce.overlayY;st="center"===Ce.overlayX?"center":this._isRtl()?"start"===Ce.overlayX?"right":"left":"start"===Ce.overlayX?"left":"right";for(let Nt=0;Nt<Ee.length;Nt++)Ee[Nt].style.transformOrigin=`${st} ${xt}`}_calculateBoundingBoxRect(Ce,Ee){const st=this._viewportRect,xt=this._isRtl();let Nt,nt,De,Qe,ze,et;if("top"===Ee.overlayY)nt=Ce.y,Nt=st.height-nt+this._viewportMargin;else if("bottom"===Ee.overlayY)De=st.height-Ce.y+2*this._viewportMargin,Nt=st.height-De+this._viewportMargin;else{const Ei=Math.min(st.bottom-Ce.y+st.top,Ce.y),li=this._lastBoundingBoxSize.height;Nt=2*Ei,nt=Ce.y-Ei,Nt>li&&!this._isInitialRender&&!this._growAfterOpen&&(nt=Ce.y-li/2)}if("end"===Ee.overlayX&&!xt||"start"===Ee.overlayX&&xt)et=st.width-Ce.x+this._viewportMargin,Qe=Ce.x-this._viewportMargin;else if("start"===Ee.overlayX&&!xt||"end"===Ee.overlayX&&xt)ze=Ce.x,Qe=st.right-Ce.x;else{const Ei=Math.min(st.right-Ce.x+st.left,Ce.x),li=this._lastBoundingBoxSize.width;Qe=2*Ei,ze=Ce.x-Ei,Qe>li&&!this._isInitialRender&&!this._growAfterOpen&&(ze=Ce.x-li/2)}return{top:nt,left:ze,bottom:De,right:et,width:Qe,height:Nt}}_setBoundingBoxStyles(Ce,Ee){const st=this._calculateBoundingBoxRect(Ce,Ee);!this._isInitialRender&&!this._growAfterOpen&&(st.height=Math.min(st.height,this._lastBoundingBoxSize.height),st.width=Math.min(st.width,this._lastBoundingBoxSize.width));const xt={};if(this._hasExactPosition())xt.top=xt.left="0",xt.bottom=xt.right=xt.maxHeight=xt.maxWidth="",xt.width=xt.height="100%";else{const Nt=this._overlayRef.getConfig().maxHeight,nt=this._overlayRef.getConfig().maxWidth;xt.height=(0,_.HM)(st.height),xt.top=(0,_.HM)(st.top),xt.bottom=(0,_.HM)(st.bottom),xt.width=(0,_.HM)(st.width),xt.left=(0,_.HM)(st.left),xt.right=(0,_.HM)(st.right),xt.alignItems="center"===Ee.overlayX?"center":"end"===Ee.overlayX?"flex-end":"flex-start",xt.justifyContent="center"===Ee.overlayY?"center":"bottom"===Ee.overlayY?"flex-end":"flex-start",Nt&&(xt.maxHeight=(0,_.HM)(Nt)),nt&&(xt.maxWidth=(0,_.HM)(nt))}this._lastBoundingBoxSize=st,Lt(this._boundingBox.style,xt)}_resetBoundingBoxStyles(){Lt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Lt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(Ce,Ee){const st={},xt=this._hasExactPosition(),Nt=this._hasFlexibleDimensions,nt=this._overlayRef.getConfig();if(xt){const Qe=this._viewportRuler.getViewportScrollPosition();Lt(st,this._getExactOverlayY(Ee,Ce,Qe)),Lt(st,this._getExactOverlayX(Ee,Ce,Qe))}else st.position="static";let De="",be=this._getOffset(Ee,"x"),_e=this._getOffset(Ee,"y");be&&(De+=`translateX(${be}px) `),_e&&(De+=`translateY(${_e}px)`),st.transform=De.trim(),nt.maxHeight&&(xt?st.maxHeight=(0,_.HM)(nt.maxHeight):Nt&&(st.maxHeight="")),nt.maxWidth&&(xt?st.maxWidth=(0,_.HM)(nt.maxWidth):Nt&&(st.maxWidth="")),Lt(this._pane.style,st)}_getExactOverlayY(Ce,Ee,st){let xt={top:"",bottom:""},Nt=this._getOverlayPoint(Ee,this._overlayRect,Ce);return this._isPushed&&(Nt=this._pushOverlayOnScreen(Nt,this._overlayRect,st)),"bottom"===Ce.overlayY?xt.bottom=this._document.documentElement.clientHeight-(Nt.y+this._overlayRect.height)+"px":xt.top=(0,_.HM)(Nt.y),xt}_getExactOverlayX(Ce,Ee,st){let nt,xt={left:"",right:""},Nt=this._getOverlayPoint(Ee,this._overlayRect,Ce);return this._isPushed&&(Nt=this._pushOverlayOnScreen(Nt,this._overlayRect,st)),nt=this._isRtl()?"end"===Ce.overlayX?"left":"right":"end"===Ce.overlayX?"right":"left","right"===nt?xt.right=this._document.documentElement.clientWidth-(Nt.x+this._overlayRect.width)+"px":xt.left=(0,_.HM)(Nt.x),xt}_getScrollVisibility(){const Ce=this._getOriginRect(),Ee=this._pane.getBoundingClientRect(),st=this._scrollables.map(xt=>xt.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Oe(Ce,st),isOriginOutsideView:Ct(Ce,st),isOverlayClipped:Oe(Ee,st),isOverlayOutsideView:Ct(Ee,st)}}_subtractOverflows(Ce,...Ee){return Ee.reduce((st,xt)=>st-Math.max(xt,0),Ce)}_getNarrowedViewportRect(){const Ce=this._document.documentElement.clientWidth,Ee=this._document.documentElement.clientHeight,st=this._viewportRuler.getViewportScrollPosition();return{top:st.top+this._viewportMargin,left:st.left+this._viewportMargin,right:st.left+Ce-this._viewportMargin,bottom:st.top+Ee-this._viewportMargin,width:Ce-2*this._viewportMargin,height:Ee-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(Ce,Ee){return"x"===Ee?null==Ce.offsetX?this._offsetX:Ce.offsetX:null==Ce.offsetY?this._offsetY:Ce.offsetY}_validatePositions(){}_addPanelClasses(Ce){this._pane&&(0,_.Eq)(Ce).forEach(Ee=>{""!==Ee&&-1===this._appliedPanelClasses.indexOf(Ee)&&(this._appliedPanelClasses.push(Ee),this._pane.classList.add(Ee))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(Ce=>{this._pane.classList.remove(Ce)}),this._appliedPanelClasses=[])}_getOriginRect(){const Ce=this._origin;if(Ce instanceof se.SBq)return Ce.nativeElement.getBoundingClientRect();if(Ce instanceof Element)return Ce.getBoundingClientRect();const Ee=Ce.width||0,st=Ce.height||0;return{top:Ce.y,bottom:Ce.y+st,left:Ce.x,right:Ce.x+Ee,height:st,width:Ee}}}function Lt(Pt,Ce){for(let Ee in Ce)Ce.hasOwnProperty(Ee)&&(Pt[Ee]=Ce[Ee]);return Pt}function Xt(Pt){if("number"!=typeof Pt&&null!=Pt){const[Ce,Ee]=Pt.split(oi);return Ee&&"px"!==Ee?null:parseFloat(Ce)}return Pt||null}function ft(Pt){return{top:Math.floor(Pt.top),right:Math.floor(Pt.right),bottom:Math.floor(Pt.bottom),left:Math.floor(Pt.left),width:Math.floor(Pt.width),height:Math.floor(Pt.height)}}const yt="cdk-global-overlay-wrapper";class ei{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(Ce){const Ee=Ce.getConfig();this._overlayRef=Ce,this._width&&!Ee.width&&Ce.updateSize({width:this._width}),this._height&&!Ee.height&&Ce.updateSize({height:this._height}),Ce.hostElement.classList.add(yt),this._isDisposed=!1}top(Ce=""){return this._bottomOffset="",this._topOffset=Ce,this._alignItems="flex-start",this}left(Ce=""){return this._xOffset=Ce,this._xPosition="left",this}bottom(Ce=""){return this._topOffset="",this._bottomOffset=Ce,this._alignItems="flex-end",this}right(Ce=""){return this._xOffset=Ce,this._xPosition="right",this}start(Ce=""){return this._xOffset=Ce,this._xPosition="start",this}end(Ce=""){return this._xOffset=Ce,this._xPosition="end",this}width(Ce=""){return this._overlayRef?this._overlayRef.updateSize({width:Ce}):this._width=Ce,this}height(Ce=""){return this._overlayRef?this._overlayRef.updateSize({height:Ce}):this._height=Ce,this}centerHorizontally(Ce=""){return this.left(Ce),this._xPosition="center",this}centerVertically(Ce=""){return this.top(Ce),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const Ce=this._overlayRef.overlayElement.style,Ee=this._overlayRef.hostElement.style,st=this._overlayRef.getConfig(),{width:xt,height:Nt,maxWidth:nt,maxHeight:De}=st,be=!("100%"!==xt&&"100vw"!==xt||nt&&"100%"!==nt&&"100vw"!==nt),_e=!("100%"!==Nt&&"100vh"!==Nt||De&&"100%"!==De&&"100vh"!==De),Qe=this._xPosition,ze=this._xOffset,et="rtl"===this._overlayRef.getConfig().direction;let Ei="",li="",qi="";be?qi="flex-start":"center"===Qe?(qi="center",et?li=ze:Ei=ze):et?"left"===Qe||"end"===Qe?(qi="flex-end",Ei=ze):("right"===Qe||"start"===Qe)&&(qi="flex-start",li=ze):"left"===Qe||"start"===Qe?(qi="flex-start",Ei=ze):("right"===Qe||"end"===Qe)&&(qi="flex-end",li=ze),Ce.position=this._cssPosition,Ce.marginLeft=be?"0":Ei,Ce.marginTop=_e?"0":this._topOffset,Ce.marginBottom=this._bottomOffset,Ce.marginRight=be?"0":li,Ee.justifyContent=qi,Ee.alignItems=_e?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const Ce=this._overlayRef.overlayElement.style,Ee=this._overlayRef.hostElement,st=Ee.style;Ee.classList.remove(yt),st.justifyContent=st.alignItems=Ce.marginTop=Ce.marginBottom=Ce.marginLeft=Ce.marginRight=Ce.position="",this._overlayRef=null,this._isDisposed=!0}}let pi=(()=>{class Pt{constructor(Ee,st,xt,Nt){this._viewportRuler=Ee,this._document=st,this._platform=xt,this._overlayContainer=Nt}global(){return new ei}flexibleConnectedTo(Ee){return new zt(Ee,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.LFG(w.rL),se.LFG(a.K0),se.LFG(Ze.t4),se.LFG($t))},Pt.\u0275prov=se.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})(),ct=0,Ti=(()=>{class Pt{constructor(Ee,st,xt,Nt,nt,De,be,_e,Qe,ze,et,Ei){this.scrollStrategies=Ee,this._overlayContainer=st,this._componentFactoryResolver=xt,this._positionBuilder=Nt,this._keyboardDispatcher=nt,this._injector=De,this._ngZone=be,this._document=_e,this._directionality=Qe,this._location=ze,this._outsideClickDispatcher=et,this._animationsModuleType=Ei}create(Ee){const st=this._createHostElement(),xt=this._createPaneElement(st),Nt=this._createPortalOutlet(xt),nt=new Ot(Ee);return nt.direction=nt.direction||this._directionality.value,new Kt(Nt,st,xt,nt,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(Ee){const st=this._document.createElement("div");return st.id="cdk-overlay-"+ct++,st.classList.add("cdk-overlay-pane"),Ee.appendChild(st),st}_createHostElement(){const Ee=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(Ee),Ee}_createPortalOutlet(Ee){return this._appRef||(this._appRef=this._injector.get(se.z2F)),new Xe.u0(Ee,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.LFG(kt),se.LFG($t),se.LFG(se._Vd),se.LFG(pi),se.LFG(At),se.LFG(se.zs3),se.LFG(se.R0b),se.LFG(a.K0),se.LFG(je.Is),se.LFG(a.Ye),se.LFG(Bt),se.LFG(se.QbO,8))},Pt.\u0275prov=se.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();const fi=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],bi=new se.OlP("cdk-connected-overlay-scroll-strategy");let rt=(()=>{class Pt{constructor(Ee){this.elementRef=Ee}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.Y36(se.SBq))},Pt.\u0275dir=se.lG2({type:Pt,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),Pt})(),Dt=(()=>{class Pt{get offsetX(){return this._offsetX}set offsetX(Ee){this._offsetX=Ee,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(Ee){this._offsetY=Ee,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(Ee){this._hasBackdrop=(0,_.Ig)(Ee)}get lockPosition(){return this._lockPosition}set lockPosition(Ee){this._lockPosition=(0,_.Ig)(Ee)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(Ee){this._flexibleDimensions=(0,_.Ig)(Ee)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(Ee){this._growAfterOpen=(0,_.Ig)(Ee)}get push(){return this._push}set push(Ee){this._push=(0,_.Ig)(Ee)}constructor(Ee,st,xt,Nt,nt){this._overlay=Ee,this._dir=nt,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=ot.w0.EMPTY,this._attachSubscription=ot.w0.EMPTY,this._detachSubscription=ot.w0.EMPTY,this._positionSubscription=ot.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new se.vpe,this.positionChange=new se.vpe,this.attach=new se.vpe,this.detach=new se.vpe,this.overlayKeydown=new se.vpe,this.overlayOutsideClick=new se.vpe,this._templatePortal=new Xe.UE(st,xt),this._scrollStrategyFactory=Nt,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(Ee){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),Ee.origin&&this.open&&this._position.apply()),Ee.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=fi);const Ee=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=Ee.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=Ee.detachments().subscribe(()=>this.detach.emit()),Ee.keydownEvents().subscribe(st=>{this.overlayKeydown.next(st),st.keyCode===mt.hY&&!this.disableClose&&!(0,mt.Vb)(st)&&(st.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(st=>{this.overlayOutsideClick.next(st)})}_buildConfig(){const Ee=this._position=this.positionStrategy||this._createPositionStrategy(),st=new Ot({direction:this._dir,positionStrategy:Ee,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(st.width=this.width),(this.height||0===this.height)&&(st.height=this.height),(this.minWidth||0===this.minWidth)&&(st.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(st.minHeight=this.minHeight),this.backdropClass&&(st.backdropClass=this.backdropClass),this.panelClass&&(st.panelClass=this.panelClass),st}_updatePositionStrategy(Ee){const st=this.positions.map(xt=>({originX:xt.originX,originY:xt.originY,overlayX:xt.overlayX,overlayY:xt.overlayY,offsetX:xt.offsetX||this.offsetX,offsetY:xt.offsetY||this.offsetY,panelClass:xt.panelClass||void 0}));return Ee.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(st).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const Ee=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(Ee),Ee}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof rt?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(Ee=>{this.backdropClick.emit(Ee)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,Ve.o)(()=>this.positionChange.observers.length>0)).subscribe(Ee=>{this.positionChange.emit(Ee),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)(se.Y36(Ti),se.Y36(se.Rgc),se.Y36(se.s_b),se.Y36(bi),se.Y36(je.Is,8))},Pt.\u0275dir=se.lG2({type:Pt,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[se.TTD]}),Pt})();const Ui={provide:bi,deps:[Ti],useFactory:function _i(Pt){return()=>Pt.scrollStrategies.reposition()}};let wi=(()=>{class Pt{}return Pt.\u0275fac=function(Ee){return new(Ee||Pt)},Pt.\u0275mod=se.oAB({type:Pt}),Pt.\u0275inj=se.cJS({providers:[Ti,Ui],imports:[je.vT,Xe.eL,w.Cl,w.Cl]}),Pt})()},3353:(yi,pt,j)=>{"use strict";j.d(pt,{Mq:()=>Ye,Oy:()=>Ct,_i:()=>mt,ht:()=>Zt,i$:()=>Xe,kV:()=>Yt,qK:()=>Ae,sA:()=>Wt,t4:()=>_});var w=j(4650),a=j(6895);let se;try{se=typeof Intl<"u"&&Intl.v8BreakIterator}catch{se=!1}let he,_=(()=>{class Oe{constructor(kt){this._platformId=kt,this.isBrowser=this._platformId?(0,a.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!se)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Oe.\u0275fac=function(kt){return new(kt||Oe)(w.LFG(w.Lbi))},Oe.\u0275prov=w.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})();const $e=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Ae(){if(he)return he;if("object"!=typeof document||!document)return he=new Set($e),he;let Oe=document.createElement("input");return he=new Set($e.filter(tt=>(Oe.setAttribute("type",tt),Oe.type===tt))),he}let Ve,ke,ot,Gt;function Xe(Oe){return function je(){if(null==Ve&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ve=!0}))}finally{Ve=Ve||!1}return Ve}()?Oe:!!Oe.capture}function Ye(){if(null==ot){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ot=!1,ot;if("scrollBehavior"in document.documentElement.style)ot=!0;else{const Oe=Element.prototype.scrollTo;ot=!!Oe&&!/\{\s*\[native code\]\s*\}/.test(Oe.toString())}}return ot}function mt(){if("object"!=typeof document||!document)return 0;if(null==ke){const Oe=document.createElement("div"),tt=Oe.style;Oe.dir="rtl",tt.width="1px",tt.overflow="auto",tt.visibility="hidden",tt.pointerEvents="none",tt.position="absolute";const kt=document.createElement("div"),Ot=kt.style;Ot.width="2px",Ot.height="1px",Oe.appendChild(kt),document.body.appendChild(Oe),ke=0,0===Oe.scrollLeft&&(Oe.scrollLeft=1,ke=0===Oe.scrollLeft?1:2),Oe.remove()}return ke}function Yt(Oe){if(function wt(){if(null==Gt){const Oe=typeof document<"u"?document.head:null;Gt=!(!Oe||!Oe.createShadowRoot&&!Oe.attachShadow)}return Gt}()){const tt=Oe.getRootNode?Oe.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&tt instanceof ShadowRoot)return tt}return null}function Zt(){let Oe=typeof document<"u"&&document?document.activeElement:null;for(;Oe&&Oe.shadowRoot;){const tt=Oe.shadowRoot.activeElement;if(tt===Oe)break;Oe=tt}return Oe}function Wt(Oe){return Oe.composedPath?Oe.composedPath()[0]:Oe.target}function Ct(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},4080:(yi,pt,j)=>{"use strict";j.d(pt,{C5:()=>Ve,UE:()=>je,bH:()=>wt,eL:()=>Wt,ig:()=>Gt,u0:()=>Ye});var w=j(4650);class Ae{attach(tt){return this._attachedHost=tt,tt.attach(this)}detach(){let tt=this._attachedHost;null!=tt&&(this._attachedHost=null,tt.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(tt){this._attachedHost=tt}}class Ve extends Ae{constructor(tt,kt,Ot,Vt,ai){super(),this.component=tt,this.viewContainerRef=kt,this.injector=Ot,this.componentFactoryResolver=Vt,this.projectableNodes=ai}}class je extends Ae{constructor(tt,kt,Ot,Vt){super(),this.templateRef=tt,this.viewContainerRef=kt,this.context=Ot,this.injector=Vt}get origin(){return this.templateRef.elementRef}attach(tt,kt=this.context){return this.context=kt,super.attach(tt)}detach(){return this.context=void 0,super.detach()}}class Xe extends Ae{constructor(tt){super(),this.element=tt instanceof w.SBq?tt.nativeElement:tt}}class ke{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(tt){return tt instanceof Ve?(this._attachedPortal=tt,this.attachComponentPortal(tt)):tt instanceof je?(this._attachedPortal=tt,this.attachTemplatePortal(tt)):this.attachDomPortal&&tt instanceof Xe?(this._attachedPortal=tt,this.attachDomPortal(tt)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(tt){this._disposeFn=tt}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ye extends ke{constructor(tt,kt,Ot,Vt,ai){super(),this.outletElement=tt,this._componentFactoryResolver=kt,this._appRef=Ot,this._defaultInjector=Vt,this.attachDomPortal=gi=>{const hi=gi.element,zi=this._document.createComment("dom-portal");hi.parentNode.insertBefore(zi,hi),this.outletElement.appendChild(hi),this._attachedPortal=gi,super.setDisposeFn(()=>{zi.parentNode&&zi.parentNode.replaceChild(hi,zi)})},this._document=ai}attachComponentPortal(tt){const Ot=(tt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(tt.component);let Vt;return tt.viewContainerRef?(Vt=tt.viewContainerRef.createComponent(Ot,tt.viewContainerRef.length,tt.injector||tt.viewContainerRef.injector,tt.projectableNodes||void 0),this.setDisposeFn(()=>Vt.destroy())):(Vt=Ot.create(tt.injector||this._defaultInjector||w.zs3.NULL),this._appRef.attachView(Vt.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(Vt.hostView),Vt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Vt)),this._attachedPortal=tt,Vt}attachTemplatePortal(tt){let kt=tt.viewContainerRef,Ot=kt.createEmbeddedView(tt.templateRef,tt.context,{injector:tt.injector});return Ot.rootNodes.forEach(Vt=>this.outletElement.appendChild(Vt)),Ot.detectChanges(),this.setDisposeFn(()=>{let Vt=kt.indexOf(Ot);-1!==Vt&&kt.remove(Vt)}),this._attachedPortal=tt,Ot}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(tt){return tt.hostView.rootNodes[0]}}let Gt=(()=>{class Oe extends je{constructor(kt,Ot){super(kt,Ot)}}return Oe.\u0275fac=function(kt){return new(kt||Oe)(w.Y36(w.Rgc),w.Y36(w.s_b))},Oe.\u0275dir=w.lG2({type:Oe,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[w.qOj]}),Oe})(),wt=(()=>{class Oe extends Gt{}return Oe.\u0275fac=function(){let tt;return function(Ot){return(tt||(tt=w.n5z(Oe)))(Ot||Oe)}}(),Oe.\u0275dir=w.lG2({type:Oe,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[w._Bn([{provide:Gt,useExisting:Oe}]),w.qOj]}),Oe})(),Wt=(()=>{class Oe{}return Oe.\u0275fac=function(kt){return new(kt||Oe)},Oe.\u0275mod=w.oAB({type:Oe}),Oe.\u0275inj=w.cJS({}),Oe})()},8605:(yi,pt,j)=>{"use strict";j.d(pt,{PQ:()=>fi,ZD:()=>xt,mF:()=>Ti,Cl:()=>Nt,rL:()=>rt});var w=j(1281),a=j(4650),se=j(7579),_=j(9646),Ze=j(9751),he=j(4968),$e=j(4408),Ae=j(727);const Ve={schedule(nt){let De=requestAnimationFrame,be=cancelAnimationFrame;const{delegate:_e}=Ve;_e&&(De=_e.requestAnimationFrame,be=_e.cancelAnimationFrame);const Qe=De(ze=>{be=void 0,nt(ze)});return new Ae.w0(()=>be?.(Qe))},requestAnimationFrame(...nt){const{delegate:De}=Ve;return(De?.requestAnimationFrame||requestAnimationFrame)(...nt)},cancelAnimationFrame(...nt){const{delegate:De}=Ve;return(De?.cancelAnimationFrame||cancelAnimationFrame)(...nt)},delegate:void 0};var Xe=j(7565);const ot=new class ke extends Xe.v{flush(De){this._active=!0;const be=this._scheduled;this._scheduled=void 0;const{actions:_e}=this;let Qe;De=De||_e.shift();do{if(Qe=De.execute(De.state,De.delay))break}while((De=_e[0])&&De.id===be&&_e.shift());if(this._active=!1,Qe){for(;(De=_e[0])&&De.id===be&&_e.shift();)De.unsubscribe();throw Qe}}}(class je extends $e.o{constructor(De,be){super(De,be),this.scheduler=De,this.work=be}requestAsyncId(De,be,_e=0){return null!==_e&&_e>0?super.requestAsyncId(De,be,_e):(De.actions.push(this),De._scheduled||(De._scheduled=Ve.requestAnimationFrame(()=>De.flush(void 0))))}recycleAsyncId(De,be,_e=0){var Qe;if(null!=_e?_e>0:this.delay>0)return super.recycleAsyncId(De,be,_e);const{actions:ze}=De;null!=be&&(null===(Qe=ze[ze.length-1])||void 0===Qe?void 0:Qe.id)!==be&&(Ve.cancelAnimationFrame(be),De._scheduled=void 0)}});let Gt,mt=1;const wt={};function Yt(nt){return nt in wt&&(delete wt[nt],!0)}const Zt={setImmediate(nt){const De=mt++;return wt[De]=!0,Gt||(Gt=Promise.resolve()),Gt.then(()=>Yt(De)&&nt()),De},clearImmediate(nt){Yt(nt)}},{setImmediate:Ct,clearImmediate:Oe}=Zt,tt={setImmediate(...nt){const{delegate:De}=tt;return(De?.setImmediate||Ct)(...nt)},clearImmediate(nt){const{delegate:De}=tt;return(De?.clearImmediate||Oe)(nt)},delegate:void 0},Vt=new class Ot extends Xe.v{flush(De){this._active=!0;const be=this._scheduled;this._scheduled=void 0;const{actions:_e}=this;let Qe;De=De||_e.shift();do{if(Qe=De.execute(De.state,De.delay))break}while((De=_e[0])&&De.id===be&&_e.shift());if(this._active=!1,Qe){for(;(De=_e[0])&&De.id===be&&_e.shift();)De.unsubscribe();throw Qe}}}(class kt extends $e.o{constructor(De,be){super(De,be),this.scheduler=De,this.work=be}requestAsyncId(De,be,_e=0){return null!==_e&&_e>0?super.requestAsyncId(De,be,_e):(De.actions.push(this),De._scheduled||(De._scheduled=tt.setImmediate(De.flush.bind(De,void 0))))}recycleAsyncId(De,be,_e=0){var Qe;if(null!=_e?_e>0:this.delay>0)return super.recycleAsyncId(De,be,_e);const{actions:ze}=De;null!=be&&(null===(Qe=ze[ze.length-1])||void 0===Qe?void 0:Qe.id)!==be&&(tt.clearImmediate(be),De._scheduled=void 0)}});var gi=j(4986),hi=j(4482),zi=j(8421),xi=j(5403),Bt=j(5963);function $t(nt,De=gi.z){return function At(nt){return(0,hi.e)((De,be)=>{let _e=!1,Qe=null,ze=null,et=!1;const Ei=()=>{if(ze?.unsubscribe(),ze=null,_e){_e=!1;const qi=Qe;Qe=null,be.next(qi)}et&&be.complete()},li=()=>{ze=null,et&&be.complete()};De.subscribe((0,xi.x)(be,qi=>{_e=!0,Qe=qi,ze||(0,zi.Xf)(nt(qi)).subscribe(ze=(0,xi.x)(be,Ei,li))},()=>{et=!0,(!_e||!ze||ze.closed)&&be.complete()}))})}(()=>(0,Bt.H)(nt,De))}var Kt=j(9300),ci=j(2722),oi=j(8675),zt=j(3353),Lt=j(6895),Xt=j(445);const ft=["contentWrapper"],qt=["*"],Je=new a.OlP("VIRTUAL_SCROLL_STRATEGY");let Ti=(()=>{class nt{constructor(be,_e,Qe){this._ngZone=be,this._platform=_e,this._scrolled=new se.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Qe}register(be){this.scrollContainers.has(be)||this.scrollContainers.set(be,be.elementScrolled().subscribe(()=>this._scrolled.next(be)))}deregister(be){const _e=this.scrollContainers.get(be);_e&&(_e.unsubscribe(),this.scrollContainers.delete(be))}scrolled(be=20){return this._platform.isBrowser?new Ze.y(_e=>{this._globalSubscription||this._addGlobalListener();const Qe=be>0?this._scrolled.pipe($t(be)).subscribe(_e):this._scrolled.subscribe(_e);return this._scrolledCount++,()=>{Qe.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,_.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((be,_e)=>this.deregister(_e)),this._scrolled.complete()}ancestorScrolled(be,_e){const Qe=this.getAncestorScrollContainers(be);return this.scrolled(_e).pipe((0,Kt.h)(ze=>!ze||Qe.indexOf(ze)>-1))}getAncestorScrollContainers(be){const _e=[];return this.scrollContainers.forEach((Qe,ze)=>{this._scrollableContainsElement(ze,be)&&_e.push(ze)}),_e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(be,_e){let Qe=(0,w.fI)(_e),ze=be.getElementRef().nativeElement;do{if(Qe==ze)return!0}while(Qe=Qe.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const be=this._getWindow();return(0,he.R)(be.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return nt.\u0275fac=function(be){return new(be||nt)(a.LFG(a.R0b),a.LFG(zt.t4),a.LFG(Lt.K0,8))},nt.\u0275prov=a.Yz7({token:nt,factory:nt.\u0275fac,providedIn:"root"}),nt})(),fi=(()=>{class nt{constructor(be,_e,Qe,ze){this.elementRef=be,this.scrollDispatcher=_e,this.ngZone=Qe,this.dir=ze,this._destroyed=new se.x,this._elementScrolled=new Ze.y(et=>this.ngZone.runOutsideAngular(()=>(0,he.R)(this.elementRef.nativeElement,"scroll").pipe((0,ci.R)(this._destroyed)).subscribe(et)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(be){const _e=this.elementRef.nativeElement,Qe=this.dir&&"rtl"==this.dir.value;null==be.left&&(be.left=Qe?be.end:be.start),null==be.right&&(be.right=Qe?be.start:be.end),null!=be.bottom&&(be.top=_e.scrollHeight-_e.clientHeight-be.bottom),Qe&&0!=(0,zt._i)()?(null!=be.left&&(be.right=_e.scrollWidth-_e.clientWidth-be.left),2==(0,zt._i)()?be.left=be.right:1==(0,zt._i)()&&(be.left=be.right?-be.right:be.right)):null!=be.right&&(be.left=_e.scrollWidth-_e.clientWidth-be.right),this._applyScrollToOptions(be)}_applyScrollToOptions(be){const _e=this.elementRef.nativeElement;(0,zt.Mq)()?_e.scrollTo(be):(null!=be.top&&(_e.scrollTop=be.top),null!=be.left&&(_e.scrollLeft=be.left))}measureScrollOffset(be){const _e="left",ze=this.elementRef.nativeElement;if("top"==be)return ze.scrollTop;if("bottom"==be)return ze.scrollHeight-ze.clientHeight-ze.scrollTop;const et=this.dir&&"rtl"==this.dir.value;return"start"==be?be=et?"right":_e:"end"==be&&(be=et?_e:"right"),et&&2==(0,zt._i)()?be==_e?ze.scrollWidth-ze.clientWidth-ze.scrollLeft:ze.scrollLeft:et&&1==(0,zt._i)()?be==_e?ze.scrollLeft+ze.scrollWidth-ze.clientWidth:-ze.scrollLeft:be==_e?ze.scrollLeft:ze.scrollWidth-ze.clientWidth-ze.scrollLeft}}return nt.\u0275fac=function(be){return new(be||nt)(a.Y36(a.SBq),a.Y36(Ti),a.Y36(a.R0b),a.Y36(Xt.Is,8))},nt.\u0275dir=a.lG2({type:nt,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),nt})(),rt=(()=>{class nt{constructor(be,_e,Qe){this._platform=be,this._change=new se.x,this._changeListener=ze=>{this._change.next(ze)},this._document=Qe,_e.runOutsideAngular(()=>{if(be.isBrowser){const ze=this._getWindow();ze.addEventListener("resize",this._changeListener),ze.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const be=this._getWindow();be.removeEventListener("resize",this._changeListener),be.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const be={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),be}getViewportRect(){const be=this.getViewportScrollPosition(),{width:_e,height:Qe}=this.getViewportSize();return{top:be.top,left:be.left,bottom:be.top+Qe,right:be.left+_e,height:Qe,width:_e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const be=this._document,_e=this._getWindow(),Qe=be.documentElement,ze=Qe.getBoundingClientRect();return{top:-ze.top||be.body.scrollTop||_e.scrollY||Qe.scrollTop||0,left:-ze.left||be.body.scrollLeft||_e.scrollX||Qe.scrollLeft||0}}change(be=20){return be>0?this._change.pipe($t(be)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const be=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:be.innerWidth,height:be.innerHeight}:{width:0,height:0}}}return nt.\u0275fac=function(be){return new(be||nt)(a.LFG(zt.t4),a.LFG(a.R0b),a.LFG(Lt.K0,8))},nt.\u0275prov=a.Yz7({token:nt,factory:nt.\u0275fac,providedIn:"root"}),nt})();const Dt=new a.OlP("VIRTUAL_SCROLLABLE");let _i=(()=>{class nt extends fi{constructor(be,_e,Qe,ze){super(be,_e,Qe,ze)}measureViewportSize(be){const _e=this.elementRef.nativeElement;return"horizontal"===be?_e.clientWidth:_e.clientHeight}}return nt.\u0275fac=function(be){return new(be||nt)(a.Y36(a.SBq),a.Y36(Ti),a.Y36(a.R0b),a.Y36(Xt.Is,8))},nt.\u0275dir=a.lG2({type:nt,features:[a.qOj]}),nt})();const wi=typeof requestAnimationFrame<"u"?ot:Vt;let nn=(()=>{class nt extends _i{get orientation(){return this._orientation}set orientation(be){this._orientation!==be&&(this._orientation=be,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(be){this._appendOnly=(0,w.Ig)(be)}constructor(be,_e,Qe,ze,et,Ei,li,qi){super(be,Ei,Qe,et),this.elementRef=be,this._changeDetectorRef=_e,this._scrollStrategy=ze,this.scrollable=qi,this._platform=(0,a.f3M)(zt.t4),this._detachedSubject=new se.x,this._renderedRangeSubject=new se.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Ze.y(Li=>this._scrollStrategy.scrolledIndexChange.subscribe(pn=>Promise.resolve().then(()=>this.ngZone.run(()=>Li.next(pn))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Ae.w0.EMPTY,this._viewportChanges=li.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,oi.O)(null),$t(0,wi)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(be){this.ngZone.runOutsideAngular(()=>{this._forOf=be,this._forOf.dataStream.pipe((0,ci.R)(this._detachedSubject)).subscribe(_e=>{const Qe=_e.length;Qe!==this._dataLength&&(this._dataLength=Qe,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(be){return this.getElementRef().nativeElement.getBoundingClientRect()[be]}setTotalContentSize(be){this._totalContentSize!==be&&(this._totalContentSize=be,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(be){(function Ui(nt,De){return nt.start==De.start&&nt.end==De.end})(this._renderedRange,be)||(this.appendOnly&&(be={start:0,end:Math.max(this._renderedRange.end,be.end)}),this._renderedRangeSubject.next(this._renderedRange=be),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(be,_e="to-start"){be=this.appendOnly&&"to-start"===_e?0:be;const ze="horizontal"==this.orientation,et=ze?"X":"Y";let li=`translate${et}(${Number((ze&&this.dir&&"rtl"==this.dir.value?-1:1)*be)}px)`;this._renderedContentOffset=be,"to-end"===_e&&(li+=` translate${et}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=li&&(this._renderedContentTransform=li,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(be,_e="auto"){const Qe={behavior:_e};"horizontal"===this.orientation?Qe.start=be:Qe.top=be,this.scrollable.scrollTo(Qe)}scrollToIndex(be,_e="auto"){this._scrollStrategy.scrollToIndex(be,_e)}measureScrollOffset(be){let _e;return _e=this.scrollable==this?Qe=>super.measureScrollOffset(Qe):Qe=>this.scrollable.measureScrollOffset(Qe),Math.max(0,_e(be??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(be){let _e;const et="rtl"==this.dir?.value;_e="start"==be?et?"right":"left":"end"==be?et?"left":"right":be||("horizontal"===this.orientation?"left":"top");const Ei=this.scrollable.measureBoundingClientRectWithScrollOffset(_e);return this.elementRef.nativeElement.getBoundingClientRect()[_e]-Ei}measureRenderedContentSize(){const be=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?be.offsetWidth:be.offsetHeight}measureRangeSize(be){return this._forOf?this._forOf.measureRangeSize(be,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(be){be&&this._runAfterChangeDetection.push(be),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const be=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const _e of be)_e()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return nt.\u0275fac=function(be){return new(be||nt)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(a.R0b),a.Y36(Je,8),a.Y36(Xt.Is,8),a.Y36(Ti),a.Y36(rt),a.Y36(Dt,8))},nt.\u0275cmp=a.Xpm({type:nt,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(be,_e){if(1&be&&a.Gf(ft,7),2&be){let Qe;a.iGM(Qe=a.CRH())&&(_e._contentWrapper=Qe.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(be,_e){2&be&&a.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===_e.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==_e.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[a._Bn([{provide:fi,useFactory:(De,be)=>De||be,deps:[[new a.FiY,new a.tBr(Dt)],nt]}]),a.qOj,a.jDz],ngContentSelectors:qt,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(be,_e){1&be&&(a.F$t(),a.TgZ(0,"div",0,1),a.Hsn(2),a.qZA(),a._UZ(3,"div",2)),2&be&&(a.xp6(3),a.Udp("width",_e._totalContentWidth)("height",_e._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),nt})(),xt=(()=>{class nt{}return nt.\u0275fac=function(be){return new(be||nt)},nt.\u0275mod=a.oAB({type:nt}),nt.\u0275inj=a.cJS({}),nt})(),Nt=(()=>{class nt{}return nt.\u0275fac=function(be){return new(be||nt)},nt.\u0275mod=a.oAB({type:nt}),nt.\u0275inj=a.cJS({imports:[Xt.vT,xt,nn,Xt.vT,xt]}),nt})()},6895:(yi,pt,j)=>{"use strict";j.d(pt,{Do:()=>Zt,ED:()=>or,EM:()=>Ss,HT:()=>_,JF:()=>Fa,K0:()=>he,Mx:()=>Xr,NF:()=>Ra,O5:()=>Eo,Ov:()=>ao,PC:()=>us,RF:()=>sa,S$:()=>Gt,V_:()=>Ve,Ye:()=>Wt,b0:()=>Yt,bD:()=>_l,ez:()=>Oa,mk:()=>Ji,n9:()=>Cs,q:()=>se,sg:()=>zn,tP:()=>Es,w_:()=>Ze});var w=j(4650);let a=null;function se(){return a}function _(B){a||(a=B)}class Ze{}const he=new w.OlP("DocumentToken");let $e=(()=>{class B{historyGo(H){throw new Error("Not implemented")}}return B.\u0275fac=function(H){return new(H||B)},B.\u0275prov=w.Yz7({token:B,factory:function(){return function Ae(){return(0,w.LFG)(je)}()},providedIn:"platform"}),B})();const Ve=new w.OlP("Location Initialized");let je=(()=>{class B extends $e{constructor(H){super(),this._doc=H,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return se().getBaseHref(this._doc)}onPopState(H){const ye=se().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("popstate",H,!1),()=>ye.removeEventListener("popstate",H)}onHashChange(H){const ye=se().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("hashchange",H,!1),()=>ye.removeEventListener("hashchange",H)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(H){this._location.pathname=H}pushState(H,ye,Ge){Xe()?this._history.pushState(H,ye,Ge):this._location.hash=Ge}replaceState(H,ye,Ge){Xe()?this._history.replaceState(H,ye,Ge):this._location.hash=Ge}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}}return B.\u0275fac=function(H){return new(H||B)(w.LFG(he))},B.\u0275prov=w.Yz7({token:B,factory:function(){return function ke(){return new je((0,w.LFG)(he))}()},providedIn:"platform"}),B})();function Xe(){return!!window.history.pushState}function ot(B,ne){if(0==B.length)return ne;if(0==ne.length)return B;let H=0;return B.endsWith("/")&&H++,ne.startsWith("/")&&H++,2==H?B+ne.substring(1):1==H?B+ne:B+"/"+ne}function Ye(B){const ne=B.match(/#|\?|$/),H=ne&&ne.index||B.length;return B.slice(0,H-("/"===B[H-1]?1:0))+B.slice(H)}function mt(B){return B&&"?"!==B[0]?"?"+B:B}let Gt=(()=>{class B{historyGo(H){throw new Error("Not implemented")}}return B.\u0275fac=function(H){return new(H||B)},B.\u0275prov=w.Yz7({token:B,factory:function(){return(0,w.f3M)(Yt)},providedIn:"root"}),B})();const wt=new w.OlP("appBaseHref");let Yt=(()=>{class B extends Gt{constructor(H,ye){super(),this._platformLocation=H,this._removeListenerFns=[],this._baseHref=ye??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return ot(this._baseHref,H)}path(H=!1){const ye=this._platformLocation.pathname+mt(this._platformLocation.search),Ge=this._platformLocation.hash;return Ge&&H?`${ye}${Ge}`:ye}pushState(H,ye,Ge,Ft){const Qt=this.prepareExternalUrl(Ge+mt(Ft));this._platformLocation.pushState(H,ye,Qt)}replaceState(H,ye,Ge,Ft){const Qt=this.prepareExternalUrl(Ge+mt(Ft));this._platformLocation.replaceState(H,ye,Qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){this._platformLocation.historyGo?.(H)}}return B.\u0275fac=function(H){return new(H||B)(w.LFG($e),w.LFG(wt,8))},B.\u0275prov=w.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),Zt=(()=>{class B extends Gt{constructor(H,ye){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=ye&&(this._baseHref=ye)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let ye=this._platformLocation.hash;return null==ye&&(ye="#"),ye.length>0?ye.substring(1):ye}prepareExternalUrl(H){const ye=ot(this._baseHref,H);return ye.length>0?"#"+ye:ye}pushState(H,ye,Ge,Ft){let Qt=this.prepareExternalUrl(Ge+mt(Ft));0==Qt.length&&(Qt=this._platformLocation.pathname),this._platformLocation.pushState(H,ye,Qt)}replaceState(H,ye,Ge,Ft){let Qt=this.prepareExternalUrl(Ge+mt(Ft));0==Qt.length&&(Qt=this._platformLocation.pathname),this._platformLocation.replaceState(H,ye,Qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){this._platformLocation.historyGo?.(H)}}return B.\u0275fac=function(H){return new(H||B)(w.LFG($e),w.LFG(wt,8))},B.\u0275prov=w.Yz7({token:B,factory:B.\u0275fac}),B})(),Wt=(()=>{class B{constructor(H){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=H;const ye=this._locationStrategy.getBaseHref();this._basePath=function kt(B){if(new RegExp("^(https?:)?//").test(B)){const[,H]=B.split(/\/\/[^\/]+/);return H}return B}(Ye(tt(ye))),this._locationStrategy.onPopState(Ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ge.state,type:Ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(H=!1){return this.normalize(this._locationStrategy.path(H))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(H,ye=""){return this.path()==this.normalize(H+mt(ye))}normalize(H){return B.stripTrailingSlash(function Oe(B,ne){if(!B||!ne.startsWith(B))return ne;const H=ne.substring(B.length);return""===H||["/",";","?","#"].includes(H[0])?H:ne}(this._basePath,tt(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._locationStrategy.prepareExternalUrl(H)}go(H,ye="",Ge=null){this._locationStrategy.pushState(Ge,"",H,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+mt(ye)),Ge)}replaceState(H,ye="",Ge=null){this._locationStrategy.replaceState(Ge,"",H,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+mt(ye)),Ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(H=0){this._locationStrategy.historyGo?.(H)}onUrlChange(H){return this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ye=>{this._notifyUrlChangeListeners(ye.url,ye.state)})),()=>{const ye=this._urlChangeListeners.indexOf(H);this._urlChangeListeners.splice(ye,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(H="",ye){this._urlChangeListeners.forEach(Ge=>Ge(H,ye))}subscribe(H,ye,Ge){return this._subject.subscribe({next:H,error:ye,complete:Ge})}}return B.normalizeQueryParams=mt,B.joinWithSlash=ot,B.stripTrailingSlash=Ye,B.\u0275fac=function(H){return new(H||B)(w.LFG(Gt))},B.\u0275prov=w.Yz7({token:B,factory:function(){return function Ct(){return new Wt((0,w.LFG)(Gt))}()},providedIn:"root"}),B})();function tt(B){return B.replace(/\/index.html$/,"")}function Xr(B,ne){ne=encodeURIComponent(ne);for(const H of B.split(";")){const ye=H.indexOf("="),[Ge,Ft]=-1==ye?[H,""]:[H.slice(0,ye),H.slice(ye+1)];if(Ge.trim()===ne)return decodeURIComponent(Ft)}return null}const Rn=/\s+/,Ri=[];let Ji=(()=>{class B{constructor(H,ye,Ge,Ft){this._iterableDiffers=H,this._keyValueDiffers=ye,this._ngEl=Ge,this._renderer=Ft,this.initialClasses=Ri,this.stateMap=new Map}set klass(H){this.initialClasses=null!=H?H.trim().split(Rn):Ri}set ngClass(H){this.rawClass="string"==typeof H?H.trim().split(Rn):H}ngDoCheck(){for(const ye of this.initialClasses)this._updateState(ye,!0);const H=this.rawClass;if(Array.isArray(H)||H instanceof Set)for(const ye of H)this._updateState(ye,!0);else if(null!=H)for(const ye of Object.keys(H))this._updateState(ye,Boolean(H[ye]));this._applyStateDiff()}_updateState(H,ye){const Ge=this.stateMap.get(H);void 0!==Ge?(Ge.enabled!==ye&&(Ge.changed=!0,Ge.enabled=ye),Ge.touched=!0):this.stateMap.set(H,{enabled:ye,changed:!0,touched:!0})}_applyStateDiff(){for(const H of this.stateMap){const ye=H[0],Ge=H[1];Ge.changed?(this._toggleClass(ye,Ge.enabled),Ge.changed=!1):Ge.touched||(Ge.enabled&&this._toggleClass(ye,!1),this.stateMap.delete(ye)),Ge.touched=!1}}_toggleClass(H,ye){(H=H.trim()).length>0&&H.split(Rn).forEach(Ge=>{ye?this._renderer.addClass(this._ngEl.nativeElement,Ge):this._renderer.removeClass(this._ngEl.nativeElement,Ge)})}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.ZZ4),w.Y36(w.aQg),w.Y36(w.SBq),w.Y36(w.Qsj))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),B})();class Fn{constructor(ne,H,ye,Ge){this.$implicit=ne,this.ngForOf=H,this.index=ye,this.count=Ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zn=(()=>{class B{set ngForOf(H){this._ngForOf=H,this._ngForOfDirty=!0}set ngForTrackBy(H){this._trackByFn=H}get ngForTrackBy(){return this._trackByFn}constructor(H,ye,Ge){this._viewContainer=H,this._template=ye,this._differs=Ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(H){H&&(this._template=H)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const H=this._ngForOf;!this._differ&&H&&(this._differ=this._differs.find(H).create(this.ngForTrackBy))}if(this._differ){const H=this._differ.diff(this._ngForOf);H&&this._applyChanges(H)}}_applyChanges(H){const ye=this._viewContainer;H.forEachOperation((Ge,Ft,Qt)=>{if(null==Ge.previousIndex)ye.createEmbeddedView(this._template,new Fn(Ge.item,this._ngForOf,-1,-1),null===Qt?void 0:Qt);else if(null==Qt)ye.remove(null===Ft?void 0:Ft);else if(null!==Ft){const ki=ye.get(Ft);ye.move(ki,Qt),ji(ki,Ge)}});for(let Ge=0,Ft=ye.length;Ge<Ft;Ge++){const ki=ye.get(Ge).context;ki.index=Ge,ki.count=Ft,ki.ngForOf=this._ngForOf}H.forEachIdentityChange(Ge=>{ji(ye.get(Ge.currentIndex),Ge)})}static ngTemplateContextGuard(H,ye){return!0}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),B})();function ji(B,ne){B.context.$implicit=ne.item}let Eo=(()=>{class B{constructor(H,ye){this._viewContainer=H,this._context=new sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ye}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){Fo("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){Fo("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,ye){return!0}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.s_b),w.Y36(w.Rgc))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),B})();class sn{constructor(){this.$implicit=null,this.ngIf=null}}function Fo(B,ne){if(ne&&!ne.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,w.AaK)(ne)}'.`)}class ws{constructor(ne,H){this._viewContainerRef=ne,this._templateRef=H,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ne){ne&&!this._created?this.create():!ne&&this._created&&this.destroy()}}let sa=(()=>{class B{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(H){this._ngSwitch=H,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(H){this._defaultViews.push(H)}_matchCase(H){const ye=H==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ye,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ye}_updateDefaultCases(H){if(this._defaultViews.length>0&&H!==this._defaultUsed){this._defaultUsed=H;for(const ye of this._defaultViews)ye.enforceState(H)}}}return B.\u0275fac=function(H){return new(H||B)},B.\u0275dir=w.lG2({type:B,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),B})(),Cs=(()=>{class B{constructor(H,ye,Ge){this.ngSwitch=Ge,Ge._addCase(),this._view=new ws(H,ye)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(sa,9))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),B})(),or=(()=>{class B{constructor(H,ye,Ge){Ge._addDefault(new ws(H,ye))}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(sa,9))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngSwitchDefault",""]],standalone:!0}),B})(),us=(()=>{class B{constructor(H,ye,Ge){this._ngEl=H,this._differs=ye,this._renderer=Ge,this._ngStyle=null,this._differ=null}set ngStyle(H){this._ngStyle=H,!this._differ&&H&&(this._differ=this._differs.find(H).create())}ngDoCheck(){if(this._differ){const H=this._differ.diff(this._ngStyle);H&&this._applyChanges(H)}}_setStyle(H,ye){const[Ge,Ft]=H.split("."),Qt=-1===Ge.indexOf("-")?void 0:w.JOm.DashCase;null!=ye?this._renderer.setStyle(this._ngEl.nativeElement,Ge,Ft?`${ye}${Ft}`:ye,Qt):this._renderer.removeStyle(this._ngEl.nativeElement,Ge,Qt)}_applyChanges(H){H.forEachRemovedItem(ye=>this._setStyle(ye.key,null)),H.forEachAddedItem(ye=>this._setStyle(ye.key,ye.currentValue)),H.forEachChangedItem(ye=>this._setStyle(ye.key,ye.currentValue))}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.SBq),w.Y36(w.aQg),w.Y36(w.Qsj))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),B})(),Es=(()=>{class B{constructor(H){this._viewContainerRef=H,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(H){if(H.ngTemplateOutlet||H.ngTemplateOutletInjector){const ye=this._viewContainerRef;if(this._viewRef&&ye.remove(ye.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ge,ngTemplateOutletContext:Ft,ngTemplateOutletInjector:Qt}=this;this._viewRef=ye.createEmbeddedView(Ge,Ft,Qt?{injector:Qt}:void 0)}else this._viewRef=null}else this._viewRef&&H.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.s_b))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[w.TTD]}),B})();class hs{createSubscription(ne,H){return ne.subscribe({next:H,error:ye=>{throw ye}})}dispose(ne){ne.unsubscribe()}}class zr{createSubscription(ne,H){return ne.then(H,ye=>{throw ye})}dispose(ne){}}const Hs=new zr,Mo=new hs;let ao=(()=>{class B{constructor(H){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=H}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(H){return this._obj?H!==this._obj?(this._dispose(),this.transform(H)):this._latestValue:(H&&this._subscribe(H),this._latestValue)}_subscribe(H){this._obj=H,this._strategy=this._selectStrategy(H),this._subscription=this._strategy.createSubscription(H,ye=>this._updateLatestValue(H,ye))}_selectStrategy(H){if((0,w.QGY)(H))return Hs;if((0,w.F4k)(H))return Mo;throw function Gr(B,ne){return new w.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(H,ye){H===this._obj&&(this._latestValue=ye,this._ref.markForCheck())}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.sBO,16))},B.\u0275pipe=w.Yjl({name:"async",type:B,pure:!1,standalone:!0}),B})(),Oa=(()=>{class B{}return B.\u0275fac=function(H){return new(H||B)},B.\u0275mod=w.oAB({type:B}),B.\u0275inj=w.cJS({}),B})();const _l="browser";function Ra(B){return B===_l}let Ss=(()=>{class B{}return B.\u0275prov=(0,w.Yz7)({token:B,providedIn:"root",factory:()=>new lo((0,w.LFG)(he),window)}),B})();class lo{constructor(ne,H){this.document=ne,this.window=H,this.offset=()=>[0,0]}setOffset(ne){this.offset=Array.isArray(ne)?()=>ne:ne}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ne){this.supportsScrolling()&&this.window.scrollTo(ne[0],ne[1])}scrollToAnchor(ne){if(!this.supportsScrolling())return;const H=function ms(B,ne){const H=B.getElementById(ne)||B.getElementsByName(ne)[0];if(H)return H;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const ye=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let Ge=ye.currentNode;for(;Ge;){const Ft=Ge.shadowRoot;if(Ft){const Qt=Ft.getElementById(ne)||Ft.querySelector(`[name="${ne}"]`);if(Qt)return Qt}Ge=ye.nextNode()}}return null}(this.document,ne);H&&(this.scrollToElement(H),H.focus())}setHistoryScrollRestoration(ne){if(this.supportScrollRestoration()){const H=this.window.history;H&&H.scrollRestoration&&(H.scrollRestoration=ne)}}scrollToElement(ne){const H=ne.getBoundingClientRect(),ye=H.left+this.window.pageXOffset,Ge=H.top+this.window.pageYOffset,Ft=this.offset();this.window.scrollTo(ye-Ft[0],Ge-Ft[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ne=Ys(this.window.history)||Ys(Object.getPrototypeOf(this.window.history));return!(!ne||!ne.writable&&!ne.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ys(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class Fa{}},529:(yi,pt,j)=>{"use strict";j.d(pt,{JF:()=>Se,eN:()=>Bt});var w=j(6895),a=j(4650),se=j(9646),_=j(9751),Ze=j(4351),he=j(9300),$e=j(4004);class Ae{}class Ve{}class je{constructor(V){this.normalizedNames=new Map,this.lazyUpdate=null,V?this.lazyInit="string"==typeof V?()=>{this.headers=new Map,V.split("\n").forEach(U=>{const ce=U.indexOf(":");if(ce>0){const fe=U.slice(0,ce),Ie=fe.toLowerCase(),We=U.slice(ce+1).trim();this.maybeSetNormalizedName(fe,Ie),this.headers.has(Ie)?this.headers.get(Ie).push(We):this.headers.set(Ie,[We])}})}:()=>{this.headers=new Map,Object.entries(V).forEach(([U,ce])=>{let fe;if(fe="string"==typeof ce?[ce]:"number"==typeof ce?[ce.toString()]:ce.map(Ie=>Ie.toString()),fe.length>0){const Ie=U.toLowerCase();this.headers.set(Ie,fe),this.maybeSetNormalizedName(U,Ie)}})}:this.headers=new Map}has(V){return this.init(),this.headers.has(V.toLowerCase())}get(V){this.init();const U=this.headers.get(V.toLowerCase());return U&&U.length>0?U[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(V){return this.init(),this.headers.get(V.toLowerCase())||null}append(V,U){return this.clone({name:V,value:U,op:"a"})}set(V,U){return this.clone({name:V,value:U,op:"s"})}delete(V,U){return this.clone({name:V,value:U,op:"d"})}maybeSetNormalizedName(V,U){this.normalizedNames.has(U)||this.normalizedNames.set(U,V)}init(){this.lazyInit&&(this.lazyInit instanceof je?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(V=>this.applyUpdate(V)),this.lazyUpdate=null))}copyFrom(V){V.init(),Array.from(V.headers.keys()).forEach(U=>{this.headers.set(U,V.headers.get(U)),this.normalizedNames.set(U,V.normalizedNames.get(U))})}clone(V){const U=new je;return U.lazyInit=this.lazyInit&&this.lazyInit instanceof je?this.lazyInit:this,U.lazyUpdate=(this.lazyUpdate||[]).concat([V]),U}applyUpdate(V){const U=V.name.toLowerCase();switch(V.op){case"a":case"s":let ce=V.value;if("string"==typeof ce&&(ce=[ce]),0===ce.length)return;this.maybeSetNormalizedName(V.name,U);const fe=("a"===V.op?this.headers.get(U):void 0)||[];fe.push(...ce),this.headers.set(U,fe);break;case"d":const Ie=V.value;if(Ie){let We=this.headers.get(U);if(!We)return;We=We.filter(St=>-1===Ie.indexOf(St)),0===We.length?(this.headers.delete(U),this.normalizedNames.delete(U)):this.headers.set(U,We)}else this.headers.delete(U),this.normalizedNames.delete(U)}}forEach(V){this.init(),Array.from(this.normalizedNames.keys()).forEach(U=>V(this.normalizedNames.get(U),this.headers.get(U)))}}class ke{encodeKey(V){return Gt(V)}encodeValue(V){return Gt(V)}decodeKey(V){return decodeURIComponent(V)}decodeValue(V){return decodeURIComponent(V)}}const Ye=/%(\d[a-f0-9])/gi,mt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Gt(K){return encodeURIComponent(K).replace(Ye,(V,U)=>mt[U]??V)}function wt(K){return`${K}`}class Yt{constructor(V={}){if(this.updates=null,this.cloneFrom=null,this.encoder=V.encoder||new ke,V.fromString){if(V.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ot(K,V){const U=new Map;return K.length>0&&K.replace(/^\?/,"").split("&").forEach(fe=>{const Ie=fe.indexOf("="),[We,St]=-1==Ie?[V.decodeKey(fe),""]:[V.decodeKey(fe.slice(0,Ie)),V.decodeValue(fe.slice(Ie+1))],vt=U.get(We)||[];vt.push(St),U.set(We,vt)}),U}(V.fromString,this.encoder)}else V.fromObject?(this.map=new Map,Object.keys(V.fromObject).forEach(U=>{const ce=V.fromObject[U],fe=Array.isArray(ce)?ce.map(wt):[wt(ce)];this.map.set(U,fe)})):this.map=null}has(V){return this.init(),this.map.has(V)}get(V){this.init();const U=this.map.get(V);return U?U[0]:null}getAll(V){return this.init(),this.map.get(V)||null}keys(){return this.init(),Array.from(this.map.keys())}append(V,U){return this.clone({param:V,value:U,op:"a"})}appendAll(V){const U=[];return Object.keys(V).forEach(ce=>{const fe=V[ce];Array.isArray(fe)?fe.forEach(Ie=>{U.push({param:ce,value:Ie,op:"a"})}):U.push({param:ce,value:fe,op:"a"})}),this.clone(U)}set(V,U){return this.clone({param:V,value:U,op:"s"})}delete(V,U){return this.clone({param:V,value:U,op:"d"})}toString(){return this.init(),this.keys().map(V=>{const U=this.encoder.encodeKey(V);return this.map.get(V).map(ce=>U+"="+this.encoder.encodeValue(ce)).join("&")}).filter(V=>""!==V).join("&")}clone(V){const U=new Yt({encoder:this.encoder});return U.cloneFrom=this.cloneFrom||this,U.updates=(this.updates||[]).concat(V),U}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(V=>this.map.set(V,this.cloneFrom.map.get(V))),this.updates.forEach(V=>{switch(V.op){case"a":case"s":const U=("a"===V.op?this.map.get(V.param):void 0)||[];U.push(wt(V.value)),this.map.set(V.param,U);break;case"d":if(void 0===V.value){this.map.delete(V.param);break}{let ce=this.map.get(V.param)||[];const fe=ce.indexOf(wt(V.value));-1!==fe&&ce.splice(fe,1),ce.length>0?this.map.set(V.param,ce):this.map.delete(V.param)}}}),this.cloneFrom=this.updates=null)}}class Wt{constructor(){this.map=new Map}set(V,U){return this.map.set(V,U),this}get(V){return this.map.has(V)||this.map.set(V,V.defaultValue()),this.map.get(V)}delete(V){return this.map.delete(V),this}has(V){return this.map.has(V)}keys(){return this.map.keys()}}function Oe(K){return typeof ArrayBuffer<"u"&&K instanceof ArrayBuffer}function tt(K){return typeof Blob<"u"&&K instanceof Blob}function kt(K){return typeof FormData<"u"&&K instanceof FormData}class Vt{constructor(V,U,ce,fe){let Ie;if(this.url=U,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=V.toUpperCase(),function Ct(K){switch(K){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||fe?(this.body=void 0!==ce?ce:null,Ie=fe):Ie=ce,Ie&&(this.reportProgress=!!Ie.reportProgress,this.withCredentials=!!Ie.withCredentials,Ie.responseType&&(this.responseType=Ie.responseType),Ie.headers&&(this.headers=Ie.headers),Ie.context&&(this.context=Ie.context),Ie.params&&(this.params=Ie.params)),this.headers||(this.headers=new je),this.context||(this.context=new Wt),this.params){const We=this.params.toString();if(0===We.length)this.urlWithParams=U;else{const St=U.indexOf("?");this.urlWithParams=U+(-1===St?"?":St<U.length-1?"&":"")+We}}else this.params=new Yt,this.urlWithParams=U}serializeBody(){return null===this.body?null:Oe(this.body)||tt(this.body)||kt(this.body)||function Ot(K){return typeof URLSearchParams<"u"&&K instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Yt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||kt(this.body)?null:tt(this.body)?this.body.type||null:Oe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Yt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(V={}){const U=V.method||this.method,ce=V.url||this.url,fe=V.responseType||this.responseType,Ie=void 0!==V.body?V.body:this.body,We=void 0!==V.withCredentials?V.withCredentials:this.withCredentials,St=void 0!==V.reportProgress?V.reportProgress:this.reportProgress;let vt=V.headers||this.headers,Tt=V.params||this.params;const ni=V.context??this.context;return void 0!==V.setHeaders&&(vt=Object.keys(V.setHeaders).reduce((it,ae)=>it.set(ae,V.setHeaders[ae]),vt)),V.setParams&&(Tt=Object.keys(V.setParams).reduce((it,ae)=>it.set(ae,V.setParams[ae]),Tt)),new Vt(U,ce,Ie,{params:Tt,headers:vt,context:ni,reportProgress:St,responseType:fe,withCredentials:We})}}var ai=(()=>((ai=ai||{})[ai.Sent=0]="Sent",ai[ai.UploadProgress=1]="UploadProgress",ai[ai.ResponseHeader=2]="ResponseHeader",ai[ai.DownloadProgress=3]="DownloadProgress",ai[ai.Response=4]="Response",ai[ai.User=5]="User",ai))();class gi{constructor(V,U=200,ce="OK"){this.headers=V.headers||new je,this.status=void 0!==V.status?V.status:U,this.statusText=V.statusText||ce,this.url=V.url||null,this.ok=this.status>=200&&this.status<300}}class hi extends gi{constructor(V={}){super(V),this.type=ai.ResponseHeader}clone(V={}){return new hi({headers:V.headers||this.headers,status:void 0!==V.status?V.status:this.status,statusText:V.statusText||this.statusText,url:V.url||this.url||void 0})}}class zi extends gi{constructor(V={}){super(V),this.type=ai.Response,this.body=void 0!==V.body?V.body:null}clone(V={}){return new zi({body:void 0!==V.body?V.body:this.body,headers:V.headers||this.headers,status:void 0!==V.status?V.status:this.status,statusText:V.statusText||this.statusText,url:V.url||this.url||void 0})}}class xi extends gi{constructor(V){super(V,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${V.url||"(unknown url)"}`:`Http failure response for ${V.url||"(unknown url)"}: ${V.status} ${V.statusText}`,this.error=V.error||null}}function At(K,V){return{body:V,headers:K.headers,context:K.context,observe:K.observe,params:K.params,reportProgress:K.reportProgress,responseType:K.responseType,withCredentials:K.withCredentials}}let Bt=(()=>{class K{constructor(U){this.handler=U}request(U,ce,fe={}){let Ie;if(U instanceof Vt)Ie=U;else{let vt,Tt;vt=fe.headers instanceof je?fe.headers:new je(fe.headers),fe.params&&(Tt=fe.params instanceof Yt?fe.params:new Yt({fromObject:fe.params})),Ie=new Vt(U,ce,void 0!==fe.body?fe.body:null,{headers:vt,context:fe.context,params:Tt,reportProgress:fe.reportProgress,responseType:fe.responseType||"json",withCredentials:fe.withCredentials})}const We=(0,se.of)(Ie).pipe((0,Ze.b)(vt=>this.handler.handle(vt)));if(U instanceof Vt||"events"===fe.observe)return We;const St=We.pipe((0,he.h)(vt=>vt instanceof zi));switch(fe.observe||"body"){case"body":switch(Ie.responseType){case"arraybuffer":return St.pipe((0,$e.U)(vt=>{if(null!==vt.body&&!(vt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return vt.body}));case"blob":return St.pipe((0,$e.U)(vt=>{if(null!==vt.body&&!(vt.body instanceof Blob))throw new Error("Response is not a Blob.");return vt.body}));case"text":return St.pipe((0,$e.U)(vt=>{if(null!==vt.body&&"string"!=typeof vt.body)throw new Error("Response is not a string.");return vt.body}));default:return St.pipe((0,$e.U)(vt=>vt.body))}case"response":return St;default:throw new Error(`Unreachable: unhandled observe type ${fe.observe}}`)}}delete(U,ce={}){return this.request("DELETE",U,ce)}get(U,ce={}){return this.request("GET",U,ce)}head(U,ce={}){return this.request("HEAD",U,ce)}jsonp(U,ce){return this.request("JSONP",U,{params:(new Yt).append(ce,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(U,ce={}){return this.request("OPTIONS",U,ce)}patch(U,ce,fe={}){return this.request("PATCH",U,At(fe,ce))}post(U,ce,fe={}){return this.request("POST",U,At(fe,ce))}put(U,ce,fe={}){return this.request("PUT",U,At(fe,ce))}}return K.\u0275fac=function(U){return new(U||K)(a.LFG(Ae))},K.\u0275prov=a.Yz7({token:K,factory:K.\u0275fac}),K})();function $t(K,V){return V(K)}function Kt(K,V){return(U,ce)=>V.intercept(U,{handle:fe=>K(fe,ce)})}const oi=new a.OlP("HTTP_INTERCEPTORS"),zt=new a.OlP("HTTP_INTERCEPTOR_FNS");function Lt(){let K=null;return(V,U)=>(null===K&&(K=((0,a.f3M)(oi,{optional:!0})??[]).reduceRight(Kt,$t)),K(V,U))}let Xt=(()=>{class K extends Ae{constructor(U,ce){super(),this.backend=U,this.injector=ce,this.chain=null}handle(U){if(null===this.chain){const ce=Array.from(new Set(this.injector.get(zt)));this.chain=ce.reduceRight((fe,Ie)=>function ci(K,V,U){return(ce,fe)=>U.runInContext(()=>V(ce,Ie=>K(Ie,fe)))}(fe,Ie,this.injector),$t)}return this.chain(U,ce=>this.backend.handle(ce))}}return K.\u0275fac=function(U){return new(U||K)(a.LFG(Ve),a.LFG(a.lqb))},K.\u0275prov=a.Yz7({token:K,factory:K.\u0275fac}),K})();const Dt=/^\)\]\}',?\n/;let Ui=(()=>{class K{constructor(U){this.xhrFactory=U}handle(U){if("JSONP"===U.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _.y(ce=>{const fe=this.xhrFactory.build();if(fe.open(U.method,U.urlWithParams),U.withCredentials&&(fe.withCredentials=!0),U.headers.forEach((Y,Q)=>fe.setRequestHeader(Y,Q.join(","))),U.headers.has("Accept")||fe.setRequestHeader("Accept","application/json, text/plain, */*"),!U.headers.has("Content-Type")){const Y=U.detectContentTypeHeader();null!==Y&&fe.setRequestHeader("Content-Type",Y)}if(U.responseType){const Y=U.responseType.toLowerCase();fe.responseType="json"!==Y?Y:"text"}const Ie=U.serializeBody();let We=null;const St=()=>{if(null!==We)return We;const Y=fe.statusText||"OK",Q=new je(fe.getAllResponseHeaders()),xe=function _i(K){return"responseURL"in K&&K.responseURL?K.responseURL:/^X-Request-URL:/m.test(K.getAllResponseHeaders())?K.getResponseHeader("X-Request-URL"):null}(fe)||U.url;return We=new hi({headers:Q,status:fe.status,statusText:Y,url:xe}),We},vt=()=>{let{headers:Y,status:Q,statusText:xe,url:Re}=St(),ht=null;204!==Q&&(ht=typeof fe.response>"u"?fe.responseText:fe.response),0===Q&&(Q=ht?200:0);let Jt=Q>=200&&Q<300;if("json"===U.responseType&&"string"==typeof ht){const Fi=ht;ht=ht.replace(Dt,"");try{ht=""!==ht?JSON.parse(ht):null}catch(an){ht=Fi,Jt&&(Jt=!1,ht={error:an,text:ht})}}Jt?(ce.next(new zi({body:ht,headers:Y,status:Q,statusText:xe,url:Re||void 0})),ce.complete()):ce.error(new xi({error:ht,headers:Y,status:Q,statusText:xe,url:Re||void 0}))},Tt=Y=>{const{url:Q}=St(),xe=new xi({error:Y,status:fe.status||0,statusText:fe.statusText||"Unknown Error",url:Q||void 0});ce.error(xe)};let ni=!1;const it=Y=>{ni||(ce.next(St()),ni=!0);let Q={type:ai.DownloadProgress,loaded:Y.loaded};Y.lengthComputable&&(Q.total=Y.total),"text"===U.responseType&&fe.responseText&&(Q.partialText=fe.responseText),ce.next(Q)},ae=Y=>{let Q={type:ai.UploadProgress,loaded:Y.loaded};Y.lengthComputable&&(Q.total=Y.total),ce.next(Q)};return fe.addEventListener("load",vt),fe.addEventListener("error",Tt),fe.addEventListener("timeout",Tt),fe.addEventListener("abort",Tt),U.reportProgress&&(fe.addEventListener("progress",it),null!==Ie&&fe.upload&&fe.upload.addEventListener("progress",ae)),fe.send(Ie),ce.next({type:ai.Sent}),()=>{fe.removeEventListener("error",Tt),fe.removeEventListener("abort",Tt),fe.removeEventListener("load",vt),fe.removeEventListener("timeout",Tt),U.reportProgress&&(fe.removeEventListener("progress",it),null!==Ie&&fe.upload&&fe.upload.removeEventListener("progress",ae)),fe.readyState!==fe.DONE&&fe.abort()}})}}return K.\u0275fac=function(U){return new(U||K)(a.LFG(w.JF))},K.\u0275prov=a.Yz7({token:K,factory:K.\u0275fac}),K})();const wi=new a.OlP("XSRF_ENABLED"),Pt=new a.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Ee=new a.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class st{}let xt=(()=>{class K{constructor(U,ce,fe){this.doc=U,this.platform=ce,this.cookieName=fe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const U=this.doc.cookie||"";return U!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,w.Mx)(U,this.cookieName),this.lastCookieString=U),this.lastToken}}return K.\u0275fac=function(U){return new(U||K)(a.LFG(w.K0),a.LFG(a.Lbi),a.LFG(Pt))},K.\u0275prov=a.Yz7({token:K,factory:K.\u0275fac}),K})();function Nt(K,V){const U=K.url.toLowerCase();if(!(0,a.f3M)(wi)||"GET"===K.method||"HEAD"===K.method||U.startsWith("http://")||U.startsWith("https://"))return V(K);const ce=(0,a.f3M)(st).getToken(),fe=(0,a.f3M)(Ee);return null!=ce&&!K.headers.has(fe)&&(K=K.clone({headers:K.headers.set(fe,ce)})),V(K)}var De=(()=>((De=De||{})[De.Interceptors=0]="Interceptors",De[De.LegacyInterceptors=1]="LegacyInterceptors",De[De.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",De[De.NoXsrfProtection=3]="NoXsrfProtection",De[De.JsonpSupport=4]="JsonpSupport",De[De.RequestsMadeViaParent=5]="RequestsMadeViaParent",De))();function be(K,V){return{\u0275kind:K,\u0275providers:V}}function _e(...K){const V=[Bt,Ui,Xt,{provide:Ae,useExisting:Xt},{provide:Ve,useExisting:Ui},{provide:zt,useValue:Nt,multi:!0},{provide:wi,useValue:!0},{provide:st,useClass:xt}];for(const U of K)V.push(...U.\u0275providers);return(0,a.MR2)(V)}const ze=new a.OlP("LEGACY_INTERCEPTOR_FN");let Se=(()=>{class K{}return K.\u0275fac=function(U){return new(U||K)},K.\u0275mod=a.oAB({type:K}),K.\u0275inj=a.cJS({providers:[_e(be(De.LegacyInterceptors,[{provide:ze,useFactory:Lt},{provide:zt,useExisting:ze,multi:!0}]))]}),K})()},4650:(yi,pt,j)=>{"use strict";j.d(pt,{$8M:()=>jl,$WT:()=>Cn,$Z:()=>Po,AFp:()=>Pv,ALo:()=>ev,AaK:()=>Ae,Akn:()=>gl,BQk:()=>sp,CHM:()=>ks,CRH:()=>uv,CZH:()=>Ep,CqO:()=>f_,D6c:()=>Lw,DdM:()=>$y,EJc:()=>Fv,EiD:()=>vd,EpF:()=>m_,F$t:()=>b_,F4k:()=>p_,FYo:()=>Mh,FiY:()=>uo,G48:()=>nb,Gf:()=>fg,GfV:()=>$m,GkF:()=>Af,Gpc:()=>Xe,Gre:()=>Wf,Hsn:()=>x_,Ikx:()=>qf,JOm:()=>Xn,JVY:()=>hr,JZr:()=>Gt,Jf7:()=>Gm,KtG:()=>ar,L6k:()=>dh,LAX:()=>jc,LFG:()=>Se,Lbi:()=>lw,Lck:()=>mx,MAs:()=>u_,MMx:()=>ag,MR2:()=>_h,NdJ:()=>Pf,O4$:()=>Ps,OlP:()=>E,Oqu:()=>dp,P3R:()=>gh,PXZ:()=>Zv,Q6J:()=>If,QGY:()=>kf,QbO:()=>cw,Qsj:()=>Dh,R0b:()=>Ka,RDi:()=>Mm,Rgc:()=>Kh,SBq:()=>Dc,Sil:()=>mw,Suo:()=>dv,TTD:()=>eo,TgZ:()=>Tl,Tol:()=>L_,Udp:()=>jf,VKq:()=>Gy,W1O:()=>fv,WFA:()=>Of,WLB:()=>Zy,XFs:()=>wi,Xpm:()=>Jt,Xts:()=>xd,Y36:()=>_r,YKP:()=>Fy,YNc:()=>Tn,Yjl:()=>Mr,Yz7:()=>Je,Z0I:()=>ct,ZZ4:()=>mb,_Bn:()=>Ry,_UZ:()=>zh,_Vd:()=>Mc,_c5:()=>G1,_uU:()=>Gf,aQg:()=>Ug,c2e:()=>dw,cJS:()=>ei,cg1:()=>jh,d8E:()=>Kf,dDg:()=>Cw,dqk:()=>xt,eBb:()=>vc,eFA:()=>Yv,eJc:()=>gg,ekj:()=>ka,eoX:()=>jv,f3M:()=>me,g9A:()=>Rv,h0i:()=>zu,hGG:()=>Fw,hij:()=>up,iGM:()=>pg,ifc:()=>vt,ip1:()=>kv,jDz:()=>Ny,kEZ:()=>Wy,kL8:()=>hp,kcU:()=>il,lG2:()=>wn,lcZ:()=>tv,lqb:()=>ta,lri:()=>Vv,mCW:()=>au,n5z:()=>Ks,n_E:()=>_p,oAB:()=>_n,oJD:()=>mh,oxw:()=>v_,pB0:()=>wl,q3G:()=>oo,qLn:()=>Ql,qOj:()=>wf,qZA:()=>Ou,qzn:()=>cl,rFY:()=>Yy,rWj:()=>Uv,s9C:()=>Rf,sBO:()=>Vu,s_b:()=>vp,soG:()=>Mp,tBr:()=>$o,tb:()=>$v,tp0:()=>Ga,uIk:()=>Mf,vHH:()=>wt,vpe:()=>sc,wAp:()=>ln,xp6:()=>C,ynx:()=>op,z2F:()=>Dp,z3N:()=>Fs,zSh:()=>Ed,zs3:()=>gt});var w=j(7579),a=j(727),se=j(9751),_=j(6451),Ze=j(3099);function he(e){for(let i in e)if(e[i]===he)return i;throw Error("Could not find renamed property on target object.")}function $e(e,i){for(const s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=i[s])}function Ae(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ae).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const i=e.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function Ve(e,i){return null==e||""===e?null===i?"":i:null==i||""===i?e:e+" "+i}const je=he({__forward_ref__:he});function Xe(e){return e.__forward_ref__=Xe,e.toString=function(){return Ae(this())},e}function ke(e){return ot(e)?e():e}function ot(e){return"function"==typeof e&&e.hasOwnProperty(je)&&e.__forward_ref__===Xe}function Ye(e){return e&&!!e.\u0275providers}const Gt="https://g.co/ng/security#xss";class wt extends Error{constructor(i,s){super(Yt(i,s)),this.code=i}}function Yt(e,i){return`NG0${Math.abs(e)}${i?": "+i.trim():""}`}function Zt(e){return"string"==typeof e?e:null==e?"":String(e)}function kt(e,i){throw new wt(-201,!1)}function zt(e,i){null==e&&function Lt(e,i,s,u){throw new Error(`ASSERTION ERROR: ${e}`+(null==u?"":` [Expected=> ${s} ${u} ${i} <=Actual]`))}(i,e,null,"!=")}function Je(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ei(e){return{providers:e.providers||[],imports:e.imports||[]}}function pi(e){return Ti(e,rt)||Ti(e,_i)}function ct(e){return null!==pi(e)}function Ti(e,i){return e.hasOwnProperty(i)?e[i]:null}function bi(e){return e&&(e.hasOwnProperty(Dt)||e.hasOwnProperty(Ui))?e[Dt]:null}const rt=he({\u0275prov:he}),Dt=he({\u0275inj:he}),_i=he({ngInjectableDef:he}),Ui=he({ngInjectorDef:he});var wi=(()=>((wi=wi||{})[wi.Default=0]="Default",wi[wi.Host=1]="Host",wi[wi.Self=2]="Self",wi[wi.SkipSelf=4]="SkipSelf",wi[wi.Optional=8]="Optional",wi))();let nn;function Ce(e){const i=nn;return nn=e,i}function Ee(e,i,s){const u=pi(e);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:s&wi.Optional?null:void 0!==i?i:void kt(Ae(e))}const xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),be={},_e="__NG_DI_FLAG__",Qe="ngTempTokenPath",ze="ngTokenPath",et=/\n/gm,Ei="\u0275",li="__source";let qi;function Li(e){const i=qi;return qi=e,i}function pn(e,i=wi.Default){if(void 0===qi)throw new wt(-203,!1);return null===qi?Ee(e,void 0,i):qi.get(e,i&wi.Optional?null:void 0,i)}function Se(e,i=wi.Default){return(function Pt(){return nn}()||pn)(ke(e),i)}function me(e,i=wi.Default){return Se(e,K(i))}function K(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function V(e){const i=[];for(let s=0;s<e.length;s++){const u=ke(e[s]);if(Array.isArray(u)){if(0===u.length)throw new wt(900,!1);let f,x=wi.Default;for(let S=0;S<u.length;S++){const O=u[S],z=ce(O);"number"==typeof z?-1===z?f=O.token:x|=z:f=O}i.push(Se(f,x))}else i.push(Se(u))}return i}function U(e,i){return e[_e]=i,e.prototype[_e]=i,e}function ce(e){return e[_e]}function We(e){return{toString:e}.toString()}var St=(()=>((St=St||{})[St.OnPush=0]="OnPush",St[St.Default=1]="Default",St))(),vt=(()=>{return(e=vt||(vt={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",vt;var e})();const Tt={},ni=[],it=he({\u0275cmp:he}),ae=he({\u0275dir:he}),Y=he({\u0275pipe:he}),Q=he({\u0275mod:he}),xe=he({\u0275fac:he}),Re=he({__NG_ELEMENT_ID__:he});let ht=0;function Jt(e){return We(()=>{const i=ds(e),s={...i,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===St.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||vt.Emulated,id:"c"+ht++,styles:e.styles||ni,_:null,schemas:e.schemas||null,tView:null};yr(s);const u=e.dependencies;return s.directiveDefs=Xr(u,!1),s.pipeDefs=Xr(u,!0),s})}function an(e){return Qi(e)||pr(e)}function un(e){return null!==e}function _n(e){return We(()=>({type:e.type,bootstrap:e.bootstrap||ni,declarations:e.declarations||ni,imports:e.imports||ni,exports:e.exports||ni,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Ro(e,i){if(null==e)return Tt;const s={};for(const u in e)if(e.hasOwnProperty(u)){let f=e[u],x=f;Array.isArray(f)&&(x=f[1],f=f[0]),s[f]=u,i&&(i[f]=x)}return s}function wn(e){return We(()=>{const i=ds(e);return yr(i),i})}function Mr(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Qi(e){return e[it]||null}function pr(e){return e[ae]||null}function er(e){return e[Y]||null}function Cn(e){const i=Qi(e)||pr(e)||er(e);return null!==i&&i.standalone}function Or(e,i){const s=e[Q]||null;if(!s&&!0===i)throw new Error(`Type ${Ae(e)} does not have '\u0275mod' property.`);return s}function ds(e){const i={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:i,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||ni,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ro(e.inputs,i),outputs:Ro(e.outputs)}}function yr(e){e.features?.forEach(i=>i(e))}function Xr(e,i){if(!e)return null;const s=i?er:an;return()=>("function"==typeof e?e():e).map(u=>s(u)).filter(un)}const Rn=0,Ri=1,Ji=2,tr=3,$n=4,vr=5,Fn=6,zn=7,ji=8,Rr=9,Eo=10,sn=11,Fo=12,ws=13,sa=14,Cs=15,or=16,js=17,po=18,Jr=19,us=20,Es=21,Wn=22,hs=1,zr=2,Hs=7,Mo=8,ao=9,dr=10;function fr(e){return Array.isArray(e)&&"object"==typeof e[hs]}function Fr(e){return Array.isArray(e)&&!0===e[hs]}function Qr(e){return 0!=(4&e.flags)}function Yn(e){return e.componentOffset>-1}function Zr(e){return 1==(1&e.flags)}function Br(e){return!!e.template}function xa(e){return 0!=(256&e[Ji])}function Yr(e,i){return e.hasOwnProperty(xe)?e[xe]:null}class Ea{constructor(i,s,u){this.previousValue=i,this.currentValue=s,this.firstChange=u}isFirstChange(){return this.firstChange}}function eo(){return Ss}function Ss(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ys),lo}function lo(){const e=Ts(this),i=e?.current;if(i){const s=e.previous;if(s===Tt)e.previous=i;else for(let u in i)s[u]=i[u];e.current=null,this.ngOnChanges(i)}}function Ys(e,i,s,u){const f=this.declaredInputs[s],x=Ts(e)||function Fa(e,i){return e[ms]=i}(e,{previous:Tt,current:null}),S=x.current||(x.current={}),O=x.previous,z=O[f];S[f]=new Ea(z&&z.currentValue,i,O===Tt),e[u]=i}eo.ngInherit=!0;const ms="__ngSimpleChanges__";function Ts(e){return e[ms]||null}const Lr=function(e,i,s){},Qa="svg";function sr(e){for(;Array.isArray(e);)e=e[Rn];return e}function Ur(e,i){return sr(i[e])}function ir(e,i){return sr(i[e.index])}function Da(e,i){return e.data[i]}function Lo(e,i){return e[i]}function fn(e,i){const s=i[e];return fr(s)?s:s[Rn]}function on(e){return 64==(64&e[Ji])}function vn(e,i){return null==i?null:e[i]}function Bn(e){e[po]=0}function Is(e,i){e[vr]+=i;let s=e,u=e[tr];for(;null!==u&&(1===i&&1===s[vr]||-1===i&&0===s[vr]);)u[vr]+=i,s=u,u=u[tr]}const en={lFrame:Qo(null),bindingsEnabled:!0};function Ut(){return en.bindingsEnabled}function jt(){return en.lFrame.lView}function gn(){return en.lFrame.tView}function ks(e){return en.lFrame.contextLView=e,e[ji]}function ar(e){return en.lFrame.contextLView=null,e}function br(){let e=No();for(;null!==e&&64===e.type;)e=e.parent;return e}function No(){return en.lFrame.currentTNode}function zo(e,i){const s=en.lFrame;s.currentTNode=e,s.isParent=i}function el(){return en.lFrame.isParent}function fs(){en.lFrame.isParent=!1}function qr(){const e=en.lFrame;let i=e.bindingRootIndex;return-1===i&&(i=e.bindingRootIndex=e.tView.bindingStartIndex),i}function gs(){return en.lFrame.bindingIndex++}function In(e){const i=en.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+e,s}function Nl(e,i){const s=en.lFrame;s.bindingIndex=s.bindingRootIndex=e,Ba(i)}function Ba(e){en.lFrame.currentDirectiveIndex=e}function lr(e){const i=en.lFrame.currentDirectiveIndex;return-1===i?null:e[i]}function Ta(){return en.lFrame.currentQueryIndex}function tl(e){en.lFrame.currentQueryIndex=e}function Vo(e){const i=e[Ri];return 2===i.type?i.declTNode:1===i.type?e[Fn]:null}function Ln(e,i,s){if(s&wi.SkipSelf){let f=i,x=e;for(;!(f=f.parent,null!==f||s&wi.Host||(f=Vo(x),null===f||(x=x[Cs],10&f.type))););if(null===f)return!1;i=f,e=x}const u=en.lFrame=bn();return u.currentTNode=i,u.lView=e,!0}function Wr(e){const i=bn(),s=e[Ri];en.lFrame=i,i.currentTNode=s.firstChild,i.lView=e,i.tView=s,i.contextLView=e,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function bn(){const e=en.lFrame,i=null===e?null:e.child;return null===i?Qo(e):i}function Qo(e){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=i),i}function _s(){const e=en.lFrame;return en.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Dr=_s;function Va(){const e=_s();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function qn(){return en.lFrame.selectedIndex}function Ai(e){en.lFrame.selectedIndex=e}function Gn(){const e=en.lFrame;return Da(e.tView,e.selectedIndex)}function Ps(){en.lFrame.currentNamespace=Qa}function il(){!function Di(){en.lFrame.currentNamespace=null}()}function nl(e,i){for(let s=i.directiveStart,u=i.directiveEnd;s<u;s++){const x=e.data[s].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:O,ngAfterViewInit:z,ngAfterViewChecked:J,ngOnDestroy:de}=x;S&&(e.contentHooks??(e.contentHooks=[])).push(-s,S),O&&((e.contentHooks??(e.contentHooks=[])).push(s,O),(e.contentCheckHooks??(e.contentCheckHooks=[])).push(s,O)),z&&(e.viewHooks??(e.viewHooks=[])).push(-s,z),J&&((e.viewHooks??(e.viewHooks=[])).push(s,J),(e.viewCheckHooks??(e.viewCheckHooks=[])).push(s,J)),null!=de&&(e.destroyHooks??(e.destroyHooks=[])).push(s,de)}}function qs(e,i,s){ne(e,i,3,s)}function rl(e,i,s,u){(3&e[Ji])===s&&ne(e,i,s,u)}function B(e,i){let s=e[Ji];(3&s)===i&&(s&=2047,s+=1,e[Ji]=s)}function ne(e,i,s,u){const x=u??-1,S=i.length-1;let O=0;for(let z=void 0!==u?65535&e[po]:0;z<S;z++)if("number"==typeof i[z+1]){if(O=i[z],null!=u&&O>=u)break}else i[z]<0&&(e[po]+=65536),(O<x||-1==x)&&(H(e,s,i,z),e[po]=(4294901760&e[po])+z+2),z++}function H(e,i,s,u){const f=s[u]<0,x=s[u+1],O=e[f?-s[u]:s[u]];if(f){if(e[Ji]>>11<e[po]>>16&&(3&e[Ji])===i){e[Ji]+=2048,Lr(4,O,x);try{x.call(O)}finally{Lr(5,O,x)}}}else{Lr(4,O,x);try{x.call(O)}finally{Lr(5,O,x)}}}const ye=-1;class Ge{constructor(i,s,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=u}}function Vn(e,i,s){let u=0;for(;u<s.length;){const f=s[u];if("number"==typeof f){if(0!==f)break;u++;const x=s[u++],S=s[u++],O=s[u++];e.setAttribute(i,S,O,x)}else{const x=f,S=s[++u];An(x)?e.setProperty(i,x,S):e.setAttribute(i,x,S),u++}}return u}function Hn(e){return 3===e||4===e||6===e}function An(e){return 64===e.charCodeAt(0)}function jr(e,i){if(null!==i&&0!==i.length)if(null===e||0===e.length)e=i.slice();else{let s=-1;for(let u=0;u<i.length;u++){const f=i[u];"number"==typeof f?s=f:0===s||Uo(e,s,f,null,-1===s||2===s?i[++u]:null)}}return e}function Uo(e,i,s,u,f){let x=0,S=e.length;if(-1===i)S=-1;else for(;x<e.length;){const O=e[x++];if("number"==typeof O){if(O===i){S=-1;break}if(O>i){S=x-1;break}}}for(;x<e.length;){const O=e[x];if("number"==typeof O)break;if(O===s){if(null===u)return void(null!==f&&(e[x+1]=f));if(u===e[x+1])return void(e[x+2]=f)}x++,null!==u&&x++,null!==f&&x++}-1!==S&&(e.splice(S,0,i),x=S+1),e.splice(x++,0,s),null!==u&&e.splice(x++,0,u),null!==f&&e.splice(x++,0,f)}function _o(e){return e!==ye}function to(e){return 32767&e}function es(e,i){let s=function ys(e){return e>>16}(e),u=i;for(;s>0;)u=u[Cs],s--;return u}let ts=!0;function Ua(e){const i=ts;return ts=e,i}const mi=255,ja=5;let lc=0;const So={};function Ha(e,i){const s=Pc(e,i);if(-1!==s)return s;const u=i[Ri];u.firstCreatePass&&(e.injectorIndex=i.length,Hr(u.data,e),Hr(i,null),Hr(u.blueprint,null));const f=jn(e,i),x=e.injectorIndex;if(_o(f)){const S=to(f),O=es(f,i),z=O[Ri].data;for(let J=0;J<8;J++)i[x+J]=O[S+J]|z[S+J]}return i[x+8]=f,x}function Hr(e,i){e.push(0,0,0,0,0,0,0,0,i)}function Pc(e,i){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===i[e.injectorIndex+8]?-1:e.injectorIndex}function jn(e,i){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let s=0,u=null,f=i;for(;null!==f;){if(u=vl(f),null===u)return ye;if(s++,f=f[Cs],-1!==u.injectorIndex)return u.injectorIndex|s<<16}return ye}function gr(e,i,s){!function jo(e,i,s){let u;"string"==typeof s?u=s.charCodeAt(0)||0:s.hasOwnProperty(Re)&&(u=s[Re]),null==u&&(u=s[Re]=lc++);const f=u&mi;i.data[e+(f>>ja)]|=1<<f}(e,i,s)}function Vl(e,i,s){if(s&wi.Optional||void 0!==e)return e;kt()}function Os(e,i,s,u){if(s&wi.Optional&&void 0===u&&(u=null),!(s&(wi.Self|wi.Host))){const f=e[Rr],x=Ce(void 0);try{return f?f.get(i,u,s&wi.Optional):Ee(i,u,s&wi.Optional)}finally{Ce(x)}}return Vl(u,0,s)}function ol(e,i,s,u=wi.Default,f){if(null!==e){if(1024&i[Ji]){const S=function Ho(e,i,s,u,f){let x=e,S=i;for(;null!==x&&null!==S&&1024&S[Ji]&&!(256&S[Ji]);){const O=cc(x,S,s,u|wi.Self,So);if(O!==So)return O;let z=x.parent;if(!z){const J=S[Es];if(J){const de=J.get(s,So,u);if(de!==So)return de}z=vl(S),S=S[Cs]}x=z}return f}(e,i,s,u,So);if(S!==So)return S}const x=cc(e,i,s,u,So);if(x!==So)return x}return Os(i,s,u,f)}function cc(e,i,s,u,f){const x=function yl(e){if("string"==typeof e)return e.charCodeAt(0)||0;const i=e.hasOwnProperty(Re)?e[Re]:void 0;return"number"==typeof i?i>=0?i&mi:sl:i}(s);if("function"==typeof x){if(!Ln(i,e,u))return u&wi.Host?Vl(f,0,u):Os(i,s,u,f);try{const S=x(u);if(null!=S||u&wi.Optional)return S;kt()}finally{Dr()}}else if("number"==typeof x){let S=null,O=Pc(e,i),z=ye,J=u&wi.Host?i[or][Fn]:null;for((-1===O||u&wi.SkipSelf)&&(z=-1===O?jn(e,i):i[O+8],z!==ye&&Ul(u,!1)?(S=i[Ri],O=to(z),i=es(z,i)):O=-1);-1!==O;){const de=i[Ri];if(io(x,O,de.data)){const Te=ha(O,i,s,S,u,J);if(Te!==So)return Te}z=i[O+8],z!==ye&&Ul(u,i[Ri].data[O+8]===J)&&io(x,O,i)?(S=de,O=to(z),i=es(z,i)):O=-1}}return f}function ha(e,i,s,u,f,x){const S=i[Ri],O=S.data[e+8],de=$a(O,S,s,null==u?Yn(O)&&ts:u!=S&&0!=(3&O.type),f&wi.Host&&x===O);return null!==de?To(i,S,de,O):So}function $a(e,i,s,u,f){const x=e.providerIndexes,S=i.data,O=1048575&x,z=e.directiveStart,de=x>>20,qe=f?O+de:e.directiveEnd;for(let _t=u?O:O+de;_t<qe;_t++){const Ht=S[_t];if(_t<z&&s===Ht||_t>=z&&Ht.type===s)return _t}if(f){const _t=S[z];if(_t&&Br(_t)&&_t.type===s)return z}return null}function To(e,i,s,u){let f=e[s];const x=i.data;if(function Ft(e){return e instanceof Ge}(f)){const S=f;S.resolving&&function Ct(e,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${e}`:"";throw new wt(-200,`Circular dependency in DI detected for ${e}${s}`)}(function Wt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Zt(e)}(x[s]));const O=Ua(S.canSeeViewProviders);S.resolving=!0;const z=S.injectImpl?Ce(S.injectImpl):null;Ln(e,u,wi.Default);try{f=e[s]=S.factory(void 0,x,e,u),i.firstCreatePass&&s>=u.directiveStart&&function Bl(e,i,s){const{ngOnChanges:u,ngOnInit:f,ngDoCheck:x}=i.type.prototype;if(u){const S=Ss(i);(s.preOrderHooks??(s.preOrderHooks=[])).push(e,S),(s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(e,S)}f&&(s.preOrderHooks??(s.preOrderHooks=[])).push(0-e,f),x&&((s.preOrderHooks??(s.preOrderHooks=[])).push(e,x),(s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(e,x))}(s,x[s],i)}finally{null!==z&&Ce(z),Ua(O),S.resolving=!1,Dr()}}return f}function io(e,i,s){return!!(s[i+(e>>ja)]&1<<e)}function Ul(e,i){return!(e&wi.Self||e&wi.Host&&i)}class co{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,u){return ol(this._tNode,this._lView,i,K(u),s)}}function sl(){return new co(br(),jt())}function Ks(e){return We(()=>{const i=e.prototype.constructor,s=i[xe]||is(i),u=Object.prototype;let f=Object.getPrototypeOf(e.prototype).constructor;for(;f&&f!==u;){const x=f[xe]||is(f);if(x&&x!==s)return x;f=Object.getPrototypeOf(f)}return x=>new x})}function is(e){return ot(e)?()=>{const i=is(ke(e));return i&&i()}:Yr(e)}function vl(e){const i=e[Ri],s=i.type;return 2===s?i.declTNode:1===s?e[Fn]:null}function jl(e){return function Sr(e,i){if("class"===i)return e.classes;if("style"===i)return e.styles;const s=e.attrs;if(s){const u=s.length;let f=0;for(;f<u;){const x=s[f];if(Hn(x))break;if(0===x)f+=2;else if("number"==typeof x)for(f++;f<u&&"string"==typeof s[f];)f++;else{if(x===i)return s[f+1];f+=2}}}return null}(br(),e)}const Xs="__parameters__";function d(e,i,s){return We(()=>{const u=function n(e){return function(...s){if(e){const u=e(...s);for(const f in u)this[f]=u[f]}}}(i);function f(...x){if(this instanceof f)return u.apply(this,x),this;const S=new f(...x);return O.annotation=S,O;function O(z,J,de){const Te=z.hasOwnProperty(Xs)?z[Xs]:Object.defineProperty(z,Xs,{value:[]})[Xs];for(;Te.length<=de;)Te.push(null);return(Te[de]=Te[de]||[]).push(S),z}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=e,f.annotationCls=f,f})}class E{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Je({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rt(e,i){e.forEach(s=>Array.isArray(s)?Rt(s,i):i(s))}function ii(e,i,s){i>=e.length?e.push(s):e.splice(i,0,s)}function I(e,i){return i>=e.length-1?e.pop():e.splice(i,1)[0]}function A(e,i){const s=[];for(let u=0;u<e;u++)s.push(i);return s}function le(e,i,s){let u=ut(e,i);return u>=0?e[1|u]=s:(u=~u,function Z(e,i,s,u){let f=e.length;if(f==i)e.push(s,u);else if(1===f)e.push(u,e[0]),e[0]=s;else{for(f--,e.push(e[f-1],e[f]);f>i;)e[f]=e[f-2],f--;e[i]=s,e[i+1]=u}}(e,u,i,s)),u}function Ke(e,i){const s=ut(e,i);if(s>=0)return e[1|s]}function ut(e,i){return function vi(e,i,s){let u=0,f=e.length>>s;for(;f!==u;){const x=u+(f-u>>1),S=e[x<<s];if(i===S)return x<<s;S>i?f=x:u=x+1}return~(f<<s)}(e,i,1)}const $o=U(d("Inject",e=>({token:e})),-1),uo=U(d("Optional"),8),Ga=U(d("SkipSelf"),4);var Xn=(()=>((Xn=Xn||{})[Xn.Important=1]="Important",Xn[Xn.DashCase=2]="DashCase",Xn))();const Zd=new Map;let hc=0;const Ku="__ngContext__";function Zo(e,i){fr(i)?(e[Ku]=i[us],function sd(e){Zd.set(e[us],e)}(i)):e[Ku]=i}let ad;function Ju(e,i){return ad(e,i)}function ld(e){const i=e[tr];return Fr(i)?i[tr]:i}function qd(e){return Kd(e[ws])}function Fc(e){return Kd(e[$n])}function Kd(e){for(;null!==e&&!Fr(e);)e=e[$n];return e}function ll(e,i,s,u,f){if(null!=u){let x,S=!1;Fr(u)?x=u:fr(u)&&(S=!0,u=u[Rn]);const O=sr(u);0===e&&null!==s?null==f?fc(i,s,O):pc(i,s,O,f||null,!0):1===e&&null!==s?pc(i,s,O,f||null,!0):2===e?function pd(e,i,s){const u=md(e,i);u&&function Wl(e,i,s,u){e.removeChild(i,s,u)}(e,u,i,s)}(i,O,S):3===e&&i.destroyNode(O),null!=x&&function Cm(e,i,s,u,f){const x=s[Hs];x!==sr(s)&&ll(i,e,u,x,f);for(let O=dr;O<s.length;O++){const z=s[O];_c(z[Ri],z,e,i,u,x)}}(i,e,x,s,f)}}function dd(e,i,s){return e.createElement(i,s)}function Jd(e,i){const s=e[ao],u=s.indexOf(i),f=i[tr];512&i[Ji]&&(i[Ji]&=-513,Is(f,-1)),s.splice(u,1)}function ih(e,i){if(e.length<=dr)return;const s=dr+i,u=e[s];if(u){const f=u[js];null!==f&&f!==e&&Jd(f,u),i>0&&(e[s-1][$n]=u[$n]);const x=I(e,dr+i);!function eh(e,i){_c(e,i,i[sn],2,null,null),i[Rn]=null,i[Fn]=null}(u[Ri],u);const S=x[Jr];null!==S&&S.detachView(x[Ri]),u[tr]=null,u[$n]=null,u[Ji]&=-65}return u}function Qd(e,i){if(!(128&i[Ji])){const s=i[sn];s.destroyNode&&_c(e,i,s,3,null,null),function gm(e){let i=e[ws];if(!i)return ud(e[Ri],e);for(;i;){let s=null;if(fr(i))s=i[ws];else{const u=i[dr];u&&(s=u)}if(!s){for(;i&&!i[$n]&&i!==e;)fr(i)&&ud(i[Ri],i),i=i[tr];null===i&&(i=e),fr(i)&&ud(i[Ri],i),s=i&&i[$n]}i=s}}(i)}}function ud(e,i){if(!(128&i[Ji])){i[Ji]&=-65,i[Ji]|=128,function _m(e,i){let s;if(null!=e&&null!=(s=e.destroyHooks))for(let u=0;u<s.length;u+=2){const f=i[s[u]];if(!(f instanceof Ge)){const x=s[u+1];if(Array.isArray(x))for(let S=0;S<x.length;S+=2){const O=f[x[S]],z=x[S+1];Lr(4,O,z);try{z.call(O)}finally{Lr(5,O,z)}}else{Lr(4,f,x);try{x.call(f)}finally{Lr(5,f,x)}}}}}(e,i),function nh(e,i){const s=e.cleanup,u=i[zn];let f=-1;if(null!==s)for(let x=0;x<s.length-1;x+=2)if("string"==typeof s[x]){const S=s[x+3];S>=0?u[f=S]():u[f=-S].unsubscribe(),x+=2}else{const S=u[f=s[x+1]];s[x].call(S)}if(null!==u){for(let x=f+1;x<u.length;x++)(0,u[x])();i[zn]=null}}(e,i),1===i[Ri].type&&i[sn].destroy();const s=i[js];if(null!==s&&Fr(i[tr])){s!==i[tr]&&Jd(s,i);const u=i[Jr];null!==u&&u.detachView(e)}!function Go(e){Zd.delete(e[us])}(i)}}function rh(e,i,s){return function ym(e,i,s){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return s[Rn];{const{componentOffset:f}=u;if(f>-1){const{encapsulation:x}=e.data[u.directiveStart+f];if(x===vt.None||x===vt.Emulated)return null}return ir(u,s)}}(e,i.parent,s)}function pc(e,i,s,u,f){e.insertBefore(i,s,u,f)}function fc(e,i,s){e.appendChild(i,s)}function hd(e,i,s,u,f){null!==u?pc(e,i,s,u,f):fc(e,i,s)}function md(e,i){return e.parentNode(i)}function vm(e,i,s){return xm(e,i,s)}let eu,iu,ru,ou,xm=function bm(e,i,s){return 40&e.type?ir(e,s):null};function Yl(e,i,s,u){const f=rh(e,u,i),x=i[sn],O=vm(u.parent||i[Fn],u,i);if(null!=f)if(Array.isArray(s))for(let z=0;z<s.length;z++)hd(x,f,s[z],O,!1);else hd(x,f,s,O,!1);void 0!==eu&&eu(x,u,i,s,f)}function tu(e,i){if(null!==i){const s=i.type;if(3&s)return ir(i,e);if(4&s)return sh(-1,e[i.index]);if(8&s){const u=i.child;if(null!==u)return tu(e,u);{const f=e[i.index];return Fr(f)?sh(-1,f):sr(f)}}if(32&s)return Ju(i,e)()||sr(e[i.index]);{const u=Nc(e,i);return null!==u?Array.isArray(u)?u[0]:tu(ld(e[or]),u):tu(e,i.next)}}return null}function Nc(e,i){return null!==i?e[or][Fn].projection[i.projection]:null}function sh(e,i){const s=dr+e+1;if(s<i.length){const u=i[s],f=u[Ri].firstChild;if(null!==f)return tu(u,f)}return i[Hs]}function gc(e,i,s,u,f,x,S){for(;null!=s;){const O=u[s.index],z=s.type;if(S&&0===i&&(O&&Zo(sr(O),u),s.flags|=2),32!=(32&s.flags))if(8&z)gc(e,i,s.child,u,f,x,!1),ll(i,e,f,O,x);else if(32&z){const J=Ju(s,u);let de;for(;de=J();)ll(i,e,f,de,x);ll(i,e,f,O,x)}else 16&z?wm(e,i,u,s,f,x):ll(i,e,f,O,x);s=S?s.projectionNext:s.next}}function _c(e,i,s,u,f,x){gc(s,u,e.firstChild,i,f,x,!1)}function wm(e,i,s,u,f,x){const S=s[or],z=S[Fn].projection[u.projection];if(Array.isArray(z))for(let J=0;J<z.length;J++)ll(i,e,f,z[J],x);else gc(e,i,z,S[tr],f,x,!0)}function ah(e,i,s){""===s?e.removeAttribute(i,"class"):e.setAttribute(i,"class",s)}function Em(e,i,s){const{mergedAttrs:u,classes:f,styles:x}=s;null!==u&&Vn(e,i,u),null!==f&&ah(e,i,f),null!==x&&function fd(e,i,s){e.setAttribute(i,"style",s)}(e,i,x)}function zc(e){return function lh(){if(void 0===iu&&(iu=null,xt.trustedTypes))try{iu=xt.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return iu}()?.createHTML(e)||e}function Mm(e){ru=e}function Vc(){if(void 0===ou&&(ou=null,xt.trustedTypes))try{ou=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return ou}function Uc(e){return Vc()?.createHTML(e)||e}function Sm(e){return Vc()?.createScriptURL(e)||e}class yc{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gt})`}}class Tm extends yc{getTypeName(){return"HTML"}}class Yp extends yc{getTypeName(){return"Style"}}class qp extends yc{getTypeName(){return"Script"}}class gd extends yc{getTypeName(){return"URL"}}class Ao extends yc{getTypeName(){return"ResourceURL"}}function Fs(e){return e instanceof yc?e.changingThisBreaksApplicationSecurity:e}function cl(e,i){const s=function Im(e){return e instanceof yc&&e.getTypeName()||null}(e);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see ${Gt})`)}return s===i}function hr(e){return new Tm(e)}function dh(e){return new Yp(e)}function vc(e){return new qp(e)}function jc(e){return new gd(e)}function wl(e){return new Ao(e)}class Am{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(zc(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch{return null}}}class Kp{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const s=this.inertDocument.createElement("template");return s.innerHTML=zc(i),s}}const su=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function au(e){return(e=String(e)).match(su)?e:"unsafe:"+e}function Cl(e){const i={};for(const s of e.split(","))i[s]=!0;return i}function _d(...e){const i={};for(const s of e)for(const u in s)s.hasOwnProperty(u)&&(i[u]=!0);return i}const km=Cl("area,br,col,hr,img,wbr"),Pm=Cl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Om=Cl("rp,rt"),dl=_d(km,_d(Pm,Cl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_d(Om,Cl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_d(Om,Pm)),ql=Cl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fm=_d(ql,Cl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Lm=Cl("script,style,template");class hh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,u=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?u=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,u&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let f=this.checkClobberedElement(s,s.nextSibling);if(f){s=f;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!dl.hasOwnProperty(s))return this.sanitizedSomething=!0,!Lm.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const u=i.attributes;for(let f=0;f<u.length;f++){const x=u.item(f),S=x.name,O=S.toLowerCase();if(!Fm.hasOwnProperty(O)){this.sanitizedSomething=!0;continue}let z=x.value;ql[O]&&(z=au(z)),this.buf.push(" ",S,'="',Hc(z),'"')}return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();dl.hasOwnProperty(s)&&!km.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(Hc(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const Nm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lu=/([^\#-~ |!])/g;function Hc(e){return e.replace(/&/g,"&amp;").replace(Nm,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(lu,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let El;function vd(e,i){let s=null;try{El=El||function bc(e){const i=new Kp(e);return function Xp(){try{return!!(new window.DOMParser).parseFromString(zc(""),"text/html")}catch{return!1}}()?new Am(i):i}(e);let u=i?String(i):"";s=El.getInertBodyElement(u);let f=5,x=u;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,u=x,x=s.innerHTML,s=El.getInertBodyElement(u)}while(u!==x);return zc((new hh).sanitizeChildren($c(s)||s))}finally{if(s){const u=$c(s)||s;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function $c(e){return"content"in e&&function Jp(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var oo=(()=>((oo=oo||{})[oo.NONE=0]="NONE",oo[oo.HTML=1]="HTML",oo[oo.STYLE=2]="STYLE",oo[oo.SCRIPT=3]="SCRIPT",oo[oo.URL=4]="URL",oo[oo.RESOURCE_URL=5]="RESOURCE_URL",oo))();function mh(e){const i=wc();return i?Uc(i.sanitize(oo.HTML,e)||""):cl(e,"HTML")?Uc(Fs(e)):vd(function ch(){return void 0!==ru?ru:typeof document<"u"?document:void 0}(),Zt(e))}function ph(e){const i=wc();return i?i.sanitize(oo.URL,e)||"":cl(e,"URL")?Fs(e):au(Zt(e))}function fh(e){const i=wc();if(i)return Sm(i.sanitize(oo.RESOURCE_URL,e)||"");if(cl(e,"ResourceURL"))return Sm(Fs(e));throw new wt(904,!1)}function gh(e,i,s){return function tf(e,i){return"src"===i&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===i&&("base"===e||"link"===e)?fh:ph}(i,s)(e)}function wc(){const e=jt();return e&&e[Fo]}const xd=new E("ENVIRONMENT_INITIALIZER"),zm=new E("INJECTOR",-1),Bm=new E("INJECTOR_DEF_TYPES");class Gc{get(i,s=be){if(s===be){const u=new Error(`NullInjectorError: No provider for ${Ae(i)}!`);throw u.name="NullInjectorError",u}return s}}function _h(e){return{\u0275providers:e}}function nf(...e){return{\u0275providers:wd(0,e),\u0275fromNgModule:!0}}function wd(e,...i){const s=[],u=new Set;let f;return Rt(i,x=>{const S=x;ul(S,s,[],u)&&(f||(f=[]),f.push(S))}),void 0!==f&&du(f,s),s}function du(e,i){for(let s=0;s<e.length;s++){const{providers:f}=e[s];Zc(f,x=>{i.push(x)})}}function ul(e,i,s,u){if(!(e=ke(e)))return!1;let f=null,x=bi(e);const S=!x&&Qi(e);if(x||S){if(S&&!S.standalone)return!1;f=e}else{const z=e.ngModule;if(x=bi(z),!x)return!1;f=z}const O=u.has(f);if(S){if(O)return!1;if(u.add(f),S.dependencies){const z="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const J of z)ul(J,i,s,u)}}else{if(!x)return!1;{if(null!=x.imports&&!O){let J;u.add(f);try{Rt(x.imports,de=>{ul(de,i,s,u)&&(J||(J=[]),J.push(de))})}finally{}void 0!==J&&du(J,i)}if(!O){const J=Yr(f)||(()=>new f);i.push({provide:f,useFactory:J,deps:ni},{provide:Bm,useValue:f,multi:!0},{provide:xd,useValue:()=>Se(f),multi:!0})}const z=x.providers;null==z||O||Zc(z,de=>{i.push(de)})}}return f!==e&&void 0!==e.providers}function Zc(e,i){for(let s of e)Ye(s)&&(s=s.\u0275providers),Array.isArray(s)?Zc(s,i):i(s)}const yh=he({provide:String,useValue:he});function uu(e){return null!==e&&"object"==typeof e&&yh in e}function Cc(e){return"function"==typeof e}const Ed=new E("Set Injector scope."),hu={},bh={};let xh;function Kl(){return void 0===xh&&(xh=new Gc),xh}class ta{}class Md extends ta{get destroyed(){return this._destroyed}constructor(i,s,u,f){super(),this.parent=s,this.source=u,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pu(i,S=>this.processProvider(S)),this.records.set(zm,Dl(void 0,this)),f.has("environment")&&this.records.set(ta,Dl(void 0,this));const x=this.records.get(Ed);null!=x&&"string"==typeof x.value&&this.scopes.add(x.value),this.injectorDefTypes=new Set(this.get(Bm.multi,ni,wi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const s=Li(this),u=Ce(void 0);try{return i()}finally{Li(s),Ce(u)}}get(i,s=be,u=wi.Default){this.assertNotDestroyed(),u=K(u);const f=Li(this),x=Ce(void 0);try{if(!(u&wi.SkipSelf)){let O=this.records.get(i);if(void 0===O){const z=function Ch(e){return"function"==typeof e||"object"==typeof e&&e instanceof E}(i)&&pi(i);O=z&&this.injectableDefInScope(z)?Dl(Dd(i),hu):null,this.records.set(i,O)}if(null!=O)return this.hydrate(i,O)}return(u&wi.Self?Kl():this.parent).get(i,s=u&wi.Optional&&s===be?null:s)}catch(S){if("NullInjectorError"===S.name){if((S[Qe]=S[Qe]||[]).unshift(Ae(i)),f)throw S;return function fe(e,i,s,u){const f=e[Qe];throw i[li]&&f.unshift(i[li]),e.message=function Ie(e,i,s,u=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Ei?e.slice(2):e;let f=Ae(i);if(Array.isArray(i))f=i.map(Ae).join(" -> ");else if("object"==typeof i){let x=[];for(let S in i)if(i.hasOwnProperty(S)){let O=i[S];x.push(S+":"+("string"==typeof O?JSON.stringify(O):Ae(O)))}f=`{${x.join(", ")}}`}return`${s}${u?"("+u+")":""}[${f}]: ${e.replace(et,"\n  ")}`}("\n"+e.message,f,s,u),e[ze]=f,e[Qe]=null,e}(S,i,"R3InjectorError",this.source)}throw S}finally{Ce(x),Li(f)}}resolveInjectorInitializers(){const i=Li(this),s=Ce(void 0);try{const u=this.get(xd.multi,ni,wi.Self);for(const f of u)f()}finally{Li(i),Ce(s)}}toString(){const i=[],s=this.records;for(const u of s.keys())i.push(Ae(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new wt(205,!1)}processProvider(i){let s=Cc(i=ke(i))?i:ke(i&&i.provide);const u=function wh(e){return uu(e)?Dl(void 0,e.useValue):Dl(mu(e),hu)}(i);if(Cc(i)||!0!==i.multi)this.records.get(s);else{let f=this.records.get(s);f||(f=Dl(void 0,hu,!0),f.factory=()=>V(f.multi),this.records.set(s,f)),s=i,f.multi.push(i)}this.records.set(s,u)}hydrate(i,s){return s.value===hu&&(s.value=bh,s.value=s.factory()),"object"==typeof s.value&&s.value&&function jm(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=ke(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Dd(e){const i=pi(e),s=null!==i?i.factory:Yr(e);if(null!==s)return s;if(e instanceof E)throw new wt(204,!1);if(e instanceof Function)return function Um(e){const i=e.length;if(i>0)throw A(i,"?"),new wt(204,!1);const s=function fi(e){return e&&(e[rt]||e[_i])||null}(e);return null!==s?()=>s.factory(e):()=>new e}(e);throw new wt(204,!1)}function mu(e,i,s){let u;if(Cc(e)){const f=ke(e);return Yr(f)||Dd(f)}if(uu(e))u=()=>ke(e.useValue);else if(function vh(e){return!(!e||!e.useFactory)}(e))u=()=>e.useFactory(...V(e.deps||[]));else if(function Cd(e){return!(!e||!e.useExisting)}(e))u=()=>Se(ke(e.useExisting));else{const f=ke(e&&(e.useClass||e.provide));if(!function Sd(e){return!!e.deps}(e))return Yr(f)||Dd(f);u=()=>new f(...V(e.deps))}return u}function Dl(e,i,s=!1){return{factory:e,value:i,multi:s?[]:void 0}}function pu(e,i){for(const s of e)Array.isArray(s)?pu(s,i):s&&Ye(s)?pu(s.\u0275providers,i):i(s)}class ma{}class Wc{}class Eh{resolveComponentFactory(i){throw function Xl(e){const i=Error(`No component factory found for ${Ae(e)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=e,i}(i)}}let Mc=(()=>{class e{}return e.NULL=new Eh,e})();function Td(){return Yc(br(),jt())}function Yc(e,i){return new Dc(ir(e,i))}let Dc=(()=>{class e{constructor(s){this.nativeElement=s}}return e.__NG_ELEMENT_ID__=Td,e})();function Jl(e){return e instanceof Dc?e.nativeElement:e}class Mh{}let Dh=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function Sh(){const e=jt(),s=fn(br().index,e);return(fr(s)?s:e)[sn]}(),e})(),Hm=(()=>{class e{}return e.\u0275prov=Je({token:e,providedIn:"root",factory:()=>null}),e})();class $m{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const af=new $m("15.2.9"),fu={},gu="ngOriginalError";function _u(e){return e[gu]}class Ql{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&_u(i);for(;s&&_u(s);)s=_u(s);return s||null}}function Gm(e){return e.ownerDocument.defaultView}function hl(e){return e instanceof Function?e():e}function vu(e,i,s){let u=e.length;for(;;){const f=e.indexOf(i,s);if(-1===f)return f;if(0===f||e.charCodeAt(f-1)<=32){const x=i.length;if(f+x===u||e.charCodeAt(f+x)<=32)return f}s=f+1}}const bu="ng-template";function Wm(e,i,s){let u=0,f=!0;for(;u<e.length;){let x=e[u++];if("string"==typeof x&&f){const S=e[u++];if(s&&"class"===x&&-1!==vu(S.toLowerCase(),i,0))return!0}else{if(1===x){for(;u<e.length&&"string"==typeof(x=e[u++]);)if(x.toLowerCase()===i)return!0;return!1}"number"==typeof x&&(f=!1)}}return!1}function qc(e){return 4===e.type&&e.value!==bu}function kh(e,i,s){return i===(4!==e.type||s?e.value:bu)}function Ym(e,i,s){let u=4;const f=e.attrs||[],x=function Cu(e){for(let i=0;i<e.length;i++)if(Hn(e[i]))return i;return e.length}(f);let S=!1;for(let O=0;O<i.length;O++){const z=i[O];if("number"!=typeof z){if(!S)if(4&u){if(u=2|1&u,""!==z&&!kh(e,z,s)||""===z&&1===i.length){if(pa(u))return!1;S=!0}}else{const J=8&u?z:i[++O];if(8&u&&null!==e.attrs){if(!Wm(e.attrs,J,s)){if(pa(u))return!1;S=!0}continue}const Te=xu(8&u?"class":z,f,qc(e),s);if(-1===Te){if(pa(u))return!1;S=!0;continue}if(""!==J){let qe;qe=Te>x?"":f[Te+1].toLowerCase();const _t=8&u?qe:null;if(_t&&-1!==vu(_t,J,0)||2&u&&J!==qe){if(pa(u))return!1;S=!0}}}}else{if(!S&&!pa(u)&&!pa(z))return!1;if(S&&pa(z))continue;S=!1,u=z|1&u}}return pa(u)||S}function pa(e){return 0==(1&e)}function xu(e,i,s,u){if(null===i)return-1;let f=0;if(u||!s){let x=!1;for(;f<i.length;){const S=i[f];if(S===e)return f;if(3===S||6===S)x=!0;else{if(1===S||2===S){let O=i[++f];for(;"string"==typeof O;)O=i[++f];continue}if(4===S)break;if(0===S){f+=4;continue}}f+=x?1:2}return-1}return function Eu(e,i){let s=e.indexOf(4);if(s>-1)for(s++;s<e.length;){const u=e[s];if("number"==typeof u)return-1;if(u===i)return s;s++}return-1}(i,e)}function Kc(e,i,s=!1){for(let u=0;u<i.length;u++)if(Ym(e,i[u],s))return!0;return!1}function mf(e,i){e:for(let s=0;s<i.length;s++){const u=i[s];if(e.length===u.length){for(let f=0;f<e.length;f++)if(e[f]!==u[f])continue e;return!0}}return!1}function o(e,i){return e?":not("+i.trim()+")":i}function t(e){let i=e[0],s=1,u=2,f="",x=!1;for(;s<e.length;){let S=e[s];if("string"==typeof S)if(2&u){const O=e[++s];f+="["+S+(O.length>0?'="'+O+'"':"")+"]"}else 8&u?f+="."+S:4&u&&(f+=" "+S);else""!==f&&!pa(S)&&(i+=o(x,f),f=""),u=S,x=x||!pa(u);s++}return""!==f&&(i+=o(x,f)),i}const y={};function C(e){M(gn(),jt(),qn()+e,!1)}function M(e,i,s,u){if(!u)if(3==(3&i[Ji])){const x=e.preOrderCheckHooks;null!==x&&qs(i,x,s)}else{const x=e.preOrderHooks;null!==x&&rl(i,x,0,s)}Ai(s)}function Le(e,i=null,s=null,u){const f=dt(e,i,s,u);return f.resolveInjectorInitializers(),f}function dt(e,i=null,s=null,u,f=new Set){const x=[s||ni,nf(e)];return u=u||("object"==typeof e?void 0:Ae(e)),new Md(x,i||Kl(),u||null,f)}let gt=(()=>{class e{static create(s,u){if(Array.isArray(s))return Le({name:""},u,s,"");{const f=s.name??"";return Le({name:f},s.parent,s.providers,f)}}}return e.THROW_IF_NOT_FOUND=be,e.NULL=new Gc,e.\u0275prov=Je({token:e,providedIn:"any",factory:()=>Se(zm)}),e.__NG_ELEMENT_ID__=-1,e})();function _r(e,i=wi.Default){const s=jt();return null===s?Se(e,i):ol(br(),s,ke(e),i)}function Po(){throw new Error("invalid")}function Ns(e,i){const s=e.contentQueries;if(null!==s)for(let u=0;u<s.length;u+=2){const x=s[u+1];if(-1!==x){const S=e.data[x];tl(s[u]),S.contentQueries(2,i[x],x)}}}function zs(e,i,s,u,f,x,S,O,z,J,de){const Te=i.blueprint.slice();return Te[Rn]=f,Te[Ji]=76|u,(null!==de||e&&1024&e[Ji])&&(Te[Ji]|=1024),Bn(Te),Te[tr]=Te[Cs]=e,Te[ji]=s,Te[Eo]=S||e&&e[Eo],Te[sn]=O||e&&e[sn],Te[Fo]=z||e&&e[Fo]||null,Te[Rr]=J||e&&e[Rr]||null,Te[Fn]=x,Te[us]=function cm(){return hc++}(),Te[Es]=de,Te[or]=2==i.type?e[or]:Te,Te}function os(e,i,s,u,f){let x=e.data[i];if(null===x)x=function na(e,i,s,u,f){const x=No(),S=el(),z=e.data[i]=function Oh(e,i,s,u,f,x){return{type:s,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?x:x&&x.parent,s,i,u,f);return null===e.firstChild&&(e.firstChild=z),null!==x&&(S?null==x.child&&null!==z.parent&&(x.child=z):null===x.next&&(x.next=z,z.prev=x)),z}(e,i,s,u,f),function Kr(){return en.lFrame.inI18n}()&&(x.flags|=32);else if(64&x.type){x.type=s,x.value=u,x.attrs=f;const S=function Na(){const e=en.lFrame,i=e.currentTNode;return e.isParent?i:i.parent}();x.injectorIndex=null===S?-1:S.injectorIndex}return zo(x,!0),x}function ga(e,i,s,u){if(0===s)return-1;const f=i.length;for(let x=0;x<s;x++)i.push(u),e.blueprint.push(u),e.data.push(null);return f}function Bs(e,i,s){Wr(i);try{const u=e.viewQuery;null!==u&&bf(1,u,s);const f=e.template;null!==f&&xs(e,i,f,1,s),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ns(e,i),e.staticViewQueries&&bf(2,e.viewQuery,s);const x=e.components;null!==x&&function rs(e,i){for(let s=0;s<i.length;s++)Mb(e,i[s])}(i,x)}catch(u){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),u}finally{i[Ji]&=-5,Va()}}function ss(e,i,s,u){const f=i[Ji];if(128!=(128&f)){Wr(i);try{Bn(i),function Xo(e){return en.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==s&&xs(e,i,s,2,u);const S=3==(3&f);if(S){const J=e.preOrderCheckHooks;null!==J&&qs(i,J,null)}else{const J=e.preOrderHooks;null!==J&&rl(i,J,0,null),B(i,0)}if(function Cb(e){for(let i=qd(e);null!==i;i=Fc(i)){if(!i[zr])continue;const s=i[ao];for(let u=0;u<s.length;u++){const f=s[u];512&f[Ji]||Is(f[tr],1),f[Ji]|=512}}}(i),function wb(e){for(let i=qd(e);null!==i;i=Fc(i))for(let s=dr;s<i.length;s++){const u=i[s],f=u[Ri];on(u)&&ss(f,u,f.template,u[ji])}}(i),null!==e.contentQueries&&Ns(e,i),S){const J=e.contentCheckHooks;null!==J&&qs(i,J)}else{const J=e.contentHooks;null!==J&&rl(i,J,1),B(i,1)}!function Sn(e,i){const s=e.hostBindingOpCodes;if(null!==s)try{for(let u=0;u<s.length;u++){const f=s[u];if(f<0)Ai(~f);else{const x=f,S=s[++u],O=s[++u];Nl(S,x),O(2,i[x])}}}finally{Ai(-1)}}(e,i);const O=e.components;null!==O&&function wo(e,i){for(let s=0;s<i.length;s++)Eb(e,i[s])}(i,O);const z=e.viewQuery;if(null!==z&&bf(2,z,u),S){const J=e.viewCheckHooks;null!==J&&qs(i,J)}else{const J=e.viewHooks;null!==J&&rl(i,J,2),B(i,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),i[Ji]&=-41,512&i[Ji]&&(i[Ji]&=-513,Is(i[tr],-1))}finally{Va()}}}function xs(e,i,s,u,f){const x=qn(),S=2&u;try{Ai(-1),S&&i.length>Wn&&M(e,i,Wn,!1),Lr(S?2:0,f),s(u,f)}finally{Ai(x),Lr(S?3:1,f)}}function Wa(e,i,s){if(Qr(i)){const f=i.directiveEnd;for(let x=i.directiveStart;x<f;x++){const S=e.data[x];S.contentQueries&&S.contentQueries(1,s[x],x)}}}function Sc(e,i,s){Ut()&&(function Vs(e,i,s,u){const f=s.directiveStart,x=s.directiveEnd;Yn(s)&&function vb(e,i,s){const u=ir(i,e),f=Du(s),x=e[Eo],S=Xm(e,zs(e,f,null,s.onPush?32:16,u,i,x,x.createRenderer(u,s),null,null,null));e[i.index]=S}(i,s,e.data[f+s.componentOffset]),e.firstCreatePass||Ha(s,i),Zo(u,i);const S=s.initialInputs;for(let O=f;O<x;O++){const z=e.data[O],J=To(i,e,O,s);Zo(J,i),null!==S&&bb(0,O-f,J,z,0,S),Br(z)&&(fn(s.index,i)[ji]=To(i,e,O,s))}}(e,i,s,ir(s,i)),64==(64&s.flags)&&Ya(e,i,s))}function Mu(e,i,s=ir){const u=i.localNames;if(null!==u){let f=i.index+1;for(let x=0;x<u.length;x+=2){const S=u[x+1],O=-1===S?s(i,e):e[S];e[f++]=O}}}function Du(e){const i=e.tView;return null===i||i.incompleteFirstPass?e.tView=kd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):i}function kd(e,i,s,u,f,x,S,O,z,J){const de=Wn+u,Te=de+f,qe=function Sl(e,i){const s=[];for(let u=0;u<i;u++)s.push(u<e?null:y);return s}(de,Te),_t="function"==typeof J?J():J;return qe[Ri]={type:e,blueprint:qe,template:s,queries:null,viewQuery:O,declTNode:i,data:qe.slice().fill(null,de),bindingStartIndex:de,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:z,consts:_t,incompleteFirstPass:!1}}function Su(e,i,s,u){const f=Wg(i);null===s?f.push(u):(f.push(s),e.firstCreatePass&&Yg(e).push(u,f.length-1))}function Tu(e,i,s,u){for(let f in e)if(e.hasOwnProperty(f)){s=null===s?{}:s;const x=e[f];null===u?qm(s,i,f,x):u.hasOwnProperty(f)&&qm(s,i,u[f],x)}return s}function qm(e,i,s,u){e.hasOwnProperty(s)?e[s].push(i,u):e[s]=[i,u]}function _a(e,i,s,u,f,x,S,O){const z=ir(i,s);let de,J=i.inputs;!O&&null!=J&&(de=J[u])?(ep(e,s,de,u,f),Yn(i)&&function gf(e,i){const s=fn(i,e);16&s[Ji]||(s[Ji]|=32)}(s,i.index)):3&i.type&&(u=function ff(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(u),f=null!=S?S(f,i.value||"",u):f,x.setProperty(z,u,f))}function Rh(e,i,s,u){if(Ut()){const f=null===u?null:{"":-1},x=function Od(e,i){const s=e.directiveRegistry;let u=null,f=null;if(s)for(let x=0;x<s.length;x++){const S=s[x];if(Kc(i,S.selectors,!1))if(u||(u=[]),Br(S))if(null!==S.findHostDirectiveDefs){const O=[];f=f||new Map,S.findHostDirectiveDefs(S,O,f),u.unshift(...O,S),Rd(e,i,O.length)}else u.unshift(S),Rd(e,i,0);else f=f||new Map,S.findHostDirectiveDefs?.(S,u,f),u.push(S)}return null===u?null:[u,f]}(e,s);let S,O;null===x?S=O=null:[S,O]=x,null!==S&&Aa(e,i,s,S,f,O),f&&function ic(e,i,s){if(i){const u=e.localNames=[];for(let f=0;f<i.length;f+=2){const x=s[i[f+1]];if(null==x)throw new wt(-301,!1);u.push(i[f],x)}}}(s,u,f)}s.mergedAttrs=jr(s.mergedAttrs,s.attrs)}function Aa(e,i,s,u,f,x){for(let J=0;J<u.length;J++)gr(Ha(s,i),e,u[J].type);!function _b(e,i,s){e.flags|=1,e.directiveStart=i,e.directiveEnd=i+s,e.providerIndexes=i}(s,e.data.length,u.length);for(let J=0;J<u.length;J++){const de=u[J];de.providersResolver&&de.providersResolver(de)}let S=!1,O=!1,z=ga(e,i,u.length,null);for(let J=0;J<u.length;J++){const de=u[J];s.mergedAttrs=jr(s.mergedAttrs,de.hostAttrs),yb(e,s,i,z,de),gb(z,de,f),null!==de.contentQueries&&(s.flags|=4),(null!==de.hostBindings||null!==de.hostAttrs||0!==de.hostVars)&&(s.flags|=64);const Te=de.type.prototype;!S&&(Te.ngOnChanges||Te.ngOnInit||Te.ngDoCheck)&&((e.preOrderHooks??(e.preOrderHooks=[])).push(s.index),S=!0),!O&&(Te.ngOnChanges||Te.ngDoCheck)&&((e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(s.index),O=!0),z++}!function pf(e,i,s){const f=i.directiveEnd,x=e.data,S=i.attrs,O=[];let z=null,J=null;for(let de=i.directiveStart;de<f;de++){const Te=x[de],qe=s?s.get(Te):null,Ht=qe?qe.outputs:null;z=Tu(Te.inputs,de,z,qe?qe.inputs:null),J=Tu(Te.outputs,de,J,Ht);const si=null===z||null===S||qc(i)?null:xb(z,de,S);O.push(si)}null!==z&&(z.hasOwnProperty("class")&&(i.flags|=8),z.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=O,i.inputs=z,i.outputs=J}(e,s,x)}function Ya(e,i,s){const u=s.directiveStart,f=s.directiveEnd,x=s.index,S=function Jo(){return en.lFrame.currentDirectiveIndex}();try{Ai(x);for(let O=u;O<f;O++){const z=e.data[O],J=i[O];Ba(O),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&Pd(z,J)}}finally{Ai(-1),Ba(S)}}function Pd(e,i){null!==e.hostBindings&&e.hostBindings(1,i)}function Rd(e,i,s){i.componentOffset=s,(e.components??(e.components=[])).push(i.index)}function gb(e,i,s){if(s){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)s[i.exportAs[u]]=e;Br(i)&&(s[""]=e)}}function yb(e,i,s,u,f){e.data[u]=f;const x=f.factory||(f.factory=Yr(f.type)),S=new Ge(x,Br(f),_r);e.blueprint[u]=S,s[u]=S,function Xc(e,i,s,u,f){const x=f.hostBindings;if(x){let S=e.hostBindingOpCodes;null===S&&(S=e.hostBindingOpCodes=[]);const O=~i.index;(function Km(e){let i=e.length;for(;i>0;){const s=e[--i];if("number"==typeof s&&s<0)return s}return 0})(S)!=O&&S.push(O),S.push(s,u,x)}}(e,i,u,ga(e,s,f.hostVars,y),f)}function nc(e,i,s,u,f,x){const S=ir(e,i);!function yf(e,i,s,u,f,x,S){if(null==x)e.removeAttribute(i,f,s);else{const O=null==S?Zt(x):S(x,u||"",f);e.setAttribute(i,f,O,s)}}(i[sn],S,x,e.value,s,u,f)}function bb(e,i,s,u,f,x){const S=x[i];if(null!==S){const O=u.setInput;for(let z=0;z<S.length;){const J=S[z++],de=S[z++],Te=S[z++];null!==O?u.setInput(s,Te,J,de):s[de]=Te}}}function xb(e,i,s){let u=null,f=0;for(;f<s.length;){const x=s[f];if(0!==x)if(5!==x){if("number"==typeof x)break;if(e.hasOwnProperty(x)){null===u&&(u=[]);const S=e[x];for(let O=0;O<S.length;O+=2)if(S[O]===i){u.push(x,S[O+1],s[f+1]);break}}f+=2}else f+=2;else f+=4}return u}function Zg(e,i,s,u){return[e,!0,!1,i,null,0,u,s,null,null]}function Eb(e,i){const s=fn(i,e);if(on(s)){const u=s[Ri];48&s[Ji]?ss(u,s,u.template,s[ji]):s[vr]>0&&vf(s)}}function vf(e){for(let u=qd(e);null!==u;u=Fc(u))for(let f=dr;f<u.length;f++){const x=u[f];if(on(x))if(512&x[Ji]){const S=x[Ri];ss(S,x,S.template,x[ji])}else x[vr]>0&&vf(x)}const s=e[Ri].components;if(null!==s)for(let u=0;u<s.length;u++){const f=fn(s[u],e);on(f)&&f[vr]>0&&vf(f)}}function Mb(e,i){const s=fn(i,e),u=s[Ri];(function Db(e,i){for(let s=i.length;s<e.blueprint.length;s++)i.push(e.blueprint[s])})(u,s),Bs(u,s,s[ji])}function Xm(e,i){return e[ws]?e[sa][$n]=i:e[ws]=i,e[sa]=i,i}function Jm(e){for(;e;){e[Ji]|=32;const i=ld(e);if(xa(e)&&!i)return e;e=i}return null}function Qm(e,i,s,u=!0){const f=i[Eo];f.begin&&f.begin();try{ss(e,i,e.template,s)}catch(S){throw u&&Kg(i,S),S}finally{f.end&&f.end()}}function bf(e,i,s){tl(0),i(e,s)}function Wg(e){return e[zn]||(e[zn]=[])}function Yg(e){return e.cleanup||(e.cleanup=[])}function qg(e,i,s){return(null===e||Br(e))&&(s=function Vr(e){for(;Array.isArray(e);){if("object"==typeof e[hs])return e;e=e[Rn]}return null}(s[i.index])),s[sn]}function Kg(e,i){const s=e[Rr],u=s?s.get(Ql,null):null;u&&u.handleError(i)}function ep(e,i,s,u,f){for(let x=0;x<s.length;){const S=s[x++],O=s[x++],z=i[S],J=e.data[S];null!==J.setInput?J.setInput(z,f,u,O):z[O]=f}}function tp(e,i,s){let u=s?e.styles:null,f=s?e.classes:null,x=0;if(null!==i)for(let S=0;S<i.length;S++){const O=i[S];"number"==typeof O?x=O:1==x?f=Ve(f,O):2==x&&(u=Ve(u,O+": "+i[++S]+";"))}s?e.styles=u:e.stylesWithoutHost=u,s?e.classes=f:e.classesWithoutHost=f}function ip(e,i,s,u,f=!1){for(;null!==s;){const x=i[s.index];if(null!==x&&u.push(sr(x)),Fr(x))for(let O=dr;O<x.length;O++){const z=x[O],J=z[Ri].firstChild;null!==J&&ip(z[Ri],z,J,u)}const S=s.type;if(8&S)ip(e,i,s.child,u);else if(32&S){const O=Ju(s,i);let z;for(;z=O();)u.push(z)}else if(16&S){const O=Nc(i,s);if(Array.isArray(O))u.push(...O);else{const z=ld(i[or]);ip(z[Ri],z,O,u,!0)}}s=f?s.projectionNext:s.next}return u}class Fh{get rootNodes(){const i=this._lView,s=i[Ri];return ip(s,i,s.firstChild,[])}constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ji]}set context(i){this._lView[ji]=i}get destroyed(){return 128==(128&this._lView[Ji])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[tr];if(Fr(i)){const s=i[Mo],u=s?s.indexOf(this):-1;u>-1&&(ih(i,u),I(s,u))}this._attachedToViewContainer=!1}Qd(this._lView[Ri],this._lView)}onDestroy(i){Su(this._lView[Ri],this._lView,null,i)}markForCheck(){Jm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ji]&=-65}reattach(){this._lView[Ji]|=64}detectChanges(){Qm(this._lView[Ri],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new wt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function th(e,i){_c(e,i,i[sn],2,null,null)}(this._lView[Ri],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new wt(902,!1);this._appRef=i}}class Sb extends Fh{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Qm(i[Ri],i,i[ji],!1)}checkNoChanges(){}get context(){return null}}class Xg extends Mc{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Qi(i);return new Lh(s,this.ngModule)}}function Jg(e){const i=[];for(let s in e)e.hasOwnProperty(s)&&i.push({propName:e[s],templateName:s});return i}class Tb{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,u){u=K(u);const f=this.injector.get(i,fu,u);return f!==fu||s===fu?f:this.parentInjector.get(i,s,u)}}class Lh extends Wc{get inputs(){return Jg(this.componentDef.inputs)}get outputs(){return Jg(this.componentDef.outputs)}constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function l(e){return e.map(t).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}create(i,s,u,f){let x=(f=f||this.ngModule)instanceof ta?f:f?.injector;x&&null!==this.componentDef.getStandaloneInjector&&(x=this.componentDef.getStandaloneInjector(x)||x);const S=x?new Tb(i,x):i,O=S.get(Mh,null);if(null===O)throw new wt(407,!1);const z=S.get(Hm,null),J=O.createRenderer(null,this.componentDef),de=this.componentDef.selectors[0][0]||"div",Te=u?function Ph(e,i,s){return e.selectRootElement(i,s===vt.ShadowDom)}(J,u,this.componentDef.encapsulation):dd(J,de,function Qg(e){const i=e.toLowerCase();return"svg"===i?Qa:"math"===i?"math":null}(de)),qe=this.componentDef.onPush?288:272,_t=kd(0,null,null,1,0,null,null,null,null,null),Ht=zs(null,_t,null,qe,null,null,O,J,z,S,null);let si,Mi;Wr(Ht);try{const Ni=this.componentDef;let Vi,ri=null;Ni.findHostDirectiveDefs?(Vi=[],ri=new Map,Ni.findHostDirectiveDefs(Ni,Vi,ri),Vi.push(Ni)):Vi=[Ni];const tn=function Ab(e,i){const s=e[Ri],u=Wn;return e[u]=i,os(s,u,2,"#host",null)}(Ht,Te),Jn=function e_(e,i,s,u,f,x,S,O){const z=f[Ri];!function kb(e,i,s,u){for(const f of e)i.mergedAttrs=jr(i.mergedAttrs,f.hostAttrs);null!==i.mergedAttrs&&(tp(i,i.mergedAttrs,!0),null!==s&&Em(u,s,i))}(u,e,i,S);const J=x.createRenderer(i,s),de=zs(f,Du(s),null,s.onPush?32:16,f[e.index],e,x,J,O||null,null,null);return z.firstCreatePass&&Rd(z,e,u.length-1),Xm(f,de),f[e.index]=de}(tn,Te,Ni,Vi,Ht,O,J);Mi=Da(_t,Wn),Te&&function Ob(e,i,s,u){if(u)Vn(e,s,["ng-version",af.full]);else{const{attrs:f,classes:x}=function p(e){const i=[],s=[];let u=1,f=2;for(;u<e.length;){let x=e[u];if("string"==typeof x)2===f?""!==x&&i.push(x,e[++u]):8===f&&s.push(x);else{if(!pa(f))break;f=x}u++}return{attrs:i,classes:s}}(i.selectors[0]);f&&Vn(e,s,f),x&&x.length>0&&ah(e,s,x.join(" "))}}(J,Ni,Te,u),void 0!==s&&function Rb(e,i,s){const u=e.projection=[];for(let f=0;f<i.length;f++){const x=s[f];u.push(null!=x?Array.from(x):null)}}(Mi,this.ngContentSelectors,s),si=function Pb(e,i,s,u,f,x){const S=br(),O=f[Ri],z=ir(S,f);Aa(O,f,S,s,null,u);for(let de=0;de<s.length;de++)Zo(To(f,O,S.directiveStart+de,S),f);Ya(O,f,S),z&&Zo(z,f);const J=To(f,O,S.directiveStart+S.componentOffset,S);if(e[ji]=f[ji]=J,null!==x)for(const de of x)de(J,i);return Wa(O,S,e),J}(Jn,Ni,Vi,ri,Ht,[Fb]),Bs(_t,Ht,null)}finally{Va()}return new Ib(this.componentType,si,Yc(Mi,Ht),Ht,Mi)}}class Ib extends ma{constructor(i,s,u,f,x){super(),this.location=u,this._rootLView=f,this._tNode=x,this.instance=s,this.hostView=this.changeDetectorRef=new Sb(f),this.componentType=i}setInput(i,s){const u=this._tNode.inputs;let f;if(null!==u&&(f=u[i])){const x=this._rootLView;ep(x[Ri],x,f,i,s),Jm(fn(this._tNode.index,x))}}get injector(){return new co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Fb(){const e=br();nl(jt()[Ri],e)}function wf(e){let i=function xf(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),s=!0;const u=[e];for(;i;){let f;if(Br(e))f=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new wt(903,!1);f=i.\u0275dir}if(f){if(s){u.push(f);const S=e;S.inputs=Cf(e.inputs),S.declaredInputs=Cf(e.declaredInputs),S.outputs=Cf(e.outputs);const O=f.hostBindings;O&&zb(e,O);const z=f.viewQuery,J=f.contentQueries;if(z&&Nb(e,z),J&&t_(e,J),$e(e.inputs,f.inputs),$e(e.declaredInputs,f.declaredInputs),$e(e.outputs,f.outputs),Br(f)&&f.data.animation){const de=e.data;de.animation=(de.animation||[]).concat(f.data.animation)}}const x=f.features;if(x)for(let S=0;S<x.length;S++){const O=x[S];O&&O.ngInherit&&O(e),O===wf&&(s=!1)}}i=Object.getPrototypeOf(i)}!function Lb(e){let i=0,s=null;for(let u=e.length-1;u>=0;u--){const f=e[u];f.hostVars=i+=f.hostVars,f.hostAttrs=jr(f.hostAttrs,s=jr(s,f.hostAttrs))}}(u)}function Cf(e){return e===Tt?{}:e===ni?[]:e}function Nb(e,i){const s=e.viewQuery;e.viewQuery=s?(u,f)=>{i(u,f),s(u,f)}:i}function t_(e,i){const s=e.contentQueries;e.contentQueries=s?(u,f,x)=>{i(u,f,x),s(u,f,x)}:i}function zb(e,i){const s=e.hostBindings;e.hostBindings=s?(u,f)=>{i(u,f),s(u,f)}:i}function np(e){return!!Ef(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Ef(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function rc(e,i,s){return e[i]=s}function ra(e,i,s){return!Object.is(e[i],s)&&(e[i]=s,!0)}function Fd(e,i,s,u){const f=ra(e,i,s);return ra(e,i+1,u)||f}function Mf(e,i,s,u){const f=jt();return ra(f,gs(),i)&&(gn(),nc(Gn(),f,e,i,s,u)),Mf}function Au(e,i,s,u){return ra(e,gs(),s)?i+Zt(s)+u:y}function Tn(e,i,s,u,f,x,S,O){const z=jt(),J=gn(),de=e+Wn,Te=J.firstCreatePass?function ml(e,i,s,u,f,x,S,O,z){const J=i.consts,de=os(i,e,4,S||null,vn(J,O));Rh(i,s,de,vn(J,z)),nl(i,de);const Te=de.tView=kd(2,de,u,f,x,i.directiveRegistry,i.pipeRegistry,null,i.schemas,J);return null!==i.queries&&(i.queries.template(i,de),Te.queries=i.queries.embeddedTView(de)),de}(de,J,z,i,s,u,f,x,S):J.data[de];zo(Te,!1);const qe=z[sn].createComment("");Yl(J,z,qe,Te),Zo(qe,z),Xm(z,z[de]=Zg(qe,z,qe,Te)),Zr(Te)&&Sc(J,z,Te),null!=S&&Mu(z,Te,O)}function u_(e){return Lo(function za(){return en.lFrame.contextLView}(),Wn+e)}function If(e,i,s){const u=jt();return ra(u,gs(),i)&&_a(gn(),Gn(),u,e,i,u[sn],s,!1),If}function pl(e,i,s,u,f){const S=f?"class":"style";ep(e,s,i.inputs[S],S,u)}function Tl(e,i,s,u){const f=jt(),x=gn(),S=Wn+e,O=f[sn],z=x.firstCreatePass?function rp(e,i,s,u,f,x){const S=i.consts,z=os(i,e,2,u,vn(S,f));return Rh(i,s,z,vn(S,x)),null!==z.attrs&&tp(z,z.attrs,!1),null!==z.mergedAttrs&&tp(z,z.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,z),z}(S,x,f,i,s,u):x.data[S],J=f[S]=dd(O,i,function zl(){return en.lFrame.currentNamespace}()),de=Zr(z);return zo(z,!0),Em(O,J,z),32!=(32&z.flags)&&Yl(x,f,J,z),0===function q(){return en.lFrame.elementDepthCount}()&&Zo(J,f),function $(){en.lFrame.elementDepthCount++}(),de&&(Sc(x,f,z),Wa(x,z,f)),null!==u&&Mu(f,z),Tl}function Ou(){let e=br();el()?fs():(e=e.parent,zo(e,!1));const i=e;!function Me(){en.lFrame.elementDepthCount--}();const s=gn();return s.firstCreatePass&&(nl(s,e),Qr(e)&&s.queries.elementEnd(e)),null!=i.classesWithoutHost&&function Un(e){return 0!=(8&e.flags)}(i)&&pl(s,i,jt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Dn(e){return 0!=(16&e.flags)}(i)&&pl(s,i,jt(),i.stylesWithoutHost,!1),Ou}function zh(e,i,s,u){return Tl(e,i,s,u),Ou(),zh}function op(e,i,s){const u=jt(),f=gn(),x=e+Wn,S=f.firstCreatePass?function h_(e,i,s,u,f){const x=i.consts,S=vn(x,u),O=os(i,e,8,"ng-container",S);return null!==S&&tp(O,S,!0),Rh(i,s,O,vn(x,f)),null!==i.queries&&i.queries.elementStart(i,O),O}(x,f,u,i,s):f.data[x];zo(S,!0);const O=u[x]=u[sn].createComment("");return Yl(f,u,O,S),Zo(O,u),Zr(S)&&(Sc(f,u,S),Wa(f,S,u)),null!=s&&Mu(u,S),op}function sp(){let e=br();const i=gn();return el()?fs():(e=e.parent,zo(e,!1)),i.firstCreatePass&&(nl(i,e),Qr(e)&&i.queries.elementEnd(e)),sp}function Af(e,i,s){return op(e,i,s),sp(),Af}function m_(){return jt()}function kf(e){return!!e&&"function"==typeof e.then}function p_(e){return!!e&&"function"==typeof e.subscribe}const f_=p_;function Pf(e,i,s,u){const f=jt(),x=gn(),S=br();return g_(x,f,f[sn],S,e,i,u),Pf}function Of(e,i){const s=br(),u=jt(),f=gn();return g_(f,u,qg(lr(f.data),s,u),s,e,i),Of}function g_(e,i,s,u,f,x,S){const O=Zr(u),J=e.firstCreatePass&&Yg(e),de=i[ji],Te=Wg(i);let qe=!0;if(3&u.type||S){const si=ir(u,i),Mi=S?S(si):si,Ni=Te.length,Vi=S?tn=>S(sr(tn[u.index])):u.index;let ri=null;if(!S&&O&&(ri=function Zb(e,i,s,u){const f=e.cleanup;if(null!=f)for(let x=0;x<f.length-1;x+=2){const S=f[x];if(S===s&&f[x+1]===u){const O=i[zn],z=f[x+2];return O.length>z?O[z]:null}"string"==typeof S&&(x+=2)}return null}(e,i,f,u.index)),null!==ri)(ri.__ngLastListenerFn__||ri).__ngNextListenerFn__=x,ri.__ngLastListenerFn__=x,qe=!1;else{x=y_(u,i,de,x,!1);const tn=s.listen(Mi,f,x);Te.push(x,tn),J&&J.push(f,Vi,Ni,Ni+1)}}else x=y_(u,i,de,x,!1);const _t=u.outputs;let Ht;if(qe&&null!==_t&&(Ht=_t[f])){const si=Ht.length;if(si)for(let Mi=0;Mi<si;Mi+=2){const Jn=i[Ht[Mi]][Ht[Mi+1]].subscribe(x),Zn=Te.length;Te.push(x,Jn),J&&J.push(f,u.index,Zn,-(Zn+1))}}}function __(e,i,s,u){try{return Lr(6,i,s),!1!==s(u)}catch(f){return Kg(e,f),!1}finally{Lr(7,i,s)}}function y_(e,i,s,u,f){return function x(S){if(S===Function)return u;Jm(e.componentOffset>-1?fn(e.index,i):i);let z=__(i,s,u,S),J=x.__ngNextListenerFn__;for(;J;)z=__(i,s,J,S)&&z,J=J.__ngNextListenerFn__;return f&&!1===z&&(S.preventDefault(),S.returnValue=!1),z}}function v_(e=1){return function ua(e){return(en.lFrame.contextLView=function go(e,i){for(;e>0;)i=i[Cs],e--;return i}(e,en.lFrame.contextLView))[ji]}(e)}function Wb(e,i){let s=null;const u=function wu(e){const i=e.attrs;if(null!=i){const s=i.indexOf(5);if(!(1&s))return i[s+1]}return null}(e);for(let f=0;f<i.length;f++){const x=i[f];if("*"!==x){if(null===u?Kc(e,x,!0):mf(u,x))return f}else s=f}return s}function b_(e){const i=jt()[or][Fn];if(!i.projection){const u=i.projection=A(e?e.length:1,null),f=u.slice();let x=i.child;for(;null!==x;){const S=e?Wb(x,e):0;null!==S&&(f[S]?f[S].projectionNext=x:u[S]=x,f[S]=x),x=x.next}}}function x_(e,i=0,s){const u=jt(),f=gn(),x=os(f,Wn+e,16,null,s||null);null===x.projection&&(x.projection=i),fs(),32!=(32&x.flags)&&function $p(e,i,s){wm(i[sn],0,i,s,rh(e,s,i),vm(s.parent||i[Fn],s,i))}(f,u,x)}function Rf(e,i,s){return Ff(e,"",i,"",s),Rf}function Ff(e,i,s,u,f){const x=jt(),S=Au(x,i,s,u);return S!==y&&_a(gn(),Gn(),x,e,S,x[sn],f,!1),Ff}function ap(e,i){return e<<17|i<<2}function va(e){return e>>17&32767}function D_(e){return 2|e}function Ru(e){return(131068&e)>>2}function Uf(e,i){return-131069&e|i<<2}function lp(e){return 1|e}function T_(e,i,s,u,f){const x=e[s+1],S=null===i;let O=u?va(x):Ru(x),z=!1;for(;0!==O&&(!1===z||S);){const de=e[O+1];qb(e[O],i)&&(z=!0,e[O+1]=u?lp(de):D_(de)),O=u?va(de):Ru(de)}z&&(e[s+1]=u?D_(x):lp(x))}function qb(e,i){return null===e||null==i||(Array.isArray(e)?e[1]:e)===i||!(!Array.isArray(e)||"string"!=typeof i)&&ut(e,i)>=0}const as={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function I_(e){return e.substring(as.key,as.keyEnd)}function Kb(e){return e.substring(as.value,as.valueEnd)}function k_(e,i){const s=as.textEnd;return s===i?-1:(i=as.keyEnd=function qw(e,i,s){for(;i<s&&e.charCodeAt(i)>32;)i++;return i}(e,as.key=i,s),fl(e,i,s))}function Xb(e,i){const s=as.textEnd;let u=as.key=fl(e,i,s);return s===u?-1:(u=as.keyEnd=function Jb(e,i,s){let u;for(;i<s&&(45===(u=e.charCodeAt(i))||95===u||(-33&u)>=65&&(-33&u)<=90||u>=48&&u<=57);)i++;return i}(e,u,s),u=O_(e,u,s),u=as.value=fl(e,u,s),u=as.valueEnd=function Qb(e,i,s){let u=-1,f=-1,x=-1,S=i,O=S;for(;S<s;){const z=e.charCodeAt(S++);if(59===z)return O;34===z||39===z?O=S=R_(e,z,S,s):i===S-4&&85===x&&82===f&&76===u&&40===z?O=S=R_(e,41,S,s):z>32&&(O=S),x=f,f=u,u=-33&z}return O}(e,u,s),O_(e,u,s))}function P_(e){as.key=0,as.keyEnd=0,as.value=0,as.valueEnd=0,as.textEnd=e.length}function fl(e,i,s){for(;i<s&&e.charCodeAt(i)<=32;)i++;return i}function O_(e,i,s,u){return(i=fl(e,i,s))<s&&i++,i}function R_(e,i,s,u){let f=-1,x=s;for(;x<u;){const S=e.charCodeAt(x++);if(S==i&&92!==f)return x;f=92==S&&92===f?0:S}throw new Error}function jf(e,i,s){return Il(e,i,s,!1),jf}function ka(e,i){return Il(e,i,null,!0),ka}function gl(e){Al(o0,F_,e,!1)}function F_(e,i){for(let s=function Yw(e){return P_(e),Xb(e,fl(e,0,as.textEnd))}(i);s>=0;s=Xb(i,s))o0(e,I_(i),Kb(i))}function L_(e){Al(s0,qa,e,!0)}function qa(e,i){for(let s=function A_(e){return P_(e),k_(e,fl(e,0,as.textEnd))}(i);s>=0;s=k_(i,s))le(e,I_(i),!0)}function Il(e,i,s,u){const f=jt(),x=gn(),S=In(2);x.firstUpdatePass&&z_(x,e,S,u),i!==y&&ra(f,S,i)&&V_(x,x.data[qn()],f,f[sn],e,f[S+1]=function U_(e,i){return null==e||""===e||("string"==typeof i?e+=i:"object"==typeof e&&(e=Ae(Fs(e)))),e}(i,s),u,S)}function Al(e,i,s,u){const f=gn(),x=In(2);f.firstUpdatePass&&z_(f,null,x,u);const S=jt();if(s!==y&&ra(S,x,s)){const O=f.data[qn()];if(cp(O,u)&&!N_(f,x)){let z=u?O.classesWithoutHost:O.stylesWithoutHost;null!==z&&(s=Ve(z,s||"")),pl(f,O,S,s,u)}else!function $f(e,i,s,u,f,x,S,O){f===y&&(f=ni);let z=0,J=0,de=0<f.length?f[0]:null,Te=0<x.length?x[0]:null;for(;null!==de||null!==Te;){const qe=z<f.length?f[z+1]:void 0,_t=J<x.length?x[J+1]:void 0;let si,Ht=null;de===Te?(z+=2,J+=2,qe!==_t&&(Ht=Te,si=_t)):null===Te||null!==de&&de<Te?(z+=2,Ht=de):(J+=2,Ht=Te,si=_t),null!==Ht&&V_(e,i,s,u,Ht,si,S,O),de=z<f.length?f[z]:null,Te=J<x.length?x[J]:null}}(f,O,S,S[sn],S[x+1],S[x+1]=function B_(e,i,s){if(null==s||""===s)return ni;const u=[],f=Fs(s);if(Array.isArray(f))for(let x=0;x<f.length;x++)e(u,f[x],!0);else if("object"==typeof f)for(const x in f)f.hasOwnProperty(x)&&e(u,x,f[x]);else"string"==typeof f&&i(u,f);return u}(e,i,s),u,x)}}function N_(e,i){return i>=e.expandoStartIndex}function z_(e,i,s,u){const f=e.data;if(null===f[s+1]){const x=f[qn()],S=N_(e,s);cp(x,u)&&null===i&&!S&&(i=!1),i=function e0(e,i,s,u){const f=lr(e);let x=u?i.residualClasses:i.residualStyles;if(null===f)0===(u?i.classBindings:i.styleBindings)&&(s=Bh(s=Hf(null,e,i,s,u),i.attrs,u),x=null);else{const S=i.directiveStylingLast;if(-1===S||e[S]!==f)if(s=Hf(f,e,i,s,u),null===x){let z=function t0(e,i,s){const u=s?i.classBindings:i.styleBindings;if(0!==Ru(u))return e[va(u)]}(e,i,u);void 0!==z&&Array.isArray(z)&&(z=Hf(null,e,i,z[1],u),z=Bh(z,i.attrs,u),function n0(e,i,s,u){e[va(s?i.classBindings:i.styleBindings)]=u}(e,i,u,z))}else x=function r0(e,i,s){let u;const f=i.directiveEnd;for(let x=1+i.directiveStylingLast;x<f;x++)u=Bh(u,e[x].hostAttrs,s);return Bh(u,i.attrs,s)}(e,i,u)}return void 0!==x&&(u?i.residualClasses=x:i.residualStyles=x),s}(f,x,i,u),function Ww(e,i,s,u,f,x){let S=x?i.classBindings:i.styleBindings,O=va(S),z=Ru(S);e[u]=s;let de,J=!1;if(Array.isArray(s)?(de=s[1],(null===de||ut(s,de)>0)&&(J=!0)):de=s,f)if(0!==z){const qe=va(e[O+1]);e[u+1]=ap(qe,O),0!==qe&&(e[qe+1]=Uf(e[qe+1],u)),e[O+1]=function $w(e,i){return 131071&e|i<<17}(e[O+1],u)}else e[u+1]=ap(O,0),0!==O&&(e[O+1]=Uf(e[O+1],u)),O=u;else e[u+1]=ap(z,0),0===O?O=u:e[z+1]=Uf(e[z+1],u),z=u;J&&(e[u+1]=D_(e[u+1])),T_(e,de,u,!0),T_(e,de,u,!1),function Yb(e,i,s,u,f){const x=f?e.residualClasses:e.residualStyles;null!=x&&"string"==typeof i&&ut(x,i)>=0&&(s[u+1]=lp(s[u+1]))}(i,de,e,u,x),S=ap(O,z),x?i.classBindings=S:i.styleBindings=S}(f,x,i,s,S,u)}}function Hf(e,i,s,u,f){let x=null;const S=s.directiveEnd;let O=s.directiveStylingLast;for(-1===O?O=s.directiveStart:O++;O<S&&(x=i[O],u=Bh(u,x.hostAttrs,f),x!==e);)O++;return null!==e&&(s.directiveStylingLast=O),u}function Bh(e,i,s){const u=s?1:2;let f=-1;if(null!==i)for(let x=0;x<i.length;x++){const S=i[x];"number"==typeof S?f=S:f===u&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),le(e,S,!!s||i[++x]))}return void 0===e?null:e}function o0(e,i,s){le(e,i,Fs(s))}function s0(e,i,s){const u=String(i);""!==u&&!u.includes(" ")&&le(e,u,s)}function V_(e,i,s,u,f,x,S,O){if(!(3&i.type))return;const z=e.data,J=z[O+1],de=function S_(e){return 1==(1&e)}(J)?Vh(z,i,s,f,Ru(J),S):void 0;Uh(de)||(Uh(x)||function Vf(e){return 2==(2&e)}(J)&&(x=Vh(z,null,s,f,O,S)),function Gp(e,i,s,u,f){if(i)f?e.addClass(s,u):e.removeClass(s,u);else{let x=-1===u.indexOf("-")?void 0:Xn.DashCase;null==f?e.removeStyle(s,u,x):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),x|=Xn.Important),e.setStyle(s,u,f,x))}}(u,S,Ur(qn(),s),f,x))}function Vh(e,i,s,u,f,x){const S=null===i;let O;for(;f>0;){const z=e[f],J=Array.isArray(z),de=J?z[1]:z,Te=null===de;let qe=s[f+1];qe===y&&(qe=Te?ni:void 0);let _t=Te?Ke(qe,u):de===u?qe:void 0;if(J&&!Uh(_t)&&(_t=Ke(z,u)),Uh(_t)&&(O=_t,S))return O;const Ht=e[f+1];f=S?va(Ht):Ru(Ht)}if(null!==i){let z=x?i.residualClasses:i.residualStyles;null!=z&&(O=Ke(z,u))}return O}function Uh(e){return void 0!==e}function cp(e,i){return 0!=(e.flags&(i?8:16))}function Gf(e,i=""){const s=jt(),u=gn(),f=e+Wn,x=u.firstCreatePass?os(u,f,1,i,null):u.data[f],S=s[f]=function Xd(e,i){return e.createText(i)}(s[sn],i);Yl(u,s,S,x),zo(x,!1)}function dp(e){return up("",e,""),dp}function up(e,i,s){const u=jt(),f=Au(u,e,i,s);return f!==y&&function Tc(e,i,s){const u=Ur(i,e);!function Qu(e,i,s){e.setValue(i,s)}(e[sn],u,s)}(u,qn(),f),up}function Wf(e,i,s){Al(le,qa,Au(jt(),e,i,s),!0)}function qf(e,i,s){const u=jt();return ra(u,gs(),i)&&_a(gn(),Gn(),u,e,i,u[sn],s,!0),qf}function Kf(e,i,s){const u=jt();if(ra(u,gs(),i)){const x=gn(),S=Gn();_a(x,S,u,e,i,qg(lr(x.data),S,u),s,!0)}return Kf}const Bd=void 0;var b0=["en",[["a","p"],["AM","PM"],Bd],[["AM","PM"],Bd,Bd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bd,"{1} 'at' {0}",Bd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function v0(e){const s=Math.floor(Math.abs(e)),u=e.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===u?1:5}];let Fu={};function jh(e){const i=function x0(e){return e.toLowerCase().replace(/_/g,"-")}(e);let s=sy(i);if(s)return s;const u=i.split("-")[0];if(s=sy(u),s)return s;if("en"===u)return b0;throw new wt(701,!1)}function hp(e){return jh(e)[ln.PluralCase]}function sy(e){return e in Fu||(Fu[e]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[e]),Fu[e]}var ln=(()=>((ln=ln||{})[ln.LocaleId=0]="LocaleId",ln[ln.DayPeriodsFormat=1]="DayPeriodsFormat",ln[ln.DayPeriodsStandalone=2]="DayPeriodsStandalone",ln[ln.DaysFormat=3]="DaysFormat",ln[ln.DaysStandalone=4]="DaysStandalone",ln[ln.MonthsFormat=5]="MonthsFormat",ln[ln.MonthsStandalone=6]="MonthsStandalone",ln[ln.Eras=7]="Eras",ln[ln.FirstDayOfWeek=8]="FirstDayOfWeek",ln[ln.WeekendRange=9]="WeekendRange",ln[ln.DateFormat=10]="DateFormat",ln[ln.TimeFormat=11]="TimeFormat",ln[ln.DateTimeFormat=12]="DateTimeFormat",ln[ln.NumberSymbols=13]="NumberSymbols",ln[ln.NumberFormats=14]="NumberFormats",ln[ln.CurrencyCode=15]="CurrencyCode",ln[ln.CurrencySymbol=16]="CurrencySymbol",ln[ln.CurrencyName=17]="CurrencyName",ln[ln.Currencies=18]="Currencies",ln[ln.Directionality=19]="Directionality",ln[ln.PluralCase=20]="PluralCase",ln[ln.ExtraData=21]="ExtraData",ln))();const Lu="en-US";let ay=Lu;function tg(e,i,s,u,f){if(e=ke(e),Array.isArray(e))for(let x=0;x<e.length;x++)tg(e[x],i,s,u,f);else{const x=gn(),S=jt();let O=Cc(e)?e:ke(e.provide),z=mu(e);const J=br(),de=1048575&J.providerIndexes,Te=J.directiveStart,qe=J.providerIndexes>>20;if(Cc(e)||!e.multi){const _t=new Ge(z,f,_r),Ht=rg(O,i,f?de:de+qe,Te);-1===Ht?(gr(Ha(J,S),x,O),ig(x,e,i.length),i.push(O),J.directiveStart++,J.directiveEnd++,f&&(J.providerIndexes+=1048576),s.push(_t),S.push(_t)):(s[Ht]=_t,S[Ht]=_t)}else{const _t=rg(O,i,de+qe,Te),Ht=rg(O,i,de,de+qe),Mi=Ht>=0&&s[Ht];if(f&&!Mi||!f&&!(_t>=0&&s[_t])){gr(Ha(J,S),x,O);const Ni=function hx(e,i,s,u,f){const x=new Ge(e,s,_r);return x.multi=[],x.index=i,x.componentProviders=0,ng(x,f,u&&!s),x}(f?ux:dx,s.length,f,u,z);!f&&Mi&&(s[Ht].providerFactory=Ni),ig(x,e,i.length,0),i.push(O),J.directiveStart++,J.directiveEnd++,f&&(J.providerIndexes+=1048576),s.push(Ni),S.push(Ni)}else ig(x,e,_t>-1?_t:Ht,ng(s[f?Ht:_t],z,!f&&u));!f&&u&&Mi&&s[Ht].componentProviders++}}}function ig(e,i,s,u){const f=Cc(i),x=function Vm(e){return!!e.useClass}(i);if(f||x){const z=(x?ke(i.useClass):i).prototype.ngOnDestroy;if(z){const J=e.destroyHooks||(e.destroyHooks=[]);if(!f&&i.multi){const de=J.indexOf(s);-1===de?J.push(s,[u,z]):J[de+1].push(u,z)}else J.push(s,z)}}}function ng(e,i,s){return s&&e.componentProviders++,e.multi.push(i)-1}function rg(e,i,s,u){for(let f=s;f<u;f++)if(i[f]===e)return f;return-1}function dx(e,i,s,u){return og(this.multi,[])}function ux(e,i,s,u){const f=this.multi;let x;if(this.providerFactory){const S=this.providerFactory.componentProviders,O=To(s,s[Ri],this.providerFactory.index,u);x=O.slice(0,S),og(f,x);for(let z=S;z<O.length;z++)x.push(O[z])}else x=[],og(f,x);return x}function og(e,i){for(let s=0;s<e.length;s++)i.push((0,e[s])());return i}function Ry(e,i=[]){return s=>{s.providersResolver=(u,f)=>function cx(e,i,s){const u=gn();if(u.firstCreatePass){const f=Br(e);tg(s,u.data,u.blueprint,f,!0),tg(i,u.data,u.blueprint,f,!1)}}(u,f?f(e):e,i)}}class zu{}class Fy{}function mx(e,i){return new Ly(e,i??null)}class Ly extends zu{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xg(this);const u=Or(i);this._bootstrapComponents=hl(u.bootstrap),this._r3Injector=dt(i,s,[{provide:zu,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver}],Ae(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class sg extends Fy{constructor(i){super(),this.moduleType=i}create(i){return new Ly(this.moduleType,i)}}class px extends zu{constructor(i,s,u){super(),this.componentFactoryResolver=new Xg(this),this.instance=null;const f=new Md([...i,{provide:zu,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver}],s||Kl(),u,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function ag(e,i,s=null){return new px(e,i,s).injector}let fx=(()=>{class e{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const u=wd(0,s.type),f=u.length>0?ag([u],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,f)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Je({token:e,providedIn:"environment",factory:()=>new e(Se(ta))}),e})();function Ny(e){e.getStandaloneInjector=i=>i.get(fx).getOrCreateStandaloneInjector(e)}function $y(e,i,s){const u=qr()+e,f=jt();return f[u]===y?rc(f,u,s?i.call(s):i()):function Nh(e,i){return e[i]}(f,u)}function Gy(e,i,s,u){return qy(jt(),qr(),e,i,s,u)}function Zy(e,i,s,u,f){return function Ky(e,i,s,u,f,x,S){const O=i+s;return Fd(e,O,f,x)?rc(e,O+2,S?u.call(S,f,x):u(f,x)):Yh(e,O+2)}(jt(),qr(),e,i,s,u,f)}function Wy(e,i,s,u,f,x){return function Xy(e,i,s,u,f,x,S,O){const z=i+s;return function kr(e,i,s,u,f){const x=Fd(e,i,s,u);return ra(e,i+2,f)||x}(e,z,f,x,S)?rc(e,z+3,O?u.call(O,f,x,S):u(f,x,S)):Yh(e,z+3)}(jt(),qr(),e,i,s,u,f,x)}function Yy(e,i,s,u){return function Qy(e,i,s,u,f,x){let S=i+s,O=!1;for(let z=0;z<f.length;z++)ra(e,S++,f[z])&&(O=!0);return O?rc(e,S,u.apply(x,f)):Yh(e,S)}(jt(),qr(),e,i,s,u)}function Yh(e,i){const s=e[i];return s===y?void 0:s}function qy(e,i,s,u,f,x){const S=i+s;return ra(e,S,f)?rc(e,S+1,x?u.call(x,f):u(f)):Yh(e,S+1)}function ev(e,i){const s=gn();let u;const f=e+Wn;s.firstCreatePass?(u=function Ix(e,i){if(i)for(let s=i.length-1;s>=0;s--){const u=i[s];if(e===u.name)return u}}(i,s.pipeRegistry),s.data[f]=u,u.onDestroy&&(s.destroyHooks??(s.destroyHooks=[])).push(f,u.onDestroy)):u=s.data[f];const x=u.factory||(u.factory=Yr(u.type)),S=Ce(_r);try{const O=Ua(!1),z=x();return Ua(O),function Tf(e,i,s,u){s>=e.data.length&&(e.data[s]=null,e.blueprint[s]=null),i[s]=u}(s,jt(),f,z),z}finally{Ce(S)}}function tv(e,i,s){const u=e+Wn,f=jt(),x=Lo(f,u);return function qh(e,i){return e[Ri].data[i].pure}(f,u)?qy(f,qr(),i,x.transform,s,x):x.transform(s)}function cg(e){return i=>{setTimeout(e,void 0,i)}}const sc=class Rx extends w.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,u){let f=i,x=s||(()=>null),S=u;if(i&&"object"==typeof i){const z=i;f=z.next?.bind(z),x=z.error?.bind(z),S=z.complete?.bind(z)}this.__isAsync&&(x=cg(x),f&&(f=cg(f)),S&&(S=cg(S)));const O=super.subscribe({next:f,error:x,complete:S});return i instanceof a.w0&&i.add(O),O}};function Fx(){return this._results[Symbol.iterator]()}class _p{get changes(){return this._changes||(this._changes=new sc)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=_p.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=Fx)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const u=this;u.dirty=!1;const f=function bt(e){return e.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function He(e,i,s){if(e.length!==i.length)return!1;for(let u=0;u<e.length;u++){let f=e[u],x=i[u];if(s&&(f=s(f),x=s(x)),x!==f)return!1}return!0}(u._results,f,s))&&(u._results=f,u.length=f.length,u.last=f[this.length-1],u.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Kh=(()=>{class e{}return e.__NG_ELEMENT_ID__=iv,e})();const Lx=Kh,Nx=class extends Lx{constructor(i,s,u){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=u}createEmbeddedView(i,s){const u=this._declarationTContainer.tView,f=zs(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,s||null);f[js]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[Jr];return null!==S&&(f[Jr]=S.createEmbeddedView(u)),Bs(u,f,i),new Fh(f)}};function iv(){return yp(br(),jt())}function yp(e,i){return 4&e.type?new Nx(i,e,Yc(e,i)):null}let vp=(()=>{class e{}return e.__NG_ELEMENT_ID__=zx,e})();function zx(){return ug(br(),jt())}const Bx=vp,nv=class extends Bx{constructor(i,s,u){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=u}get element(){return Yc(this._hostTNode,this._hostLView)}get injector(){return new co(this._hostTNode,this._hostLView)}get parentInjector(){const i=jn(this._hostTNode,this._hostLView);if(_o(i)){const s=es(i,this._hostLView),u=to(i);return new co(s[Ri].data[u+8],s)}return new co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=rv(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(i,s,u){let f,x;"number"==typeof u?f=u:null!=u&&(f=u.index,x=u.injector);const S=i.createEmbeddedView(s||{},x);return this.insert(S,f),S}createComponent(i,s,u,f,x){const S=i&&!function Et(e){return"function"==typeof e}(i);let O;if(S)O=s;else{const Te=s||{};O=Te.index,u=Te.injector,f=Te.projectableNodes,x=Te.environmentInjector||Te.ngModuleRef}const z=S?i:new Lh(Qi(i)),J=u||this.parentInjector;if(!x&&null==z.ngModule){const qe=(S?J:this.parentInjector).get(ta,null);qe&&(x=qe)}const de=z.create(J,f,void 0,x);return this.insert(de.hostView,O),de}insert(i,s){const u=i._lView,f=u[Ri];if(function ps(e){return Fr(e[tr])}(u)){const de=this.indexOf(i);if(-1!==de)this.detach(de);else{const Te=u[tr],qe=new nv(Te,Te[Fn],Te[tr]);qe.detach(qe.indexOf(i))}}const x=this._adjustIndex(s),S=this._lContainer;!function Zl(e,i,s,u){const f=dr+u,x=s.length;u>0&&(s[f-1][$n]=i),u<x-dr?(i[$n]=s[f],ii(s,dr+u,i)):(s.push(i),i[$n]=null),i[tr]=s;const S=i[js];null!==S&&s!==S&&function Hp(e,i){const s=e[ao];i[or]!==i[tr][tr][or]&&(e[zr]=!0),null===s?e[ao]=[i]:s.push(i)}(S,i);const O=i[Jr];null!==O&&O.insertView(e),i[Ji]|=64}(f,u,S,x);const O=sh(x,S),z=u[sn],J=md(z,S[Hs]);return null!==J&&function fm(e,i,s,u,f,x){u[Rn]=f,u[Fn]=i,_c(e,u,s,1,f,x)}(f,S[Fn],z,u,J,O),i.attachToViewContainerRef(),ii(dg(S),x,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=rv(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),u=ih(this._lContainer,s);u&&(I(dg(this._lContainer),s),Qd(u[Ri],u))}detach(i){const s=this._adjustIndex(i,-1),u=ih(this._lContainer,s);return u&&null!=I(dg(this._lContainer),s)?new Fh(u):null}_adjustIndex(i,s=0){return i??this.length+s}};function rv(e){return e[Mo]}function dg(e){return e[Mo]||(e[Mo]=[])}function ug(e,i){let s;const u=i[e.index];if(Fr(u))s=u;else{let f;if(8&e.type)f=sr(u);else{const x=i[sn];f=x.createComment("");const S=ir(e,i);pc(x,md(x,S),f,function Lc(e,i){return e.nextSibling(i)}(x,S),!1)}i[e.index]=s=Zg(u,i,f,e),Xm(i,s)}return new nv(s,e,i)}class Xh{constructor(i){this.queryList=i,this.matches=null}clone(){return new Xh(this.queryList)}setDirty(){this.queryList.setDirty()}}class hg{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const u=null!==i.contentQueries?i.contentQueries[0]:s.length,f=[];for(let x=0;x<u;x++){const S=s.getByIndex(x);f.push(this.queries[S.indexInDeclarationView].clone())}return new hg(f)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==pv(i,s).matches&&this.queries[s].setDirty()}}class ov{constructor(i,s,u=null){this.predicate=i,this.flags=s,this.read=u}}class mg{constructor(i=[]){this.queries=i}elementStart(i,s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let u=0;u<this.length;u++){const f=null!==s?s.length:0,x=this.getByIndex(u).embeddedTView(i,f);x&&(x.indexInDeclarationView=u,null!==s?s.push(x):s=[x])}return null!==s?new mg(s):null}template(i,s){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class sv{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new sv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==s;)u=u.parent;return s===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const u=this.metadata.predicate;if(Array.isArray(u))for(let f=0;f<u.length;f++){const x=u[f];this.matchTNodeWithReadOption(i,s,av(s,x)),this.matchTNodeWithReadOption(i,s,$a(s,i,x,!1,!1))}else u===Kh?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,$a(s,i,u,!1,!1))}matchTNodeWithReadOption(i,s,u){if(null!==u){const f=this.metadata.read;if(null!==f)if(f===Dc||f===vp||f===Kh&&4&s.type)this.addMatch(s.index,-2);else{const x=$a(s,i,f,!1,!1);null!==x&&this.addMatch(s.index,x)}else this.addMatch(s.index,u)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function av(e,i){const s=e.localNames;if(null!==s)for(let u=0;u<s.length;u+=2)if(s[u]===i)return s[u+1];return null}function Ux(e,i,s,u){return-1===s?function Vx(e,i){return 11&e.type?Yc(e,i):4&e.type?yp(e,i):null}(i,e):-2===s?function jx(e,i,s){return s===Dc?Yc(i,e):s===Kh?yp(i,e):s===vp?ug(i,e):void 0}(e,i,u):To(e,e[Ri],s,i)}function lv(e,i,s,u){const f=i[Jr].queries[u];if(null===f.matches){const x=e.data,S=s.matches,O=[];for(let z=0;z<S.length;z+=2){const J=S[z];O.push(J<0?null:Ux(i,x[J],S[z+1],s.metadata.read))}f.matches=O}return f.matches}function cv(e,i,s,u){const f=e.queries.getByIndex(s),x=f.matches;if(null!==x){const S=lv(e,i,f,s);for(let O=0;O<x.length;O+=2){const z=x[O];if(z>0)u.push(S[O/2]);else{const J=x[O+1],de=i[-z];for(let Te=dr;Te<de.length;Te++){const qe=de[Te];qe[js]===qe[tr]&&cv(qe[Ri],qe,J,u)}if(null!==de[ao]){const Te=de[ao];for(let qe=0;qe<Te.length;qe++){const _t=Te[qe];cv(_t[Ri],_t,J,u)}}}}}return u}function pg(e){const i=jt(),s=gn(),u=Ta();tl(u+1);const f=pv(s,u);if(e.dirty&&function La(e){return 4==(4&e[Ji])}(i)===(2==(2&f.metadata.flags))){if(null===f.matches)e.reset([]);else{const x=f.crossesNgTemplate?cv(s,i,u,[]):lv(s,i,f,u);e.reset(x,Jl),e.notifyOnChanges()}return!0}return!1}function fg(e,i,s){const u=gn();u.firstCreatePass&&(mv(u,new ov(e,i,s),-1),2==(2&i)&&(u.staticViewQueries=!0)),hv(u,jt(),i)}function dv(e,i,s,u){const f=gn();if(f.firstCreatePass){const x=br();mv(f,new ov(i,s,u),x.index),function $x(e,i){const s=e.contentQueries||(e.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(e.queries.length-1,i)}(f,e),2==(2&s)&&(f.staticContentQueries=!0)}hv(f,jt(),s)}function uv(){return function Hx(e,i){return e[Jr].queries[i].queryList}(jt(),Ta())}function hv(e,i,s){const u=new _p(4==(4&s));Su(e,i,u,u.destroy),null===i[Jr]&&(i[Jr]=new hg),i[Jr].queries.push(new Xh(u))}function mv(e,i,s){null===e.queries&&(e.queries=new mg),e.queries.track(new sv(i,s))}function pv(e,i){return e.queries.getByIndex(i)}function fv(e,i){return yp(e,i)}function gg(e){return!!Or(e)}function Cp(...e){}const kv=new E("Application Initializer");let Ep=(()=>{class e{constructor(s){this.appInits=s,this.resolve=Cp,this.reject=Cp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const x=this.appInits[f]();if(kf(x))s.push(x);else if(f_(x)){const S=new Promise((O,z)=>{x.subscribe({complete:O,error:z})});s.push(S)}}Promise.all(s).then(()=>{u()}).catch(f=>{this.reject(f)}),0===s.length&&u(),this.initialized=!0}}return e.\u0275fac=function(s){return new(s||e)(Se(kv,8))},e.\u0275prov=Je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Pv=new E("AppId",{providedIn:"root",factory:function Ov(){return`${Cg()}${Cg()}${Cg()}`}});function Cg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rv=new E("Platform Initializer"),lw=new E("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cw=new E("AnimationModuleType");let dw=(()=>{class e{log(s){console.log(s)}warn(s){console.warn(s)}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Je({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Mp=new E("LocaleId",{providedIn:"root",factory:()=>me(Mp,wi.Optional|wi.SkipSelf)||function uw(){return typeof $localize<"u"&&$localize.locale||Lu}()}),Fv=new E("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class hw{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let mw=(()=>{class e{compileModuleSync(s){return new sg(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const u=this.compileModuleSync(s),x=hl(Or(s).declarations).reduce((S,O)=>{const z=Qi(O);return z&&S.push(new Lh(z)),S},[]);return new hw(u,x)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const gw=(()=>Promise.resolve(0))();function Mg(e){typeof Zone>"u"?gw.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ka{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sc(!1),this.onMicrotaskEmpty=new sc(!1),this.onStable=new sc(!1),this.onError=new sc(!1),typeof Zone>"u")throw new wt(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!u&&s,f.shouldCoalesceRunChangeDetection=u,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function _w(){let e=xt.requestAnimationFrame,i=xt.cancelAnimationFrame;if(typeof Zone<"u"&&e&&i){const s=e[Zone.__symbol__("OriginalDelegate")];s&&(e=s);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function xw(e){const i=()=>{!function bw(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(xt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Sg(e),e.isCheckStableRunning=!0,Dg(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Sg(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,u,f,x,S,O)=>{try{return zv(e),s.invokeTask(f,x,S,O)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||e.shouldCoalesceRunChangeDetection)&&i(),Bv(e)}},onInvoke:(s,u,f,x,S,O,z)=>{try{return zv(e),s.invoke(f,x,S,O,z)}finally{e.shouldCoalesceRunChangeDetection&&i(),Bv(e)}},onHasTask:(s,u,f,x)=>{s.hasTask(f,x),u===f&&("microTask"==x.change?(e._hasPendingMicrotasks=x.microTask,Sg(e),Dg(e)):"macroTask"==x.change&&(e.hasPendingMacrotasks=x.macroTask))},onHandleError:(s,u,f,x)=>(s.handleError(f,x),e.runOutsideAngular(()=>e.onError.emit(x)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ka.isInAngularZone())throw new wt(909,!1)}static assertNotInAngularZone(){if(Ka.isInAngularZone())throw new wt(909,!1)}run(i,s,u){return this._inner.run(i,s,u)}runTask(i,s,u,f){const x=this._inner,S=x.scheduleEventTask("NgZoneEvent: "+f,i,vw,Cp,Cp);try{return x.runTask(S,s,u)}finally{x.cancelTask(S)}}runGuarded(i,s,u){return this._inner.runGuarded(i,s,u)}runOutsideAngular(i){return this._outer.run(i)}}const vw={};function Dg(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Sg(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function zv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Bv(e){e._nesting--,Dg(e)}class ww{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sc,this.onMicrotaskEmpty=new sc,this.onStable=new sc,this.onError=new sc}run(i,s,u){return i.apply(s,u)}runGuarded(i,s,u){return i.apply(s,u)}runOutsideAngular(i){return i()}runTask(i,s,u,f){return i.apply(s,u)}}const Vv=new E(""),Uv=new E("");let Tg,Cw=(()=>{class e{constructor(s,u,f){this._ngZone=s,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Tg||(function Ew(e){Tg=e}(f),f.addToWindow(u)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ka.assertNotInAngularZone(),Mg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Mg(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(s)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,u,f){let x=-1;u&&u>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==x),s(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:s,timeoutId:x,updateCb:f})}whenStable(s,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,u,f){return[]}}return e.\u0275fac=function(s){return new(s||e)(Se(Ka),Se(jv),Se(Uv))},e.\u0275prov=Je({token:e,factory:e.\u0275fac}),e})(),jv=(()=>{class e{constructor(){this._applications=new Map}registerApplication(s,u){this._applications.set(s,u)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,u=!0){return Tg?.findTestabilityInTree(this,s,u)??null}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Je({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Ac=!1;let Qc=null;const Hv=new E("AllowMultipleToken"),Ig=new E("PlatformDestroyListeners"),$v=new E("appBootstrapListener");class Zv{constructor(i,s){this.name=i,this.token=s}}function Yv(e,i,s=[]){const u=`Platform: ${i}`,f=new E(u);return(x=[])=>{let S=kg();if(!S||S.injector.get(Hv,!1)){const O=[...s,...x,{provide:f,useValue:!0}];e?e(O):function Dw(e){if(Qc&&!Qc.get(Hv,!1))throw new wt(400,!1);Qc=e;const i=e.get(Xv);(function Ag(e){const i=e.get(Rv,null);i&&i.forEach(s=>s())})(e)}(function Kv(e=[],i){return gt.create({name:i,providers:[{provide:Ed,useValue:"platform"},{provide:Ig,useValue:new Set([()=>Qc=null])},...e]})}(O,u))}return function qv(e){const i=kg();if(!i)throw new wt(401,!1);return i}()}}function kg(){return Qc?.get(Xv)??null}let Xv=(()=>{class e{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,u){const f=function Qv(e,i){let s;return s="noop"===e?new ww:("zone.js"===e?void 0:e)||new Ka(i),s}(u?.ngZone,function Jv(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(u)),x=[{provide:Ka,useValue:f}];return f.run(()=>{const S=gt.create({providers:x,parent:this.injector,name:s.moduleType.name}),O=s.create(S),z=O.injector.get(Ql,null);if(!z)throw new wt(402,!1);return f.runOutsideAngular(()=>{const J=f.onError.subscribe({next:de=>{z.handleError(de)}});O.onDestroy(()=>{Sp(this._modules,O),J.unsubscribe()})}),function eb(e,i,s){try{const u=s();return kf(u)?u.catch(f=>{throw i.runOutsideAngular(()=>e.handleError(f)),f}):u}catch(u){throw i.runOutsideAngular(()=>e.handleError(u)),u}}(z,f,()=>{const J=O.injector.get(Ep);return J.runInitializers(),J.donePromise.then(()=>(function ly(e){zt(e,"Expected localeId to be defined"),"string"==typeof e&&(ay=e.toLowerCase().replace(/_/g,"-"))}(O.injector.get(Mp,Lu)||Lu),this._moduleDoBootstrap(O),O))})})}bootstrapModule(s,u=[]){const f=tb({},u);return function Mw(e,i,s){const u=new sg(s);return Promise.resolve(u)}(0,0,s).then(x=>this.bootstrapModuleFactory(x,f))}_moduleDoBootstrap(s){const u=s.injector.get(Dp);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new wt(-403,!1);s.instance.ngDoBootstrap(u)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new wt(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const s=this._injector.get(Ig,null);s&&(s.forEach(u=>u()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(s){return new(s||e)(Se(gt))},e.\u0275prov=Je({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function tb(e,i){return Array.isArray(i)?i.reduce(tb,e):{...e,...i}}let Dp=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,u,f){this._zone=s,this._injector=u,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new se.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),S=new se.y(O=>{let z;this._zone.runOutsideAngular(()=>{z=this._zone.onStable.subscribe(()=>{Ka.assertNotInAngularZone(),Mg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const J=this._zone.onUnstable.subscribe(()=>{Ka.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{z.unsubscribe(),J.unsubscribe()}});this.isStable=(0,_.T)(x,S.pipe((0,Ze.B)()))}bootstrap(s,u){const f=s instanceof Wc;if(!this._injector.get(Ep).done){!f&&Cn(s);throw new wt(405,Ac)}let S;S=f?s:this._injector.get(Mc).resolveComponentFactory(s),this.componentTypes.push(S.componentType);const O=function Gv(e){return e.isBoundToModule}(S)?void 0:this._injector.get(zu),J=S.create(gt.NULL,[],u||S.selector,O),de=J.location.nativeElement,Te=J.injector.get(Vv,null);return Te?.registerApplication(de),J.onDestroy(()=>{this.detachView(J.hostView),Sp(this.components,J),Te?.unregisterApplication(de)}),this._loadComponent(J),J}tick(){if(this._runningTick)throw new wt(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const u=s;this._views.push(u),u.attachToAppRef(this)}detachView(s){const u=s;Sp(this._views,u),u.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const u=this._injector.get($v,[]);u.push(...this._bootstrapListeners),u.forEach(f=>f(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Sp(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new wt(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(s){return new(s||e)(Se(Ka),Se(ta),Se(Ql))},e.\u0275prov=Je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Sp(e,i){const s=e.indexOf(i);s>-1&&e.splice(s,1)}function nb(){}let Vu=(()=>{class e{}return e.__NG_ELEMENT_ID__=Og,e})();function Og(e){return function Rg(e,i,s){if(Yn(e)&&!s){const u=fn(e.index,i);return new Fh(u,u)}return 47&e.type?new Fh(i[or],i):null}(br(),jt(),16==(16&e))}class Ap{constructor(){}supports(i){return np(i)}create(i){return new Aw(i)}}const ab=(e,i)=>i;class Aw{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||ab}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,u=this._removalsHead,f=0,x=null;for(;s||u;){const S=!u||s&&s.currentIndex<cb(u,f,x)?s:u,O=cb(S,f,x),z=S.currentIndex;if(S===u)f--,u=u._nextRemoved;else if(s=s._next,null==S.previousIndex)f++;else{x||(x=[]);const J=O-f,de=z-f;if(J!=de){for(let qe=0;qe<J;qe++){const _t=qe<x.length?x[qe]:x[qe]=0,Ht=_t+qe;de<=Ht&&Ht<J&&(x[qe]=_t+1)}x[S.previousIndex]=de-J}}O!==z&&i(S,O,z)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!np(i))throw new wt(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let f,x,S,s=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let O=0;O<this.length;O++)x=i[O],S=this._trackByFn(O,x),null!==s&&Object.is(s.trackById,S)?(u&&(s=this._verifyReinsertion(s,x,S,O)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,S,O),u=!0),s=s._next}else f=0,function $b(e,i){if(Array.isArray(e))for(let s=0;s<e.length;s++)i(e[s]);else{const s=e[Symbol.iterator]();let u;for(;!(u=s.next()).done;)i(u.value)}}(i,O=>{S=this._trackByFn(f,O),null!==s&&Object.is(s.trackById,S)?(u&&(s=this._verifyReinsertion(s,O,S,f)),Object.is(s.item,O)||this._addIdentityChange(s,O)):(s=this._mismatch(s,O,S,f),u=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,u,f){let x;return null===i?x=this._itTail:(x=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,x,f)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,f))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,x,f)):i=this._addAfter(new kw(s,u),x,f),i}_verifyReinsertion(i,s,u,f){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==x?i=this._reinsertAfter(x,i._prev,f):i.currentIndex!=f&&(i.currentIndex=f,this._addToMoves(i,f)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const f=i._prevRemoved,x=i._nextRemoved;return null===f?this._removalsHead=x:f._nextRemoved=x,null===x?this._removalsTail=f:x._prevRemoved=f,this._insertAfter(i,s,u),this._addToMoves(i,u),i}_moveAfter(i,s,u){return this._unlink(i),this._insertAfter(i,s,u),this._addToMoves(i,u),i}_addAfter(i,s,u){return this._insertAfter(i,s,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,u){const f=null===s?this._itHead:s._next;return i._next=f,i._prev=s,null===f?this._itTail=i:f._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new lb),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,u=i._next;return null===s?this._itHead=u:s._next=u,null===u?this._itTail=s:u._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lb),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class kw{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Pw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===s||s<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const s=i._prevDup,u=i._nextDup;return null===s?this._head=u:s._nextDup=u,null===u?this._tail=s:u._prevDup=s,null===this._head}}class lb{constructor(){this.map=new Map}put(i){const s=i.trackById;let u=this.map.get(s);u||(u=new Pw,this.map.set(s,u)),u.add(i)}get(i,s){const f=this.map.get(i);return f?f.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cb(e,i,s){const u=e.previousIndex;if(null===u)return u;let f=0;return s&&u<s.length&&(f=s[u]),u+i+f}class db{constructor(){}supports(i){return i instanceof Map||Ef(i)}create(){return new ub}}class ub{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||Ef(i)))throw new wt(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,u),this._appendAfter=s,s=s._next;else{const x=this._getOrCreateRecordForKey(f,u);s=this._insertBeforeOrAppend(s,x)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let u=s;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const u=i._prev;return s._next=i,s._prev=u,i._prev=s,u&&(u._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const f=this._records.get(i);this._maybeAddToChanges(f,s);const x=f._prev,S=f._next;return x&&(x._next=S),S&&(S._prev=x),f._next=null,f._prev=null,f}const u=new Ow(i);return this._records.set(i,u),u.currentValue=s,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(u=>s(i[u],u))}}class Ow{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hb(){return new mb([new Ap])}let mb=(()=>{class e{constructor(s){this.factories=s}static create(s,u){if(null!=u){const f=u.factories.slice();s=s.concat(f)}return new e(s)}static extend(s){return{provide:e,useFactory:u=>e.create(s,u||hb()),deps:[[e,new Ga,new uo]]}}find(s){const u=this.factories.find(f=>f.supports(s));if(null!=u)return u;throw new wt(901,!1)}}return e.\u0275prov=Je({token:e,providedIn:"root",factory:hb}),e})();function pb(){return new Ug([new db])}let Ug=(()=>{class e{constructor(s){this.factories=s}static create(s,u){if(u){const f=u.factories.slice();s=s.concat(f)}return new e(s)}static extend(s){return{provide:e,useFactory:u=>e.create(s,u||pb()),deps:[[e,new Ga,new uo]]}}find(s){const u=this.factories.find(f=>f.supports(s));if(u)return u;throw new wt(901,!1)}}return e.\u0275prov=Je({token:e,providedIn:"root",factory:pb}),e})();const G1=Yv(null,"core",[]);let Fw=(()=>{class e{constructor(s){}}return e.\u0275fac=function(s){return new(s||e)(Se(Dp))},e.\u0275mod=_n({type:e}),e.\u0275inj=ei({}),e})();function Lw(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}},4006:(yi,pt,j)=>{"use strict";j.d(pt,{Cf:()=>Yt,F:()=>Fn,Fj:()=>Ye,JJ:()=>Ui,JU:()=>Ae,On:()=>Es,Zs:()=>Ts,a5:()=>bi,kI:()=>Ct,sg:()=>Br,u5:()=>en});var w=j(4650),a=j(6895),se=j(2076),_=j(4128),Ze=j(4004);let he=(()=>{class X{constructor($,Me){this._renderer=$,this._elementRef=Me,this.onChange=Ut=>{},this.onTouched=()=>{}}setProperty($,Me){this._renderer.setProperty(this._elementRef.nativeElement,$,Me)}registerOnTouched($){this.onTouched=$}registerOnChange($){this.onChange=$}setDisabledState($){this.setProperty("disabled",$)}}return X.\u0275fac=function($){return new($||X)(w.Y36(w.Qsj),w.Y36(w.SBq))},X.\u0275dir=w.lG2({type:X}),X})(),$e=(()=>{class X extends he{}return X.\u0275fac=function(){let q;return function(Me){return(q||(q=w.n5z(X)))(Me||X)}}(),X.\u0275dir=w.lG2({type:X,features:[w.qOj]}),X})();const Ae=new w.OlP("NgValueAccessor"),Xe={provide:Ae,useExisting:(0,w.Gpc)(()=>Ye),multi:!0},ot=new w.OlP("CompositionEventMode");let Ye=(()=>{class X extends he{constructor($,Me,Ut){super($,Me),this._compositionMode=Ut,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ke(){const X=(0,a.q)()?(0,a.q)().getUserAgent():"";return/android (\d+)/.test(X.toLowerCase())}())}writeValue($){this.setProperty("value",$??"")}_handleInput($){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange($)}_compositionStart(){this._composing=!0}_compositionEnd($){this._composing=!1,this._compositionMode&&this.onChange($)}}return X.\u0275fac=function($){return new($||X)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(ot,8))},X.\u0275dir=w.lG2({type:X,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function($,Me){1&$&&w.NdJ("input",function(Yi){return Me._handleInput(Yi.target.value)})("blur",function(){return Me.onTouched()})("compositionstart",function(){return Me._compositionStart()})("compositionend",function(Yi){return Me._compositionEnd(Yi.target.value)})},features:[w._Bn([Xe]),w.qOj]}),X})();const mt=!1;function Gt(X){return null==X||("string"==typeof X||Array.isArray(X))&&0===X.length}function wt(X){return null!=X&&"number"==typeof X.length}const Yt=new w.OlP("NgValidators"),Zt=new w.OlP("NgAsyncValidators"),Wt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ct{static min(q){return function Oe(X){return q=>{if(Gt(q.value)||Gt(X))return null;const $=parseFloat(q.value);return!isNaN($)&&$<X?{min:{min:X,actual:q.value}}:null}}(q)}static max(q){return function tt(X){return q=>{if(Gt(q.value)||Gt(X))return null;const $=parseFloat(q.value);return!isNaN($)&&$>X?{max:{max:X,actual:q.value}}:null}}(q)}static required(q){return kt(q)}static requiredTrue(q){return Ot(q)}static email(q){return function Vt(X){return Gt(X.value)||Wt.test(X.value)?null:{email:!0}}(q)}static minLength(q){return function ai(X){return q=>Gt(q.value)||!wt(q.value)?null:q.value.length<X?{minlength:{requiredLength:X,actualLength:q.value.length}}:null}(q)}static maxLength(q){return function gi(X){return q=>wt(q.value)&&q.value.length>X?{maxlength:{requiredLength:X,actualLength:q.value.length}}:null}(q)}static pattern(q){return function hi(X){if(!X)return zi;let q,$;return"string"==typeof X?($="","^"!==X.charAt(0)&&($+="^"),$+=X,"$"!==X.charAt(X.length-1)&&($+="$"),q=new RegExp($)):($=X.toString(),q=X),Me=>{if(Gt(Me.value))return null;const Ut=Me.value;return q.test(Ut)?null:{pattern:{requiredPattern:$,actualValue:Ut}}}}(q)}static nullValidator(q){return null}static compose(q){return oi(q)}static composeAsync(q){return Lt(q)}}function kt(X){return Gt(X.value)?{required:!0}:null}function Ot(X){return!0===X.value?null:{required:!0}}function zi(X){return null}function xi(X){return null!=X}function At(X){const q=(0,w.QGY)(X)?(0,se.D)(X):X;if(mt&&!(0,w.CqO)(q)){let $="Expected async validator to return Promise or Observable.";throw"object"==typeof X&&($+=" Are you using a synchronous validator where an async validator is expected?"),new w.vHH(-1101,$)}return q}function Bt(X){let q={};return X.forEach($=>{q=null!=$?{...q,...$}:q}),0===Object.keys(q).length?null:q}function $t(X,q){return q.map($=>$(X))}function ci(X){return X.map(q=>function Kt(X){return!X.validate}(q)?q:$=>q.validate($))}function oi(X){if(!X)return null;const q=X.filter(xi);return 0==q.length?null:function($){return Bt($t($,q))}}function zt(X){return null!=X?oi(ci(X)):null}function Lt(X){if(!X)return null;const q=X.filter(xi);return 0==q.length?null:function($){const Me=$t($,q).map(At);return(0,_.D)(Me).pipe((0,Ze.U)(Bt))}}function Xt(X){return null!=X?Lt(ci(X)):null}function ft(X,q){return null===X?[q]:Array.isArray(X)?[...X,q]:[X,q]}function qt(X){return X._rawValidators}function Je(X){return X._rawAsyncValidators}function yt(X){return X?Array.isArray(X)?X:[X]:[]}function ei(X,q){return Array.isArray(X)?X.includes(q):X===q}function pi(X,q){const $=yt(q);return yt(X).forEach(Ut=>{ei($,Ut)||$.push(Ut)}),$}function ct(X,q){return yt(q).filter($=>!ei(X,$))}class Ti{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(q){this._rawValidators=q||[],this._composedValidatorFn=zt(this._rawValidators)}_setAsyncValidators(q){this._rawAsyncValidators=q||[],this._composedAsyncValidatorFn=Xt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(q){this._onDestroyCallbacks.push(q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(q=>q()),this._onDestroyCallbacks=[]}reset(q){this.control&&this.control.reset(q)}hasError(q,$){return!!this.control&&this.control.hasError(q,$)}getError(q,$){return this.control?this.control.getError(q,$):null}}class fi extends Ti{get formDirective(){return null}get path(){return null}}class bi extends Ti{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rt{constructor(q){this._cd=q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ui=(()=>{class X extends rt{constructor($){super($)}}return X.\u0275fac=function($){return new($||X)(w.Y36(bi,2))},X.\u0275dir=w.lG2({type:X,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function($,Me){2&$&&w.ekj("ng-untouched",Me.isUntouched)("ng-touched",Me.isTouched)("ng-pristine",Me.isPristine)("ng-dirty",Me.isDirty)("ng-valid",Me.isValid)("ng-invalid",Me.isInvalid)("ng-pending",Me.isPending)},features:[w.qOj]}),X})();function et(X,q){return X?`with name: '${q}'`:`at index: ${q}`}const Li=!1,pn="VALID",Se="INVALID",re="PENDING",me="DISABLED";function K(X){return(fe(X)?X.validators:X)||null}function U(X,q){return(fe(q)?q.asyncValidators:X)||null}function fe(X){return null!=X&&!Array.isArray(X)&&"object"==typeof X}class St{constructor(q,$){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(q),this._assignAsyncValidators($)}get validator(){return this._composedValidatorFn}set validator(q){this._rawValidators=this._composedValidatorFn=q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(q){this._rawAsyncValidators=this._composedAsyncValidatorFn=q}get parent(){return this._parent}get valid(){return this.status===pn}get invalid(){return this.status===Se}get pending(){return this.status==re}get disabled(){return this.status===me}get enabled(){return this.status!==me}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(q){this._assignValidators(q)}setAsyncValidators(q){this._assignAsyncValidators(q)}addValidators(q){this.setValidators(pi(q,this._rawValidators))}addAsyncValidators(q){this.setAsyncValidators(pi(q,this._rawAsyncValidators))}removeValidators(q){this.setValidators(ct(q,this._rawValidators))}removeAsyncValidators(q){this.setAsyncValidators(ct(q,this._rawAsyncValidators))}hasValidator(q){return ei(this._rawValidators,q)}hasAsyncValidator(q){return ei(this._rawAsyncValidators,q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(q={}){this.touched=!0,this._parent&&!q.onlySelf&&this._parent.markAsTouched(q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(q=>q.markAllAsTouched())}markAsUntouched(q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild($=>{$.markAsUntouched({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}markAsDirty(q={}){this.pristine=!1,this._parent&&!q.onlySelf&&this._parent.markAsDirty(q)}markAsPristine(q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild($=>{$.markAsPristine({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}markAsPending(q={}){this.status=re,!1!==q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!q.onlySelf&&this._parent.markAsPending(q)}disable(q={}){const $=this._parentMarkedDirty(q.onlySelf);this.status=me,this.errors=null,this._forEachChild(Me=>{Me.disable({...q,onlySelf:!0})}),this._updateValue(),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...q,skipPristineCheck:$}),this._onDisabledChange.forEach(Me=>Me(!0))}enable(q={}){const $=this._parentMarkedDirty(q.onlySelf);this.status=pn,this._forEachChild(Me=>{Me.enable({...q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent}),this._updateAncestors({...q,skipPristineCheck:$}),this._onDisabledChange.forEach(Me=>Me(!1))}_updateAncestors(q){this._parent&&!q.onlySelf&&(this._parent.updateValueAndValidity(q),q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(q){this._parent=q}getRawValue(){return this.value}updateValueAndValidity(q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pn||this.status===re)&&this._runAsyncValidator(q.emitEvent)),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!q.onlySelf&&this._parent.updateValueAndValidity(q)}_updateTreeValidity(q={emitEvent:!0}){this._forEachChild($=>$._updateTreeValidity(q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?me:pn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(q){if(this.asyncValidator){this.status=re,this._hasOwnPendingAsyncValidator=!0;const $=At(this.asyncValidator(this));this._asyncValidationSubscription=$.subscribe(Me=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Me,{emitEvent:q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(q,$={}){this.errors=q,this._updateControlsErrors(!1!==$.emitEvent)}get(q){let $=q;return null==$||(Array.isArray($)||($=$.split(".")),0===$.length)?null:$.reduce((Me,Ut)=>Me&&Me._find(Ut),this)}getError(q,$){const Me=$?this.get($):this;return Me&&Me.errors?Me.errors[q]:null}hasError(q,$){return!!this.getError(q,$)}get root(){let q=this;for(;q._parent;)q=q._parent;return q}_updateControlsErrors(q){this.status=this._calculateStatus(),q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(q)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?me:this.errors?Se:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(re)?re:this._anyControlsHaveStatus(Se)?Se:pn}_anyControlsHaveStatus(q){return this._anyControls($=>$.status===q)}_anyControlsDirty(){return this._anyControls(q=>q.dirty)}_anyControlsTouched(){return this._anyControls(q=>q.touched)}_updatePristine(q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}_updateTouched(q={}){this.touched=this._anyControlsTouched(),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}_registerOnCollectionChange(q){this._onCollectionChange=q}_setUpdateStrategy(q){fe(q)&&null!=q.updateOn&&(this._updateOn=q.updateOn)}_parentMarkedDirty(q){return!q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(q){return null}_assignValidators(q){this._rawValidators=Array.isArray(q)?q.slice():q,this._composedValidatorFn=function V(X){return Array.isArray(X)?zt(X):X||null}(this._rawValidators)}_assignAsyncValidators(q){this._rawAsyncValidators=Array.isArray(q)?q.slice():q,this._composedAsyncValidatorFn=function ce(X){return Array.isArray(X)?Xt(X):X||null}(this._rawAsyncValidators)}}class vt extends St{constructor(q,$,Me){super(K($),U(Me,$)),this.controls=q,this._initObservables(),this._setUpdateStrategy($),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(q,$){return this.controls[q]?this.controls[q]:(this.controls[q]=$,$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange),$)}addControl(q,$,Me={}){this.registerControl(q,$),this.updateValueAndValidity({emitEvent:Me.emitEvent}),this._onCollectionChange()}removeControl(q,$={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],this.updateValueAndValidity({emitEvent:$.emitEvent}),this._onCollectionChange()}setControl(q,$,Me={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],$&&this.registerControl(q,$),this.updateValueAndValidity({emitEvent:Me.emitEvent}),this._onCollectionChange()}contains(q){return this.controls.hasOwnProperty(q)&&this.controls[q].enabled}setValue(q,$={}){(function We(X,q,$){X._forEachChild((Me,Ut)=>{if(void 0===$[Ut])throw new w.vHH(1002,Li?function qi(X,q){return`Must supply a value for form control ${et(X,q)}`}(q,Ut):"")})})(this,!0,q),Object.keys(q).forEach(Me=>{(function Ie(X,q,$){const Me=X.controls;if(!(q?Object.keys(Me):Me).length)throw new w.vHH(1e3,Li?function Ei(X){return`\n    There are no form controls registered with this ${X?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(q):"");if(!Me[$])throw new w.vHH(1001,Li?function li(X,q){return`Cannot find form control ${et(X,q)}`}(q,$):"")})(this,!0,Me),this.controls[Me].setValue(q[Me],{onlySelf:!0,emitEvent:$.emitEvent})}),this.updateValueAndValidity($)}patchValue(q,$={}){null!=q&&(Object.keys(q).forEach(Me=>{const Ut=this.controls[Me];Ut&&Ut.patchValue(q[Me],{onlySelf:!0,emitEvent:$.emitEvent})}),this.updateValueAndValidity($))}reset(q={},$={}){this._forEachChild((Me,Ut)=>{Me.reset(q[Ut],{onlySelf:!0,emitEvent:$.emitEvent})}),this._updatePristine($),this._updateTouched($),this.updateValueAndValidity($)}getRawValue(){return this._reduceChildren({},(q,$,Me)=>(q[Me]=$.getRawValue(),q))}_syncPendingControls(){let q=this._reduceChildren(!1,($,Me)=>!!Me._syncPendingControls()||$);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){Object.keys(this.controls).forEach($=>{const Me=this.controls[$];Me&&q(Me,$)})}_setUpControls(){this._forEachChild(q=>{q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(q){for(const[$,Me]of Object.entries(this.controls))if(this.contains($)&&q(Me))return!0;return!1}_reduceValue(){return this._reduceChildren({},($,Me,Ut)=>((Me.enabled||this.disabled)&&($[Ut]=Me.value),$))}_reduceChildren(q,$){let Me=q;return this._forEachChild((Ut,Yi)=>{Me=$(Me,Ut,Yi)}),Me}_allControlsDisabled(){for(const q of Object.keys(this.controls))if(this.controls[q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(q){return this.controls.hasOwnProperty(q)?this.controls[q]:null}}const Y=new w.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Q}),Q="always";function Re(X,q,$=Q){an(X,q),q.valueAccessor.writeValue(X.value),(X.disabled||"always"===$)&&q.valueAccessor.setDisabledState?.(X.disabled),function _n(X,q){q.valueAccessor.registerOnChange($=>{X._pendingValue=$,X._pendingChange=!0,X._pendingDirty=!0,"change"===X.updateOn&&Ro(X,q)})}(X,q),function wn(X,q){const $=(Me,Ut)=>{q.valueAccessor.writeValue(Me),Ut&&q.viewToModelUpdate(Me)};X.registerOnChange($),q._registerOnDestroy(()=>{X._unregisterOnChange($)})}(X,q),function cs(X,q){q.valueAccessor.registerOnTouched(()=>{X._pendingTouched=!0,"blur"===X.updateOn&&X._pendingChange&&Ro(X,q),"submit"!==X.updateOn&&X.markAsTouched()})}(X,q),function Fi(X,q){if(q.valueAccessor.setDisabledState){const $=Me=>{q.valueAccessor.setDisabledState(Me)};X.registerOnDisabledChange($),q._registerOnDestroy(()=>{X._unregisterOnDisabledChange($)})}}(X,q)}function ht(X,q,$=!0){const Me=()=>{};q.valueAccessor&&(q.valueAccessor.registerOnChange(Me),q.valueAccessor.registerOnTouched(Me)),un(X,q),X&&(q._invokeOnDestroyCallbacks(),X._registerOnCollectionChange(()=>{}))}function Jt(X,q){X.forEach($=>{$.registerOnValidatorChange&&$.registerOnValidatorChange(q)})}function an(X,q){const $=qt(X);null!==q.validator?X.setValidators(ft($,q.validator)):"function"==typeof $&&X.setValidators([$]);const Me=Je(X);null!==q.asyncValidator?X.setAsyncValidators(ft(Me,q.asyncValidator)):"function"==typeof Me&&X.setAsyncValidators([Me]);const Ut=()=>X.updateValueAndValidity();Jt(q._rawValidators,Ut),Jt(q._rawAsyncValidators,Ut)}function un(X,q){let $=!1;if(null!==X){if(null!==q.validator){const Ut=qt(X);if(Array.isArray(Ut)&&Ut.length>0){const Yi=Ut.filter(mr=>mr!==q.validator);Yi.length!==Ut.length&&($=!0,X.setValidators(Yi))}}if(null!==q.asyncValidator){const Ut=Je(X);if(Array.isArray(Ut)&&Ut.length>0){const Yi=Ut.filter(mr=>mr!==q.asyncValidator);Yi.length!==Ut.length&&($=!0,X.setAsyncValidators(Yi))}}}const Me=()=>{};return Jt(q._rawValidators,Me),Jt(q._rawAsyncValidators,Me),$}function Ro(X,q){X._pendingDirty&&X.markAsDirty(),X.setValue(X._pendingValue,{emitModelToViewChange:!1}),q.viewToModelUpdate(X._pendingValue),X._pendingChange=!1}function Mr(X,q){an(X,q)}function Rn(X,q){X._syncPendingControls(),q.forEach($=>{const Me=$.control;"submit"===Me.updateOn&&Me._pendingChange&&($.viewToModelUpdate(Me._pendingValue),Me._pendingChange=!1)})}const $n={provide:fi,useExisting:(0,w.Gpc)(()=>Fn)},vr=(()=>Promise.resolve())();let Fn=(()=>{class X extends fi{constructor($,Me,Ut){super(),this.callSetDisabledState=Ut,this.submitted=!1,this._directives=new Set,this.ngSubmit=new w.vpe,this.form=new vt({},zt($),Xt(Me))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl($){vr.then(()=>{const Me=this._findContainer($.path);$.control=Me.registerControl($.name,$.control),Re($.control,$,this.callSetDisabledState),$.control.updateValueAndValidity({emitEvent:!1}),this._directives.add($)})}getControl($){return this.form.get($.path)}removeControl($){vr.then(()=>{const Me=this._findContainer($.path);Me&&Me.removeControl($.name),this._directives.delete($)})}addFormGroup($){vr.then(()=>{const Me=this._findContainer($.path),Ut=new vt({});Mr(Ut,$),Me.registerControl($.name,Ut),Ut.updateValueAndValidity({emitEvent:!1})})}removeFormGroup($){vr.then(()=>{const Me=this._findContainer($.path);Me&&Me.removeControl($.name)})}getFormGroup($){return this.form.get($.path)}updateModel($,Me){vr.then(()=>{this.form.get($.path).setValue(Me)})}setValue($){this.control.setValue($)}onSubmit($){return this.submitted=!0,Rn(this.form,this._directives),this.ngSubmit.emit($),"dialog"===$?.target?.method}onReset(){this.resetForm()}resetForm($){this.form.reset($),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer($){return $.pop(),$.length?this.form.get($):this.form}}return X.\u0275fac=function($){return new($||X)(w.Y36(Yt,10),w.Y36(Zt,10),w.Y36(Y,8))},X.\u0275dir=w.lG2({type:X,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function($,Me){1&$&&w.NdJ("submit",function(Yi){return Me.onSubmit(Yi)})("reset",function(){return Me.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([$n]),w.qOj]}),X})();function zn(X,q){const $=X.indexOf(q);$>-1&&X.splice($,1)}function ji(X){return"object"==typeof X&&null!==X&&2===Object.keys(X).length&&"value"in X&&"disabled"in X}const Rr=class extends St{constructor(q=null,$,Me){super(K($),U(Me,$)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(q),this._setUpdateStrategy($),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fe($)&&($.nonNullable||$.initialValueIsDefault)&&(this.defaultValue=ji(q)?q.value:q)}setValue(q,$={}){this.value=this._pendingValue=q,this._onChange.length&&!1!==$.emitModelToViewChange&&this._onChange.forEach(Me=>Me(this.value,!1!==$.emitViewToModelChange)),this.updateValueAndValidity($)}patchValue(q,$={}){this.setValue(q,$)}reset(q=this.defaultValue,$={}){this._applyFormState(q),this.markAsPristine($),this.markAsUntouched($),this.setValue(this.value,$),this._pendingChange=!1}_updateValue(){}_anyControls(q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(q){this._onChange.push(q)}_unregisterOnChange(q){zn(this._onChange,q)}registerOnDisabledChange(q){this._onDisabledChange.push(q)}_unregisterOnDisabledChange(q){zn(this._onDisabledChange,q)}_forEachChild(q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(q){ji(q)?(this.value=this._pendingValue=q.value,q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=q}},Jr={provide:bi,useExisting:(0,w.Gpc)(()=>Es)},us=(()=>Promise.resolve())();let Es=(()=>{class X extends bi{constructor($,Me,Ut,Yi,mr,jt){super(),this._changeDetectorRef=mr,this.callSetDisabledState=jt,this.control=new Rr,this._registered=!1,this.update=new w.vpe,this._parent=$,this._setValidators(Me),this._setAsyncValidators(Ut),this.valueAccessor=function Ri(X,q){if(!q)return null;let $,Me,Ut;return Array.isArray(q),q.forEach(Yi=>{Yi.constructor===Ye?$=Yi:function Xr(X){return Object.getPrototypeOf(X.constructor)===$e}(Yi)?Me=Yi:Ut=Yi}),Ut||Me||$||null}(0,Yi)}ngOnChanges($){if(this._checkForErrors(),!this._registered||"name"in $){if(this._registered&&(this._checkName(),this.formDirective)){const Me=$.name.previousValue;this.formDirective.removeControl({name:Me,path:this._getPath(Me)})}this._setUpControl()}"isDisabled"in $&&this._updateDisabled($),function yr(X,q){if(!X.hasOwnProperty("model"))return!1;const $=X.model;return!!$.isFirstChange()||!Object.is(q,$.currentValue)}($,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate($){this.viewModel=$,this.update.emit($)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Re(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue($){us.then(()=>{this.control.setValue($,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled($){const Me=$.isDisabled.currentValue,Ut=0!==Me&&(0,w.D6c)(Me);us.then(()=>{Ut&&!this.control.disabled?this.control.disable():!Ut&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath($){return this._parent?function xe(X,q){return[...q.path,X]}($,this._parent):[$]}}return X.\u0275fac=function($){return new($||X)(w.Y36(fi,9),w.Y36(Yt,10),w.Y36(Zt,10),w.Y36(Ae,10),w.Y36(w.sBO,8),w.Y36(Y,8))},X.\u0275dir=w.lG2({type:X,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[w._Bn([Jr]),w.qOj,w.TTD]}),X})(),Mo=(()=>{class X{}return X.\u0275fac=function($){return new($||X)},X.\u0275mod=w.oAB({type:X}),X.\u0275inj=w.cJS({}),X})();const Zr={provide:fi,useExisting:(0,w.Gpc)(()=>Br)};let Br=(()=>{class X extends fi{constructor($,Me,Ut){super(),this.callSetDisabledState=Ut,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators($),this._setAsyncValidators(Me)}ngOnChanges($){this._checkFormPresent(),$.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(un(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl($){const Me=this.form.get($.path);return Re(Me,$,this.callSetDisabledState),Me.updateValueAndValidity({emitEvent:!1}),this.directives.push($),Me}getControl($){return this.form.get($.path)}removeControl($){ht($.control||null,$,!1),function Ji(X,q){const $=X.indexOf(q);$>-1&&X.splice($,1)}(this.directives,$)}addFormGroup($){this._setUpFormContainer($)}removeFormGroup($){this._cleanUpFormContainer($)}getFormGroup($){return this.form.get($.path)}addFormArray($){this._setUpFormContainer($)}removeFormArray($){this._cleanUpFormContainer($)}getFormArray($){return this.form.get($.path)}updateModel($,Me){this.form.get($.path).setValue(Me)}onSubmit($){return this.submitted=!0,Rn(this.form,this.directives),this.ngSubmit.emit($),"dialog"===$?.target?.method}onReset(){this.resetForm()}resetForm($){this.form.reset($),this.submitted=!1}_updateDomValue(){this.directives.forEach($=>{const Me=$.control,Ut=this.form.get($.path);Me!==Ut&&(ht(Me||null,$),(X=>X instanceof Rr)(Ut)&&(Re(Ut,$,this.callSetDisabledState),$.control=Ut))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer($){const Me=this.form.get($.path);Mr(Me,$),Me.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer($){if(this.form){const Me=this.form.get($.path);Me&&function Qi(X,q){return un(X,q)}(Me,$)&&Me.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){an(this.form,this),this._oldForm&&un(this._oldForm,this)}_checkFormPresent(){}}return X.\u0275fac=function($){return new($||X)(w.Y36(Yt,10),w.Y36(Zt,10),w.Y36(Y,8))},X.\u0275dir=w.lG2({type:X,selectors:[["","formGroup",""]],hostBindings:function($,Me){1&$&&w.NdJ("submit",function(Yi){return Me.onSubmit(Yi)})("reset",function(){return Me.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([Zr]),w.qOj,w.TTD]}),X})(),Do=(()=>{class X{constructor(){this._validator=zi}ngOnChanges($){if(this.inputName in $){const Me=this.normalizeInput($[this.inputName].currentValue);this._enabled=this.enabled(Me),this._validator=this._enabled?this.createValidator(Me):zi,this._onChange&&this._onChange()}}validate($){return this._validator($)}registerOnValidatorChange($){this._onChange=$}enabled($){return null!=$}}return X.\u0275fac=function($){return new($||X)},X.\u0275dir=w.lG2({type:X,features:[w.TTD]}),X})();const lo={provide:Yt,useExisting:(0,w.Gpc)(()=>ms),multi:!0},Ys={provide:Yt,useExisting:(0,w.Gpc)(()=>Ts),multi:!0};let ms=(()=>{class X extends Do{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=w.D6c,this.createValidator=$=>kt}enabled($){return $}}return X.\u0275fac=function(){let q;return function(Me){return(q||(q=w.n5z(X)))(Me||X)}}(),X.\u0275dir=w.lG2({type:X,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function($,Me){2&$&&w.uIk("required",Me._enabled?"":null)},inputs:{required:"required"},features:[w._Bn([lo]),w.qOj]}),X})(),Ts=(()=>{class X extends ms{constructor(){super(...arguments),this.createValidator=$=>Ot}}return X.\u0275fac=function(){let q;return function(Me){return(q||(q=w.n5z(X)))(Me||X)}}(),X.\u0275dir=w.lG2({type:X,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function($,Me){2&$&&w.uIk("required",Me._enabled?"":null)},features:[w._Bn([Ys]),w.qOj]}),X})(),Da=(()=>{class X{}return X.\u0275fac=function($){return new($||X)},X.\u0275mod=w.oAB({type:X}),X.\u0275inj=w.cJS({imports:[Mo]}),X})(),en=(()=>{class X{static withConfig($){return{ngModule:X,providers:[{provide:Y,useValue:$.callSetDisabledState??Q}]}}}return X.\u0275fac=function($){return new($||X)},X.\u0275mod=w.oAB({type:X}),X.\u0275inj=w.cJS({imports:[Da]}),X})()},4859:(yi,pt,j)=>{"use strict";j.d(pt,{RK:()=>Kt,cs:()=>xi,lW:()=>Ot,ot:()=>oi,zs:()=>Vt});var w=j(3353),a=j(4650),se=j(7253),_=j(3238),Ze=j(1281);const he=["mat-button",""],$e=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Ae=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],je=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}",Xe=["mat-fab",""],Ye=["mat-icon-button",""],mt=["*"],Zt=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Wt=(0,_.pj)((0,_.Id)((0,_.Kr)(class{constructor(zt){this._elementRef=zt}})));let Ct=(()=>{class zt extends Wt{constructor(Xt,ft,qt,Je){super(Xt),this._platform=ft,this._ngZone=qt,this._animationMode=Je,this._focusMonitor=(0,a.f3M)(se.tE),this._isFab=!1;const yt=Xt.nativeElement.classList;for(const ei of Zt)this._hasHostAttributes(ei.selector)&&ei.mdcClasses.forEach(pi=>{yt.add(pi)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Xt="program",ft){Xt?this._focusMonitor.focusVia(this._elementRef.nativeElement,Xt,ft):this._elementRef.nativeElement.focus(ft)}_hasHostAttributes(...Xt){return Xt.some(ft=>this._elementRef.nativeElement.hasAttribute(ft))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return zt.\u0275fac=function(Xt){a.$Z()},zt.\u0275dir=a.lG2({type:zt,viewQuery:function(Xt,ft){if(1&Xt&&a.Gf(_.wG,5),2&Xt){let qt;a.iGM(qt=a.CRH())&&(ft.ripple=qt.first)}},features:[a.qOj]}),zt})(),kt=(()=>{class zt extends Ct{constructor(Xt,ft,qt,Je){super(Xt,ft,qt,Je),this._haltDisabledEvents=yt=>{this.disabled&&(yt.preventDefault(),yt.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return zt.\u0275fac=function(Xt){a.$Z()},zt.\u0275dir=a.lG2({type:zt,features:[a.qOj]}),zt})(),Ot=(()=>{class zt extends Ct{constructor(Xt,ft,qt,Je){super(Xt,ft,qt,Je)}}return zt.\u0275fac=function(Xt){return new(Xt||zt)(a.Y36(a.SBq),a.Y36(w.t4),a.Y36(a.R0b),a.Y36(a.QbO,8))},zt.\u0275cmp=a.Xpm({type:zt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(Xt,ft){2&Xt&&(a.uIk("disabled",ft.disabled||null),a.ekj("_mat-animation-noopable","NoopAnimations"===ft._animationMode)("mat-unthemed",!ft.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[a.qOj],attrs:he,ngContentSelectors:Ae,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(Xt,ft){1&Xt&&(a.F$t($e),a._UZ(0,"span",0),a.Hsn(1),a.TgZ(2,"span",1),a.Hsn(3,1),a.qZA(),a.Hsn(4,2),a._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&Xt&&(a.ekj("mdc-button__ripple",!ft._isFab)("mdc-fab__ripple",ft._isFab),a.xp6(6),a.Q6J("matRippleDisabled",ft._isRippleDisabled())("matRippleTrigger",ft._elementRef.nativeElement))},dependencies:[_.wG],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),zt})(),Vt=(()=>{class zt extends kt{constructor(Xt,ft,qt,Je){super(Xt,ft,qt,Je)}}return zt.\u0275fac=function(Xt){return new(Xt||zt)(a.Y36(a.SBq),a.Y36(w.t4),a.Y36(a.R0b),a.Y36(a.QbO,8))},zt.\u0275cmp=a.Xpm({type:zt,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:9,hostBindings:function(Xt,ft){2&Xt&&(a.uIk("disabled",ft.disabled||null)("tabindex",ft.disabled?-1:ft.tabIndex)("aria-disabled",ft.disabled.toString()),a.ekj("_mat-animation-noopable","NoopAnimations"===ft._animationMode)("mat-unthemed",!ft.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[a.qOj],attrs:he,ngContentSelectors:Ae,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(Xt,ft){1&Xt&&(a.F$t($e),a._UZ(0,"span",0),a.Hsn(1),a.TgZ(2,"span",1),a.Hsn(3,1),a.qZA(),a.Hsn(4,2),a._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&Xt&&(a.ekj("mdc-button__ripple",!ft._isFab)("mdc-fab__ripple",ft._isFab),a.xp6(6),a.Q6J("matRippleDisabled",ft._isRippleDisabled())("matRippleTrigger",ft._elementRef.nativeElement))},dependencies:[_.wG],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',je],encapsulation:2,changeDetection:0}),zt})();const ai=new a.OlP("mat-mdc-fab-default-options",{providedIn:"root",factory:gi});function gi(){return{color:"accent"}}const hi=gi();let xi=(()=>{class zt extends Ct{get extended(){return this._extended}set extended(Xt){this._extended=(0,Ze.Ig)(Xt)}constructor(Xt,ft,qt,Je,yt){super(Xt,ft,qt,Je),this._options=yt,this._isFab=!0,this._options=this._options||hi,this.color=this.defaultColor=this._options.color||hi.color}}return zt.\u0275fac=function(Xt){return new(Xt||zt)(a.Y36(a.SBq),a.Y36(w.t4),a.Y36(a.R0b),a.Y36(a.QbO,8),a.Y36(ai,8))},zt.\u0275cmp=a.Xpm({type:zt,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(Xt,ft){2&Xt&&(a.uIk("disabled",ft.disabled||null),a.ekj("_mat-animation-noopable","NoopAnimations"===ft._animationMode)("mat-unthemed",!ft.color)("mat-mdc-button-base",!0)("mdc-fab--extended",ft.extended)("mat-mdc-extended-fab",ft.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[a.qOj],attrs:Xe,ngContentSelectors:Ae,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(Xt,ft){1&Xt&&(a.F$t($e),a._UZ(0,"span",0),a.Hsn(1),a.TgZ(2,"span",1),a.Hsn(3,1),a.qZA(),a.Hsn(4,2),a._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&Xt&&(a.ekj("mdc-button__ripple",!ft._isFab)("mdc-fab__ripple",ft._isFab),a.xp6(6),a.Q6J("matRippleDisabled",ft._isRippleDisabled())("matRippleTrigger",ft._elementRef.nativeElement))},dependencies:[_.wG],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),zt})(),Kt=(()=>{class zt extends Ct{constructor(Xt,ft,qt,Je){super(Xt,ft,qt,Je)}}return zt.\u0275fac=function(Xt){return new(Xt||zt)(a.Y36(a.SBq),a.Y36(w.t4),a.Y36(a.R0b),a.Y36(a.QbO,8))},zt.\u0275cmp=a.Xpm({type:zt,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(Xt,ft){2&Xt&&(a.uIk("disabled",ft.disabled||null),a.ekj("_mat-animation-noopable","NoopAnimations"===ft._animationMode)("mat-unthemed",!ft.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[a.qOj],attrs:Ye,ngContentSelectors:mt,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(Xt,ft){1&Xt&&(a.F$t(),a._UZ(0,"span",0),a.Hsn(1),a._UZ(2,"span",1)(3,"span",2)(4,"span",3)),2&Xt&&(a.xp6(3),a.Q6J("matRippleDisabled",ft._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",ft._elementRef.nativeElement))},dependencies:[_.wG],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',je],encapsulation:2,changeDetection:0}),zt})(),oi=(()=>{class zt{}return zt.\u0275fac=function(Xt){return new(Xt||zt)},zt.\u0275mod=a.oAB({type:zt}),zt.\u0275inj=a.cJS({imports:[_.BQ,_.si,_.BQ]}),zt})()},3238:(yi,pt,j)=>{"use strict";j.d(pt,{rD:()=>ei,K7:()=>et,HF:()=>be,Y2:()=>st,BQ:()=>kt,ey:()=>pn,Ng:()=>me,us:()=>De,wG:()=>xt,si:()=>Nt,IR:()=>Ce,CB:()=>Se,jH:()=>re,pj:()=>hi,Kr:()=>zi,Id:()=>gi,FD:()=>At,dB:()=>Bt,sb:()=>xi});var w=j(4650),a=j(7253),se=j(445),Ze=j(6895),he=j(3353),$e=j(1281),Ae=j(9751),Ve=j(7579),je=j(9521);const ot=["text"];function Ye(K,V){if(1&K&&w._UZ(0,"mat-pseudo-checkbox",6),2&K){const U=w.oxw();w.Q6J("state",U.selected?"checked":"unchecked")("disabled",U.disabled)}}function mt(K,V){if(1&K&&w._UZ(0,"mat-pseudo-checkbox",7),2&K){const U=w.oxw();w.Q6J("disabled",U.disabled)}}function Gt(K,V){if(1&K&&(w.TgZ(0,"span",8),w._uU(1),w.qZA()),2&K){const U=w.oxw();w.xp6(1),w.hij("(",U.group.label,")")}}const wt=[[["mat-icon"]],"*"],Yt=["mat-icon","*"],tt=new w.OlP("mat-sanity-checks",{providedIn:"root",factory:function Oe(){return!0}});let kt=(()=>{class K{constructor(U,ce,fe){this._sanityChecks=ce,this._document=fe,this._hasDoneGlobalChecks=!1,U._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(U){return!(0,he.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[U])}}return K.\u0275fac=function(U){return new(U||K)(w.LFG(a.qm),w.LFG(tt,8),w.LFG(Ze.K0))},K.\u0275mod=w.oAB({type:K}),K.\u0275inj=w.cJS({imports:[se.vT,se.vT]}),K})();function gi(K){return class extends K{get disabled(){return this._disabled}set disabled(V){this._disabled=(0,$e.Ig)(V)}constructor(...V){super(...V),this._disabled=!1}}}function hi(K,V){return class extends K{get color(){return this._color}set color(U){const ce=U||this.defaultColor;ce!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),ce&&this._elementRef.nativeElement.classList.add(`mat-${ce}`),this._color=ce)}constructor(...U){super(...U),this.defaultColor=V,this.color=V}}}function zi(K){return class extends K{get disableRipple(){return this._disableRipple}set disableRipple(V){this._disableRipple=(0,$e.Ig)(V)}constructor(...V){super(...V),this._disableRipple=!1}}}function xi(K,V=0){return class extends K{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(U){this._tabIndex=null!=U?(0,$e.su)(U):this.defaultTabIndex}constructor(...U){super(...U),this._tabIndex=V,this.defaultTabIndex=V}}}function At(K){return class extends K{updateErrorState(){const V=this.errorState,Ie=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Ie!==V&&(this.errorState=Ie,this.stateChanges.next())}constructor(...V){super(...V),this.errorState=!1}}}function Bt(K){return class extends K{constructor(...V){super(...V),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Ae.y(U=>{this._isInitialized?this._notifySubscriber(U):this._pendingSubscribers.push(U)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(V){V.next(),V.complete()}}}let ei=(()=>{class K{isErrorState(U,ce){return!!(U&&U.invalid&&(U.touched||ce&&ce.submitted))}}return K.\u0275fac=function(U){return new(U||K)},K.\u0275prov=w.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();class bi{constructor(V,U,ce,fe=!1){this._renderer=V,this.element=U,this.config=ce,this._animationForciblyDisabledThroughCss=fe,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const rt=(0,he.i$)({passive:!0,capture:!0});class Dt{constructor(){this._events=new Map,this._delegateEventHandler=V=>{const U=(0,he.sA)(V);U&&this._events.get(V.type)?.forEach((ce,fe)=>{(fe===U||fe.contains(U))&&ce.forEach(Ie=>Ie.handleEvent(V))})}}addHandler(V,U,ce,fe){const Ie=this._events.get(U);if(Ie){const We=Ie.get(ce);We?We.add(fe):Ie.set(ce,new Set([fe]))}else this._events.set(U,new Map([[ce,new Set([fe])]])),V.runOutsideAngular(()=>{document.addEventListener(U,this._delegateEventHandler,rt)})}removeHandler(V,U,ce){const fe=this._events.get(V);if(!fe)return;const Ie=fe.get(U);Ie&&(Ie.delete(ce),0===Ie.size&&fe.delete(U),0===fe.size&&(this._events.delete(V),document.removeEventListener(V,this._delegateEventHandler,rt)))}}const _i={enterDuration:225,exitDuration:150},wi=(0,he.i$)({passive:!0,capture:!0}),nn=["mousedown","touchstart"],Pt=["mouseup","mouseleave","touchend","touchcancel"];class Ce{constructor(V,U,ce,fe){this._target=V,this._ngZone=U,this._platform=fe,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,fe.isBrowser&&(this._containerElement=(0,$e.fI)(ce))}fadeInRipple(V,U,ce={}){const fe=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Ie={..._i,...ce.animation};ce.centered&&(V=fe.left+fe.width/2,U=fe.top+fe.height/2);const We=ce.radius||function Ee(K,V,U){const ce=Math.max(Math.abs(K-U.left),Math.abs(K-U.right)),fe=Math.max(Math.abs(V-U.top),Math.abs(V-U.bottom));return Math.sqrt(ce*ce+fe*fe)}(V,U,fe),St=V-fe.left,vt=U-fe.top,Tt=Ie.enterDuration,ni=document.createElement("div");ni.classList.add("mat-ripple-element"),ni.style.left=St-We+"px",ni.style.top=vt-We+"px",ni.style.height=2*We+"px",ni.style.width=2*We+"px",null!=ce.color&&(ni.style.backgroundColor=ce.color),ni.style.transitionDuration=`${Tt}ms`,this._containerElement.appendChild(ni);const it=window.getComputedStyle(ni),Y=it.transitionDuration,Q="none"===it.transitionProperty||"0s"===Y||"0s, 0s"===Y||0===fe.width&&0===fe.height,xe=new bi(this,ni,ce,Q);ni.style.transform="scale3d(1, 1, 1)",xe.state=0,ce.persistent||(this._mostRecentTransientRipple=xe);let Re=null;return!Q&&(Tt||Ie.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ht=()=>this._finishRippleTransition(xe),Jt=()=>this._destroyRipple(xe);ni.addEventListener("transitionend",ht),ni.addEventListener("transitioncancel",Jt),Re={onTransitionEnd:ht,onTransitionCancel:Jt}}),this._activeRipples.set(xe,Re),(Q||!Tt)&&this._finishRippleTransition(xe),xe}fadeOutRipple(V){if(2===V.state||3===V.state)return;const U=V.element,ce={..._i,...V.config.animation};U.style.transitionDuration=`${ce.exitDuration}ms`,U.style.opacity="0",V.state=2,(V._animationForciblyDisabledThroughCss||!ce.exitDuration)&&this._finishRippleTransition(V)}fadeOutAll(){this._getActiveRipples().forEach(V=>V.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(V=>{V.config.persistent||V.fadeOut()})}setupTriggerEvents(V){const U=(0,$e.fI)(V);!this._platform.isBrowser||!U||U===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=U,nn.forEach(ce=>{Ce._eventManager.addHandler(this._ngZone,ce,U,this)}))}handleEvent(V){"mousedown"===V.type?this._onMousedown(V):"touchstart"===V.type?this._onTouchStart(V):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Pt.forEach(U=>{this._triggerElement.addEventListener(U,this,wi)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(V){0===V.state?this._startFadeOutTransition(V):2===V.state&&this._destroyRipple(V)}_startFadeOutTransition(V){const U=V===this._mostRecentTransientRipple,{persistent:ce}=V.config;V.state=1,!ce&&(!U||!this._isPointerDown)&&V.fadeOut()}_destroyRipple(V){const U=this._activeRipples.get(V)??null;this._activeRipples.delete(V),this._activeRipples.size||(this._containerRect=null),V===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),V.state=3,null!==U&&(V.element.removeEventListener("transitionend",U.onTransitionEnd),V.element.removeEventListener("transitioncancel",U.onTransitionCancel)),V.element.remove()}_onMousedown(V){const U=(0,a.X6)(V),ce=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!U&&!ce&&(this._isPointerDown=!0,this.fadeInRipple(V.clientX,V.clientY,this._target.rippleConfig))}_onTouchStart(V){if(!this._target.rippleDisabled&&!(0,a.yG)(V)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const U=V.changedTouches;for(let ce=0;ce<U.length;ce++)this.fadeInRipple(U[ce].clientX,U[ce].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(V=>{!V.config.persistent&&(1===V.state||V.config.terminateOnPointerUp&&0===V.state)&&V.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const V=this._triggerElement;V&&(nn.forEach(U=>Ce._eventManager.removeHandler(U,V,this)),this._pointerUpEventsRegistered&&Pt.forEach(U=>V.removeEventListener(U,this,wi)))}}Ce._eventManager=new Dt;const st=new w.OlP("mat-ripple-global-options");let xt=(()=>{class K{get disabled(){return this._disabled}set disabled(U){U&&this.fadeOutAllNonPersistent(),this._disabled=U,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(U){this._trigger=U,this._setupTriggerEventsIfEnabled()}constructor(U,ce,fe,Ie,We){this._elementRef=U,this._animationMode=We,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Ie||{},this._rippleRenderer=new Ce(this,ce,U,fe)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(U,ce=0,fe){return"number"==typeof U?this._rippleRenderer.fadeInRipple(U,ce,{...this.rippleConfig,...fe}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...U})}}return K.\u0275fac=function(U){return new(U||K)(w.Y36(w.SBq),w.Y36(w.R0b),w.Y36(he.t4),w.Y36(st,8),w.Y36(w.QbO,8))},K.\u0275dir=w.lG2({type:K,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(U,ce){2&U&&w.ekj("mat-ripple-unbounded",ce.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),K})(),Nt=(()=>{class K{}return K.\u0275fac=function(U){return new(U||K)},K.\u0275mod=w.oAB({type:K}),K.\u0275inj=w.cJS({imports:[kt,kt]}),K})(),nt=(()=>{class K{constructor(U){this._animationMode=U,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return K.\u0275fac=function(U){return new(U||K)(w.Y36(w.QbO,8))},K.\u0275cmp=w.Xpm({type:K,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(U,ce){2&U&&w.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===ce.state)("mat-pseudo-checkbox-checked","checked"===ce.state)("mat-pseudo-checkbox-disabled",ce.disabled)("mat-pseudo-checkbox-minimal","minimal"===ce.appearance)("mat-pseudo-checkbox-full","full"===ce.appearance)("_mat-animation-noopable","NoopAnimations"===ce._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(U,ce){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),K})(),De=(()=>{class K{}return K.\u0275fac=function(U){return new(U||K)},K.\u0275mod=w.oAB({type:K}),K.\u0275inj=w.cJS({imports:[kt]}),K})();const be=new w.OlP("MAT_OPTION_PARENT_COMPONENT"),et=new w.OlP("MatOptgroup");let li=0;class qi{constructor(V,U=!1){this.source=V,this.isUserInput=U}}let Li=(()=>{class K{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(U){this._disabled=(0,$e.Ig)(U)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(U,ce,fe,Ie){this._element=U,this._changeDetectorRef=ce,this._parent=fe,this.group=Ie,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+li++,this.onSelectionChange=new w.vpe,this._stateChanges=new Ve.x}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(U,ce){const fe=this._getHostElement();"function"==typeof fe.focus&&fe.focus(ce)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(U){(U.keyCode===je.K5||U.keyCode===je.L_)&&!(0,je.Vb)(U)&&(this._selectViaInteraction(),U.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const U=this.viewValue;U!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=U)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(U=!1){this.onSelectionChange.emit(new qi(this,U))}}return K.\u0275fac=function(U){w.$Z()},K.\u0275dir=w.lG2({type:K,viewQuery:function(U,ce){if(1&U&&w.Gf(ot,7),2&U){let fe;w.iGM(fe=w.CRH())&&(ce._text=fe.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),K})(),pn=(()=>{class K extends Li{constructor(U,ce,fe,Ie){super(U,ce,fe,Ie)}}return K.\u0275fac=function(U){return new(U||K)(w.Y36(w.SBq),w.Y36(w.sBO),w.Y36(be,8),w.Y36(et,8))},K.\u0275cmp=w.Xpm({type:K,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(U,ce){1&U&&w.NdJ("click",function(){return ce._selectViaInteraction()})("keydown",function(Ie){return ce._handleKeydown(Ie)}),2&U&&(w.Ikx("id",ce.id),w.uIk("aria-selected",ce.selected)("aria-disabled",ce.disabled.toString()),w.ekj("mdc-list-item--selected",ce.selected)("mat-mdc-option-multiple",ce.multiple)("mat-mdc-option-active",ce.active)("mdc-list-item--disabled",ce.disabled))},exportAs:["matOption"],features:[w.qOj],ngContentSelectors:Yt,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(U,ce){1&U&&(w.F$t(wt),w.YNc(0,Ye,1,2,"mat-pseudo-checkbox",0),w.Hsn(1),w.TgZ(2,"span",1,2),w.Hsn(4,1),w.qZA(),w.YNc(5,mt,1,1,"mat-pseudo-checkbox",3),w.YNc(6,Gt,2,1,"span",4),w._UZ(7,"div",5)),2&U&&(w.Q6J("ngIf",ce.multiple),w.xp6(5),w.Q6J("ngIf",!ce.multiple&&ce.selected&&!ce.hideSingleSelectionIndicator),w.xp6(1),w.Q6J("ngIf",ce.group&&ce.group._inert),w.xp6(1),w.Q6J("matRippleTrigger",ce._getHostElement())("matRippleDisabled",ce.disabled||ce.disableRipple))},dependencies:[xt,Ze.O5,nt],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),K})();function Se(K,V,U){if(U.length){let ce=V.toArray(),fe=U.toArray(),Ie=0;for(let We=0;We<K+1;We++)ce[We].group&&ce[We].group===fe[Ie]&&Ie++;return Ie}return 0}function re(K,V,U,ce){return K<U?K:K+V>U+ce?Math.max(0,K-ce+V):U}let me=(()=>{class K{}return K.\u0275fac=function(U){return new(U||K)},K.\u0275mod=w.oAB({type:K}),K.\u0275inj=w.cJS({imports:[Nt,Ze.ez,kt,De]}),K})()},9549:(yi,pt,j)=>{"use strict";j.d(pt,{Eo:()=>_i,G_:()=>Pt,KE:()=>De,R9:()=>ei,lN:()=>be});var w=j(4650),a=j(445),se=j(3353),_=j(7579),Ze=j(6451),he=j(2722),$e=j(6895),Ae=j(1281),Ve=j(7340),je=j(9643),Xe=j(3238);const ke=["matFormFieldNotchedOutline",""],ot=["*"],Ye=["textField"],mt=["iconPrefixContainer"],Gt=["textPrefixContainer"];function wt(_e,Qe){1&_e&&w._UZ(0,"span",19)}function Yt(_e,Qe){if(1&_e){const ze=w.EpF();w.TgZ(0,"label",17),w.NdJ("cdkObserveContent",function(){w.CHM(ze);const Ei=w.oxw(2);return w.KtG(Ei._refreshOutlineNotchWidth())}),w.Hsn(1,1),w.YNc(2,wt,1,0,"span",18),w.qZA()}if(2&_e){const ze=w.oxw(2);w.Q6J("floating",ze._shouldLabelFloat())("cdkObserveContentDisabled",!ze._hasOutline())("id",ze._labelId),w.uIk("for",ze._control.id)("aria-owns",ze._control.id),w.xp6(2),w.Q6J("ngIf",!ze.hideRequiredMarker&&ze._control.required)}}function Zt(_e,Qe){if(1&_e&&w.YNc(0,Yt,3,6,"label",16),2&_e){const ze=w.oxw();w.Q6J("ngIf",ze._hasFloatingLabel())}}function Wt(_e,Qe){1&_e&&w._UZ(0,"div",20)}function Ct(_e,Qe){}function Oe(_e,Qe){if(1&_e&&w.YNc(0,Ct,0,0,"ng-template",22),2&_e){w.oxw(2);const ze=w.MAs(1);w.Q6J("ngTemplateOutlet",ze)}}function tt(_e,Qe){if(1&_e&&(w.TgZ(0,"div",21),w.YNc(1,Oe,1,1,"ng-template",9),w.qZA()),2&_e){const ze=w.oxw();w.Q6J("matFormFieldNotchedOutlineOpen",ze._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",ze._labelWidth),w.xp6(1),w.Q6J("ngIf",!ze._forceDisplayInfixLabel())}}function kt(_e,Qe){1&_e&&(w.TgZ(0,"div",23,24),w.Hsn(2,2),w.qZA())}function Ot(_e,Qe){1&_e&&(w.TgZ(0,"div",25,26),w.Hsn(2,3),w.qZA())}function Vt(_e,Qe){}function ai(_e,Qe){if(1&_e&&w.YNc(0,Vt,0,0,"ng-template",22),2&_e){w.oxw();const ze=w.MAs(1);w.Q6J("ngTemplateOutlet",ze)}}function gi(_e,Qe){1&_e&&(w.TgZ(0,"div",27),w.Hsn(1,4),w.qZA())}function hi(_e,Qe){1&_e&&(w.TgZ(0,"div",28),w.Hsn(1,5),w.qZA())}function zi(_e,Qe){1&_e&&w._UZ(0,"div",29)}function xi(_e,Qe){if(1&_e&&(w.TgZ(0,"div",30),w.Hsn(1,6),w.qZA()),2&_e){const ze=w.oxw();w.Q6J("@transitionMessages",ze._subscriptAnimationState)}}function At(_e,Qe){if(1&_e&&(w.TgZ(0,"mat-hint",34),w._uU(1),w.qZA()),2&_e){const ze=w.oxw(2);w.Q6J("id",ze._hintLabelId),w.xp6(1),w.Oqu(ze.hintLabel)}}function Bt(_e,Qe){if(1&_e&&(w.TgZ(0,"div",31),w.YNc(1,At,2,2,"mat-hint",32),w.Hsn(2,7),w._UZ(3,"div",33),w.Hsn(4,8),w.qZA()),2&_e){const ze=w.oxw();w.Q6J("@transitionMessages",ze._subscriptAnimationState),w.xp6(1),w.Q6J("ngIf",ze.hintLabel)}}const $t=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Kt=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let ci=(()=>{class _e{}return _e.\u0275fac=function(ze){return new(ze||_e)},_e.\u0275dir=w.lG2({type:_e,selectors:[["mat-label"]]}),_e})();const zt=new w.OlP("MatError");let Xt=0,ft=(()=>{class _e{constructor(){this.align="start",this.id="mat-mdc-hint-"+Xt++}}return _e.\u0275fac=function(ze){return new(ze||_e)},_e.\u0275dir=w.lG2({type:_e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(ze,et){2&ze&&(w.Ikx("id",et.id),w.uIk("align",null),w.ekj("mat-mdc-form-field-hint-end","end"===et.align))},inputs:{align:"align",id:"id"}}),_e})();const qt=new w.OlP("MatPrefix"),yt=new w.OlP("MatSuffix");let ei=(()=>{class _e{constructor(){this._isText=!1}set _isTextSelector(ze){this._isText=!0}}return _e.\u0275fac=function(ze){return new(ze||_e)},_e.\u0275dir=w.lG2({type:_e,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[w._Bn([{provide:yt,useExisting:_e}])]}),_e})(),pi=(()=>{class _e{constructor(ze){this._elementRef=ze,this.floating=!1}getWidth(){return function ct(_e){if(null!==_e.offsetParent)return _e.scrollWidth;const ze=_e.cloneNode(!0);ze.style.setProperty("position","absolute"),ze.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(ze);const et=ze.scrollWidth;return ze.remove(),et}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return _e.\u0275fac=function(ze){return new(ze||_e)(w.Y36(w.SBq))},_e.\u0275dir=w.lG2({type:_e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(ze,et){2&ze&&w.ekj("mdc-floating-label--float-above",et.floating)},inputs:{floating:"floating"}}),_e})();const Ti="mdc-line-ripple--active",fi="mdc-line-ripple--deactivating";let bi=(()=>{class _e{constructor(ze,et){this._elementRef=ze,this._handleTransitionEnd=Ei=>{const li=this._elementRef.nativeElement.classList,qi=li.contains(fi);"opacity"===Ei.propertyName&&qi&&li.remove(Ti,fi)},et.runOutsideAngular(()=>{ze.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const ze=this._elementRef.nativeElement.classList;ze.remove(fi),ze.add(Ti)}deactivate(){this._elementRef.nativeElement.classList.add(fi)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return _e.\u0275fac=function(ze){return new(ze||_e)(w.Y36(w.SBq),w.Y36(w.R0b))},_e.\u0275dir=w.lG2({type:_e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),_e})(),rt=(()=>{class _e{constructor(ze,et){this._elementRef=ze,this._ngZone=et,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const ze=this._elementRef.nativeElement.querySelector(".mdc-floating-label");ze?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(ze.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>ze.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return _e.\u0275fac=function(ze){return new(ze||_e)(w.Y36(w.SBq),w.Y36(w.R0b))},_e.\u0275cmp=w.Xpm({type:_e,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(ze,et){2&ze&&w.ekj("mdc-notched-outline--notched",et.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:ke,ngContentSelectors:ot,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(ze,et){1&ze&&(w.F$t(),w._UZ(0,"div",0),w.TgZ(1,"div",1),w.Hsn(2),w.qZA(),w._UZ(3,"div",2)),2&ze&&(w.xp6(1),w.Udp("width",et._getNotchWidth()))},encapsulation:2,changeDetection:0}),_e})();const Dt={transitionMessages:(0,Ve.X$)("transitionMessages",[(0,Ve.SB)("enter",(0,Ve.oB)({opacity:1,transform:"translateY(0%)"})),(0,Ve.eR)("void => enter",[(0,Ve.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Ve.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let _i=(()=>{class _e{}return _e.\u0275fac=function(ze){return new(ze||_e)},_e.\u0275dir=w.lG2({type:_e}),_e})();const Pt=new w.OlP("MatFormField"),Ce=new w.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Ee=0,De=(()=>{class _e{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(ze){this._hideRequiredMarker=(0,Ae.Ig)(ze)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(ze){ze!==this._floatLabel&&(this._floatLabel=ze,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(ze){const et=this._appearance;this._appearance=ze||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==et&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(ze){this._subscriptSizing=ze||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(ze){this._hintLabel=ze,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(ze){this._explicitFormFieldControl=ze}constructor(ze,et,Ei,li,qi,Li,pn,Se){this._elementRef=ze,this._changeDetectorRef=et,this._ngZone=Ei,this._dir=li,this._platform=qi,this._defaults=Li,this._animationMode=pn,this._document=Se,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Ee++,this._hintLabelId="mat-mdc-hint-"+Ee++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new _.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,Li&&(Li.appearance&&(this.appearance=Li.appearance),this._hideRequiredMarker=Boolean(Li?.hideRequiredMarker),Li.color&&(this.color=Li.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const ze=this._control;ze.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${ze.controlType}`),ze.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),ze.ngControl&&ze.ngControl.valueChanges&&ze.ngControl.valueChanges.pipe((0,he.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(ze=>!ze._isText),this._hasTextPrefix=!!this._prefixChildren.find(ze=>ze._isText),this._hasIconSuffix=!!this._suffixChildren.find(ze=>!ze._isText),this._hasTextSuffix=!!this._suffixChildren.find(ze=>ze._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,Ze.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,he.R)(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe((0,he.R)(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(ze){const et=this._control?this._control.ngControl:null;return et&&et[ze]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let ze=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&ze.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const et=this._hintChildren?this._hintChildren.find(li=>"start"===li.align):null,Ei=this._hintChildren?this._hintChildren.find(li=>"end"===li.align):null;et?ze.push(et.id):this._hintLabel&&ze.push(this._hintLabelId),Ei&&ze.push(Ei.id)}else this._errorChildren&&ze.push(...this._errorChildren.map(et=>et.id));this._control.setDescribedByIds(ze)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const ze=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(ze.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const et=this._iconPrefixContainer?.nativeElement,Ei=this._textPrefixContainer?.nativeElement,li=et?.getBoundingClientRect().width??0,qi=Ei?.getBoundingClientRect().width??0;ze.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${li+qi}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const ze=this._elementRef.nativeElement;if(ze.getRootNode){const et=ze.getRootNode();return et&&et!==ze}return document.documentElement.contains(ze)}}return _e.\u0275fac=function(ze){return new(ze||_e)(w.Y36(w.SBq),w.Y36(w.sBO),w.Y36(w.R0b),w.Y36(a.Is),w.Y36(se.t4),w.Y36(Ce,8),w.Y36(w.QbO,8),w.Y36($e.K0))},_e.\u0275cmp=w.Xpm({type:_e,selectors:[["mat-form-field"]],contentQueries:function(ze,et,Ei){if(1&ze&&(w.Suo(Ei,ci,5),w.Suo(Ei,ci,7),w.Suo(Ei,_i,5),w.Suo(Ei,qt,5),w.Suo(Ei,yt,5),w.Suo(Ei,zt,5),w.Suo(Ei,ft,5)),2&ze){let li;w.iGM(li=w.CRH())&&(et._labelChildNonStatic=li.first),w.iGM(li=w.CRH())&&(et._labelChildStatic=li.first),w.iGM(li=w.CRH())&&(et._formFieldControl=li.first),w.iGM(li=w.CRH())&&(et._prefixChildren=li),w.iGM(li=w.CRH())&&(et._suffixChildren=li),w.iGM(li=w.CRH())&&(et._errorChildren=li),w.iGM(li=w.CRH())&&(et._hintChildren=li)}},viewQuery:function(ze,et){if(1&ze&&(w.Gf(Ye,5),w.Gf(mt,5),w.Gf(Gt,5),w.Gf(pi,5),w.Gf(rt,5),w.Gf(bi,5)),2&ze){let Ei;w.iGM(Ei=w.CRH())&&(et._textField=Ei.first),w.iGM(Ei=w.CRH())&&(et._iconPrefixContainer=Ei.first),w.iGM(Ei=w.CRH())&&(et._textPrefixContainer=Ei.first),w.iGM(Ei=w.CRH())&&(et._floatingLabel=Ei.first),w.iGM(Ei=w.CRH())&&(et._notchedOutline=Ei.first),w.iGM(Ei=w.CRH())&&(et._lineRipple=Ei.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(ze,et){2&ze&&w.ekj("mat-mdc-form-field-label-always-float",et._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",et._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",et._hasIconSuffix)("mat-form-field-invalid",et._control.errorState)("mat-form-field-disabled",et._control.disabled)("mat-form-field-autofilled",et._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===et._animationMode)("mat-form-field-appearance-fill","fill"==et.appearance)("mat-form-field-appearance-outline","outline"==et.appearance)("mat-form-field-hide-placeholder",et._hasFloatingLabel()&&!et._shouldLabelFloat())("mat-focused",et._control.focused)("mat-primary","accent"!==et.color&&"warn"!==et.color)("mat-accent","accent"===et.color)("mat-warn","warn"===et.color)("ng-untouched",et._shouldForward("untouched"))("ng-touched",et._shouldForward("touched"))("ng-pristine",et._shouldForward("pristine"))("ng-dirty",et._shouldForward("dirty"))("ng-valid",et._shouldForward("valid"))("ng-invalid",et._shouldForward("invalid"))("ng-pending",et._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[w._Bn([{provide:Pt,useExisting:_e}])],ngContentSelectors:Kt,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(ze,et){1&ze&&(w.F$t($t),w.YNc(0,Zt,1,1,"ng-template",null,0,w.W1O),w.TgZ(2,"div",1,2),w.NdJ("click",function(li){return et._control.onContainerClick&&et._control.onContainerClick(li)}),w.YNc(4,Wt,1,0,"div",3),w.TgZ(5,"div",4),w.YNc(6,tt,2,3,"div",5),w.YNc(7,kt,3,0,"div",6),w.YNc(8,Ot,3,0,"div",7),w.TgZ(9,"div",8),w.YNc(10,ai,1,1,"ng-template",9),w.Hsn(11),w.qZA(),w.YNc(12,gi,2,0,"div",10),w.YNc(13,hi,2,0,"div",11),w.qZA(),w.YNc(14,zi,1,0,"div",12),w.qZA(),w.TgZ(15,"div",13),w.YNc(16,xi,2,1,"div",14),w.YNc(17,Bt,5,2,"div",15),w.qZA()),2&ze&&(w.xp6(2),w.ekj("mdc-text-field--filled",!et._hasOutline())("mdc-text-field--outlined",et._hasOutline())("mdc-text-field--no-label",!et._hasFloatingLabel())("mdc-text-field--disabled",et._control.disabled)("mdc-text-field--invalid",et._control.errorState),w.xp6(2),w.Q6J("ngIf",!et._hasOutline()&&!et._control.disabled),w.xp6(2),w.Q6J("ngIf",et._hasOutline()),w.xp6(1),w.Q6J("ngIf",et._hasIconPrefix),w.xp6(1),w.Q6J("ngIf",et._hasTextPrefix),w.xp6(2),w.Q6J("ngIf",!et._hasOutline()||et._forceDisplayInfixLabel()),w.xp6(2),w.Q6J("ngIf",et._hasTextSuffix),w.xp6(1),w.Q6J("ngIf",et._hasIconSuffix),w.xp6(1),w.Q6J("ngIf",!et._hasOutline()),w.xp6(1),w.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===et.subscriptSizing),w.Q6J("ngSwitch",et._getDisplayedMessages()),w.xp6(1),w.Q6J("ngSwitchCase","error"),w.xp6(1),w.Q6J("ngSwitchCase","hint"))},dependencies:[$e.O5,$e.tP,$e.RF,$e.n9,je.wD,ft,pi,rt,bi],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[Dt.transitionMessages]},changeDetection:0}),_e})(),be=(()=>{class _e{}return _e.\u0275fac=function(ze){return new(ze||_e)},_e.\u0275mod=w.oAB({type:_e}),_e.\u0275inj=w.cJS({imports:[Xe.BQ,$e.ez,je.Q8,Xe.BQ]}),_e})()},7392:(yi,pt,j)=>{"use strict";j.d(pt,{Hw:()=>Lt,Ps:()=>Xt,jv:()=>Vt});var w=j(4650),a=j(3238),se=j(1281),_=j(6895),Ze=j(9646),he=j(2843),$e=j(4128),Ae=j(727),Ve=j(8505),je=j(4004),Xe=j(262),ke=j(8746),ot=j(3099),Ye=j(5698),mt=j(529),Gt=j(1481);const wt=["*"];let Yt;function Wt(ft){return function Zt(){if(void 0===Yt&&(Yt=null,typeof window<"u")){const ft=window;void 0!==ft.trustedTypes&&(Yt=ft.trustedTypes.createPolicy("angular#components",{createHTML:qt=>qt}))}return Yt}()?.createHTML(ft)||ft}function Ct(ft){return Error(`Unable to find icon with the name "${ft}"`)}function tt(ft){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${ft}".`)}function kt(ft){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${ft}".`)}class Ot{constructor(qt,Je,yt){this.url=qt,this.svgText=Je,this.options=yt}}let Vt=(()=>{class ft{constructor(Je,yt,ei,pi){this._httpClient=Je,this._sanitizer=yt,this._errorHandler=pi,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=ei}addSvgIcon(Je,yt,ei){return this.addSvgIconInNamespace("",Je,yt,ei)}addSvgIconLiteral(Je,yt,ei){return this.addSvgIconLiteralInNamespace("",Je,yt,ei)}addSvgIconInNamespace(Je,yt,ei,pi){return this._addSvgIconConfig(Je,yt,new Ot(ei,null,pi))}addSvgIconResolver(Je){return this._resolvers.push(Je),this}addSvgIconLiteralInNamespace(Je,yt,ei,pi){const ct=this._sanitizer.sanitize(w.q3G.HTML,ei);if(!ct)throw kt(ei);const Ti=Wt(ct);return this._addSvgIconConfig(Je,yt,new Ot("",Ti,pi))}addSvgIconSet(Je,yt){return this.addSvgIconSetInNamespace("",Je,yt)}addSvgIconSetLiteral(Je,yt){return this.addSvgIconSetLiteralInNamespace("",Je,yt)}addSvgIconSetInNamespace(Je,yt,ei){return this._addSvgIconSetConfig(Je,new Ot(yt,null,ei))}addSvgIconSetLiteralInNamespace(Je,yt,ei){const pi=this._sanitizer.sanitize(w.q3G.HTML,yt);if(!pi)throw kt(yt);const ct=Wt(pi);return this._addSvgIconSetConfig(Je,new Ot("",ct,ei))}registerFontClassAlias(Je,yt=Je){return this._fontCssClassesByAlias.set(Je,yt),this}classNameForFontAlias(Je){return this._fontCssClassesByAlias.get(Je)||Je}setDefaultFontSetClass(...Je){return this._defaultFontSetClass=Je,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Je){const yt=this._sanitizer.sanitize(w.q3G.RESOURCE_URL,Je);if(!yt)throw tt(Je);const ei=this._cachedIconsByUrl.get(yt);return ei?(0,Ze.of)(hi(ei)):this._loadSvgIconFromConfig(new Ot(Je,null)).pipe((0,Ve.b)(pi=>this._cachedIconsByUrl.set(yt,pi)),(0,je.U)(pi=>hi(pi)))}getNamedSvgIcon(Je,yt=""){const ei=zi(yt,Je);let pi=this._svgIconConfigs.get(ei);if(pi)return this._getSvgFromConfig(pi);if(pi=this._getIconConfigFromResolvers(yt,Je),pi)return this._svgIconConfigs.set(ei,pi),this._getSvgFromConfig(pi);const ct=this._iconSetConfigs.get(yt);return ct?this._getSvgFromIconSetConfigs(Je,ct):(0,he._)(Ct(ei))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Je){return Je.svgText?(0,Ze.of)(hi(this._svgElementFromConfig(Je))):this._loadSvgIconFromConfig(Je).pipe((0,je.U)(yt=>hi(yt)))}_getSvgFromIconSetConfigs(Je,yt){const ei=this._extractIconWithNameFromAnySet(Je,yt);if(ei)return(0,Ze.of)(ei);const pi=yt.filter(ct=>!ct.svgText).map(ct=>this._loadSvgIconSetFromConfig(ct).pipe((0,Xe.K)(Ti=>{const bi=`Loading icon set URL: ${this._sanitizer.sanitize(w.q3G.RESOURCE_URL,ct.url)} failed: ${Ti.message}`;return this._errorHandler.handleError(new Error(bi)),(0,Ze.of)(null)})));return(0,$e.D)(pi).pipe((0,je.U)(()=>{const ct=this._extractIconWithNameFromAnySet(Je,yt);if(!ct)throw Ct(Je);return ct}))}_extractIconWithNameFromAnySet(Je,yt){for(let ei=yt.length-1;ei>=0;ei--){const pi=yt[ei];if(pi.svgText&&pi.svgText.toString().indexOf(Je)>-1){const ct=this._svgElementFromConfig(pi),Ti=this._extractSvgIconFromSet(ct,Je,pi.options);if(Ti)return Ti}}return null}_loadSvgIconFromConfig(Je){return this._fetchIcon(Je).pipe((0,Ve.b)(yt=>Je.svgText=yt),(0,je.U)(()=>this._svgElementFromConfig(Je)))}_loadSvgIconSetFromConfig(Je){return Je.svgText?(0,Ze.of)(null):this._fetchIcon(Je).pipe((0,Ve.b)(yt=>Je.svgText=yt))}_extractSvgIconFromSet(Je,yt,ei){const pi=Je.querySelector(`[id="${yt}"]`);if(!pi)return null;const ct=pi.cloneNode(!0);if(ct.removeAttribute("id"),"svg"===ct.nodeName.toLowerCase())return this._setSvgAttributes(ct,ei);if("symbol"===ct.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(ct),ei);const Ti=this._svgElementFromString(Wt("<svg></svg>"));return Ti.appendChild(ct),this._setSvgAttributes(Ti,ei)}_svgElementFromString(Je){const yt=this._document.createElement("DIV");yt.innerHTML=Je;const ei=yt.querySelector("svg");if(!ei)throw Error("<svg> tag not found");return ei}_toSvgElement(Je){const yt=this._svgElementFromString(Wt("<svg></svg>")),ei=Je.attributes;for(let pi=0;pi<ei.length;pi++){const{name:ct,value:Ti}=ei[pi];"id"!==ct&&yt.setAttribute(ct,Ti)}for(let pi=0;pi<Je.childNodes.length;pi++)Je.childNodes[pi].nodeType===this._document.ELEMENT_NODE&&yt.appendChild(Je.childNodes[pi].cloneNode(!0));return yt}_setSvgAttributes(Je,yt){return Je.setAttribute("fit",""),Je.setAttribute("height","100%"),Je.setAttribute("width","100%"),Je.setAttribute("preserveAspectRatio","xMidYMid meet"),Je.setAttribute("focusable","false"),yt&&yt.viewBox&&Je.setAttribute("viewBox",yt.viewBox),Je}_fetchIcon(Je){const{url:yt,options:ei}=Je,pi=ei?.withCredentials??!1;if(!this._httpClient)throw function Oe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==yt)throw Error(`Cannot fetch icon from URL "${yt}".`);const ct=this._sanitizer.sanitize(w.q3G.RESOURCE_URL,yt);if(!ct)throw tt(yt);const Ti=this._inProgressUrlFetches.get(ct);if(Ti)return Ti;const fi=this._httpClient.get(ct,{responseType:"text",withCredentials:pi}).pipe((0,je.U)(bi=>Wt(bi)),(0,ke.x)(()=>this._inProgressUrlFetches.delete(ct)),(0,ot.B)());return this._inProgressUrlFetches.set(ct,fi),fi}_addSvgIconConfig(Je,yt,ei){return this._svgIconConfigs.set(zi(Je,yt),ei),this}_addSvgIconSetConfig(Je,yt){const ei=this._iconSetConfigs.get(Je);return ei?ei.push(yt):this._iconSetConfigs.set(Je,[yt]),this}_svgElementFromConfig(Je){if(!Je.svgElement){const yt=this._svgElementFromString(Je.svgText);this._setSvgAttributes(yt,Je.options),Je.svgElement=yt}return Je.svgElement}_getIconConfigFromResolvers(Je,yt){for(let ei=0;ei<this._resolvers.length;ei++){const pi=this._resolvers[ei](yt,Je);if(pi)return xi(pi)?new Ot(pi.url,null,pi.options):new Ot(pi,null)}}}return ft.\u0275fac=function(Je){return new(Je||ft)(w.LFG(mt.eN,8),w.LFG(Gt.H7),w.LFG(_.K0,8),w.LFG(w.qLn))},ft.\u0275prov=w.Yz7({token:ft,factory:ft.\u0275fac,providedIn:"root"}),ft})();function hi(ft){return ft.cloneNode(!0)}function zi(ft,qt){return ft+":"+qt}function xi(ft){return!(!ft.url||!ft.options)}const At=(0,a.pj)(class{constructor(ft){this._elementRef=ft}}),Bt=new w.OlP("MAT_ICON_DEFAULT_OPTIONS"),$t=new w.OlP("mat-icon-location",{providedIn:"root",factory:function Kt(){const ft=(0,w.f3M)(_.K0),qt=ft?ft.location:null;return{getPathname:()=>qt?qt.pathname+qt.search:""}}}),ci=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],oi=ci.map(ft=>`[${ft}]`).join(", "),zt=/^url\(['"]?#(.*?)['"]?\)$/;let Lt=(()=>{class ft extends At{get inline(){return this._inline}set inline(Je){this._inline=(0,se.Ig)(Je)}get svgIcon(){return this._svgIcon}set svgIcon(Je){Je!==this._svgIcon&&(Je?this._updateSvgIcon(Je):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Je)}get fontSet(){return this._fontSet}set fontSet(Je){const yt=this._cleanupFontValue(Je);yt!==this._fontSet&&(this._fontSet=yt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Je){const yt=this._cleanupFontValue(Je);yt!==this._fontIcon&&(this._fontIcon=yt,this._updateFontIconClasses())}constructor(Je,yt,ei,pi,ct,Ti){super(Je),this._iconRegistry=yt,this._location=pi,this._errorHandler=ct,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Ae.w0.EMPTY,Ti&&(Ti.color&&(this.color=this.defaultColor=Ti.color),Ti.fontSet&&(this.fontSet=Ti.fontSet)),ei||Je.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(Je){if(!Je)return["",""];const yt=Je.split(":");switch(yt.length){case 1:return["",yt[0]];case 2:return yt;default:throw Error(`Invalid icon name: "${Je}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Je=this._elementsWithExternalReferences;if(Je&&Je.size){const yt=this._location.getPathname();yt!==this._previousPath&&(this._previousPath=yt,this._prependPathToReferences(yt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Je){this._clearSvgElement();const yt=this._location.getPathname();this._previousPath=yt,this._cacheChildrenWithExternalReferences(Je),this._prependPathToReferences(yt),this._elementRef.nativeElement.appendChild(Je)}_clearSvgElement(){const Je=this._elementRef.nativeElement;let yt=Je.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();yt--;){const ei=Je.childNodes[yt];(1!==ei.nodeType||"svg"===ei.nodeName.toLowerCase())&&ei.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Je=this._elementRef.nativeElement,yt=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(ei=>ei.length>0);this._previousFontSetClass.forEach(ei=>Je.classList.remove(ei)),yt.forEach(ei=>Je.classList.add(ei)),this._previousFontSetClass=yt,this.fontIcon!==this._previousFontIconClass&&!yt.includes("mat-ligature-font")&&(this._previousFontIconClass&&Je.classList.remove(this._previousFontIconClass),this.fontIcon&&Je.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Je){return"string"==typeof Je?Je.trim().split(" ")[0]:Je}_prependPathToReferences(Je){const yt=this._elementsWithExternalReferences;yt&&yt.forEach((ei,pi)=>{ei.forEach(ct=>{pi.setAttribute(ct.name,`url('${Je}#${ct.value}')`)})})}_cacheChildrenWithExternalReferences(Je){const yt=Je.querySelectorAll(oi),ei=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let pi=0;pi<yt.length;pi++)ci.forEach(ct=>{const Ti=yt[pi],fi=Ti.getAttribute(ct),bi=fi?fi.match(zt):null;if(bi){let rt=ei.get(Ti);rt||(rt=[],ei.set(Ti,rt)),rt.push({name:ct,value:bi[1]})}})}_updateSvgIcon(Je){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Je){const[yt,ei]=this._splitIconName(Je);yt&&(this._svgNamespace=yt),ei&&(this._svgName=ei),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(ei,yt).pipe((0,Ye.q)(1)).subscribe(pi=>this._setSvgElement(pi),pi=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${yt}:${ei}! ${pi.message}`))})}}}return ft.\u0275fac=function(Je){return new(Je||ft)(w.Y36(w.SBq),w.Y36(Vt),w.$8M("aria-hidden"),w.Y36($t),w.Y36(w.qLn),w.Y36(Bt,8))},ft.\u0275cmp=w.Xpm({type:ft,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(Je,yt){2&Je&&(w.uIk("data-mat-icon-type",yt._usingFontIcon()?"font":"svg")("data-mat-icon-name",yt._svgName||yt.fontIcon)("data-mat-icon-namespace",yt._svgNamespace||yt.fontSet)("fontIcon",yt._usingFontIcon()?yt.fontIcon:null),w.ekj("mat-icon-inline",yt.inline)("mat-icon-no-color","primary"!==yt.color&&"accent"!==yt.color&&"warn"!==yt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[w.qOj],ngContentSelectors:wt,decls:1,vars:0,template:function(Je,yt){1&Je&&(w.F$t(),w.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),ft})(),Xt=(()=>{class ft{}return ft.\u0275fac=function(Je){return new(Je||ft)},ft.\u0275mod=w.oAB({type:ft}),ft.\u0275inj=w.cJS({imports:[a.BQ,a.BQ]}),ft})()},4385:(yi,pt,j)=>{"use strict";j.d(pt,{LD:()=>Ti,gD:()=>ct});var w=j(8184),a=j(6895),se=j(4650),_=j(3238),Ze=j(9549),he=j(8605),$e=j(7253),Ae=j(445),Ve=j(1281),je=j(5017),Xe=j(9521),ke=j(4006),ot=j(7579),Ye=j(9770),mt=j(6451),Gt=j(8675),wt=j(3900),Yt=j(5698),Zt=j(9300),Wt=j(4004),Ct=j(1884),Oe=j(2722),tt=j(7340);const kt=["trigger"],Ot=["panel"];function Vt(fi,bi){if(1&fi&&(se.TgZ(0,"span",10),se._uU(1),se.qZA()),2&fi){const rt=se.oxw();se.xp6(1),se.Oqu(rt.placeholder)}}function ai(fi,bi){if(1&fi&&(se.TgZ(0,"span",14),se._uU(1),se.qZA()),2&fi){const rt=se.oxw(2);se.xp6(1),se.Oqu(rt.triggerValue)}}function gi(fi,bi){1&fi&&se.Hsn(0,0,["*ngSwitchCase","true"])}function hi(fi,bi){if(1&fi&&(se.TgZ(0,"span",11),se.YNc(1,ai,2,1,"span",12),se.YNc(2,gi,1,0,"ng-content",13),se.qZA()),2&fi){const rt=se.oxw();se.Q6J("ngSwitch",!!rt.customTrigger),se.xp6(2),se.Q6J("ngSwitchCase",!0)}}function zi(fi,bi){if(1&fi){const rt=se.EpF();se.O4$(),se.kcU(),se.TgZ(0,"div",15,16),se.NdJ("@transformPanel.done",function(_i){se.CHM(rt);const Ui=se.oxw();return se.KtG(Ui._panelDoneAnimatingStream.next(_i.toState))})("keydown",function(_i){se.CHM(rt);const Ui=se.oxw();return se.KtG(Ui._handleKeydown(_i))}),se.Hsn(2,1),se.qZA()}if(2&fi){const rt=se.oxw();se.Gre("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",rt._getPanelTheme(),""),se.Q6J("ngClass",rt.panelClass)("@transformPanel","showing"),se.uIk("id",rt.id+"-panel")("aria-multiselectable",rt.multiple)("aria-label",rt.ariaLabel||null)("aria-labelledby",rt._getPanelAriaLabelledby())}}const xi=[[["mat-select-trigger"]],"*"],At=["mat-select-trigger","*"],Bt={transformPanelWrap:(0,tt.X$)("transformPanelWrap",[(0,tt.eR)("* => void",(0,tt.IO)("@transformPanel",[(0,tt.pV)()],{optional:!0}))]),transformPanel:(0,tt.X$)("transformPanel",[(0,tt.SB)("void",(0,tt.oB)({opacity:0,transform:"scale(1, 0.8)"})),(0,tt.eR)("void => showing",(0,tt.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,tt.oB)({opacity:1,transform:"scale(1, 1)"}))),(0,tt.eR)("* => void",(0,tt.jt)("100ms linear",(0,tt.oB)({opacity:0})))])};let oi=0;const zt=new se.OlP("mat-select-scroll-strategy"),Xt=new se.OlP("MAT_SELECT_CONFIG"),ft={provide:zt,deps:[w.aV],useFactory:function Lt(fi){return()=>fi.scrollStrategies.reposition()}},qt=new se.OlP("MatSelectTrigger");class Je{constructor(bi,rt){this.source=bi,this.value=rt}}const yt=(0,_.Kr)((0,_.sb)((0,_.Id)((0,_.FD)(class{constructor(fi,bi,rt,Dt,_i){this._elementRef=fi,this._defaultErrorStateMatcher=bi,this._parentForm=rt,this._parentFormGroup=Dt,this.ngControl=_i,this.stateChanges=new ot.x}}))));let ei=(()=>{class fi extends yt{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(rt){this._placeholder=rt,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(ke.kI.required)??!1}set required(rt){this._required=(0,Ve.Ig)(rt),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(rt){this._multiple=(0,Ve.Ig)(rt)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(rt){this._disableOptionCentering=(0,Ve.Ig)(rt)}get compareWith(){return this._compareWith}set compareWith(rt){this._compareWith=rt,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(rt){this._assignValue(rt)&&this._onChange(rt)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(rt){this._typeaheadDebounceInterval=(0,Ve.su)(rt)}get id(){return this._id}set id(rt){this._id=rt||this._uid,this.stateChanges.next()}constructor(rt,Dt,_i,Ui,wi,nn,Pt,Ce,Ee,st,xt,Nt,nt,De){super(wi,Ui,Pt,Ce,st),this._viewportRuler=rt,this._changeDetectorRef=Dt,this._ngZone=_i,this._dir=nn,this._parentFormField=Ee,this._liveAnnouncer=nt,this._defaultOptions=De,this._panelOpen=!1,this._compareWith=(be,_e)=>be===_e,this._uid="mat-select-"+oi++,this._triggerAriaLabelledBy=null,this._destroy=new ot.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+oi++,this._panelDoneAnimatingStream=new ot.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,Ye.P)(()=>{const be=this.options;return be?be.changes.pipe((0,Gt.O)(be),(0,wt.w)(()=>(0,mt.T)(...be.map(_e=>_e.onSelectionChange)))):this._ngZone.onStable.pipe((0,Yt.q)(1),(0,wt.w)(()=>this.optionSelectionChanges))}),this.openedChange=new se.vpe,this._openedStream=this.openedChange.pipe((0,Zt.h)(be=>be),(0,Wt.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,Zt.h)(be=>!be),(0,Wt.U)(()=>{})),this.selectionChange=new se.vpe,this.valueChange=new se.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=De?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=De.typeaheadDebounceInterval),this._scrollStrategyFactory=Nt,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(xt)||0,this.id=this.id}ngOnInit(){this._selectionModel=new je.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,Ct.x)(),(0,Oe.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Oe.R)(this._destroy)).subscribe(rt=>{rt.added.forEach(Dt=>Dt.select()),rt.removed.forEach(Dt=>Dt.deselect())}),this.options.changes.pipe((0,Gt.O)(null),(0,Oe.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const rt=this._getTriggerAriaLabelledby(),Dt=this.ngControl;if(rt!==this._triggerAriaLabelledBy){const _i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=rt,rt?_i.setAttribute("aria-labelledby",rt):_i.removeAttribute("aria-labelledby")}Dt&&(this._previousControl!==Dt.control&&(void 0!==this._previousControl&&null!==Dt.disabled&&Dt.disabled!==this.disabled&&(this.disabled=Dt.disabled),this._previousControl=Dt.control),this.updateErrorState())}ngOnChanges(rt){(rt.disabled||rt.userAriaDescribedBy)&&this.stateChanges.next(),rt.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(rt){this._assignValue(rt)}registerOnChange(rt){this._onChange=rt}registerOnTouched(rt){this._onTouched=rt}setDisabledState(rt){this.disabled=rt,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const rt=this._selectionModel.selected.map(Dt=>Dt.viewValue);return this._isRtl()&&rt.reverse(),rt.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(rt){this.disabled||(this.panelOpen?this._handleOpenKeydown(rt):this._handleClosedKeydown(rt))}_handleClosedKeydown(rt){const Dt=rt.keyCode,_i=Dt===Xe.JH||Dt===Xe.LH||Dt===Xe.oh||Dt===Xe.SV,Ui=Dt===Xe.K5||Dt===Xe.L_,wi=this._keyManager;if(!wi.isTyping()&&Ui&&!(0,Xe.Vb)(rt)||(this.multiple||rt.altKey)&&_i)rt.preventDefault(),this.open();else if(!this.multiple){const nn=this.selected;wi.onKeydown(rt);const Pt=this.selected;Pt&&nn!==Pt&&this._liveAnnouncer.announce(Pt.viewValue,1e4)}}_handleOpenKeydown(rt){const Dt=this._keyManager,_i=rt.keyCode,Ui=_i===Xe.JH||_i===Xe.LH,wi=Dt.isTyping();if(Ui&&rt.altKey)rt.preventDefault(),this.close();else if(wi||_i!==Xe.K5&&_i!==Xe.L_||!Dt.activeItem||(0,Xe.Vb)(rt))if(!wi&&this._multiple&&_i===Xe.A&&rt.ctrlKey){rt.preventDefault();const nn=this.options.some(Pt=>!Pt.disabled&&!Pt.selected);this.options.forEach(Pt=>{Pt.disabled||(nn?Pt.select():Pt.deselect())})}else{const nn=Dt.activeItemIndex;Dt.onKeydown(rt),this._multiple&&Ui&&rt.shiftKey&&Dt.activeItem&&Dt.activeItemIndex!==nn&&Dt.activeItem._selectViaInteraction()}else rt.preventDefault(),Dt.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Yt.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(rt){if(this.options.forEach(Dt=>Dt.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&rt)Array.isArray(rt),rt.forEach(Dt=>this._selectOptionByValue(Dt)),this._sortValues();else{const Dt=this._selectOptionByValue(rt);Dt?this._keyManager.updateActiveItem(Dt):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(rt){const Dt=this.options.find(_i=>{if(this._selectionModel.isSelected(_i))return!1;try{return null!=_i.value&&this._compareWith(_i.value,rt)}catch{return!1}});return Dt&&this._selectionModel.select(Dt),Dt}_assignValue(rt){return!!(rt!==this._value||this._multiple&&Array.isArray(rt))&&(this.options&&this._setSelectionByValue(rt),this._value=rt,!0)}_initKeyManager(){this._keyManager=new $e.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const rt=(0,mt.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Oe.R)(rt)).subscribe(Dt=>{this._onSelect(Dt.source,Dt.isUserInput),Dt.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,mt.T)(...this.options.map(Dt=>Dt._stateChanges)).pipe((0,Oe.R)(rt)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(rt,Dt){const _i=this._selectionModel.isSelected(rt);null!=rt.value||this._multiple?(_i!==rt.selected&&(rt.selected?this._selectionModel.select(rt):this._selectionModel.deselect(rt)),Dt&&this._keyManager.setActiveItem(rt),this.multiple&&(this._sortValues(),Dt&&this.focus())):(rt.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(rt.value)),_i!==this._selectionModel.isSelected(rt)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const rt=this.options.toArray();this._selectionModel.sort((Dt,_i)=>this.sortComparator?this.sortComparator(Dt,_i,rt):rt.indexOf(Dt)-rt.indexOf(_i)),this.stateChanges.next()}}_propagateChanges(rt){let Dt=null;Dt=this.multiple?this.selected.map(_i=>_i.value):this.selected?this.selected.value:rt,this._value=Dt,this.valueChange.emit(Dt),this._onChange(Dt),this.selectionChange.emit(this._getChangeEvent(Dt)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(rt){this._elementRef.nativeElement.focus(rt)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const rt=this._parentFormField?.getLabelId();return this.ariaLabelledby?(rt?rt+" ":"")+this.ariaLabelledby:rt}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const rt=this._parentFormField?.getLabelId();let Dt=(rt?rt+" ":"")+this._valueId;return this.ariaLabelledby&&(Dt+=" "+this.ariaLabelledby),Dt}_panelDoneAnimating(rt){this.openedChange.emit(rt)}setDescribedByIds(rt){rt.length?this._elementRef.nativeElement.setAttribute("aria-describedby",rt.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return fi.\u0275fac=function(rt){return new(rt||fi)(se.Y36(he.rL),se.Y36(se.sBO),se.Y36(se.R0b),se.Y36(_.rD),se.Y36(se.SBq),se.Y36(Ae.Is,8),se.Y36(ke.F,8),se.Y36(ke.sg,8),se.Y36(Ze.G_,8),se.Y36(ke.a5,10),se.$8M("tabindex"),se.Y36(zt),se.Y36($e.Kd),se.Y36(Xt,8))},fi.\u0275dir=se.lG2({type:fi,viewQuery:function(rt,Dt){if(1&rt&&(se.Gf(kt,5),se.Gf(Ot,5),se.Gf(w.pI,5)),2&rt){let _i;se.iGM(_i=se.CRH())&&(Dt.trigger=_i.first),se.iGM(_i=se.CRH())&&(Dt.panel=_i.first),se.iGM(_i=se.CRH())&&(Dt._overlayDir=_i.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[se.qOj,se.TTD]}),fi})(),ct=(()=>{class fi extends ei{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Oe.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(rt){const Dt=this.options.toArray()[rt];if(Dt){const _i=this.panel.nativeElement,Ui=(0,_.CB)(rt,this.options,this.optionGroups),wi=Dt._getHostElement();_i.scrollTop=0===rt&&1===Ui?0:(0,_.jH)(wi.offsetTop,wi.offsetHeight,_i.scrollTop,_i.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(rt){return new Je(this,rt)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof w.xu?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(rt){this._hideSingleSelectionIndicator=(0,Ve.Ig)(rt),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const rt of this.options)rt._changeDetectorRef.markForCheck()}}return fi.\u0275fac=function(){let bi;return function(Dt){return(bi||(bi=se.n5z(fi)))(Dt||fi)}}(),fi.\u0275cmp=se.Xpm({type:fi,selectors:[["mat-select"]],contentQueries:function(rt,Dt,_i){if(1&rt&&(se.Suo(_i,qt,5),se.Suo(_i,_.ey,5),se.Suo(_i,_.K7,5)),2&rt){let Ui;se.iGM(Ui=se.CRH())&&(Dt.customTrigger=Ui.first),se.iGM(Ui=se.CRH())&&(Dt.options=Ui),se.iGM(Ui=se.CRH())&&(Dt.optionGroups=Ui)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(rt,Dt){1&rt&&se.NdJ("keydown",function(Ui){return Dt._handleKeydown(Ui)})("focus",function(){return Dt._onFocus()})("blur",function(){return Dt._onBlur()}),2&rt&&(se.uIk("id",Dt.id)("tabindex",Dt.tabIndex)("aria-controls",Dt.panelOpen?Dt.id+"-panel":null)("aria-expanded",Dt.panelOpen)("aria-label",Dt.ariaLabel||null)("aria-required",Dt.required.toString())("aria-disabled",Dt.disabled.toString())("aria-invalid",Dt.errorState)("aria-activedescendant",Dt._getAriaActiveDescendant()),se.ekj("mat-mdc-select-disabled",Dt.disabled)("mat-mdc-select-invalid",Dt.errorState)("mat-mdc-select-required",Dt.required)("mat-mdc-select-empty",Dt.empty)("mat-mdc-select-multiple",Dt.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[se._Bn([{provide:Ze.Eo,useExisting:fi},{provide:_.HF,useExisting:fi}]),se.qOj],ngContentSelectors:At,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(rt,Dt){if(1&rt&&(se.F$t(xi),se.TgZ(0,"div",0,1),se.NdJ("click",function(){return Dt.toggle()}),se.TgZ(3,"div",2),se.YNc(4,Vt,2,1,"span",3),se.YNc(5,hi,3,2,"span",4),se.qZA(),se.TgZ(6,"div",5)(7,"div",6),se.O4$(),se.TgZ(8,"svg",7),se._UZ(9,"path",8),se.qZA()()()(),se.YNc(10,zi,3,9,"ng-template",9),se.NdJ("backdropClick",function(){return Dt.close()})("attach",function(){return Dt._onAttached()})("detach",function(){return Dt.close()})),2&rt){const _i=se.MAs(1);se.uIk("aria-owns",Dt.panelOpen?Dt.id+"-panel":null),se.xp6(3),se.Q6J("ngSwitch",Dt.empty),se.uIk("id",Dt._valueId),se.xp6(1),se.Q6J("ngSwitchCase",!0),se.xp6(1),se.Q6J("ngSwitchCase",!1),se.xp6(5),se.Q6J("cdkConnectedOverlayPanelClass",Dt._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",Dt._scrollStrategy)("cdkConnectedOverlayOrigin",Dt._preferredOverlayOrigin||_i)("cdkConnectedOverlayOpen",Dt.panelOpen)("cdkConnectedOverlayPositions",Dt._positions)("cdkConnectedOverlayWidth",Dt._overlayWidth)}},dependencies:[a.mk,a.RF,a.n9,a.ED,w.pI,w.xu],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Bt.transformPanel]},changeDetection:0}),fi})(),Ti=(()=>{class fi{}return fi.\u0275fac=function(rt){return new(rt||fi)},fi.\u0275mod=se.oAB({type:fi}),fi.\u0275inj=se.cJS({providers:[ft],imports:[a.ez,w.U8,_.Ng,_.BQ,he.ZD,Ze.lN,_.Ng,_.BQ]}),fi})()},3683:(yi,pt,j)=>{"use strict";j.d(pt,{Ye:()=>Ve,g0:()=>Xe});var w=j(4650),a=j(3238),se=j(3353),_=j(6895);const Ze=["*",[["mat-toolbar-row"]]],he=["*","mat-toolbar-row"],$e=(0,a.pj)(class{constructor(ke){this._elementRef=ke}});let Ae=(()=>{class ke{}return ke.\u0275fac=function(Ye){return new(Ye||ke)},ke.\u0275dir=w.lG2({type:ke,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),ke})(),Ve=(()=>{class ke extends $e{constructor(Ye,mt,Gt){super(Ye),this._platform=mt,this._document=Gt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return ke.\u0275fac=function(Ye){return new(Ye||ke)(w.Y36(w.SBq),w.Y36(se.t4),w.Y36(_.K0))},ke.\u0275cmp=w.Xpm({type:ke,selectors:[["mat-toolbar"]],contentQueries:function(Ye,mt,Gt){if(1&Ye&&w.Suo(Gt,Ae,5),2&Ye){let wt;w.iGM(wt=w.CRH())&&(mt._toolbarRows=wt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(Ye,mt){2&Ye&&w.ekj("mat-toolbar-multiple-rows",mt._toolbarRows.length>0)("mat-toolbar-single-row",0===mt._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[w.qOj],ngContentSelectors:he,decls:2,vars:0,template:function(Ye,mt){1&Ye&&(w.F$t(Ze),w.Hsn(0),w.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),ke})(),Xe=(()=>{class ke{}return ke.\u0275fac=function(Ye){return new(Ye||ke)},ke.\u0275mod=w.oAB({type:ke}),ke.\u0275inj=w.cJS({imports:[a.BQ,a.BQ]}),ke})()},1481:(yi,pt,j)=>{"use strict";j.d(pt,{Dx:()=>Nt,H7:()=>St,b2:()=>Pt,q6:()=>_i,se:()=>xi});var w=j(6895),a=j(4650);class se extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class _ extends se{static makeCurrent(){(0,w.HT)(new _)}onAndCancel(ae,Y,Q){return ae.addEventListener(Y,Q,!1),()=>{ae.removeEventListener(Y,Q,!1)}}dispatchEvent(ae,Y){ae.dispatchEvent(Y)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,Y){return(Y=Y||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,Y){return"window"===Y?window:"document"===Y?ae:"body"===Y?ae.body:null}getBaseHref(ae){const Y=function he(){return Ze=Ze||document.querySelector("base"),Ze?Ze.getAttribute("href"):null}();return null==Y?null:function Ae(it){$e=$e||document.createElement("a"),$e.setAttribute("href",it);const ae=$e.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(Y)}resetBaseElement(){Ze=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,w.Mx)(document.cookie,ae)}}let $e,Ze=null;const Ve=new a.OlP("TRANSITION_ID"),Xe=[{provide:a.ip1,useFactory:function je(it,ae,Y){return()=>{Y.get(a.CZH).donePromise.then(()=>{const Q=(0,w.q)(),xe=ae.querySelectorAll(`style[ng-transition="${it}"]`);for(let Re=0;Re<xe.length;Re++)Q.remove(xe[Re])})}},deps:[Ve,w.K0,a.zs3],multi:!0}];let ot=(()=>{class it{build(){return new XMLHttpRequest}}return it.\u0275fac=function(Y){return new(Y||it)},it.\u0275prov=a.Yz7({token:it,factory:it.\u0275fac}),it})();const Ye=new a.OlP("EventManagerPlugins");let mt=(()=>{class it{constructor(Y,Q){this._zone=Q,this._eventNameToPlugin=new Map,Y.forEach(xe=>{xe.manager=this}),this._plugins=Y.slice().reverse()}addEventListener(Y,Q,xe){return this._findPluginFor(Q).addEventListener(Y,Q,xe)}addGlobalEventListener(Y,Q,xe){return this._findPluginFor(Q).addGlobalEventListener(Y,Q,xe)}getZone(){return this._zone}_findPluginFor(Y){const Q=this._eventNameToPlugin.get(Y);if(Q)return Q;const xe=this._plugins;for(let Re=0;Re<xe.length;Re++){const ht=xe[Re];if(ht.supports(Y))return this._eventNameToPlugin.set(Y,ht),ht}throw new Error(`No event manager plugin found for event ${Y}`)}}return it.\u0275fac=function(Y){return new(Y||it)(a.LFG(Ye),a.LFG(a.R0b))},it.\u0275prov=a.Yz7({token:it,factory:it.\u0275fac}),it})();class Gt{constructor(ae){this._doc=ae}addGlobalEventListener(ae,Y,Q){const xe=(0,w.q)().getGlobalEventTarget(this._doc,ae);if(!xe)throw new Error(`Unsupported event target ${xe} for event ${Y}`);return this.addEventListener(xe,Y,Q)}}let wt=(()=>{class it{constructor(){this.usageCount=new Map}addStyles(Y){for(const Q of Y)1===this.changeUsageCount(Q,1)&&this.onStyleAdded(Q)}removeStyles(Y){for(const Q of Y)0===this.changeUsageCount(Q,-1)&&this.onStyleRemoved(Q)}onStyleRemoved(Y){}onStyleAdded(Y){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(Y,Q){const xe=this.usageCount;let Re=xe.get(Y)??0;return Re+=Q,Re>0?xe.set(Y,Re):xe.delete(Y),Re}ngOnDestroy(){for(const Y of this.getAllStyles())this.onStyleRemoved(Y);this.usageCount.clear()}}return it.\u0275fac=function(Y){return new(Y||it)},it.\u0275prov=a.Yz7({token:it,factory:it.\u0275fac}),it})(),Yt=(()=>{class it extends wt{constructor(Y){super(),this.doc=Y,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(Y){for(const Q of this.hostNodes)this.addStyleToHost(Q,Y)}onStyleRemoved(Y){const Q=this.styleRef;Q.get(Y)?.forEach(Re=>Re.remove()),Q.delete(Y)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(Y){this.hostNodes.add(Y);for(const Q of this.getAllStyles())this.addStyleToHost(Y,Q)}removeHost(Y){this.hostNodes.delete(Y)}addStyleToHost(Y,Q){const xe=this.doc.createElement("style");xe.textContent=Q,Y.appendChild(xe);const Re=this.styleRef.get(Q);Re?Re.push(xe):this.styleRef.set(Q,[xe])}resetHostNodes(){const Y=this.hostNodes;Y.clear(),Y.add(this.doc.head)}}return it.\u0275fac=function(Y){return new(Y||it)(a.LFG(w.K0))},it.\u0275prov=a.Yz7({token:it,factory:it.\u0275fac}),it})();const Zt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wt=/%COMP%/g,Vt=new a.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function hi(it,ae){return ae.flat(100).map(Y=>Y.replace(Wt,it))}function zi(it){return ae=>{if("__ngUnwrap__"===ae)return it;!1===it(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let xi=(()=>{class it{constructor(Y,Q,xe,Re){this.eventManager=Y,this.sharedStylesHost=Q,this.appId=xe,this.removeStylesOnCompDestory=Re,this.rendererByCompId=new Map,this.defaultRenderer=new At(Y)}createRenderer(Y,Q){if(!Y||!Q)return this.defaultRenderer;const xe=this.getOrCreateRenderer(Y,Q);return xe instanceof zt?xe.applyToHost(Y):xe instanceof oi&&xe.applyStyles(),xe}getOrCreateRenderer(Y,Q){const xe=this.rendererByCompId;let Re=xe.get(Q.id);if(!Re){const ht=this.eventManager,Jt=this.sharedStylesHost,Fi=this.removeStylesOnCompDestory;switch(Q.encapsulation){case a.ifc.Emulated:Re=new zt(ht,Jt,Q,this.appId,Fi);break;case a.ifc.ShadowDom:return new ci(ht,Jt,Y,Q);default:Re=new oi(ht,Jt,Q,Fi)}Re.onDestroy=()=>xe.delete(Q.id),xe.set(Q.id,Re)}return Re}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return it.\u0275fac=function(Y){return new(Y||it)(a.LFG(mt),a.LFG(Yt),a.LFG(a.AFp),a.LFG(Vt))},it.\u0275prov=a.Yz7({token:it,factory:it.\u0275fac}),it})();class At{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,Y){return Y?document.createElementNS(Zt[Y]||Y,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,Y){(Kt(ae)?ae.content:ae).appendChild(Y)}insertBefore(ae,Y,Q){ae&&(Kt(ae)?ae.content:ae).insertBefore(Y,Q)}removeChild(ae,Y){ae&&ae.removeChild(Y)}selectRootElement(ae,Y){let Q="string"==typeof ae?document.querySelector(ae):ae;if(!Q)throw new Error(`The selector "${ae}" did not match any elements`);return Y||(Q.textContent=""),Q}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,Y,Q,xe){if(xe){Y=xe+":"+Y;const Re=Zt[xe];Re?ae.setAttributeNS(Re,Y,Q):ae.setAttribute(Y,Q)}else ae.setAttribute(Y,Q)}removeAttribute(ae,Y,Q){if(Q){const xe=Zt[Q];xe?ae.removeAttributeNS(xe,Y):ae.removeAttribute(`${Q}:${Y}`)}else ae.removeAttribute(Y)}addClass(ae,Y){ae.classList.add(Y)}removeClass(ae,Y){ae.classList.remove(Y)}setStyle(ae,Y,Q,xe){xe&(a.JOm.DashCase|a.JOm.Important)?ae.style.setProperty(Y,Q,xe&a.JOm.Important?"important":""):ae.style[Y]=Q}removeStyle(ae,Y,Q){Q&a.JOm.DashCase?ae.style.removeProperty(Y):ae.style[Y]=""}setProperty(ae,Y,Q){ae[Y]=Q}setValue(ae,Y){ae.nodeValue=Y}listen(ae,Y,Q){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,Y,zi(Q)):this.eventManager.addEventListener(ae,Y,zi(Q))}}function Kt(it){return"TEMPLATE"===it.tagName&&void 0!==it.content}class ci extends At{constructor(ae,Y,Q,xe){super(ae),this.sharedStylesHost=Y,this.hostEl=Q,this.shadowRoot=Q.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Re=hi(xe.id,xe.styles);for(const ht of Re){const Jt=document.createElement("style");Jt.textContent=ht,this.shadowRoot.appendChild(Jt)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}appendChild(ae,Y){return super.appendChild(this.nodeOrShadowRoot(ae),Y)}insertBefore(ae,Y,Q){return super.insertBefore(this.nodeOrShadowRoot(ae),Y,Q)}removeChild(ae,Y){return super.removeChild(this.nodeOrShadowRoot(ae),Y)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class oi extends At{constructor(ae,Y,Q,xe,Re=Q.id){super(ae),this.sharedStylesHost=Y,this.removeStylesOnCompDestory=xe,this.rendererUsageCount=0,this.styles=hi(Re,Q.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class zt extends oi{constructor(ae,Y,Q,xe,Re){const ht=xe+"-"+Q.id;super(ae,Y,Q,Re,ht),this.contentAttr=function ai(it){return"_ngcontent-%COMP%".replace(Wt,it)}(ht),this.hostAttr=function gi(it){return"_nghost-%COMP%".replace(Wt,it)}(ht)}applyToHost(ae){this.applyStyles(),this.setAttribute(ae,this.hostAttr,"")}createElement(ae,Y){const Q=super.createElement(ae,Y);return super.setAttribute(Q,this.contentAttr,""),Q}}let Lt=(()=>{class it extends Gt{constructor(Y){super(Y)}supports(Y){return!0}addEventListener(Y,Q,xe){return Y.addEventListener(Q,xe,!1),()=>this.removeEventListener(Y,Q,xe)}removeEventListener(Y,Q,xe){return Y.removeEventListener(Q,xe)}}return it.\u0275fac=function(Y){return new(Y||it)(a.LFG(w.K0))},it.\u0275prov=a.Yz7({token:it,factory:it.\u0275fac}),it})();const Xt=["alt","control","meta","shift"],ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qt={alt:it=>it.altKey,control:it=>it.ctrlKey,meta:it=>it.metaKey,shift:it=>it.shiftKey};let Je=(()=>{class it extends Gt{constructor(Y){super(Y)}supports(Y){return null!=it.parseEventName(Y)}addEventListener(Y,Q,xe){const Re=it.parseEventName(Q),ht=it.eventCallback(Re.fullKey,xe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(Y,Re.domEventName,ht))}static parseEventName(Y){const Q=Y.toLowerCase().split("."),xe=Q.shift();if(0===Q.length||"keydown"!==xe&&"keyup"!==xe)return null;const Re=it._normalizeKey(Q.pop());let ht="",Jt=Q.indexOf("code");if(Jt>-1&&(Q.splice(Jt,1),ht="code."),Xt.forEach(an=>{const un=Q.indexOf(an);un>-1&&(Q.splice(un,1),ht+=an+".")}),ht+=Re,0!=Q.length||0===Re.length)return null;const Fi={};return Fi.domEventName=xe,Fi.fullKey=ht,Fi}static matchEventFullKeyCode(Y,Q){let xe=ft[Y.key]||Y.key,Re="";return Q.indexOf("code.")>-1&&(xe=Y.code,Re="code."),!(null==xe||!xe)&&(xe=xe.toLowerCase()," "===xe?xe="space":"."===xe&&(xe="dot"),Xt.forEach(ht=>{ht!==xe&&(0,qt[ht])(Y)&&(Re+=ht+".")}),Re+=xe,Re===Q)}static eventCallback(Y,Q,xe){return Re=>{it.matchEventFullKeyCode(Re,Y)&&xe.runGuarded(()=>Q(Re))}}static _normalizeKey(Y){return"esc"===Y?"escape":Y}}return it.\u0275fac=function(Y){return new(Y||it)(a.LFG(w.K0))},it.\u0275prov=a.Yz7({token:it,factory:it.\u0275fac}),it})();const _i=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:w.bD},{provide:a.g9A,useValue:function fi(){_.makeCurrent()},multi:!0},{provide:w.K0,useFactory:function rt(){return(0,a.RDi)(document),document},deps:[]}]),Ui=new a.OlP(""),wi=[{provide:a.rWj,useClass:class ke{addToWindow(ae){a.dqk.getAngularTestability=(Q,xe=!0)=>{const Re=ae.findTestabilityInTree(Q,xe);if(null==Re)throw new Error("Could not find testability for element.");return Re},a.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(Q=>{const xe=a.dqk.getAllAngularTestabilities();let Re=xe.length,ht=!1;const Jt=function(Fi){ht=ht||Fi,Re--,0==Re&&Q(ht)};xe.forEach(function(Fi){Fi.whenStable(Jt)})})}findTestabilityInTree(ae,Y,Q){return null==Y?null:ae.getTestability(Y)??(Q?(0,w.q)().isShadowRoot(Y)?this.findTestabilityInTree(ae,Y.host,!0):this.findTestabilityInTree(ae,Y.parentElement,!0):null)}},deps:[]},{provide:a.lri,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]}],nn=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function bi(){return new a.qLn},deps:[]},{provide:Ye,useClass:Lt,multi:!0,deps:[w.K0,a.R0b,a.Lbi]},{provide:Ye,useClass:Je,multi:!0,deps:[w.K0]},{provide:xi,useClass:xi,deps:[mt,Yt,a.AFp,Vt]},{provide:a.FYo,useExisting:xi},{provide:wt,useExisting:Yt},{provide:Yt,useClass:Yt,deps:[w.K0]},{provide:mt,useClass:mt,deps:[Ye,a.R0b]},{provide:w.JF,useClass:ot,deps:[]},[]];let Pt=(()=>{class it{constructor(Y){}static withServerTransition(Y){return{ngModule:it,providers:[{provide:a.AFp,useValue:Y.appId},{provide:Ve,useExisting:a.AFp},Xe]}}}return it.\u0275fac=function(Y){return new(Y||it)(a.LFG(Ui,12))},it.\u0275mod=a.oAB({type:it}),it.\u0275inj=a.cJS({providers:[...nn,...wi],imports:[w.ez,a.hGG]}),it})(),Nt=(()=>{class it{constructor(Y){this._doc=Y}getTitle(){return this._doc.title}setTitle(Y){this._doc.title=Y||""}}return it.\u0275fac=function(Y){return new(Y||it)(a.LFG(w.K0))},it.\u0275prov=a.Yz7({token:it,factory:function(Y){let Q=null;return Q=Y?new Y:function xt(){return new Nt((0,a.LFG)(w.K0))}(),Q},providedIn:"root"}),it})();typeof window<"u"&&window;let St=(()=>{class it{}return it.\u0275fac=function(Y){return new(Y||it)},it.\u0275prov=a.Yz7({token:it,factory:function(Y){let Q=null;return Q=Y?new(Y||it):a.LFG(Tt),Q},providedIn:"root"}),it})(),Tt=(()=>{class it extends St{constructor(Y){super(),this._doc=Y}sanitize(Y,Q){if(null==Q)return null;switch(Y){case a.q3G.NONE:return Q;case a.q3G.HTML:return(0,a.qzn)(Q,"HTML")?(0,a.z3N)(Q):(0,a.EiD)(this._doc,String(Q)).toString();case a.q3G.STYLE:return(0,a.qzn)(Q,"Style")?(0,a.z3N)(Q):Q;case a.q3G.SCRIPT:if((0,a.qzn)(Q,"Script"))return(0,a.z3N)(Q);throw new Error("unsafe value used in a script context");case a.q3G.URL:return(0,a.qzn)(Q,"URL")?(0,a.z3N)(Q):(0,a.mCW)(String(Q));case a.q3G.RESOURCE_URL:if((0,a.qzn)(Q,"ResourceURL"))return(0,a.z3N)(Q);throw new Error(`unsafe value used in a resource URL context (see ${a.JZr})`);default:throw new Error(`Unexpected SecurityContext ${Y} (see ${a.JZr})`)}}bypassSecurityTrustHtml(Y){return(0,a.JVY)(Y)}bypassSecurityTrustStyle(Y){return(0,a.L6k)(Y)}bypassSecurityTrustScript(Y){return(0,a.eBb)(Y)}bypassSecurityTrustUrl(Y){return(0,a.LAX)(Y)}bypassSecurityTrustResourceUrl(Y){return(0,a.pB0)(Y)}}return it.\u0275fac=function(Y){return new(Y||it)(a.LFG(w.K0))},it.\u0275prov=a.Yz7({token:it,factory:function(Y){let Q=null;return Q=Y?new Y:function vt(it){return new Tt(it.get(w.K0))}(a.LFG(a.zs3)),Q},providedIn:"root"}),it})()},2510:(yi,pt,j)=>{"use strict";j.d(pt,{gz:()=>fo,F0:()=>jn,rH:()=>Sr,Od:()=>Vl,Bz:()=>Pe,lC:()=>Ea});var w=j(4650),a=j(2076),se=j(9646),_=j(1135),Ze=j(6805),he=j(9841),$e=j(7272),Ae=j(9770),Ve=j(9635),je=j(2843),Xe=j(9751),ke=j(515),ot=j(727),Ye=j(4482),mt=j(5403);function Gt(){return(0,Ye.e)((I,A)=>{let D=null;I._refCount++;const F=(0,mt.x)(A,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(D=null);const Z=I._connection,ue=D;D=null,Z&&(!ue||Z===ue)&&Z.unsubscribe(),A.unsubscribe()});I.subscribe(F),F.closed||(D=I.connect())})}class wt extends Xe.y{constructor(A,D){super(),this.source=A,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,Ye.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new ot.w0;const D=this.getSubject();A.add(this.source.subscribe((0,mt.x)(D,void 0,()=>{this._teardown(),D.complete()},F=>{this._teardown(),D.error(F)},()=>this._teardown()))),A.closed&&(this._connection=null,A=ot.w0.EMPTY)}return A}refCount(){return Gt()(this)}}var Yt=j(7579),Zt=j(6895),Wt=j(4004),Ct=j(3900),Oe=j(5698),tt=j(8675),kt=j(9300),Ot=j(5577),Vt=j(590),ai=j(4351),gi=j(8505),hi=j(262);function xi(I,A){return(0,Ye.e)(function zi(I,A,D,F,Z){return(ue,le)=>{let Ke=D,ut=A,di=0;ue.subscribe((0,mt.x)(le,vi=>{const Hi=di++;ut=Ke?I(ut,vi,Hi):(Ke=!0,vi),F&&le.next(ut)},Z&&(()=>{Ke&&le.next(ut),le.complete()})))}}(I,A,arguments.length>=2,!0))}function At(I){return I<=0?()=>ke.E:(0,Ye.e)((A,D)=>{let F=[];A.subscribe((0,mt.x)(D,Z=>{F.push(Z),I<F.length&&F.shift()},()=>{for(const Z of F)D.next(Z);D.complete()},void 0,()=>{F=null}))})}var Bt=j(8068),$t=j(6590),Kt=j(4671);function ci(I,A){const D=arguments.length>=2;return F=>F.pipe(I?(0,kt.h)((Z,ue)=>I(Z,ue,F)):Kt.y,At(1),D?(0,$t.d)(A):(0,Bt.T)(()=>new Ze.K))}var oi=j(2529),zt=j(9718),Lt=j(8746),Xt=j(8189),ft=j(1481);const qt="primary",Je=Symbol("RouteTitle");class yt{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const D=this.params[A];return Array.isArray(D)?D[0]:D}return null}getAll(A){if(this.has(A)){const D=this.params[A];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function ei(I){return new yt(I)}function pi(I,A,D){const F=D.path.split("/");if(F.length>I.length||"full"===D.pathMatch&&(A.hasChildren()||F.length<I.length))return null;const Z={};for(let ue=0;ue<F.length;ue++){const le=F[ue],Ke=I[ue];if(le.startsWith(":"))Z[le.substring(1)]=Ke;else if(le!==Ke.path)return null}return{consumed:I.slice(0,F.length),posParams:Z}}function Ti(I,A){const D=I?Object.keys(I):void 0,F=A?Object.keys(A):void 0;if(!D||!F||D.length!=F.length)return!1;let Z;for(let ue=0;ue<D.length;ue++)if(Z=D[ue],!fi(I[Z],A[Z]))return!1;return!0}function fi(I,A){if(Array.isArray(I)&&Array.isArray(A)){if(I.length!==A.length)return!1;const D=[...I].sort(),F=[...A].sort();return D.every((Z,ue)=>F[ue]===Z)}return I===A}function bi(I){return Array.prototype.concat.apply([],I)}function rt(I){return I.length>0?I[I.length-1]:null}function _i(I,A){for(const D in I)I.hasOwnProperty(D)&&A(I[D],D)}function Ui(I){return(0,w.CqO)(I)?I:(0,w.QGY)(I)?(0,a.D)(Promise.resolve(I)):(0,se.of)(I)}const wi=!1,nn={exact:function st(I,A,D){if(!et(I.segments,A.segments)||!De(I.segments,A.segments,D)||I.numberOfChildren!==A.numberOfChildren)return!1;for(const F in A.children)if(!I.children[F]||!st(I.children[F],A.children[F],D))return!1;return!0},subset:Nt},Pt={exact:function Ee(I,A){return Ti(I,A)},subset:function xt(I,A){return Object.keys(A).length<=Object.keys(I).length&&Object.keys(A).every(D=>fi(I[D],A[D]))},ignored:()=>!0};function Ce(I,A,D){return nn[D.paths](I.root,A.root,D.matrixParams)&&Pt[D.queryParams](I.queryParams,A.queryParams)&&!("exact"===D.fragment&&I.fragment!==A.fragment)}function Nt(I,A,D){return nt(I,A,A.segments,D)}function nt(I,A,D,F){if(I.segments.length>D.length){const Z=I.segments.slice(0,D.length);return!(!et(Z,D)||A.hasChildren()||!De(Z,D,F))}if(I.segments.length===D.length){if(!et(I.segments,D)||!De(I.segments,D,F))return!1;for(const Z in A.children)if(!I.children[Z]||!Nt(I.children[Z],A.children[Z],F))return!1;return!0}{const Z=D.slice(0,I.segments.length),ue=D.slice(I.segments.length);return!!(et(I.segments,Z)&&De(I.segments,Z,F)&&I.children[qt])&&nt(I.children[qt],A,ue,F)}}function De(I,A,D){return A.every((F,Z)=>Pt[D](I[Z].parameters,F.parameters))}class be{constructor(A=new _e([],{}),D={},F=null){this.root=A,this.queryParams=D,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ei(this.queryParams)),this._queryParamMap}toString(){return Li.serialize(this)}}class _e{constructor(A,D){this.segments=A,this.children=D,this.parent=null,_i(D,(F,Z)=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pn(this)}}class Qe{constructor(A,D){this.path=A,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=ei(this.parameters)),this._parameterMap}toString(){return fe(this)}}function et(I,A){return I.length===A.length&&I.every((D,F)=>D.path===A[F].path)}let li=(()=>{class I{}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:function(){return new qi},providedIn:"root"}),I})();class qi{parse(A){const D=new Y(A);return new be(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(A){const D=`/${Se(A.root,!0)}`,F=function We(I){const A=Object.keys(I).map(D=>{const F=I[D];return Array.isArray(F)?F.map(Z=>`${me(D)}=${me(Z)}`).join("&"):`${me(D)}=${me(F)}`}).filter(D=>!!D);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${D}${F}${"string"==typeof A.fragment?`#${function K(I){return encodeURI(I)}(A.fragment)}`:""}`}}const Li=new qi;function pn(I){return I.segments.map(A=>fe(A)).join("/")}function Se(I,A){if(!I.hasChildren())return pn(I);if(A){const D=I.children[qt]?Se(I.children[qt],!1):"",F=[];return _i(I.children,(Z,ue)=>{ue!==qt&&F.push(`${ue}:${Se(Z,!1)}`)}),F.length>0?`${D}(${F.join("//")})`:D}{const D=function Ei(I,A){let D=[];return _i(I.children,(F,Z)=>{Z===qt&&(D=D.concat(A(F,Z)))}),_i(I.children,(F,Z)=>{Z!==qt&&(D=D.concat(A(F,Z)))}),D}(I,(F,Z)=>Z===qt?[Se(I.children[qt],!1)]:[`${Z}:${Se(F,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[qt]?`${pn(I)}/${D[0]}`:`${pn(I)}/(${D.join("//")})`}}function re(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function me(I){return re(I).replace(/%3B/gi,";")}function V(I){return re(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function U(I){return decodeURIComponent(I)}function ce(I){return U(I.replace(/\+/g,"%20"))}function fe(I){return`${V(I.path)}${function Ie(I){return Object.keys(I).map(A=>`;${V(A)}=${V(I[A])}`).join("")}(I.parameters)}`}const St=/^[^\/()?;=#]+/;function vt(I){const A=I.match(St);return A?A[0]:""}const Tt=/^[^=?&#]+/,it=/^[^&#]+/;class Y{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(A.length>0||Object.keys(D).length>0)&&(F[qt]=new _e(A,D)),F}parseSegment(){const A=vt(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new w.vHH(4009,wi);return this.capture(A),new Qe(U(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const D=vt(this.remaining);if(!D)return;this.capture(D);let F="";if(this.consumeOptional("=")){const Z=vt(this.remaining);Z&&(F=Z,this.capture(F))}A[U(D)]=U(F)}parseQueryParam(A){const D=function ni(I){const A=I.match(Tt);return A?A[0]:""}(this.remaining);if(!D)return;this.capture(D);let F="";if(this.consumeOptional("=")){const le=function ae(I){const A=I.match(it);return A?A[0]:""}(this.remaining);le&&(F=le,this.capture(F))}const Z=ce(D),ue=ce(F);if(A.hasOwnProperty(Z)){let le=A[Z];Array.isArray(le)||(le=[le],A[Z]=le),le.push(ue)}else A[Z]=ue}parseParens(A){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=vt(this.remaining),Z=this.remaining[F.length];if("/"!==Z&&")"!==Z&&";"!==Z)throw new w.vHH(4010,wi);let ue;F.indexOf(":")>-1?(ue=F.slice(0,F.indexOf(":")),this.capture(ue),this.capture(":")):A&&(ue=qt);const le=this.parseChildren();D[ue]=1===Object.keys(le).length?le[qt]:new _e([],le),this.consumeOptional("//")}return D}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new w.vHH(4011,wi)}}function Q(I){return I.segments.length>0?new _e([],{[qt]:I}):I}function xe(I){const A={};for(const F of Object.keys(I.children)){const ue=xe(I.children[F]);(ue.segments.length>0||ue.hasChildren())&&(A[F]=ue)}return function Re(I){if(1===I.numberOfChildren&&I.children[qt]){const A=I.children[qt];return new _e(I.segments.concat(A.segments),A.children)}return I}(new _e(I.segments,A))}function ht(I){return I instanceof be}const Jt=!1;function _n(I,A,D,F,Z){if(0===D.length)return wn(A.root,A.root,A.root,F,Z);const ue=function pr(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Qi(!0,0,I);let A=0,D=!1;const F=I.reduce((Z,ue,le)=>{if("object"==typeof ue&&null!=ue){if(ue.outlets){const Ke={};return _i(ue.outlets,(ut,di)=>{Ke[di]="string"==typeof ut?ut.split("/"):ut}),[...Z,{outlets:Ke}]}if(ue.segmentPath)return[...Z,ue.segmentPath]}return"string"!=typeof ue?[...Z,ue]:0===le?(ue.split("/").forEach((Ke,ut)=>{0==ut&&"."===Ke||(0==ut&&""===Ke?D=!0:".."===Ke?A++:""!=Ke&&Z.push(Ke))}),Z):[...Z,ue]},[]);return new Qi(D,A,F)}(D);return ue.toRoot()?wn(A.root,A.root,new _e([],{}),F,Z):function le(ut){const di=function Or(I,A,D,F){if(I.isAbsolute)return new er(A.root,!0,0);if(-1===F)return new er(D,D===A.root,0);return function ds(I,A,D){let F=I,Z=A,ue=D;for(;ue>Z;){if(ue-=Z,F=F.parent,!F)throw new w.vHH(4005,Jt&&"Invalid number of '../'");Z=F.segments.length}return new er(F,!1,Z-ue)}(D,F+(cs(I.commands[0])?0:1),I.numberOfDoubleDots)}(ue,A,I.snapshot?._urlSegment,ut),vi=di.processChildren?Rn(di.segmentGroup,di.index,ue.commands):Xr(di.segmentGroup,di.index,ue.commands);return wn(A.root,di.segmentGroup,vi,F,Z)}(I.snapshot?._lastPathIndex)}function cs(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Ro(I){return"object"==typeof I&&null!=I&&I.outlets}function wn(I,A,D,F,Z){let le,ue={};F&&_i(F,(ut,di)=>{ue[di]=Array.isArray(ut)?ut.map(vi=>`${vi}`):`${ut}`}),le=I===A?D:Mr(I,A,D);const Ke=Q(xe(le));return new be(Ke,ue,Z)}function Mr(I,A,D){const F={};return _i(I.children,(Z,ue)=>{F[ue]=Z===A?D:Mr(Z,A,D)}),new _e(I.segments,F)}class Qi{constructor(A,D,F){if(this.isAbsolute=A,this.numberOfDoubleDots=D,this.commands=F,A&&F.length>0&&cs(F[0]))throw new w.vHH(4003,Jt&&"Root segment cannot have matrix parameters");const Z=F.find(Ro);if(Z&&Z!==rt(F))throw new w.vHH(4004,Jt&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class er{constructor(A,D,F){this.segmentGroup=A,this.processChildren=D,this.index=F}}function Xr(I,A,D){if(I||(I=new _e([],{})),0===I.segments.length&&I.hasChildren())return Rn(I,A,D);const F=function Ri(I,A,D){let F=0,Z=A;const ue={match:!1,pathIndex:0,commandIndex:0};for(;Z<I.segments.length;){if(F>=D.length)return ue;const le=I.segments[Z],Ke=D[F];if(Ro(Ke))break;const ut=`${Ke}`,di=F<D.length-1?D[F+1]:null;if(Z>0&&void 0===ut)break;if(ut&&di&&"object"==typeof di&&void 0===di.outlets){if(!vr(ut,di,le))return ue;F+=2}else{if(!vr(ut,{},le))return ue;F++}Z++}return{match:!0,pathIndex:Z,commandIndex:F}}(I,A,D),Z=D.slice(F.commandIndex);if(F.match&&F.pathIndex<I.segments.length){const ue=new _e(I.segments.slice(0,F.pathIndex),{});return ue.children[qt]=new _e(I.segments.slice(F.pathIndex),I.children),Rn(ue,0,Z)}return F.match&&0===Z.length?new _e(I.segments,{}):F.match&&!I.hasChildren()?Ji(I,A,D):F.match?Rn(I,0,Z):Ji(I,A,D)}function Rn(I,A,D){if(0===D.length)return new _e(I.segments,{});{const F=function yr(I){return Ro(I[0])?I[0].outlets:{[qt]:I}}(D),Z={};if(!F[qt]&&I.children[qt]&&1===I.numberOfChildren&&0===I.children[qt].segments.length){const ue=Rn(I.children[qt],A,D);return new _e(I.segments,ue.children)}return _i(F,(ue,le)=>{"string"==typeof ue&&(ue=[ue]),null!==ue&&(Z[le]=Xr(I.children[le],A,ue))}),_i(I.children,(ue,le)=>{void 0===F[le]&&(Z[le]=ue)}),new _e(I.segments,Z)}}function Ji(I,A,D){const F=I.segments.slice(0,A);let Z=0;for(;Z<D.length;){const ue=D[Z];if(Ro(ue)){const ut=tr(ue.outlets);return new _e(F,ut)}if(0===Z&&cs(D[0])){F.push(new Qe(I.segments[A].path,$n(D[0]))),Z++;continue}const le=Ro(ue)?ue.outlets[qt]:`${ue}`,Ke=Z<D.length-1?D[Z+1]:null;le&&Ke&&cs(Ke)?(F.push(new Qe(le,$n(Ke))),Z+=2):(F.push(new Qe(le,{})),Z++)}return new _e(F,{})}function tr(I){const A={};return _i(I,(D,F)=>{"string"==typeof D&&(D=[D]),null!==D&&(A[F]=Ji(new _e([],{}),0,D))}),A}function $n(I){const A={};return _i(I,(D,F)=>A[F]=`${D}`),A}function vr(I,A,D){return I==D.path&&Ti(A,D.parameters)}const Fn="imperative";class zn{constructor(A,D){this.id=A,this.url=D}}class ji extends zn{constructor(A,D,F="imperative",Z=null){super(A,D),this.type=0,this.navigationTrigger=F,this.restoredState=Z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rr extends zn{constructor(A,D,F){super(A,D),this.urlAfterRedirects=F,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Eo extends zn{constructor(A,D,F,Z){super(A,D),this.reason=F,this.code=Z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sn extends zn{constructor(A,D,F,Z){super(A,D),this.reason=F,this.code=Z,this.type=16}}class Fo extends zn{constructor(A,D,F,Z){super(A,D),this.error=F,this.target=Z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ws extends zn{constructor(A,D,F,Z){super(A,D),this.urlAfterRedirects=F,this.state=Z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sa extends zn{constructor(A,D,F,Z){super(A,D),this.urlAfterRedirects=F,this.state=Z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cs extends zn{constructor(A,D,F,Z,ue){super(A,D),this.urlAfterRedirects=F,this.state=Z,this.shouldActivate=ue,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class or extends zn{constructor(A,D,F,Z){super(A,D),this.urlAfterRedirects=F,this.state=Z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class js extends zn{constructor(A,D,F,Z){super(A,D),this.urlAfterRedirects=F,this.state=Z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class po{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jr{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class us{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Es{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wn{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gr{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hs{constructor(A,D,F){this.routerEvent=A,this.position=D,this.anchor=F,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Mo=(()=>{class I{createUrlTree(D,F,Z,ue,le,Ke){return _n(D||F.root,Z,ue,le,Ke)}}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac}),I})(),dr=(()=>{class I{}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:function(A){return Mo.\u0275fac(A)},providedIn:"root"}),I})();class aa{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const D=this.pathFromRoot(A);return D.length>1?D[D.length-2]:null}children(A){const D=fr(A,this._root);return D?D.children.map(F=>F.value):[]}firstChild(A){const D=fr(A,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(A){const D=Fr(A,this._root);return D.length<2?[]:D[D.length-2].children.map(Z=>Z.value).filter(Z=>Z!==A)}pathFromRoot(A){return Fr(A,this._root).map(D=>D.value)}}function fr(I,A){if(I===A.value)return A;for(const D of A.children){const F=fr(I,D);if(F)return F}return null}function Fr(I,A){if(I===A.value)return[A];for(const D of A.children){const F=Fr(I,D);if(F.length)return F.unshift(A),F}return[]}class Qr{constructor(A,D){this.value=A,this.children=D}toString(){return`TreeNode(${this.value})`}}function Yn(I){const A={};return I&&I.children.forEach(D=>A[D.value.outlet]=D),A}class Zr extends aa{constructor(A,D){super(A),this.snapshot=D,Ws(this,A)}toString(){return this.snapshot.toString()}}function Br(I,A){const D=function xa(I,A){const le=new Zs([],{},{},"",{},qt,A,null,I.root,-1,{});return new En("",new Qr(le,[]))}(I,A),F=new _.X([new Qe("",{})]),Z=new _.X({}),ue=new _.X({}),le=new _.X({}),Ke=new _.X(""),ut=new fo(F,Z,le,Ke,ue,qt,A,D.root);return ut.snapshot=D.root,new Zr(new Qr(ut,[]),D)}class fo{constructor(A,D,F,Z,ue,le,Ke,ut){this.url=A,this.params=D,this.queryParams=F,this.fragment=Z,this.data=ue,this.outlet=le,this.component=Ke,this.title=this.data?.pipe((0,Wt.U)(di=>di[Je]))??(0,se.of)(void 0),this._futureSnapshot=ut}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Wt.U)(A=>ei(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Wt.U)(A=>ei(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $s(I,A="emptyOnly"){const D=I.pathFromRoot;let F=0;if("always"!==A)for(F=D.length-1;F>=1;){const Z=D[F],ue=D[F-1];if(Z.routeConfig&&""===Z.routeConfig.path)F--;else{if(ue.component)break;F--}}return function Gs(I){return I.reduce((A,D)=>({params:{...A.params,...D.params},data:{...A.data,...D.data},resolve:{...D.data,...A.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(F))}class Zs{get title(){return this.data?.[Je]}constructor(A,D,F,Z,ue,le,Ke,ut,di,vi,Hi){this.url=A,this.params=D,this.queryParams=F,this.fragment=Z,this.data=ue,this.outlet=le,this.component=Ke,this.routeConfig=ut,this._urlSegment=di,this._lastPathIndex=vi,this._resolve=Hi}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ei(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ei(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class En extends aa{constructor(A,D){super(D),this.url=A,Ws(this,D)}toString(){return wa(this._root)}}function Ws(I,A){A.value._routerState=I,A.children.forEach(D=>Ws(I,D))}function wa(I){const A=I.children.length>0?` { ${I.children.map(wa).join(", ")} } `:"";return`${I.value}${A}`}function Ca(I){if(I.snapshot){const A=I.snapshot,D=I._futureSnapshot;I.snapshot=D,Ti(A.queryParams,D.queryParams)||I.queryParams.next(D.queryParams),A.fragment!==D.fragment&&I.fragment.next(D.fragment),Ti(A.params,D.params)||I.params.next(D.params),function ct(I,A){if(I.length!==A.length)return!1;for(let D=0;D<I.length;++D)if(!Ti(I[D],A[D]))return!1;return!0}(A.url,D.url)||I.url.next(D.url),Ti(A.data,D.data)||I.data.next(D.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Pa(I,A){const D=Ti(I.params,A.params)&&function ze(I,A){return et(I,A)&&I.every((D,F)=>Ti(D.parameters,A[F].parameters))}(I.url,A.url);return D&&!(!I.parent!=!A.parent)&&(!I.parent||Pa(I.parent,A.parent))}function Ms(I,A,D){if(D&&I.shouldReuseRoute(A.value,D.value.snapshot)){const F=D.value;F._futureSnapshot=A.value;const Z=function ac(I,A,D){return A.children.map(F=>{for(const Z of D.children)if(I.shouldReuseRoute(F.value,Z.value.snapshot))return Ms(I,F,Z);return Ms(I,F)})}(I,A,D);return new Qr(F,Z)}{if(I.shouldAttach(A.value)){const ue=I.retrieve(A.value);if(null!==ue){const le=ue.route;return le.value._futureSnapshot=A.value,le.children=A.children.map(Ke=>Ms(I,Ke)),le}}const F=function Rl(I){return new fo(new _.X(I.url),new _.X(I.params),new _.X(I.queryParams),new _.X(I.fragment),new _.X(I.data),I.outlet,I.component,I)}(A.value),Z=A.children.map(ue=>Ms(I,ue));return new Qr(F,Z)}}const Oa="ngNavigationCancelingError";function _l(I,A){const{redirectTo:D,navigationBehaviorOptions:F}=ht(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,Z=Ds(!1,0,A);return Z.url=D,Z.navigationBehaviorOptions=F,Z}function Ds(I,A,D){const F=new Error("NavigationCancelingError: "+(I||""));return F[Oa]=!0,F.cancellationCode=A,D&&(F.url=D),F}function la(I){return ca(I)&&ht(I.url)}function ca(I){return I&&I[Oa]}class Ra{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Do,this.attachRef=null}}let Do=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(D,F){const Z=this.getOrCreateContext(D);Z.outlet=F,this.contexts.set(D,Z)}onChildOutletDestroyed(D){const F=this.getContext(D);F&&(F.outlet=null,F.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let F=this.getContext(D);return F||(F=new Ra,this.contexts.set(D,F)),F}getContext(D){return this.contexts.get(D)||null}}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Yr=!1;let Ea=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.parentContexts=(0,w.f3M)(Do),this.location=(0,w.f3M)(w.s_b),this.changeDetector=(0,w.f3M)(w.sBO),this.environmentInjector=(0,w.f3M)(w.lqb)}ngOnChanges(D){if(D.name){const{firstChange:F,previousValue:Z}=D.name;if(F)return;this.isTrackedInParentContexts(Z)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(Z)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(D){return this.parentContexts.getContext(D)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const D=this.parentContexts.getContext(this.name);D?.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,Yr);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,Yr);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,Yr);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,F){this.activated=D,this._activatedRoute=F,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,F){if(this.isActivated)throw new w.vHH(4013,Yr);this._activatedRoute=D;const Z=this.location,le=D.snapshot.component,Ke=this.parentContexts.getOrCreateContext(this.name).children,ut=new eo(D,Ke,Z.injector);if(F&&function Ss(I){return!!I.resolveComponentFactory}(F)){const di=F.resolveComponentFactory(le);this.activated=Z.createComponent(di,Z.length,ut)}else this.activated=Z.createComponent(le,{index:Z.length,injector:ut,environmentInjector:F??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(D){return new(D||I)},I.\u0275dir=w.lG2({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[w.TTD]}),I})();class eo{constructor(A,D,F){this.route=A,this.childContexts=D,this.parent=F}get(A,D){return A===fo?this.route:A===Do?this.childContexts:this.parent.get(A,D)}}let lo=(()=>{class I{}return I.\u0275fac=function(D){return new(D||I)},I.\u0275cmp=w.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(D,F){1&D&&w._UZ(0,"router-outlet")},dependencies:[Ea],encapsulation:2}),I})();function Ys(I,A){return I.providers&&!I._injector&&(I._injector=(0,w.MMx)(I.providers,A,`Route: ${I.path}`)),I._injector??A}function sr(I){const A=I.children&&I.children.map(sr),D=A?{...I,children:A}:{...I};return!D.component&&!D.loadComponent&&(A||D.loadChildren)&&D.outlet&&D.outlet!==qt&&(D.component=lo),D}function Vr(I){return I.outlet||qt}function Ur(I,A){const D=I.filter(F=>Vr(F)===A);return D.push(...I.filter(F=>Vr(F)!==A)),D}function ir(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let A=I.parent;A;A=A.parent){const D=A.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class Da{constructor(A,D,F,Z){this.routeReuseStrategy=A,this.futureState=D,this.currState=F,this.forwardEvent=Z}activate(A){const D=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,F,A),Ca(this.futureState.root),this.activateChildRoutes(D,F,A)}deactivateChildRoutes(A,D,F){const Z=Yn(D);A.children.forEach(ue=>{const le=ue.value.outlet;this.deactivateRoutes(ue,Z[le],F),delete Z[le]}),_i(Z,(ue,le)=>{this.deactivateRouteAndItsChildren(ue,F)})}deactivateRoutes(A,D,F){const Z=A.value,ue=D?D.value:null;if(Z===ue)if(Z.component){const le=F.getContext(Z.outlet);le&&this.deactivateChildRoutes(A,D,le.children)}else this.deactivateChildRoutes(A,D,F);else ue&&this.deactivateRouteAndItsChildren(D,F)}deactivateRouteAndItsChildren(A,D){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,D):this.deactivateRouteAndOutlet(A,D)}detachAndStoreRouteSubtree(A,D){const F=D.getContext(A.value.outlet),Z=F&&A.value.component?F.children:D,ue=Yn(A);for(const le of Object.keys(ue))this.deactivateRouteAndItsChildren(ue[le],Z);if(F&&F.outlet){const le=F.outlet.detach(),Ke=F.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:le,route:A,contexts:Ke})}}deactivateRouteAndOutlet(A,D){const F=D.getContext(A.value.outlet),Z=F&&A.value.component?F.children:D,ue=Yn(A);for(const le of Object.keys(ue))this.deactivateRouteAndItsChildren(ue[le],Z);F&&(F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated()),F.attachRef=null,F.resolver=null,F.route=null)}activateChildRoutes(A,D,F){const Z=Yn(D);A.children.forEach(ue=>{this.activateRoutes(ue,Z[ue.value.outlet],F),this.forwardEvent(new Gr(ue.value.snapshot))}),A.children.length&&this.forwardEvent(new Es(A.value.snapshot))}activateRoutes(A,D,F){const Z=A.value,ue=D?D.value:null;if(Ca(Z),Z===ue)if(Z.component){const le=F.getOrCreateContext(Z.outlet);this.activateChildRoutes(A,D,le.children)}else this.activateChildRoutes(A,D,F);else if(Z.component){const le=F.getOrCreateContext(Z.outlet);if(this.routeReuseStrategy.shouldAttach(Z.snapshot)){const Ke=this.routeReuseStrategy.retrieve(Z.snapshot);this.routeReuseStrategy.store(Z.snapshot,null),le.children.onOutletReAttached(Ke.contexts),le.attachRef=Ke.componentRef,le.route=Ke.route.value,le.outlet&&le.outlet.attach(Ke.componentRef,Ke.route.value),Ca(Ke.route.value),this.activateChildRoutes(A,null,le.children)}else{const Ke=ir(Z.snapshot),ut=Ke?.get(w._Vd)??null;le.attachRef=null,le.route=Z,le.resolver=ut,le.injector=Ke,le.outlet&&le.outlet.activateWith(Z,le.injector),this.activateChildRoutes(A,null,le.children)}}else this.activateChildRoutes(A,null,F)}}class Lo{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class fn{constructor(A,D){this.component=A,this.route=D}}function La(I,A,D){const F=I._root;return vn(F,A?A._root:null,D,[F.value])}function ps(I,A){const D=Symbol(),F=A.get(I,D);return F===D?"function"!=typeof I||(0,w.Z0I)(I)?A.get(I):I:F}function vn(I,A,D,F,Z={canDeactivateChecks:[],canActivateChecks:[]}){const ue=Yn(A);return I.children.forEach(le=>{(function Bn(I,A,D,F,Z={canDeactivateChecks:[],canActivateChecks:[]}){const ue=I.value,le=A?A.value:null,Ke=D?D.getContext(I.value.outlet):null;if(le&&ue.routeConfig===le.routeConfig){const ut=function Is(I,A,D){if("function"==typeof D)return D(I,A);switch(D){case"pathParamsChange":return!et(I.url,A.url);case"pathParamsOrQueryParamsChange":return!et(I.url,A.url)||!Ti(I.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pa(I,A)||!Ti(I.queryParams,A.queryParams);default:return!Pa(I,A)}}(le,ue,ue.routeConfig.runGuardsAndResolvers);ut?Z.canActivateChecks.push(new Lo(F)):(ue.data=le.data,ue._resolvedData=le._resolvedData),vn(I,A,ue.component?Ke?Ke.children:null:D,F,Z),ut&&Ke&&Ke.outlet&&Ke.outlet.isActivated&&Z.canDeactivateChecks.push(new fn(Ke.outlet.component,le))}else le&&en(A,Ke,Z),Z.canActivateChecks.push(new Lo(F)),vn(I,null,ue.component?Ke?Ke.children:null:D,F,Z)})(le,ue[le.value.outlet],D,F.concat([le.value]),Z),delete ue[le.value.outlet]}),_i(ue,(le,Ke)=>en(le,D.getContext(Ke),Z)),Z}function en(I,A,D){const F=Yn(I),Z=I.value;_i(F,(ue,le)=>{en(ue,Z.component?A?A.children.getContext(le):null:A,D)}),D.canDeactivateChecks.push(new fn(Z.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,Z))}function As(I){return"function"==typeof I}function gn(I){return I instanceof Ze.K||"EmptyError"===I?.name}const ks=Symbol("INITIAL_VALUE");function ar(){return(0,Ct.w)(I=>(0,he.a)(I.map(A=>A.pipe((0,Oe.q)(1),(0,tt.O)(ks)))).pipe((0,Wt.U)(A=>{for(const D of A)if(!0!==D){if(D===ks)return ks;if(!1===D||D instanceof be)return D}return!0}),(0,kt.h)(A=>A!==ks),(0,Oe.q)(1)))}function qr(I){return(0,Ve.z)((0,gi.b)(A=>{if(ht(A))throw _l(0,A)}),(0,Wt.U)(A=>!0===A))}const Xo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gs(I,A,D,F,Z){const ue=In(I,A,D);return ue.matched?function Bo(I,A,D,F){const Z=A.canMatch;if(!Z||0===Z.length)return(0,se.of)(!0);const ue=Z.map(le=>{const Ke=ps(le,I);return Ui(function Yi(I){return I&&As(I.canMatch)}(Ke)?Ke.canMatch(A,D):I.runInContext(()=>Ke(A,D)))});return(0,se.of)(ue).pipe(ar(),qr())}(F=Ys(A,F),A,D).pipe((0,Wt.U)(le=>!0===le?ue:{...Xo})):(0,se.of)(ue)}function In(I,A,D){if(""===A.path)return"full"===A.pathMatch&&(I.hasChildren()||D.length>0)?{...Xo}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const Z=(A.matcher||pi)(D,I,A);if(!Z)return{...Xo};const ue={};_i(Z.posParams,(Ke,ut)=>{ue[ut]=Ke.path});const le=Z.consumed.length>0?{...ue,...Z.consumed[Z.consumed.length-1].parameters}:ue;return{matched:!0,consumedSegments:Z.consumed,remainingSegments:D.slice(Z.consumed.length),parameters:le,positionalParamSegments:Z.posParams??{}}}function Kr(I,A,D,F){if(D.length>0&&function Jo(I,A,D){return D.some(F=>lr(I,A,F)&&Vr(F)!==qt)}(I,D,F)){const ue=new _e(A,function Nl(I,A,D,F){const Z={};Z[qt]=F,F._sourceSegment=I,F._segmentIndexShift=A.length;for(const ue of D)if(""===ue.path&&Vr(ue)!==qt){const le=new _e([],{});le._sourceSegment=I,le._segmentIndexShift=A.length,Z[Vr(ue)]=le}return Z}(I,A,F,new _e(D,I.children)));return ue._sourceSegment=I,ue._segmentIndexShift=A.length,{segmentGroup:ue,slicedSegments:[]}}if(0===D.length&&function Ba(I,A,D){return D.some(F=>lr(I,A,F))}(I,D,F)){const ue=new _e(I.segments,function xr(I,A,D,F,Z){const ue={};for(const le of F)if(lr(I,D,le)&&!Z[Vr(le)]){const Ke=new _e([],{});Ke._sourceSegment=I,Ke._segmentIndexShift=A.length,ue[Vr(le)]=Ke}return{...Z,...ue}}(I,A,D,F,I.children));return ue._sourceSegment=I,ue._segmentIndexShift=A.length,{segmentGroup:ue,slicedSegments:D}}const Z=new _e(I.segments,I.children);return Z._sourceSegment=I,Z._segmentIndexShift=A.length,{segmentGroup:Z,slicedSegments:D}}function lr(I,A,D){return(!(I.hasChildren()||A.length>0)||"full"!==D.pathMatch)&&""===D.path}function Ta(I,A,D,F){return!!(Vr(I)===F||F!==qt&&lr(A,D,I))&&("**"===I.path||In(A,I,D).matched)}function tl(I,A,D){return 0===A.length&&!I.children[D]}const Vo=!1;class Ln{constructor(A){this.segmentGroup=A||null}}class Wr{constructor(A){this.urlTree=A}}function bn(I){return(0,je._)(new Ln(I))}function Qo(I){return(0,je._)(new Wr(I))}class ua{constructor(A,D,F,Z,ue){this.injector=A,this.configLoader=D,this.urlSerializer=F,this.urlTree=Z,this.config=ue,this.allowRedirects=!0}apply(){const A=Kr(this.urlTree.root,[],[],this.config).segmentGroup,D=new _e(A.segments,A.children);return this.expandSegmentGroup(this.injector,this.config,D,qt).pipe((0,Wt.U)(ue=>this.createUrlTree(xe(ue),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,hi.K)(ue=>{if(ue instanceof Wr)return this.allowRedirects=!1,this.match(ue.urlTree);throw ue instanceof Ln?this.noMatchError(ue):ue}))}match(A){return this.expandSegmentGroup(this.injector,this.config,A.root,qt).pipe((0,Wt.U)(Z=>this.createUrlTree(xe(Z),A.queryParams,A.fragment))).pipe((0,hi.K)(Z=>{throw Z instanceof Ln?this.noMatchError(Z):Z}))}noMatchError(A){return new w.vHH(4002,Vo)}createUrlTree(A,D,F){const Z=Q(A);return new be(Z,D,F)}expandSegmentGroup(A,D,F,Z){return 0===F.segments.length&&F.hasChildren()?this.expandChildren(A,D,F).pipe((0,Wt.U)(ue=>new _e([],ue))):this.expandSegment(A,F,D,F.segments,Z,!0)}expandChildren(A,D,F){const Z=[];for(const ue of Object.keys(F.children))"primary"===ue?Z.unshift(ue):Z.push(ue);return(0,a.D)(Z).pipe((0,ai.b)(ue=>{const le=F.children[ue],Ke=Ur(D,ue);return this.expandSegmentGroup(A,Ke,le,ue).pipe((0,Wt.U)(ut=>({segment:ut,outlet:ue})))}),xi((ue,le)=>(ue[le.outlet]=le.segment,ue),{}),ci())}expandSegment(A,D,F,Z,ue,le){return(0,a.D)(F).pipe((0,ai.b)(Ke=>this.expandSegmentAgainstRoute(A,D,F,Ke,Z,ue,le).pipe((0,hi.K)(di=>{if(di instanceof Ln)return(0,se.of)(null);throw di}))),(0,Vt.P)(Ke=>!!Ke),(0,hi.K)((Ke,ut)=>{if(gn(Ke))return tl(D,Z,ue)?(0,se.of)(new _e([],{})):bn(D);throw Ke}))}expandSegmentAgainstRoute(A,D,F,Z,ue,le,Ke){return Ta(Z,D,ue,le)?void 0===Z.redirectTo?this.matchSegmentAgainstRoute(A,D,Z,ue,le):Ke&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,D,F,Z,ue,le):bn(D):bn(D)}expandSegmentAgainstRouteUsingRedirect(A,D,F,Z,ue,le){return"**"===Z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,F,Z,le):this.expandRegularSegmentAgainstRouteUsingRedirect(A,D,F,Z,ue,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,D,F,Z){const ue=this.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?Qo(ue):this.lineralizeSegments(F,ue).pipe((0,Ot.z)(le=>{const Ke=new _e(le,{});return this.expandSegment(A,Ke,D,le,Z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,D,F,Z,ue,le){const{matched:Ke,consumedSegments:ut,remainingSegments:di,positionalParamSegments:vi}=In(D,Z,ue);if(!Ke)return bn(D);const Hi=this.applyRedirectCommands(ut,Z.redirectTo,vi);return Z.redirectTo.startsWith("/")?Qo(Hi):this.lineralizeSegments(Z,Hi).pipe((0,Ot.z)(Wi=>this.expandSegment(A,D,F,Wi.concat(di),le,!1)))}matchSegmentAgainstRoute(A,D,F,Z,ue){return"**"===F.path?(A=Ys(F,A),F.loadChildren?(F._loadedRoutes?(0,se.of)({routes:F._loadedRoutes,injector:F._loadedInjector}):this.configLoader.loadChildren(A,F)).pipe((0,Wt.U)(Ke=>(F._loadedRoutes=Ke.routes,F._loadedInjector=Ke.injector,new _e(Z,{})))):(0,se.of)(new _e(Z,{}))):gs(D,F,Z,A).pipe((0,Ct.w)(({matched:le,consumedSegments:Ke,remainingSegments:ut})=>le?this.getChildConfig(A=F._injector??A,F,Z).pipe((0,Ot.z)(vi=>{const Hi=vi.injector??A,Wi=vi.routes,{segmentGroup:kn,slicedSegments:Tr}=Kr(D,Ke,ut,Wi),ur=new _e(kn.segments,kn.children);if(0===Tr.length&&ur.hasChildren())return this.expandChildren(Hi,Wi,ur).pipe((0,Wt.U)($o=>new _e(Ke,$o)));if(0===Wi.length&&0===Tr.length)return(0,se.of)(new _e(Ke,{}));const rr=Vr(F)===ue;return this.expandSegment(Hi,ur,Wi,Tr,rr?qt:ue,!0).pipe((0,Wt.U)(yo=>new _e(Ke.concat(yo.segments),yo.children)))})):bn(D)))}getChildConfig(A,D,F){return D.children?(0,se.of)({routes:D.children,injector:A}):D.loadChildren?void 0!==D._loadedRoutes?(0,se.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function Ll(I,A,D,F){const Z=A.canLoad;if(void 0===Z||0===Z.length)return(0,se.of)(!0);const ue=Z.map(le=>{const Ke=ps(le,I);return Ui(function q(I){return I&&As(I.canLoad)}(Ke)?Ke.canLoad(A,D):I.runInContext(()=>Ke(A,D)))});return(0,se.of)(ue).pipe(ar(),qr())}(A,D,F).pipe((0,Ot.z)(Z=>Z?this.configLoader.loadChildren(A,D).pipe((0,gi.b)(ue=>{D._loadedRoutes=ue.routes,D._loadedInjector=ue.injector})):function Dr(I){return(0,je._)(Ds(Vo,3))}())):(0,se.of)({routes:[],injector:A})}lineralizeSegments(A,D){let F=[],Z=D.root;for(;;){if(F=F.concat(Z.segments),0===Z.numberOfChildren)return(0,se.of)(F);if(Z.numberOfChildren>1||!Z.children[qt])return A.redirectTo,(0,je._)(new w.vHH(4e3,Vo));Z=Z.children[qt]}}applyRedirectCommands(A,D,F){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),A,F)}applyRedirectCreateUrlTree(A,D,F,Z){const ue=this.createSegmentGroup(A,D.root,F,Z);return new be(ue,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(A,D){const F={};return _i(A,(Z,ue)=>{if("string"==typeof Z&&Z.startsWith(":")){const Ke=Z.substring(1);F[ue]=D[Ke]}else F[ue]=Z}),F}createSegmentGroup(A,D,F,Z){const ue=this.createSegments(A,D.segments,F,Z);let le={};return _i(D.children,(Ke,ut)=>{le[ut]=this.createSegmentGroup(A,Ke,F,Z)}),new _e(ue,le)}createSegments(A,D,F,Z){return D.map(ue=>ue.path.startsWith(":")?this.findPosParam(A,ue,Z):this.findOrReturn(ue,F))}findPosParam(A,D,F){const Z=F[D.path.substring(1)];if(!Z)throw new w.vHH(4001,Vo);return Z}findOrReturn(A,D){let F=0;for(const Z of D){if(Z.path===A.path)return D.splice(F),Z;F++}return A}}class Ai{}class cr{constructor(A,D,F,Z,ue,le,Ke){this.injector=A,this.rootComponentType=D,this.config=F,this.urlTree=Z,this.url=ue,this.paramsInheritanceStrategy=le,this.urlSerializer=Ke}recognize(){const A=Kr(this.urlTree.root,[],[],this.config.filter(D=>void 0===D.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,qt).pipe((0,Wt.U)(D=>{if(null===D)return null;const F=new Zs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),Z=new Qr(F,D),ue=new En(this.url,Z);return this.inheritParamsAndData(ue._root),ue}))}inheritParamsAndData(A){const D=A.value,F=$s(D,this.paramsInheritanceStrategy);D.params=Object.freeze(F.params),D.data=Object.freeze(F.data),A.children.forEach(Z=>this.inheritParamsAndData(Z))}processSegmentGroup(A,D,F,Z){return 0===F.segments.length&&F.hasChildren()?this.processChildren(A,D,F):this.processSegment(A,D,F,F.segments,Z)}processChildren(A,D,F){return(0,a.D)(Object.keys(F.children)).pipe((0,ai.b)(Z=>{const ue=F.children[Z],le=Ur(D,Z);return this.processSegmentGroup(A,le,ue,Z)}),xi((Z,ue)=>Z&&ue?(Z.push(...ue),Z):null),(0,oi.o)(Z=>null!==Z),(0,$t.d)(null),ci(),(0,Wt.U)(Z=>{if(null===Z)return null;const ue=Bl(Z);return function il(I){I.sort((A,D)=>A.value.outlet===qt?-1:D.value.outlet===qt?1:A.value.outlet.localeCompare(D.value.outlet))}(ue),ue}))}processSegment(A,D,F,Z,ue){return(0,a.D)(D).pipe((0,ai.b)(le=>this.processSegmentAgainstRoute(le._injector??A,le,F,Z,ue)),(0,Vt.P)(le=>!!le),(0,hi.K)(le=>{if(gn(le))return tl(F,Z,ue)?(0,se.of)([]):(0,se.of)(null);throw le}))}processSegmentAgainstRoute(A,D,F,Z,ue){if(D.redirectTo||!Ta(D,F,Z,ue))return(0,se.of)(null);let le;if("**"===D.path){const Ke=Z.length>0?rt(Z).parameters:{},ut=rl(F)+Z.length,di=new Zs(Z,Ke,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ne(D),Vr(D),D.component??D._loadedComponent??null,D,qs(F),ut,H(D));le=(0,se.of)({snapshot:di,consumedSegments:[],remainingSegments:[]})}else le=gs(F,D,Z,A).pipe((0,Wt.U)(({matched:Ke,consumedSegments:ut,remainingSegments:di,parameters:vi})=>{if(!Ke)return null;const Hi=rl(F)+ut.length;return{snapshot:new Zs(ut,vi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ne(D),Vr(D),D.component??D._loadedComponent??null,D,qs(F),Hi,H(D)),consumedSegments:ut,remainingSegments:di}}));return le.pipe((0,Ct.w)(Ke=>{if(null===Ke)return(0,se.of)(null);const{snapshot:ut,consumedSegments:di,remainingSegments:vi}=Ke;A=D._injector??A;const Hi=D._loadedInjector??A,Wi=function Di(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(D),{segmentGroup:kn,slicedSegments:Tr}=Kr(F,di,vi,Wi.filter(rr=>void 0===rr.redirectTo));if(0===Tr.length&&kn.hasChildren())return this.processChildren(Hi,Wi,kn).pipe((0,Wt.U)(rr=>null===rr?null:[new Qr(ut,rr)]));if(0===Wi.length&&0===Tr.length)return(0,se.of)([new Qr(ut,[])]);const ur=Vr(D)===ue;return this.processSegment(Hi,Wi,kn,Tr,ur?qt:ue).pipe((0,Wt.U)(rr=>null===rr?null:[new Qr(ut,rr)]))}))}}function zl(I){const A=I.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function Bl(I){const A=[],D=new Set;for(const F of I){if(!zl(F)){A.push(F);continue}const Z=A.find(ue=>F.value.routeConfig===ue.value.routeConfig);void 0!==Z?(Z.children.push(...F.children),D.add(Z)):A.push(F)}for(const F of D){const Z=Bl(F.children);A.push(new Qr(F.value,Z))}return A.filter(F=>!D.has(F))}function qs(I){let A=I;for(;A._sourceSegment;)A=A._sourceSegment;return A}function rl(I){let A=I,D=A._segmentIndexShift??0;for(;A._sourceSegment;)A=A._sourceSegment,D+=A._segmentIndexShift??0;return D-1}function ne(I){return I.data||{}}function H(I){return I.resolve||{}}function Un(I){return"string"==typeof I.title||null===I.title}function Dn(I){return(0,Ct.w)(A=>{const D=I(A);return D?(0,a.D)(D).pipe((0,Wt.U)(()=>A)):(0,se.of)(A)})}const nr=new w.OlP("ROUTES");let Vn=(()=>{class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,w.f3M)(w.Sil)}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,se.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const F=Ui(D.loadComponent()).pipe((0,Wt.U)(An),(0,gi.b)(ue=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=ue}),(0,Lt.x)(()=>{this.componentLoaders.delete(D)})),Z=new wt(F,()=>new Yt.x).pipe(Gt());return this.componentLoaders.set(D,Z),Z}loadChildren(D,F){if(this.childrenLoaders.get(F))return this.childrenLoaders.get(F);if(F._loadedRoutes)return(0,se.of)({routes:F._loadedRoutes,injector:F._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(F);const ue=this.loadModuleFactoryOrRoutes(F.loadChildren).pipe((0,Wt.U)(Ke=>{this.onLoadEndListener&&this.onLoadEndListener(F);let ut,di,vi=!1;Array.isArray(Ke)?di=Ke:(ut=Ke.create(D).injector,di=bi(ut.get(nr,[],w.XFs.Self|w.XFs.Optional)));return{routes:di.map(sr),injector:ut}}),(0,Lt.x)(()=>{this.childrenLoaders.delete(F)})),le=new wt(ue,()=>new Yt.x).pipe(Gt());return this.childrenLoaders.set(F,le),le}loadModuleFactoryOrRoutes(D){return Ui(D()).pipe((0,Wt.U)(An),(0,Ot.z)(F=>F instanceof w.YKP||Array.isArray(F)?(0,se.of)(F):(0,a.D)(this.compiler.compileModuleAsync(F))))}}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function An(I){return function Hn(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let Uo=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Yt.x,this.configLoader=(0,w.f3M)(Vn),this.environmentInjector=(0,w.f3M)(w.lqb),this.urlSerializer=(0,w.f3M)(li),this.rootContexts=(0,w.f3M)(Do),this.navigationId=0,this.afterPreactivation=()=>(0,se.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=Z=>this.events.next(new Jr(Z)),this.configLoader.onLoadStartListener=Z=>this.events.next(new po(Z))}complete(){this.transitions?.complete()}handleNavigationRequest(D){const F=++this.navigationId;this.transitions?.next({...this.transitions.value,...D,id:F})}setupNavigations(D){return this.transitions=new _.X({id:0,targetPageId:0,currentUrlTree:D.currentUrlTree,currentRawUrl:D.currentUrlTree,extractedUrl:D.urlHandlingStrategy.extract(D.currentUrlTree),urlAfterRedirects:D.urlHandlingStrategy.extract(D.currentUrlTree),rawUrl:D.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fn,restoredState:null,currentSnapshot:D.routerState.snapshot,targetSnapshot:null,currentRouterState:D.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,kt.h)(F=>0!==F.id),(0,Wt.U)(F=>({...F,extractedUrl:D.urlHandlingStrategy.extract(F.rawUrl)})),(0,Ct.w)(F=>{let Z=!1,ue=!1;return(0,se.of)(F).pipe((0,gi.b)(le=>{this.currentNavigation={id:le.id,initialUrl:le.rawUrl,extractedUrl:le.extractedUrl,trigger:le.source,extras:le.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ct.w)(le=>{const Ke=D.browserUrlTree.toString(),ut=!D.navigated||le.extractedUrl.toString()!==Ke||Ke!==D.currentUrlTree.toString();if(!ut&&"reload"!==(le.extras.onSameUrlNavigation??D.onSameUrlNavigation)){const vi="";return this.events.next(new sn(le.id,D.serializeUrl(F.rawUrl),vi,0)),D.rawUrlTree=le.rawUrl,le.resolve(null),ke.E}if(D.urlHandlingStrategy.shouldProcessUrl(le.rawUrl))return _o(le.source)&&(D.browserUrlTree=le.extractedUrl),(0,se.of)(le).pipe((0,Ct.w)(vi=>{const Hi=this.transitions?.getValue();return this.events.next(new ji(vi.id,this.urlSerializer.serialize(vi.extractedUrl),vi.source,vi.restoredState)),Hi!==this.transitions?.getValue()?ke.E:Promise.resolve(vi)}),function go(I,A,D,F){return(0,Ct.w)(Z=>function Va(I,A,D,F,Z){return new ua(I,A,D,F,Z).apply()}(I,A,D,Z.extractedUrl,F).pipe((0,Wt.U)(ue=>({...Z,urlAfterRedirects:ue}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,D.config),(0,gi.b)(vi=>{this.currentNavigation={...this.currentNavigation,finalUrl:vi.urlAfterRedirects},F.urlAfterRedirects=vi.urlAfterRedirects}),function ye(I,A,D,F,Z){return(0,Ot.z)(ue=>function Ps(I,A,D,F,Z,ue,le="emptyOnly"){return new cr(I,A,D,F,Z,le,ue).recognize().pipe((0,Ct.w)(Ke=>null===Ke?function Gn(I){return new Xe.y(A=>A.error(I))}(new Ai):(0,se.of)(Ke)))}(I,A,D,ue.urlAfterRedirects,F.serialize(ue.urlAfterRedirects),F,Z).pipe((0,Wt.U)(le=>({...ue,targetSnapshot:le}))))}(this.environmentInjector,this.rootComponentType,D.config,this.urlSerializer,D.paramsInheritanceStrategy),(0,gi.b)(vi=>{if(F.targetSnapshot=vi.targetSnapshot,"eager"===D.urlUpdateStrategy){if(!vi.extras.skipLocationChange){const Wi=D.urlHandlingStrategy.merge(vi.urlAfterRedirects,vi.rawUrl);D.setBrowserUrl(Wi,vi)}D.browserUrlTree=vi.urlAfterRedirects}const Hi=new ws(vi.id,this.urlSerializer.serialize(vi.extractedUrl),this.urlSerializer.serialize(vi.urlAfterRedirects),vi.targetSnapshot);this.events.next(Hi)}));if(ut&&D.urlHandlingStrategy.shouldProcessUrl(D.rawUrlTree)){const{id:vi,extractedUrl:Hi,source:Wi,restoredState:kn,extras:Tr}=le,ur=new ji(vi,this.urlSerializer.serialize(Hi),Wi,kn);this.events.next(ur);const rr=Br(Hi,this.rootComponentType).snapshot;return F={...le,targetSnapshot:rr,urlAfterRedirects:Hi,extras:{...Tr,skipLocationChange:!1,replaceUrl:!1}},(0,se.of)(F)}{const vi="";return this.events.next(new sn(le.id,D.serializeUrl(F.extractedUrl),vi,1)),D.rawUrlTree=le.rawUrl,le.resolve(null),ke.E}}),(0,gi.b)(le=>{const Ke=new sa(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot);this.events.next(Ke)}),(0,Wt.U)(le=>F={...le,guards:La(le.targetSnapshot,le.currentSnapshot,this.rootContexts)}),function br(I,A){return(0,Ot.z)(D=>{const{targetSnapshot:F,currentSnapshot:Z,guards:{canActivateChecks:ue,canDeactivateChecks:le}}=D;return 0===le.length&&0===ue.length?(0,se.of)({...D,guardsResult:!0}):function No(I,A,D,F){return(0,a.D)(I).pipe((0,Ot.z)(Z=>function Sa(I,A,D,F,Z){const ue=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!ue||0===ue.length)return(0,se.of)(!0);const le=ue.map(Ke=>{const ut=ir(A)??Z,di=ps(Ke,ut);return Ui(function Ut(I){return I&&As(I.canDeactivate)}(di)?di.canDeactivate(I,A,D,F):ut.runInContext(()=>di(I,A,D,F))).pipe((0,Vt.P)())});return(0,se.of)(le).pipe(ar())}(Z.component,Z.route,D,A,F)),(0,Vt.P)(Z=>!0!==Z,!0))}(le,F,Z,I).pipe((0,Ot.z)(Ke=>Ke&&function X(I){return"boolean"==typeof I}(Ke)?function Na(I,A,D,F){return(0,a.D)(A).pipe((0,ai.b)(Z=>(0,$e.z)(function el(I,A){return null!==I&&A&&A(new us(I)),(0,se.of)(!0)}(Z.route.parent,F),function zo(I,A){return null!==I&&A&&A(new Wn(I)),(0,se.of)(!0)}(Z.route,F),function za(I,A,D){const F=A[A.length-1],ue=A.slice(0,A.length-1).reverse().map(le=>function on(I){const A=I.routeConfig?I.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:I,guards:A}:null}(le)).filter(le=>null!==le).map(le=>(0,Ae.P)(()=>{const Ke=le.guards.map(ut=>{const di=ir(le.node)??D,vi=ps(ut,di);return Ui(function Me(I){return I&&As(I.canActivateChild)}(vi)?vi.canActivateChild(F,I):di.runInContext(()=>vi(F,I))).pipe((0,Vt.P)())});return(0,se.of)(Ke).pipe(ar())}));return(0,se.of)(ue).pipe(ar())}(I,Z.path,D),function fs(I,A,D){const F=A.routeConfig?A.routeConfig.canActivate:null;if(!F||0===F.length)return(0,se.of)(!0);const Z=F.map(ue=>(0,Ae.P)(()=>{const le=ir(A)??D,Ke=ps(ue,le);return Ui(function $(I){return I&&As(I.canActivate)}(Ke)?Ke.canActivate(A,I):le.runInContext(()=>Ke(A,I))).pipe((0,Vt.P)())}));return(0,se.of)(Z).pipe(ar())}(I,Z.route,D))),(0,Vt.P)(Z=>!0!==Z,!0))}(F,ue,I,A):(0,se.of)(Ke)),(0,Wt.U)(Ke=>({...D,guardsResult:Ke})))})}(this.environmentInjector,le=>this.events.next(le)),(0,gi.b)(le=>{if(F.guardsResult=le.guardsResult,ht(le.guardsResult))throw _l(0,le.guardsResult);const Ke=new Cs(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot,!!le.guardsResult);this.events.next(Ke)}),(0,kt.h)(le=>!!le.guardsResult||(D.restoreHistory(le),this.cancelNavigationTransition(le,"",3),!1)),Dn(le=>{if(le.guards.canActivateChecks.length)return(0,se.of)(le).pipe((0,gi.b)(Ke=>{const ut=new or(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects),Ke.targetSnapshot);this.events.next(ut)}),(0,Ct.w)(Ke=>{let ut=!1;return(0,se.of)(Ke).pipe(function Ge(I,A){return(0,Ot.z)(D=>{const{targetSnapshot:F,guards:{canActivateChecks:Z}}=D;if(!Z.length)return(0,se.of)(D);let ue=0;return(0,a.D)(Z).pipe((0,ai.b)(le=>function Ft(I,A,D,F){const Z=I.routeConfig,ue=I._resolve;return void 0!==Z?.title&&!Un(Z)&&(ue[Je]=Z.title),function Qt(I,A,D,F){const Z=function ki(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===Z.length)return(0,se.of)({});const ue={};return(0,a.D)(Z).pipe((0,Ot.z)(le=>function Mn(I,A,D,F){const Z=ir(A)??F,ue=ps(I,Z);return Ui(ue.resolve?ue.resolve(A,D):Z.runInContext(()=>ue(A,D)))}(I[le],A,D,F).pipe((0,Vt.P)(),(0,gi.b)(Ke=>{ue[le]=Ke}))),At(1),(0,zt.h)(ue),(0,hi.K)(le=>gn(le)?ke.E:(0,je._)(le)))}(ue,I,A,F).pipe((0,Wt.U)(le=>(I._resolvedData=le,I.data=$s(I,D).resolve,Z&&Un(Z)&&(I.data[Je]=Z.title),null)))}(le.route,F,I,A)),(0,gi.b)(()=>ue++),At(1),(0,Ot.z)(le=>ue===Z.length?(0,se.of)(D):ke.E))})}(D.paramsInheritanceStrategy,this.environmentInjector),(0,gi.b)({next:()=>ut=!0,complete:()=>{ut||(D.restoreHistory(Ke),this.cancelNavigationTransition(Ke,"",2))}}))}),(0,gi.b)(Ke=>{const ut=new js(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects),Ke.targetSnapshot);this.events.next(ut)}))}),Dn(le=>{const Ke=ut=>{const di=[];ut.routeConfig?.loadComponent&&!ut.routeConfig._loadedComponent&&di.push(this.configLoader.loadComponent(ut.routeConfig).pipe((0,gi.b)(vi=>{ut.component=vi}),(0,Wt.U)(()=>{})));for(const vi of ut.children)di.push(...Ke(vi));return di};return(0,he.a)(Ke(le.targetSnapshot.root)).pipe((0,$t.d)(),(0,Oe.q)(1))}),Dn(()=>this.afterPreactivation()),(0,Wt.U)(le=>{const Ke=function Ko(I,A,D){const F=Ms(I,A._root,D?D._root:void 0);return new Zr(F,A)}(D.routeReuseStrategy,le.targetSnapshot,le.currentRouterState);return F={...le,targetRouterState:Ke}}),(0,gi.b)(le=>{D.currentUrlTree=le.urlAfterRedirects,D.rawUrlTree=D.urlHandlingStrategy.merge(le.urlAfterRedirects,le.rawUrl),D.routerState=le.targetRouterState,"deferred"===D.urlUpdateStrategy&&(le.extras.skipLocationChange||D.setBrowserUrl(D.rawUrlTree,le),D.browserUrlTree=le.urlAfterRedirects)}),((I,A,D)=>(0,Wt.U)(F=>(new Da(A,F.targetRouterState,F.currentRouterState,D).activate(I),F)))(this.rootContexts,D.routeReuseStrategy,le=>this.events.next(le)),(0,Oe.q)(1),(0,gi.b)({next:le=>{Z=!0,this.lastSuccessfulNavigation=this.currentNavigation,D.navigated=!0,this.events.next(new Rr(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(D.currentUrlTree))),D.titleStrategy?.updateTitle(le.targetRouterState.snapshot),le.resolve(!0)},complete:()=>{Z=!0}}),(0,Lt.x)(()=>{Z||ue||this.cancelNavigationTransition(F,"",1),this.currentNavigation?.id===F.id&&(this.currentNavigation=null)}),(0,hi.K)(le=>{if(ue=!0,ca(le)){la(le)||(D.navigated=!0,D.restoreHistory(F,!0));const Ke=new Eo(F.id,this.urlSerializer.serialize(F.extractedUrl),le.message,le.cancellationCode);if(this.events.next(Ke),la(le)){const ut=D.urlHandlingStrategy.merge(le.url,D.rawUrlTree),di={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===D.urlUpdateStrategy||_o(F.source)};D.scheduleNavigation(ut,Fn,null,di,{resolve:F.resolve,reject:F.reject,promise:F.promise})}else F.resolve(!1)}else{D.restoreHistory(F,!0);const Ke=new Fo(F.id,this.urlSerializer.serialize(F.extractedUrl),le,F.targetSnapshot??void 0);this.events.next(Ke);try{F.resolve(D.errorHandler(le))}catch(ut){F.reject(ut)}}return ke.E}))}))}cancelNavigationTransition(D,F,Z){const ue=new Eo(D.id,this.urlSerializer.serialize(D.extractedUrl),F,Z);this.events.next(ue),D.resolve(!1)}}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function _o(I){return I!==Fn}let to=(()=>{class I{buildTitle(D){let F,Z=D.root;for(;void 0!==Z;)F=this.getResolvedTitleForRoute(Z)??F,Z=Z.children.find(ue=>ue.outlet===qt);return F}getResolvedTitleForRoute(D){return D.data[Je]}}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:function(){return(0,w.f3M)(ys)},providedIn:"root"}),I})(),ys=(()=>{class I extends to{constructor(D){super(),this.title=D}updateTitle(D){const F=this.buildTitle(D);void 0!==F&&this.title.setTitle(F)}}return I.\u0275fac=function(D){return new(D||I)(w.LFG(ft.Dx))},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),es=(()=>{class I{}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:function(){return(0,w.f3M)(Ua)},providedIn:"root"}),I})();class ts{shouldDetach(A){return!1}store(A,D){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,D){return A.routeConfig===D.routeConfig}}let Ua=(()=>{class I extends ts{}return I.\u0275fac=function(){let A;return function(F){return(A||(A=w.n5z(I)))(F||I)}}(),I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const mi=new w.OlP("",{providedIn:"root",factory:()=>({})});let ja=(()=>{class I{}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:function(){return(0,w.f3M)(lc)},providedIn:"root"}),I})(),lc=(()=>{class I{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,F){return D}}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function jo(I){throw I}function Ha(I,A,D){return A.parse("/")}const Hr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jn=(()=>{class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,w.f3M)(w.c2e),this.isNgZoneEnabled=!1,this.options=(0,w.f3M)(mi,{optional:!0})||{},this.errorHandler=this.options.errorHandler||jo,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ha,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,w.f3M)(ja),this.routeReuseStrategy=(0,w.f3M)(es),this.urlCreationStrategy=(0,w.f3M)(dr),this.titleStrategy=(0,w.f3M)(to),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=bi((0,w.f3M)(nr,{optional:!0})??[]),this.navigationTransitions=(0,w.f3M)(Uo),this.urlSerializer=(0,w.f3M)(li),this.location=(0,w.f3M)(Zt.Ye),this.isNgZoneEnabled=(0,w.f3M)(w.R0b)instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new be,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Br(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(D=>{this.lastSuccessfulId=D.id,this.currentPageId=this.browserPageId??0},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}resetRootComponentType(D){this.routerState.root.component=D,this.navigationTransitions.rootComponentType=D}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const D=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Fn,D)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const F="popstate"===D.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{this.navigateToSyncWithBrowser(D.url,F,D.state)},0)}))}navigateToSyncWithBrowser(D,F,Z){const ue={replaceUrl:!0},le=Z?.navigationId?Z:null;if(Z){const ut={...Z};delete ut.navigationId,delete ut.\u0275routerPageId,0!==Object.keys(ut).length&&(ue.state=ut)}const Ke=this.parseUrl(D);this.scheduleNavigation(Ke,F,le,ue)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(D){this.config=D.map(sr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,F={}){const{relativeTo:Z,queryParams:ue,fragment:le,queryParamsHandling:Ke,preserveFragment:ut}=F,di=ut?this.currentUrlTree.fragment:le;let vi=null;switch(Ke){case"merge":vi={...this.currentUrlTree.queryParams,...ue};break;case"preserve":vi=this.currentUrlTree.queryParams;break;default:vi=ue||null}return null!==vi&&(vi=this.removeEmptyProps(vi)),this.urlCreationStrategy.createUrlTree(Z,this.routerState,this.currentUrlTree,D,vi,di??null)}navigateByUrl(D,F={skipLocationChange:!1}){const Z=ht(D)?D:this.parseUrl(D),ue=this.urlHandlingStrategy.merge(Z,this.rawUrlTree);return this.scheduleNavigation(ue,Fn,null,F)}navigate(D,F={skipLocationChange:!1}){return function gr(I){for(let A=0;A<I.length;A++){const D=I[A];if(null==D)throw new w.vHH(4008,false)}}(D),this.navigateByUrl(this.createUrlTree(D,F),F)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let F;try{F=this.urlSerializer.parse(D)}catch(Z){F=this.malformedUriErrorHandler(Z,this.urlSerializer,D)}return F}isActive(D,F){let Z;if(Z=!0===F?{...Hr}:!1===F?{...Pc}:F,ht(D))return Ce(this.currentUrlTree,D,Z);const ue=this.parseUrl(D);return Ce(this.currentUrlTree,ue,Z)}removeEmptyProps(D){return Object.keys(D).reduce((F,Z)=>{const ue=D[Z];return null!=ue&&(F[Z]=ue),F},{})}scheduleNavigation(D,F,Z,ue,le){if(this.disposed)return Promise.resolve(!1);let Ke,ut,di,vi;return le?(Ke=le.resolve,ut=le.reject,di=le.promise):di=new Promise((Hi,Wi)=>{Ke=Hi,ut=Wi}),vi="computed"===this.canceledNavigationResolution?Z&&Z.\u0275routerPageId?Z.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:vi,source:F,restoredState:Z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:D,extras:ue,resolve:Ke,reject:ut,promise:di,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),di.catch(Hi=>Promise.reject(Hi))}setBrowserUrl(D,F){const Z=this.urlSerializer.serialize(D);if(this.location.isCurrentPathEqualTo(Z)||F.extras.replaceUrl){const le={...F.extras.state,...this.generateNgRouterState(F.id,this.browserPageId)};this.location.replaceState(Z,"",le)}else{const ue={...F.extras.state,...this.generateNgRouterState(F.id,F.targetPageId)};this.location.go(Z,"",ue)}}restoreHistory(D,F=!1){if("computed"===this.canceledNavigationResolution){const ue=this.currentPageId-(this.browserPageId??this.currentPageId);0!==ue?this.location.historyGo(ue):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===ue&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(D,F){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:F}:{navigationId:D}}}return I.\u0275fac=function(D){return new(D||I)},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),Sr=(()=>{class I{constructor(D,F,Z,ue,le,Ke){this.router=D,this.route=F,this.tabIndexAttribute=Z,this.renderer=ue,this.el=le,this.locationStrategy=Ke,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Yt.x;const ut=le.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ut||"area"===ut,this.isAnchorElement?this.subscription=D.events.subscribe(di=>{di instanceof Rr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(D){this._preserveFragment=(0,w.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,w.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,w.D6c)(D)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(D){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",D)}ngOnChanges(D){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(D,F,Z,ue,le){return!!(null===this.urlTree||this.isAnchorElement&&(0!==D||F||Z||ue||le||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const D=null===this.href?null:(0,w.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",D)}applyAttributeValue(D,F){const Z=this.renderer,ue=this.el.nativeElement;null!==F?Z.setAttribute(ue,D,F):Z.removeAttribute(ue,D)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(D){return new(D||I)(w.Y36(jn),w.Y36(fo),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Zt.S$))},I.\u0275dir=w.lG2({type:I,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(D,F){1&D&&w.NdJ("click",function(ue){return F.onClick(ue.button,ue.ctrlKey,ue.shiftKey,ue.altKey,ue.metaKey)}),2&D&&w.uIk("target",F.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[w.TTD]}),I})(),Vl=(()=>{class I{get isActive(){return this._isActive}constructor(D,F,Z,ue,le){this.router=D,this.element=F,this.renderer=Z,this.cdr=ue,this.link=le,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new w.vpe,this.routerEventsSubscription=D.events.subscribe(Ke=>{Ke instanceof Rr&&this.update()})}ngAfterContentInit(){(0,se.of)(this.links.changes,(0,se.of)(null)).pipe((0,Xt.J)()).subscribe(D=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const D=[...this.links.toArray(),this.link].filter(F=>!!F).map(F=>F.onChanges);this.linkInputChangesSubscription=(0,a.D)(D).pipe((0,Xt.J)()).subscribe(F=>{this._isActive!==this.isLinkActive(this.router)(F)&&this.update()})}set routerLinkActive(D){const F=Array.isArray(D)?D:D.split(" ");this.classes=F.filter(Z=>!!Z)}ngOnChanges(D){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const D=this.hasActiveLinks();this._isActive!==D&&(this._isActive=D,this.cdr.markForCheck(),this.classes.forEach(F=>{D?this.renderer.addClass(this.element.nativeElement,F):this.renderer.removeClass(this.element.nativeElement,F)}),D&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(D))})}isLinkActive(D){const F=function Os(I){return!!I.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return Z=>!!Z.urlTree&&D.isActive(Z.urlTree,F)}hasActiveLinks(){const D=this.isLinkActive(this.router);return this.link&&D(this.link)||this.links.some(D)}}return I.\u0275fac=function(D){return new(D||I)(w.Y36(jn),w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(w.sBO),w.Y36(Sr,8))},I.\u0275dir=w.lG2({type:I,selectors:[["","routerLinkActive",""]],contentQueries:function(D,F,Z){if(1&D&&w.Suo(Z,Sr,5),2&D){let ue;w.iGM(ue=w.CRH())&&(F.links=ue)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[w.TTD]}),I})();class ol{}let $a=(()=>{class I{constructor(D,F,Z,ue,le){this.router=D,this.injector=Z,this.preloadingStrategy=ue,this.loader=le}setUpPreloading(){this.subscription=this.router.events.pipe((0,kt.h)(D=>D instanceof Rr),(0,ai.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,F){const Z=[];for(const ue of F){ue.providers&&!ue._injector&&(ue._injector=(0,w.MMx)(ue.providers,D,`Route: ${ue.path}`));const le=ue._injector??D,Ke=ue._loadedInjector??le;(ue.loadChildren&&!ue._loadedRoutes&&void 0===ue.canLoad||ue.loadComponent&&!ue._loadedComponent)&&Z.push(this.preloadConfig(le,ue)),(ue.children||ue._loadedRoutes)&&Z.push(this.processRoutes(Ke,ue.children??ue._loadedRoutes))}return(0,a.D)(Z).pipe((0,Xt.J)())}preloadConfig(D,F){return this.preloadingStrategy.preload(F,()=>{let Z;Z=F.loadChildren&&void 0===F.canLoad?this.loader.loadChildren(D,F):(0,se.of)(null);const ue=Z.pipe((0,Ot.z)(le=>null===le?(0,se.of)(void 0):(F._loadedRoutes=le.routes,F._loadedInjector=le.injector,this.processRoutes(le.injector??D,le.routes))));if(F.loadComponent&&!F._loadedComponent){const le=this.loader.loadComponent(F);return(0,a.D)([ue,le]).pipe((0,Xt.J)())}return ue})}}return I.\u0275fac=function(D){return new(D||I)(w.LFG(jn),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(ol),w.LFG(Vn))},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const To=new w.OlP("");let yl=(()=>{class I{constructor(D,F,Z,ue,le={}){this.urlSerializer=D,this.transitions=F,this.viewportScroller=Z,this.zone=ue,this.options=le,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},le.scrollPositionRestoration=le.scrollPositionRestoration||"disabled",le.anchorScrolling=le.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof Rr&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof hs&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,F){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hs(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return I.\u0275fac=function(D){w.$Z()},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac}),I})();var io=(()=>((io=io||{})[io.COMPLETE=0]="COMPLETE",io[io.FAILED=1]="FAILED",io[io.REDIRECTING=2]="REDIRECTING",io))();const co=!1;function is(I,A){return{\u0275kind:I,\u0275providers:A}}const Ho=new w.OlP("",{providedIn:"root",factory:()=>!1});function Xs(){const I=(0,w.f3M)(w.zs3);return A=>{const D=I.get(w.z2F);if(A!==D.components[0])return;const F=I.get(jn),Z=I.get(Js);1===I.get(v)&&F.initialNavigation(),I.get(b,null,w.XFs.Optional)?.setUpPreloading(),I.get(To,null,w.XFs.Optional)?.init(),F.resetRootComponentType(D.componentTypes[0]),Z.closed||(Z.next(),Z.complete(),Z.unsubscribe())}}const Js=new w.OlP(co?"bootstrap done indicator":"",{factory:()=>new Yt.x}),v=new w.OlP(co?"initial navigation":"",{providedIn:"root",factory:()=>1});function g(){let I=[];return I=co?[{provide:w.Xts,multi:!0,useFactory:()=>{const A=(0,w.f3M)(jn);return()=>A.events.subscribe(D=>{console.group?.(`Router Event: ${D.constructor.name}`),console.log(function zr(I){if(!("type"in I))return`Unknown Router Event: ${I.constructor.name}`;switch(I.type){case 14:return`ActivationEnd(path: '${I.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${I.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${I.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${I.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state}, shouldActivate: ${I.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state})`;case 2:return`NavigationCancel(id: ${I.id}, url: '${I.url}')`;case 16:return`NavigationSkipped(id: ${I.id}, url: '${I.url}')`;case 1:return`NavigationEnd(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${I.id}, url: '${I.url}', error: ${I.error})`;case 0:return`NavigationStart(id: ${I.id}, url: '${I.url}')`;case 6:return`ResolveEnd(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state})`;case 5:return`ResolveStart(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state})`;case 10:return`RouteConfigLoadEnd(path: ${I.route.path})`;case 9:return`RouteConfigLoadStart(path: ${I.route.path})`;case 4:return`RoutesRecognized(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state})`;case 15:return`Scroll(anchor: '${I.anchor}', position: '${I.position?`${I.position[0]}, ${I.position[1]}`:null}')`}}(D)),console.log(D),console.groupEnd?.()})}}]:[],is(1,I)}const b=new w.OlP(co?"router preloader":"");function E(I){return is(0,[{provide:b,useExisting:$a},{provide:ol,useExisting:I}])}const G=!1,te=new w.OlP(G?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ve=[Zt.Ye,{provide:li,useClass:qi},jn,Do,{provide:fo,useFactory:function Ks(I){return I.routerState.root},deps:[jn]},Vn,G?{provide:Ho,useValue:!0}:[]];function Fe(){return new w.PXZ("Router",jn)}let Pe=(()=>{class I{constructor(D){}static forRoot(D,F){return{ngModule:I,providers:[ve,G&&F?.enableTracing?g().\u0275providers:[],{provide:nr,multi:!0,useValue:D},{provide:te,useFactory:Et,deps:[[jn,new w.FiY,new w.tp0]]},{provide:mi,useValue:F||{}},F?.useHash?{provide:Zt.S$,useClass:Zt.Do}:{provide:Zt.S$,useClass:Zt.b0},{provide:To,useFactory:()=>{const I=(0,w.f3M)(Zt.EM),A=(0,w.f3M)(w.R0b),D=(0,w.f3M)(mi),F=(0,w.f3M)(Uo),Z=(0,w.f3M)(li);return D.scrollOffset&&I.setOffset(D.scrollOffset),new yl(Z,F,I,A,D)}},F?.preloadingStrategy?E(F.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:Fe},F?.initialNavigation?He(F):[],[{provide:bt,useFactory:Xs},{provide:w.tb,multi:!0,useExisting:bt}]]}}static forChild(D){return{ngModule:I,providers:[{provide:nr,multi:!0,useValue:D}]}}}return I.\u0275fac=function(D){return new(D||I)(w.LFG(te,8))},I.\u0275mod=w.oAB({type:I}),I.\u0275inj=w.cJS({imports:[lo]}),I})();function Et(I){if(G&&I)throw new w.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function He(I){return["disabled"===I.initialNavigation?is(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const A=(0,w.f3M)(jn);return()=>{A.setUpLocationChangeListener()}}},{provide:v,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?is(2,[{provide:v,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:A=>{const D=A.get(Zt.V_,Promise.resolve());return()=>D.then(()=>new Promise(F=>{const Z=A.get(jn),ue=A.get(Js);(function Ul(I,A){I.events.pipe((0,kt.h)(D=>D instanceof Rr||D instanceof Eo||D instanceof Fo||D instanceof sn),(0,Wt.U)(D=>D instanceof Rr||D instanceof sn?io.COMPLETE:D instanceof Eo&&(0===D.code||1===D.code)?io.REDIRECTING:io.FAILED),(0,kt.h)(D=>D!==io.REDIRECTING),(0,Oe.q)(1)).subscribe(()=>{A()})})(Z,()=>{F(!0)}),A.get(Uo).afterPreactivation=()=>(F(!0),ue.closed?(0,se.of)(void 0):ue),Z.initialNavigation()}))}}]).\u0275providers:[]]}const bt=new w.OlP(G?"Router Initializer":"")}},yi=>{yi(yi.s=8435)}]);