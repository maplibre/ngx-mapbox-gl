import{i as A,m as D,n as I,q as z,r as E}from"./chunk-UAOGWWML.js";import{Ab as c,Db as x,Ea as _,Ib as F,Jb as k,Kb as L,Lb as g,Mb as f,Nb as p,Pc as q,bb as o,dc as O,fc as T,ha as v,kc as $,lc as m,mc as b,sa as S,yb as P,zb as h}from"./chunk-IGAQZRMC.js";import"./chunk-SE5JAREP.js";var B=i=>({font:i}),G=i=>({fill:i});function R(i,r){if(i&1&&(S(),p(0,"path",1)),i&2){let d=r.$implicit;c("ngStyle",b(2,G,d.fill)),h("d",d.d)}}var U=()=>[.3],N=()=>[0,20],H=()=>({preserveDrawingBuffer:!0}),j=()=>["!=","cluster",!0];function V(i,r){if(i&1&&p(0,"showcase-cluster-point",6),i&2){let d=r.$implicit;c("properties",d.properties)}}var J=(()=>{let r=class r{constructor(){this.properties=_()}ngOnInit(){let n=[],e=this.properties(),t=[e?.mag1,e?.mag2,e?.mag3,e?.mag4,e?.mag5],s=0;for(let a=0;a<t.length;a++)n.push(s),s+=t[a];let l=s>=1e3?22:s>=100?20:s>=10?18:16;this.font=`${l}px sans-serif`,this.r=s>=1e3?50:s>=100?32:s>=10?24:18,this.r0=Math.round(this.r*.6),this.w=this.r*2,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let a=0;a<t.length;a++)this.segments.push(this.donutSegment(n[a]/s,(n[a]+t[a])/s,u[a]));this.totalString=s.toLocaleString()}donutSegment(n,e,t){e-n===1&&(e-=1e-5);let s=2*Math.PI*(n-.25),l=2*Math.PI*(e-.25),a=Math.cos(s),y=Math.sin(s),C=Math.cos(l),w=Math.sin(l),M=e-n>.5?1:0;return{d:`M ${this.r+this.r0*a} ${this.r+this.r0*y} L ${this.r+this.r*a} ${this.r+this.r*y} A ${this.r} ${this.r} 0 ${M} 1 ${this.r+this.r*C} ${this.r+this.r*w} L ${this.r+this.r0*C} ${this.r+this.r0*w} A ${this.r0} ${this.r0} 0 ${M} 0 ${this.r+this.r0*a} ${this.r+this.r0*y}`,fill:t}}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v({type:r,selectors:[["showcase-cluster-point"]],inputs:{properties:[1,"properties"]},standalone:!0,features:[$],decls:6,vars:11,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle"],["fill","white"],["dominant-baseline","central"]],template:function(e,t){e&1&&(S(),g(0,"svg",0),k(1,R,1,4,":svg:path",1,F),p(3,"circle",2),g(4,"text",3),O(5),f()()),e&2&&(c("ngStyle",b(9,B,t.font)),h("width",t.w)("height",t.w)("viewbox",t.viewbox),o(),L(t.segments),o(2),h("cx",t.r)("cy",t.r)("r",t.r0),o(),h("transform",t.textTransform),o(),T(" ",t.totalString," "))},dependencies:[q],encapsulation:2});let i=r;return i})(),u=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"],Y=(()=>{let r=class r{constructor(){let n=["<",["get","mag"],2],e=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],t=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],s=["all",[">=",["get","mag"],4],["<",["get","mag"],5]],l=[">=",["get","mag"],5];this.clusterProperties={mag1:["+",["case",n,1,0]],mag2:["+",["case",e,1,0]],mag3:["+",["case",t,1,0]],mag4:["+",["case",s,1,0]],mag5:["+",["case",l,1,0]]},this.circlePaint={"circle-color":["case",n,u[0],e,u[1],t,u[2],s,u[3],u[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v({type:r,selectors:[["showcase-demo"]],standalone:!0,features:[$],decls:6,vars:18,consts:[[3,"zoom","center","canvasContextAttributes"],["id","earthquakes","data","https://maplibre.org/maplibre-gl-js/docs/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(e,t){e&1&&(g(0,"mgl-map",0),p(1,"mgl-geojson-source",1),g(2,"mgl-markers-for-clusters",2),P(3,V,1,1,"ng-template",3),f(),p(4,"mgl-layer",4)(5,"mgl-layer",5),f()),e&2&&(x("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),c("zoom",m(13,U))("center",m(14,N))("canvasContextAttributes",m(15,H)),o(),c("cluster",!0)("clusterRadius",80)("clusterProperties",t.clusterProperties),o(3),c("filter",m(16,j))("paint",t.circlePaint),o(),c("filter",m(17,j))("layout",t.labelLayout)("paint",t.labelPaint))},dependencies:[I,A,E,z,J,D],styles:[`[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}
/*# sourceMappingURL=examples-UPBTEGPO.css.map */`]});let i=r;return i})();export{Y as ClusterHtmlComponent,J as ClusterPointComponent};
//# sourceMappingURL=chunk-JDXBJL35.js.map
