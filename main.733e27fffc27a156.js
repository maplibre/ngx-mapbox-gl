(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[179],{3619:(cn,ft,V)=>{"use strict";V.d(ft,{a:()=>He});var T=V(4080),l=V(4650);function H(he,$e){1&he&&l.Hsn(0)}const g=["*"];let He=(()=>{class he{constructor(Ie,Be,Ue){this.componentFactoryResolver=Ie,this.injector=Be,this.appRef=Ue}ngAfterViewInit(){this.portalOutlet=new T.u0(document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items"),this.componentFactoryResolver,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}}return he.\u0275fac=function(Ie){return new(Ie||he)(l.Y36(l._Vd),l.Y36(l.zs3),l.Y36(l.z2F))},he.\u0275cmp=l.Xpm({type:he,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(Ie,Be){if(1&Ie&&l.Gf(T.ig,5),2&Ie){let Ue;l.iGM(Ue=l.CRH())&&(Be.portal=Ue.first)}},inputs:{position:"position"},ngContentSelectors:g,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(Ie,Be){1&Ie&&(l.F$t(),l.YNc(0,H,1,0,"ng-template",0))},dependencies:[T.bH],encapsulation:2}),he})()},6449:(cn,ft,V)=>{"use strict";V.d(ft,{$:()=>he});var T=V(4650),l=V(2510),H=V(3683),g=V(7392),He=V(4859);let he=(()=>{class $e{}return $e.\u0275fac=function(Be){return new(Be||$e)},$e.\u0275cmp=T.Xpm({type:$e,selectors:[["ng-component"]],decls:16,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-button","","routerLink","/"],["svgIcon","ngx-maplibre-gl"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/maplibre/ngx-maplibre-gl"],["svgIcon","github"]],template:function(Be,Ue){1&Be&&(T.TgZ(0,"mat-toolbar",0)(1,"div"),T._UZ(2,"div",1),T.TgZ(3,"a",2),T._UZ(4,"mat-icon",3),T._uU(5," ngx-maplibre-gl "),T.qZA(),T.TgZ(6,"a",4),T._uU(7," Demo "),T.qZA(),T.TgZ(8,"a",5),T._uU(9," Documentation "),T.qZA()(),T.TgZ(10,"div"),T._UZ(11,"div",6),T.TgZ(12,"a",7),T._UZ(13,"mat-icon",8),T._uU(14," GitHub "),T.qZA()()(),T._UZ(15,"router-outlet"))},dependencies:[l.lC,l.yS,H.Ye,g.Hw,He.zs],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]}),$e})()},6838:(cn,ft,V)=>{"use strict";V.d(ft,{x:()=>nt});var T=V(4080),l=V(6895),H=V(4859),g=V(7392),He=V(3683),he=V(2510),Be=(V(3619),V(6449),V(4650));let nt=(()=>{class Re{}return Re.\u0275fac=function(We){return new(We||Re)},Re.\u0275mod=Be.oAB({type:Re}),Re.\u0275inj=Be.cJS({imports:[l.ez,he.Bz,He.g0,g.Ps,H.ot,T.eL]}),Re})()},3932:(cn,ft,V)=>{"use strict";var T=V(1481),l=V(4650),H=V(2510);let g=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-root"]],decls:1,vars:0,template:function(i,p){1&i&&l._UZ(0,"router-outlet")},dependencies:[H.lC],encapsulation:2}),c})();var He=V(7392),he=V(7340);function Ie(c){return new l.vHH(3e3,!1)}function en(){return typeof window<"u"&&typeof window.document<"u"}function sn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function bn(c){switch(c.length){case 0:return new he.ZN;case 1:return c[0];default:return new he.ZE(c)}}function Un(c,h,i,p,I=new Map,N=new Map){const ce=[],Ee=[];let Ge=-1,yt=null;if(p.forEach(zt=>{const $t=zt.get("offset"),En=$t==Ge,Wn=En&&yt||new Map;zt.forEach((kn,zn)=>{let bi=zn,Di=kn;if("offset"!==zn)switch(bi=h.normalizePropertyName(bi,ce),Di){case he.k1:Di=I.get(zn);break;case he.l3:Di=N.get(zn);break;default:Di=h.normalizeStyleValue(zn,bi,Di,ce)}Wn.set(bi,Di)}),En||Ee.push(Wn),yt=Wn,Ge=$t}),ce.length)throw function tn(c){return new l.vHH(3502,!1)}();return Ee}function Kn(c,h,i,p){switch(h){case"start":c.onStart(()=>p(i&&hi(i,"start",c)));break;case"done":c.onDone(()=>p(i&&hi(i,"done",c)));break;case"destroy":c.onDestroy(()=>p(i&&hi(i,"destroy",c)))}}function hi(c,h,i){const N=Fi(c.element,c.triggerName,c.fromState,c.toState,h||c.phaseName,i.totalTime??c.totalTime,!!i.disabled),ce=c._data;return null!=ce&&(N._data=ce),N}function Fi(c,h,i,p,I="",N=0,ce){return{element:c,triggerName:h,fromState:i,toState:p,phaseName:I,totalTime:N,disabled:!!ce}}function Oi(c,h,i){let p=c.get(h);return p||c.set(h,p=i),p}function yi(c){const h=c.indexOf(":");return[c.substring(1,h),c.slice(h+1)]}let un=(c,h)=>!1,Nn=(c,h,i)=>[],tt=null;function Y(c){const h=c.parentNode||c.host;return h===tt?null:h}(sn()||typeof Element<"u")&&(en()?(tt=(()=>document.documentElement)(),un=(c,h)=>{for(;h;){if(h===c)return!0;h=Y(h)}return!1}):un=(c,h)=>c.contains(h),Nn=(c,h,i)=>{if(i)return Array.from(c.querySelectorAll(h));const p=c.querySelector(h);return p?[p]:[]});let Je=null,ue=!1;const Ae=un,ut=Nn;let dn=(()=>{class c{validateStyleProperty(i){return function fe(c){Je||(Je=function de(){return typeof document<"u"?document.body:null}()||{},ue=!!Je.style&&"WebkitAppearance"in Je.style);let h=!0;return Je.style&&!function Me(c){return"ebkit"==c.substring(1,6)}(c)&&(h=c in Je.style,!h&&ue&&(h="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in Je.style)),h}(i)}matchesElement(i,p){return!1}containsElement(i,p){return Ae(i,p)}getParentElement(i){return Y(i)}query(i,p,I){return ut(i,p,I)}computeStyle(i,p,I){return I||""}animate(i,p,I,N,ce,Ee=[],Ge){return new he.ZN(I,N)}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})(),Vt=(()=>{class c{}return c.NOOP=new dn,c})();const Nt="ng-enter",bt="ng-leave",et="ng-trigger",ot=".ng-trigger",Fe="ng-animating",Se=".ng-animating";function Te(c){if("number"==typeof c)return c;const h=c.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:J(parseFloat(h[1]),h[2])}function J(c,h){return"s"===h?1e3*c:c}function $(c,h,i){return c.hasOwnProperty("duration")?c:function re(c,h,i){let I,N=0,ce="";if("string"==typeof c){const Ee=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ee)return h.push(Ie()),{duration:0,delay:0,easing:""};I=J(parseFloat(Ee[1]),Ee[2]);const Ge=Ee[3];null!=Ge&&(N=J(parseFloat(Ge),Ee[4]));const yt=Ee[5];yt&&(ce=yt)}else I=c;if(!i){let Ee=!1,Ge=h.length;I<0&&(h.push(function Be(){return new l.vHH(3100,!1)}()),Ee=!0),N<0&&(h.push(function Ue(){return new l.vHH(3101,!1)}()),Ee=!0),Ee&&h.splice(Ge,0,Ie())}return{duration:I,delay:N,easing:ce}}(c,h,i)}function _e(c,h={}){return Object.keys(c).forEach(i=>{h[i]=c[i]}),h}function ke(c){const h=new Map;return Object.keys(c).forEach(i=>{h.set(i,c[i])}),h}function Xe(c,h=new Map,i){if(i)for(let[p,I]of i)h.set(p,I);for(let[p,I]of c)h.set(p,I);return h}function Ke(c,h,i){return i?h+":"+i+";":""}function at(c){let h="";for(let i=0;i<c.style.length;i++){const p=c.style.item(i);h+=Ke(0,p,c.style.getPropertyValue(p))}for(const i in c.style)c.style.hasOwnProperty(i)&&!i.startsWith("_")&&(h+=Ke(0,Jn(i),c.style[i]));c.setAttribute("style",h)}function Rt(c,h,i){c.style&&(h.forEach((p,I)=>{const N=xn(I);i&&!i.has(I)&&i.set(I,c.style[N]),c.style[N]=p}),sn()&&at(c))}function Bt(c,h){c.style&&(h.forEach((i,p)=>{const I=xn(p);c.style[I]=""}),sn()&&at(c))}function xe(c){return Array.isArray(c)?1==c.length?c[0]:(0,he.vP)(c):c}const De=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ze(c){let h=[];if("string"==typeof c){let i;for(;i=De.exec(c);)h.push(i[1]);De.lastIndex=0}return h}function _t(c,h,i){const p=c.toString(),I=p.replace(De,(N,ce)=>{let Ee=h[ce];return null==Ee&&(i.push(function Re(c){return new l.vHH(3003,!1)}()),Ee=""),Ee.toString()});return I==p?c:I}function qt(c){const h=[];let i=c.next();for(;!i.done;)h.push(i.value),i=c.next();return h}const In=/-+([a-z0-9])/g;function xn(c){return c.replace(In,(...h)=>h[1].toUpperCase())}function Jn(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Si(c,h,i){switch(h.type){case 7:return c.visitTrigger(h,i);case 0:return c.visitState(h,i);case 1:return c.visitTransition(h,i);case 2:return c.visitSequence(h,i);case 3:return c.visitGroup(h,i);case 4:return c.visitAnimate(h,i);case 5:return c.visitKeyframes(h,i);case 6:return c.visitStyle(h,i);case 8:return c.visitReference(h,i);case 9:return c.visitAnimateChild(h,i);case 10:return c.visitAnimateRef(h,i);case 11:return c.visitQuery(h,i);case 12:return c.visitStagger(h,i);default:throw function it(c){return new l.vHH(3004,!1)}()}}function Ui(c,h){return window.getComputedStyle(c)[h]}function xi(c,h){const i=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(p=>function Fr(c,h,i){if(":"==c[0]){const Ge=function ps(c,h){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(i,p)=>parseFloat(p)>parseFloat(i);case":decrement":return(i,p)=>parseFloat(p)<parseFloat(i);default:return h.push(function lt(c){return new l.vHH(3016,!1)}()),"* => *"}}(c,i);if("function"==typeof Ge)return void h.push(Ge);c=Ge}const p=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==p||p.length<4)return i.push(function Gt(c){return new l.vHH(3015,!1)}()),h;const I=p[1],N=p[2],ce=p[3];h.push($r(I,ce));"<"==N[0]&&!("*"==I&&"*"==ce)&&h.push($r(ce,I))}(p,i,h)):i.push(c),i}const Nr=new Set(["true","1"]),ki=new Set(["false","0"]);function $r(c,h){const i=Nr.has(c)||ki.has(c),p=Nr.has(h)||ki.has(h);return(I,N)=>{let ce="*"==c||c==I,Ee="*"==h||h==N;return!ce&&i&&"boolean"==typeof I&&(ce=I?Nr.has(c):ki.has(c)),!Ee&&p&&"boolean"==typeof N&&(Ee=N?Nr.has(h):ki.has(h)),ce&&Ee}}const Ai=new RegExp("s*:selfs*,?","g");function Gn(c,h,i,p){return new dr(c).build(h,i,p)}class dr{constructor(h){this._driver=h}build(h,i,p){const I=new Gs(i);return this._resetContextStyleTimingState(I),Si(this,xe(h),I)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,i){let p=i.queryCount=0,I=i.depCount=0;const N=[],ce=[];return"@"==h.name.charAt(0)&&i.errors.push(function je(){return new l.vHH(3006,!1)}()),h.definitions.forEach(Ee=>{if(this._resetContextStyleTimingState(i),0==Ee.type){const Ge=Ee,yt=Ge.name;yt.toString().split(/\s*,\s*/).forEach(zt=>{Ge.name=zt,N.push(this.visitState(Ge,i))}),Ge.name=yt}else if(1==Ee.type){const Ge=this.visitTransition(Ee,i);p+=Ge.queryCount,I+=Ge.depCount,ce.push(Ge)}else i.errors.push(function Ct(){return new l.vHH(3007,!1)}())}),{type:7,name:h.name,states:N,transitions:ce,queryCount:p,depCount:I,options:null}}visitState(h,i){const p=this.visitStyle(h.styles,i),I=h.options&&h.options.params||null;if(p.containsDynamicStyles){const N=new Set,ce=I||{};p.styles.forEach(Ee=>{Ee instanceof Map&&Ee.forEach(Ge=>{Ze(Ge).forEach(yt=>{ce.hasOwnProperty(yt)||N.add(yt)})})}),N.size&&(qt(N.values()),i.errors.push(function wt(c,h){return new l.vHH(3008,!1)}()))}return{type:0,name:h.name,style:p,options:I?{params:I}:null}}visitTransition(h,i){i.queryCount=0,i.depCount=0;const p=Si(this,xe(h.animation),i);return{type:1,matchers:xi(h.expr,i.errors),animation:p,queryCount:i.queryCount,depCount:i.depCount,options:Gr(h.options)}}visitSequence(h,i){return{type:2,steps:h.steps.map(p=>Si(this,p,i)),options:Gr(h.options)}}visitGroup(h,i){const p=i.currentTime;let I=0;const N=h.steps.map(ce=>{i.currentTime=p;const Ee=Si(this,ce,i);return I=Math.max(I,i.currentTime),Ee});return i.currentTime=I,{type:3,steps:N,options:Gr(h.options)}}visitAnimate(h,i){const p=function Kr(c,h){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return da($(c,h).duration,0,"");const i=c;if(i.split(/\s+/).some(N=>"{"==N.charAt(0)&&"{"==N.charAt(1))){const N=da(0,0,"");return N.dynamic=!0,N.strValue=i,N}const I=$(i,h);return da(I.duration,I.delay,I.easing)}(h.timings,i.errors);i.currentAnimateTimings=p;let I,N=h.styles?h.styles:(0,he.oB)({});if(5==N.type)I=this.visitKeyframes(N,i);else{let ce=h.styles,Ee=!1;if(!ce){Ee=!0;const yt={};p.easing&&(yt.easing=p.easing),ce=(0,he.oB)(yt)}i.currentTime+=p.duration+p.delay;const Ge=this.visitStyle(ce,i);Ge.isEmptyStep=Ee,I=Ge}return i.currentAnimateTimings=null,{type:4,timings:p,style:I,options:null}}visitStyle(h,i){const p=this._makeStyleAst(h,i);return this._validateStyleAst(p,i),p}_makeStyleAst(h,i){const p=[],I=Array.isArray(h.styles)?h.styles:[h.styles];for(let Ee of I)"string"==typeof Ee?Ee===he.l3?p.push(Ee):i.errors.push(new l.vHH(3002,!1)):p.push(ke(Ee));let N=!1,ce=null;return p.forEach(Ee=>{if(Ee instanceof Map&&(Ee.has("easing")&&(ce=Ee.get("easing"),Ee.delete("easing")),!N))for(let Ge of Ee.values())if(Ge.toString().indexOf("{{")>=0){N=!0;break}}),{type:6,styles:p,easing:ce,offset:h.offset,containsDynamicStyles:N,options:null}}_validateStyleAst(h,i){const p=i.currentAnimateTimings;let I=i.currentTime,N=i.currentTime;p&&N>0&&(N-=p.duration+p.delay),h.styles.forEach(ce=>{"string"!=typeof ce&&ce.forEach((Ee,Ge)=>{const yt=i.collectedStyles.get(i.currentQuerySelector),zt=yt.get(Ge);let $t=!0;zt&&(N!=I&&N>=zt.startTime&&I<=zt.endTime&&(i.errors.push(function Xt(c,h,i,p,I){return new l.vHH(3010,!1)}()),$t=!1),N=zt.startTime),$t&&yt.set(Ge,{startTime:N,endTime:I}),i.options&&function Pe(c,h,i){const p=h.params||{},I=Ze(c);I.length&&I.forEach(N=>{p.hasOwnProperty(N)||i.push(function nt(c){return new l.vHH(3001,!1)}())})}(Ee,i.options,i.errors)})})}visitKeyframes(h,i){const p={type:5,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push(function Dt(){return new l.vHH(3011,!1)}()),p;let N=0;const ce=[];let Ee=!1,Ge=!1,yt=0;const zt=h.steps.map(Di=>{const lr=this._makeStyleAst(Di,i);let go=null!=lr.offset?lr.offset:function fs(c){if("string"==typeof c)return null;let h=null;if(Array.isArray(c))c.forEach(i=>{if(i instanceof Map&&i.has("offset")){const p=i;h=parseFloat(p.get("offset")),p.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const i=c;h=parseFloat(i.get("offset")),i.delete("offset")}return h}(lr.styles),Ir=0;return null!=go&&(N++,Ir=lr.offset=go),Ge=Ge||Ir<0||Ir>1,Ee=Ee||Ir<yt,yt=Ir,ce.push(Ir),lr});Ge&&i.errors.push(function Oe(){return new l.vHH(3012,!1)}()),Ee&&i.errors.push(function Ne(){return new l.vHH(3200,!1)}());const $t=h.steps.length;let En=0;N>0&&N<$t?i.errors.push(function Ot(){return new l.vHH(3202,!1)}()):0==N&&(En=1/($t-1));const Wn=$t-1,kn=i.currentTime,zn=i.currentAnimateTimings,bi=zn.duration;return zt.forEach((Di,lr)=>{const go=En>0?lr==Wn?1:En*lr:ce[lr],Ir=go*bi;i.currentTime=kn+zn.delay+Ir,zn.duration=Ir,this._validateStyleAst(Di,i),Di.offset=go,p.styles.push(Di)}),p}visitReference(h,i){return{type:8,animation:Si(this,xe(h.animation),i),options:Gr(h.options)}}visitAnimateChild(h,i){return i.depCount++,{type:9,options:Gr(h.options)}}visitAnimateRef(h,i){return{type:10,animation:this.visitReference(h.animation,i),options:Gr(h.options)}}visitQuery(h,i){const p=i.currentQuerySelector,I=h.options||{};i.queryCount++,i.currentQuery=h;const[N,ce]=function wr(c){const h=!!c.split(/\s*,\s*/).find(i=>":self"==i);return h&&(c=c.replace(Ai,"")),c=c.replace(/@\*/g,ot).replace(/@\w+/g,i=>ot+"-"+i.slice(1)).replace(/:animating/g,Se),[c,h]}(h.selector);i.currentQuerySelector=p.length?p+" "+N:N,Oi(i.collectedStyles,i.currentQuerySelector,new Map);const Ee=Si(this,xe(h.animation),i);return i.currentQuery=null,i.currentQuerySelector=p,{type:11,selector:N,limit:I.limit||0,optional:!!I.optional,includeSelf:ce,animation:Ee,originalSelector:h.selector,options:Gr(h.options)}}visitStagger(h,i){i.currentQuery||i.errors.push(function kt(){return new l.vHH(3013,!1)}());const p="full"===h.timings?{duration:0,delay:0,easing:"full"}:$(h.timings,i.errors,!0);return{type:12,animation:Si(this,xe(h.animation),i),timings:p,options:null}}}class Gs{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Gr(c){return c?(c=_e(c)).params&&(c.params=function $s(c){return c?_e(c):null}(c.params)):c={},c}function da(c,h,i){return{duration:c,delay:h,easing:i}}function ts(c,h,i,p,I,N,ce=null,Ee=!1){return{type:1,element:c,keyframes:h,preStyleProps:i,postStyleProps:p,duration:I,delay:N,totalTime:I+N,easing:ce,subTimeline:Ee}}class ha{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,i){let p=this._map.get(h);p||this._map.set(h,p=[]),p.push(...i)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const Pl=new RegExp(":enter","g"),kl=new RegExp(":leave","g");function Zs(c,h,i,p,I,N=new Map,ce=new Map,Ee,Ge,yt=[]){return(new Aa).buildKeyframes(c,h,i,p,I,N,ce,Ee,Ge,yt)}class Aa{buildKeyframes(h,i,p,I,N,ce,Ee,Ge,yt,zt=[]){yt=yt||new ha;const $t=new wo(h,i,yt,I,N,zt,[]);$t.options=Ge;const En=Ge.delay?Te(Ge.delay):0;$t.currentTimeline.delayNextStep(En),$t.currentTimeline.setStyles([ce],null,$t.errors,Ge),Si(this,p,$t);const Wn=$t.timelines.filter(kn=>kn.containsAnimation());if(Wn.length&&Ee.size){let kn;for(let zn=Wn.length-1;zn>=0;zn--){const bi=Wn[zn];if(bi.element===i){kn=bi;break}}kn&&!kn.allowOnlyTimelineStyles()&&kn.setStyles([Ee],null,$t.errors,Ge)}return Wn.length?Wn.map(kn=>kn.buildKeyframes()):[ts(i,[],[],[],0,En,"",!1)]}visitTrigger(h,i){}visitState(h,i){}visitTransition(h,i){}visitAnimateChild(h,i){const p=i.subInstructions.get(i.element);if(p){const I=i.createSubContext(h.options),N=i.currentTimeline.currentTime,ce=this._visitSubInstructions(p,I,I.options);N!=ce&&i.transformIntoNewTimeline(ce)}i.previousNode=h}visitAnimateRef(h,i){const p=i.createSubContext(h.options);p.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],i,p),this.visitReference(h.animation,p),i.transformIntoNewTimeline(p.currentTimeline.currentTime),i.previousNode=h}_applyAnimationRefDelays(h,i,p){for(const I of h){const N=I?.delay;if(N){const ce="number"==typeof N?N:Te(_t(N,I?.params??{},i.errors));p.delayNextStep(ce)}}}_visitSubInstructions(h,i,p){let N=i.currentTimeline.currentTime;const ce=null!=p.duration?Te(p.duration):null,Ee=null!=p.delay?Te(p.delay):null;return 0!==ce&&h.forEach(Ge=>{const yt=i.appendInstructionToTimeline(Ge,ce,Ee);N=Math.max(N,yt.duration+yt.delay)}),N}visitReference(h,i){i.updateOptions(h.options,!0),Si(this,h.animation,i),i.previousNode=h}visitSequence(h,i){const p=i.subContextCount;let I=i;const N=h.options;if(N&&(N.params||N.delay)&&(I=i.createSubContext(N),I.transformIntoNewTimeline(),null!=N.delay)){6==I.previousNode.type&&(I.currentTimeline.snapshotCurrentStyles(),I.previousNode=Ms);const ce=Te(N.delay);I.delayNextStep(ce)}h.steps.length&&(h.steps.forEach(ce=>Si(this,ce,I)),I.currentTimeline.applyStylesToKeyframe(),I.subContextCount>p&&I.transformIntoNewTimeline()),i.previousNode=h}visitGroup(h,i){const p=[];let I=i.currentTimeline.currentTime;const N=h.options&&h.options.delay?Te(h.options.delay):0;h.steps.forEach(ce=>{const Ee=i.createSubContext(h.options);N&&Ee.delayNextStep(N),Si(this,ce,Ee),I=Math.max(I,Ee.currentTimeline.currentTime),p.push(Ee.currentTimeline)}),p.forEach(ce=>i.currentTimeline.mergeTimelineCollectedStyles(ce)),i.transformIntoNewTimeline(I),i.previousNode=h}_visitTiming(h,i){if(h.dynamic){const p=h.strValue;return $(i.params?_t(p,i.params,i.errors):p,i.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,i){const p=i.currentAnimateTimings=this._visitTiming(h.timings,i),I=i.currentTimeline;p.delay&&(i.incrementTime(p.delay),I.snapshotCurrentStyles());const N=h.style;5==N.type?this.visitKeyframes(N,i):(i.incrementTime(p.duration),this.visitStyle(N,i),I.applyStylesToKeyframe()),i.currentAnimateTimings=null,i.previousNode=h}visitStyle(h,i){const p=i.currentTimeline,I=i.currentAnimateTimings;!I&&p.hasCurrentStyleProperties()&&p.forwardFrame();const N=I&&I.easing||h.easing;h.isEmptyStep?p.applyEmptyStep(N):p.setStyles(h.styles,N,i.errors,i.options),i.previousNode=h}visitKeyframes(h,i){const p=i.currentAnimateTimings,I=i.currentTimeline.duration,N=p.duration,Ee=i.createSubContext().currentTimeline;Ee.easing=p.easing,h.styles.forEach(Ge=>{Ee.forwardTime((Ge.offset||0)*N),Ee.setStyles(Ge.styles,Ge.easing,i.errors,i.options),Ee.applyStylesToKeyframe()}),i.currentTimeline.mergeTimelineCollectedStyles(Ee),i.transformIntoNewTimeline(I+N),i.previousNode=h}visitQuery(h,i){const p=i.currentTimeline.currentTime,I=h.options||{},N=I.delay?Te(I.delay):0;N&&(6===i.previousNode.type||0==p&&i.currentTimeline.hasCurrentStyleProperties())&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ms);let ce=p;const Ee=i.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!I.optional,i.errors);i.currentQueryTotal=Ee.length;let Ge=null;Ee.forEach((yt,zt)=>{i.currentQueryIndex=zt;const $t=i.createSubContext(h.options,yt);N&&$t.delayNextStep(N),yt===i.element&&(Ge=$t.currentTimeline),Si(this,h.animation,$t),$t.currentTimeline.applyStylesToKeyframe(),ce=Math.max(ce,$t.currentTimeline.currentTime)}),i.currentQueryIndex=0,i.currentQueryTotal=0,i.transformIntoNewTimeline(ce),Ge&&(i.currentTimeline.mergeTimelineCollectedStyles(Ge),i.currentTimeline.snapshotCurrentStyles()),i.previousNode=h}visitStagger(h,i){const p=i.parentContext,I=i.currentTimeline,N=h.timings,ce=Math.abs(N.duration),Ee=ce*(i.currentQueryTotal-1);let Ge=ce*i.currentQueryIndex;switch(N.duration<0?"reverse":N.easing){case"reverse":Ge=Ee-Ge;break;case"full":Ge=p.currentStaggerTime}const zt=i.currentTimeline;Ge&&zt.delayNextStep(Ge);const $t=zt.currentTime;Si(this,h.animation,i),i.previousNode=h,p.currentStaggerTime=I.currentTime-$t+(I.startTime-p.currentTimeline.startTime)}}const Ms={};class wo{constructor(h,i,p,I,N,ce,Ee,Ge){this._driver=h,this.element=i,this.subInstructions=p,this._enterClassName=I,this._leaveClassName=N,this.errors=ce,this.timelines=Ee,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ms,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ge||new Ao(this._driver,i,0),Ee.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,i){if(!h)return;const p=h;let I=this.options;null!=p.duration&&(I.duration=Te(p.duration)),null!=p.delay&&(I.delay=Te(p.delay));const N=p.params;if(N){let ce=I.params;ce||(ce=this.options.params={}),Object.keys(N).forEach(Ee=>{(!i||!ce.hasOwnProperty(Ee))&&(ce[Ee]=_t(N[Ee],ce,this.errors))})}}_copyOptions(){const h={};if(this.options){const i=this.options.params;if(i){const p=h.params={};Object.keys(i).forEach(I=>{p[I]=i[I]})}}return h}createSubContext(h=null,i,p){const I=i||this.element,N=new wo(this._driver,I,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(I,p||0));return N.previousNode=this.previousNode,N.currentAnimateTimings=this.currentAnimateTimings,N.options=this._copyOptions(),N.updateOptions(h),N.currentQueryIndex=this.currentQueryIndex,N.currentQueryTotal=this.currentQueryTotal,N.parentContext=this,this.subContextCount++,N}transformIntoNewTimeline(h){return this.previousNode=Ms,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,i,p){const I={duration:i??h.duration,delay:this.currentTimeline.currentTime+(p??0)+h.delay,easing:""},N=new $a(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,I,h.stretchStartingKeyframe);return this.timelines.push(N),I}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,i,p,I,N,ce){let Ee=[];if(I&&Ee.push(this.element),h.length>0){h=(h=h.replace(Pl,"."+this._enterClassName)).replace(kl,"."+this._leaveClassName);let yt=this._driver.query(this.element,h,1!=p);0!==p&&(yt=p<0?yt.slice(yt.length+p,yt.length):yt.slice(0,p)),Ee.push(...yt)}return!N&&0==Ee.length&&ce.push(function Ft(c){return new l.vHH(3014,!1)}()),Ee}}class Ao{constructor(h,i,p,I){this._driver=h,this.element=i,this.startTime=p,this._elementTimelineStylesLookup=I,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const i=1===this._keyframes.size&&this._pendingStyles.size;this.duration||i?(this.forwardTime(this.currentTime+h),i&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,i){return this.applyStylesToKeyframe(),new Ao(this._driver,h,i||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,i){this._localTimelineStyles.set(h,i),this._globalTimelineStyles.set(h,i),this._styleSummary.set(h,{time:this.currentTime,value:i})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[i,p]of this._globalTimelineStyles)this._backFill.set(i,p||he.l3),this._currentKeyframe.set(i,he.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,i,p,I){i&&this._previousKeyframe.set("easing",i);const N=I&&I.params||{},ce=function Ws(c,h){const i=new Map;let p;return c.forEach(I=>{if("*"===I){p=p||h.keys();for(let N of p)i.set(N,he.l3)}else Xe(I,i)}),i}(h,this._globalTimelineStyles);for(let[Ee,Ge]of ce){const yt=_t(Ge,N,p);this._pendingStyles.set(Ee,yt),this._localTimelineStyles.has(Ee)||this._backFill.set(Ee,this._globalTimelineStyles.get(Ee)??he.l3),this._updateStyle(Ee,yt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,i)=>{this._currentKeyframe.set(i,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,i)=>{this._currentKeyframe.has(i)||this._currentKeyframe.set(i,h)}))}snapshotCurrentStyles(){for(let[h,i]of this._localTimelineStyles)this._pendingStyles.set(h,i),this._updateStyle(h,i)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let i in this._currentKeyframe)h.push(i);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((i,p)=>{const I=this._styleSummary.get(p);(!I||i.time>I.time)&&this._updateStyle(p,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,i=new Set,p=1===this._keyframes.size&&0===this.duration;let I=[];this._keyframes.forEach((Ee,Ge)=>{const yt=Xe(Ee,new Map,this._backFill);yt.forEach((zt,$t)=>{zt===he.k1?h.add($t):zt===he.l3&&i.add($t)}),p||yt.set("offset",Ge/this.duration),I.push(yt)});const N=h.size?qt(h.values()):[],ce=i.size?qt(i.values()):[];if(p){const Ee=I[0],Ge=new Map(Ee);Ee.set("offset",0),Ge.set("offset",1),I=[Ee,Ge]}return ts(this.element,I,N,ce,this.duration,this.startTime,this.easing,!1)}}class $a extends Ao{constructor(h,i,p,I,N,ce,Ee=!1){super(h,i,ce.delay),this.keyframes=p,this.preStyleProps=I,this.postStyleProps=N,this._stretchStartingKeyframe=Ee,this.timings={duration:ce.duration,delay:ce.delay,easing:ce.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:i,duration:p,easing:I}=this.timings;if(this._stretchStartingKeyframe&&i){const N=[],ce=p+i,Ee=i/ce,Ge=Xe(h[0]);Ge.set("offset",0),N.push(Ge);const yt=Xe(h[0]);yt.set("offset",Pa(Ee)),N.push(yt);const zt=h.length-1;for(let $t=1;$t<=zt;$t++){let En=Xe(h[$t]);const Wn=En.get("offset");En.set("offset",Pa((i+Wn*p)/ce)),N.push(En)}p=ce,i=0,I="",h=N}return ts(this.element,h,this.preStyleProps,this.postStyleProps,p,i,I,!0)}}function Pa(c,h=3){const i=Math.pow(10,h-1);return Math.round(c*i)/i}class Br{}const qs=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ts extends Br{normalizePropertyName(h,i){return xn(h)}normalizeStyleValue(h,i,p,I){let N="";const ce=p.toString().trim();if(qs.has(i)&&0!==p&&"0"!==p)if("number"==typeof p)N="px";else{const Ee=p.match(/^[+-]?[\d\.]+([a-z]*)$/);Ee&&0==Ee[1].length&&I.push(function We(c,h){return new l.vHH(3005,!1)}())}return ce+N}}function Is(c,h,i,p,I,N,ce,Ee,Ge,yt,zt,$t,En){return{type:0,element:c,triggerName:h,isRemovalTransition:I,fromState:i,fromStyles:N,toState:p,toStyles:ce,timelines:Ee,queriedElements:Ge,preStyleProps:yt,postStyleProps:zt,totalTime:$t,errors:En}}const ao={};class ns{constructor(h,i,p){this._triggerName=h,this.ast=i,this._stateStyles=p}match(h,i,p,I){return function gs(c,h,i,p,I){return c.some(N=>N(h,i,p,I))}(this.ast.matchers,h,i,p,I)}buildStyles(h,i,p){let I=this._stateStyles.get("*");return void 0!==h&&(I=this._stateStyles.get(h?.toString())||I),I?I.buildStyles(i,p):new Map}build(h,i,p,I,N,ce,Ee,Ge,yt,zt){const $t=[],En=this.ast.options&&this.ast.options.params||ao,kn=this.buildStyles(p,Ee&&Ee.params||ao,$t),zn=Ge&&Ge.params||ao,bi=this.buildStyles(I,zn,$t),Di=new Set,lr=new Map,go=new Map,Ir="void"===I,Sa={params:nr(zn,En),delay:this.ast.options?.delay},Ta=zt?[]:Zs(h,i,this.ast.animation,N,ce,kn,bi,Sa,yt,$t);let Hr=0;if(Ta.forEach(Il=>{Hr=Math.max(Il.duration+Il.delay,Hr)}),$t.length)return Is(i,this._triggerName,p,I,Ir,kn,bi,[],[],lr,go,Hr,$t);Ta.forEach(Il=>{const Al=Il.element,ua=Oi(lr,Al,new Set);Il.preStyleProps.forEach(ec=>ua.add(ec));const Ql=Oi(go,Al,new Set);Il.postStyleProps.forEach(ec=>Ql.add(ec)),Al!==i&&Di.add(Al)});const Qo=qt(Di.values());return Is(i,this._triggerName,p,I,Ir,kn,bi,Ta,Qo,lr,go,Hr)}}function nr(c,h){const i=_e(h);for(const p in c)c.hasOwnProperty(p)&&null!=c[p]&&(i[p]=c[p]);return i}class li{constructor(h,i,p){this.styles=h,this.defaultParams=i,this.normalizer=p}buildStyles(h,i){const p=new Map,I=_e(this.defaultParams);return Object.keys(h).forEach(N=>{const ce=h[N];null!==ce&&(I[N]=ce)}),this.styles.styles.forEach(N=>{"string"!=typeof N&&N.forEach((ce,Ee)=>{ce&&(ce=_t(ce,I,i));const Ge=this.normalizer.normalizePropertyName(Ee,i);ce=this.normalizer.normalizeStyleValue(Ee,Ge,ce,i),p.set(Ge,ce)})}),p}}class Ks{constructor(h,i,p){this.name=h,this.ast=i,this._normalizer=p,this.transitionFactories=[],this.states=new Map,i.states.forEach(I=>{this.states.set(I.name,new li(I.style,I.options&&I.options.params||{},p))}),_s(this.states,"true","1"),_s(this.states,"false","0"),i.transitions.forEach(I=>{this.transitionFactories.push(new ns(h,I,this.states))}),this.fallbackTransition=function Ys(c,h,i){return new ns(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ce,Ee)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,i,p,I){return this.transitionFactories.find(ce=>ce.match(h,i,p,I))||null}matchStyles(h,i,p){return this.fallbackTransition.buildStyles(h,i,p)}}function _s(c,h,i){c.has(h)?c.has(i)||c.set(i,c.get(h)):c.has(i)&&c.set(h,c.get(i))}const Ga=new ha;class kr{constructor(h,i,p){this.bodyNode=h,this._driver=i,this._normalizer=p,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,i){const p=[],N=Gn(this._driver,i,p,[]);if(p.length)throw function Qt(c){return new l.vHH(3503,!1)}();this._animations.set(h,N)}_buildPlayer(h,i,p){const I=h.element,N=Un(0,this._normalizer,0,h.keyframes,i,p);return this._driver.animate(I,N,h.duration,h.delay,h.easing,[],!0)}create(h,i,p={}){const I=[],N=this._animations.get(h);let ce;const Ee=new Map;if(N?(ce=Zs(this._driver,i,N,Nt,bt,new Map,new Map,p,Ga,I),ce.forEach(zt=>{const $t=Oi(Ee,zt.element,new Map);zt.postStyleProps.forEach(En=>$t.set(En,null))})):(I.push(function On(){return new l.vHH(3300,!1)}()),ce=[]),I.length)throw function Xn(c){return new l.vHH(3504,!1)}();Ee.forEach((zt,$t)=>{zt.forEach((En,Wn)=>{zt.set(Wn,this._driver.computeStyle($t,Wn,he.l3))})});const yt=bn(ce.map(zt=>{const $t=Ee.get(zt.element);return this._buildPlayer(zt,new Map,$t)}));return this._playersById.set(h,yt),yt.onDestroy(()=>this.destroy(h)),this.players.push(yt),yt}destroy(h){const i=this._getPlayer(h);i.destroy(),this._playersById.delete(h);const p=this.players.indexOf(i);p>=0&&this.players.splice(p,1)}_getPlayer(h){const i=this._playersById.get(h);if(!i)throw function mi(c){return new l.vHH(3301,!1)}();return i}listen(h,i,p,I){const N=Fi(i,"","","");return Kn(this._getPlayer(h),p,N,I),()=>{}}command(h,i,p,I){if("register"==p)return void this.register(h,I[0]);if("create"==p)return void this.create(h,i,I[0]||{});const N=this._getPlayer(h);switch(p){case"play":N.play();break;case"pause":N.pause();break;case"reset":N.reset();break;case"restart":N.restart();break;case"finish":N.finish();break;case"init":N.init();break;case"setPosition":N.setPosition(parseFloat(I[0]));break;case"destroy":this.destroy(h)}}}const Xs="ng-animate-queued",Po="ng-animate-disabled",Za=[],Wa={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ka={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hr="__ng_removed";class qa{constructor(h,i=""){this.namespaceId=i;const p=h&&h.hasOwnProperty("value");if(this.value=function vr(c){return c??null}(p?h.value:h),p){const N=_e(h);delete N.value,this.options=N}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(h){const i=h.params;if(i){const p=this.options.params;Object.keys(i).forEach(I=>{null==p[I]&&(p[I]=i[I])})}}}const vs="void",Oo=new qa(vs);class ji{constructor(h,i,p){this.id=h,this.hostElement=i,this._engine=p,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,Cr(i,this._hostClassName)}listen(h,i,p,I){if(!this._triggers.has(i))throw function nn(c,h){return new l.vHH(3302,!1)}();if(null==p||0==p.length)throw function gi(c){return new l.vHH(3303,!1)}();if(!function Vo(c){return"start"==c||"done"==c}(p))throw function Qn(c,h){return new l.vHH(3400,!1)}();const N=Oi(this._elementListeners,h,[]),ce={name:i,phase:p,callback:I};N.push(ce);const Ee=Oi(this._engine.statesByElement,h,new Map);return Ee.has(i)||(Cr(h,et),Cr(h,et+"-"+i),Ee.set(i,Oo)),()=>{this._engine.afterFlush(()=>{const Ge=N.indexOf(ce);Ge>=0&&N.splice(Ge,1),this._triggers.has(i)||Ee.delete(i)})}}register(h,i){return!this._triggers.has(h)&&(this._triggers.set(h,i),!0)}_getTrigger(h){const i=this._triggers.get(h);if(!i)throw function di(c){return new l.vHH(3401,!1)}();return i}trigger(h,i,p,I=!0){const N=this._getTrigger(i),ce=new ko(this.id,i,h);let Ee=this._engine.statesByElement.get(h);Ee||(Cr(h,et),Cr(h,et+"-"+i),this._engine.statesByElement.set(h,Ee=new Map));let Ge=Ee.get(i);const yt=new qa(p,this.id);if(!(p&&p.hasOwnProperty("value"))&&Ge&&yt.absorbOptions(Ge.options),Ee.set(i,yt),Ge||(Ge=Oo),yt.value!==vs&&Ge.value===yt.value){if(!function nc(c,h){const i=Object.keys(c),p=Object.keys(h);if(i.length!=p.length)return!1;for(let I=0;I<i.length;I++){const N=i[I];if(!h.hasOwnProperty(N)||c[N]!==h[N])return!1}return!0}(Ge.params,yt.params)){const zn=[],bi=N.matchStyles(Ge.value,Ge.params,zn),Di=N.matchStyles(yt.value,yt.params,zn);zn.length?this._engine.reportError(zn):this._engine.afterFlush(()=>{Bt(h,bi),Rt(h,Di)})}return}const En=Oi(this._engine.playersByElement,h,[]);En.forEach(zn=>{zn.namespaceId==this.id&&zn.triggerName==i&&zn.queued&&zn.destroy()});let Wn=N.matchTransition(Ge.value,yt.value,h,yt.params),kn=!1;if(!Wn){if(!I)return;Wn=N.fallbackTransition,kn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:i,transition:Wn,fromState:Ge,toState:yt,player:ce,isFallbackTransition:kn}),kn||(Cr(h,Xs),ce.onStart(()=>{Os(h,Xs)})),ce.onDone(()=>{let zn=this.players.indexOf(ce);zn>=0&&this.players.splice(zn,1);const bi=this._engine.playersByElement.get(h);if(bi){let Di=bi.indexOf(ce);Di>=0&&bi.splice(Di,1)}}),this.players.push(ce),En.push(ce),ce}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(i=>i.delete(h)),this._elementListeners.forEach((i,p)=>{this._elementListeners.set(p,i.filter(I=>I.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const i=this._engine.playersByElement.get(h);i&&(i.forEach(p=>p.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,i){const p=this._engine.driver.query(h,ot,!0);p.forEach(I=>{if(I[hr])return;const N=this._engine.fetchNamespacesByElement(I);N.size?N.forEach(ce=>ce.triggerLeaveAnimation(I,i,!1,!0)):this.clearElementCache(I)}),this._engine.afterFlushAnimationsDone(()=>p.forEach(I=>this.clearElementCache(I)))}triggerLeaveAnimation(h,i,p,I){const N=this._engine.statesByElement.get(h),ce=new Map;if(N){const Ee=[];if(N.forEach((Ge,yt)=>{if(ce.set(yt,Ge.value),this._triggers.has(yt)){const zt=this.trigger(h,yt,vs,I);zt&&Ee.push(zt)}}),Ee.length)return this._engine.markElementAsRemoved(this.id,h,!0,i,ce),p&&bn(Ee).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const i=this._elementListeners.get(h),p=this._engine.statesByElement.get(h);if(i&&p){const I=new Set;i.forEach(N=>{const ce=N.name;if(I.has(ce))return;I.add(ce);const Ge=this._triggers.get(ce).fallbackTransition,yt=p.get(ce)||Oo,zt=new qa(vs),$t=new ko(this.id,ce,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:ce,transition:Ge,fromState:yt,toState:zt,player:$t,isFallbackTransition:!0})})}}removeNode(h,i){const p=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,i),this.triggerLeaveAnimation(h,i,!0))return;let I=!1;if(p.totalAnimations){const N=p.players.length?p.playersByQueriedElement.get(h):[];if(N&&N.length)I=!0;else{let ce=h;for(;ce=ce.parentNode;)if(p.statesByElement.get(ce)){I=!0;break}}}if(this.prepareLeaveAnimationListeners(h),I)p.markElementAsRemoved(this.id,h,!1,i);else{const N=h[hr];(!N||N===Wa)&&(p.afterFlush(()=>this.clearElementCache(h)),p.destroyInnerAnimations(h),p._onRemovalComplete(h,i))}}insertNode(h,i){Cr(h,this._hostClassName)}drainQueuedTransitions(h){const i=[];return this._queue.forEach(p=>{const I=p.player;if(I.destroyed)return;const N=p.element,ce=this._elementListeners.get(N);ce&&ce.forEach(Ee=>{if(Ee.name==p.triggerName){const Ge=Fi(N,p.triggerName,p.fromState.value,p.toState.value);Ge._data=h,Kn(p.player,Ee.phase,Ge,Ee.callback)}}),I.markedForDestroy?this._engine.afterFlush(()=>{I.destroy()}):i.push(p)}),this._queue=[],i.sort((p,I)=>{const N=p.transition.ast.depCount,ce=I.transition.ast.depCount;return 0==N||0==ce?N-ce:this._engine.driver.containsElement(p.element,I.element)?1:-1})}destroy(h){this.players.forEach(i=>i.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}elementContainsData(h){let i=!1;return this._elementListeners.has(h)&&(i=!0),i=!!this._queue.find(p=>p.element===h)||i,i}}class fl{constructor(h,i,p){this.bodyNode=h,this.driver=i,this._normalizer=p,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(I,N)=>{}}_onRemovalComplete(h,i){this.onRemovalComplete(h,i)}get queuedPlayers(){const h=[];return this._namespaceList.forEach(i=>{i.players.forEach(p=>{p.queued&&h.push(p)})}),h}createNamespace(h,i){const p=new ji(h,i,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,i)?this._balanceNamespaceList(p,i):(this.newHostElements.set(i,p),this.collectEnterElement(i)),this._namespaceLookup[h]=p}_balanceNamespaceList(h,i){const p=this._namespaceList,I=this.namespacesByHostElement;if(p.length-1>=0){let ce=!1,Ee=this.driver.getParentElement(i);for(;Ee;){const Ge=I.get(Ee);if(Ge){const yt=p.indexOf(Ge);p.splice(yt+1,0,h),ce=!0;break}Ee=this.driver.getParentElement(Ee)}ce||p.unshift(h)}else p.push(h);return I.set(i,h),h}register(h,i){let p=this._namespaceLookup[h];return p||(p=this.createNamespace(h,i)),p}registerTrigger(h,i,p){let I=this._namespaceLookup[h];I&&I.register(i,p)&&this.totalAnimations++}destroy(h,i){if(!h)return;const p=this._fetchNamespace(h);this.afterFlush(()=>{this.namespacesByHostElement.delete(p.hostElement),delete this._namespaceLookup[h];const I=this._namespaceList.indexOf(p);I>=0&&this._namespaceList.splice(I,1)}),this.afterFlushAnimationsDone(()=>p.destroy(i))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const i=new Set,p=this.statesByElement.get(h);if(p)for(let I of p.values())if(I.namespaceId){const N=this._fetchNamespace(I.namespaceId);N&&i.add(N)}return i}trigger(h,i,p,I){if(Ps(i)){const N=this._fetchNamespace(h);if(N)return N.trigger(i,p,I),!0}return!1}insertNode(h,i,p,I){if(!Ps(i))return;const N=i[hr];if(N&&N.setForRemoval){N.setForRemoval=!1,N.setForMove=!0;const ce=this.collectedLeaveElements.indexOf(i);ce>=0&&this.collectedLeaveElements.splice(ce,1)}if(h){const ce=this._fetchNamespace(h);ce&&ce.insertNode(i,p)}I&&this.collectEnterElement(i)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,i){i?this.disabledNodes.has(h)||(this.disabledNodes.add(h),Cr(h,Po)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),Os(h,Po))}removeNode(h,i,p,I){if(Ps(i)){const N=h?this._fetchNamespace(h):null;if(N?N.removeNode(i,I):this.markElementAsRemoved(h,i,!1,I),p){const ce=this.namespacesByHostElement.get(i);ce&&ce.id!==h&&ce.removeNode(i,I)}}else this._onRemovalComplete(i,I)}markElementAsRemoved(h,i,p,I,N){this.collectedLeaveElements.push(i),i[hr]={namespaceId:h,setForRemoval:I,hasAnimation:p,removedBeforeQueried:!1,previousTriggersValues:N}}listen(h,i,p,I,N){return Ps(i)?this._fetchNamespace(h).listen(i,p,I,N):()=>{}}_buildInstruction(h,i,p,I,N){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,p,I,h.fromState.options,h.toState.options,i,N)}destroyInnerAnimations(h){let i=this.driver.query(h,ot,!0);i.forEach(p=>this.destroyActiveAnimationsForElement(p)),0!=this.playersByQueriedElement.size&&(i=this.driver.query(h,Se,!0),i.forEach(p=>this.finishActiveQueriedAnimationOnElement(p)))}destroyActiveAnimationsForElement(h){const i=this.playersByElement.get(h);i&&i.forEach(p=>{p.queued?p.markedForDestroy=!0:p.destroy()})}finishActiveQueriedAnimationOnElement(h){const i=this.playersByQueriedElement.get(h);i&&i.forEach(p=>p.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return bn(this.players).onDone(()=>h());h()})}processLeaveNode(h){const i=h[hr];if(i&&i.setForRemoval){if(h[hr]=Wa,i.namespaceId){this.destroyInnerAnimations(h);const p=this._fetchNamespace(i.namespaceId);p&&p.clearElementCache(h)}this._onRemovalComplete(h,i.setForRemoval)}h.classList?.contains(Po)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(p=>{this.markElementAsDisabled(p,!1)})}flush(h=-1){let i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((p,I)=>this._balanceNamespaceList(p,I)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let p=0;p<this.collectedEnterElements.length;p++)Cr(this.collectedEnterElements[p],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const p=[];try{i=this._flushAnimations(p,h)}finally{for(let I=0;I<p.length;I++)p[I]()}}else for(let p=0;p<this.collectedLeaveElements.length;p++)this.processLeaveNode(this.collectedLeaveElements[p]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(p=>p()),this._flushFns=[],this._whenQuietFns.length){const p=this._whenQuietFns;this._whenQuietFns=[],i.length?bn(i).onDone(()=>{p.forEach(I=>I())}):p.forEach(I=>I())}}reportError(h){throw function ln(c){return new l.vHH(3402,!1)}()}_flushAnimations(h,i){const p=new ha,I=[],N=new Map,ce=[],Ee=new Map,Ge=new Map,yt=new Map,zt=new Set;this.disabledNodes.forEach(qn=>{zt.add(qn);const ui=this.driver.query(qn,".ng-animate-queued",!0);for(let oi=0;oi<ui.length;oi++)zt.add(ui[oi])});const $t=this.bodyNode,En=Array.from(this.statesByElement.keys()),Wn=pa(En,this.collectedEnterElements),kn=new Map;let zn=0;Wn.forEach((qn,ui)=>{const oi=Nt+zn++;kn.set(ui,oi),qn.forEach(Wi=>Cr(Wi,oi))});const bi=[],Di=new Set,lr=new Set;for(let qn=0;qn<this.collectedLeaveElements.length;qn++){const ui=this.collectedLeaveElements[qn],oi=ui[hr];oi&&oi.setForRemoval&&(bi.push(ui),Di.add(ui),oi.hasAnimation?this.driver.query(ui,".ng-star-inserted",!0).forEach(Wi=>Di.add(Wi)):lr.add(ui))}const go=new Map,Ir=pa(En,Array.from(Di));Ir.forEach((qn,ui)=>{const oi=bt+zn++;go.set(ui,oi),qn.forEach(Wi=>Cr(Wi,oi))}),h.push(()=>{Wn.forEach((qn,ui)=>{const oi=kn.get(ui);qn.forEach(Wi=>Os(Wi,oi))}),Ir.forEach((qn,ui)=>{const oi=go.get(ui);qn.forEach(Wi=>Os(Wi,oi))}),bi.forEach(qn=>{this.processLeaveNode(qn)})});const Sa=[],Ta=[];for(let qn=this._namespaceList.length-1;qn>=0;qn--)this._namespaceList[qn].drainQueuedTransitions(i).forEach(oi=>{const Wi=oi.player,io=oi.element;if(Sa.push(Wi),this.collectedEnterElements.length){const es=io[hr];if(es&&es.setForMove){if(es.previousTriggersValues&&es.previousTriggersValues.has(oi.triggerName)){const Qc=es.previousTriggersValues.get(oi.triggerName),Ha=this.statesByElement.get(oi.element);if(Ha&&Ha.has(oi.triggerName)){const md=Ha.get(oi.triggerName);md.value=Qc,Ha.set(oi.triggerName,md)}}return void Wi.destroy()}}const Hs=!$t||!this.driver.containsElement($t,io),Ds=go.get(io),Ia=kn.get(io),cr=this._buildInstruction(oi,p,Ia,Ds,Hs);if(cr.errors&&cr.errors.length)return void Ta.push(cr);if(Hs)return Wi.onStart(()=>Bt(io,cr.fromStyles)),Wi.onDestroy(()=>Rt(io,cr.toStyles)),void I.push(Wi);if(oi.isFallbackTransition)return Wi.onStart(()=>Bt(io,cr.fromStyles)),Wi.onDestroy(()=>Rt(io,cr.toStyles)),void I.push(Wi);const pl=[];cr.timelines.forEach(es=>{es.stretchStartingKeyframe=!0,this.disabledNodes.has(es.element)||pl.push(es)}),cr.timelines=pl,p.append(io,cr.timelines),ce.push({instruction:cr,player:Wi,element:io}),cr.queriedElements.forEach(es=>Oi(Ee,es,[]).push(Wi)),cr.preStyleProps.forEach((es,Qc)=>{if(es.size){let Ha=Ge.get(Qc);Ha||Ge.set(Qc,Ha=new Set),es.forEach((md,m_)=>Ha.add(m_))}}),cr.postStyleProps.forEach((es,Qc)=>{let Ha=yt.get(Qc);Ha||yt.set(Qc,Ha=new Set),es.forEach((md,m_)=>Ha.add(m_))})});if(Ta.length){const qn=[];Ta.forEach(ui=>{qn.push(function gt(c,h){return new l.vHH(3505,!1)}())}),Sa.forEach(ui=>ui.destroy()),this.reportError(qn)}const Hr=new Map,Qo=new Map;ce.forEach(qn=>{const ui=qn.element;p.has(ui)&&(Qo.set(ui,ui),this._beforeAnimationBuild(qn.player.namespaceId,qn.instruction,Hr))}),I.forEach(qn=>{const ui=qn.element;this._getPreviousPlayers(ui,!1,qn.namespaceId,qn.triggerName,null).forEach(Wi=>{Oi(Hr,ui,[]).push(Wi),Wi.destroy()})});const Il=bi.filter(qn=>Jt(qn,Ge,yt)),Al=new Map;ml(Al,this.driver,lr,yt,he.l3).forEach(qn=>{Jt(qn,Ge,yt)&&Il.push(qn)});const Ql=new Map;Wn.forEach((qn,ui)=>{ml(Ql,this.driver,new Set(qn),Ge,he.k1)}),Il.forEach(qn=>{const ui=Al.get(qn),oi=Ql.get(qn);Al.set(qn,new Map([...Array.from(ui?.entries()??[]),...Array.from(oi?.entries()??[])]))});const ec=[],Jc=[],fd={};ce.forEach(qn=>{const{element:ui,player:oi,instruction:Wi}=qn;if(p.has(ui)){if(zt.has(ui))return oi.onDestroy(()=>Rt(ui,Wi.toStyles)),oi.disabled=!0,oi.overrideTotalTime(Wi.totalTime),void I.push(oi);let io=fd;if(Qo.size>1){let Ds=ui;const Ia=[];for(;Ds=Ds.parentNode;){const cr=Qo.get(Ds);if(cr){io=cr;break}Ia.push(Ds)}Ia.forEach(cr=>Qo.set(cr,io))}const Hs=this._buildAnimation(oi.namespaceId,Wi,Hr,N,Ql,Al);if(oi.setRealPlayer(Hs),io===fd)ec.push(oi);else{const Ds=this.playersByElement.get(io);Ds&&Ds.length&&(oi.parentPlayer=bn(Ds)),I.push(oi)}}else Bt(ui,Wi.fromStyles),oi.onDestroy(()=>Rt(ui,Wi.toStyles)),Jc.push(oi),zt.has(ui)&&I.push(oi)}),Jc.forEach(qn=>{const ui=N.get(qn.element);if(ui&&ui.length){const oi=bn(ui);qn.setRealPlayer(oi)}}),I.forEach(qn=>{qn.parentPlayer?qn.syncPlayerEvents(qn.parentPlayer):qn.destroy()});for(let qn=0;qn<bi.length;qn++){const ui=bi[qn],oi=ui[hr];if(Os(ui,bt),oi&&oi.hasAnimation)continue;let Wi=[];if(Ee.size){let Hs=Ee.get(ui);Hs&&Hs.length&&Wi.push(...Hs);let Ds=this.driver.query(ui,Se,!0);for(let Ia=0;Ia<Ds.length;Ia++){let cr=Ee.get(Ds[Ia]);cr&&cr.length&&Wi.push(...cr)}}const io=Wi.filter(Hs=>!Hs.destroyed);io.length?Ra(this,ui,io):this.processLeaveNode(ui)}return bi.length=0,ec.forEach(qn=>{this.players.push(qn),qn.onDone(()=>{qn.destroy();const ui=this.players.indexOf(qn);this.players.splice(ui,1)}),qn.play()}),ec}elementContainsData(h,i){let p=!1;const I=i[hr];return I&&I.setForRemoval&&(p=!0),this.playersByElement.has(i)&&(p=!0),this.playersByQueriedElement.has(i)&&(p=!0),this.statesByElement.has(i)&&(p=!0),this._fetchNamespace(h).elementContainsData(i)||p}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,i,p,I,N){let ce=[];if(i){const Ee=this.playersByQueriedElement.get(h);Ee&&(ce=Ee)}else{const Ee=this.playersByElement.get(h);if(Ee){const Ge=!N||N==vs;Ee.forEach(yt=>{yt.queued||!Ge&&yt.triggerName!=I||ce.push(yt)})}}return(p||I)&&(ce=ce.filter(Ee=>!(p&&p!=Ee.namespaceId||I&&I!=Ee.triggerName))),ce}_beforeAnimationBuild(h,i,p){const N=i.element,ce=i.isRemovalTransition?void 0:h,Ee=i.isRemovalTransition?void 0:i.triggerName;for(const Ge of i.timelines){const yt=Ge.element,zt=yt!==N,$t=Oi(p,yt,[]);this._getPreviousPlayers(yt,zt,ce,Ee,i.toState).forEach(Wn=>{const kn=Wn.getRealPlayer();kn.beforeDestroy&&kn.beforeDestroy(),Wn.destroy(),$t.push(Wn)})}Bt(N,i.fromStyles)}_buildAnimation(h,i,p,I,N,ce){const Ee=i.triggerName,Ge=i.element,yt=[],zt=new Set,$t=new Set,En=i.timelines.map(kn=>{const zn=kn.element;zt.add(zn);const bi=zn[hr];if(bi&&bi.removedBeforeQueried)return new he.ZN(kn.duration,kn.delay);const Di=zn!==Ge,lr=function Ei(c){const h=[];return bs(c,h),h}((p.get(zn)||Za).map(Hr=>Hr.getRealPlayer())).filter(Hr=>!!Hr.element&&Hr.element===zn),go=N.get(zn),Ir=ce.get(zn),Sa=Un(0,this._normalizer,0,kn.keyframes,go,Ir),Ta=this._buildPlayer(kn,Sa,lr);if(kn.subTimeline&&I&&$t.add(zn),Di){const Hr=new ko(h,Ee,zn);Hr.setRealPlayer(Ta),yt.push(Hr)}return Ta});yt.forEach(kn=>{Oi(this.playersByQueriedElement,kn.element,[]).push(kn),kn.onDone(()=>function As(c,h,i){let p=c.get(h);if(p){if(p.length){const I=p.indexOf(i);p.splice(I,1)}0==p.length&&c.delete(h)}return p}(this.playersByQueriedElement,kn.element,kn))}),zt.forEach(kn=>Cr(kn,Fe));const Wn=bn(En);return Wn.onDestroy(()=>{zt.forEach(kn=>Os(kn,Fe)),Rt(Ge,i.toStyles)}),$t.forEach(kn=>{Oi(I,kn,[]).push(Wn)}),Wn}_buildPlayer(h,i,p){return i.length>0?this.driver.animate(h.element,i,h.duration,h.delay,h.easing,p):new he.ZN(h.duration,h.delay)}}class ko{constructor(h,i,p){this.namespaceId=h,this.triggerName=i,this.element=p,this._player=new he.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((i,p)=>{i.forEach(I=>Kn(h,p,void 0,I))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const i=this._player;i.triggerCallback&&h.onStart(()=>i.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,i){Oi(this._queuedCallbacks,h,[]).push(i)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const i=this._player;i.triggerCallback&&i.triggerCallback(h)}}function Ps(c){return c&&1===c.nodeType}function ri(c,h){const i=c.style.display;return c.style.display=h??"none",i}function ml(c,h,i,p,I){const N=[];i.forEach(Ge=>N.push(ri(Ge)));const ce=[];p.forEach((Ge,yt)=>{const zt=new Map;Ge.forEach($t=>{const En=h.computeStyle(yt,$t,I);zt.set($t,En),(!En||0==En.length)&&(yt[hr]=ka,ce.push(yt))}),c.set(yt,zt)});let Ee=0;return i.forEach(Ge=>ri(Ge,N[Ee++])),ce}function pa(c,h){const i=new Map;if(c.forEach(Ee=>i.set(Ee,[])),0==h.length)return i;const I=new Set(h),N=new Map;function ce(Ee){if(!Ee)return 1;let Ge=N.get(Ee);if(Ge)return Ge;const yt=Ee.parentNode;return Ge=i.has(yt)?yt:I.has(yt)?1:ce(yt),N.set(Ee,Ge),Ge}return h.forEach(Ee=>{const Ge=ce(Ee);1!==Ge&&i.get(Ge).push(Ee)}),i}function Cr(c,h){c.classList?.add(h)}function Os(c,h){c.classList?.remove(h)}function Ra(c,h,i){bn(i).onDone(()=>c.processLeaveNode(h))}function bs(c,h){for(let i=0;i<c.length;i++){const p=c[i];p instanceof he.ZE?bs(p.players,h):h.push(p)}}function Jt(c,h,i){const p=i.get(c);if(!p)return!1;let I=h.get(c);return I?p.forEach(N=>I.add(N)):h.set(c,p),i.delete(c),!0}class Vn{constructor(h,i,p){this.bodyNode=h,this._driver=i,this._normalizer=p,this._triggerCache={},this.onRemovalComplete=(I,N)=>{},this._transitionEngine=new fl(h,i,p),this._timelineEngine=new kr(h,i,p),this._transitionEngine.onRemovalComplete=(I,N)=>this.onRemovalComplete(I,N)}registerTrigger(h,i,p,I,N){const ce=h+"-"+I;let Ee=this._triggerCache[ce];if(!Ee){const Ge=[],zt=Gn(this._driver,N,Ge,[]);if(Ge.length)throw function Et(c,h){return new l.vHH(3404,!1)}();Ee=function Oa(c,h,i){return new Ks(c,h,i)}(I,zt,this._normalizer),this._triggerCache[ce]=Ee}this._transitionEngine.registerTrigger(i,I,Ee)}register(h,i){this._transitionEngine.register(h,i)}destroy(h,i){this._transitionEngine.destroy(h,i)}onInsert(h,i,p,I){this._transitionEngine.insertNode(h,i,p,I)}onRemove(h,i,p,I){this._transitionEngine.removeNode(h,i,I||!1,p)}disableAnimations(h,i){this._transitionEngine.markElementAsDisabled(h,i)}process(h,i,p,I){if("@"==p.charAt(0)){const[N,ce]=yi(p);this._timelineEngine.command(N,i,ce,I)}else this._transitionEngine.trigger(h,i,p,I)}listen(h,i,p,I,N){if("@"==p.charAt(0)){const[ce,Ee]=yi(p);return this._timelineEngine.listen(ce,i,Ee,N)}return this._transitionEngine.listen(h,i,p,I,N)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Pi=(()=>{class c{constructor(i,p,I){this._element=i,this._startStyles=p,this._endStyles=I,this._state=0;let N=c.initialStylesByElement.get(i);N||c.initialStylesByElement.set(i,N=new Map),this._initialStyles=N}start(){this._state<1&&(this._startStyles&&Rt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Rt(this._element,this._initialStyles),this._endStyles&&(Rt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(Bt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Bt(this._element,this._endStyles),this._endStyles=null),Rt(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function pr(c){let h=null;return c.forEach((i,p)=>{(function Q(c){return"display"===c||"position"===c})(p)&&(h=h||new Map,h.set(p,i))}),h}class K{constructor(h,i,p,I){this.element=h,this.keyframes=i,this.options=p,this._specialStyles=I,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=p.duration,this._delay=p.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const i=[];return h.forEach(p=>{i.push(Object.fromEntries(p))}),i}_triggerWebAnimation(h,i,p){return h.animate(this._convertKeyframesToObject(i),p)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((p,I)=>{"offset"!==I&&h.set(I,this._finished?p:Ui(this.element,I))}),this.currentSnapshot=h}triggerCallback(h){const i="start"===h?this._onStartFns:this._onDoneFns;i.forEach(p=>p()),i.length=0}}class W{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,i){return!1}containsElement(h,i){return Ae(h,i)}getParentElement(h){return Y(h)}query(h,i,p){return ut(h,i,p)}computeStyle(h,i,p){return window.getComputedStyle(h)[i]}animate(h,i,p,I,N,ce=[]){const Ge={duration:p,delay:I,fill:0==I?"both":"forwards"};N&&(Ge.easing=N);const yt=new Map,zt=ce.filter(Wn=>Wn instanceof K);(function Bi(c,h){return 0===c||0===h})(p,I)&&zt.forEach(Wn=>{Wn.currentSnapshot.forEach((kn,zn)=>yt.set(zn,kn))});let $t=function rt(c){return c.length?c[0]instanceof Map?c:c.map(h=>ke(h)):[]}(i).map(Wn=>Xe(Wn));$t=function Ln(c,h,i){if(i.size&&h.length){let p=h[0],I=[];if(i.forEach((N,ce)=>{p.has(ce)||I.push(ce),p.set(ce,N)}),I.length)for(let N=1;N<h.length;N++){let ce=h[N];I.forEach(Ee=>ce.set(Ee,Ui(c,Ee)))}}return h}(h,$t,yt);const En=function La(c,h){let i=null,p=null;return Array.isArray(h)&&h.length?(i=pr(h[0]),h.length>1&&(p=pr(h[h.length-1]))):h instanceof Map&&(i=pr(h)),i||p?new Pi(c,i,p):null}(h,$t);return new K(h,$t,Ge,En)}}var ye=V(6895);let Ut=(()=>{class c extends he._j{constructor(i,p){super(),this._nextAnimationId=0,this._renderer=i.createRenderer(p.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(i){const p=this._nextAnimationId.toString();this._nextAnimationId++;const I=Array.isArray(i)?(0,he.vP)(i):i;return yo(this._renderer,null,p,"register",[I]),new Yn(p,this._renderer)}}return c.\u0275fac=function(i){return new(i||c)(l.LFG(l.FYo),l.LFG(ye.K0))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();class Yn extends he.LC{constructor(h,i){super(),this._id=h,this._renderer=i}create(h,i){return new Dr(this._id,h,i||{},this._renderer)}}class Dr{constructor(h,i,p,I){this.id=h,this.element=i,this._renderer=I,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",p)}_listen(h,i){return this._renderer.listen(this.element,`@@${this.id}:${h}`,i)}_command(h,...i){return yo(this._renderer,this.element,this.id,h,i)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function yo(c,h,i,p,I){return c.setProperty(h,`@@${i}:${p}`,I)}const Qi="@.disabled";let rs=(()=>{class c{constructor(i,p,I){this.delegate=i,this.engine=p,this._zone=I,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),p.onRemovalComplete=(N,ce)=>{const Ee=ce?.parentNode(N);Ee&&ce.removeChild(Ee,N)}}createRenderer(i,p){const N=this.delegate.createRenderer(i,p);if(!(i&&p&&p.data&&p.data.animation)){let zt=this._rendererCache.get(N);return zt||(zt=new fa("",N,this.engine),this._rendererCache.set(N,zt)),zt}const ce=p.id,Ee=p.id+"-"+this._currentId;this._currentId++,this.engine.register(Ee,i);const Ge=zt=>{Array.isArray(zt)?zt.forEach(Ge):this.engine.registerTrigger(ce,Ee,i,zt.name,zt)};return p.data.animation.forEach(Ge),new ma(this,Ee,N,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(i,p,I){i>=0&&i<this._microtaskId?this._zone.run(()=>p(I)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(N=>{const[ce,Ee]=N;ce(Ee)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([p,I]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(i){return new(i||c)(l.LFG(l.FYo),l.LFG(Vn),l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();class fa{constructor(h,i,p){this.namespaceId=h,this.delegate=i,this.engine=p,this.destroyNode=this.delegate.destroyNode?I=>i.destroyNode(I):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(h,i){return this.delegate.createElement(h,i)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,i){this.delegate.appendChild(h,i),this.engine.onInsert(this.namespaceId,i,h,!1)}insertBefore(h,i,p,I=!0){this.delegate.insertBefore(h,i,p),this.engine.onInsert(this.namespaceId,i,h,I)}removeChild(h,i,p){this.engine.onRemove(this.namespaceId,i,this.delegate,p)}selectRootElement(h,i){return this.delegate.selectRootElement(h,i)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,i,p,I){this.delegate.setAttribute(h,i,p,I)}removeAttribute(h,i,p){this.delegate.removeAttribute(h,i,p)}addClass(h,i){this.delegate.addClass(h,i)}removeClass(h,i){this.delegate.removeClass(h,i)}setStyle(h,i,p,I){this.delegate.setStyle(h,i,p,I)}removeStyle(h,i,p){this.delegate.removeStyle(h,i,p)}setProperty(h,i,p){"@"==i.charAt(0)&&i==Qi?this.disableAnimations(h,!!p):this.delegate.setProperty(h,i,p)}setValue(h,i){this.delegate.setValue(h,i)}listen(h,i,p){return this.delegate.listen(h,i,p)}disableAnimations(h,i){this.engine.disableAnimations(h,i)}}class ma extends fa{constructor(h,i,p,I){super(i,p,I),this.factory=h,this.namespaceId=i}setProperty(h,i,p){"@"==i.charAt(0)?"."==i.charAt(1)&&i==Qi?this.disableAnimations(h,p=void 0===p||!!p):this.engine.process(this.namespaceId,h,i.slice(1),p):this.delegate.setProperty(h,i,p)}listen(h,i,p){if("@"==i.charAt(0)){const I=function ks(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(h);let N=i.slice(1),ce="";return"@"!=N.charAt(0)&&([N,ce]=function Rl(c){const h=c.indexOf(".");return[c.substring(0,h),c.slice(h+1)]}(N)),this.engine.listen(this.namespaceId,I,N,ce,Ee=>{this.factory.scheduleListenerCallback(Ee._data||-1,p,Ee)})}return this.delegate.listen(h,i,p)}}let Ll=(()=>{class c extends Vn{constructor(i,p,I,N){super(i.body,p,I)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(i){return new(i||c)(l.LFG(ye.K0),l.LFG(Vt),l.LFG(Br),l.LFG(l.z2F))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();const ga=[{provide:he._j,useClass:Ut},{provide:Br,useFactory:function Ic(){return new Ts}},{provide:Vn,useClass:Ll},{provide:l.FYo,useFactory:function Ac(c,h,i){return new rs(c,h,i)},deps:[T.se,Vn,l.R0b]}],_a=[{provide:Vt,useFactory:()=>new W},{provide:l.QbO,useValue:"BrowserAnimations"},...ga],gl=[{provide:Vt,useClass:dn},{provide:l.QbO,useValue:"NoopAnimations"},...ga];let Fa=(()=>{class c{static withConfig(i){return{ngModule:c,providers:i.disableAnimations?gl:_a}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:_a,imports:[T.b2]}),c})(),Ka=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[ye.ez]}),c})();function Ya(c,h,i,p,I,N,ce){try{var Ee=c[N](ce),Ge=Ee.value}catch(yt){return void i(yt)}Ee.done?h(Ge):Promise.resolve(Ge).then(p,I)}function Zr(c){return function(){var h=this,i=arguments;return new Promise(function(p,I){var N=c.apply(h,i);function ce(Ge){Ya(N,p,I,ce,Ee,"next",Ge)}function Ee(Ge){Ya(N,p,I,ce,Ee,"throw",Ge)}ce(void 0)})}}var U=V(1943),oe=V(7579);class q extends oe.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(h){const{hasError:i,_hasValue:p,_value:I,thrownError:N,isStopped:ce,_isComplete:Ee}=this;i?h.error(N):(ce||Ee)&&(p&&h.next(I),h.complete())}next(h){this.isStopped||(this._value=h,this._hasValue=!0)}complete(){const{_hasValue:h,_value:i,_isComplete:p}=this;p||(this._isComplete=!0,h&&super.next(i),super.complete())}}var be=V(727),Qe=V(590);let Mt=(()=>{class c{constructor(i){this.zone=i,this.mapCreated=new q,this.mapLoaded=new q,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new be.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(i){this.zone.onStable.pipe((0,Qe.P)()).subscribe(()=>{this.createMap(i.mapOptions),this.hookEvents(i.mapEvents),this.mapEvents=i.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),i.mapOptions.terrain&&this.mapInstance.on("load",()=>{this.updateTerrain(i.mapOptions.terrain)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(i)})}updateMaxZoom(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(i)})}updateMinPitch(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(i)})}updateMaxPitch(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(i)})}updateRenderWorldCopies(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(i)})}updateScrollZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(i)})}updateMaxBounds(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(i)})}updateTerrain(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setTerrain(i)})}getTerrain(){return this.zone.runOutsideAngular(()=>this.mapInstance.getTerrain())}changeCanvasCursor(i){this.mapInstance.getCanvasContainer().style.cursor=i}queryRenderedFeatures(i,p){return this.mapInstance.queryRenderedFeatures(i,p)}panTo(i,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(i,p)})}move(i,p,I,N,ce,Ee){return this.zone.runOutsideAngular(()=>{this.mapInstance[i]({...p,zoom:I??this.mapInstance.getZoom(),center:N??this.mapInstance.getCenter(),bearing:ce??this.mapInstance.getBearing(),pitch:Ee??this.mapInstance.getPitch()})})}addLayer(i,p,I){this.zone.runOutsideAngular(()=>{Object.keys(i.layerOptions).forEach(N=>{void 0===i.layerOptions[N]&&delete i.layerOptions[N]}),this.mapInstance.addLayer(i.layerOptions,I),p&&(i.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerClick.emit(N)})}),i.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerDblClick.emit(N)})}),i.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseDown.emit(N)})}),i.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseUp.emit(N)})}),i.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseEnter.emit(N)})}),i.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseLeave.emit(N)})}),i.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseMove.emit(N)})}),i.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseOver.emit(N)})}),i.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerMouseOut.emit(N)})}),i.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerContextMenu.emit(N)})}),i.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerTouchStart.emit(N)})}),i.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerTouchEnd.emit(N)})}),i.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",i.layerOptions.id,N=>{this.zone.run(()=>{i.layerEvents.layerTouchCancel.emit(N)})}))})}removeLayer(i){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(i)&&this.mapInstance.removeLayer(i)})}addMarker(i){const p={offset:i.markersOptions.offset,anchor:i.markersOptions.anchor,draggable:!!i.markersOptions.draggable,rotationAlignment:i.markersOptions.rotationAlignment,pitchAlignment:i.markersOptions.pitchAlignment,clickTolerance:i.markersOptions.clickTolerance};i.markersOptions.element.childNodes.length>0&&(p.element=i.markersOptions.element);const I=new U.Marker(p);return i.markersEvents.markerDragStart.observers.length&&I.on("dragstart",ce=>{if(ce){const{target:Ee}=ce;this.zone.run(()=>{i.markersEvents.markerDragStart.emit(Ee)})}}),i.markersEvents.markerDrag.observers.length&&I.on("drag",ce=>{if(ce){const{target:Ee}=ce;this.zone.run(()=>{i.markersEvents.markerDrag.emit(Ee)})}}),i.markersEvents.markerDragEnd.observers.length&&I.on("dragend",ce=>{if(ce){const{target:Ee}=ce;this.zone.run(()=>{i.markersEvents.markerDragEnd.emit(Ee)})}}),I.setLngLat(i.markersOptions.feature?i.markersOptions.feature.geometry.coordinates:i.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(I.addTo(this.mapInstance),I))}removeMarker(i){this.markersToRemove.push(i)}createPopup(i,p){return this.zone.runOutsideAngular(()=>{Object.keys(i.popupOptions).forEach(N=>void 0===i.popupOptions[N]&&delete i.popupOptions[N]);const I=new U.Popup(i.popupOptions);return I.setDOMContent(p),i.popupEvents.popupClose.observers.length&&I.on("close",()=>{this.zone.run(()=>{i.popupEvents.popupClose.emit()})}),i.popupEvents.popupOpen.observers.length&&I.on("open",()=>{this.zone.run(()=>{i.popupEvents.popupOpen.emit()})}),I})}addPopupToMap(i,p,I=!1){return this.zone.runOutsideAngular(()=>{I&&i._listeners&&delete i._listeners.open,i.setLngLat(p),i.addTo(this.mapInstance)})}addPopupToMarker(i,p){return this.zone.runOutsideAngular(()=>{i.setPopup(p)})}removePopupFromMap(i,p=!1){p&&i._listeners&&delete i._listeners.close,this.popupsToRemove.push(i)}removePopupFromMarker(i){return this.zone.runOutsideAngular(()=>{i.setPopup(void 0)})}addControl(i,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(i,p)})}removeControl(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(i)})}loadAndAddImage(i,p,I){var N=this;return Zr(function*(){return N.zone.runOutsideAngular(()=>new Promise((ce,Ee)=>{N.mapInstance.loadImage(p,(Ge,yt)=>{Ge?Ee(Ge):(N.addImage(i,yt,I),ce())})}))})()}addImage(i,p,I){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(i,p,I)})}removeImage(i){this.imageIdsToRemove.push(i)}addSource(i,p){return this.zone.runOutsideAngular(()=>{Object.keys(p).forEach(I=>void 0===p[I]&&delete p[I]),this.mapInstance.addSource(i,p)})}getSource(i){return this.mapInstance.getSource(i)}removeSource(i){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(i).forEach(p=>this.mapInstance.removeLayer(p.id)),this.mapInstance.removeSource(i)})}setAllLayerPaintProperty(i,p){return this.zone.runOutsideAngular(()=>{Object.keys(p).forEach(I=>{this.mapInstance.setPaintProperty(i,I,p[I])})})}setAllLayerLayoutProperty(i,p){return this.zone.runOutsideAngular(()=>{Object.keys(p).forEach(I=>{this.mapInstance.setLayoutProperty(i,I,p[I])})})}setLayerFilter(i,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(i,p)})}setLayerBefore(i,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(i,p)})}setLayerZoomRange(i,p,I){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(i,p||0,I||20)})}fitBounds(i,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(i,p)})}fitScreenCoordinates(i,p,I){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(i[0],i[1],p,I)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(i){l.R0b.assertNotInAngularZone(),Object.keys(i).forEach(I=>{void 0===i[I]&&delete i[I]}),this.mapInstance=new U.Map(i),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(i.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const i of this.markersToRemove)i.remove();this.markersToRemove=[]}removePopups(){for(const i of this.popupsToRemove)i.remove();this.popupsToRemove=[]}removeImages(){for(const i of this.imageIdsToRemove)this.mapInstance.removeImage(i);this.imageIdsToRemove=[]}findLayersBySourceId(i){const p=this.mapInstance.getStyle().layers;return null==p?[]:p.filter(I=>"source"in I&&I.source===i)}hookEvents(i){this.mapInstance.on("load",p=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{i.mapLoad.emit(p.target)})}),i.mapResize.observers.length&&this.mapInstance.on("resize",p=>this.zone.run(()=>{i.mapResize.emit(p)})),i.mapRemove.observers.length&&this.mapInstance.on("remove",p=>this.zone.run(()=>{i.mapRemove.emit(p)})),i.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",p=>this.zone.run(()=>{i.mapMouseDown.emit(p)})),i.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",p=>this.zone.run(()=>{i.mapMouseUp.emit(p)})),i.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",p=>this.zone.run(()=>{i.mapMouseMove.emit(p)})),i.mapClick.observers.length&&this.mapInstance.on("click",p=>this.zone.run(()=>{i.mapClick.emit(p)})),i.mapDblClick.observers.length&&this.mapInstance.on("dblclick",p=>this.zone.run(()=>{i.mapDblClick.emit(p)})),i.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",p=>this.zone.run(()=>{i.mapMouseOver.emit(p)})),i.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",p=>this.zone.run(()=>{i.mapMouseOut.emit(p)})),i.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",p=>this.zone.run(()=>{i.mapContextMenu.emit(p)})),i.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",p=>this.zone.run(()=>{i.mapTouchStart.emit(p)})),i.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",p=>this.zone.run(()=>{i.mapTouchEnd.emit(p)})),i.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",p=>this.zone.run(()=>{i.mapTouchMove.emit(p)})),i.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",p=>this.zone.run(()=>{i.mapTouchCancel.emit(p)})),i.mapWheel.observers.length&&this.mapInstance.on("wheel",p=>this.zone.run(()=>{i.mapWheel.emit(p)})),i.moveStart.observers.length&&this.mapInstance.on("movestart",p=>this.zone.run(()=>i.moveStart.emit(p))),i.move.observers.length&&this.mapInstance.on("move",p=>this.zone.run(()=>i.move.emit(p))),i.moveEnd.observers.length&&this.mapInstance.on("moveend",p=>this.zone.run(()=>i.moveEnd.emit(p))),i.mapDragStart.observers.length&&this.mapInstance.on("dragstart",p=>this.zone.run(()=>{i.mapDragStart.emit(p)})),i.mapDrag.observers.length&&this.mapInstance.on("drag",p=>this.zone.run(()=>{i.mapDrag.emit(p)})),i.mapDragEnd.observers.length&&this.mapInstance.on("dragend",p=>this.zone.run(()=>{i.mapDragEnd.emit(p)})),i.zoomStart.observers.length&&this.mapInstance.on("zoomstart",p=>this.zone.run(()=>i.zoomStart.emit(p))),i.zoomEvt.observers.length&&this.mapInstance.on("zoom",p=>this.zone.run(()=>i.zoomEvt.emit(p))),i.zoomEnd.observers.length&&this.mapInstance.on("zoomend",p=>this.zone.run(()=>i.zoomEnd.emit(p))),i.rotateStart.observers.length&&this.mapInstance.on("rotatestart",p=>this.zone.run(()=>i.rotateStart.emit(p))),i.rotate.observers.length&&this.mapInstance.on("rotate",p=>this.zone.run(()=>i.rotate.emit(p))),i.rotateEnd.observers.length&&this.mapInstance.on("rotateend",p=>this.zone.run(()=>i.rotateEnd.emit(p))),i.pitchStart.observers.length&&this.mapInstance.on("pitchstart",p=>this.zone.run(()=>i.pitchStart.emit(p))),i.pitchEvt.observers.length&&this.mapInstance.on("pitch",p=>this.zone.run(()=>i.pitchEvt.emit(p))),i.pitchEnd.observers.length&&this.mapInstance.on("pitchend",p=>this.zone.run(()=>i.pitchEnd.emit(p))),i.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",p=>this.zone.run(()=>i.boxZoomStart.emit(p))),i.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",p=>this.zone.run(()=>i.boxZoomEnd.emit(p))),i.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",p=>this.zone.run(()=>i.boxZoomCancel.emit(p))),i.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",p=>this.zone.run(()=>i.webGlContextLost.emit(p))),i.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",p=>this.zone.run(()=>i.webGlContextRestored.emit(p))),i.render.observers.length&&this.mapInstance.on("render",p=>this.zone.run(()=>i.render.emit(p))),i.mapError.observers.length&&this.mapInstance.on("error",p=>this.zone.run(()=>{i.mapError.emit(p)})),i.data.observers.length&&this.mapInstance.on("data",p=>this.zone.run(()=>i.data.emit(p))),i.styleData.observers.length&&this.mapInstance.on("styledata",p=>this.zone.run(()=>i.styleData.emit(p))),i.sourceData.observers.length&&this.mapInstance.on("sourcedata",p=>this.zone.run(()=>i.sourceData.emit(p))),i.dataLoading.observers.length&&this.mapInstance.on("dataloading",p=>this.zone.run(()=>i.dataLoading.emit(p))),i.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",p=>this.zone.run(()=>i.styleDataLoading.emit(p))),i.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",p=>this.zone.run(()=>i.sourceDataLoading.emit(p))),i.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",p=>this.zone.run(()=>i.styleImageMissing.emit(p))),i.idle.observers.length&&this.mapInstance.on("idle",p=>this.zone.run(()=>i.idle.emit(p)))}}return c.\u0275fac=function(i){return new(i||c)(l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();const jt=["content"],Fn=["*"];class zi{constructor(h){this.container=h}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let ci=(()=>{class c{constructor(i){this.mapService=i}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new zi(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position)}))}ngOnDestroy(){this.mapService.mapInstance.hasControl(this.control)&&this.mapService.removeControl(this.control)}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-control"]],viewQuery:function(i,p){if(1&i&&l.Gf(jt,7),2&i){let I;l.iGM(I=l.CRH())&&(p.content=I.first)}},inputs:{position:"position"},ngContentSelectors:Fn,decls:3,vars:0,consts:[[1,"maplibregl-ctrl"],["content",""]],template:function(i,p){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),c})();var Mi=V(4968),ti=V(9300),rr=V(8505),ni=V(3900),vi=V(2722),Yr=V(5698),Co=V(8372);let er=(()=>{class c{constructor(i,p){this.mapService=i,this.zone=p,this.type="geojson",this.updateFeatureData=new oe.x,this.sub=new be.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const i=this.mapService.mapLoaded$.subscribe(()=>{this.init();const p=(0,Mi.R)(this.mapService.mapInstance,"styledata").pipe((0,ti.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(p)});this.sub.add(i)}ngOnChanges(i){if(this.sourceAdded&&((i.maxzoom&&!i.maxzoom.isFirstChange()||i.attribution&&!i.attribution.isFirstChange()||i.buffer&&!i.buffer.isFirstChange()||i.tolerance&&!i.tolerance.isFirstChange()||i.cluster&&!i.cluster.isFirstChange()||i.clusterRadius&&!i.clusterRadius.isFirstChange()||i.clusterMaxZoom&&!i.clusterMaxZoom.isFirstChange()||i.clusterMinPoints&&!i.clusterMinPoints.isFirstChange()||i.clusterProperties&&!i.clusterProperties.isFirstChange()||i.lineMetrics&&!i.lineMetrics.isFirstChange()||i.generateId&&!i.generateId.isFirstChange()||i.promoteId&&!i.promoteId.isFirstChange()||i.filter&&!i.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),i.data&&!i.data.isFirstChange())){const p=this.mapService.getSource(this.id);if(void 0===p)return;p.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(i){var p=this;return Zr(function*(){const I=p.mapService.getSource(p.id);return p.zone.run(Zr(function*(){return new Promise((N,ce)=>{I.getClusterExpansionZoom(i,(Ee,Ge)=>{Ee?ce(Ee):N(Ge)})})}))})()}getClusterChildren(i){var p=this;return Zr(function*(){const I=p.mapService.getSource(p.id);return p.zone.run(Zr(function*(){return new Promise((N,ce)=>{I.getClusterChildren(i,(Ee,Ge)=>{Ee?ce(Ee):N(Ge)})})}))})()}getClusterLeaves(i,p,I){var N=this;return Zr(function*(){const ce=N.mapService.getSource(N.id);return N.zone.run(Zr(function*(){return new Promise((Ee,Ge)=>{ce.getClusterLeaves(i,p,I,(yt,zt)=>{yt?Ge(yt):Ee(zt)})})}))})()}_addFeature(i){this.data.features.push(i),this.updateFeatureData.next(void 0)}_removeFeature(i){const p=this.data,I=p.features.indexOf(i);I>-1&&p.features.splice(I,1),this.updateFeatureData.next(void 0)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const p=this.updateFeatureData.pipe((0,Co.b)(0)).subscribe(()=>{const I=this.mapService.getSource(this.id);void 0!==I&&I.setData(this.data)});this.sub.add(p),this.sourceAdded=!0}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[l.TTD],decls:0,vars:0,template:function(i,p){},encapsulation:2,changeDetection:0}),c})(),zr=(()=>{class c{constructor(i){this.geoJSONSourceComponent=i,this.type="Feature"}ngOnInit(){this.id||(this.id=this.geoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.geoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.geoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(i){this.feature.geometry.coordinates=i,this.geoJSONSourceComponent.updateFeatureData.next(void 0)}}return c.\u0275fac=function(i){return new(i||c)(l.Y36((0,l.Gpc)(()=>er)))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(i,p){},encapsulation:2,changeDetection:0}),c})(),Eo=(()=>{class c{constructor(i,p,I){this.mapService=i,this.ngZone=p,this.featureComponent=I,this.featureDragStart=new l.vpe,this.featureDragEnd=new l.vpe,this.featureDrag=new l.vpe,this.sub=new be.w0}ngOnInit(){let i,p,I;if(!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(i=this.layer.layerMouseEnter,p=this.layer.layerMouseLeave,I=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(i,p,I)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(i,p,I){let N=!1,ce=!1;this.mapService.mapCreated$.subscribe(()=>{const Ee=(0,Mi.R)(this.mapService.mapInstance,"mouseup"),Ge=i.pipe((0,ti.h)(()=>!N),(0,ti.h)($t=>this.filterFeature($t)),(0,rr.b)(()=>{ce=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,ni.w)(()=>(0,Mi.R)(this.mapService.mapInstance,"mousedown").pipe((0,vi.R)(p)))),yt=Ge.pipe((0,ni.w)(()=>(0,Mi.R)(this.mapService.mapInstance,"mousemove").pipe((0,vi.R)(Ee)))),zt=Ge.pipe((0,ni.w)(()=>Ee.pipe((0,Yr.q)(1))));this.sub.add(Ge.subscribe($t=>{N=!0,this.featureDragStart.observers.length&&this.ngZone.run(()=>{this.featureDragStart.emit($t)})})),this.sub.add(yt.subscribe($t=>{I([$t.lngLat.lng,$t.lngLat.lat]),this.featureDrag.observers.length&&this.ngZone.run(()=>{this.featureDrag.emit($t)})})),this.sub.add(zt.subscribe($t=>{N=!1,this.featureDragEnd.observers.length&&this.ngZone.run(()=>{this.featureDragEnd.emit($t)}),ce||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(p.pipe((0,rr.b)(()=>ce=!1),(0,ti.h)(()=>!N)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(i){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(i.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(l.R0b),l.Y36(zr,9))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag"}}),c})();var Vr=V(4004),Do=V(8675);let Xr=(()=>{class c{constructor(i){this.mapService=i,this.layerClick=new l.vpe,this.layerDblClick=new l.vpe,this.layerMouseDown=new l.vpe,this.layerMouseUp=new l.vpe,this.layerMouseEnter=new l.vpe,this.layerMouseLeave=new l.vpe,this.layerMouseMove=new l.vpe,this.layerMouseOver=new l.vpe,this.layerMouseOut=new l.vpe,this.layerContextMenu=new l.vpe,this.layerTouchStart=new l.vpe,this.layerTouchEnd=new l.vpe,this.layerTouchCancel=new l.vpe,this.layerAdded=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,ni.w)(()=>(0,Mi.R)(this.mapService.mapInstance,"styledata").pipe((0,Vr.U)(()=>!1),(0,ti.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,Do.O)(!0)))).subscribe(i=>this.init(i))}ngOnChanges(i){!this.layerAdded||(i.paint&&!i.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,i.paint.currentValue),i.layout&&!i.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,i.layout.currentValue),i.filter&&!i.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,i.filter.currentValue),i.before&&!i.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,i.before.currentValue),(i.minzoom&&!i.minzoom.isFirstChange()||i.maxzoom&&!i.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&(this.mapService.removeLayer(this.id),void 0!==this.sourceIdAdded&&this.mapService.getSource(this.sourceIdAdded)&&this.mapService.removeSource(this.sourceIdAdded)),this.sub&&this.sub.unsubscribe()}init(i){const p={layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel}};this.removeSource&&"string"!=typeof this.source&&void 0===this.mapService.getSource(this.id)&&(this.sourceIdAdded=this.id),this.mapService.addLayer(p,i,this.before),void 0!==this.sourceIdAdded&&void 0===this.mapService.getSource(this.sourceIdAdded)&&(this.sourceIdAdded=void 0),this.layerAdded=!0}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",removeSource:"removeSource",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel"},features:[l.TTD],decls:0,vars:0,template:function(i,p){},encapsulation:2}),c})(),xs=(()=>{class c{constructor(i,p){this.mapService=i,this.zone=p,this.imageError=new l.vpe,this.imageLoaded=new l.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,ni.w)(()=>(0,Mi.R)(this.mapService.mapInstance,"styledata").pipe((0,Do.O)(void 0),(0,ti.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(i){(i.data&&!i.data.isFirstChange()||i.options&&!i.options.isFirstChange()||i.url&&!i.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var i=this;return Zr(function*(){if(i.isAdding=!0,i.data)i.mapService.addImage(i.id,i.data,i.options),i.isAdded=!0,i.isAdding=!1;else if(i.url)try{yield i.mapService.loadAndAddImage(i.id,i.url,i.options),i.isAdded=!0,i.isAdding=!1,i.zone.run(()=>{i.imageLoaded.emit()})}catch(p){i.zone.run(()=>{i.imageError.emit(p)})}})()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded"},features:[l.TTD],decls:0,vars:0,template:function(i,p){},encapsulation:2}),c})(),ic=(()=>{class c{constructor(i){this.mapService=i,this.type="vector",this.sourceAdded=!1,this.sub=new be.w0}ngOnInit(){const i=this.mapService.mapLoaded$.subscribe(()=>{this.init();const p=(0,Mi.R)(this.mapService.mapInstance,"styledata").pipe((0,ti.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(p)});this.sub.add(i)}ngOnChanges(i){if(this.sourceAdded)if(i.bounds&&!i.bounds.isFirstChange()||i.scheme&&!i.scheme.isFirstChange()||i.minzoom&&!i.minzoom.isFirstChange()||i.maxzoom&&!i.maxzoom.isFirstChange()||i.attribution&&!i.attribution.isFirstChange()||i.promoteId&&!i.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(i.url&&!i.url.isFirstChange()||i.tiles&&!i.tiles.isFirstChange()){const p=this.mapService.getSource(this.id);if(void 0===p)return;i.url&&this.url&&p.setUrl(this.url),i.tiles&&this.tiles&&p.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[l.TTD],decls:0,vars:0,template:function(i,p){},encapsulation:2,changeDetection:0}),c})(),Js=(()=>{class c{constructor(i){this.mapService=i,this.type="image"}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(i){if(void 0===this.sourceId)return;const p=this.mapService.getSource(this.sourceId);void 0!==p&&p.updateImage({url:void 0===i.url?void 0:this.url,coordinates:void 0===i.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[l.TTD],decls:0,vars:0,template:function(i,p){},encapsulation:2,changeDetection:0}),c})(),Pn=(()=>{class c{constructor(i){this.mapService=i,this.type="raster-dem",this.sourceAdded=!1,this.sub=new be.w0}ngOnInit(){const i=this.mapService.mapLoaded$.subscribe(()=>{this.init();const p=(0,Mi.R)(this.mapService.mapInstance,"styledata").pipe((0,ti.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(p)});this.sub.add(i)}ngOnChanges(i){!this.sourceAdded||(i.url&&!i.url.isFirstChange()||i.tiles&&!i.tiles.isFirstChange()||i.bounds&&!i.bounds.isFirstChange()||i.minzoom&&!i.minzoom.isFirstChange()||i.maxzoom&&!i.maxzoom.isFirstChange()||i.tileSize&&!i.tileSize.isFirstChange()||i.attribution&&!i.attribution.isFirstChange()||i.encoding&&!i.encoding.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize,attribution:this.attribution,encoding:this.encoding}),this.sourceAdded=!0}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-raster-dem-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize",attribution:"attribution",encoding:"encoding"},features:[l.TTD],decls:0,vars:0,template:function(i,p){},encapsulation:2,changeDetection:0}),c})();const yl=["content"],Na=["*"];let os=(()=>{class c{constructor(i){this.mapService=i,this.markerDragStart=new l.vpe,this.markerDragEnd=new l.vpe,this.markerDrag=new l.vpe}ngOnInit(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(i){i.lngLat&&!i.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),i.feature&&!i.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),i.draggable&&!i.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),i.popupShown&&!i.popupShown.isFirstChange()&&(i.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),i.pitchAlignment&&!i.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(i.pitchAlignment.currentValue),i.rotationAlignment&&!i.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(i.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(i){this.markerInstance.setLngLat(i)}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-marker"]],viewQuery:function(i,p){if(1&i&&l.Gf(yl,7),2&i){let I;l.iGM(I=l.CRH())&&(p.content=I.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},features:[l.TTD],ngContentSelectors:Na,decls:3,vars:2,consts:[["content",""]],template:function(i,p){1&i&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA()),2&i&&l.Tol(p.className)},encapsulation:2,changeDetection:0}),c})();const yn=["content"],Nl=["*"];let ss=(()=>{class c{constructor(i){this.mapService=i,this.popupClose=new l.vpe,this.popupOpen=new l.vpe}ngOnInit(){if(this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(i){if(i.feature&&!i.feature.isFirstChange()){const p=i.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const I=this.createPopup();this.mapService.addPopupToMap(I,p,this.popupInstance.isOpen()),this.popupInstance=I}if(i.lngLat&&!i.lngLat.isFirstChange()&&this.popupInstance.setLngLat(this.lngLat),i.marker&&!i.marker.isFirstChange()){const p=i.marker.previousValue;p.markerInstance&&this.mapService.removePopupFromMarker(p.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}i.offset&&!i.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(i){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(i,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,i)}})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-popup"]],viewQuery:function(i,p){if(1&i&&l.Gf(yn,7),2&i){let I;l.iGM(I=l.CRH())&&(p.content=I.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},features:[l.TTD],ngContentSelectors:Nl,decls:3,vars:0,consts:[["content",""]],template:function(i,p){1&i&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),c})(),oc=(()=>{class c{constructor(i,p){this.mapService=i,this.controlComponent=p}onFullscreen(){this.mapService.mapInstance.resize()}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new U.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(ci,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglFullscreen",""]],hostBindings:function(i,p){1&i&&l.NdJ("webkitfullscreenchange",function(N){return p.onFullscreen(N.target)},!1,l.Jf7)},inputs:{container:"container"}}),c})(),as=(()=>{class c{constructor(i,p){this.mapService=i,this.controlComponent=p,this.geolocate=new l.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation};Object.keys(i).forEach(p=>{void 0===i[p]&&delete i[p]}),this.controlComponent.control=new U.GeolocateControl(i),this.controlComponent.control.on("geolocate",p=>{this.geolocate.emit(p)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(ci,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),c})(),vl=(()=>{class c{constructor(i,p){this.mapService=i,this.controlComponent=p}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.showCompass&&(i.showCompass=this.showCompass),void 0!==this.showZoom&&(i.showZoom=this.showZoom),null!=this.visualizePitch&&(i.visualizePitch=this.visualizePitch),this.controlComponent.control=new U.NavigationControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(ci,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom",visualizePitch:"visualizePitch"}}),c})(),Xa=(()=>{class c{constructor(i,p){this.mapService=i,this.controlComponent=p}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.compact&&(i.compact=this.compact),void 0!==this.customAttribution&&(i.customAttribution=this.customAttribution),this.controlComponent.control=new U.AttributionControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(ci,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),c})(),eu=(()=>{class c{constructor(i,p){this.mapService=i,this.controlComponent=p}ngOnChanges(i){i.unit&&!i.unit.isFirstChange()&&this.controlComponent.control.setUnit(i.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.maxWidth&&(i.maxWidth=this.maxWidth),void 0!==this.unit&&(i.unit=this.unit),this.controlComponent.control=new U.ScaleControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(ci,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l.TTD]}),c})();var Pc=V(6451);function Bl(c,h){1&c&&l.GkF(0)}const Ja=function(c){return{$implicit:c}};function ls(c,h){if(1&c&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,Bl,1,0,"ng-container",4),l.qZA(),l.BQk()),2&c){const i=l.oxw().$implicit,p=l.oxw();l.xp6(1),l.Q6J("feature",i),l.xp6(1),l.Q6J("ngTemplateOutlet",p.clusterPointTpl)("ngTemplateOutletContext",l.VKq(3,Ja,i))}}function zl(c,h){1&c&&l.GkF(0)}function Wr(c,h){if(1&c&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,zl,1,0,"ng-container",4),l.qZA(),l.BQk()),2&c){const i=l.oxw().$implicit,p=l.oxw();l.xp6(1),l.Q6J("feature",i),l.xp6(1),l.Q6J("ngTemplateOutlet",p.pointTpl)("ngTemplateOutletContext",l.VKq(3,Ja,i))}}function Qs(c,h){if(1&c&&(l.ynx(0),l.YNc(1,ls,3,5,"ng-container",2),l.YNc(2,Wr,3,5,"ng-container",2),l.BQk()),2&c){const i=h.$implicit;l.xp6(1),l.Q6J("ngIf",i.properties.cluster),l.xp6(1),l.Q6J("ngIf",!i.properties.cluster)}}const sc=function(){return{"circle-radius":0}};let ea=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275dir=l.lG2({type:c,selectors:[["ng-template","mglPoint",""]]}),c})(),Rs=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275dir=l.lG2({type:c,selectors:[["ng-template","mglClusterPoint",""]]}),c})(),Oc=0,bl=(()=>{class c{constructor(i,p,I){this.mapService=i,this.changeDetectorRef=p,this.ngZone=I,this.layerId="mgl-markers-for-clusters-"+Oc++,this.sub=new be.w0}ngAfterContentInit(){const p=this.mapService.mapCreated$.pipe((0,ni.w)(()=>(0,Mi.R)(this.mapService.mapInstance,"data").pipe((0,ti.h)(I=>I.sourceId===this.source&&"metadata"!==I.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,ni.w)(()=>(0,Pc.T)((0,Mi.R)(this.mapService.mapInstance,"move"),(0,Mi.R)(this.mapService.mapInstance,"moveend")).pipe((0,Do.O)(void 0)))).subscribe(()=>{this.ngZone.run(()=>{this.updateCluster()})});this.sub.add(p)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(i,p){return p.id}updateCluster(){const i={layers:[this.layerId]};this.pointTpl||(i.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(i),this.changeDetectorRef.markForCheck()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(l.sBO),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(i,p,I){if(1&i&&(l.Suo(I,ea,5,l.Rgc),l.Suo(I,Rs,5,l.Rgc)),2&i){let N;l.iGM(N=l.CRH())&&(p.pointTpl=N.first),l.iGM(N=l.CRH())&&(p.clusterPointTpl=N.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,p){1&i&&(l._UZ(0,"mgl-layer",0),l.YNc(1,Qs,3,2,"ng-container",1)),2&i&&(l.Q6J("id",p.layerId)("source",p.source)("paint",l.DdM(5,sc)),l.xp6(1),l.Q6J("ngForOf",p.clusterPoints)("ngForTrackBy",p.trackByClusterPoint))},dependencies:[ye.sg,ye.O5,ye.tP,Xr,os],encapsulation:2,changeDetection:0}),c})(),cs=(()=>{class c{constructor(i,p){this.mapService=i,this.controlComponent=p}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new U.TerrainControl({source:this.source,exaggeration:this.exaggeration??1}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt),l.Y36(ci,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglTerrain",""]],inputs:{source:"source",exaggeration:"exaggeration"}}),c})();const fr=["container"];let _i=(()=>{class c{constructor(i){this.mapService=i,this.movingMethod="flyTo",this.mapResize=new l.vpe,this.mapRemove=new l.vpe,this.mapMouseDown=new l.vpe,this.mapMouseUp=new l.vpe,this.mapMouseMove=new l.vpe,this.mapClick=new l.vpe,this.mapDblClick=new l.vpe,this.mapMouseOver=new l.vpe,this.mapMouseOut=new l.vpe,this.mapContextMenu=new l.vpe,this.mapTouchStart=new l.vpe,this.mapTouchEnd=new l.vpe,this.mapTouchMove=new l.vpe,this.mapTouchCancel=new l.vpe,this.mapWheel=new l.vpe,this.moveStart=new l.vpe,this.move=new l.vpe,this.moveEnd=new l.vpe,this.mapDragStart=new l.vpe,this.mapDrag=new l.vpe,this.mapDragEnd=new l.vpe,this.zoomStart=new l.vpe,this.zoomEvt=new l.vpe,this.zoomEnd=new l.vpe,this.rotateStart=new l.vpe,this.rotate=new l.vpe,this.rotateEnd=new l.vpe,this.pitchStart=new l.vpe,this.pitchEvt=new l.vpe,this.pitchEnd=new l.vpe,this.boxZoomStart=new l.vpe,this.boxZoomEnd=new l.vpe,this.boxZoomCancel=new l.vpe,this.webGlContextLost=new l.vpe,this.webGlContextRestored=new l.vpe,this.mapLoad=new l.vpe,this.idle=new l.vpe,this.render=new l.vpe,this.mapError=new l.vpe,this.data=new l.vpe,this.styleData=new l.vpe,this.sourceData=new l.vpe,this.dataLoading=new l.vpe,this.styleDataLoading=new l.vpe,this.sourceDataLoading=new l.vpe,this.styleImageMissing=new l.vpe}get mapInstance(){return this.mapService.mapInstance}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,terrain:this.terrain},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(i){var p=this;return Zr(function*(){yield p.mapService.mapCreated$.toPromise(),i.cursorStyle&&!i.cursorStyle.isFirstChange()&&p.mapService.changeCanvasCursor(i.cursorStyle.currentValue),i.minZoom&&!i.minZoom.isFirstChange()&&p.mapService.updateMinZoom(i.minZoom.currentValue),i.maxZoom&&!i.maxZoom.isFirstChange()&&p.mapService.updateMaxZoom(i.maxZoom.currentValue),i.minPitch&&!i.minPitch.isFirstChange()&&p.mapService.updateMinPitch(i.minPitch.currentValue),i.maxPitch&&!i.maxPitch.isFirstChange()&&p.mapService.updateMaxPitch(i.maxPitch.currentValue),i.renderWorldCopies&&!i.renderWorldCopies.isFirstChange()&&p.mapService.updateRenderWorldCopies(i.renderWorldCopies.currentValue),i.scrollZoom&&!i.scrollZoom.isFirstChange()&&p.mapService.updateScrollZoom(i.scrollZoom.currentValue),i.dragRotate&&!i.dragRotate.isFirstChange()&&p.mapService.updateDragRotate(i.dragRotate.currentValue),i.touchPitch&&!i.touchPitch.isFirstChange()&&p.mapService.updateTouchPitch(i.touchPitch.currentValue),i.touchZoomRotate&&!i.touchZoomRotate.isFirstChange()&&p.mapService.updateTouchZoomRotate(i.touchZoomRotate.currentValue),i.doubleClickZoom&&!i.doubleClickZoom.isFirstChange()&&p.mapService.updateDoubleClickZoom(i.doubleClickZoom.currentValue),i.keyboard&&!i.keyboard.isFirstChange()&&p.mapService.updateKeyboard(i.keyboard.currentValue),i.dragPan&&!i.dragPan.isFirstChange()&&p.mapService.updateDragPan(i.dragPan.currentValue),i.boxZoom&&!i.boxZoom.isFirstChange()&&p.mapService.updateBoxZoom(i.boxZoom.currentValue),i.style&&!i.style.isFirstChange()&&p.mapService.updateStyle(i.style.currentValue),i.maxBounds&&!i.maxBounds.isFirstChange()&&p.mapService.updateMaxBounds(i.maxBounds.currentValue),i.fitBounds&&i.fitBounds.currentValue&&!i.fitBounds.isFirstChange()&&p.mapService.fitBounds(i.fitBounds.currentValue,p.fitBoundsOptions),i.fitScreenCoordinates&&i.fitScreenCoordinates.currentValue&&((p.center||p.zoom||p.pitch||p.fitBounds)&&i.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-maplibre-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),p.mapService.fitScreenCoordinates(i.fitScreenCoordinates.currentValue,p.bearing?p.bearing[0]:0,p.movingOptions)),!p.centerWithPanTo||!i.center||i.center.isFirstChange()||i.zoom||i.bearing||i.pitch?(i.center&&!i.center.isFirstChange()||i.zoom&&!i.zoom.isFirstChange()||i.bearing&&!i.bearing.isFirstChange()&&!i.fitScreenCoordinates||i.pitch&&!i.pitch.isFirstChange())&&p.mapService.move(p.movingMethod,p.movingOptions,i.zoom&&p.zoom?p.zoom[0]:void 0,i.center?p.center:void 0,i.bearing&&p.bearing?p.bearing[0]:void 0,i.pitch&&p.pitch?p.pitch[0]:void 0):p.mapService.panTo(p.center,p.panToOptions),i.terrain&&!i.terrain.isFirstChange()&&p.mapService.updateTerrain(i.terrain.currentValue)})()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-map"]],viewQuery:function(i,p){if(1&i&&l.Gf(fr,7),2&i){let I;l.iGM(I=l.CRH())&&(p.mapContainer=I.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",terrain:"terrain",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[l._Bn([Mt]),l.TTD],decls:2,vars:0,consts:[["container",""]],template:function(i,p){1&i&&l._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),c})();var Rr=V(6838);const Ba="object"==typeof global&&global&&global.Object===Object&&global;var ac="object"==typeof self&&self&&self.Object===Object&&self;const Ur=Ba||ac||Function("return this")(),An=Ur.Symbol;var Zn=Object.prototype,Ul=Zn.hasOwnProperty,kc=Zn.toString,ta=An?An.toStringTag:void 0;var $o=Object.prototype.toString;var Qa=An?An.toStringTag:void 0;const Fs=function $i(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":Qa&&Qa in Object(c)?function lo(c){var h=Ul.call(c,ta),i=c[ta];try{c[ta]=void 0;var p=!0}catch{}var I=kc.call(c);return p&&(h?c[ta]=i:delete c[ta]),I}(c):function Ls(c){return $o.call(c)}(c)},za=function tu(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},jl=function Cl(c){if(!za(c))return!1;var h=Fs(c);return"[object Function]"==h||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h};var c,y=Ur["__core-js_shared__"],u=(c=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";var R=Function.prototype.toString;const z=function B(c){if(null!=c){try{return R.call(c)}catch{}try{return c+""}catch{}}return""};var ne=/^\[object .+?Constructor\]$/,k=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const se=function G(c){return!(!za(c)||function m(c){return!!u&&u in c}(c))&&(jl(c)?k:ne).test(z(c))},pt=function qe(c,h){var i=function pe(c,h){return c?.[h]}(c,h);return se(i)?i:void 0};var xt=function(){try{var c=pt(Object,"defineProperty");return c({},"",{}),c}catch{}}();const Ht=xt,Kt=function Yt(c,h,i){"__proto__"==h&&Ht?Ht(c,h,{configurable:!0,enumerable:!0,value:i,writable:!0}):c[h]=i},Sn=function _n(c,h,i,p){for(var I=-1,N=null==c?0:c.length;++I<N;){var ce=c[I];h(p,ce,i(ce),c)}return p};var si=function pi(c){return function(h,i,p){for(var I=-1,N=Object(h),ce=p(h),Ee=ce.length;Ee--;){var Ge=ce[c?Ee:++I];if(!1===i(N[Ge],Ge,N))break}return h}}();const Tn=si,fi=function Zi(c){return null!=c&&"object"==typeof c},Sr=function Yi(c){return fi(c)&&"[object Arguments]"==Fs(c)};var Lr=Object.prototype,us=Lr.hasOwnProperty,or=Lr.propertyIsEnumerable,el=Sr(function(){return arguments}())?Sr:function(c){return fi(c)&&us.call(c,"callee")&&!or.call(c,"callee")};const na=el,Mo=Array.isArray;var Ki="object"==typeof exports&&exports&&!exports.nodeType&&exports,co=Ki&&"object"==typeof module&&module&&!module.nodeType&&module,Xi=co&&co.exports===Ki?Ur.Buffer:void 0;const El=(Xi?Xi.isBuffer:void 0)||function Ro(){return!1};var cc=/^(?:0|[1-9]\d*)$/;const ba=function uc(c,h){var i=typeof c;return!!(h=h??9007199254740991)&&("number"==i||"symbol"!=i&&cc.test(c))&&c>-1&&c%1==0&&c<h},Zo=function vo(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991};var sr={};sr["[object Float32Array]"]=sr["[object Float64Array]"]=sr["[object Int8Array]"]=sr["[object Int16Array]"]=sr["[object Int32Array]"]=sr["[object Uint8Array]"]=sr["[object Uint8ClampedArray]"]=sr["[object Uint16Array]"]=sr["[object Uint32Array]"]=!0,sr["[object Arguments]"]=sr["[object Array]"]=sr["[object ArrayBuffer]"]=sr["[object Boolean]"]=sr["[object DataView]"]=sr["[object Date]"]=sr["[object Error]"]=sr["[object Function]"]=sr["[object Map]"]=sr["[object Number]"]=sr["[object Object]"]=sr["[object RegExp]"]=sr["[object Set]"]=sr["[object String]"]=sr["[object WeakMap]"]=!1;const Lo=function Vp(c){return function(h){return c(h)}};var xa="object"==typeof exports&&exports&&!exports.nodeType&&exports,Lc=xa&&"object"==typeof module&&module&&!module.nodeType&&module,Fc=Lc&&Lc.exports===xa&&Ba.process;const Gl=function(){try{return Lc&&Lc.require&&Lc.require("util").types||Fc&&Fc.binding&&Fc.binding("util")}catch{}}();var il=Gl&&Gl.isTypedArray;const Th=il?Lo(il):function yd(c){return fi(c)&&Zo(c.length)&&!!sr[Fs(c)]};var Ih=Object.prototype.hasOwnProperty;const vd=function jp(c,h){var i=Mo(c),p=!i&&na(c),I=!i&&!p&&El(c),N=!i&&!p&&!I&&Th(c),ce=i||p||I||N,Ee=ce?function qi(c,h){for(var i=-1,p=Array(c);++i<c;)p[i]=h(i);return p}(c.length,String):[],Ge=Ee.length;for(var yt in c)(h||Ih.call(c,yt))&&(!ce||!("length"==yt||I&&("offset"==yt||"parent"==yt)||N&&("buffer"==yt||"byteLength"==yt||"byteOffset"==yt)||ba(yt,Ge)))&&Ee.push(yt);return Ee};var Lu=Object.prototype;const bd=function ia(c){var h=c&&c.constructor;return c===("function"==typeof h&&h.prototype||Lu)},$p=function Hp(c,h){return function(i){return c(h(i))}},xd=$p(Object.keys,Object);var dc=Object.prototype.hasOwnProperty;const Gp=function ru(c){return null!=c&&Zo(c.length)&&!jl(c)},wd=function y_(c){return Gp(c)?vd(c):function Ah(c){if(!bd(c))return xd(c);var h=[];for(var i in Object(c))dc.call(c,i)&&"constructor"!=i&&h.push(i);return h}(c)};var Cd=function v_(c,h){return function(i,p){if(null==i)return i;if(!Gp(i))return c(i,p);for(var I=i.length,N=h?I:-1,ce=Object(i);(h?N--:++N<I)&&!1!==p(ce[N],N,ce););return i}}(function Ph(c,h){return c&&Tn(c,h,wd)});const vm=Cd,bm=function ou(c,h,i,p){return vm(c,function(I,N,ce){h(p,I,i(I),ce)}),p},Bc=function Nu(c,h){return c===h||c!=c&&h!=h},pc=function su(c,h){for(var i=c.length;i--;)if(Bc(c[i][0],h))return i;return-1};var kh=Array.prototype.splice;function zc(c){var h=-1,i=null==c?0:c.length;for(this.clear();++h<i;){var p=c[h];this.set(p[0],p[1])}}zc.prototype.clear=function eo(){this.__data__=[],this.size=0},zc.prototype.delete=function Bu(c){var h=this.__data__,i=pc(h,c);return!(i<0||(i==h.length-1?h.pop():kh.call(h,i,1),--this.size,0))},zc.prototype.get=function Ed(c){var h=this.__data__,i=pc(h,c);return i<0?void 0:h[i][1]},zc.prototype.has=function xm(c){return pc(this.__data__,c)>-1},zc.prototype.set=function Vu(c,h){var i=this.__data__,p=pc(i,c);return p<0?(++this.size,i.push([c,h])):i[p][1]=h,this};const Rh=zc,ol=pt(Ur,"Map"),fc=pt(Object,"create");var Mm=Object.prototype.hasOwnProperty;var Td=Object.prototype.hasOwnProperty;function au(c){var h=-1,i=null==c?0:c.length;for(this.clear();++h<i;){var p=c[h];this.set(p[0],p[1])}}au.prototype.clear=function Uc(){this.__data__=fc?fc(null):{},this.size=0},au.prototype.delete=function jc(c){var h=this.has(c)&&delete this.__data__[c];return this.size-=h?1:0,h},au.prototype.get=function Bh(c){var h=this.__data__;if(fc){var i=h[c];return"__lodash_hash_undefined__"===i?void 0:i}return Mm.call(h,c)?h[c]:void 0},au.prototype.has=function $c(c){var h=this.__data__;return fc?void 0!==h[c]:Td.call(h,c)},au.prototype.set=function Xp(c,h){var i=this.__data__;return this.size+=this.has(c)?0:1,i[c]=fc&&void 0===h?"__lodash_hash_undefined__":h,this};const lu=au,Id=function Qp(c,h){var i=c.__data__;return function Vh(c){var h=typeof c;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==c:null===c}(h)?i["string"==typeof h?"string":"hash"]:i.map};function uu(c){var h=-1,i=null==c?0:c.length;for(this.clear();++h<i;){var p=c[h];this.set(p[0],p[1])}}uu.prototype.clear=function Jp(){this.size=0,this.__data__={hash:new lu,map:new(ol||Rh),string:new lu}},uu.prototype.delete=function ef(c){var h=Id(this,c).delete(c);return this.size-=h?1:0,h},uu.prototype.get=function Uh(c){return Id(this,c).get(c)},uu.prototype.has=function tf(c){return Id(this,c).has(c)},uu.prototype.set=function Hu(c,h){var i=Id(this,c),p=i.size;return i.set(c,h),this.size+=i.size==p?0:1,this};const $u=uu;function Wc(c){var h=this.__data__=new Rh(c);this.size=h.size}Wc.prototype.clear=function Vc(){this.__data__=new Rh,this.size=0},Wc.prototype.delete=function Dd(c){var h=this.__data__,i=h.delete(c);return this.size=h.size,i},Wc.prototype.get=function Fh(c){return this.__data__.get(c)},Wc.prototype.has=function qp(c){return this.__data__.has(c)},Wc.prototype.set=function Om(c,h){var i=this.__data__;if(i instanceof Rh){var p=i.__data__;if(!ol||p.length<199)return p.push([c,h]),this.size=++i.size,this;i=this.__data__=new $u(p)}return i.set(c,h),this.size=i.size,this};const Gu=Wc;function tr(c){var h=-1,i=null==c?0:c.length;for(this.__data__=new $u;++h<i;)this.add(c[h])}tr.prototype.add=tr.prototype.push=function Fo(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this},tr.prototype.has=function Pd(c){return this.__data__.has(c)};const Zu=tr,Lm=function Rm(c,h){for(var i=-1,p=null==c?0:c.length;++i<p;)if(h(c[i],i,c))return!0;return!1},Wu=function mc(c,h){return c.has(h)},Od=function sf(c,h,i,p,I,N){var ce=1&i,Ee=c.length,Ge=h.length;if(Ee!=Ge&&!(ce&&Ge>Ee))return!1;var yt=N.get(c),zt=N.get(h);if(yt&&zt)return yt==h&&zt==c;var $t=-1,En=!0,Wn=2&i?new Zu:void 0;for(N.set(c,h),N.set(h,c);++$t<Ee;){var kn=c[$t],zn=h[$t];if(p)var bi=ce?p(zn,kn,$t,h,c,N):p(kn,zn,$t,c,h,N);if(void 0!==bi){if(bi)continue;En=!1;break}if(Wn){if(!Lm(h,function(Di,lr){if(!Wu(Wn,lr)&&(kn===Di||I(kn,Di,i,p,N)))return Wn.push(lr)})){En=!1;break}}else if(kn!==zn&&!I(kn,zn,i,p,N)){En=!1;break}}return N.delete(c),N.delete(h),En},qu=Ur.Uint8Array,jh=function lf(c){var h=-1,i=Array(c.size);return c.forEach(function(p,I){i[++h]=[I,p]}),i},Hh=function Bm(c){var h=-1,i=Array(c.size);return c.forEach(function(p){i[++h]=p}),i};var yc=An?An.prototype:void 0,hu=yc?yc.valueOf:void 0;const Nd=function Fd(c,h){for(var i=-1,p=h.length,I=c.length;++i<p;)c[I+i]=h[i];return c},Wo=function $h(c,h,i){var p=h(c);return Mo(c)?p:Nd(p,i(c))},hf=function Gh(){return[]};var ff=Object.prototype.propertyIsEnumerable,sl=Object.getOwnPropertySymbols,vc=sl?function(c){return null==c?[]:(c=Object(c),function pu(c,h){for(var i=-1,p=null==c?0:c.length,I=0,N=[];++i<p;){var ce=c[i];h(ce,i,c)&&(N[I++]=ce)}return N}(sl(c),function(h){return ff.call(c,h)}))}:hf;const Xu=vc,Wh=function Zh(c){return Wo(c,wd,Xu)};var qh=Object.prototype.hasOwnProperty;const bc=pt(Ur,"DataView"),Yh=pt(Ur,"Promise"),Xh=pt(Ur,"Set"),mu=pt(Ur,"WeakMap");var Ud="[object Map]",Jh="[object Promise]",_f="[object Set]",gu="[object WeakMap]",yf="[object DataView]",Qh=z(bc),Ml=z(ol),jd=z(Yh),ep=z(Xh),Hm=z(mu),Ca=Fs;(bc&&Ca(new bc(new ArrayBuffer(1)))!=yf||ol&&Ca(new ol)!=Ud||Yh&&Ca(Yh.resolve())!=Jh||Xh&&Ca(new Xh)!=_f||mu&&Ca(new mu)!=gu)&&(Ca=function(c){var h=Fs(c),i="[object Object]"==h?c.constructor:void 0,p=i?z(i):"";if(p)switch(p){case Qh:return yf;case Ml:return Ud;case jd:return Jh;case ep:return _f;case Hm:return gu}return h});const xc=Ca;var Ju="[object Arguments]",Qu="[object Array]",_u="[object Object]",ra=Object.prototype.hasOwnProperty;const bf=function ed(c,h,i,p,I,N){var ce=Mo(c),Ee=Mo(h),Ge=ce?Qu:xc(c),yt=Ee?Qu:xc(h),zt=(Ge=Ge==Ju?_u:Ge)==_u,$t=(yt=yt==Ju?_u:yt)==_u,En=Ge==yt;if(En&&El(c)){if(!El(h))return!1;ce=!0,zt=!1}if(En&&!zt)return N||(N=new Gu),ce||Th(c)?Od(c,h,i,p,I,N):function Ld(c,h,i,p,I,N,ce){switch(i){case"[object DataView]":if(c.byteLength!=h.byteLength||c.byteOffset!=h.byteOffset)return!1;c=c.buffer,h=h.buffer;case"[object ArrayBuffer]":return!(c.byteLength!=h.byteLength||!N(new qu(c),new qu(h)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Bc(+c,+h);case"[object Error]":return c.name==h.name&&c.message==h.message;case"[object RegExp]":case"[object String]":return c==h+"";case"[object Map]":var Ee=jh;case"[object Set]":if(Ee||(Ee=Hh),c.size!=h.size&&!(1&p))return!1;var yt=ce.get(c);if(yt)return yt==h;p|=2,ce.set(c,h);var zt=Od(Ee(c),Ee(h),p,I,N,ce);return ce.delete(c),zt;case"[object Symbol]":if(hu)return hu.call(c)==hu.call(h)}return!1}(c,h,Ge,i,p,I,N);if(!(1&i)){var Wn=zt&&ra.call(c,"__wrapped__"),kn=$t&&ra.call(h,"__wrapped__");if(Wn||kn){var zn=Wn?c.value():c,bi=kn?h.value():h;return N||(N=new Gu),I(zn,bi,i,p,N)}}return!!En&&(N||(N=new Gu),function fu(c,h,i,p,I,N){var ce=1&i,Ee=Wh(c),Ge=Ee.length;if(Ge!=Wh(h).length&&!ce)return!1;for(var $t=Ge;$t--;){var En=Ee[$t];if(!(ce?En in h:qh.call(h,En)))return!1}var Wn=N.get(c),kn=N.get(h);if(Wn&&kn)return Wn==h&&kn==c;var zn=!0;N.set(c,h),N.set(h,c);for(var bi=ce;++$t<Ge;){var Di=c[En=Ee[$t]],lr=h[En];if(p)var go=ce?p(lr,Di,En,h,c,N):p(Di,lr,En,c,h,N);if(!(void 0===go?Di===lr||I(Di,lr,i,p,N):go)){zn=!1;break}bi||(bi="constructor"==En)}if(zn&&!bi){var Ir=c.constructor,Sa=h.constructor;Ir!=Sa&&"constructor"in c&&"constructor"in h&&!("function"==typeof Ir&&Ir instanceof Ir&&"function"==typeof Sa&&Sa instanceof Sa)&&(zn=!1)}return N.delete(c),N.delete(h),zn}(c,h,i,p,I,N))},$d=function tp(c,h,i,p,I){return c===h||(null==c||null==h||!fi(c)&&!fi(h)?c!=c&&h!=h:bf(c,h,i,p,tp,I))},Sl=function xf(c){return c==c&&!za(c)},Wd=function rp(c,h){return function(i){return null!=i&&i[c]===h&&(void 0!==h||c in Object(i))}},b_=function Gm(c){var h=function ip(c){for(var h=wd(c),i=h.length;i--;){var p=h[i],I=c[p];h[i]=[p,I,Sl(I)]}return h}(c);return 1==h.length&&h[0][2]?Wd(h[0][0],h[0][1]):function(i){return i===c||function Zd(c,h,i,p){var I=i.length,N=I,ce=!p;if(null==c)return!N;for(c=Object(c);I--;){var Ee=i[I];if(ce&&Ee[2]?Ee[1]!==c[Ee[0]]:!(Ee[0]in c))return!1}for(;++I<N;){var Ge=(Ee=i[I])[0],yt=c[Ge],zt=Ee[1];if(ce&&Ee[2]){if(void 0===yt&&!(Ge in c))return!1}else{var $t=new Gu;if(p)var En=p(yt,zt,Ge,c,h,$t);if(!(void 0===En?$d(zt,yt,3,p,$t):En))return!1}}return!0}(i,c,h)}},Kc=function wf(c){return"symbol"==typeof c||fi(c)&&"[object Symbol]"==Fs(c)};var op=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nd=/^\w*$/;const Yc=function yu(c,h){if(Mo(c))return!1;var i=typeof c;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=c&&!Kc(c))||nd.test(c)||!op.test(c)||null!=h&&c in Object(h)};function vu(c,h){if("function"!=typeof c||null!=h&&"function"!=typeof h)throw new TypeError("Expected a function");var i=function(){var p=arguments,I=h?h.apply(this,p):p[0],N=i.cache;if(N.has(I))return N.get(I);var ce=c.apply(this,p);return i.cache=N.set(I,ce)||N,ce};return i.cache=new(vu.Cache||$u),i}vu.Cache=$u;const Cf=vu;var bu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ap=/\\(\\)?/g,Ef=function Xc(c){var h=Cf(c,function(p){return 500===i.size&&i.clear(),p}),i=h.cache;return h}(function(c){var h=[];return 46===c.charCodeAt(0)&&h.push(""),c.replace(bu,function(i,p,I,N){h.push(I?N.replace(ap,"$1"):p||i)}),h});const Df=Ef;var Kd=An?An.prototype:void 0,od=Kd?Kd.toString:void 0;const Tf=function sd(c){if("string"==typeof c)return c;if(Mo(c))return function Mf(c,h){for(var i=-1,p=null==c?0:c.length,I=Array(p);++i<p;)I[i]=h(c[i],i,c);return I}(c,sd)+"";if(Kc(c))return od?od.call(c):"";var h=c+"";return"0"==h&&1/c==-1/0?"-0":h},Bs=function lp(c,h){return Mo(c)?c:Yc(c,h)?[c]:Df(function If(c){return null==c?"":Tf(c)}(c))},xu=function Yd(c){if("string"==typeof c||Kc(c))return c;var h=c+"";return"0"==h&&1/c==-1/0?"-0":h},Af=function cp(c,h){for(var i=0,p=(h=Bs(h,c)).length;null!=c&&i<p;)c=c[xu(h[i++])];return i&&i==p?c:void 0},f=function a(c,h){return null!=c&&h in Object(c)},O=function M(c,h){return null!=c&&function v(c,h,i){for(var p=-1,I=(h=Bs(h,c)).length,N=!1;++p<I;){var ce=xu(h[p]);if(!(N=null!=c&&i(c,ce)))break;c=c[ce]}return N||++p!=I?N:!!(I=null==c?0:c.length)&&Zo(I)&&ba(ce,I)&&(Mo(c)||na(c))}(c,h,f)},ae=function te(c,h){return Yc(c)&&Sl(h)?Wd(xu(c),h):function(i){var p=function o(c,h,i){var p=null==c?void 0:Af(c,h);return void 0===p?i:p}(i,c);return void 0===p&&p===h?O(i,c):$d(h,p,3)}},ve=function ge(c){return c},st=function vt(c){return Yc(c)?function Ce(c){return function(h){return h?.[c]}}(xu(c)):function ze(c){return function(h){return Af(h,c)}}(c)};var Mn=Object.prototype.hasOwnProperty,vn=function Zt(c,h){return function(i,p){var I=Mo(i)?Sn:bm,N=h?h():{};return I(i,c,function It(c){return"function"==typeof c?c:null==c?ve:"object"==typeof c?Mo(c)?ae(c[0],c[1]):b_(c):st(c)}(p),N)}}(function(c,h,i){Mn.call(c,i)?c[i].push(h):Kt(c,i,[h])});const pn=vn;var Hn=Object.prototype.hasOwnProperty;const Ri=function $n(c,h,i){var p=c[h];(!Hn.call(c,h)||!Bc(p,i)||void 0===i&&!(h in c))&&Kt(c,h,i)},gr=function ar(c,h,i,p){var I=!i;i||(i={});for(var N=-1,ce=h.length;++N<ce;){var Ee=h[N],Ge=p?p(i[Ee],c[Ee],Ee,i,c):void 0;void 0===Ge&&(Ge=c[Ee]),I?Kt(i,Ee,Ge):Ri(i,Ee,Ge)}return i};var Ko=Object.prototype.hasOwnProperty;const zs=function Yo(c){if(!za(c))return function qo(c){var h=[];if(null!=c)for(var i in Object(c))h.push(i);return h}(c);var h=bd(c),i=[];for(var p in c)"constructor"==p&&(h||!Ko.call(c,p))||i.push(p);return i},bo=function to(c){return Gp(c)?vd(c,!0):zs(c)};var Xo="object"==typeof exports&&exports&&!exports.nodeType&&exports,Cs=Xo&&"object"==typeof module&&module&&!module.nodeType&&module,qr=Cs&&Cs.exports===Xo?Ur.Buffer:void 0,Li=qr?qr.allocUnsafe:void 0;const js=$p(Object.getPrototypeOf,Object);var hs=Object.getOwnPropertySymbols?function(c){for(var h=[];c;)Nd(h,Xu(c)),c=js(c);return h}:hf;const Zl=hs,Eu=function Cu(c){return Wo(c,bo,Zl)};var Xd=Object.prototype.hasOwnProperty;const up=function Of(c){var h=new c.constructor(c.byteLength);return new qu(h).set(new qu(c)),h};var kf=/\w*$/;var Xm=An?An.prototype:void 0,dp=Xm?Xm.valueOf:void 0;const P0=function A0(c,h,i){var p=c.constructor;switch(h){case"[object ArrayBuffer]":return up(c);case"[object Boolean]":case"[object Date]":return new p(+c);case"[object DataView]":return function qm(c,h){var i=h?up(c.buffer):c.buffer;return new c.constructor(i,c.byteOffset,c.byteLength)}(c,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function Qd(c,h){var i=h?up(c.buffer):c.buffer;return new c.constructor(i,c.byteOffset,c.length)}(c,i);case"[object Map]":case"[object Set]":return new p;case"[object Number]":case"[object String]":return new p(c);case"[object RegExp]":return function x_(c){var h=new c.constructor(c.source,kf.exec(c));return h.lastIndex=c.lastIndex,h}(c);case"[object Symbol]":return function Ua(c){return dp?Object(dp.call(c)):{}}(c)}};var ng=Object.create,O0=function(){function c(){}return function(h){if(!za(h))return{};if(ng)return ng(h);c.prototype=h;var i=new c;return c.prototype=void 0,i}}();const k0=O0;var hp=Gl&&Gl.isMap;const M_=hp?Lo(hp):function ih(c){return fi(c)&&"[object Map]"==xc(c)};var Lf=Gl&&Gl.isSet;const m1=Lf?Lo(Lf):function sg(c){return fi(c)&&"[object Set]"==xc(c)};var ag="[object Arguments]",P_="[object Function]",cg="[object Object]",jr={};jr[ag]=jr["[object Array]"]=jr["[object ArrayBuffer]"]=jr["[object DataView]"]=jr["[object Boolean]"]=jr["[object Date]"]=jr["[object Float32Array]"]=jr["[object Float64Array]"]=jr["[object Int8Array]"]=jr["[object Int16Array]"]=jr["[object Int32Array]"]=jr["[object Map]"]=jr["[object Number]"]=jr[cg]=jr["[object RegExp]"]=jr["[object Set]"]=jr["[object String]"]=jr["[object Symbol]"]=jr["[object Uint8Array]"]=jr["[object Uint8ClampedArray]"]=jr["[object Uint16Array]"]=jr["[object Uint32Array]"]=!0,jr["[object Error]"]=jr[P_]=jr["[object WeakMap]"]=!1;const q0=function Ff(c,h,i,p,I,N){var ce,Ee=1&h,Ge=2&h,yt=4&h;if(i&&(ce=I?i(c,p,I,N):i(c)),void 0!==ce)return ce;if(!za(c))return c;var zt=Mo(c);if(zt){if(ce=function ld(c){var h=c.length,i=new c.constructor(h);return h&&"string"==typeof c[0]&&Xd.call(c,"index")&&(i.index=c.index,i.input=c.input),i}(c),!Ee)return function Tr(c,h){var i=-1,p=c.length;for(h||(h=Array(p));++i<p;)h[i]=c[i];return h}(c,ce)}else{var $t=xc(c),En=$t==P_||"[object GeneratorFunction]"==$t;if(El(c))return function Us(c,h){if(h)return c.slice();var i=c.length,p=Li?Li(i):new c.constructor(i);return c.copy(p),p}(c,Ee);if($t==cg||$t==ag||En&&!I){if(ce=Ge||En?{}:function Rf(c){return"function"!=typeof c.constructor||bd(c)?{}:k0(js(c))}(c),!Ee)return Ge?function wu(c,h){return gr(c,Zl(c),h)}(c,function No(c,h){return c&&gr(h,bo(h),c)}(ce,c)):function ll(c,h){return gr(c,Xu(c),h)}(c,function po(c,h){return c&&gr(h,wd(h),c)}(ce,c))}else{if(!jr[$t])return I?c:{};ce=P0(c,$t,Ee)}}N||(N=new Gu);var Wn=N.get(c);if(Wn)return Wn;N.set(c,ce),m1(c)?c.forEach(function(bi){ce.add(Ff(bi,h,i,bi,c,N))}):M_(c)&&c.forEach(function(bi,Di){ce.set(Di,Ff(bi,h,i,Di,c,N))});var zn=zt?void 0:(yt?Ge?Eu:Wh:Ge?bo:wd)(c);return function Cn(c,h){for(var i=-1,p=null==c?0:c.length;++i<p&&!1!==h(c[i],i,c););}(zn||c,function(bi,Di){zn&&(bi=c[Di=bi]),Ri(ce,Di,Ff(bi,h,i,Di,c,N))}),ce};function pp(c){return"object"==typeof c&&null!=c&&1===c.nodeType}function Nf(c,h){return(!h||"hidden"!==c)&&"visible"!==c&&"clip"!==c}function rh(c,h){if(c.clientHeight<c.scrollHeight||c.clientWidth<c.scrollWidth){var i=getComputedStyle(c,null);return Nf(i.overflowY,h)||Nf(i.overflowX,h)||!!(I=function(N){if(!N.ownerDocument||!N.ownerDocument.defaultView)return null;try{return N.ownerDocument.defaultView.frameElement}catch{return null}}(p=c))&&(I.clientHeight<p.scrollHeight||I.clientWidth<p.scrollWidth)}var p,I;return!1}function hg(c,h,i,p,I,N,ce,Ee){return N<c&&ce>h||N>c&&ce<h?0:N<=c&&Ee<=i||ce>=h&&Ee>=i?N-c-p:ce>h&&Ee<i||N<c&&Ee>i?ce-h+I:0}function Bf(c,h){var i=window,p=h.scrollMode,I=h.block,N=h.inline,ce=h.boundary,Ee=h.skipOverflowHiddenElements,Ge="function"==typeof ce?ce:function(md){return md!==ce};if(!pp(c))throw new TypeError("Invalid target");for(var yt=document.scrollingElement||document.documentElement,zt=[],$t=c;pp($t)&&Ge($t);){if(($t=$t.parentElement)===yt){zt.push($t);break}null!=$t&&$t===document.body&&rh($t)&&!rh(document.documentElement)||null!=$t&&rh($t,Ee)&&zt.push($t)}for(var En=i.visualViewport?i.visualViewport.width:innerWidth,Wn=i.visualViewport?i.visualViewport.height:innerHeight,kn=window.scrollX||pageXOffset,zn=window.scrollY||pageYOffset,bi=c.getBoundingClientRect(),Di=bi.height,lr=bi.width,go=bi.top,Ir=bi.right,Sa=bi.bottom,Ta=bi.left,Hr="start"===I||"nearest"===I?go:"end"===I?Sa:go+Di/2,Qo="center"===N?Ta+lr/2:"end"===N?Ir:Ta,Il=[],Al=0;Al<zt.length;Al++){var ua=zt[Al],Ql=ua.getBoundingClientRect(),ec=Ql.height,Jc=Ql.width,fd=Ql.top,qn=Ql.right,ui=Ql.bottom,oi=Ql.left;if("if-needed"===p&&go>=0&&Ta>=0&&Sa<=Wn&&Ir<=En&&go>=fd&&Sa<=ui&&Ta>=oi&&Ir<=qn)return Il;var Wi=getComputedStyle(ua),io=parseInt(Wi.borderLeftWidth,10),Hs=parseInt(Wi.borderTopWidth,10),Ds=parseInt(Wi.borderRightWidth,10),Ia=parseInt(Wi.borderBottomWidth,10),cr=0,pl=0,Rp="offsetWidth"in ua?ua.offsetWidth-ua.clientWidth-io-Ds:0,es="offsetHeight"in ua?ua.offsetHeight-ua.clientHeight-Hs-Ia:0;if(yt===ua)cr="start"===I?Hr:"end"===I?Hr-Wn:"nearest"===I?hg(zn,zn+Wn,Wn,Hs,Ia,zn+Hr,zn+Hr+Di,Di):Hr-Wn/2,pl="start"===N?Qo:"center"===N?Qo-En/2:"end"===N?Qo-En:hg(kn,kn+En,En,io,Ds,kn+Qo,kn+Qo+lr,lr),cr=Math.max(0,cr+zn),pl=Math.max(0,pl+kn);else{cr="start"===I?Hr-fd-Hs:"end"===I?Hr-ui+Ia+es:"nearest"===I?hg(fd,ui,ec,Hs,Ia+es,Hr,Hr+Di,Di):Hr-(fd+ec/2)+es/2,pl="start"===N?Qo-oi-io:"center"===N?Qo-(oi+Jc/2)+Rp/2:"end"===N?Qo-qn+Ds+Rp:hg(oi,qn,Jc,io,Ds+Rp,Qo,Qo+lr,lr);var Qc=ua.scrollLeft,Ha=ua.scrollTop;Hr+=Ha-(cr=Math.max(0,Math.min(Ha+cr,ua.scrollHeight-ec+es))),Qo+=Qc-(pl=Math.max(0,Math.min(Qc+pl,ua.scrollWidth-Jc+Rp)))}Il.push({el:ua,top:cr,left:pl})}return Il}function J0(c){return c===Object(c)&&0!==Object.keys(c).length}let zf=(()=>{class c{constructor(){this.resize$=new oe.x}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var mo=V(4006),Vf=V(3619),Ec=V(4859),ii=V(3238),Ni=V(1281),dl=V(2687),fp=V(5017),ql=V(9521);let Q0=(()=>{class c{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(i){this._vertical=(0,Ni.Ig)(i)}get inset(){return this._inset}set inset(i){this._inset=(0,Ni.Ig)(i)}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,p){2&i&&(l.uIk("aria-orientation",p.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",p.vertical)("mat-divider-horizontal",!p.vertical)("mat-divider-inset",p.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,p){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),c})(),mp=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[ii.BQ,ii.BQ]}),c})();const pg=["*"],tb=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],y1=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Uf=(0,ii.Id)((0,ii.Kr)(class{})),ob=(0,ii.Kr)(class{}),jf=new l.OlP("MatList"),U_=new l.OlP("MatNavList");let sb=(()=>{class c extends Uf{constructor(){super(...arguments),this._stateChanges=new oe.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return c.\u0275fac=function(){let h;return function(p){return(h||(h=l.n5z(c)))(p||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[l._Bn([{provide:U_,useExisting:c}]),l.qOj,l.TTD],ngContentSelectors:pg,decls:1,vars:0,template:function(i,p){1&i&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),c})(),ab=(()=>{class c extends Uf{constructor(i){super(),this._elementRef=i,this._stateChanges=new oe.x,"action-list"===this._getListType()&&(i.nativeElement.classList.add("mat-action-list"),i.nativeElement.setAttribute("role","group"))}_getListType(){const i=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===i?"list":"mat-action-list"===i?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.SBq))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[l._Bn([{provide:jf,useExisting:c}]),l.qOj,l.TTD],ngContentSelectors:pg,decls:1,vars:0,template:function(i,p){1&i&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),c})(),j_=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275dir=l.lG2({type:c,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),c})(),H_=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275dir=l.lG2({type:c,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),c})(),lb=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275dir=l.lG2({type:c,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-subheader"]}),c})(),gp=(()=>{class c extends ob{constructor(i,p,I,N){super(),this._element=i,this._isInteractiveList=!1,this._destroyed=new oe.x,this._disabled=!1,this._isInteractiveList=!!(I||N&&"action-list"===N._getListType()),this._list=I||N;const ce=this._getHostElement();"button"===ce.nodeName.toLowerCase()&&!ce.hasAttribute("type")&&ce.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,vi.R)(this._destroyed)).subscribe(()=>{p.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(i){this._disabled=(0,Ni.Ig)(i)}ngAfterContentInit(){(0,ii.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(U_,8),l.Y36(jf,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,p,I){if(1&i&&(l.Suo(I,j_,5),l.Suo(I,H_,5),l.Suo(I,ii.X2,5)),2&i){let N;l.iGM(N=l.CRH())&&(p._avatar=N.first),l.iGM(N=l.CRH())&&(p._icon=N.first),l.iGM(N=l.CRH())&&(p._lines=N)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(i,p){2&i&&l.ekj("mat-list-item-disabled",p.disabled)("mat-list-item-with-avatar",p._avatar||p._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[l.qOj],ngContentSelectors:y1,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(i,p){1&i&&(l.F$t(tb),l.TgZ(0,"span",0),l._UZ(1,"span",1),l.Hsn(2),l.TgZ(3,"span",2),l.Hsn(4,1),l.qZA(),l.Hsn(5,2),l.qZA()),2&i&&(l.xp6(1),l.Q6J("matRippleTrigger",p._getHostElement())("matRippleDisabled",p._isRippleDisabled()))},dependencies:[ii.wG],encapsulation:2,changeDetection:0}),c})(),db=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[ii.uc,ii.si,ii.BQ,ii.us,ye.ez,ii.uc,ii.BQ,ii.us,mp]}),c})();var aa=V(9549),ja=V(3353),la=V(515);const Tu=(0,ja.i$)({passive:!0});let $f=(()=>{class c{constructor(i,p){this._platform=i,this._ngZone=p,this._monitoredElements=new Map}monitor(i){if(!this._platform.isBrowser)return la.E;const p=(0,Ni.fI)(i),I=this._monitoredElements.get(p);if(I)return I.subject;const N=new oe.x,ce="cdk-text-field-autofilled",Ee=Ge=>{"cdk-text-field-autofill-start"!==Ge.animationName||p.classList.contains(ce)?"cdk-text-field-autofill-end"===Ge.animationName&&p.classList.contains(ce)&&(p.classList.remove(ce),this._ngZone.run(()=>N.next({target:Ge.target,isAutofilled:!1}))):(p.classList.add(ce),this._ngZone.run(()=>N.next({target:Ge.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{p.addEventListener("animationstart",Ee,Tu),p.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(p,{subject:N,unlisten:()=>{p.removeEventListener("animationstart",Ee,Tu)}}),N}stopMonitoring(i){const p=(0,Ni.fI)(i),I=this._monitoredElements.get(p);I&&(I.unlisten(),I.subject.complete(),p.classList.remove("cdk-text-field-autofill-monitored"),p.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(p))}ngOnDestroy(){this._monitoredElements.forEach((i,p)=>this.stopMonitoring(p))}}return c.\u0275fac=function(i){return new(i||c)(l.LFG(ja.t4),l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ud=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({}),c})();const oh=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),sh=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let ah=0;const lh=(0,ii.FD)(class{constructor(c,h,i,p){this._defaultErrorStateMatcher=c,this._parentForm=h,this._parentFormGroup=i,this.ngControl=p,this.stateChanges=new oe.x}});let ch=(()=>{class c extends lh{constructor(i,p,I,N,ce,Ee,Ge,yt,zt,$t){super(Ee,N,ce,I),this._elementRef=i,this._platform=p,this._autofillMonitor=yt,this._formField=$t,this._uid="mat-input-"+ah++,this.focused=!1,this.stateChanges=new oe.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(kn=>(0,ja.qK)().has(kn)),this._iOSKeyupListener=kn=>{const zn=kn.target;!zn.value&&0===zn.selectionStart&&0===zn.selectionEnd&&(zn.setSelectionRange(1,1),zn.setSelectionRange(0,0))};const En=this._elementRef.nativeElement,Wn=En.nodeName.toLowerCase();this._inputValueAccessor=Ge||En,this._previousNativeValue=this.value,this.id=this.id,p.IOS&&zt.runOutsideAngular(()=>{i.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Wn,this._isTextarea="textarea"===Wn,this._isInFormField=!!$t,this._isNativeSelect&&(this.controlType=En.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(i){this._disabled=(0,Ni.Ig)(i),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(i){this._id=i||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(mo.kI.required)??!1}set required(i){this._required=(0,Ni.Ig)(i)}get type(){return this._type}set type(i){this._type=i||"text",this._validateType(),!this._isTextarea&&(0,ja.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(i){i!==this.value&&(this._inputValueAccessor.value=i,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(i){this._readonly=(0,Ni.Ig)(i)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(i=>{this.autofilled=i.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(i){this._elementRef.nativeElement.focus(i)}_focusChanged(i){i!==this.focused&&(this.focused=i,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const i=this._formField,p=i&&"legacy"===i.appearance&&!i._hasLabel?.()?null:this.placeholder;if(p!==this._previousPlaceholder){const I=this._elementRef.nativeElement;this._previousPlaceholder=p,p?I.setAttribute("placeholder",p):I.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const i=this._elementRef.nativeElement.value;this._previousNativeValue!==i&&(this._previousNativeValue=i,this.stateChanges.next())}_validateType(){sh.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let i=this._elementRef.nativeElement.validity;return i&&i.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const i=this._elementRef.nativeElement,p=i.options[0];return this.focused||i.multiple||!this.empty||!!(i.selectedIndex>-1&&p&&p.label)}return this.focused||!this.empty}setDescribedByIds(i){i.length?this._elementRef.nativeElement.setAttribute("aria-describedby",i.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const i=this._elementRef.nativeElement;return this._isNativeSelect&&(i.multiple||i.size>1)}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.SBq),l.Y36(ja.t4),l.Y36(mo.a5,10),l.Y36(mo.F,8),l.Y36(mo.sg,8),l.Y36(ii.rD),l.Y36(oh,10),l.Y36($f),l.Y36(l.R0b),l.Y36(aa.G_,8))},c.\u0275dir=l.lG2({type:c,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(i,p){1&i&&l.NdJ("focus",function(){return p._focusChanged(!0)})("blur",function(){return p._focusChanged(!1)})("input",function(){return p._onInput()}),2&i&&(l.Ikx("disabled",p.disabled)("required",p.required),l.uIk("id",p.id)("data-placeholder",p.placeholder)("name",p.name||null)("readonly",p.readonly&&!p._isNativeSelect||null)("aria-invalid",p.empty&&p.required?null:p.errorState)("aria-required",p.required),l.ekj("mat-input-server",p._isServer)("mat-native-select-inline",p._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:aa.Eo,useExisting:c}]),l.qOj,l.TTD]}),c})(),uh=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[ii.rD],imports:[ud,aa.lN,ii.BQ,ud,aa.lN]}),c})();var Es=V(8605),fg=V(445),mg=V(9718),G_=V(1884);const vp=["*"],Z_=["content"];function W_(c,h){if(1&c){const i=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I._onBackdropClicked())}),l.qZA()}if(2&c){const i=l.oxw();l.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function q_(c,h){1&c&&(l.TgZ(0,"mat-drawer-content"),l.Hsn(1,2),l.qZA())}const K_=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Y_=["mat-drawer","mat-drawer-content","*"];function hb(c,h){if(1&c){const i=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I._onBackdropClicked())}),l.qZA()}if(2&c){const i=l.oxw();l.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function pb(c,h){1&c&&(l.TgZ(0,"mat-sidenav-content"),l.Hsn(1,2),l.qZA())}const X_=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],fb=["mat-sidenav","mat-sidenav-content","*"],Gf={transformDrawer:(0,he.X$)("transform",[(0,he.SB)("open, open-instant",(0,he.oB)({transform:"none",visibility:"visible"})),(0,he.SB)("void",(0,he.oB)({"box-shadow":"none",visibility:"hidden"})),(0,he.eR)("void => open-instant",(0,he.jt)("0ms")),(0,he.eR)("void <=> open, open-instant => void",(0,he.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},mb=new l.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Zf(){return!1}}),dh=new l.OlP("MAT_DRAWER_CONTAINER");let hh=(()=>{class c extends Es.PQ{constructor(i,p,I,N,ce){super(I,N,ce),this._changeDetectorRef=i,this._container=p}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>bp)),l.Y36(l.SBq),l.Y36(Es.mF),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,p){2&i&&l.Udp("margin-left",p._container._contentMargins.left,"px")("margin-right",p._container._contentMargins.right,"px")},features:[l._Bn([{provide:Es.PQ,useExisting:c}]),l.qOj],ngContentSelectors:vp,decls:1,vars:0,template:function(i,p){1&i&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),ey=(()=>{class c{constructor(i,p,I,N,ce,Ee,Ge,yt){this._elementRef=i,this._focusTrapFactory=p,this._focusMonitor=I,this._platform=N,this._ngZone=ce,this._interactivityChecker=Ee,this._doc=Ge,this._container=yt,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new oe.x,this._animationEnd=new oe.x,this._animationState="void",this.openedChange=new l.vpe(!0),this._openedStream=this.openedChange.pipe((0,ti.h)(zt=>zt),(0,Vr.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,ti.h)(zt=>zt.fromState!==zt.toState&&0===zt.toState.indexOf("open")),(0,mg.h)(void 0)),this._closedStream=this.openedChange.pipe((0,ti.h)(zt=>!zt),(0,Vr.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,ti.h)(zt=>zt.fromState!==zt.toState&&"void"===zt.toState),(0,mg.h)(void 0)),this._destroyed=new oe.x,this.onPositionChanged=new l.vpe,this._modeChanged=new oe.x,this.openedChange.subscribe(zt=>{zt?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Mi.R)(this._elementRef.nativeElement,"keydown").pipe((0,ti.h)(zt=>zt.keyCode===ql.hY&&!this.disableClose&&!(0,ql.Vb)(zt)),(0,vi.R)(this._destroyed)).subscribe(zt=>this._ngZone.run(()=>{this.close(),zt.stopPropagation(),zt.preventDefault()}))}),this._animationEnd.pipe((0,G_.x)((zt,$t)=>zt.fromState===$t.fromState&&zt.toState===$t.toState)).subscribe(zt=>{const{fromState:$t,toState:En}=zt;(0===En.indexOf("open")&&"void"===$t||"void"===En&&0===$t.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(i){(i="end"===i?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(i),this._position=i,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(i){this._mode=i,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(i){this._disableClose=(0,Ni.Ig)(i)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(i){("true"===i||"false"===i||null==i)&&(i=(0,Ni.Ig)(i)),this._autoFocus=i}get opened(){return this._opened}set opened(i){this.toggle((0,Ni.Ig)(i))}_forceFocus(i,p){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const I=()=>{i.removeEventListener("blur",I),i.removeEventListener("mousedown",I),i.removeAttribute("tabindex")};i.addEventListener("blur",I),i.addEventListener("mousedown",I)})),i.focus(p)}_focusByCssSelector(i,p){let I=this._elementRef.nativeElement.querySelector(i);I&&this._forceFocus(I,p)}_takeFocus(){if(!this._focusTrap)return;const i=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(p=>{!p&&"function"==typeof this._elementRef.nativeElement.focus&&i.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(i){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,i):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const i=this._doc.activeElement;return!!i&&this._elementRef.nativeElement.contains(i)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(i){return this.toggle(!0,i)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(i=!this.opened,p){i&&p&&(this._openedVia=p);const I=this._setOpen(i,!i&&this._isFocusWithinDrawer(),this._openedVia||"program");return i||(this._openedVia=null),I}_setOpen(i,p,I){return this._opened=i,i?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",p&&this._restoreFocus(I)),this._updateFocusTrapState(),new Promise(N=>{this.openedChange.pipe((0,Yr.q)(1)).subscribe(ce=>N(ce?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(i){const p=this._elementRef.nativeElement,I=p.parentNode;"end"===i?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),I.insertBefore(this._anchor,p)),I.appendChild(p)):this._anchor&&this._anchor.parentNode.insertBefore(p,this._anchor)}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.SBq),l.Y36(dl.qV),l.Y36(dl.tE),l.Y36(ja.t4),l.Y36(l.R0b),l.Y36(dl.ic),l.Y36(ye.K0,8),l.Y36(dh,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer"]],viewQuery:function(i,p){if(1&i&&l.Gf(Z_,5),2&i){let I;l.iGM(I=l.CRH())&&(p._content=I.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,p){1&i&&l.WFA("@transform.start",function(N){return p._animationStarted.next(N)})("@transform.done",function(N){return p._animationEnd.next(N)}),2&i&&(l.uIk("align",null),l.d8E("@transform",p._animationState),l.ekj("mat-drawer-end","end"===p.position)("mat-drawer-over","over"===p.mode)("mat-drawer-push","push"===p.mode)("mat-drawer-side","side"===p.mode)("mat-drawer-opened",p.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:vp,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,p){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[Es.PQ],encapsulation:2,data:{animation:[Gf.transformDrawer]},changeDetection:0}),c})(),bp=(()=>{class c{constructor(i,p,I,N,ce,Ee=!1,Ge){this._dir=i,this._element=p,this._ngZone=I,this._changeDetectorRef=N,this._animationMode=Ge,this._drawers=new l.n_E,this.backdropClick=new l.vpe,this._destroyed=new oe.x,this._doCheckSubject=new oe.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new oe.x,i&&i.change.pipe((0,vi.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),ce.change().pipe((0,vi.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Ee}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(i){this._autosize=(0,Ni.Ig)(i)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(i){this._backdropOverride=null==i?null:(0,Ni.Ig)(i)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Do.O)(this._allDrawers),(0,vi.R)(this._destroyed)).subscribe(i=>{this._drawers.reset(i.filter(p=>!p._container||p._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Do.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(i=>{this._watchDrawerToggle(i),this._watchDrawerPosition(i),this._watchDrawerMode(i)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Co.b)(10),(0,vi.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(i=>i.open())}close(){this._drawers.forEach(i=>i.close())}updateContentMargins(){let i=0,p=0;if(this._left&&this._left.opened)if("side"==this._left.mode)i+=this._left._getWidth();else if("push"==this._left.mode){const I=this._left._getWidth();i+=I,p-=I}if(this._right&&this._right.opened)if("side"==this._right.mode)p+=this._right._getWidth();else if("push"==this._right.mode){const I=this._right._getWidth();p+=I,i-=I}i=i||null,p=p||null,(i!==this._contentMargins.left||p!==this._contentMargins.right)&&(this._contentMargins={left:i,right:p},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(i){i._animationStarted.pipe((0,ti.h)(p=>p.fromState!==p.toState),(0,vi.R)(this._drawers.changes)).subscribe(p=>{"open-instant"!==p.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==i.mode&&i.openedChange.pipe((0,vi.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(i.opened))}_watchDrawerPosition(i){!i||i.onPositionChanged.pipe((0,vi.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Yr.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(i){i&&i._modeChanged.pipe((0,vi.R)((0,Pc.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(i){const p=this._element.nativeElement.classList,I="mat-drawer-container-has-open";i?p.add(I):p.remove(I)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(i=>{"end"==i.position?this._end=i:this._start=i}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(i=>i&&!i.disableClose&&this._canHaveBackdrop(i)).forEach(i=>i._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(i){return"side"!==i.mode||!!this._backdropOverride}_isDrawerOpen(i){return null!=i&&i.opened}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(fg.Is,8),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(Es.rL),l.Y36(mb),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer-container"]],contentQueries:function(i,p,I){if(1&i&&(l.Suo(I,hh,5),l.Suo(I,ey,5)),2&i){let N;l.iGM(N=l.CRH())&&(p._content=N.first),l.iGM(N=l.CRH())&&(p._allDrawers=N)}},viewQuery:function(i,p){if(1&i&&l.Gf(hh,5),2&i){let I;l.iGM(I=l.CRH())&&(p._userContent=I.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,p){2&i&&l.ekj("mat-drawer-container-explicit-backdrop",p._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[l._Bn([{provide:dh,useExisting:c}])],ngContentSelectors:Y_,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,p){1&i&&(l.F$t(K_),l.YNc(0,W_,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,q_,2,0,"mat-drawer-content",1)),2&i&&(l.Q6J("ngIf",p.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!p._content))},dependencies:[ye.O5,hh],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),ph=(()=>{class c extends hh{constructor(i,p,I,N,ce){super(i,p,I,N,ce)}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>gg)),l.Y36(l.SBq),l.Y36(Es.mF),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(i,p){2&i&&l.Udp("margin-left",p._container._contentMargins.left,"px")("margin-right",p._container._contentMargins.right,"px")},features:[l._Bn([{provide:Es.PQ,useExisting:c}]),l.qOj],ngContentSelectors:vp,decls:1,vars:0,template:function(i,p){1&i&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),Wf=(()=>{class c extends ey{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(i){this._fixedInViewport=(0,Ni.Ig)(i)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(i){this._fixedTopGap=(0,Ni.su)(i)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(i){this._fixedBottomGap=(0,Ni.su)(i)}}return c.\u0275fac=function(){let h;return function(p){return(h||(h=l.n5z(c)))(p||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(i,p){2&i&&(l.uIk("align",null),l.Udp("top",p.fixedInViewport?p.fixedTopGap:null,"px")("bottom",p.fixedInViewport?p.fixedBottomGap:null,"px"),l.ekj("mat-drawer-end","end"===p.position)("mat-drawer-over","over"===p.mode)("mat-drawer-push","push"===p.mode)("mat-drawer-side","side"===p.mode)("mat-drawer-opened",p.opened)("mat-sidenav-fixed",p.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[l.qOj],ngContentSelectors:vp,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,p){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[Es.PQ],encapsulation:2,data:{animation:[Gf.transformDrawer]},changeDetection:0}),c})(),gg=(()=>{class c extends bp{}return c.\u0275fac=function(){let h;return function(p){return(h||(h=l.n5z(c)))(p||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav-container"]],contentQueries:function(i,p,I){if(1&i&&(l.Suo(I,ph,5),l.Suo(I,Wf,5)),2&i){let N;l.iGM(N=l.CRH())&&(p._content=N.first),l.iGM(N=l.CRH())&&(p._allDrawers=N)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,p){2&i&&l.ekj("mat-drawer-container-explicit-backdrop",p._backdropOverride)},exportAs:["matSidenavContainer"],features:[l._Bn([{provide:dh,useExisting:c}]),l.qOj],ngContentSelectors:fb,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,p){1&i&&(l.F$t(X_),l.YNc(0,hb,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,pb,2,0,"mat-sidenav-content",1)),2&i&&(l.Q6J("ngIf",p.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!p._content))},dependencies:[ye.O5,ph],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),_g=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[ye.ez,ii.BQ,Es.ZD,Es.ZD,ii.BQ]}),c})();var yg=V(9643);const ty=["input"],vg=function(c){return{enterDuration:c}},bg=["*"],gb=new l.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let ny=0;const iy={provide:mo.JU,useExisting:(0,l.Gpc)(()=>xg),multi:!0};class ry{constructor(h,i){this.source=h,this.checked=i}}const oy=(0,ii.sb)((0,ii.pj)((0,ii.Kr)((0,ii.Id)(class{constructor(c){this._elementRef=c}}))));let _b=(()=>{class c extends oy{constructor(i,p,I,N,ce,Ee,Ge){super(i),this._focusMonitor=p,this._changeDetectorRef=I,this.defaults=ce,this._onChange=yt=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new l.vpe,this.toggleChange=new l.vpe,this.tabIndex=parseInt(N)||0,this.color=this.defaultColor=ce.color||"accent",this._noopAnimations="NoopAnimations"===Ee,this.id=this._uniqueId=`${Ge}${++ny}`}get required(){return this._required}set required(i){this._required=(0,Ni.Ig)(i)}get checked(){return this._checked}set checked(i){this._checked=(0,Ni.Ig)(i),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{"keyboard"===i||"program"===i?this._focused=!0:i||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(i){this.checked=!!i}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return c.\u0275fac=function(i){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[l.qOj]}),c})(),xg=(()=>{class c extends _b{constructor(i,p,I,N,ce,Ee){super(i,p,I,N,ce,Ee,"mat-slide-toggle-")}_createChangeEvent(i){return new ry(this,i)}_onChangeEvent(i){i.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(i){i.stopPropagation()}focus(i,p){p?this._focusMonitor.focusVia(this._inputElement,p,i):this._inputElement.nativeElement.focus(i)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.SBq),l.Y36(dl.tE),l.Y36(l.sBO),l.$8M("tabindex"),l.Y36(gb),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-slide-toggle"]],viewQuery:function(i,p){if(1&i&&l.Gf(ty,5),2&i){let I;l.iGM(I=l.CRH())&&(p._inputElement=I.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(i,p){2&i&&(l.Ikx("id",p.id),l.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),l.ekj("mat-checked",p.checked)("mat-disabled",p.disabled)("mat-slide-toggle-label-before","before"==p.labelPosition)("_mat-animation-noopable",p._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[l._Bn([iy]),l.qOj],ngContentSelectors:bg,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(i,p){if(1&i&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),l.NdJ("change",function(N){return p._onChangeEvent(N)})("click",function(N){return p._onInputClick(N)}),l.qZA(),l.TgZ(5,"span",5),l._UZ(6,"span",6),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA()()(),l.TgZ(9,"span",9,10),l.NdJ("cdkObserveContent",function(){return p._onLabelTextChange()}),l.TgZ(11,"span",11),l._uU(12,"\xa0"),l.qZA(),l.Hsn(13),l.qZA()()),2&i){const I=l.MAs(1),N=l.MAs(10);l.uIk("for",p.inputId),l.xp6(2),l.ekj("mat-slide-toggle-bar-no-side-margin",!N.textContent||!N.textContent.trim()),l.xp6(1),l.Q6J("id",p.inputId)("required",p.required)("tabIndex",p.tabIndex)("checked",p.checked)("disabled",p.disabled),l.uIk("name",p.name)("aria-checked",p.checked)("aria-label",p.ariaLabel)("aria-labelledby",p.ariaLabelledby)("aria-describedby",p.ariaDescribedby),l.xp6(4),l.Q6J("matRippleTrigger",I)("matRippleDisabled",p.disableRipple||p.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,vg,p._noopAnimations?0:150))}},dependencies:[ii.wG,yg.wD],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),c})(),qf=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({}),c})(),ly=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[qf,ii.si,ii.BQ,yg.Q8,qf,ii.BQ]}),c})();const cy=["exampleLink"];function uy(c,h){if(1&c){const i=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I.clearSearch())}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA()()}}const dy=function(c){return{_routerLinkActiveWakeUpHack_:c}};function hy(c,h){if(1&c&&(l.TgZ(0,"a",14,15),l._uU(2),l.qZA()),2&c){const i=l.oxw().$implicit,p=l.oxw(2);l.Q6J("routerLink","/demo/"+(p.isEditMode?"/edit/":"")+i.path)("routerLinkActiveOptions",l.VKq(3,dy,p.isEditMode)),l.xp6(2),l.hij(" ",i.data.label," ")}}function py(c,h){if(1&c&&(l.ynx(0),l.YNc(1,hy,3,5,"a",13),l.BQk()),2&c){const i=h.$implicit;l.xp6(1),l.Q6J("ngIf",i)}}function fy(c,h){if(1&c&&(l.ynx(0),l.TgZ(1,"h3",12),l._uU(2),l.qZA(),l.YNc(3,py,2,1,"ng-container",9),l._UZ(4,"mat-divider"),l.BQk()),2&c){const i=h.$implicit,p=l.oxw();l.xp6(2),l.Oqu(i),l.xp6(1),l.Q6J("ngForOf",p.routes[i])}}let my=(()=>{class c{constructor(i,p,I,N){this.zone=i,this.router=p,this.activatedRoute=I,this.mapResizeService=N,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild.params.demoUrl,this.originalRoutes=pn(pm[0].children,ce=>ce.data?ce.data.cat:null),this.categories=[ai.STYLES,ai.LAYERS,ai.SOURCES,ai.USER_INTERACTION,ai.CAMERA,ai.CONTROLS_AND_OVERLAYS,ai.TERRAIN]}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(i){const p=this.activatedRoute.snapshot.firstChild;this.router.navigate(i.checked?["demo","edit",p.url[0].path]:["demo",p.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function Y0(c){return q0(c,5)}(this.originalRoutes),Object.values(this.routes).forEach(i=>{i.forEach((p,I)=>{p.data&&!p.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete i[I]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,Qe.P)()).subscribe(()=>{const i=this.exampleLinks.find(p=>p.nativeElement.classList.contains("active"));i&&function B_(c,h){var i=!c.ownerDocument.documentElement.contains(c);if(J0(h)&&"function"==typeof h.behavior)return h.behavior(i?[]:Bf(c,h));if(!i){var p=function N_(c){return!1===c?{block:"end",inline:"nearest"}:J0(c)?c:{block:"start",inline:"nearest"}}(h);(function F_(c,h){void 0===h&&(h="auto");var i="scrollBehavior"in document.body.style;c.forEach(function(p){var I=p.el,N=p.top,ce=p.left;I.scroll&&i?I.scroll({top:N,left:ce,behavior:h}):(I.scrollTop=N,I.scrollLeft=ce)})})(Bf(c,p),p.behavior)}}(i.nativeElement,{block:"center",scrollMode:"if-needed"})})}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.R0b),l.Y36(H.F0),l.Y36(H.gz),l.Y36(zf))},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],viewQuery:function(i,p){if(1&i&&l.Gf(cy,5,l.SBq),2&i){let I;l.iGM(I=l.CRH())&&(p.exampleLinks=I)}},decls:18,vars:5,consts:[["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModel","ngModelChange","change"],["mode","side",3,"opened","openedChange"],["sidenav",""],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["exampleLink",""]],template:function(i,p){1&i&&(l.TgZ(0,"showcase-layout-toolbar-menu",0)(1,"button",1),l.NdJ("click",function(){return p.toggleSidenav()}),l.TgZ(2,"mat-icon"),l._uU(3,"menu"),l.qZA()()(),l.TgZ(4,"showcase-layout-toolbar-menu",2)(5,"mat-slide-toggle",3),l.NdJ("ngModelChange",function(N){return p.isEditMode=N})("change",function(N){return p.toggleEdit(N)}),l._uU(6," Edit! "),l.qZA()(),l.TgZ(7,"mat-sidenav-container")(8,"mat-sidenav",4,5),l.NdJ("openedChange",function(){return p.onSidenavChange()}),l.TgZ(10,"mat-form-field",6)(11,"input",7),l.NdJ("ngModelChange",function(N){return p.searchTerm=N})("ngModelChange",function(){return p.search()}),l.qZA(),l.YNc(12,uy,3,0,"button",8),l.qZA(),l.TgZ(13,"mat-nav-list"),l.YNc(14,fy,5,2,"ng-container",9),l.qZA()(),l.TgZ(15,"mat-sidenav-content")(16,"section",10),l._UZ(17,"router-outlet"),l.qZA()()()),2&i&&(l.xp6(5),l.Q6J("ngModel",p.isEditMode),l.xp6(3),l.Q6J("opened",p.sidenavIsOpen),l.xp6(3),l.Q6J("ngModel",p.searchTerm),l.xp6(1),l.Q6J("ngIf",p.searchTerm),l.xp6(2),l.Q6J("ngForOf",p.categories))},dependencies:[H.lC,H.yS,H.Od,ye.sg,ye.O5,mo.Fj,mo.JJ,mo.On,Vf.a,Ec.lW,sb,gp,lb,Q0,aa.KE,aa.R9,ch,He.Hw,Wf,gg,ph,xg],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]}),c})(),Gi=(()=>{class c{constructor(i,p){this.mapResizeService=i,this.map=p,this.sub=new be.w0}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(zf),l.Y36(_i))},c.\u0275dir=l.lG2({type:c,selectors:[["mgl-map"]]}),c})(),Hi=(()=>{class c{constructor(i){this.map=i,null!=window.Cypress&&(console.info("Cypress detected. Setting preserveDrawingBuffer=true"),this.map.preserveDrawingBuffer=!0)}onMapIdle(i){window.mglMapTestHelper.map=i.target,window.mglMapTestHelper.idle=!0}onMapRender(i){window.mglMapTestHelper.map=i.target,window.mglMapTestHelper.idle=!1}onMapLoad(i){window.mglMapTestHelper.map=i.target,window.mglMapTestHelper.loaded=!0}ngOnInit(){window.mglMapTestHelper={mapComponent:this.map}}ngOnDestroy(){window.mglMapTestHelper=void 0}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(_i))},c.\u0275dir=l.lG2({type:c,selectors:[["mgl-map"]],hostBindings:function(i,p){1&i&&l.NdJ("idle",function(N){return p.onMapIdle(N)})("render",function(N){return p.onMapRender(N)})("mapLoad",function(N){return p.onMapLoad(N)})}}),c})();const yb=function(c){return[c,40.7135]},gy=function(){return["==","extrude","true"]},_y=function(){return["linear"]},Jo=function(){return["zoom"]},yy=function(){return["get","height"]},vy=function(c,h,i){return["interpolate",c,h,15,0,15.05,i]},vb=function(){return["get","min_height"]},by=function(c,h){return{"fill-extrusion-color":"#aaa","fill-extrusion-height":c,"fill-extrusion-base":h,"fill-extrusion-opacity":.6}};let bb=(()=>{class c{onLoad(i){const p=i.getStyle().layers;for(let I=0;I<p.length;I++)if("symbol"===p[I].type&&p[I].layout["text-field"]){this.labelLayerId=p[I].id;break}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:30,consts:[[3,"zoom","center","pitch","bearing","mapLoad"],["id","3d-buildings","source","openmaptiles","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(N){return p.onLoad(N)}),l._UZ(1,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",15.5)("center",l.VKq(10,yb,-74.0066))("pitch",45)("bearing",-17.6),l.xp6(1),l.Q6J("filter",l.DdM(12,gy))("minzoom",15)("paint",l.WLB(27,by,l.kEZ(16,vy,l.DdM(13,_y),l.DdM(14,Jo),l.DdM(15,yy)),l.kEZ(23,vy,l.DdM(20,_y),l.DdM(21,Jo),l.DdM(22,vb))))("before",p.labelLayerId))},dependencies:[_i,Xr,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const xy=function(c){return{width:64,height:64,data:c}},wy=function(){return[0,0]},fh=function(c){return{type:"Point",coordinates:c}},xb=function(c){return{type:"Feature",geometry:c}},wb=function(c){return[c]},Cy=function(c){return{type:"FeatureCollection",features:c}},Cb=function(c){return{type:"geojson",data:c}},Ey=function(){return{"icon-image":"gradient"}};let b1=(()=>{class c{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const I=new Uint8Array(16384);for(let N=0;N<64;N++)for(let ce=0;ce<64;ce++){const Ee=4*(64*ce+N);I[Ee+0]=ce/64*255,I[Ee+1]=N/64*255,I[Ee+2]=128,I[Ee+3]=255}return I}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:19,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-image",0)(2,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("data",l.VKq(5,xy,p.imageData)),l.xp6(1),l.Q6J("source",l.VKq(16,Cb,l.VKq(14,Cy,l.VKq(12,wb,l.VKq(10,xb,l.VKq(8,fh,l.DdM(7,wy)))))))("layout",l.DdM(18,Ey)))},dependencies:[_i,Xr,xs,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function wg(c,h){if(1&c&&l._UZ(0,"mgl-image",3),2&c){const i=h.$implicit;l.Q6J("id",i.id)("data",i)}}const Cg=function(){return[0,0]},hl=function(c){return{type:"Point",coordinates:c}},Eb=function(){return{color:"255,0,0"}},Kf=function(c,h){return{type:"Feature",geometry:c,properties:h}},Dc=function(){return[50,0]},Yl=function(){return{color:"255,209,28"}},Xl=function(c){return[c,0]},Dy=function(){return{color:"242,127,32"}},My=function(c,h,i){return[c,h,i]},Db=function(c){return{type:"FeatureCollection",features:c}},Mb=function(c){return{type:"geojson",data:c}},Sb=function(){return["get","color"]},Tb=function(c){return["concat","square-rgb-",c]},Eg=function(c){return{"icon-image":c}};let xp=(()=>{class c{constructor(){this.imagesData=[]}generateImage({id:i}){const p="square-rgb-";if(0!==i.indexOf(p))return;const I=i.replace(p,"").split(",").map(Number),Ee=new Uint8Array(16384);for(let yt=0;yt<64;yt++)for(let zt=0;zt<64;zt++){const $t=4*(64*zt+yt);Ee[$t+0]=I[0],Ee[$t+1]=I[1],Ee[$t+2]=I[2],Ee[$t+3]=255}this.imagesData=[...this.imagesData,{id:i,width:64,height:64,data:Ee}]}trackByImage(i,p){return p.id}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("styleImageMissing",function(N){return p.generateImage(N)}),l.YNc(1,wg,1,2,"mgl-image",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngForOf",p.imagesData)("ngForTrackBy",p.trackByImage),l.xp6(1),l.Q6J("source",l.VKq(34,Mb,l.VKq(32,Db,l.kEZ(28,My,l.WLB(10,Kf,l.VKq(7,hl,l.DdM(6,Cg)),l.DdM(9,Eb)),l.WLB(17,Kf,l.VKq(14,hl,l.DdM(13,Dc)),l.DdM(16,Yl)),l.WLB(25,Kf,l.VKq(22,hl,l.VKq(20,Xl,-50)),l.DdM(24,Dy))))))("layout",l.VKq(39,Eg,l.VKq(37,Tb,l.DdM(36,Sb)))))},dependencies:[ye.sg,_i,Xr,xs,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Ib=function(){return[0,0]},Sy=function(c){return{type:"Point",coordinates:c}},Ab=function(c){return{type:"Feature",geometry:c}},Ty=function(c){return[c]},Iy=function(c){return{type:"FeatureCollection",features:c}},Yf=function(c){return{type:"geojson",data:c}},Pb=function(){return{"icon-image":"cat","icon-size":.25}};function Ay(c,h){1&c&&l._UZ(0,"mgl-layer",2),2&c&&l.Q6J("source",l.VKq(11,Yf,l.VKq(9,Iy,l.VKq(7,Ty,l.VKq(5,Ab,l.VKq(3,Sy,l.DdM(2,Ib)))))))("layout",l.DdM(13,Pb))}let Py=(()=>{class c{constructor(){this.imageLoaded=!1}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map")(1,"mgl-image",0),l.NdJ("imageLoaded",function(){return p.imageLoaded=!0}),l.qZA(),l.YNc(2,Ay,1,14,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(2),l.Q6J("ngIf",p.imageLoaded))},dependencies:[ye.O5,_i,Xr,xs,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Dg=function(c){return[c,38.907]},Xf=function(){return[11.15]};let Oy=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(5,Dg,-77.04))("zoom",l.DdM(7,Xf))("attributionControl",!1))},dependencies:[_i,ci,Xa,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function ky(c,h){1&c&&l._UZ(0,"mgl-feature",4),2&c&&l.Q6J("geometry",h.$implicit)}const Ry=function(){return[8]},Ly=function(){return{"icon-image":"oneway"}};let Fy=(()=>{class c{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(i){this.center=i.features[0].geometry.coordinates}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle","mapLoad"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"geometry"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(N){return p.map=N}),l.TgZ(1,"mgl-geojson-source",1),l.YNc(2,ky,1,1,"mgl-feature",2),l.qZA(),l.TgZ(3,"mgl-layer",3),l.NdJ("layerClick",function(N){return p.centerMapTo(N)})("layerMouseEnter",function(){return p.cursorStyle="pointer"})("layerMouseLeave",function(){return p.cursorStyle=""}),l.qZA()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Ry))("center",p.center)("cursorStyle",p.cursorStyle),l.xp6(2),l.Q6J("ngForOf",p.geometries),l.xp6(1),l.Q6J("layout",l.DdM(8,Ly)))},dependencies:[ye.sg,_i,Xr,er,zr,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Ny(c,h){1&c&&l._UZ(0,"showcase-cluster-point",6),2&c&&l.Q6J("properties",h.$implicit.properties)}const By=function(){return[.3]},zy=function(){return[0,20]},Mg=function(){return["!=","cluster",!0]},Ob=function(c){return{fill:c}};function kb(c,h){if(1&c&&(l.O4$(),l._UZ(0,"path",4)),2&c){const i=h.$implicit;l.Q6J("ngStyle",l.VKq(2,Ob,i.fill)),l.uIk("d",i.d)}}const Rb=function(c){return{font:c}},mh=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let Lb=(()=>{class c{constructor(){const i=["<",["get","mag"],2],p=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],I=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],N=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",i,1,0]],mag2:["+",["case",p,1,0]],mag3:["+",["case",I,1,0]],mag4:["+",["case",N,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",i,mh[0],p,mh[1],I,mh[2],N,mh[3],mh[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://maplibre.org/maplibre-gl-js-docs/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-markers-for-clusters",2),l.YNc(3,Ny,1,1,"ng-template",3),l.qZA(),l._UZ(4,"mgl-layer",4)(5,"mgl-layer",5),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(12,By))("center",l.DdM(13,zy)),l.xp6(1),l.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",p.clusterProperties),l.xp6(3),l.Q6J("filter",l.DdM(14,Mg))("paint",p.circlePaint),l.xp6(1),l.Q6J("filter",l.DdM(15,Mg))("layout",p.labelLayout)("paint",p.labelPaint))},dependencies:function(){return[_i,Xr,er,Rs,bl,Gi,Fb,Hi]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),Fb=(()=>{class c{ngOnInit(){const i=[],p=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let I=0;for(let ce=0;ce<p.length;ce++)i.push(I),I+=p[ce];this.font=(I>=1e3?22:I>=100?20:I>=10?18:16)+"px sans-serif",this.r=I>=1e3?50:I>=100?32:I>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let ce=0;ce<p.length;ce++)this.segments.push(this.donutSegment(i[ce]/I,(i[ce]+p[ce])/I,mh[ce]));this.totalString=I.toLocaleString()}donutSegment(i,p,I){p-i==1&&(p-=1e-5);const N=2*Math.PI*(i-.25),ce=2*Math.PI*(p-.25),Ee=Math.cos(N),Ge=Math.sin(N),yt=Math.cos(ce),zt=Math.sin(ce),$t=p-i>.5?1:0;return{d:`M ${this.r+this.r0*Ee} ${this.r+this.r0*Ge} L ${this.r+this.r*Ee} ${this.r+this.r*Ge} A ${this.r} ${this.r} 0 ${$t} 1 ${this.r+this.r*yt} ${this.r+this.r*zt} L ${this.r+this.r0*yt} ${this.r+this.r0*zt} A ${this.r0} ${this.r0} 0 ${$t} 0 ${this.r+this.r0*Ee} ${this.r+this.r0*Ge}`,fill:I}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(i,p){1&i&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,kb,1,4,"path",1),l._UZ(2,"circle",2),l.TgZ(3,"text",3),l._uU(4),l.qZA()()),2&i&&(l.Q6J("ngStyle",l.VKq(10,Rb,p.font)),l.uIk("width",p.w)("height",p.w)("viewbox",p.viewbox),l.xp6(1),l.Q6J("ngForOf",p.segments),l.xp6(1),l.uIk("cx",p.r)("cy",p.r)("r",p.r0),l.xp6(1),l.uIk("transform",p.textTransform),l.xp6(1),l.hij(" ",p.totalString," "))},dependencies:[ye.sg,ye.PC],encapsulation:2}),c})();const Vy=function(){return["has","point_count"]},Nb=function(){return[0,"#51bbd6"]},Bb=function(){return[100,"#f1f075"]},zb=function(){return[750,"#f28cb1"]},Uy=function(c,h,i){return[c,h,i]},jy=function(c){return{property:"point_count",type:"interval",stops:c}},Vb=function(){return[0,20]},Ub=function(){return[100,30]},jb=function(){return[750,40]},Hb=function(c,h){return{"circle-color":c,"circle-radius":h}},$b=function(){return["DIN Offc Pro Medium","Arial Unicode MS Bold"]},Hy=function(c){return{"text-field":"{point_count_abbreviated}","text-font":c,"text-size":12}},$y=function(){return["!has","point_count"]},Gy=function(){return{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}};function Zy(c,h){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2)(2,"mgl-layer",3)(3,"mgl-layer",4)(4,"mgl-layer",5),l.BQk()),2&c){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),l.xp6(1),l.Q6J("filter",l.DdM(10,Vy))("paint",l.WLB(29,Hb,l.VKq(18,jy,l.kEZ(14,Uy,l.DdM(11,Nb),l.DdM(12,Bb),l.DdM(13,zb))),l.VKq(27,jy,l.kEZ(23,Uy,l.DdM(20,Vb),l.DdM(21,Ub),l.DdM(22,jb))))),l.xp6(1),l.Q6J("filter",l.DdM(32,Vy))("layout",l.VKq(34,Hy,l.DdM(33,$b))),l.xp6(1),l.Q6J("filter",l.DdM(36,$y))("paint",l.DdM(37,Gy))}}const Wy=function(){return[3]},qy=function(c){return[c,40.66995747013945]};let Ky=(()=>{class c{ngOnInit(){var i=this;return Zr(function*(){i.earthquakes=yield V.e(45).then(V.t.bind(V,3045,19))})()}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Zy,5,38,"ng-container",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Wy))("center",l.VKq(6,qy,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",p.earthquakes))},dependencies:[ye.O5,_i,Xr,er,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Yy=function(c){return[c,38.907]},Xy=function(){return[11.15]},Tg=function(){return['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"]};let dd=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(6,Yy,-77.04))("zoom",l.DdM(8,Xy))("attributionControl",!1),l.xp6(1),l.Q6J("customAttribution",l.DdM(9,Tg)))},dependencies:[_i,ci,Xa,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Gb=function(){return[36.235656,50.00387]},Zb=function(){return[11.15]};let gh=(()=>{class c{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1)(2,"mgl-control",2)(3,"mgl-control",3)(4,"mgl-control",4),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.DdM(5,Gb))("zoom",l.DdM(6,Zb))("locale",p.locale))},dependencies:[_i,ci,oc,vl,as,eu,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const x1=function(c,h,i){return{"background-image":c,width:h,height:i}};function Ig(c,h){if(1&c){const i=l.EpF();l.TgZ(0,"mgl-marker",2)(1,"div",3),l.NdJ("click",function(){const N=l.CHM(i).$implicit,ce=l.oxw();return l.KtG(ce.alert(N.properties.message))}),l.qZA()()}if(2&c){const i=h.$implicit;l.Q6J("feature",i),l.xp6(1),l.Q6J("ngStyle",l.kEZ(2,x1,"url(https://placekitten.com/g/"+i.properties.iconSize.join("/")+"/)",i.properties.iconSize[0]+"px",i.properties.iconSize[1]+"px"))}}const w1=function(){return[5]},Jy=function(c,h){return[c,h]};let Qy=(()=>{class c{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(i){alert(i)}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"ngStyle","click"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Ig,2,6,"mgl-marker",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,w1))("center",l.WLB(6,Jy,-65.017,-16.457)),l.xp6(1),l.Q6J("ngForOf",p.geojson.features))},dependencies:[ye.sg,ye.PC,_i,os,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),c})();const C1=function(){return[3]},wi=function(c){return[c,39]};let Wb=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(i,p){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,C1))("center",l.VKq(5,wi,-77.38)))},dependencies:[_i,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const qb=function(){return[9]},Kb=function(c){return[c,40]};let _h=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(i,p){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,qb))("center",l.VKq(5,Kb,-74.5)))},dependencies:[_i,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Yb=["*",[["mat-card-footer"]]],Jf=["*","mat-card-footer"];let ev=(()=>{class c{constructor(i){this._animationMode=i}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(i,p){2&i&&l.ekj("_mat-animation-noopable","NoopAnimations"===p._animationMode)},exportAs:["matCard"],ngContentSelectors:Jf,decls:2,vars:0,template:function(i,p){1&i&&(l.F$t(Yb),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),c})(),tv=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[ii.BQ,ii.BQ]}),c})();function nv(c,h){if(1&c&&(l.TgZ(0,"mgl-control",3)(1,"mat-card")(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"div"),l._uU(5),l.qZA()()()),2&c){const i=l.oxw();l.xp6(3),l.hij("Longitude:\xa0",i.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",i.coordinates[1],"")}}const iv=function(){return[2]},rv=function(){return[0,0]};let wp=(()=>{class c{constructor(){this.color="#3887be"}onDragEnd(i){this.coordinates=i.getLngLat().toArray()}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"lngLat","draggable","markerDragEnd"],["position","bottom-left",4,"ngIf"],["position","bottom-left"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1),l.NdJ("markerDragEnd",function(N){return p.onDragEnd(N)}),l.qZA(),l.YNc(2,nv,6,2,"mgl-control",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,iv))("center",l.DdM(8,rv)),l.xp6(1),l.Q6J("lngLat",l.DdM(9,rv))("draggable",!0),l.xp6(1),l.Q6J("ngIf",p.coordinates))},dependencies:[ye.O5,_i,os,ci,ev,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Cp=function(){return[13]},ix=function(){return[11.255,43.77]};let rx=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Cp))("center",l.DdM(5,ix)))},dependencies:[_i,ci,oc,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const ox=function(){return[15]},ov=function(c){return[c,37.830348]},sv=function(){return{}},av=function(c){return[c,37.83381888486939]},sx=function(c){return[c,37.83317489144141]},lv=function(c){return[c,37.83270036637107]},ax=function(c){return[c,37.832056363179625]},lx=function(c){return[c,37.83114119107971]},A1=function(c){return[c,37.83049717427869]},P1=function(c){return[c,37.829920943955045]},O1=function(c){return[c,37.82954808664175]},k1=function(c){return[c,37.82944639795659]},cv=function(c){return[c,37.82880236636284]},em=function(c){return[c,37.82931081282506]},cx=function(c){return[c,37.83080223556934]},ux=function(c){return[c,37.83168351665737]},uv=function(c){return[c,37.832158048267786]},Ep=function(c){return[c,37.83297152392784]},dx=function(c){return[c,37.83263257682617]},hx=function(c){return[c,37.832937629287755]},px=function(c){return[c,37.832429207817725]},fx=function(c){return[c,37.832564787218985]},mx=function(c){return[c,37.83337825839438]},dv=function(c){return[c,37.83368330777276]},gx=function(c,h,i,p,I,N,ce,Ee,Ge,yt,zt,$t,En,Wn,kn,zn,bi,Di,lr,go,Ir){return[c,h,i,p,I,N,ce,Ee,Ge,yt,zt,$t,En,Wn,kn,zn,bi,Di,lr,go,Ir]},_x=function(c){return{type:"LineString",coordinates:c}},Dp=function(c,h){return{type:"Feature",properties:c,geometry:h}},yx=function(c){return{type:"geojson",data:c}},hv=function(){return{"line-join":"round","line-cap":"round"}},vx=function(){return{"line-color":"#888","line-width":8}};let pv=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,ox))("center",l.VKq(8,ov,-122.486052)),l.xp6(1),l.Q6J("source",l.VKq(80,yx,l.WLB(77,Dp,l.DdM(10,sv),l.VKq(75,_x,l.rFY(53,gx,[l.VKq(11,av,-122.48369693756104),l.VKq(13,sx,-122.48348236083984),l.VKq(15,lv,-122.48339653015138),l.VKq(17,ax,-122.48356819152832),l.VKq(19,lx,-122.48404026031496),l.VKq(21,A1,-122.48404026031496),l.VKq(23,P1,-122.48348236083984),l.VKq(25,O1,-122.48356819152832),l.VKq(27,k1,-122.48507022857666),l.VKq(29,cv,-122.48610019683838),l.VKq(31,em,-122.48695850372314),l.VKq(33,cx,-122.48700141906738),l.VKq(35,ux,-122.48751640319824),l.VKq(37,uv,-122.48803138732912),l.VKq(39,Ep,-122.48888969421387),l.VKq(41,dx,-122.48987674713133),l.VKq(43,hx,-122.49043464660643),l.VKq(45,px,-122.49125003814696),l.VKq(47,fx,-122.49163627624512),l.VKq(49,mx,-122.49223709106445),l.VKq(51,dv,-122.49378204345702)])))))("layout",l.DdM(82,hv))("paint",l.DdM(83,vx)))},dependencies:[_i,Xr,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function bx(c,h){if(1&c&&l._UZ(0,"mgl-layer",5),2&c){const i=h.$implicit;l.Q6J("id",i.id)("type",i.type)("filter",i.filter)("paint",i.paint)}}const fv=function(){return["!=","cluster",!0]},xx=function(){return{"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1}};function Og(c,h){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l.YNc(2,bx,1,4,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l.BQk()),2&c){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),l.xp6(1),l.Q6J("ngForOf",i.clusterLayers),l.xp6(1),l.Q6J("filter",l.DdM(7,fv))("paint",l.DdM(8,xx))}}const wx=function(){return[3]},mv=function(c){return[c,40.66995747013945]};let gv=(()=>{class c{ngOnInit(){var i=this;return Zr(function*(){i.earthquakes=yield V.e(45).then(V.t.bind(V,3045,19));const p=[[0,"green"],[20,"orange"],[200,"red"]];i.clusterLayers=p.map((I,N)=>({type:"circle",id:`cluster-${N}`,paint:{"circle-color":I[1],"circle-radius":70,"circle-blur":1},filter:N===p.length-1?[">=","point_count",I[0]]:["all",[">=","point_count",I[0]],["<","point_count",p[N+1][0]]]}))})()}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"],["source","earthquakes",3,"id","type","filter","paint"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Og,4,9,"ng-container",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,wx))("center",l.VKq(6,mv,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",p.earthquakes))},dependencies:[ye.sg,ye.O5,_i,Xr,er,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Cx=function(){return[2]},Ex=function(c){return[c,37.830348]},Dx=function(){return{"fill-color":"#627BC1","fill-opacity":.5}},kg=function(){return{"line-color":"#627BC1","line-width":2}},Mx=function(){return{"fill-color":"#627BC1","fill-opacity":1}};let _v=(()=>{class c{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(i){this.hoverFilter=["==","name",i.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"paint","layerMouseMove","layerMouseLeave"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerMouseMove",function(N){return p.activateHoverOn(N)})("layerMouseLeave",function(){return p.disableHover()}),l.qZA(),l._UZ(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Cx))("center",l.VKq(9,Ex,-100.486052)),l.xp6(2),l.Q6J("paint",l.DdM(11,Dx)),l.xp6(1),l.Q6J("paint",l.DdM(12,kg)),l.xp6(1),l.Q6J("paint",l.DdM(13,Mx))("filter",p.hoverFilter))},dependencies:[_i,Xr,er,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Sx=function(){return[9]},Tx=function(c){return[c,40]};let Ix=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(i,p){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Sx))("center",l.VKq(6,Tx,-74.5))("interactive",!1))},dependencies:[_i,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Ax=function(){return[2.9]},Px=function(){return[16.05,48]};let Ox=(()=>{class c{changeLangTo(i){!this.map||(this.map.setLayoutProperty("country_1","text-field","{name:"+i+"}"),this.map.setLayoutProperty("country_2","text-field","{name:"+i+"}"),this.map.setLayoutProperty("country_3","text-field","{name:"+i+"}"))}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:10,vars:6,consts:[[3,"zoom","center","mapLoad"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(N){return p.map=N}),l.TgZ(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return p.changeLangTo("fr")}),l._uU(3," French "),l.qZA(),l.TgZ(4,"button",1),l.NdJ("click",function(){return p.changeLangTo("ru")}),l._uU(5," Russian "),l.qZA(),l.TgZ(6,"button",1),l.NdJ("click",function(){return p.changeLangTo("de")}),l._uU(7," German "),l.qZA(),l.TgZ(8,"button",1),l.NdJ("click",function(){return p.changeLangTo("es")}),l._uU(9," Spanish "),l.qZA()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Ax))("center",l.DdM(5,Px)))},dependencies:[_i,ci,Ec.lW,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function kx(c,h){if(1&c&&l._UZ(0,"mgl-geojson-source",3),2&c){const i=l.oxw();l.Q6J("data",i.data)}}const Rx=function(){return{"line-color":"yellow","line-opacity":.75,"line-width":5}};function yv(c,h){1&c&&l._UZ(0,"mgl-layer",4),2&c&&l.Q6J("paint",l.DdM(1,Rx))}let vv=(()=>{class c{constructor(){this.zoom=[0]}ngOnInit(){var i=this;return Zr(function*(){const p=yield V.e(330).then(V.t.bind(V,3330,19)),I=p.features[0].geometry.coordinates;p.features[0].geometry.coordinates=[I[0]],i.data=p,i.center=I[0],i.zoom=[14],i.pitch=30;let N=0;i.timer=window.setInterval(()=>{N<I.length?(i.center=I[N],p.features[0].geometry.coordinates.push(I[N]),i.data={...i.data},N++):window.clearInterval(i.timer)},10)})()}ngOnDestroy(){window.clearInterval(this.timer)}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:8,consts:[["movingMethod","jumpTo",3,"zoom","center","centerWithPanTo","pitch"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,kx,1,1,"mgl-geojson-source",1),l.YNc(2,yv,1,2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",p.zoom)("center",p.center)("centerWithPanTo",!0)("pitch",p.pitch),l.xp6(1),l.Q6J("ngIf",p.data),l.xp6(1),l.Q6J("ngIf",p.data))},dependencies:[ye.O5,_i,Xr,er,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();var Lx=V(4986),Fx=V(5963);const Nx=function(){return[14]},Bx=function(){return{"raster-fade-duration":0}};let zx=(()=>{class c{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){var i=this;return Zr(function*(){const I=(yield V.e(330).then(V.t.bind(V,3330,19))).features[0].geometry.coordinates,N=I.map(Ee=>i.makeRectangle(Ee));i.center=I[0],i.coordinates=N[0];let ce=0;i.sub=function bv(c=0,h=Lx.z){return c<0&&(c=0),(0,Fx.H)(c,c,h)}(250).subscribe(()=>{i.url=Math.random()<.5?"assets/red.png":"assets/blue.png",i.coordinates=N[ce],ce=(ce+1)%N.length})})()}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([i,p]){return[[i,p],[i+this.size,p],[i+this.size,p-this.size],[i,p-this.size]]}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-image-source",1)(2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",p.center)("zoom",l.DdM(7,Nx)),l.xp6(1),l.Q6J("url",p.url)("coordinates",p.coordinates),l.xp6(1),l.Q6J("paint",l.DdM(8,Bx)))},dependencies:[_i,Xr,Js,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Rg=function(){return{enableHighAccuracy:!0}};let Lg=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:5,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("positionOptions",l.DdM(4,Rg))("trackUserLocation",!0))},dependencies:[_i,ci,as,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Fg=function(c){return[c]},Ng=function(){return[17]},Vx=function(){return[4.577979,51.038189]},Ux=function(){return[4.577979,51.03816]};let Bg=(()=>{class c{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let i=0;setInterval(()=>{i+=.01,1===i&&(i=0),this.pitch=45+15*Math.cos(i),this.bearing=20*Math.sin(i)-103},20)}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"polygon",4)(5,"polygon",5)(6,"polygon",6),l.qZA()()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("interactive",!1)("pitch",l.VKq(8,Fg,p.pitch))("bearing",l.VKq(10,Fg,p.bearing))("zoom",l.DdM(12,Ng))("center",l.DdM(13,Vx)),l.xp6(1),l.Q6J("lngLat",l.DdM(14,Ux)))},dependencies:[_i,os,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]}),c})();const jx=function(){return[9]},xv=function(c){return[c,40]};let yh=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,jx))("center",l.VKq(5,xv,-74.5)))},dependencies:[_i,ci,vl,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();var zg=V(4385),Vg=V(8184),Hx=V(2289),wv=V(4080);const Ug=["tooltip"],Ev="tooltip-panel",jg=(0,ja.i$)({passive:!0}),$g=new l.OlP("mat-tooltip-scroll-strategy"),Mv={provide:$g,deps:[Vg.aV],useFactory:function Dv(c){return()=>c.scrollStrategies.reposition({scrollThrottle:20})}},Zx=new l.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function Wx(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let qx=(()=>{class c{constructor(i,p,I,N,ce,Ee,Ge,yt,zt,$t,En,Wn){this._overlay=i,this._elementRef=p,this._scrollDispatcher=I,this._viewContainerRef=N,this._ngZone=ce,this._platform=Ee,this._ariaDescriber=Ge,this._focusMonitor=yt,this._dir=$t,this._defaultOptions=En,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new oe.x,this._scrollStrategy=zt,this._document=Wn,En&&(En.position&&(this.position=En.position),En.touchGestures&&(this.touchGestures=En.touchGestures)),$t.change.pipe((0,vi.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(i){i!==this._position&&(this._position=i,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(i){this._disabled=(0,Ni.Ig)(i),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(i){this._showDelay=(0,Ni.su)(i)}get hideDelay(){return this._hideDelay}set hideDelay(i){this._hideDelay=(0,Ni.su)(i),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(i){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=i?String(i).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(i){this._tooltipClass=i,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,vi.R)(this._destroyed)).subscribe(i=>{i?"keyboard"===i&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const i=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([p,I])=>{i.removeEventListener(p,I,jg)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(i,this.message,"tooltip"),this._focusMonitor.stopMonitoring(i)}show(i=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const p=this._createOverlay();this._detach(),this._portal=this._portal||new wv.C5(this._tooltipComponent,this._viewContainerRef);const I=this._tooltipInstance=p.attach(this._portal).instance;I._triggerElement=this._elementRef.nativeElement,I._mouseLeaveHideDelay=this._hideDelay,I.afterHidden().pipe((0,vi.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),I.show(i)}hide(i=this.hideDelay){const p=this._tooltipInstance;p&&(p.isVisible()?p.hide(i):(p._cancelPendingAnimations(),this._detach()))}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),p=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return p.positionChanges.pipe((0,vi.R)(this._destroyed)).subscribe(I=>{this._updateCurrentPositionClass(I.connectionPair),this._tooltipInstance&&I.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:p,panelClass:`${this._cssClassPrefix}-${Ev}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,vi.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,vi.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,vi.R)(this._destroyed)).subscribe(I=>{this._isTooltipVisible()&&I.keyCode===ql.hY&&!(0,ql.Vb)(I)&&(I.preventDefault(),I.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(i){const p=i.getConfig().positionStrategy,I=this._getOrigin(),N=this._getOverlayPosition();p.withPositions([this._addOffset({...I.main,...N.main}),this._addOffset({...I.fallback,...N.fallback})])}_addOffset(i){return i}_getOrigin(){const i=!this._dir||"ltr"==this._dir.value,p=this.position;let I;"above"==p||"below"==p?I={originX:"center",originY:"above"==p?"top":"bottom"}:"before"==p||"left"==p&&i||"right"==p&&!i?I={originX:"start",originY:"center"}:("after"==p||"right"==p&&i||"left"==p&&!i)&&(I={originX:"end",originY:"center"});const{x:N,y:ce}=this._invertPosition(I.originX,I.originY);return{main:I,fallback:{originX:N,originY:ce}}}_getOverlayPosition(){const i=!this._dir||"ltr"==this._dir.value,p=this.position;let I;"above"==p?I={overlayX:"center",overlayY:"bottom"}:"below"==p?I={overlayX:"center",overlayY:"top"}:"before"==p||"left"==p&&i||"right"==p&&!i?I={overlayX:"end",overlayY:"center"}:("after"==p||"right"==p&&i||"left"==p&&!i)&&(I={overlayX:"start",overlayY:"center"});const{x:N,y:ce}=this._invertPosition(I.overlayX,I.overlayY);return{main:I,fallback:{overlayX:N,overlayY:ce}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,Yr.q)(1),(0,vi.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(i){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=i,this._tooltipInstance._markForCheck())}_invertPosition(i,p){return"above"===this.position||"below"===this.position?"top"===p?p="bottom":"bottom"===p&&(p="top"):"end"===i?i="start":"start"===i&&(i="end"),{x:i,y:p}}_updateCurrentPositionClass(i){const{overlayY:p,originX:I,originY:N}=i;let ce;if(ce="center"===p?this._dir&&"rtl"===this._dir.value?"end"===I?"left":"right":"start"===I?"left":"right":"bottom"===p&&"top"===N?"above":"below",ce!==this._currentPosition){const Ee=this._overlayRef;if(Ee){const Ge=`${this._cssClassPrefix}-${Ev}-`;Ee.removePanelClass(Ge+this._currentPosition),Ee.addPanelClass(Ge+ce)}this._currentPosition=ce}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const i=[];if(this._platformSupportsMouseEvents())i.push(["mouseleave",p=>{const I=p.relatedTarget;(!I||!this._overlayRef?.overlayElement.contains(I))&&this.hide()}],["wheel",p=>this._wheelListener(p)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const p=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};i.push(["touchend",p],["touchcancel",p])}this._addListeners(i),this._passiveListeners.push(...i)}_addListeners(i){i.forEach(([p,I])=>{this._elementRef.nativeElement.addEventListener(p,I,jg)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(i){if(this._isTooltipVisible()){const p=this._document.elementFromPoint(i.clientX,i.clientY),I=this._elementRef.nativeElement;p!==I&&!I.contains(p)&&this.hide()}}_disableNativeGesturesIfNecessary(){const i=this.touchGestures;if("off"!==i){const p=this._elementRef.nativeElement,I=p.style;("on"===i||"INPUT"!==p.nodeName&&"TEXTAREA"!==p.nodeName)&&(I.userSelect=I.msUserSelect=I.webkitUserSelect=I.MozUserSelect="none"),("on"===i||!p.draggable)&&(I.webkitUserDrag="none"),I.touchAction="none",I.webkitTapHighlightColor="transparent"}}}return c.\u0275fac=function(i){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),c})(),Kx=(()=>{class c extends qx{constructor(i,p,I,N,ce,Ee,Ge,yt,zt,$t,En,Wn){super(i,p,I,N,ce,Ee,Ge,yt,zt,$t,En,Wn),this._tooltipComponent=R1}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Vg.aV),l.Y36(l.SBq),l.Y36(Es.mF),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36(ja.t4),l.Y36(dl.$s),l.Y36(dl.tE),l.Y36($g),l.Y36(fg.Is,8),l.Y36(Zx,8),l.Y36(ye.K0))},c.\u0275dir=l.lG2({type:c,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[l.qOj]}),c})(),Sv=(()=>{class c{constructor(i,p){this._changeDetectorRef=i,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new oe.x,this._animationsDisabled="NoopAnimations"===p}show(i){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},i)}hide(i){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},i)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:i}){(!i||!this._triggerElement.contains(i))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:i}){(i===this._showAnimation||i===this._hideAnimation)&&this._finalizeAnimation(i===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(i){i?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(i){const p=this._tooltip.nativeElement,I=this._showAnimation,N=this._hideAnimation;if(p.classList.remove(i?N:I),p.classList.add(i?I:N),this._isVisible=i,i&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const ce=getComputedStyle(p);("0s"===ce.getPropertyValue("animation-duration")||"none"===ce.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}i&&this._onShow(),this._animationsDisabled&&(p.classList.add("_mat-animation-noopable"),this._finalizeAnimation(i))}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.sBO),l.Y36(l.QbO,8))},c.\u0275dir=l.lG2({type:c}),c})(),R1=(()=>{class c extends Sv{constructor(i,p,I){super(i,I),this._breakpointObserver=p,this._isHandset=this._breakpointObserver.observe(Hx.u3.Handset),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.sBO),l.Y36(Hx.Yg),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-tooltip-component"]],viewQuery:function(i,p){if(1&i&&l.Gf(Ug,7),2&i){let I;l.iGM(I=l.CRH())&&(p._tooltip=I.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(i,p){1&i&&l.NdJ("mouseleave",function(N){return p._handleMouseLeave(N)}),2&i&&l.Udp("zoom",p.isVisible()?1:null)},features:[l.qOj],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(i,p){if(1&i&&(l.TgZ(0,"div",0,1),l.NdJ("animationend",function(N){return p._handleAnimationEnd(N)}),l.ALo(2,"async"),l._uU(3),l.qZA()),2&i){let I;l.ekj("mat-tooltip-handset",null==(I=l.lcZ(2,4,p._isHandset))?null:I.matches),l.Q6J("ngClass",p.tooltipClass),l.xp6(3),l.Oqu(p.message)}},dependencies:[ye.mk,ye.Ov],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),c})(),Tv=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[Mv],imports:[dl.rt,ye.ez,Vg.U8,ii.BQ,ii.BQ,Es.ZD]}),c})();function Yx(c,h){if(1&c&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&c){const i=h.$implicit;l.Q6J("value",i),l.xp6(1),l.hij(" ",i," ")}}function F1(c,h){if(1&c){const i=l.EpF();l.TgZ(0,"mat-form-field",16)(1,"mat-select",17),l.NdJ("selectionChange",function(I){l.CHM(i);const N=l.oxw(2);return l.KtG(N._changePageSize(I.value))}),l.YNc(2,Yx,2,2,"mat-option",18),l.qZA()()}if(2&c){const i=l.oxw(2);l.Q6J("appearance",i._formFieldAppearance)("color",i.color),l.xp6(1),l.Q6J("value",i.pageSize)("disabled",i.disabled)("panelClass",i.selectConfig.panelClass||"")("disableOptionCentering",i.selectConfig.disableOptionCentering)("aria-label",i._intl.itemsPerPageLabel),l.xp6(1),l.Q6J("ngForOf",i._displayedPageSizeOptions)}}function N1(c,h){if(1&c&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&c){const i=l.oxw(2);l.xp6(1),l.Oqu(i.pageSize)}}function Xx(c,h){if(1&c&&(l.TgZ(0,"div",12)(1,"div",13),l._uU(2),l.qZA(),l.YNc(3,F1,3,8,"mat-form-field",14),l.YNc(4,N1,2,1,"div",15),l.qZA()),2&c){const i=l.oxw();l.xp6(2),l.hij(" ",i._intl.itemsPerPageLabel," "),l.xp6(1),l.Q6J("ngIf",i._displayedPageSizeOptions.length>1),l.xp6(1),l.Q6J("ngIf",i._displayedPageSizeOptions.length<=1)}}function Jx(c,h){if(1&c){const i=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I.firstPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",22),l.qZA()()}if(2&c){const i=l.oxw();l.Q6J("matTooltip",i._intl.firstPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),l.uIk("aria-label",i._intl.firstPageLabel)}}function Iv(c,h){if(1&c){const i=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",23),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I.lastPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",24),l.qZA()()}if(2&c){const i=l.oxw();l.Q6J("matTooltip",i._intl.lastPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),l.uIk("aria-label",i._intl.lastPageLabel)}}let Mp=(()=>{class c{constructor(){this.changes=new oe.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(i,p,I)=>{if(0==I||0==p)return`0 of ${I}`;const N=i*p;return`${N+1} \u2013 ${N<(I=Math.max(I,0))?Math.min(N+p,I):N+p} of ${I}`}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const Pv={provide:Mp,deps:[[new l.FiY,new l.tp0,Mp]],useFactory:function Av(c){return c||new Mp}},ew=new l.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),tw=(0,ii.Id)((0,ii.dB)(class{}));let nw=(()=>{class c extends tw{constructor(i,p,I){if(super(),this._intl=i,this._changeDetectorRef=p,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new l.vpe,this._intlChanges=i.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),I){const{pageSize:N,pageSizeOptions:ce,hidePageSize:Ee,showFirstLastButtons:Ge}=I;null!=N&&(this._pageSize=N),null!=ce&&(this._pageSizeOptions=ce),null!=Ee&&(this._hidePageSize=Ee),null!=Ge&&(this._showFirstLastButtons=Ge)}}get pageIndex(){return this._pageIndex}set pageIndex(i){this._pageIndex=Math.max((0,Ni.su)(i),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(i){this._length=(0,Ni.su)(i),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(i){this._pageSize=Math.max((0,Ni.su)(i),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(i){this._pageSizeOptions=(i||[]).map(p=>(0,Ni.su)(p)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(i){this._hidePageSize=(0,Ni.Ig)(i)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(i){this._showFirstLastButtons=(0,Ni.Ig)(i)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const i=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(i)}previousPage(){if(!this.hasPreviousPage())return;const i=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(i)}firstPage(){if(!this.hasPreviousPage())return;const i=this.pageIndex;this.pageIndex=0,this._emitPageEvent(i)}lastPage(){if(!this.hasNextPage())return;const i=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(i)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const i=this.getNumberOfPages()-1;return this.pageIndex<i&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(i){const I=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/i)||0,this.pageSize=i,this._emitPageEvent(I)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((i,p)=>i-p),this._changeDetectorRef.markForCheck())}_emitPageEvent(i){this.page.emit({previousPageIndex:i,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return c.\u0275fac=function(i){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[l.qOj]}),c})(),Gg=(()=>{class c extends nw{constructor(i,p,I){super(i,p,I),I&&null!=I.formFieldAppearance&&(this._formFieldAppearance=I.formFieldAppearance)}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Mp),l.Y36(l.sBO),l.Y36(ew,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[l.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(i,p){1&i&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,Xx,5,3,"div",2),l.TgZ(3,"div",3)(4,"div",4),l._uU(5),l.qZA(),l.YNc(6,Jx,3,5,"button",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return p.previousPage()}),l.O4$(),l.TgZ(8,"svg",7),l._UZ(9,"path",8),l.qZA()(),l.kcU(),l.TgZ(10,"button",9),l.NdJ("click",function(){return p.nextPage()}),l.O4$(),l.TgZ(11,"svg",7),l._UZ(12,"path",10),l.qZA()(),l.YNc(13,Iv,3,5,"button",11),l.qZA()()()),2&i&&(l.xp6(2),l.Q6J("ngIf",!p.hidePageSize),l.xp6(3),l.hij(" ",p._intl.getRangeLabel(p.pageIndex,p.pageSize,p.length)," "),l.xp6(1),l.Q6J("ngIf",p.showFirstLastButtons),l.xp6(1),l.Q6J("matTooltip",p._intl.previousPageLabel)("matTooltipDisabled",p._previousButtonsDisabled())("matTooltipPosition","above")("disabled",p._previousButtonsDisabled()),l.uIk("aria-label",p._intl.previousPageLabel),l.xp6(3),l.Q6J("matTooltip",p._intl.nextPageLabel)("matTooltipDisabled",p._nextButtonsDisabled())("matTooltipPosition","above")("disabled",p._nextButtonsDisabled()),l.uIk("aria-label",p._intl.nextPageLabel),l.xp6(3),l.Q6J("ngIf",p.showFirstLastButtons))},dependencies:[ye.sg,ye.O5,Ec.lW,aa.KE,zg.gD,ii.ey,Kx],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{display:inline-block;width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),c})(),Sp=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[Pv],imports:[ye.ez,Ec.ot,zg.LD,Tv,ii.BQ]}),c})();function Ov(c,h){if(1&c&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&c){const i=h.$implicit;l.Q6J("title",i.properties["Secondary ID"]),l.xp6(1),l.hij(" ",i.properties["Primary ID"]," ")}}function kv(c,h){if(1&c){const i=l.EpF();l.TgZ(0,"div",9),l.NdJ("click",function(I){const ce=l.CHM(i).$implicit,Ee=l.oxw(2);return l.KtG(Ee.selectCluster(I,ce))}),l._uU(1),l.qZA()}if(2&c){const i=h.$implicit;l.xp6(1),l.hij(" ",null==i.properties?null:i.properties.point_count," ")}}function Rv(c,h){if(1&c&&(l.TgZ(0,"mgl-popup",10),l._UZ(1,"showcase-cluster-popup",11),l.qZA()),2&c){l.oxw();const i=l.MAs(2),p=l.oxw();l.Q6J("feature",p.selectedCluster),l.xp6(1),l.Q6J("clusterComponent",i)("selectedCluster",p.selectedCluster)}}function Lv(c,h){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2,3),l.TgZ(3,"mgl-markers-for-clusters",4),l.YNc(4,Ov,2,2,"ng-template",5),l.YNc(5,kv,2,1,"ng-template",6),l.qZA(),l.YNc(6,Rv,2,3,"mgl-popup",7),l.BQk()),2&c){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),l.xp6(5),l.Q6J("ngIf",i.selectedCluster)}}const Fv=function(){return[3]},Nv=function(c){return[c,40.66995747013945]};function iw(c,h){if(1&c&&(l.TgZ(0,"mat-list-item"),l._uU(1),l.qZA()),2&c){const i=h.$implicit;l.xp6(1),l.hij(" ",i.properties["Primary ID"]," ")}}let z1=(()=>{class c{ngOnInit(){var i=this;return Zr(function*(){const p=yield V.e(45).then(V.t.bind(V,3045,19));setInterval(()=>{p.features.length&&p.features.pop(),i.earthquakes={...p}},500)})()}selectCluster(i,p){i.stopPropagation(),this.selectedCluster={geometry:p.geometry,properties:p.properties}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["clusterComponent",""],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Lv,7,5,"ng-container",1),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Fv))("center",l.VKq(6,Nv,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",p.earthquakes))},dependencies:function(){return[ye.O5,_i,er,ss,ea,Rs,bl,Gi,Bv,Hi]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]}),c})(),Bv=(()=>{class c{ngOnChanges(i){this.changePage(),i.selectedCluster&&!i.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(i){var p=this;return Zr(function*(){let I=0;i&&(I=5*i.pageIndex),p.leaves=yield p.clusterComponent.getClusterLeaves(p.selectedCluster.properties.cluster_id,5,I)})()}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-cluster-popup"]],viewQuery:function(i,p){if(1&i&&l.Gf(Gg,7),2&i){let I;l.iGM(I=l.CRH())&&(p.paginator=I.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[l.TTD],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"length","pageSize","page"]],template:function(i,p){1&i&&(l.TgZ(0,"mat-list"),l.YNc(1,iw,2,1,"mat-list-item",0),l.qZA(),l.TgZ(2,"mat-paginator",1),l.NdJ("page",function(N){return p.changePage(N)}),l.qZA()),2&i&&(l.xp6(1),l.Q6J("ngForOf",p.leaves),l.xp6(1),l.Q6J("length",null==p.selectedCluster.properties?null:p.selectedCluster.properties.point_count)("pageSize",5))},dependencies:[ye.sg,ab,gp,Gg],encapsulation:2}),c})();function rw(c,h){if(1&c){const i=l.EpF();l.ynx(0),l.TgZ(1,"mgl-control")(2,"button",3),l.NdJ("click",function(){l.CHM(i);const I=l.oxw();return l.KtG(I.alert("Hello"))}),l._uU(3," Hello "),l.qZA()(),l._UZ(4,"mgl-control",4)(5,"mgl-control",5),l.TgZ(6,"mgl-control",6),l.NdJ("geolocate",function(I){l.CHM(i);const N=l.oxw();return l.KtG(N.onGeolocate(I))}),l.qZA(),l._UZ(7,"mgl-control",7)(8,"mgl-control",8),l.BQk()}}let ow=(()=>{class c{constructor(){this.visible=!0}alert(i){alert(i)}onGeolocate(i){console.log("geolocate",i)}toggleControls(){this.visible=!this.visible}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:4,consts:[[4,"ngIf"],["position","bottom-right"],["mat-flat-button","","color","accent",3,"click"],["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map"),l.YNc(1,rw,9,0,"ng-container",0),l.TgZ(2,"mgl-control",1)(3,"button",2),l.NdJ("click",function(){return p.toggleControls()}),l._uU(4),l.qZA()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngIf",p.visible),l.xp6(3),l.hij(" ",p.visible?"Hide Controls":"Show Controls"," "))},dependencies:[ye.O5,_i,ci,oc,vl,as,Xa,eu,Ec.lW,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const sw=function(){return[5]},tm=function(c,h){return[c,h]};let Tp=(()=>{class c{alert(i){alert(i)}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.NdJ("click",function(){return p.alert("Foo")}),l.qZA()(),l.TgZ(3,"mgl-marker",1)(4,"div",3),l.NdJ("click",function(){return p.alert("Bar")}),l.qZA()(),l.TgZ(5,"mgl-marker",1)(6,"div",4),l.NdJ("click",function(){return p.alert("Baz")}),l.qZA()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,sw))("center",l.WLB(8,tm,-65.017,-16.457)),l.xp6(1),l.Q6J("lngLat",l.WLB(11,tm,-66.324462890625,-16.024695711685304)),l.xp6(2),l.Q6J("lngLat",l.WLB(14,tm,-61.2158203125,-15.97189158092897)),l.xp6(2),l.Q6J("lngLat",l.WLB(17,tm,-63.29223632812499,-18.28151823530889)))},dependencies:[_i,os,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),c})();const aw=function(){return[2]},nm=function(){return[0,0]},Mc=function(c){return{type:"Point",coordinates:c}};let lw=(()=>{class c{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(i){console.log("onDragStart",i)}onDragEnd(i){console.log("onDragEnd",i)}onDrag(i){console.log("onDrag",i),this.coordinates=i.lngLat.toArray()}changeColor(i){this.layerPaint={...this.layerPaint,"circle-color":i}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[[3,"zoom","center"],["id","point"],[3,"properties","geometry","mglDraggable","featureDragStart","featureDragEnd","featureDrag"],["id","point","type","circle","source","point",3,"paint","layerMouseEnter","layerMouseLeave"],["targetLayer",""],["position","bottom-left"]],template:function(i,p){if(1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1)(2,"mgl-feature",2),l.NdJ("featureDragStart",function(N){return p.onDragStart(N)})("featureDragEnd",function(N){return p.onDragEnd(N)})("featureDrag",function(N){return p.onDrag(N)}),l.qZA()(),l.TgZ(3,"mgl-layer",3,4),l.NdJ("layerMouseEnter",function(){return p.changeColor("#3bb2d0")})("layerMouseLeave",function(){return p.changeColor("#3887be")}),l.qZA(),l.TgZ(5,"mgl-control",5)(6,"mat-card")(7,"div"),l._uU(8),l.qZA(),l.TgZ(9,"div"),l._uU(10),l.qZA()()()()),2&i){const I=l.MAs(4);l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(9,aw))("center",l.DdM(10,nm)),l.xp6(2),l.Q6J("geometry",l.VKq(12,Mc,l.DdM(11,nm)))("mglDraggable",I),l.xp6(1),l.Q6J("paint",p.layerPaint),l.xp6(5),l.hij("Longitude:\xa0",p.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",p.coordinates[1],"")}},dependencies:[_i,Xr,Eo,er,zr,ci,ev,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const im=function(){return[15]},Ip=function(c){return[c,37.830348]},cw=function(){return{"line-join":"round","line-cap":"round"}},uw=function(){return{"line-color":"#888","line-width":8}};let dw=(()=>{class c{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1),l._UZ(2,"mgl-feature",2),l.qZA(),l._UZ(3,"mgl-layer",3),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,im))("center",l.VKq(8,Ip,-122.486052)),l.xp6(2),l.Q6J("geometry",p.geometry),l.xp6(1),l.Q6J("layout",l.DdM(10,cw))("paint",l.DdM(11,uw)))},dependencies:[_i,Xr,er,zr,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),rm=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&i&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},dependencies:[_i,ci,eu,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const om=function(){return[12]},hw=function(){return[11.39085,47.27574]};let pw=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:7,consts:[[3,"zoom","center","pitch"],["id","terrainSource","url","https://demotiles.maplibre.org/terrain-tiles/tiles.json","tileSize","256"],["mglNavigation","","showCompass","true","showZoom","true","visualizePitch","true"],["mglTerrain","","source","terrainSource","exaggeration","5","position","top-right"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-raster-dem-source",1)(2,"mgl-control",2)(3,"mgl-control",3),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,om))("center",l.DdM(6,hw))("pitch",52))},dependencies:[_i,Pn,ci,vl,cs,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function zv(c,h){if(1&c&&(l.TgZ(0,"mgl-popup",3),l._UZ(1,"span",4),l.qZA()),2&c){const i=l.oxw();l.Q6J("lngLat",i.selectedLngLat)("closeOnClick",!1),l.xp6(1),l.Q6J("innerHTML",null==i.selectedElement?null:i.selectedElement.name,l.oJD)}}const Vv=function(){return[3]},Zg=function(c){return[c,38.907]},fw=function(){return{type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}},mw=function(){return{"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"}};let V1=(()=>{class c{onClick(i){this.selectedLngLat=i.lngLat,this.selectedElement=i.features[0].properties}onMapClick(){this.selectedElement=null}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle","mapClick"],["id","states-layer","type","fill",3,"source","paint","layerMouseEnter","layerMouseLeave","layerClick"],[3,"lngLat","closeOnClick",4,"ngIf"],[3,"lngLat","closeOnClick"],[3,"innerHTML"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapClick",function(){return p.onMapClick()}),l.TgZ(1,"mgl-layer",1),l.NdJ("layerMouseEnter",function(){return p.cursorStyle="pointer"})("layerMouseLeave",function(){return p.cursorStyle=""})("layerClick",function(N){return p.onClick(N)}),l.qZA(),l.YNc(2,zv,2,3,"mgl-popup",2),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Vv))("center",l.VKq(9,Zg,-100.04))("cursorStyle",p.cursorStyle),l.xp6(1),l.Q6J("source",l.DdM(11,fw))("paint",l.DdM(12,mw)),l.xp6(1),l.Q6J("ngIf",p.selectedElement&&p.selectedLngLat))},dependencies:[ye.O5,_i,Xr,ss,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Wg(c,h){if(1&c&&(l.TgZ(0,"mgl-popup",4),l._UZ(1,"span",5),l.qZA()),2&c){const i=l.oxw();l.Q6J("feature",i.selectedPoint),l.xp6(1),l.Q6J("innerHTML",null==i.selectedPoint.properties?null:i.selectedPoint.properties.description,l.oJD)}}const qg=function(){return[11.15]},jv=function(c){return[c,38.907]},Kg=function(){return["get","icon"]},Yg=function(c){return{"icon-image":c,"icon-allow-overlap":!0}};let gw=(()=>{class c{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar_15"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art_gallery_15"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle_15"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star_15"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(i){this.selectedPoint=i.features[0]}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:14,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerClick",function(N){return p.onClick(N)})("layerMouseEnter",function(){return p.cursorStyle="pointer"})("layerMouseLeave",function(){return p.cursorStyle=""}),l.qZA(),l.YNc(3,Wg,2,2,"mgl-popup",3),l.qZA()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,qg))("center",l.VKq(9,jv,-77.04))("cursorStyle",p.cursorStyle),l.xp6(1),l.Q6J("data",p.points),l.xp6(1),l.Q6J("layout",l.VKq(12,Yg,l.DdM(11,Kg))),l.xp6(1),l.Q6J("ngIf",p.selectedPoint))},dependencies:[ye.O5,_i,Xr,er,ss,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const _w=function(){return[3]},Hv=function(c){return[c,37.8]};let yw=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-popup",1)(2,"h1"),l._uU(3,"Hello world !"),l.qZA()()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,_w))("center",l.VKq(8,Hv,-96)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,Hv,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},dependencies:[_i,ss,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]}),c})();const Xg=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Gv=function(c){return{satellite:c}},Zv=function(){return{visibility:"visible"}},Wv=function(){return{"raster-opacity":1}},qv=function(c,h){return{id:"satellite",layout:c,minzoom:0,paint:h,"raster-opacity":1,source:"satellite",type:"raster"}},vw=function(c){return[c]},Kv=function(c,h){return{version:8,sources:c,layers:h}},Yv=function(){return[9]},bw=function(){return[137.9150899566626,36.25956997955441]};let Xv=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:19,consts:[[3,"zoom","center"]],template:function(i,p){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn(l.WLB(14,Kv,l.VKq(5,Gv,l.DdM(4,Xg)),l.VKq(12,vw,l.WLB(9,qv,l.DdM(7,Zv),l.DdM(8,Wv))))),l.Q6J("zoom",l.DdM(17,Yv))("center",l.DdM(18,bw)))},dependencies:[_i,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const xw=function(){return[15]},ca=function(c){return[c,38.8895]},ww=function(){return{"background-image":"url(https://maplibre.org/maplibre-gl-js-docs/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"}};let Cw=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[[3,"zoom","center"],[3,"lngLat"],["myMarker",""],[3,"ngStyle"],[3,"marker"]],template:function(i,p){if(1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1,2),l._UZ(3,"div",3),l.qZA(),l.TgZ(4,"mgl-popup",4),l._uU(5," Construction on the Washington Monument began in 1848. "),l.qZA()()),2&i){const I=l.MAs(2);l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,xw))("center",l.VKq(8,ca,-77.0353)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,ca,-77.0353)),l.xp6(2),l.Q6J("ngStyle",l.DdM(12,ww)),l.xp6(1),l.Q6J("marker",I)}},dependencies:[ye.PC,_i,os,ss,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const U1=["input"],j1=function(c){return{enterDuration:c}},Jv=["*"],Qv=new l.OlP("mat-radio-default-options",{providedIn:"root",factory:function Ap(){return{color:"accent"}}});let e0=0;const Jg={provide:mo.JU,useExisting:(0,l.Gpc)(()=>n0),multi:!0};class t0{constructor(h,i){this.source=h,this.value=i}}const Qg=new l.OlP("MatRadioGroup");let Ew=(()=>{class c{constructor(i){this._changeDetector=i,this._value=null,this._name="mat-radio-group-"+e0++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.vpe}get name(){return this._name}set name(i){this._name=i,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(i){this._labelPosition="before"===i?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(i){this._selected=i,this.value=i?i.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(i){this._disabled=(0,Ni.Ig)(i),this._markRadiosForCheck()}get required(){return this._required}set required(i){this._required=(0,Ni.Ig)(i),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(i=>{i.name=this.name,i._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(p=>{p.checked=this.value===p.value,p.checked&&(this._selected=p)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new t0(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(i=>i._markForCheck())}writeValue(i){this.value=i,this._changeDetector.markForCheck()}registerOnChange(i){this._controlValueAccessorChangeFn=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetector.markForCheck()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.sBO))},c.\u0275dir=l.lG2({type:c,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),c})(),n0=(()=>{class c extends Ew{}return c.\u0275fac=function(){let h;return function(p){return(h||(h=l.n5z(c)))(p||c)}}(),c.\u0275dir=l.lG2({type:c,selectors:[["mat-radio-group"]],contentQueries:function(i,p,I){if(1&i&&l.Suo(I,t_,5),2&i){let N;l.iGM(N=l.CRH())&&(p._radios=N)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[l._Bn([Jg,{provide:Qg,useExisting:c}]),l.qOj]}),c})();class Dw{constructor(h){this._elementRef=h}}const e_=(0,ii.Kr)((0,ii.sb)(Dw));let r0=(()=>{class c extends e_{constructor(i,p,I,N,ce,Ee,Ge,yt){super(p),this._changeDetector=I,this._focusMonitor=N,this._radioDispatcher=ce,this._providerOverride=Ge,this._uniqueId="mat-radio-"+ ++e0,this.id=this._uniqueId,this.change=new l.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=i,this._noopAnimations="NoopAnimations"===Ee,yt&&(this.tabIndex=(0,Ni.su)(yt,0)),this._removeUniqueSelectionListener=ce.listen((zt,$t)=>{zt!==this.id&&$t===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(i){const p=(0,Ni.Ig)(i);this._checked!==p&&(this._checked=p,p&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!p&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),p&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===i),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(i){this._labelPosition=i}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(i){this._setDisabled((0,Ni.Ig)(i))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(i){this._required=(0,Ni.Ig)(i)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(i){this._color=i}get inputId(){return`${this.id||this._uniqueId}-input`}focus(i,p){p?this._focusMonitor.focusVia(this._inputElement,p,i):this._inputElement.nativeElement.focus(i)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{!i&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new t0(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(i){i.stopPropagation()}_onInputInteraction(i){if(i.stopPropagation(),!this.checked&&!this.disabled){const p=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),p&&this.radioGroup._emitChangeEvent())}}_setDisabled(i){this._disabled!==i&&(this._disabled=i,this._changeDetector.markForCheck())}_updateTabIndex(){const i=this.radioGroup;let p;if(p=i&&i.selected&&!this.disabled?i.selected===this?this.tabIndex:-1:this.tabIndex,p!==this._previousTabIndex){const I=this._inputElement?.nativeElement;I&&(I.setAttribute("tabindex",p+""),this._previousTabIndex=p)}}}return c.\u0275fac=function(i){l.$Z()},c.\u0275dir=l.lG2({type:c,viewQuery:function(i,p){if(1&i&&l.Gf(U1,5),2&i){let I;l.iGM(I=l.CRH())&&(p._inputElement=I.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[l.qOj]}),c})(),t_=(()=>{class c extends r0{constructor(i,p,I,N,ce,Ee,Ge,yt){super(i,p,I,N,ce,Ee,Ge,yt)}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(Qg,8),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(dl.tE),l.Y36(fp.A8),l.Y36(l.QbO,8),l.Y36(Qv,8),l.$8M("tabindex"))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(i,p){1&i&&l.NdJ("focus",function(){return p._inputElement.nativeElement.focus()}),2&i&&(l.uIk("tabindex",null)("id",p.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.ekj("mat-radio-checked",p.checked)("mat-radio-disabled",p.disabled)("_mat-animation-noopable",p._noopAnimations)("mat-primary","primary"===p.color)("mat-accent","accent"===p.color)("mat-warn","warn"===p.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[l.qOj],ngContentSelectors:Jv,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(i,p){if(1&i&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2),l._UZ(3,"span",3)(4,"span",4),l.TgZ(5,"input",5,6),l.NdJ("change",function(N){return p._onInputInteraction(N)})("click",function(N){return p._onInputClick(N)}),l.qZA(),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA()(),l.TgZ(9,"span",9)(10,"span",10),l._uU(11,"\xa0"),l.qZA(),l.Hsn(12),l.qZA()()),2&i){const I=l.MAs(1);l.uIk("for",p.inputId),l.xp6(5),l.Q6J("id",p.inputId)("checked",p.checked)("disabled",p.disabled)("required",p.required),l.uIk("name",p.name)("value",p.value)("aria-label",p.ariaLabel)("aria-labelledby",p.ariaLabelledby)("aria-describedby",p.ariaDescribedby),l.xp6(2),l.Q6J("matRippleTrigger",I)("matRippleDisabled",p._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(17,j1,p._noopAnimations?0:150)),l.xp6(2),l.ekj("mat-radio-label-before","before"==p.labelPosition)}},dependencies:[ii.wG],styles:['.mat-radio-button{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.mat-radio-input:focus~.mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}'],encapsulation:2,changeDetection:0}),c})(),sm=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[ii.si,ii.BQ,ii.BQ]}),c})();const n_=function(){return[13]},H1=function(){return[4.899,52.372]};let o0=(()=>{class c{constructor(){this.layerId="streets"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(i){this.style="streets"===i?"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL":{version:8,sources:{raster:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],minzoom:0,maxzoom:15,scheme:"xyz",tileSize:256}},layers:[{id:"some-raster-layer-id",type:"raster",source:"raster",layout:{visibility:"visible"},paint:{"raster-opacity":1}}]}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:7,consts:[[3,"zoom","center"],[3,"ngModel","ngModelChange"],["value","streets"],["value","code"]],template:function(i,p){1&i&&(l._UZ(0,"mgl-map",0),l.TgZ(1,"mat-radio-group",1),l.NdJ("ngModelChange",function(N){return p.changeStyle(N)}),l.TgZ(2,"mat-radio-button",2),l._uU(3,"streets"),l.qZA(),l.TgZ(4,"mat-radio-button",3),l._uU(5,"from code"),l.qZA()()),2&i&&(l.Akn(p.style),l.Q6J("zoom",l.DdM(5,n_))("center",l.DdM(6,H1)),l.xp6(1),l.Q6J("ngModel",p.layerId))},dependencies:[mo.JJ,mo.On,_i,n0,t_,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}","mat-radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]}),c})();const s0=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Sw=function(){return{type:"raster-dem",url:"https://demotiles.maplibre.org/terrain-tiles/tiles.json",tileSize:256}},a0=function(c,h){return{satelliteSource:c,terrainSource:h}},i_=function(){return{id:"satellite",type:"raster",source:"satelliteSource"}},$1=function(c){return[c]},Tw=function(){return{source:"terrainSource",exaggeration:1}},G1=function(c,h,i){return{version:8,sources:c,layers:h,terrain:i}},Iw=function(){return[12]},Aw=function(){return[11.39085,47.27574]};let Pw=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:20,consts:[[3,"zoom","center","pitch"]],template:function(i,p){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn(l.kEZ(14,G1,l.WLB(7,a0,l.DdM(5,s0),l.DdM(6,Sw)),l.VKq(11,$1,l.DdM(10,i_)),l.DdM(13,Tw))),l.Q6J("zoom",l.DdM(18,Iw))("center",l.DdM(19,Aw))("pitch",52))},dependencies:[_i,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const l0=function(){return[12]},c0=function(){return[11.39085,47.27574]};let Ow=(()=>{class c{constructor(){this.mapLibreExampleSource="https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",this.terrainSpec={source:"terrainSource",exaggeration:1}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center","pitch","terrain"],["id","terrainSource","url","https://demotiles.maplibre.org/terrain-tiles/tiles.json","tileSize","256"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-raster-dem-source",1),l.qZA()),2&i&&(l.Akn(p.mapLibreExampleSource),l.Q6J("zoom",l.DdM(6,l0))("center",l.DdM(7,c0))("pitch",52)("terrain",p.terrainSpec))},dependencies:[_i,Pn,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const u0=["button"],d0=["*"],h0=new l.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),p0=new l.OlP("MatButtonToggleGroup");let m0=0;class r_{constructor(h,i){this.source=h,this.value=i}}const _0=(0,ii.Kr)(class{});let o_=(()=>{class c extends _0{constructor(i,p,I,N,ce,Ee){super(),this._changeDetectorRef=p,this._elementRef=I,this._focusMonitor=N,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.vpe;const Ge=Number(ce);this.tabIndex=Ge||0===Ge?Ge:null,this.buttonToggleGroup=i,this.appearance=Ee&&Ee.appearance?Ee.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(i){this._appearance=i}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(i){const p=(0,Ni.Ig)(i);p!==this._checked&&(this._checked=p,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(i){this._disabled=(0,Ni.Ig)(i)}ngOnInit(){const i=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+m0++,i&&(i._isPrechecked(this)?this.checked=!0:i._isSelected(this)!==this._checked&&i._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const i=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),i&&i._isSelected(this)&&i._syncButtonToggle(this,!1,!1,!0)}focus(i){this._buttonElement.nativeElement.focus(i)}_onButtonClick(){const i=!!this._isSingleSelector()||!this._checked;i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new r_(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(p0,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(dl.tE),l.$8M("tabindex"),l.Y36(h0,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-button-toggle"]],viewQuery:function(i,p){if(1&i&&l.Gf(u0,5),2&i){let I;l.iGM(I=l.CRH())&&(p._buttonElement=I.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(i,p){1&i&&l.NdJ("focus",function(){return p.focus()}),2&i&&(l.uIk("aria-label",null)("aria-labelledby",null)("id",p.id)("name",null),l.ekj("mat-button-toggle-standalone",!p.buttonToggleGroup)("mat-button-toggle-checked",p.checked)("mat-button-toggle-disabled",p.disabled)("mat-button-toggle-appearance-standard","standard"===p.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.qOj],ngContentSelectors:d0,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,p){if(1&i&&(l.F$t(),l.TgZ(0,"button",0,1),l.NdJ("click",function(){return p._onButtonClick()}),l.TgZ(2,"span",2),l.Hsn(3),l.qZA()(),l._UZ(4,"span",3)(5,"span",4)),2&i){const I=l.MAs(1);l.Q6J("id",p.buttonId)("disabled",p.disabled||null),l.uIk("tabindex",p.disabled?-1:p.tabIndex)("aria-pressed",p.checked)("name",p._getButtonName())("aria-label",p.ariaLabel)("aria-labelledby",p.ariaLabelledby),l.xp6(5),l.Q6J("matRippleTrigger",I)("matRippleDisabled",p.disableRipple||p.disabled)}},dependencies:[ii.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),c})(),kw=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[ii.BQ,ii.si,ii.BQ]}),c})();const Rw=function(){return[3]},Z1=function(c,h){return[c,h]},W1=function(){return["https://demotiles.maplibre.org/tiles/{z}/{x}/{y}.pbf"]},q1=function(){return{"line-color":"blue"}};let K1=(()=>{class c{constructor(){this.layouts={countries:{visibility:"none"},names:{visibility:"none","text-field":"{name:latin}","text-size":30}}}ngOnInit(){}toggleLayer(i){this.layouts[i.value]={...this.layouts[i.value],visibility:"visible"===this.layouts[i.value].visibility?"none":"visible"}}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:10,vars:16,consts:[[3,"zoom","center"],["id","countries",3,"tiles"],["id","everything","url","https://api.maptiler.com/tiles/v3/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"],["id","countries-layer","type","line","source","countries","sourceLayer","countries",3,"layout","paint"],["id","names","type","symbol","source","everything","sourceLayer","place",3,"layout"],[1,"menu"],["value","names",3,"checked","change"],["value","countries",3,"checked","change"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-vector-source",1)(2,"mgl-vector-source",2)(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA(),l.TgZ(5,"div",5)(6,"mat-button-toggle",6),l.NdJ("change",function(N){return p.toggleLayer(N)}),l._uU(7,"countries names"),l.qZA(),l.TgZ(8,"mat-button-toggle",7),l.NdJ("change",function(N){return p.toggleLayer(N)}),l._uU(9,"countries border"),l.qZA()()),2&i&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(10,Rw))("center",l.WLB(11,Z1,-71.97722138410576,-13.517379300798098)),l.xp6(1),l.Q6J("tiles",l.DdM(14,W1)),l.xp6(2),l.Q6J("layout",p.layouts.countries)("paint",l.DdM(15,q1)),l.xp6(1),l.Q6J("layout",p.layouts.names),l.xp6(2),l.Q6J("checked",!0),l.xp6(2),l.Q6J("checked",!0))},dependencies:[_i,Xr,ic,o_,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]}),c})();const Y1=function(){return[12]},X1=function(c){return[c,38.897]},J1=function(){return{padding:20}},Q1=function(){return{"line-color":"#BF93E4","line-width":5}},eC=function(){return{"line-join":"round","line-cap":"round"}};let am=(()=>{class c{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const i=this.source.data.features[0].geometry.coordinates;this.bounds=i.reduce((p,I)=>p.extend(I),new U.LngLatBounds(i[0],i[0]))}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:15,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return p.zoomToBounds()}),l._uU(3," Zoom to bounds "),l.qZA()(),l._UZ(4,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(9,Y1))("center",l.VKq(10,X1,-77.0214))("fitBounds",p.bounds)("fitBoundsOptions",l.DdM(12,J1)),l.xp6(4),l.Q6J("source",p.source)("paint",l.DdM(13,Q1))("layout",l.DdM(14,eC)))},dependencies:[_i,Xr,ci,Ec.lW,Gi,Hi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),Lw=(()=>{class c{constructor(i){this.router=i}canActivate(i){return!!pm[0].children.some(p=>p.path===i.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}}return c.\u0275fac=function(i){return new(i||c)(l.LFG(H.F0))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function hd(c){return c&&c.origin?c.origin:"https://stackblitz.com"}function s_(){return Math.random().toString(36).substring(7)}function pd(c){var h=[];return c&&(c.forceEmbedLayout&&h.push("embed=1"),c.clickToLoad&&h.push("ctl=1"),"string"==typeof c.openFile&&h.push("file="+c.openFile),Array.isArray(c.openFile)&&c.openFile.forEach(function(i){"string"==typeof i&&h.push("file="+i)}),"preview"!==c.view&&"editor"!==c.view||h.push("view="+c.view),"light"!==c.theme&&"dark"!==c.theme||h.push("theme="+c.theme),c.hideExplorer&&h.push("hideExplorer=1"),c.hideNavigation&&h.push("hideNavigation=1"),c.hideDevTools&&h.push("hidedevtools=1"),"number"==typeof c.devToolsHeight&&c.devToolsHeight>=0&&c.devToolsHeight<=100&&h.push("devtoolsheight="+Math.round(c.devToolsHeight))),h.length?"?"+h.join("&"):""}function v0(c,h,i){if(null===c.parentNode)throw new Error("Invalid Element");h.id=c.id,function Fw(c,h){h&&(h.hasOwnProperty("height")&&(c.height=""+h.height),h.hasOwnProperty("width")&&(c.width=""+h.width)),c.height||(c.height="300"),c.width||c.setAttribute("style","width:100%;")}(h,i),c.parentNode.replaceChild(h,c)}function Pp(c){if("string"==typeof c){var h=document.getElementById(c);if(null!==h)return h}else if(c instanceof HTMLElement)return c;throw new Error("Invalid Element")}function cm(c){return c&&!1===c.newWindow?"_self":"_blank"}var a_=function(c){var h=this;this.pending={},this.port=c,this.port.onmessage=function(i){if(i.data.payload.__reqid){var p=i.data.payload.__reqid,I=i.data.payload.__success;if(h.pending[p]){if(delete i.data.payload.__reqid,delete i.data.payload.__success,I){var N=0===Object.keys(i.data.payload).length&&i.data.payload.constructor===Object?null:i.data.payload;h.pending[p].resolve(N)}else h.pending[p].reject(i.data.payload.error?i.data.type+": "+i.data.payload.error:i.data.type);delete h.pending[p]}}}};a_.prototype.request=function(c){var h=this,i=s_();return new Promise(function(p,I){h.pending[i]={resolve:p,reject:I},c.payload.__reqid=i,h.port.postMessage(c)})};var l_=function(c,h){var i=this;this.rdc=new a_(c),this.preview={},Object.defineProperty(this.preview,"origin",{value:h.previewOrigin,writable:!1}),this.editor={openFile:function(p){return i.rdc.request({type:"SDK_OPEN_FILE",payload:{path:p}})}}};l_.prototype.applyFsDiff=function(c){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:c})},l_.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},l_.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var um=[],Nw=function(c){var h=this;this.id=s_(),this.element=c,this.pending=new Promise(function(i,p){var I=function(yt){yt.data.action&&"SDK_INIT_SUCCESS"===yt.data.action&&yt.data.id===h.id&&(h.vm=new l_(yt.ports[0],yt.data.payload),i(h.vm),ce())},N=function(){h.element.contentWindow&&h.element.contentWindow.postMessage({action:"SDK_INIT",id:h.id},"*")};function ce(){window.clearInterval(Ge),window.removeEventListener("message",I)}window.addEventListener("message",I),N();var Ee=0,Ge=window.setInterval(function(){if(h.vm)ce();else{if(Ee>=20)return ce(),p("Timeout: Unable to establish a connection with the StackBlitz VM"),void um.forEach(function(yt,zt){yt.id===h.id&&um.splice(zt,1)});Ee++,N()}},500)}),um.push(this)},Op=["angular-cli","create-react-app","javascript","node","polymer","html","typescript","vue"];function xh(c,h){var i=document.createElement("input");return i.type="hidden",i.name=c,i.value=h,i}function zw(c){-1===Op.indexOf(c.template)&&console.warn("Unsupported project template, must be one of: "+Op.join(", "));var h=document.createElement("form");return h.method="POST",h.setAttribute("style","display:none!important;"),h.appendChild(xh("project[title]",c.title)),h.appendChild(xh("project[description]",c.description)),h.appendChild(xh("project[template]",c.template)),c.dependencies&&h.appendChild(xh("project[dependencies]",JSON.stringify(c.dependencies))),c.settings&&h.appendChild(xh("project[settings]",JSON.stringify(c.settings))),Object.keys(c.files).forEach(function(i){h.appendChild(xh("project[files]["+i+"]",c.files[i]))}),h}var dm={connect:function(c){if(!c||!c.contentWindow)return Promise.reject("Provided element is not an iframe.");var h=function(c){var h=c instanceof Element?"element":"id";return um.find(function(p){return p[h]===c})||null}(c);return h?h.pending:new Nw(c).pending},openGithubProject:function(c,h){window.open(hd(h)+"/github/"+c+pd(h),cm(h))},openProject:function(c,h){!function nC(c,h){var i=zw(c);i.action=hd(h)+"/run"+pd(h),i.target=cm(h),document.body.appendChild(i),i.submit(),document.body.removeChild(i)}(c,h)},openProjectId:function(c,h){window.open(hd(h)+"/edit/"+c+pd(h),cm(h))},embedGithubProject:function(c,h,i){var p=Pp(c),I=document.createElement("iframe");return I.src=hd(i)+"/github/"+h+pd(i),v0(p,I,i),dm.connect(I)},embedProject:function(c,h,i){var p=Pp(c),I=function tC(c,h){var i=zw(c);return i.action=hd(h)+"/run"+pd(h),i.id="sb","<html><head><title></title></head><body>"+i.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(h,i),N=document.createElement("iframe");return v0(p,N,i),N.contentDocument&&N.contentDocument.write(I),dm.connect(N)},embedProjectId:function(c,h,i){var p=Pp(c),I=document.createElement("iframe");return I.src=hd(i)+"/edit/"+h+pd(i),v0(p,I,i),dm.connect(I)}};const Vw=dm;var c_=V(4128),Uw=V(9646),jw=V(2076),hm=V(3151),b0=V(8746);function iC(c){return c.replace(/(^\w|-\w)/g,Jl)}function Jl(c){return c.replace(/-/,"").toUpperCase()}var kp=V(529);const x0="app/demo/examples/";let Tl=(()=>{class c{constructor(i){this.http=i,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(i){let p=this.fileCache.get(i);return p||(p=this.http.get(`${x0}${i}.component.ts`,{responseType:"text"}).pipe((0,ni.w)(I=>this.loadAdditionnalFilesIfNecessary(I)),(0,hm.d)(1)),this.fileCache.set(i,p),p)}loadAdditionnalFilesIfNecessary(i){const p=/'\.\/([\w-.]+\.\w+)'/g;let I;const N=[],ce={"src/demo.ts":i};for(;I=p.exec(i);)N.push(this.loadFile(I[1]));return N.length?(0,c_.D)(N).pipe((0,Vr.U)(Ee=>({...Object.assign({},...Ee),...ce}))):(0,Uw.of)(ce)}loadFile(i){let p=this.fileCache.get(i);return p||(p=this.http.get(`${x0}${i}`,{responseType:"text"}).pipe((0,Vr.U)(I=>({[`src/${i}`]:I})),(0,hm.d)(1)),this.fileCache.set(i,p),p)}}return c.\u0275fac=function(i){return new(i||c)(l.LFG(kp.eN))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function $w(c,h){if(1&c&&(l.O4$(),l._UZ(0,"circle",4)),2&c){const i=l.oxw(),p=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+i._spinnerAnimationLabel)("stroke-dashoffset",i._getStrokeDashOffset(),"px")("stroke-dasharray",i._getStrokeCircumference(),"px")("stroke-width",i._getCircleStrokeWidth(),"%")("transform-origin",i._getCircleTransformOrigin(p)),l.uIk("r",i._getCircleRadius())}}function u_(c,h){if(1&c&&(l.O4$(),l._UZ(0,"circle",4)),2&c){const i=l.oxw(),p=l.MAs(1);l.Udp("stroke-dashoffset",i._getStrokeDashOffset(),"px")("stroke-dasharray",i._getStrokeCircumference(),"px")("stroke-width",i._getCircleStrokeWidth(),"%")("transform-origin",i._getCircleTransformOrigin(p)),l.uIk("r",i._getCircleRadius())}}const h_=(0,ii.pj)(class{constructor(c){this._elementRef=c}},"primary"),w0=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function C0(){return{diameter:100}}});class Sc extends h_{constructor(h,i,p,I,N,ce,Ee,Ge){super(h),this._document=p,this._diameter=100,this._value=0,this._resizeSubscription=be.w0.EMPTY,this.mode="determinate";const yt=Sc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),yt.has(p.head)||yt.set(p.head,new Set([100])),this._noopAnimations="NoopAnimations"===I&&!!N&&!N._forceAnimations,"mat-spinner"===h.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),N&&(N.color&&(this.color=this.defaultColor=N.color),N.diameter&&(this.diameter=N.diameter),N.strokeWidth&&(this.strokeWidth=N.strokeWidth)),i.isBrowser&&i.SAFARI&&Ee&&ce&&Ge&&(this._resizeSubscription=Ee.change(150).subscribe(()=>{"indeterminate"===this.mode&&Ge.run(()=>ce.markForCheck())}))}get diameter(){return this._diameter}set diameter(h){this._diameter=(0,Ni.su)(h),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(h){this._strokeWidth=(0,Ni.su)(h)}get value(){return"determinate"===this.mode?this._value:0}set value(h){this._value=Math.max(0,Math.min(100,(0,Ni.su)(h)))}ngOnInit(){const h=this._elementRef.nativeElement;this._styleRoot=(0,ja.kV)(h)||this._document.head,this._attachStyleNode(),h.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const h=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${h} ${h}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(h){const i=50*(h.currentScale??1);return`${i}% ${i}%`}_attachStyleNode(){const h=this._styleRoot,i=this._diameter,p=Sc._diameters;let I=p.get(h);if(!I||!I.has(i)){const N=this._document.createElement("style");N.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),N.textContent=this._getAnimationText(),h.appendChild(N),I||(I=new Set,p.set(h,I)),I.add(i)}}_getAnimationText(){const h=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*h).replace(/END_VALUE/g,""+.2*h).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Sc._diameters=new WeakMap,Sc.\u0275fac=function(h){return new(h||Sc)(l.Y36(l.SBq),l.Y36(ja.t4),l.Y36(ye.K0,8),l.Y36(l.QbO,8),l.Y36(w0),l.Y36(l.sBO),l.Y36(Es.rL),l.Y36(l.R0b))},Sc.\u0275cmp=l.Xpm({type:Sc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(h,i){2&h&&(l.uIk("aria-valuemin","determinate"===i.mode?0:null)("aria-valuemax","determinate"===i.mode?100:null)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),l.Udp("width",i.diameter,"px")("height",i.diameter,"px"),l.ekj("_mat-animation-noopable",i._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(h,i){1&h&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,$w,1,11,"circle",2),l.YNc(3,u_,1,9,"circle",3),l.qZA()),2&h&&(l.Udp("width",i.diameter,"px")("height",i.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===i.mode),l.uIk("viewBox",i._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},dependencies:[ye.RF,ye.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let E0=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[ii.BQ,ye.ez,ii.BQ]}),c})();const D0=["container"];function Ww(c,h){1&c&&(l.TgZ(0,"div",2),l._UZ(1,"mat-spinner")(2,"div"),l.qZA())}let p_=(()=>{class c{constructor(i,p,I,N,ce){this.zone=i,this.activatedRoute=p,this.demoFileLoaderService=I,this.http=N,this.ChangeDetectorRef=ce,this.loading=!0,this.projectbase$=(0,c_.D)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe((0,hm.d)(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,rr.b)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,ni.w)(i=>(0,c_.D)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(i.demoUrl),(0,Uw.of)(i.demoUrl)])),(0,ni.w)(([i,p,I])=>(0,jw.D)(this.openExample(i,p,I)).pipe((0,b0.x)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(i,p,I){var N=this;return Zr(function*(){if(N.vm)return void(yield N.vm.applyFsDiff({create:p,destroy:[]}));const ce=function Hw(c,h,i){return{files:{"src/main.ts":c[0].replace(/###/g,iC(i)+"Component"),"angular.json":c[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n",...h},title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","maplibre-gl":"*","@maplibre/ngx-maplibre-gl":"*","@angular/cdk":"^13","@angular/material":"^13","@angular/animations":"^13","@angular/forms":"^13","@angular/common":"^13","@angular/compiler":"^13","@angular/core":"^13","@angular/platform-browser":"^13","@angular/platform-browser-dynamic":"^13","@angular/router":"^13",url:"*",querystring:"*",events:"*","@types/supercluster":"*","@types/geojson":"*"}}}(i,p,I);yield N.zone.runOutsideAngular(Zr(function*(){N.vm=yield Vw.embedProject(N.stackblitzContainer.nativeElement,ce,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(l.R0b),l.Y36(H.gz),l.Y36(Tl),l.Y36(kp.eN),l.Y36(l.sBO))},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],viewQuery:function(i,p){if(1&i&&l.Gf(D0,5),2&i){let I;l.iGM(I=l.CRH())&&(p.stackblitzContainer=I.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(i,p){1&i&&(l._UZ(0,"div",null,0),l.YNc(2,Ww,3,0,"div",1)),2&i&&(l.xp6(2),l.Q6J("ngIf",p.loading))},dependencies:[ye.O5,Sc],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),c})();var ai=(()=>(function(c){c.STYLES="Styles",c.LAYERS="Layers",c.SOURCES="Sources",c.USER_INTERACTION="User interaction",c.CAMERA="Camera",c.CONTROLS_AND_OVERLAYS="Controls and overlays",c.TERRAIN="3D Terrain"}(ai||(ai={})),ai))();const pm=[{path:"",component:my,children:[{path:"edit/:demoUrl",component:p_,canActivate:[Lw]},{path:"display-map",component:_h,data:{label:"Display a map",cat:ai.STYLES}},{path:"custom-style-id",component:Wb,data:{label:"Display a map with a custom style",cat:ai.STYLES}},{path:"set-style",component:o0,data:{label:"Change a map's style",cat:ai.STYLES}},{path:"satellite-map",component:Xv,data:{label:"Display a satellite map",cat:ai.STYLES}},{path:"add-image-generated",component:b1,data:{label:"Add a generated icon to the map",cat:ai.LAYERS}},{path:"add-image",component:Py,data:{label:"Add an icon to the map",cat:ai.LAYERS}},{path:"toggle-layers",component:K1,data:{label:"Show and hide layers",cat:ai.LAYERS}},{path:"3d-buildings",component:bb,data:{label:"Display 3d buildings",cat:ai.LAYERS}},{path:"cluster",component:Ky,data:{label:"Create and style clusters",cat:ai.LAYERS}},{path:"heatmap",component:gv,data:{label:"Create a heatmap layer",cat:ai.LAYERS}},{path:"geojson-line",component:pv,data:{label:"Add a GeoJSON line",cat:ai.LAYERS}},{path:"ngx-geojson-line",component:dw,data:{label:"[NGX] Add a GeoJSON line",cat:ai.LAYERS}},{path:"custom-marker-icons",component:Qy,data:{label:"Add custom icons with Markers",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:Tp,data:{label:"[NGX] Add custom icons with Markers",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:vv,data:{label:"Update a feature in realtime",cat:ai.SOURCES}},{path:"live-update-image-source",component:zx,data:{label:"Update an image source in realtime",cat:ai.SOURCES}},{path:"popup",component:yw,data:{label:"Display a popup",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:Cw,data:{label:"Attach a popup to a marker instance",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:rx,data:{label:"View a fullscreen map",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:yh,data:{label:"Display map navigation controls",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:Lg,data:{label:"Locate the user",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:Oy,data:{label:"Change the default position for attribution",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:rm,data:{label:"[NGX] Show scale information",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:ow,data:{label:"[NGX] Add a custom control",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:Ix,data:{label:"Display a non-interactive map",cat:ai.USER_INTERACTION}},{path:"language-switch",component:Ox,data:{label:"Change a map's language",cat:ai.USER_INTERACTION}},{path:"center-on-symbol",component:Fy,data:{label:"Center the map on a clicked symbol",cat:ai.USER_INTERACTION}},{path:"ngx-drag-a-point",component:lw,data:{label:"[NGX] Create a draggable point",cat:ai.USER_INTERACTION}},{path:"drag-a-marker",component:wp,data:{label:"Create a draggable marker",cat:ai.USER_INTERACTION}},{path:"hover-styles",component:_v,data:{label:"Create a hover effect",cat:ai.USER_INTERACTION}},{path:"popup-on-click",component:gw,data:{label:"Display a popup on click",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:am,data:{label:"Fit to the bounds of a LineString",cat:ai.USER_INTERACTION}},{path:"cluster-html",component:Lb,data:{label:"Display HTML clusters with custom properties",cat:ai.LAYERS}},{path:"ngx-cluster-html",component:z1,data:{label:"[NGX] Display HTML clusters with custom properties",cat:ai.LAYERS}},{path:"polygon-popup-on-click",component:V1,data:{label:"Show polygon information on click",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:xp,data:{label:"Generate and add a missing icon to the map",cat:ai.STYLES}},{path:"custom-attribution",component:dd,data:{label:"Add custom attributions",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:gh,data:{label:"Add custom localization for controls",cat:ai.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:Bg,data:{label:"Marker alignment options",cat:ai.CAMERA}},{path:"terrain-style",component:Pw,data:{label:"Initialize 3D Terrain using style",cat:ai.TERRAIN}},{path:"terrain-control",component:pw,data:{label:"Terrain Control",cat:ai.TERRAIN}},{path:"terrain",component:Ow,data:{label:"[NGX] Initialize 3D Terrain declaratively",cat:ai.TERRAIN}},{path:"**",redirectTo:"display-map"}]}],f_=function(){return[2]},qw=[{path:"",component:(()=>{class c{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:i=>i}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const i=this.center[0];0===i?this.center=[90,0]:90===i?this.center=[180,0]:180===i?this.center=[-90,0]:-90===i&&(this.center=[0,0])}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"zoom","center","centerWithPanTo","panToOptions","interactive","mapLoad","moveEnd"],[1,"main"],["svgIcon","ngx-maplibre-gl-red",1,"logo"]],template:function(i,p){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(){return p.moveCenter()})("moveEnd",function(){return p.moveCenter()}),l.qZA(),l.TgZ(1,"div",1),l._UZ(2,"mat-icon",2),l.TgZ(3,"h1"),l._uU(4,"Angular binding of maplibre-gl-js"),l.qZA()()),2&i&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,f_))("center",p.center)("centerWithPanTo",!0)("panToOptions",p.panToOptions)("interactive",!1))},dependencies:[_i,He.Hw],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]}),c})(),pathMatch:"full"}],Kw=[{path:"",component:V(6449).$,children:[{path:"demo",children:pm},...qw,{path:"doc",loadChildren:()=>V.e(335).then(V.bind(V,335)).then(c=>c.DocModule)}]},{path:"**",redirectTo:""}];let Yw=(()=>{class c{constructor(i,p){i.addSvgIcon("ngx-maplibre-gl",p.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl.svg")),i.addSvgIcon("ngx-maplibre-gl-red",p.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl-red.svg")),i.addSvgIcon("github",p.bypassSecurityTrustResourceUrl("assets/github.svg"))}}return c.\u0275fac=function(i){return new(i||c)(l.LFG(He.jv),l.LFG(T.H7))},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[T.b2,Fa,He.Ps,H.Bz.forRoot(Kw,{relativeLinkResolution:"legacy"}),Ka,Rr.x]}),c})(),Xw=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[Lw],imports:[H.Bz,kp.JF,ye.ez,mo.u5,Ka,Rr.x,sm,kw,Ec.ot,db,tv,E0,uh,He.Ps,_g,Sp,ly]}),c})(),Jw=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[Ka,He.Ps]}),c})(),M0=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.oAB({type:c,bootstrap:[g]}),c.\u0275inj=l.cJS({imports:[H.Bz,Yw,Jw,Xw]}),c})();(0,l.G48)(),T.q6().bootstrapModule(M0).catch(c=>console.log(c))},1135:(cn,ft,V)=>{"use strict";V.d(ft,{X:()=>l});var T=V(7579);class l extends T.x{constructor(g){super(),this._value=g}get value(){return this.getValue()}_subscribe(g){const He=super._subscribe(g);return!He.closed&&g.next(this._value),He}getValue(){const{hasError:g,thrownError:He,_value:he}=this;if(g)throw He;return this._throwIfClosed(),he}next(g){super.next(this._value=g)}}},9751:(cn,ft,V)=>{"use strict";V.d(ft,{y:()=>Ie});var T=V(930),l=V(727),H=V(8822),g=V(9635),He=V(2416),he=V(576),$e=V(2806);let Ie=(()=>{class Re{constructor(We){We&&(this._subscribe=We)}lift(We){const je=new Re;return je.source=this,je.operator=We,je}subscribe(We,je,Ct){const wt=function nt(Re){return Re&&Re instanceof T.Lv||function Ue(Re){return Re&&(0,he.m)(Re.next)&&(0,he.m)(Re.error)&&(0,he.m)(Re.complete)}(Re)&&(0,l.Nn)(Re)}(We)?We:new T.Hp(We,je,Ct);return(0,$e.x)(()=>{const{operator:Tt,source:an}=this;wt.add(Tt?Tt.call(wt,an):an?this._subscribe(wt):this._trySubscribe(wt))}),wt}_trySubscribe(We){try{return this._subscribe(We)}catch(je){We.error(je)}}forEach(We,je){return new(je=Be(je))((Ct,wt)=>{const Tt=new T.Hp({next:an=>{try{We(an)}catch(Xt){wt(Xt),Tt.unsubscribe()}},error:wt,complete:Ct});this.subscribe(Tt)})}_subscribe(We){var je;return null===(je=this.source)||void 0===je?void 0:je.subscribe(We)}[H.L](){return this}pipe(...We){return(0,g.U)(We)(this)}toPromise(We){return new(We=Be(We))((je,Ct)=>{let wt;this.subscribe(Tt=>wt=Tt,Tt=>Ct(Tt),()=>je(wt))})}}return Re.create=it=>new Re(it),Re})();function Be(Re){var it;return null!==(it=Re??He.v.Promise)&&void 0!==it?it:Promise}},7579:(cn,ft,V)=>{"use strict";V.d(ft,{x:()=>$e});var T=V(9751),l=V(727);const g=(0,V(3888).d)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=V(8737),he=V(2806);let $e=(()=>{class Be extends T.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(nt){const Re=new Ie(this,this);return Re.operator=nt,Re}_throwIfClosed(){if(this.closed)throw new g}next(nt){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Re of this.currentObservers)Re.next(nt)}})}error(nt){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=nt;const{observers:Re}=this;for(;Re.length;)Re.shift().error(nt)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:nt}=this;for(;nt.length;)nt.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var nt;return(null===(nt=this.observers)||void 0===nt?void 0:nt.length)>0}_trySubscribe(nt){return this._throwIfClosed(),super._trySubscribe(nt)}_subscribe(nt){return this._throwIfClosed(),this._checkFinalizedStatuses(nt),this._innerSubscribe(nt)}_innerSubscribe(nt){const{hasError:Re,isStopped:it,observers:We}=this;return Re||it?l.Lc:(this.currentObservers=null,We.push(nt),new l.w0(()=>{this.currentObservers=null,(0,He.P)(We,nt)}))}_checkFinalizedStatuses(nt){const{hasError:Re,thrownError:it,isStopped:We}=this;Re?nt.error(it):We&&nt.complete()}asObservable(){const nt=new T.y;return nt.source=this,nt}}return Be.create=(Ue,nt)=>new Ie(Ue,nt),Be})();class Ie extends $e{constructor(Ue,nt){super(),this.destination=Ue,this.source=nt}next(Ue){var nt,Re;null===(Re=null===(nt=this.destination)||void 0===nt?void 0:nt.next)||void 0===Re||Re.call(nt,Ue)}error(Ue){var nt,Re;null===(Re=null===(nt=this.destination)||void 0===nt?void 0:nt.error)||void 0===Re||Re.call(nt,Ue)}complete(){var Ue,nt;null===(nt=null===(Ue=this.destination)||void 0===Ue?void 0:Ue.complete)||void 0===nt||nt.call(Ue)}_subscribe(Ue){var nt,Re;return null!==(Re=null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(Ue))&&void 0!==Re?Re:l.Lc}}},930:(cn,ft,V)=>{"use strict";V.d(ft,{Hp:()=>Ct,Lv:()=>Re});var T=V(576),l=V(727),H=V(2416),g=V(7849),He=V(5032);const he=Be("C",void 0,void 0);function Be(Dt,Oe,Ne){return{kind:Dt,value:Oe,error:Ne}}var Ue=V(3410),nt=V(2806);class Re extends l.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,l.Nn)(Oe)&&Oe.add(this)):this.destination=Xt}static create(Oe,Ne,Ot){return new Ct(Oe,Ne,Ot)}next(Oe){this.isStopped?an(function Ie(Dt){return Be("N",Dt,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?an(function $e(Dt){return Be("E",void 0,Dt)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?an(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const it=Function.prototype.bind;function We(Dt,Oe){return it.call(Dt,Oe)}class je{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(Oe)}catch(Ot){wt(Ot)}}error(Oe){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(Oe)}catch(Ot){wt(Ot)}else wt(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(Ne){wt(Ne)}}}class Ct extends Re{constructor(Oe,Ne,Ot){let kt;if(super(),(0,T.m)(Oe)||!Oe)kt={next:Oe??void 0,error:Ne??void 0,complete:Ot??void 0};else{let Ft;this&&H.v.useDeprecatedNextContext?(Ft=Object.create(Oe),Ft.unsubscribe=()=>this.unsubscribe(),kt={next:Oe.next&&We(Oe.next,Ft),error:Oe.error&&We(Oe.error,Ft),complete:Oe.complete&&We(Oe.complete,Ft)}):kt=Oe}this.destination=new je(kt)}}function wt(Dt){H.v.useDeprecatedSynchronousErrorHandling?(0,nt.O)(Dt):(0,g.h)(Dt)}function an(Dt,Oe){const{onStoppedNotification:Ne}=H.v;Ne&&Ue.z.setTimeout(()=>Ne(Dt,Oe))}const Xt={closed:!0,next:He.Z,error:function Tt(Dt){throw Dt},complete:He.Z}},727:(cn,ft,V)=>{"use strict";V.d(ft,{Lc:()=>he,w0:()=>He,Nn:()=>$e});var T=V(576);const H=(0,V(3888).d)(Be=>function(nt){Be(this),this.message=nt?`${nt.length} errors occurred during unsubscription:\n${nt.map((Re,it)=>`${it+1}) ${Re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=nt});var g=V(8737);class He{constructor(Ue){this.initialTeardown=Ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ue;if(!this.closed){this.closed=!0;const{_parentage:nt}=this;if(nt)if(this._parentage=null,Array.isArray(nt))for(const We of nt)We.remove(this);else nt.remove(this);const{initialTeardown:Re}=this;if((0,T.m)(Re))try{Re()}catch(We){Ue=We instanceof H?We.errors:[We]}const{_finalizers:it}=this;if(it){this._finalizers=null;for(const We of it)try{Ie(We)}catch(je){Ue=Ue??[],je instanceof H?Ue=[...Ue,...je.errors]:Ue.push(je)}}if(Ue)throw new H(Ue)}}add(Ue){var nt;if(Ue&&Ue!==this)if(this.closed)Ie(Ue);else{if(Ue instanceof He){if(Ue.closed||Ue._hasParent(this))return;Ue._addParent(this)}(this._finalizers=null!==(nt=this._finalizers)&&void 0!==nt?nt:[]).push(Ue)}}_hasParent(Ue){const{_parentage:nt}=this;return nt===Ue||Array.isArray(nt)&&nt.includes(Ue)}_addParent(Ue){const{_parentage:nt}=this;this._parentage=Array.isArray(nt)?(nt.push(Ue),nt):nt?[nt,Ue]:Ue}_removeParent(Ue){const{_parentage:nt}=this;nt===Ue?this._parentage=null:Array.isArray(nt)&&(0,g.P)(nt,Ue)}remove(Ue){const{_finalizers:nt}=this;nt&&(0,g.P)(nt,Ue),Ue instanceof He&&Ue._removeParent(this)}}He.EMPTY=(()=>{const Be=new He;return Be.closed=!0,Be})();const he=He.EMPTY;function $e(Be){return Be instanceof He||Be&&"closed"in Be&&(0,T.m)(Be.remove)&&(0,T.m)(Be.add)&&(0,T.m)(Be.unsubscribe)}function Ie(Be){(0,T.m)(Be)?Be():Be.unsubscribe()}},2416:(cn,ft,V)=>{"use strict";V.d(ft,{v:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(cn,ft,V)=>{"use strict";V.d(ft,{a:()=>Ue});var T=V(9751),l=V(4742),H=V(2076),g=V(4671),He=V(3268),he=V(3269),$e=V(1810),Ie=V(5403),Be=V(9672);function Ue(...it){const We=(0,he.yG)(it),je=(0,he.jO)(it),{args:Ct,keys:wt}=(0,l.D)(it);if(0===Ct.length)return(0,H.D)([],We);const Tt=new T.y(function nt(it,We,je=g.y){return Ct=>{Re(We,()=>{const{length:wt}=it,Tt=new Array(wt);let an=wt,Xt=wt;for(let Dt=0;Dt<wt;Dt++)Re(We,()=>{const Oe=(0,H.D)(it[Dt],We);let Ne=!1;Oe.subscribe((0,Ie.x)(Ct,Ot=>{Tt[Dt]=Ot,Ne||(Ne=!0,Xt--),Xt||Ct.next(je(Tt.slice()))},()=>{--an||Ct.complete()}))},Ct)},Ct)}}(Ct,We,wt?an=>(0,$e.n)(wt,an):g.y));return je?Tt.pipe((0,He.Z)(je)):Tt}function Re(it,We,je){it?(0,Be.f)(je,it,We):We()}},7272:(cn,ft,V)=>{"use strict";V.d(ft,{z:()=>He});var T=V(8189),H=V(3269),g=V(2076);function He(...he){return function l(){return(0,T.J)(1)}()((0,g.D)(he,(0,H.yG)(he)))}},9770:(cn,ft,V)=>{"use strict";V.d(ft,{P:()=>H});var T=V(9751),l=V(8421);function H(g){return new T.y(He=>{(0,l.Xf)(g()).subscribe(He)})}},515:(cn,ft,V)=>{"use strict";V.d(ft,{E:()=>l});const l=new(V(9751).y)(He=>He.complete())},4128:(cn,ft,V)=>{"use strict";V.d(ft,{D:()=>Ie});var T=V(9751),l=V(4742),H=V(8421),g=V(3269),He=V(5403),he=V(3268),$e=V(1810);function Ie(...Be){const Ue=(0,g.jO)(Be),{args:nt,keys:Re}=(0,l.D)(Be),it=new T.y(We=>{const{length:je}=nt;if(!je)return void We.complete();const Ct=new Array(je);let wt=je,Tt=je;for(let an=0;an<je;an++){let Xt=!1;(0,H.Xf)(nt[an]).subscribe((0,He.x)(We,Dt=>{Xt||(Xt=!0,Tt--),Ct[an]=Dt},()=>wt--,void 0,()=>{(!wt||!Xt)&&(Tt||We.next(Re?(0,$e.n)(Re,Ct):Ct),We.complete())}))}});return Ue?it.pipe((0,he.Z)(Ue)):it}},2076:(cn,ft,V)=>{"use strict";V.d(ft,{D:()=>Ot});var T=V(8421),l=V(9672),H=V(4482),g=V(5403);function He(kt,Ft=0){return(0,H.e)((Gt,lt)=>{Gt.subscribe((0,g.x)(lt,dt=>(0,l.f)(lt,kt,()=>lt.next(dt),Ft),()=>(0,l.f)(lt,kt,()=>lt.complete(),Ft),dt=>(0,l.f)(lt,kt,()=>lt.error(dt),Ft)))})}function he(kt,Ft=0){return(0,H.e)((Gt,lt)=>{lt.add(kt.schedule(()=>Gt.subscribe(lt),Ft))})}var Be=V(9751),nt=V(2202),Re=V(576);function We(kt,Ft){if(!kt)throw new Error("Iterable cannot be null");return new Be.y(Gt=>{(0,l.f)(Gt,Ft,()=>{const lt=kt[Symbol.asyncIterator]();(0,l.f)(Gt,Ft,()=>{lt.next().then(dt=>{dt.done?Gt.complete():Gt.next(dt.value)})},0,!0)})})}var je=V(3670),Ct=V(8239),wt=V(1144),Tt=V(6495),an=V(2206),Xt=V(4532),Dt=V(3260);function Ot(kt,Ft){return Ft?function Ne(kt,Ft){if(null!=kt){if((0,je.c)(kt))return function $e(kt,Ft){return(0,T.Xf)(kt).pipe(he(Ft),He(Ft))}(kt,Ft);if((0,wt.z)(kt))return function Ue(kt,Ft){return new Be.y(Gt=>{let lt=0;return Ft.schedule(function(){lt===kt.length?Gt.complete():(Gt.next(kt[lt++]),Gt.closed||this.schedule())})})}(kt,Ft);if((0,Ct.t)(kt))return function Ie(kt,Ft){return(0,T.Xf)(kt).pipe(he(Ft),He(Ft))}(kt,Ft);if((0,an.D)(kt))return We(kt,Ft);if((0,Tt.T)(kt))return function it(kt,Ft){return new Be.y(Gt=>{let lt;return(0,l.f)(Gt,Ft,()=>{lt=kt[nt.h](),(0,l.f)(Gt,Ft,()=>{let dt,St;try{({value:dt,done:St}=lt.next())}catch(Et){return void Gt.error(Et)}St?Gt.complete():Gt.next(dt)},0,!0)}),()=>(0,Re.m)(lt?.return)&&lt.return()})}(kt,Ft);if((0,Dt.L)(kt))return function Oe(kt,Ft){return We((0,Dt.Q)(kt),Ft)}(kt,Ft)}throw(0,Xt.z)(kt)}(kt,Ft):(0,T.Xf)(kt)}},4968:(cn,ft,V)=>{"use strict";V.d(ft,{R:()=>Ue});var T=V(8421),l=V(9751),H=V(5577),g=V(1144),He=V(576),he=V(3268);const $e=["addListener","removeListener"],Ie=["addEventListener","removeEventListener"],Be=["on","off"];function Ue(je,Ct,wt,Tt){if((0,He.m)(wt)&&(Tt=wt,wt=void 0),Tt)return Ue(je,Ct,wt).pipe((0,he.Z)(Tt));const[an,Xt]=function We(je){return(0,He.m)(je.addEventListener)&&(0,He.m)(je.removeEventListener)}(je)?Ie.map(Dt=>Oe=>je[Dt](Ct,Oe,wt)):function Re(je){return(0,He.m)(je.addListener)&&(0,He.m)(je.removeListener)}(je)?$e.map(nt(je,Ct)):function it(je){return(0,He.m)(je.on)&&(0,He.m)(je.off)}(je)?Be.map(nt(je,Ct)):[];if(!an&&(0,g.z)(je))return(0,H.z)(Dt=>Ue(Dt,Ct,wt))((0,T.Xf)(je));if(!an)throw new TypeError("Invalid event target");return new l.y(Dt=>{const Oe=(...Ne)=>Dt.next(1<Ne.length?Ne:Ne[0]);return an(Oe),()=>Xt(Oe)})}function nt(je,Ct){return wt=>Tt=>je[wt](Ct,Tt)}},8421:(cn,ft,V)=>{"use strict";V.d(ft,{Xf:()=>it});var T=V(655),l=V(1144),H=V(8239),g=V(9751),He=V(3670),he=V(2206),$e=V(4532),Ie=V(6495),Be=V(3260),Ue=V(576),nt=V(7849),Re=V(8822);function it(Dt){if(Dt instanceof g.y)return Dt;if(null!=Dt){if((0,He.c)(Dt))return function We(Dt){return new g.y(Oe=>{const Ne=Dt[Re.L]();if((0,Ue.m)(Ne.subscribe))return Ne.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Dt);if((0,l.z)(Dt))return function je(Dt){return new g.y(Oe=>{for(let Ne=0;Ne<Dt.length&&!Oe.closed;Ne++)Oe.next(Dt[Ne]);Oe.complete()})}(Dt);if((0,H.t)(Dt))return function Ct(Dt){return new g.y(Oe=>{Dt.then(Ne=>{Oe.closed||(Oe.next(Ne),Oe.complete())},Ne=>Oe.error(Ne)).then(null,nt.h)})}(Dt);if((0,he.D)(Dt))return Tt(Dt);if((0,Ie.T)(Dt))return function wt(Dt){return new g.y(Oe=>{for(const Ne of Dt)if(Oe.next(Ne),Oe.closed)return;Oe.complete()})}(Dt);if((0,Be.L)(Dt))return function an(Dt){return Tt((0,Be.Q)(Dt))}(Dt)}throw(0,$e.z)(Dt)}function Tt(Dt){return new g.y(Oe=>{(function Xt(Dt,Oe){var Ne,Ot,kt,Ft;return(0,T.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,T.KL)(Dt);!(Ot=yield Ne.next()).done;)if(Oe.next(Ot.value),Oe.closed)return}catch(Gt){kt={error:Gt}}finally{try{Ot&&!Ot.done&&(Ft=Ne.return)&&(yield Ft.call(Ne))}finally{if(kt)throw kt.error}}Oe.complete()})})(Dt,Oe).catch(Ne=>Oe.error(Ne))})}},6451:(cn,ft,V)=>{"use strict";V.d(ft,{T:()=>he});var T=V(8189),l=V(8421),H=V(515),g=V(3269),He=V(2076);function he(...$e){const Ie=(0,g.yG)($e),Be=(0,g._6)($e,1/0),Ue=$e;return Ue.length?1===Ue.length?(0,l.Xf)(Ue[0]):(0,T.J)(Be)((0,He.D)(Ue,Ie)):H.E}},9646:(cn,ft,V)=>{"use strict";V.d(ft,{of:()=>H});var T=V(3269),l=V(2076);function H(...g){const He=(0,T.yG)(g);return(0,l.D)(g,He)}},2843:(cn,ft,V)=>{"use strict";V.d(ft,{_:()=>H});var T=V(9751),l=V(576);function H(g,He){const he=(0,l.m)(g)?g:()=>g,$e=Ie=>Ie.error(he());return new T.y(He?Ie=>He.schedule($e,0,Ie):$e)}},5963:(cn,ft,V)=>{"use strict";V.d(ft,{H:()=>He});var T=V(9751),l=V(4986),H=V(3532);function He(he=0,$e,Ie=l.P){let Be=-1;return null!=$e&&((0,H.K)($e)?Ie=$e:Be=$e),new T.y(Ue=>{let nt=function g(he){return he instanceof Date&&!isNaN(he)}(he)?+he-Ie.now():he;nt<0&&(nt=0);let Re=0;return Ie.schedule(function(){Ue.closed||(Ue.next(Re++),0<=Be?this.schedule(void 0,Be):Ue.complete())},nt)})}},5403:(cn,ft,V)=>{"use strict";V.d(ft,{x:()=>l});var T=V(930);function l(g,He,he,$e,Ie){return new H(g,He,he,$e,Ie)}class H extends T.Lv{constructor(He,he,$e,Ie,Be,Ue){super(He),this.onFinalize=Be,this.shouldUnsubscribe=Ue,this._next=he?function(nt){try{he(nt)}catch(Re){He.error(Re)}}:super._next,this._error=Ie?function(nt){try{Ie(nt)}catch(Re){He.error(Re)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(nt){He.error(nt)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var He;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(He=this.onFinalize)||void 0===He||He.call(this))}}}},262:(cn,ft,V)=>{"use strict";V.d(ft,{K:()=>g});var T=V(8421),l=V(5403),H=V(4482);function g(He){return(0,H.e)((he,$e)=>{let Ue,Ie=null,Be=!1;Ie=he.subscribe((0,l.x)($e,void 0,void 0,nt=>{Ue=(0,T.Xf)(He(nt,g(He)(he))),Ie?(Ie.unsubscribe(),Ie=null,Ue.subscribe($e)):Be=!0})),Be&&(Ie.unsubscribe(),Ie=null,Ue.subscribe($e))})}},4351:(cn,ft,V)=>{"use strict";V.d(ft,{b:()=>H});var T=V(5577),l=V(576);function H(g,He){return(0,l.m)(He)?(0,T.z)(g,He,1):(0,T.z)(g,1)}},8372:(cn,ft,V)=>{"use strict";V.d(ft,{b:()=>g});var T=V(4986),l=V(4482),H=V(5403);function g(He,he=T.z){return(0,l.e)(($e,Ie)=>{let Be=null,Ue=null,nt=null;const Re=()=>{if(Be){Be.unsubscribe(),Be=null;const We=Ue;Ue=null,Ie.next(We)}};function it(){const We=nt+He,je=he.now();if(je<We)return Be=this.schedule(void 0,We-je),void Ie.add(Be);Re()}$e.subscribe((0,H.x)(Ie,We=>{Ue=We,nt=he.now(),Be||(Be=he.schedule(it,He),Ie.add(Be))},()=>{Re(),Ie.complete()},void 0,()=>{Ue=Be=null}))})}},6590:(cn,ft,V)=>{"use strict";V.d(ft,{d:()=>H});var T=V(4482),l=V(5403);function H(g){return(0,T.e)((He,he)=>{let $e=!1;He.subscribe((0,l.x)(he,Ie=>{$e=!0,he.next(Ie)},()=>{$e||he.next(g),he.complete()}))})}},1884:(cn,ft,V)=>{"use strict";V.d(ft,{x:()=>g});var T=V(4671),l=V(4482),H=V(5403);function g(he,$e=T.y){return he=he??He,(0,l.e)((Ie,Be)=>{let Ue,nt=!0;Ie.subscribe((0,H.x)(Be,Re=>{const it=$e(Re);(nt||!he(Ue,it))&&(nt=!1,Ue=it,Be.next(Re))}))})}function He(he,$e){return he===$e}},9300:(cn,ft,V)=>{"use strict";V.d(ft,{h:()=>H});var T=V(4482),l=V(5403);function H(g,He){return(0,T.e)((he,$e)=>{let Ie=0;he.subscribe((0,l.x)($e,Be=>g.call(He,Be,Ie++)&&$e.next(Be)))})}},8746:(cn,ft,V)=>{"use strict";V.d(ft,{x:()=>l});var T=V(4482);function l(H){return(0,T.e)((g,He)=>{try{g.subscribe(He)}finally{He.add(H)}})}},590:(cn,ft,V)=>{"use strict";V.d(ft,{P:()=>$e});var T=V(6805),l=V(9300),H=V(5698),g=V(6590),He=V(8068),he=V(4671);function $e(Ie,Be){const Ue=arguments.length>=2;return nt=>nt.pipe(Ie?(0,l.h)((Re,it)=>Ie(Re,it,nt)):he.y,(0,H.q)(1),Ue?(0,g.d)(Be):(0,He.T)(()=>new T.K))}},4004:(cn,ft,V)=>{"use strict";V.d(ft,{U:()=>H});var T=V(4482),l=V(5403);function H(g,He){return(0,T.e)((he,$e)=>{let Ie=0;he.subscribe((0,l.x)($e,Be=>{$e.next(g.call(He,Be,Ie++))}))})}},9718:(cn,ft,V)=>{"use strict";V.d(ft,{h:()=>l});var T=V(4004);function l(H){return(0,T.U)(()=>H)}},8189:(cn,ft,V)=>{"use strict";V.d(ft,{J:()=>H});var T=V(5577),l=V(4671);function H(g=1/0){return(0,T.z)(l.y,g)}},5577:(cn,ft,V)=>{"use strict";V.d(ft,{z:()=>Ie});var T=V(4004),l=V(8421),H=V(4482),g=V(9672),He=V(5403),$e=V(576);function Ie(Be,Ue,nt=1/0){return(0,$e.m)(Ue)?Ie((Re,it)=>(0,T.U)((We,je)=>Ue(Re,We,it,je))((0,l.Xf)(Be(Re,it))),nt):("number"==typeof Ue&&(nt=Ue),(0,H.e)((Re,it)=>function he(Be,Ue,nt,Re,it,We,je,Ct){const wt=[];let Tt=0,an=0,Xt=!1;const Dt=()=>{Xt&&!wt.length&&!Tt&&Ue.complete()},Oe=Ot=>Tt<Re?Ne(Ot):wt.push(Ot),Ne=Ot=>{We&&Ue.next(Ot),Tt++;let kt=!1;(0,l.Xf)(nt(Ot,an++)).subscribe((0,He.x)(Ue,Ft=>{it?.(Ft),We?Oe(Ft):Ue.next(Ft)},()=>{kt=!0},void 0,()=>{if(kt)try{for(Tt--;wt.length&&Tt<Re;){const Ft=wt.shift();je?(0,g.f)(Ue,je,()=>Ne(Ft)):Ne(Ft)}Dt()}catch(Ft){Ue.error(Ft)}}))};return Be.subscribe((0,He.x)(Ue,Oe,()=>{Xt=!0,Dt()})),()=>{Ct?.()}}(Re,it,Be,nt)))}},3099:(cn,ft,V)=>{"use strict";V.d(ft,{B:()=>He});var T=V(8421),l=V(7579),H=V(930),g=V(4482);function He($e={}){const{connector:Ie=(()=>new l.x),resetOnError:Be=!0,resetOnComplete:Ue=!0,resetOnRefCountZero:nt=!0}=$e;return Re=>{let it,We,je,Ct=0,wt=!1,Tt=!1;const an=()=>{We?.unsubscribe(),We=void 0},Xt=()=>{an(),it=je=void 0,wt=Tt=!1},Dt=()=>{const Oe=it;Xt(),Oe?.unsubscribe()};return(0,g.e)((Oe,Ne)=>{Ct++,!Tt&&!wt&&an();const Ot=je=je??Ie();Ne.add(()=>{Ct--,0===Ct&&!Tt&&!wt&&(We=he(Dt,nt))}),Ot.subscribe(Ne),!it&&Ct>0&&(it=new H.Hp({next:kt=>Ot.next(kt),error:kt=>{Tt=!0,an(),We=he(Xt,Be,kt),Ot.error(kt)},complete:()=>{wt=!0,an(),We=he(Xt,Ue),Ot.complete()}}),(0,T.Xf)(Oe).subscribe(it))})(Re)}}function he($e,Ie,...Be){if(!0===Ie)return void $e();if(!1===Ie)return;const Ue=new H.Hp({next:()=>{Ue.unsubscribe(),$e()}});return Ie(...Be).subscribe(Ue)}},3151:(cn,ft,V)=>{"use strict";V.d(ft,{d:()=>He});var T=V(7579),l=V(6063);class H extends T.x{constructor($e=1/0,Ie=1/0,Be=l.l){super(),this._bufferSize=$e,this._windowTime=Ie,this._timestampProvider=Be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ie===1/0,this._bufferSize=Math.max(1,$e),this._windowTime=Math.max(1,Ie)}next($e){const{isStopped:Ie,_buffer:Be,_infiniteTimeWindow:Ue,_timestampProvider:nt,_windowTime:Re}=this;Ie||(Be.push($e),!Ue&&Be.push(nt.now()+Re)),this._trimBuffer(),super.next($e)}_subscribe($e){this._throwIfClosed(),this._trimBuffer();const Ie=this._innerSubscribe($e),{_infiniteTimeWindow:Be,_buffer:Ue}=this,nt=Ue.slice();for(let Re=0;Re<nt.length&&!$e.closed;Re+=Be?1:2)$e.next(nt[Re]);return this._checkFinalizedStatuses($e),Ie}_trimBuffer(){const{_bufferSize:$e,_timestampProvider:Ie,_buffer:Be,_infiniteTimeWindow:Ue}=this,nt=(Ue?1:2)*$e;if($e<1/0&&nt<Be.length&&Be.splice(0,Be.length-nt),!Ue){const Re=Ie.now();let it=0;for(let We=1;We<Be.length&&Be[We]<=Re;We+=2)it=We;it&&Be.splice(0,it+1)}}}var g=V(3099);function He(he,$e,Ie){let Be,Ue=!1;return he&&"object"==typeof he?({bufferSize:Be=1/0,windowTime:$e=1/0,refCount:Ue=!1,scheduler:Ie}=he):Be=he??1/0,(0,g.B)({connector:()=>new H(Be,$e,Ie),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ue})}},5684:(cn,ft,V)=>{"use strict";V.d(ft,{T:()=>l});var T=V(9300);function l(H){return(0,T.h)((g,He)=>H<=He)}},8675:(cn,ft,V)=>{"use strict";V.d(ft,{O:()=>g});var T=V(7272),l=V(3269),H=V(4482);function g(...He){const he=(0,l.yG)(He);return(0,H.e)(($e,Ie)=>{(he?(0,T.z)(He,$e,he):(0,T.z)(He,$e)).subscribe(Ie)})}},3900:(cn,ft,V)=>{"use strict";V.d(ft,{w:()=>g});var T=V(8421),l=V(4482),H=V(5403);function g(He,he){return(0,l.e)(($e,Ie)=>{let Be=null,Ue=0,nt=!1;const Re=()=>nt&&!Be&&Ie.complete();$e.subscribe((0,H.x)(Ie,it=>{Be?.unsubscribe();let We=0;const je=Ue++;(0,T.Xf)(He(it,je)).subscribe(Be=(0,H.x)(Ie,Ct=>Ie.next(he?he(it,Ct,je,We++):Ct),()=>{Be=null,Re()}))},()=>{nt=!0,Re()}))})}},5698:(cn,ft,V)=>{"use strict";V.d(ft,{q:()=>g});var T=V(515),l=V(4482),H=V(5403);function g(He){return He<=0?()=>T.E:(0,l.e)((he,$e)=>{let Ie=0;he.subscribe((0,H.x)($e,Be=>{++Ie<=He&&($e.next(Be),He<=Ie&&$e.complete())}))})}},2722:(cn,ft,V)=>{"use strict";V.d(ft,{R:()=>He});var T=V(4482),l=V(5403),H=V(8421),g=V(5032);function He(he){return(0,T.e)(($e,Ie)=>{(0,H.Xf)(he).subscribe((0,l.x)(Ie,()=>Ie.complete(),g.Z)),!Ie.closed&&$e.subscribe(Ie)})}},2529:(cn,ft,V)=>{"use strict";V.d(ft,{o:()=>H});var T=V(4482),l=V(5403);function H(g,He=!1){return(0,T.e)((he,$e)=>{let Ie=0;he.subscribe((0,l.x)($e,Be=>{const Ue=g(Be,Ie++);(Ue||He)&&$e.next(Be),!Ue&&$e.complete()}))})}},8505:(cn,ft,V)=>{"use strict";V.d(ft,{b:()=>He});var T=V(576),l=V(4482),H=V(5403),g=V(4671);function He(he,$e,Ie){const Be=(0,T.m)(he)||$e||Ie?{next:he,error:$e,complete:Ie}:he;return Be?(0,l.e)((Ue,nt)=>{var Re;null===(Re=Be.subscribe)||void 0===Re||Re.call(Be);let it=!0;Ue.subscribe((0,H.x)(nt,We=>{var je;null===(je=Be.next)||void 0===je||je.call(Be,We),nt.next(We)},()=>{var We;it=!1,null===(We=Be.complete)||void 0===We||We.call(Be),nt.complete()},We=>{var je;it=!1,null===(je=Be.error)||void 0===je||je.call(Be,We),nt.error(We)},()=>{var We,je;it&&(null===(We=Be.unsubscribe)||void 0===We||We.call(Be)),null===(je=Be.finalize)||void 0===je||je.call(Be)}))}):g.y}},8068:(cn,ft,V)=>{"use strict";V.d(ft,{T:()=>g});var T=V(6805),l=V(4482),H=V(5403);function g(he=He){return(0,l.e)(($e,Ie)=>{let Be=!1;$e.subscribe((0,H.x)(Ie,Ue=>{Be=!0,Ie.next(Ue)},()=>Be?Ie.complete():Ie.error(he())))})}function He(){return new T.K}},4408:(cn,ft,V)=>{"use strict";V.d(ft,{o:()=>He});var T=V(727);class l extends T.w0{constructor($e,Ie){super()}schedule($e,Ie=0){return this}}const H={setInterval(he,$e,...Ie){const{delegate:Be}=H;return Be?.setInterval?Be.setInterval(he,$e,...Ie):setInterval(he,$e,...Ie)},clearInterval(he){const{delegate:$e}=H;return($e?.clearInterval||clearInterval)(he)},delegate:void 0};var g=V(8737);class He extends l{constructor($e,Ie){super($e,Ie),this.scheduler=$e,this.work=Ie,this.pending=!1}schedule($e,Ie=0){var Be;if(this.closed)return this;this.state=$e;const Ue=this.id,nt=this.scheduler;return null!=Ue&&(this.id=this.recycleAsyncId(nt,Ue,Ie)),this.pending=!0,this.delay=Ie,this.id=null!==(Be=this.id)&&void 0!==Be?Be:this.requestAsyncId(nt,this.id,Ie),this}requestAsyncId($e,Ie,Be=0){return H.setInterval($e.flush.bind($e,this),Be)}recycleAsyncId($e,Ie,Be=0){if(null!=Be&&this.delay===Be&&!1===this.pending)return Ie;null!=Ie&&H.clearInterval(Ie)}execute($e,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Be=this._execute($e,Ie);if(Be)return Be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute($e,Ie){let Ue,Be=!1;try{this.work($e)}catch(nt){Be=!0,Ue=nt||new Error("Scheduled action threw falsy error")}if(Be)return this.unsubscribe(),Ue}unsubscribe(){if(!this.closed){const{id:$e,scheduler:Ie}=this,{actions:Be}=Ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,g.P)(Be,this),null!=$e&&(this.id=this.recycleAsyncId(Ie,$e,null)),this.delay=null,super.unsubscribe()}}}},7565:(cn,ft,V)=>{"use strict";V.d(ft,{v:()=>H});var T=V(6063);class l{constructor(He,he=l.now){this.schedulerActionCtor=He,this.now=he}schedule(He,he=0,$e){return new this.schedulerActionCtor(this,He).schedule($e,he)}}l.now=T.l.now;class H extends l{constructor(He,he=l.now){super(He,he),this.actions=[],this._active=!1}flush(He){const{actions:he}=this;if(this._active)return void he.push(He);let $e;this._active=!0;do{if($e=He.execute(He.state,He.delay))break}while(He=he.shift());if(this._active=!1,$e){for(;He=he.shift();)He.unsubscribe();throw $e}}}},4986:(cn,ft,V)=>{"use strict";V.d(ft,{P:()=>g,z:()=>H});var T=V(4408);const H=new(V(7565).v)(T.o),g=H},6063:(cn,ft,V)=>{"use strict";V.d(ft,{l:()=>T});const T={now:()=>(T.delegate||Date).now(),delegate:void 0}},3410:(cn,ft,V)=>{"use strict";V.d(ft,{z:()=>T});const T={setTimeout(l,H,...g){const{delegate:He}=T;return He?.setTimeout?He.setTimeout(l,H,...g):setTimeout(l,H,...g)},clearTimeout(l){const{delegate:H}=T;return(H?.clearTimeout||clearTimeout)(l)},delegate:void 0}},2202:(cn,ft,V)=>{"use strict";V.d(ft,{h:()=>l});const l=function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(cn,ft,V)=>{"use strict";V.d(ft,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(cn,ft,V)=>{"use strict";V.d(ft,{K:()=>l});const l=(0,V(3888).d)(H=>function(){H(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(cn,ft,V)=>{"use strict";V.d(ft,{_6:()=>he,jO:()=>g,yG:()=>He});var T=V(576),l=V(3532);function H($e){return $e[$e.length-1]}function g($e){return(0,T.m)(H($e))?$e.pop():void 0}function He($e){return(0,l.K)(H($e))?$e.pop():void 0}function he($e,Ie){return"number"==typeof H($e)?$e.pop():Ie}},4742:(cn,ft,V)=>{"use strict";V.d(ft,{D:()=>He});const{isArray:T}=Array,{getPrototypeOf:l,prototype:H,keys:g}=Object;function He($e){if(1===$e.length){const Ie=$e[0];if(T(Ie))return{args:Ie,keys:null};if(function he($e){return $e&&"object"==typeof $e&&l($e)===H}(Ie)){const Be=g(Ie);return{args:Be.map(Ue=>Ie[Ue]),keys:Be}}}return{args:$e,keys:null}}},8737:(cn,ft,V)=>{"use strict";function T(l,H){if(l){const g=l.indexOf(H);0<=g&&l.splice(g,1)}}V.d(ft,{P:()=>T})},3888:(cn,ft,V)=>{"use strict";function T(l){const g=l(He=>{Error.call(He),He.stack=(new Error).stack});return g.prototype=Object.create(Error.prototype),g.prototype.constructor=g,g}V.d(ft,{d:()=>T})},1810:(cn,ft,V)=>{"use strict";function T(l,H){return l.reduce((g,He,he)=>(g[He]=H[he],g),{})}V.d(ft,{n:()=>T})},2806:(cn,ft,V)=>{"use strict";V.d(ft,{O:()=>g,x:()=>H});var T=V(2416);let l=null;function H(He){if(T.v.useDeprecatedSynchronousErrorHandling){const he=!l;if(he&&(l={errorThrown:!1,error:null}),He(),he){const{errorThrown:$e,error:Ie}=l;if(l=null,$e)throw Ie}}else He()}function g(He){T.v.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=He)}},9672:(cn,ft,V)=>{"use strict";function T(l,H,g,He=0,he=!1){const $e=H.schedule(function(){g(),he?l.add(this.schedule(null,He)):this.unsubscribe()},He);if(l.add($e),!he)return $e}V.d(ft,{f:()=>T})},4671:(cn,ft,V)=>{"use strict";function T(l){return l}V.d(ft,{y:()=>T})},1144:(cn,ft,V)=>{"use strict";V.d(ft,{z:()=>T});const T=l=>l&&"number"==typeof l.length&&"function"!=typeof l},2206:(cn,ft,V)=>{"use strict";V.d(ft,{D:()=>l});var T=V(576);function l(H){return Symbol.asyncIterator&&(0,T.m)(H?.[Symbol.asyncIterator])}},576:(cn,ft,V)=>{"use strict";function T(l){return"function"==typeof l}V.d(ft,{m:()=>T})},3670:(cn,ft,V)=>{"use strict";V.d(ft,{c:()=>H});var T=V(8822),l=V(576);function H(g){return(0,l.m)(g[T.L])}},6495:(cn,ft,V)=>{"use strict";V.d(ft,{T:()=>H});var T=V(2202),l=V(576);function H(g){return(0,l.m)(g?.[T.h])}},8239:(cn,ft,V)=>{"use strict";V.d(ft,{t:()=>l});var T=V(576);function l(H){return(0,T.m)(H?.then)}},3260:(cn,ft,V)=>{"use strict";V.d(ft,{L:()=>g,Q:()=>H});var T=V(655),l=V(576);function H(He){return(0,T.FC)(this,arguments,function*(){const $e=He.getReader();try{for(;;){const{value:Ie,done:Be}=yield(0,T.qq)($e.read());if(Be)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(Ie)}}finally{$e.releaseLock()}})}function g(He){return(0,l.m)(He?.getReader)}},3532:(cn,ft,V)=>{"use strict";V.d(ft,{K:()=>l});var T=V(576);function l(H){return H&&(0,T.m)(H.schedule)}},4482:(cn,ft,V)=>{"use strict";V.d(ft,{A:()=>l,e:()=>H});var T=V(576);function l(g){return(0,T.m)(g?.lift)}function H(g){return He=>{if(l(He))return He.lift(function(he){try{return g(he,this)}catch($e){this.error($e)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(cn,ft,V)=>{"use strict";V.d(ft,{Z:()=>g});var T=V(4004);const{isArray:l}=Array;function g(He){return(0,T.U)(he=>function H(He,he){return l(he)?He(...he):He(he)}(He,he))}},5032:(cn,ft,V)=>{"use strict";function T(){}V.d(ft,{Z:()=>T})},9635:(cn,ft,V)=>{"use strict";V.d(ft,{U:()=>H,z:()=>l});var T=V(4671);function l(...g){return H(g)}function H(g){return 0===g.length?T.y:1===g.length?g[0]:function(he){return g.reduce(($e,Ie)=>Ie($e),he)}}},7849:(cn,ft,V)=>{"use strict";V.d(ft,{h:()=>H});var T=V(2416),l=V(3410);function H(g){l.z.setTimeout(()=>{const{onUnhandledError:He}=T.v;if(!He)throw g;He(g)})}},4532:(cn,ft,V)=>{"use strict";function T(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(ft,{z:()=>T})},655:(cn,ft,V)=>{"use strict";function Ie(lt,dt,St,Et){return new(St||(St=Promise))(function(Qt,On){function Xn(gi){try{nn(Et.next(gi))}catch(Qn){On(Qn)}}function mi(gi){try{nn(Et.throw(gi))}catch(Qn){On(Qn)}}function nn(gi){gi.done?Qt(gi.value):function tn(Qt){return Qt instanceof St?Qt:new St(function(On){On(Qt)})}(gi.value).then(Xn,mi)}nn((Et=Et.apply(lt,dt||[])).next())})}function wt(lt){return this instanceof wt?(this.v=lt,this):new wt(lt)}function Tt(lt,dt,St){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tn,Et=St.apply(lt,dt||[]),Qt=[];return tn={},On("next"),On("throw"),On("return"),tn[Symbol.asyncIterator]=function(){return this},tn;function On(di){Et[di]&&(tn[di]=function(ln){return new Promise(function(hn,gt){Qt.push([di,ln,hn,gt])>1||Xn(di,ln)})})}function Xn(di,ln){try{!function mi(di){di.value instanceof wt?Promise.resolve(di.value.v).then(nn,gi):Qn(Qt[0][2],di)}(Et[di](ln))}catch(hn){Qn(Qt[0][3],hn)}}function nn(di){Xn("next",di)}function gi(di){Xn("throw",di)}function Qn(di,ln){di(ln),Qt.shift(),Qt.length&&Xn(Qt[0][0],Qt[0][1])}}function Xt(lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var St,dt=lt[Symbol.asyncIterator];return dt?dt.call(lt):(lt=function Re(lt){var dt="function"==typeof Symbol&&Symbol.iterator,St=dt&&lt[dt],Et=0;if(St)return St.call(lt);if(lt&&"number"==typeof lt.length)return{next:function(){return lt&&Et>=lt.length&&(lt=void 0),{value:lt&&lt[Et++],done:!lt}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}(lt),St={},Et("next"),Et("throw"),Et("return"),St[Symbol.asyncIterator]=function(){return this},St);function Et(Qt){St[Qt]=lt[Qt]&&function(On){return new Promise(function(Xn,mi){!function tn(Qt,On,Xn,mi){Promise.resolve(mi).then(function(nn){Qt({value:nn,done:Xn})},On)}(Xn,mi,(On=lt[Qt](On)).done,On.value)})}}}V.d(ft,{FC:()=>Tt,KL:()=>Xt,mG:()=>Ie,qq:()=>wt})},1943:function(cn){cn.exports=function(){"use strict";var ft,V,T;function l(g,He){if(ft)if(V){var he="var sharedChunk = {}; ("+ft+")(sharedChunk); ("+V+")(sharedChunk);",$e={};ft($e),T=He($e),typeof window<"u"&&(T.workerUrl=window.URL.createObjectURL(new Blob([he],{type:"text/javascript"})))}else V=He;else ft=He}return l(0,function(g){function He(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var he=$e;function $e(o,e){this.x=o,this.y=e}$e.prototype={clone:function(){return new $e(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,e){return this.clone()._rotateAround(o,e)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var e=o.x-this.x,a=o.y-this.y;return e*e+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,e){return Math.atan2(this.x*e-this.y*o,this.x*o+this.y*e)},_matMult:function(o){var e=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=e,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var e=Math.cos(o),a=Math.sin(o),f=a*this.x+e*this.y;return this.x=e*this.x-a*this.y,this.y=f,this},_rotateAround:function(o,e){var a=Math.cos(o),f=Math.sin(o),v=e.y+f*(this.x-e.x)+a*(this.y-e.y);return this.x=e.x+a*(this.x-e.x)-f*(this.y-e.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$e.convert=function(o){return o instanceof $e?o:Array.isArray(o)?new $e(o[0],o[1]):o};var Ie=He(he),Be=Ue;function Ue(o,e,a,f){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(f-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=e,this.p2x=a,this.p2y=f}Ue.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,e){if(void 0===e&&(e=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,f=0;f<8;f++){var v=this.sampleCurveX(a)-o;if(Math.abs(v)<e)return a;var w=this.sampleCurveDerivativeX(a);if(Math.abs(w)<1e-6)break;a-=v/w}var M=0,O=1;for(a=o,f=0;f<20&&(v=this.sampleCurveX(a),!(Math.abs(v-o)<e));f++)o>v?M=a:O=a,a=.5*(O-M)+M;return a},solve:function(o,e){return this.sampleCurveY(this.solveCurveX(o,e))}};var nt=He(Be);function Re(o,e,a,f){const v=new nt(o,e,a,f);return function(w){return v.solve(w)}}const it=Re(.25,.1,.25,1);function We(o,e,a){return Math.min(a,Math.max(e,o))}function je(o,e,a){const f=a-e,v=((o-e)%f+f)%f+e;return v===e?a:v}function Ct(o,...e){for(const a of e)for(const f in a)o[f]=a[f];return o}let wt=1;function Tt(o,e){o.forEach(a=>{e[a]&&(e[a]=e[a].bind(e))})}function an(o,e,a){const f={};for(const v in o)f[v]=e.call(a||this,o[v],v,o);return f}function Xt(o,e,a){const f={};for(const v in o)e.call(a||this,o[v],v,o)&&(f[v]=o[v]);return f}function Dt(o){return Array.isArray(o)?o.map(Dt):"object"==typeof o&&o?an(o,Dt):o}const Oe={};function Ne(o){Oe[o]||(typeof console<"u"&&console.warn(o),Oe[o]=!0)}function Ot(o,e,a){return(a.y-o.y)*(e.x-o.x)>(e.y-o.y)*(a.x-o.x)}function kt(o){let e=0;for(let a,f,v=0,w=o.length,M=w-1;v<w;M=v++)a=o[v],f=o[M],e+=(f.x-a.x)*(a.y+f.y);return e}function Ft(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Gt=null;function lt(o){if(null==Gt){const e=o.navigator?o.navigator.userAgent:null;Gt=!!o.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Gt}function dt(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const St="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Et,tn;const Qt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const e=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(o,e=0){return this.getImageCanvasContext(o).getImageData(-e,-e,o.width+2*e,o.height+2*e)},getImageCanvasContext(o){const e=window.document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return e.width=o.width,e.height=o.height,a.drawImage(o,0,0,o.width,o.height),a},resolveURL:o=>(Et||(Et=document.createElement("a")),Et.href=o,Et.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==tn&&(tn=matchMedia("(prefers-reduced-motion: reduce)")),tn.matches)}},On={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Xn extends Error{constructor(e,a,f,v){super(`AJAXError: ${a} (${e}): ${f}`),this.status=e,this.statusText=a,this.url=f,this.body=v}}const mi=Ft()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,nn=o=>On.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function gi(o,e){const a=new AbortController,f=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:mi(),signal:a.signal});let v=!1,w=!1;return"json"===o.type&&f.headers.set("Accept","application/json"),w||fetch(f).then(M=>{return M.ok?(O=M,void("arrayBuffer"===o.type||"image"===o.type?O.arrayBuffer():"json"===o.type?O.json():O.text()).then(L=>{w||(v=!0,e(null,L,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(L=>{w||e(new Error(L.message))})):M.blob().then(O=>e(new Xn(M.status,M.statusText,o.url,O)));var O}).catch(M=>{20!==M.code&&e(new Error(M.message))}),{cancel:()=>{w=!0,v||a.abort()}}}const Qn=function(o,e){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Ft()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,e);if(!Ft())return(nn(o.url)||gi)(o,e)}if(!(/^file:/.test(a=o.url)||/^file:/.test(mi())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return gi(o,e);if(Ft()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,e,void 0,!0)}var a;return function(f,v){const w=new XMLHttpRequest;w.open(f.method||"GET",f.url,!0),"arrayBuffer"!==f.type&&"image"!==f.type||(w.responseType="arraybuffer");for(const M in f.headers)w.setRequestHeader(M,f.headers[M]);return"json"===f.type&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials="include"===f.credentials,w.onerror=()=>{v(new Error(w.statusText))},w.onload=()=>{if((w.status>=200&&w.status<300||0===w.status)&&null!==w.response){let M=w.response;if("json"===f.type)try{M=JSON.parse(w.response)}catch(O){return v(O)}v(null,M,w.getResponseHeader("Cache-Control"),w.getResponseHeader("Expires"))}else{const M=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});v(new Xn(w.status,w.statusText,f.url,M))}},w.send(f.body),{cancel:()=>w.abort()}}(o,e)},di=function(o,e){return Qn(Ct(o,{type:"arrayBuffer"}),e)};function ln(o){const e=window.document.createElement("a");return e.href=o,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}function hn(o,e,a){a[o]&&-1!==a[o].indexOf(e)||(a[o]=a[o]||[],a[o].push(e))}function gt(o,e,a){if(a&&a[o]){const f=a[o].indexOf(e);-1!==f&&a[o].splice(f,1)}}class At{constructor(e,a={}){Ct(this,a),this.type=e}}class en extends At{constructor(e,a={}){super("error",Ct({error:e},a))}}class sn{on(e,a){return this._listeners=this._listeners||{},hn(e,a,this._listeners),this}off(e,a){return gt(e,a,this._listeners),gt(e,a,this._oneTimeListeners),this}once(e,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},hn(e,a,this._oneTimeListeners),this):new Promise(f=>this.once(e,f))}fire(e,a){"string"==typeof e&&(e=new At(e,a||{}));const f=e.type;if(this.listens(f)){e.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const O of v)O.call(this,e);const w=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const O of w)gt(f,O,this._oneTimeListeners),O.call(this,e);const M=this._eventedParent;M&&(Ct(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),M.fire(e))}else e instanceof en&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,a){return this._eventedParent=e,this._eventedParentData=a,this}}var bn={exports:{}},Un={exports:{}},Kn=Array.prototype.concat,hi=Array.prototype.slice,Fi=Un.exports=function(o){for(var e=[],a=0,f=o.length;a<f;a++){var v=o[a];(w=v)&&"string"!=typeof w&&(w instanceof Array||Array.isArray(w)||w.length>=0&&(w.splice instanceof Function||Object.getOwnPropertyDescriptor(w,w.length-1)&&"String"!==w.constructor.name))?e=Kn.call(e,hi.call(v)):e.push(v)}var w;return e};Fi.wrap=function(o){return function(){return o(Fi(arguments))}};var Oi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},yi=Un.exports,un=Object.hasOwnProperty,Nn=Object.create(null);for(var tt in Oi)un.call(Oi,tt)&&(Nn[Oi[tt]]=tt);var Y=bn.exports={to:{},get:{}};function ee(o,e,a){return Math.min(Math.max(e,o),a)}function Me(o){var e=Math.round(o).toString(16).toUpperCase();return e.length<2?"0"+e:e}Y.get=function(o){var e,a;switch(o.substring(0,3).toLowerCase()){case"hsl":e=Y.get.hsl(o),a="hsl";break;case"hwb":e=Y.get.hwb(o),a="hwb";break;default:e=Y.get.rgb(o),a="rgb"}return e?{model:a,value:e}:null},Y.get.rgb=function(o){if(!o)return null;var e,a,f,v=[0,0,0,1];if(e=o.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(f=e[2],e=e[1],a=0;a<3;a++){var w=2*a;v[a]=parseInt(e.slice(w,w+2),16)}f&&(v[3]=parseInt(f,16)/255)}else if(e=o.match(/^#([a-f0-9]{3,4})$/i)){for(f=(e=e[1])[3],a=0;a<3;a++)v[a]=parseInt(e[a]+e[a],16);f&&(v[3]=parseInt(f+f,16)/255)}else if(e=o.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(a=0;a<3;a++)v[a]=parseInt(e[a+1],0);e[4]&&(v[3]=e[5]?.01*parseFloat(e[4]):parseFloat(e[4]))}else{if(!(e=o.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=o.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:un.call(Oi,e[1])?((v=Oi[e[1]])[3]=1,v):null:null;for(a=0;a<3;a++)v[a]=Math.round(2.55*parseFloat(e[a+1]));e[4]&&(v[3]=e[5]?.01*parseFloat(e[4]):parseFloat(e[4]))}for(a=0;a<3;a++)v[a]=ee(v[a],0,255);return v[3]=ee(v[3],0,1),v},Y.get.hsl=function(o){if(!o)return null;var e=o.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var a=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,ee(parseFloat(e[2]),0,100),ee(parseFloat(e[3]),0,100),ee(isNaN(a)?1:a,0,1)]}return null},Y.get.hwb=function(o){if(!o)return null;var e=o.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var a=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,ee(parseFloat(e[2]),0,100),ee(parseFloat(e[3]),0,100),ee(isNaN(a)?1:a,0,1)]}return null},Y.to.hex=function(){var o=yi(arguments);return"#"+Me(o[0])+Me(o[1])+Me(o[2])+(o[3]<1?Me(Math.round(255*o[3])):"")},Y.to.rgb=function(){var o=yi(arguments);return o.length<4||1===o[3]?"rgb("+Math.round(o[0])+", "+Math.round(o[1])+", "+Math.round(o[2])+")":"rgba("+Math.round(o[0])+", "+Math.round(o[1])+", "+Math.round(o[2])+", "+o[3]+")"},Y.to.rgb.percent=function(){var o=yi(arguments),e=Math.round(o[0]/255*100),a=Math.round(o[1]/255*100),f=Math.round(o[2]/255*100);return o.length<4||1===o[3]?"rgb("+e+"%, "+a+"%, "+f+"%)":"rgba("+e+"%, "+a+"%, "+f+"%, "+o[3]+")"},Y.to.hsl=function(){var o=yi(arguments);return o.length<4||1===o[3]?"hsl("+o[0]+", "+o[1]+"%, "+o[2]+"%)":"hsla("+o[0]+", "+o[1]+"%, "+o[2]+"%, "+o[3]+")"},Y.to.hwb=function(){var o=yi(arguments),e="";return o.length>=4&&1!==o[3]&&(e=", "+o[3]),"hwb("+o[0]+", "+o[1]+"%, "+o[2]+"%"+e+")"},Y.to.keyword=function(o){return Nn[o.slice(0,3)]};var Je=He(bn.exports),ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const fe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function le(o,e){const a={};for(const f in o)"ref"!==f&&(a[f]=o[f]);return fe.forEach(f=>{f in e&&(a[f]=e[f])}),a}function de(o,e){if(Array.isArray(o)){if(!Array.isArray(e)||o.length!==e.length)return!1;for(let a=0;a<o.length;a++)if(!de(o[a],e[a]))return!1;return!0}if("object"==typeof o&&null!==o&&null!==e){if("object"!=typeof e||Object.keys(o).length!==Object.keys(e).length)return!1;for(const a in o)if(!de(o[a],e[a]))return!1;return!0}return o===e}const Ae={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ut(o,e,a){a.push({command:Ae.addSource,args:[o,e[o]]})}function mt(o,e,a){e.push({command:Ae.removeSource,args:[o]}),a[o]=!0}function dn(o,e,a,f){mt(o,a,f),ut(o,e,a)}function Vt(o,e,a){let f;for(f in o[a])if(Object.prototype.hasOwnProperty.call(o[a],f)&&"data"!==f&&!de(o[a][f],e[a][f]))return!1;for(f in e[a])if(Object.prototype.hasOwnProperty.call(e[a],f)&&"data"!==f&&!de(o[a][f],e[a][f]))return!1;return!0}function mn(o,e,a,f,v,w){let M;for(M in e=e||{},o=o||{})Object.prototype.hasOwnProperty.call(o,M)&&(de(o[M],e[M])||a.push({command:w,args:[f,M,e[M],v]}));for(M in e)Object.prototype.hasOwnProperty.call(e,M)&&!Object.prototype.hasOwnProperty.call(o,M)&&(de(o[M],e[M])||a.push({command:w,args:[f,M,e[M],v]}))}function fn(o){return o.id}function Vi(o,e){return o[e.id]=e,o}class Nt{constructor(e,a,f,v){this.message=(e?`${e}: `:"")+f,v&&(this.identifier=v),null!=a&&a.__line__&&(this.line=a.__line__)}}function bt(o,...e){for(const a of e)for(const f in a)o[f]=a[f];return o}class et extends Error{constructor(e,a){super(a),this.message=a,this.key=e}}class ot{constructor(e,a=[]){this.parent=e,this.bindings={};for(const[f,v]of a)this.bindings[f]=v}concat(e){return new ot(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Fe={kind:"null"},Se={kind:"number"},Te={kind:"string"},J={kind:"boolean"},$={kind:"color"},re={kind:"object"},_e={kind:"value"},ke={kind:"collator"},rt={kind:"formatted"},Ye={kind:"padding"},Xe={kind:"resolvedImage"};function Ke(o,e){return{kind:"array",itemType:o,N:e}}function at(o){if("array"===o.kind){const e=at(o.itemType);return"number"==typeof o.N?`array<${e}, ${o.N}>`:"value"===o.itemType.kind?"array":`array<${e}>`}return o.kind}const Rt=[Fe,Se,Te,J,$,rt,re,Ke(_e),Ye,Xe];function Bt(o,e){if("error"===e.kind)return null;if("array"===o.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Bt(o.itemType,e.itemType))&&("number"!=typeof o.N||o.N===e.N))return null}else{if(o.kind===e.kind)return null;if("value"===o.kind)for(const a of Rt)if(!Bt(a,e))return null}return`Expected ${at(o)} but found ${at(e)} instead.`}function xe(o,e){return e.some(a=>a.kind===o.kind)}function Pe(o,e){return e.some(a=>"null"===a?null===o:"array"===a?Array.isArray(o):"object"===a?o&&!Array.isArray(o)&&"object"==typeof o:a===typeof o)}function De(o,e){return"array"===o.kind&&"array"===e.kind?o.itemType.kind===e.itemType.kind&&"number"==typeof o.N:o.kind===e.kind}const qt=4/29,In=6/29,xn=3*In*In,Jn=Math.PI/180,Bi=180/Math.PI;function Ln(o){return(o%=360)<0&&(o+=360),o}function Si([o,e,a,f]){let v,w;const M=Pr((.2225045*(o=Ui(o))+.7168786*(e=Ui(e))+.0606169*(a=Ui(a)))/1);o===e&&e===a?v=w=M:(v=Pr((.4360747*o+.3850649*e+.1430804*a)/.96422),w=Pr((.0139322*o+.0971045*e+.7141733*a)/.82521));const O=116*M-16;return[O<0?0:O,500*(v-M),200*(M-w),f]}function Ui(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Pr(o){return o>.008856451679035631?Math.pow(o,1/3):o/xn+qt}function ro([o,e,a,f]){let v=(o+16)/116,w=isNaN(e)?v:v+e/500,M=isNaN(a)?v:v-a/200;return v=1*yr(v),w=.96422*yr(w),M=.82521*yr(M),[_r(3.1338561*w-1.6168667*v-.4906146*M),_r(-.9787684*w+1.9161415*v+.033454*M),_r(.0719453*w-.2289914*v+1.4052427*M),f]}function _r(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function yr(o){return o>In?o*o*o:xn*(o-qt)}class Ii{constructor(e,a,f,v=1,w=!0){this.r=e,this.g=a,this.b=f,this.a=v,w||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[e,a,f,v]))}static parse(e){if(e instanceof Ii)return e;if("string"!=typeof e)return;const a=function(f){const v=Je.get(f);switch(v?.model){case"rgb":{const[w,M,O,L]=v.value;return[w/255,M/255,O/255,L]}case"hsl":return function([w,M,O,L]){function X(te){const ae=(te+w/30)%12,ge=M*Math.min(O,1-O);return O-ge*Math.max(-1,Math.min(ae-3,9-ae,1))}return w=Ln(w),M/=100,O/=100,[X(0),X(8),X(4),L]}(v.value)}}(e.toLowerCase());return a?new Ii(...a,!1):void 0}get rgb(){const{r:e,g:a,b:f,a:v}=this,w=v||1/0;return this.overwriteGetter("rgb",[e/w,a/w,f/w,v])}get hcl(){return this.overwriteGetter("hcl",function(e){const[a,f,v,w]=Si(e),M=Math.sqrt(f*f+v*v);return[Math.round(1e4*M)?Ln(Math.atan2(v,f)*Bi):NaN,M,a,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Si(this.rgb))}overwriteGetter(e,a){return Object.defineProperty(this,e,{value:a}),a}toString(){const[e,a,f,v]=this.rgb;return`rgba(${[e,a,f].map(w=>Math.round(255*w)).join(",")},${v})`}}Ii.black=new Ii(0,0,0,1),Ii.white=new Ii(1,1,1,1),Ii.transparent=new Ii(0,0,0,0),Ii.red=new Ii(1,0,0,1);class oo{constructor(e,a,f){this.sensitivity=e?a?"variant":"case":a?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,a){return this.collator.compare(e,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class zo{constructor(e,a,f,v,w){this.text=e,this.image=a,this.scale=f,this.fontStack=v,this.textColor=w}}class Er{constructor(e){this.sections=e}static fromString(e){return new Er([new zo(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Er?e:Er.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class xi{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof xi)return e;if("number"==typeof e)return new xi([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const a of e)if("number"!=typeof a)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new xi(e)}}toString(){return JSON.stringify(this.values)}}class Fr{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Fr({name:e,available:!1}):null}}function ps(o,e,a,f){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof a&&a>=0&&a<=255?void 0===f||"number"==typeof f&&f>=0&&f<=1?null:`Invalid rgba value [${[o,e,a,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof f?[o,e,a,f]:[o,e,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Nr(o){if(null===o||"string"==typeof o||"boolean"==typeof o||"number"==typeof o||o instanceof Ii||o instanceof oo||o instanceof Er||o instanceof xi||o instanceof Fr)return!0;if(Array.isArray(o)){for(const e of o)if(!Nr(e))return!1;return!0}if("object"==typeof o){for(const e in o)if(!Nr(o[e]))return!1;return!0}return!1}function ki(o){if(null===o)return Fe;if("string"==typeof o)return Te;if("boolean"==typeof o)return J;if("number"==typeof o)return Se;if(o instanceof Ii)return $;if(o instanceof oo)return ke;if(o instanceof Er)return rt;if(o instanceof xi)return Ye;if(o instanceof Fr)return Xe;if(Array.isArray(o)){const e=o.length;let a;for(const f of o){const v=ki(f);if(a){if(a===v)continue;a=_e;break}a=v}return Ke(a||_e,e)}return re}function $r(o){const e=typeof o;return null===o?"":"string"===e||"number"===e||"boolean"===e?String(o):o instanceof Ii||o instanceof Er||o instanceof xi||o instanceof Fr?o.toString():JSON.stringify(o)}class Or{constructor(e,a){this.type=e,this.value=a}static parse(e,a){if(2!==e.length)return a.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Nr(e[1]))return a.error("invalid value");const f=e[1];let v=ki(f);const w=a.expectedType;return"array"!==v.kind||0!==v.N||!w||"array"!==w.kind||"number"==typeof w.N&&0!==w.N||(v=w),new Or(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ai{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Gn={string:Te,number:Se,boolean:J,object:re};class ur{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");let f,v=1;const w=e[0];if("array"===w){let O,L;if(e.length>2){const X=e[1];if("string"!=typeof X||!(X in Gn)||"object"===X)return a.error('The item type argument of "array" must be one of string, number, boolean',1);O=Gn[X],v++}else O=_e;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return a.error('The length argument to "array" must be a positive integer literal',2);L=e[2],v++}f=Ke(O,L)}else{if(!Gn[w])throw new Error(`Types doesn't contain name = ${w}`);f=Gn[w]}const M=[];for(;v<e.length;v++){const O=a.parse(e[v],v,_e);if(!O)return null;M.push(O)}return new ur(f,M)}evaluate(e){for(let a=0;a<this.args.length;a++){const f=this.args[a].evaluate(e);if(!Bt(this.type,ki(f)))return f;if(a===this.args.length-1)throw new Ai(`Expected value to be of type ${at(this.type)}, but found ${at(ki(f))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const dr={"to-boolean":J,"to-color":$,"to-number":Se,"to-string":Te};class wr{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const f=e[0];if(!dr[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if(("to-boolean"===f||"to-string"===f)&&2!==e.length)return a.error("Expected one argument.");const v=dr[f],w=[];for(let M=1;M<e.length;M++){const O=a.parse(e[M],M,_e);if(!O)return null;w.push(O)}return new wr(v,w)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let a,f;for(const v of this.args){if(a=v.evaluate(e),f=null,a instanceof Ii)return a;if("string"==typeof a){const w=e.parseColor(a);if(w)return w}else if(Array.isArray(a)&&(f=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:ps(a[0],a[1],a[2],a[3]),!f))return new Ii(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Ai(f||`Could not parse color from value '${"string"==typeof a?a:JSON.stringify(a)}'`)}if("padding"===this.type.kind){let a;for(const f of this.args){a=f.evaluate(e);const v=xi.parse(a);if(v)return v}throw new Ai(`Could not parse padding from value '${"string"==typeof a?a:JSON.stringify(a)}'`)}if("number"===this.type.kind){let a=null;for(const f of this.args){if(a=f.evaluate(e),null===a)return 0;const v=Number(a);if(!isNaN(v))return v}throw new Ai(`Could not convert ${JSON.stringify(a)} to number.`)}return"formatted"===this.type.kind?Er.fromString($r(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Fr.fromString($r(this.args[0].evaluate(e))):$r(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const $s=["Unknown","Point","LineString","Polygon"];class Gs{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?$s[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let a=this._parseColorCache[e];return a||(a=this._parseColorCache[e]=Ii.parse(e)),a}}class fs{constructor(e,a,f=[],v,w=new ot,M=[]){this.registry=e,this.path=f,this.key=f.map(O=>`[${O}]`).join(""),this.scope=w,this.errors=M,this.expectedType=v,this._isConstant=a}parse(e,a,f,v,w={}){return a?this.concat(a,f,v)._parse(e,w):this._parse(e,w)}_parse(e,a){function f(v,w,M){return"assert"===M?new ur(w,[v]):"coerce"===M?new wr(w,[v]):v}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=e[0];if("string"!=typeof v)return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[v];if(w){let M=w.parse(e,this);if(!M)return null;if(this.expectedType){const O=this.expectedType,L=M.type;if("string"!==O.kind&&"number"!==O.kind&&"boolean"!==O.kind&&"object"!==O.kind&&"array"!==O.kind||"value"!==L.kind)if("color"!==O.kind&&"formatted"!==O.kind&&"resolvedImage"!==O.kind||"value"!==L.kind&&"string"!==L.kind)if("padding"!==O.kind||"value"!==L.kind&&"number"!==L.kind&&"array"!==L.kind){if(this.checkSubtype(O,L))return null}else M=f(M,O,a.typeAnnotation||"coerce");else M=f(M,O,a.typeAnnotation||"coerce");else M=f(M,O,a.typeAnnotation||"assert")}if(!(M instanceof Or)&&"resolvedImage"!==M.type.kind&&this._isConstant(M)){const O=new Gs;try{M=new Or(M.type,M.evaluate(O))}catch(L){return this.error(L.message),null}}return M}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,a,f){const v="number"==typeof e?this.path.concat(e):this.path,w=f?this.scope.concat(f):this.scope;return new fs(this.registry,this._isConstant,v,a||null,w,this.errors)}error(e,...a){const f=`${this.key}${a.map(v=>`[${v}]`).join("")}`;this.errors.push(new et(f,e))}checkSubtype(e,a){const f=Bt(e,a);return f&&this.error(f),f}}class Kr{constructor(e,a,f){this.type=ke,this.locale=f,this.caseSensitive=e,this.diacriticSensitive=a}static parse(e,a){if(2!==e.length)return a.error("Expected one argument.");const f=e[1];if("object"!=typeof f||Array.isArray(f))return a.error("Collator options argument must be an object.");const v=a.parse(void 0!==f["case-sensitive"]&&f["case-sensitive"],1,J);if(!v)return null;const w=a.parse(void 0!==f["diacritic-sensitive"]&&f["diacritic-sensitive"],1,J);if(!w)return null;let M=null;return f.locale&&(M=a.parse(f.locale,1,Te),!M)?null:new Kr(v,w,M)}evaluate(e){return new oo(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const Gr=8192;function da(o,e){o[0]=Math.min(o[0],e[0]),o[1]=Math.min(o[1],e[1]),o[2]=Math.max(o[2],e[0]),o[3]=Math.max(o[3],e[1])}function ts(o,e){return!(o[0]<=e[0]||o[2]>=e[2]||o[1]<=e[1]||o[3]>=e[3])}function ha(o,e){const a=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,v=Math.pow(2,e.z);return[Math.round(a*v*Gr),Math.round(f*v*Gr)]}function Tc(o,e,a){const f=o[0]-e[0],v=o[1]-e[1],w=o[0]-a[0],M=o[1]-a[1];return f*M-w*v==0&&f*w<=0&&v*M<=0}function so(o,e){let a=!1;for(let M=0,O=e.length;M<O;M++){const L=e[M];for(let X=0,te=L.length;X<te-1;X++){if(Tc(o,L[X],L[X+1]))return!1;(v=L[X])[1]>(f=o)[1]!=(w=L[X+1])[1]>f[1]&&f[0]<(w[0]-v[0])*(f[1]-v[1])/(w[1]-v[1])+v[0]&&(a=!a)}}var f,v,w;return a}function Pl(o,e){for(let a=0;a<e.length;a++)if(so(o,e[a]))return!0;return!1}function Ol(o,e,a,f){const v=f[0]-a[0],w=f[1]-a[1],M=(o[0]-a[0])*w-v*(o[1]-a[1]),O=(e[0]-a[0])*w-v*(e[1]-a[1]);return M>0&&O<0||M<0&&O>0}function kl(o,e,a){for(const X of a)for(let te=0;te<X.length-1;++te)if((O=[(M=X[te+1])[0]-(w=X[te])[0],M[1]-w[1]])[0]*(L=[(v=e)[0]-(f=o)[0],v[1]-f[1]])[1]-O[1]*L[0]!=0&&Ol(f,v,w,M)&&Ol(w,M,f,v))return!0;var f,v,w,M,O,L;return!1}function Zs(o,e){for(let a=0;a<o.length;++a)if(!so(o[a],e))return!1;for(let a=0;a<o.length-1;++a)if(kl(o[a],o[a+1],e))return!1;return!0}function Aa(o,e){for(let a=0;a<e.length;a++)if(Zs(o,e[a]))return!0;return!1}function Ms(o,e,a){const f=[];for(let v=0;v<o.length;v++){const w=[];for(let M=0;M<o[v].length;M++){const O=ha(o[v][M],a);da(e,O),w.push(O)}f.push(w)}return f}function wo(o,e,a){const f=[];for(let v=0;v<o.length;v++){const w=Ms(o[v],e,a);f.push(w)}return f}function Ao(o,e,a,f){if(o[0]<a[0]||o[0]>a[2]){const v=.5*f;let w=o[0]-a[0]>v?-f:a[0]-o[0]>v?f:0;0===w&&(w=o[0]-a[2]>v?-f:a[2]-o[0]>v?f:0),o[0]+=w}da(e,o)}function $a(o,e,a,f){const v=Math.pow(2,f.z)*Gr,w=[f.x*Gr,f.y*Gr],M=[];for(const O of o)for(const L of O){const X=[L.x+w[0],L.y+w[1]];Ao(X,e,a,v),M.push(X)}return M}function Pa(o,e,a,f){const v=Math.pow(2,f.z)*Gr,w=[f.x*Gr,f.y*Gr],M=[];for(const L of o){const X=[];for(const te of L){const ae=[te.x+w[0],te.y+w[1]];da(e,ae),X.push(ae)}M.push(X)}if(e[2]-e[0]<=v/2){(O=e)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(const L of M)for(const X of L)Ao(X,e,a,v)}var O;return M}class Ws{constructor(e,a){this.type=J,this.geojson=e,this.geometries=a}static parse(e,a){if(2!==e.length)return a.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Nr(e[1])){const f=e[1];if("FeatureCollection"===f.type)for(let v=0;v<f.features.length;++v){const w=f.features[v].geometry.type;if("Polygon"===w||"MultiPolygon"===w)return new Ws(f,f.features[v].geometry)}else if("Feature"===f.type){const v=f.geometry.type;if("Polygon"===v||"MultiPolygon"===v)return new Ws(f,f.geometry)}else if("Polygon"===f.type||"MultiPolygon"===f.type)return new Ws(f,f)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(a,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],M=a.canonicalID();if("Polygon"===f.type){const O=Ms(f.coordinates,w,M),L=$a(a.geometry(),v,w,M);if(!ts(v,w))return!1;for(const X of L)if(!so(X,O))return!1}if("MultiPolygon"===f.type){const O=wo(f.coordinates,w,M),L=$a(a.geometry(),v,w,M);if(!ts(v,w))return!1;for(const X of L)if(!Pl(X,O))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(a,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],M=a.canonicalID();if("Polygon"===f.type){const O=Ms(f.coordinates,w,M),L=Pa(a.geometry(),v,w,M);if(!ts(v,w))return!1;for(const X of L)if(!Zs(X,O))return!1}if("MultiPolygon"===f.type){const O=wo(f.coordinates,w,M),L=Pa(a.geometry(),v,w,M);if(!ts(v,w))return!1;for(const X of L)if(!Aa(X,O))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class _o{constructor(e,a){this.type=a.type,this.name=e,this.boundExpression=a}static parse(e,a){if(2!==e.length||"string"!=typeof e[1])return a.error("'var' expression requires exactly one string literal argument.");const f=e[1];return a.scope.has(f)?new _o(f,a.scope.get(f)):a.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Br{constructor(e,a,f,v){this.name=e,this.type=a,this._evaluate=f,this.args=v}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,a){const f=e[0],v=Br.definitions[f];if(!v)return a.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(v)?v[0]:v.type,M=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,O=M.filter(([X])=>!Array.isArray(X)||X.length===e.length-1);let L=null;for(const[X,te]of O){L=new fs(a.registry,Ss,a.path,null,a.scope);const ae=[];let ge=!1;for(let ve=1;ve<e.length;ve++){const Ce=e[ve],Ve=Array.isArray(X)?X[ve-1]:X.type,ze=L.parse(Ce,1+ae.length,Ve);if(!ze){ge=!0;break}ae.push(ze)}if(!ge)if(Array.isArray(X)&&X.length!==ae.length)L.error(`Expected ${X.length} arguments, but found ${ae.length} instead.`);else{for(let ve=0;ve<ae.length;ve++){const Ce=Array.isArray(X)?X[ve]:X.type,Ve=ae[ve];L.concat(ve+1).checkSubtype(Ce,Ve.type)}if(0===L.errors.length)return new Br(f,w,te,ae)}}if(1===O.length)a.errors.push(...L.errors);else{const X=(O.length?O:M).map(([ae])=>{return ge=ae,Array.isArray(ge)?`(${ge.map(at).join(", ")})`:`(${at(ge.type)}...)`;var ge}).join(" | "),te=[];for(let ae=1;ae<e.length;ae++){const ge=a.parse(e[ae],1+te.length);if(!ge)return null;te.push(at(ge.type))}a.error(`Expected arguments of type ${X}, but found (${te.join(", ")}) instead.`)}return null}static register(e,a){Br.definitions=a;for(const f in a)e[f]=Br}}function Ss(o){if(o instanceof _o)return Ss(o.boundExpression);if(o instanceof Br&&"error"===o.name||o instanceof Kr||o instanceof Ws)return!1;const e=o instanceof wr||o instanceof ur;let a=!0;return o.eachChild(f=>{a=e?a&&Ss(f):a&&f instanceof Or}),!!a&&qs(o)&&Is(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function qs(o){if(o instanceof Br&&("get"===o.name&&1===o.args.length||"feature-state"===o.name||"has"===o.name&&1===o.args.length||"properties"===o.name||"geometry-type"===o.name||"id"===o.name||/^filter-/.test(o.name))||o instanceof Ws)return!1;let e=!0;return o.eachChild(a=>{e&&!qs(a)&&(e=!1)}),e}function Ts(o){if(o instanceof Br&&"feature-state"===o.name)return!1;let e=!0;return o.eachChild(a=>{e&&!Ts(a)&&(e=!1)}),e}function Is(o,e){if(o instanceof Br&&e.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(f=>{a&&!Is(f,e)&&(a=!1)}),a}function ao(o,e){const a=o.length-1;let f,v,w=0,M=a,O=0;for(;w<=M;)if(O=Math.floor((w+M)/2),f=o[O],v=o[O+1],f<=e){if(O===a||e<v)return O;w=O+1}else{if(!(f>e))throw new Ai("Input is not a number.");M=O-1}return 0}class ns{constructor(e,a,f){this.type=e,this.input=a,this.labels=[],this.outputs=[];for(const[v,w]of f)this.labels.push(v),this.outputs.push(w)}static parse(e,a){if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return a.error("Expected an even number of arguments.");const f=a.parse(e[1],1,Se);if(!f)return null;const v=[];let w=null;a.expectedType&&"value"!==a.expectedType.kind&&(w=a.expectedType);for(let M=1;M<e.length;M+=2){const O=1===M?-1/0:e[M],L=e[M+1],X=M,te=M+1;if("number"!=typeof O)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(v.length&&v[v.length-1][0]>=O)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',X);const ae=a.parse(L,te,w);if(!ae)return null;w=w||ae.type,v.push([O,ae])}return new ns(w,f,v)}evaluate(e){const a=this.labels,f=this.outputs;if(1===a.length)return f[0].evaluate(e);const v=this.input.evaluate(e);if(v<=a[0])return f[0].evaluate(e);const w=a.length;return v>=a[w-1]?f[w-1].evaluate(e):f[ao(a,v)].evaluate(e)}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ms(o,e,a){return o+a*(e-o)}function gs(o,e,a){return o.map((f,v)=>ms(f,e[v],a))}const nr={number:ms,color:function(o,e,a,f="rgb"){switch(f){case"rgb":{const[v,w,M,O]=gs(o.rgb,e.rgb,a);return new Ii(v,w,M,O,!1)}case"hcl":{const[v,w,M,O]=o.hcl,[L,X,te,ae]=e.hcl;let ge,ve;if(isNaN(v)||isNaN(L))isNaN(v)?isNaN(L)?ge=NaN:(ge=L,1!==M&&0!==M||(ve=X)):(ge=v,1!==te&&0!==te||(ve=w));else{let vt=L-v;L>v&&vt>180?vt-=360:L<v&&v-L>180&&(vt+=360),ge=v+a*vt}const[Ce,Ve,ze,ct]=function([vt,st,It,Lt]){return vt=isNaN(vt)?0:vt*Jn,ro([It,Math.cos(vt)*st,Math.sin(vt)*st,Lt])}([ge,ve??ms(w,X,a),ms(M,te,a),ms(O,ae,a)]);return new Ii(Ce,Ve,ze,ct,!1)}case"lab":{const[v,w,M,O]=ro(gs(o.lab,e.lab,a));return new Ii(v,w,M,O,!1)}}},array:gs,padding:function(o,e,a){return new xi(gs(o.values,e.values,a))}};class li{constructor(e,a,f,v,w){this.type=e,this.operator=a,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[M,O]of w)this.labels.push(M),this.outputs.push(O)}static interpolationFactor(e,a,f,v){let w=0;if("exponential"===e.name)w=Oa(a,e.base,f,v);else if("linear"===e.name)w=Oa(a,1,f,v);else if("cubic-bezier"===e.name){const M=e.controlPoints;w=new nt(M[0],M[1],M[2],M[3]).solve(Oa(a,1,f,v))}return w}static parse(e,a){let[f,v,w,...M]=e;if(!Array.isArray(v)||0===v.length)return a.error("Expected an interpolation type expression.",1);if("linear"===v[0])v={name:"linear"};else if("exponential"===v[0]){const X=v[1];if("number"!=typeof X)return a.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:X}}else{if("cubic-bezier"!==v[0])return a.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const X=v.slice(1);if(4!==X.length||X.some(te=>"number"!=typeof te||te<0||te>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:X}}}if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(w=a.parse(w,2,Se),!w)return null;const O=[];let L=null;"interpolate-hcl"===f||"interpolate-lab"===f?L=$:a.expectedType&&"value"!==a.expectedType.kind&&(L=a.expectedType);for(let X=0;X<M.length;X+=2){const te=M[X],ae=M[X+1],ge=X+3,ve=X+4;if("number"!=typeof te)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ge);if(O.length&&O[O.length-1][0]>=te)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ge);const Ce=a.parse(ae,ve,L);if(!Ce)return null;L=L||Ce.type,O.push([te,Ce])}return De(L,Se)||De(L,$)||De(L,Ye)||De(L,Ke(Se))?new li(L,f,v,w,O):a.error(`Type ${at(L)} is not interpolatable.`)}evaluate(e){const a=this.labels,f=this.outputs;if(1===a.length)return f[0].evaluate(e);const v=this.input.evaluate(e);if(v<=a[0])return f[0].evaluate(e);const w=a.length;if(v>=a[w-1])return f[w-1].evaluate(e);const M=ao(a,v),O=li.interpolationFactor(this.interpolation,v,a[M],a[M+1]),L=f[M].evaluate(e),X=f[M+1].evaluate(e);switch(this.operator){case"interpolate":return nr[this.type.kind](L,X,O);case"interpolate-hcl":return nr.color(L,X,O,"hcl");case"interpolate-lab":return nr.color(L,X,O,"lab")}}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Oa(o,e,a,f){const v=f-a,w=o-a;return 0===v?0:1===e?w/v:(Math.pow(e,w)-1)/(Math.pow(e,v)-1)}class Ks{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expectected at least one argument.");let f=null;const v=a.expectedType;v&&"value"!==v.kind&&(f=v);const w=[];for(const O of e.slice(1)){const L=a.parse(O,1+w.length,f,void 0,{typeAnnotation:"omit"});if(!L)return null;f=f||L.type,w.push(L)}if(!f)throw new Error("No output type");const M=v&&w.some(O=>Bt(v,O.type));return new Ks(M?_e:f,w)}evaluate(e){let a,f=null,v=0;for(const w of this.args)if(v++,f=w.evaluate(e),f&&f instanceof Fr&&!f.available&&(a||(a=f.name),f=null,v===this.args.length&&(f=a)),null!==f)break;return f}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}class Ys{constructor(e,a){this.type=a.type,this.bindings=[].concat(e),this.result=a}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const a of this.bindings)e(a[1]);e(this.result)}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const f=[];for(let w=1;w<e.length-1;w+=2){const M=e[w];if("string"!=typeof M)return a.error(`Expected string, but found ${typeof M} instead.`,w);if(/[^a-zA-Z0-9_]/.test(M))return a.error("Variable names must contain only alphanumeric characters or '_'.",w);const O=a.parse(e[w+1],w+1);if(!O)return null;f.push([M,O])}const v=a.parse(e[e.length-1],e.length-1,a.expectedType,f);return v?new Ys(f,v):null}outputDefined(){return this.result.outputDefined()}}class _s{constructor(e,a,f){this.type=e,this.index=a,this.input=f}static parse(e,a){if(3!==e.length)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const f=a.parse(e[1],1,Se),v=a.parse(e[2],2,Ke(a.expectedType||_e));return f&&v?new _s(v.type.itemType,f,v):null}evaluate(e){const a=this.index.evaluate(e),f=this.input.evaluate(e);if(a<0)throw new Ai(`Array index out of bounds: ${a} < 0.`);if(a>=f.length)throw new Ai(`Array index out of bounds: ${a} > ${f.length-1}.`);if(a!==Math.floor(a))throw new Ai(`Array index must be an integer, but found ${a} instead.`);return f[a]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Ga{constructor(e,a){this.type=J,this.needle=e,this.haystack=a}static parse(e,a){if(3!==e.length)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const f=a.parse(e[1],1,_e),v=a.parse(e[2],2,_e);return f&&v?xe(f.type,[J,Te,Se,Fe,_e])?new Ga(f,v):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${at(f.type)} instead`):null}evaluate(e){const a=this.needle.evaluate(e),f=this.haystack.evaluate(e);if(!f)return!1;if(!Pe(a,["boolean","string","number","null"]))throw new Ai(`Expected first argument to be of type boolean, string, number or null, but found ${at(ki(a))} instead.`);if(!Pe(f,["string","array"]))throw new Ai(`Expected second argument to be of type array or string, but found ${at(ki(f))} instead.`);return f.indexOf(a)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class kr{constructor(e,a,f){this.type=Se,this.needle=e,this.haystack=a,this.fromIndex=f}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const f=a.parse(e[1],1,_e),v=a.parse(e[2],2,_e);if(!f||!v)return null;if(!xe(f.type,[J,Te,Se,Fe,_e]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${at(f.type)} instead`);if(4===e.length){const w=a.parse(e[3],3,Se);return w?new kr(f,v,w):null}return new kr(f,v)}evaluate(e){const a=this.needle.evaluate(e),f=this.haystack.evaluate(e);if(!Pe(a,["boolean","string","number","null"]))throw new Ai(`Expected first argument to be of type boolean, string, number or null, but found ${at(ki(a))} instead.`);if(!Pe(f,["string","array"]))throw new Ai(`Expected second argument to be of type array or string, but found ${at(ki(f))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(e);return f.indexOf(a,v)}return f.indexOf(a)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Xs{constructor(e,a,f,v,w,M){this.inputType=e,this.type=a,this.input=f,this.cases=v,this.outputs=w,this.otherwise=M}static parse(e,a){if(e.length<5)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return a.error("Expected an even number of arguments.");let f,v;a.expectedType&&"value"!==a.expectedType.kind&&(v=a.expectedType);const w={},M=[];for(let X=2;X<e.length-1;X+=2){let te=e[X];const ae=e[X+1];Array.isArray(te)||(te=[te]);const ge=a.concat(X);if(0===te.length)return ge.error("Expected at least one branch label.");for(const Ce of te){if("number"!=typeof Ce&&"string"!=typeof Ce)return ge.error("Branch labels must be numbers or strings.");if("number"==typeof Ce&&Math.abs(Ce)>Number.MAX_SAFE_INTEGER)return ge.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Ce&&Math.floor(Ce)!==Ce)return ge.error("Numeric branch labels must be integer values.");if(f){if(ge.checkSubtype(f,ki(Ce)))return null}else f=ki(Ce);if(void 0!==w[String(Ce)])return ge.error("Branch labels must be unique.");w[String(Ce)]=M.length}const ve=a.parse(ae,X,v);if(!ve)return null;v=v||ve.type,M.push(ve)}const O=a.parse(e[1],1,_e);if(!O)return null;const L=a.parse(e[e.length-1],e.length-1,v);return L?"value"!==O.type.kind&&a.concat(1).checkSubtype(f,O.type)?null:new Xs(f,v,O,w,M,L):null}evaluate(e){const a=this.input.evaluate(e);return(ki(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class ys{constructor(e,a,f){this.type=e,this.branches=a,this.otherwise=f}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return a.error("Expected an odd number of arguments.");let f;a.expectedType&&"value"!==a.expectedType.kind&&(f=a.expectedType);const v=[];for(let M=1;M<e.length-1;M+=2){const O=a.parse(e[M],M,J);if(!O)return null;const L=a.parse(e[M+1],M+1,f);if(!L)return null;v.push([O,L]),f=f||L.type}const w=a.parse(e[e.length-1],e.length-1,f);if(!w)return null;if(!f)throw new Error("Can't infer output type");return new ys(f,v,w)}evaluate(e){for(const[a,f]of this.branches)if(a.evaluate(e))return f.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[a,f]of this.branches)e(a),e(f);e(this.otherwise)}outputDefined(){return this.branches.every(([e,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Po{constructor(e,a,f,v){this.type=e,this.input=a,this.beginIndex=f,this.endIndex=v}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const f=a.parse(e[1],1,_e),v=a.parse(e[2],2,Se);if(!f||!v)return null;if(!xe(f.type,[Ke(_e),Te,_e]))return a.error(`Expected first argument to be of type array or string, but found ${at(f.type)} instead`);if(4===e.length){const w=a.parse(e[3],3,Se);return w?new Po(f.type,f,v,w):null}return new Po(f.type,f,v)}evaluate(e){const a=this.input.evaluate(e),f=this.beginIndex.evaluate(e);if(!Pe(a,["string","array"]))throw new Ai(`Expected first argument to be of type array or string, but found ${at(ki(a))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(e);return a.slice(f,v)}return a.slice(f)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function is(o,e){return"=="===o||"!="===o?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function tc(o,e,a,f){return 0===f.compare(e,a)}function Ji(o,e,a){const f="=="!==o&&"!="!==o;return class dC{constructor(w,M,O){this.type=J,this.lhs=w,this.rhs=M,this.collator=O,this.hasUntypedArgument="value"===w.type.kind||"value"===M.type.kind}static parse(w,M){if(3!==w.length&&4!==w.length)return M.error("Expected two or three arguments.");const O=w[0];let L=M.parse(w[1],1,_e);if(!L)return null;if(!is(O,L.type))return M.concat(1).error(`"${O}" comparisons are not supported for type '${at(L.type)}'.`);let X=M.parse(w[2],2,_e);if(!X)return null;if(!is(O,X.type))return M.concat(2).error(`"${O}" comparisons are not supported for type '${at(X.type)}'.`);if(L.type.kind!==X.type.kind&&"value"!==L.type.kind&&"value"!==X.type.kind)return M.error(`Cannot compare types '${at(L.type)}' and '${at(X.type)}'.`);f&&("value"===L.type.kind&&"value"!==X.type.kind?L=new ur(X.type,[L]):"value"!==L.type.kind&&"value"===X.type.kind&&(X=new ur(L.type,[X])));let te=null;if(4===w.length){if("string"!==L.type.kind&&"string"!==X.type.kind&&"value"!==L.type.kind&&"value"!==X.type.kind)return M.error("Cannot use collator to compare non-string types.");if(te=M.parse(w[3],3,ke),!te)return null}return new dC(L,X,te)}evaluate(w){const M=this.lhs.evaluate(w),O=this.rhs.evaluate(w);if(f&&this.hasUntypedArgument){const L=ki(M),X=ki(O);if(L.kind!==X.kind||"string"!==L.kind&&"number"!==L.kind)throw new Ai(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${L.kind}, ${X.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const L=ki(M),X=ki(O);if("string"!==L.kind||"string"!==X.kind)return e(w,M,O)}return this.collator?a(w,M,O,this.collator.evaluate(w)):e(w,M,O)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const Za=Ji("==",function(o,e,a){return e===a},tc),Wa=Ji("!=",function(o,e,a){return e!==a},function(o,e,a,f){return!tc(0,e,a,f)}),ka=Ji("<",function(o,e,a){return e<a},function(o,e,a,f){return f.compare(e,a)<0}),hr=Ji(">",function(o,e,a){return e>a},function(o,e,a,f){return f.compare(e,a)>0}),qa=Ji("<=",function(o,e,a){return e<=a},function(o,e,a,f){return f.compare(e,a)<=0}),vs=Ji(">=",function(o,e,a){return e>=a},function(o,e,a,f){return f.compare(e,a)>=0});class Oo{constructor(e,a,f,v,w){this.type=Te,this.number=e,this.locale=a,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(e,a){if(3!==e.length)return a.error("Expected two arguments.");const f=a.parse(e[1],1,Se);if(!f)return null;const v=e[2];if("object"!=typeof v||Array.isArray(v))return a.error("NumberFormat options argument must be an object.");let w=null;if(v.locale&&(w=a.parse(v.locale,1,Te),!w))return null;let M=null;if(v.currency&&(M=a.parse(v.currency,1,Te),!M))return null;let O=null;if(v["min-fraction-digits"]&&(O=a.parse(v["min-fraction-digits"],1,Se),!O))return null;let L=null;return v["max-fraction-digits"]&&(L=a.parse(v["max-fraction-digits"],1,Se),!L)?null:new Oo(f,w,M,O,L)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class ji{constructor(e){this.type=rt,this.sections=e}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const f=e[1];if(!Array.isArray(f)&&"object"==typeof f)return a.error("First argument must be an image or text section.");const v=[];let w=!1;for(let M=1;M<=e.length-1;++M){const O=e[M];if(w&&"object"==typeof O&&!Array.isArray(O)){w=!1;let L=null;if(O["font-scale"]&&(L=a.parse(O["font-scale"],1,Se),!L))return null;let X=null;if(O["text-font"]&&(X=a.parse(O["text-font"],1,Ke(Te)),!X))return null;let te=null;if(O["text-color"]&&(te=a.parse(O["text-color"],1,$),!te))return null;const ae=v[v.length-1];ae.scale=L,ae.font=X,ae.textColor=te}else{const L=a.parse(e[M],1,_e);if(!L)return null;const X=L.type.kind;if("string"!==X&&"value"!==X&&"null"!==X&&"resolvedImage"!==X)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,v.push({content:L,scale:null,font:null,textColor:null})}}return new ji(v)}evaluate(e){return new Er(this.sections.map(a=>{const f=a.content.evaluate(e);return ki(f)===Xe?new zo("",f,null,null,null):new zo($r(f),null,a.scale?a.scale.evaluate(e):null,a.font?a.font.evaluate(e).join(","):null,a.textColor?a.textColor.evaluate(e):null)}))}eachChild(e){for(const a of this.sections)e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor)}outputDefined(){return!1}}class fl{constructor(e){this.type=Xe,this.input=e}static parse(e,a){if(2!==e.length)return a.error("Expected two arguments.");const f=a.parse(e[1],1,Te);return f?new fl(f):a.error("No image name provided.")}evaluate(e){const a=this.input.evaluate(e),f=Fr.fromString(a);return f&&e.availableImages&&(f.available=e.availableImages.indexOf(a)>-1),f}eachChild(e){e(this.input)}outputDefined(){return!1}}class ko{constructor(e){this.type=Se,this.input=e}static parse(e,a){if(2!==e.length)return a.error(`Expected 1 argument, but found ${e.length-1} instead.`);const f=a.parse(e[1],1);return f?"array"!==f.type.kind&&"string"!==f.type.kind&&"value"!==f.type.kind?a.error(`Expected argument of type string or array, but found ${at(f.type)} instead.`):new ko(f):null}evaluate(e){const a=this.input.evaluate(e);if("string"==typeof a||Array.isArray(a))return a.length;throw new Ai(`Expected value to be of type string or array, but found ${at(ki(a))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const As={"==":Za,"!=":Wa,">":hr,"<":ka,">=":vs,"<=":qa,array:ur,at:_s,boolean:ur,case:ys,coalesce:Ks,collator:Kr,format:ji,image:fl,in:Ga,"index-of":kr,interpolate:li,"interpolate-hcl":li,"interpolate-lab":li,length:ko,let:Ys,literal:Or,match:Xs,number:ur,"number-format":Oo,object:ur,slice:Po,step:ns,string:ur,"to-boolean":wr,"to-color":wr,"to-number":wr,"to-string":wr,var:_o,within:Ws};function vr(o,[e,a,f,v]){e=e.evaluate(o),a=a.evaluate(o),f=f.evaluate(o);const w=v?v.evaluate(o):1,M=ps(e,a,f,w);if(M)throw new Ai(M);return new Ii(e/255,a/255,f/255,w,!1)}function Ps(o,e){return o in e}function Vo(o,e){const a=e[o];return void 0===a?null:a}function ri(o){return{type:o}}function ml(o){return{result:"success",value:o}}function pa(o){return{result:"error",value:o}}function Cr(o){return"data-driven"===o["property-type"]||"cross-faded-data-driven"===o["property-type"]}function Os(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ra(o){return!!o.expression&&o.expression.interpolated}function Ei(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":null===o?"null":typeof o}function bs(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}function nc(o){return o}function Jt(o,e){const a="color"===e.type,f=o.stops&&"object"==typeof o.stops[0][0],v=f||!(f||void 0!==o.property),w=o.type||(Ra(e)?"exponential":"interval");if(a||"padding"===e.type){const te=a?Ii.parse:xi.parse;(o=bt({},o)).stops&&(o.stops=o.stops.map(ae=>[ae[0],te(ae[1])])),o.default=te(o.default?o.default:e.default)}if(o.colorSpace&&"rgb"!==(M=o.colorSpace)&&"hcl"!==M&&"lab"!==M)throw new Error(`Unknown color space: "${o.colorSpace}"`);var M;let O,L,X;if("exponential"===w)O=pr;else if("interval"===w)O=Pi;else if("categorical"===w){O=La,L=Object.create(null);for(const te of o.stops)L[te[0]]=te[1];X=typeof o.stops[0][0]}else{if("identity"!==w)throw new Error(`Unknown function type "${w}"`);O=Q}if(f){const te={},ae=[];for(let Ce=0;Ce<o.stops.length;Ce++){const Ve=o.stops[Ce],ze=Ve[0].zoom;void 0===te[ze]&&(te[ze]={zoom:ze,type:o.type,property:o.property,default:o.default,stops:[]},ae.push(ze)),te[ze].stops.push([Ve[0].value,Ve[1]])}const ge=[];for(const Ce of ae)ge.push([te[Ce].zoom,Jt(te[Ce],e)]);const ve={name:"linear"};return{kind:"composite",interpolationType:ve,interpolationFactor:li.interpolationFactor.bind(void 0,ve),zoomStops:ge.map(Ce=>Ce[0]),evaluate:({zoom:Ce},Ve)=>pr({stops:ge,base:o.base},e,Ce).evaluate(Ce,Ve)}}if(v){const te="exponential"===w?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:te,interpolationFactor:li.interpolationFactor.bind(void 0,te),zoomStops:o.stops.map(ae=>ae[0]),evaluate:({zoom:ae})=>O(o,e,ae,L,X)}}return{kind:"source",evaluate(te,ae){const ge=ae&&ae.properties?ae.properties[o.property]:void 0;return void 0===ge?Vn(o.default,e.default):O(o,e,ge,L,X)}}}function Vn(o,e,a){return void 0!==o?o:void 0!==e?e:void 0!==a?a:void 0}function La(o,e,a,f,v){return Vn(typeof a===v?f[a]:void 0,o.default,e.default)}function Pi(o,e,a){if("number"!==Ei(a))return Vn(o.default,e.default);const f=o.stops.length;if(1===f||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[f-1][0])return o.stops[f-1][1];const v=ao(o.stops.map(w=>w[0]),a);return o.stops[v][1]}function pr(o,e,a){const f=void 0!==o.base?o.base:1;if("number"!==Ei(a))return Vn(o.default,e.default);const v=o.stops.length;if(1===v||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[v-1][0])return o.stops[v-1][1];const w=ao(o.stops.map(te=>te[0]),a),M=function(te,ae,ge,ve){const Ce=ve-ge,Ve=te-ge;return 0===Ce?0:1===ae?Ve/Ce:(Math.pow(ae,Ve)-1)/(Math.pow(ae,Ce)-1)}(a,f,o.stops[w][0],o.stops[w+1][0]),O=o.stops[w][1],L=o.stops[w+1][1],X=nr[e.type]||nc;return"function"==typeof O.evaluate?{evaluate(...te){const ae=O.evaluate.apply(void 0,te),ge=L.evaluate.apply(void 0,te);if(void 0!==ae&&void 0!==ge)return X(ae,ge,M,o.colorSpace)}}:X(O,L,M,o.colorSpace)}function Q(o,e,a){switch(e.type){case"color":a=Ii.parse(a);break;case"formatted":a=Er.fromString(a.toString());break;case"resolvedImage":a=Fr.fromString(a.toString());break;case"padding":a=xi.parse(a);break;default:Ei(a)===e.type||"enum"===e.type&&e.values[a]||(a=void 0)}return Vn(a,o.default,e.default)}Br.register(As,{error:[{kind:"error"},[Te],(o,[e])=>{throw new Ai(e.evaluate(o))}],typeof:[Te,[_e],(o,[e])=>at(ki(e.evaluate(o)))],"to-rgba":[Ke(Se,4),[$],(o,[e])=>{const[a,f,v,w]=e.evaluate(o).rgb;return[255*a,255*f,255*v,w]}],rgb:[$,[Se,Se,Se],vr],rgba:[$,[Se,Se,Se,Se],vr],has:{type:J,overloads:[[[Te],(o,[e])=>Ps(e.evaluate(o),o.properties())],[[Te,re],(o,[e,a])=>Ps(e.evaluate(o),a.evaluate(o))]]},get:{type:_e,overloads:[[[Te],(o,[e])=>Vo(e.evaluate(o),o.properties())],[[Te,re],(o,[e,a])=>Vo(e.evaluate(o),a.evaluate(o))]]},"feature-state":[_e,[Te],(o,[e])=>Vo(e.evaluate(o),o.featureState||{})],properties:[re,[],o=>o.properties()],"geometry-type":[Te,[],o=>o.geometryType()],id:[_e,[],o=>o.id()],zoom:[Se,[],o=>o.globals.zoom],"heatmap-density":[Se,[],o=>o.globals.heatmapDensity||0],"line-progress":[Se,[],o=>o.globals.lineProgress||0],accumulated:[_e,[],o=>void 0===o.globals.accumulated?null:o.globals.accumulated],"+":[Se,ri(Se),(o,e)=>{let a=0;for(const f of e)a+=f.evaluate(o);return a}],"*":[Se,ri(Se),(o,e)=>{let a=1;for(const f of e)a*=f.evaluate(o);return a}],"-":{type:Se,overloads:[[[Se,Se],(o,[e,a])=>e.evaluate(o)-a.evaluate(o)],[[Se],(o,[e])=>-e.evaluate(o)]]},"/":[Se,[Se,Se],(o,[e,a])=>e.evaluate(o)/a.evaluate(o)],"%":[Se,[Se,Se],(o,[e,a])=>e.evaluate(o)%a.evaluate(o)],ln2:[Se,[],()=>Math.LN2],pi:[Se,[],()=>Math.PI],e:[Se,[],()=>Math.E],"^":[Se,[Se,Se],(o,[e,a])=>Math.pow(e.evaluate(o),a.evaluate(o))],sqrt:[Se,[Se],(o,[e])=>Math.sqrt(e.evaluate(o))],log10:[Se,[Se],(o,[e])=>Math.log(e.evaluate(o))/Math.LN10],ln:[Se,[Se],(o,[e])=>Math.log(e.evaluate(o))],log2:[Se,[Se],(o,[e])=>Math.log(e.evaluate(o))/Math.LN2],sin:[Se,[Se],(o,[e])=>Math.sin(e.evaluate(o))],cos:[Se,[Se],(o,[e])=>Math.cos(e.evaluate(o))],tan:[Se,[Se],(o,[e])=>Math.tan(e.evaluate(o))],asin:[Se,[Se],(o,[e])=>Math.asin(e.evaluate(o))],acos:[Se,[Se],(o,[e])=>Math.acos(e.evaluate(o))],atan:[Se,[Se],(o,[e])=>Math.atan(e.evaluate(o))],min:[Se,ri(Se),(o,e)=>Math.min(...e.map(a=>a.evaluate(o)))],max:[Se,ri(Se),(o,e)=>Math.max(...e.map(a=>a.evaluate(o)))],abs:[Se,[Se],(o,[e])=>Math.abs(e.evaluate(o))],round:[Se,[Se],(o,[e])=>{const a=e.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[Se,[Se],(o,[e])=>Math.floor(e.evaluate(o))],ceil:[Se,[Se],(o,[e])=>Math.ceil(e.evaluate(o))],"filter-==":[J,[Te,_e],(o,[e,a])=>o.properties()[e.value]===a.value],"filter-id-==":[J,[_e],(o,[e])=>o.id()===e.value],"filter-type-==":[J,[Te],(o,[e])=>o.geometryType()===e.value],"filter-<":[J,[Te,_e],(o,[e,a])=>{const f=o.properties()[e.value],v=a.value;return typeof f==typeof v&&f<v}],"filter-id-<":[J,[_e],(o,[e])=>{const a=o.id(),f=e.value;return typeof a==typeof f&&a<f}],"filter->":[J,[Te,_e],(o,[e,a])=>{const f=o.properties()[e.value],v=a.value;return typeof f==typeof v&&f>v}],"filter-id->":[J,[_e],(o,[e])=>{const a=o.id(),f=e.value;return typeof a==typeof f&&a>f}],"filter-<=":[J,[Te,_e],(o,[e,a])=>{const f=o.properties()[e.value],v=a.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[J,[_e],(o,[e])=>{const a=o.id(),f=e.value;return typeof a==typeof f&&a<=f}],"filter->=":[J,[Te,_e],(o,[e,a])=>{const f=o.properties()[e.value],v=a.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[J,[_e],(o,[e])=>{const a=o.id(),f=e.value;return typeof a==typeof f&&a>=f}],"filter-has":[J,[_e],(o,[e])=>e.value in o.properties()],"filter-has-id":[J,[],o=>null!==o.id()&&void 0!==o.id()],"filter-type-in":[J,[Ke(Te)],(o,[e])=>e.value.indexOf(o.geometryType())>=0],"filter-id-in":[J,[Ke(_e)],(o,[e])=>e.value.indexOf(o.id())>=0],"filter-in-small":[J,[Te,Ke(_e)],(o,[e,a])=>a.value.indexOf(o.properties()[e.value])>=0],"filter-in-large":[J,[Te,Ke(_e)],(o,[e,a])=>function(f,v,w,M){for(;w<=M;){const O=w+M>>1;if(v[O]===f)return!0;v[O]>f?M=O-1:w=O+1}return!1}(o.properties()[e.value],a.value,0,a.value.length-1)],all:{type:J,overloads:[[[J,J],(o,[e,a])=>e.evaluate(o)&&a.evaluate(o)],[ri(J),(o,e)=>{for(const a of e)if(!a.evaluate(o))return!1;return!0}]]},any:{type:J,overloads:[[[J,J],(o,[e,a])=>e.evaluate(o)||a.evaluate(o)],[ri(J),(o,e)=>{for(const a of e)if(a.evaluate(o))return!0;return!1}]]},"!":[J,[J],(o,[e])=>!e.evaluate(o)],"is-supported-script":[J,[Te],(o,[e])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(e.evaluate(o))}],upcase:[Te,[Te],(o,[e])=>e.evaluate(o).toUpperCase()],downcase:[Te,[Te],(o,[e])=>e.evaluate(o).toLowerCase()],concat:[Te,ri(_e),(o,e)=>e.map(a=>$r(a.evaluate(o))).join("")],"resolved-locale":[Te,[ke],(o,[e])=>e.evaluate(o).resolvedLocale()]});class K{constructor(e,a){var f;this.expression=e,this._warningHistory={},this._evaluator=new Gs,this._defaultValue=a?"color"===(f=a).type&&bs(f.default)?new Ii(0,0,0,0):"color"===f.type?Ii.parse(f.default)||null:"padding"===f.type?xi.parse(f.default)||null:void 0===f.default?null:f.default:null,this._enumValues=a&&"enum"===a.type?a.values:null}evaluateWithoutErrorHandling(e,a,f,v,w,M){return this._evaluator.globals=e,this._evaluator.feature=a,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(e,a,f,v,w,M){this._evaluator.globals=e,this._evaluator.feature=a||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=M||null;try{const O=this.expression.evaluate(this._evaluator);if(null==O||"number"==typeof O&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new Ai(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}}}function W(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in As}function ye(o,e){const a=new fs(As,Ss,[],e?function(v){const w={color:$,string:Te,number:Se,enum:Te,boolean:J,formatted:rt,padding:Ye,resolvedImage:Xe};return"array"===v.type?Ke(w[v.value]||_e,v.length):w[v.type]}(e):void 0),f=a.parse(o,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return f?ml(new K(f,e)):pa(a.errors)}class Ut{constructor(e,a){this.kind=e,this._styleExpression=a,this.isStateDependent="constant"!==e&&!Ts(a.expression)}evaluateWithoutErrorHandling(e,a,f,v,w,M){return this._styleExpression.evaluateWithoutErrorHandling(e,a,f,v,w,M)}evaluate(e,a,f,v,w,M){return this._styleExpression.evaluate(e,a,f,v,w,M)}}class Yn{constructor(e,a,f,v){this.kind=e,this.zoomStops=f,this._styleExpression=a,this.isStateDependent="camera"!==e&&!Ts(a.expression),this.interpolationType=v}evaluateWithoutErrorHandling(e,a,f,v,w,M){return this._styleExpression.evaluateWithoutErrorHandling(e,a,f,v,w,M)}evaluate(e,a,f,v,w,M){return this._styleExpression.evaluate(e,a,f,v,w,M)}interpolationFactor(e,a,f){return this.interpolationType?li.interpolationFactor(this.interpolationType,e,a,f):0}}function Dr(o,e){const a=ye(o,e);if("error"===a.result)return a;const f=a.value.expression,v=qs(f);if(!v&&!Cr(e))return pa([new et("","data expressions not supported")]);const w=Is(f,["zoom"]);if(!w&&!Os(e))return pa([new et("","zoom expressions not supported")]);const M=Mr(f);return M||w?M instanceof et?pa([M]):M instanceof li&&!Ra(e)?pa([new et("",'"interpolate" expressions cannot be used with this property')]):ml(M?new Yn(v?"camera":"composite",a.value,M.labels,M instanceof li?M.interpolation:void 0):new Ut(v?"constant":"source",a.value)):pa([new et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yo{constructor(e,a){this._parameters=e,this._specification=a,bt(this,Jt(this._parameters,this._specification))}static deserialize(e){return new yo(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Mr(o){let e=null;if(o instanceof Ys)e=Mr(o.result);else if(o instanceof Ks){for(const a of o.args)if(e=Mr(a),e)break}else(o instanceof ns||o instanceof li)&&o.input instanceof Br&&"zoom"===o.input.name&&(e=o);return e instanceof et||o.eachChild(a=>{const f=Mr(a);f instanceof et?e=f:!e&&f?e=new et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&f&&e!==f&&(e=new et("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Qi(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const e of o.slice(1))if(!Qi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const rs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fa(o){if(null==o)return{filter:()=>!0,needGeometry:!1};Qi(o)||(o=Rl(o));const e=ye(o,rs);if("error"===e.result)throw new Error(e.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,f,v)=>e.value.evaluate(a,f,{},v),needGeometry:ks(o)}}function ma(o,e){return o<e?-1:o>e?1:0}function ks(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(let e=1;e<o.length;e++)if(ks(o[e]))return!0;return!1}function Rl(o){if(!o)return!0;const e=o[0];return o.length<=1?"any"!==e:"=="===e?Ll(o[1],o[2],"=="):"!="===e?ga(Ll(o[1],o[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Ll(o[1],o[2],e):"any"===e?(a=o.slice(1),["any"].concat(a.map(Rl))):"all"===e?["all"].concat(o.slice(1).map(Rl)):"none"===e?["all"].concat(o.slice(1).map(Rl).map(ga)):"in"===e?Ic(o[1],o.slice(2)):"!in"===e?ga(Ic(o[1],o.slice(2))):"has"===e?Ac(o[1]):"!has"===e?ga(Ac(o[1])):"within"!==e||o;var a}function Ll(o,e,a){switch(o){case"$type":return[`filter-type-${a}`,e];case"$id":return[`filter-id-${a}`,e];default:return[`filter-${a}`,o,e]}}function Ic(o,e){if(0===e.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(a=>typeof a!=typeof e[0])?["filter-in-large",o,["literal",e.sort(ma)]]:["filter-in-small",o,["literal",e]]}}function Ac(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ga(o){return["!",o]}function _a(o){const e=typeof o;if("number"===e||"boolean"===e||"string"===e||null==o)return JSON.stringify(o);if(Array.isArray(o)){let v="[";for(const w of o)v+=`${_a(w)},`;return`${v}]`}const a=Object.keys(o).sort();let f="{";for(let v=0;v<a.length;v++)f+=`${JSON.stringify(a[v])}:${_a(o[a[v]])},`;return`${f}}`}function gl(o){let e="";for(const a of fe)e+=`/${_a(o[a])}`;return e}function Fa(o){const e=o.value;return e?[new Nt(o.key,e,"constants have been deprecated as of v8")]:[]}function br(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Uo(o){if(Array.isArray(o))return o.map(Uo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const e={};for(const a in o)e[a]=Uo(o[a]);return e}return br(o)}function jo(o){const e=o.key,a=o.value,f=o.valueSpec||{},v=o.objectElementValidators||{},w=o.style,M=o.styleSpec,O=o.validateSpec;let L=[];const X=Ei(a);if("object"!==X)return[new Nt(e,a,`object expected, ${X} found`)];for(const te in a){const ae=te.split(".")[0],ge=f[ae]||f["*"];let ve;if(v[ae])ve=v[ae];else if(f[ae])ve=O;else if(v["*"])ve=v["*"];else{if(!f["*"]){L.push(new Nt(e,a[te],`unknown property "${te}"`));continue}ve=O}L=L.concat(ve({key:(e&&`${e}.`)+te,value:a[te],valueSpec:ge,style:w,styleSpec:M,object:a,objectKey:te,validateSpec:O},a))}for(const te in f)v[te]||f[te].required&&void 0===f[te].default&&void 0===a[te]&&L.push(new Nt(e,a,`missing required property "${te}"`));return L}function Ka(o){const e=o.value,a=o.valueSpec,f=o.style,v=o.styleSpec,w=o.key,M=o.arrayElementValidator||o.validateSpec;if("array"!==Ei(e))return[new Nt(w,e,`array expected, ${Ei(e)} found`)];if(a.length&&e.length!==a.length)return[new Nt(w,e,`array length ${a.length} expected, length ${e.length} found`)];if(a["min-length"]&&e.length<a["min-length"])return[new Nt(w,e,`array length at least ${a["min-length"]} expected, length ${e.length} found`)];let O={type:a.value,values:a.values};v.$version<7&&(O.function=a.function),"object"===Ei(a.value)&&(O=a.value);let L=[];for(let X=0;X<e.length;X++)L=L.concat(M({array:e,arrayIndex:X,value:e[X],valueSpec:O,validateSpec:o.validateSpec,style:f,styleSpec:v,key:`${w}[${X}]`}));return L}function Ya(o){const e=o.key,a=o.value,f=o.valueSpec;let v=Ei(a);return"number"===v&&a!=a&&(v="NaN"),"number"!==v?[new Nt(e,a,`number expected, ${v} found`)]:"minimum"in f&&a<f.minimum?[new Nt(e,a,`${a} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&a>f.maximum?[new Nt(e,a,`${a} is greater than the maximum value ${f.maximum}`)]:[]}function Zr(o){const e=o.valueSpec,a=br(o.value.type);let f,v,w,M={};const O="categorical"!==a&&void 0===o.value.property,L=!O,X="array"===Ei(o.value.stops)&&"array"===Ei(o.value.stops[0])&&"object"===Ei(o.value.stops[0][0]),te=jo({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ve){if("identity"===a)return[new Nt(ve.key,ve.value,'identity function may not have a "stops" property')];let Ce=[];const Ve=ve.value;return Ce=Ce.concat(Ka({key:ve.key,value:Ve,valueSpec:ve.valueSpec,validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec,arrayElementValidator:ae})),"array"===Ei(Ve)&&0===Ve.length&&Ce.push(new Nt(ve.key,Ve,"array must have at least one stop")),Ce},default:function(ve){return ve.validateSpec({key:ve.key,value:ve.value,valueSpec:e,validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec})}}});return"identity"===a&&O&&te.push(new Nt(o.key,o.value,'missing required property "property"')),"identity"===a||o.value.stops||te.push(new Nt(o.key,o.value,'missing required property "stops"')),"exponential"===a&&o.valueSpec.expression&&!Ra(o.valueSpec)&&te.push(new Nt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(L&&!Cr(o.valueSpec)?te.push(new Nt(o.key,o.value,"property functions not supported")):O&&!Os(o.valueSpec)&&te.push(new Nt(o.key,o.value,"zoom functions not supported"))),"categorical"!==a&&!X||void 0!==o.value.property||te.push(new Nt(o.key,o.value,'"property" property is required')),te;function ae(ve){let Ce=[];const Ve=ve.value,ze=ve.key;if("array"!==Ei(Ve))return[new Nt(ze,Ve,`array expected, ${Ei(Ve)} found`)];if(2!==Ve.length)return[new Nt(ze,Ve,`array length 2 expected, length ${Ve.length} found`)];if(X){if("object"!==Ei(Ve[0]))return[new Nt(ze,Ve,`object expected, ${Ei(Ve[0])} found`)];if(void 0===Ve[0].zoom)return[new Nt(ze,Ve,"object stop key must have zoom")];if(void 0===Ve[0].value)return[new Nt(ze,Ve,"object stop key must have value")];if(w&&w>br(Ve[0].zoom))return[new Nt(ze,Ve[0].zoom,"stop zoom values must appear in ascending order")];br(Ve[0].zoom)!==w&&(w=br(Ve[0].zoom),v=void 0,M={}),Ce=Ce.concat(jo({key:`${ze}[0]`,value:Ve[0],valueSpec:{zoom:{}},validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec,objectElementValidators:{zoom:Ya,value:ge}}))}else Ce=Ce.concat(ge({key:`${ze}[0]`,value:Ve[0],valueSpec:{},validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec},Ve));return W(Uo(Ve[1]))?Ce.concat([new Nt(`${ze}[1]`,Ve[1],"expressions are not allowed in function stops.")]):Ce.concat(ve.validateSpec({key:`${ze}[1]`,value:Ve[1],valueSpec:e,validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec}))}function ge(ve,Ce){const Ve=Ei(ve.value),ze=br(ve.value),ct=null!==ve.value?ve.value:Ce;if(f){if(Ve!==f)return[new Nt(ve.key,ct,`${Ve} stop domain type must match previous stop domain type ${f}`)]}else f=Ve;if("number"!==Ve&&"string"!==Ve&&"boolean"!==Ve)return[new Nt(ve.key,ct,"stop domain value must be a number, string, or boolean")];if("number"!==Ve&&"categorical"!==a){let vt=`number expected, ${Ve} found`;return Cr(e)&&void 0===a&&(vt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Nt(ve.key,ct,vt)]}return"categorical"!==a||"number"!==Ve||isFinite(ze)&&Math.floor(ze)===ze?"categorical"!==a&&"number"===Ve&&void 0!==v&&ze<v?[new Nt(ve.key,ct,"stop domain values must appear in ascending order")]:(v=ze,"categorical"===a&&ze in M?[new Nt(ve.key,ct,"stop domain values must be unique")]:(M[ze]=!0,[])):[new Nt(ve.key,ct,`integer expected, found ${ze}`)]}}function U(o){const e=("property"===o.expressionContext?Dr:ye)(Uo(o.value),o.valueSpec);if("error"===e.result)return e.value.map(f=>new Nt(`${o.key}${f.key}`,o.value,f.message));const a=e.value.expression||e.value._styleExpression.expression;if("property"===o.expressionContext&&"text-font"===o.propertyKey&&!a.outputDefined())return[new Nt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===o.expressionContext&&"layout"===o.propertyType&&!Ts(a))return[new Nt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===o.expressionContext&&!Ts(a))return[new Nt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&0===o.expressionContext.indexOf("cluster")){if(!Is(a,["zoom","feature-state"]))return[new Nt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===o.expressionContext&&!qs(a))return[new Nt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oe(o){const e=o.key,a=o.value,f=o.valueSpec,v=[];return Array.isArray(f.values)?-1===f.values.indexOf(br(a))&&v.push(new Nt(e,a,`expected one of [${f.values.join(", ")}], ${JSON.stringify(a)} found`)):-1===Object.keys(f.values).indexOf(br(a))&&v.push(new Nt(e,a,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(a)} found`)),v}function q(o){return Qi(Uo(o.value))?U(bt({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):be(o)}function be(o){const e=o.value,a=o.key;if("array"!==Ei(e))return[new Nt(a,e,`array expected, ${Ei(e)} found`)];const f=o.styleSpec;let v,w=[];if(e.length<1)return[new Nt(a,e,"filter array must have at least 1 element")];switch(w=w.concat(oe({key:`${a}[0]`,value:e[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),br(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===br(e[1])&&w.push(new Nt(a,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&w.push(new Nt(a,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(v=Ei(e[1]),"string"!==v&&w.push(new Nt(`${a}[1]`,e[1],`string expected, ${v} found`)));for(let M=2;M<e.length;M++)v=Ei(e[M]),"$type"===br(e[1])?w=w.concat(oe({key:`${a}[${M}]`,value:e[M],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):"string"!==v&&"number"!==v&&"boolean"!==v&&w.push(new Nt(`${a}[${M}]`,e[M],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let M=1;M<e.length;M++)w=w.concat(be({key:`${a}[${M}]`,value:e[M],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":v=Ei(e[1]),2!==e.length?w.push(new Nt(a,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==v&&w.push(new Nt(`${a}[1]`,e[1],`string expected, ${v} found`));break;case"within":v=Ei(e[1]),2!==e.length?w.push(new Nt(a,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==v&&w.push(new Nt(`${a}[1]`,e[1],`object expected, ${v} found`))}return w}function Qe(o,e){const a=o.key,f=o.validateSpec,v=o.style,w=o.styleSpec,M=o.value,O=o.objectKey,L=w[`${e}_${o.layerType}`];if(!L)return[];const X=O.match(/^(.*)-transition$/);if("paint"===e&&X&&L[X[1]]&&L[X[1]].transition)return f({key:a,value:M,valueSpec:w.transition,style:v,styleSpec:w});const te=o.valueSpec||L[O];if(!te)return[new Nt(a,M,`unknown property "${O}"`)];let ae;if("string"===Ei(M)&&Cr(te)&&!te.tokens&&(ae=/^{([^}]+)}$/.exec(M)))return[new Nt(a,M,`"${O}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ae[1])} }\`.`)];const ge=[];return"symbol"===o.layerType&&("text-field"===O&&v&&!v.glyphs&&ge.push(new Nt(a,M,'use of "text-field" requires a style "glyphs" property')),"text-font"===O&&bs(Uo(M))&&"identity"===br(M.type)&&ge.push(new Nt(a,M,'"text-font" does not support identity functions'))),ge.concat(f({key:o.key,value:M,valueSpec:te,style:v,styleSpec:w,expressionContext:"property",propertyType:e,propertyKey:O}))}function Mt(o){return Qe(o,"paint")}function jt(o){return Qe(o,"layout")}function Fn(o){let e=[];const a=o.value,f=o.key,v=o.style,w=o.styleSpec;a.type||a.ref||e.push(new Nt(f,a,'either "type" or "ref" is required'));let M=br(a.type);const O=br(a.ref);if(a.id){const L=br(a.id);for(let X=0;X<o.arrayIndex;X++){const te=v.layers[X];br(te.id)===L&&e.push(new Nt(f,a.id,`duplicate layer id "${a.id}", previously used at line ${te.id.__line__}`))}}if("ref"in a){let L;["type","source","source-layer","filter","layout"].forEach(X=>{X in a&&e.push(new Nt(f,a[X],`"${X}" is prohibited for ref layers`))}),v.layers.forEach(X=>{br(X.id)===O&&(L=X)}),L?L.ref?e.push(new Nt(f,a.ref,"ref cannot reference another ref layer")):M=br(L.type):e.push(new Nt(f,a.ref,`ref layer "${O}" not found`))}else if("background"!==M)if(a.source){const L=v.sources&&v.sources[a.source],X=L&&br(L.type);L?"vector"===X&&"raster"===M?e.push(new Nt(f,a.source,`layer "${a.id}" requires a raster source`)):"raster"===X&&"raster"!==M?e.push(new Nt(f,a.source,`layer "${a.id}" requires a vector source`)):"vector"!==X||a["source-layer"]?"raster-dem"===X&&"hillshade"!==M?e.push(new Nt(f,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==M||!a.paint||!a.paint["line-gradient"]||"geojson"===X&&L.lineMetrics||e.push(new Nt(f,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Nt(f,a,`layer "${a.id}" must specify a "source-layer"`)):e.push(new Nt(f,a.source,`source "${a.source}" not found`))}else e.push(new Nt(f,a,'missing required property "source"'));return e=e.concat(jo({key:f,value:a,valueSpec:w.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${f}.type`,value:a.type,valueSpec:w.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:q,layout:L=>jo({layer:a,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":X=>jt(bt({layerType:M},X))}}),paint:L=>jo({layer:a,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":X=>Mt(bt({layerType:M},X))}})}})),e}function zi(o){const e=o.value,a=o.key,f=Ei(e);return"string"!==f?[new Nt(a,e,`string expected, ${f} found`)]:[]}const ci={promoteId:function({key:o,value:e}){if("string"===Ei(e))return zi({key:o,value:e});{const a=[];for(const f in e)a.push(...zi({key:`${o}.${f}`,value:e[f]}));return a}}};function Mi(o){const e=o.value,a=o.key,f=o.styleSpec,v=o.style,w=o.validateSpec;if(!e.type)return[new Nt(a,e,'"type" is required')];const M=br(e.type);let O;switch(M){case"vector":case"raster":case"raster-dem":return O=jo({key:a,value:e,valueSpec:f[`source_${M.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:ci,validateSpec:w}),O;case"geojson":if(O=jo({key:a,value:e,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:w,objectElementValidators:ci}),e.cluster)for(const L in e.clusterProperties){const[X,te]=e.clusterProperties[L],ae="string"==typeof X?[X,["accumulated"],["get",L]]:X;O.push(...U({key:`${a}.${L}.map`,value:te,validateSpec:w,expressionContext:"cluster-map"})),O.push(...U({key:`${a}.${L}.reduce`,value:ae,validateSpec:w,expressionContext:"cluster-reduce"}))}return O;case"video":return jo({key:a,value:e,valueSpec:f.source_video,style:v,validateSpec:w,styleSpec:f});case"image":return jo({key:a,value:e,valueSpec:f.source_image,style:v,validateSpec:w,styleSpec:f});case"canvas":return[new Nt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return oe({key:`${a}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,validateSpec:w,styleSpec:f})}}function ti(o){const e=o.value,a=o.styleSpec,f=a.light,v=o.style;let w=[];const M=Ei(e);if(void 0===e)return w;if("object"!==M)return w=w.concat([new Nt("light",e,`object expected, ${M} found`)]),w;for(const O in e){const L=O.match(/^(.*)-transition$/);w=w.concat(L&&f[L[1]]&&f[L[1]].transition?o.validateSpec({key:O,value:e[O],valueSpec:a.transition,validateSpec:o.validateSpec,style:v,styleSpec:a}):f[O]?o.validateSpec({key:O,value:e[O],valueSpec:f[O],validateSpec:o.validateSpec,style:v,styleSpec:a}):[new Nt(O,e[O],`unknown property "${O}"`)])}return w}function rr(o){const e=o.value,a=o.styleSpec,f=a.terrain,v=o.style;let w=[];const M=Ei(e);if(void 0===e)return w;if("object"!==M)return w=w.concat([new Nt("terrain",e,`object expected, ${M} found`)]),w;for(const O in e)w=w.concat(f[O]?o.validateSpec({key:O,value:e[O],valueSpec:f[O],validateSpec:o.validateSpec,style:v,styleSpec:a}):[new Nt(O,e[O],`unknown property "${O}"`)]);return w}function ni(o){let e=[];const a=o.value,f=o.key;if(Array.isArray(a)){const v=[],w=[];for(const M in a)a[M].id&&v.includes(a[M].id)&&e.push(new Nt(f,a,`all the sprites' ids must be unique, but ${a[M].id} is duplicated`)),v.push(a[M].id),a[M].url&&w.includes(a[M].url)&&e.push(new Nt(f,a,`all the sprites' URLs must be unique, but ${a[M].url} is duplicated`)),w.push(a[M].url),e=e.concat(jo({key:`${f}[${M}]`,value:a[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return e}return zi({key:f,value:a})}const vi={"*":()=>[],array:Ka,boolean:function(o){const e=o.value,a=o.key,f=Ei(e);return"boolean"!==f?[new Nt(a,e,`boolean expected, ${f} found`)]:[]},number:Ya,color:function(o){const e=o.key,a=o.value,f=Ei(a);return"string"!==f?[new Nt(e,a,`color expected, ${f} found`)]:Ii.parse(String(a))?[]:[new Nt(e,a,`color expected, "${a}" found`)]},constants:Fa,enum:oe,filter:q,function:Zr,layer:Fn,object:jo,source:Mi,light:ti,terrain:rr,string:zi,formatted:function(o){return 0===zi(o).length?[]:U(o)},resolvedImage:function(o){return 0===zi(o).length?[]:U(o)},padding:function(o){const e=o.key,a=o.value;if("array"===Ei(a)){if(a.length<1||a.length>4)return[new Nt(e,a,`padding requires 1 to 4 values; ${a.length} values found`)];const f={type:"number"};let v=[];for(let w=0;w<a.length;w++)v=v.concat(o.validateSpec({key:`${e}[${w}]`,value:a[w],validateSpec:o.validateSpec,valueSpec:f}));return v}return Ya({key:e,value:a,valueSpec:{}})},sprite:ni};function Yr(o){const e=o.value,a=o.valueSpec,f=o.styleSpec;return o.validateSpec=Yr,a.expression&&bs(br(e))?Zr(o):a.expression&&W(Uo(e))?U(o):a.type&&vi[a.type]?vi[a.type](o):jo(bt({},o,{valueSpec:a.type?f[a.type]:a}))}function Co(o){const e=o.value,a=o.key,f=zi(o);return f.length||(-1===e.indexOf("{fontstack}")&&f.push(new Nt(a,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&f.push(new Nt(a,e,'"glyphs" url must include a "{range}" token'))),f}function er(o,e=ue){let a=[];return a=a.concat(Yr({key:"",value:o,valueSpec:e.$root,styleSpec:e,style:o,validateSpec:Yr,objectElementValidators:{glyphs:Co,"*":()=>[]}})),o.constants&&(a=a.concat(Fa({key:"constants",value:o.constants,style:o,styleSpec:e,validateSpec:Yr}))),Eo(a)}function zr(o){return function(e){return o({...e,validateSpec:Yr})}}function Eo(o){return[].concat(o).sort((e,a)=>e.line-a.line)}function Vr(o){return function(...e){return Eo(o.apply(this,e))}}er.source=Vr(zr(Mi)),er.sprite=Vr(zr(ni)),er.glyphs=Vr(zr(Co)),er.light=Vr(zr(ti)),er.terrain=Vr(zr(rr)),er.layer=Vr(zr(Fn)),er.filter=Vr(zr(q)),er.paintProperty=Vr(zr(Mt)),er.layoutProperty=Vr(zr(jt));const Do=er,Xr=Do.light,xs=Do.paintProperty,ic=Do.layoutProperty;function rc(o,e){let a=!1;if(e&&e.length)for(const f of e)o.fire(new en(new Error(f.message))),a=!0;return a}class _l{constructor(e,a,f){const v=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const M=new Int32Array(this.arrayBuffer);e=M[0],this.d=(a=M[1])+2*(f=M[2]);for(let L=0;L<this.d*this.d;L++){const X=M[3+L],te=M[3+L+1];v.push(X===te?null:M.subarray(X,te))}const O=M[3+v.length+1];this.keys=M.subarray(M[3+v.length],O),this.bboxes=M.subarray(O),this.insert=this._insertReadonly}else{this.d=a+2*f;for(let M=0;M<this.d*this.d;M++)v.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=e,this.padding=f,this.scale=a/e,this.uid=0;const w=f/a*e;this.min=-w,this.max=e+w}insert(e,a,f,v,w){this._forEachCell(a,f,v,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(a),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,a,f,v,w,M){this.cells[w].push(M)}query(e,a,f,v,w){const M=this.min,O=this.max;if(e<=M&&a<=M&&O<=f&&O<=v&&!w)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(e,a,f,v,this._queryCell,L,{},w),L}}_queryCell(e,a,f,v,w,M,O,L){const X=this.cells[w];if(null!==X){const te=this.keys,ae=this.bboxes;for(let ge=0;ge<X.length;ge++){const ve=X[ge];if(void 0===O[ve]){const Ce=4*ve;(L?L(ae[Ce+0],ae[Ce+1],ae[Ce+2],ae[Ce+3]):e<=ae[Ce+2]&&a<=ae[Ce+3]&&f>=ae[Ce+0]&&v>=ae[Ce+1])?(O[ve]=!0,M.push(te[ve])):O[ve]=!1}}}}_forEachCell(e,a,f,v,w,M,O,L){const X=this._convertToCellCoord(e),te=this._convertToCellCoord(a),ae=this._convertToCellCoord(f),ge=this._convertToCellCoord(v);for(let ve=X;ve<=ae;ve++)for(let Ce=te;Ce<=ge;Ce++){const Ve=this.d*Ce+ve;if((!L||L(this._convertFromCellCoord(ve),this._convertFromCellCoord(Ce),this._convertFromCellCoord(ve+1),this._convertFromCellCoord(Ce+1)))&&w.call(this,e,a,f,v,Ve,M,O,L))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,a=3+this.cells.length+1+1;let f=0;for(let M=0;M<this.cells.length;M++)f+=this.cells[M].length;const v=new Int32Array(a+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let w=a;for(let M=0;M<e.length;M++){const O=e[M];v[3+M]=w,v.set(O,w),w+=O.length}return v[3+e.length]=w,v.set(this.keys,w),w+=this.keys.length,v[3+e.length+1]=w,v.set(this.bboxes,w),w+=this.bboxes.length,v.buffer}static serialize(e,a){const f=e.toArrayBuffer();return a&&a.push(f),{buffer:f}}static deserialize(e){return new _l(e.buffer)}}const Js={};function Pn(o,e,a={}){if(Js[o])throw new Error(`${o} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:o,writeable:!1}),Js[o]={klass:e,omit:a.omit||[],shallow:a.shallow||[]}}Pn("Object",Object),Pn("TransferableGridIndex",_l),Pn("Color",Ii),Pn("Error",Error),Pn("AJAXError",Xn),Pn("ResolvedImage",Fr),Pn("StylePropertyFunction",yo),Pn("StyleExpression",K,{omit:["_evaluator"]}),Pn("ZoomDependentExpression",Yn),Pn("ZoomConstantExpression",Ut),Pn("CompoundExpression",Br,{omit:["_evaluate"]});for(const o in As)As[o]._classRegistryKey||Pn(`Expression_${o}`,As[o]);function Fl(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&"ArrayBuffer"===o.constructor.name)}function yl(o,e){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Fl(o)||dt(o))return e&&e.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return e&&e.push(a.buffer),a}if(o instanceof ImageData)return e&&e.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const f of o)a.push(yl(f,e));return a}if("object"==typeof o){const a=o.constructor,f=a._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Js[f])throw new Error(`${f} is not registered.`);const v=a.serialize?a.serialize(o,e):{};if(a.serialize){if(e&&v===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in o){if(!o.hasOwnProperty(w)||Js[f].omit.indexOf(w)>=0)continue;const M=o[w];v[w]=Js[f].shallow.indexOf(w)>=0?M:yl(M,e)}o instanceof Error&&(v.message=o.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==f&&(v.$name=f),v}throw new Error("can't serialize object of type "+typeof o)}function Na(o){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Fl(o)||dt(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Na);if("object"==typeof o){const e=o.$name||"Object";if(!Js[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:a}=Js[e];if(!a)throw new Error(`can't deserialize unregistered class ${e}`);if(a.deserialize)return a.deserialize(o);const f=Object.create(a.prototype);for(const v of Object.keys(o)){if("$name"===v)continue;const w=o[v];f[v]=Js[e].shallow.indexOf(v)>=0?w:Na(w)}return f}throw new Error("can't deserialize object of type "+typeof o)}class os{constructor(){this.first=!0}update(e,a){const f=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=a),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=f,!0))}}const yn={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Nl(o){for(const e of o)if(as(e.charCodeAt(0)))return!0;return!1}function ss(o){for(const e of o)if(!oc(e.charCodeAt(0)))return!1;return!0}function oc(o){return!(yn.Arabic(o)||yn["Arabic Supplement"](o)||yn["Arabic Extended-A"](o)||yn["Arabic Presentation Forms-A"](o)||yn["Arabic Presentation Forms-B"](o))}function as(o){return!(746!==o&&747!==o&&(o<4352||!(yn["Bopomofo Extended"](o)||yn.Bopomofo(o)||yn["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||yn["CJK Compatibility Ideographs"](o)||yn["CJK Compatibility"](o)||yn["CJK Radicals Supplement"](o)||yn["CJK Strokes"](o)||!(!yn["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||12336===o)||yn["CJK Unified Ideographs Extension A"](o)||yn["CJK Unified Ideographs"](o)||yn["Enclosed CJK Letters and Months"](o)||yn["Hangul Compatibility Jamo"](o)||yn["Hangul Jamo Extended-A"](o)||yn["Hangul Jamo Extended-B"](o)||yn["Hangul Jamo"](o)||yn["Hangul Syllables"](o)||yn.Hiragana(o)||yn["Ideographic Description Characters"](o)||yn.Kanbun(o)||yn["Kangxi Radicals"](o)||yn["Katakana Phonetic Extensions"](o)||yn.Katakana(o)&&12540!==o||!(!yn["Halfwidth and Fullwidth Forms"](o)||65288===o||65289===o||65293===o||o>=65306&&o<=65310||65339===o||65341===o||65343===o||o>=65371&&o<=65503||65507===o||o>=65512&&o<=65519)||!(!yn["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||yn["Unified Canadian Aboriginal Syllabics"](o)||yn["Unified Canadian Aboriginal Syllabics Extended"](o)||yn["Vertical Forms"](o)||yn["Yijing Hexagram Symbols"](o)||yn["Yi Syllables"](o)||yn["Yi Radicals"](o))))}function vl(o){return!(as(o)||(e=o,yn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||yn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||yn["Letterlike Symbols"](e)||yn["Number Forms"](e)||yn["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||yn["Control Pictures"](e)&&9251!==e||yn["Optical Character Recognition"](e)||yn["Enclosed Alphanumerics"](e)||yn["Geometric Shapes"](e)||yn["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||yn["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||yn["CJK Symbols and Punctuation"](e)||yn.Katakana(e)||yn["Private Use Area"](e)||yn["CJK Compatibility Forms"](e)||yn["Small Form Variants"](e)||yn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function Xa(o){return o>=1424&&o<=2303||yn["Arabic Presentation Forms-A"](o)||yn["Arabic Presentation Forms-B"](o)}function eu(o,e){return!(!e&&Xa(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||yn.Khmer(o))}function Pc(o){for(const e of o)if(Xa(e.charCodeAt(0)))return!0;return!1}const Bl="deferred",Ja="loading",ls="loaded";let zl=null,Wr="unavailable",Qs=null;const sc=function(o){o&&"string"==typeof o&&o.indexOf("NetworkError")>-1&&(Wr="error"),zl&&zl(o)};function ea(){Rs.fire(new At("pluginStateChange",{pluginStatus:Wr,pluginURL:Qs}))}const Rs=new sn,Oc=function(){return Wr},bl=function(){if(Wr!==Bl||!Qs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Wr=Ja,ea(),Qs&&di({url:Qs},o=>{o?sc(o):(Wr=ls,ea())})},cs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Wr===ls||null!=cs.applyArabicShaping,isLoading:()=>Wr===Ja,setState(o){if(!Ft())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Wr=o.pluginStatus,Qs=o.pluginURL},isParsed(){if(!Ft())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=cs.applyArabicShaping&&null!=cs.processBidirectionalText&&null!=cs.processStyledBidirectionalText},getPluginURL(){if(!Ft())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Qs}};class fr{constructor(e,a){this.zoom=e,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new os,this.transition={})}isSupportedScript(e){return function(a,f){for(const v of a)if(!eu(v.charCodeAt(0),f))return!1;return!0}(e,cs.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,a=e-Math.floor(e),f=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*a}}}class _i{constructor(e,a){this.property=e,this.value=a,this.expression=function(f,v){if(bs(f))return new yo(f,v);if(W(f)){const w=Dr(f,v);if("error"===w.result)throw new Error(w.value.map(M=>`${M.key}: ${M.message}`).join(", "));return w.value}{let w=f;return"color"===v.type&&"string"==typeof f?w=Ii.parse(f):"padding"!==v.type||"number"!=typeof f&&!Array.isArray(f)||(w=xi.parse(f)),{kind:"constant",evaluate:()=>w}}}(void 0===a?e.specification.default:a,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,a,f){return this.property.possiblyEvaluate(this,e,a,f)}}class Rr{constructor(e){this.property=e,this.value=new _i(e,void 0)}transitioned(e,a){return new Ba(this.property,this.value,a,Ct({},e.transition,this.transition),e.now)}untransitioned(){return new Ba(this.property,this.value,null,{},0)}}class xl{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Dt(this._values[e].value.value)}setValue(e,a){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Rr(this._values[e].property)),this._values[e].value=new _i(this._values[e].property,null===a?void 0:Dt(a))}getTransition(e){return Dt(this._values[e].transition)}setTransition(e,a){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Rr(this._values[e].property)),this._values[e].transition=Dt(a)||void 0}serialize(){const e={};for(const a of Object.keys(this._values)){const f=this.getValue(a);void 0!==f&&(e[a]=f);const v=this.getTransition(a);void 0!==v&&(e[`${a}-transition`]=v)}return e}transitioned(e,a){const f=new ac(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(e,a._values[v]);return f}untransitioned(){const e=new ac(this._properties);for(const a of Object.keys(this._values))e._values[a]=this._values[a].untransitioned();return e}}class Ba{constructor(e,a,f,v,w){this.property=e,this.value=a,this.begin=w+v.delay||0,this.end=this.begin+v.duration||0,e.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(e,a,f){const v=e.now||0,w=this.value.possiblyEvaluate(e,a,f),M=this.prior;if(M){if(v>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(v<this.begin)return M.possiblyEvaluate(e,a,f);{const O=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(e,a,f),w,function(L){if(L<=0)return 0;if(L>=1)return 1;const X=L*L,te=X*L;return 4*(L<.5?te:3*(L-X)+te-.75)}(O))}}return w}}class ac{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,a,f){const v=new ya(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(e,a,f);return v}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Vl{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Dt(this._values[e].value)}setValue(e,a){this._values[e]=new _i(this._values[e].property,null===a?void 0:Dt(a))}serialize(){const e={};for(const a of Object.keys(this._values)){const f=this.getValue(a);void 0!==f&&(e[a]=f)}return e}possiblyEvaluate(e,a,f){const v=new ya(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(e,a,f);return v}}class Ur{constructor(e,a,f){this.property=e,this.value=a,this.parameters=f}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,a,f,v){return this.property.evaluate(this.value,this.parameters,e,a,f,v)}}class ya{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class An{constructor(e){this.specification=e}possiblyEvaluate(e,a){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(a)}interpolate(e,a,f){const v=nr[this.specification.type];return v?v(e,a,f):e}}class Zn{constructor(e,a){this.specification=e,this.overrides=a}possiblyEvaluate(e,a,f,v){return new Ur(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(a,null,{},f,v)}:e.expression,a)}interpolate(e,a,f){if("constant"!==e.value.kind||"constant"!==a.value.kind)return e;if(void 0===e.value.value||void 0===a.value.value)return new Ur(this,{kind:"constant",value:void 0},e.parameters);const v=nr[this.specification.type];if(v){const w=v(e.value.value,a.value.value,f);return new Ur(this,{kind:"constant",value:w},e.parameters)}return e}evaluate(e,a,f,v,w,M){return"constant"===e.kind?e.value:e.evaluate(a,f,v,w,M)}}class Ul extends Zn{possiblyEvaluate(e,a,f,v){if(void 0===e.value)return new Ur(this,{kind:"constant",value:void 0},a);if("constant"===e.expression.kind){const w=e.expression.evaluate(a,null,{},f,v),M="resolvedImage"===e.property.specification.type&&"string"!=typeof w?w.name:w,O=this._calculate(M,M,M,a);return new Ur(this,{kind:"constant",value:O},a)}if("camera"===e.expression.kind){const w=this._calculate(e.expression.evaluate({zoom:a.zoom-1}),e.expression.evaluate({zoom:a.zoom}),e.expression.evaluate({zoom:a.zoom+1}),a);return new Ur(this,{kind:"constant",value:w},a)}return new Ur(this,e.expression,a)}evaluate(e,a,f,v,w,M){if("source"===e.kind){const O=e.evaluate(a,f,v,w,M);return this._calculate(O,O,O,a)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(a.zoom)-1},f,v),e.evaluate({zoom:Math.floor(a.zoom)},f,v),e.evaluate({zoom:Math.floor(a.zoom)+1},f,v),a):e.value}_calculate(e,a,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:e,to:a}:{from:f,to:a}}interpolate(e){return e}}class kc{constructor(e){this.specification=e}possiblyEvaluate(e,a,f,v){if(void 0!==e.value){if("constant"===e.expression.kind){const w=e.expression.evaluate(a,null,{},f,v);return this._calculate(w,w,w,a)}return this._calculate(e.expression.evaluate(new fr(Math.floor(a.zoom-1),a)),e.expression.evaluate(new fr(Math.floor(a.zoom),a)),e.expression.evaluate(new fr(Math.floor(a.zoom+1),a)),a)}}_calculate(e,a,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:e,to:a}:{from:f,to:a}}interpolate(e){return e}}class ta{constructor(e){this.specification=e}possiblyEvaluate(e,a,f,v){return!!e.expression.evaluate(a,null,{},f,v)}interpolate(){return!1}}class lo{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in e){const f=e[a];f.specification.overridable&&this.overridableProperties.push(a);const v=this.defaultPropertyValues[a]=new _i(f,void 0),w=this.defaultTransitionablePropertyValues[a]=new Rr(f);this.defaultTransitioningPropertyValues[a]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=v.possiblyEvaluate({})}}}Pn("DataDrivenProperty",Zn),Pn("DataConstantProperty",An),Pn("CrossFadedDataDrivenProperty",Ul),Pn("CrossFadedProperty",kc),Pn("ColorRampProperty",ta);const ws="-transition";class Ho extends sn{constructor(e,a){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),a.layout&&(this._unevaluatedLayout=new Vl(a.layout)),a.paint)){this._transitionablePaint=new xl(a.paint);for(const f in e.paint)this.setPaintProperty(f,e.paint[f],{validate:!1});for(const f in e.layout)this.setLayoutProperty(f,e.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ya(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,a,f={}){null!=a&&this._validate(ic,`layers.${this.id}.layout.${e}`,e,a,f)||("visibility"!==e?this._unevaluatedLayout.setValue(e,a):this.visibility=a)}getPaintProperty(e){return e.endsWith(ws)?this._transitionablePaint.getTransition(e.slice(0,-ws.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,a,f={}){if(null!=a&&this._validate(xs,`layers.${this.id}.paint.${e}`,e,a,f))return!1;if(e.endsWith(ws))return this._transitionablePaint.setTransition(e.slice(0,-ws.length),a||void 0),!1;{const v=this._transitionablePaint._values[e],w="cross-faded-data-driven"===v.property.specification["property-type"],M=v.value.isDataDriven(),O=v.value;this._transitionablePaint.setValue(e,a),this._handleSpecialPaintPropertyUpdate(e);const L=this._transitionablePaint._values[e].value;return L.isDataDriven()||M||w||this._handleOverridablePaintPropertyUpdate(e,O,L)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,a,f){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,a){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,a)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Xt(e,(a,f)=>!(void 0===a||"layout"===f&&!Object.keys(a).length||"paint"===f&&!Object.keys(a).length))}_validate(e,a,f,v,w={}){return(!w||!1!==w.validate)&&rc(this,e.call(Do,{key:a,layerType:this.type,objectKey:f,value:v,styleSpec:ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const a=this.paint.get(e);if(a instanceof Ur&&Cr(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1}}const $o={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ls{constructor(e,a){this._structArray=e,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ir{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,a){return e._trim(),a&&(e.isTransferred=!0,a.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const a=Object.create(this.prototype);return a.arrayBuffer=e.arrayBuffer,a.length=e.length,a.capacity=e.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xr(o,e=1){let a=0,f=0;return{members:o.map(v=>{const w=$o[v.type].BYTES_PER_ELEMENT,M=a=lc(a,Math.max(e,w)),O=v.components||1;return f=Math.max(f,w),a+=w*O,{name:v.name,type:v.type,components:O,offset:M}}),size:lc(a,Math.max(f,e)),alignment:e}}function lc(o,e){return Math.ceil(o/e)*e}class Qa extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a){const f=this.length;return this.resize(f+1),this.emplace(f,e,a)}emplace(e,a,f){const v=2*e;return this.int16[v+0]=a,this.int16[v+1]=f,e}}Qa.prototype.bytesPerElement=4,Pn("StructArrayLayout2i4",Qa);class $i extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,f)}emplace(e,a,f,v){const w=3*e;return this.int16[w+0]=a,this.int16[w+1]=f,this.int16[w+2]=v,e}}$i.prototype.bytesPerElement=6,Pn("StructArrayLayout3i6",$i);class Fs extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,a,f,v)}emplace(e,a,f,v,w){const M=4*e;return this.int16[M+0]=a,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=w,e}}Fs.prototype.bytesPerElement=8,Pn("StructArrayLayout4i8",Fs);class tu extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,M){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,f,v,w,M)}emplace(e,a,f,v,w,M,O){const L=6*e;return this.int16[L+0]=a,this.int16[L+1]=f,this.int16[L+2]=v,this.int16[L+3]=w,this.int16[L+4]=M,this.int16[L+5]=O,e}}tu.prototype.bytesPerElement=12,Pn("StructArrayLayout2i4i12",tu);class za extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,M){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,f,v,w,M)}emplace(e,a,f,v,w,M,O){const L=4*e,X=8*e;return this.int16[L+0]=a,this.int16[L+1]=f,this.uint8[X+4]=v,this.uint8[X+5]=w,this.uint8[X+6]=M,this.uint8[X+7]=O,e}}za.prototype.bytesPerElement=8,Pn("StructArrayLayout2i4ub8",za);class va extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a){const f=this.length;return this.resize(f+1),this.emplace(f,e,a)}emplace(e,a,f){const v=2*e;return this.float32[v+0]=a,this.float32[v+1]=f,e}}va.prototype.bytesPerElement=8,Pn("StructArrayLayout2f8",va);class nu extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,M,O,L,X,te){const ae=this.length;return this.resize(ae+1),this.emplace(ae,e,a,f,v,w,M,O,L,X,te)}emplace(e,a,f,v,w,M,O,L,X,te,ae){const ge=10*e;return this.uint16[ge+0]=a,this.uint16[ge+1]=f,this.uint16[ge+2]=v,this.uint16[ge+3]=w,this.uint16[ge+4]=M,this.uint16[ge+5]=O,this.uint16[ge+6]=L,this.uint16[ge+7]=X,this.uint16[ge+8]=te,this.uint16[ge+9]=ae,e}}nu.prototype.bytesPerElement=20,Pn("StructArrayLayout10ui20",nu);class Au extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,M,O,L,X,te,ae,ge){const ve=this.length;return this.resize(ve+1),this.emplace(ve,e,a,f,v,w,M,O,L,X,te,ae,ge)}emplace(e,a,f,v,w,M,O,L,X,te,ae,ge,ve){const Ce=12*e;return this.int16[Ce+0]=a,this.int16[Ce+1]=f,this.int16[Ce+2]=v,this.int16[Ce+3]=w,this.uint16[Ce+4]=M,this.uint16[Ce+5]=O,this.uint16[Ce+6]=L,this.uint16[Ce+7]=X,this.int16[Ce+8]=te,this.int16[Ce+9]=ae,this.int16[Ce+10]=ge,this.int16[Ce+11]=ve,e}}Au.prototype.bytesPerElement=24,Pn("StructArrayLayout4i4ui4i24",Au);class wl extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,f)}emplace(e,a,f,v){const w=3*e;return this.float32[w+0]=a,this.float32[w+1]=f,this.float32[w+2]=v,e}}wl.prototype.bytesPerElement=12,Pn("StructArrayLayout3f12",wl);class Cl extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.uint32[1*e+0]=a,e}}Cl.prototype.bytesPerElement=4,Pn("StructArrayLayout1ul4",Cl);class jl extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,M,O,L,X){const te=this.length;return this.resize(te+1),this.emplace(te,e,a,f,v,w,M,O,L,X)}emplace(e,a,f,v,w,M,O,L,X,te){const ae=10*e,ge=5*e;return this.int16[ae+0]=a,this.int16[ae+1]=f,this.int16[ae+2]=v,this.int16[ae+3]=w,this.int16[ae+4]=M,this.int16[ae+5]=O,this.uint32[ge+3]=L,this.uint16[ae+8]=X,this.uint16[ae+9]=te,e}}jl.prototype.bytesPerElement=20,Pn("StructArrayLayout6i1ul2ui20",jl);class y extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,M){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,f,v,w,M)}emplace(e,a,f,v,w,M,O){const L=6*e;return this.int16[L+0]=a,this.int16[L+1]=f,this.int16[L+2]=v,this.int16[L+3]=w,this.int16[L+4]=M,this.int16[L+5]=O,e}}y.prototype.bytesPerElement=12,Pn("StructArrayLayout2i2i2i12",y);class t extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w){const M=this.length;return this.resize(M+1),this.emplace(M,e,a,f,v,w)}emplace(e,a,f,v,w,M){const O=4*e,L=8*e;return this.float32[O+0]=a,this.float32[O+1]=f,this.float32[O+2]=v,this.int16[L+6]=w,this.int16[L+7]=M,e}}t.prototype.bytesPerElement=16,Pn("StructArrayLayout2f1f2i16",t);class u extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,a,f,v)}emplace(e,a,f,v,w){const M=12*e,O=3*e;return this.uint8[M+0]=a,this.uint8[M+1]=f,this.float32[O+1]=v,this.float32[O+2]=w,e}}u.prototype.bytesPerElement=12,Pn("StructArrayLayout2ub2f12",u);class m extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,f)}emplace(e,a,f,v){const w=3*e;return this.uint16[w+0]=a,this.uint16[w+1]=f,this.uint16[w+2]=v,e}}m.prototype.bytesPerElement=6,Pn("StructArrayLayout3ui6",m);class b extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,M,O,L,X,te,ae,ge,ve,Ce,Ve,ze,ct){const vt=this.length;return this.resize(vt+1),this.emplace(vt,e,a,f,v,w,M,O,L,X,te,ae,ge,ve,Ce,Ve,ze,ct)}emplace(e,a,f,v,w,M,O,L,X,te,ae,ge,ve,Ce,Ve,ze,ct,vt){const st=24*e,It=12*e,Lt=48*e;return this.int16[st+0]=a,this.int16[st+1]=f,this.uint16[st+2]=v,this.uint16[st+3]=w,this.uint32[It+2]=M,this.uint32[It+3]=O,this.uint32[It+4]=L,this.uint16[st+10]=X,this.uint16[st+11]=te,this.uint16[st+12]=ae,this.float32[It+7]=ge,this.float32[It+8]=ve,this.uint8[Lt+36]=Ce,this.uint8[Lt+37]=Ve,this.uint8[Lt+38]=ze,this.uint32[It+10]=ct,this.int16[st+22]=vt,e}}b.prototype.bytesPerElement=48,Pn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",b);class S extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,M,O,L,X,te,ae,ge,ve,Ce,Ve,ze,ct,vt,st,It,Lt,Zt,Bn,jn,Mn,vn,pn,Cn){const wn=this.length;return this.resize(wn+1),this.emplace(wn,e,a,f,v,w,M,O,L,X,te,ae,ge,ve,Ce,Ve,ze,ct,vt,st,It,Lt,Zt,Bn,jn,Mn,vn,pn,Cn)}emplace(e,a,f,v,w,M,O,L,X,te,ae,ge,ve,Ce,Ve,ze,ct,vt,st,It,Lt,Zt,Bn,jn,Mn,vn,pn,Cn,wn){const rn=34*e,Hn=17*e;return this.int16[rn+0]=a,this.int16[rn+1]=f,this.int16[rn+2]=v,this.int16[rn+3]=w,this.int16[rn+4]=M,this.int16[rn+5]=O,this.int16[rn+6]=L,this.int16[rn+7]=X,this.uint16[rn+8]=te,this.uint16[rn+9]=ae,this.uint16[rn+10]=ge,this.uint16[rn+11]=ve,this.uint16[rn+12]=Ce,this.uint16[rn+13]=Ve,this.uint16[rn+14]=ze,this.uint16[rn+15]=ct,this.uint16[rn+16]=vt,this.uint16[rn+17]=st,this.uint16[rn+18]=It,this.uint16[rn+19]=Lt,this.uint16[rn+20]=Zt,this.uint16[rn+21]=Bn,this.uint16[rn+22]=jn,this.uint32[Hn+12]=Mn,this.float32[Hn+13]=vn,this.float32[Hn+14]=pn,this.float32[Hn+15]=Cn,this.float32[Hn+16]=wn,e}}S.prototype.bytesPerElement=68,Pn("StructArrayLayout8i15ui1ul4f68",S);class R extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.float32[1*e+0]=a,e}}R.prototype.bytesPerElement=4,Pn("StructArrayLayout1f4",R);class B extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,f)}emplace(e,a,f,v){const w=4*e;return this.uint32[2*e+0]=a,this.uint16[w+2]=f,this.uint16[w+3]=v,e}}B.prototype.bytesPerElement=8,Pn("StructArrayLayout1ul2ui8",B);class z extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a){const f=this.length;return this.resize(f+1),this.emplace(f,e,a)}emplace(e,a,f){const v=2*e;return this.uint16[v+0]=a,this.uint16[v+1]=f,e}}z.prototype.bytesPerElement=4,Pn("StructArrayLayout2ui4",z);class Z extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.uint16[1*e+0]=a,e}}Z.prototype.bytesPerElement=2,Pn("StructArrayLayout1ui2",Z);class ne extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,a,f,v)}emplace(e,a,f,v,w){const M=4*e;return this.float32[M+0]=a,this.float32[M+1]=f,this.float32[M+2]=v,this.float32[M+3]=w,e}}ne.prototype.bytesPerElement=16,Pn("StructArrayLayout4f16",ne);class x extends Ls{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ie(this.anchorPointX,this.anchorPointY)}}x.prototype.size=20;class D extends jl{get(e){return new x(this,e)}}Pn("CollisionBoxArray",D);class E extends Ls{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}E.prototype.size=48;class A extends b{get(e){return new E(this,e)}}Pn("PlacedSymbolArray",A);class k extends Ls{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}k.prototype.size=68;class G extends S{get(e){return new k(this,e)}}Pn("SymbolInstanceArray",G);class se extends R{getoffsetX(e){return this.float32[1*e+0]}}Pn("GlyphOffsetArray",se);class pe extends $i{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Pn("SymbolLineVertexArray",pe);class me extends Ls{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}me.prototype.size=8;class qe extends B{get(e){return new me(this,e)}}Pn("FeatureIndexArray",qe);class pt extends Qa{}class xt extends Qa{}class Ht extends Qa{}class Yt extends tu{}class Kt extends za{}class _n extends va{}class Sn extends nu{}class pi extends Au{}class Dn extends wl{}class si extends Cl{}class Tn extends y{}class qi extends u{}class mr extends m{}class Zi extends z{}const fi=xr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Jr}=fi;class Yi{constructor(e=[]){this.segments=e}prepareSegment(e,a,f,v){let w=this.segments[this.segments.length-1];return e>Yi.MAX_VERTEX_ARRAY_LENGTH&&Ne(`Max vertices per segment is ${Yi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!w||w.vertexLength+e>Yi.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==v)&&(w={vertexOffset:a.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},void 0!==v&&(w.sortKey=v),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const e of this.segments)for(const a in e.vaos)e.vaos[a].destroy()}static simpleSegment(e,a,f,v){return new Yi([{vertexOffset:e,primitiveOffset:a,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function Sr(o,e){return 256*(o=We(Math.floor(o),0,255))+We(Math.floor(e),0,255)}Yi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pn("SegmentVector",Yi);const Lr=xr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var us={exports:{}},Va=function(o,e){var a,f,v,w,M,O,L,X;for(f=o.length-(a=3&o.length),v=e,M=3432918353,O=461845907,X=0;X<f;)L=255&o.charCodeAt(X)|(255&o.charCodeAt(++X))<<8|(255&o.charCodeAt(++X))<<16|(255&o.charCodeAt(++X))<<24,++X,v=27492+(65535&(w=5*(65535&(v=(v^=L=(65535&(L=(L=(65535&L)*M+(((L>>>16)*M&65535)<<16)&4294967295)<<15|L>>>17))*O+(((L>>>16)*O&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(L=0,a){case 3:L^=(255&o.charCodeAt(X+2))<<16;case 2:L^=(255&o.charCodeAt(X+1))<<8;case 1:v^=L=(65535&(L=(L=(65535&(L^=255&o.charCodeAt(X)))*M+(((L>>>16)*M&65535)<<16)&4294967295)<<15|L>>>17))*O+(((L>>>16)*O&65535)<<16)&4294967295}return v^=o.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0},Mo=function(o,e){for(var a,f=o.length,v=e^f,w=0;f>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(w)|(255&o.charCodeAt(++w))<<8|(255&o.charCodeAt(++w))<<16|(255&o.charCodeAt(++w))<<24))+((1540483477*(a>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),f-=4,++w;switch(f){case 3:v^=(255&o.charCodeAt(w+2))<<16;case 2:v^=(255&o.charCodeAt(w+1))<<8;case 1:v=1540483477*(65535&(v^=255&o.charCodeAt(w)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};us.exports=Va,us.exports.murmur3=Va,us.exports.murmur2=Mo;var Ro=He(us.exports);class Qr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,a,f,v){this.ids.push(Ki(e)),this.positions.push(a,f,v)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Ki(e);let f=0,v=this.ids.length-1;for(;f<v;){const M=f+v>>1;this.ids[M]>=a?v=M:f=M+1}const w=[];for(;this.ids[f]===a;)w.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return w}static serialize(e,a){const f=new Float64Array(e.ids),v=new Uint32Array(e.positions);return co(f,v,0,f.length-1),a&&a.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(e){const a=new Qr;return a.ids=e.ids,a.positions=e.positions,a.indexed=!0,a}}function Ki(o){const e=+o;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Ro(String(o))}function co(o,e,a,f){for(;a<f;){const v=o[a+f>>1];let w=a-1,M=f+1;for(;;){do{w++}while(o[w]<v);do{M--}while(o[M]>v);if(w>=M)break;uo(o,w,M),uo(e,3*w,3*M),uo(e,3*w+1,3*M+1),uo(e,3*w+2,3*M+2)}M-a<f-M?(co(o,e,a,M),a=M+1):(co(o,e,M+1,f),f=M)}}function uo(o,e,a){const f=o[e];o[e]=o[a],o[a]=f}Pn("FeaturePositionMap",Qr);class Xi{constructor(e,a){this.gl=e.gl,this.location=a}}class Go extends Xi{constructor(e,a){super(e,a),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Hl extends Xi{constructor(e,a){super(e,a),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class El extends Xi{constructor(e,a){super(e,a),this.current=Ii.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const $l=new Float32Array(16);function cc(o){return[Sr(255*o.r,255*o.g),Sr(255*o.b,255*o.a)]}class uc{constructor(e,a,f){this.value=e,this.uniformNames=a.map(v=>`u_${v}`),this.type=f}setUniform(e,a,f){e.set(f.constantOr(this.value))}getBinding(e,a,f){return"color"===this.type?new El(e,a):new Go(e,a)}}class ba{constructor(e,a){this.uniformNames=a.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=e.tlbr}setUniform(e,a,f,v){const w="u_pattern_to"===v?this.patternTo:"u_pattern_from"===v?this.patternFrom:"u_pixel_ratio_to"===v?this.pixelRatioTo:"u_pixel_ratio_from"===v?this.pixelRatioFrom:null;w&&e.set(w)}getBinding(e,a,f){return"u_pattern"===f.substr(0,9)?new Hl(e,a):new Go(e,a)}}class tl{constructor(e,a,f,v){this.expression=e,this.type=f,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:"color"===f?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(e,a,f,v,w){const M=this.paintVertexArray.length,O=this.expression.evaluate(new fr(0),a,{},v,[],w);this.paintVertexArray.resize(e),this._setPaintValue(M,e,O)}updatePaintArray(e,a,f,v){const w=this.expression.evaluate({zoom:0},f,v);this._setPaintValue(e,a,w)}_setPaintValue(e,a,f){if("color"===this.type){const v=cc(f);for(let w=e;w<a;w++)this.paintVertexArray.emplace(w,v[0],v[1])}else{for(let v=e;v<a;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vo{constructor(e,a,f,v,w,M){this.expression=e,this.uniformNames=a.map(O=>`u_${O}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=a.map(O=>({name:`a_${O}`,type:"Float32",components:"color"===f?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(e,a,f,v,w){const M=this.expression.evaluate(new fr(this.zoom),a,{},v,[],w),O=this.expression.evaluate(new fr(this.zoom+1),a,{},v,[],w),L=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(L,e,M,O)}updatePaintArray(e,a,f,v){const w=this.expression.evaluate({zoom:this.zoom},f,v),M=this.expression.evaluate({zoom:this.zoom+1},f,v);this._setPaintValue(e,a,w,M)}_setPaintValue(e,a,f,v){if("color"===this.type){const w=cc(f),M=cc(v);for(let O=e;O<a;O++)this.paintVertexArray.emplace(O,w[0],w[1],M[0],M[1])}else{for(let w=e;w<a;w++)this.paintVertexArray.emplace(w,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,a){const f=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,v=We(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);e.set(v)}getBinding(e,a,f){return new Go(e,a)}}class Zo{constructor(e,a,f,v,w,M){this.expression=e,this.type=a,this.useIntegerZoom=f,this.zoom=v,this.layerId=M,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(e,a,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(v,e,a.patterns&&a.patterns[this.layerId],f)}updatePaintArray(e,a,f,v,w){this._setPaintValues(e,a,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(e,a,f,v){if(!v||!f)return;const{min:w,mid:M,max:O}=f,L=v[w],X=v[M],te=v[O];if(L&&X&&te)for(let ae=e;ae<a;ae++)this.zoomInPaintVertexArray.emplace(ae,X.tl[0],X.tl[1],X.br[0],X.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],X.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(ae,X.tl[0],X.tl[1],X.br[0],X.br[1],te.tl[0],te.tl[1],te.br[0],te.br[1],X.pixelRatio,te.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Lr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Lr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fp{constructor(e,a,f){this.binders={},this._buffers=[];const v=[];for(const w in e.paint._values){if(!f(w))continue;const M=e.paint.get(w);if(!(M instanceof Ur&&Cr(M.property.specification)))continue;const O=Np(w,e.type),L=M.value,X=M.property.specification.type,te=M.property.useIntegerZoom,ae=M.property.specification["property-type"],ge="cross-faded"===ae||"cross-faded-data-driven"===ae;if("constant"===L.kind)this.binders[w]=ge?new ba(L.value,O):new uc(L.value,O,X),v.push(`/u_${w}`);else if("source"===L.kind||ge){const ve=Bp(w,X,"source");this.binders[w]=ge?new Zo(L,X,te,a,ve,e.id):new tl(L,O,X,ve),v.push(`/a_${w}`)}else{const ve=Bp(w,X,"composite");this.binders[w]=new vo(L,O,X,te,a,ve),v.push(`/z_${w}`)}}this.cacheKey=v.sort().join("")}getMaxValue(e){const a=this.binders[e];return a instanceof tl||a instanceof vo?a.maxValue:0}populatePaintArrays(e,a,f,v,w){for(const M in this.binders){const O=this.binders[M];(O instanceof tl||O instanceof vo||O instanceof Zo)&&O.populatePaintArray(e,a,f,v,w)}}setConstantPatternPositions(e,a){for(const f in this.binders){const v=this.binders[f];v instanceof ba&&v.setConstantPatternPositions(e,a)}}updatePaintArrays(e,a,f,v,w){let M=!1;for(const O in e){const L=a.getPositions(O);for(const X of L){const te=f.feature(X.index);for(const ae in this.binders){const ge=this.binders[ae];if((ge instanceof tl||ge instanceof vo||ge instanceof Zo)&&!0===ge.expression.isStateDependent){const ve=v.paint.get(ae);ge.expression=ve.value,ge.updatePaintArray(X.start,X.end,te,e[O],w),M=!0}}}}return M}defines(){const e=[];for(const a in this.binders){const f=this.binders[a];(f instanceof uc||f instanceof ba)&&e.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return e}getBinderAttributes(){const e=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof tl||f instanceof vo)for(let v=0;v<f.paintVertexAttributes.length;v++)e.push(f.paintVertexAttributes[v].name);else if(f instanceof Zo)for(let v=0;v<Lr.members.length;v++)e.push(Lr.members[v].name)}return e}getBinderUniforms(){const e=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof uc||f instanceof ba||f instanceof vo)for(const v of f.uniformNames)e.push(v)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,a){const f=[];for(const v in this.binders){const w=this.binders[v];if(w instanceof uc||w instanceof ba||w instanceof vo)for(const M of w.uniformNames)if(a[M]){const O=w.getBinding(e,a[M],M);f.push({name:M,property:v,binding:O})}}return f}setUniforms(e,a,f,v){for(const{name:w,property:M,binding:O}of a)this.binders[M].setUniform(O,v,f.get(M),w)}updatePaintBuffers(e){this._buffers=[];for(const a in this.binders){const f=this.binders[a];if(e&&f instanceof Zo){const v=2===e.fromScale?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof tl||f instanceof vo)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(e){for(const a in this.binders){const f=this.binders[a];(f instanceof tl||f instanceof vo||f instanceof Zo)&&f.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const a=this.binders[e];(a instanceof tl||a instanceof vo||a instanceof Zo)&&a.destroy()}}}class iu{constructor(e,a,f=(()=>!0)){this.programConfigurations={};for(const v of e)this.programConfigurations[v.id]=new Fp(v,a,f);this.needsUpload=!1,this._featureMap=new Qr,this._bufferOffset=0}populatePaintArrays(e,a,f,v,w,M){for(const O in this.programConfigurations)this.programConfigurations[O].populatePaintArrays(e,a,v,w,M);void 0!==a.id&&this._featureMap.add(a.id,f,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,a,f,v){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(e,this._featureMap,a,w,v)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Np(o,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${e}-`,"").replace(/-/g,"_")]}function Bp(o,e,a){const v={"line-pattern":{source:Sn,composite:Sn},"fill-pattern":{source:Sn,composite:Sn},"fill-extrusion-pattern":{source:Sn,composite:Sn}}[o];return v&&v[a]||{color:{source:va,composite:ne},number:{source:R,composite:va}}[e][a]}Pn("ConstantBinder",uc),Pn("CrossFadedConstantBinder",ba),Pn("SourceExpressionBinder",tl),Pn("CrossFadedCompositeBinder",Zo),Pn("CompositeExpressionBinder",vo),Pn("ProgramConfiguration",Fp,{omit:["_buffers"]}),Pn("ProgramConfigurationSet",iu);var So=8192;const wh=Math.pow(2,14)-1,zp=-wh-1;function Rc(o){const e=So/o.extent,a=o.loadGeometry();for(let f=0;f<a.length;f++){const v=a[f];for(let w=0;w<v.length;w++){const M=v[w],O=Math.round(M.x*e),L=Math.round(M.y*e);M.x=We(O,zp,wh),M.y=We(L,zp,wh),(O<M.x||O>M.x+1||L<M.y||L>M.y+1)&&Ne("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Dl(o,e){return{type:o.type,id:o.id,properties:o.properties,geometry:e?Rc(o):[]}}function Pu(o,e,a,f,v){o.emplaceBack(2*e+(f+1)/2,2*a+(v+1)/2)}class Ch{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new xt,this.indexArray=new mr,this.segments=new Yi,this.programConfigurations=new iu(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,f){const v=this.layers[0],w=[];let M=null,O=!1;"circle"===v.type&&(M=v.layout.get("circle-sort-key"),O=!M.isConstant());for(const{feature:L,id:X,index:te,sourceLayerIndex:ae}of e){const ge=this.layers[0]._featureFilter.needGeometry,ve=Dl(L,ge);if(!this.layers[0]._featureFilter.filter(new fr(this.zoom),ve,f))continue;const Ce=O?M.evaluate(ve,{},f):void 0,Ve={id:X,properties:L.properties,type:L.type,sourceLayerIndex:ae,index:te,geometry:ge?ve.geometry:Rc(L),patterns:{},sortKey:Ce};w.push(Ve)}O&&w.sort((L,X)=>L.sortKey-X.sortKey);for(const L of w){const{geometry:X,index:te,sourceLayerIndex:ae}=L,ge=e[te].feature;this.addFeature(L,X,te,f),a.featureIndex.insert(ge,X,te,ae,this.index)}}update(e,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jr),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,a,f,v){for(const w of a)for(const M of w){const O=M.x,L=M.y;if(O<0||O>=So||L<0||L>=So)continue;const X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),te=X.vertexLength;Pu(this.layoutVertexArray,O,L,-1,-1),Pu(this.layoutVertexArray,O,L,1,-1),Pu(this.layoutVertexArray,O,L,1,1),Pu(this.layoutVertexArray,O,L,-1,1),this.indexArray.emplaceBack(te,te+1,te+2),this.indexArray.emplaceBack(te,te+3,te+2),X.vertexLength+=4,X.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,f,{},v)}}function Eh(o,e){for(let a=0;a<o.length;a++)if(nl(e,o[a]))return!0;for(let a=0;a<e.length;a++)if(nl(o,e[a]))return!0;return!!Ou(o,e)}function g_(o,e,a){return!!nl(o,e)||!!gd(e,o,a)}function Dh(o,e){if(1===o.length)return _d(e,o[0]);for(let a=0;a<e.length;a++){const f=e[a];for(let v=0;v<f.length;v++)if(nl(o,f[v]))return!0}for(let a=0;a<o.length;a++)if(_d(e,o[a]))return!0;for(let a=0;a<e.length;a++)if(Ou(o,e[a]))return!0;return!1}function __(o,e,a){if(o.length>1){if(Ou(o,e))return!0;for(let f=0;f<e.length;f++)if(gd(e[f],o,a))return!0}for(let f=0;f<o.length;f++)if(gd(o[f],e,a))return!0;return!1}function Ou(o,e){if(0===o.length||0===e.length)return!1;for(let a=0;a<o.length-1;a++){const f=o[a],v=o[a+1];for(let w=0;w<e.length-1;w++)if(fm(f,v,e[w],e[w+1]))return!0}return!1}function fm(o,e,a,f){return Ot(o,a,f)!==Ot(e,a,f)&&Ot(o,e,a)!==Ot(o,e,f)}function gd(o,e,a){const f=a*a;if(1===e.length)return o.distSqr(e[0])<f;for(let v=1;v<e.length;v++)if(ku(o,e[v-1],e[v])<f)return!0;return!1}function ku(o,e,a){const f=e.distSqr(a);if(0===f)return o.distSqr(e);const v=((o.x-e.x)*(a.x-e.x)+(o.y-e.y)*(a.y-e.y))/f;return o.distSqr(v<0?e:v>1?a:a.sub(e)._mult(v)._add(e))}function _d(o,e){let a,f,v,w=!1;for(let M=0;M<o.length;M++){a=o[M];for(let O=0,L=a.length-1;O<a.length;L=O++)f=a[O],v=a[L],f.y>e.y!=v.y>e.y&&e.x<(v.x-f.x)*(e.y-f.y)/(v.y-f.y)+f.x&&(w=!w)}return w}function nl(o,e){let a=!1;for(let f=0,v=o.length-1;f<o.length;v=f++){const w=o[f],M=o[v];w.y>e.y!=M.y>e.y&&e.x<(M.x-w.x)*(e.y-w.y)/(M.y-w.y)+w.x&&(a=!a)}return a}function mm(o,e,a){const f=a[0],v=a[2];if(o.x<f.x&&e.x<f.x||o.x>v.x&&e.x>v.x||o.y<f.y&&e.y<f.y||o.y>v.y&&e.y>v.y)return!1;const w=Ot(o,e,a[0]);return w!==Ot(o,e,a[1])||w!==Ot(o,e,a[2])||w!==Ot(o,e,a[3])}function Ru(o,e,a){const f=e.paint.get(o).value;return"constant"===f.kind?f.value:a.programConfigurations.get(e.id).getMaxValue(o)}function Mh(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function sr(o,e,a,f,v){if(!e[0]&&!e[1])return o;const w=Ie.convert(e)._mult(v);"viewport"===a&&w._rotate(-f);const M=[];for(let O=0;O<o.length;O++)M.push(o[O].sub(w));return M}let yd,Sh;Pn("CircleBucket",Ch,{omit:["layers"]});var Vp={get paint(){return Sh=Sh||new lo({"circle-radius":new Zn(ue.paint_circle["circle-radius"]),"circle-color":new Zn(ue.paint_circle["circle-color"]),"circle-blur":new Zn(ue.paint_circle["circle-blur"]),"circle-opacity":new Zn(ue.paint_circle["circle-opacity"]),"circle-translate":new An(ue.paint_circle["circle-translate"]),"circle-translate-anchor":new An(ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new An(ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new An(ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Zn(ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Zn(ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Zn(ue.paint_circle["circle-stroke-opacity"])})},get layout(){return yd=yd||new lo({"circle-sort-key":new Zn(ue.layout_circle["circle-sort-key"])})}},Lo=1e-6,xa=typeof Float32Array<"u"?Float32Array:Array;function Lc(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Up(o,e,a){var f=e[0],v=e[1],w=e[2],M=e[3],O=e[4],L=e[5],X=e[6],te=e[7],ae=e[8],ge=e[9],ve=e[10],Ce=e[11],Ve=e[12],ze=e[13],ct=e[14],vt=e[15],st=a[0],It=a[1],Lt=a[2],Zt=a[3];return o[0]=st*f+It*O+Lt*ae+Zt*Ve,o[1]=st*v+It*L+Lt*ge+Zt*ze,o[2]=st*w+It*X+Lt*ve+Zt*ct,o[3]=st*M+It*te+Lt*Ce+Zt*vt,o[4]=(st=a[4])*f+(It=a[5])*O+(Lt=a[6])*ae+(Zt=a[7])*Ve,o[5]=st*v+It*L+Lt*ge+Zt*ze,o[6]=st*w+It*X+Lt*ve+Zt*ct,o[7]=st*M+It*te+Lt*Ce+Zt*vt,o[8]=(st=a[8])*f+(It=a[9])*O+(Lt=a[10])*ae+(Zt=a[11])*Ve,o[9]=st*v+It*L+Lt*ge+Zt*ze,o[10]=st*w+It*X+Lt*ve+Zt*ct,o[11]=st*M+It*te+Lt*Ce+Zt*vt,o[12]=(st=a[12])*f+(It=a[13])*O+(Lt=a[14])*ae+(Zt=a[15])*Ve,o[13]=st*v+It*L+Lt*ge+Zt*ze,o[14]=st*w+It*X+Lt*ve+Zt*ct,o[15]=st*M+It*te+Lt*Ce+Zt*vt,o}Math.hypot||(Math.hypot=function(){for(var o=0,e=arguments.length;e--;)o+=arguments[e]*arguments[e];return Math.sqrt(o)});var Fc,gm=Up;function Gl(o,e,a){var f=e[0],v=e[1],w=e[2],M=e[3];return o[0]=a[0]*f+a[4]*v+a[8]*w+a[12]*M,o[1]=a[1]*f+a[5]*v+a[9]*w+a[13]*M,o[2]=a[2]*f+a[6]*v+a[10]*w+a[14]*M,o[3]=a[3]*f+a[7]*v+a[11]*w+a[15]*M,o}function il(o,e){const a=Gl([],[o.x,o.y,0,1],e);return new Ie(a[0]/a[3],a[1]/a[3])}Fc=new xa(4),xa!=Float32Array&&(Fc[0]=0,Fc[1]=0,Fc[2]=0,Fc[3]=0);class Nc extends Ch{}let Th;Pn("HeatmapBucket",Nc,{omit:["layers"]});var _m={get paint(){return Th=Th||new lo({"heatmap-radius":new Zn(ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Zn(ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new An(ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ta(ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new An(ue.paint_heatmap["heatmap-opacity"])})}};function Ih(o,{width:e,height:a},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==e*a*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${e*a*f}`)}else v=new Uint8Array(e*a*f);return o.width=e,o.height=a,o.data=v,o}function jp(o,{width:e,height:a},f){if(e===o.width&&a===o.height)return;const v=Ih({},{width:e,height:a},f);vd(o,v,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,e),height:Math.min(o.height,a)},f),o.width=e,o.height=a,o.data=v.data}function vd(o,e,a,f,v,w){if(0===v.width||0===v.height)return e;if(v.width>o.width||v.height>o.height||a.x>o.width-v.width||a.y>o.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>e.width||v.height>e.height||f.x>e.width-v.width||f.y>e.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const M=o.data,O=e.data;if(M===O)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<v.height;L++){const X=((a.y+L)*o.width+a.x)*w,te=((f.y+L)*e.width+f.x)*w;for(let ae=0;ae<v.width*w;ae++)O[te+ae]=M[X+ae]}return e}class Lu{constructor(e,a){Ih(this,e,1,a)}resize(e){jp(this,e,1)}clone(){return new Lu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,a,f,v,w){vd(e,a,f,v,w,1)}}class ia{constructor(e,a){Ih(this,e,4,a)}resize(e){jp(this,e,4)}replace(e,a){a?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new ia({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,a,f,v,w){vd(e,a,f,v,w,4)}}function bd(o){const e={},a=o.resolution||256,f=o.clips?o.clips.length:1,v=o.image||new ia({width:a,height:f});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const w=(M,O,L)=>{e[o.evaluationKey]=L;const X=o.expression.evaluate(e);v.data[M+O+0]=Math.floor(255*X.r/X.a),v.data[M+O+1]=Math.floor(255*X.g/X.a),v.data[M+O+2]=Math.floor(255*X.b/X.a),v.data[M+O+3]=Math.floor(255*X.a)};if(o.clips)for(let M=0,O=0;M<f;++M,O+=4*a)for(let L=0,X=0;L<a;L++,X+=4){const te=L/(a-1),{start:ae,end:ge}=o.clips[M];w(O,X,ae*(1-te)+ge*te)}else for(let M=0,O=0;M<a;M++,O+=4)w(0,O,M/(a-1));return v}let Hp;Pn("AlphaImage",Lu),Pn("RGBAImage",ia);var $p={get paint(){return Hp=Hp||new lo({"hillshade-illumination-direction":new An(ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new An(ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new An(ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new An(ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new An(ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new An(ue.paint_hillshade["hillshade-accent-color"])})}};const ym=xr([{name:"a_pos",components:2,type:"Int16"}],4),{members:xd}=ym;var rl={exports:{}};function dc(o,e,a){a=a||2;var f,v,w,M,O,L,X,te=e&&e.length,ae=te?e[0]*a:o.length,ge=Ah(o,0,ae,a,!0),ve=[];if(!ge||ge.next===ge.prev)return ve;if(te&&(ge=function(Ve,ze,ct,vt){var st,It,Lt,Zt=[];for(st=0,It=ze.length;st<It;st++)(Lt=Ah(Ve,ze[st]*vt,st<It-1?ze[st+1]*vt:Ve.length,vt,!1))===Lt.next&&(Lt.steiner=!0),Zt.push(vm(Lt));for(Zt.sort(Oh),st=0;st<Zt.length;st++)ct=v_(Zt[st],ct);return ct}(o,e,ge,a)),o.length>80*a){f=w=o[0],v=M=o[1];for(var Ce=a;Ce<ae;Ce+=a)(O=o[Ce])<f&&(f=O),(L=o[Ce+1])<v&&(v=L),O>w&&(w=O),L>M&&(M=L);X=0!==(X=Math.max(w-f,M-v))?32767/X:0}return ru(ge,ve,a,f,v,X,0),ve}function Ah(o,e,a,f,v){var w,M;if(v===Ed(o,e,a,f)>0)for(w=e;w<a;w+=f)M=kh(w,o[w],o[w+1],M);else for(w=a-f;w>=e;w-=f)M=kh(w,o[w],o[w+1],M);return M&&Fu(M,M.next)&&(Bu(M),M=M.next),M}function hc(o,e){if(!o)return o;e||(e=o);var a,f=o;do{if(a=!1,f.steiner||!Fu(f,f.next)&&0!==eo(f.prev,f,f.next))f=f.next;else{if(Bu(f),(f=e=f.prev)===f.next)break;a=!0}}while(a||f!==e);return e}function ru(o,e,a,f,v,w,M){if(o){!M&&w&&function(te,ae,ge,ve){var Ce=te;do{0===Ce.z&&(Ce.z=Cd(Ce.x,Ce.y,ae,ge,ve)),Ce.prevZ=Ce.prev,Ce.nextZ=Ce.next,Ce=Ce.next}while(Ce!==te);Ce.prevZ.nextZ=null,Ce.prevZ=null,function(Ve){var ze,ct,vt,st,It,Lt,Zt,Bn,jn=1;do{for(ct=Ve,Ve=null,It=null,Lt=0;ct;){for(Lt++,vt=ct,Zt=0,ze=0;ze<jn&&(Zt++,vt=vt.nextZ);ze++);for(Bn=jn;Zt>0||Bn>0&&vt;)0!==Zt&&(0===Bn||!vt||ct.z<=vt.z)?(st=ct,ct=ct.nextZ,Zt--):(st=vt,vt=vt.nextZ,Bn--),It?It.nextZ=st:Ve=st,st.prevZ=It,It=st;ct=vt}It.nextZ=null,jn*=2}while(Lt>1)}(Ce)}(o,f,v,w);for(var O,L,X=o;o.prev!==o.next;)if(O=o.prev,L=o.next,w?y_(o,f,v,w):Gp(o))e.push(O.i/a|0),e.push(o.i/a|0),e.push(L.i/a|0),Bu(o),o=L.next,X=L.next;else if((o=L)===X){M?1===M?ru(o=wd(hc(o),e,a),e,a,f,v,w,2):2===M&&Ph(o,e,a,f,v,w):ru(hc(o),e,a,f,v,w,1);break}}}function Gp(o){var e=o.prev,a=o,f=o.next;if(eo(e,a,f)>=0)return!1;for(var v=e.x,w=a.x,M=f.x,O=e.y,L=a.y,X=f.y,te=v<w?v<M?v:M:w<M?w:M,ae=O<L?O<X?O:X:L<X?L:X,ge=v>w?v>M?v:M:w>M?w:M,ve=O>L?O>X?O:X:L>X?L:X,Ce=f.next;Ce!==e;){if(Ce.x>=te&&Ce.x<=ge&&Ce.y>=ae&&Ce.y<=ve&&ou(v,O,w,L,M,X,Ce.x,Ce.y)&&eo(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.next}return!0}function y_(o,e,a,f){var v=o.prev,w=o,M=o.next;if(eo(v,w,M)>=0)return!1;for(var O=v.x,L=w.x,X=M.x,te=v.y,ae=w.y,ge=M.y,ve=O<L?O<X?O:X:L<X?L:X,Ce=te<ae?te<ge?te:ge:ae<ge?ae:ge,Ve=O>L?O>X?O:X:L>X?L:X,ze=te>ae?te>ge?te:ge:ae>ge?ae:ge,ct=Cd(ve,Ce,e,a,f),vt=Cd(Ve,ze,e,a,f),st=o.prevZ,It=o.nextZ;st&&st.z>=ct&&It&&It.z<=vt;){if(st.x>=ve&&st.x<=Ve&&st.y>=Ce&&st.y<=ze&&st!==v&&st!==M&&ou(O,te,L,ae,X,ge,st.x,st.y)&&eo(st.prev,st,st.next)>=0||(st=st.prevZ,It.x>=ve&&It.x<=Ve&&It.y>=Ce&&It.y<=ze&&It!==v&&It!==M&&ou(O,te,L,ae,X,ge,It.x,It.y)&&eo(It.prev,It,It.next)>=0))return!1;It=It.nextZ}for(;st&&st.z>=ct;){if(st.x>=ve&&st.x<=Ve&&st.y>=Ce&&st.y<=ze&&st!==v&&st!==M&&ou(O,te,L,ae,X,ge,st.x,st.y)&&eo(st.prev,st,st.next)>=0)return!1;st=st.prevZ}for(;It&&It.z<=vt;){if(It.x>=ve&&It.x<=Ve&&It.y>=Ce&&It.y<=ze&&It!==v&&It!==M&&ou(O,te,L,ae,X,ge,It.x,It.y)&&eo(It.prev,It,It.next)>=0)return!1;It=It.nextZ}return!0}function wd(o,e,a){var f=o;do{var v=f.prev,w=f.next.next;!Fu(v,w)&&Nu(v,f,f.next,w)&&pc(v,w)&&pc(w,v)&&(e.push(v.i/a|0),e.push(f.i/a|0),e.push(w.i/a|0),Bu(f),Bu(f.next),f=o=w),f=f.next}while(f!==o);return hc(f)}function Ph(o,e,a,f,v,w){var M=o;do{for(var O=M.next.next;O!==M.prev;){if(M.i!==O.i&&bm(M,O)){var L=ho(M,O);return M=hc(M,M.next),L=hc(L,L.next),ru(M,e,a,f,v,w,0),void ru(L,e,a,f,v,w,0)}O=O.next}M=M.next}while(M!==o)}function Oh(o,e){return o.x-e.x}function v_(o,e){var a=function(v,w){var M,O=w,L=v.x,X=v.y,te=-1/0;do{if(X<=O.y&&X>=O.next.y&&O.next.y!==O.y){var ae=O.x+(X-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(ae<=L&&ae>te&&(te=ae,M=O.x<O.next.x?O:O.next,ae===L))return M}O=O.next}while(O!==w);if(!M)return null;var ge,ve=M,Ce=M.x,Ve=M.y,ze=1/0;O=M;do{L>=O.x&&O.x>=Ce&&L!==O.x&&ou(X<Ve?L:te,X,Ce,Ve,X<Ve?te:L,X,O.x,O.y)&&(ge=Math.abs(X-O.y)/(L-O.x),pc(O,v)&&(ge<ze||ge===ze&&(O.x>M.x||O.x===M.x&&S0(M,O)))&&(M=O,ze=ge)),O=O.next}while(O!==ve);return M}(o,e);if(!a)return e;var f=ho(a,o);return hc(f,f.next),hc(a,a.next)}function S0(o,e){return eo(o.prev,o,e.prev)<0&&eo(e.next,o,o.next)<0}function Cd(o,e,a,f,v){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*v|0)|o<<8))|o<<4))|o<<2))|o<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-f)*v|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function vm(o){var e=o,a=o;do{(e.x<a.x||e.x===a.x&&e.y<a.y)&&(a=e),e=e.next}while(e!==o);return a}function ou(o,e,a,f,v,w,M,O){return(v-M)*(e-O)>=(o-M)*(w-O)&&(o-M)*(f-O)>=(a-M)*(e-O)&&(a-M)*(w-O)>=(v-M)*(f-O)}function bm(o,e){return o.next.i!==e.i&&o.prev.i!==e.i&&!function(a,f){var v=a;do{if(v.i!==a.i&&v.next.i!==a.i&&v.i!==f.i&&v.next.i!==f.i&&Nu(v,v.next,a,f))return!0;v=v.next}while(v!==a);return!1}(o,e)&&(pc(o,e)&&pc(e,o)&&function(a,f){var v=a,w=!1,M=(a.x+f.x)/2,O=(a.y+f.y)/2;do{v.y>O!=v.next.y>O&&v.next.y!==v.y&&M<(v.next.x-v.x)*(O-v.y)/(v.next.y-v.y)+v.x&&(w=!w),v=v.next}while(v!==a);return w}(o,e)&&(eo(o.prev,o,e.prev)||eo(o,e.prev,e))||Fu(o,e)&&eo(o.prev,o,o.next)>0&&eo(e.prev,e,e.next)>0)}function eo(o,e,a){return(e.y-o.y)*(a.x-e.x)-(e.x-o.x)*(a.y-e.y)}function Fu(o,e){return o.x===e.x&&o.y===e.y}function Nu(o,e,a,f){var v=su(eo(o,e,a)),w=su(eo(o,e,f)),M=su(eo(a,f,o)),O=su(eo(a,f,e));return v!==w&&M!==O||!(0!==v||!Bc(o,a,e))||!(0!==w||!Bc(o,f,e))||!(0!==M||!Bc(a,o,f))||!(0!==O||!Bc(a,e,f))}function Bc(o,e,a){return e.x<=Math.max(o.x,a.x)&&e.x>=Math.min(o.x,a.x)&&e.y<=Math.max(o.y,a.y)&&e.y>=Math.min(o.y,a.y)}function su(o){return o>0?1:o<0?-1:0}function pc(o,e){return eo(o.prev,o,o.next)<0?eo(o,e,o.next)>=0&&eo(o,o.prev,e)>=0:eo(o,e,o.prev)<0||eo(o,o.next,e)<0}function ho(o,e){var a=new zu(o.i,o.x,o.y),f=new zu(e.i,e.x,e.y),v=o.next,w=e.prev;return o.next=e,e.prev=o,a.next=v,v.prev=a,f.next=a,a.prev=f,w.next=f,f.prev=w,f}function kh(o,e,a,f){var v=new zu(o,e,a);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function Bu(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function zu(o,e,a){this.i=o,this.x=e,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ed(o,e,a,f){for(var v=0,w=e,M=a-f;w<a;w+=f)v+=(o[M]-o[w])*(o[w+1]+o[M+1]),M=w;return v}rl.exports=dc,rl.exports.default=dc,dc.deviation=function(o,e,a,f){var v=e&&e.length,w=Math.abs(Ed(o,0,v?e[0]*a:o.length,a));if(v)for(var M=0,O=e.length;M<O;M++)w-=Math.abs(Ed(o,e[M]*a,M<O-1?e[M+1]*a:o.length,a));var L=0;for(M=0;M<f.length;M+=3){var X=f[M]*a,te=f[M+1]*a,ae=f[M+2]*a;L+=Math.abs((o[X]-o[ae])*(o[te+1]-o[X+1])-(o[X]-o[te])*(o[ae+1]-o[X+1]))}return 0===w&&0===L?0:Math.abs((L-w)/w)},dc.flatten=function(o){for(var e=o[0][0].length,a={vertices:[],holes:[],dimensions:e},f=0,v=0;v<o.length;v++){for(var w=0;w<o[v].length;w++)for(var M=0;M<e;M++)a.vertices.push(o[v][w][M]);v>0&&a.holes.push(f+=o[v-1].length)}return a};var Zp=He(rl.exports);function xm(o,e,a,f,v){Wp(o,e,a||0,f||o.length-1,v||wm)}function Wp(o,e,a,f,v){for(;f>a;){if(f-a>600){var w=f-a+1,M=e-a+1,O=Math.log(w),L=.5*Math.exp(2*O/3),X=.5*Math.sqrt(O*L*(w-L)/w)*(M-w/2<0?-1:1);Wp(o,e,Math.max(a,Math.floor(e-M*L/w+X)),Math.min(f,Math.floor(e+(w-M)*L/w+X)),v)}var te=o[e],ae=a,ge=f;for(Vu(o,a,e),v(o[f],te)>0&&Vu(o,a,f);ae<ge;){for(Vu(o,ae,ge),ae++,ge--;v(o[ae],te)<0;)ae++;for(;v(o[ge],te)>0;)ge--}0===v(o[a],te)?Vu(o,a,ge):Vu(o,++ge,f),ge<=e&&(a=ge+1),e<=ge&&(f=ge-1)}}function Vu(o,e,a){var f=o[e];o[e]=o[a],o[a]=f}function wm(o,e){return o<e?-1:o>e?1:0}function zc(o,e){const a=o.length;if(a<=1)return[o];const f=[];let v,w;for(let M=0;M<a;M++){const O=kt(o[M]);0!==O&&(o[M].area=Math.abs(O),void 0===w&&(w=O<0),w===O<0?(v&&f.push(v),v=[o[M]]):v.push(o[M]))}if(v&&f.push(v),e>1)for(let M=0;M<f.length;M++)f[M].length<=e||(xm(f[M],e,1,f[M].length-1,Rh),f[M]=f[M].slice(0,e));return f}function Rh(o,e){return e.area-o.area}function Vc(o,e,a){const f=a.patternDependencies;let v=!1;for(const w of e){const M=w.paint.get(`${o}-pattern`);M.isConstant()||(v=!0);const O=M.constantOr(null);O&&(v=!0,f[O.to]=!0,f[O.from]=!0)}return v}function Uu(o,e,a,f,v){const w=v.patternDependencies;for(const M of e){const O=M.paint.get(`${o}-pattern`).value;if("constant"!==O.kind){let L=O.evaluate({zoom:f-1},a,{},v.availableImages),X=O.evaluate({zoom:f},a,{},v.availableImages),te=O.evaluate({zoom:f+1},a,{},v.availableImages);L=L&&L.name?L.name:L,X=X&&X.name?X.name:X,te=te&&te.name?te.name:te,w[L]=!0,w[X]=!0,w[te]=!0,a.patterns[M.id]={min:L,mid:X,max:te}}}return a}class Dd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ht,this.indexArray=new mr,this.indexArray2=new Zi,this.programConfigurations=new iu(e.layers,e.zoom),this.segments=new Yi,this.segments2=new Yi,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,f){this.hasPattern=Vc("fill",this.layers,a);const v=this.layers[0].layout.get("fill-sort-key"),w=!v.isConstant(),M=[];for(const{feature:O,id:L,index:X,sourceLayerIndex:te}of e){const ae=this.layers[0]._featureFilter.needGeometry,ge=Dl(O,ae);if(!this.layers[0]._featureFilter.filter(new fr(this.zoom),ge,f))continue;const ve=w?v.evaluate(ge,{},f,a.availableImages):void 0,Ce={id:L,properties:O.properties,type:O.type,sourceLayerIndex:te,index:X,geometry:ae?ge.geometry:Rc(O),patterns:{},sortKey:ve};M.push(Ce)}w&&M.sort((O,L)=>O.sortKey-L.sortKey);for(const O of M){const{geometry:L,index:X,sourceLayerIndex:te}=O;if(this.hasPattern){const ae=Uu("fill",this.layers,O,this.zoom,a);this.patternFeatures.push(ae)}else this.addFeature(O,L,X,f,{});a.featureIndex.insert(e[X].feature,L,X,te,this.index)}}update(e,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,f)}addFeatures(e,a,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xd),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,a,f,v,w){for(const M of zc(a,500)){let O=0;for(const ve of M)O+=ve.length;const L=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray),X=L.vertexLength,te=[],ae=[];for(const ve of M){if(0===ve.length)continue;ve!==M[0]&&ae.push(te.length/2);const Ce=this.segments2.prepareSegment(ve.length,this.layoutVertexArray,this.indexArray2),Ve=Ce.vertexLength;this.layoutVertexArray.emplaceBack(ve[0].x,ve[0].y),this.indexArray2.emplaceBack(Ve+ve.length-1,Ve),te.push(ve[0].x),te.push(ve[0].y);for(let ze=1;ze<ve.length;ze++)this.layoutVertexArray.emplaceBack(ve[ze].x,ve[ze].y),this.indexArray2.emplaceBack(Ve+ze-1,Ve+ze),te.push(ve[ze].x),te.push(ve[ze].y);Ce.vertexLength+=ve.length,Ce.primitiveLength+=ve.length}const ge=Zp(te,ae);for(let ve=0;ve<ge.length;ve+=3)this.indexArray.emplaceBack(X+ge[ve],X+ge[ve+1],X+ge[ve+2]);L.vertexLength+=O,L.primitiveLength+=ge.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,f,w,v)}}let Lh,Fh;Pn("FillBucket",Dd,{omit:["layers","patternFeatures"]});var Cm={get paint(){return Fh=Fh||new lo({"fill-antialias":new An(ue.paint_fill["fill-antialias"]),"fill-opacity":new Zn(ue.paint_fill["fill-opacity"]),"fill-color":new Zn(ue.paint_fill["fill-color"]),"fill-outline-color":new Zn(ue.paint_fill["fill-outline-color"]),"fill-translate":new An(ue.paint_fill["fill-translate"]),"fill-translate-anchor":new An(ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ul(ue.paint_fill["fill-pattern"])})},get layout(){return Lh=Lh||new lo({"fill-sort-key":new Zn(ue.layout_fill["fill-sort-key"])})}};const qp=xr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Kp=xr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Nh}=qp;var ol={},Em=he,fc=Uc;function Uc(o,e,a,f,v){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=v,o.readFields(Yp,this,e)}function Yp(o,e,a){1==o?e.id=a.readVarint():2==o?function(f,v){for(var w=f.readVarint()+f.pos;f.pos<w;){var M=v._keys[f.readVarint()],O=v._values[f.readVarint()];v.properties[M]=O}}(a,e):3==o?e.type=a.readVarint():4==o&&(e._geometry=a.pos)}function jc(o){for(var e,a,f=0,v=0,w=o.length,M=w-1;v<w;M=v++)f+=((a=o[M]).x-(e=o[v]).x)*(e.y+a.y);return f}Uc.types=["Unknown","Point","LineString","Polygon"],Uc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var e,a=o.readVarint()+o.pos,f=1,v=0,w=0,M=0,O=[];o.pos<a;){if(v<=0){var L=o.readVarint();f=7&L,v=L>>3}if(v--,1===f||2===f)w+=o.readSVarint(),M+=o.readSVarint(),1===f&&(e&&O.push(e),e=[]),e.push(new Em(w,M));else{if(7!==f)throw new Error("unknown command "+f);e&&e.push(e[0].clone())}}return e&&O.push(e),O},Uc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var e=o.readVarint()+o.pos,a=1,f=0,v=0,w=0,M=1/0,O=-1/0,L=1/0,X=-1/0;o.pos<e;){if(f<=0){var te=o.readVarint();a=7&te,f=te>>3}if(f--,1===a||2===a)(v+=o.readSVarint())<M&&(M=v),v>O&&(O=v),(w+=o.readSVarint())<L&&(L=w),w>X&&(X=w);else if(7!==a)throw new Error("unknown command "+a)}return[M,L,O,X]},Uc.prototype.toGeoJSON=function(o,e,a){var f,v,w=this.extent*Math.pow(2,a),M=this.extent*o,O=this.extent*e,L=this.loadGeometry(),X=Uc.types[this.type];function te(ve){for(var Ce=0;Ce<ve.length;Ce++){var Ve=ve[Ce];ve[Ce]=[360*(Ve.x+M)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ve.y+O)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var ae=[];for(f=0;f<L.length;f++)ae[f]=L[f][0];te(L=ae);break;case 2:for(f=0;f<L.length;f++)te(L[f]);break;case 3:for(L=function(ve){var Ce=ve.length;if(Ce<=1)return[ve];for(var Ve,ze,ct=[],vt=0;vt<Ce;vt++){var st=jc(ve[vt]);0!==st&&(void 0===ze&&(ze=st<0),ze===st<0?(Ve&&ct.push(Ve),Ve=[ve[vt]]):Ve.push(ve[vt]))}return Ve&&ct.push(Ve),ct}(L),f=0;f<L.length;f++)for(v=0;v<L[f].length;v++)te(L[f][v])}1===L.length?L=L[0]:X="Multi"+X;var ge={type:"Feature",geometry:{type:X,coordinates:L},properties:this.properties};return"id"in this&&(ge.id=this.id),ge};var Dm=fc,Md=ju;function ju(o,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Mm,this,e),this.length=this._features.length}function Mm(o,e,a){15===o?e.version=a.readVarint():1===o?e.name=a.readString():5===o?e.extent=a.readVarint():2===o?e._features.push(a.pos):3===o?e._keys.push(a.readString()):4===o&&e._values.push(function(f){for(var v=null,w=f.readVarint()+f.pos;f.pos<w;){var M=f.readVarint()>>3;v=1===M?f.readString():2===M?f.readFloat():3===M?f.readDouble():4===M?f.readVarint64():5===M?f.readVarint():6===M?f.readSVarint():7===M?f.readBoolean():null}return v}(a))}ju.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var e=this._pbf.readVarint()+this._pbf.pos;return new Dm(this._pbf,e,this.extent,this._keys,this._values)};var Bh=Md;function Sd(o,e,a){if(3===o){var f=new Bh(a,a.readVarint()+a.pos);f.length&&(e[f.name]=f)}}ol.VectorTile=function(o,e){this.layers=o.readFields(Sd,{},e)},ol.VectorTileFeature=fc,ol.VectorTileLayer=Md;const Hc=ol.VectorTileFeature.types,Td=Math.pow(2,13);function $c(o,e,a,f,v,w,M,O){o.emplaceBack(e,a,2*Math.floor(f*Td)+M,v*Td*2,w*Td*2,Math.round(O))}class zh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Yt,this.centroidVertexArray=new pt,this.indexArray=new mr,this.programConfigurations=new iu(e.layers,e.zoom),this.segments=new Yi,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,f){this.features=[],this.hasPattern=Vc("fill-extrusion",this.layers,a);for(const{feature:v,id:w,index:M,sourceLayerIndex:O}of e){const L=this.layers[0]._featureFilter.needGeometry,X=Dl(v,L);if(!this.layers[0]._featureFilter.filter(new fr(this.zoom),X,f))continue;const te={id:w,sourceLayerIndex:O,index:M,geometry:L?X.geometry:Rc(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Uu("fill-extrusion",this.layers,te,this.zoom,a)):this.addFeature(te,te.geometry,M,f,{}),a.featureIndex.insert(v,te.geometry,M,O,this.index,!0)}}addFeatures(e,a,f){for(const v of this.features){const{geometry:w}=v;this.addFeature(v,w,v.index,a,f)}}update(e,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,f)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Nh),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Kp.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,a,f,v,w){const M={x:0,y:0,vertexCount:0};for(const O of zc(a,500)){let L=0;for(const Ce of O)L+=Ce.length;let X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ce of O){if(0===Ce.length||((o=Ce).every(e=>e.x<0)||o.every(e=>e.x>So)||o.every(e=>e.y<0)||o.every(e=>e.y>So)))continue;let Ve=0;for(let ze=0;ze<Ce.length;ze++){const ct=Ce[ze];if(ze>=1){const vt=Ce[ze-1];if(!Sm(ct,vt)){X.vertexLength+4>Yi.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const st=ct.sub(vt)._perp()._unit(),It=vt.dist(ct);Ve+It>32768&&(Ve=0),$c(this.layoutVertexArray,ct.x,ct.y,st.x,st.y,0,0,Ve),$c(this.layoutVertexArray,ct.x,ct.y,st.x,st.y,0,1,Ve),M.x+=2*ct.x,M.y+=2*ct.y,M.vertexCount+=2,Ve+=It,$c(this.layoutVertexArray,vt.x,vt.y,st.x,st.y,0,0,Ve),$c(this.layoutVertexArray,vt.x,vt.y,st.x,st.y,0,1,Ve),M.x+=2*vt.x,M.y+=2*vt.y,M.vertexCount+=2;const Lt=X.vertexLength;this.indexArray.emplaceBack(Lt,Lt+2,Lt+1),this.indexArray.emplaceBack(Lt+1,Lt+2,Lt+3),X.vertexLength+=4,X.primitiveLength+=2}}}}if(X.vertexLength+L>Yi.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray)),"Polygon"!==Hc[e.type])continue;const te=[],ae=[],ge=X.vertexLength;for(const Ce of O)if(0!==Ce.length){Ce!==O[0]&&ae.push(te.length/2);for(let Ve=0;Ve<Ce.length;Ve++){const ze=Ce[Ve];$c(this.layoutVertexArray,ze.x,ze.y,0,0,1,1,0),M.x+=ze.x,M.y+=ze.y,M.vertexCount+=1,te.push(ze.x),te.push(ze.y)}}const ve=Zp(te,ae);for(let Ce=0;Ce<ve.length;Ce+=3)this.indexArray.emplaceBack(ge+ve[Ce],ge+ve[Ce+2],ge+ve[Ce+1]);X.primitiveLength+=ve.length/3,X.vertexLength+=L}var o;for(let O=0;O<M.vertexCount;O++)this.centroidVertexArray.emplaceBack(Math.floor(M.x/M.vertexCount),Math.floor(M.y/M.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,f,w,v)}}function Sm(o,e){return o.x===e.x&&(o.x<0||o.x>So)||o.y===e.y&&(o.y<0||o.y>So)}let Gc;Pn("FillExtrusionBucket",zh,{omit:["layers","features"]});var au={get paint(){return Gc=Gc||new lo({"fill-extrusion-opacity":new An(ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Zn(ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new An(ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new An(ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ul(ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Zn(ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Zn(ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new An(ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function lu(o,e){return o.x*e.x+o.y*e.y}function Jp(o,e){if(1===o.length){let a=0;const f=e[a++];let v;for(;!v||f.equals(v);)if(v=e[a++],!v)return 1/0;for(;a<e.length;a++){const w=e[a],M=o[0],O=v.sub(f),L=w.sub(f),X=M.sub(f),te=lu(O,O),ae=lu(O,L),ge=lu(L,L),ve=lu(X,O),Ce=lu(X,L),Ve=te*ge-ae*ae,ze=(ge*ve-ae*Ce)/Ve,ct=(te*Ce-ae*ve)/Ve,vt=f.z*(1-ze-ct)+v.z*ze+w.z*ct;if(isFinite(vt))return vt}return 1/0}{let a=1/0;for(const f of e)a=Math.min(a,f.z);return a}}const Tm=xr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Vh}=Tm,Im=xr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Qp}=Im,Id=ol.VectorTileFeature.types,ef=Math.cos(Math.PI/180*37.5),Am=Math.pow(2,14)/.5;class Uh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Kt,this.layoutVertexArray2=new _n,this.indexArray=new mr,this.programConfigurations=new iu(e.layers,e.zoom),this.segments=new Yi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,f){this.hasPattern=Vc("line",this.layers,a);const v=this.layers[0].layout.get("line-sort-key"),w=!v.isConstant(),M=[];for(const{feature:O,id:L,index:X,sourceLayerIndex:te}of e){const ae=this.layers[0]._featureFilter.needGeometry,ge=Dl(O,ae);if(!this.layers[0]._featureFilter.filter(new fr(this.zoom),ge,f))continue;const ve=w?v.evaluate(ge,{},f):void 0,Ce={id:L,properties:O.properties,type:O.type,sourceLayerIndex:te,index:X,geometry:ae?ge.geometry:Rc(O),patterns:{},sortKey:ve};M.push(Ce)}w&&M.sort((O,L)=>O.sortKey-L.sortKey);for(const O of M){const{geometry:L,index:X,sourceLayerIndex:te}=O;if(this.hasPattern){const ae=Uu("line",this.layers,O,this.zoom,a);this.patternFeatures.push(ae)}else this.addFeature(O,L,X,f,{});a.featureIndex.insert(e[X].feature,L,X,te,this.index)}}update(e,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,f)}addFeatures(e,a,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Qp)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Vh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,a,f,v,w){const M=this.layers[0].layout,O=M.get("line-join").evaluate(e,{}),L=M.get("line-cap"),X=M.get("line-miter-limit"),te=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const ae of a)this.addLine(ae,e,O,L,X,te);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,f,w,v)}addLine(e,a,f,v,w,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ct=0;ct<e.length-1;ct++)this.totalDistance+=e[ct].dist(e[ct+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O="Polygon"===Id[a.type];let L=e.length;for(;L>=2&&e[L-1].equals(e[L-2]);)L--;let X=0;for(;X<L-1&&e[X].equals(e[X+1]);)X++;if(L<(O?3:2))return;"bevel"===f&&(w=1.05);const te=this.overscaling<=16?122880/(512*this.overscaling):0,ae=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let ge,ve,Ce,Ve,ze;this.e1=this.e2=-1,O&&(ge=e[L-2],ze=e[X].sub(ge)._unit()._perp());for(let ct=X;ct<L;ct++){if(Ce=ct===L-1?O?e[X+1]:void 0:e[ct+1],Ce&&e[ct].equals(Ce))continue;ze&&(Ve=ze),ge&&(ve=ge),ge=e[ct],ze=Ce?Ce.sub(ge)._unit()._perp():Ve,Ve=Ve||ze;let vt=Ve.add(ze);0===vt.x&&0===vt.y||vt._unit();const st=Ve.x*ze.x+Ve.y*ze.y,It=vt.x*ze.x+vt.y*ze.y,Lt=0!==It?1/It:1/0,Zt=2*Math.sqrt(2-2*It),Bn=It<ef&&ve&&Ce,jn=Ve.x*ze.y-Ve.y*ze.x>0;if(Bn&&ct>X){const pn=ge.dist(ve);if(pn>2*te){const Cn=ge.sub(ge.sub(ve)._mult(te/pn)._round());this.updateDistance(ve,Cn),this.addCurrentVertex(Cn,Ve,0,0,ae),ve=Cn}}const Mn=ve&&Ce;let vn=Mn?f:O?"butt":v;if(Mn&&"round"===vn&&(Lt<M?vn="miter":Lt<=2&&(vn="fakeround")),"miter"===vn&&Lt>w&&(vn="bevel"),"bevel"===vn&&(Lt>2&&(vn="flipbevel"),Lt<w&&(vn="miter")),ve&&this.updateDistance(ve,ge),"miter"===vn)vt._mult(Lt),this.addCurrentVertex(ge,vt,0,0,ae);else if("flipbevel"===vn){if(Lt>100)vt=ze.mult(-1);else{const pn=Lt*Ve.add(ze).mag()/Ve.sub(ze).mag();vt._perp()._mult(pn*(jn?-1:1))}this.addCurrentVertex(ge,vt,0,0,ae),this.addCurrentVertex(ge,vt.mult(-1),0,0,ae)}else if("bevel"===vn||"fakeround"===vn){const pn=-Math.sqrt(Lt*Lt-1),Cn=jn?pn:0,wn=jn?0:pn;if(ve&&this.addCurrentVertex(ge,Ve,Cn,wn,ae),"fakeround"===vn){const rn=Math.round(180*Zt/Math.PI/20);for(let Hn=1;Hn<rn;Hn++){let $n=Hn/rn;if(.5!==$n){const ar=$n-.5;$n+=$n*ar*($n-1)*((1.0904+st*(st*(3.55645-1.43519*st)-3.2452))*ar*ar+(.848013+st*(.215638*st-1.06021)))}const Ri=ze.sub(Ve)._mult($n)._add(Ve)._unit()._mult(jn?-1:1);this.addHalfVertex(ge,Ri.x,Ri.y,!1,jn,0,ae)}}Ce&&this.addCurrentVertex(ge,ze,-Cn,-wn,ae)}else if("butt"===vn)this.addCurrentVertex(ge,vt,0,0,ae);else if("square"===vn){const pn=ve?1:-1;this.addCurrentVertex(ge,vt,pn,pn,ae)}else"round"===vn&&(ve&&(this.addCurrentVertex(ge,Ve,0,0,ae),this.addCurrentVertex(ge,Ve,1,1,ae,!0)),Ce&&(this.addCurrentVertex(ge,ze,-1,-1,ae,!0),this.addCurrentVertex(ge,ze,0,0,ae)));if(Bn&&ct<L-1){const pn=ge.dist(Ce);if(pn>2*te){const Cn=ge.add(Ce.sub(ge)._mult(te/pn)._round());this.updateDistance(ge,Cn),this.addCurrentVertex(Cn,ze,0,0,ae),ge=Cn}}}}addCurrentVertex(e,a,f,v,w,M=!1){const O=a.y*v-a.x,L=-a.y-a.x*v;this.addHalfVertex(e,a.x+a.y*f,a.y-a.x*f,M,!1,f,w),this.addHalfVertex(e,O,L,M,!0,-v,w),this.distance>Am/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,a,f,v,w,M))}addHalfVertex({x:e,y:a},f,v,w,M,O,L){const X=.5*(this.lineClips?this.scaledDistance*(Am-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(w?1:0),(a<<1)+(M?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(0===O?0:O<0?-1:1)|(63&X)<<2,X>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const te=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,te),L.primitiveLength++),M?this.e2=te:this.e1=te}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,a){this.distance+=e.dist(a),this.updateScaledDistance()}}let cu,tf;Pn("LineBucket",Uh,{omit:["layers","patternFeatures"]});var Zc={get paint(){return tf=tf||new lo({"line-opacity":new Zn(ue.paint_line["line-opacity"]),"line-color":new Zn(ue.paint_line["line-color"]),"line-translate":new An(ue.paint_line["line-translate"]),"line-translate-anchor":new An(ue.paint_line["line-translate-anchor"]),"line-width":new Zn(ue.paint_line["line-width"]),"line-gap-width":new Zn(ue.paint_line["line-gap-width"]),"line-offset":new Zn(ue.paint_line["line-offset"]),"line-blur":new Zn(ue.paint_line["line-blur"]),"line-dasharray":new kc(ue.paint_line["line-dasharray"]),"line-pattern":new Ul(ue.paint_line["line-pattern"]),"line-gradient":new ta(ue.paint_line["line-gradient"])})},get layout(){return cu=cu||new lo({"line-cap":new An(ue.layout_line["line-cap"]),"line-join":new Zn(ue.layout_line["line-join"]),"line-miter-limit":new An(ue.layout_line["line-miter-limit"]),"line-round-limit":new An(ue.layout_line["line-round-limit"]),"line-sort-key":new Zn(ue.layout_line["line-sort-key"])})}};class Hu extends Zn{possiblyEvaluate(e,a){return a=new fr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(e,a)}evaluate(e,a,f,v){return a=Ct({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(e,a,f,v)}}let Ad;function uu(o,e){return e>0?e+2*o:o}const $u=xr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Pm=xr([{name:"a_projected_pos",components:3,type:"Float32"}],4);xr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Om=xr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);xr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const nf=xr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Wc=xr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gu(o,e,a){return o.sections.forEach(f=>{f.text=function(v,w,M){const O=w.layout.get("text-transform").evaluate(M,{});return"uppercase"===O?v=v.toLocaleUpperCase():"lowercase"===O&&(v=v.toLocaleLowerCase()),cs.applyArabicShaping&&(v=cs.applyArabicShaping(v)),v}(f.text,e,a)}),o}xr([{name:"triangle",components:3,type:"Uint16"}]),xr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xr([{type:"Float32",name:"offsetX"}]),xr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const qc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var rf=tr,Pd=function(o,e,a,f,v){var w,M,O=8*v-f-1,L=(1<<O)-1,X=L>>1,te=-7,ae=a?v-1:0,ge=a?-1:1,ve=o[e+ae];for(ae+=ge,w=ve&(1<<-te)-1,ve>>=-te,te+=O;te>0;w=256*w+o[e+ae],ae+=ge,te-=8);for(M=w&(1<<-te)-1,w>>=-te,te+=f;te>0;M=256*M+o[e+ae],ae+=ge,te-=8);if(0===w)w=1-X;else{if(w===L)return M?NaN:1/0*(ve?-1:1);M+=Math.pow(2,f),w-=X}return(ve?-1:1)*M*Math.pow(2,w-f)},km=function(o,e,a,f,v,w){var M,O,L,X=8*w-v-1,te=(1<<X)-1,ae=te>>1,ge=23===v?Math.pow(2,-24)-Math.pow(2,-77):0,ve=f?0:w-1,Ce=f?1:-1,Ve=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(O=isNaN(e)?1:0,M=te):(M=Math.floor(Math.log(e)/Math.LN2),e*(L=Math.pow(2,-M))<1&&(M--,L*=2),(e+=M+ae>=1?ge/L:ge*Math.pow(2,1-ae))*L>=2&&(M++,L/=2),M+ae>=te?(O=0,M=te):M+ae>=1?(O=(e*L-1)*Math.pow(2,v),M+=ae):(O=e*Math.pow(2,ae-1)*Math.pow(2,v),M=0));v>=8;o[a+ve]=255&O,ve+=Ce,O/=256,v-=8);for(M=M<<v|O,X+=v;X>0;o[a+ve]=255&M,ve+=Ce,M/=256,X-=8);o[a+ve-Ce]|=128*Ve};function tr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}tr.Varint=0,tr.Fixed64=1,tr.Bytes=2,tr.Fixed32=5;var Zu=4294967296,Rm=1/Zu,Lm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function mc(o){return o.type===tr.Bytes?o.readVarint()+o.pos:o.pos+1}function Fm(o,e,a){var f=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));a.realloc(f);for(var v=a.pos-1;v>=o;v--)a.buf[v+f]=a.buf[v]}function Nm(o,e){for(var a=0;a<o.length;a++)e.writeVarint(o[a])}function sf(o,e){for(var a=0;a<o.length;a++)e.writeSVarint(o[a])}function Od(o,e){for(var a=0;a<o.length;a++)e.writeFloat(o[a])}function af(o,e){for(var a=0;a<o.length;a++)e.writeDouble(o[a])}function qu(o,e){for(var a=0;a<o.length;a++)e.writeBoolean(o[a])}function lf(o,e){for(var a=0;a<o.length;a++)e.writeFixed32(o[a])}function jh(o,e){for(var a=0;a<o.length;a++)e.writeSFixed32(o[a])}function Bm(o,e){for(var a=0;a<o.length;a++)e.writeFixed64(o[a])}function Hh(o,e){for(var a=0;a<o.length;a++)e.writeSFixed64(o[a])}function gc(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+16777216*o[e+3]}function du(o,e,a){o[a]=e,o[a+1]=e>>>8,o[a+2]=e>>>16,o[a+3]=e>>>24}function cf(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+(o[e+3]<<24)}tr.prototype={destroy:function(){this.buf=null},readFields:function(o,e,a){for(a=a||this.length;this.pos<a;){var f=this.readVarint(),v=f>>3,w=this.pos;this.type=7&f,o(v,e,this),this.pos===w&&this.skip(f)}return e},readMessage:function(o,e){return this.readFields(o,e,this.readVarint()+this.pos)},readFixed32:function(){var o=gc(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=cf(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=gc(this.buf,this.pos)+gc(this.buf,this.pos+4)*Zu;return this.pos+=8,o},readSFixed64:function(){var o=gc(this.buf,this.pos)+cf(this.buf,this.pos+4)*Zu;return this.pos+=8,o},readFloat:function(){var o=Pd(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Pd(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var e,a,f=this.buf;return e=127&(a=f[this.pos++]),a<128?e:(e|=(127&(a=f[this.pos++]))<<7,a<128?e:(e|=(127&(a=f[this.pos++]))<<14,a<128?e:(e|=(127&(a=f[this.pos++]))<<21,a<128?e:function(v,w,M){var O,L,X=M.buf;if(O=(112&(L=X[M.pos++]))>>4,L<128||(O|=(127&(L=X[M.pos++]))<<3,L<128)||(O|=(127&(L=X[M.pos++]))<<10,L<128)||(O|=(127&(L=X[M.pos++]))<<17,L<128)||(O|=(127&(L=X[M.pos++]))<<24,L<128)||(O|=(1&(L=X[M.pos++]))<<31,L<128))return function Wu(o,e,a){return a?4294967296*e+(o>>>0):4294967296*(e>>>0)+(o>>>0)}(v,O,w);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(a=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,e=this.pos;return this.pos=o,o-e>=12&&Lm?Lm.decode(this.buf.subarray(e,o)):function(a,f,v){for(var w="",M=f;M<v;){var O,L,X,te=a[M],ae=null,ge=te>239?4:te>223?3:te>191?2:1;if(M+ge>v)break;1===ge?te<128&&(ae=te):2===ge?128==(192&(O=a[M+1]))&&(ae=(31&te)<<6|63&O)<=127&&(ae=null):3===ge?(L=a[M+2],128==(192&(O=a[M+1]))&&128==(192&L)&&((ae=(15&te)<<12|(63&O)<<6|63&L)<=2047||ae>=55296&&ae<=57343)&&(ae=null)):4===ge&&(L=a[M+2],X=a[M+3],128==(192&(O=a[M+1]))&&128==(192&L)&&128==(192&X)&&((ae=(15&te)<<18|(63&O)<<12|(63&L)<<6|63&X)<=65535||ae>=1114112)&&(ae=null)),null===ae?(ae=65533,ge=1):ae>65535&&(ae-=65536,w+=String.fromCharCode(ae>>>10&1023|55296),ae=56320|1023&ae),w+=String.fromCharCode(ae),M+=ge}return w}(this.buf,e,o)},readBytes:function(){var o=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,o);return this.pos=o,e},readPackedVarint:function(o,e){if(this.type!==tr.Bytes)return o.push(this.readVarint(e));var a=mc(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(e));return o},readPackedSVarint:function(o){if(this.type!==tr.Bytes)return o.push(this.readSVarint());var e=mc(this);for(o=o||[];this.pos<e;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==tr.Bytes)return o.push(this.readBoolean());var e=mc(this);for(o=o||[];this.pos<e;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==tr.Bytes)return o.push(this.readFloat());var e=mc(this);for(o=o||[];this.pos<e;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==tr.Bytes)return o.push(this.readDouble());var e=mc(this);for(o=o||[];this.pos<e;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==tr.Bytes)return o.push(this.readFixed32());var e=mc(this);for(o=o||[];this.pos<e;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==tr.Bytes)return o.push(this.readSFixed32());var e=mc(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==tr.Bytes)return o.push(this.readFixed64());var e=mc(this);for(o=o||[];this.pos<e;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==tr.Bytes)return o.push(this.readSFixed64());var e=mc(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed64());return o},skip:function(o){var e=7&o;if(e===tr.Varint)for(;this.buf[this.pos++]>127;);else if(e===tr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===tr.Fixed32)this.pos+=4;else{if(e!==tr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(o,e){this.writeVarint(o<<3|e)},realloc:function(o){for(var e=this.length||16;e<this.pos+o;)e*=2;if(e!==this.length){var a=new Uint8Array(e);a.set(this.buf),this.buf=a,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),du(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),du(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),du(this.buf,-1&o,this.pos),du(this.buf,Math.floor(o*Rm),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),du(this.buf,-1&o,this.pos),du(this.buf,Math.floor(o*Rm),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(e,a){var f,v,w,O;if(e>=0?(f=e%4294967296|0,v=e/4294967296|0):(v=~(-e/4294967296),4294967295^(f=~(-e%4294967296))?f=f+1|0:(f=0,v=v+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),w=f,(O=a).buf[O.pos++]=127&w|128,w>>>=7,O.buf[O.pos++]=127&w|128,w>>>=7,O.buf[O.pos++]=127&w|128,w>>>=7,O.buf[O.pos++]=127&w|128,O.buf[O.pos]=127&(w>>>=7),function(w,M){var O=(7&w)<<4;M.buf[M.pos++]|=O|((w>>>=3)?128:0),w&&(M.buf[M.pos++]=127&w|((w>>>=7)?128:0),w&&(M.buf[M.pos++]=127&w|((w>>>=7)?128:0),w&&(M.buf[M.pos++]=127&w|((w>>>=7)?128:0),w&&(M.buf[M.pos++]=127&w|((w>>>=7)?128:0),w&&(M.buf[M.pos++]=127&w)))))}(v,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var e=this.pos;this.pos=function(f,v,w){for(var M,O,L=0;L<v.length;L++){if((M=v.charCodeAt(L))>55295&&M<57344){if(!O){M>56319||L+1===v.length?(f[w++]=239,f[w++]=191,f[w++]=189):O=M;continue}if(M<56320){f[w++]=239,f[w++]=191,f[w++]=189,O=M;continue}M=O-55296<<10|M-56320|65536,O=null}else O&&(f[w++]=239,f[w++]=191,f[w++]=189,O=null);M<128?f[w++]=M:(M<2048?f[w++]=M>>6|192:(M<65536?f[w++]=M>>12|224:(f[w++]=M>>18|240,f[w++]=M>>12&63|128),f[w++]=M>>6&63|128),f[w++]=63&M|128)}return w}(this.buf,o,this.pos);var a=this.pos-e;a>=128&&Fm(e,a,this),this.pos=e-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),km(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),km(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var e=o.length;this.writeVarint(e),this.realloc(e);for(var a=0;a<e;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,e){this.pos++;var a=this.pos;o(e,this);var f=this.pos-a;f>=128&&Fm(a,f,this),this.pos=a-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,e,a){this.writeTag(o,tr.Bytes),this.writeRawMessage(e,a)},writePackedVarint:function(o,e){e.length&&this.writeMessage(o,Nm,e)},writePackedSVarint:function(o,e){e.length&&this.writeMessage(o,sf,e)},writePackedBoolean:function(o,e){e.length&&this.writeMessage(o,qu,e)},writePackedFloat:function(o,e){e.length&&this.writeMessage(o,Od,e)},writePackedDouble:function(o,e){e.length&&this.writeMessage(o,af,e)},writePackedFixed32:function(o,e){e.length&&this.writeMessage(o,lf,e)},writePackedSFixed32:function(o,e){e.length&&this.writeMessage(o,jh,e)},writePackedFixed64:function(o,e){e.length&&this.writeMessage(o,Bm,e)},writePackedSFixed64:function(o,e){e.length&&this.writeMessage(o,Hh,e)},writeBytesField:function(o,e){this.writeTag(o,tr.Bytes),this.writeBytes(e)},writeFixed32Field:function(o,e){this.writeTag(o,tr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(o,e){this.writeTag(o,tr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(o,e){this.writeTag(o,tr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(o,e){this.writeTag(o,tr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(o,e){this.writeTag(o,tr.Varint),this.writeVarint(e)},writeSVarintField:function(o,e){this.writeTag(o,tr.Varint),this.writeSVarint(e)},writeStringField:function(o,e){this.writeTag(o,tr.Bytes),this.writeString(e)},writeFloatField:function(o,e){this.writeTag(o,tr.Fixed32),this.writeFloat(e)},writeDoubleField:function(o,e){this.writeTag(o,tr.Fixed64),this.writeDouble(e)},writeBooleanField:function(o,e){this.writeVarintField(o,Boolean(e))}};var _c,kd=He(rf);function zm(o,e,a){1===o&&a.readMessage(Vm,e)}function Vm(o,e,a){if(3===o){const{id:f,bitmap:v,width:w,height:M,left:O,top:L,advance:X}=a.readMessage(Um,{});e.push({id:f,bitmap:new Lu({width:w+6,height:M+6},v),metrics:{width:w,height:M,left:O,top:L,advance:X}})}}function Um(o,e,a){1===o?e.id=a.readVarint():2===o?e.bitmap=a.readBytes():3===o?e.width=a.readVarint():4===o?e.height=a.readVarint():5===o?e.left=a.readSVarint():6===o?e.top=a.readSVarint():7===o&&(e.advance=a.readVarint())}function uf(o){let e=0,a=0;for(const M of o)e+=M.w*M.h,a=Math.max(a,M.w);o.sort((M,O)=>O.h-M.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),a),h:1/0}];let v=0,w=0;for(const M of o)for(let O=f.length-1;O>=0;O--){const L=f[O];if(!(M.w>L.w||M.h>L.h)){if(M.x=L.x,M.y=L.y,w=Math.max(w,M.y+M.h),v=Math.max(v,M.x+M.w),M.w===L.w&&M.h===L.h){const X=f.pop();O<f.length&&(f[O]=X)}else M.h===L.h?(L.x+=M.w,L.w-=M.w):M.w===L.w?(L.y+=M.h,L.h-=M.h):(f.push({x:L.x+M.w,y:L.y,w:L.w-M.w,h:M.h}),L.y+=M.h,L.h-=M.h);break}}return{w:v,h:w,fill:e/(v*w)||0}}class Ku{constructor(e,{pixelRatio:a,version:f,stretchX:v,stretchY:w,content:M}){this.paddedRect=e,this.pixelRatio=a,this.stretchX=v,this.stretchY=w,this.content=M,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class df{constructor(e,a){const f={},v={};this.haveRenderCallbacks=[];const w=[];this.addImages(e,f,w),this.addImages(a,v,w);const{w:M,h:O}=uf(w),L=new ia({width:M||1,height:O||1});for(const X in e){const te=e[X],ae=f[X].paddedRect;ia.copy(te.data,L,{x:0,y:0},{x:ae.x+1,y:ae.y+1},te.data)}for(const X in a){const te=a[X],ae=v[X].paddedRect,ge=ae.x+1,ve=ae.y+1,Ce=te.data.width,Ve=te.data.height;ia.copy(te.data,L,{x:0,y:0},{x:ge,y:ve},te.data),ia.copy(te.data,L,{x:0,y:Ve-1},{x:ge,y:ve-1},{width:Ce,height:1}),ia.copy(te.data,L,{x:0,y:0},{x:ge,y:ve+Ve},{width:Ce,height:1}),ia.copy(te.data,L,{x:Ce-1,y:0},{x:ge-1,y:ve},{width:1,height:Ve}),ia.copy(te.data,L,{x:0,y:0},{x:ge+Ce,y:ve},{width:1,height:Ve})}this.image=L,this.iconPositions=f,this.patternPositions=v}addImages(e,a,f){for(const v in e){const w=e[v],M={x:0,y:0,w:w.data.width+2,h:w.data.height+2};f.push(M),a[v]=new Ku(M,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(e,a){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in e.updatedImages)this.patchUpdatedImage(this.iconPositions[f],e.getImage(f),a),this.patchUpdatedImage(this.patternPositions[f],e.getImage(f),a)}patchUpdatedImage(e,a,f){if(!e||!a||e.version===a.version)return;e.version=a.version;const[v,w]=e.tl;f.update(a.data,void 0,{x:v,y:w})}}Pn("ImagePosition",Ku),Pn("ImageAtlas",df),g.WritingMode=void 0,(_c=g.WritingMode||(g.WritingMode={}))[_c.none=0]="none",_c[_c.horizontal=1]="horizontal",_c[_c.vertical=2]="vertical",_c[_c.horizontalOnly=3]="horizontalOnly";class Yu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,a){const f=new Yu;return f.scale=e||1,f.fontStack=a,f}static forImage(e){const a=new Yu;return a.imageName=e,a}}class yc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,a){const f=new yc;for(let v=0;v<e.sections.length;v++){const w=e.sections[v];w.image?f.addImageSection(w):f.addTextSection(w,a)}return f}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let a="";for(let f=0;f<e.length;f++){const v=e.charCodeAt(f+1)||null,w=e.charCodeAt(f-1)||null;a+=v&&vl(v)&&!qc[e[f+1]]||w&&vl(w)&&!qc[e[f-1]]||!qc[e[f]]?e[f]:qc[e[f]]}return a}(this.text)}trim(){let e=0;for(let f=0;f<this.text.length&&Ld[this.text.charCodeAt(f)];f++)e++;let a=this.text.length;for(let f=this.text.length-1;f>=0&&f>=e&&Ld[this.text.charCodeAt(f)];f--)a--;this.text=this.text.substring(e,a),this.sectionIndex=this.sectionIndex.slice(e,a)}substring(e,a){const f=new yc;return f.text=this.text.substring(e,a),f.sectionIndex=this.sectionIndex.slice(e,a),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,a)=>Math.max(e,this.sections[a].scale),0)}addTextSection(e,a){this.text+=e.text,this.sections.push(Yu.forText(e.scale,e.fontStack||a));const f=this.sections.length-1;for(let v=0;v<e.text.length;++v)this.sectionIndex.push(f)}addImageSection(e){const a=e.image?e.image.name:"";if(0===a.length)return void Ne("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Yu.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ne("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hu(o,e,a,f,v,w,M,O,L,X,te,ae,ge,ve,Ce,Ve){const ze=yc.fromFeature(o,v);let ct;ae===g.WritingMode.vertical&&ze.verticalizePunctuation();const{processBidirectionalText:vt,processStyledBidirectionalText:st}=cs;if(vt&&1===ze.sections.length){ct=[];const Zt=vt(ze.toString(),Bd(ze,X,w,e,f,ve,Ce));for(const Bn of Zt){const jn=new yc;jn.text=Bn,jn.sections=ze.sections;for(let Mn=0;Mn<Bn.length;Mn++)jn.sectionIndex.push(0);ct.push(jn)}}else if(st){ct=[];const Zt=st(ze.text,ze.sectionIndex,Bd(ze,X,w,e,f,ve,Ce));for(const Bn of Zt){const jn=new yc;jn.text=Bn[0],jn.sectionIndex=Bn[1],jn.sections=ze.sections,ct.push(jn)}}else ct=function(Zt,Bn){const jn=[],Mn=Zt.text;let vn=0;for(const pn of Bn)jn.push(Zt.substring(vn,pn)),vn=pn;return vn<Mn.length&&jn.push(Zt.substring(vn,Mn.length)),jn}(ze,Bd(ze,X,w,e,f,ve,Ce));const It=[],Lt={positionedLines:It,text:ze.toString(),top:te[1],bottom:te[1],left:te[0],right:te[0],writingMode:ae,iconsInText:!1,verticalizable:!1};return function(Zt,Bn,jn,Mn,vn,pn,Cn,wn,rn,Hn,$n,Ri){let ar=0,gr=-17,po=0,Ea=0;const qo="right"===wn?1:"left"===wn?0:.5;let fo=0;for(const to of vn){to.trim();const bo=to.getMaxScale(),No=24*(bo-1),Vs={positionedGlyphs:[],lineOffset:0};Zt.positionedLines[fo]=Vs;const Xo=Vs.positionedGlyphs;let Cs=0;if(!to.length()){gr+=pn,++fo;continue}for(let qr=0;qr<to.length();qr++){const Li=to.getSection(qr),Us=to.getSectionIndex(qr),xo=to.getCharCode(qr);let Tr=0,Da=null,ll=null,Ma=null,ds=24;const js=!(rn===g.WritingMode.horizontal||!$n&&!as(xo)||$n&&(Ld[xo]||(To=xo,yn.Arabic(To)||yn["Arabic Supplement"](To)||yn["Arabic Extended-A"](To)||yn["Arabic Presentation Forms-A"](To)||yn["Arabic Presentation Forms-B"](To))));if(Li.imageName){const oa=Mn[Li.imageName];if(!oa)continue;Ma=Li.imageName,Zt.iconsInText=Zt.iconsInText||!0,ll=oa.paddedRect;const hs=oa.displaySize;Li.scale=24*Li.scale/Ri,Da={width:hs[0],height:hs[1],left:1,top:-3,advance:js?hs[1]:hs[0]},Tr=No+(24-hs[1]*Li.scale),ds=Da.advance;const Zl=js?hs[0]*Li.scale-24*bo:hs[1]*Li.scale-24*bo;Zl>0&&Zl>Cs&&(Cs=Zl)}else{const oa=jn[Li.fontStack],hs=oa&&oa[xo];if(hs&&hs.rect)ll=hs.rect,Da=hs.metrics;else{const Zl=Bn[Li.fontStack],wu=Zl&&Zl[xo];if(!wu)continue;Da=wu.metrics}Tr=24*(bo-Li.scale)}js?(Zt.verticalizable=!0,Xo.push({glyph:xo,imageName:Ma,x:ar,y:gr+Tr,vertical:js,scale:Li.scale,fontStack:Li.fontStack,sectionIndex:Us,metrics:Da,rect:ll}),ar+=ds*Li.scale+Hn):(Xo.push({glyph:xo,imageName:Ma,x:ar,y:gr+Tr,vertical:js,scale:Li.scale,fontStack:Li.fontStack,sectionIndex:Us,metrics:Da,rect:ll}),ar+=Da.advance*Li.scale+Hn)}0!==Xo.length&&(po=Math.max(ar-Hn,po),hf(Xo,0,Xo.length-1,qo,Cs)),ar=0;const no=pn*bo+Cs;Vs.lineOffset=Math.max(Cs,No),gr+=no,Ea=Math.max(no,Ea),++fo}var To;const Ko=gr- -17,{horizontalAlign:Yo,verticalAlign:zs}=Gh(Cn);(function(to,bo,No,Vs,Xo,Cs,no,qr,Li){const Us=(bo-No)*Xo;let xo=0;xo=Cs!==no?-qr*Vs- -17:(-Vs*Li+.5)*no;for(const Tr of to)for(const Da of Tr.positionedGlyphs)Da.x+=Us,Da.y+=xo})(Zt.positionedLines,qo,Yo,zs,po,Ea,pn,Ko,vn.length),Zt.top+=-zs*Ko,Zt.bottom=Zt.top+Ko,Zt.left+=-Yo*po,Zt.right=Zt.left+po}(Lt,e,a,f,ct,M,O,L,ae,X,ge,Ve),!function(Zt){for(const Bn of Zt)if(0!==Bn.positionedGlyphs.length)return!1;return!0}(It)&&Lt}const Ld={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ns={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Fd(o,e,a,f,v,w){if(e.imageName){const M=f[e.imageName];return M?M.displaySize[0]*e.scale*24/w+v:0}{const M=a[e.fontStack],O=M&&M[o];return O?O.metrics.advance*e.scale+v:0}}function Nd(o,e,a,f){const v=Math.pow(o-e,2);return f?o<e?v/2:2*v:v+Math.abs(a)*a}function $h(o,e,a){let f=0;return 10===o&&(f-=1e4),a&&(f+=150),40!==o&&65288!==o||(f+=50),41!==e&&65289!==e||(f+=50),f}function Wo(o,e,a,f,v,w){let M=null,O=Nd(e,a,v,w);for(const L of f){const X=Nd(e-L.x,a,v,w)+L.badness;X<=O&&(M=L,O=X)}return{index:o,x:e,priorBreak:M,badness:O}}function pu(o){return o?pu(o.priorBreak).concat(o.index):[]}function Bd(o,e,a,f,v,w,M){if("point"!==w)return[];if(!o)return[];const O=[],L=function(ge,ve,Ce,Ve,ze,ct){let vt=0;for(let st=0;st<ge.length();st++){const It=ge.getSection(st);vt+=Fd(ge.getCharCode(st),It,Ve,ze,ve,ct)}return vt/Math.max(1,Math.ceil(vt/Ce))}(o,e,a,f,v,M),X=o.text.indexOf("\u200b")>=0;let te=0;for(let ge=0;ge<o.length();ge++){const ve=o.getSection(ge),Ce=o.getCharCode(ge);if(Ld[Ce]||(te+=Fd(Ce,ve,f,v,e,M)),ge<o.length()-1){const Ve=!((ae=Ce)<11904||!(yn["Bopomofo Extended"](ae)||yn.Bopomofo(ae)||yn["CJK Compatibility Forms"](ae)||yn["CJK Compatibility Ideographs"](ae)||yn["CJK Compatibility"](ae)||yn["CJK Radicals Supplement"](ae)||yn["CJK Strokes"](ae)||yn["CJK Symbols and Punctuation"](ae)||yn["CJK Unified Ideographs Extension A"](ae)||yn["CJK Unified Ideographs"](ae)||yn["Enclosed CJK Letters and Months"](ae)||yn["Halfwidth and Fullwidth Forms"](ae)||yn.Hiragana(ae)||yn["Ideographic Description Characters"](ae)||yn["Kangxi Radicals"](ae)||yn["Katakana Phonetic Extensions"](ae)||yn.Katakana(ae)||yn["Vertical Forms"](ae)||yn["Yi Radicals"](ae)||yn["Yi Syllables"](ae)));(Ns[Ce]||Ve||ve.imageName)&&O.push(Wo(ge+1,te,L,O,$h(Ce,o.getCharCode(ge+1),Ve&&X),!1))}}var ae;return pu(Wo(o.length(),te,L,O,0,!0))}function Gh(o){let e=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:e,verticalAlign:a}}function hf(o,e,a,f,v){if(!f&&!v)return;const w=o[a],M=(o[a].x+w.metrics.advance*w.scale)*f;for(let O=e;O<=a;O++)o[O].x-=M,o[O].y+=v}function pf(o,e,a){const{horizontalAlign:f,verticalAlign:v}=Gh(a),w=e[0]-o.displaySize[0]*f,M=e[1]-o.displaySize[1]*v;return{image:o,top:M,bottom:M+o.displaySize[1],left:w,right:w+o.displaySize[0]}}function ff(o,e,a,f,v,w){const M=o.image;let O;if(M.content){const ze=M.content,ct=M.pixelRatio||1;O=[ze[0]/ct,ze[1]/ct,M.displaySize[0]-ze[2]/ct,M.displaySize[1]-ze[3]/ct]}const L=e.left*w,X=e.right*w;let te,ae,ge,ve;"width"===a||"both"===a?(ve=v[0]+L-f[3],ae=v[0]+X+f[1]):(ve=v[0]+(L+X-M.displaySize[0])/2,ae=ve+M.displaySize[0]);const Ce=e.top*w,Ve=e.bottom*w;return"height"===a||"both"===a?(te=v[1]+Ce-f[0],ge=v[1]+Ve+f[2]):(te=v[1]+(Ce+Ve-M.displaySize[1])/2,ge=te+M.displaySize[1]),{image:M,top:te,right:ae,bottom:ge,left:ve,collisionPadding:O}}const sl=128,vc=32640;function Xu(o,e){const{expression:a}=e;if("constant"===a.kind)return{kind:"constant",layoutSize:a.evaluate(new fr(o+1))};if("source"===a.kind)return{kind:"source"};{const{zoomStops:f,interpolationType:v}=a;let w=0;for(;w<f.length&&f[w]<=o;)w++;w=Math.max(0,w-1);let M=w;for(;M<f.length&&f[M]<o+1;)M++;M=Math.min(f.length-1,M);const O=f[w],L=f[M];return"composite"===a.kind?{kind:"composite",minZoom:O,maxZoom:L,interpolationType:v}:{kind:"camera",minZoom:O,maxZoom:L,minSize:a.evaluate(new fr(O)),maxSize:a.evaluate(new fr(L)),interpolationType:v}}}function Zh(o,e,a){let f="never";const v=o.get(e);return v?f=v:o.get(a)&&(f="always"),f}const Wh=ol.VectorTileFeature.types,mf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zd(o,e,a,f,v,w,M,O,L,X,te,ae,ge){const ve=O?Math.min(vc,Math.round(O[0])):0,Ce=O?Math.min(vc,Math.round(O[1])):0;o.emplaceBack(e,a,Math.round(32*f),Math.round(32*v),w,M,(ve<<1)+(L?1:0),Ce,16*X,16*te,256*ae,256*ge)}function qh(o,e,a){o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a)}function fu(o){for(const e of o.sections)if(Pc(e.text))return!0;return!1}class al{constructor(e){this.layoutVertexArray=new pi,this.indexArray=new mr,this.programConfigurations=e,this.segments=new Yi,this.dynamicLayoutVertexArray=new Dn,this.opacityVertexArray=new si,this.hasVisibleVertices=!1,this.placedSymbolArray=new A}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,a,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$u.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Pm.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,mf,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pn("SymbolBuffers",al);class Kh{constructor(e,a,f){this.layoutVertexArray=new e,this.layoutAttributes=a,this.indexArray=new f,this.segments=new Yi,this.collisionVertexArray=new qi}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Om.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pn("CollisionBuffers",Kh);class bc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(M=>M.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Lc([]),this.placementViewportMatrix=Lc([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xu(this.zoom,a["text-size"]),this.iconSizeData=Xu(this.zoom,a["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),w=f.get("symbol-z-order");this.canOverlap="never"!==Zh(f,"text-overlap","text-allow-overlap")||"never"!==Zh(f,"icon-overlap","icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==w&&!v.isConstant(),this.sortFeaturesByY=("viewport-y"===w||"auto"===w&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===f.get("symbol-placement")&&(this.writingModes=f.get("text-writing-mode").map(M=>g.WritingMode[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=e.sourceID}createArrays(){this.text=new al(new iu(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new al(new iu(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new se,this.lineVertexArray=new pe,this.symbolInstances=new G}calculateGlyphDependencies(e,a,f,v,w){for(let M=0;M<e.length;M++)if(a[e.charCodeAt(M)]=!0,(f||v)&&w){const O=qc[e.charAt(M)];O&&(a[O.charCodeAt(0)]=!0)}}populate(e,a,f){const v=this.layers[0],w=v.layout,M=w.get("text-font"),O=w.get("text-field"),L=w.get("icon-image"),X=("constant"!==O.value.kind||O.value.value instanceof Er&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&("constant"!==M.value.kind||M.value.value.length>0),te="constant"!==L.value.kind||!!L.value.value||Object.keys(L.parameters).length>0,ae=w.get("symbol-sort-key");if(this.features=[],!X&&!te)return;const ge=a.iconDependencies,ve=a.glyphDependencies,Ce=a.availableImages,Ve=new fr(this.zoom);for(const{feature:ze,id:ct,index:vt,sourceLayerIndex:st}of e){const It=v._featureFilter.needGeometry,Lt=Dl(ze,It);if(!v._featureFilter.filter(Ve,Lt,f))continue;let Zt,Bn;if(It||(Lt.geometry=Rc(ze)),X){const Mn=v.getValueAndResolveTokens("text-field",Lt,f,Ce),vn=Er.factory(Mn);fu(vn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Oc()||this.hasRTLText&&cs.isParsed())&&(Zt=Gu(vn,v,Lt))}if(te){const Mn=v.getValueAndResolveTokens("icon-image",Lt,f,Ce);Bn=Mn instanceof Fr?Mn:Fr.fromString(Mn)}if(!Zt&&!Bn)continue;const jn=this.sortFeaturesByKey?ae.evaluate(Lt,{},f):void 0;if(this.features.push({id:ct,text:Zt,icon:Bn,index:vt,sourceLayerIndex:st,geometry:Lt.geometry,properties:ze.properties,type:Wh[ze.type],sortKey:jn}),Bn&&(ge[Bn.name]=!0),Zt){const Mn=M.evaluate(Lt,{},f).join(","),vn="viewport"!==w.get("text-rotation-alignment")&&"point"!==w.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.WritingMode.vertical)>=0;for(const pn of Zt.sections)if(pn.image)ge[pn.image.name]=!0;else{const Cn=Nl(Zt.toString()),wn=pn.fontStack||Mn,rn=ve[wn]=ve[wn]||{};this.calculateGlyphDependencies(pn.text,rn,vn,this.allowVerticalPlacement,Cn)}}}"line"===w.get("symbol-placement")&&(this.features=function(ze){const ct={},vt={},st=[];let It=0;function Lt(Mn){st.push(ze[Mn]),It++}function Zt(Mn,vn,pn){const Cn=vt[Mn];return delete vt[Mn],vt[vn]=Cn,st[Cn].geometry[0].pop(),st[Cn].geometry[0]=st[Cn].geometry[0].concat(pn[0]),Cn}function Bn(Mn,vn,pn){const Cn=ct[vn];return delete ct[vn],ct[Mn]=Cn,st[Cn].geometry[0].shift(),st[Cn].geometry[0]=pn[0].concat(st[Cn].geometry[0]),Cn}function jn(Mn,vn,pn){const Cn=pn?vn[0][vn[0].length-1]:vn[0][0];return`${Mn}:${Cn.x}:${Cn.y}`}for(let Mn=0;Mn<ze.length;Mn++){const vn=ze[Mn],pn=vn.geometry,Cn=vn.text?vn.text.toString():null;if(!Cn){Lt(Mn);continue}const wn=jn(Cn,pn),rn=jn(Cn,pn,!0);if(wn in vt&&rn in ct&&vt[wn]!==ct[rn]){const Hn=Bn(wn,rn,pn),$n=Zt(wn,rn,st[Hn].geometry);delete ct[wn],delete vt[rn],vt[jn(Cn,st[$n].geometry,!0)]=$n,st[Hn].geometry=null}else wn in vt?Zt(wn,rn,pn):rn in ct?Bn(wn,rn,pn):(Lt(Mn),ct[wn]=It-1,vt[rn]=It-1)}return st.filter(Mn=>Mn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ze,ct)=>ze.sortKey-ct.sortKey)}update(e,a,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,a,this.layers,f),this.icon.programConfigurations.updatePaintArrays(e,a,this.layers,f))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,a){const f=this.lineVertexArray.length;if(void 0!==e.segment){let v=e.dist(a[e.segment+1]),w=e.dist(a[e.segment]);const M={};for(let O=e.segment+1;O<a.length;O++)M[O]={x:a[O].x,y:a[O].y,tileUnitDistanceFromAnchor:v},O<a.length-1&&(v+=a[O+1].dist(a[O]));for(let O=e.segment||0;O>=0;O--)M[O]={x:a[O].x,y:a[O].y,tileUnitDistanceFromAnchor:w},O>0&&(w+=a[O-1].dist(a[O]));for(let O=0;O<a.length;O++){const L=M[O];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(e,a,f,v,w,M,O,L,X,te,ae,ge){const ve=e.indexArray,Ce=e.layoutVertexArray,Ve=e.segments.prepareSegment(4*a.length,Ce,ve,this.canOverlap?M.sortKey:void 0),ze=this.glyphOffsetArray.length,ct=Ve.vertexLength,vt=this.allowVerticalPlacement&&O===g.WritingMode.vertical?Math.PI/2:0,st=M.text&&M.text.sections;for(let It=0;It<a.length;It++){const{tl:Lt,tr:Zt,bl:Bn,br:jn,tex:Mn,pixelOffsetTL:vn,pixelOffsetBR:pn,minFontScaleX:Cn,minFontScaleY:wn,glyphOffset:rn,isSDF:Hn,sectionIndex:$n}=a[It],Ri=Ve.vertexLength,ar=rn[1];zd(Ce,L.x,L.y,Lt.x,ar+Lt.y,Mn.x,Mn.y,f,Hn,vn.x,vn.y,Cn,wn),zd(Ce,L.x,L.y,Zt.x,ar+Zt.y,Mn.x+Mn.w,Mn.y,f,Hn,pn.x,vn.y,Cn,wn),zd(Ce,L.x,L.y,Bn.x,ar+Bn.y,Mn.x,Mn.y+Mn.h,f,Hn,vn.x,pn.y,Cn,wn),zd(Ce,L.x,L.y,jn.x,ar+jn.y,Mn.x+Mn.w,Mn.y+Mn.h,f,Hn,pn.x,pn.y,Cn,wn),qh(e.dynamicLayoutVertexArray,L,vt),ve.emplaceBack(Ri,Ri+1,Ri+2),ve.emplaceBack(Ri+1,Ri+2,Ri+3),Ve.vertexLength+=4,Ve.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rn[0]),It!==a.length-1&&$n===a[It+1].sectionIndex||e.programConfigurations.populatePaintArrays(Ce.length,M,M.index,{},ge,st&&st[$n])}e.placedSymbolArray.emplaceBack(L.x,L.y,ze,this.glyphOffsetArray.length-ze,ct,X,te,L.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],O,0,!1,0,ae)}_addCollisionDebugVertex(e,a,f,v,w,M){return a.emplaceBack(0,0),e.emplaceBack(f.x,f.y,v,w,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(e,a,f,v,w,M,O){const L=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),X=L.vertexLength,te=w.layoutVertexArray,ae=w.collisionVertexArray,ge=O.anchorX,ve=O.anchorY;this._addCollisionDebugVertex(te,ae,M,ge,ve,new Ie(e,a)),this._addCollisionDebugVertex(te,ae,M,ge,ve,new Ie(f,a)),this._addCollisionDebugVertex(te,ae,M,ge,ve,new Ie(f,v)),this._addCollisionDebugVertex(te,ae,M,ge,ve,new Ie(e,v)),L.vertexLength+=4;const Ce=w.indexArray;Ce.emplaceBack(X,X+1),Ce.emplaceBack(X+1,X+2),Ce.emplaceBack(X+2,X+3),Ce.emplaceBack(X+3,X),L.primitiveLength+=4}addDebugCollisionBoxes(e,a,f,v){for(let w=e;w<a;w++){const M=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,v?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Kh(Tn,nf.members,Zi),this.iconCollisionBox=new Kh(Tn,nf.members,Zi);for(let e=0;e<this.symbolInstances.length;e++){const a=this.symbolInstances.get(e);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(e,a,f,v,w,M,O,L,X){const te={};for(let ae=a;ae<f;ae++){const ge=e.get(ae);te.textBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},te.textFeatureIndex=ge.featureIndex;break}for(let ae=v;ae<w;ae++){const ge=e.get(ae);te.verticalTextBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},te.verticalTextFeatureIndex=ge.featureIndex;break}for(let ae=M;ae<O;ae++){const ge=e.get(ae);te.iconBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},te.iconFeatureIndex=ge.featureIndex;break}for(let ae=L;ae<X;ae++){const ge=e.get(ae);te.verticalIconBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},te.verticalIconFeatureIndex=ge.featureIndex;break}return te}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const f=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,a){const f=e.placedSymbolArray.get(a),v=f.vertexStartIndex+4*f.numGlyphs;for(let w=f.vertexStartIndex;w<v;w+=4)e.indexArray.emplaceBack(w,w+1,w+2),e.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const a=Math.sin(e),f=Math.cos(e),v=[],w=[],M=[];for(let O=0;O<this.symbolInstances.length;++O){M.push(O);const L=this.symbolInstances.get(O);v.push(0|Math.round(a*L.anchorX+f*L.anchorY)),w.push(L.featureIndex)}return M.sort((O,L)=>v[O]-v[L]||w[L]-w[O]),M}addToSortKeyRanges(e,a){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===a?f.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const f=this.symbolInstances.get(a);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,w,M)=>{v>=0&&M.indexOf(v)===w&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let jm,Yh;Pn("SymbolBucket",bc,{omit:["layers","collisionBoxArray","features","compareText"]}),bc.MAX_GLYPHS=65535,bc.addDynamicAttributes=qh;var Vd={get paint(){return Yh=Yh||new lo({"icon-opacity":new Zn(ue.paint_symbol["icon-opacity"]),"icon-color":new Zn(ue.paint_symbol["icon-color"]),"icon-halo-color":new Zn(ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Zn(ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Zn(ue.paint_symbol["icon-halo-blur"]),"icon-translate":new An(ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new An(ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Zn(ue.paint_symbol["text-opacity"]),"text-color":new Zn(ue.paint_symbol["text-color"],{runtimeType:$,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Zn(ue.paint_symbol["text-halo-color"]),"text-halo-width":new Zn(ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Zn(ue.paint_symbol["text-halo-blur"]),"text-translate":new An(ue.paint_symbol["text-translate"]),"text-translate-anchor":new An(ue.paint_symbol["text-translate-anchor"])})},get layout(){return jm=jm||new lo({"symbol-placement":new An(ue.layout_symbol["symbol-placement"]),"symbol-spacing":new An(ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new An(ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Zn(ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new An(ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new An(ue.layout_symbol["icon-allow-overlap"]),"icon-overlap":new An(ue.layout_symbol["icon-overlap"]),"icon-ignore-placement":new An(ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new An(ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new An(ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Zn(ue.layout_symbol["icon-size"]),"icon-text-fit":new An(ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new An(ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Zn(ue.layout_symbol["icon-image"]),"icon-rotate":new Zn(ue.layout_symbol["icon-rotate"]),"icon-padding":new Zn(ue.layout_symbol["icon-padding"]),"icon-keep-upright":new An(ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Zn(ue.layout_symbol["icon-offset"]),"icon-anchor":new Zn(ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new An(ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new An(ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new An(ue.layout_symbol["text-rotation-alignment"]),"text-field":new Zn(ue.layout_symbol["text-field"]),"text-font":new Zn(ue.layout_symbol["text-font"]),"text-size":new Zn(ue.layout_symbol["text-size"]),"text-max-width":new Zn(ue.layout_symbol["text-max-width"]),"text-line-height":new An(ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Zn(ue.layout_symbol["text-letter-spacing"]),"text-justify":new Zn(ue.layout_symbol["text-justify"]),"text-radial-offset":new Zn(ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new An(ue.layout_symbol["text-variable-anchor"]),"text-anchor":new Zn(ue.layout_symbol["text-anchor"]),"text-max-angle":new An(ue.layout_symbol["text-max-angle"]),"text-writing-mode":new An(ue.layout_symbol["text-writing-mode"]),"text-rotate":new Zn(ue.layout_symbol["text-rotate"]),"text-padding":new An(ue.layout_symbol["text-padding"]),"text-keep-upright":new An(ue.layout_symbol["text-keep-upright"]),"text-transform":new Zn(ue.layout_symbol["text-transform"]),"text-offset":new Zn(ue.layout_symbol["text-offset"]),"text-allow-overlap":new An(ue.layout_symbol["text-allow-overlap"]),"text-overlap":new An(ue.layout_symbol["text-overlap"]),"text-ignore-placement":new An(ue.layout_symbol["text-ignore-placement"]),"text-optional":new An(ue.layout_symbol["text-optional"])})}};class Xh{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Fe,this.defaultValue=e}evaluate(e){if(e.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(e.formattedSection))return a.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pn("FormatSectionOverride",Xh,{omit:["defaultValue"]});class wa extends Ho{constructor(e){super(e,Vd)}recalculate(e,a){if(super.recalculate(e,a),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const w of f)v.indexOf(w)<0&&v.push(w);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,a,f,v){const w=this.layout.get(e).evaluate(a,{},f,v),M=this._unevaluatedLayout._values[e];return M.isDataDriven()||W(M.value)||!w?w:(O=a.properties,w.replace(/{([^{}]+)}/g,(X,te)=>te in O?String(O[te]):""));var O}createBucket(e){return new bc(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Vd.paint.overridableProperties){if(!wa.hasPaintOverride(this.layout,e))continue;const a=this.paint.get(e),f=new Xh(a),v=new K(f,a.property.specification);let w=null;w="constant"===a.value.kind||"source"===a.value.kind?new Ut("source",v):new Yn("composite",v,a.value.zoomStops),this.paint._values[e]=new Ur(a.property,w,a.parameters)}}_handleOverridablePaintPropertyUpdate(e,a,f){return!(!this.layout||a.isDataDriven()||f.isDataDriven())&&wa.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,a){const f=e.get("text-field"),v=Vd.paint.properties[a];let w=!1;const M=O=>{for(const L of O)if(v.overrides&&v.overrides.hasOverride(L))return void(w=!0)};if("constant"===f.value.kind&&f.value.value instanceof Er)M(f.value.value.sections);else if("source"===f.value.kind){const O=X=>{w||(X instanceof Or&&ki(X.value)===rt?M(X.value.sections):X instanceof ji?M(X.sections):X.eachChild(O))},L=f.value;L._styleExpression&&O(L._styleExpression.expression)}return w}}let mu;var Ud={get paint(){return mu=mu||new lo({"background-color":new An(ue.paint_background["background-color"]),"background-pattern":new kc(ue.paint_background["background-pattern"]),"background-opacity":new An(ue.paint_background["background-opacity"])})}};let gf;var Jh={get paint(){return gf=gf||new lo({"raster-opacity":new An(ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new An(ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new An(ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new An(ue.paint_raster["raster-brightness-max"]),"raster-saturation":new An(ue.paint_raster["raster-saturation"]),"raster-contrast":new An(ue.paint_raster["raster-contrast"]),"raster-resampling":new An(ue.paint_raster["raster-resampling"]),"raster-fade-duration":new An(ue.paint_raster["raster-fade-duration"])})}};class _f extends Ho{constructor(e){super(e,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const gu={circle:class extends Ho{constructor(o){super(o,Vp)}createBucket(o){return new Ch(o)}queryRadius(o){const e=o;return Ru("circle-radius",this,e)+Ru("circle-stroke-width",this,e)+Mh(this.paint.get("circle-translate"))}queryIntersectsFeature(o,e,a,f,v,w,M,O){const L=sr(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,M),X=this.paint.get("circle-radius").evaluate(e,a)+this.paint.get("circle-stroke-width").evaluate(e,a),te="map"===this.paint.get("circle-pitch-alignment"),ae=te?L:(Ce=O,L.map(Ve=>il(Ve,Ce))),ge=te?X*M:X;var Ce;for(const ve of f)for(const Ce of ve){const Ve=te?Ce:il(Ce,O);let ze=ge;const ct=Gl([],[Ce.x,Ce.y,0,1],O);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ze*=ct[3]/w.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ze*=w.cameraToCenterDistance/ct[3]),g_(ae,Ve,ze))return!0}return!1}},heatmap:class extends Ho{createBucket(o){return new Nc(o)}constructor(o){super(o,_m),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=bd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends Ho{constructor(o){super(o,$p)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends Ho{constructor(o){super(o,Cm)}recalculate(o,e){super.recalculate(o,e);const a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Dd(o)}queryRadius(){return Mh(this.paint.get("fill-translate"))}queryIntersectsFeature(o,e,a,f,v,w,M){return Dh(sr(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,M),f)}isTileClipped(){return!0}},"fill-extrusion":class extends Ho{constructor(o){super(o,au)}createBucket(o){return new zh(o)}queryRadius(){return Mh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,e,a,f,v,w,M,O){const L=sr(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,M),X=this.paint.get("fill-extrusion-height").evaluate(e,a),te=this.paint.get("fill-extrusion-base").evaluate(e,a),ae=function(ve,Ce,Ve,ze){const ct=[];for(const vt of ve){const st=[vt.x,vt.y,0,1];Gl(st,st,Ce),ct.push(new Ie(st[0]/st[3],st[1]/st[3]))}return ct}(L,O),ge=function(ve,Ce,Ve,ze){const ct=[],vt=[],st=ze[8]*Ce,It=ze[9]*Ce,Lt=ze[10]*Ce,Zt=ze[11]*Ce,Bn=ze[8]*Ve,jn=ze[9]*Ve,Mn=ze[10]*Ve,vn=ze[11]*Ve;for(const pn of ve){const Cn=[],wn=[];for(const rn of pn){const Hn=rn.x,$n=rn.y,Ri=ze[0]*Hn+ze[4]*$n+ze[12],ar=ze[1]*Hn+ze[5]*$n+ze[13],gr=ze[2]*Hn+ze[6]*$n+ze[14],po=ze[3]*Hn+ze[7]*$n+ze[15],Ea=gr+Lt,qo=po+Zt,fo=Ri+Bn,To=ar+jn,Ko=gr+Mn,Yo=po+vn,zs=new Ie((Ri+st)/qo,(ar+It)/qo);zs.z=Ea/qo,Cn.push(zs);const to=new Ie(fo/Yo,To/Yo);to.z=Ko/Yo,wn.push(to)}ct.push(Cn),vt.push(wn)}return[ct,vt]}(f,te,X,O);return function(ve,Ce,Ve){let ze=1/0;Dh(Ve,Ce)&&(ze=Jp(Ve,Ce[0]));for(let ct=0;ct<Ce.length;ct++){const vt=Ce[ct],st=ve[ct];for(let It=0;It<vt.length-1;It++){const Lt=vt[It],Zt=[Lt,vt[It+1],st[It+1],st[It],Lt];Eh(Ve,Zt)&&(ze=Math.min(ze,Jp(Ve,Zt)))}}return ze!==1/0&&ze}(ge[0],ge[1],ae)}},line:class extends Ho{constructor(o){super(o,Zc),this.gradientVersion=0,Ad||(Ad=new Hu(Zc.paint.properties["line-width"].specification),Ad.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){"line-gradient"===o&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ns,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,e){super.recalculate(o,e),this.paint._values["line-floorwidth"]=Ad.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Uh(o)}queryRadius(o){const e=o,a=uu(Ru("line-width",this,e),Ru("line-gap-width",this,e)),f=Ru("line-offset",this,e);return a/2+Math.abs(f)+Mh(this.paint.get("line-translate"))}queryIntersectsFeature(o,e,a,f,v,w,M){const O=sr(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,M),L=M/2*uu(this.paint.get("line-width").evaluate(e,a),this.paint.get("line-gap-width").evaluate(e,a)),X=this.paint.get("line-offset").evaluate(e,a);return X&&(f=function(te,ae){const ge=[];for(let ve=0;ve<te.length;ve++){const Ce=te[ve],Ve=[];for(let ze=0;ze<Ce.length;ze++){const ct=Ce[ze-1],vt=Ce[ze],st=Ce[ze+1],It=0===ze?new Ie(0,0):vt.sub(ct)._unit()._perp(),Lt=ze===Ce.length-1?new Ie(0,0):st.sub(vt)._unit()._perp(),Zt=It._add(Lt)._unit(),Bn=Zt.x*Lt.x+Zt.y*Lt.y;0!==Bn&&Zt._mult(1/Bn),Ve.push(Zt._mult(ae)._add(vt))}ge.push(Ve)}return ge}(f,X*M)),function(te,ae,ge){for(let ve=0;ve<ae.length;ve++){const Ce=ae[ve];if(te.length>=3)for(let Ve=0;Ve<Ce.length;Ve++)if(nl(te,Ce[Ve]))return!0;if(__(te,Ce,ge))return!0}return!1}(O,f,L)}isTileClipped(){return!0}},symbol:wa,background:class extends Ho{constructor(o){super(o,Ud)}},raster:class extends Ho{constructor(o){super(o,Jh)}}};class yf{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Qh=6371008.8;class Ml{constructor(e,a){if(isNaN(e)||isNaN(a))throw new Error(`Invalid LngLat object: (${e}, ${a})`);if(this.lng=+e,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ml(je(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const a=Math.PI/180,f=this.lat*a,v=e.lat*a,w=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((e.lng-this.lng)*a);return Qh*Math.acos(Math.min(w,1))}static convert(e){if(e instanceof Ml)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ml(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ml(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const jd=2*Math.PI*Qh;function ep(o){return jd*Math.cos(o*Math.PI/180)}function Hm(o){return(180+o)/360}function Ca(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function xc(o,e){return o/ep(e)}function Hd(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Ju{constructor(e,a,f=0){this.x=+e,this.y=+a,this.z=+f}static fromLngLat(e,a=0){const f=Ml.convert(e);return new Ju(Hm(f.lng),Ca(f.lat),xc(a,f.lat))}toLngLat(){return new Ml(360*this.x-180,Hd(this.y))}toAltitude(){return this.z*ep(Hd(this.y))}meterInMercatorCoordinateUnits(){return 1/jd*(e=Hd(this.y),1/Math.cos(e*Math.PI/180));var e}}function Qu(o,e,a){var f=2*Math.PI*6378137/256/Math.pow(2,a);return[o*f-2*Math.PI*6378137/2,e*f-2*Math.PI*6378137/2]}class _u{constructor(e,a,f){if(e<0||e>25||f<0||f>=Math.pow(2,e)||a<0||a>=Math.pow(2,e))throw new Error(`x=${a}, y=${f}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=a,this.y=f,this.key=ed(0,e,e,a,f)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,a,f){const v=(M=this.y,O=this.z,L=Qu(256*(w=this.x),256*(M=Math.pow(2,O)-M-1),O),X=Qu(256*(w+1),256*(M+1),O),L[0]+","+L[1]+","+X[0]+","+X[1]);var w,M,O,L,X;const te=function(ae,ge,ve){let Ce,Ve="";for(let ze=ae;ze>0;ze--)Ce=1<<ze-1,Ve+=(ge&Ce?1:0)+(ve&Ce?2:0);return Ve}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===f?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,te).replace(/{bbox-epsg-3857}/g,v)}isChildOf(e){const a=this.z-e.z;return a>0&&e.x===this.x>>a&&e.y===this.y>>a}getTilePoint(e){const a=Math.pow(2,this.z);return new Ie((e.x*a-this.x)*So,(e.y*a-this.y)*So)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vf{constructor(e,a){this.wrap=e,this.canonical=a,this.key=ed(e,a.z,a.z,a.x,a.y)}}class ra{constructor(e,a,f,v,w){if(e<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${f}`);this.overscaledZ=e,this.wrap=a,this.canonical=new _u(f,+v,+w),this.key=ed(a,e,f,v,w)}clone(){return new ra(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-e;return e>this.canonical.z?new ra(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ra(e,this.wrap,e,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(e,a){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-e;return e>this.canonical.z?ed(this.wrap*+a,e,this.canonical.z,this.canonical.x,this.canonical.y):ed(this.wrap*+a,e,e,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const a=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>a&&e.canonical.y===this.canonical.y>>a}children(e){if(this.overscaledZ>=e)return[new ra(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new ra(a,this.wrap,a,f,v),new ra(a,this.wrap,a,f+1,v),new ra(a,this.wrap,a,f,v+1),new ra(a,this.wrap,a,f+1,v+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new ra(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new ra(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Ju(e.x-this.wrap,e.y))}}function ed(o,e,a,f,v){(o*=2)<0&&(o=-1*o-1);const w=1<<a;return(w*w*o+w*v+f).toString(36)+a.toString(36)+e.toString(36)}Pn("CanonicalTileID",_u),Pn("OverscaledTileID",ra,{omit:["posMatrix"]});class bf{constructor(e,a,f){if(this.uid=e,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(f&&"mapbox"!==f&&"terrarium"!==f)return void Ne(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const v=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=f||"mapbox";for(let w=0;w<v;w++)this.data[this._idx(-1,w)]=this.data[this._idx(0,w)],this.data[this._idx(v,w)]=this.data[this._idx(v-1,w)],this.data[this._idx(w,-1)]=this.data[this._idx(w,0)],this.data[this._idx(w,v)]=this.data[this._idx(w,v-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(v,-1)]=this.data[this._idx(v-1,0)],this.data[this._idx(-1,v)]=this.data[this._idx(0,v-1)],this.data[this._idx(v,v)]=this.data[this._idx(v-1,v-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let w=0;w<v;w++)for(let M=0;M<v;M++){const O=this.get(w,M);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(e,a){const f=new Uint8Array(this.data.buffer),v=4*this._idx(e,a);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(f[v],f[v+1],f[v+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,a){if(e<-1||e>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(e+1)}_unpackMapbox(e,a,f){return(256*e*256+256*a+f)/10-1e4}_unpackTerrarium(e,a,f){return 256*e+a+f/256-32768}getPixels(){return new ia({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,a,f){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let v=a*this.dim,w=a*this.dim+this.dim,M=f*this.dim,O=f*this.dim+this.dim;switch(a){case-1:v=w-1;break;case 1:w=v+1}switch(f){case-1:M=O-1;break;case 1:O=M+1}const L=-a*this.dim,X=-f*this.dim;for(let te=M;te<O;te++)for(let ae=v;ae<w;ae++)this.data[this._idx(ae,te)]=e.data[this._idx(ae+L,te+X)]}}Pn("DEMData",bf);class tp{constructor(e){this._stringToNumber={},this._numberToString=[];for(let a=0;a<e.length;a++){const f=e[a];this._stringToNumber[f]=a,this._numberToString[a]=f}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class $d{constructor(e,a,f,v,w){this.type="Feature",this._vectorTileFeature=e,e._z=a,e._x=f,e._y=v,this.properties=e.properties,this.id=w}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const a in this)"_geometry"!==a&&"_vectorTileFeature"!==a&&(e[a]=this[a]);return e}}class Gd{constructor(e,a){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new _l(So,16,0),this.grid3D=new _l(So,16,0),this.featureIndexArray=new qe,this.promoteId=a}insert(e,a,f,v,w,M){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,w);const L=M?this.grid3D:this.grid;for(let X=0;X<a.length;X++){const te=a[X],ae=[1/0,1/0,-1/0,-1/0];for(let ge=0;ge<te.length;ge++){const ve=te[ge];ae[0]=Math.min(ae[0],ve.x),ae[1]=Math.min(ae[1],ve.y),ae[2]=Math.max(ae[2],ve.x),ae[3]=Math.max(ae[3],ve.y)}ae[0]<So&&ae[1]<So&&ae[2]>=0&&ae[3]>=0&&L.insert(O,ae[0],ae[1],ae[2],ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ol.VectorTile(new kd(this.rawTileData)).layers,this.sourceLayerCoder=new tp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,a,f,v){this.loadVTLayers();const w=e.params||{},M=So/e.tileSize/e.scale,O=fa(w.filter),L=e.queryGeometry,X=e.queryPadding*M,te=Zd(L),ae=this.grid.query(te.minX-X,te.minY-X,te.maxX+X,te.maxY+X),ge=Zd(e.cameraQueryGeometry),ve=this.grid3D.query(ge.minX-X,ge.minY-X,ge.maxX+X,ge.maxY+X,(ze,ct,vt,st)=>function(It,Lt,Zt,Bn,jn){for(const vn of It)if(Lt<=vn.x&&Zt<=vn.y&&Bn>=vn.x&&jn>=vn.y)return!0;const Mn=[new Ie(Lt,Zt),new Ie(Lt,jn),new Ie(Bn,jn),new Ie(Bn,Zt)];if(It.length>2)for(const vn of Mn)if(nl(It,vn))return!0;for(let vn=0;vn<It.length-1;vn++)if(mm(It[vn],It[vn+1],Mn))return!0;return!1}(e.cameraQueryGeometry,ze-X,ct-X,vt+X,st+X));for(const ze of ve)ae.push(ze);ae.sort($m);const Ce={};let Ve;for(let ze=0;ze<ae.length;ze++){const ct=ae[ze];if(ct===Ve)continue;Ve=ct;const vt=this.featureIndexArray.get(ct);let st=null;this.loadMatchingFeature(Ce,vt.bucketIndex,vt.sourceLayerIndex,vt.featureIndex,O,w.layers,w.availableImages,a,f,v,(It,Lt,Zt)=>(st||(st=Rc(It)),Lt.queryIntersectsFeature(L,It,Zt,st,this.z,e.transform,M,e.pixelPosMatrix)))}return Ce}loadMatchingFeature(e,a,f,v,w,M,O,L,X,te,ae){const ge=this.bucketLayerIDs[a];if(M&&!function(ze,ct){for(let vt=0;vt<ze.length;vt++)if(ct.indexOf(ze[vt])>=0)return!0;return!1}(M,ge))return;const ve=this.sourceLayerCoder.decode(f),Ce=this.vtLayers[ve].feature(v);if(w.needGeometry){const ze=Dl(Ce,!0);if(!w.filter(new fr(this.tileID.overscaledZ),ze,this.tileID.canonical))return}else if(!w.filter(new fr(this.tileID.overscaledZ),Ce))return;const Ve=this.getId(Ce,ve);for(let ze=0;ze<ge.length;ze++){const ct=ge[ze];if(M&&M.indexOf(ct)<0)continue;const vt=L[ct];if(!vt)continue;let st={};Ve&&te&&(st=te.getState(vt.sourceLayer||"_geojsonTileLayer",Ve));const It=Ct({},X[ct]);It.paint=np(It.paint,vt.paint,Ce,st,O),It.layout=np(It.layout,vt.layout,Ce,st,O);const Lt=!ae||ae(Ce,vt,st);if(!Lt)continue;const Zt=new $d(Ce,this.z,this.x,this.y,Ve);Zt.layer=It;let Bn=e[ct];void 0===Bn&&(Bn=e[ct]=[]),Bn.push({featureIndex:v,feature:Zt,intersectionZ:Lt})}}lookupSymbolFeatures(e,a,f,v,w,M,O,L){const X={};this.loadVTLayers();const te=fa(w);for(const ae of e)this.loadMatchingFeature(X,f,v,ae,te,M,O,L,a);return X}hasLayer(e){for(const a of this.bucketLayerIDs)for(const f of a)if(e===f)return!0;return!1}getId(e,a){let f=e.id;return this.promoteId&&(f=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[a]],"boolean"==typeof f&&(f=Number(f))),f}}function np(o,e,a,f,v){return an(o,(w,M)=>{const O=e instanceof ya?e.get(M):null;return O&&O.evaluate?O.evaluate(a,f,v):O})}function Zd(o){let e=1/0,a=1/0,f=-1/0,v=-1/0;for(const w of o)e=Math.min(e,w.x),a=Math.min(a,w.y),f=Math.max(f,w.x),v=Math.max(v,w.y);return{minX:e,minY:a,maxX:f,maxY:v}}function $m(o,e){return e-o}function xf(o,e,a,f,v){const w=[];for(let M=0;M<o.length;M++){const O=o[M];let L;for(let X=0;X<O.length-1;X++){let te=O[X],ae=O[X+1];te.x<e&&ae.x<e||(te.x<e?te=new Ie(e,te.y+(e-te.x)/(ae.x-te.x)*(ae.y-te.y))._round():ae.x<e&&(ae=new Ie(e,te.y+(e-te.x)/(ae.x-te.x)*(ae.y-te.y))._round()),te.y<a&&ae.y<a||(te.y<a?te=new Ie(te.x+(a-te.y)/(ae.y-te.y)*(ae.x-te.x),a)._round():ae.y<a&&(ae=new Ie(te.x+(a-te.y)/(ae.y-te.y)*(ae.x-te.x),a)._round()),te.x>=f&&ae.x>=f||(te.x>=f?te=new Ie(f,te.y+(f-te.x)/(ae.x-te.x)*(ae.y-te.y))._round():ae.x>=f&&(ae=new Ie(f,te.y+(f-te.x)/(ae.x-te.x)*(ae.y-te.y))._round()),te.y>=v&&ae.y>=v||(te.y>=v?te=new Ie(te.x+(v-te.y)/(ae.y-te.y)*(ae.x-te.x),v)._round():ae.y>=v&&(ae=new Ie(te.x+(v-te.y)/(ae.y-te.y)*(ae.x-te.x),v)._round()),L&&te.equals(L[L.length-1])||(L=[te],w.push(L)),L.push(ae)))))}}return w}Pn("FeatureIndex",Gd,{omit:["rawTileData","sourceLayerCoder"]});class Sl extends Ie{constructor(e,a,f,v){super(e,a),this.angle=f,void 0!==v&&(this.segment=v)}clone(){return new Sl(this.x,this.y,this.angle,this.segment)}}function ip(o,e,a,f,v){if(void 0===e.segment)return!0;let w=e,M=e.segment+1,O=0;for(;O>-a/2;){if(M--,M<0)return!1;O-=o[M].dist(w),w=o[M]}O+=o[M].dist(o[M+1]),M++;const L=[];let X=0;for(;O<a/2;){const te=o[M],ae=o[M+1];if(!ae)return!1;let ge=o[M-1].angleTo(te)-te.angleTo(ae);for(ge=Math.abs((ge+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:O,angleDelta:ge}),X+=ge;O-L[0].distance>f;)X-=L.shift().angleDelta;if(X>v)return!1;M++,O+=te.dist(ae)}return!0}function wc(o){let e=0;for(let a=0;a<o.length-1;a++)e+=o[a].dist(o[a+1]);return e}function rp(o,e,a){return o?.6*e*a:0}function Wd(o,e){return Math.max(o?o.right-o.left:0,e?e.right-e.left:0)}function Gm(o,e,a,f,v,w){const M=rp(a,v,w),O=Wd(a,f)*w;let L=0;const X=wc(o)/2;for(let te=0;te<o.length-1;te++){const ae=o[te],ge=o[te+1],ve=ae.dist(ge);if(L+ve>X){const Ce=(X-L)/ve,Ve=nr.number(ae.x,ge.x,Ce),ze=nr.number(ae.y,ge.y,Ce),ct=new Sl(Ve,ze,ge.angleTo(ae),te);return ct._round(),!M||ip(o,ct,O,M,e)?ct:void 0}L+=ve}}function b_(o,e,a,f,v,w,M,O,L){const X=rp(f,w,M),te=Wd(f,v),ae=te*M,ge=0===o[0].x||o[0].x===L||0===o[0].y||o[0].y===L;return e-ae<e/4&&(e=ae+e/4),td(o,ge?e/2*O%e:(te/2+2*w)*M*O%e,e,X,a,ae,ge,!1,L)}function td(o,e,a,f,v,w,M,O,L){const X=w/2,te=wc(o);let ae=0,ge=e-a,ve=[];for(let Ce=0;Ce<o.length-1;Ce++){const Ve=o[Ce],ze=o[Ce+1],ct=Ve.dist(ze),vt=ze.angleTo(Ve);for(;ge+a<ae+ct;){ge+=a;const st=(ge-ae)/ct,It=nr.number(Ve.x,ze.x,st),Lt=nr.number(Ve.y,ze.y,st);if(It>=0&&It<L&&Lt>=0&&Lt<L&&ge-X>=0&&ge+X<=te){const Zt=new Sl(It,Lt,vt,Ce);Zt._round(),f&&!ip(o,Zt,w,f,v)||ve.push(Zt)}}ae+=ct}return O||ve.length||M||(ve=td(o,ae/2,a,f,v,w,M,!0,L)),ve}function wf(o,e,a,f){const v=[],w=o.image,M=w.pixelRatio,O=w.paddedRect.w-2,L=w.paddedRect.h-2,X=o.right-o.left,te=o.bottom-o.top,ae=w.stretchX||[[0,O]],ge=w.stretchY||[[0,L]],ve=(pn,Cn)=>pn+Cn[1]-Cn[0],Ce=ae.reduce(ve,0),Ve=ge.reduce(ve,0),ze=O-Ce,ct=L-Ve;let vt=0,st=Ce,It=0,Lt=Ve,Zt=0,Bn=ze,jn=0,Mn=ct;if(w.content&&f){const pn=w.content;vt=Kc(ae,0,pn[0]),It=Kc(ge,0,pn[1]),st=Kc(ae,pn[0],pn[2]),Lt=Kc(ge,pn[1],pn[3]),Zt=pn[0]-vt,jn=pn[1]-It,Bn=pn[2]-pn[0]-st,Mn=pn[3]-pn[1]-Lt}const vn=(pn,Cn,wn,rn)=>{const Hn=nd(pn.stretch-vt,st,X,o.left),$n=yu(pn.fixed-Zt,Bn,pn.stretch,Ce),Ri=nd(Cn.stretch-It,Lt,te,o.top),ar=yu(Cn.fixed-jn,Mn,Cn.stretch,Ve),gr=nd(wn.stretch-vt,st,X,o.left),po=yu(wn.fixed-Zt,Bn,wn.stretch,Ce),Ea=nd(rn.stretch-It,Lt,te,o.top),qo=yu(rn.fixed-jn,Mn,rn.stretch,Ve),fo=new Ie(Hn,Ri),To=new Ie(gr,Ri),Ko=new Ie(gr,Ea),Yo=new Ie(Hn,Ea),zs=new Ie($n/M,ar/M),to=new Ie(po/M,qo/M),bo=e*Math.PI/180;if(bo){const Xo=Math.sin(bo),Cs=Math.cos(bo),no=[Cs,-Xo,Xo,Cs];fo._matMult(no),To._matMult(no),Yo._matMult(no),Ko._matMult(no)}const No=pn.stretch+pn.fixed,Vs=Cn.stretch+Cn.fixed;return{tl:fo,tr:To,bl:Yo,br:Ko,tex:{x:w.paddedRect.x+1+No,y:w.paddedRect.y+1+Vs,w:wn.stretch+wn.fixed-No,h:rn.stretch+rn.fixed-Vs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:zs,pixelOffsetBR:to,minFontScaleX:Bn/M/X,minFontScaleY:Mn/M/te,isSDF:a}};if(f&&(w.stretchX||w.stretchY)){const pn=op(ae,ze,Ce),Cn=op(ge,ct,Ve);for(let wn=0;wn<pn.length-1;wn++){const rn=pn[wn],Hn=pn[wn+1];for(let $n=0;$n<Cn.length-1;$n++)v.push(vn(rn,Cn[$n],Hn,Cn[$n+1]))}}else v.push(vn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:L+1}));return v}function Kc(o,e,a){let f=0;for(const v of o)f+=Math.max(e,Math.min(a,v[1]))-Math.max(e,Math.min(a,v[0]));return f}function op(o,e,a){const f=[{fixed:-1,stretch:0}];for(const[v,w]of o){const M=f[f.length-1];f.push({fixed:v-M.stretch,stretch:M.stretch}),f.push({fixed:v-M.stretch,stretch:M.stretch+(w-v)})}return f.push({fixed:e+1,stretch:a}),f}function nd(o,e,a,f){return o/e*a+f}function yu(o,e,a,f){return o-e*a/f}Pn("Anchor",Sl);class Yc{constructor(e,a,f,v,w,M,O,L,X,te){if(this.boxStartIndex=e.length,X){let ae=M.top,ge=M.bottom;const ve=M.collisionPadding;ve&&(ae-=ve[1],ge+=ve[3]);let Ce=ge-ae;Ce>0&&(Ce=Math.max(10,Ce),this.circleDiameter=Ce)}else{let ae=M.top*O-L[0],ge=M.bottom*O+L[2],ve=M.left*O-L[3],Ce=M.right*O+L[1];const Ve=M.collisionPadding;if(Ve&&(ve-=Ve[0]*O,ae-=Ve[1]*O,Ce+=Ve[2]*O,ge+=Ve[3]*O),te){const ze=new Ie(ve,ae),ct=new Ie(Ce,ae),vt=new Ie(ve,ge),st=new Ie(Ce,ge),It=te*Math.PI/180;ze._rotate(It),ct._rotate(It),vt._rotate(It),st._rotate(It),ve=Math.min(ze.x,ct.x,vt.x,st.x),Ce=Math.max(ze.x,ct.x,vt.x,st.x),ae=Math.min(ze.y,ct.y,vt.y,st.y),ge=Math.max(ze.y,ct.y,vt.y,st.y)}e.emplaceBack(a.x,a.y,ve,ae,Ce,ge,f,v,w)}this.boxEndIndex=e.length}}class qd{constructor(e=[],a=vu){if(this.data=e,this.length=this.data.length,this.compare=a,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:a,compare:f}=this,v=a[e];for(;e>0;){const w=e-1>>1,M=a[w];if(f(v,M)>=0)break;a[e]=M,e=w}a[e]=v}_down(e){const{data:a,compare:f}=this,v=this.length>>1,w=a[e];for(;e<v;){let M=1+(e<<1),O=a[M];const L=M+1;if(L<this.length&&f(a[L],O)<0&&(M=L,O=a[L]),f(O,w)>=0)break;a[e]=O,e=M}a[e]=w}}function vu(o,e){return o<e?-1:o>e?1:0}function Cf(o,e=1,a=!1){let f=1/0,v=1/0,w=-1/0,M=-1/0;const O=o[0];for(let ve=0;ve<O.length;ve++){const Ce=O[ve];(!ve||Ce.x<f)&&(f=Ce.x),(!ve||Ce.y<v)&&(v=Ce.y),(!ve||Ce.x>w)&&(w=Ce.x),(!ve||Ce.y>M)&&(M=Ce.y)}const L=Math.min(w-f,M-v);let X=L/2;const te=new qd([],sp);if(0===L)return new Ie(f,v);for(let ve=f;ve<w;ve+=L)for(let Ce=v;Ce<M;Ce+=L)te.push(new Xc(ve+X,Ce+X,X,o));let ae=function(ve){let Ce=0,Ve=0,ze=0;const ct=ve[0];for(let vt=0,st=ct.length,It=st-1;vt<st;It=vt++){const Lt=ct[vt],Zt=ct[It],Bn=Lt.x*Zt.y-Zt.x*Lt.y;Ve+=(Lt.x+Zt.x)*Bn,ze+=(Lt.y+Zt.y)*Bn,Ce+=3*Bn}return new Xc(Ve/Ce,ze/Ce,0,ve)}(o),ge=te.length;for(;te.length;){const ve=te.pop();(ve.d>ae.d||!ae.d)&&(ae=ve,a&&console.log("found best %d after %d probes",Math.round(1e4*ve.d)/1e4,ge)),ve.max-ae.d<=e||(X=ve.h/2,te.push(new Xc(ve.p.x-X,ve.p.y-X,X,o)),te.push(new Xc(ve.p.x+X,ve.p.y-X,X,o)),te.push(new Xc(ve.p.x-X,ve.p.y+X,X,o)),te.push(new Xc(ve.p.x+X,ve.p.y+X,X,o)),ge+=4)}return a&&(console.log(`num probes: ${ge}`),console.log(`best distance: ${ae.d}`)),ae.p}function sp(o,e){return e.max-o.max}function Xc(o,e,a,f){this.p=new Ie(o,e),this.h=a,this.d=function(v,w){let M=!1,O=1/0;for(let L=0;L<w.length;L++){const X=w[L];for(let te=0,ae=X.length,ge=ae-1;te<ae;ge=te++){const ve=X[te],Ce=X[ge];ve.y>v.y!=Ce.y>v.y&&v.x<(Ce.x-ve.x)*(v.y-ve.y)/(Ce.y-ve.y)+ve.x&&(M=!M),O=Math.min(O,ku(v,ve,Ce))}}return(M?1:-1)*Math.sqrt(O)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const id=Number.POSITIVE_INFINITY;function bu(o,e){return e[1]!==id?function(a,f,v){let w=0,M=0;switch(f=Math.abs(f),v=Math.abs(v),a){case"top-right":case"top-left":case"top":M=v-7;break;case"bottom-right":case"bottom-left":case"bottom":M=7-v}switch(a){case"top-right":case"bottom-right":case"right":w=-f;break;case"top-left":case"bottom-left":case"left":w=f}return[w,M]}(o,e[0],e[1]):function(a,f){let v=0,w=0;f<0&&(f=0);const M=f/Math.sqrt(2);switch(a){case"top-right":case"top-left":w=M-7;break;case"bottom-right":case"bottom-left":w=7-M;break;case"bottom":w=7-f;break;case"top":w=f-7}switch(a){case"top-right":case"bottom-right":v=-M;break;case"top-left":case"bottom-left":v=M;break;case"left":v=f;break;case"right":v=-f}return[v,w]}(o,e[0])}function ap(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ef(o,e,a,f,v,w,M,O,L,X,te){let ae=w.textMaxSize.evaluate(e,{});void 0===ae&&(ae=M);const ge=o.layers[0].layout,ve=ge.get("icon-offset").evaluate(e,{},te),Ce=Mf(a.horizontal),Ve=M/24,ze=o.tilePixelRatio*Ve,ct=o.tilePixelRatio*ae/24,vt=o.tilePixelRatio*O,st=o.tilePixelRatio*ge.get("symbol-spacing"),It=ge.get("text-padding")*o.tilePixelRatio,Lt=function(rn,Hn,$n,Ri=1){const ar=rn.get("icon-padding").evaluate(Hn,{},$n),gr=ar&&ar.values;return[gr[0]*Ri,gr[1]*Ri,gr[2]*Ri,gr[3]*Ri]}(ge,e,te,o.tilePixelRatio),Zt=ge.get("text-max-angle")/180*Math.PI,Bn="viewport"!==ge.get("text-rotation-alignment")&&"point"!==ge.get("symbol-placement"),jn="map"===ge.get("icon-rotation-alignment")&&"point"!==ge.get("symbol-placement"),Mn=ge.get("symbol-placement"),vn=st/2,pn=ge.get("icon-text-fit");let Cn;f&&"none"!==pn&&(o.allowVerticalPlacement&&a.vertical&&(Cn=ff(f,a.vertical,pn,ge.get("icon-text-fit-padding"),ve,Ve)),Ce&&(f=ff(f,Ce,pn,ge.get("icon-text-fit-padding"),ve,Ve)));const wn=(rn,Hn)=>{Hn.x<0||Hn.x>=So||Hn.y<0||Hn.y>=So||function($n,Ri,ar,gr,po,Ea,qo,fo,To,Ko,Yo,zs,to,bo,No,Vs,Xo,Cs,no,qr,Li,Us,xo,Tr,Da){const ll=$n.addToLineVertexArray(Ri,ar);let Ma,ds,js,oa,hs=0,Zl=0,wu=0,Wm=0,Cu=-1,Eu=-1;const cl={};let Xd=Ro(""),ld=0,Pf=0;if(void 0===fo._unevaluatedLayout.getValue("text-radial-offset")?[ld,Pf]=fo.layout.get("text-offset").evaluate(Li,{},Tr).map(sa=>24*sa):(ld=24*fo.layout.get("text-radial-offset").evaluate(Li,{},Tr),Pf=id),$n.allowVerticalPlacement&&gr.vertical){const sa=fo.layout.get("text-rotate").evaluate(Li,{},Tr)+90;js=new Yc(To,Ri,Ko,Yo,zs,gr.vertical,to,bo,No,sa),qo&&(oa=new Yc(To,Ri,Ko,Yo,zs,qo,Xo,Cs,No,sa))}if(po){const sa=fo.layout.get("icon-rotate").evaluate(Li,{}),Wl="none"!==fo.layout.get("icon-text-fit"),eh=wf(po,sa,xo,Wl),th=qo?wf(qo,sa,xo,Wl):void 0;ds=new Yc(To,Ri,Ko,Yo,zs,po,Xo,Cs,!1,sa),hs=4*eh.length;const Jm=$n.iconSizeData;let Du=null;"source"===Jm.kind?(Du=[sl*fo.layout.get("icon-size").evaluate(Li,{})],Du[0]>vc&&Ne(`${$n.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Jm.kind&&(Du=[sl*Us.compositeIconSizes[0].evaluate(Li,{},Tr),sl*Us.compositeIconSizes[1].evaluate(Li,{},Tr)],(Du[0]>vc||Du[1]>vc)&&Ne(`${$n.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),$n.addSymbols($n.icon,eh,Du,qr,no,Li,g.WritingMode.none,Ri,ll.lineStartIndex,ll.lineLength,-1,Tr),Cu=$n.icon.placedSymbolArray.length-1,th&&(Zl=4*th.length,$n.addSymbols($n.icon,th,Du,qr,no,Li,g.WritingMode.vertical,Ri,ll.lineStartIndex,ll.lineLength,-1,Tr),Eu=$n.icon.placedSymbolArray.length-1)}const Of=Object.keys(gr.horizontal);for(const sa of Of){const Wl=gr.horizontal[sa];if(!Ma){Xd=Ro(Wl.text);const th=fo.layout.get("text-rotate").evaluate(Li,{},Tr);Ma=new Yc(To,Ri,Ko,Yo,zs,Wl,to,bo,No,th)}const eh=1===Wl.positionedLines.length;if(wu+=Df($n,Ri,Wl,Ea,fo,No,Li,Vs,ll,gr.vertical?g.WritingMode.horizontal:g.WritingMode.horizontalOnly,eh?Of:[sa],cl,Cu,Us,Tr),eh)break}gr.vertical&&(Wm+=Df($n,Ri,gr.vertical,Ea,fo,No,Li,Vs,ll,g.WritingMode.vertical,["vertical"],cl,Eu,Us,Tr));const up=Ma?Ma.boxStartIndex:$n.collisionBoxArray.length,qm=Ma?Ma.boxEndIndex:$n.collisionBoxArray.length,Km=js?js.boxStartIndex:$n.collisionBoxArray.length,kf=js?js.boxEndIndex:$n.collisionBoxArray.length,x_=ds?ds.boxStartIndex:$n.collisionBoxArray.length,Ym=ds?ds.boxEndIndex:$n.collisionBoxArray.length,Xm=oa?oa.boxStartIndex:$n.collisionBoxArray.length,dp=oa?oa.boxEndIndex:$n.collisionBoxArray.length;let Ua=-1;const Jd=(sa,Wl)=>sa&&sa.circleDiameter?Math.max(sa.circleDiameter,Wl):Wl;Ua=Jd(Ma,Ua),Ua=Jd(js,Ua),Ua=Jd(ds,Ua),Ua=Jd(oa,Ua);const Qd=Ua>-1?1:0;Qd&&(Ua*=Da/24),$n.glyphOffsetArray.length>=bc.MAX_GLYPHS&&Ne("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Li.sortKey&&$n.addToSortKeyRanges($n.symbolInstances.length,Li.sortKey),$n.symbolInstances.emplaceBack(Ri.x,Ri.y,cl.right>=0?cl.right:-1,cl.center>=0?cl.center:-1,cl.left>=0?cl.left:-1,cl.vertical||-1,Cu,Eu,Xd,up,qm,Km,kf,x_,Ym,Xm,dp,Ko,wu,Wm,hs,Zl,Qd,0,to,ld,Pf,Ua)}(o,Hn,rn,a,f,v,Cn,o.layers[0],o.collisionBoxArray,e.index,e.sourceLayerIndex,o.index,ze,[It,It,It,It],Bn,L,vt,Lt,jn,ve,e,w,X,te,M)};if("line"===Mn)for(const rn of xf(e.geometry,0,0,So,So)){const Hn=b_(rn,st,Zt,a.vertical||Ce,f,24,ct,o.overscaling,So);for(const $n of Hn)Ce&&Sf(o,Ce.text,vn,$n)||wn(rn,$n)}else if("line-center"===Mn){for(const rn of e.geometry)if(rn.length>1){const Hn=Gm(rn,Zt,a.vertical||Ce,f,24,ct);Hn&&wn(rn,Hn)}}else if("Polygon"===e.type)for(const rn of zc(e.geometry,0)){const Hn=Cf(rn,16);wn(rn[0],new Sl(Hn.x,Hn.y,0))}else if("LineString"===e.type)for(const rn of e.geometry)wn(rn,new Sl(rn[0].x,rn[0].y,0));else if("Point"===e.type)for(const rn of e.geometry)for(const Hn of rn)wn([Hn],new Sl(Hn.x,Hn.y,0))}function Df(o,e,a,f,v,w,M,O,L,X,te,ae,ge,ve,Ce){const Ve=function(vt,st,It,Lt,Zt,Bn,jn,Mn){const vn=Lt.layout.get("text-rotate").evaluate(Bn,{})*Math.PI/180,pn=[];for(const Cn of st.positionedLines)for(const wn of Cn.positionedGlyphs){if(!wn.rect)continue;const rn=wn.rect||{};let Hn=4,$n=!0,Ri=1,ar=0;const gr=(Zt||Mn)&&wn.vertical,po=wn.metrics.advance*wn.scale/2;if(Mn&&st.verticalizable&&(ar=Cn.lineOffset/2-(wn.imageName?-(24-wn.metrics.width*wn.scale)/2:24*(wn.scale-1))),wn.imageName){const no=jn[wn.imageName];$n=no.sdf,Ri=no.pixelRatio,Hn=1/Ri}const Ea=Zt?[wn.x+po,wn.y]:[0,0];let qo=Zt?[0,0]:[wn.x+po+It[0],wn.y+It[1]-ar],fo=[0,0];gr&&(fo=qo,qo=[0,0]);const To=(wn.metrics.left-Hn)*wn.scale-po+qo[0],Ko=(-wn.metrics.top-Hn)*wn.scale+qo[1],Yo=To+rn.w*wn.scale/Ri,zs=Ko+rn.h*wn.scale/Ri,to=new Ie(To,Ko),bo=new Ie(Yo,Ko),No=new Ie(To,zs),Vs=new Ie(Yo,zs);if(gr){const no=new Ie(-po,po- -17),qr=-Math.PI/2,Li=12-po,Us=new Ie(22-Li,-(wn.imageName?Li:0)),xo=new Ie(...fo);to._rotateAround(qr,no)._add(Us)._add(xo),bo._rotateAround(qr,no)._add(Us)._add(xo),No._rotateAround(qr,no)._add(Us)._add(xo),Vs._rotateAround(qr,no)._add(Us)._add(xo)}if(vn){const no=Math.sin(vn),qr=Math.cos(vn),Li=[qr,-no,no,qr];to._matMult(Li),bo._matMult(Li),No._matMult(Li),Vs._matMult(Li)}const Xo=new Ie(0,0),Cs=new Ie(0,0);pn.push({tl:to,tr:bo,bl:No,br:Vs,tex:rn,writingMode:st.writingMode,glyphOffset:Ea,sectionIndex:wn.sectionIndex,isSDF:$n,pixelOffsetTL:Xo,pixelOffsetBR:Cs,minFontScaleX:0,minFontScaleY:0})}return pn}(0,a,O,v,w,M,f,o.allowVerticalPlacement),ze=o.textSizeData;let ct=null;"source"===ze.kind?(ct=[sl*v.layout.get("text-size").evaluate(M,{})],ct[0]>vc&&Ne(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===ze.kind&&(ct=[sl*ve.compositeTextSizes[0].evaluate(M,{},Ce),sl*ve.compositeTextSizes[1].evaluate(M,{},Ce)],(ct[0]>vc||ct[1]>vc)&&Ne(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Ve,ct,O,w,M,X,e,L.lineStartIndex,L.lineLength,ge,Ce);for(const vt of te)ae[vt]=o.text.placedSymbolArray.length-1;return 4*Ve.length}function Mf(o){for(const e in o)return o[e];return null}function Sf(o,e,a,f){const v=o.compareText;if(e in v){const w=v[e];for(let M=w.length-1;M>=0;M--)if(f.dist(w[M])<a)return!0}else v[e]=[];return v[e].push(f),!1}function rd(o,e,a,f,v,w){if(v-f<=a)return;const M=f+v>>1;Kd(o,e,M,f,v,w%2),rd(o,e,a,f,M-1,w+1),rd(o,e,a,M+1,v,w+1)}function Kd(o,e,a,f,v,w){for(;v>f;){if(v-f>600){const X=v-f+1,te=a-f+1,ae=Math.log(X),ge=.5*Math.exp(2*ae/3),ve=.5*Math.sqrt(ae*ge*(X-ge)/X)*(te-X/2<0?-1:1);Kd(o,e,a,Math.max(f,Math.floor(a-te*ge/X+ve)),Math.min(v,Math.floor(a+(X-te)*ge/X+ve)),w)}const M=e[2*a+w];let O=f,L=v;for(od(o,e,f,a),e[2*v+w]>M&&od(o,e,f,v);O<L;){for(od(o,e,O,L),O++,L--;e[2*O+w]<M;)O++;for(;e[2*L+w]>M;)L--}e[2*f+w]===M?od(o,e,f,L):(L++,od(o,e,L,v)),L<=a&&(f=L+1),a<=L&&(v=L-1)}}function od(o,e,a,f){sd(o,a,f),sd(e,2*a,2*f),sd(e,2*a+1,2*f+1)}function sd(o,e,a){const f=o[e];o[e]=o[a],o[a]=f}function Tf(o,e,a,f){const v=o-a,w=e-f;return v*v+w*w}const If=o=>o[0],Zm=o=>o[1];var lp;g.PerformanceMarkers=void 0,(lp=g.PerformanceMarkers||(g.PerformanceMarkers={})).create="create",lp.load="load",lp.fullLoad="fullLoad";let Bs=null,ad=[];const Yd=1e3/60,xu="loadTime",cp="fullLoadTime",Af={mark(o){performance.mark(o)},frame(o){const e=o;null!=Bs&&ad.push(e-Bs),Bs=e},clearMetrics(){Bs=null,ad=[],performance.clearMeasures(xu),performance.clearMeasures(cp);for(const o in g.PerformanceMarkers)performance.clearMarks(g.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(xu,g.PerformanceMarkers.create,g.PerformanceMarkers.load),performance.measure(cp,g.PerformanceMarkers.create,g.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(xu)[0].duration,e=performance.getEntriesByName(cp)[0].duration,a=ad.length,f=1/(ad.reduce((w,M)=>w+M,0)/a/1e3),v=ad.filter(w=>w>Yd).reduce((w,M)=>w+(M-Yd)/Yd,0);return{loadTime:o,fullLoadTime:e,fps:f,percentDroppedFrames:v/(a+v)*100,totalFrames:a}}};g.AJAXError=Xn,g.ARRAY_TYPE=xa,g.Actor=class{constructor(o,e,a){this.target=o,this.parent=e,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Tt(["receive","process"],this),this.invoker=new yf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ft()?o:window}send(o,e,a,f,v=!1){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[w]=a);const M=lt(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:o,hasCallback:!!a,targetMapId:f,mustQueue:v,sourceMapId:this.mapId,data:yl(e,M)},M),{cancel:()=>{a&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(o){const e=o.data,a=e.id;if(a&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[a];const f=this.cancelCallbacks[a];delete this.cancelCallbacks[a],f&&f()}else Ft()||e.mustQueue?(this.tasks[a]=e,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,e)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),e=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(o,e)}processTask(o,e){if("<response>"===e.type){const a=this.callbacks[o];delete this.callbacks[o],a&&(e.error?a(Na(e.error)):a(null,Na(e.data)))}else{let a=!1;const f=lt(this.globalScope)?void 0:[],v=e.hasCallback?(O,L)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:O?yl(O):null,data:yl(L,f)},f)}:O=>{a=!0};let w=null;const M=Na(e.data);if(this.parent[e.type])w=this.parent[e.type](e.sourceMapId,M,v);else if(this.parent.getWorkerSource){const O=e.type.split(".");w=this.parent.getWorkerSource(e.sourceMapId,O[0],M.source)[O[1]](M,v)}else v(new Error(`Could not find function ${e.type}`));!a&&w&&w.cancel&&(this.cancelCallbacks[o]=w.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},g.AlphaImage=Lu,g.CanonicalTileID=_u,g.CollisionBoxArray=D,g.CollisionCircleLayoutArray=class extends t{},g.Color=Ii,g.DEMData=bf,g.DataConstantProperty=An,g.DictionaryCoder=tp,g.EXTENT=So,g.ErrorEvent=en,g.EvaluationParameters=fr,g.Event=At,g.Evented=sn,g.FeatureIndex=Gd,g.FillBucket=Dd,g.FillExtrusionBucket=zh,g.GeoJSONFeature=$d,g.ImageAtlas=df,g.ImagePosition=Ku,g.KDBush=class{constructor(o,e=If,a=Zm,f=64,v=Float64Array){this.nodeSize=f,this.points=o;const w=o.length<65536?Uint16Array:Uint32Array,M=this.ids=new w(o.length),O=this.coords=new v(2*o.length);for(let L=0;L<o.length;L++)M[L]=L,O[2*L]=e(o[L]),O[2*L+1]=a(o[L]);rd(M,O,f,0,M.length-1,0)}range(o,e,a,f){return function(v,w,M,O,L,X,te){const ae=[0,v.length-1,0],ge=[];let ve,Ce;for(;ae.length;){const Ve=ae.pop(),ze=ae.pop(),ct=ae.pop();if(ze-ct<=te){for(let It=ct;It<=ze;It++)ve=w[2*It],Ce=w[2*It+1],ve>=M&&ve<=L&&Ce>=O&&Ce<=X&&ge.push(v[It]);continue}const vt=Math.floor((ct+ze)/2);ve=w[2*vt],Ce=w[2*vt+1],ve>=M&&ve<=L&&Ce>=O&&Ce<=X&&ge.push(v[vt]);const st=(Ve+1)%2;(0===Ve?M<=ve:O<=Ce)&&(ae.push(ct),ae.push(vt-1),ae.push(st)),(0===Ve?L>=ve:X>=Ce)&&(ae.push(vt+1),ae.push(ze),ae.push(st))}return ge}(this.ids,this.coords,o,e,a,f,this.nodeSize)}within(o,e,a){return function(f,v,w,M,O,L){const X=[0,f.length-1,0],te=[],ae=O*O;for(;X.length;){const ge=X.pop(),ve=X.pop(),Ce=X.pop();if(ve-Ce<=L){for(let st=Ce;st<=ve;st++)Tf(v[2*st],v[2*st+1],w,M)<=ae&&te.push(f[st]);continue}const Ve=Math.floor((Ce+ve)/2),ze=v[2*Ve],ct=v[2*Ve+1];Tf(ze,ct,w,M)<=ae&&te.push(f[Ve]);const vt=(ge+1)%2;(0===ge?w-O<=ze:M-O<=ct)&&(X.push(Ce),X.push(Ve-1),X.push(vt)),(0===ge?w+O>=ze:M+O>=ct)&&(X.push(Ve+1),X.push(ve),X.push(vt))}return te}(this.ids,this.coords,o,e,a,this.nodeSize)}},g.LineBucket=Uh,g.LineStripIndexArray=class extends Z{},g.LngLat=Ml,g.MercatorCoordinate=Ju,g.ONE_EM=24,g.OverscaledTileID=ra,g.PerformanceUtils=Af,g.Point=Ie,g.Pos3dArray=class extends $i{},g.PosArray=pt,g.Properties=lo,g.Protobuf=kd,g.QuadTriangleArray=class extends m{},g.RGBAImage=ia,g.RasterBoundsArray=class extends Fs{},g.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return 0===o.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},g.SegmentVector=Yi,g.SymbolBucket=bc,g.Transitionable=xl,g.TriangleIndexArray=mr,g.Uniform1f=Go,g.Uniform1i=class extends Xi{constructor(o,e){super(o,e),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},g.Uniform2f=class extends Xi{constructor(o,e){super(o,e),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},g.Uniform3f=class extends Xi{constructor(o,e){super(o,e),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},g.Uniform4f=Hl,g.UniformColor=El,g.UniformMatrix4f=class extends Xi{constructor(o,e){super(o,e),this.current=$l}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let e=1;e<16;e++)if(o[e]!==this.current[e]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},g.UnwrappedTileID=vf,g.ValidationError=Nt,g.ZoomHistory=os,g.addDynamicAttributes=qh,g.arrayBufferToImage=function(o,e){const a=new Image;a.onload=()=>{e(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=St})},a.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(o)],{type:"image/png"});a.src=o.byteLength?URL.createObjectURL(f):St},g.arrayBufferToImageBitmap=function(o,e){const a=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(a).then(f=>{e(null,f)}).catch(f=>{e(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},g.asyncAll=function(o,e,a){if(!o.length)return a(null,[]);let f=o.length;const v=new Array(o.length);let w=null;o.forEach((M,O)=>{e(M,(L,X)=>{L&&(w=L),v[O]=X,0==--f&&a(w,v)})})},g.bezier=Re,g.bindAll=Tt,g.clamp=We,g.clipLine=xf,g.clone=function(o){var e=new xa(16);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e},g.clone$1=Dt,g.collisionCircleLayout=Wc,g.config=On,g.copy=function(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o},g.create=function(){var o=new xa(16);return xa!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},g.createExpression=ye,g.createFilter=fa,g.createLayout=xr,g.createStyleLayer=function(o){return"custom"===o.type?new _f(o):new gu[o.type](o)},g.deepEqual=function o(e,a){if(Array.isArray(e)){if(!Array.isArray(a)||e.length!==a.length)return!1;for(let f=0;f<e.length;f++)if(!o(e[f],a[f]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==a){if("object"!=typeof a||Object.keys(e).length!==Object.keys(a).length)return!1;for(const f in e)if(!o(e[f],a[f]))return!1;return!0}return e===a},g.derefLayers=function(o){o=o.slice();const e=Object.create(null);for(let a=0;a<o.length;a++)e[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=le(o[a],e[o[a].ref]));return o},g.diffStyles=function(o,e){if(!o)return[{command:Ae.setStyle,args:[e]}];let a=[];try{if(!de(o.version,e.version))return[{command:Ae.setStyle,args:[e]}];de(o.center,e.center)||a.push({command:Ae.setCenter,args:[e.center]}),de(o.zoom,e.zoom)||a.push({command:Ae.setZoom,args:[e.zoom]}),de(o.bearing,e.bearing)||a.push({command:Ae.setBearing,args:[e.bearing]}),de(o.pitch,e.pitch)||a.push({command:Ae.setPitch,args:[e.pitch]}),de(o.sprite,e.sprite)||a.push({command:Ae.setSprite,args:[e.sprite]}),de(o.glyphs,e.glyphs)||a.push({command:Ae.setGlyphs,args:[e.glyphs]}),de(o.transition,e.transition)||a.push({command:Ae.setTransition,args:[e.transition]}),de(o.light,e.light)||a.push({command:Ae.setLight,args:[e.light]});const f={},v=[];!function(M,O,L,X){let te;for(te in O=O||{},M=M||{})Object.prototype.hasOwnProperty.call(M,te)&&(Object.prototype.hasOwnProperty.call(O,te)||mt(te,L,X));for(te in O)Object.prototype.hasOwnProperty.call(O,te)&&(Object.prototype.hasOwnProperty.call(M,te)?de(M[te],O[te])||("geojson"===M[te].type&&"geojson"===O[te].type&&Vt(M,O,te)?L.push({command:Ae.setGeoJSONSourceData,args:[te,O[te].data]}):dn(te,O,L,X)):ut(te,O,L))}(o.sources,e.sources,v,f);const w=[];o.layers&&o.layers.forEach(M=>{f[M.source]?a.push({command:Ae.removeLayer,args:[M.id]}):w.push(M)}),a=a.concat(v),function(M,O,L){O=O||[];const X=(M=M||[]).map(fn),te=O.map(fn),ae=M.reduce(Vi,{}),ge=O.reduce(Vi,{}),ve=X.slice(),Ce=Object.create(null);let Ve,ze,ct,vt,st,It,Lt;for(Ve=0,ze=0;Ve<X.length;Ve++)ct=X[Ve],Object.prototype.hasOwnProperty.call(ge,ct)?ze++:(L.push({command:Ae.removeLayer,args:[ct]}),ve.splice(ve.indexOf(ct,ze),1));for(Ve=0,ze=0;Ve<te.length;Ve++)ct=te[te.length-1-Ve],ve[ve.length-1-Ve]!==ct&&(Object.prototype.hasOwnProperty.call(ae,ct)?(L.push({command:Ae.removeLayer,args:[ct]}),ve.splice(ve.lastIndexOf(ct,ve.length-ze),1)):ze++,It=ve[ve.length-Ve],L.push({command:Ae.addLayer,args:[ge[ct],It]}),ve.splice(ve.length-Ve,0,ct),Ce[ct]=!0);for(Ve=0;Ve<te.length;Ve++)if(ct=te[Ve],vt=ae[ct],st=ge[ct],!Ce[ct]&&!de(vt,st))if(de(vt.source,st.source)&&de(vt["source-layer"],st["source-layer"])&&de(vt.type,st.type)){for(Lt in mn(vt.layout,st.layout,L,ct,null,Ae.setLayoutProperty),mn(vt.paint,st.paint,L,ct,null,Ae.setPaintProperty),de(vt.filter,st.filter)||L.push({command:Ae.setFilter,args:[ct,st.filter]}),de(vt.minzoom,st.minzoom)&&de(vt.maxzoom,st.maxzoom)||L.push({command:Ae.setLayerZoomRange,args:[ct,st.minzoom,st.maxzoom]}),vt)Object.prototype.hasOwnProperty.call(vt,Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?mn(vt[Lt],st[Lt],L,ct,Lt.slice(6),Ae.setPaintProperty):de(vt[Lt],st[Lt])||L.push({command:Ae.setLayerProperty,args:[ct,Lt,st[Lt]]}));for(Lt in st)Object.prototype.hasOwnProperty.call(st,Lt)&&!Object.prototype.hasOwnProperty.call(vt,Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?mn(vt[Lt],st[Lt],L,ct,Lt.slice(6),Ae.setPaintProperty):de(vt[Lt],st[Lt])||L.push({command:Ae.setLayerProperty,args:[ct,Lt,st[Lt]]}))}else L.push({command:Ae.removeLayer,args:[ct]}),It=ve[ve.lastIndexOf(ct)+1],L.push({command:Ae.addLayer,args:[st,It]})}(w,e.layers,a)}catch(f){console.warn("Unable to compute style diff:",f),a=[{command:Ae.setStyle,args:[e]}]}return a},g.dot=function(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]+o[3]*e[3]},g.earthRadius=Qh,g.ease=it,g.emitValidationErrors=rc,g.emptyStyle=function(){const o={},e=ue.$version;for(const a in ue.$root){const f=ue.$root[a];if(f.required){let v=null;v="version"===a?e:"array"===f.type?[]:{},null!=v&&(o[a]=v)}}return o},g.equals=function(o,e){var a=o[0],f=o[1],v=o[2],w=o[3],M=o[4],O=o[5],L=o[6],X=o[7],te=o[8],ae=o[9],ge=o[10],ve=o[11],Ce=o[12],Ve=o[13],ze=o[14],ct=o[15],vt=e[0],st=e[1],It=e[2],Lt=e[3],Zt=e[4],Bn=e[5],jn=e[6],Mn=e[7],vn=e[8],pn=e[9],Cn=e[10],wn=e[11],rn=e[12],Hn=e[13],$n=e[14],Ri=e[15];return Math.abs(a-vt)<=Lo*Math.max(1,Math.abs(a),Math.abs(vt))&&Math.abs(f-st)<=Lo*Math.max(1,Math.abs(f),Math.abs(st))&&Math.abs(v-It)<=Lo*Math.max(1,Math.abs(v),Math.abs(It))&&Math.abs(w-Lt)<=Lo*Math.max(1,Math.abs(w),Math.abs(Lt))&&Math.abs(M-Zt)<=Lo*Math.max(1,Math.abs(M),Math.abs(Zt))&&Math.abs(O-Bn)<=Lo*Math.max(1,Math.abs(O),Math.abs(Bn))&&Math.abs(L-jn)<=Lo*Math.max(1,Math.abs(L),Math.abs(jn))&&Math.abs(X-Mn)<=Lo*Math.max(1,Math.abs(X),Math.abs(Mn))&&Math.abs(te-vn)<=Lo*Math.max(1,Math.abs(te),Math.abs(vn))&&Math.abs(ae-pn)<=Lo*Math.max(1,Math.abs(ae),Math.abs(pn))&&Math.abs(ge-Cn)<=Lo*Math.max(1,Math.abs(ge),Math.abs(Cn))&&Math.abs(ve-wn)<=Lo*Math.max(1,Math.abs(ve),Math.abs(wn))&&Math.abs(Ce-rn)<=Lo*Math.max(1,Math.abs(Ce),Math.abs(rn))&&Math.abs(Ve-Hn)<=Lo*Math.max(1,Math.abs(Ve),Math.abs(Hn))&&Math.abs(ze-$n)<=Lo*Math.max(1,Math.abs(ze),Math.abs($n))&&Math.abs(ct-Ri)<=Lo*Math.max(1,Math.abs(ct),Math.abs(Ri))},g.evaluateSizeForFeature=function(o,{uSize:e,uSizeT:a},{lowerSize:f,upperSize:v}){return"source"===o.kind?f/sl:"composite"===o.kind?nr.number(f/sl,v/sl,a):e},g.evaluateSizeForZoom=function(o,e){let a=0,f=0;if("constant"===o.kind)f=o.layoutSize;else if("source"!==o.kind){const{interpolationType:v,minZoom:w,maxZoom:M}=o,O=v?We(li.interpolationFactor(v,e,w,M),0,1):0;"camera"===o.kind?f=nr.number(o.minSize,o.maxSize,O):a=O}return{uSizeT:a,uSize:f}},g.evaluateVariableOffset=bu,g.evented=Rs,g.exported=Qt,g.extend=Ct,g.filterObject=Xt,g.findLineIntersection=function(o,e,a,f){const v=e.y-o.y,w=e.x-o.x,M=f.y-a.y,O=f.x-a.x,L=M*w-O*v;if(0===L)return null;const X=(O*(o.y-a.y)-M*(o.x-a.x))/L;return new Ie(o.x+X*w,o.y+X*v)},g.fromScaling=function(o,e){return o[0]=e[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=e[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=e[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},g.getAnchorAlignment=Gh,g.getAnchorJustification=ap,g.getArrayBuffer=di,g.getDefaultExportFromCjs=He,g.getJSON=function(o,e){return Qn(Ct(o,{type:"json"}),e)},g.getOverlapMode=Zh,g.getProtocolAction=nn,g.getRTLTextPluginStatus=Oc,g.getReferrer=mi,g.getVideo=function(o,e){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){e(null,a)};for(let f=0;f<o.length;f++){const v=window.document.createElement("source");ln(o[f])||(a.crossOrigin="Anonymous"),v.src=o[f],a.appendChild(v)}return{cancel:()=>{}}},g.groupByLayout=function(o,e){const a={};for(let v=0;v<o.length;v++){const w=e&&e[o[v].id]||gl(o[v]);e&&(e[o[v].id]=w);let M=a[w];M||(M=a[w]=[]),M.push(o[v])}const f=[];for(const v in a)f.push(a[v]);return f},g.identity=Lc,g.interpolate=nr,g.invert=function(o,e){var a=e[0],f=e[1],v=e[2],w=e[3],M=e[4],O=e[5],L=e[6],X=e[7],te=e[8],ae=e[9],ge=e[10],ve=e[11],Ce=e[12],Ve=e[13],ze=e[14],ct=e[15],vt=a*O-f*M,st=a*L-v*M,It=a*X-w*M,Lt=f*L-v*O,Zt=f*X-w*O,Bn=v*X-w*L,jn=te*Ve-ae*Ce,Mn=te*ze-ge*Ce,vn=te*ct-ve*Ce,pn=ae*ze-ge*Ve,Cn=ae*ct-ve*Ve,wn=ge*ct-ve*ze,rn=vt*wn-st*Cn+It*pn+Lt*vn-Zt*Mn+Bn*jn;return rn?(o[0]=(O*wn-L*Cn+X*pn)*(rn=1/rn),o[1]=(v*Cn-f*wn-w*pn)*rn,o[2]=(Ve*Bn-ze*Zt+ct*Lt)*rn,o[3]=(ge*Zt-ae*Bn-ve*Lt)*rn,o[4]=(L*vn-M*wn-X*Mn)*rn,o[5]=(a*wn-v*vn+w*Mn)*rn,o[6]=(ze*It-Ce*Bn-ct*st)*rn,o[7]=(te*Bn-ge*It+ve*st)*rn,o[8]=(M*Cn-O*vn+X*jn)*rn,o[9]=(f*vn-a*Cn-w*jn)*rn,o[10]=(Ce*Zt-Ve*It+ct*vt)*rn,o[11]=(ae*It-te*Zt-ve*vt)*rn,o[12]=(O*Mn-M*pn-L*jn)*rn,o[13]=(a*pn-f*Mn+v*jn)*rn,o[14]=(Ve*st-Ce*Lt-ze*vt)*rn,o[15]=(te*Lt-ae*st+ge*vt)*rn,o):null},g.isImageBitmap=dt,g.isSafari=lt,g.isWorker=Ft,g.keysDifference=function(o,e){const a=[];for(const f in o)f in e||a.push(f);return a},g.lazyLoadRTLTextPlugin=function(){cs.isLoading()||cs.isLoaded()||"deferred"!==Oc()||bl()},g.makeRequest=Qn,g.mapObject=an,g.mercatorXfromLng=Hm,g.mercatorYfromLat=Ca,g.mercatorZfromAltitude=xc,g.mul=gm,g.mul$1=function(o,e,a){return o[0]=e[0]*a[0],o[1]=e[1]*a[1],o[2]=e[2]*a[2],o[3]=e[3]*a[3],o},g.multiply=Up,g.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},g.operations=Ae,g.ortho=function(o,e,a,f,v,w,M){var O=1/(e-a),L=1/(f-v),X=1/(w-M);return o[0]=-2*O,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*L,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*X,o[11]=0,o[12]=(e+a)*O,o[13]=(v+f)*L,o[14]=(M+w)*X,o[15]=1,o},g.parseCacheControl=function(o){const e={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,f,v,w)=>{const M=v||w;return e[f]=!M||M.toLowerCase(),""}),e["max-age"]){const a=parseInt(e["max-age"],10);isNaN(a)?delete e["max-age"]:e["max-age"]=a}return e},g.parseGlyphPbf=function(o){return new kd(o).readFields(zm,[])},g.pbf=rf,g.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=So/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const e=o.bucket.layers[0].layout,a=o.bucket.layers[0]._unevaluatedLayout._values,f={layoutIconSize:a["icon-size"].possiblyEvaluate(new fr(o.bucket.zoom+1),o.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new fr(o.bucket.zoom+1),o.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new fr(18))};if("composite"===o.bucket.textSizeData.kind){const{minZoom:L,maxZoom:X}=o.bucket.textSizeData;f.compositeTextSizes=[a["text-size"].possiblyEvaluate(new fr(L),o.canonical),a["text-size"].possiblyEvaluate(new fr(X),o.canonical)]}if("composite"===o.bucket.iconSizeData.kind){const{minZoom:L,maxZoom:X}=o.bucket.iconSizeData;f.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new fr(L),o.canonical),a["icon-size"].possiblyEvaluate(new fr(X),o.canonical)]}const v=24*e.get("text-line-height"),w="viewport"!==e.get("text-rotation-alignment")&&"point"!==e.get("symbol-placement"),M=e.get("text-keep-upright"),O=e.get("text-size");for(const L of o.bucket.features){const X=e.get("text-font").evaluate(L,{},o.canonical).join(","),te=O.evaluate(L,{},o.canonical),ae=f.layoutTextSize.evaluate(L,{},o.canonical),ge=f.layoutIconSize.evaluate(L,{},o.canonical),ve={horizontal:{},vertical:void 0},Ce=L.text;let Ve,ze=[0,0];if(Ce){const st=Ce.toString(),It=24*e.get("text-letter-spacing").evaluate(L,{},o.canonical),Lt=ss(st)?It:0,Zt=e.get("text-anchor").evaluate(L,{},o.canonical),Bn=e.get("text-variable-anchor");if(!Bn){const Cn=e.get("text-radial-offset").evaluate(L,{},o.canonical);ze=Cn?bu(Zt,[24*Cn,id]):e.get("text-offset").evaluate(L,{},o.canonical).map(wn=>24*wn)}let jn=w?"center":e.get("text-justify").evaluate(L,{},o.canonical);const Mn=e.get("symbol-placement"),vn="point"===Mn?24*e.get("text-max-width").evaluate(L,{},o.canonical):0,pn=()=>{o.bucket.allowVerticalPlacement&&Nl(st)&&(ve.vertical=hu(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,X,vn,v,Zt,"left",Lt,ze,g.WritingMode.vertical,!0,Mn,ae,te))};if(!w&&Bn){const Cn="auto"===jn?Bn.map(rn=>ap(rn)):[jn];let wn=!1;for(let rn=0;rn<Cn.length;rn++){const Hn=Cn[rn];if(!ve.horizontal[Hn])if(wn)ve.horizontal[Hn]=ve.horizontal[0];else{const $n=hu(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,X,vn,v,"center",Hn,Lt,ze,g.WritingMode.horizontal,!1,Mn,ae,te);$n&&(ve.horizontal[Hn]=$n,wn=1===$n.positionedLines.length)}}pn()}else{"auto"===jn&&(jn=ap(Zt));const Cn=hu(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,X,vn,v,Zt,jn,Lt,ze,g.WritingMode.horizontal,!1,Mn,ae,te);Cn&&(ve.horizontal[jn]=Cn),pn(),Nl(st)&&w&&M&&(ve.vertical=hu(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,X,vn,v,Zt,jn,Lt,ze,g.WritingMode.vertical,!1,Mn,ae,te))}}let ct=!1;if(L.icon&&L.icon.name){const st=o.imageMap[L.icon.name];st&&(Ve=pf(o.imagePositions[L.icon.name],e.get("icon-offset").evaluate(L,{},o.canonical),e.get("icon-anchor").evaluate(L,{},o.canonical)),ct=!!st.sdf,void 0===o.bucket.sdfIcons?o.bucket.sdfIcons=ct:o.bucket.sdfIcons!==ct&&Ne("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(st.pixelRatio!==o.bucket.pixelRatio||0!==e.get("icon-rotate").constantOr(1))&&(o.bucket.iconsNeedLinear=!0))}const vt=Mf(ve.horizontal)||ve.vertical;o.bucket.iconsInText=!!vt&&vt.iconsInText,(vt||Ve)&&Ef(o.bucket,L,ve,Ve,o.imageMap,f,ae,ge,ze,ct,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},g.perspective=function(o,e,a,f,v){var w,M=1/Math.tan(e/2);return o[0]=M/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=v&&v!==1/0?(o[10]=(v+f)*(w=1/(f-v)),o[14]=2*v*f*w):(o[10]=-1,o[14]=-2*f),o},g.pick=function(o,e){const a={};for(let f=0;f<e.length;f++){const v=e[f];v in o&&(a[v]=o[v])}return a},g.plugin=cs,g.pointGeometry=he,g.polygonIntersectsPolygon=Eh,g.potpack=uf,g.register=Pn,g.registerForPluginStateChange=function(o){return o({pluginStatus:Wr,pluginURL:Qs}),Rs.on("pluginStateChange",o),o},g.renderColorRamp=bd,g.rotateX=function(o,e,a){var f=Math.sin(a),v=Math.cos(a),w=e[4],M=e[5],O=e[6],L=e[7],X=e[8],te=e[9],ae=e[10],ge=e[11];return e!==o&&(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[4]=w*v+X*f,o[5]=M*v+te*f,o[6]=O*v+ae*f,o[7]=L*v+ge*f,o[8]=X*v-w*f,o[9]=te*v-M*f,o[10]=ae*v-O*f,o[11]=ge*v-L*f,o},g.rotateZ=function(o,e,a){var f=Math.sin(a),v=Math.cos(a),w=e[0],M=e[1],O=e[2],L=e[3],X=e[4],te=e[5],ae=e[6],ge=e[7];return e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[0]=w*v+X*f,o[1]=M*v+te*f,o[2]=O*v+ae*f,o[3]=L*v+ge*f,o[4]=X*v-w*f,o[5]=te*v-M*f,o[6]=ae*v-O*f,o[7]=ge*v-L*f,o},g.sameOrigin=ln,g.scale=function(o,e,a){var f=a[0],v=a[1],w=a[2];return o[0]=e[0]*f,o[1]=e[1]*f,o[2]=e[2]*f,o[3]=e[3]*f,o[4]=e[4]*v,o[5]=e[5]*v,o[6]=e[6]*v,o[7]=e[7]*v,o[8]=e[8]*w,o[9]=e[9]*w,o[10]=e[10]*w,o[11]=e[11]*w,o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o},g.setRTLTextPlugin=function(o,e,a=!1){if(Wr===Bl||Wr===Ja||Wr===ls)throw new Error("setRTLTextPlugin cannot be called multiple times.");Qs=Qt.resolveURL(o),Wr=Bl,zl=e,ea(),a||bl()},g.sphericalToCartesian=function([o,e,a]){return e+=90,e*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(e)*Math.sin(a),y:o*Math.sin(e)*Math.sin(a),z:o*Math.cos(a)}},g.toEvaluationFeature=Dl,g.transformMat4=Gl,g.translate=function(o,e,a){var f,v,w,M,O,L,X,te,ae,ge,ve,Ce,Ve=a[0],ze=a[1],ct=a[2];return e===o?(o[12]=e[0]*Ve+e[4]*ze+e[8]*ct+e[12],o[13]=e[1]*Ve+e[5]*ze+e[9]*ct+e[13],o[14]=e[2]*Ve+e[6]*ze+e[10]*ct+e[14],o[15]=e[3]*Ve+e[7]*ze+e[11]*ct+e[15]):(v=e[1],w=e[2],M=e[3],O=e[4],L=e[5],X=e[6],te=e[7],ae=e[8],ge=e[9],ve=e[10],Ce=e[11],o[0]=f=e[0],o[1]=v,o[2]=w,o[3]=M,o[4]=O,o[5]=L,o[6]=X,o[7]=te,o[8]=ae,o[9]=ge,o[10]=ve,o[11]=Ce,o[12]=f*Ve+O*ze+ae*ct+e[12],o[13]=v*Ve+L*ze+ge*ct+e[13],o[14]=w*Ve+X*ze+ve*ct+e[14],o[15]=M*Ve+te*ze+Ce*ct+e[15]),o},g.triggerPluginCompletionEvent=sc,g.unicodeBlockLookup=yn,g.uniqueId=function(){return wt++},g.v8Spec=ue,g.validateCustomStyleLayer=function(o){const e=[],a=o.id;return void 0===a&&e.push({message:`layers.${a}: missing required property "id"`}),void 0===o.render&&e.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&"2d"!==o.renderingMode&&"3d"!==o.renderingMode&&e.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),e},g.validateLight=Xr,g.validateStyle=Do,g.vectorTile=ol,g.warnOnce=Ne,g.wrap=je}),l(0,function(g){class He{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,re){for(const ke of $){this._layerConfigs[ke.id]=ke;const rt=this._layers[ke.id]=g.createStyleLayer(ke);rt._featureFilter=g.createFilter(rt.filter),this.keyCache[ke.id]&&delete this.keyCache[ke.id]}for(const ke of re)delete this.keyCache[ke],delete this._layerConfigs[ke],delete this._layers[ke];this.familiesBySource={};const _e=g.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const ke of _e){const rt=ke.map(Bt=>this._layers[Bt.id]),Ye=rt[0];if("none"===Ye.visibility)continue;const Xe=Ye.source||"";let Ke=this.familiesBySource[Xe];Ke||(Ke=this.familiesBySource[Xe]={});const at=Ye.sourceLayer||"_geojsonTileLayer";let Rt=Ke[at];Rt||(Rt=Ke[at]=[]),Rt.push(rt)}}}class he{constructor($){const re={},_e=[];for(const Xe in $){const Ke=$[Xe],at=re[Xe]={};for(const Rt in Ke){const Bt=Ke[+Rt];if(!Bt||0===Bt.bitmap.width||0===Bt.bitmap.height)continue;const xe={x:0,y:0,w:Bt.bitmap.width+2,h:Bt.bitmap.height+2};_e.push(xe),at[Rt]={rect:xe,metrics:Bt.metrics}}}const{w:ke,h:rt}=g.potpack(_e),Ye=new g.AlphaImage({width:ke||1,height:rt||1});for(const Xe in $){const Ke=$[Xe];for(const at in Ke){const Rt=Ke[+at];if(!Rt||0===Rt.bitmap.width||0===Rt.bitmap.height)continue;const Bt=re[Xe][at].rect;g.AlphaImage.copy(Rt.bitmap,Ye,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},Rt.bitmap)}}this.image=Ye,this.positions=re}}g.register("GlyphAtlas",he);class $e{constructor($){this.tileID=new g.OverscaledTileID($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId}parse($,re,_e,ke,rt){this.status="parsing",this.data=$,this.collisionBoxArray=new g.CollisionBoxArray;const Ye=new g.DictionaryCoder(Object.keys($.layers).sort()),Xe=new g.FeatureIndex(this.tileID,this.promoteId);Xe.bucketLayerIDs=[];const Ke={},at={featureIndex:Xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:_e},Rt=re.familiesBySource[this.source];for(const xn in Rt){const Jn=$.layers[xn];if(!Jn)continue;1===Jn.version&&g.warnOnce(`Vector tile source "${this.source}" layer "${xn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bi=Ye.encode(xn),Ln=[];for(let Si=0;Si<Jn.length;Si++){const Ui=Jn.feature(Si),Pr=Xe.getId(Ui,xn);Ln.push({feature:Ui,id:Pr,index:Si,sourceLayerIndex:Bi})}for(const Si of Rt[xn]){const Ui=Si[0];Ui.source!==this.source&&g.warnOnce(`layer.source = ${Ui.source} does not equal this.source = ${this.source}`),Ui.minzoom&&this.zoom<Math.floor(Ui.minzoom)||Ui.maxzoom&&this.zoom>=Ui.maxzoom||"none"!==Ui.visibility&&(Ie(Si,this.zoom,_e),(Ke[Ui.id]=Ui.createBucket({index:Xe.bucketLayerIDs.length,layers:Si,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bi,sourceID:this.source})).populate(Ln,at,this.tileID.canonical),Xe.bucketLayerIDs.push(Si.map(Pr=>Pr.id)))}}let Bt,xe,Pe,De;const Ze=g.mapObject(at.glyphDependencies,xn=>Object.keys(xn).map(Number));Object.keys(Ze).length?ke.send("getGlyphs",{uid:this.uid,stacks:Ze,source:this.source,tileID:this.tileID,type:"glyphs"},(xn,Jn)=>{Bt||(Bt=xn,xe=Jn,In.call(this))}):xe={};const _t=Object.keys(at.iconDependencies);_t.length?ke.send("getImages",{icons:_t,source:this.source,tileID:this.tileID,type:"icons"},(xn,Jn)=>{Bt||(Bt=xn,Pe=Jn,In.call(this))}):Pe={};const qt=Object.keys(at.patternDependencies);function In(){if(Bt)return rt(Bt);if(xe&&Pe&&De){const xn=new he(xe),Jn=new g.ImageAtlas(Pe,De);for(const Bi in Ke){const Ln=Ke[Bi];Ln instanceof g.SymbolBucket?(Ie(Ln.layers,this.zoom,_e),g.performSymbolLayout({bucket:Ln,glyphMap:xe,glyphPositions:xn.positions,imageMap:Pe,imagePositions:Jn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ln.hasPattern&&(Ln instanceof g.LineBucket||Ln instanceof g.FillBucket||Ln instanceof g.FillExtrusionBucket)&&(Ie(Ln.layers,this.zoom,_e),Ln.addFeatures(at,this.tileID.canonical,Jn.patternPositions))}this.status="done",rt(null,{buckets:Object.values(Ke).filter(Bi=>!Bi.isEmpty()),featureIndex:Xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xn.image,imageAtlas:Jn,glyphMap:this.returnDependencies?xe:null,iconMap:this.returnDependencies?Pe:null,glyphPositions:this.returnDependencies?xn.positions:null})}}qt.length?ke.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"patterns"},(xn,Jn)=>{Bt||(Bt=xn,De=Jn,In.call(this))}):De={},In.call(this)}}function Ie(J,$,re){const _e=new g.EvaluationParameters($);for(const ke of J)ke.recalculate(_e,re)}function Be(J,$){const re=g.getArrayBuffer(J.request,(_e,ke,rt,Ye)=>{_e?$(_e):ke&&$(null,{vectorTile:new g.vectorTile.VectorTile(new g.Protobuf(ke)),rawData:ke,cacheControl:rt,expires:Ye})});return()=>{re.cancel(),$()}}class Ue{constructor($,re,_e,ke){this.actor=$,this.layerIndex=re,this.availableImages=_e,this.loadVectorData=ke||Be,this.loading={},this.loaded={}}loadTile($,re){const _e=$.uid;this.loading||(this.loading={});const ke=!!($&&$.request&&$.request.collectResourceTiming)&&new g.RequestPerformance($.request),rt=this.loading[_e]=new $e($);rt.abort=this.loadVectorData($,(Ye,Xe)=>{if(delete this.loading[_e],Ye||!Xe)return rt.status="done",this.loaded[_e]=rt,re(Ye);const Ke=Xe.rawData,at={};Xe.expires&&(at.expires=Xe.expires),Xe.cacheControl&&(at.cacheControl=Xe.cacheControl);const Rt={};if(ke){const Bt=ke.finish();Bt&&(Rt.resourceTiming=JSON.parse(JSON.stringify(Bt)))}rt.vectorTile=Xe.vectorTile,rt.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Bt,xe)=>{if(Bt||!xe)return re(Bt);re(null,g.extend({rawTileData:Ke.slice(0)},xe,at,Rt))}),this.loaded=this.loaded||{},this.loaded[_e]=rt})}reloadTile($,re){const _e=this.loaded,ke=$.uid,rt=this;if(_e&&_e[ke]){const Ye=_e[ke];Ye.showCollisionBoxes=$.showCollisionBoxes;const Xe=(Ke,at)=>{const Rt=Ye.reloadCallback;Rt&&(delete Ye.reloadCallback,Ye.parse(Ye.vectorTile,rt.layerIndex,this.availableImages,rt.actor,Rt)),re(Ke,at)};"parsing"===Ye.status?Ye.reloadCallback=Xe:"done"===Ye.status&&(Ye.vectorTile?Ye.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,Xe):Xe())}}abortTile($,re){const _e=this.loading,ke=$.uid;_e&&_e[ke]&&_e[ke].abort&&(_e[ke].abort(),delete _e[ke]),re()}removeTile($,re){const _e=this.loaded,ke=$.uid;_e&&_e[ke]&&delete _e[ke],re()}}class nt{constructor(){this.loaded={}}loadTile($,re){const{uid:_e,encoding:ke,rawImageData:rt}=$,Ye=g.isImageBitmap(rt)?this.getImageData(rt):rt,Xe=new g.DEMData(_e,Ye,ke);this.loaded=this.loaded||{},this.loaded[_e]=Xe,re(null,Xe)}getImageData($){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas($.width,$.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=$.width,this.offscreenCanvas.height=$.height,this.offscreenCanvasContext.drawImage($,0,0,$.width,$.height);const re=this.offscreenCanvasContext.getImageData(-1,-1,$.width+2,$.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new g.RGBAImage({width:re.width,height:re.height},re.data)}removeTile($){const re=this.loaded,_e=$.uid;re&&re[_e]&&delete re[_e]}}function Re(J,$){if(0!==J.length){it(J[0],$);for(var re=1;re<J.length;re++)it(J[re],!$)}}function it(J,$){for(var re=0,_e=0,ke=0,rt=J.length,Ye=rt-1;ke<rt;Ye=ke++){var Xe=(J[ke][0]-J[Ye][0])*(J[Ye][1]+J[ke][1]),Ke=re+Xe;_e+=Math.abs(re)>=Math.abs(Xe)?re-Ke+Xe:Xe-Ke+re,re=Ke}re+_e>=0!=!!$&&J.reverse()}var We=g.getDefaultExportFromCjs(function J($,re){var _e,ke=$&&$.type;if("FeatureCollection"===ke)for(_e=0;_e<$.features.length;_e++)J($.features[_e],re);else if("GeometryCollection"===ke)for(_e=0;_e<$.geometries.length;_e++)J($.geometries[_e],re);else if("Feature"===ke)J($.geometry,re);else if("Polygon"===ke)Re($.coordinates,re);else if("MultiPolygon"===ke)for(_e=0;_e<$.coordinates.length;_e++)Re($.coordinates[_e],re);return $});const je=g.vectorTile.VectorTileFeature.prototype.toGeoJSON;var Ct={exports:{}},wt=g.pointGeometry,Tt=g.vectorTile.VectorTileFeature,an=Xt;function Xt(J,$){this.options=$||{},this.features=J,this.length=J.length}function Dt(J,$){this.id="number"==typeof J.id?J.id:void 0,this.type=J.type,this.rawGeometry=1===J.type?[J.geometry]:J.geometry,this.properties=J.tags,this.extent=$||4096}Xt.prototype.feature=function(J){return new Dt(this.features[J],this.options.extent)},Dt.prototype.loadGeometry=function(){var J=this.rawGeometry;this.geometry=[];for(var $=0;$<J.length;$++){for(var re=J[$],_e=[],ke=0;ke<re.length;ke++)_e.push(new wt(re[ke][0],re[ke][1]));this.geometry.push(_e)}return this.geometry},Dt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var J=this.geometry,$=1/0,re=-1/0,_e=1/0,ke=-1/0,rt=0;rt<J.length;rt++)for(var Ye=J[rt],Xe=0;Xe<Ye.length;Xe++){var Ke=Ye[Xe];$=Math.min($,Ke.x),re=Math.max(re,Ke.x),_e=Math.min(_e,Ke.y),ke=Math.max(ke,Ke.y)}return[$,_e,re,ke]},Dt.prototype.toGeoJSON=Tt.prototype.toGeoJSON;var Oe=g.pbf,Ne=an;function Ot(J){var $=new Oe;return function(re,_e){for(var ke in re.layers)_e.writeMessage(3,kt,re.layers[ke])}(J,$),$.finish()}function kt(J,$){var re;$.writeVarintField(15,J.version||1),$.writeStringField(1,J.name||""),$.writeVarintField(5,J.extent||4096);var _e={keys:[],values:[],keycache:{},valuecache:{}};for(re=0;re<J.length;re++)_e.feature=J.feature(re),$.writeMessage(2,Ft,_e);var ke=_e.keys;for(re=0;re<ke.length;re++)$.writeStringField(3,ke[re]);var rt=_e.values;for(re=0;re<rt.length;re++)$.writeMessage(4,Et,rt[re])}function Ft(J,$){var re=J.feature;void 0!==re.id&&$.writeVarintField(1,re.id),$.writeMessage(2,Gt,J),$.writeVarintField(3,re.type),$.writeMessage(4,St,re)}function Gt(J,$){var re=J.feature,_e=J.keys,ke=J.values,rt=J.keycache,Ye=J.valuecache;for(var Xe in re.properties){var Ke=re.properties[Xe],at=rt[Xe];if(null!==Ke){void 0===at&&(_e.push(Xe),rt[Xe]=at=_e.length-1),$.writeVarint(at);var Rt=typeof Ke;"string"!==Rt&&"boolean"!==Rt&&"number"!==Rt&&(Ke=JSON.stringify(Ke));var Bt=Rt+":"+Ke,xe=Ye[Bt];void 0===xe&&(ke.push(Ke),Ye[Bt]=xe=ke.length-1),$.writeVarint(xe)}}}function lt(J,$){return($<<3)+(7&J)}function dt(J){return J<<1^J>>31}function St(J,$){for(var re=J.loadGeometry(),_e=J.type,ke=0,rt=0,Ye=re.length,Xe=0;Xe<Ye;Xe++){var Ke=re[Xe],at=1;1===_e&&(at=Ke.length),$.writeVarint(lt(1,at));for(var Rt=3===_e?Ke.length-1:Ke.length,Bt=0;Bt<Rt;Bt++){1===Bt&&1!==_e&&$.writeVarint(lt(2,Rt-1));var xe=Ke[Bt].x-ke,Pe=Ke[Bt].y-rt;$.writeVarint(dt(xe)),$.writeVarint(dt(Pe)),ke+=xe,rt+=Pe}3===_e&&$.writeVarint(lt(7,1))}}function Et(J,$){var re=typeof J;"string"===re?$.writeStringField(1,J):"boolean"===re?$.writeBooleanField(7,J):"number"===re&&(J%1!=0?$.writeDoubleField(3,J):J<0?$.writeSVarintField(6,J):$.writeVarintField(5,J))}Ct.exports=Ot,Ct.exports.fromVectorTileJs=Ot,Ct.exports.fromGeojsonVt=function(J,$){$=$||{};var re={};for(var _e in J)re[_e]=new Ne(J[_e].features,$),re[_e].name=_e,re[_e].version=$.version,re[_e].extent=$.extent;return Ot({layers:re})},Ct.exports.GeoJSONWrapper=Ne;var tn=g.getDefaultExportFromCjs(Ct.exports);const Qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:J=>J},On=Math.fround||(Xn=new Float32Array(1),J=>(Xn[0]=+J,Xn[0]));var Xn;class mi{constructor($){this.options=At(Object.create(Qt),$),this.trees=new Array(this.options.maxZoom+1)}load($){const{log:re,minZoom:_e,maxZoom:ke,nodeSize:rt}=this.options;re&&console.time("total time");const Ye=`prepare ${$.length} points`;re&&console.time(Ye),this.points=$;let Xe=[];for(let Ke=0;Ke<$.length;Ke++)$[Ke].geometry&&Xe.push(gi($[Ke],Ke));this.trees[ke+1]=new g.KDBush(Xe,en,sn,rt,Float32Array),re&&console.timeEnd(Ye);for(let Ke=ke;Ke>=_e;Ke--){const at=+Date.now();Xe=this._cluster(Xe,Ke),this.trees[Ke]=new g.KDBush(Xe,en,sn,rt,Float32Array),re&&console.log("z%d: %d clusters in %dms",Ke,Xe.length,+Date.now()-at)}return re&&console.timeEnd("total time"),this}getClusters($,re){let _e=(($[0]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,$[1]));let rt=180===$[2]?180:(($[2]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)_e=-180,rt=180;else if(_e>rt){const Rt=this.getClusters([_e,ke,180,Ye],re),Bt=this.getClusters([-180,ke,rt,Ye],re);return Rt.concat(Bt)}const Xe=this.trees[this._limitZoom(re)],Ke=Xe.range(ln(_e),hn(Ye),ln(rt),hn(ke)),at=[];for(const Rt of Ke){const Bt=Xe.points[Rt];at.push(Bt.numPoints?Qn(Bt):this.points[Bt.index])}return at}getChildren($){const re=this._getOriginId($),_e=this._getOriginZoom($),ke="No cluster with the specified id.",rt=this.trees[_e];if(!rt)throw new Error(ke);const Ye=rt.points[re];if(!Ye)throw new Error(ke);const Xe=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),Ke=rt.within(Ye.x,Ye.y,Xe),at=[];for(const Rt of Ke){const Bt=rt.points[Rt];Bt.parentId===$&&at.push(Bt.numPoints?Qn(Bt):this.points[Bt.index])}if(0===at.length)throw new Error(ke);return at}getLeaves($,re,_e){const ke=[];return this._appendLeaves(ke,$,re=re||10,_e=_e||0,0),ke}getTile($,re,_e){const ke=this.trees[this._limitZoom($)],rt=Math.pow(2,$),{extent:Ye,radius:Xe}=this.options,Ke=Xe/Ye,at=(_e-Ke)/rt,Rt=(_e+1+Ke)/rt,Bt={features:[]};return this._addTileFeatures(ke.range((re-Ke)/rt,at,(re+1+Ke)/rt,Rt),ke.points,re,_e,rt,Bt),0===re&&this._addTileFeatures(ke.range(1-Ke/rt,at,1,Rt),ke.points,rt,_e,rt,Bt),re===rt-1&&this._addTileFeatures(ke.range(0,at,Ke/rt,Rt),ke.points,-1,_e,rt,Bt),Bt.features.length?Bt:null}getClusterExpansionZoom($){let re=this._getOriginZoom($)-1;for(;re<=this.options.maxZoom;){const _e=this.getChildren($);if(re++,1!==_e.length)break;$=_e[0].properties.cluster_id}return re}_appendLeaves($,re,_e,ke,rt){const Ye=this.getChildren(re);for(const Xe of Ye){const Ke=Xe.properties;if(Ke&&Ke.cluster?rt+Ke.point_count<=ke?rt+=Ke.point_count:rt=this._appendLeaves($,Ke.cluster_id,_e,ke,rt):rt<ke?rt++:$.push(Xe),$.length===_e)break}return rt}_addTileFeatures($,re,_e,ke,rt,Ye){for(const Xe of $){const Ke=re[Xe],at=Ke.numPoints;let Rt,Bt,xe;if(at)Rt=di(Ke),Bt=Ke.x,xe=Ke.y;else{const Ze=this.points[Ke.index];Rt=Ze.properties,Bt=ln(Ze.geometry.coordinates[0]),xe=hn(Ze.geometry.coordinates[1])}const Pe={type:1,geometry:[[Math.round(this.options.extent*(Bt*rt-_e)),Math.round(this.options.extent*(xe*rt-ke))]],tags:Rt};let De;at?De=Ke.id:this.options.generateId?De=Ke.index:this.points[Ke.index].id&&(De=this.points[Ke.index].id),void 0!==De&&(Pe.id=De),Ye.features.push(Pe)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,re){const _e=[],{radius:ke,extent:rt,reduce:Ye,minPoints:Xe}=this.options,Ke=ke/(rt*Math.pow(2,re));for(let at=0;at<$.length;at++){const Rt=$[at];if(Rt.zoom<=re)continue;Rt.zoom=re;const Bt=this.trees[re+1],xe=Bt.within(Rt.x,Rt.y,Ke),Pe=Rt.numPoints||1;let De=Pe;for(const Ze of xe){const _t=Bt.points[Ze];_t.zoom>re&&(De+=_t.numPoints||1)}if(De>Pe&&De>=Xe){let Ze=Rt.x*Pe,_t=Rt.y*Pe,qt=Ye&&Pe>1?this._map(Rt,!0):null;const In=(at<<5)+(re+1)+this.points.length;for(const xn of xe){const Jn=Bt.points[xn];if(Jn.zoom<=re)continue;Jn.zoom=re;const Bi=Jn.numPoints||1;Ze+=Jn.x*Bi,_t+=Jn.y*Bi,Jn.parentId=In,Ye&&(qt||(qt=this._map(Rt,!0)),Ye(qt,this._map(Jn)))}Rt.parentId=In,_e.push(nn(Ze/De,_t/De,In,De,qt))}else if(_e.push(Rt),De>1)for(const Ze of xe){const _t=Bt.points[Ze];_t.zoom<=re||(_t.zoom=re,_e.push(_t))}}return _e}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,re){if($.numPoints)return re?At({},$.properties):$.properties;const _e=this.points[$.index].properties,ke=this.options.map(_e);return re&&ke===_e?At({},ke):ke}}function nn(J,$,re,_e,ke){return{x:On(J),y:On($),zoom:1/0,id:re,parentId:-1,numPoints:_e,properties:ke}}function gi(J,$){const[re,_e]=J.geometry.coordinates;return{x:On(ln(re)),y:On(hn(_e)),zoom:1/0,index:$,parentId:-1}}function Qn(J){return{type:"Feature",id:J.id,properties:di(J),geometry:{type:"Point",coordinates:[($=J.x,360*($-.5)),gt(J.y)]}};var $}function di(J){const $=J.numPoints,re=$>=1e4?`${Math.round($/1e3)}k`:$>=1e3?Math.round($/100)/10+"k":$;return At(At({},J.properties),{cluster:!0,cluster_id:J.id,point_count:$,point_count_abbreviated:re})}function ln(J){return J/360+.5}function hn(J){const $=Math.sin(J*Math.PI/180),re=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return re<0?0:re>1?1:re}function gt(J){const $=(180-360*J)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function At(J,$){for(const re in $)J[re]=$[re];return J}function en(J){return J.x}function sn(J){return J.y}function bn(J,$,re,_e){for(var ke,rt=_e,Ye=re-$>>1,Xe=re-$,Ke=J[$],at=J[$+1],Rt=J[re],Bt=J[re+1],xe=$+3;xe<re;xe+=3){var Pe=Un(J[xe],J[xe+1],Ke,at,Rt,Bt);if(Pe>rt)ke=xe,rt=Pe;else if(Pe===rt){var De=Math.abs(xe-Ye);De<Xe&&(ke=xe,Xe=De)}}rt>_e&&(ke-$>3&&bn(J,$,ke,_e),J[ke+2]=rt,re-ke>3&&bn(J,ke,re,_e))}function Un(J,$,re,_e,ke,rt){var Ye=ke-re,Xe=rt-_e;if(0!==Ye||0!==Xe){var Ke=((J-re)*Ye+($-_e)*Xe)/(Ye*Ye+Xe*Xe);Ke>1?(re=ke,_e=rt):Ke>0&&(re+=Ye*Ke,_e+=Xe*Ke)}return(Ye=J-re)*Ye+(Xe=$-_e)*Xe}function Kn(J,$,re,_e){var ke={id:void 0===J?null:J,type:$,geometry:re,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(rt){var Ye=rt.geometry,Xe=rt.type;if("Point"===Xe||"MultiPoint"===Xe||"LineString"===Xe)hi(rt,Ye);else if("Polygon"===Xe||"MultiLineString"===Xe)for(var Ke=0;Ke<Ye.length;Ke++)hi(rt,Ye[Ke]);else if("MultiPolygon"===Xe)for(Ke=0;Ke<Ye.length;Ke++)for(var at=0;at<Ye[Ke].length;at++)hi(rt,Ye[Ke][at])}(ke),ke}function hi(J,$){for(var re=0;re<$.length;re+=3)J.minX=Math.min(J.minX,$[re]),J.minY=Math.min(J.minY,$[re+1]),J.maxX=Math.max(J.maxX,$[re]),J.maxY=Math.max(J.maxY,$[re+1])}function Fi(J,$,re,_e){if($.geometry){var ke=$.geometry.coordinates,rt=$.geometry.type,Ye=Math.pow(re.tolerance/((1<<re.maxZoom)*re.extent),2),Xe=[],Ke=$.id;if(re.promoteId?Ke=$.properties[re.promoteId]:re.generateId&&(Ke=_e||0),"Point"===rt)Oi(ke,Xe);else if("MultiPoint"===rt)for(var at=0;at<ke.length;at++)Oi(ke[at],Xe);else if("LineString"===rt)yi(ke,Xe,Ye,!1);else if("MultiLineString"===rt){if(re.lineMetrics){for(at=0;at<ke.length;at++)yi(ke[at],Xe=[],Ye,!1),J.push(Kn(Ke,"LineString",Xe,$.properties));return}un(ke,Xe,Ye,!1)}else if("Polygon"===rt)un(ke,Xe,Ye,!0);else{if("MultiPolygon"!==rt){if("GeometryCollection"===rt){for(at=0;at<$.geometry.geometries.length;at++)Fi(J,{id:Ke,geometry:$.geometry.geometries[at],properties:$.properties},re,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(at=0;at<ke.length;at++){var Rt=[];un(ke[at],Rt,Ye,!0),Xe.push(Rt)}}J.push(Kn(Ke,rt,Xe,$.properties))}}function Oi(J,$){$.push(Nn(J[0])),$.push(tt(J[1])),$.push(0)}function yi(J,$,re,_e){for(var ke,rt,Ye=0,Xe=0;Xe<J.length;Xe++){var Ke=Nn(J[Xe][0]),at=tt(J[Xe][1]);$.push(Ke),$.push(at),$.push(0),Xe>0&&(Ye+=_e?(ke*at-Ke*rt)/2:Math.sqrt(Math.pow(Ke-ke,2)+Math.pow(at-rt,2))),ke=Ke,rt=at}var Rt=$.length-3;$[2]=1,bn($,0,Rt,re),$[Rt+2]=1,$.size=Math.abs(Ye),$.start=0,$.end=$.size}function un(J,$,re,_e){for(var ke=0;ke<J.length;ke++){var rt=[];yi(J[ke],rt,re,_e),$.push(rt)}}function Nn(J){return J/360+.5}function tt(J){var $=Math.sin(J*Math.PI/180),re=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return re<0?0:re>1?1:re}function Y(J,$,re,_e,ke,rt,Ye,Xe){if(_e/=$,rt>=(re/=$)&&Ye<_e)return J;if(Ye<re||rt>=_e)return null;for(var Ke=[],at=0;at<J.length;at++){var Rt=J[at],Bt=Rt.geometry,xe=Rt.type,Pe=0===ke?Rt.minX:Rt.minY,De=0===ke?Rt.maxX:Rt.maxY;if(Pe>=re&&De<_e)Ke.push(Rt);else if(!(De<re||Pe>=_e)){var Ze=[];if("Point"===xe||"MultiPoint"===xe)ee(Bt,Ze,re,_e,ke);else if("LineString"===xe)Me(Bt,Ze,re,_e,ke,!1,Xe.lineMetrics);else if("MultiLineString"===xe)ue(Bt,Ze,re,_e,ke,!1);else if("Polygon"===xe)ue(Bt,Ze,re,_e,ke,!0);else if("MultiPolygon"===xe)for(var _t=0;_t<Bt.length;_t++){var qt=[];ue(Bt[_t],qt,re,_e,ke,!0),qt.length&&Ze.push(qt)}if(Ze.length){if(Xe.lineMetrics&&"LineString"===xe){for(_t=0;_t<Ze.length;_t++)Ke.push(Kn(Rt.id,xe,Ze[_t],Rt.tags));continue}"LineString"!==xe&&"MultiLineString"!==xe||(1===Ze.length?(xe="LineString",Ze=Ze[0]):xe="MultiLineString"),"Point"!==xe&&"MultiPoint"!==xe||(xe=3===Ze.length?"Point":"MultiPoint"),Ke.push(Kn(Rt.id,xe,Ze,Rt.tags))}}}return Ke.length?Ke:null}function ee(J,$,re,_e,ke){for(var rt=0;rt<J.length;rt+=3){var Ye=J[rt+ke];Ye>=re&&Ye<=_e&&($.push(J[rt]),$.push(J[rt+1]),$.push(J[rt+2]))}}function Me(J,$,re,_e,ke,rt,Ye){for(var Xe,Ke,at=Je(J),Rt=0===ke?le:de,Bt=J.start,xe=0;xe<J.length-3;xe+=3){var Pe=J[xe],De=J[xe+1],Ze=J[xe+2],_t=J[xe+3],qt=J[xe+4],In=0===ke?Pe:De,xn=0===ke?_t:qt,Jn=!1;Ye&&(Xe=Math.sqrt(Math.pow(Pe-_t,2)+Math.pow(De-qt,2))),In<re?xn>re&&(Ke=Rt(at,Pe,De,_t,qt,re),Ye&&(at.start=Bt+Xe*Ke)):In>_e?xn<_e&&(Ke=Rt(at,Pe,De,_t,qt,_e),Ye&&(at.start=Bt+Xe*Ke)):fe(at,Pe,De,Ze),xn<re&&In>=re&&(Ke=Rt(at,Pe,De,_t,qt,re),Jn=!0),xn>_e&&In<=_e&&(Ke=Rt(at,Pe,De,_t,qt,_e),Jn=!0),!rt&&Jn&&(Ye&&(at.end=Bt+Xe*Ke),$.push(at),at=Je(J)),Ye&&(Bt+=Xe)}var Bi=J.length-3;Pe=J[Bi],De=J[Bi+1],Ze=J[Bi+2],(In=0===ke?Pe:De)>=re&&In<=_e&&fe(at,Pe,De,Ze),Bi=at.length-3,rt&&Bi>=3&&(at[Bi]!==at[0]||at[Bi+1]!==at[1])&&fe(at,at[0],at[1],at[2]),at.length&&$.push(at)}function Je(J){var $=[];return $.size=J.size,$.start=J.start,$.end=J.end,$}function ue(J,$,re,_e,ke,rt){for(var Ye=0;Ye<J.length;Ye++)Me(J[Ye],$,re,_e,ke,rt,!1)}function fe(J,$,re,_e){J.push($),J.push(re),J.push(_e)}function le(J,$,re,_e,ke,rt){var Ye=(rt-$)/(_e-$);return J.push(rt),J.push(re+(ke-re)*Ye),J.push(1),Ye}function de(J,$,re,_e,ke,rt){var Ye=(rt-re)/(ke-re);return J.push($+(_e-$)*Ye),J.push(rt),J.push(1),Ye}function Ae(J,$){for(var re=[],_e=0;_e<J.length;_e++){var ke,rt=J[_e],Ye=rt.type;if("Point"===Ye||"MultiPoint"===Ye||"LineString"===Ye)ke=ut(rt.geometry,$);else if("MultiLineString"===Ye||"Polygon"===Ye){ke=[];for(var Xe=0;Xe<rt.geometry.length;Xe++)ke.push(ut(rt.geometry[Xe],$))}else if("MultiPolygon"===Ye)for(ke=[],Xe=0;Xe<rt.geometry.length;Xe++){for(var Ke=[],at=0;at<rt.geometry[Xe].length;at++)Ke.push(ut(rt.geometry[Xe][at],$));ke.push(Ke)}re.push(Kn(rt.id,Ye,ke,rt.tags))}return re}function ut(J,$){var re=[];re.size=J.size,void 0!==J.start&&(re.start=J.start,re.end=J.end);for(var _e=0;_e<J.length;_e+=3)re.push(J[_e]+$,J[_e+1],J[_e+2]);return re}function mt(J,$){if(J.transformed)return J;var re,_e,ke,rt=1<<J.z,Ye=J.x,Xe=J.y;for(re=0;re<J.features.length;re++){var Ke=J.features[re],at=Ke.geometry,Rt=Ke.type;if(Ke.geometry=[],1===Rt)for(_e=0;_e<at.length;_e+=2)Ke.geometry.push(dn(at[_e],at[_e+1],$,rt,Ye,Xe));else for(_e=0;_e<at.length;_e++){var Bt=[];for(ke=0;ke<at[_e].length;ke+=2)Bt.push(dn(at[_e][ke],at[_e][ke+1],$,rt,Ye,Xe));Ke.geometry.push(Bt)}}return J.transformed=!0,J}function dn(J,$,re,_e,ke,rt){return[Math.round(re*(J*_e-ke)),Math.round(re*($*_e-rt))]}function Vt(J,$,re,_e,ke){for(var rt=$===ke.maxZoom?0:ke.tolerance/((1<<$)*ke.extent),Ye={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:re,y:_e,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xe=0;Xe<J.length;Xe++){Ye.numFeatures++,mn(Ye,J[Xe],rt,ke);var Ke=J[Xe].minX,at=J[Xe].minY,Rt=J[Xe].maxX,Bt=J[Xe].maxY;Ke<Ye.minX&&(Ye.minX=Ke),at<Ye.minY&&(Ye.minY=at),Rt>Ye.maxX&&(Ye.maxX=Rt),Bt>Ye.maxY&&(Ye.maxY=Bt)}return Ye}function mn(J,$,re,_e){var ke=$.geometry,rt=$.type,Ye=[];if("Point"===rt||"MultiPoint"===rt)for(var Xe=0;Xe<ke.length;Xe+=3)Ye.push(ke[Xe]),Ye.push(ke[Xe+1]),J.numPoints++,J.numSimplified++;else if("LineString"===rt)fn(Ye,ke,J,re,!1,!1);else if("MultiLineString"===rt||"Polygon"===rt)for(Xe=0;Xe<ke.length;Xe++)fn(Ye,ke[Xe],J,re,"Polygon"===rt,0===Xe);else if("MultiPolygon"===rt)for(var Ke=0;Ke<ke.length;Ke++){var at=ke[Ke];for(Xe=0;Xe<at.length;Xe++)fn(Ye,at[Xe],J,re,!0,0===Xe)}if(Ye.length){var Rt=$.tags||null;if("LineString"===rt&&_e.lineMetrics){for(var Bt in Rt={},$.tags)Rt[Bt]=$.tags[Bt];Rt.mapbox_clip_start=ke.start/ke.size,Rt.mapbox_clip_end=ke.end/ke.size}var xe={geometry:Ye,type:"Polygon"===rt||"MultiPolygon"===rt?3:"LineString"===rt||"MultiLineString"===rt?2:1,tags:Rt};null!==$.id&&(xe.id=$.id),J.features.push(xe)}}function fn(J,$,re,_e,ke,rt){var Ye=_e*_e;if(_e>0&&$.size<(ke?Ye:_e))re.numPoints+=$.length/3;else{for(var Xe=[],Ke=0;Ke<$.length;Ke+=3)(0===_e||$[Ke+2]>Ye)&&(re.numSimplified++,Xe.push($[Ke]),Xe.push($[Ke+1])),re.numPoints++;ke&&function(at,Rt){for(var Bt=0,xe=0,Pe=at.length,De=Pe-2;xe<Pe;De=xe,xe+=2)Bt+=(at[xe]-at[De])*(at[xe+1]+at[De+1]);if(Bt>0===Rt)for(xe=0,Pe=at.length;xe<Pe/2;xe+=2){var Ze=at[xe],_t=at[xe+1];at[xe]=at[Pe-2-xe],at[xe+1]=at[Pe-1-xe],at[Pe-2-xe]=Ze,at[Pe-1-xe]=_t}}(Xe,rt),J.push(Xe)}}function Vi(J,$){var re=($=this.options=function(ke,rt){for(var Ye in rt)ke[Ye]=rt[Ye];return ke}(Object.create(this.options),$)).debug;if(re&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");var ke,rt,Ye,Xe,Ke,at,_e=function(ke,rt){var Ye=[];if("FeatureCollection"===ke.type)for(var Xe=0;Xe<ke.features.length;Xe++)Fi(Ye,ke.features[Xe],rt,Xe);else Fi(Ye,"Feature"===ke.type?ke:{geometry:ke},rt);return Ye}(J,$);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Xe=ke=_e,Ke=Y(ke,1,-1-(Ye=(rt=$).buffer/rt.extent),Ye,0,-1,2,rt),at=Y(ke,1,1-Ye,2+Ye,0,-1,2,rt),(Ke||at)&&(Xe=Y(ke,1,-Ye,1+Ye,0,-1,2,rt)||[],Ke&&(Xe=Ae(Ke,1).concat(Xe)),at&&(Xe=Xe.concat(Ae(at,-1)))),(_e=Xe).length&&this.splitTile(_e,0,0,0),re&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Nt(J,$,re){return 32*((1<<J)*re+$)+J}function bt(J,$){return $?J.properties[$]:J.id}function et(J,$){if(null==J)return!0;if("Feature"===J.type)return null!=bt(J,$);if("FeatureCollection"===J.type){const re=new Set;for(const _e of J.features){const ke=bt(_e,$);if(null==ke||re.has(ke))return!1;re.add(ke)}return!0}return!1}function ot(J,$){const re=new Map;if(null!=J)if("Feature"===J.type)re.set(bt(J,$),J);else for(const _e of J.features)re.set(bt(_e,$),_e);return re}function Fe(J,$){const re=J.tileID.canonical;if(!this._geoJSONIndex)return $(null,null);const _e=this._geoJSONIndex.getTile(re.z,re.x,re.y);if(!_e)return $(null,null);const ke=new class{constructor(Ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.EXTENT,this.length=Ye.length,this._features=Ye}feature(Ye){return new class{constructor(Xe){this._feature=Xe,this.extent=g.EXTENT,this.type=Xe.type,this.properties=Xe.tags,"id"in Xe&&!isNaN(Xe.id)&&(this.id=parseInt(Xe.id,10))}loadGeometry(){if(1===this._feature.type){const Xe=[];for(const Ke of this._feature.geometry)Xe.push([new g.Point(Ke[0],Ke[1])]);return Xe}{const Xe=[];for(const Ke of this._feature.geometry){const at=[];for(const Rt of Ke)at.push(new g.Point(Rt[0],Rt[1]));Xe.push(at)}return Xe}}toGeoJSON(Xe,Ke,at){return je.call(this,Xe,Ke,at)}}(this._features[Ye])}}(_e.features);let rt=tn(ke);0===rt.byteOffset&&rt.byteLength===rt.buffer.byteLength||(rt=new Uint8Array(rt)),$(null,{vectorTile:ke,rawData:rt.buffer})}Vi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Vi.prototype.splitTile=function(J,$,re,_e,ke,rt,Ye){for(var Xe=[J,$,re,_e],Ke=this.options,at=Ke.debug;Xe.length;){_e=Xe.pop(),re=Xe.pop(),$=Xe.pop(),J=Xe.pop();var Rt=1<<$,Bt=Nt($,re,_e),xe=this.tiles[Bt];if(!xe&&(at>1&&console.time("creation"),xe=this.tiles[Bt]=Vt(J,$,re,_e,Ke),this.tileCoords.push({z:$,x:re,y:_e}),at)){at>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,re,_e,xe.numFeatures,xe.numPoints,xe.numSimplified),console.timeEnd("creation"));var Pe="z"+$;this.stats[Pe]=(this.stats[Pe]||0)+1,this.total++}if(xe.source=J,ke){if($===Ke.maxZoom||$===ke)continue;var De=1<<ke-$;if(re!==Math.floor(rt/De)||_e!==Math.floor(Ye/De))continue}else if($===Ke.indexMaxZoom||xe.numPoints<=Ke.indexMaxPoints)continue;if(xe.source=null,0!==J.length){at>1&&console.time("clipping");var Ze,_t,qt,In,xn,Jn,Bi=.5*Ke.buffer/Ke.extent,Ln=.5-Bi,Si=.5+Bi,Ui=1+Bi;Ze=_t=qt=In=null,xn=Y(J,Rt,re-Bi,re+Si,0,xe.minX,xe.maxX,Ke),Jn=Y(J,Rt,re+Ln,re+Ui,0,xe.minX,xe.maxX,Ke),J=null,xn&&(Ze=Y(xn,Rt,_e-Bi,_e+Si,1,xe.minY,xe.maxY,Ke),_t=Y(xn,Rt,_e+Ln,_e+Ui,1,xe.minY,xe.maxY,Ke),xn=null),Jn&&(qt=Y(Jn,Rt,_e-Bi,_e+Si,1,xe.minY,xe.maxY,Ke),In=Y(Jn,Rt,_e+Ln,_e+Ui,1,xe.minY,xe.maxY,Ke),Jn=null),at>1&&console.timeEnd("clipping"),Xe.push(Ze||[],$+1,2*re,2*_e),Xe.push(_t||[],$+1,2*re,2*_e+1),Xe.push(qt||[],$+1,2*re+1,2*_e),Xe.push(In||[],$+1,2*re+1,2*_e+1)}}},Vi.prototype.getTile=function(J,$,re){var _e=this.options,ke=_e.extent,rt=_e.debug;if(J<0||J>24)return null;var Ye=1<<J,Xe=Nt(J,$=($%Ye+Ye)%Ye,re);if(this.tiles[Xe])return mt(this.tiles[Xe],ke);rt>1&&console.log("drilling down to z%d-%d-%d",J,$,re);for(var Ke,at=J,Rt=$,Bt=re;!Ke&&at>0;)at--,Rt=Math.floor(Rt/2),Bt=Math.floor(Bt/2),Ke=this.tiles[Nt(at,Rt,Bt)];return Ke&&Ke.source?(rt>1&&console.log("found parent tile z%d-%d-%d",at,Rt,Bt),rt>1&&console.time("drilling down"),this.splitTile(Ke.source,at,Rt,Bt,J,$,re),rt>1&&console.timeEnd("drilling down"),this.tiles[Xe]?mt(this.tiles[Xe],ke):null):null};class Se extends Ue{constructor($,re,_e,ke){super($,re,_e,Fe),this._dataUpdateable=new Map,this.loadGeoJSON=(rt,Ye)=>{const{promoteId:Xe}=rt;if(rt.request)return g.getJSON(rt.request,(Ke,at,Rt,Bt)=>{this._dataUpdateable=et(at,Xe)?ot(at,Xe):void 0,Ye(Ke,at,Rt,Bt)});if("string"==typeof rt.data)try{const Ke=JSON.parse(rt.data);this._dataUpdateable=et(Ke,Xe)?ot(Ke,Xe):void 0,Ye(null,Ke)}catch{Ye(new Error(`Input data given to '${rt.source}' is not a valid GeoJSON object.`))}else rt.dataDiff?this._dataUpdateable?(function(Ke,at,Rt){var Bt,xe,Pe,De;if(at.removeAll&&Ke.clear(),at.remove)for(const Ze of at.remove)Ke.delete(Ze);if(at.add)for(const Ze of at.add){const _t=bt(Ze,Rt);null!=_t&&Ke.set(_t,Ze)}if(at.update)for(const Ze of at.update){let _t=Ke.get(Ze.id);if(null==_t)continue;const qt=!Ze.removeAllProperties&&((null===(Bt=Ze.removeProperties)||void 0===Bt?void 0:Bt.length)>0||(null===(xe=Ze.addOrUpdateProperties)||void 0===xe?void 0:xe.length)>0);if((Ze.newGeometry||Ze.removeAllProperties||qt)&&(_t={..._t},Ke.set(Ze.id,_t),qt&&(_t.properties={..._t.properties})),Ze.newGeometry&&(_t.geometry=Ze.newGeometry),Ze.removeAllProperties)_t.properties={};else if((null===(Pe=Ze.removeProperties)||void 0===Pe?void 0:Pe.length)>0)for(const In of Ze.removeProperties)Object.prototype.hasOwnProperty.call(_t.properties,In)&&delete _t.properties[In];if((null===(De=Ze.addOrUpdateProperties)||void 0===De?void 0:De.length)>0)for(const{key:In,value:xn}of Ze.addOrUpdateProperties)_t.properties[In]=xn}}(this._dataUpdateable,rt.dataDiff,Xe),Ye(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ye(new Error(`Cannot update existing geojson data in ${rt.source}`)):Ye(new Error(`Input data given to '${rt.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},ke&&(this.loadGeoJSON=ke)}loadData($,re){var _e;null===(_e=this._pendingRequest)||void 0===_e||_e.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ke=!!($&&$.request&&$.request.collectResourceTiming)&&new g.RequestPerformance($.request);this._pendingCallback=re,this._pendingRequest=this.loadGeoJSON($,(rt,Ye)=>{if(delete this._pendingCallback,delete this._pendingRequest,rt||!Ye)return re(rt);if("object"!=typeof Ye)return re(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));{We(Ye,!0);try{if($.filter){const Ke=g.createExpression($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Ke.result)throw new Error(Ke.value.map(Rt=>`${Rt.key}: ${Rt.message}`).join(", "));const at=Ye.features.filter(Rt=>Ke.value.evaluate({zoom:0},Rt));Ye={type:"FeatureCollection",features:at}}this._geoJSONIndex=$.cluster?new mi(function({superclusterOptions:Ke,clusterProperties:at}){if(!at||!Ke)return Ke;const Rt={},Bt={},xe={accumulated:null,zoom:0},Pe={properties:null},De=Object.keys(at);for(const Ze of De){const[_t,qt]=at[Ze],In=g.createExpression(qt),xn=g.createExpression("string"==typeof _t?[_t,["accumulated"],["get",Ze]]:_t);Rt[Ze]=In.value,Bt[Ze]=xn.value}return Ke.map=Ze=>{Pe.properties=Ze;const _t={};for(const qt of De)_t[qt]=Rt[qt].evaluate(xe,Pe);return _t},Ke.reduce=(Ze,_t)=>{Pe.properties=_t;for(const qt of De)xe.accumulated=Ze[qt],Ze[qt]=Bt[qt].evaluate(xe,Pe)},Ke}($)).load(Ye.features):new Vi(Ke=Ye,$.geojsonVtOptions)}catch(Ke){return re(Ke)}this.loaded={};const Xe={};if(ke){const Ke=ke.finish();Ke&&(Xe.resourceTiming={},Xe.resourceTiming[$.source]=JSON.parse(JSON.stringify(Ke)))}re(null,Xe)}var Ke})}reloadTile($,re){const _e=this.loaded;return _e&&_e[$.uid]?super.reloadTile($,re):this.loadTile($,re)}removeSource($,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),re()}getClusterExpansionZoom($,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom($.clusterId))}catch(_e){re(_e)}}getClusterChildren($,re){try{re(null,this._geoJSONIndex.getChildren($.clusterId))}catch(_e){re(_e)}}getClusterLeaves($,re){try{re(null,this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset))}catch(_e){re(_e)}}}class Te{constructor($){this.self=$,this.actor=new g.Actor($,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Ue,geojson:Se},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(re,_e)=>{if(this.workerSourceTypes[re])throw new Error(`Worker source with name "${re}" already registered.`);this.workerSourceTypes[re]=_e},this.self.registerRTLTextPlugin=re=>{if(g.plugin.isParsed())throw new Error("RTL text plugin already registered.");g.plugin.applyArabicShaping=re.applyArabicShaping,g.plugin.processBidirectionalText=re.processBidirectionalText,g.plugin.processStyledBidirectionalText=re.processStyledBidirectionalText}}setReferrer($,re){this.referrer=re}setImages($,re,_e){this.availableImages[$]=re;for(const ke in this.workerSources[$]){const rt=this.workerSources[$][ke];for(const Ye in rt)rt[Ye].availableImages=re}_e()}setLayers($,re,_e){this.getLayerIndex($).replace(re),_e()}updateLayers($,re,_e){this.getLayerIndex($).update(re.layers,re.removedIds),_e()}loadTile($,re,_e){this.getWorkerSource($,re.type,re.source).loadTile(re,_e)}loadDEMTile($,re,_e){this.getDEMWorkerSource($,re.source).loadTile(re,_e)}reloadTile($,re,_e){this.getWorkerSource($,re.type,re.source).reloadTile(re,_e)}abortTile($,re,_e){this.getWorkerSource($,re.type,re.source).abortTile(re,_e)}removeTile($,re,_e){this.getWorkerSource($,re.type,re.source).removeTile(re,_e)}removeDEMTile($,re){this.getDEMWorkerSource($,re.source).removeTile(re)}removeSource($,re,_e){if(!this.workerSources[$]||!this.workerSources[$][re.type]||!this.workerSources[$][re.type][re.source])return;const ke=this.workerSources[$][re.type][re.source];delete this.workerSources[$][re.type][re.source],void 0!==ke.removeSource?ke.removeSource(re,_e):_e()}loadWorkerSource($,re,_e){try{this.self.importScripts(re.url),_e()}catch(ke){_e(ke.toString())}}syncRTLPluginState($,re,_e){try{g.plugin.setState(re);const ke=g.plugin.getPluginURL();if(g.plugin.isLoaded()&&!g.plugin.isParsed()&&null!=ke){this.self.importScripts(ke);const rt=g.plugin.isParsed();_e(rt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ke}`),rt)}}catch(ke){_e(ke.toString())}}getAvailableImages($){let re=this.availableImages[$];return re||(re=[]),re}getLayerIndex($){let re=this.layerIndexes[$];return re||(re=this.layerIndexes[$]=new He),re}getWorkerSource($,re,_e){return this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][re]||(this.workerSources[$][re]={}),this.workerSources[$][re][_e]||(this.workerSources[$][re][_e]=new this.workerSourceTypes[re]({send:(rt,Ye,Xe)=>{this.actor.send(rt,Ye,Xe,$)}},this.getLayerIndex($),this.getAvailableImages($))),this.workerSources[$][re][_e]}getDEMWorkerSource($,re){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][re]||(this.demWorkerSources[$][re]=new nt),this.demWorkerSources[$][re]}}return g.isWorker()&&(self.worker=new Te(self)),Te}),l(0,function(g){class he{static testProp(t){if(!he.docStyle)return t[0];for(let u=0;u<t.length;u++)if(t[u]in he.docStyle)return t[u];return t[0]}static create(t,u,m){const b=window.document.createElement(t);return void 0!==u&&(b.className=u),m&&m.appendChild(b),b}static createNS(t,u){return window.document.createElementNS(t,u)}static disableDrag(){he.docStyle&&he.selectProp&&(he.userSelect=he.docStyle[he.selectProp],he.docStyle[he.selectProp]="none")}static enableDrag(){he.docStyle&&he.selectProp&&(he.docStyle[he.selectProp]=he.userSelect)}static setTransform(t,u){t.style[he.transformProp]=u}static addEventListener(t,u,m,b={}){t.addEventListener(u,m,"passive"in b?b:b.capture)}static removeEventListener(t,u,m,b={}){t.removeEventListener(u,m,"passive"in b?b:b.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",he.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",he.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",he.suppressClickInternal,!0)},0)}static mousePos(t,u){const m=t.getBoundingClientRect();return new g.Point(u.clientX-m.left-t.clientLeft,u.clientY-m.top-t.clientTop)}static touchPos(t,u){const m=t.getBoundingClientRect(),b=[];for(let S=0;S<u.length;S++)b.push(new g.Point(u[S].clientX-m.left-t.clientLeft,u[S].clientY-m.top-t.clientTop));return b}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}he.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,he.selectProp=he.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),he.transformProp=he.testProp(["transform","WebkitTransform"]);const $e={supported:!1,testSupport:function(y){!Ue&&Be&&(nt?Re(y):Ie=y)}};let Ie,Be,Ue=!1,nt=!1;function Re(y){const t=y.createTexture();y.bindTexture(y.TEXTURE_2D,t);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,Be),y.isContextLost())return;$e.supported=!0}catch{}y.deleteTexture(t),Ue=!0}var it;typeof document<"u"&&(Be=document.createElement("img"),Be.onload=function(){Ie&&Re(Ie),Ie=null,nt=!0},Be.onerror=function(){Ue=!0,Ie=null},Be.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let t,u,m,b;y.resetRequestQueue=()=>{t=[],u=0,m=0,b={}},y.addThrottleControl=Z=>{const ne=m++;return b[ne]=Z,ne},y.removeThrottleControl=Z=>{delete b[Z]};const S=()=>{const Z=Object.keys(b);let ne=!1;if(Z.length>0)for(const x of Z)if(ne=b[x](),ne)break;return ne};y.getImage=(Z,ne,x=!0)=>{$e.supported&&(Z.headers||(Z.headers={}),Z.headers.accept="image/webp,*/*");const D={requestParameters:Z,supportImageRefresh:x,callback:ne,cancelled:!1,completed:!1,cancel:()=>{}};return t.push(D),S()||y.processQueue(),D};const R=Z=>{const{requestParameters:ne,supportImageRefresh:x,callback:D}=Z;return g.extend(ne,{type:"image"}),(!1!==x||g.isWorker()||g.getProtocolAction(ne.url)||ne.headers&&!Object.keys(ne.headers).reduce((E,A)=>E&&"accept"===A,!0)?g.makeRequest:z)(ne,(E,A,k,G)=>{B(Z,D,E,A,k,G)})},B=(Z,ne,x,D,E,A)=>{var k,G;x?ne(x):D instanceof HTMLImageElement||D instanceof ImageBitmap?ne(null,D):D&&(k=D,G=(k,G)=>{null!=k?ne(k):null!=G&&ne(null,G,{cacheControl:E,expires:A})},"function"==typeof createImageBitmap?g.arrayBufferToImageBitmap(k,G):g.arrayBufferToImage(k,G)),Z.cancelled||(Z.completed=!0,u--,S()||y.processQueue())};y.processQueue=(Z=0)=>{Z<=0&&(Z=S()?g.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:g.config.MAX_PARALLEL_IMAGE_REQUESTS);for(let ne=u;ne<Z&&t.length>0;ne++){const x=t.shift();if(x.cancelled)continue;const D=R(x);u++,x.innerRequest=D,x.cancel=()=>{var E;(E=x).completed||E.cancelled||(u--,E.cancelled=!0,E.innerRequest.cancel(),y.processQueue())}}return t.length};const z=(Z,ne)=>{const x=new Image,D=Z.url;let E=!1;const A=Z.credentials;return A&&"include"===A?x.crossOrigin="use-credentials":(A&&"same-origin"===A||!g.sameOrigin(D))&&(x.crossOrigin="anonymous"),x.fetchPriority="high",x.onload=()=>{ne(null,x),x.onerror=x.onload=null},x.onerror=()=>{E||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),x.onerror=x.onload=null},x.src=D,{cancel:()=>{E=!0,x.src=""}}}}(it||(it={})),it.resetRequestQueue();var We,y,je=it;(y=We||(We={})).Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown";class Ct{constructor(t){this._transformRequestFn=t}transformRequest(t,u){return this._transformRequestFn&&this._transformRequestFn(t,u)||{url:t}}normalizeSpriteURL(t,u,m){const b=function(S){const R=S.match(wt);if(!R)throw new Error(`Unable to parse URL "${S}"`);return{protocol:R[1],authority:R[2],path:R[3]||"/",params:R[4]?R[4].split("&"):[]}}(t);return b.path+=`${u}${m}`,function(S){const R=S.params.length?`?${S.params.join("&")}`:"";return`${S.protocol}://${S.authority}${S.path}${R}`}(b)}setTransformRequest(t){this._transformRequestFn=t}}const wt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Tt(y){var t=new g.ARRAY_TYPE(3);return t[0]=y[0],t[1]=y[1],t[2]=y[2],t}var an,Xt=function(y,t,u){return y[0]=t[0]-u[0],y[1]=t[1]-u[1],y[2]=t[2]-u[2],y};an=new g.ARRAY_TYPE(3),g.ARRAY_TYPE!=Float32Array&&(an[0]=0,an[1]=0,an[2]=0);var Dt=function(y){var t=y[0],u=y[1];return t*t+u*u};function Oe(y){const t=[];if("string"==typeof y)t.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:m,url:b}of y){const S=`${m}${b}`;-1===u.indexOf(S)&&(u.push(S),t.push({id:m,url:b}))}}return t}function Ne(y,t,u,m,b){if(m)return void y(m);if(b!==Object.values(t).length||b!==Object.values(u).length)return;const S={};for(const R in t){S[R]={};const B=g.exported.getImageCanvasContext(u[R]),z=t[R];for(const Z in z){const{width:ne,height:x,x:D,y:E,sdf:A,pixelRatio:k,stretchX:G,stretchY:se,content:pe}=z[Z];S[R][Z]={data:null,pixelRatio:k,sdf:A,stretchX:G,stretchY:se,content:pe,spriteData:{width:ne,height:x,x:D,y:E,context:B}}}}y(null,S)}!function(){var y=new g.ARRAY_TYPE(2);g.ARRAY_TYPE!=Float32Array&&(y[0]=0,y[1]=0)}();class Ot{constructor(t,u,m,b){this.context=t,this.format=m,this.texture=t.gl.createTexture(),this.update(u,b)}update(t,u,m){const{width:b,height:S}=t,R=!(this.size&&this.size[0]===b&&this.size[1]===S||m),{context:B}=this,{gl:z}=B;if(this.useMipmap=Boolean(u&&u.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!u||!1!==u.premultiply)),R)this.size=[b,S],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||g.isImageBitmap(t)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,t):z.texImage2D(z.TEXTURE_2D,0,this.format,b,S,0,this.format,z.UNSIGNED_BYTE,t.data);else{const{x:Z,y:ne}=m||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||g.isImageBitmap(t)?z.texSubImage2D(z.TEXTURE_2D,0,Z,ne,z.RGBA,z.UNSIGNED_BYTE,t):z.texSubImage2D(z.TEXTURE_2D,0,Z,ne,b,S,z.RGBA,z.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(t,u,m){const{context:b}=this,{gl:S}=b;S.bindTexture(S.TEXTURE_2D,this.texture),m!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=S.LINEAR),t!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,t),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,m||t),this.filter=t),u!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function kt(y){const{userImage:t}=y;return!!(t&&t.render&&t.render())&&(y.data.replace(new Uint8Array(t.data.buffer)),!0)}class Ft extends g.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new g.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:u,callback:m}of this.requestors)this._notify(u,m);this.requestors=[]}}getImage(t){const u=this.images[t];if(u&&!u.data&&u.spriteData){const m=u.spriteData;u.data=new g.RGBAImage({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),u.spriteData=null}return u}addImage(t,u){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,u)&&(this.images[t]=u)}_validate(t,u){let m=!0;const b=u.data||u.spriteData;return this._validateStretch(u.stretchX,b&&b.width)||(this.fire(new g.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,b&&b.height)||(this.fire(new g.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new g.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),m=!1),m}_validateStretch(t,u){if(!t)return!0;let m=0;for(const b of t){if(b[0]<m||b[1]<b[0]||u<b[1])return!1;m=b[1]}return!0}_validateContent(t,u){if(!t)return!0;if(4!==t.length)return!1;const m=u.spriteData,b=m&&m.width||u.data.width,S=m&&m.height||u.data.height;return!(t[0]<0||b<t[0]||t[1]<0||S<t[1]||t[2]<0||b<t[2]||t[3]<0||S<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,u,m=!0){const b=this.getImage(t);if(m&&(b.data.width!==u.data.width||b.data.height!==u.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=b.version+1,this.images[t]=u,this.updatedImages[t]=!0}removeImage(t){const u=this.images[t];delete this.images[t],delete this.patterns[t],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,u){let m=!0;if(!this.isLoaded())for(const b of t)this.images[b]||(m=!1);this.isLoaded()||m?this._notify(t,u):this.requestors.push({ids:t,callback:u})}_notify(t,u){const m={};for(const b of t){let S=this.getImage(b);S||(this.fire(new g.Event("styleimagemissing",{id:b})),S=this.getImage(b)),S?m[b]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:g.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,m)}getPixelSize(){const{width:t,height:u}=this.atlasImage;return{width:t,height:u}}getPattern(t){const u=this.patterns[t],m=this.getImage(t);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{const b={w:m.data.width+2,h:m.data.height+2,x:0,y:0},S=new g.ImagePosition(b,m);this.patterns[t]={bin:b,position:S}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const u=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ot(t,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const S in this.patterns)t.push(this.patterns[S].bin);const{w:u,h:m}=g.potpack(t),b=this.atlasImage;b.resize({width:u||1,height:m||1});for(const S in this.patterns){const{bin:R}=this.patterns[S],B=R.x+1,z=R.y+1,Z=this.getImage(S).data,ne=Z.width,x=Z.height;g.RGBAImage.copy(Z,b,{x:0,y:0},{x:B,y:z},{width:ne,height:x}),g.RGBAImage.copy(Z,b,{x:0,y:x-1},{x:B,y:z-1},{width:ne,height:1}),g.RGBAImage.copy(Z,b,{x:0,y:0},{x:B,y:z+x},{width:ne,height:1}),g.RGBAImage.copy(Z,b,{x:ne-1,y:0},{x:B-1,y:z},{width:1,height:x}),g.RGBAImage.copy(Z,b,{x:0,y:0},{x:B+ne,y:z},{width:1,height:x})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const u of t){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const m=this.getImage(u);m||g.warnOnce(`Image with ID: "${u}" was not found`),kt(m)&&this.updateImage(u,m)}}}const Gt=1e20;function lt(y,t,u,m,b,S,R,B,z){for(let Z=t;Z<t+m;Z++)dt(y,u*S+Z,S,b,R,B,z);for(let Z=u;Z<u+b;Z++)dt(y,Z*S+t,1,m,R,B,z)}function dt(y,t,u,m,b,S,R){S[0]=0,R[0]=-Gt,R[1]=Gt,b[0]=y[t];for(let B=1,z=0,Z=0;B<m;B++){b[B]=y[t+B*u];const ne=B*B;do{const x=S[z];Z=(b[B]-b[x]+ne-x*x)/(B-x)/2}while(Z<=R[z]&&--z>-1);z++,S[z]=B,R[z]=Z,R[z+1]=Gt}for(let B=0,z=0;B<m;B++){for(;R[z+1]<B;)z++;const Z=S[z],ne=B-Z;y[t+B*u]=b[Z]+ne*ne}}class St{constructor(t,u){this.requestManager=t,this.localIdeographFontFamily=u,this.entries={}}setURL(t){this.url=t}getGlyphs(t,u){const m=[];for(const b in t)for(const S of t[b])m.push({stack:b,id:S});g.asyncAll(m,({stack:b,id:S},R)=>{let B=this.entries[b];B||(B=this.entries[b]={glyphs:{},requests:{},ranges:{}});let z=B.glyphs[S];if(void 0!==z)return void R(null,{stack:b,id:S,glyph:z});if(z=this._tinySDF(B,b,S),z)return B.glyphs[S]=z,void R(null,{stack:b,id:S,glyph:z});const Z=Math.floor(S/256);if(256*Z>65535)return void R(new Error("glyphs > 65535 not supported"));if(B.ranges[Z])return void R(null,{stack:b,id:S,glyph:z});if(!this.url)return void R(new Error("glyphsUrl is not set"));let ne=B.requests[Z];ne||(ne=B.requests[Z]=[],St.loadGlyphRange(b,Z,this.url,this.requestManager,(x,D)=>{if(D){for(const E in D)this._doesCharSupportLocalGlyph(+E)||(B.glyphs[+E]=D[+E]);B.ranges[Z]=!0}for(const E of ne)E(x,D);delete B.requests[Z]})),ne.push((x,D)=>{x?R(x):D&&R(null,{stack:b,id:S,glyph:D[S]||null})})},(b,S)=>{if(b)u(b);else if(S){const R={};for(const{stack:B,id:z,glyph:Z}of S)(R[B]||(R[B]={}))[z]=Z&&{id:Z.id,bitmap:Z.bitmap.clone(),metrics:Z.metrics};u(null,R)}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(g.unicodeBlockLookup["CJK Unified Ideographs"](t)||g.unicodeBlockLookup["Hangul Syllables"](t)||g.unicodeBlockLookup.Hiragana(t)||g.unicodeBlockLookup.Katakana(t))}_tinySDF(t,u,m){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(m))return;let S=t.tinySDF;if(!S){let B="400";/bold/i.test(u)?B="900":/medium/i.test(u)?B="500":/light/i.test(u)&&(B="200"),S=t.tinySDF=new St.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:b,fontWeight:B})}const R=S.draw(String.fromCharCode(m));return{id:m,bitmap:new g.AlphaImage({width:R.width||30,height:R.height||30},R.data),metrics:{width:R.glyphWidth||24,height:R.glyphHeight||24,left:R.glyphLeft||0,top:R.glyphTop-27||-8,advance:R.glyphAdvance||24}}}}St.loadGlyphRange=function(y,t,u,m,b){const S=256*t,R=S+255,B=m.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${S}-${R}`),We.Glyphs);g.getArrayBuffer(B,(z,Z)=>{if(z)b(z);else if(Z){const ne={};for(const x of g.parseGlyphPbf(Z))ne[x.id]=x;b(null,ne)}})},St.TinySDF=class{constructor({fontSize:y=24,buffer:t=3,radius:u=8,cutoff:m=.25,fontFamily:b="sans-serif",fontWeight:S="normal",fontStyle:R="normal"}={}){this.buffer=t,this.cutoff=m,this.radius=u;const B=this.size=y+4*t,z=this._createCanvas(B),Z=this.ctx=z.getContext("2d",{willReadFrequently:!0});Z.font=`${R} ${S} ${y}px ${b}`,Z.textBaseline="alphabetic",Z.textAlign="left",Z.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Uint16Array(B)}_createCanvas(y){const t=document.createElement("canvas");return t.width=t.height=y,t}draw(y){const{width:t,actualBoundingBoxAscent:u,actualBoundingBoxDescent:m,actualBoundingBoxLeft:b,actualBoundingBoxRight:S}=this.ctx.measureText(y),R=Math.ceil(u),B=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-b))),z=Math.min(this.size-this.buffer,R+Math.ceil(m)),Z=B+2*this.buffer,ne=z+2*this.buffer,x=Math.max(Z*ne,0),D=new Uint8ClampedArray(x),E={data:D,width:Z,height:ne,glyphWidth:B,glyphHeight:z,glyphTop:R,glyphLeft:0,glyphAdvance:t};if(0===B||0===z)return E;const{ctx:A,buffer:k,gridInner:G,gridOuter:se}=this;A.clearRect(k,k,B,z),A.fillText(y,k,k+R);const pe=A.getImageData(k,k,B,z);se.fill(Gt,0,x),G.fill(0,0,x);for(let me=0;me<z;me++)for(let qe=0;qe<B;qe++){const pt=pe.data[4*(me*B+qe)+3]/255;if(0===pt)continue;const xt=(me+k)*Z+qe+k;if(1===pt)se[xt]=0,G[xt]=Gt;else{const Ht=.5-pt;se[xt]=Ht>0?Ht*Ht:0,G[xt]=Ht<0?Ht*Ht:0}}lt(se,0,0,Z,ne,Z,this.f,this.v,this.z),lt(G,k,k,B,z,Z,this.f,this.v,this.z);for(let me=0;me<x;me++){const qe=Math.sqrt(se[me])-Math.sqrt(G[me]);D[me]=Math.round(255-255*(qe/this.radius+this.cutoff))}return E}};class Et{constructor(){this.specification=g.v8Spec.light.position}possiblyEvaluate(t,u){return g.sphericalToCartesian(t.expression.evaluate(u))}interpolate(t,u,m){return{x:g.interpolate.number(t.x,u.x,m),y:g.interpolate.number(t.y,u.y,m),z:g.interpolate.number(t.z,u.z,m)}}}const tn="-transition";let Qt,On;class Xn extends g.Evented{constructor(t){super(),Qt=Qt||new g.Properties({anchor:new g.DataConstantProperty(g.v8Spec.light.anchor),position:new Et,color:new g.DataConstantProperty(g.v8Spec.light.color),intensity:new g.DataConstantProperty(g.v8Spec.light.intensity)}),this._transitionable=new g.Transitionable(Qt),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,u={}){if(!this._validate(g.validateLight,t,u))for(const m in t){const b=t[m];m.endsWith(tn)?this._transitionable.setTransition(m.slice(0,-tn.length),b):this._transitionable.setValue(m,b)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,u,m){return(!m||!1!==m.validate)&&g.emitValidationErrors(this,t.call(g.validateStyle,g.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:g.v8Spec})))}}class mi{constructor(t,u){this.width=t,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,u){const m=t.join(",")+String(u);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(t,u)),this.dashEntry[m]}getDashRanges(t,u,m){const b=[];let S=t.length%2==1?-t[t.length-1]*m:0,R=t[0]*m,B=!0;b.push({left:S,right:R,isDash:B,zeroLength:0===t[0]});let z=t[0];for(let Z=1;Z<t.length;Z++){B=!B;const ne=t[Z];S=z*m,z+=ne,R=z*m,b.push({left:S,right:R,isDash:B,zeroLength:0===ne})}return b}addRoundDash(t,u,m){const b=u/2;for(let S=-m;S<=m;S++){const R=this.width*(this.nextRow+m+S);let B=0,z=t[B];for(let Z=0;Z<this.width;Z++){Z/z.right>1&&(z=t[++B]);const ne=Math.abs(Z-z.left),x=Math.abs(Z-z.right),D=Math.min(ne,x);let E;const A=S/m*(b+1);if(z.isDash){const k=b-Math.abs(A);E=Math.sqrt(D*D+k*k)}else E=b-Math.sqrt(D*D+A*A);this.data[R+Z]=Math.max(0,Math.min(255,E+128))}}}addRegularDash(t){for(let B=t.length-1;B>=0;--B){const z=t[B],Z=t[B+1];z.zeroLength?t.splice(B,1):Z&&Z.isDash===z.isDash&&(Z.left=z.left,t.splice(B,1))}const u=t[0],m=t[t.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const b=this.width*this.nextRow;let S=0,R=t[S];for(let B=0;B<this.width;B++){B/R.right>1&&(R=t[++S]);const z=Math.abs(B-R.left),Z=Math.abs(B-R.right),ne=Math.min(z,Z);this.data[b+B]=Math.max(0,Math.min(255,(R.isDash?ne:-ne)+128))}}addDash(t,u){const m=u?7:0,b=2*m+1;if(this.nextRow+b>this.height)return g.warnOnce("LineAtlas out of space"),null;let S=0;for(let B=0;B<t.length;B++)S+=t[B];if(0!==S){const B=this.width/S,z=this.getDashRanges(t,this.width,B);u?this.addRoundDash(z,B,m):this.addRegularDash(z)}const R={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:S};return this.nextRow+=b,this.dirty=!0,R}bind(t){const u=t.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class nn{constructor(t,u,m){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=m;const b=this.workerPool.acquire(m);for(let S=0;S<b.length;S++){const R=new nn.Actor(b[S],u,m);R.name=`Worker ${S}`,this.actors.push(R)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,u,m){g.asyncAll(this.actors,(b,S)=>{b.send(t,u,S)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}}function gi(y,t,u){const m=function(b,S){if(b)return u(b);if(S){const R=g.pick(g.extend(S,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(R.vectorLayers=S.vector_layers,R.vectorLayerIds=R.vectorLayers.map(B=>B.id)),u(null,R)}};return y.url?g.getJSON(t.transformRequest(y.url,We.Source),m):g.exported.frame(()=>m(null,y))}nn.Actor=g.Actor;class Qn{constructor(t,u){t&&(u?this.setSouthWest(t).setNorthEast(u):Array.isArray(t)&&(4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof g.LngLat?new g.LngLat(t.lng,t.lat):g.LngLat.convert(t),this}setSouthWest(t){return this._sw=t instanceof g.LngLat?new g.LngLat(t.lng,t.lat):g.LngLat.convert(t),this}extend(t){const u=this._sw,m=this._ne;let b,S;if(t instanceof g.LngLat)b=t,S=t;else{if(!(t instanceof Qn))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Qn.convert(t)):this.extend(g.LngLat.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(g.LngLat.convert(t)):this;if(b=t._sw,S=t._ne,!b||!S)return this}return u||m?(u.lng=Math.min(b.lng,u.lng),u.lat=Math.min(b.lat,u.lat),m.lng=Math.max(S.lng,m.lng),m.lat=Math.max(S.lat,m.lat)):(this._sw=new g.LngLat(b.lng,b.lat),this._ne=new g.LngLat(S.lng,S.lat)),this}getCenter(){return new g.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new g.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new g.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:u,lat:m}=g.LngLat.convert(t);let b=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&b}static convert(t){return t instanceof Qn?t:t&&new Qn(t)}static fromLngLat(t,u=0){const m=360*u/40075017,b=m/Math.cos(Math.PI/180*t.lat);return new Qn(new g.LngLat(t.lng-b,t.lat-m),new g.LngLat(t.lng+b,t.lat+m))}}class di{constructor(t,u,m){this.bounds=Qn.convert(this.validateBounds(t)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const u=Math.pow(2,t.z),m=Math.floor(g.mercatorXfromLng(this.bounds.getWest())*u),b=Math.floor(g.mercatorYfromLat(this.bounds.getNorth())*u),S=Math.ceil(g.mercatorXfromLng(this.bounds.getEast())*u),R=Math.ceil(g.mercatorYfromLat(this.bounds.getSouth())*u);return t.x>=m&&t.x<S&&t.y>=b&&t.y<R}}class ln extends g.Evented{constructor(t,u,m,b){if(super(),this.id=t,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,g.extend(this,g.pick(u,["url","scheme","tileSize","promoteId"])),this._options=g.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=gi(this._options,this.map._requestManager,(t,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t?this.fire(new g.ErrorEvent(t)):u&&(g.extend(this,u),u.bounds&&(this.tileBounds=new di(u.bounds,this.minzoom,this.maxzoom)),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return g.extend({},this._options)}loadTile(t,u){const m=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(m,We.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(R,B){return delete t.request,t.aborted?u(null):R&&404!==R.status?u(R):(B&&B.resourceTiming&&(t.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&t.setExpiryData(B),t.loadVectorData(B,this.map.painter),u(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=u:t.request=t.actor.send("reloadTile",b,S.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",b,S.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class hn extends g.Evented{constructor(t,u,m,b){super(),this.id=t,this.dispatcher=m,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=g.extend({type:"raster"},u),g.extend(this,g.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=gi(this._options,this.map._requestManager,(t,u)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new g.ErrorEvent(t)):u&&(g.extend(this,u),u.bounds&&(this.tileBounds=new di(u.bounds,this.minzoom,this.maxzoom)),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return g.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,u){const m=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=je.getImage(this.map._requestManager.transformRequest(m,We.Tile),(b,S,R)=>{if(delete t.request,t.aborted)t.state="unloaded",u(null);else if(b)t.state="errored",u(b);else if(S){this.map._refreshExpiredTiles&&R&&t.setExpiryData(R);const B=this.map.painter.context,z=B.gl;t.texture=this.map.painter.getTileTexture(S.width),t.texture?t.texture.update(S,{useMipmap:!0}):(t.texture=new Ot(B,S,z.RGBA,{useMipmap:!0}),t.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),t.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(t,u){t.request&&(t.request.cancel(),delete t.request),u()}unloadTile(t,u){t.texture&&this.map.painter.saveTileTexture(t.texture),u()}hasTransition(){return!1}}class gt extends hn{constructor(t,u,m,b){super(t,u,m,b),this.type="raster-dem",this.maxzoom=22,this._options=g.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,u){const m=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function b(S,R){S&&(t.state="errored",u(S)),R&&(t.dem=R,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded",u(null))}t.request=je.getImage(this.map._requestManager.transformRequest(m,We.Tile),function(S,R){if(delete t.request,t.aborted)t.state="unloaded",u(null);else if(S)t.state="errored",u(S);else if(R){this.map._refreshExpiredTiles&&t.setExpiryData(R),delete R.cacheControl,delete R.expires;const B=g.isImageBitmap(R)&&(null==On&&(On=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),On)?R:g.exported.getImageData(R,1),z={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:B,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",z,b.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),t.neighboringTiles=this._getNeighboringTiles(t.tileID)}_getNeighboringTiles(t){const u=t.canonical,m=Math.pow(2,u.z),b=(u.x-1+m)%m,S=0===u.x?t.wrap-1:t.wrap,R=(u.x+1+m)%m,B=u.x+1===m?t.wrap+1:t.wrap,z={};return z[new g.OverscaledTileID(t.overscaledZ,S,u.z,b,u.y).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,B,u.z,R,u.y).key]={backfilled:!1},u.y>0&&(z[new g.OverscaledTileID(t.overscaledZ,S,u.z,b,u.y-1).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,t.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,B,u.z,R,u.y-1).key]={backfilled:!1}),u.y+1<m&&(z[new g.OverscaledTileID(t.overscaledZ,S,u.z,b,u.y+1).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,t.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},z[new g.OverscaledTileID(t.overscaledZ,B,u.z,R,u.y+1).key]={backfilled:!1}),z}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class At extends g.Evented{constructor(t,u,m,b){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(b),this._data=u.data,this._options=g.extend({},u),this._collectResourceTiming=u.collectResourceTiming,void 0!==u.maxzoom&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const S=g.EXTENT/this.tileSize;this.workerOptions=g.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(void 0!==u.buffer?u.buffer:128)*S,tolerance:(void 0!==u.tolerance?u.tolerance:.375)*S,extent:g.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:void 0!==u.clusterMaxZoom?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:g.EXTENT,radius:(u.clusterRadius||50)*S,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(void 0!==t.clusterRadius&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),void 0!==t.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},u),this}getClusterChildren(t,u){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},u),this}getClusterLeaves(t,u,m,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:u,offset:m},b),this}_updateWorkerData(t){const u=g.extend({},this.workerOptions);t?u.dataDiff=t:"string"==typeof this._data?(u.request=this.map._requestManager.transformRequest(g.exported.resolveURL(this._data),We.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new g.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(m,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new g.Event("dataabort",{dataType:"source"}));let S=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(S=b.resourceTiming[this.id].slice(0)),m)return void this.fire(new g.ErrorEvent(m));const R={dataType:"source"};this._collectResourceTiming&&S&&S.length>0&&g.extend(R,{resourceTiming:S}),this.fire(new g.Event("data",{...R,sourceDataType:"metadata"})),this.fire(new g.Event("data",{...R,sourceDataType:"content"}))})}loaded(){return 0===this._pendingLoads}loadTile(t,u){const m=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const b={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(m,b,(S,R)=>(delete t.request,t.unloadVectorData(),t.aborted?u(null):S?u(S):(t.loadVectorData(R,this.map.painter,"reloadTile"===m),u(null))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return g.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var en=g.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class sn extends g.Evented{constructor(t,u,m,b){super(),this.id=t,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=u}load(t,u){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=je.getImage(this.map._requestManager.transformRequest(this.url,We.Image),(m,b)=>{this._request=null,this._loaded=!0,m?this.fire(new g.ErrorEvent(m)):b&&(this.image=b,t&&(this.coordinates=t),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=t.url,this.load(t.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(t){this.coordinates=t;const u=t.map(g.MercatorCoordinate.fromLngLat);this.tileID=function(b){let S=1/0,R=1/0,B=-1/0,z=-1/0;for(const D of b)S=Math.min(S,D.x),R=Math.min(R,D.y),B=Math.max(B,D.x),z=Math.max(z,D.y);const Z=Math.max(B-S,z-R),ne=Math.max(0,Math.floor(-Math.log(Z)/Math.LN2)),x=Math.pow(2,ne);return new g.CanonicalTileID(ne,Math.floor((S+B)/2*x),Math.floor((R+z)/2*x))}(u),this.minzoom=this.maxzoom=this.tileID.z;const m=u.map(b=>this.tileID.getTilePoint(b)._round());return this._boundsArray=new g.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,g.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,g.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,g.EXTENT,g.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,u=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,en.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ot(t,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const m in this.tiles){const b=this.tiles[m];"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}}loadTile(t,u){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},u(null)):(t.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class bn extends sn{constructor(t,u,m,b){super(t,u,m,b),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const u of t.urls)this.urls.push(this.map._requestManager.transformRequest(u,We.Source).url);g.getVideo(this.urls,(u,m)=>{this._loaded=!0,u?this.fire(new g.ErrorEvent(u)):m&&(this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const u=this.video.seekable;t<u.start(0)||t>u.end(0)?this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,u=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,en.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new Ot(t,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const m in this.tiles){const b=this.tiles[m];"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Un extends sn{constructor(t,u,m,b){super(t,u,m,b),u.coordinates?Array.isArray(u.coordinates)&&4===u.coordinates.length&&!u.coordinates.some(S=>!Array.isArray(S)||2!==S.length||S.some(R=>"number"!=typeof R))||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),u.animate&&"boolean"!=typeof u.animate&&this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),u.canvas?"string"==typeof u.canvas||u.canvas instanceof HTMLCanvasElement||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=u,this.animate=void 0===u.animate||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new g.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const u=this.map.painter.context,m=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,en.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ot(u,this.canvas,m.RGBA,{premultiply:!0});for(const b in this.tiles){const S=this.tiles[b];"loaded"!==S.state&&(S.state="loaded",S.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const Kn={vector:ln,raster:hn,"raster-dem":gt,geojson:At,video:bn,image:sn,canvas:Un};function hi(y,t){const u=g.create();return g.translate(u,u,[1,1,0]),g.scale(u,u,[.5*y.width,.5*y.height,1]),g.multiply(u,u,y.calculatePosMatrix(t.toUnwrapped()))}function Fi(y,t,u,m,b,S){const R=function(x,D,E){if(x)for(const A of x){const k=D[A];if(k&&k.source===E&&"fill-extrusion"===k.type)return!0}else for(const A in D){const k=D[A];if(k.source===E&&"fill-extrusion"===k.type)return!0}return!1}(b&&b.layers,t,y.id),B=S.maxPitchScaleFactor(),z=y.tilesIn(m,B,R);z.sort(Oi);const Z=[];for(const x of z)Z.push({wrappedTileID:x.tileID.wrapped().key,queryResults:x.tile.queryRenderedFeatures(t,u,y._state,x.queryGeometry,x.cameraQueryGeometry,x.scale,b,S,B,hi(y.transform,x.tileID))});const ne=function(x){const D={},E={};for(const A of x){const k=A.queryResults,G=A.wrappedTileID,se=E[G]=E[G]||{};for(const pe in k){const me=k[pe],qe=se[pe]=se[pe]||{},pt=D[pe]=D[pe]||[];for(const xt of me)qe[xt.featureIndex]||(qe[xt.featureIndex]=!0,pt.push(xt))}}return D}(Z);for(const x in ne)ne[x].forEach(D=>{const E=D.feature,A=y.getFeatureState(E.layer["source-layer"],E.id);E.source=E.layer.source,E.layer["source-layer"]&&(E.sourceLayer=E.layer["source-layer"]),E.state=A});return ne}function Oi(y,t){const u=y.tileID,m=t.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}class yi{constructor(t,u){this.tileID=t,this.uid=g.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const u=t+this.timeAdded;u<g.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,u,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(b,S){const R={};if(!S)return R;for(const B of b){const z=B.layerIds.map(Z=>S.getLayer(Z)).filter(Boolean);if(0!==z.length){B.layers=z,B.stateDependentLayerIds&&(B.stateDependentLayers=B.stateDependentLayerIds.map(Z=>z.filter(ne=>ne.id===Z)[0]));for(const Z of z)R[Z.id]=B}}return R}(t.buckets,u.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const S=this.buckets[b];if(S instanceof g.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const S=this.buckets[b];if(S instanceof g.SymbolBucket&&S.hasRTLText){this.hasRTLText=!0,g.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const b in this.buckets){const S=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(b).queryRadius(S))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new g.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const m in this.buckets){const b=this.buckets[m];b.uploadPending()&&b.upload(t)}const u=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ot(t,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ot(t,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,u,m,b,S,R,B,z,Z,ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:S,scale:R,tileSize:this.tileSize,pixelPosMatrix:ne,transform:z,params:B,queryPadding:this.queryPadding*Z},t,u,m):{}}querySourceFeatures(t,u){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const b=m.loadVTLayers(),S=u&&u.sourceLayer?u.sourceLayer:"",R=b._geojsonTileLayer||b[S];if(!R)return;const B=g.createFilter(u&&u.filter),{z,x:Z,y:ne}=this.tileID.canonical,x={z,x:Z,y:ne};for(let D=0;D<R.length;D++){const E=R.feature(D);if(B.needGeometry){const G=g.toEvaluationFeature(E,!0);if(!B.filter(new g.EvaluationParameters(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!B.filter(new g.EvaluationParameters(this.tileID.overscaledZ),E))continue;const A=m.getId(E,S),k=new g.GeoJSONFeature(E,z,Z,ne,A);k.tile=x,t.push(k)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const u=this.expirationTime;if(t.cacheControl){const m=g.parseCacheControl(t.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const m=Date.now();let b=!1;if(this.expirationTime>m)b=!1;else if(u)if(this.expirationTime<u)b=!0;else{const S=this.expirationTime-u;S?this.expirationTime=m+Math.max(S,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const m=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!u.style.hasLayer(b))continue;const S=this.buckets[b],R=S.layers[0].sourceLayer||"_geojsonTileLayer",B=m[R],z=t[R];if(!B||!z||0===Object.keys(z).length)continue;S.update(z,B,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Z=u&&u.style&&u.style.getLayer(b);Z&&(this.queryPadding=Math.max(this.queryPadding,Z.queryRadius(S)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<g.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=g.exported.now()+t}setDependencies(t,u){const m={};for(const b of u)m[b]=!0;this.dependencies[t]=m}hasDependency(t,u){for(const m of t){const b=this.dependencies[m];if(b)for(const S of u)if(b[S])return!0}return!1}}class un{constructor(t,u){this.max=t,this.onRemove=u,this.reset()}reset(){for(const t in this.data)for(const u of this.data[t])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(t,u,m){const b=t.wrapped().key;void 0===this.data[b]&&(this.data[b]=[]);const S={value:u,timeout:void 0};if(void 0!==m&&(S.timeout=setTimeout(()=>{this.remove(t,S)},m)),this.data[b].push(S),this.order.push(b),this.order.length>this.max){const R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const u=this.data[t].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),u.value}getByKey(t){const u=this.data[t];return u?u[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,u){if(!this.has(t))return this;const m=t.wrapped().key,b=void 0===u?0:this.data[m].indexOf(u),S=this.data[m][b];return this.data[m].splice(b,1),S.timeout&&clearTimeout(S.timeout),0===this.data[m].length&&delete this.data[m],this.onRemove(S.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(t){const u=[];for(const m in this.data)for(const b of this.data[m])t(b.value)||u.push(b);for(const m of u)this.remove(m.value.tileID,m)}}class Nn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,u,m){const b=String(u);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][b]=this.stateChanges[t][b]||{},g.extend(this.stateChanges[t][b],m),null===this.deletedStates[t]){this.deletedStates[t]={};for(const S in this.state[t])S!==b&&(this.deletedStates[t][S]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][b]){this.deletedStates[t][b]={};for(const S in this.state[t][b])m[S]||(this.deletedStates[t][b][S]=null)}else for(const S in m)this.deletedStates[t]&&this.deletedStates[t][b]&&null===this.deletedStates[t][b][S]&&delete this.deletedStates[t][b][S]}removeFeatureState(t,u,m){if(null===this.deletedStates[t])return;const b=String(u);if(this.deletedStates[t]=this.deletedStates[t]||{},m&&void 0!==u)null!==this.deletedStates[t][b]&&(this.deletedStates[t][b]=this.deletedStates[t][b]||{},this.deletedStates[t][b][m]=null);else if(void 0!==u)if(this.stateChanges[t]&&this.stateChanges[t][b])for(m in this.deletedStates[t][b]={},this.stateChanges[t][b])this.deletedStates[t][b][m]=null;else this.deletedStates[t][b]=null;else this.deletedStates[t]=null}getState(t,u){const m=String(u),b=g.extend({},(this.state[t]||{})[m],(this.stateChanges[t]||{})[m]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const S=this.deletedStates[t][u];if(null===S)return{};for(const R in S)delete b[R]}return b}initializeTileState(t,u){t.setFeatureState(this.state,u)}coalesceChanges(t,u){const m={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const S={};for(const R in this.stateChanges[b])this.state[b][R]||(this.state[b][R]={}),g.extend(this.state[b][R],this.stateChanges[b][R]),S[R]=this.state[b][R];m[b]=S}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const S={};if(null===this.deletedStates[b])for(const R in this.state[b])S[R]={},this.state[b][R]={};else for(const R in this.deletedStates[b]){if(null===this.deletedStates[b][R])this.state[b][R]={};else for(const B of Object.keys(this.deletedStates[b][R]))delete this.state[b][R][B];S[R]=this.state[b][R]}m[b]=m[b]||{},g.extend(m[b],S)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(m).length)for(const b in t)t[b].setFeatureState(m,u)}}class tt extends g.Evented{constructor(t,u,m){super(),this.id=t,this.dispatcher=m,this.on("data",b=>{"source"===b.dataType&&"metadata"===b.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===b.dataType&&"content"===b.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(b,S,R,B){const z=new Kn[S.type](b,S,R,B);if(z.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${z.id}`);return g.bindAll(["load","abort","unload","serialize","prepare"],z),z}(t,u,m,this),this._tiles={},this._cache=new un(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nn}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const u=this._tiles[t];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,u){return this._source.loadTile(t,u)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){this._source.abortTile&&this._source.abortTile(t,()=>{}),this._source.fire(new g.Event("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const m=this._tiles[u];m.upload(t),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(Y).map(t=>t.key)}getRenderableIds(t){const u=[];for(const m in this._tiles)this._isIdRenderable(m,t)&&u.push(this._tiles[m]);return t?u.sort((m,b)=>{const S=m.tileID,R=b.tileID,B=new g.Point(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),z=new g.Point(R.canonical.x,R.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-R.overscaledZ||z.y-B.y||z.x-B.x}).map(m=>m.tileID.key):u.map(m=>m.tileID).sort(Y).map(m=>m.key)}hasRenderableParent(t){const u=this.findLoadedParent(t,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(t,u){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(u||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,u){const m=this._tiles[t];m&&("loading"!==m.state&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,t,u)))}_tileLoaded(t,u,m,b){if(b)return t.state="errored",void(404!==b.status?this._source.fire(new g.ErrorEvent(b,{tile:t})):this.update(this.transform,this.terrain));t.timeAdded=g.exported.now(),"expired"===m&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(u,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new g.Event("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const u=this.getRenderableIds();for(let b=0;b<u.length;b++){const S=u[b];if(t.neighboringTiles&&t.neighboringTiles[S]){const R=this.getTileByID(S);m(t,R),m(R,t)}}function m(b,S){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let R=S.tileID.canonical.x-b.tileID.canonical.x;const B=S.tileID.canonical.y-b.tileID.canonical.y,z=Math.pow(2,b.tileID.canonical.z),Z=S.tileID.key;0===R&&0===B||Math.abs(B)>1||(Math.abs(R)>1&&(1===Math.abs(R+z)?R+=z:1===Math.abs(R-z)&&(R-=z)),S.dem&&b.dem&&(b.dem.backfillBorder(S.dem,R,B),b.neighboringTiles&&b.neighboringTiles[Z]&&(b.neighboringTiles[Z].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,u,m,b){for(const S in this._tiles){let R=this._tiles[S];if(b[S]||!R.hasData()||R.tileID.overscaledZ<=u||R.tileID.overscaledZ>m)continue;let B=R.tileID;for(;R&&R.tileID.overscaledZ>u+1;){const Z=R.tileID.scaledTo(R.tileID.overscaledZ-1);R=this._tiles[Z.key],R&&R.hasData()&&(B=Z)}let z=B;for(;z.overscaledZ>u;)if(z=z.scaledTo(z.overscaledZ-1),t[z.key]){b[B.key]=B;break}}}findLoadedParent(t,u){if(t.key in this._loadedParentTiles){const m=this._loadedParentTiles[t.key];return m&&m.tileID.overscaledZ>=u?m:null}for(let m=t.overscaledZ-1;m>=u;m--){const b=t.scaledTo(m),S=this._getLoadedTile(b);if(S)return S}}_getLoadedTile(t){const u=this._tiles[t.key];return u&&u.hasData()?u:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const u=Math.ceil(t.width/this._source.tileSize)+1,m=Math.ceil(t.height/this._source.tileSize)+1,b=Math.floor(u*m*5),S="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(S)}handleWrapJump(t){const u=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,u){const m={};for(const b in this._tiles){const S=this._tiles[b];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),m[S.tileID.key]=S}this._tiles=m;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}update(t,u){if(this.transform=t,this.terrain=u,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(Z=>new g.OverscaledTileID(Z.canonical.z,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y)):(m=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(m=m.filter(Z=>this._source.hasTile(Z)))):m=[];const b=t.coveringZoomLevel(this._source),S=Math.max(b-tt.maxOverzooming,this._source.minzoom),R=Math.max(b+tt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Z={};for(const ne of m)if(ne.canonical.z>this._source.minzoom){const x=ne.scaledTo(ne.canonical.z-1);Z[x.key]=x;const D=ne.scaledTo(Math.max(this._source.minzoom,Math.min(ne.canonical.z,5)));Z[D.key]=D}m=m.concat(Object.values(Z))}const B=this._updateRetainedTiles(m,b);if(ee(this._source.type)){const Z={},ne={},x=Object.keys(B);for(const D of x){const E=B[D],A=this._tiles[D];if(!A||void 0!==A.fadeEndTime&&A.fadeEndTime<=g.exported.now())continue;const k=this.findLoadedParent(E,S);k&&(this._addTile(k.tileID),Z[k.tileID.key]=k.tileID),ne[D]=E}this._retainLoadedChildren(ne,b,R,B);for(const D in Z)B[D]||(this._coveredTiles[D]=!0,B[D]=Z[D]);if(u){const D={},E={};for(const A of m)this._tiles[A.key].hasData()?D[A.key]=A:E[A.key]=A;for(const A in E){const k=E[A].children(this._source.maxzoom);this._tiles[k[0].key]&&this._tiles[k[1].key]&&this._tiles[k[2].key]&&this._tiles[k[3].key]&&(D[k[0].key]=B[k[0].key]=k[0],D[k[1].key]=B[k[1].key]=k[1],D[k[2].key]=B[k[2].key]=k[2],D[k[3].key]=B[k[3].key]=k[3],delete E[A])}for(const A in E){const k=this.findLoadedParent(E[A],this._source.minzoom);if(k){D[k.tileID.key]=B[k.tileID.key]=k.tileID;for(const G in D)D[G].isChildOf(k.tileID)&&delete D[G]}}for(const A in this._tiles)D[A]||(this._coveredTiles[A]=!0)}}for(const Z in B)this._tiles[Z].clearFadeHold();const z=g.keysDifference(this._tiles,B);for(const Z of z){const ne=this._tiles[Z];ne.hasSymbolBuckets&&!ne.holdingForFade()?ne.setHoldDuration(this.map._fadeDuration):ne.hasSymbolBuckets&&!ne.symbolFadeFinished()||this._removeTile(Z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,u){const m={},b={},S=Math.max(u-tt.maxOverzooming,this._source.minzoom),R=Math.max(u+tt.maxUnderzooming,this._source.minzoom),B={};for(const z of t){const Z=this._addTile(z);m[z.key]=z,Z.hasData()||u<this._source.maxzoom&&(B[z.key]=z)}this._retainLoadedChildren(B,u,R,m);for(const z of t){let Z=this._tiles[z.key];if(Z.hasData())continue;if(u+1>this._source.maxzoom){const x=z.children(this._source.maxzoom)[0],D=this.getTile(x);if(D&&D.hasData()){m[x.key]=x;continue}}else{const x=z.children(this._source.maxzoom);if(m[x[0].key]&&m[x[1].key]&&m[x[2].key]&&m[x[3].key])continue}let ne=Z.wasRequested();for(let x=z.overscaledZ-1;x>=S;--x){const D=z.scaledTo(x);if(b[D.key])break;if(b[D.key]=!0,Z=this.getTile(D),!Z&&ne&&(Z=this._addTile(D)),Z){const E=Z.hasData();if((ne||E)&&(m[D.key]=D),ne=Z.wasRequested(),E)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const u=[];let m,b=this._tiles[t].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){m=this._loadedParentTiles[b.key];break}u.push(b.key);const S=b.scaledTo(b.overscaledZ-1);if(m=this._getLoadedTile(S),m)break;b=S}for(const S of u)this._loadedParentTiles[S]=m}}_addTile(t){let u=this._tiles[t.key];if(u)return u;u=this._cache.getAndRemove(t),u&&(this._setTileReloadTimer(t.key,u),u.tileID=t,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,u)));const m=u;return u||(u=new yi(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,t.key,u.state))),u.uses++,this._tiles[t.key]=u,m||this._source.fire(new g.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(t,u){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const m=u.getExpiryTimeout();m&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},m))}_removeTile(t){const u=this._tiles[t];u&&(u.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,u,m){const b=[],S=this.transform;if(!S)return b;const R=m?S.getCameraQueryGeometry(t):t,B=t.map(A=>S.pointCoordinate(A,this.terrain)),z=R.map(A=>S.pointCoordinate(A,this.terrain)),Z=this.getIds();let ne=1/0,x=1/0,D=-1/0,E=-1/0;for(const A of z)ne=Math.min(ne,A.x),x=Math.min(x,A.y),D=Math.max(D,A.x),E=Math.max(E,A.y);for(let A=0;A<Z.length;A++){const k=this._tiles[Z[A]];if(k.holdingForFade())continue;const G=k.tileID,se=Math.pow(2,S.zoom-k.tileID.overscaledZ),pe=u*k.queryPadding*g.EXTENT/k.tileSize/se,me=[G.getTilePoint(new g.MercatorCoordinate(ne,x)),G.getTilePoint(new g.MercatorCoordinate(D,E))];if(me[0].x-pe<g.EXTENT&&me[0].y-pe<g.EXTENT&&me[1].x+pe>=0&&me[1].y+pe>=0){const qe=B.map(xt=>G.getTilePoint(xt)),pt=z.map(xt=>G.getTilePoint(xt));b.push({tile:k,tileID:G,queryGeometry:qe,cameraQueryGeometry:pt,scale:se})}}return b}getVisibleCoordinates(t){const u=this.getRenderableIds(t).map(m=>this._tiles[m].tileID);for(const m of u)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(ee(this._source.type))for(const t in this._tiles){const u=this._tiles[t];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=g.exported.now())return!0}return!1}setFeatureState(t,u,m){this._state.updateState(t=t||"_geojsonTileLayer",u,m)}removeFeatureState(t,u,m){this._state.removeFeatureState(t=t||"_geojsonTileLayer",u,m)}getFeatureState(t,u){return this._state.getState(t=t||"_geojsonTileLayer",u)}setDependencies(t,u,m){const b=this._tiles[t];b&&b.setDependencies(u,m)}reloadTilesForDependencies(t,u){for(const m in this._tiles)this._tiles[m].hasDependency(t,u)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(t,u))}}function Y(y,t){const u=Math.abs(2*y.wrap)-+(y.wrap<0),m=Math.abs(2*t.wrap)-+(t.wrap<0);return y.overscaledZ-t.overscaledZ||m-u||t.canonical.y-y.canonical.y||t.canonical.x-y.canonical.x}function ee(y){return"raster"===y||"image"===y||"video"===y}tt.maxOverzooming=10,tt.maxUnderzooming=3;const Me="mapboxgl_preloaded_worker_pool";class Je{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Je.workerCount;)this.workers.push(new Worker(g.config.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Me]}numActive(){return Object.keys(this.active).length}}const ue=Math.floor(g.exported.hardwareConcurrency/2);let fe;function le(){return fe||(fe=new Je),fe}Je.workerCount=g.isSafari(globalThis)?Math.max(Math.min(ue,3),1):1;class de{constructor(t,u){this.reset(t,u)}reset(t,u){this.points=t||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=g.clamp(t,0,1);let u=1,m=this._distances[u];const b=t*this.paddedLength+this.padding;for(;m<b&&u<this._distances.length;)m=this._distances[++u];const S=u-1,R=this._distances[S],B=m-R,z=B>0?(b-R)/B:0;return this.points[S].mult(1-z).add(this.points[u].mult(z))}}function Ae(y,t){let u=!0;return"always"===y||"never"!==y&&"never"!==t||(u=!1),u}class ut{constructor(t,u,m){const b=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(t/m),this.yCellCount=Math.ceil(u/m);for(let R=0;R<this.xCellCount*this.yCellCount;R++)b.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=u,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,u,m,b,S){this._forEachCell(u,m,b,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(S)}insertCircle(t,u,m,b){this._forEachCell(u-b,m-b,u+b,m+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(u),this.circles.push(m),this.circles.push(b)}_insertBoxCell(t,u,m,b,S,R){this.boxCells[S].push(R)}_insertCircleCell(t,u,m,b,S,R){this.circleCells[S].push(R)}_query(t,u,m,b,S,R,B){if(m<0||t>this.width||b<0||u>this.height)return[];const z=[];if(t<=0&&u<=0&&this.width<=m&&this.height<=b){if(S)return[{key:null,x1:t,y1:u,x2:m,y2:b}];for(let Z=0;Z<this.boxKeys.length;Z++)z.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(let Z=0;Z<this.circleKeys.length;Z++){const ne=this.circles[3*Z],x=this.circles[3*Z+1],D=this.circles[3*Z+2];z.push({key:this.circleKeys[Z],x1:ne-D,y1:x-D,x2:ne+D,y2:x+D})}}else this._forEachCell(t,u,m,b,this._queryCell,z,{hitTest:S,overlapMode:R,seenUids:{box:{},circle:{}}},B);return z}query(t,u,m,b){return this._query(t,u,m,b,!1,null)}hitTest(t,u,m,b,S,R){return this._query(t,u,m,b,!0,S,R).length>0}hitTestCircle(t,u,m,b,S){const R=t-m,B=t+m,z=u-m,Z=u+m;if(B<0||R>this.width||Z<0||z>this.height)return!1;const ne=[];return this._forEachCell(R,z,B,Z,this._queryCellCircle,ne,{hitTest:!0,overlapMode:b,circle:{x:t,y:u,radius:m},seenUids:{box:{},circle:{}}},S),ne.length>0}_queryCell(t,u,m,b,S,R,B,z){const{seenUids:Z,hitTest:ne,overlapMode:x}=B,D=this.boxCells[S];if(null!==D){const A=this.bboxes;for(const k of D)if(!Z.box[k]){Z.box[k]=!0;const G=4*k,se=this.boxKeys[k];if(t<=A[G+2]&&u<=A[G+3]&&m>=A[G+0]&&b>=A[G+1]&&(!z||z(se))&&(!ne||!Ae(x,se.overlapMode))&&(R.push({key:se,x1:A[G],y1:A[G+1],x2:A[G+2],y2:A[G+3]}),ne))return!0}}const E=this.circleCells[S];if(null!==E){const A=this.circles;for(const k of E)if(!Z.circle[k]){Z.circle[k]=!0;const G=3*k,se=this.circleKeys[k];if(this._circleAndRectCollide(A[G],A[G+1],A[G+2],t,u,m,b)&&(!z||z(se))&&(!ne||!Ae(x,se.overlapMode))){const pe=A[G],me=A[G+1],qe=A[G+2];if(R.push({key:se,x1:pe-qe,y1:me-qe,x2:pe+qe,y2:me+qe}),ne)return!0}}}return!1}_queryCellCircle(t,u,m,b,S,R,B,z){const{circle:Z,seenUids:ne,overlapMode:x}=B,D=this.boxCells[S];if(null!==D){const A=this.bboxes;for(const k of D)if(!ne.box[k]){ne.box[k]=!0;const G=4*k,se=this.boxKeys[k];if(this._circleAndRectCollide(Z.x,Z.y,Z.radius,A[G+0],A[G+1],A[G+2],A[G+3])&&(!z||z(se))&&!Ae(x,se.overlapMode))return R.push(!0),!0}}const E=this.circleCells[S];if(null!==E){const A=this.circles;for(const k of E)if(!ne.circle[k]){ne.circle[k]=!0;const G=3*k,se=this.circleKeys[k];if(this._circlesCollide(A[G],A[G+1],A[G+2],Z.x,Z.y,Z.radius)&&(!z||z(se))&&!Ae(x,se.overlapMode))return R.push(!0),!0}}}_forEachCell(t,u,m,b,S,R,B,z){const Z=this._convertToXCellCoord(t),ne=this._convertToYCellCoord(u),x=this._convertToXCellCoord(m),D=this._convertToYCellCoord(b);for(let E=Z;E<=x;E++)for(let A=ne;A<=D;A++)if(S.call(this,t,u,m,b,this.xCellCount*A+E,R,B,z))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,u,m,b,S,R){const B=b-t,z=S-u,Z=m+R;return Z*Z>B*B+z*z}_circleAndRectCollide(t,u,m,b,S,R,B){const z=(R-b)/2,Z=Math.abs(t-(b+z));if(Z>z+m)return!1;const ne=(B-S)/2,x=Math.abs(u-(S+ne));if(x>ne+m)return!1;if(Z<=z||x<=ne)return!0;const D=Z-z,E=x-ne;return D*D+E*E<=m*m}}function mt(y,t,u,m,b){const S=g.create();return t?(g.scale(S,S,[1/b,1/b,1]),u||g.rotateZ(S,S,m.angle)):g.multiply(S,m.labelPlaneMatrix,y),S}function dn(y,t,u,m,b){if(t){const S=g.clone(y);return g.scale(S,S,[b,b,1]),u||g.rotateZ(S,S,-m.angle),S}return m.glCoordMatrix}function Vt(y,t,u){let m;u?(m=[y.x,y.y,u(y.x,y.y),1],g.transformMat4(m,m,t)):(m=[y.x,y.y,0,1],_e(m,m,t));const b=m[3];return{point:new g.Point(m[0]/b,m[1]/b),signedDistanceFromCamera:b}}function mn(y,t){return.5+y/t*.5}function fn(y,t){const u=y[0]/y[3],m=y[1]/y[3];return u>=-t[0]&&u<=t[0]&&m>=-t[1]&&m<=t[1]}function Vi(y,t,u,m,b,S,R,B,z,Z){const ne=m?y.textSizeData:y.iconSizeData,x=g.evaluateSizeForZoom(ne,u.transform.zoom),D=[256/u.width*2+1,256/u.height*2+1],E=m?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;E.clear();const A=y.lineVertexArray,k=m?y.text.placedSymbolArray:y.icon.placedSymbolArray,G=u.transform.width/u.transform.height;let se=!1;for(let pe=0;pe<k.length;pe++){const me=k.get(pe);if(me.hidden||me.writingMode===g.WritingMode.vertical&&!se){re(me.numGlyphs,E);continue}let qe;if(se=!1,Z?(qe=[me.anchorX,me.anchorY,Z(me.anchorX,me.anchorY),1],g.transformMat4(qe,qe,t)):(qe=[me.anchorX,me.anchorY,0,1],_e(qe,qe,t)),!fn(qe,D)){re(me.numGlyphs,E);continue}const pt=mn(u.transform.cameraToCenterDistance,qe[3]),xt=g.evaluateSizeForFeature(ne,x,me),Ht=R?xt/pt:xt*pt,Yt=new g.Point(me.anchorX,me.anchorY),Kt=Vt(Yt,b,Z).point,_n={projections:{},offsets:{}},Sn=et(me,Ht,!1,B,t,b,S,y.glyphOffsetArray,A,E,Kt,Yt,_n,G,z,Z);se=Sn.useVertical,(Sn.notEnoughRoom||se||Sn.needsFlipping&&et(me,Ht,!0,B,t,b,S,y.glyphOffsetArray,A,E,Kt,Yt,_n,G,z,Z).notEnoughRoom)&&re(me.numGlyphs,E)}m?y.text.dynamicLayoutVertexBuffer.updateData(E):y.icon.dynamicLayoutVertexBuffer.updateData(E)}function Nt(y,t,u,m,b,S,R,B,z,Z,ne,x,D){const E=B.glyphStartIndex+B.numGlyphs,A=B.lineStartIndex,k=B.lineStartIndex+B.lineLength,G=t.getoffsetX(B.glyphStartIndex),se=t.getoffsetX(E-1),pe=J(y*G,u,m,b,S,R,B.segment,A,k,z,Z,ne,x,D);if(!pe)return null;const me=J(y*se,u,m,b,S,R,B.segment,A,k,z,Z,ne,x,D);return me?{first:pe,last:me}:null}function bt(y,t,u,m){return y===g.WritingMode.horizontal&&Math.abs(u.y-t.y)>Math.abs(u.x-t.x)*m?{useVertical:!0}:(y===g.WritingMode.vertical?t.y<u.y:t.x>u.x)?{needsFlipping:!0}:null}function et(y,t,u,m,b,S,R,B,z,Z,ne,x,D,E,A,k){const G=t/24,se=y.lineOffsetX*G,pe=y.lineOffsetY*G;let me;if(y.numGlyphs>1){const qe=y.glyphStartIndex+y.numGlyphs,pt=y.lineStartIndex,xt=y.lineStartIndex+y.lineLength,Ht=Nt(G,B,se,pe,u,ne,x,y,z,S,D,A,k);if(!Ht)return{notEnoughRoom:!0};const Yt=Vt(Ht.first.point,R,k).point,Kt=Vt(Ht.last.point,R,k).point;if(m&&!u){const _n=bt(y.writingMode,Yt,Kt,E);if(_n)return _n}me=[Ht.first];for(let _n=y.glyphStartIndex+1;_n<qe-1;_n++)me.push(J(G*B.getoffsetX(_n),se,pe,u,ne,x,y.segment,pt,xt,z,S,D,A,k));me.push(Ht.last)}else{if(m&&!u){const pt=Vt(x,b,k).point,xt=y.lineStartIndex+y.segment+1,Ht=new g.Point(z.getx(xt),z.gety(xt)),Yt=Vt(Ht,b,k),Kt=Yt.signedDistanceFromCamera>0?Yt.point:ot(x,Ht,pt,1,b,k),_n=bt(y.writingMode,pt,Kt,E);if(_n)return _n}const qe=J(G*B.getoffsetX(y.glyphStartIndex),se,pe,u,ne,x,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,z,S,D,A,k);if(!qe)return{notEnoughRoom:!0};me=[qe]}for(const qe of me)g.addDynamicAttributes(Z,qe.point,qe.angle);return{}}function ot(y,t,u,m,b,S){const R=Vt(y.add(y.sub(t)._unit()),b,S).point,B=u.sub(R);return u.add(B._mult(m/B.mag()))}function Fe(y,t){const{projectionCache:u,lineVertexArray:m,labelPlaneMatrix:b,tileAnchorPoint:S,distanceFromAnchor:R,getElevation:B,previousVertex:z,direction:Z,absOffsetX:ne}=t;if(u.projections[y])return u.projections[y];const x=new g.Point(m.getx(y),m.gety(y)),D=Vt(x,b,B);if(D.signedDistanceFromCamera>0)return u.projections[y]=D.point,D.point;const E=y-Z;return ot(0===R?S:new g.Point(m.getx(E),m.gety(E)),x,z,ne-R+1,b,B)}function Se(y,t,u){return y._unit()._perp()._mult(t*u)}function Te(y,t,u,m,b,S,R,B){const{projectionCache:z,direction:Z}=B;if(z.offsets[y])return z.offsets[y];const ne=u.add(t);if(y+Z<m||y+Z>=b)return z.offsets[y]=ne,ne;const x=Fe(y+Z,B),D=Se(x.sub(u),R,Z),E=u.add(D),A=x.add(D);return z.offsets[y]=g.findLineIntersection(S,ne,E,A)||ne,z.offsets[y]}function J(y,t,u,m,b,S,R,B,z,Z,ne,x,D,E){const A=m?y-t:y+t;let k=A>0?1:-1,G=0;m&&(k*=-1,G=Math.PI),k<0&&(G+=Math.PI);let se,pe,me=k>0?B+R:B+R+1,qe=b,pt=b,xt=0,Ht=0;const Yt=Math.abs(A),Kt=[];let _n;for(;xt+Ht<=Yt;){if(me+=k,me<B||me>=z)return null;xt+=Ht,pt=qe,pe=se;const Dn={projectionCache:x,lineVertexArray:Z,labelPlaneMatrix:ne,tileAnchorPoint:S,distanceFromAnchor:xt,getElevation:E,previousVertex:pt,direction:k,absOffsetX:Yt};if(qe=Fe(me,Dn),0===u)Kt.push(pt),_n=qe.sub(pt);else{let si;const Tn=qe.sub(pt);si=0===Tn.mag()?Se(Fe(me+k,Dn).sub(qe),u,k):Se(Tn,u,k),pe||(pe=pt.add(si)),se=Te(me,si,qe,B,z,pe,u,Dn),Kt.push(pe),_n=se.sub(pe)}Ht=_n.mag()}const Sn=_n._mult((Yt-xt)/Ht)._add(pe||pt),pi=G+Math.atan2(qe.y-pt.y,qe.x-pt.x);return Kt.push(Sn),{point:Sn,angle:D?pi:0,path:Kt}}const $=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function re(y,t){for(let u=0;u<y;u++){const m=t.length;t.resize(m+4),t.float32.set($,3*m)}}function _e(y,t,u){const m=t[0],b=t[1];return y[0]=u[0]*m+u[4]*b+u[12],y[1]=u[1]*m+u[5]*b+u[13],y[3]=u[3]*m+u[7]*b+u[15],y}const ke=100;class rt{constructor(t,u=new ut(t.width+200,t.height+200,25),m=new ut(t.width+200,t.height+200,25)){this.transform=t,this.grid=u,this.ignoredGrid=m,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ke,this.screenBottomBoundary=t.height+ke,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,u,m,b,S,R){const B=this.projectAndGetPerspectiveRatio(b,t.anchorPointX,t.anchorPointY,R),z=m*B.perspectiveRatio,Z=t.x1*z+B.point.x,ne=t.y1*z+B.point.y,x=t.x2*z+B.point.x,D=t.y2*z+B.point.y;return!this.isInsideGrid(Z,ne,x,D)||"always"!==u&&this.grid.hitTest(Z,ne,x,D,u,S)||B.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Z,ne,x,D],offscreen:this.isOffscreen(Z,ne,x,D)}}placeCollisionCircles(t,u,m,b,S,R,B,z,Z,ne,x,D,E,A){const k=[],G=new g.Point(u.anchorX,u.anchorY),se=Vt(G,R,A),pe=mn(this.transform.cameraToCenterDistance,se.signedDistanceFromCamera),me=(ne?S/pe:S*pe)/g.ONE_EM,qe=Vt(G,B,A).point,pt=Nt(me,b,u.lineOffsetX*me,u.lineOffsetY*me,!1,qe,G,u,m,B,{projections:{},offsets:{}},!1,A);let xt=!1,Ht=!1,Yt=!0;if(pt){const Kt=.5*D*pe+E,_n=new g.Point(-100,-100),Sn=new g.Point(this.screenRightBoundary,this.screenBottomBoundary),pi=new de,Dn=pt.first,si=pt.last;let Tn=[];for(let Zi=Dn.path.length-1;Zi>=1;Zi--)Tn.push(Dn.path[Zi]);for(let Zi=1;Zi<si.path.length;Zi++)Tn.push(si.path[Zi]);const qi=2.5*Kt;if(z){const Zi=Tn.map(fi=>Vt(fi,z,A));Tn=Zi.some(fi=>fi.signedDistanceFromCamera<=0)?[]:Zi.map(fi=>fi.point)}let mr=[];if(Tn.length>0){const Zi=Tn[0].clone(),fi=Tn[0].clone();for(let Jr=1;Jr<Tn.length;Jr++)Zi.x=Math.min(Zi.x,Tn[Jr].x),Zi.y=Math.min(Zi.y,Tn[Jr].y),fi.x=Math.max(fi.x,Tn[Jr].x),fi.y=Math.max(fi.y,Tn[Jr].y);mr=Zi.x>=_n.x&&fi.x<=Sn.x&&Zi.y>=_n.y&&fi.y<=Sn.y?[Tn]:fi.x<_n.x||Zi.x>Sn.x||fi.y<_n.y||Zi.y>Sn.y?[]:g.clipLine([Tn],_n.x,_n.y,Sn.x,Sn.y)}for(const Zi of mr){pi.reset(Zi,.25*Kt);let fi=0;fi=pi.length<=.5*Kt?1:Math.ceil(pi.paddedLength/qi)+1;for(let Jr=0;Jr<fi;Jr++){const Yi=Jr/Math.max(fi-1,1),Sr=pi.lerp(Yi),Lr=Sr.x+ke,us=Sr.y+ke;k.push(Lr,us,Kt,0);const or=Lr-Kt,el=us-Kt,na=Lr+Kt,Va=us+Kt;if(Yt=Yt&&this.isOffscreen(or,el,na,Va),Ht=Ht||this.isInsideGrid(or,el,na,Va),"always"!==t&&this.grid.hitTestCircle(Lr,us,Kt,t,x)&&(xt=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:xt}}}}return{circles:!Z&&xt||!Ht||pe<this.perspectiveRatioCutoff?[]:k,offscreen:Yt,collisionDetected:xt}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const u=[];let m=1/0,b=1/0,S=-1/0,R=-1/0;for(const ne of t){const x=new g.Point(ne.x+ke,ne.y+ke);m=Math.min(m,x.x),b=Math.min(b,x.y),S=Math.max(S,x.x),R=Math.max(R,x.y),u.push(x)}const B=this.grid.query(m,b,S,R).concat(this.ignoredGrid.query(m,b,S,R)),z={},Z={};for(const ne of B){const x=ne.key;if(void 0===z[x.bucketInstanceId]&&(z[x.bucketInstanceId]={}),z[x.bucketInstanceId][x.featureIndex])continue;const D=[new g.Point(ne.x1,ne.y1),new g.Point(ne.x2,ne.y1),new g.Point(ne.x2,ne.y2),new g.Point(ne.x1,ne.y2)];g.polygonIntersectsPolygon(u,D)&&(z[x.bucketInstanceId][x.featureIndex]=!0,void 0===Z[x.bucketInstanceId]&&(Z[x.bucketInstanceId]=[]),Z[x.bucketInstanceId].push(x.featureIndex))}return Z}insertCollisionBox(t,u,m,b,S,R){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:S,collisionGroupID:R,overlapMode:u},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,u,m,b,S,R){const B=m?this.ignoredGrid:this.grid,z={bucketInstanceId:b,featureIndex:S,collisionGroupID:R,overlapMode:u};for(let Z=0;Z<t.length;Z+=4)B.insertCircle(z,t[Z],t[Z+1],t[Z+2])}projectAndGetPerspectiveRatio(t,u,m,b){let S;return b?(S=[u,m,b(u,m),1],g.transformMat4(S,S,t)):(S=[u,m,0,1],_e(S,S,t)),{point:new g.Point((S[0]/S[3]+1)/2*this.transform.width+ke,(-S[1]/S[3]+1)/2*this.transform.height+ke),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S[3]*.5}}isOffscreen(t,u,m,b){return m<ke||t>=this.screenRightBoundary||b<ke||u>this.screenBottomBoundary}isInsideGrid(t,u,m,b){return m>=0&&t<this.gridRightBoundary&&b>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const t=g.identity([]);return g.translate(t,t,[-100,-100,0]),t}}function Ye(y,t,u){return t*(g.EXTENT/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class Xe{constructor(t,u,m,b){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?u:-u))):b&&m?1:0,this.placed=m}isHidden(){return 0===this.opacity&&!this.placed}}class Ke{constructor(t,u,m,b,S){this.text=new Xe(t?t.text:null,u,m,S),this.icon=new Xe(t?t.icon:null,u,b,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class at{constructor(t,u,m){this.text=t,this.icon=u,this.skipFade=m}}class Rt{constructor(){this.invProjMatrix=g.create(),this.viewportMatrix=g.create(),this.circles=[]}}class Bt{constructor(t,u,m,b,S){this.bucketInstanceId=t,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=b,this.tileID=S}}class xe{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const u=++this.maxGroupID;this.collisionGroups[t]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[t]}}function Pe(y,t,u,m,b){const{horizontalAlign:S,verticalAlign:R}=g.getAnchorAlignment(y),B=-(S-.5)*t,z=-(R-.5)*u,Z=g.evaluateVariableOffset(y,m);return new g.Point(B+Z[0]*b,z+Z[1]*b)}function De(y,t,u,m,b,S){const{x1:R,x2:B,y1:z,y2:Z,anchorPointX:ne,anchorPointY:x}=y,D=new g.Point(t,u);return m&&D._rotate(b?S:-S),{x1:R+D.x,y1:z+D.y,x2:B+D.x,y2:Z+D.y,anchorPointX:ne,anchorPointY:x}}class Ze{constructor(t,u,m,b,S){this.transform=t.clone(),this.terrain=u,this.collisionIndex=new rt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new xe(b),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,u,m,b){const S=m.getBucket(u),R=m.latestFeatureIndex;if(!S||!R||u.id!==S.layerIds[0])return;const B=m.collisionBoxArray,z=S.layers[0].layout,Z=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),ne=m.tileSize/g.EXTENT,x=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),D="map"===z.get("text-pitch-alignment"),E="map"===z.get("text-rotation-alignment"),A=Ye(m,1,this.transform.zoom),k=mt(x,D,E,this.transform,A);let G=null;if(D){const pe=dn(x,D,E,this.transform,A);G=g.multiply([],this.transform.labelPlaneMatrix,pe)}this.retainedQueryData[S.bucketInstanceId]=new Bt(S.bucketInstanceId,R,S.sourceLayerIndex,S.index,m.tileID);const se={bucket:S,layout:z,posMatrix:x,textLabelPlaneMatrix:k,labelToScreenMatrix:G,scale:Z,textPixelRatio:ne,holdingForFade:m.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:g.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(b)for(const pe of S.sortKeyRanges){const{sortKey:me,symbolInstanceStart:qe,symbolInstanceEnd:pt}=pe;t.push({sortKey:me,symbolInstanceStart:qe,symbolInstanceEnd:pt,parameters:se})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:se})}attemptAnchorPlacement(t,u,m,b,S,R,B,z,Z,ne,x,D,E,A,k,G){const se=[D.textOffset0,D.textOffset1],pe=Pe(t,m,b,se,S),me=this.collisionIndex.placeCollisionBox(De(u,pe.x,pe.y,R,B,this.transform.angle),x,z,Z,ne.predicate,G);if((!k||0!==this.collisionIndex.placeCollisionBox(De(k,pe.x,pe.y,R,B,this.transform.angle),x,z,Z,ne.predicate,G).box.length)&&me.box.length>0){let qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[D.crossTileID]&&this.prevPlacement.placements[D.crossTileID]&&this.prevPlacement.placements[D.crossTileID].text&&(qe=this.prevPlacement.variableOffsets[D.crossTileID].anchor),0===D.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[D.crossTileID]={textOffset:se,width:m,height:b,anchor:t,textBoxScale:S,prevAnchor:qe},this.markUsedJustification(E,t,D,A),E.allowVerticalPlacement&&(this.markUsedOrientation(E,A,D),this.placedOrientations[D.crossTileID]=A),{shift:pe,placedGlyphBoxes:me}}}placeLayerBucketPart(t,u,m){const{bucket:b,layout:S,posMatrix:R,textLabelPlaneMatrix:B,labelToScreenMatrix:z,textPixelRatio:Z,holdingForFade:ne,collisionBoxArray:x,partiallyEvaluatedTextSize:D,collisionGroup:E}=t.parameters,A=S.get("text-optional"),k=S.get("icon-optional"),G=g.getOverlapMode(S,"text-overlap","text-allow-overlap"),se="always"===G,pe=g.getOverlapMode(S,"icon-overlap","icon-allow-overlap"),me="always"===pe,qe="map"===S.get("text-rotation-alignment"),pt="map"===S.get("text-pitch-alignment"),xt="none"!==S.get("icon-text-fit"),Ht="viewport-y"===S.get("symbol-z-order"),Yt=se&&(me||!b.hasIconData()||k),Kt=me&&(se||!b.hasTextData()||A);!b.collisionArrays&&x&&b.deserializeCollisionBoxes(x);const _n=this.retainedQueryData[b.bucketInstanceId].tileID,Sn=this.terrain?(Dn,si)=>this.terrain.getElevation(_n,Dn,si):null,pi=(Dn,si)=>{if(u[Dn.crossTileID])return;if(ne)return void(this.placements[Dn.crossTileID]=new at(!1,!1,!1));let Tn=!1,qi=!1,mr=!0,Zi=null,fi={box:null,offscreen:null},Jr={box:null,offscreen:null},Yi=null,Sr=null,Lr=null,us=0,or=0,el=0;si.textFeatureIndex?us=si.textFeatureIndex:Dn.useRuntimeCollisionCircles&&(us=Dn.featureIndex),si.verticalTextFeatureIndex&&(or=si.verticalTextFeatureIndex);const na=si.textBox;if(na){const Ro=Ki=>{let co=g.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Ki&&this.prevPlacement){const uo=this.prevPlacement.placedOrientations[Dn.crossTileID];uo&&(this.placedOrientations[Dn.crossTileID]=uo,co=uo,this.markUsedOrientation(b,co,Dn))}return co},Qr=(Ki,co)=>{if(b.allowVerticalPlacement&&Dn.numVerticalGlyphVertices>0&&si.verticalTextBox){for(const uo of b.writingModes)if(uo===g.WritingMode.vertical?(fi=co(),Jr=fi):fi=Ki(),fi&&fi.box&&fi.box.length)break}else fi=Ki()};if(S.get("text-variable-anchor")){let Ki=S.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Dn.crossTileID]){const Xi=this.prevPlacement.variableOffsets[Dn.crossTileID];Ki.indexOf(Xi.anchor)>0&&(Ki=Ki.filter(Go=>Go!==Xi.anchor),Ki.unshift(Xi.anchor))}const co=(Xi,Go,Hl)=>{const El=Xi.x2-Xi.x1,$l=Xi.y2-Xi.y1,cc=Dn.textBoxScale,uc=xt&&"never"===pe?Go:null;let ba={box:[],offscreen:!1};const tl="never"!==G?2*Ki.length:Ki.length;for(let vo=0;vo<tl;++vo){const Zo=this.attemptAnchorPlacement(Ki[vo%Ki.length],Xi,El,$l,cc,qe,pt,Z,R,E,vo>=Ki.length?G:"never",Dn,b,Hl,uc,Sn);if(Zo&&(ba=Zo.placedGlyphBoxes,ba&&ba.box&&ba.box.length)){Tn=!0,Zi=Zo.shift;break}}return ba};Qr(()=>co(na,si.iconBox,g.WritingMode.horizontal),()=>{const Xi=si.verticalTextBox;return b.allowVerticalPlacement&&!(fi&&fi.box&&fi.box.length)&&Dn.numVerticalGlyphVertices>0&&Xi?co(Xi,si.verticalIconBox,g.WritingMode.vertical):{box:null,offscreen:null}}),fi&&(Tn=fi.box,mr=fi.offscreen);const uo=Ro(fi&&fi.box);if(!Tn&&this.prevPlacement){const Xi=this.prevPlacement.variableOffsets[Dn.crossTileID];Xi&&(this.variableOffsets[Dn.crossTileID]=Xi,this.markUsedJustification(b,Xi.anchor,Dn,uo))}}else{const Ki=(co,uo)=>{const Xi=this.collisionIndex.placeCollisionBox(co,G,Z,R,E.predicate,Sn);return Xi&&Xi.box&&Xi.box.length&&(this.markUsedOrientation(b,uo,Dn),this.placedOrientations[Dn.crossTileID]=uo),Xi};Qr(()=>Ki(na,g.WritingMode.horizontal),()=>{const co=si.verticalTextBox;return b.allowVerticalPlacement&&Dn.numVerticalGlyphVertices>0&&co?Ki(co,g.WritingMode.vertical):{box:null,offscreen:null}}),Ro(fi&&fi.box&&fi.box.length)}}if(Yi=fi,Tn=Yi&&Yi.box&&Yi.box.length>0,mr=Yi&&Yi.offscreen,Dn.useRuntimeCollisionCircles){const Ro=b.text.placedSymbolArray.get(Dn.centerJustifiedTextSymbolIndex),Qr=g.evaluateSizeForFeature(b.textSizeData,D,Ro),Ki=S.get("text-padding");Sr=this.collisionIndex.placeCollisionCircles(G,Ro,b.lineVertexArray,b.glyphOffsetArray,Qr,R,B,z,m,pt,E.predicate,Dn.collisionCircleDiameter,Ki,Sn),Sr.circles.length&&Sr.collisionDetected&&!m&&g.warnOnce("Collisions detected, but collision boxes are not shown"),Tn=se||Sr.circles.length>0&&!Sr.collisionDetected,mr=mr&&Sr.offscreen}if(si.iconFeatureIndex&&(el=si.iconFeatureIndex),si.iconBox){const Ro=Qr=>{const Ki=xt&&Zi?De(Qr,Zi.x,Zi.y,qe,pt,this.transform.angle):Qr;return this.collisionIndex.placeCollisionBox(Ki,pe,Z,R,E.predicate,Sn)};Jr&&Jr.box&&Jr.box.length&&si.verticalIconBox?(Lr=Ro(si.verticalIconBox),qi=Lr.box.length>0):(Lr=Ro(si.iconBox),qi=Lr.box.length>0),mr=mr&&Lr.offscreen}const Va=A||0===Dn.numHorizontalGlyphVertices&&0===Dn.numVerticalGlyphVertices,Mo=k||0===Dn.numIconVertices;if(Va||Mo?Mo?Va||(qi=qi&&Tn):Tn=qi&&Tn:qi=Tn=qi&&Tn,Tn&&Yi&&Yi.box&&this.collisionIndex.insertCollisionBox(Yi.box,G,S.get("text-ignore-placement"),b.bucketInstanceId,Jr&&Jr.box&&or?or:us,E.ID),qi&&Lr&&this.collisionIndex.insertCollisionBox(Lr.box,pe,S.get("icon-ignore-placement"),b.bucketInstanceId,el,E.ID),Sr&&(Tn&&this.collisionIndex.insertCollisionCircles(Sr.circles,G,S.get("text-ignore-placement"),b.bucketInstanceId,us,E.ID),m)){const Ro=b.bucketInstanceId;let Qr=this.collisionCircleArrays[Ro];void 0===Qr&&(Qr=this.collisionCircleArrays[Ro]=new Rt);for(let Ki=0;Ki<Sr.circles.length;Ki+=4)Qr.circles.push(Sr.circles[Ki+0]),Qr.circles.push(Sr.circles[Ki+1]),Qr.circles.push(Sr.circles[Ki+2]),Qr.circles.push(Sr.collisionDetected?1:0)}if(0===Dn.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===b.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Dn.crossTileID]=new at(Tn||Yt,qi||Kt,mr||b.justReloaded),u[Dn.crossTileID]=!0};if(Ht){if(0!==t.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Dn=b.getSortedSymbolIndexes(this.transform.angle);for(let si=Dn.length-1;si>=0;--si){const Tn=Dn[si];pi(b.symbolInstances.get(Tn),b.collisionArrays[Tn])}}else for(let Dn=t.symbolInstanceStart;Dn<t.symbolInstanceEnd;Dn++)pi(b.symbolInstances.get(Dn),b.collisionArrays[Dn]);if(m&&b.bucketInstanceId in this.collisionCircleArrays){const Dn=this.collisionCircleArrays[b.bucketInstanceId];g.invert(Dn.invProjMatrix,R),Dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(t,u,m,b){let S;S=b===g.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[g.getAnchorJustification(u)];const R=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const B of R)B>=0&&(t.text.placedSymbolArray.get(B).crossTileID=S>=0&&B!==S?0:m.crossTileID)}markUsedOrientation(t,u,m){const b=u===g.WritingMode.horizontal||u===g.WritingMode.horizontalOnly?u:0,S=u===g.WritingMode.vertical?u:0,R=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const B of R)t.text.placedSymbolArray.get(B).placedOrientation=b;m.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const b=u?u.symbolFadeChange(t):1,S=u?u.opacities:{},R=u?u.variableOffsets:{},B=u?u.placedOrientations:{};for(const z in this.placements){const Z=this.placements[z],ne=S[z];ne?(this.opacities[z]=new Ke(ne,b,Z.text,Z.icon),m=m||Z.text!==ne.text.placed||Z.icon!==ne.icon.placed):(this.opacities[z]=new Ke(null,b,Z.text,Z.icon,Z.skipFade),m=m||Z.text||Z.icon)}for(const z in S){const Z=S[z];if(!this.opacities[z]){const ne=new Ke(Z,b,!1,!1);ne.isHidden()||(this.opacities[z]=ne,m=m||Z.text.placed||Z.icon.placed)}}for(const z in R)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=R[z]);for(const z in B)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=B[z]);if(u&&void 0===u.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:t)}updateLayerOpacities(t,u){const m={};for(const b of u){const S=b.getBucket(t);S&&b.latestFeatureIndex&&t.id===S.layerIds[0]&&this.updateBucketOpacities(S,m,b.collisionBoxArray)}}updateBucketOpacities(t,u,m){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const b=t.layers[0].layout,S=new Ke(null,0,!1,!1,!0),R=b.get("text-allow-overlap"),B=b.get("icon-allow-overlap"),z=b.get("text-variable-anchor"),Z="map"===b.get("text-rotation-alignment"),ne="map"===b.get("text-pitch-alignment"),x="none"!==b.get("icon-text-fit"),D=new Ke(null,0,R&&(B||!t.hasIconData()||b.get("icon-optional")),B&&(R||!t.hasTextData()||b.get("text-optional")),!0);!t.collisionArrays&&m&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(m);const E=(A,k,G)=>{for(let se=0;se<k/4;se++)A.opacityVertexArray.emplaceBack(G);A.hasVisibleVertices=A.hasVisibleVertices||G!==Pr};for(let A=0;A<t.symbolInstances.length;A++){const k=t.symbolInstances.get(A),{numHorizontalGlyphVertices:G,numVerticalGlyphVertices:se,crossTileID:pe}=k;let me=this.opacities[pe];u[pe]?me=S:me||(me=D,this.opacities[pe]=me),u[pe]=!0;const qe=k.numIconVertices>0,pt=this.placedOrientations[k.crossTileID],xt=pt===g.WritingMode.vertical,Ht=pt===g.WritingMode.horizontal||pt===g.WritingMode.horizontalOnly;if(G>0||se>0){const Yt=Ui(me.text);E(t.text,G,xt?Pr:Yt),E(t.text,se,Ht?Pr:Yt);const Kt=me.text.isHidden();[k.rightJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.leftJustifiedTextSymbolIndex].forEach(pi=>{pi>=0&&(t.text.placedSymbolArray.get(pi).hidden=Kt||xt?1:0)}),k.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(k.verticalPlacedTextSymbolIndex).hidden=Kt||Ht?1:0);const _n=this.variableOffsets[k.crossTileID];_n&&this.markUsedJustification(t,_n.anchor,k,pt);const Sn=this.placedOrientations[k.crossTileID];Sn&&(this.markUsedJustification(t,"left",k,Sn),this.markUsedOrientation(t,Sn,k))}if(qe){const Yt=Ui(me.icon),Kt=!(x&&k.verticalPlacedIconSymbolIndex&&xt);k.placedIconSymbolIndex>=0&&(E(t.icon,k.numIconVertices,Kt?Yt:Pr),t.icon.placedSymbolArray.get(k.placedIconSymbolIndex).hidden=me.icon.isHidden()),k.verticalPlacedIconSymbolIndex>=0&&(E(t.icon,k.numVerticalIconVertices,Kt?Pr:Yt),t.icon.placedSymbolArray.get(k.verticalPlacedIconSymbolIndex).hidden=me.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Yt=t.collisionArrays[A];if(Yt){let Kt=new g.Point(0,0);if(Yt.textBox||Yt.verticalTextBox){let Sn=!0;if(z){const pi=this.variableOffsets[pe];pi?(Kt=Pe(pi.anchor,pi.width,pi.height,pi.textOffset,pi.textBoxScale),Z&&Kt._rotate(ne?this.transform.angle:-this.transform.angle)):Sn=!1}Yt.textBox&&_t(t.textCollisionBox.collisionVertexArray,me.text.placed,!Sn||xt,Kt.x,Kt.y),Yt.verticalTextBox&&_t(t.textCollisionBox.collisionVertexArray,me.text.placed,!Sn||Ht,Kt.x,Kt.y)}const _n=Boolean(!Ht&&Yt.verticalIconBox);Yt.iconBox&&_t(t.iconCollisionBox.collisionVertexArray,me.icon.placed,_n,x?Kt.x:0,x?Kt.y:0),Yt.verticalIconBox&&_t(t.iconCollisionBox.collisionVertexArray,me.icon.placed,!_n,x?Kt.x:0,x?Kt.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const A=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=A.invProjMatrix,t.placementViewportMatrix=A.viewportMatrix,t.collisionCircleArray=A.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,u){const m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>t}setStale(){this.stale=!0}}function _t(y,t,u,m,b){y.emplaceBack(t?1:0,u?1:0,m||0,b||0),y.emplaceBack(t?1:0,u?1:0,m||0,b||0),y.emplaceBack(t?1:0,u?1:0,m||0,b||0),y.emplaceBack(t?1:0,u?1:0,m||0,b||0)}const qt=Math.pow(2,25),In=Math.pow(2,24),xn=Math.pow(2,17),Jn=Math.pow(2,16),Bi=Math.pow(2,9),Ln=Math.pow(2,8),Si=Math.pow(2,1);function Ui(y){if(0===y.opacity&&!y.placed)return 0;if(1===y.opacity&&y.placed)return 4294967295;const t=y.placed?1:0,u=Math.floor(127*y.opacity);return u*qt+t*In+u*xn+t*Jn+u*Bi+t*Ln+u*Si+t}const Pr=0;class ro{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,u,m,b,S){const R=this._bucketParts;for(;this._currentTileIndex<t.length;)if(u.getBucketParts(R,b,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort((B,z)=>B.sortKey-z.sortKey));this._currentPartIndex<R.length;)if(u.placeLayerBucketPart(R[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,S())return!0;return!1}}class _r{constructor(t,u,m,b,S,R,B,z){this.placement=new Ze(t,u,R,B,z),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(t,u,m){const b=g.exported.now(),S=()=>!this._forceFullPlacement&&g.exported.now()-b>2;for(;this._currentPlacementIndex>=0;){const R=u[t[this._currentPlacementIndex]],B=this.placement.collisionIndex.transform.zoom;if("symbol"===R.type&&(!R.minzoom||R.minzoom<=B)&&(!R.maxzoom||R.maxzoom>B)){if(this._inProgressLayer||(this._inProgressLayer=new ro(R)),this._inProgressLayer.continuePlacement(m[R.source],this.placement,this._showCollisionBoxes,R,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const yr=512/g.EXTENT/2;class Ii{constructor(t,u,m){this.tileID=t,this.bucketInstanceId=m,this._symbolsByKey={};const b=new Map;for(let S=0;S<u.length;S++){const R=u.get(S),B=R.key,z=b.get(B);z?z.push(R):b.set(B,[R])}for(const[S,R]of b){const B={positions:R.map(z=>({x:Math.floor(z.anchorX*yr),y:Math.floor(z.anchorY*yr)})),crossTileIDs:R.map(z=>z.crossTileID)};if(B.positions.length>128){const z=new g.KDBush(B.positions,Z=>Z.x,Z=>Z.y,16,Uint16Array);delete z.points,delete B.positions,B.index=z}this._symbolsByKey[S]=B}}getScaledCoordinates(t,u){const{x:m,y:b,z:S}=this.tileID.canonical,{x:R,y:B,z}=u.canonical,Z=yr/Math.pow(2,z-S),ne=(B*g.EXTENT+t.anchorY)*Z,x=b*g.EXTENT*yr;return{x:Math.floor((R*g.EXTENT+t.anchorX)*Z-m*g.EXTENT*yr),y:Math.floor(ne-x)}}findMatches(t,u,m){const b=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let S=0;S<t.length;S++){const R=t.get(S);if(R.crossTileID)continue;const B=this._symbolsByKey[R.key];if(!B)continue;const z=this.getScaledCoordinates(R,u);if(B.index){const Z=B.index.range(z.x-b,z.y-b,z.x+b,z.y+b).sort();for(const ne of Z){const x=B.crossTileIDs[ne];if(!m[x]){m[x]=!0,R.crossTileID=x;break}}}else if(B.positions)for(let Z=0;Z<B.positions.length;Z++){const ne=B.positions[Z],x=B.crossTileIDs[Z];if(Math.abs(ne.x-z.x)<=b&&Math.abs(ne.y-z.y)<=b&&!m[x]){m[x]=!0,R.crossTileID=x;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class oo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class zo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const u=Math.round((t-this.lng)/360);if(0!==u)for(const m in this.indexes){const b=this.indexes[m],S={};for(const R in b){const B=b[R];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+u),S[B.tileID.key]=B}this.indexes[m]=S}this.lng=t}addBucket(t,u,m){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let S=0;S<u.symbolInstances.length;S++)u.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const b=this.usedCrossTileIDs[t.overscaledZ];for(const S in this.indexes){const R=this.indexes[S];if(Number(S)>t.overscaledZ)for(const B in R){const z=R[B];z.tileID.isChildOf(t)&&z.findMatches(u.symbolInstances,t,b)}else{const B=R[t.scaledTo(Number(S)).key];B&&B.findMatches(u.symbolInstances,t,b)}}for(let S=0;S<u.symbolInstances.length;S++){const R=u.symbolInstances.get(S);R.crossTileID||(R.crossTileID=m.generate(),b[R.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ii(t,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(t,u){for(const m of u.getCrossTileIDsLists())for(const b of m)delete this.usedCrossTileIDs[t][b]}removeStaleBuckets(t){let u=!1;for(const m in this.indexes){const b=this.indexes[m];for(const S in b)t[b[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,b[S]),delete b[S],u=!0)}return u}}class Er{constructor(){this.layerIndexes={},this.crossTileIDs=new oo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,u,m){let b=this.layerIndexes[t.id];void 0===b&&(b=this.layerIndexes[t.id]=new zo);let S=!1;const R={};b.handleWrapJump(m);for(const B of u){const z=B.getBucket(t);z&&t.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(B.tileID,z,this.crossTileIDs)&&(S=!0),R[z.bucketInstanceId]=!0)}return b.removeStaleBuckets(R)&&(S=!0),S}pruneUnusedLayers(t){const u={};t.forEach(m=>{u[m]=!0});for(const m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}const xi=(y,t)=>g.emitValidationErrors(y,t&&t.filter(u=>"source.canvas"!==u.identifier)),Fr=g.pick(g.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),ps=g.pick(g.operations,["setCenter","setZoom","setBearing","setPitch"]),Nr=g.emptyStyle();class ki extends g.Evented{constructor(t,u={}){super(),this.map=t,this.dispatcher=new nn(le(),this,t._getMapId()),this.imageManager=new Ft,this.imageManager.setEventedParent(this),this.glyphManager=new St(t._requestManager,u.localIdeographFontFamily),this.lineAtlas=new mi(256,512),this.crossTileSymbolIndex=new Er,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new g.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",g.getReferrer());const m=this;this._rtlTextPluginCallback=ki.registerForPluginStateChange(b=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(S,R)=>{if(g.triggerPluginCompletionEvent(S),R&&R.every(B=>B))for(const B in m.sourceCaches){const z=m.sourceCaches[B].getSource().type;"vector"!==z&&"geojson"!==z||m.sourceCaches[B].reload()}})}),this.on("data",b=>{if("source"!==b.dataType||"metadata"!==b.sourceDataType)return;const S=this.sourceCaches[b.sourceId];if(!S)return;const R=S.getSource();if(R&&R.vectorLayerIds)for(const B in this._layers){const z=this._layers[B];z.source===R.id&&this._validateLayer(z)}})}loadURL(t,u={},m){this.fire(new g.Event("dataloading",{dataType:"style"})),u.validate="boolean"!=typeof u.validate||u.validate;const b=this.map._requestManager.transformRequest(t,We.Style);this._request=g.getJSON(b,(S,R)=>{this._request=null,S?this.fire(new g.ErrorEvent(S)):R&&this._load(R,u,m)})}loadJSON(t,u={},m){this.fire(new g.Event("dataloading",{dataType:"style"})),this._request=g.exported.frame(()=>{this._request=null,u.validate=!1!==u.validate,this._load(t,u,m)})}loadEmpty(){this.fire(new g.Event("dataloading",{dataType:"style"})),this._load(Nr,{validate:!1})}_load(t,u,m){const b=u.transformStyle?u.transformStyle(m,t):t;if(!u.validate||!xi(this,g.validateStyle(b))){this._loaded=!0,this.stylesheet=b;for(const S in b.sources)this.addSource(S,b.sources[S],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Xn(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new g.Event("data",{dataType:"style"})),this.fire(new g.Event("style.load"))}}_createLayers(){const t=g.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",t),this._order=t.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of t){const m=g.createStyleLayer(u);m.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=m}}_loadSprite(t,u=!1,m){this.imageManager.setLoaded(!1),this._spriteRequest=function(b,S,R,B){const z=Oe(b),Z=z.length,ne=R>1?"@2x":"",x={},D={},E={};for(const{id:A,url:k}of z){const G=S.transformRequest(S.normalizeSpriteURL(k,ne,".json"),We.SpriteJSON),se=`${A}_${G.url}`;x[se]=g.getJSON(G,(qe,pt)=>{delete x[se],D[A]=pt,Ne(B,D,E,qe,Z)});const pe=S.transformRequest(S.normalizeSpriteURL(k,ne,".png"),We.SpriteImage),me=`${A}_${pe.url}`;x[me]=je.getImage(pe,(qe,pt)=>{delete x[me],E[A]=pt,Ne(B,D,E,qe,Z)})}return{cancel(){for(const A of Object.values(x))A.cancel()}}}(t,this.map._requestManager,this.map.getPixelRatio(),(b,S)=>{if(this._spriteRequest=null,b)this.fire(new g.ErrorEvent(b));else if(S)for(const R in S){this._spritesImagesIds[R]=[];const B=this._spritesImagesIds[R]?this._spritesImagesIds[R].filter(z=>!(z in S)):[];for(const z of B)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in S[R]){const Z="default"===R?z:`${R}:${z}`;this._spritesImagesIds[R].push(Z),Z in this.imageManager.images?this.imageManager.updateImage(Z,S[R][z],!1):this.imageManager.addImage(Z,S[R][z]),u&&(this._changedImages[Z]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"})),m&&m(b)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}_validateLayer(t){const u=this.sourceCaches[t.source];if(!u)return;const m=t.sourceLayer;if(!m)return;const b=u.getSource();("geojson"===b.type||b.vectorLayerIds&&-1===b.vectorLayerIds.indexOf(m))&&this.fire(new g.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${b.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t){const u=this._serializedAllLayers();if(!t||0===t.length)return Object.values(u);const m=[];for(const b of t)u[b]&&m.push(u[b]);return m}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const u=Object.keys(this._layers);for(const m of u){const b=this._layers[m];"custom"!==b.type&&(t[m]=b.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const u=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(b.length||S.length)&&this._updateWorkerLayers(b,S);for(const R in this._updatedSources){const B=this._updatedSources[R];if("reload"===B)this._reloadSource(R);else{if("clear"!==B)throw new Error(`Invalid action ${B}`);this._clearSource(R)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const R in this._updatedPaintProps)this._layers[R].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const m={};for(const b in this.sourceCaches){const S=this.sourceCaches[b];m[b]=S.used,S.used=!1}for(const b of this._order){const S=this._layers[b];S.recalculate(t,this._availableImages),!S.isHidden(t.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const b in m){const S=this.sourceCaches[b];m[b]!==S.used&&S.fire(new g.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(t),this.z=t.zoom,u&&this.fire(new g.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(t),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,u={}){this._checkLoaded();const m=this.serialize();if(t=u.transformStyle?u.transformStyle(m,t):t,xi(this,g.validateStyle(t)))return!1;(t=g.clone$1(t)).layers=g.derefLayers(t.layers);const b=g.diffStyles(m,t).filter(R=>!(R.command in ps));if(0===b.length)return!1;const S=b.filter(R=>!(R.command in Fr));if(S.length>0)throw new Error(`Unimplemented: ${S.map(R=>R.command).join(", ")}.`);for(const R of b)"setTransition"!==R.command&&this[R.command].apply(this,R.args);return this.stylesheet=t,!0}addImage(t,u){if(this.getImage(t))return this.fire(new g.ErrorEvent(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,u),this._afterImageUpdated(t)}updateImage(t,u){this.imageManager.updateImage(t,u)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new g.ErrorEvent(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,u,m={}){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error(`Source "${t}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(g.validateStyle.source,`sources.${t}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const b=this.sourceCaches[t]=new tt(t,u,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:b.serialize(),sourceId:t})),b.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===t)return this.fire(new g.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${m}" is using it.`)));const u=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],u.fire(new g.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,u){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error(`There is no source with this ID=${t}`);const m=this.sourceCaches[t].getSource();if("geojson"!==m.type)throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(u),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,u,m={}){this._checkLoaded();const b=t.id;if(this.getLayer(b))return void this.fire(new g.ErrorEvent(new Error(`Layer "${b}" already exists on this map.`)));let S;if("custom"===t.type){if(xi(this,g.validateCustomStyleLayer(t)))return;S=g.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(b,t.source),t=g.clone$1(t),t=g.extend(t,{source:b})),this._validate(g.validateStyle.layer,`layers.${b}`,t,{arrayIndex:-1},m))return;S=g.createStyleLayer(t),this._validateLayer(S),S.setEventedParent(this,{layer:{id:b}})}const R=u?this._order.indexOf(u):this._order.length;if(u&&-1===R)this.fire(new g.ErrorEvent(new Error(`Cannot add layer "${b}" before non-existing layer "${u}".`)));else{if(this._order.splice(R,0,b),this._layerOrderChanged=!0,this._layers[b]=S,this._removedLayers[b]&&S.source&&"custom"!==S.type){const B=this._removedLayers[b];delete this._removedLayers[b],B.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(t,u){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new g.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===u)return;const m=this._order.indexOf(t);this._order.splice(m,1);const b=u?this._order.indexOf(u):this._order.length;u&&-1===b?this.fire(new g.ErrorEvent(new Error(`Cannot move layer "${t}" before non-existing layer "${u}".`))):(this._order.splice(b,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const u=this._layers[t];if(!u)return void this.fire(new g.ErrorEvent(new Error(`Cannot remove non-existing layer "${t}".`)));u.setEventedParent(null);const m=this._order.indexOf(t);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=u,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],u.onRemove&&u.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,u,m){this._checkLoaded();const b=this.getLayer(t);b?b.minzoom===u&&b.maxzoom===m||(null!=u&&(b.minzoom=u),null!=m&&(b.maxzoom=m),this._updateLayer(b)):this.fire(new g.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,u,m={}){this._checkLoaded();const b=this.getLayer(t);if(b){if(!g.deepEqual(b.filter,u))return null==u?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(g.validateStyle.filter,`layers.${b.id}.filter`,u,null,m)||(b.filter=g.clone$1(u),this._updateLayer(b)))}else this.fire(new g.ErrorEvent(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return g.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,u,m,b={}){this._checkLoaded();const S=this.getLayer(t);S?g.deepEqual(S.getLayoutProperty(u),m)||(S.setLayoutProperty(u,m,b),this._updateLayer(S)):this.fire(new g.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,u){const m=this.getLayer(t);if(m)return m.getLayoutProperty(u);this.fire(new g.ErrorEvent(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,u,m,b={}){this._checkLoaded();const S=this.getLayer(t);S?g.deepEqual(S.getPaintProperty(u),m)||(S.setPaintProperty(u,m,b)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new g.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,u){return this.getLayer(t).getPaintProperty(u)}setFeatureState(t,u){this._checkLoaded();const m=t.source,b=t.sourceLayer,S=this.sourceCaches[m];if(void 0===S)return void this.fire(new g.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const R=S.getSource().type;"geojson"===R&&b?this.fire(new g.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==R||b?(void 0===t.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided."))),S.setFeatureState(b,t.id,u)):this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,u){this._checkLoaded();const m=t.source,b=this.sourceCaches[m];if(void 0===b)return void this.fire(new g.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const S=b.getSource().type,R="vector"===S?t.sourceLayer:void 0;"vector"!==S||R?u&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new g.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(R,t.id,u):this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const u=t.source,m=t.sourceLayer,b=this.sourceCaches[u];if(void 0!==b)return"vector"!==b.getSource().type||m?(void 0===t.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(m,t.id)):void this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new g.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return g.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t=g.mapObject(this.sourceCaches,b=>b.serialize()),u=this._serializeByIds(this._order),m=this.stylesheet;return g.filterObject({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:t,layers:u},b=>void 0!==b)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const u=R=>"fill-extrusion"===this._layers[R].type,m={},b=[];for(let R=this._order.length-1;R>=0;R--){const B=this._order[R];if(u(B)){m[B]=R;for(const z of t){const Z=z[B];if(Z)for(const ne of Z)b.push(ne)}}}b.sort((R,B)=>B.intersectionZ-R.intersectionZ);const S=[];for(let R=this._order.length-1;R>=0;R--){const B=this._order[R];if(u(B))for(let z=b.length-1;z>=0;z--){const Z=b[z].feature;if(m[Z.layer.id]<R)break;S.push(Z),b.pop()}else for(const z of t){const Z=z[B];if(Z)for(const ne of Z)S.push(ne.feature)}}return S}queryRenderedFeatures(t,u,m){u&&u.filter&&this._validate(g.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const b={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new g.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const B of u.layers){const z=this._layers[B];if(!z)return this.fire(new g.ErrorEvent(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];b[z.source]=!0}}const S=[];u.availableImages=this._availableImages;const R=this._serializedAllLayers();for(const B in this.sourceCaches)u.layers&&!b[B]||S.push(Fi(this.sourceCaches[B],this._layers,R,t,u,m));return this.placement&&S.push(function(B,z,Z,ne,x,D,E){const A={},k=D.queryRenderedSymbols(ne),G=[];for(const se of Object.keys(k).map(Number))G.push(E[se]);G.sort(Oi);for(const se of G){const pe=se.featureIndex.lookupSymbolFeatures(k[se.bucketInstanceId],z,se.bucketIndex,se.sourceLayerIndex,x.filter,x.layers,x.availableImages,B);for(const me in pe){const qe=A[me]=A[me]||[],pt=pe[me];pt.sort((xt,Ht)=>{const Yt=se.featureSortOrder;if(Yt){const Kt=Yt.indexOf(xt.featureIndex);return Yt.indexOf(Ht.featureIndex)-Kt}return Ht.featureIndex-xt.featureIndex});for(const xt of pt)qe.push(xt)}}for(const se in A)A[se].forEach(pe=>{const me=pe.feature,qe=Z[B[se].source].getFeatureState(me.layer["source-layer"],me.id);me.source=me.layer.source,me.layer["source-layer"]&&(me.sourceLayer=me.layer["source-layer"]),me.state=qe});return A}(this._layers,R,this.sourceCaches,t,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(t,u){u&&u.filter&&this._validate(g.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const m=this.sourceCaches[t];return m?function(b,S){const R=b.getRenderableIds().map(Z=>b.getTileByID(Z)),B=[],z={};for(let Z=0;Z<R.length;Z++){const ne=R[Z],x=ne.tileID.canonical.key;z[x]||(z[x]=!0,ne.querySourceFeatures(B,S))}return B}(m,u):[]}addSourceType(t,u,m){return ki.getSourceType(t)?m(new Error(`A source type called "${t}" already exists.`)):(ki.setSourceType(t,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:u.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(t,u={}){this._checkLoaded();const m=this.light.getLight();let b=!1;for(const R in t)if(!g.deepEqual(t[R],m[R])){b=!0;break}if(!b)return;const S={now:g.exported.now(),transition:g.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,u),this.light.updateTransitions(S)}_validate(t,u,m,b,S={}){return(!S||!1!==S.validate)&&xi(this,t.call(g.validateStyle,g.extend({key:u,style:this.serialize(),value:m,styleSpec:g.v8Spec},b)))}_remove(t=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),g.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const m=this.sourceCaches[u];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const u in this.sourceCaches)this.sourceCaches[u].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,u,m,b,S=!1){let R=!1,B=!1;const z={};for(const Z of this._order){const ne=this._layers[Z];if("symbol"!==ne.type)continue;if(!z[ne.source]){const D=this.sourceCaches[ne.source];z[ne.source]=D.getRenderableIds(!0).map(E=>D.getTileByID(E)).sort((E,A)=>A.tileID.overscaledZ-E.tileID.overscaledZ||(E.tileID.isLessThan(A.tileID)?-1:1))}const x=this.crossTileSymbolIndex.addLayer(ne,z[ne.source],t.center.lng);R=R||x}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||0===m)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(g.exported.now(),t.zoom))&&(this.pauseablePlacement=new _r(t,this.map.terrain,this._order,S,u,m,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(g.exported.now()),B=!0),R&&this.pauseablePlacement.placement.setStale()),B||R)for(const Z of this._order){const ne=this._layers[Z];"symbol"===ne.type&&this.placement.updateLayerOpacities(ne,z[ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(g.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,u,m){this.imageManager.getImages(u.icons,m),this._updateTilesForChangedImages();const b=this.sourceCaches[u.source];b&&b.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(t,u,m){this.glyphManager.getGlyphs(u.stacks,m);const b=this.sourceCaches[u.source];b&&b.setDependencies(u.tileID.key,u.type,[""])}getResource(t,u,m){return g.makeRequest(u,m)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,u={}){this._checkLoaded(),t&&this._validate(g.validateStyle.glyphs,"glyphs",t,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,u,m={},b){this._checkLoaded();const S=[{id:t,url:u}],R=[...Oe(this.stylesheet.sprite),...S];this._validate(g.validateStyle.sprite,"sprite",R,null,m)||(this.stylesheet.sprite=R,this._loadSprite(S,!0,b))}removeSprite(t){this._checkLoaded();const u=Oe(this.stylesheet.sprite);if(u.find(m=>m.id===t)){if(this._spritesImagesIds[t])for(const m of this._spritesImagesIds[t])this.imageManager.removeImage(m),this._changedImages[m]=!0;u.splice(u.findIndex(m=>m.id===t),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}else this.fire(new g.ErrorEvent(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Oe(this.stylesheet.sprite)}setSprite(t,u={},m){this._checkLoaded(),t&&this._validate(g.validateStyle.sprite,"sprite",t,null,u)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,m):(this._unloadSprite(),m&&m(null)))}}ki.getSourceType=function(y){return Kn[y]},ki.setSourceType=function(y,t){Kn[y]=t},ki.registerForPluginStateChange=g.registerForPluginStateChange;var $r=g.createLayout([{name:"a_pos",type:"Int16",components:2}]),Or="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ai={prelude:Gn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:Gn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Gn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Gn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:Gn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Gn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:Gn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Gn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Gn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Gn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Gn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:Gn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:Gn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:Gn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:Gn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:Gn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:Gn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Gn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:Gn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:Gn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:Gn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:Gn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Gn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:Gn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Gn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:Gn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Or),terrainDepth:Gn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Or),terrainCoords:Gn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Or)};function Gn(y,t){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=t.match(/attribute ([\w]+) ([\w]+)/g),b=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=S?S.concat(b):b,B={};return{fragmentSource:y=y.replace(u,(z,Z,ne,x,D)=>(B[D]=!0,"define"===Z?`\n#ifndef HAS_UNIFORM_u_${D}\nvarying ${ne} ${x} ${D};\n#else\nuniform ${ne} ${x} u_${D};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${D}\n    ${ne} ${x} ${D} = u_${D};\n#endif\n`)),vertexSource:t=t.replace(u,(z,Z,ne,x,D)=>{const E="float"===x?"vec2":"vec4",A=D.match(/color/)?"color":E;return B[D]?"define"===Z?`\n#ifndef HAS_UNIFORM_u_${D}\nuniform lowp float u_${D}_t;\nattribute ${ne} ${E} a_${D};\nvarying ${ne} ${x} ${D};\n#else\nuniform ${ne} ${x} u_${D};\n#endif\n`:"vec4"===A?`\n#ifndef HAS_UNIFORM_u_${D}\n    ${D} = a_${D};\n#else\n    ${ne} ${x} ${D} = u_${D};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${D}\n    ${D} = unpack_mix_${A}(a_${D}, u_${D}_t);\n#else\n    ${ne} ${x} ${D} = u_${D};\n#endif\n`:"define"===Z?`\n#ifndef HAS_UNIFORM_u_${D}\nuniform lowp float u_${D}_t;\nattribute ${ne} ${E} a_${D};\n#else\nuniform ${ne} ${x} u_${D};\n#endif\n`:"vec4"===A?`\n#ifndef HAS_UNIFORM_u_${D}\n    ${ne} ${x} ${D} = a_${D};\n#else\n    ${ne} ${x} ${D} = u_${D};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${D}\n    ${ne} ${x} ${D} = unpack_mix_${A}(a_${D}, u_${D}_t);\n#else\n    ${ne} ${x} ${D} = u_${D};\n#endif\n`}),staticAttributes:m,staticUniforms:R}}class ur{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,u,m,b,S,R,B,z,Z){this.context=t;let ne=this.boundPaintVertexBuffers.length!==b.length;for(let x=0;!ne&&x<b.length;x++)this.boundPaintVertexBuffers[x]!==b[x]&&(ne=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==m||ne||this.boundIndexBuffer!==S||this.boundVertexOffset!==R||this.boundDynamicVertexBuffer!==B||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==Z?this.freshBind(u,m,b,S,R,B,z,Z):(t.bindVertexArray.set(this.vao),B&&B.bind(),S&&S.dynamicDraw&&S.bind(),z&&z.bind(),Z&&Z.bind())}freshBind(t,u,m,b,S,R,B,z){const Z=t.numAttributes,ne=this.context,x=ne.gl;this.vao&&this.destroy(),this.vao=ne.createVertexArray(),ne.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=b,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=R,this.boundDynamicVertexBuffer2=B,this.boundDynamicVertexBuffer3=z,u.enableAttributes(x,t);for(const D of m)D.enableAttributes(x,t);R&&R.enableAttributes(x,t),B&&B.enableAttributes(x,t),z&&z.enableAttributes(x,t),u.bind(),u.setVertexAttribPointers(x,t,S);for(const D of m)D.bind(),D.setVertexAttribPointers(x,t,S);R&&(R.bind(),R.setVertexAttribPointers(x,t,S)),b&&b.bind(),B&&(B.bind(),B.setVertexAttribPointers(x,t,S)),z&&(z.bind(),z.setVertexAttribPointers(x,t,S)),ne.currentNumAttributes=Z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function dr(y){const t=[];for(let u=0;u<y.length;u++){if(null===y[u])continue;const m=y[u].split(" ");t.push(m.pop())}return t}class wr{constructor(t,u,m,b,S,R,B){const z=t.gl;this.program=z.createProgram();const Z=dr(m.staticAttributes),ne=b?b.getBinderAttributes():[],x=Z.concat(ne),D=Ai.prelude.staticUniforms?dr(Ai.prelude.staticUniforms):[],E=m.staticUniforms?dr(m.staticUniforms):[],A=b?b.getBinderUniforms():[],k=D.concat(E).concat(A),G=[];for(const Ht of k)G.indexOf(Ht)<0&&G.push(Ht);const se=b?b.defines():[];R&&se.push("#define OVERDRAW_INSPECTOR;"),B&&se.push("#define TERRAIN3D;");const pe=se.concat(Ai.prelude.fragmentSource,m.fragmentSource).join("\n"),me=se.concat(Ai.prelude.vertexSource,m.vertexSource).join("\n"),qe=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(qe,pe),z.compileShader(qe),z.attachShader(this.program,qe);const pt=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(pt,me),z.compileShader(pt),z.attachShader(this.program,pt),this.attributes={};const xt={};this.numAttributes=x.length;for(let Ht=0;Ht<this.numAttributes;Ht++)x[Ht]&&(z.bindAttribLocation(this.program,Ht,x[Ht]),this.attributes[x[Ht]]=Ht);z.linkProgram(this.program),z.deleteShader(pt),z.deleteShader(qe);for(let Ht=0;Ht<G.length;Ht++){const Yt=G[Ht];if(Yt&&!xt[Yt]){const Kt=z.getUniformLocation(this.program,Yt);Kt&&(xt[Yt]=Kt)}}var Ht,Yt;this.fixedUniforms=S(t,xt),this.terrainUniforms={u_depth:new g.Uniform1i(Ht=t,(Yt=xt).u_depth),u_terrain:new g.Uniform1i(Ht,Yt.u_terrain),u_terrain_dim:new g.Uniform1f(Ht,Yt.u_terrain_dim),u_terrain_matrix:new g.UniformMatrix4f(Ht,Yt.u_terrain_matrix),u_terrain_unpack:new g.Uniform4f(Ht,Yt.u_terrain_unpack),u_terrain_exaggeration:new g.Uniform1f(Ht,Yt.u_terrain_exaggeration)},this.binderUniforms=b?b.getUniforms(t,xt):[]}draw(t,u,m,b,S,R,B,z,Z,ne,x,D,E,A,k,G,se,pe){const me=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(m),t.setStencilMode(b),t.setColorMode(S),t.setCullFace(R),z){t.activeTexture.set(me.TEXTURE2),me.bindTexture(me.TEXTURE_2D,z.depthTexture),t.activeTexture.set(me.TEXTURE3),me.bindTexture(me.TEXTURE_2D,z.texture);for(const pt in this.terrainUniforms)this.terrainUniforms[pt].set(z[pt])}for(const pt in this.fixedUniforms)this.fixedUniforms[pt].set(B[pt]);k&&k.setUniforms(t,this.binderUniforms,E,{zoom:A});let qe=0;switch(u){case me.LINES:qe=2;break;case me.TRIANGLES:qe=3;break;case me.LINE_STRIP:qe=1}for(const pt of D.get()){const xt=pt.vaos||(pt.vaos={});(xt[Z]||(xt[Z]=new ur)).bind(t,this,ne,k?k.getPaintVertexBuffers():[],x,pt.vertexOffset,G,se,pe),me.drawElements(u,pt.primitiveLength*qe,me.UNSIGNED_SHORT,pt.primitiveOffset*qe*2)}}}function $s(y,t,u){const m=1/Ye(u,1,t.transform.tileZoom),b=Math.pow(2,u.tileID.overscaledZ),S=u.tileSize*Math.pow(2,t.transform.tileZoom)/b,R=S*(u.tileID.canonical.x+u.tileID.wrap*b),B=S*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[R>>16,B>>16],u_pixel_coord_lower:[65535&R,65535&B]}}const Gs=(y,t,u,m)=>{const b=t.style.light,S=b.properties.get("position"),R=[S.x,S.y,S.z],B=(Z=new g.ARRAY_TYPE(9),g.ARRAY_TYPE!=Float32Array&&(Z[1]=0,Z[2]=0,Z[3]=0,Z[5]=0,Z[6]=0,Z[7]=0),Z[0]=1,Z[4]=1,Z[8]=1,Z);var Z;"viewport"===b.properties.get("anchor")&&function(Z,ne){var x=Math.sin(ne),D=Math.cos(ne);Z[0]=D,Z[1]=x,Z[2]=0,Z[3]=-x,Z[4]=D,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1}(B,-t.transform.angle),function(Z,ne,x){var D=ne[0],E=ne[1],A=ne[2];Z[0]=D*x[0]+E*x[3]+A*x[6],Z[1]=D*x[1]+E*x[4]+A*x[7],Z[2]=D*x[2]+E*x[5]+A*x[8]}(R,R,B);const z=b.properties.get("color");return{u_matrix:y,u_lightpos:R,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+u,u_opacity:m}},fs=(y,t,u,m,b,S,R)=>g.extend(Gs(y,t,u,m),$s(S,t,R),{u_height_factor:-Math.pow(2,b.overscaledZ)/R.tileSize/8}),Kr=y=>({u_matrix:y}),Gr=(y,t,u,m)=>g.extend(Kr(y),$s(u,t,m)),da=(y,t)=>({u_matrix:y,u_world:t}),ts=(y,t,u,m,b)=>g.extend(Gr(y,t,u,m),{u_world:b}),ha=(y,t,u,m)=>{const b=y.transform;let S,R;if("map"===m.paint.get("circle-pitch-alignment")){const B=Ye(u,1,b.zoom);S=!0,R=[B,B]}else S=!1,R=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+("map"===m.paint.get("circle-pitch-scale")),u_matrix:y.translatePosMatrix(t.posMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:R}},Tc=(y,t,u)=>{const m=Ye(u,1,t.zoom),b=Math.pow(2,t.zoom-u.tileID.overscaledZ),S=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[t.pixelsToGLUnits[0]/(m*b),t.pixelsToGLUnits[1]/(m*b)],u_overscale_factor:S}},so=(y,t,u=1)=>({u_matrix:y,u_color:t,u_overlay:0,u_overlay_scale:u}),Pl=y=>({u_matrix:y}),Ol=(y,t,u,m)=>({u_matrix:y,u_extrude_scale:Ye(t,1,u),u_intensity:m});function kl(y,t){const u=Math.pow(2,t.canonical.z),m=t.canonical.y;return[new g.MercatorCoordinate(0,m/u).toLngLat().lat,new g.MercatorCoordinate(0,(m+1)/u).toLngLat().lat]}const Zs=(y,t,u,m)=>{const b=y.transform;return{u_matrix:$a(y,t,u,m),u_ratio:1/Ye(t,1,b.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Aa=(y,t,u,m,b)=>g.extend(Zs(y,t,u,b),{u_image:0,u_image_height:m}),Ms=(y,t,u,m,b)=>{const S=y.transform,R=Ao(t,S);return{u_matrix:$a(y,t,u,b),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Ye(t,1,S.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[R,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},wo=(y,t,u,m,b,S)=>{const R=y.lineAtlas,B=Ao(t,y.transform),z="round"===u.layout.get("line-cap"),Z=R.getDash(m.from,z),ne=R.getDash(m.to,z),x=Z.width*b.fromScale,D=ne.width*b.toScale;return g.extend(Zs(y,t,u,S),{u_patternscale_a:[B/x,-Z.height/2],u_patternscale_b:[B/D,-ne.height/2],u_sdfgamma:R.width/(256*Math.min(x,D)*y.pixelRatio)/2,u_image:0,u_tex_y_a:Z.y,u_tex_y_b:ne.y,u_mix:b.t})};function Ao(y,t){return 1/Ye(y,1,t.tileZoom)}function $a(y,t,u,m){return y.translatePosMatrix(m?m.posMatrix:t.tileID.posMatrix,t,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Pa=(y,t,u,m,b)=>{return{u_matrix:y,u_tl_parent:t,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(R=b.paint.get("raster-saturation"),R>0?1-1/(1.001-R):-R),u_contrast_factor:(S=b.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:Ws(b.paint.get("raster-hue-rotate"))};var S,R};function Ws(y){y*=Math.PI/180;const t=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*t-u+1)/3,(Math.sqrt(3)*t-u+1)/3]}const _o=(y,t,u,m,b,S,R,B,z,Z)=>{const ne=b.transform;return{u_is_size_zoom_constant:+("constant"===y||"source"===y),u_is_size_feature_constant:+("constant"===y||"camera"===y),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pitch:ne.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ne.width/ne.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:R,u_coord_matrix:B,u_is_text:+z,u_pitch_with_map:+m,u_texsize:Z,u_texture:0}},Br=(y,t,u,m,b,S,R,B,z,Z,ne)=>{const x=b.transform;return g.extend(_o(y,t,u,m,b,S,R,B,z,Z),{u_gamma_scale:m?Math.cos(x._pitch)*x.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+ne})},Ss=(y,t,u,m,b,S,R,B,z,Z)=>g.extend(Br(y,t,u,m,b,S,R,B,!0,z,!0),{u_texsize_icon:Z,u_texture_icon:1}),qs=(y,t,u)=>({u_matrix:y,u_opacity:t,u_color:u}),Ts=(y,t,u,m,b,S)=>g.extend(function(R,B,z,Z){const ne=z.imageManager.getPattern(R.from.toString()),x=z.imageManager.getPattern(R.to.toString()),{width:D,height:E}=z.imageManager.getPixelSize(),A=Math.pow(2,Z.tileID.overscaledZ),k=Z.tileSize*Math.pow(2,z.transform.tileZoom)/A,G=k*(Z.tileID.canonical.x+Z.tileID.wrap*A),se=k*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ne.tl,u_pattern_br_a:ne.br,u_pattern_tl_b:x.tl,u_pattern_br_b:x.br,u_texsize:[D,E],u_mix:B.t,u_pattern_size_a:ne.displaySize,u_pattern_size_b:x.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/Ye(Z,1,z.transform.tileZoom),u_pixel_coord_upper:[G>>16,se>>16],u_pixel_coord_lower:[65535&G,65535&se]}}(m,S,u,b),{u_matrix:y,u_opacity:t}),Is={fillExtrusion:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_lightpos:new g.Uniform3f(y,t.u_lightpos),u_lightintensity:new g.Uniform1f(y,t.u_lightintensity),u_lightcolor:new g.Uniform3f(y,t.u_lightcolor),u_vertical_gradient:new g.Uniform1f(y,t.u_vertical_gradient),u_opacity:new g.Uniform1f(y,t.u_opacity)}),fillExtrusionPattern:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_lightpos:new g.Uniform3f(y,t.u_lightpos),u_lightintensity:new g.Uniform1f(y,t.u_lightintensity),u_lightcolor:new g.Uniform3f(y,t.u_lightcolor),u_vertical_gradient:new g.Uniform1f(y,t.u_vertical_gradient),u_height_factor:new g.Uniform1f(y,t.u_height_factor),u_image:new g.Uniform1i(y,t.u_image),u_texsize:new g.Uniform2f(y,t.u_texsize),u_pixel_coord_upper:new g.Uniform2f(y,t.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(y,t.u_pixel_coord_lower),u_scale:new g.Uniform3f(y,t.u_scale),u_fade:new g.Uniform1f(y,t.u_fade),u_opacity:new g.Uniform1f(y,t.u_opacity)}),fill:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix)}),fillPattern:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_image:new g.Uniform1i(y,t.u_image),u_texsize:new g.Uniform2f(y,t.u_texsize),u_pixel_coord_upper:new g.Uniform2f(y,t.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(y,t.u_pixel_coord_lower),u_scale:new g.Uniform3f(y,t.u_scale),u_fade:new g.Uniform1f(y,t.u_fade)}),fillOutline:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_world:new g.Uniform2f(y,t.u_world)}),fillOutlinePattern:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_world:new g.Uniform2f(y,t.u_world),u_image:new g.Uniform1i(y,t.u_image),u_texsize:new g.Uniform2f(y,t.u_texsize),u_pixel_coord_upper:new g.Uniform2f(y,t.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(y,t.u_pixel_coord_lower),u_scale:new g.Uniform3f(y,t.u_scale),u_fade:new g.Uniform1f(y,t.u_fade)}),circle:(y,t)=>({u_camera_to_center_distance:new g.Uniform1f(y,t.u_camera_to_center_distance),u_scale_with_map:new g.Uniform1i(y,t.u_scale_with_map),u_pitch_with_map:new g.Uniform1i(y,t.u_pitch_with_map),u_extrude_scale:new g.Uniform2f(y,t.u_extrude_scale),u_device_pixel_ratio:new g.Uniform1f(y,t.u_device_pixel_ratio),u_matrix:new g.UniformMatrix4f(y,t.u_matrix)}),collisionBox:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_camera_to_center_distance:new g.Uniform1f(y,t.u_camera_to_center_distance),u_pixels_to_tile_units:new g.Uniform1f(y,t.u_pixels_to_tile_units),u_extrude_scale:new g.Uniform2f(y,t.u_extrude_scale),u_overscale_factor:new g.Uniform1f(y,t.u_overscale_factor)}),collisionCircle:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_inv_matrix:new g.UniformMatrix4f(y,t.u_inv_matrix),u_camera_to_center_distance:new g.Uniform1f(y,t.u_camera_to_center_distance),u_viewport_size:new g.Uniform2f(y,t.u_viewport_size)}),debug:(y,t)=>({u_color:new g.UniformColor(y,t.u_color),u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_overlay:new g.Uniform1i(y,t.u_overlay),u_overlay_scale:new g.Uniform1f(y,t.u_overlay_scale)}),clippingMask:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix)}),heatmap:(y,t)=>({u_extrude_scale:new g.Uniform1f(y,t.u_extrude_scale),u_intensity:new g.Uniform1f(y,t.u_intensity),u_matrix:new g.UniformMatrix4f(y,t.u_matrix)}),heatmapTexture:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_world:new g.Uniform2f(y,t.u_world),u_image:new g.Uniform1i(y,t.u_image),u_color_ramp:new g.Uniform1i(y,t.u_color_ramp),u_opacity:new g.Uniform1f(y,t.u_opacity)}),hillshade:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_image:new g.Uniform1i(y,t.u_image),u_latrange:new g.Uniform2f(y,t.u_latrange),u_light:new g.Uniform2f(y,t.u_light),u_shadow:new g.UniformColor(y,t.u_shadow),u_highlight:new g.UniformColor(y,t.u_highlight),u_accent:new g.UniformColor(y,t.u_accent)}),hillshadePrepare:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_image:new g.Uniform1i(y,t.u_image),u_dimension:new g.Uniform2f(y,t.u_dimension),u_zoom:new g.Uniform1f(y,t.u_zoom),u_unpack:new g.Uniform4f(y,t.u_unpack)}),line:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_ratio:new g.Uniform1f(y,t.u_ratio),u_device_pixel_ratio:new g.Uniform1f(y,t.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(y,t.u_units_to_pixels)}),lineGradient:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_ratio:new g.Uniform1f(y,t.u_ratio),u_device_pixel_ratio:new g.Uniform1f(y,t.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(y,t.u_units_to_pixels),u_image:new g.Uniform1i(y,t.u_image),u_image_height:new g.Uniform1f(y,t.u_image_height)}),linePattern:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_texsize:new g.Uniform2f(y,t.u_texsize),u_ratio:new g.Uniform1f(y,t.u_ratio),u_device_pixel_ratio:new g.Uniform1f(y,t.u_device_pixel_ratio),u_image:new g.Uniform1i(y,t.u_image),u_units_to_pixels:new g.Uniform2f(y,t.u_units_to_pixels),u_scale:new g.Uniform3f(y,t.u_scale),u_fade:new g.Uniform1f(y,t.u_fade)}),lineSDF:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_ratio:new g.Uniform1f(y,t.u_ratio),u_device_pixel_ratio:new g.Uniform1f(y,t.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(y,t.u_units_to_pixels),u_patternscale_a:new g.Uniform2f(y,t.u_patternscale_a),u_patternscale_b:new g.Uniform2f(y,t.u_patternscale_b),u_sdfgamma:new g.Uniform1f(y,t.u_sdfgamma),u_image:new g.Uniform1i(y,t.u_image),u_tex_y_a:new g.Uniform1f(y,t.u_tex_y_a),u_tex_y_b:new g.Uniform1f(y,t.u_tex_y_b),u_mix:new g.Uniform1f(y,t.u_mix)}),raster:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_tl_parent:new g.Uniform2f(y,t.u_tl_parent),u_scale_parent:new g.Uniform1f(y,t.u_scale_parent),u_buffer_scale:new g.Uniform1f(y,t.u_buffer_scale),u_fade_t:new g.Uniform1f(y,t.u_fade_t),u_opacity:new g.Uniform1f(y,t.u_opacity),u_image0:new g.Uniform1i(y,t.u_image0),u_image1:new g.Uniform1i(y,t.u_image1),u_brightness_low:new g.Uniform1f(y,t.u_brightness_low),u_brightness_high:new g.Uniform1f(y,t.u_brightness_high),u_saturation_factor:new g.Uniform1f(y,t.u_saturation_factor),u_contrast_factor:new g.Uniform1f(y,t.u_contrast_factor),u_spin_weights:new g.Uniform3f(y,t.u_spin_weights)}),symbolIcon:(y,t)=>({u_is_size_zoom_constant:new g.Uniform1i(y,t.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(y,t.u_is_size_feature_constant),u_size_t:new g.Uniform1f(y,t.u_size_t),u_size:new g.Uniform1f(y,t.u_size),u_camera_to_center_distance:new g.Uniform1f(y,t.u_camera_to_center_distance),u_pitch:new g.Uniform1f(y,t.u_pitch),u_rotate_symbol:new g.Uniform1i(y,t.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(y,t.u_aspect_ratio),u_fade_change:new g.Uniform1f(y,t.u_fade_change),u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(y,t.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(y,t.u_coord_matrix),u_is_text:new g.Uniform1i(y,t.u_is_text),u_pitch_with_map:new g.Uniform1i(y,t.u_pitch_with_map),u_texsize:new g.Uniform2f(y,t.u_texsize),u_texture:new g.Uniform1i(y,t.u_texture)}),symbolSDF:(y,t)=>({u_is_size_zoom_constant:new g.Uniform1i(y,t.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(y,t.u_is_size_feature_constant),u_size_t:new g.Uniform1f(y,t.u_size_t),u_size:new g.Uniform1f(y,t.u_size),u_camera_to_center_distance:new g.Uniform1f(y,t.u_camera_to_center_distance),u_pitch:new g.Uniform1f(y,t.u_pitch),u_rotate_symbol:new g.Uniform1i(y,t.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(y,t.u_aspect_ratio),u_fade_change:new g.Uniform1f(y,t.u_fade_change),u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(y,t.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(y,t.u_coord_matrix),u_is_text:new g.Uniform1i(y,t.u_is_text),u_pitch_with_map:new g.Uniform1i(y,t.u_pitch_with_map),u_texsize:new g.Uniform2f(y,t.u_texsize),u_texture:new g.Uniform1i(y,t.u_texture),u_gamma_scale:new g.Uniform1f(y,t.u_gamma_scale),u_device_pixel_ratio:new g.Uniform1f(y,t.u_device_pixel_ratio),u_is_halo:new g.Uniform1i(y,t.u_is_halo)}),symbolTextAndIcon:(y,t)=>({u_is_size_zoom_constant:new g.Uniform1i(y,t.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(y,t.u_is_size_feature_constant),u_size_t:new g.Uniform1f(y,t.u_size_t),u_size:new g.Uniform1f(y,t.u_size),u_camera_to_center_distance:new g.Uniform1f(y,t.u_camera_to_center_distance),u_pitch:new g.Uniform1f(y,t.u_pitch),u_rotate_symbol:new g.Uniform1i(y,t.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(y,t.u_aspect_ratio),u_fade_change:new g.Uniform1f(y,t.u_fade_change),u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(y,t.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(y,t.u_coord_matrix),u_is_text:new g.Uniform1i(y,t.u_is_text),u_pitch_with_map:new g.Uniform1i(y,t.u_pitch_with_map),u_texsize:new g.Uniform2f(y,t.u_texsize),u_texsize_icon:new g.Uniform2f(y,t.u_texsize_icon),u_texture:new g.Uniform1i(y,t.u_texture),u_texture_icon:new g.Uniform1i(y,t.u_texture_icon),u_gamma_scale:new g.Uniform1f(y,t.u_gamma_scale),u_device_pixel_ratio:new g.Uniform1f(y,t.u_device_pixel_ratio),u_is_halo:new g.Uniform1i(y,t.u_is_halo)}),background:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_opacity:new g.Uniform1f(y,t.u_opacity),u_color:new g.UniformColor(y,t.u_color)}),backgroundPattern:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_opacity:new g.Uniform1f(y,t.u_opacity),u_image:new g.Uniform1i(y,t.u_image),u_pattern_tl_a:new g.Uniform2f(y,t.u_pattern_tl_a),u_pattern_br_a:new g.Uniform2f(y,t.u_pattern_br_a),u_pattern_tl_b:new g.Uniform2f(y,t.u_pattern_tl_b),u_pattern_br_b:new g.Uniform2f(y,t.u_pattern_br_b),u_texsize:new g.Uniform2f(y,t.u_texsize),u_mix:new g.Uniform1f(y,t.u_mix),u_pattern_size_a:new g.Uniform2f(y,t.u_pattern_size_a),u_pattern_size_b:new g.Uniform2f(y,t.u_pattern_size_b),u_scale_a:new g.Uniform1f(y,t.u_scale_a),u_scale_b:new g.Uniform1f(y,t.u_scale_b),u_pixel_coord_upper:new g.Uniform2f(y,t.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(y,t.u_pixel_coord_lower),u_tile_units_to_pixels:new g.Uniform1f(y,t.u_tile_units_to_pixels)}),terrain:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_texture:new g.Uniform1i(y,t.u_texture),u_ele_delta:new g.Uniform1f(y,t.u_ele_delta)}),terrainDepth:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_ele_delta:new g.Uniform1f(y,t.u_ele_delta)}),terrainCoords:(y,t)=>({u_matrix:new g.UniformMatrix4f(y,t.u_matrix),u_texture:new g.Uniform1i(y,t.u_texture),u_terrain_coords_id:new g.Uniform1f(y,t.u_terrain_coords_id),u_ele_delta:new g.Uniform1f(y,t.u_ele_delta)})};class ao{constructor(t,u,m){this.context=t;const b=t.gl;this.buffer=b.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ns={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ms{constructor(t,u,m,b){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=b,this.context=t;const S=t.gl;this.buffer=S.createBuffer(),t.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,u){for(let m=0;m<this.attributes.length;m++){const b=u.attributes[this.attributes[m].name];void 0!==b&&t.enableVertexAttribArray(b)}}setVertexAttribPointers(t,u,m){for(let b=0;b<this.attributes.length;b++){const S=this.attributes[b],R=u.attributes[S.name];void 0!==R&&t.vertexAttribPointer(R,S.components,t[ns[S.type]],!1,this.itemSize,S.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const gs=new WeakMap;function nr(y){if(gs.has(y))return gs.get(y);{const t=y.getParameter(y.VERSION).startsWith("WebGL 2.0");return gs.set(y,t),t}}class li{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Oa extends li{getDefault(){return g.Color.transparent}set(t){const u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ks extends li{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Ys extends li{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class _s extends li{getDefault(){return[!0,!0,!0,!0]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Ga extends li{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class kr extends li{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Xs extends li{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const u=this.current;(t.func!==u.func||t.ref!==u.ref||t.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class ys extends li{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Po extends li{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=t,this.dirty=!1}}class is extends li{getDefault(){return[0,1]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class tc extends li{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ji extends li{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Za extends li{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.BLEND):u.disable(u.BLEND),this.current=t,this.dirty=!1}}class Wa extends li{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class ka extends li{getDefault(){return g.Color.transparent}set(t){const u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class hr extends li{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class qa extends li{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;t?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=t,this.dirty=!1}}class vs extends li{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Oo extends li{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class ji extends li{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class fl extends li{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ko extends li{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class As extends li{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class vr extends li{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ps extends li{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Vo extends li{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ri extends li{getDefault(){return null}set(t){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ml extends li{getDefault(){return null}set(t){var u;if(t===this.current&&!this.dirty)return;const m=this.gl;nr(m)?m.bindVertexArray(t):null===(u=m.getExtension("OES_vertex_array_object"))||void 0===u||u.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class pa extends li{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Cr extends li{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Os extends li{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ra extends li{constructor(t,u){super(t),this.context=t,this.parent=u}getDefault(){return null}}class Ei extends Ra{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class bs extends Ra{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class nc extends Ra{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Jt{constructor(t,u,m,b,S){this.context=t,this.width=u,this.height=m;const R=t.gl,B=this.framebuffer=R.createFramebuffer();if(this.colorAttachment=new Ei(t,B),b)this.depthAttachment=S?new nc(t,B):new bs(t,B);else if(S)throw new Error("Stencil cannot be setted without depth");if(R.checkFramebufferStatus(R.FRAMEBUFFER)!==R.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,u=this.colorAttachment.get();if(u&&t.deleteTexture(u),this.depthAttachment){const m=this.depthAttachment.get();m&&t.deleteRenderbuffer(m)}t.deleteFramebuffer(this.framebuffer)}}class Vn{constructor(t,u,m){this.blendFunction=t,this.blendColor=u,this.mask=m}}Vn.Replace=[1,0],Vn.disabled=new Vn(Vn.Replace,g.Color.transparent,[!1,!1,!1,!1]),Vn.unblended=new Vn(Vn.Replace,g.Color.transparent,[!0,!0,!0,!0]),Vn.alphaBlended=new Vn([1,771],g.Color.transparent,[!0,!0,!0,!0]);class La{constructor(t){this.gl=t,this.clearColor=new Oa(this),this.clearDepth=new Ks(this),this.clearStencil=new Ys(this),this.colorMask=new _s(this),this.depthMask=new Ga(this),this.stencilMask=new kr(this),this.stencilFunc=new Xs(this),this.stencilOp=new ys(this),this.stencilTest=new Po(this),this.depthRange=new is(this),this.depthTest=new tc(this),this.depthFunc=new Ji(this),this.blend=new Za(this),this.blendFunc=new Wa(this),this.blendColor=new ka(this),this.blendEquation=new hr(this),this.cullFace=new qa(this),this.cullFaceSide=new vs(this),this.frontFace=new Oo(this),this.program=new ji(this),this.activeTexture=new fl(this),this.viewport=new ko(this),this.bindFramebuffer=new As(this),this.bindRenderbuffer=new vr(this),this.bindTexture=new Ps(this),this.bindVertexBuffer=new Vo(this),this.bindElementBuffer=new ri(this),this.bindVertexArray=new ml(this),this.pixelStoreUnpack=new pa(this),this.pixelStoreUnpackPremultiplyAlpha=new Cr(this),this.pixelStoreUnpackFlipY=new Os(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE);const u=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=nr(t)?t.HALF_FLOAT:u?.HALF_FLOAT_OES,t.getExtension("OES_texture_half_float_linear");const m=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=nr(t)?t.RGBA16F:m?.RGBA16F_EXT,this.RGB16F=nr(t)?t.RGB16F:m?.RGB16F_EXT}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,u){return new ao(this,t,u)}createVertexBuffer(t,u,m){return new ms(this,t,u,m)}createRenderbuffer(t,u,m){const b=this.gl,S=b.createRenderbuffer();return this.bindRenderbuffer.set(S),b.renderbufferStorage(b.RENDERBUFFER,t,u,m),this.bindRenderbuffer.set(null),S}createFramebuffer(t,u,m,b){return new Jt(this,t,u,m,b)}clear({color:t,depth:u,stencil:m}){const b=this.gl;let S=0;t&&(S|=b.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==u&&(S|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),void 0!==m&&(S|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),b.clear(S)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){g.deepEqual(t.blendFunction,Vn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return nr(this.gl)?this.gl.createVertexArray():null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var u;return nr(this.gl)?this.gl.deleteVertexArray(t):null===(u=this.gl.getExtension("OES_vertex_array_object"))||void 0===u?void 0:u.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class Pi{constructor(t,u,m){this.func=t,this.mask=u,this.range=m}}Pi.ReadOnly=!1,Pi.ReadWrite=!0,Pi.disabled=new Pi(519,Pi.ReadOnly,[0,1]);class Q{constructor(t,u,m,b,S,R){this.test=t,this.ref=u,this.mask=m,this.fail=b,this.depthFail=S,this.pass=R}}Q.disabled=new Q({func:519,mask:0},0,0,7680,7680,7680);class K{constructor(t,u,m){this.enable=t,this.mode=u,this.frontFace=m}}let W;function ye(y,t,u,m,b,S,R){const B=y.context,z=B.gl,Z=y.useProgram("collisionBox"),ne=[];let x=0,D=0;for(let me=0;me<m.length;me++){const qe=m[me],pt=t.getTile(qe),xt=pt.getBucket(u);if(!xt)continue;let Ht=qe.posMatrix;0===b[0]&&0===b[1]||(Ht=y.translatePosMatrix(qe.posMatrix,pt,b,S));const Yt=R?xt.textCollisionBox:xt.iconCollisionBox,Kt=xt.collisionCircleArray;if(Kt.length>0){const _n=g.create(),Sn=Ht;g.mul(_n,xt.placementInvProjMatrix,y.transform.glCoordMatrix),g.mul(_n,_n,xt.placementViewportMatrix),ne.push({circleArray:Kt,circleOffset:D,transform:Sn,invTransform:_n,coord:qe}),x+=Kt.length/4,D=x}Yt&&Z.draw(B,z.LINES,Pi.disabled,Q.disabled,y.colorModeForRenderPass(),K.disabled,Tc(Ht,y.transform,pt),y.style.map.terrain&&y.style.map.terrain.getTerrainData(qe),u.id,Yt.layoutVertexBuffer,Yt.indexBuffer,Yt.segments,null,y.transform.zoom,null,null,Yt.collisionVertexBuffer)}if(!R||!ne.length)return;const E=y.useProgram("collisionCircle"),A=new g.CollisionCircleLayoutArray;A.resize(4*x),A._trim();let k=0;for(const me of ne)for(let qe=0;qe<me.circleArray.length/4;qe++){const pt=4*qe,xt=me.circleArray[pt+0],Ht=me.circleArray[pt+1],Yt=me.circleArray[pt+2],Kt=me.circleArray[pt+3];A.emplace(k++,xt,Ht,Yt,Kt,0),A.emplace(k++,xt,Ht,Yt,Kt,1),A.emplace(k++,xt,Ht,Yt,Kt,2),A.emplace(k++,xt,Ht,Yt,Kt,3)}(!W||W.length<2*x)&&(W=function(me){const qe=2*me,pt=new g.QuadTriangleArray;pt.resize(qe),pt._trim();for(let xt=0;xt<qe;xt++){const Ht=6*xt;pt.uint16[Ht+0]=4*xt+0,pt.uint16[Ht+1]=4*xt+1,pt.uint16[Ht+2]=4*xt+2,pt.uint16[Ht+3]=4*xt+2,pt.uint16[Ht+4]=4*xt+3,pt.uint16[Ht+5]=4*xt+0}return pt}(x));const G=B.createIndexBuffer(W,!0),se=B.createVertexBuffer(A,g.collisionCircleLayout.members,!0);for(const me of ne){const qe={u_matrix:me.transform,u_inv_matrix:me.invTransform,u_camera_to_center_distance:(pe=y.transform).cameraToCenterDistance,u_viewport_size:[pe.width,pe.height]};E.draw(B,z.TRIANGLES,Pi.disabled,Q.disabled,y.colorModeForRenderPass(),K.disabled,qe,y.style.map.terrain&&y.style.map.terrain.getTerrainData(me.coord),u.id,se,G,g.SegmentVector.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,y.transform.zoom,null,null,null)}var pe;se.destroy(),G.destroy()}K.disabled=new K(!1,1029,2305),K.backCCW=new K(!0,1029,2305);const Ut=g.identity(new Float32Array(16));function Yn(y,t,u,m,b,S){const{horizontalAlign:R,verticalAlign:B}=g.getAnchorAlignment(y),z=-(R-.5)*t,Z=-(B-.5)*u,ne=g.evaluateVariableOffset(y,m);return new g.Point((z/b+ne[0])*S,(Z/b+ne[1])*S)}function Dr(y,t,u,m,b,S,R,B,z,Z,ne){const x=y.text.placedSymbolArray,D=y.text.dynamicLayoutVertexArray,E=y.icon.dynamicLayoutVertexArray,A={};D.clear();for(let k=0;k<x.length;k++){const G=x.get(k),se=G.hidden||!G.crossTileID||y.allowVerticalPlacement&&!G.placedOrientation?null:m[G.crossTileID];if(se){const pe=new g.Point(G.anchorX,G.anchorY),me=Vt(pe,u?R:S,ne),qe=mn(b.cameraToCenterDistance,me.signedDistanceFromCamera);let pt=g.evaluateSizeForFeature(y.textSizeData,z,G)*qe/g.ONE_EM;u&&(pt*=y.tilePixelRatio/B);const{width:xt,height:Ht,anchor:Yt,textOffset:Kt,textBoxScale:_n}=se,Sn=Yn(Yt,xt,Ht,Kt,_n,pt),pi=u?Vt(pe.add(Sn),S,ne).point:me.point.add(t?Sn.rotate(-b.angle):Sn),Dn=y.allowVerticalPlacement&&G.placedOrientation===g.WritingMode.vertical?Math.PI/2:0;for(let si=0;si<G.numGlyphs;si++)g.addDynamicAttributes(D,pi,Dn);Z&&G.associatedIconIndex>=0&&(A[G.associatedIconIndex]={shiftedAnchor:pi,angle:Dn})}else re(G.numGlyphs,D)}if(Z){E.clear();const k=y.icon.placedSymbolArray;for(let G=0;G<k.length;G++){const se=k.get(G);if(se.hidden)re(se.numGlyphs,E);else{const pe=A[G];if(pe)for(let me=0;me<se.numGlyphs;me++)g.addDynamicAttributes(E,pe.shiftedAnchor,pe.angle);else re(se.numGlyphs,E)}}y.icon.dynamicLayoutVertexBuffer.updateData(E)}y.text.dynamicLayoutVertexBuffer.updateData(D)}function yo(y,t,u){return u.iconsInText&&t?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Mr(y,t,u,m,b,S,R,B,z,Z,ne,x){const D=y.context,E=D.gl,A=y.transform,k="map"===B,G="map"===z,se="viewport"!==B&&"point"!==u.layout.get("symbol-placement"),pe=k&&!G&&!se,me=!u.layout.get("symbol-sort-key").isConstant();let qe=!1;const pt=y.depthModeForSublayer(0,Pi.ReadOnly),xt=u.layout.get("text-variable-anchor"),Ht=[];for(const Yt of m){const Kt=t.getTile(Yt),_n=Kt.getBucket(u);if(!_n)continue;const Sn=b?_n.text:_n.icon;if(!Sn||!Sn.segments.get().length||!Sn.hasVisibleVertices)continue;const pi=Sn.programConfigurations.get(u.id),Dn=b||_n.sdfIcons,si=b?_n.textSizeData:_n.iconSizeData,Tn=G||0!==A.pitch,qi=y.useProgram(yo(Dn,b,_n),pi),mr=g.evaluateSizeForZoom(si,A.zoom),Zi=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Yt);let fi,Jr,Yi,Sr,Lr=[0,0],us=null;if(b)Jr=Kt.glyphAtlasTexture,Yi=E.LINEAR,fi=Kt.glyphAtlasTexture.size,_n.iconsInText&&(Lr=Kt.imageAtlasTexture.size,us=Kt.imageAtlasTexture,Sr=Tn||y.options.rotating||y.options.zooming||"composite"===si.kind||"camera"===si.kind?E.LINEAR:E.NEAREST);else{const Go=1!==u.layout.get("icon-size").constantOr(0)||_n.iconsNeedLinear;Jr=Kt.imageAtlasTexture,Yi=Dn||y.options.rotating||y.options.zooming||Go||Tn?E.LINEAR:E.NEAREST,fi=Kt.imageAtlasTexture.size}const or=Ye(Kt,1,y.transform.zoom),el=mt(Yt.posMatrix,G,k,y.transform,or),na=dn(Yt.posMatrix,G,k,y.transform,or),Va=xt&&_n.hasTextData(),Mo="none"!==u.layout.get("icon-text-fit")&&Va&&_n.hasIconData();if(se){const Go=y.style.map.terrain?(El,$l)=>y.style.map.terrain.getElevation(Yt,El,$l):null,Hl="map"===u.layout.get("text-rotation-alignment");Vi(_n,Yt.posMatrix,y,b,el,na,G,Z,Hl,Go)}const Ro=y.translatePosMatrix(Yt.posMatrix,Kt,S,R),Qr=se||b&&xt||Mo?Ut:el,Ki=y.translatePosMatrix(na,Kt,S,R,!0),co=Dn&&0!==u.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1);let uo;uo=Dn?_n.iconsInText?Ss(si.kind,mr,pe,G,y,Ro,Qr,Ki,fi,Lr):Br(si.kind,mr,pe,G,y,Ro,Qr,Ki,b,fi,!0):_o(si.kind,mr,pe,G,y,Ro,Qr,Ki,b,fi);const Xi={program:qi,buffers:Sn,uniformValues:uo,atlasTexture:Jr,atlasTextureIcon:us,atlasInterpolation:Yi,atlasInterpolationIcon:Sr,isSDF:Dn,hasHalo:co};if(me&&_n.canOverlap){qe=!0;const Go=Sn.segments.get();for(const Hl of Go)Ht.push({segments:new g.SegmentVector([Hl]),sortKey:Hl.sortKey,state:Xi,terrainData:Zi})}else Ht.push({segments:Sn.segments,sortKey:0,state:Xi,terrainData:Zi})}qe&&Ht.sort((Yt,Kt)=>Yt.sortKey-Kt.sortKey);for(const Yt of Ht){const Kt=Yt.state;if(D.activeTexture.set(E.TEXTURE0),Kt.atlasTexture.bind(Kt.atlasInterpolation,E.CLAMP_TO_EDGE),Kt.atlasTextureIcon&&(D.activeTexture.set(E.TEXTURE1),Kt.atlasTextureIcon&&Kt.atlasTextureIcon.bind(Kt.atlasInterpolationIcon,E.CLAMP_TO_EDGE)),Kt.isSDF){const _n=Kt.uniformValues;Kt.hasHalo&&(_n.u_is_halo=1,Qi(Kt.buffers,Yt.segments,u,y,Kt.program,pt,ne,x,_n,Yt.terrainData)),_n.u_is_halo=0}Qi(Kt.buffers,Yt.segments,u,y,Kt.program,pt,ne,x,Kt.uniformValues,Yt.terrainData)}}function Qi(y,t,u,m,b,S,R,B,z,Z){const ne=m.context;b.draw(ne,ne.gl.TRIANGLES,S,R,B,K.disabled,z,Z,u.id,y.layoutVertexBuffer,y.indexBuffer,t,u.paint,m.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function rs(y,t,u,m,b){if(!u||!m||!m.imageAtlas)return;const S=m.imageAtlas.patternPositions;let R=S[u.to.toString()],B=S[u.from.toString()];if(!R||!B){const z=b.getPaintProperty(t);R=S[z],B=S[z]}R&&B&&y.setConstantPatternPositions(R,B)}function fa(y,t,u,m,b,S,R){const B=y.context.gl,z="fill-pattern",Z=u.paint.get(z),ne=Z&&Z.constantOr(1),x=u.getCrossfadeParameters();let D,E,A,k,G;R?(E=ne&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",D=B.LINES):(E=ne?"fillPattern":"fill",D=B.TRIANGLES);const se=Z.constantOr(null);for(const pe of m){const me=t.getTile(pe);if(ne&&!me.patternsLoaded())continue;const qe=me.getBucket(u);if(!qe)continue;const pt=qe.programConfigurations.get(u.id),xt=y.useProgram(E,pt),Ht=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe);ne&&(y.context.activeTexture.set(B.TEXTURE0),me.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),pt.updatePaintBuffers(x)),rs(pt,z,se,me,u);const Yt=Ht?pe:null,Kt=y.translatePosMatrix(Yt?Yt.posMatrix:pe.posMatrix,me,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(R){k=qe.indexBuffer2,G=qe.segments2;const _n=[B.drawingBufferWidth,B.drawingBufferHeight];A="fillOutlinePattern"===E&&ne?ts(Kt,y,x,me,_n):da(Kt,_n)}else k=qe.indexBuffer,G=qe.segments,A=ne?Gr(Kt,y,x,me):Kr(Kt);xt.draw(y.context,D,b,y.stencilModeForClipping(pe),S,K.disabled,A,Ht,u.id,qe.layoutVertexBuffer,k,G,u.paint,y.transform.zoom,pt)}}function ma(y,t,u,m,b,S,R){const B=y.context,z=B.gl,Z="fill-extrusion-pattern",ne=u.paint.get(Z),x=ne.constantOr(1),D=u.getCrossfadeParameters(),E=u.paint.get("fill-extrusion-opacity"),A=ne.constantOr(null);for(const k of m){const G=t.getTile(k),se=G.getBucket(u);if(!se)continue;const pe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(k),me=se.programConfigurations.get(u.id),qe=y.useProgram(x?"fillExtrusionPattern":"fillExtrusion",me);x&&(y.context.activeTexture.set(z.TEXTURE0),G.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),me.updatePaintBuffers(D)),rs(me,Z,A,G,u);const pt=y.translatePosMatrix(k.posMatrix,G,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),xt=u.paint.get("fill-extrusion-vertical-gradient"),Ht=x?fs(pt,y,xt,E,k,D,G):Gs(pt,y,xt,E);qe.draw(B,B.gl.TRIANGLES,b,S,R,K.backCCW,Ht,pe,u.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,u.paint,y.transform.zoom,me,y.style.map.terrain&&se.centroidVertexBuffer)}}function ks(y,t,u,m,b,S,R){const B=y.context,z=B.gl,Z=u.fbo;if(!Z)return;const ne=y.useProgram("hillshade"),x=y.style.map.terrain&&y.style.map.terrain.getTerrainData(t);B.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,Z.colorAttachment.get()),ne.draw(B,z.TRIANGLES,b,S,R,K.disabled,((D,E,A,k)=>{const G=A.paint.get("hillshade-shadow-color"),se=A.paint.get("hillshade-highlight-color"),pe=A.paint.get("hillshade-accent-color");let me=A.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===A.paint.get("hillshade-illumination-anchor")&&(me-=D.transform.angle);const qe=!D.options.moving;return{u_matrix:k?k.posMatrix:D.transform.calculatePosMatrix(E.tileID.toUnwrapped(),qe),u_image:0,u_latrange:kl(0,E.tileID),u_light:[A.paint.get("hillshade-exaggeration"),me],u_shadow:G,u_highlight:se,u_accent:pe}})(y,u,m,x?t:null),x,m.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Rl(y,t,u,m,b,S){const R=y.context,B=R.gl,z=t.dem;if(z&&z.data){const Z=z.dim,ne=z.stride,x=z.getPixels();if(R.activeTexture.set(B.TEXTURE1),R.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||y.getTileTexture(ne),t.demTexture){const E=t.demTexture;E.update(x,{premultiply:!1}),E.bind(B.NEAREST,B.CLAMP_TO_EDGE)}else t.demTexture=new Ot(R,x,B.RGBA,{premultiply:!1}),t.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);R.activeTexture.set(B.TEXTURE0);let D=t.fbo;if(!D){const E=new Ot(R,{width:Z,height:Z,data:null},B.RGBA);E.bind(B.LINEAR,B.CLAMP_TO_EDGE),D=t.fbo=R.createFramebuffer(Z,Z,!0,!1),D.colorAttachment.set(E.texture)}R.bindFramebuffer.set(D.framebuffer),R.viewport.set([0,0,Z,Z]),y.useProgram("hillshadePrepare").draw(R,B.TRIANGLES,m,b,S,K.disabled,((E,A)=>{const k=A.stride,G=g.create();return g.ortho(G,0,g.EXTENT,-g.EXTENT,0,0,1),g.translate(G,G,[0,-g.EXTENT,0]),{u_matrix:G,u_image:1,u_dimension:[k,k],u_zoom:E.overscaledZ,u_unpack:A.getUnpackVector()}})(t.tileID,z),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function Ll(y,t,u,m,b,S){const R=m.paint.get("raster-fade-duration");if(!S&&R>0){const B=g.exported.now(),z=(B-y.timeAdded)/R,Z=t?(B-t.timeAdded)/R:-1,ne=u.getSource(),x=b.coveringZoomLevel({tileSize:ne.tileSize,roundZoom:ne.roundZoom}),D=!t||Math.abs(t.tileID.overscaledZ-x)>Math.abs(y.tileID.overscaledZ-x),E=D&&y.refreshedUponExpiration?1:g.clamp(D?z:1-Z,0,1);return y.refreshedUponExpiration&&z>=1&&(y.refreshedUponExpiration=!1),t?{opacity:1,mix:1-E}:{opacity:E,mix:0}}return{opacity:1,mix:0}}const Ic=new g.Color(1,0,0,1),Ac=new g.Color(0,1,0,1),ga=new g.Color(0,0,1,1),_a=new g.Color(1,0,1,1),gl=new g.Color(0,1,1,1);function Fa(y,t,u,m){Uo(y,0,t+u/2,y.transform.width,u,m)}function br(y,t,u,m){Uo(y,t-u/2,0,u,y.transform.height,m)}function Uo(y,t,u,m,b,S){const R=y.context,B=R.gl;B.enable(B.SCISSOR_TEST),B.scissor(t*y.pixelRatio,u*y.pixelRatio,m*y.pixelRatio,b*y.pixelRatio),R.clear({color:S}),B.disable(B.SCISSOR_TEST)}function jo(y,t,u){const m=y.context,b=m.gl,S=u.posMatrix,R=y.useProgram("debug"),B=Pi.disabled,z=Q.disabled,Z=y.colorModeForRenderPass(),x=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);m.activeTexture.set(b.TEXTURE0);const D=t.getTileByID(u.key).latestRawTileData,E=Math.floor((D&&D.byteLength||0)/1024),A=t.getTile(u).tileSize,k=512/Math.min(A,512)*(u.overscaledZ/y.transform.zoom)*.5;let G=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(G+=` => ${u.overscaledZ}`),function(se,pe){se.initDebugOverlayCanvas();const me=se.debugOverlayCanvas,qe=se.context.gl,pt=se.debugOverlayCanvas.getContext("2d");pt.clearRect(0,0,me.width,me.height),pt.shadowColor="white",pt.shadowBlur=2,pt.lineWidth=1.5,pt.strokeStyle="white",pt.textBaseline="top",pt.font="bold 36px Open Sans, sans-serif",pt.fillText(pe,5,5),pt.strokeText(pe,5,5),se.debugOverlayTexture.update(me),se.debugOverlayTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}(y,`${G} ${E}kB`),R.draw(m,b.TRIANGLES,B,z,Vn.alphaBlended,K.disabled,so(S,g.Color.transparent,k),null,"$debug",y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),R.draw(m,b.LINE_STRIP,B,z,Z,K.disabled,so(S,g.Color.red),x,"$debug",y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Ka(y,t,u){const m=y.context,b=m.gl,S=y.colorModeForRenderPass(),R=new Pi(b.LEQUAL,Pi.ReadWrite,y.depthRangeFor3D),B=y.useProgram("terrain"),z=t.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,y.width,y.height]);for(const Z of u){const ne=y.renderToTexture.getTexture(Z),x=t.getTerrainData(Z.tileID);m.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,ne.texture);const D={u_matrix:y.transform.calculatePosMatrix(Z.tileID.toUnwrapped()),u_texture:0,u_ele_delta:t.getMeshFrameDelta(y.transform.zoom)};B.draw(m,b.TRIANGLES,R,Q.disabled,S,K.backCCW,D,x,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}const Ya={symbol:function(y,t,u,m,b){if("translucent"!==y.renderPass)return;const S=Q.disabled,R=y.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(B,z,Z,ne,x,D,E){const A=z.transform,k="map"===x,G="map"===D;for(const se of B){const pe=ne.getTile(se),me=pe.getBucket(Z);if(!me||!me.text||!me.text.segments.get().length)continue;const qe=g.evaluateSizeForZoom(me.textSizeData,A.zoom),pt=Ye(pe,1,z.transform.zoom),xt=mt(se.posMatrix,G,k,z.transform,pt),Ht="none"!==Z.layout.get("icon-text-fit")&&me.hasIconData();if(qe){const Yt=Math.pow(2,A.zoom-pe.tileID.overscaledZ);Dr(me,k,G,E,A,xt,se.posMatrix,Yt,qe,Ht,z.style.map.terrain?(Kt,_n)=>z.style.map.terrain.getElevation(se,Kt,_n):null)}}}(m,y,u,t,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),b),0!==u.paint.get("icon-opacity").constantOr(1)&&Mr(y,t,u,m,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),S,R),0!==u.paint.get("text-opacity").constantOr(1)&&Mr(y,t,u,m,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),S,R),t.map.showCollisionBoxes&&(ye(y,t,u,m,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),ye(y,t,u,m,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(y,t,u,m){if("translucent"!==y.renderPass)return;const b=u.paint.get("circle-opacity"),S=u.paint.get("circle-stroke-width"),R=u.paint.get("circle-stroke-opacity"),B=!u.layout.get("circle-sort-key").isConstant();if(0===b.constantOr(1)&&(0===S.constantOr(1)||0===R.constantOr(1)))return;const z=y.context,Z=z.gl,ne=y.depthModeForSublayer(0,Pi.ReadOnly),x=Q.disabled,D=y.colorModeForRenderPass(),E=[];for(let A=0;A<m.length;A++){const k=m[A],G=t.getTile(k),se=G.getBucket(u);if(!se)continue;const pe=se.programConfigurations.get(u.id),me=y.useProgram("circle",pe),qe=se.layoutVertexBuffer,pt=se.indexBuffer,xt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(k),Ht={programConfiguration:pe,program:me,layoutVertexBuffer:qe,indexBuffer:pt,uniformValues:ha(y,k,G,u),terrainData:xt};if(B){const Yt=se.segments.get();for(const Kt of Yt)E.push({segments:new g.SegmentVector([Kt]),sortKey:Kt.sortKey,state:Ht})}else E.push({segments:se.segments,sortKey:0,state:Ht})}B&&E.sort((A,k)=>A.sortKey-k.sortKey);for(const A of E){const{programConfiguration:k,program:G,layoutVertexBuffer:se,indexBuffer:pe,uniformValues:me,terrainData:qe}=A.state;G.draw(z,Z.TRIANGLES,ne,x,D,K.disabled,me,qe,u.id,se,pe,A.segments,u.paint,y.transform.zoom,k)}},heatmap:function(y,t,u,m){if(0!==u.paint.get("heatmap-opacity"))if("offscreen"===y.renderPass){const b=y.context,S=b.gl,R=Q.disabled,B=new Vn([S.ONE,S.ONE],g.Color.transparent,[!0,!0,!0,!0]);(function(z,Z,ne){const x=z.gl;z.activeTexture.set(x.TEXTURE1),z.viewport.set([0,0,Z.width/4,Z.height/4]);let D=ne.heatmapFbo;if(D)x.bindTexture(x.TEXTURE_2D,D.colorAttachment.get()),z.bindFramebuffer.set(D.framebuffer);else{const E=x.createTexture();x.bindTexture(x.TEXTURE_2D,E),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),D=ne.heatmapFbo=z.createFramebuffer(Z.width/4,Z.height/4,!1,!1),function(A,k,G,se){var pe,me;const qe=A.gl,pt=null!==(pe=A.HALF_FLOAT)&&void 0!==pe?pe:qe.UNSIGNED_BYTE,xt=null!==(me=A.RGBA16F)&&void 0!==me?me:qe.RGBA;qe.texImage2D(qe.TEXTURE_2D,0,xt,k.width/4,k.height/4,0,qe.RGBA,pt,null),se.colorAttachment.set(G)}(z,Z,E,D)}})(b,y,u),b.clear({color:g.Color.transparent});for(let z=0;z<m.length;z++){const Z=m[z];if(t.hasRenderableParent(Z))continue;const ne=t.getTile(Z),x=ne.getBucket(u);if(!x)continue;const D=x.programConfigurations.get(u.id),E=y.useProgram("heatmap",D),{zoom:A}=y.transform;E.draw(b,S.TRIANGLES,Pi.disabled,R,B,K.disabled,Ol(Z.posMatrix,ne,A,u.paint.get("heatmap-intensity")),null,u.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,u.paint,y.transform.zoom,D)}b.viewport.set([0,0,y.width,y.height])}else"translucent"===y.renderPass&&(y.context.setColorMode(y.colorModeForRenderPass()),function(b,S){const R=b.context,B=R.gl,z=S.heatmapFbo;if(!z)return;R.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,z.colorAttachment.get()),R.activeTexture.set(B.TEXTURE1);let Z=S.colorRampTexture;Z||(Z=S.colorRampTexture=new Ot(R,S.colorRamp,B.RGBA)),Z.bind(B.LINEAR,B.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(R,B.TRIANGLES,Pi.disabled,Q.disabled,b.colorModeForRenderPass(),K.disabled,((ne,x,D,E)=>{const A=g.create();g.ortho(A,0,ne.width,ne.height,0,0,1);const k=ne.context.gl;return{u_matrix:A,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:x.paint.get("heatmap-opacity")}})(b,S),null,S.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,S.paint,b.transform.zoom)}(y,u))},line:function(y,t,u,m){if("translucent"!==y.renderPass)return;const b=u.paint.get("line-opacity"),S=u.paint.get("line-width");if(0===b.constantOr(1)||0===S.constantOr(1))return;const R=y.depthModeForSublayer(0,Pi.ReadOnly),B=y.colorModeForRenderPass(),z=u.paint.get("line-dasharray"),Z=u.paint.get("line-pattern"),ne=Z.constantOr(1),x=u.paint.get("line-gradient"),D=u.getCrossfadeParameters(),E=ne?"linePattern":z?"lineSDF":x?"lineGradient":"line",A=y.context,k=A.gl;let G=!0;for(const se of m){const pe=t.getTile(se);if(ne&&!pe.patternsLoaded())continue;const me=pe.getBucket(u);if(!me)continue;const qe=me.programConfigurations.get(u.id),pt=y.context.program.get(),xt=y.useProgram(E,qe),Ht=G||xt.program!==pt,Yt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(se),Kt=Z.constantOr(null);if(Kt&&pe.imageAtlas){const pi=pe.imageAtlas,Dn=pi.patternPositions[Kt.to.toString()],si=pi.patternPositions[Kt.from.toString()];Dn&&si&&qe.setConstantPatternPositions(Dn,si)}const _n=Yt?se:null,Sn=ne?Ms(y,pe,u,D,_n):z?wo(y,pe,u,z,D,_n):x?Aa(y,pe,u,me.lineClipsArray.length,_n):Zs(y,pe,u,_n);if(ne)A.activeTexture.set(k.TEXTURE0),pe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),qe.updatePaintBuffers(D);else if(z&&(Ht||y.lineAtlas.dirty))A.activeTexture.set(k.TEXTURE0),y.lineAtlas.bind(A);else if(x){const pi=me.gradients[u.id];let Dn=pi.texture;if(u.gradientVersion!==pi.version){let si=256;if(u.stepInterpolant){const Tn=t.getSource().maxzoom,qi=se.canonical.z===Tn?Math.ceil(1<<y.transform.maxZoom-se.canonical.z):1;si=g.clamp(g.nextPowerOfTwo(me.maxLineLength/g.EXTENT*1024*qi),256,A.maxTextureSize)}pi.gradient=g.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:si,image:pi.gradient||void 0,clips:me.lineClipsArray}),pi.texture?pi.texture.update(pi.gradient):pi.texture=new Ot(A,pi.gradient,k.RGBA),pi.version=u.gradientVersion,Dn=pi.texture}A.activeTexture.set(k.TEXTURE0),Dn.bind(u.stepInterpolant?k.NEAREST:k.LINEAR,k.CLAMP_TO_EDGE)}xt.draw(A,k.TRIANGLES,R,y.stencilModeForClipping(se),B,K.disabled,Sn,Yt,u.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,u.paint,y.transform.zoom,qe,me.layoutVertexBuffer2),G=!1}},fill:function(y,t,u,m){const b=u.paint.get("fill-color"),S=u.paint.get("fill-opacity");if(0===S.constantOr(1))return;const R=y.colorModeForRenderPass(),B=u.paint.get("fill-pattern"),z=y.opaquePassEnabledForLayer()&&!B.constantOr(1)&&1===b.constantOr(g.Color.transparent).a&&1===S.constantOr(0)?"opaque":"translucent";if(y.renderPass===z){const Z=y.depthModeForSublayer(1,"opaque"===y.renderPass?Pi.ReadWrite:Pi.ReadOnly);fa(y,t,u,m,Z,R,!1)}if("translucent"===y.renderPass&&u.paint.get("fill-antialias")){const Z=y.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Pi.ReadOnly);fa(y,t,u,m,Z,R,!0)}},"fill-extrusion":function(y,t,u,m){const b=u.paint.get("fill-extrusion-opacity");if(0!==b&&"translucent"===y.renderPass){const S=new Pi(y.context.gl.LEQUAL,Pi.ReadWrite,y.depthRangeFor3D);if(1!==b||u.paint.get("fill-extrusion-pattern").constantOr(1))ma(y,t,u,m,S,Q.disabled,Vn.disabled),ma(y,t,u,m,S,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const R=y.colorModeForRenderPass();ma(y,t,u,m,S,Q.disabled,R)}}},hillshade:function(y,t,u,m){if("offscreen"!==y.renderPass&&"translucent"!==y.renderPass)return;const b=y.context,S=y.depthModeForSublayer(0,Pi.ReadOnly),R=y.colorModeForRenderPass(),[B,z]="translucent"===y.renderPass?y.stencilConfigForOverlap(m):[{},m];for(const Z of z){const ne=t.getTile(Z);void 0!==ne.needsHillshadePrepare&&ne.needsHillshadePrepare&&"offscreen"===y.renderPass?Rl(y,ne,u,S,Q.disabled,R):"translucent"===y.renderPass&&ks(y,Z,ne,u,S,B[Z.overscaledZ],R)}b.viewport.set([0,0,y.width,y.height])},raster:function(y,t,u,m){if("translucent"!==y.renderPass||0===u.paint.get("raster-opacity")||!m.length)return;const b=y.context,S=b.gl,R=t.getSource(),B=y.useProgram("raster"),z=y.colorModeForRenderPass(),[Z,ne]=R instanceof sn?[{},m]:y.stencilConfigForOverlap(m),x=ne[ne.length-1].overscaledZ,D=!y.options.moving;for(const E of ne){const A=y.depthModeForSublayer(E.overscaledZ-x,1===u.paint.get("raster-opacity")?Pi.ReadWrite:Pi.ReadOnly,S.LESS),k=t.getTile(E);k.registerFadeDuration(u.paint.get("raster-fade-duration"));const G=t.findLoadedParent(E,0),se=Ll(k,G,t,u,y.transform,y.style.map.terrain);let pe,me;const qe="nearest"===u.paint.get("raster-resampling")?S.NEAREST:S.LINEAR;b.activeTexture.set(S.TEXTURE0),k.texture.bind(qe,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(S.TEXTURE1),G?(G.texture.bind(qe,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),pe=Math.pow(2,G.tileID.overscaledZ-k.tileID.overscaledZ),me=[k.tileID.canonical.x*pe%1,k.tileID.canonical.y*pe%1]):k.texture.bind(qe,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST);const pt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(E),xt=pt?E:null,Ht=xt?xt.posMatrix:y.transform.calculatePosMatrix(E.toUnwrapped(),D),Yt=Pa(Ht,me||[0,0],pe||1,se,u);R instanceof sn?B.draw(b,S.TRIANGLES,A,Q.disabled,z,K.disabled,Yt,pt,u.id,R.boundsBuffer,y.quadTriangleIndexBuffer,R.boundsSegments):B.draw(b,S.TRIANGLES,A,Z[E.overscaledZ],z,K.disabled,Yt,pt,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}},background:function(y,t,u,m){const b=u.paint.get("background-color"),S=u.paint.get("background-opacity");if(0===S)return;const R=y.context,B=R.gl,z=y.transform,Z=z.tileSize,ne=u.paint.get("background-pattern");if(y.isPatternMissing(ne))return;const x=!ne&&1===b.a&&1===S&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==x)return;const D=Q.disabled,E=y.depthModeForSublayer(0,"opaque"===x?Pi.ReadWrite:Pi.ReadOnly),A=y.colorModeForRenderPass(),k=y.useProgram(ne?"backgroundPattern":"background"),G=m||z.coveringTiles({tileSize:Z,terrain:y.style.map.terrain});ne&&(R.activeTexture.set(B.TEXTURE0),y.imageManager.bind(y.context));const se=u.getCrossfadeParameters();for(const pe of G){const me=m?pe.posMatrix:y.transform.calculatePosMatrix(pe.toUnwrapped()),qe=ne?Ts(me,S,y,ne,{tileID:pe,tileSize:Z},se):qs(me,S,b),pt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe);k.draw(R,B.TRIANGLES,E,D,A,K.disabled,qe,pt,u.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}},debug:function(y,t,u){for(let m=0;m<u.length;m++)jo(y,t,u[m])},custom:function(y,t,u){const m=y.context,b=u.implementation;if("offscreen"===y.renderPass){const S=b.prerender;S&&(y.setCustomLayerDefaults(),m.setColorMode(y.colorModeForRenderPass()),S.call(b,m.gl,y.transform.customLayerMatrix()),m.setDirty(),y.setBaseState())}else if("translucent"===y.renderPass){y.setCustomLayerDefaults(),m.setColorMode(y.colorModeForRenderPass()),m.setStencilMode(Q.disabled);const S="3d"===b.renderingMode?new Pi(y.context.gl.LEQUAL,Pi.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Pi.ReadOnly);m.setDepthMode(S),b.render(m.gl,y.transform.customLayerMatrix()),m.setDirty(),y.setBaseState(),m.bindFramebuffer.set(null)}}};class Zr{constructor(t,u){this.context=new La(t),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:g.create(),renderTime:0},this.setup(),this.numSublayers=tt.maxUnderzooming+tt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Er}resize(t,u,m){if(this.width=t*m,this.height=u*m,this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const t=this.context,u=new g.PosArray;u.emplaceBack(0,0),u.emplaceBack(g.EXTENT,0),u.emplaceBack(0,g.EXTENT),u.emplaceBack(g.EXTENT,g.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(u,$r.members),this.tileExtentSegments=g.SegmentVector.simpleSegment(0,0,4,2);const m=new g.PosArray;m.emplaceBack(0,0),m.emplaceBack(g.EXTENT,0),m.emplaceBack(0,g.EXTENT),m.emplaceBack(g.EXTENT,g.EXTENT),this.debugBuffer=t.createVertexBuffer(m,$r.members),this.debugSegments=g.SegmentVector.simpleSegment(0,0,4,5);const b=new g.RasterBoundsArray;b.emplaceBack(0,0,0,0),b.emplaceBack(g.EXTENT,0,g.EXTENT,0),b.emplaceBack(0,g.EXTENT,0,g.EXTENT),b.emplaceBack(g.EXTENT,g.EXTENT,g.EXTENT,g.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(b,en.members),this.rasterBoundsSegments=g.SegmentVector.simpleSegment(0,0,4,2);const S=new g.PosArray;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(S,$r.members),this.viewportSegments=g.SegmentVector.simpleSegment(0,0,4,2);const R=new g.LineStripIndexArray;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(R);const B=new g.TriangleIndexArray;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(B);const z=this.context.gl;this.stencilClearMode=new Q({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const t=this.context,u=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=g.create();g.ortho(m,0,this.width,this.height,0,0,1),g.scale(m,m,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,u.TRIANGLES,Pi.disabled,this.stencilClearMode,Vn.disabled,K.disabled,Pl(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,u){if(this.currentStencilSource===t.source||!t.isTileClipped()||!u||!u.length)return;this.currentStencilSource=t.source;const m=this.context,b=m.gl;this.nextStencilID+u.length>256&&this.clearStencil(),m.setColorMode(Vn.disabled),m.setDepthMode(Pi.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const R of u){const B=this._tileClippingMaskIDs[R.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R);S.draw(m,b.TRIANGLES,Pi.disabled,new Q({func:b.ALWAYS,mask:0},B,255,b.KEEP,b.KEEP,b.REPLACE),Vn.disabled,K.disabled,Pl(R.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,u=this.context.gl;return new Q({func:u.NOTEQUAL,mask:255},t,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(t){const u=this.context.gl;return new Q({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(t){const u=this.context.gl,m=t.sort((R,B)=>B.overscaledZ-R.overscaledZ),b=m[m.length-1].overscaledZ,S=m[0].overscaledZ-b+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const R={};for(let B=0;B<S;B++)R[B+b]=new Q({func:u.GEQUAL,mask:255},B+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=S,[R,m]}return[{[b]:Q.disabled},m]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Vn([t.CONSTANT_COLOR,t.ONE],new g.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Vn.unblended:Vn.alphaBlended}depthModeForSublayer(t,u,m){if(!this.opaquePassEnabledForLayer())return Pi.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Pi(m||this.context.gl.LEQUAL,u,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,u){this.style=t,this.options=u,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(g.exported.now()),this.imageManager.beginFrame();const m=this.style._order,b=this.style.sourceCaches,S={},R={},B={};for(const z in b){const Z=b[z];Z.used&&Z.prepare(this.context),S[z]=Z.getVisibleCoordinates(),R[z]=S[z].slice().reverse(),B[z]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<m.length;z++)if(this.style._layers[m[z]].is3D()){this.opaquePassCutoff=z;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const z=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!g.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||z.length)&&(g.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Z,ne){const x=Z.context,D=x.gl,E=Vn.unblended,A=new Pi(D.LEQUAL,Pi.ReadWrite,[0,1]),k=ne.getTerrainMesh(),G=ne.sourceCache.getRenderableTiles(),se=Z.useProgram("terrainDepth");x.bindFramebuffer.set(ne.getFramebuffer("depth").framebuffer),x.viewport.set([0,0,Z.width/devicePixelRatio,Z.height/devicePixelRatio]),x.clear({color:g.Color.transparent,depth:1});for(const pe of G){const me=ne.getTerrainData(pe.tileID),qe={u_matrix:Z.transform.calculatePosMatrix(pe.tileID.toUnwrapped()),u_ele_delta:ne.getMeshFrameDelta(Z.transform.zoom)};se.draw(x,D.TRIANGLES,A,Q.disabled,E,K.backCCW,qe,me,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}x.bindFramebuffer.set(null),x.viewport.set([0,0,Z.width,Z.height])}(this,this.style.map.terrain),function(Z,ne){const x=Z.context,D=x.gl,E=Vn.unblended,A=new Pi(D.LEQUAL,Pi.ReadWrite,[0,1]),k=ne.getTerrainMesh(),G=ne.getCoordsTexture(),se=ne.sourceCache.getRenderableTiles(),pe=Z.useProgram("terrainCoords");x.bindFramebuffer.set(ne.getFramebuffer("coords").framebuffer),x.viewport.set([0,0,Z.width/devicePixelRatio,Z.height/devicePixelRatio]),x.clear({color:g.Color.transparent,depth:1}),ne.coordsIndex=[];for(const me of se){const qe=ne.getTerrainData(me.tileID);x.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,G.texture);const pt={u_matrix:Z.transform.calculatePosMatrix(me.tileID.toUnwrapped()),u_terrain_coords_id:(255-ne.coordsIndex.length)/255,u_texture:0,u_ele_delta:ne.getMeshFrameDelta(Z.transform.zoom)};pe.draw(x,D.TRIANGLES,A,Q.disabled,E,K.backCCW,pt,qe,"terrain",k.vertexBuffer,k.indexBuffer,k.segments),ne.coordsIndex.push(me.tileID.key)}x.bindFramebuffer.set(null),x.viewport.set([0,0,Z.width,Z.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const z of m){const Z=this.style._layers[z];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const ne=R[Z.source];("custom"===Z.type||ne.length)&&this.renderLayer(this,b[Z.source],Z,ne)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?g.Color.black:g.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[m[this.currentLayer]],Z=b[z.source],ne=S[z.source];this._renderTileClippingMasks(z,ne),this.renderLayer(this,Z,z,ne)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const z=this.style._layers[m[this.currentLayer]],Z=b[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const ne=("symbol"===z.type?B:R)[z.source];this._renderTileClippingMasks(z,S[z.source]),this.renderLayer(this,Z,z,ne)}if(this.options.showTileBoundaries){const z=function(Z,ne){let x=null;const D=Object.values(Z._layers).flatMap(G=>G.source&&!G.isHidden(ne)?[Z.sourceCaches[G.source]]:[]),E=D.filter(G=>"vector"===G.getSource().type),A=D.filter(G=>"vector"!==G.getSource().type),k=G=>{(!x||x.getSource().maxzoom<G.getSource().maxzoom)&&(x=G)};return E.forEach(G=>k(G)),x||A.forEach(G=>k(G)),x}(this.style,this.transform.zoom);z&&Ya.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const Z=z.transform.padding;Fa(z,z.transform.height-(Z.top||0),3,Ic),Fa(z,Z.bottom||0,3,Ac),br(z,Z.left||0,3,ga),br(z,z.transform.width-(Z.right||0),3,_a);const ne=z.transform.centerPoint;var x,D,E,A;Uo(x=z,(D=ne.x)-1,(E=z.transform.height-ne.y)-10,2,20,A=gl),Uo(x,D-10,E-1,20,2,A)}(this),this.context.setDefault()}renderLayer(t,u,m,b){m.isHidden(this.transform.zoom)||("background"===m.type||"custom"===m.type||(b||[]).length)&&(this.id=m.id,Ya[m.type](t,u,m,b,this.style.placement.variableOffsets))}translatePosMatrix(t,u,m,b,S){if(!m[0]&&!m[1])return t;const R=S?"map"===b?this.transform.angle:0:"viewport"===b?-this.transform.angle:0;if(R){const Z=Math.sin(R),ne=Math.cos(R);m=[m[0]*ne-m[1]*Z,m[0]*Z+m[1]*ne]}const B=[S?m[0]:Ye(u,m[0],this.transform.zoom),S?m[1]:Ye(u,m[1],this.transform.zoom),0],z=new Float32Array(16);return g.translate(z,t,B),z}saveTileTexture(t){const u=this._tileTextures[t.size[0]];u?u.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const u=this._tileTextures[t];return u&&u.length>0?u.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const u=this.imageManager.getPattern(t.from.toString()),m=this.imageManager.getPattern(t.to.toString());return!u||!m}useProgram(t,u){this.cache=this.cache||{};const m=t+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new wr(this.context,t,Ai[t],u,Is[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ot(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class U{constructor(t,u){this.points=t,this.planes=u}static fromInvProjectionMatrix(t,u,m){const b=Math.pow(2,m),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(B=>{const z=1/(B=g.transformMat4([],B,t))[3]/u*b;return g.mul$1(B,B,[z,z,1/B[3],z])}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(B=>{const z=function(D,E){var A=E[0],k=E[1],G=E[2],se=A*A+k*k+G*G;return se>0&&(se=1/Math.sqrt(se)),D[0]=E[0]*se,D[1]=E[1]*se,D[2]=E[2]*se,D}([],(D=[],E=Xt([],S[B[0]],S[B[1]]),A=Xt([],S[B[2]],S[B[1]]),k=E[0],pe=A[0],D[0]=(G=E[1])*(qe=A[2])-(se=E[2])*(me=A[1]),D[1]=se*pe-k*qe,D[2]=k*me-G*pe,D)),Z=-((ne=z)[0]*(x=S[B[1]])[0]+ne[1]*x[1]+ne[2]*x[2]);var D,E,A,k,G,se,pe,me,qe,ne,x;return z.concat(Z)});return new U(S,R)}}class oe{constructor(t,u){var m,b,S;this.min=t,this.max=u,this.center=function(m,b,S){return m[0]=.5*b[0],m[1]=.5*b[1],m[2]=.5*b[2],m}([],((m=[])[0]=(b=this.min)[0]+(S=this.max)[0],m[1]=b[1]+S[1],m[2]=b[2]+S[2],m))}quadrant(t){const u=[t%2==0,t<2],m=Tt(this.min),b=Tt(this.max);for(let S=0;S<u.length;S++)m[S]=u[S]?this.min[S]:this.center[S],b[S]=u[S]?this.center[S]:this.max[S];return b[2]=this.max[2],new oe(m,b)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let b=0;b<t.planes.length;b++){const S=t.planes[b];let R=0;for(let B=0;B<u.length;B++)g.dot(S,u[B])>=0&&R++;if(0===R)return 0;R!==u.length&&(m=!1)}if(m)return 2;for(let b=0;b<3;b++){let S=Number.MAX_VALUE,R=-Number.MAX_VALUE;for(let B=0;B<t.points.length;B++){const z=t.points[B][b]-this.min[b];S=Math.min(S,z),R=Math.max(R,z)}if(R<0||S>this.max[b]-this.min[b])return 0}return 1}}class q{constructor(t=0,u=0,m=0,b=0){if(isNaN(t)||t<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=u,this.left=m,this.right=b}interpolate(t,u,m){return null!=u.top&&null!=t.top&&(this.top=g.interpolate.number(t.top,u.top,m)),null!=u.bottom&&null!=t.bottom&&(this.bottom=g.interpolate.number(t.bottom,u.bottom,m)),null!=u.left&&null!=t.left&&(this.left=g.interpolate.number(t.left,u.left,m)),null!=u.right&&null!=t.right&&(this.right=g.interpolate.number(t.right,u.right,m)),this}getCenter(t,u){const m=g.clamp((this.left+t-this.right)/2,0,t),b=g.clamp((this.top+u-this.bottom)/2,0,u);return new g.Point(m,b)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new q(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class be{constructor(t,u,m,b,S){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===S||!!S,this._minZoom=t||0,this._maxZoom=u||22,this._minPitch=m??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new g.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new q,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new be(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t._elevation=this._elevation,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new g.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const u=-g.wrap(t,-180,180)*Math.PI/180;var m;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(m=new g.ARRAY_TYPE(4),g.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(m,b,S){var R=b[0],B=b[1],z=b[2],Z=b[3],ne=Math.sin(S),x=Math.cos(S);m[0]=R*x+z*ne,m[1]=B*x+Z*ne,m[2]=R*-ne+z*x,m[3]=B*-ne+Z*x}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const u=g.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const u=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,u,m){this._unmodified=!1,this._edgeInsets.interpolate(t,u,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const u=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(t){const u=[new g.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const m=this.pointCoordinate(new g.Point(0,0)),b=this.pointCoordinate(new g.Point(this.width,0)),S=this.pointCoordinate(new g.Point(this.width,this.height)),R=this.pointCoordinate(new g.Point(0,this.height)),B=Math.floor(Math.min(m.x,b.x,S.x,R.x)),z=Math.floor(Math.max(m.x,b.x,S.x,R.x)),Z=1;for(let ne=B-Z;ne<=z+Z;ne++)0!==ne&&u.push(new g.UnwrappedTileID(ne,t))}return u}coveringTiles(t){var u,m;let b=this.coveringZoomLevel(t);const S=b;if(void 0!==t.minzoom&&b<t.minzoom)return[];void 0!==t.maxzoom&&b>t.maxzoom&&(b=t.maxzoom);const R=this.pointCoordinate(this.getCameraPoint()),B=g.MercatorCoordinate.fromLngLat(this.center),z=Math.pow(2,b),Z=[z*R.x,z*R.y,0],ne=[z*B.x,z*B.y,0],x=U.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b);let D=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(D=b);const E=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,A=me=>({aabb:new oe([me*z,0,0],[(me+1)*z,z,0]),zoom:0,x:0,y:0,wrap:me,fullyVisible:!1}),k=[],G=[],se=b,pe=t.reparseOverscaled?S:b;if(this._renderWorldCopies)for(let me=1;me<=3;me++)k.push(A(-me)),k.push(A(me));for(k.push(A(0));k.length>0;){const me=k.pop(),qe=me.x,pt=me.y;let xt=me.fullyVisible;if(!xt){const Sn=me.aabb.intersects(x);if(0===Sn)continue;xt=2===Sn}const Ht=t.terrain?Z:ne,Yt=me.aabb.distanceX(Ht),Kt=me.aabb.distanceY(Ht),_n=Math.max(Math.abs(Yt),Math.abs(Kt));if(me.zoom===se||_n>E+(1<<se-me.zoom)-2&&me.zoom>=D){const Sn=se-me.zoom,pi=Z[0]-.5-(qe<<Sn),Dn=Z[1]-.5-(pt<<Sn);G.push({tileID:new g.OverscaledTileID(me.zoom===se?pe:me.zoom,me.wrap,me.zoom,qe,pt),distanceSq:Dt([ne[0]-.5-qe,ne[1]-.5-pt]),tileDistanceToCamera:Math.sqrt(pi*pi+Dn*Dn)})}else for(let Sn=0;Sn<4;Sn++){const pi=(qe<<1)+Sn%2,Dn=(pt<<1)+(Sn>>1),si=me.zoom+1;let Tn=me.aabb.quadrant(Sn);if(t.terrain){const qi=new g.OverscaledTileID(si,me.wrap,si,pi,Dn),mr=t.terrain.getMinMaxElevation(qi),Zi=null!==(u=mr.minElevation)&&void 0!==u?u:this.elevation,fi=null!==(m=mr.maxElevation)&&void 0!==m?m:this.elevation;Tn=new oe([Tn.min[0],Tn.min[1],Zi],[Tn.max[0],Tn.max[1],fi])}k.push({aabb:Tn,zoom:si,x:pi,y:Dn,wrap:me.wrap,fullyVisible:xt})}}return G.sort((me,qe)=>me.distanceSq-qe.distanceSq).map(me=>me.tileID)}resize(t,u){this.width=t,this.height=u,this.pixelsToGLUnits=[2/t,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const u=g.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new g.Point(g.mercatorXfromLng(t.lng)*this.worldSize,g.mercatorYfromLat(u)*this.worldSize)}unproject(t){return new g.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(t){this.freezeElevation||(this.elevation=t?this.getElevation(this._center,t):0)}getElevation(t,u){const m=g.MercatorCoordinate.fromLngLat(t.wrap()),b=(1<<this.tileZoom)*g.EXTENT,S=m.x*b,R=m.y*b,B=Math.floor(S/g.EXTENT),z=Math.floor(R/g.EXTENT),Z=new g.OverscaledTileID(this.tileZoom,0,this.tileZoom,B,z);return u.getElevation(Z,S%g.EXTENT,R%g.EXTENT,g.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const u=this.pointLocation(this.centerPoint,t),m=this.getElevation(u,t);if(!(this.elevation-m))return;const b=this.getCameraPosition(),S=g.MercatorCoordinate.fromLngLat(b.lngLat,b.altitude),R=g.MercatorCoordinate.fromLngLat(u,m),B=S.x-R.x,z=S.y-R.y,Z=S.z-R.z,ne=Math.sqrt(B*B+z*z+Z*Z),x=this.scaleZoom(this.cameraToCenterDistance/ne/this.tileSize);this._elevation=m,this._center=u,this.zoom=x}setLocationAtPoint(t,u){const m=this.pointCoordinate(u),b=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(t),R=new g.MercatorCoordinate(S.x-(m.x-b.x),S.y-(m.y-b.y));this.center=this.coordinateLocation(R),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,u){return u?this.coordinatePoint(this.locationCoordinate(t),this.getElevation(t,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,u){return this.coordinateLocation(this.pointCoordinate(t,u))}locationCoordinate(t){return g.MercatorCoordinate.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,u){if(u){const D=u.pointCoordinate(t);if(null!=D)return D}const m=[t.x,t.y,0,1],b=[t.x,t.y,1,1];g.transformMat4(m,m,this.pixelMatrixInverse),g.transformMat4(b,b,this.pixelMatrixInverse);const S=m[3],R=b[3],B=m[1]/S,z=b[1]/R,Z=m[2]/S,ne=b[2]/R,x=Z===ne?0:(0-Z)/(ne-Z);return new g.MercatorCoordinate(g.interpolate.number(m[0]/S,b[0]/R,x)/this.worldSize,g.interpolate.number(B,z,x)/this.worldSize)}coordinatePoint(t,u=0,m=this.pixelMatrix){const b=[t.x*this.worldSize,t.y*this.worldSize,u,1];return g.transformMat4(b,b,m),new g.Point(b[0]/b[3],b[1]/b[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return(new Qn).extend(this.pointLocation(new g.Point(0,t))).extend(this.pointLocation(new g.Point(this.width,t))).extend(this.pointLocation(new g.Point(this.width,this.height))).extend(this.pointLocation(new g.Point(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Qn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,u=!1){const m=t.key,b=u?this._alignedPosMatrixCache:this._posMatrixCache;if(b[m])return b[m];const S=t.canonical,R=this.worldSize/this.zoomScale(S.z),B=S.x+Math.pow(2,S.z)*t.wrap,z=g.identity(new Float64Array(16));return g.translate(z,z,[B*R,S.y*R,0]),g.scale(z,z,[R/g.EXTENT,R/g.EXTENT,1]),g.multiply(z,u?this.alignedProjMatrix:this.projMatrix,z),b[m]=new Float32Array(z),b[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,u,m,b,S=-90,R=90,B=-180,z=180;const Z=this.size,ne=this._unmodified;if(this.latRange){const E=this.latRange;S=g.mercatorYfromLat(E[1])*this.worldSize,R=g.mercatorYfromLat(E[0])*this.worldSize,t=R-S<Z.y?Z.y/(R-S):0}if(this.lngRange){const E=this.lngRange;B=g.wrap(g.mercatorXfromLng(E[0])*this.worldSize,0,this.worldSize),z=g.wrap(g.mercatorXfromLng(E[1])*this.worldSize,0,this.worldSize),z<B&&(z+=this.worldSize),u=z-B<Z.x?Z.x/(z-B):0}const x=this.point,D=Math.max(u||0,t||0);if(D)return this.center=this.unproject(new g.Point(u?(z+B)/2:x.x,t?(R+S)/2:x.y)),this.zoom+=this.scaleZoom(D),this._unmodified=ne,void(this._constraining=!1);if(this.latRange){const E=x.y,A=Z.y/2;E-A<S&&(b=S+A),E+A>R&&(b=R-A)}if(this.lngRange){const E=(B+z)/2,A=g.wrap(x.x,E-this.worldSize/2,E+this.worldSize/2),k=Z.x/2;A-k<B&&(m=B+k),A+k>z&&(m=z-k)}void 0===m&&void 0===b||(this.center=this.unproject(new g.Point(void 0!==m?m:x.x,void 0!==b?b:x.y)).wrap()),this._unmodified=ne,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,u=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=g.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let b=g.identity(new Float64Array(16));g.scale(b,b,[this.width/2,-this.height/2,1]),g.translate(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=g.identity(new Float64Array(16)),g.scale(b,b,[1,-1,1]),g.translate(b,b,[-1,-1,0]),g.scale(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const S=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,R=Math.PI/2+this._pitch,B=this._fov*(.5+t.y/this.height),z=Math.sin(B)*S/Math.sin(g.clamp(Math.PI-R-B,.01,Math.PI-.01)),Z=this.getHorizon(),ne=2*Math.atan(Z/this.cameraToCenterDistance)*(.5+t.y/(2*Z)),x=Math.sin(ne)*S/Math.sin(g.clamp(Math.PI-R-ne,.01,Math.PI-.01)),D=Math.min(z,x),E=1.01*(Math.cos(Math.PI/2-this._pitch)*D+S),A=this.height/50;b=new Float64Array(16),g.perspective(b,this._fov,this.width/this.height,A,E),b[8]=2*-t.x/this.width,b[9]=2*t.y/this.height,g.scale(b,b,[1,-1,1]),g.translate(b,b,[0,0,-this.cameraToCenterDistance]),g.rotateX(b,b,this._pitch),g.rotateZ(b,b,this.angle),g.translate(b,b,[-u,-m,0]),this.mercatorMatrix=g.scale([],b,[this.worldSize,this.worldSize,this.worldSize]),g.scale(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=g.multiply(new Float64Array(16),this.labelPlaneMatrix,b),g.translate(b,b,[0,0,-this.elevation]),this.projMatrix=b,this.invProjMatrix=g.invert([],b),this.pixelMatrix3D=g.multiply(new Float64Array(16),this.labelPlaneMatrix,b);const k=this.width%2/2,G=this.height%2/2,se=Math.cos(this.angle),pe=Math.sin(this.angle),me=u-Math.round(u)+se*k+pe*G,qe=m-Math.round(m)+se*G+pe*k,pt=new Float64Array(b);if(g.translate(pt,pt,[me>.5?me-1:me,qe>.5?qe-1:qe,0]),this.alignedProjMatrix=pt,b=g.invert(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new g.Point(0,0)),u=[t.x*this.worldSize,t.y*this.worldSize,0,1];return g.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new g.Point(0,t))}getCameraQueryGeometry(t){const u=this.getCameraPoint();if(1===t.length)return[t[0],u];{let m=u.x,b=u.y,S=u.x,R=u.y;for(const B of t)m=Math.min(m,B.x),b=Math.min(b,B.y),S=Math.max(S,B.x),R=Math.max(R,B.y);return[new g.Point(m,b),new g.Point(S,b),new g.Point(S,R),new g.Point(m,R),new g.Point(m,b)]}}}class Qe{constructor(t){this._hashName=t&&encodeURIComponent(t),g.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,m){let b=!1,S=null;const R=()=>{S=null,b&&(u(),S=setTimeout(R,300),b=!1)};return()=>(b=!0,S||R(),S)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const u=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,b=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,b),R=Math.round(u.lng*S)/S,B=Math.round(u.lat*S)/S,z=this._map.getBearing(),Z=this._map.getPitch();let ne="";if(ne+=t?`/${R}/${B}/${m}`:`${m}/${B}/${R}`,(z||Z)&&(ne+="/"+Math.round(10*z)/10),Z&&(ne+=`/${Math.round(Z)}`),this._hashName){const x=this._hashName;let D=!1;const E=window.location.hash.slice(1).split("&").map(A=>{const k=A.split("=")[0];return k===x?(D=!0,`${k}=${ne}`):A}).filter(A=>A);return D||E.push(`${x}=${ne}`),`#${E.join("&")}`}return`#${ne}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let u;return t.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(u=m)}),(u&&u[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:u,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch{}}}const Mt={linearity:.3,easing:g.bezier(0,0,.3,1)},jt=g.extend({deceleration:2500,maxSpeed:1400},Mt),Fn=g.extend({deceleration:20,maxSpeed:1400},Mt),zi=g.extend({deceleration:1e3,maxSpeed:360},Mt),ci=g.extend({deceleration:1e3,maxSpeed:90},Mt);class Mi{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:g.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,u=g.exported.now();for(;t.length>0&&u-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new g.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)u.zoom+=S.zoomDelta||0,u.bearing+=S.bearingDelta||0,u.pitch+=S.pitchDelta||0,S.panDelta&&u.pan._add(S.panDelta),S.around&&(u.around=S.around),S.pinchAround&&(u.pinchAround=S.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(u.pan.mag()){const S=rr(u.pan.mag(),m,g.extend({},jt,t||{}));b.offset=u.pan.mult(S.amount/u.pan.mag()),b.center=this._map.transform.center,ti(b,S)}if(u.zoom){const S=rr(u.zoom,m,Fn);b.zoom=this._map.transform.zoom+S.amount,ti(b,S)}if(u.bearing){const S=rr(u.bearing,m,zi);b.bearing=this._map.transform.bearing+g.clamp(S.amount,-179,179),ti(b,S)}if(u.pitch){const S=rr(u.pitch,m,ci);b.pitch=this._map.transform.pitch+S.amount,ti(b,S)}if(b.zoom||b.bearing){const S=void 0===u.pinchAround?u.around:u.pinchAround;b.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),g.extend(b,{noMoveStart:!0})}}function ti(y,t){(!y.duration||y.duration<t.duration)&&(y.duration=t.duration,y.easing=t.easing)}function rr(y,t,u){const{maxSpeed:m,linearity:b,deceleration:S}=u,R=g.clamp(y*b/(t/1e3),-m,m),B=Math.abs(R)/(S*b);return{easing:u.easing,duration:1e3*B,amount:R*(B/2)}}class ni extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,m,b={}){const S=he.mousePos(u.getCanvasContainer(),m),R=u.unproject(S);super(t,g.extend({point:S,lngLat:R,originalEvent:m},b)),this._defaultPrevented=!1,this.target=u}}class vi extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,m){const b="touchend"===t?m.changedTouches:m.touches,S=he.touchPos(u.getCanvasContainer(),b),R=S.map(z=>u.unproject(z)),B=S.reduce((z,Z,ne,x)=>z.add(Z.div(x.length)),new g.Point(0,0));super(t,{points:S,point:B,lngLats:R,lngLat:u.unproject(B),originalEvent:m}),this._defaultPrevented=!1}}class Yr extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,u,m){super(t,{originalEvent:m}),this._defaultPrevented=!1}}class Co{constructor(t,u){this._map=t,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Yr(t.type,this._map,t))}mousedown(t,u){return this._mousedownPos=u,this._firePreventable(new ni(t.type,this._map,t))}mouseup(t){this._map.fire(new ni(t.type,this._map,t))}click(t,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ni(t.type,this._map,t))}dblclick(t){return this._firePreventable(new ni(t.type,this._map,t))}mouseover(t){this._map.fire(new ni(t.type,this._map,t))}mouseout(t){this._map.fire(new ni(t.type,this._map,t))}touchstart(t){return this._firePreventable(new vi(t.type,this._map,t))}touchmove(t){this._map.fire(new vi(t.type,this._map,t))}touchend(t){this._map.fire(new vi(t.type,this._map,t))}touchcancel(t){this._map.fire(new vi(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class er{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new ni(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ni("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new ni(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zr{constructor(t,u){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,u){this.isEnabled()&&t.shiftKey&&0===t.button&&(he.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(t,u){if(!this._active)return;const m=u;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=m,this._box||(this._box=he.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const S=Math.min(b.x,m.x),R=Math.max(b.x,m.x),B=Math.min(b.y,m.y),z=Math.max(b.y,m.y);he.setTransform(this._box,`translate(${S}px,${B}px)`),this._box.style.width=R-S+"px",this._box.style.height=z-B+"px"}mouseupWindow(t,u){if(!this._active||0!==t.button)return;const m=this._startPos,b=u;if(this.reset(),he.suppressClick(),m.x!==b.x||m.y!==b.y)return this._map.fire(new g.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:S=>S.fitScreenCoordinates(m,b,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(he.remove(this._box),this._box=null),he.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,u){return this._map.fire(new g.Event(t,{originalEvent:u}))}}function Eo(y,t){if(y.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${t.length}`);const u={};for(let m=0;m<y.length;m++)u[y[m].identifier]=t[m];return u}class Vr{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),m.length===this.numTouches&&(this.centroid=function(b){const S=new g.Point(0,0);for(const R of b)S._add(R);return S.div(b.length)}(u),this.touches=Eo(m,u)))}touchmove(t,u,m){if(this.aborted||!this.centroid)return;const b=Eo(m,u);for(const S in this.touches){const R=b[S];(!R||R.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(t,u,m){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===m.length){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Do{constructor(t){this.singleTap=new Vr(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,u,m){this.singleTap.touchstart(t,u,m)}touchmove(t,u,m){this.singleTap.touchmove(t,u,m)}touchend(t,u,m){const b=this.singleTap.touchend(t,u,m);if(b){const S=t.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(b)<30;if(S&&R||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class Xr{constructor(){this._zoomIn=new Do({numTouches:1,numTaps:2}),this._zoomOut=new Do({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,u,m){this._zoomIn.touchstart(t,u,m),this._zoomOut.touchstart(t,u,m)}touchmove(t,u,m){this._zoomIn.touchmove(t,u,m),this._zoomOut.touchmove(t,u,m)}touchend(t,u,m){const b=this._zoomIn.touchend(t,u,m),S=this._zoomOut.touchend(t,u,m);return b?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:R.getZoom()+1,around:R.unproject(b)},{originalEvent:t})}):S?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:R.getZoom()-1,around:R.unproject(S)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xs{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const u=this._moveFunction(...t);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(t,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,u){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const b=u.length?u[0]:u;return!this._moved&&b.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(m,b))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&he.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ic={0:1,2:2};class rc{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const u=he.mouseButton(t);this._eventButton=u}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(u,m){const b=ic[m];return void 0===u.buttons||(u.buttons&b)!==b}(t,this._eventButton)}isValidEndEvent(t){return he.mouseButton(t)===this._eventButton}}class _l{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return 1===t.targetTouches.length}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}const Js=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(t){t.preventDefault()}},Pn=({enable:y,clickTolerance:t,bearingDegreesPerPixelMoved:u=.8})=>{const m=new rc({checkCorrectEvent:b=>0===he.mouseButton(b)&&b.ctrlKey||2===he.mouseButton(b)});return new xs({clickTolerance:t,move:(b,S)=>({bearingDelta:(S.x-b.x)*u}),moveStateManager:m,enable:y,assignEvents:Js})},Fl=({enable:y,clickTolerance:t,pitchDegreesPerPixelMoved:u=-.5})=>{const m=new rc({checkCorrectEvent:b=>0===he.mouseButton(b)&&b.ctrlKey||2===he.mouseButton(b)});return new xs({clickTolerance:t,move:(b,S)=>({pitchDelta:(S.y-b.y)*u}),moveStateManager:m,enable:y,assignEvents:Js})};class yl{constructor(t,u){this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new g.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(t,u,m){return this._calculateTransform(t,u,m)}touchmove(t,u,m){if(this._map._cooperativeGestures&&(2===this._minTouches&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,u,m)}touchend(t,u,m){this._calculateTransform(t,u,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,u,m){m.length>0&&(this._active=!0);const b=Eo(m,u),S=new g.Point(0,0),R=new g.Point(0,0);let B=0;for(const Z in b){const ne=b[Z],x=this._touches[Z];x&&(S._add(ne),R._add(ne.sub(x)),B++,b[Z]=ne)}if(this._touches=b,B<this._minTouches||!R.mag())return;const z=R.div(B);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(B),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Na{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,u,m){return{}}touchstart(t,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(t,u,m){if(!this._firstTwoTouches)return;t.preventDefault();const[b,S]=this._firstTwoTouches,R=os(m,u,b),B=os(m,u,S);if(!R||!B)return;const z=this._aroundCenter?null:R.add(B).div(2);return this._move([R,B],z,t)}touchend(t,u,m){if(!this._firstTwoTouches)return;const[b,S]=this._firstTwoTouches,R=os(m,u,b),B=os(m,u,S);R&&B||(this._active&&he.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function os(y,t,u){for(let m=0;m<y.length;m++)if(y[m].identifier===u)return t[m]}function yn(y,t){return Math.log(y/t)/Math.LN2}class Nl extends Na{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,u){const m=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(yn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:yn(this._distance,m),pinchAround:u}}}function ss(y,t){return 180*y.angleWith(t)/Math.PI}class oc extends Na{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,u){const m=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ss(this._vector,m),pinchAround:u}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const u=25/(Math.PI*this._minDiameter)*360,m=ss(t,this._startVector);return Math.abs(m)<u}}function as(y){return Math.abs(y.y)>Math.abs(y.x)}class vl extends Na{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,u,m){super.touchstart(t,u,m),this._currentTouchCount=m.length}_start(t){this._lastPoints=t,as(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,u,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const b=t[0].sub(this._lastPoints[0]),S=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,S,m.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(b.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(t,u,m){if(void 0!==this._valid)return this._valid;const b=t.mag()>=2,S=u.mag()>=2;if(!b&&!S)return;if(!b||!S)return void 0===this._firstMove&&(this._firstMove=m),m-this._firstMove<100&&void 0;const R=t.y>0==u.y>0;return as(t)&&as(u)&&R}}const Xa={panStep:100,bearingStep:15,pitchStep:10};class eu{constructor(){const t=Xa;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let u=0,m=0,b=0,S=0,R=0;switch(t.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:t.shiftKey?m=-1:(t.preventDefault(),S=-1);break;case 39:t.shiftKey?m=1:(t.preventDefault(),S=1);break;case 38:t.shiftKey?b=1:(t.preventDefault(),R=-1);break;case 40:t.shiftKey?b=-1:(t.preventDefault(),R=1);break;default:return}return this._rotationDisabled&&(m=0,b=0),{cameraAnimation:B=>{const z=B.getZoom();B.easeTo({duration:300,easeId:"keyboardHandler",easing:Pc,zoom:u?Math.round(z)+u*(t.shiftKey?2:1):z,bearing:B.getBearing()+m*this._bearingStep,pitch:B.getPitch()+b*this._pitchStep,offset:[-S*this._panStep,-R*this._panStep],center:B.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pc(y){return y*(2-y)}const Bl=4.000244140625;class Ja{constructor(t,u){this._map=t,this._el=t.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,g.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!t[this._map._metaKey])return;t.preventDefault()}let u=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const m=g.exported.now(),b=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,0!==u&&u%Bl==0?this._type="wheel":0!==u&&Math.abs(u)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(b*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),t.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=t,this._delta-=u,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=he.mousePos(this._el,t);this._around=g.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._map.transform;if(0!==this._delta){const B="wheel"===this._type&&Math.abs(this._delta)>Bl?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&0!==z&&(z=1/z);const Z="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(Z*z))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u="number"==typeof this._targetZoom?this._targetZoom:t.zoom,m=this._startZoom,b=this._easing;let S,R=!1;if("wheel"===this._type&&m&&b){const B=Math.min((g.exported.now()-this._lastWheelEventTime)/200,1),z=b(B);S=g.interpolate.number(m,u,z),B<1?this._frameId||(this._frameId=!0):R=!0}else S=u,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!R,zoomDelta:S-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let u=g.ease;if(this._prevEase){const m=this._prevEase,b=(g.exported.now()-m.start)/m.duration,S=m.easing(b+.01)-m.easing(b),R=.27/Math.sqrt(S*S+1e-4)*.01,B=Math.sqrt(.0729-R*R);u=g.bezier(R,B,.25,1)}return this._prevEase={start:g.exported.now(),duration:t,easing:u},u}reset(){this._active=!1}}class ls{constructor(t,u){this._clickZoom=t,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zl{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,u){return t.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(t.shiftKey?-1:1),around:m.unproject(u)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wr{constructor(){this._tap=new Do({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,u,m){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=u[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(t,u,m))}touchmove(t,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const b=u[0],S=b.y-this._swipePoint.y;return this._swipePoint=b,t.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(t,u,m)}touchend(t,u,m){this._tapTime?this._swipePoint&&0===m.length&&this.reset():this._tap.touchend(t,u,m)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qs{constructor(t,u,m){this._el=t,this._mousePan=u,this._touchPan=m}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sc{constructor(t,u,m){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=u,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ea{constructor(t,u,m,b){this._el=t,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Rs=y=>y.zoom||y.drag||y.pitch||y.rotate;class Oc extends g.Event{}function bl(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class cs{constructor(t,u){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mi(t),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),g.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,S,R]of this._listeners)he.addEventListener(b,S,b===document?this.handleWindowEvent:this.handleEvent,R)}destroy(){for(const[t,u,m]of this._listeners)he.removeEventListener(t,u,t===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(t){const u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new Co(u,t));const b=u.boxZoom=new zr(u,t);this._add("boxZoom",b);const S=new Xr,R=new zl;u.doubleClickZoom=new ls(R,S),this._add("tapZoom",S),this._add("clickZoom",R);const B=new Wr;this._add("tapDragZoom",B);const z=u.touchPitch=new vl(u);this._add("touchPitch",z);const Z=Pn(t),ne=Fl(t);u.dragRotate=new sc(t,Z,ne),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",ne,["mouseRotate"]);const x=(({enable:se,clickTolerance:pe})=>{const me=new rc({checkCorrectEvent:qe=>0===he.mouseButton(qe)&&!qe.ctrlKey});return new xs({clickTolerance:pe,move:(qe,pt)=>({around:pt,panDelta:pt.sub(qe)}),activateOnStart:!0,moveStateManager:me,enable:se,assignEvents:Js})})(t),D=new yl(t,u);u.dragPan=new Qs(m,x,D),this._add("mousePan",x),this._add("touchPan",D,["touchZoom","touchRotate"]);const E=new oc,A=new Nl;u.touchZoomRotate=new ea(m,A,E,B),this._add("touchRotate",E,["touchPan","touchZoom"]),this._add("touchZoom",A,["touchPan","touchRotate"]);const k=u.scrollZoom=new Ja(u,this);this._add("scrollZoom",k,["mousePan"]);const G=u.keyboard=new eu;this._add("keyboard",G),this._add("blockableMapEvent",new er(u));for(const se of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[se]&&u[se].enable(t[se])}_add(t,u,m){this._handlers.push({handlerName:t,handler:u,allowed:m}),this._handlersById[t]=u}stop(t){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Rs(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,u,m){for(const b in t)if(b!==m&&(!u||u.indexOf(b)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const u=[];for(const m of t)this._el.contains(m.target)&&u.push(m);return u}handleEvent(t,u){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const m="renderFrame"===t.type?void 0:t,b={needsRenderFrame:!1},S={},R={},B=t.touches,z=B?this._getMapTouches(B):void 0,Z=z?he.touchPos(this._el,z):he.mousePos(this._el,t);for(const{handlerName:D,handler:E,allowed:A}of this._handlers){if(!E.isEnabled())continue;let k;this._blockedByActive(R,A,D)?E.reset():E[u||t.type]&&(k=E[u||t.type](t,Z,z),this.mergeHandlerResult(b,S,k,D,m),k&&k.needsRenderFrame&&this._triggerRenderFrame()),(k||E.isActive())&&(R[D]=E)}const ne={};for(const D in this._previousActiveHandlers)R[D]||(ne[D]=m);this._previousActiveHandlers=R,(Object.keys(ne).length||bl(b))&&(this._changes.push([b,S,ne]),this._triggerRenderFrame()),(Object.keys(R).length||bl(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:x}=b;x&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],x(this._map))}mergeHandlerResult(t,u,m,b,S){if(!m)return;g.extend(t,m);const R={handlerName:b,originalEvent:m.originalEvent||S};void 0!==m.zoomDelta&&(u.zoom=R),void 0!==m.panDelta&&(u.drag=R),void 0!==m.pitchDelta&&(u.pitch=R),void 0!==m.bearingDelta&&(u.rotate=R)}_applyChanges(){const t={},u={},m={};for(const[b,S,R]of this._changes)b.panDelta&&(t.panDelta=(t.panDelta||new g.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+b.pitchDelta),void 0!==b.around&&(t.around=b.around),void 0!==b.pinchAround&&(t.pinchAround=b.pinchAround),b.noInertia&&(t.noInertia=b.noInertia),g.extend(u,S),g.extend(m,R);this._updateMapTransform(t,u,m),this._changes=[]}_updateMapTransform(t,u,m){const b=this._map,S=b.transform,R=b.terrain;if(!(bl(t)||R&&this._terrainMovement))return this._fireEvents(u,m,!0);let{panDelta:B,zoomDelta:z,bearingDelta:Z,pitchDelta:ne,around:x,pinchAround:D}=t;void 0!==D&&(x=D),b._stop(!0),x=x||b.transform.centerPoint;const E=S.pointLocation(B?x.sub(B):x);Z&&(S.bearing+=Z),ne&&(S.pitch+=ne),z&&(S.zoom+=z),R?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?S.center=S.pointLocation(S.centerPoint.sub(B)):S.setLocationAtPoint(E,x):(this._terrainMovement=!0,S.freezeElevation=!0,S.setLocationAtPoint(E,x),this._map.once("moveend",()=>{S.freezeElevation=!1,this._terrainMovement=!1,S.recalculateZoom(b.terrain)})):S.setLocationAtPoint(E,x),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(u,m,!0)}_fireEvents(t,u,m){const b=Rs(this._eventsInProgress),S=Rs(t),R={};for(const ne in t){const{originalEvent:x}=t[ne];this._eventsInProgress[ne]||(R[`${ne}start`]=x),this._eventsInProgress[ne]=t[ne]}!b&&S&&this._fireEvent("movestart",S.originalEvent);for(const ne in R)this._fireEvent(ne,R[ne]);S&&this._fireEvent("move",S.originalEvent);for(const ne in t){const{originalEvent:x}=t[ne];this._fireEvent(ne,x)}const B={};let z;for(const ne in this._eventsInProgress){const{handlerName:x,originalEvent:D}=this._eventsInProgress[ne];this._handlersById[x].isActive()||(delete this._eventsInProgress[ne],z=u[x]||D,B[`${ne}end`]=z)}for(const ne in B)this._fireEvent(ne,B[ne]);const Z=Rs(this._eventsInProgress);if(m&&(b||S)&&!Z){this._updatingCamera=!0;const ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),x=D=>0!==D&&-this._bearingSnap<D&&D<this._bearingSnap;ne?(x(ne.bearing||this._map.getBearing())&&(ne.bearing=0),ne.freezeElevation=!0,this._map.easeTo(ne,{originalEvent:z})):(this._map.fire(new g.Event("moveend",{originalEvent:z})),x(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,u){this._map.fire(new g.Event(t,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Oc("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const fr={extend:(y,...t)=>g.extend(y,...t),run(y){y()},logToElement(y,t=!1,u="log"){const m=window.document.getElementById(u);m&&(t&&(m.innerHTML=""),m.innerHTML+=`<br>${y}`)}};class _i extends g.Evented{constructor(t,u){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=u.bearingSnap,g.bindAll(["_renderFrameCallback"],this)}getCenter(){return new g.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,u){return this.jumpTo({center:t},u)}panBy(t,u,m){return t=g.Point.convert(t).mult(-1),this.panTo(this.transform.center,g.extend({offset:t},u),m)}panTo(t,u,m){return this.easeTo(g.extend({center:t},u),m)}getZoom(){return this.transform.zoom}setZoom(t,u){return this.jumpTo({zoom:t},u),this}zoomTo(t,u,m){return this.easeTo(g.extend({zoom:t},u),m)}zoomIn(t,u){return this.zoomTo(this.getZoom()+1,t,u),this}zoomOut(t,u){return this.zoomTo(this.getZoom()-1,t,u),this}getBearing(){return this.transform.bearing}setBearing(t,u){return this.jumpTo({bearing:t},u),this}getPadding(){return this.transform.padding}setPadding(t,u){return this.jumpTo({padding:t},u),this}rotateTo(t,u,m){return this.easeTo(g.extend({bearing:t},u),m)}resetNorth(t,u){return this.rotateTo(0,g.extend({duration:1e3},t),u),this}resetNorthPitch(t,u){return this.easeTo(g.extend({bearing:0,pitch:0,duration:1e3},t),u),this}snapToNorth(t,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,u):this}getPitch(){return this.transform.pitch}setPitch(t,u){return this.jumpTo({pitch:t},u),this}cameraForBounds(t,u){t=Qn.convert(t);const m=u&&u.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),m,u)}_cameraForBoxAndBearing(t,u,m,b){const S={top:0,bottom:0,right:0,left:0};if("number"==typeof(b=g.extend({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding){const pt=b.padding;b.padding={top:pt,bottom:pt,right:pt,left:pt}}b.padding=g.extend(S,b.padding);const R=this.transform,B=R.padding,z=R.project(g.LngLat.convert(t)),Z=R.project(g.LngLat.convert(u)),ne=z.rotate(-m*Math.PI/180),x=Z.rotate(-m*Math.PI/180),D=new g.Point(Math.max(ne.x,x.x),Math.max(ne.y,x.y)),E=new g.Point(Math.min(ne.x,x.x),Math.min(ne.y,x.y)),A=D.sub(E),k=(R.width-(B.left+B.right+b.padding.left+b.padding.right))/A.x,G=(R.height-(B.top+B.bottom+b.padding.top+b.padding.bottom))/A.y;if(G<0||k<0)return void g.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const se=Math.min(R.scaleZoom(R.scale*Math.min(k,G)),b.maxZoom),pe=g.Point.convert(b.offset),me=new g.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(m*Math.PI/180),qe=pe.add(me).mult(R.scale/R.zoomScale(se));return{center:R.unproject(z.add(Z).div(2).sub(qe)),zoom:se,bearing:m}}fitBounds(t,u,m){return this._fitInternal(this.cameraForBounds(t,u),u,m)}fitScreenCoordinates(t,u,m,b,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(g.Point.convert(t)),this.transform.pointLocation(g.Point.convert(u)),m,b),b,S)}_fitInternal(t,u,m){return t?(delete(u=g.extend(t,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this}jumpTo(t,u){this.stop();const m=this.transform;let b=!1,S=!1,R=!1;return"zoom"in t&&m.zoom!==+t.zoom&&(b=!0,m.zoom=+t.zoom),void 0!==t.center&&(m.center=g.LngLat.convert(t.center)),"bearing"in t&&m.bearing!==+t.bearing&&(S=!0,m.bearing=+t.bearing),"pitch"in t&&m.pitch!==+t.pitch&&(R=!0,m.pitch=+t.pitch),null==t.padding||m.isPaddingEqual(t.padding)||(m.padding=t.padding),this.fire(new g.Event("movestart",u)).fire(new g.Event("move",u)),b&&this.fire(new g.Event("zoomstart",u)).fire(new g.Event("zoom",u)).fire(new g.Event("zoomend",u)),S&&this.fire(new g.Event("rotatestart",u)).fire(new g.Event("rotate",u)).fire(new g.Event("rotateend",u)),R&&this.fire(new g.Event("pitchstart",u)).fire(new g.Event("pitch",u)).fire(new g.Event("pitchend",u)),this.fire(new g.Event("moveend",u))}calculateCameraOptionsFromTo(t,u,m,b=0){const S=g.MercatorCoordinate.fromLngLat(t,u),R=g.MercatorCoordinate.fromLngLat(m,b),B=R.x-S.x,z=R.y-S.y,Z=R.z-S.z,ne=Math.hypot(B,z,Z);if(0===ne)throw new Error("Can't calculate camera options with same From and To");const x=Math.hypot(B,z),D=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ne/this.transform.tileSize),E=180*Math.atan2(B,-z)/Math.PI;let A=180*Math.acos(x/ne)/Math.PI;return A=Z<0?90-A:90+A,{center:R.toLngLat(),zoom:D,pitch:A,bearing:E}}easeTo(t,u){this._stop(!1,t.easeId),(!1===(t=g.extend({offset:[0,0],duration:500,easing:g.ease},t)).animate||!t.essential&&g.exported.prefersReducedMotion)&&(t.duration=0);const m=this.transform,b=this.getZoom(),S=this.getBearing(),R=this.getPitch(),B=this.getPadding(),z="zoom"in t?+t.zoom:b,Z="bearing"in t?this._normalizeBearing(t.bearing,S):S,ne="pitch"in t?+t.pitch:R,x="padding"in t?t.padding:m.padding,D=g.Point.convert(t.offset);let E=m.centerPoint.add(D);const A=m.pointLocation(E),k=g.LngLat.convert(t.center||A);this._normalizeCenter(k);const G=m.project(A),se=m.project(k).sub(G),pe=m.zoomScale(z-b);let me,qe;t.around&&(me=g.LngLat.convert(t.around),qe=m.locationPoint(me));const pt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||z!==b,this._rotating=this._rotating||S!==Z,this._pitching=this._pitching||ne!==R,this._padding=!m.isPaddingEqual(x),this._easeId=t.easeId,this._prepareEase(u,t.noMoveStart,pt),this.terrain&&this._prepareElevation(k),this._ease(xt=>{if(this._zooming&&(m.zoom=g.interpolate.number(b,z,xt)),this._rotating&&(m.bearing=g.interpolate.number(S,Z,xt)),this._pitching&&(m.pitch=g.interpolate.number(R,ne,xt)),this._padding&&(m.interpolatePadding(B,x,xt),E=m.centerPoint.add(D)),this.terrain&&!t.freezeElevation&&this._updateElevation(xt),me)m.setLocationAtPoint(me,qe);else{const Ht=m.zoomScale(m.zoom-b),Yt=z>b?Math.min(2,pe):Math.max(.5,pe),Kt=Math.pow(Yt,1-xt),_n=m.unproject(G.add(se.mult(xt*Kt)).mult(Ht));m.setLocationAtPoint(m.renderWorldCopies?_n.wrap():_n,E)}this._fireMoveEvents(u)},xt=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,xt)},t),this}_prepareEase(t,u,m={}){this._moving=!0,u||m.moving||this.fire(new g.Event("movestart",t)),this._zooming&&!m.zooming&&this.fire(new g.Event("zoomstart",t)),this._rotating&&!m.rotating&&this.fire(new g.Event("rotatestart",t)),this._pitching&&!m.pitching&&this.fire(new g.Event("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(t,this.terrain),this.transform.freezeElevation=!0}_updateElevation(t){const u=this.transform.getElevation(this._elevationCenter,this.terrain);if(t<1&&u!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(m-(u-(m*t+this._elevationStart))/(1-t)),this._elevationTarget=u}this.transform.elevation=g.interpolate.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_fireMoveEvents(t){this.fire(new g.Event("move",t)),this._zooming&&this.fire(new g.Event("zoom",t)),this._rotating&&this.fire(new g.Event("rotate",t)),this._pitching&&this.fire(new g.Event("pitch",t))}_afterEase(t,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const m=this._zooming,b=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new g.Event("zoomend",t)),b&&this.fire(new g.Event("rotateend",t)),S&&this.fire(new g.Event("pitchend",t)),this.fire(new g.Event("moveend",t))}flyTo(t,u){if(!t.essential&&g.exported.prefersReducedMotion){const Tn=g.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Tn,u)}this.stop(),t=g.extend({offset:[0,0],speed:1.2,curve:1.42,easing:g.ease},t);const m=this.transform,b=this.getZoom(),S=this.getBearing(),R=this.getPitch(),B=this.getPadding(),z="zoom"in t?g.clamp(+t.zoom,m.minZoom,m.maxZoom):b,Z="bearing"in t?this._normalizeBearing(t.bearing,S):S,ne="pitch"in t?+t.pitch:R,x="padding"in t?t.padding:m.padding,D=m.zoomScale(z-b),E=g.Point.convert(t.offset);let A=m.centerPoint.add(E);const k=m.pointLocation(A),G=g.LngLat.convert(t.center||k);this._normalizeCenter(G);const se=m.project(k),pe=m.project(G).sub(se);let me=t.curve;const qe=Math.max(m.width,m.height),pt=qe/D,xt=pe.mag();if("minZoom"in t){const Tn=g.clamp(Math.min(t.minZoom,b,z),m.minZoom,m.maxZoom),qi=qe/m.zoomScale(Tn-b);me=Math.sqrt(qi/xt*2)}const Ht=me*me;function Yt(Tn){const qi=(pt*pt-qe*qe+(Tn?-1:1)*Ht*Ht*xt*xt)/(2*(Tn?pt:qe)*Ht*xt);return Math.log(Math.sqrt(qi*qi+1)-qi)}function Kt(Tn){return(Math.exp(Tn)-Math.exp(-Tn))/2}function _n(Tn){return(Math.exp(Tn)+Math.exp(-Tn))/2}const Sn=Yt(0);let pi=function(Tn){return _n(Sn)/_n(Sn+me*Tn)},Dn=function(Tn){return qe*((_n(Sn)*(Kt(qi=Sn+me*Tn)/_n(qi))-Kt(Sn))/Ht)/xt;var qi},si=(Yt(1)-Sn)/me;if(Math.abs(xt)<1e-6||!isFinite(si)){if(Math.abs(qe-pt)<1e-6)return this.easeTo(t,u);const Tn=pt<qe?-1:1;si=Math.abs(Math.log(pt/qe))/me,Dn=function(){return 0},pi=function(qi){return Math.exp(Tn*me*qi)}}return t.duration="duration"in t?+t.duration:1e3*si/("screenSpeed"in t?+t.screenSpeed/me:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=S!==Z,this._pitching=ne!==R,this._padding=!m.isPaddingEqual(x),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(G),this._ease(Tn=>{const qi=Tn*si,mr=1/pi(qi);m.zoom=1===Tn?z:b+m.scaleZoom(mr),this._rotating&&(m.bearing=g.interpolate.number(S,Z,Tn)),this._pitching&&(m.pitch=g.interpolate.number(R,ne,Tn)),this._padding&&(m.interpolatePadding(B,x,Tn),A=m.centerPoint.add(E)),this.terrain&&!t.freezeElevation&&this._updateElevation(Tn);const Zi=1===Tn?G:m.unproject(se.add(pe.mult(Dn(qi))).mult(mr));m.setLocationAtPoint(m.renderWorldCopies?Zi.wrap():Zi,A),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}if(!t){const m=this.handlers;m&&m.stop(!1)}return this}_ease(t,u,m){!1===m.animate||0===m.duration?(t(1),u()):(this._easeStart=g.exported.now(),this._easeOptions=m,this._onEaseFrame=t,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((g.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,u){t=g.wrap(t,-180,180);const m=Math.abs(t-u);return Math.abs(t-360-u)<m&&(t-=360),Math.abs(t+360-u)<m&&(t+=360),t}_normalizeCenter(t){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const m=t.lng-u.center.lng;t.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(t){return this.terrain?this.transform.getElevation(g.LngLat.convert(t),this.terrain)-this.transform.elevation:null}}class Rr{constructor(t={}){this.options=t,g.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=he.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=he.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=he.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){he.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,u){const m=this._map._getUIString(`AttributionControl.${u}`);t.title=m,t.setAttribute("aria-label",m)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(b=>"string"!=typeof b?"":b)):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const u=this._map.style.sourceCaches;for(const b in u){const S=u[b];if(S.used||S.usedForTerrain){const R=S.getSource();R.attribution&&t.indexOf(R.attribution)<0&&t.push(R.attribution)}}t=t.filter(b=>String(b).trim()),t.sort((b,S)=>b.length-S.length),t=t.filter((b,S)=>{for(let R=S+1;R<t.length;R++)if(t[R].indexOf(b)>=0)return!1;return!0});const m=t.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,t.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class xl{constructor(t={}){this.options=t,g.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=he.create("div","maplibregl-ctrl");const u=he.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){he.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const u=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}}}class Ba{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const u=++this._id;return this._queue.push({callback:t,id:u,cancelled:!1}),u}remove(t){const u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(const b of m)if(b.id===t)return void(b.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const m of u)if(!m.cancelled&&(m.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ac={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Vl=g.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Ur extends g.Evented{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,u){this.sourceCache.update(t,u),this._renderableTilesKeys=[];const m={};for(const b of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))m[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),g.ortho(b.posMatrix,0,g.EXTENT,0,g.EXTENT,0,1),this._tiles[b.key]=new yi(b,this.tileSize));for(const b in this._tiles)m[b]||delete this._tiles[b]}freeRtt(t){for(const u in this._tiles){const m=this._tiles[u];(!t||m.tileID.equals(t)||m.tileID.isChildOf(t)||t.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const u={};for(const m of this._renderableTilesKeys){const b=this._tiles[m].tileID;if(b.canonical.equals(t.canonical)){const S=t.clone();S.posMatrix=new Float64Array(16),g.ortho(S.posMatrix,0,g.EXTENT,0,g.EXTENT,0,1),u[m]=S}else if(b.canonical.isChildOf(t.canonical)){const S=t.clone();S.posMatrix=new Float64Array(16);const R=b.canonical.z-t.canonical.z,B=b.canonical.x-(b.canonical.x>>R<<R),z=b.canonical.y-(b.canonical.y>>R<<R),Z=g.EXTENT>>R;g.ortho(S.posMatrix,0,Z,0,Z,0,1),g.translate(S.posMatrix,S.posMatrix,[-B*Z,-z*Z,0]),u[m]=S}else if(t.canonical.isChildOf(b.canonical)){const S=t.clone();S.posMatrix=new Float64Array(16);const R=t.canonical.z-b.canonical.z,B=t.canonical.x-(t.canonical.x>>R<<R),z=t.canonical.y-(t.canonical.y>>R<<R),Z=g.EXTENT>>R;g.ortho(S.posMatrix,0,g.EXTENT,0,g.EXTENT,0,1),g.translate(S.posMatrix,S.posMatrix,[B*Z,z*Z,0]),g.scale(S.posMatrix,S.posMatrix,[1/2**R,1/2**R,0]),u[m]=S}}return u}getSourceTile(t,u){const m=this.sourceCache._source;let b=t.overscaledZ-this.deltaZoom;if(b>m.maxzoom&&(b=m.maxzoom),b<m.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(b).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!S||!S.dem)&&u)for(;b>=m.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(t.scaledTo(b--).key);return S}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=t)}}class ya{constructor(t,u,m){this.painter=t,this.sourceCache=new Ur(u),this.options=m,this.exaggeration="number"==typeof m.exaggeration?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,u,m,b=g.EXTENT){if(!(u>=0&&u<b&&m>=0&&m<b))return 0;let S=0;const R=this.getTerrainData(t);if(R.tile&&R.tile.dem){const B=((A=[])[0]=(G=R.u_terrain_matrix)[0]*(se=(k=[u/b*g.EXTENT,m/b*g.EXTENT])[0])+G[4]*(pe=k[1])+G[12],A[1]=G[1]*se+G[5]*pe+G[13],A),z=[B[0]*R.tile.dem.dim,B[1]*R.tile.dem.dim],Z=[Math.floor(z[0]),Math.floor(z[1])],ne=R.tile.dem.get(Z[0],Z[1]),x=R.tile.dem.get(Z[0],Z[1]+1),D=R.tile.dem.get(Z[0]+1,Z[1]),E=R.tile.dem.get(Z[0]+1,Z[1]+1);S=g.interpolate.number(g.interpolate.number(ne,x,z[0]-Z[0]),g.interpolate.number(D,E,z[0]-Z[0]),z[1]-Z[1])}var A,k,G,se,pe;return S}getElevation(t,u,m,b=g.EXTENT){return this.getDEMElevation(t,u,m,b)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const b=this.painter.context,S=new g.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ot(b,S,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ot(b,new g.RGBAImage({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=g.identity([])}const u=this.sourceCache.getSourceTile(t,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const b=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Ot(b,u.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),u.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const m=u&&u+u.tileID.key+t.key;if(m&&!this._demMatrixCache[m]){const b=this.sourceCache.sourceCache._source.maxzoom;let S=t.canonical.z-u.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=b?S=t.canonical.z-b:g.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const R=t.canonical.x-(t.canonical.x>>S<<S),B=t.canonical.y-(t.canonical.y>>S<<S),z=g.fromScaling(new Float64Array(16),[1/(g.EXTENT<<S),1/(g.EXTENT<<S),0]);g.translate(z,z,[R*g.EXTENT,B*g.EXTENT,0]),this._demMatrixCache[t.key]={matrix:z,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(t){const u=this.painter,m=u.width/devicePixelRatio,b=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ot(u.context,{width:m,height:b,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ot(u.context,{width:m,height:b,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(m,b,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,m,b))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,R=0;S<this._coordsTextureSize;S++)for(let B=0;B<this._coordsTextureSize;B++,R+=4)u[R+0]=255&B,u[R+1]=255&S,u[R+2]=B>>8<<4|S>>8,u[R+3]=0;const m=new g.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),b=new Ot(t,m,t.gl.RGBA,{premultiply:!1});return b.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(t){const u=new Uint8Array(4),m=this.painter.context,b=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null);const S=u[0]+(u[2]>>4<<8),R=u[1]+((15&u[2])<<8),B=this.coordsIndex[255-u[3]],z=B&&this.sourceCache.getTileByID(B);if(!z)return null;const Z=this._coordsTextureSize,ne=(1<<z.tileID.canonical.z)*Z;return new g.MercatorCoordinate((z.tileID.canonical.x*Z+S)/ne,(z.tileID.canonical.y*Z+R)/ne,this.getElevation(z.tileID,S,R,Z))}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.painter.context,u=new g.Pos3dArray,m=new g.TriangleIndexArray,b=this.meshSize,S=g.EXTENT/b,R=b*b;for(let x=0;x<=b;x++)for(let D=0;D<=b;D++)u.emplaceBack(D*S,x*S,0);for(let x=0;x<R;x+=b+1)for(let D=0;D<b;D++)m.emplaceBack(D+x,b+D+x+1,b+D+x+2),m.emplaceBack(D+x,b+D+x+2,D+x+1);const B=u.length,z=B+2*(b+1);for(const x of[0,1])for(let D=0;D<=b;D++)for(const E of[0,1])u.emplaceBack(D*S,x*g.EXTENT,E);for(let x=0;x<2*b;x+=2)m.emplaceBack(z+x,z+x+1,z+x+3),m.emplaceBack(z+x,z+x+3,z+x+2),m.emplaceBack(B+x,B+x+3,B+x+1),m.emplaceBack(B+x,B+x+2,B+x+3);const Z=u.length,ne=Z+2*(b+1);for(const x of[0,1])for(let D=0;D<=b;D++)for(const E of[0,1])u.emplaceBack(x*g.EXTENT,D*S,E);for(let x=0;x<2*b;x+=2)m.emplaceBack(Z+x,Z+x+1,Z+x+3),m.emplaceBack(Z+x,Z+x+3,Z+x+2),m.emplaceBack(ne+x,ne+x+3,ne+x+1),m.emplaceBack(ne+x,ne+x+2,ne+x+3);return this._mesh={indexBuffer:t.createIndexBuffer(m),vertexBuffer:t.createVertexBuffer(u,Vl.members),segments:g.SegmentVector.simpleSegment(0,0,u.length,m.length)},this._mesh}getMeshFrameDelta(t){return 2*Math.PI*g.earthRadius/Math.pow(2,t)/5}getMinMaxElevation(t){const u=this.getTerrainData(t).tile,m={minElevation:null,maxElevation:null};return u&&u.dem&&(m.minElevation=u.dem.min*this.exaggeration,m.maxElevation=u.dem.max*this.exaggeration),m}}class An{constructor(t,u,m){this._context=t,this._size=u,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new Ot(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(m.texture),{id:t,fbo:u,texture:m,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>t.id!==u),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(t=>!t.inUse)}}const Zn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ul{constructor(t,u){this.painter=t,this.terrain=u,this.pool=new An(t.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(m=>!t._layers[m].isHidden(u)),this._coordsDescendingInv={};for(const m in t.sourceCaches){this._coordsDescendingInv[m]={};const b=t.sourceCaches[m].getVisibleCoordinates();for(const S of b){const R=this.terrain.sourceCache.getTerrainCoords(S);for(const B in R)this._coordsDescendingInv[m][B]||(this._coordsDescendingInv[m][B]=[]),this._coordsDescendingInv[m][B].push(R[B])}}this._coordsDescendingInvStr={};for(const m of t._order){const b=t._layers[m],S=b.source;if(Zn[b.type]&&!this._coordsDescendingInvStr[S]){this._coordsDescendingInvStr[S]={};for(const R in this._coordsDescendingInv[S])this._coordsDescendingInvStr[S][R]=this._coordsDescendingInv[S][R].map(B=>B.key).sort().join()}}for(const m of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const S=this._coordsDescendingInvStr[b][m.tileID.key];S&&S!==m.rttCoords[b]&&(m.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;const u=t.type,m=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Zn[u]&&(this._prevType&&Zn[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(t.id),!b))return!0;if(Zn[this._prevType]||Zn[u]&&b){this._prevType=u;const S=this._stacks.length-1,R=this._stacks[S]||[];for(const B of this._renderableTiles){if(this.pool.isFull()&&(Ka(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[S]){const Z=this.pool.getObjectForId(B.rtt[S].id);if(Z.stamp===B.rtt[S].stamp){this.pool.useObject(Z);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),B.rtt[S]={id:z.id,stamp:z.stamp},m.context.bindFramebuffer.set(z.fbo.framebuffer),m.context.clear({color:g.Color.transparent,stencil:0}),m.currentStencilSource=void 0;for(let Z=0;Z<R.length;Z++){const ne=m.style._layers[R[Z]],x=ne.source?this._coordsDescendingInv[ne.source][B.tileID.key]:[B.tileID];m.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),m._renderTileClippingMasks(ne,x),m.renderLayer(m,m.style.sourceCaches[ne.source],ne,x),ne.source&&(B.rttCoords[ne.source]=this._coordsDescendingInvStr[ne.source][B.tileID.key])}}return Ka(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Zn[u]}return!1}}const ta={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},lo=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},ws={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ho{constructor(t,u,m=!1){this._clickTolerance=10;const b=t.dragRotate._mouseRotate.getClickTolerance(),S=t.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Pn({clickTolerance:b,enable:!0}),this.touchRotate=(({enable:R,clickTolerance:B,bearingDegreesPerPixelMoved:z=.8})=>{const Z=new _l;return new xs({clickTolerance:B,move:(ne,x)=>({bearingDelta:(x.x-ne.x)*z}),moveStateManager:Z,enable:R,assignEvents:lo})})({clickTolerance:b,enable:!0}),this.map=t,m&&(this.mousePitch=Fl({clickTolerance:S,enable:!0}),this.touchPitch=(({enable:R,clickTolerance:B,pitchDegreesPerPixelMoved:z=-.5})=>{const Z=new _l;return new xs({clickTolerance:B,move:(ne,x)=>({pitchDelta:(x.y-ne.y)*z}),moveStateManager:Z,enable:R,assignEvents:lo})})({clickTolerance:S,enable:!0})),g.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),he.addEventListener(u,"mousedown",this.mousedown),he.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),he.addEventListener(u,"touchcancel",this.reset)}startMouse(t,u){this.mouseRotate.dragStart(t,u),this.mousePitch&&this.mousePitch.dragStart(t,u),he.disableDrag()}startTouch(t,u){this.touchRotate.dragStart(t,u),this.touchPitch&&this.touchPitch.dragStart(t,u),he.disableDrag()}moveMouse(t,u){const m=this.map,{bearingDelta:b}=this.mouseRotate.dragMove(t,u)||{};if(b&&m.setBearing(m.getBearing()+b),this.mousePitch){const{pitchDelta:S}=this.mousePitch.dragMove(t,u)||{};S&&m.setPitch(m.getPitch()+S)}}moveTouch(t,u){const m=this.map,{bearingDelta:b}=this.touchRotate.dragMove(t,u)||{};if(b&&m.setBearing(m.getBearing()+b),this.touchPitch){const{pitchDelta:S}=this.touchPitch.dragMove(t,u)||{};S&&m.setPitch(m.getPitch()+S)}}off(){const t=this.element;he.removeEventListener(t,"mousedown",this.mousedown),he.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),he.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),he.removeEventListener(window,"touchend",this.touchend),he.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){he.enableDrag(),he.removeEventListener(window,"mousemove",this.mousemove),he.removeEventListener(window,"mouseup",this.mouseup),he.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),he.removeEventListener(window,"touchend",this.touchend)}mousedown(t){this.startMouse(g.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),he.mousePos(this.element,t)),he.addEventListener(window,"mousemove",this.mousemove),he.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.moveMouse(t,he.mousePos(this.element,t))}mouseup(t){this.mouseRotate.dragEnd(t),this.mousePitch&&this.mousePitch.dragEnd(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=he.touchPos(this.element,t.targetTouches)[0],this.startTouch(t,this._startPos),he.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),he.addEventListener(window,"touchend",this.touchend))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=he.touchPos(this.element,t.targetTouches)[0],this.moveTouch(t,this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let $o;function Ls(y,t,u){if(y=new g.LngLat(y.lng,y.lat),t){const m=new g.LngLat(y.lng-360,y.lat),b=new g.LngLat(y.lng+360,y.lat),S=u.locationPoint(y).distSqr(t);u.locationPoint(m).distSqr(t)<S?y=m:u.locationPoint(b).distSqr(t)<S&&(y=b)}for(;Math.abs(y.lng-u.center.lng)>180;){const m=u.locationPoint(y);if(m.x>=0&&m.y>=0&&m.x<=u.width&&m.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const ir={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xr(y,t,u){const m=y.classList;for(const b in ir)m.remove(`maplibregl-${u}-anchor-${b}`);m.add(`maplibregl-${u}-anchor-${t}`)}class lc extends g.Evented{constructor(t,u){if(super(),(t instanceof HTMLElement||u)&&(t=g.extend({element:t},u)),g.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=g.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=he.create("div"),this._element.setAttribute("aria-label","Map marker");const m=he.createNS("http://www.w3.org/2000/svg","svg"),b=41,S=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${b}px`),m.setAttributeNS(null,"width",`${S}px`),m.setAttributeNS(null,"viewBox",`0 0 ${S} ${b}`);const R=he.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"stroke","none"),R.setAttributeNS(null,"stroke-width","1"),R.setAttributeNS(null,"fill","none"),R.setAttributeNS(null,"fill-rule","evenodd");const B=he.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const z=he.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of Z){const me=he.createNS("http://www.w3.org/2000/svg","ellipse");me.setAttributeNS(null,"opacity","0.04"),me.setAttributeNS(null,"cx","10.5"),me.setAttributeNS(null,"cy","5.80029008"),me.setAttributeNS(null,"rx",pe.rx),me.setAttributeNS(null,"ry",pe.ry),z.appendChild(me)}const ne=he.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill",this._color);const x=he.createNS("http://www.w3.org/2000/svg","path");x.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ne.appendChild(x);const D=he.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"opacity","0.25"),D.setAttributeNS(null,"fill","#000000");const E=he.createNS("http://www.w3.org/2000/svg","path");E.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),D.appendChild(E);const A=he.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(6.0, 7.0)"),A.setAttributeNS(null,"fill","#FFFFFF");const k=he.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(8.0, 8.0)");const G=he.createNS("http://www.w3.org/2000/svg","circle");G.setAttributeNS(null,"fill","#000000"),G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"cx","5.5"),G.setAttributeNS(null,"cy","5.5"),G.setAttributeNS(null,"r","5.4999962");const se=he.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#FFFFFF"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962"),k.appendChild(G),k.appendChild(se),B.appendChild(z),B.appendChild(ne),B.appendChild(D),B.appendChild(A),B.appendChild(k),m.appendChild(B),m.setAttributeNS(null,"height",b*this._scale+"px"),m.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(m),this._offset=g.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),xr(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),he.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=g.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(24.6+b)],"bottom-right":[-b,-1*(24.6+b)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const u=t.code,m=t.charCode||t.keyCode;"Space"!==u&&"Enter"!==u&&32!==m&&13!==m||this.togglePopup()}_onMapClick(t){const u=t.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ls(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?u=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?m="rotateX(0deg)":"map"===this._pitchAlignment&&(m=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),he.setTransform(this._element,`${ir[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${u}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const b=this._map.unproject(this._pos),S=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=b.distanceTo(this._lngLat)>20*S?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(t){return this._offset=g.Point.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new g.Event("dragstart"))),this.fire(new g.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new g.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Qa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $i=0,Fs=!1;const tu={maxWidth:100,unit:"metric"};function za(y,t,u){const m=u&&u.maxWidth||100,b=y._container.clientHeight/2,S=y.unproject([0,b]),R=y.unproject([m,b]),B=S.distanceTo(R);if(u&&"imperial"===u.unit){const z=3.2808*B;z>5280?va(t,m,z/5280,y._getUIString("ScaleControl.Miles")):va(t,m,z,y._getUIString("ScaleControl.Feet"))}else u&&"nautical"===u.unit?va(t,m,B/1852,y._getUIString("ScaleControl.NauticalMiles")):B>=1e3?va(t,m,B/1e3,y._getUIString("ScaleControl.Kilometers")):va(t,m,B,y._getUIString("ScaleControl.Meters"))}function va(y,t,u,m){const b=function(S){const R=Math.pow(10,`${Math.floor(S)}`.length-1);let B=S/R;return B=B>=10?10:B>=5?5:B>=3?3:B>=2?2:B>=1?1:function(z){const Z=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*Z)/Z}(B),R*B}(u);y.style.width=t*(b/u)+"px",y.innerHTML=`${b}&nbsp;${m}`}const nu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Au=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function wl(y){if(y){if("number"==typeof y){const t=Math.round(Math.sqrt(.5*Math.pow(y,2)));return{center:new g.Point(0,0),top:new g.Point(0,y),"top-left":new g.Point(t,t),"top-right":new g.Point(-t,t),bottom:new g.Point(0,-y),"bottom-left":new g.Point(t,-t),"bottom-right":new g.Point(-t,-t),left:new g.Point(y,0),right:new g.Point(-y,0)}}if(y instanceof g.Point||Array.isArray(y)){const t=g.Point.convert(y);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:g.Point.convert(y.center||[0,0]),top:g.Point.convert(y.top||[0,0]),"top-left":g.Point.convert(y["top-left"]||[0,0]),"top-right":g.Point.convert(y["top-right"]||[0,0]),bottom:g.Point.convert(y.bottom||[0,0]),"bottom-left":g.Point.convert(y["bottom-left"]||[0,0]),"bottom-right":g.Point.convert(y["bottom-right"]||[0,0]),left:g.Point.convert(y.left||[0,0]),right:g.Point.convert(y.right||[0,0])}}return wl(new g.Point(0,0))}const jl={setRTLTextPlugin:g.setRTLTextPlugin,getRTLTextPluginStatus:g.getRTLTextPluginStatus,Map:class extends _i{constructor(y){var t;if(g.PerformanceUtils.mark(g.PerformanceMarkers.create),null!=(y=g.extend({},ta,y)).minZoom&&null!=y.maxZoom&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=y.minPitch&&null!=y.maxPitch&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=y.minPitch&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=y.maxPitch&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new be(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Ba,this._controls=[],this._mapId=g.uniqueId(),this._locale=g.extend({},ac,y.locale),this._clickTolerance=y.clickTolerance,this._pixelRatio=null!==(t=y.pixelRatio)&&void 0!==t?t:devicePixelRatio,this._imageQueueHandle=je.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ct(y.transformRequest),"string"==typeof y.container){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}y.maxBounds&&this.setMaxBounds(y.maxBounds),g.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),this._resizeObserver=new ResizeObserver(u=>{this._trackResize&&this.resize(u)._update()}),this._resizeObserver.observe(this._container)),this.handlers=new cs(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Qe("string"==typeof y.hash&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,g.extend({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Rr({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new xl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update("style"===u.dataType),this.fire(new g.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new g.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new g.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(y,t){if(void 0===t&&(t=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const m=this._controlPositions[t];return-1!==t.indexOf("bottom")?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(y);return t>-1&&this._controls.splice(t,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,t,u,m){return null==m&&this.terrain&&(m=this.transform.getElevation(u,this.terrain)),super.calculateCameraOptionsFromTo(y,t,u,m)}resize(y){const t=this._containerDimensions(),u=t[0],m=t[1];this._resizeCanvas(u,m,this.getPixelRatio()),this.transform.resize(u,m),this.painter.resize(u,m,this.getPixelRatio());const b=!this._moving;return b&&(this.stop(),this.fire(new g.Event("movestart",y)).fire(new g.Event("move",y))),this.fire(new g.Event("resize",y)),b&&this.fire(new g.Event("moveend",y)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(y){const[t,u]=this._containerDimensions();this._pixelRatio=y,this._resizeCanvas(t,u,y),this.painter.resize(t,u,y)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Qn.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(g.LngLat.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(g.Point.convert(y),this.terrain)}isMoving(){var y;return this._moving||(null===(y=this.handlers)||void 0===y?void 0:y.isMoving())}isZooming(){var y;return this._zooming||(null===(y=this.handlers)||void 0===y?void 0:y.isZooming())}isRotating(){var y;return this._rotating||(null===(y=this.handlers)||void 0===y?void 0:y.isRotating())}_createDelegatedListener(y,t,u){if("mouseenter"===y||"mouseover"===y){let m=!1;return{layer:t,listener:u,delegates:{mousemove:S=>{const R=this.getLayer(t)?this.queryRenderedFeatures(S.point,{layers:[t]}):[];R.length?m||(m=!0,u.call(this,new ni(y,this,S.originalEvent,{features:R}))):m=!1},mouseout:()=>{m=!1}}}}if("mouseleave"===y||"mouseout"===y){let m=!1;return{layer:t,listener:u,delegates:{mousemove:R=>{(this.getLayer(t)?this.queryRenderedFeatures(R.point,{layers:[t]}):[]).length?m=!0:m&&(m=!1,u.call(this,new ni(y,this,R.originalEvent)))},mouseout:R=>{m&&(m=!1,u.call(this,new ni(y,this,R.originalEvent)))}}}}{const m=b=>{const S=this.getLayer(t)?this.queryRenderedFeatures(b.point,{layers:[t]}):[];S.length&&(b.features=S,u.call(this,b),delete b.features)};return{layer:t,listener:u,delegates:{[y]:m}}}}on(y,t,u){if(void 0===u)return super.on(y,t);const m=this._createDelegatedListener(y,t,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(m);for(const b in m.delegates)this.on(b,m.delegates[b]);return this}once(y,t,u){if(void 0===u)return super.once(y,t);const m=this._createDelegatedListener(y,t,u);for(const b in m.delegates)this.once(b,m.delegates[b]);return this}off(y,t,u){return void 0===u?super.off(y,t):(this._delegatedListeners&&this._delegatedListeners[y]&&(m=>{const b=this._delegatedListeners[y];for(let S=0;S<b.length;S++){const R=b[S];if(R.layer===t&&R.listener===u){for(const B in R.delegates)this.off(B,R.delegates[B]);return b.splice(S,1),this}}})(),this)}queryRenderedFeatures(y,t){if(!this.style)return[];let u;const m=y instanceof g.Point||Array.isArray(y),b=m?y:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(m?{}:y)||{},b instanceof g.Point||"number"==typeof b[0])u=[g.Point.convert(b)];else{const S=g.Point.convert(b[0]),R=g.Point.convert(b[1]);u=[S,new g.Point(R.x,S.y),R,new g.Point(S.x,R.y),S]}return this.style.queryRenderedFeatures(u,t,this.transform)}querySourceFeatures(y,t){return this.style.querySourceFeatures(y,t)}setStyle(y,t){return!1!==(t=g.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(y,t))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const t=this._locale[y];if(null==t)throw new Error(`Missing UI string '${y}'`);return t}_updateStyle(y,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,t));const u=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new ki(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof y?this.style.loadURL(y,t,u):this.style.loadJSON(y,t,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ki(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,t){if("string"==typeof y){const u=this._requestManager.transformRequest(y,We.Style);g.getJSON(u,(m,b)=>{m?this.fire(new g.ErrorEvent(m)):b&&this._updateDiff(b,t)})}else"object"==typeof y&&this._updateDiff(y,t)}_updateDiff(y,t){try{this.style.setState(y,t)&&this._update(!0)}catch(u){g.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():g.warnOnce("There is no style added to the map.")}addSource(y,t){return this._lazyInitEmptyStyle(),this.style.addSource(y,t),this._update(!0)}isSourceLoaded(y){const t=this.style&&this.style.sourceCaches[y];if(void 0!==t)return t.loaded();this.fire(new g.ErrorEvent(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const t=this.style.sourceCaches[y.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const m=this.style._layers[u];"hillshade"===m.type&&m.source===y.source&&g.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ya(this.painter,t,y),this.painter.renderToTexture=new Ul(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=u=>{"style"===u.dataType?this.terrain.sourceCache.freeRtt():"source"===u.dataType&&u.tile&&(u.sourceId===y.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new g.Event("terrain",{terrain:y})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const t in y){const u=y[t]._tiles;for(const m in u){const b=u[m];if("loaded"!==b.state&&"errored"!==b.state)return!1}}return!0}addSourceType(y,t,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,t,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,t,{pixelRatio:u=1,sdf:m=!1,stretchX:b,stretchY:S,content:R}={}){if(this._lazyInitEmptyStyle(),t instanceof HTMLImageElement||g.isImageBitmap(t)){const{width:B,height:z,data:Z}=g.exported.getImageData(t);this.style.addImage(y,{data:new g.RGBAImage({width:B,height:z},Z),pixelRatio:u,stretchX:b,stretchY:S,content:R,sdf:m,version:0})}else{if(void 0===t.width||void 0===t.height)return this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:z,data:Z}=t,ne=t;this.style.addImage(y,{data:new g.RGBAImage({width:B,height:z},new Uint8Array(Z)),pixelRatio:u,stretchX:b,stretchY:S,content:R,sdf:m,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,y)}}}updateImage(y,t){const u=this.style.getImage(y);if(!u)return this.fire(new g.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=t instanceof HTMLImageElement||g.isImageBitmap(t)?g.exported.getImageData(t):t,{width:b,height:S,data:R}=m;if(void 0===b||void 0===S)return this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==u.data.width||S!==u.data.height)return this.fire(new g.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const B=!(t instanceof HTMLImageElement||g.isImageBitmap(t));u.data.replace(R,B),this.style.updateImage(y,u)}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new g.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,t){je.getImage(this._requestManager.transformRequest(y,We.Image),t)}listImages(){return this.style.listImages()}addLayer(y,t){return this._lazyInitEmptyStyle(),this.style.addLayer(y,t),this._update(!0)}moveLayer(y,t){return this.style.moveLayer(y,t),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}setLayerZoomRange(y,t,u){return this.style.setLayerZoomRange(y,t,u),this._update(!0)}setFilter(y,t,u={}){return this.style.setFilter(y,t,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,t,u,m={}){return this.style.setPaintProperty(y,t,u,m),this._update(!0)}getPaintProperty(y,t){return this.style.getPaintProperty(y,t)}setLayoutProperty(y,t,u,m={}){return this.style.setLayoutProperty(y,t,u,m),this._update(!0)}getLayoutProperty(y,t){return this.style.getLayoutProperty(y,t)}setGlyphs(y,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,t,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,t,u,m=>{m||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,t,u=>{u||this._update(!0)}),this}setLight(y,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,t){return this.style.setFeatureState(y,t),this._update()}removeFeatureState(y,t){return this.style.removeFeatureState(y,t),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,t=0;return this._container&&(y=this._container.clientWidth||400,t=this._container.clientHeight||300),[y,t]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const t=this._canvasContainer=he.create("div","maplibregl-canvas-container",y);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=he.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const m=this._controlContainer=he.create("div","maplibregl-control-container",y),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{b[S]=he.create("div",`maplibregl-ctrl-${S} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(y){this._onCooperativeGesture(y,y[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=he.create("div","maplibregl-cooperative-gesture-screen",this._container);let y="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(y="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${y}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){he.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,t,u){this._canvas.width=u*y,this._canvas.height=u*t,this._canvas.style.width=`${y}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{t={requestedAttributes:y},m&&(t.statusMessage=m.statusMessage,t.type=m.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const m="Failed to initialize WebGL";throw t?(t.message=m,new Error(JSON.stringify(t))):new Error(m)}this.painter=new Zr(u,this.transform),$e.testSupport(u)}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new g.Event("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.resize(),this._update(),this.fire(new g.Event("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(y,t,u){return!t&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const t=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,S=g.exported.now();this.style.zoomHistory.update(b,S);const R=new g.EvaluationParameters(b,{now:S,fadeDuration:t,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),B=R.crossFadingFactor();1===B&&B===this._crossFadingFactor||(u=!0,this._crossFadingFactor=B),this.style.update(R)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this.isMoving()&&je.processQueue(),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,t,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:t,showPadding:this.showPadding}),this.fire(new g.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,g.PerformanceUtils.mark(g.PerformanceMarkers.load),this.fire(new g.Event("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new g.Event("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,g.PerformanceUtils.mark(g.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),je.removeThrottleControl(this._imageQueueHandle),null===(y=this._resizeObserver)||void 0===y||y.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),he.remove(this._canvasContainer),he.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),g.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new g.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=g.exported.frame(y=>{g.PerformanceUtils.frame(y),this._frame=null,this._render(y)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return"3.0.0-pre.6"}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(y){this.options=g.extend({},ws,y),this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(g.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),he.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),he.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(g.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=he.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map.getZoom(),t=y===this._map.getMaxZoom(),u=y===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const y=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=y}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ho(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){he.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,t){const u=he.create("button",y,this._container);return u.type="button",u.addEventListener("click",t),u}_setButtonTitle(y,t){const u=this._map._getUIString(`NavigationControl.${t}`);y.title=u,y.setAttribute("aria-label",u)}},GeolocateControl:class extends g.Evented{constructor(y){super(),this.options=g.extend({},Qa,y),g.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(y){return this._map=y,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(t,u=!1){void 0===$o||u?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(m=>{$o="denied"!==m.state,t($o)}).catch(()=>{$o=!!window.navigator.geolocation,t($o)}):($o=!!window.navigator.geolocation,t($o)):t($o)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),he.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,$i=0,Fs=!1}_isOutOfMapMaxBounds(y){const t=this._map.getMaxBounds(),u=y.coords;return t&&(u.longitude<t.getWest()||u.longitude>t.getEast()||u.latitude<t.getSouth()||u.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new g.Event("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(y),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(y),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new g.Event("geolocate",y)),this._finish()}}_updateCamera(y){const t=new g.LngLat(y.coords.longitude,y.coords.latitude),u=y.coords.accuracy,m=this._map.getBearing(),b=g.extend({bearing:m},this.options.fitBoundsOptions),S=Qn.fromLngLat(t,u);this._map.fitBounds(S,b,{geolocateSource:!0})}_updateMarker(y){if(y){const t=new g.LngLat(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.getBounds(),t=y.getSouthEast(),u=y.getNorthEast(),m=t.distanceTo(u),b=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(y){if(this._map){if(this.options.trackUserLocation)if(1===y.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===y.code&&Fs)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new g.Event("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=he.create("button","maplibregl-ctrl-geolocate",this._container),he.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===y){g.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=he.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new lc(this._dotElement),this._circleElement=he.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new lc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new g.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return g.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new g.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$i--,Fs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new g.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new g.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$i++,$i>1?(y={maximumAge:6e5,timeout:0},Fs=!0):(y=this.options.positionOptions,Fs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Rr,LogoControl:xl,ScaleControl:class{constructor(y){this.options=g.extend({},tu,y),g.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){za(this._map,this._container,this.options)}onAdd(y){return this._map=y,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){he.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(y){this.options.unit=y,za(this._map,this._container,this.options)}},FullscreenControl:class extends g.Evented{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:g.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=he.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){he.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=he.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);he.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new g.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new g.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(y){this.options=y,g.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(y){return this._map=y,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=he.create("button","maplibregl-ctrl-terrain",this._container),he.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){he.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends g.Evented{constructor(y){super(),this.options=g.extend(Object.create(nu),y),g.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new g.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&he.remove(this._content),this._container&&(he.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new g.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=g.LngLat.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const t=document.createDocumentFragment(),u=document.createElement("body");let m;for(u.innerHTML=y;m=u.firstChild,m;)t.appendChild(m);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=he.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=he.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(y){this._update(y.point)}_onMouseMove(y){this._update(y.point)}_onDrag(y){this._update(y.point)}_update(y){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=he.create("div","maplibregl-popup",this._map.getContainer()),this._tip=he.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(S=>this._container.classList.add(S)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ls(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!y))return;const t=this._pos=this._trackPointer&&y?y:this._map.project(this._lngLat);let u=this.options.anchor;const m=wl(this.options.offset);if(!u){const S=this._container.offsetWidth,R=this._container.offsetHeight;let B;B=t.y+m.bottom.y<R?["top"]:t.y>this._map.transform.height-R?["bottom"]:[],t.x<S/2?B.push("left"):t.x>this._map.transform.width-S/2&&B.push("right"),u=0===B.length?"bottom":B.join("-")}const b=t.add(m[u]).round();he.setTransform(this._container,`${ir[u]} translate(${b.x}px,${b.y}px)`),xr(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Au);y&&y.focus()}_onClose(){this.remove()}},Marker:lc,Style:ki,LngLat:g.LngLat,LngLatBounds:Qn,Point:g.Point,MercatorCoordinate:g.MercatorCoordinate,Evented:g.Evented,AJAXError:g.AJAXError,config:g.config,CanvasSource:Un,GeoJSONSource:At,ImageSource:sn,RasterDEMTileSource:gt,RasterTileSource:hn,VectorTileSource:ln,VideoSource:bn,prewarm:function(){le().acquire(Me)},clearPrewarmedResources:function(){const y=fe;y&&(y.isPreloaded()&&1===y.numActive()?(y.release(Me),fe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"3.0.0-pre.6"},get workerCount(){return Je.workerCount},set workerCount(y){Je.workerCount=y},get maxParallelImageRequests(){return g.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){g.config.MAX_PARALLEL_IMAGE_REQUESTS=y},get workerUrl(){return g.config.WORKER_URL},set workerUrl(y){g.config.WORKER_URL=y},addProtocol(y,t){g.config.REGISTERED_PROTOCOLS[y]=t},removeProtocol(y){delete g.config.REGISTERED_PROTOCOLS[y]}};return fr.extend(jl,{isSafari:g.isSafari,getPerformanceMetrics:g.PerformanceUtils.getPerformanceMetrics}),jl}),T}()},7340:(cn,ft,V)=>{"use strict";V.d(ft,{F4:()=>Ue,IO:()=>je,LC:()=>l,SB:()=>Be,X$:()=>g,ZE:()=>an,ZN:()=>Tt,_j:()=>T,eR:()=>nt,jt:()=>He,k1:()=>Xt,l3:()=>H,oB:()=>Ie,pV:()=>it,vP:()=>$e});class T{}class l{}const H="*";function g(Dt,Oe){return{type:7,name:Dt,definitions:Oe,options:{}}}function He(Dt,Oe=null){return{type:4,styles:Oe,timings:Dt}}function $e(Dt,Oe=null){return{type:2,steps:Dt,options:Oe}}function Ie(Dt){return{type:6,styles:Dt,offset:null}}function Be(Dt,Oe,Ne){return{type:0,name:Dt,styles:Oe,options:Ne}}function Ue(Dt){return{type:5,steps:Dt}}function nt(Dt,Oe,Ne=null){return{type:1,expr:Dt,animation:Oe,options:Ne}}function it(Dt=null){return{type:9,options:Dt}}function je(Dt,Oe,Ne=null){return{type:11,selector:Dt,animation:Oe,options:Ne}}function wt(Dt){Promise.resolve().then(Dt)}class Tt{constructor(Oe=0,Ne=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Oe+Ne}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}onStart(Oe){this._originalOnStartFns.push(Oe),this._onStartFns.push(Oe)}onDone(Oe){this._originalOnDoneFns.push(Oe),this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Oe){this._position=this.totalTime?Oe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Oe){const Ne="start"==Oe?this._onStartFns:this._onDoneFns;Ne.forEach(Ot=>Ot()),Ne.length=0}}class an{constructor(Oe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Oe;let Ne=0,Ot=0,kt=0;const Ft=this.players.length;0==Ft?wt(()=>this._onFinish()):this.players.forEach(Gt=>{Gt.onDone(()=>{++Ne==Ft&&this._onFinish()}),Gt.onDestroy(()=>{++Ot==Ft&&this._onDestroy()}),Gt.onStart(()=>{++kt==Ft&&this._onStart()})}),this.totalTime=this.players.reduce((Gt,lt)=>Math.max(Gt,lt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}init(){this.players.forEach(Oe=>Oe.init())}onStart(Oe){this._onStartFns.push(Oe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[])}onDone(Oe){this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Oe=>Oe.play())}pause(){this.players.forEach(Oe=>Oe.pause())}restart(){this.players.forEach(Oe=>Oe.restart())}finish(){this._onFinish(),this.players.forEach(Oe=>Oe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Oe=>Oe.destroy()),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this.players.forEach(Oe=>Oe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Oe){const Ne=Oe*this.totalTime;this.players.forEach(Ot=>{const kt=Ot.totalTime?Math.min(1,Ne/Ot.totalTime):1;Ot.setPosition(kt)})}getPosition(){const Oe=this.players.reduce((Ne,Ot)=>null===Ne||Ot.totalTime>Ne.totalTime?Ot:Ne,null);return null!=Oe?Oe.getPosition():0}beforeDestroy(){this.players.forEach(Oe=>{Oe.beforeDestroy&&Oe.beforeDestroy()})}triggerCallback(Oe){const Ne="start"==Oe?this._onStartFns:this._onDoneFns;Ne.forEach(Ot=>Ot()),Ne.length=0}}const Xt="!"},2687:(cn,ft,V)=>{"use strict";V.d(ft,{$s:()=>lt,Em:()=>Qt,Kd:()=>ut,X6:()=>tt,ic:()=>Xn,qV:()=>Kn,qm:()=>et,rt:()=>ot,s1:()=>tn,tE:()=>mn,yG:()=>Y});var T=V(6895),l=V(4650),H=V(3353),g=V(7579),He=V(727),he=V(1135),$e=V(9646),Ie=V(9521),Be=V(8505),Ue=V(8372),nt=V(9300),Re=V(4004),it=V(5698),We=V(5684),je=V(1884),Ct=V(2722),wt=V(1281),Tt=V(9643),an=V(2289);function Ne(Fe,Se){return(Fe.getAttribute(Se)||"").match(/\S+/g)||[]}const kt="cdk-describedby-message",Ft="cdk-describedby-host";let Gt=0,lt=(()=>{class Fe{constructor(Te,J){this._platform=J,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+Gt++,this._document=Te,this._id=(0,l.f3M)(l.AFp)+"-"+Gt++}describe(Te,J,$){if(!this._canBeDescribed(Te,J))return;const re=dt(J,$);"string"!=typeof J?(St(J,this._id),this._messageRegistry.set(re,{messageElement:J,referenceCount:0})):this._messageRegistry.has(re)||this._createMessageElement(J,$),this._isElementDescribedByMessage(Te,re)||this._addMessageReference(Te,re)}removeDescription(Te,J,$){if(!J||!this._isElementNode(Te))return;const re=dt(J,$);if(this._isElementDescribedByMessage(Te,re)&&this._removeMessageReference(Te,re),"string"==typeof J){const _e=this._messageRegistry.get(re);_e&&0===_e.referenceCount&&this._deleteMessageElement(re)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const Te=this._document.querySelectorAll(`[${Ft}="${this._id}"]`);for(let J=0;J<Te.length;J++)this._removeCdkDescribedByReferenceIds(Te[J]),Te[J].removeAttribute(Ft);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(Te,J){const $=this._document.createElement("div");St($,this._id),$.textContent=Te,J&&$.setAttribute("role",J),this._createMessagesContainer(),this._messagesContainer.appendChild($),this._messageRegistry.set(dt(Te,J),{messageElement:$,referenceCount:0})}_deleteMessageElement(Te){this._messageRegistry.get(Te)?.messageElement?.remove(),this._messageRegistry.delete(Te)}_createMessagesContainer(){if(this._messagesContainer)return;const Te="cdk-describedby-message-container",J=this._document.querySelectorAll(`.${Te}[platform="server"]`);for(let re=0;re<J.length;re++)J[re].remove();const $=this._document.createElement("div");$.style.visibility="hidden",$.classList.add(Te),$.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&$.setAttribute("platform","server"),this._document.body.appendChild($),this._messagesContainer=$}_removeCdkDescribedByReferenceIds(Te){const J=Ne(Te,"aria-describedby").filter($=>0!=$.indexOf(kt));Te.setAttribute("aria-describedby",J.join(" "))}_addMessageReference(Te,J){const $=this._messageRegistry.get(J);(function Dt(Fe,Se,Te){const J=Ne(Fe,Se);J.some($=>$.trim()==Te.trim())||(J.push(Te.trim()),Fe.setAttribute(Se,J.join(" ")))})(Te,"aria-describedby",$.messageElement.id),Te.setAttribute(Ft,this._id),$.referenceCount++}_removeMessageReference(Te,J){const $=this._messageRegistry.get(J);$.referenceCount--,function Oe(Fe,Se,Te){const $=Ne(Fe,Se).filter(re=>re!=Te.trim());$.length?Fe.setAttribute(Se,$.join(" ")):Fe.removeAttribute(Se)}(Te,"aria-describedby",$.messageElement.id),Te.removeAttribute(Ft)}_isElementDescribedByMessage(Te,J){const $=Ne(Te,"aria-describedby"),re=this._messageRegistry.get(J),_e=re&&re.messageElement.id;return!!_e&&-1!=$.indexOf(_e)}_canBeDescribed(Te,J){if(!this._isElementNode(Te))return!1;if(J&&"object"==typeof J)return!0;const $=null==J?"":`${J}`.trim(),re=Te.getAttribute("aria-label");return!(!$||re&&re.trim()===$)}_isElementNode(Te){return Te.nodeType===this._document.ELEMENT_NODE}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(T.K0),l.LFG(H.t4))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function dt(Fe,Se){return"string"==typeof Fe?`${Se||""}/${Fe}`:Fe}function St(Fe,Se){Fe.id||(Fe.id=`${kt}-${Se}-${Gt++}`)}class Et{constructor(Se){this._items=Se,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new g.x,this._typeaheadSubscription=He.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Te=>Te.disabled,this._pressedLetters=[],this.tabOut=new g.x,this.change=new g.x,Se instanceof l.n_E&&Se.changes.subscribe(Te=>{if(this._activeItem){const $=Te.toArray().indexOf(this._activeItem);$>-1&&$!==this._activeItemIndex&&(this._activeItemIndex=$)}})}skipPredicate(Se){return this._skipPredicateFn=Se,this}withWrap(Se=!0){return this._wrap=Se,this}withVerticalOrientation(Se=!0){return this._vertical=Se,this}withHorizontalOrientation(Se){return this._horizontal=Se,this}withAllowedModifierKeys(Se){return this._allowedModifierKeys=Se,this}withTypeAhead(Se=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Be.b)(Te=>this._pressedLetters.push(Te)),(0,Ue.b)(Se),(0,nt.h)(()=>this._pressedLetters.length>0),(0,Re.U)(()=>this._pressedLetters.join(""))).subscribe(Te=>{const J=this._getItemsArray();for(let $=1;$<J.length+1;$++){const re=(this._activeItemIndex+$)%J.length,_e=J[re];if(!this._skipPredicateFn(_e)&&0===_e.getLabel().toUpperCase().trim().indexOf(Te)){this.setActiveItem(re);break}}this._pressedLetters=[]}),this}withHomeAndEnd(Se=!0){return this._homeAndEnd=Se,this}setActiveItem(Se){const Te=this._activeItem;this.updateActiveItem(Se),this._activeItem!==Te&&this.change.next(this._activeItemIndex)}onKeydown(Se){const Te=Se.keyCode,$=["altKey","ctrlKey","metaKey","shiftKey"].every(re=>!Se[re]||this._allowedModifierKeys.indexOf(re)>-1);switch(Te){case Ie.Mf:return void this.tabOut.next();case Ie.JH:if(this._vertical&&$){this.setNextItemActive();break}return;case Ie.LH:if(this._vertical&&$){this.setPreviousItemActive();break}return;case Ie.SV:if(this._horizontal&&$){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Ie.oh:if(this._horizontal&&$){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Ie.Sd:if(this._homeAndEnd&&$){this.setFirstItemActive();break}return;case Ie.uR:if(this._homeAndEnd&&$){this.setLastItemActive();break}return;default:return void(($||(0,Ie.Vb)(Se,"shiftKey"))&&(Se.key&&1===Se.key.length?this._letterKeyStream.next(Se.key.toLocaleUpperCase()):(Te>=Ie.A&&Te<=Ie.Z||Te>=Ie.xE&&Te<=Ie.aO)&&this._letterKeyStream.next(String.fromCharCode(Te))))}this._pressedLetters=[],Se.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Se){const Te=this._getItemsArray(),J="number"==typeof Se?Se:Te.indexOf(Se);this._activeItem=Te[J]??null,this._activeItemIndex=J}_setActiveItemByDelta(Se){this._wrap?this._setActiveInWrapMode(Se):this._setActiveInDefaultMode(Se)}_setActiveInWrapMode(Se){const Te=this._getItemsArray();for(let J=1;J<=Te.length;J++){const $=(this._activeItemIndex+Se*J+Te.length)%Te.length;if(!this._skipPredicateFn(Te[$]))return void this.setActiveItem($)}}_setActiveInDefaultMode(Se){this._setActiveItemByIndex(this._activeItemIndex+Se,Se)}_setActiveItemByIndex(Se,Te){const J=this._getItemsArray();if(J[Se]){for(;this._skipPredicateFn(J[Se]);)if(!J[Se+=Te])return;this.setActiveItem(Se)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class tn extends Et{setActiveItem(Se){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Se),this.activeItem&&this.activeItem.setActiveStyles()}}class Qt extends Et{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Se){return this._origin=Se,this}setActiveItem(Se){super.setActiveItem(Se),this.activeItem&&this.activeItem.focus(this._origin)}}let Xn=(()=>{class Fe{constructor(Te){this._platform=Te}isDisabled(Te){return Te.hasAttribute("disabled")}isVisible(Te){return function nn(Fe){return!!(Fe.offsetWidth||Fe.offsetHeight||"function"==typeof Fe.getClientRects&&Fe.getClientRects().length)}(Te)&&"visible"===getComputedStyle(Te).visibility}isTabbable(Te){if(!this._platform.isBrowser)return!1;const J=function mi(Fe){try{return Fe.frameElement}catch{return null}}(function bn(Fe){return Fe.ownerDocument&&Fe.ownerDocument.defaultView||window}(Te));if(J&&(-1===At(J)||!this.isVisible(J)))return!1;let $=Te.nodeName.toLowerCase(),re=At(Te);return Te.hasAttribute("contenteditable")?-1!==re:!("iframe"===$||"object"===$||this._platform.WEBKIT&&this._platform.IOS&&!function en(Fe){let Se=Fe.nodeName.toLowerCase(),Te="input"===Se&&Fe.type;return"text"===Te||"password"===Te||"select"===Se||"textarea"===Se}(Te))&&("audio"===$?!!Te.hasAttribute("controls")&&-1!==re:"video"===$?-1!==re&&(null!==re||this._platform.FIREFOX||Te.hasAttribute("controls")):Te.tabIndex>=0)}isFocusable(Te,J){return function sn(Fe){return!function Qn(Fe){return function ln(Fe){return"input"==Fe.nodeName.toLowerCase()}(Fe)&&"hidden"==Fe.type}(Fe)&&(function gi(Fe){let Se=Fe.nodeName.toLowerCase();return"input"===Se||"select"===Se||"button"===Se||"textarea"===Se}(Fe)||function di(Fe){return function hn(Fe){return"a"==Fe.nodeName.toLowerCase()}(Fe)&&Fe.hasAttribute("href")}(Fe)||Fe.hasAttribute("contenteditable")||gt(Fe))}(Te)&&!this.isDisabled(Te)&&(J?.ignoreVisibility||this.isVisible(Te))}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(H.t4))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function gt(Fe){if(!Fe.hasAttribute("tabindex")||void 0===Fe.tabIndex)return!1;let Se=Fe.getAttribute("tabindex");return!(!Se||isNaN(parseInt(Se,10)))}function At(Fe){if(!gt(Fe))return null;const Se=parseInt(Fe.getAttribute("tabindex")||"",10);return isNaN(Se)?-1:Se}class Un{constructor(Se,Te,J,$,re=!1){this._element=Se,this._checker=Te,this._ngZone=J,this._document=$,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,re||this.attachAnchors()}get enabled(){return this._enabled}set enabled(Se){this._enabled=Se,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Se,this._startAnchor),this._toggleAnchorTabIndex(Se,this._endAnchor))}destroy(){const Se=this._startAnchor,Te=this._endAnchor;Se&&(Se.removeEventListener("focus",this.startAnchorListener),Se.remove()),Te&&(Te.removeEventListener("focus",this.endAnchorListener),Te.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Se){return new Promise(Te=>{this._executeOnStable(()=>Te(this.focusInitialElement(Se)))})}focusFirstTabbableElementWhenReady(Se){return new Promise(Te=>{this._executeOnStable(()=>Te(this.focusFirstTabbableElement(Se)))})}focusLastTabbableElementWhenReady(Se){return new Promise(Te=>{this._executeOnStable(()=>Te(this.focusLastTabbableElement(Se)))})}_getRegionBoundary(Se){const Te=this._element.querySelectorAll(`[cdk-focus-region-${Se}], [cdkFocusRegion${Se}], [cdk-focus-${Se}]`);return"start"==Se?Te.length?Te[0]:this._getFirstTabbableElement(this._element):Te.length?Te[Te.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Se){const Te=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Te){if(!this._checker.isFocusable(Te)){const J=this._getFirstTabbableElement(Te);return J?.focus(Se),!!J}return Te.focus(Se),!0}return this.focusFirstTabbableElement(Se)}focusFirstTabbableElement(Se){const Te=this._getRegionBoundary("start");return Te&&Te.focus(Se),!!Te}focusLastTabbableElement(Se){const Te=this._getRegionBoundary("end");return Te&&Te.focus(Se),!!Te}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Se){if(this._checker.isFocusable(Se)&&this._checker.isTabbable(Se))return Se;const Te=Se.children;for(let J=0;J<Te.length;J++){const $=Te[J].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Te[J]):null;if($)return $}return null}_getLastTabbableElement(Se){if(this._checker.isFocusable(Se)&&this._checker.isTabbable(Se))return Se;const Te=Se.children;for(let J=Te.length-1;J>=0;J--){const $=Te[J].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Te[J]):null;if($)return $}return null}_createAnchor(){const Se=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Se),Se.classList.add("cdk-visually-hidden"),Se.classList.add("cdk-focus-trap-anchor"),Se.setAttribute("aria-hidden","true"),Se}_toggleAnchorTabIndex(Se,Te){Se?Te.setAttribute("tabindex","0"):Te.removeAttribute("tabindex")}toggleAnchors(Se){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Se,this._startAnchor),this._toggleAnchorTabIndex(Se,this._endAnchor))}_executeOnStable(Se){this._ngZone.isStable?Se():this._ngZone.onStable.pipe((0,it.q)(1)).subscribe(Se)}}let Kn=(()=>{class Fe{constructor(Te,J,$){this._checker=Te,this._ngZone=J,this._document=$}create(Te,J=!1){return new Un(Te,this._checker,this._ngZone,this._document,J)}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(Xn),l.LFG(l.R0b),l.LFG(T.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function tt(Fe){return 0===Fe.buttons||0===Fe.offsetX&&0===Fe.offsetY}function Y(Fe){const Se=Fe.touches&&Fe.touches[0]||Fe.changedTouches&&Fe.changedTouches[0];return!(!Se||-1!==Se.identifier||null!=Se.radiusX&&1!==Se.radiusX||null!=Se.radiusY&&1!==Se.radiusY)}const ee=new l.OlP("cdk-input-modality-detector-options"),Me={ignoreKeys:[Ie.zL,Ie.jx,Ie.b2,Ie.MW,Ie.JU]},ue=(0,H.i$)({passive:!0,capture:!0});let fe=(()=>{class Fe{constructor(Te,J,$,re){this._platform=Te,this._mostRecentTarget=null,this._modality=new he.X(null),this._lastTouchMs=0,this._onKeydown=_e=>{this._options?.ignoreKeys?.some(ke=>ke===_e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,H.sA)(_e))},this._onMousedown=_e=>{Date.now()-this._lastTouchMs<650||(this._modality.next(tt(_e)?"keyboard":"mouse"),this._mostRecentTarget=(0,H.sA)(_e))},this._onTouchstart=_e=>{Y(_e)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,H.sA)(_e))},this._options={...Me,...re},this.modalityDetected=this._modality.pipe((0,We.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,je.x)()),Te.isBrowser&&J.runOutsideAngular(()=>{$.addEventListener("keydown",this._onKeydown,ue),$.addEventListener("mousedown",this._onMousedown,ue),$.addEventListener("touchstart",this._onTouchstart,ue)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ue),document.removeEventListener("mousedown",this._onMousedown,ue),document.removeEventListener("touchstart",this._onTouchstart,ue))}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(H.t4),l.LFG(l.R0b),l.LFG(T.K0),l.LFG(ee,8))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();const le=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function de(){return null}}),Ae=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let ut=(()=>{class Fe{constructor(Te,J,$,re){this._ngZone=J,this._defaultOptions=re,this._document=$,this._liveElement=Te||this._createLiveElement()}announce(Te,...J){const $=this._defaultOptions;let re,_e;return 1===J.length&&"number"==typeof J[0]?_e=J[0]:[re,_e]=J,this.clear(),clearTimeout(this._previousTimeout),re||(re=$&&$.politeness?$.politeness:"polite"),null==_e&&$&&(_e=$.duration),this._liveElement.setAttribute("aria-live",re),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(ke=>this._currentResolve=ke)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Te,"number"==typeof _e&&(this._previousTimeout=setTimeout(()=>this.clear(),_e)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const Te="cdk-live-announcer-element",J=this._document.getElementsByClassName(Te),$=this._document.createElement("div");for(let re=0;re<J.length;re++)J[re].remove();return $.classList.add(Te),$.classList.add("cdk-visually-hidden"),$.setAttribute("aria-atomic","true"),$.setAttribute("aria-live","polite"),this._document.body.appendChild($),$}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(le,8),l.LFG(l.R0b),l.LFG(T.K0),l.LFG(Ae,8))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();const dn=new l.OlP("cdk-focus-monitor-default-options"),Vt=(0,H.i$)({passive:!0,capture:!0});let mn=(()=>{class Fe{constructor(Te,J,$,re,_e){this._ngZone=Te,this._platform=J,this._inputModalityDetector=$,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new g.x,this._rootNodeFocusAndBlurListener=ke=>{for(let Ye=(0,H.sA)(ke);Ye;Ye=Ye.parentElement)"focus"===ke.type?this._onFocus(ke,Ye):this._onBlur(ke,Ye)},this._document=re,this._detectionMode=_e?.detectionMode||0}monitor(Te,J=!1){const $=(0,wt.fI)(Te);if(!this._platform.isBrowser||1!==$.nodeType)return(0,$e.of)(null);const re=(0,H.kV)($)||this._getDocument(),_e=this._elementInfo.get($);if(_e)return J&&(_e.checkChildren=!0),_e.subject;const ke={checkChildren:J,subject:new g.x,rootNode:re};return this._elementInfo.set($,ke),this._registerGlobalListeners(ke),ke.subject}stopMonitoring(Te){const J=(0,wt.fI)(Te),$=this._elementInfo.get(J);$&&($.subject.complete(),this._setClasses(J),this._elementInfo.delete(J),this._removeGlobalListeners($))}focusVia(Te,J,$){const re=(0,wt.fI)(Te);re===this._getDocument().activeElement?this._getClosestElementsInfo(re).forEach(([ke,rt])=>this._originChanged(ke,J,rt)):(this._setOrigin(J),"function"==typeof re.focus&&re.focus($))}ngOnDestroy(){this._elementInfo.forEach((Te,J)=>this.stopMonitoring(J))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Te){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Te)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:Te&&this._isLastInteractionFromInputLabel(Te)?"mouse":"program"}_shouldBeAttributedToTouch(Te){return 1===this._detectionMode||!!Te?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(Te,J){Te.classList.toggle("cdk-focused",!!J),Te.classList.toggle("cdk-touch-focused","touch"===J),Te.classList.toggle("cdk-keyboard-focused","keyboard"===J),Te.classList.toggle("cdk-mouse-focused","mouse"===J),Te.classList.toggle("cdk-program-focused","program"===J)}_setOrigin(Te,J=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Te,this._originFromTouchInteraction="touch"===Te&&J,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Te,J){const $=this._elementInfo.get(J),re=(0,H.sA)(Te);!$||!$.checkChildren&&J!==re||this._originChanged(J,this._getFocusOrigin(re),$)}_onBlur(Te,J){const $=this._elementInfo.get(J);!$||$.checkChildren&&Te.relatedTarget instanceof Node&&J.contains(Te.relatedTarget)||(this._setClasses(J),this._emitOrigin($,null))}_emitOrigin(Te,J){Te.subject.observers.length&&this._ngZone.run(()=>Te.subject.next(J))}_registerGlobalListeners(Te){if(!this._platform.isBrowser)return;const J=Te.rootNode,$=this._rootNodeFocusListenerCount.get(J)||0;$||this._ngZone.runOutsideAngular(()=>{J.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vt),J.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vt)}),this._rootNodeFocusListenerCount.set(J,$+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Ct.R)(this._stopInputModalityDetector)).subscribe(re=>{this._setOrigin(re,!0)}))}_removeGlobalListeners(Te){const J=Te.rootNode;if(this._rootNodeFocusListenerCount.has(J)){const $=this._rootNodeFocusListenerCount.get(J);$>1?this._rootNodeFocusListenerCount.set(J,$-1):(J.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vt),J.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vt),this._rootNodeFocusListenerCount.delete(J))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Te,J,$){this._setClasses(Te,J),this._emitOrigin($,J),this._lastFocusOrigin=J}_getClosestElementsInfo(Te){const J=[];return this._elementInfo.forEach(($,re)=>{(re===Te||$.checkChildren&&re.contains(Te))&&J.push([re,$])}),J}_isLastInteractionFromInputLabel(Te){const{_mostRecentTarget:J,mostRecentModality:$}=this._inputModalityDetector;if("mouse"!==$||!J||J===Te||"INPUT"!==Te.nodeName&&"TEXTAREA"!==Te.nodeName||Te.disabled)return!1;const re=Te.labels;if(re)for(let _e=0;_e<re.length;_e++)if(re[_e].contains(J))return!0;return!1}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(l.R0b),l.LFG(H.t4),l.LFG(fe),l.LFG(T.K0,8),l.LFG(dn,8))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();const Vi="cdk-high-contrast-black-on-white",Nt="cdk-high-contrast-white-on-black",bt="cdk-high-contrast-active";let et=(()=>{class Fe{constructor(Te,J){this._platform=Te,this._document=J,this._breakpointSubscription=(0,l.f3M)(an.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Te=this._document.createElement("div");Te.style.backgroundColor="rgb(1,2,3)",Te.style.position="absolute",this._document.body.appendChild(Te);const J=this._document.defaultView||window,$=J&&J.getComputedStyle?J.getComputedStyle(Te):null,re=($&&$.backgroundColor||"").replace(/ /g,"");switch(Te.remove(),re){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Te=this._document.body.classList;Te.remove(bt,Vi,Nt),this._hasCheckedHighContrastMode=!0;const J=this.getHighContrastMode();1===J?Te.add(bt,Vi):2===J&&Te.add(bt,Nt)}}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(H.t4),l.LFG(T.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})(),ot=(()=>{class Fe{constructor(Te){Te._applyBodyHighContrastModeCssClasses()}}return Fe.\u0275fac=function(Te){return new(Te||Fe)(l.LFG(et))},Fe.\u0275mod=l.oAB({type:Fe}),Fe.\u0275inj=l.cJS({imports:[Tt.Q8]}),Fe})()},445:(cn,ft,V)=>{"use strict";V.d(ft,{Is:()=>$e,vT:()=>Be});var T=V(4650),l=V(6895);const H=new T.OlP("cdk-dir-doc",{providedIn:"root",factory:function g(){return(0,T.f3M)(l.K0)}}),He=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $e=(()=>{class Ue{constructor(Re){if(this.value="ltr",this.change=new T.vpe,Re){const We=Re.documentElement?Re.documentElement.dir:null;this.value=function he(Ue){const nt=Ue?.toLowerCase()||"";return"auto"===nt&&typeof navigator<"u"&&navigator?.language?He.test(navigator.language)?"rtl":"ltr":"rtl"===nt?"rtl":"ltr"}((Re.body?Re.body.dir:null)||We||"ltr")}}ngOnDestroy(){this.change.complete()}}return Ue.\u0275fac=function(Re){return new(Re||Ue)(T.LFG(H,8))},Ue.\u0275prov=T.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})(),Be=(()=>{class Ue{}return Ue.\u0275fac=function(Re){return new(Re||Ue)},Ue.\u0275mod=T.oAB({type:Ue}),Ue.\u0275inj=T.cJS({}),Ue})()},1281:(cn,ft,V)=>{"use strict";V.d(ft,{Eq:()=>He,HM:()=>he,Ig:()=>l,fI:()=>$e,su:()=>H});var T=V(4650);function l(Be){return null!=Be&&"false"!=`${Be}`}function H(Be,Ue=0){return function g(Be){return!isNaN(parseFloat(Be))&&!isNaN(Number(Be))}(Be)?Number(Be):Ue}function He(Be){return Array.isArray(Be)?Be:[Be]}function he(Be){return null==Be?"":"string"==typeof Be?Be:`${Be}px`}function $e(Be){return Be instanceof T.SBq?Be.nativeElement:Be}},5017:(cn,ft,V)=>{"use strict";V.d(ft,{A8:()=>Ue,Ov:()=>Ie});var T=V(7579),l=V(4650);class Ie{constructor(it=!1,We,je=!0,Ct){this._multiple=it,this._emitChanges=je,this.compareWith=Ct,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new T.x,We&&We.length&&(it?We.forEach(wt=>this._markSelected(wt)):this._markSelected(We[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...it){this._verifyValueAssignment(it),it.forEach(je=>this._markSelected(je));const We=this._hasQueuedChanges();return this._emitChangeEvent(),We}deselect(...it){this._verifyValueAssignment(it),it.forEach(je=>this._unmarkSelected(je));const We=this._hasQueuedChanges();return this._emitChangeEvent(),We}setSelection(...it){this._verifyValueAssignment(it);const We=this.selected,je=new Set(it);it.forEach(wt=>this._markSelected(wt)),We.filter(wt=>!je.has(wt)).forEach(wt=>this._unmarkSelected(wt));const Ct=this._hasQueuedChanges();return this._emitChangeEvent(),Ct}toggle(it){return this.isSelected(it)?this.deselect(it):this.select(it)}clear(it=!0){this._unmarkAll();const We=this._hasQueuedChanges();return it&&this._emitChangeEvent(),We}isSelected(it){if(this.compareWith){for(const We of this._selection)if(this.compareWith(We,it))return!0;return!1}return this._selection.has(it)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(it){this._multiple&&this.selected&&this._selected.sort(it)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(it){this.isSelected(it)||(this._multiple||this._unmarkAll(),this.isSelected(it)||this._selection.add(it),this._emitChanges&&this._selectedToEmit.push(it))}_unmarkSelected(it){this.isSelected(it)&&(this._selection.delete(it),this._emitChanges&&this._deselectedToEmit.push(it))}_unmarkAll(){this.isEmpty()||this._selection.forEach(it=>this._unmarkSelected(it))}_verifyValueAssignment(it){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let Ue=(()=>{class Re{constructor(){this._listeners=[]}notify(We,je){for(let Ct of this._listeners)Ct(We,je)}listen(We){return this._listeners.push(We),()=>{this._listeners=this._listeners.filter(je=>We!==je)}}ngOnDestroy(){this._listeners=[]}}return Re.\u0275fac=function(We){return new(We||Re)},Re.\u0275prov=l.Yz7({token:Re,factory:Re.\u0275fac,providedIn:"root"}),Re})()},9521:(cn,ft,V)=>{"use strict";V.d(ft,{A:()=>Qn,JH:()=>Xt,JU:()=>he,K5:()=>He,LH:()=>Tt,L_:()=>Re,MW:()=>Ae,Mf:()=>H,SV:()=>an,Sd:()=>Ct,Vb:()=>Ai,Z:()=>de,aO:()=>On,b2:()=>Or,hY:()=>nt,jx:()=>$e,oh:()=>wt,uR:()=>je,xE:()=>kt,zL:()=>Ie});const H=9,He=13,he=16,$e=17,Ie=18,nt=27,Re=32,je=35,Ct=36,wt=37,Tt=38,an=39,Xt=40,kt=48,On=57,Qn=65,de=90,Ae=91,Or=224;function Ai(Gn,...ur){return ur.length?ur.some(dr=>Gn[dr]):Gn.altKey||Gn.shiftKey||Gn.ctrlKey||Gn.metaKey}},2289:(cn,ft,V)=>{"use strict";V.d(ft,{Yg:()=>Xt,u3:()=>Oe});var T=V(4650),l=V(1281),H=V(7579),g=V(9841),He=V(7272),he=V(9751),$e=V(5698),Ie=V(5684),Be=V(8372),Ue=V(4004),nt=V(8675),Re=V(2722),it=V(3353);const je=new Set;let Ct,wt=(()=>{class Ne{constructor(kt){this._platform=kt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):an}matchMedia(kt){return(this._platform.WEBKIT||this._platform.BLINK)&&function Tt(Ne){if(!je.has(Ne))try{Ct||(Ct=document.createElement("style"),Ct.setAttribute("type","text/css"),document.head.appendChild(Ct)),Ct.sheet&&(Ct.sheet.insertRule(`@media ${Ne} {body{ }}`,0),je.add(Ne))}catch(Ot){console.error(Ot)}}(kt),this._matchMedia(kt)}}return Ne.\u0275fac=function(kt){return new(kt||Ne)(T.LFG(it.t4))},Ne.\u0275prov=T.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})();function an(Ne){return{matches:"all"===Ne||""===Ne,media:Ne,addListener:()=>{},removeListener:()=>{}}}let Xt=(()=>{class Ne{constructor(kt,Ft){this._mediaMatcher=kt,this._zone=Ft,this._queries=new Map,this._destroySubject=new H.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(kt){return Dt((0,l.Eq)(kt)).some(Gt=>this._registerQuery(Gt).mql.matches)}observe(kt){const Gt=Dt((0,l.Eq)(kt)).map(dt=>this._registerQuery(dt).observable);let lt=(0,g.a)(Gt);return lt=(0,He.z)(lt.pipe((0,$e.q)(1)),lt.pipe((0,Ie.T)(1),(0,Be.b)(0))),lt.pipe((0,Ue.U)(dt=>{const St={matches:!1,breakpoints:{}};return dt.forEach(({matches:Et,query:tn})=>{St.matches=St.matches||Et,St.breakpoints[tn]=Et}),St}))}_registerQuery(kt){if(this._queries.has(kt))return this._queries.get(kt);const Ft=this._mediaMatcher.matchMedia(kt),lt={observable:new he.y(dt=>{const St=Et=>this._zone.run(()=>dt.next(Et));return Ft.addListener(St),()=>{Ft.removeListener(St)}}).pipe((0,nt.O)(Ft),(0,Ue.U)(({matches:dt})=>({query:kt,matches:dt})),(0,Re.R)(this._destroySubject)),mql:Ft};return this._queries.set(kt,lt),lt}}return Ne.\u0275fac=function(kt){return new(kt||Ne)(T.LFG(wt),T.LFG(T.R0b))},Ne.\u0275prov=T.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})();function Dt(Ne){return Ne.map(Ot=>Ot.split(",")).reduce((Ot,kt)=>Ot.concat(kt)).map(Ot=>Ot.trim())}const Oe={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},9643:(cn,ft,V)=>{"use strict";V.d(ft,{Q8:()=>Be,wD:()=>Ie});var T=V(1281),l=V(4650),H=V(9751),g=V(7579),He=V(8372);let he=(()=>{class Ue{create(Re){return typeof MutationObserver>"u"?null:new MutationObserver(Re)}}return Ue.\u0275fac=function(Re){return new(Re||Ue)},Ue.\u0275prov=l.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})(),$e=(()=>{class Ue{constructor(Re){this._mutationObserverFactory=Re,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Re,it)=>this._cleanupObserver(it))}observe(Re){const it=(0,T.fI)(Re);return new H.y(We=>{const Ct=this._observeElement(it).subscribe(We);return()=>{Ct.unsubscribe(),this._unobserveElement(it)}})}_observeElement(Re){if(this._observedElements.has(Re))this._observedElements.get(Re).count++;else{const it=new g.x,We=this._mutationObserverFactory.create(je=>it.next(je));We&&We.observe(Re,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Re,{observer:We,stream:it,count:1})}return this._observedElements.get(Re).stream}_unobserveElement(Re){this._observedElements.has(Re)&&(this._observedElements.get(Re).count--,this._observedElements.get(Re).count||this._cleanupObserver(Re))}_cleanupObserver(Re){if(this._observedElements.has(Re)){const{observer:it,stream:We}=this._observedElements.get(Re);it&&it.disconnect(),We.complete(),this._observedElements.delete(Re)}}}return Ue.\u0275fac=function(Re){return new(Re||Ue)(l.LFG(he))},Ue.\u0275prov=l.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})(),Ie=(()=>{class Ue{constructor(Re,it,We){this._contentObserver=Re,this._elementRef=it,this._ngZone=We,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(Re){this._disabled=(0,T.Ig)(Re),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Re){this._debounce=(0,T.su)(Re),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Re=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Re.pipe((0,He.b)(this.debounce)):Re).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return Ue.\u0275fac=function(Re){return new(Re||Ue)(l.Y36($e),l.Y36(l.SBq),l.Y36(l.R0b))},Ue.\u0275dir=l.lG2({type:Ue,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Ue})(),Be=(()=>{class Ue{}return Ue.\u0275fac=function(Re){return new(Re||Ue)},Ue.\u0275mod=l.oAB({type:Ue}),Ue.\u0275inj=l.cJS({providers:[he]}),Ue})()},8184:(cn,ft,V)=>{"use strict";V.d(ft,{U8:()=>un,aV:()=>bn,pI:()=>Fi,xu:()=>hi});var T=V(8605),l=V(6895),H=V(4650),g=V(1281),He=V(3353),he=V(445),$e=V(4080),Ie=V(7579),Be=V(727),Ue=V(6451),nt=V(5698),Re=V(2722),it=V(2529),We=V(9521);const je=(0,He.Mq)();class Ct{constructor(Y,ee){this._viewportRuler=Y,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=ee}attach(){}enable(){if(this._canBeEnabled()){const Y=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=Y.style.left||"",this._previousHTMLStyles.top=Y.style.top||"",Y.style.left=(0,g.HM)(-this._previousScrollPosition.left),Y.style.top=(0,g.HM)(-this._previousScrollPosition.top),Y.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const Y=this._document.documentElement,Me=Y.style,Je=this._document.body.style,ue=Me.scrollBehavior||"",fe=Je.scrollBehavior||"";this._isEnabled=!1,Me.left=this._previousHTMLStyles.left,Me.top=this._previousHTMLStyles.top,Y.classList.remove("cdk-global-scrollblock"),je&&(Me.scrollBehavior=Je.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),je&&(Me.scrollBehavior=ue,Je.scrollBehavior=fe)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const ee=this._document.body,Me=this._viewportRuler.getViewportSize();return ee.scrollHeight>Me.height||ee.scrollWidth>Me.width}}class Tt{constructor(Y,ee,Me,Je){this._scrollDispatcher=Y,this._ngZone=ee,this._viewportRuler=Me,this._config=Je,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(Y){this._overlayRef=Y}enable(){if(this._scrollSubscription)return;const Y=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=Y.subscribe(()=>{const ee=this._viewportRuler.getViewportScrollPosition().top;Math.abs(ee-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=Y.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class an{enable(){}disable(){}attach(){}}function Xt(tt,Y){return Y.some(ee=>tt.bottom<ee.top||tt.top>ee.bottom||tt.right<ee.left||tt.left>ee.right)}function Dt(tt,Y){return Y.some(ee=>tt.top<ee.top||tt.bottom>ee.bottom||tt.left<ee.left||tt.right>ee.right)}class Oe{constructor(Y,ee,Me,Je){this._scrollDispatcher=Y,this._viewportRuler=ee,this._ngZone=Me,this._config=Je,this._scrollSubscription=null}attach(Y){this._overlayRef=Y}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const ee=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Me,height:Je}=this._viewportRuler.getViewportSize();Xt(ee,[{width:Me,height:Je,bottom:Je,right:Me,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ne=(()=>{class tt{constructor(ee,Me,Je,ue){this._scrollDispatcher=ee,this._viewportRuler=Me,this._ngZone=Je,this.noop=()=>new an,this.close=fe=>new Tt(this._scrollDispatcher,this._ngZone,this._viewportRuler,fe),this.block=()=>new Ct(this._viewportRuler,this._document),this.reposition=fe=>new Oe(this._scrollDispatcher,this._viewportRuler,this._ngZone,fe),this._document=ue}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.LFG(T.mF),H.LFG(T.rL),H.LFG(H.R0b),H.LFG(l.K0))},tt.\u0275prov=H.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})();class Ot{constructor(Y){if(this.scrollStrategy=new an,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,Y){const ee=Object.keys(Y);for(const Me of ee)void 0!==Y[Me]&&(this[Me]=Y[Me])}}}class Gt{constructor(Y,ee){this.connectionPair=Y,this.scrollableViewProperties=ee}}let St=(()=>{class tt{constructor(ee){this._attachedOverlays=[],this._document=ee}ngOnDestroy(){this.detach()}add(ee){this.remove(ee),this._attachedOverlays.push(ee)}remove(ee){const Me=this._attachedOverlays.indexOf(ee);Me>-1&&this._attachedOverlays.splice(Me,1),0===this._attachedOverlays.length&&this.detach()}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.LFG(l.K0))},tt.\u0275prov=H.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),Et=(()=>{class tt extends St{constructor(ee,Me){super(ee),this._ngZone=Me,this._keydownListener=Je=>{const ue=this._attachedOverlays;for(let fe=ue.length-1;fe>-1;fe--)if(ue[fe]._keydownEvents.observers.length>0){const le=ue[fe]._keydownEvents;this._ngZone?this._ngZone.run(()=>le.next(Je)):le.next(Je);break}}}add(ee){super.add(ee),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.LFG(l.K0),H.LFG(H.R0b,8))},tt.\u0275prov=H.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),tn=(()=>{class tt extends St{constructor(ee,Me,Je){super(ee),this._platform=Me,this._ngZone=Je,this._cursorStyleIsSet=!1,this._pointerDownListener=ue=>{this._pointerDownEventTarget=(0,He.sA)(ue)},this._clickListener=ue=>{const fe=(0,He.sA)(ue),le="click"===ue.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:fe;this._pointerDownEventTarget=null;const de=this._attachedOverlays.slice();for(let Ae=de.length-1;Ae>-1;Ae--){const ut=de[Ae];if(ut._outsidePointerEvents.observers.length<1||!ut.hasAttached())continue;if(ut.overlayElement.contains(fe)||ut.overlayElement.contains(le))break;const mt=ut._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>mt.next(ue)):mt.next(ue)}}}add(ee){if(super.add(ee),!this._isAttached){const Me=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(Me)):this._addEventListeners(Me),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Me.style.cursor,Me.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const ee=this._document.body;ee.removeEventListener("pointerdown",this._pointerDownListener,!0),ee.removeEventListener("click",this._clickListener,!0),ee.removeEventListener("auxclick",this._clickListener,!0),ee.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(ee.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(ee){ee.addEventListener("pointerdown",this._pointerDownListener,!0),ee.addEventListener("click",this._clickListener,!0),ee.addEventListener("auxclick",this._clickListener,!0),ee.addEventListener("contextmenu",this._clickListener,!0)}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.LFG(l.K0),H.LFG(He.t4),H.LFG(H.R0b,8))},tt.\u0275prov=H.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),Qt=(()=>{class tt{constructor(ee,Me){this._platform=Me,this._document=ee}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const ee="cdk-overlay-container";if(this._platform.isBrowser||(0,He.Oy)()){const Je=this._document.querySelectorAll(`.${ee}[platform="server"], .${ee}[platform="test"]`);for(let ue=0;ue<Je.length;ue++)Je[ue].remove()}const Me=this._document.createElement("div");Me.classList.add(ee),(0,He.Oy)()?Me.setAttribute("platform","test"):this._platform.isBrowser||Me.setAttribute("platform","server"),this._document.body.appendChild(Me),this._containerElement=Me}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.LFG(l.K0),H.LFG(He.t4))},tt.\u0275prov=H.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})();class On{constructor(Y,ee,Me,Je,ue,fe,le,de,Ae,ut=!1){this._portalOutlet=Y,this._host=ee,this._pane=Me,this._config=Je,this._ngZone=ue,this._keyboardDispatcher=fe,this._document=le,this._location=de,this._outsideClickDispatcher=Ae,this._animationsDisabled=ut,this._backdropElement=null,this._backdropClick=new Ie.x,this._attachments=new Ie.x,this._detachments=new Ie.x,this._locationChanges=Be.w0.EMPTY,this._backdropClickHandler=mt=>this._backdropClick.next(mt),this._backdropTransitionendHandler=mt=>{this._disposeBackdrop(mt.target)},this._keydownEvents=new Ie.x,this._outsidePointerEvents=new Ie.x,Je.scrollStrategy&&(this._scrollStrategy=Je.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Je.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(Y){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const ee=this._portalOutlet.attach(Y);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,nt.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof ee?.onDestroy&&ee.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),ee}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const Y=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),Y}dispose(){const Y=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,Y&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(Y){Y!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=Y,this.hasAttached()&&(Y.attach(this),this.updatePosition()))}updateSize(Y){this._config={...this._config,...Y},this._updateElementSize()}setDirection(Y){this._config={...this._config,direction:Y},this._updateElementDirection()}addPanelClass(Y){this._pane&&this._toggleClasses(this._pane,Y,!0)}removePanelClass(Y){this._pane&&this._toggleClasses(this._pane,Y,!1)}getDirection(){const Y=this._config.direction;return Y?"string"==typeof Y?Y:Y.value:"ltr"}updateScrollStrategy(Y){Y!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=Y,this.hasAttached()&&(Y.attach(this),Y.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const Y=this._pane.style;Y.width=(0,g.HM)(this._config.width),Y.height=(0,g.HM)(this._config.height),Y.minWidth=(0,g.HM)(this._config.minWidth),Y.minHeight=(0,g.HM)(this._config.minHeight),Y.maxWidth=(0,g.HM)(this._config.maxWidth),Y.maxHeight=(0,g.HM)(this._config.maxHeight)}_togglePointerEvents(Y){this._pane.style.pointerEvents=Y?"":"none"}_attachBackdrop(){const Y="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(Y)})}):this._backdropElement.classList.add(Y)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const Y=this._backdropElement;if(Y){if(this._animationsDisabled)return void this._disposeBackdrop(Y);Y.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{Y.addEventListener("transitionend",this._backdropTransitionendHandler)}),Y.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(Y)},500))}}_toggleClasses(Y,ee,Me){const Je=(0,g.Eq)(ee||[]).filter(ue=>!!ue);Je.length&&(Me?Y.classList.add(...Je):Y.classList.remove(...Je))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const Y=this._ngZone.onStable.pipe((0,Re.R)((0,Ue.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),Y.unsubscribe())})})}_disposeScrollStrategy(){const Y=this._scrollStrategy;Y&&(Y.disable(),Y.detach&&Y.detach())}_disposeBackdrop(Y){Y&&(Y.removeEventListener("click",this._backdropClickHandler),Y.removeEventListener("transitionend",this._backdropTransitionendHandler),Y.remove(),this._backdropElement===Y&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Xn="cdk-overlay-connected-position-bounding-box",mi=/([A-Za-z%]+)$/;class nn{constructor(Y,ee,Me,Je,ue){this._viewportRuler=ee,this._document=Me,this._platform=Je,this._overlayContainer=ue,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ie.x,this._resizeSubscription=Be.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(Y)}get positions(){return this._preferredPositions}attach(Y){this._validatePositions(),Y.hostElement.classList.add(Xn),this._overlayRef=Y,this._boundingBox=Y.hostElement,this._pane=Y.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Y=this._originRect,ee=this._overlayRect,Me=this._viewportRect,Je=this._containerRect,ue=[];let fe;for(let le of this._preferredPositions){let de=this._getOriginPoint(Y,Je,le),Ae=this._getOverlayPoint(de,ee,le),ut=this._getOverlayFit(Ae,ee,Me,le);if(ut.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(le,de);this._canFitWithFlexibleDimensions(ut,Ae,Me)?ue.push({position:le,origin:de,overlayRect:ee,boundingBoxRect:this._calculateBoundingBoxRect(de,le)}):(!fe||fe.overlayFit.visibleArea<ut.visibleArea)&&(fe={overlayFit:ut,overlayPoint:Ae,originPoint:de,position:le,overlayRect:ee})}if(ue.length){let le=null,de=-1;for(const Ae of ue){const ut=Ae.boundingBoxRect.width*Ae.boundingBoxRect.height*(Ae.position.weight||1);ut>de&&(de=ut,le=Ae)}return this._isPushed=!1,void this._applyPosition(le.position,le.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(fe.position,fe.originPoint);this._applyPosition(fe.position,fe.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&gi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Xn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const Y=this._lastPosition;if(Y){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const ee=this._getOriginPoint(this._originRect,this._containerRect,Y);this._applyPosition(Y,ee)}else this.apply()}withScrollableContainers(Y){return this._scrollables=Y,this}withPositions(Y){return this._preferredPositions=Y,-1===Y.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(Y){return this._viewportMargin=Y,this}withFlexibleDimensions(Y=!0){return this._hasFlexibleDimensions=Y,this}withGrowAfterOpen(Y=!0){return this._growAfterOpen=Y,this}withPush(Y=!0){return this._canPush=Y,this}withLockedPosition(Y=!0){return this._positionLocked=Y,this}setOrigin(Y){return this._origin=Y,this}withDefaultOffsetX(Y){return this._offsetX=Y,this}withDefaultOffsetY(Y){return this._offsetY=Y,this}withTransformOriginOn(Y){return this._transformOriginSelector=Y,this}_getOriginPoint(Y,ee,Me){let Je,ue;if("center"==Me.originX)Je=Y.left+Y.width/2;else{const fe=this._isRtl()?Y.right:Y.left,le=this._isRtl()?Y.left:Y.right;Je="start"==Me.originX?fe:le}return ee.left<0&&(Je-=ee.left),ue="center"==Me.originY?Y.top+Y.height/2:"top"==Me.originY?Y.top:Y.bottom,ee.top<0&&(ue-=ee.top),{x:Je,y:ue}}_getOverlayPoint(Y,ee,Me){let Je,ue;return Je="center"==Me.overlayX?-ee.width/2:"start"===Me.overlayX?this._isRtl()?-ee.width:0:this._isRtl()?0:-ee.width,ue="center"==Me.overlayY?-ee.height/2:"top"==Me.overlayY?0:-ee.height,{x:Y.x+Je,y:Y.y+ue}}_getOverlayFit(Y,ee,Me,Je){const ue=di(ee);let{x:fe,y:le}=Y,de=this._getOffset(Je,"x"),Ae=this._getOffset(Je,"y");de&&(fe+=de),Ae&&(le+=Ae);let dn=0-le,Vt=le+ue.height-Me.height,mn=this._subtractOverflows(ue.width,0-fe,fe+ue.width-Me.width),fn=this._subtractOverflows(ue.height,dn,Vt),Vi=mn*fn;return{visibleArea:Vi,isCompletelyWithinViewport:ue.width*ue.height===Vi,fitsInViewportVertically:fn===ue.height,fitsInViewportHorizontally:mn==ue.width}}_canFitWithFlexibleDimensions(Y,ee,Me){if(this._hasFlexibleDimensions){const Je=Me.bottom-ee.y,ue=Me.right-ee.x,fe=Qn(this._overlayRef.getConfig().minHeight),le=Qn(this._overlayRef.getConfig().minWidth),Ae=Y.fitsInViewportHorizontally||null!=le&&le<=ue;return(Y.fitsInViewportVertically||null!=fe&&fe<=Je)&&Ae}return!1}_pushOverlayOnScreen(Y,ee,Me){if(this._previousPushAmount&&this._positionLocked)return{x:Y.x+this._previousPushAmount.x,y:Y.y+this._previousPushAmount.y};const Je=di(ee),ue=this._viewportRect,fe=Math.max(Y.x+Je.width-ue.width,0),le=Math.max(Y.y+Je.height-ue.height,0),de=Math.max(ue.top-Me.top-Y.y,0),Ae=Math.max(ue.left-Me.left-Y.x,0);let ut=0,mt=0;return ut=Je.width<=ue.width?Ae||-fe:Y.x<this._viewportMargin?ue.left-Me.left-Y.x:0,mt=Je.height<=ue.height?de||-le:Y.y<this._viewportMargin?ue.top-Me.top-Y.y:0,this._previousPushAmount={x:ut,y:mt},{x:Y.x+ut,y:Y.y+mt}}_applyPosition(Y,ee){if(this._setTransformOrigin(Y),this._setOverlayElementStyles(ee,Y),this._setBoundingBoxStyles(ee,Y),Y.panelClass&&this._addPanelClasses(Y.panelClass),this._lastPosition=Y,this._positionChanges.observers.length){const Me=this._getScrollVisibility(),Je=new Gt(Y,Me);this._positionChanges.next(Je)}this._isInitialRender=!1}_setTransformOrigin(Y){if(!this._transformOriginSelector)return;const ee=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Me,Je=Y.overlayY;Me="center"===Y.overlayX?"center":this._isRtl()?"start"===Y.overlayX?"right":"left":"start"===Y.overlayX?"left":"right";for(let ue=0;ue<ee.length;ue++)ee[ue].style.transformOrigin=`${Me} ${Je}`}_calculateBoundingBoxRect(Y,ee){const Me=this._viewportRect,Je=this._isRtl();let ue,fe,le,ut,mt,dn;if("top"===ee.overlayY)fe=Y.y,ue=Me.height-fe+this._viewportMargin;else if("bottom"===ee.overlayY)le=Me.height-Y.y+2*this._viewportMargin,ue=Me.height-le+this._viewportMargin;else{const Vt=Math.min(Me.bottom-Y.y+Me.top,Y.y),mn=this._lastBoundingBoxSize.height;ue=2*Vt,fe=Y.y-Vt,ue>mn&&!this._isInitialRender&&!this._growAfterOpen&&(fe=Y.y-mn/2)}if("end"===ee.overlayX&&!Je||"start"===ee.overlayX&&Je)dn=Me.width-Y.x+this._viewportMargin,ut=Y.x-this._viewportMargin;else if("start"===ee.overlayX&&!Je||"end"===ee.overlayX&&Je)mt=Y.x,ut=Me.right-Y.x;else{const Vt=Math.min(Me.right-Y.x+Me.left,Y.x),mn=this._lastBoundingBoxSize.width;ut=2*Vt,mt=Y.x-Vt,ut>mn&&!this._isInitialRender&&!this._growAfterOpen&&(mt=Y.x-mn/2)}return{top:fe,left:mt,bottom:le,right:dn,width:ut,height:ue}}_setBoundingBoxStyles(Y,ee){const Me=this._calculateBoundingBoxRect(Y,ee);!this._isInitialRender&&!this._growAfterOpen&&(Me.height=Math.min(Me.height,this._lastBoundingBoxSize.height),Me.width=Math.min(Me.width,this._lastBoundingBoxSize.width));const Je={};if(this._hasExactPosition())Je.top=Je.left="0",Je.bottom=Je.right=Je.maxHeight=Je.maxWidth="",Je.width=Je.height="100%";else{const ue=this._overlayRef.getConfig().maxHeight,fe=this._overlayRef.getConfig().maxWidth;Je.height=(0,g.HM)(Me.height),Je.top=(0,g.HM)(Me.top),Je.bottom=(0,g.HM)(Me.bottom),Je.width=(0,g.HM)(Me.width),Je.left=(0,g.HM)(Me.left),Je.right=(0,g.HM)(Me.right),Je.alignItems="center"===ee.overlayX?"center":"end"===ee.overlayX?"flex-end":"flex-start",Je.justifyContent="center"===ee.overlayY?"center":"bottom"===ee.overlayY?"flex-end":"flex-start",ue&&(Je.maxHeight=(0,g.HM)(ue)),fe&&(Je.maxWidth=(0,g.HM)(fe))}this._lastBoundingBoxSize=Me,gi(this._boundingBox.style,Je)}_resetBoundingBoxStyles(){gi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){gi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(Y,ee){const Me={},Je=this._hasExactPosition(),ue=this._hasFlexibleDimensions,fe=this._overlayRef.getConfig();if(Je){const ut=this._viewportRuler.getViewportScrollPosition();gi(Me,this._getExactOverlayY(ee,Y,ut)),gi(Me,this._getExactOverlayX(ee,Y,ut))}else Me.position="static";let le="",de=this._getOffset(ee,"x"),Ae=this._getOffset(ee,"y");de&&(le+=`translateX(${de}px) `),Ae&&(le+=`translateY(${Ae}px)`),Me.transform=le.trim(),fe.maxHeight&&(Je?Me.maxHeight=(0,g.HM)(fe.maxHeight):ue&&(Me.maxHeight="")),fe.maxWidth&&(Je?Me.maxWidth=(0,g.HM)(fe.maxWidth):ue&&(Me.maxWidth="")),gi(this._pane.style,Me)}_getExactOverlayY(Y,ee,Me){let Je={top:"",bottom:""},ue=this._getOverlayPoint(ee,this._overlayRect,Y);return this._isPushed&&(ue=this._pushOverlayOnScreen(ue,this._overlayRect,Me)),"bottom"===Y.overlayY?Je.bottom=this._document.documentElement.clientHeight-(ue.y+this._overlayRect.height)+"px":Je.top=(0,g.HM)(ue.y),Je}_getExactOverlayX(Y,ee,Me){let fe,Je={left:"",right:""},ue=this._getOverlayPoint(ee,this._overlayRect,Y);return this._isPushed&&(ue=this._pushOverlayOnScreen(ue,this._overlayRect,Me)),fe=this._isRtl()?"end"===Y.overlayX?"left":"right":"end"===Y.overlayX?"right":"left","right"===fe?Je.right=this._document.documentElement.clientWidth-(ue.x+this._overlayRect.width)+"px":Je.left=(0,g.HM)(ue.x),Je}_getScrollVisibility(){const Y=this._getOriginRect(),ee=this._pane.getBoundingClientRect(),Me=this._scrollables.map(Je=>Je.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Dt(Y,Me),isOriginOutsideView:Xt(Y,Me),isOverlayClipped:Dt(ee,Me),isOverlayOutsideView:Xt(ee,Me)}}_subtractOverflows(Y,...ee){return ee.reduce((Me,Je)=>Me-Math.max(Je,0),Y)}_getNarrowedViewportRect(){const Y=this._document.documentElement.clientWidth,ee=this._document.documentElement.clientHeight,Me=this._viewportRuler.getViewportScrollPosition();return{top:Me.top+this._viewportMargin,left:Me.left+this._viewportMargin,right:Me.left+Y-this._viewportMargin,bottom:Me.top+ee-this._viewportMargin,width:Y-2*this._viewportMargin,height:ee-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(Y,ee){return"x"===ee?Y.offsetX??this._offsetX:Y.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(Y){this._pane&&(0,g.Eq)(Y).forEach(ee=>{""!==ee&&-1===this._appliedPanelClasses.indexOf(ee)&&(this._appliedPanelClasses.push(ee),this._pane.classList.add(ee))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(Y=>{this._pane.classList.remove(Y)}),this._appliedPanelClasses=[])}_getOriginRect(){const Y=this._origin;if(Y instanceof H.SBq)return Y.nativeElement.getBoundingClientRect();if(Y instanceof Element)return Y.getBoundingClientRect();const ee=Y.width||0,Me=Y.height||0;return{top:Y.y,bottom:Y.y+Me,left:Y.x,right:Y.x+ee,height:Me,width:ee}}}function gi(tt,Y){for(let ee in Y)Y.hasOwnProperty(ee)&&(tt[ee]=Y[ee]);return tt}function Qn(tt){if("number"!=typeof tt&&null!=tt){const[Y,ee]=tt.split(mi);return ee&&"px"!==ee?null:parseFloat(Y)}return tt||null}function di(tt){return{top:Math.floor(tt.top),right:Math.floor(tt.right),bottom:Math.floor(tt.bottom),left:Math.floor(tt.left),width:Math.floor(tt.width),height:Math.floor(tt.height)}}const gt="cdk-global-overlay-wrapper";class At{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(Y){const ee=Y.getConfig();this._overlayRef=Y,this._width&&!ee.width&&Y.updateSize({width:this._width}),this._height&&!ee.height&&Y.updateSize({height:this._height}),Y.hostElement.classList.add(gt),this._isDisposed=!1}top(Y=""){return this._bottomOffset="",this._topOffset=Y,this._alignItems="flex-start",this}left(Y=""){return this._xOffset=Y,this._xPosition="left",this}bottom(Y=""){return this._topOffset="",this._bottomOffset=Y,this._alignItems="flex-end",this}right(Y=""){return this._xOffset=Y,this._xPosition="right",this}start(Y=""){return this._xOffset=Y,this._xPosition="start",this}end(Y=""){return this._xOffset=Y,this._xPosition="end",this}width(Y=""){return this._overlayRef?this._overlayRef.updateSize({width:Y}):this._width=Y,this}height(Y=""){return this._overlayRef?this._overlayRef.updateSize({height:Y}):this._height=Y,this}centerHorizontally(Y=""){return this.left(Y),this._xPosition="center",this}centerVertically(Y=""){return this.top(Y),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const Y=this._overlayRef.overlayElement.style,ee=this._overlayRef.hostElement.style,Me=this._overlayRef.getConfig(),{width:Je,height:ue,maxWidth:fe,maxHeight:le}=Me,de=!("100%"!==Je&&"100vw"!==Je||fe&&"100%"!==fe&&"100vw"!==fe),Ae=!("100%"!==ue&&"100vh"!==ue||le&&"100%"!==le&&"100vh"!==le),ut=this._xPosition,mt=this._xOffset,dn="rtl"===this._overlayRef.getConfig().direction;let Vt="",mn="",fn="";de?fn="flex-start":"center"===ut?(fn="center",dn?mn=mt:Vt=mt):dn?"left"===ut||"end"===ut?(fn="flex-end",Vt=mt):("right"===ut||"start"===ut)&&(fn="flex-start",mn=mt):"left"===ut||"start"===ut?(fn="flex-start",Vt=mt):("right"===ut||"end"===ut)&&(fn="flex-end",mn=mt),Y.position=this._cssPosition,Y.marginLeft=de?"0":Vt,Y.marginTop=Ae?"0":this._topOffset,Y.marginBottom=this._bottomOffset,Y.marginRight=de?"0":mn,ee.justifyContent=fn,ee.alignItems=Ae?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const Y=this._overlayRef.overlayElement.style,ee=this._overlayRef.hostElement,Me=ee.style;ee.classList.remove(gt),Me.justifyContent=Me.alignItems=Y.marginTop=Y.marginBottom=Y.marginLeft=Y.marginRight=Y.position="",this._overlayRef=null,this._isDisposed=!0}}let en=(()=>{class tt{constructor(ee,Me,Je,ue){this._viewportRuler=ee,this._document=Me,this._platform=Je,this._overlayContainer=ue}global(){return new At}flexibleConnectedTo(ee){return new nn(ee,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.LFG(T.rL),H.LFG(l.K0),H.LFG(He.t4),H.LFG(Qt))},tt.\u0275prov=H.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),sn=0,bn=(()=>{class tt{constructor(ee,Me,Je,ue,fe,le,de,Ae,ut,mt,dn,Vt){this.scrollStrategies=ee,this._overlayContainer=Me,this._componentFactoryResolver=Je,this._positionBuilder=ue,this._keyboardDispatcher=fe,this._injector=le,this._ngZone=de,this._document=Ae,this._directionality=ut,this._location=mt,this._outsideClickDispatcher=dn,this._animationsModuleType=Vt}create(ee){const Me=this._createHostElement(),Je=this._createPaneElement(Me),ue=this._createPortalOutlet(Je),fe=new Ot(ee);return fe.direction=fe.direction||this._directionality.value,new On(ue,Me,Je,fe,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(ee){const Me=this._document.createElement("div");return Me.id="cdk-overlay-"+sn++,Me.classList.add("cdk-overlay-pane"),ee.appendChild(Me),Me}_createHostElement(){const ee=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(ee),ee}_createPortalOutlet(ee){return this._appRef||(this._appRef=this._injector.get(H.z2F)),new $e.u0(ee,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.LFG(Ne),H.LFG(Qt),H.LFG(H._Vd),H.LFG(en),H.LFG(Et),H.LFG(H.zs3),H.LFG(H.R0b),H.LFG(l.K0),H.LFG(he.Is),H.LFG(l.Ye),H.LFG(tn),H.LFG(H.QbO,8))},tt.\u0275prov=H.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const Un=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Kn=new H.OlP("cdk-connected-overlay-scroll-strategy");let hi=(()=>{class tt{constructor(ee){this.elementRef=ee}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.Y36(H.SBq))},tt.\u0275dir=H.lG2({type:tt,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),tt})(),Fi=(()=>{class tt{constructor(ee,Me,Je,ue,fe){this._overlay=ee,this._dir=fe,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Be.w0.EMPTY,this._attachSubscription=Be.w0.EMPTY,this._detachSubscription=Be.w0.EMPTY,this._positionSubscription=Be.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new H.vpe,this.positionChange=new H.vpe,this.attach=new H.vpe,this.detach=new H.vpe,this.overlayKeydown=new H.vpe,this.overlayOutsideClick=new H.vpe,this._templatePortal=new $e.UE(Me,Je),this._scrollStrategyFactory=ue,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(ee){this._offsetX=ee,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(ee){this._offsetY=ee,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(ee){this._hasBackdrop=(0,g.Ig)(ee)}get lockPosition(){return this._lockPosition}set lockPosition(ee){this._lockPosition=(0,g.Ig)(ee)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(ee){this._flexibleDimensions=(0,g.Ig)(ee)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(ee){this._growAfterOpen=(0,g.Ig)(ee)}get push(){return this._push}set push(ee){this._push=(0,g.Ig)(ee)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(ee){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),ee.origin&&this.open&&this._position.apply()),ee.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Un);const ee=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=ee.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=ee.detachments().subscribe(()=>this.detach.emit()),ee.keydownEvents().subscribe(Me=>{this.overlayKeydown.next(Me),Me.keyCode===We.hY&&!this.disableClose&&!(0,We.Vb)(Me)&&(Me.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(Me=>{this.overlayOutsideClick.next(Me)})}_buildConfig(){const ee=this._position=this.positionStrategy||this._createPositionStrategy(),Me=new Ot({direction:this._dir,positionStrategy:ee,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(Me.width=this.width),(this.height||0===this.height)&&(Me.height=this.height),(this.minWidth||0===this.minWidth)&&(Me.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(Me.minHeight=this.minHeight),this.backdropClass&&(Me.backdropClass=this.backdropClass),this.panelClass&&(Me.panelClass=this.panelClass),Me}_updatePositionStrategy(ee){const Me=this.positions.map(Je=>({originX:Je.originX,originY:Je.originY,overlayX:Je.overlayX,overlayY:Je.overlayY,offsetX:Je.offsetX||this.offsetX,offsetY:Je.offsetY||this.offsetY,panelClass:Je.panelClass||void 0}));return ee.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(Me).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const ee=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(ee),ee}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof hi?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(ee=>{this.backdropClick.emit(ee)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,it.o)(()=>this.positionChange.observers.length>0)).subscribe(ee=>{this.positionChange.emit(ee),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.Y36(bn),H.Y36(H.Rgc),H.Y36(H.s_b),H.Y36(Kn),H.Y36(he.Is,8))},tt.\u0275dir=H.lG2({type:tt,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[H.TTD]}),tt})();const yi={provide:Kn,deps:[bn],useFactory:function Oi(tt){return()=>tt.scrollStrategies.reposition()}};let un=(()=>{class tt{}return tt.\u0275fac=function(ee){return new(ee||tt)},tt.\u0275mod=H.oAB({type:tt}),tt.\u0275inj=H.cJS({providers:[bn,yi],imports:[he.vT,$e.eL,T.Cl,T.Cl]}),tt})()},3353:(cn,ft,V)=>{"use strict";V.d(ft,{Mq:()=>We,Oy:()=>Dt,_i:()=>je,i$:()=>nt,kV:()=>Tt,qK:()=>Ie,sA:()=>Xt,t4:()=>g});var T=V(4650),l=V(6895);let H;try{H=typeof Intl<"u"&&Intl.v8BreakIterator}catch{H=!1}let he,g=(()=>{class Oe{constructor(Ot){this._platformId=Ot,this.isBrowser=this._platformId?(0,l.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!H)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Oe.\u0275fac=function(Ot){return new(Ot||Oe)(T.LFG(T.Lbi))},Oe.\u0275prov=T.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})();const $e=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Ie(){if(he)return he;if("object"!=typeof document||!document)return he=new Set($e),he;let Oe=document.createElement("input");return he=new Set($e.filter(Ne=>(Oe.setAttribute("type",Ne),Oe.type===Ne))),he}let Be,Re,it,Ct;function nt(Oe){return function Ue(){if(null==Be&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Be=!0}))}finally{Be=Be||!1}return Be}()?Oe:!!Oe.capture}function We(){if(null==it){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return it=!1,it;if("scrollBehavior"in document.documentElement.style)it=!0;else{const Oe=Element.prototype.scrollTo;it=!!Oe&&!/\{\s*\[native code\]\s*\}/.test(Oe.toString())}}return it}function je(){if("object"!=typeof document||!document)return 0;if(null==Re){const Oe=document.createElement("div"),Ne=Oe.style;Oe.dir="rtl",Ne.width="1px",Ne.overflow="auto",Ne.visibility="hidden",Ne.pointerEvents="none",Ne.position="absolute";const Ot=document.createElement("div"),kt=Ot.style;kt.width="2px",kt.height="1px",Oe.appendChild(Ot),document.body.appendChild(Oe),Re=0,0===Oe.scrollLeft&&(Oe.scrollLeft=1,Re=0===Oe.scrollLeft?1:2),Oe.remove()}return Re}function Tt(Oe){if(function wt(){if(null==Ct){const Oe=typeof document<"u"?document.head:null;Ct=!(!Oe||!Oe.createShadowRoot&&!Oe.attachShadow)}return Ct}()){const Ne=Oe.getRootNode?Oe.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&Ne instanceof ShadowRoot)return Ne}return null}function Xt(Oe){return Oe.composedPath?Oe.composedPath()[0]:Oe.target}function Dt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},4080:(cn,ft,V)=>{"use strict";V.d(ft,{C5:()=>Be,UE:()=>Ue,bH:()=>wt,eL:()=>Xt,ig:()=>Ct,u0:()=>We});var T=V(4650);class Ie{attach(Ne){return this._attachedHost=Ne,Ne.attach(this)}detach(){let Ne=this._attachedHost;null!=Ne&&(this._attachedHost=null,Ne.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(Ne){this._attachedHost=Ne}}class Be extends Ie{constructor(Ne,Ot,kt,Ft){super(),this.component=Ne,this.viewContainerRef=Ot,this.injector=kt,this.componentFactoryResolver=Ft}}class Ue extends Ie{constructor(Ne,Ot,kt,Ft){super(),this.templateRef=Ne,this.viewContainerRef=Ot,this.context=kt,this.injector=Ft}get origin(){return this.templateRef.elementRef}attach(Ne,Ot=this.context){return this.context=Ot,super.attach(Ne)}detach(){return this.context=void 0,super.detach()}}class nt extends Ie{constructor(Ne){super(),this.element=Ne instanceof T.SBq?Ne.nativeElement:Ne}}class We extends class Re{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(Ne){return Ne instanceof Be?(this._attachedPortal=Ne,this.attachComponentPortal(Ne)):Ne instanceof Ue?(this._attachedPortal=Ne,this.attachTemplatePortal(Ne)):this.attachDomPortal&&Ne instanceof nt?(this._attachedPortal=Ne,this.attachDomPortal(Ne)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(Ne){this._disposeFn=Ne}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(Ne,Ot,kt,Ft,Gt){super(),this.outletElement=Ne,this._componentFactoryResolver=Ot,this._appRef=kt,this._defaultInjector=Ft,this.attachDomPortal=lt=>{const dt=lt.element,St=this._document.createComment("dom-portal");dt.parentNode.insertBefore(St,dt),this.outletElement.appendChild(dt),this._attachedPortal=lt,super.setDisposeFn(()=>{St.parentNode&&St.parentNode.replaceChild(dt,St)})},this._document=Gt}attachComponentPortal(Ne){const kt=(Ne.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Ne.component);let Ft;return Ne.viewContainerRef?(Ft=Ne.viewContainerRef.createComponent(kt,Ne.viewContainerRef.length,Ne.injector||Ne.viewContainerRef.injector),this.setDisposeFn(()=>Ft.destroy())):(Ft=kt.create(Ne.injector||this._defaultInjector||T.zs3.NULL),this._appRef.attachView(Ft.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(Ft.hostView),Ft.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Ft)),this._attachedPortal=Ne,Ft}attachTemplatePortal(Ne){let Ot=Ne.viewContainerRef,kt=Ot.createEmbeddedView(Ne.templateRef,Ne.context,{injector:Ne.injector});return kt.rootNodes.forEach(Ft=>this.outletElement.appendChild(Ft)),kt.detectChanges(),this.setDisposeFn(()=>{let Ft=Ot.indexOf(kt);-1!==Ft&&Ot.remove(Ft)}),this._attachedPortal=Ne,kt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(Ne){return Ne.hostView.rootNodes[0]}}let Ct=(()=>{class Oe extends Ue{constructor(Ot,kt){super(Ot,kt)}}return Oe.\u0275fac=function(Ot){return new(Ot||Oe)(T.Y36(T.Rgc),T.Y36(T.s_b))},Oe.\u0275dir=T.lG2({type:Oe,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[T.qOj]}),Oe})(),wt=(()=>{class Oe extends Ct{}return Oe.\u0275fac=function(){let Ne;return function(kt){return(Ne||(Ne=T.n5z(Oe)))(kt||Oe)}}(),Oe.\u0275dir=T.lG2({type:Oe,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[T._Bn([{provide:Ct,useExisting:Oe}]),T.qOj]}),Oe})(),Xt=(()=>{class Oe{}return Oe.\u0275fac=function(Ot){return new(Ot||Oe)},Oe.\u0275mod=T.oAB({type:Oe}),Oe.\u0275inj=T.cJS({}),Oe})()},8605:(cn,ft,V)=>{"use strict";V.d(ft,{PQ:()=>Un,ZD:()=>Je,mF:()=>bn,Cl:()=>ue,rL:()=>hi});var T=V(1281),l=V(4650),H=V(7579),g=V(9646),He=V(9751),he=V(4968),$e=V(4408),Ie=V(727);const Be={schedule(fe){let le=requestAnimationFrame,de=cancelAnimationFrame;const{delegate:Ae}=Be;Ae&&(le=Ae.requestAnimationFrame,de=Ae.cancelAnimationFrame);const ut=le(mt=>{de=void 0,fe(mt)});return new Ie.w0(()=>de?.(ut))},requestAnimationFrame(...fe){const{delegate:le}=Be;return(le?.requestAnimationFrame||requestAnimationFrame)(...fe)},cancelAnimationFrame(...fe){const{delegate:le}=Be;return(le?.cancelAnimationFrame||cancelAnimationFrame)(...fe)},delegate:void 0};var nt=V(7565);new class Re extends nt.v{flush(le){this._active=!0;const de=this._scheduled;this._scheduled=void 0;const{actions:Ae}=this;let ut;le=le||Ae.shift();do{if(ut=le.execute(le.state,le.delay))break}while((le=Ae[0])&&le.id===de&&Ae.shift());if(this._active=!1,ut){for(;(le=Ae[0])&&le.id===de&&Ae.shift();)le.unsubscribe();throw ut}}}(class Ue extends $e.o{constructor(le,de){super(le,de),this.scheduler=le,this.work=de}requestAsyncId(le,de,Ae=0){return null!==Ae&&Ae>0?super.requestAsyncId(le,de,Ae):(le.actions.push(this),le._scheduled||(le._scheduled=Be.requestAnimationFrame(()=>le.flush(void 0))))}recycleAsyncId(le,de,Ae=0){var ut;if(null!=Ae?Ae>0:this.delay>0)return super.recycleAsyncId(le,de,Ae);const{actions:mt}=le;null!=de&&(null===(ut=mt[mt.length-1])||void 0===ut?void 0:ut.id)!==de&&(Be.cancelAnimationFrame(de),le._scheduled=void 0)}});let Ct,je=1;const wt={};function Tt(fe){return fe in wt&&(delete wt[fe],!0)}const an={setImmediate(fe){const le=je++;return wt[le]=!0,Ct||(Ct=Promise.resolve()),Ct.then(()=>Tt(le)&&fe()),le},clearImmediate(fe){Tt(fe)}},{setImmediate:Dt,clearImmediate:Oe}=an,Ne={setImmediate(...fe){const{delegate:le}=Ne;return(le?.setImmediate||Dt)(...fe)},clearImmediate(fe){const{delegate:le}=Ne;return(le?.clearImmediate||Oe)(fe)},delegate:void 0};new class kt extends nt.v{flush(le){this._active=!0;const de=this._scheduled;this._scheduled=void 0;const{actions:Ae}=this;let ut;le=le||Ae.shift();do{if(ut=le.execute(le.state,le.delay))break}while((le=Ae[0])&&le.id===de&&Ae.shift());if(this._active=!1,ut){for(;(le=Ae[0])&&le.id===de&&Ae.shift();)le.unsubscribe();throw ut}}}(class Ot extends $e.o{constructor(le,de){super(le,de),this.scheduler=le,this.work=de}requestAsyncId(le,de,Ae=0){return null!==Ae&&Ae>0?super.requestAsyncId(le,de,Ae):(le.actions.push(this),le._scheduled||(le._scheduled=Ne.setImmediate(le.flush.bind(le,void 0))))}recycleAsyncId(le,de,Ae=0){var ut;if(null!=Ae?Ae>0:this.delay>0)return super.recycleAsyncId(le,de,Ae);const{actions:mt}=le;null!=de&&(null===(ut=mt[mt.length-1])||void 0===ut?void 0:ut.id)!==de&&(Ne.clearImmediate(de),le._scheduled=void 0)}});var lt=V(4986),dt=V(4482),St=V(8421),Et=V(5403),Qt=V(5963);function On(fe,le=lt.z){return function tn(fe){return(0,dt.e)((le,de)=>{let Ae=!1,ut=null,mt=null,dn=!1;const Vt=()=>{if(mt?.unsubscribe(),mt=null,Ae){Ae=!1;const fn=ut;ut=null,de.next(fn)}dn&&de.complete()},mn=()=>{mt=null,dn&&de.complete()};le.subscribe((0,Et.x)(de,fn=>{Ae=!0,ut=fn,mt||(0,St.Xf)(fe(fn)).subscribe(mt=(0,Et.x)(de,Vt,mn))},()=>{dn=!0,(!Ae||!mt||mt.closed)&&de.complete()}))})}(()=>(0,Qt.H)(fe,le))}var Xn=V(9300),mi=V(2722),nn=V(3353),gi=V(6895),Qn=V(445);let bn=(()=>{class fe{constructor(de,Ae,ut){this._ngZone=de,this._platform=Ae,this._scrolled=new H.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=ut}register(de){this.scrollContainers.has(de)||this.scrollContainers.set(de,de.elementScrolled().subscribe(()=>this._scrolled.next(de)))}deregister(de){const Ae=this.scrollContainers.get(de);Ae&&(Ae.unsubscribe(),this.scrollContainers.delete(de))}scrolled(de=20){return this._platform.isBrowser?new He.y(Ae=>{this._globalSubscription||this._addGlobalListener();const ut=de>0?this._scrolled.pipe(On(de)).subscribe(Ae):this._scrolled.subscribe(Ae);return this._scrolledCount++,()=>{ut.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,g.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((de,Ae)=>this.deregister(Ae)),this._scrolled.complete()}ancestorScrolled(de,Ae){const ut=this.getAncestorScrollContainers(de);return this.scrolled(Ae).pipe((0,Xn.h)(mt=>!mt||ut.indexOf(mt)>-1))}getAncestorScrollContainers(de){const Ae=[];return this.scrollContainers.forEach((ut,mt)=>{this._scrollableContainsElement(mt,de)&&Ae.push(mt)}),Ae}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(de,Ae){let ut=(0,T.fI)(Ae),mt=de.getElementRef().nativeElement;do{if(ut==mt)return!0}while(ut=ut.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const de=this._getWindow();return(0,he.R)(de.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return fe.\u0275fac=function(de){return new(de||fe)(l.LFG(l.R0b),l.LFG(nn.t4),l.LFG(gi.K0,8))},fe.\u0275prov=l.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})(),Un=(()=>{class fe{constructor(de,Ae,ut,mt){this.elementRef=de,this.scrollDispatcher=Ae,this.ngZone=ut,this.dir=mt,this._destroyed=new H.x,this._elementScrolled=new He.y(dn=>this.ngZone.runOutsideAngular(()=>(0,he.R)(this.elementRef.nativeElement,"scroll").pipe((0,mi.R)(this._destroyed)).subscribe(dn)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(de){const Ae=this.elementRef.nativeElement,ut=this.dir&&"rtl"==this.dir.value;null==de.left&&(de.left=ut?de.end:de.start),null==de.right&&(de.right=ut?de.start:de.end),null!=de.bottom&&(de.top=Ae.scrollHeight-Ae.clientHeight-de.bottom),ut&&0!=(0,nn._i)()?(null!=de.left&&(de.right=Ae.scrollWidth-Ae.clientWidth-de.left),2==(0,nn._i)()?de.left=de.right:1==(0,nn._i)()&&(de.left=de.right?-de.right:de.right)):null!=de.right&&(de.left=Ae.scrollWidth-Ae.clientWidth-de.right),this._applyScrollToOptions(de)}_applyScrollToOptions(de){const Ae=this.elementRef.nativeElement;(0,nn.Mq)()?Ae.scrollTo(de):(null!=de.top&&(Ae.scrollTop=de.top),null!=de.left&&(Ae.scrollLeft=de.left))}measureScrollOffset(de){const Ae="left",mt=this.elementRef.nativeElement;if("top"==de)return mt.scrollTop;if("bottom"==de)return mt.scrollHeight-mt.clientHeight-mt.scrollTop;const dn=this.dir&&"rtl"==this.dir.value;return"start"==de?de=dn?"right":Ae:"end"==de&&(de=dn?Ae:"right"),dn&&2==(0,nn._i)()?de==Ae?mt.scrollWidth-mt.clientWidth-mt.scrollLeft:mt.scrollLeft:dn&&1==(0,nn._i)()?de==Ae?mt.scrollLeft+mt.scrollWidth-mt.clientWidth:-mt.scrollLeft:de==Ae?mt.scrollLeft:mt.scrollWidth-mt.clientWidth-mt.scrollLeft}}return fe.\u0275fac=function(de){return new(de||fe)(l.Y36(l.SBq),l.Y36(bn),l.Y36(l.R0b),l.Y36(Qn.Is,8))},fe.\u0275dir=l.lG2({type:fe,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),fe})(),hi=(()=>{class fe{constructor(de,Ae,ut){this._platform=de,this._change=new H.x,this._changeListener=mt=>{this._change.next(mt)},this._document=ut,Ae.runOutsideAngular(()=>{if(de.isBrowser){const mt=this._getWindow();mt.addEventListener("resize",this._changeListener),mt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const de=this._getWindow();de.removeEventListener("resize",this._changeListener),de.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const de={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),de}getViewportRect(){const de=this.getViewportScrollPosition(),{width:Ae,height:ut}=this.getViewportSize();return{top:de.top,left:de.left,bottom:de.top+ut,right:de.left+Ae,height:ut,width:Ae}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const de=this._document,Ae=this._getWindow(),ut=de.documentElement,mt=ut.getBoundingClientRect();return{top:-mt.top||de.body.scrollTop||Ae.scrollY||ut.scrollTop||0,left:-mt.left||de.body.scrollLeft||Ae.scrollX||ut.scrollLeft||0}}change(de=20){return de>0?this._change.pipe(On(de)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const de=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:de.innerWidth,height:de.innerHeight}:{width:0,height:0}}}return fe.\u0275fac=function(de){return new(de||fe)(l.LFG(nn.t4),l.LFG(l.R0b),l.LFG(gi.K0,8))},fe.\u0275prov=l.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})(),Je=(()=>{class fe{}return fe.\u0275fac=function(de){return new(de||fe)},fe.\u0275mod=l.oAB({type:fe}),fe.\u0275inj=l.cJS({}),fe})(),ue=(()=>{class fe{}return fe.\u0275fac=function(de){return new(de||fe)},fe.\u0275mod=l.oAB({type:fe}),fe.\u0275inj=l.cJS({imports:[Qn.vT,Je,Qn.vT,Je]}),fe})()},6895:(cn,ft,V)=>{"use strict";V.d(ft,{Do:()=>Xt,ED:()=>fs,EM:()=>Za,HT:()=>He,JF:()=>vs,K0:()=>$e,Mx:()=>Er,NF:()=>ys,O5:()=>Gn,Ov:()=>Aa,PC:()=>ts,RF:()=>$s,S$:()=>wt,V_:()=>Ue,Ye:()=>Dt,b0:()=>an,bD:()=>_s,ez:()=>Ys,mk:()=>xi,n9:()=>Gs,q:()=>H,sg:()=>$r,tP:()=>ha,w_:()=>he});var T=V(4650);let l=null;function H(){return l}function He(U){l||(l=U)}class he{}const $e=new T.OlP("DocumentToken");let Ie=(()=>{class U{historyGo(q){throw new Error("Not implemented")}}return U.\u0275fac=function(q){return new(q||U)},U.\u0275prov=T.Yz7({token:U,factory:function(){return function Be(){return(0,T.LFG)(nt)}()},providedIn:"platform"}),U})();const Ue=new T.OlP("Location Initialized");let nt=(()=>{class U extends Ie{constructor(q){super(),this._doc=q,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(q){const be=H().getGlobalEventTarget(this._doc,"window");return be.addEventListener("popstate",q,!1),()=>be.removeEventListener("popstate",q)}onHashChange(q){const be=H().getGlobalEventTarget(this._doc,"window");return be.addEventListener("hashchange",q,!1),()=>be.removeEventListener("hashchange",q)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(q){this.location.pathname=q}pushState(q,be,Qe){Re()?this._history.pushState(q,be,Qe):this.location.hash=Qe}replaceState(q,be,Qe){Re()?this._history.replaceState(q,be,Qe):this.location.hash=Qe}forward(){this._history.forward()}back(){this._history.back()}historyGo(q=0){this._history.go(q)}getState(){return this._history.state}}return U.\u0275fac=function(q){return new(q||U)(T.LFG($e))},U.\u0275prov=T.Yz7({token:U,factory:function(){return function it(){return new nt((0,T.LFG)($e))}()},providedIn:"platform"}),U})();function Re(){return!!window.history.pushState}function We(U,oe){if(0==U.length)return oe;if(0==oe.length)return U;let q=0;return U.endsWith("/")&&q++,oe.startsWith("/")&&q++,2==q?U+oe.substring(1):1==q?U+oe:U+"/"+oe}function je(U){const oe=U.match(/#|\?|$/),q=oe&&oe.index||U.length;return U.slice(0,q-("/"===U[q-1]?1:0))+U.slice(q)}function Ct(U){return U&&"?"!==U[0]?"?"+U:U}let wt=(()=>{class U{historyGo(q){throw new Error("Not implemented")}}return U.\u0275fac=function(q){return new(q||U)},U.\u0275prov=T.Yz7({token:U,factory:function(){return(0,T.f3M)(an)},providedIn:"root"}),U})();const Tt=new T.OlP("appBaseHref");let an=(()=>{class U extends wt{constructor(q,be){super(),this._platformLocation=q,this._removeListenerFns=[],this._baseHref=be??this._platformLocation.getBaseHrefFromDOM()??(0,T.f3M)($e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}prepareExternalUrl(q){return We(this._baseHref,q)}path(q=!1){const be=this._platformLocation.pathname+Ct(this._platformLocation.search),Qe=this._platformLocation.hash;return Qe&&q?`${be}${Qe}`:be}pushState(q,be,Qe,Mt){const jt=this.prepareExternalUrl(Qe+Ct(Mt));this._platformLocation.pushState(q,be,jt)}replaceState(q,be,Qe,Mt){const jt=this.prepareExternalUrl(Qe+Ct(Mt));this._platformLocation.replaceState(q,be,jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(q=0){this._platformLocation.historyGo?.(q)}}return U.\u0275fac=function(q){return new(q||U)(T.LFG(Ie),T.LFG(Tt,8))},U.\u0275prov=T.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})(),Xt=(()=>{class U extends wt{constructor(q,be){super(),this._platformLocation=q,this._baseHref="",this._removeListenerFns=[],null!=be&&(this._baseHref=be)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}path(q=!1){let be=this._platformLocation.hash;return null==be&&(be="#"),be.length>0?be.substring(1):be}prepareExternalUrl(q){const be=We(this._baseHref,q);return be.length>0?"#"+be:be}pushState(q,be,Qe,Mt){let jt=this.prepareExternalUrl(Qe+Ct(Mt));0==jt.length&&(jt=this._platformLocation.pathname),this._platformLocation.pushState(q,be,jt)}replaceState(q,be,Qe,Mt){let jt=this.prepareExternalUrl(Qe+Ct(Mt));0==jt.length&&(jt=this._platformLocation.pathname),this._platformLocation.replaceState(q,be,jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(q=0){this._platformLocation.historyGo?.(q)}}return U.\u0275fac=function(q){return new(q||U)(T.LFG(Ie),T.LFG(Tt,8))},U.\u0275prov=T.Yz7({token:U,factory:U.\u0275fac}),U})(),Dt=(()=>{class U{constructor(q){this._subject=new T.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=q;const be=this._locationStrategy.getBaseHref();this._baseHref=je(Ot(be)),this._locationStrategy.onPopState(Qe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Qe.state,type:Qe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(q=!1){return this.normalize(this._locationStrategy.path(q))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(q,be=""){return this.path()==this.normalize(q+Ct(be))}normalize(q){return U.stripTrailingSlash(function Ne(U,oe){return U&&oe.startsWith(U)?oe.substring(U.length):oe}(this._baseHref,Ot(q)))}prepareExternalUrl(q){return q&&"/"!==q[0]&&(q="/"+q),this._locationStrategy.prepareExternalUrl(q)}go(q,be="",Qe=null){this._locationStrategy.pushState(Qe,"",q,be),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+Ct(be)),Qe)}replaceState(q,be="",Qe=null){this._locationStrategy.replaceState(Qe,"",q,be),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+Ct(be)),Qe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(q=0){this._locationStrategy.historyGo?.(q)}onUrlChange(q){return this._urlChangeListeners.push(q),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(be=>{this._notifyUrlChangeListeners(be.url,be.state)})),()=>{const be=this._urlChangeListeners.indexOf(q);this._urlChangeListeners.splice(be,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(q="",be){this._urlChangeListeners.forEach(Qe=>Qe(q,be))}subscribe(q,be,Qe){return this._subject.subscribe({next:q,error:be,complete:Qe})}}return U.normalizeQueryParams=Ct,U.joinWithSlash=We,U.stripTrailingSlash=je,U.\u0275fac=function(q){return new(q||U)(T.LFG(wt))},U.\u0275prov=T.Yz7({token:U,factory:function(){return function Oe(){return new Dt((0,T.LFG)(wt))}()},providedIn:"root"}),U})();function Ot(U){return U.replace(/\/index.html$/,"")}function Er(U,oe){oe=encodeURIComponent(oe);for(const q of U.split(";")){const be=q.indexOf("="),[Qe,Mt]=-1==be?[q,""]:[q.slice(0,be),q.slice(be+1)];if(Qe.trim()===oe)return decodeURIComponent(Mt)}return null}let xi=(()=>{class U{constructor(q,be,Qe,Mt){this._iterableDiffers=q,this._keyValueDiffers=be,this._ngEl=Qe,this._renderer=Mt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(q){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof q?q.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(q){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof q?q.split(/\s+/):q,this._rawClass&&((0,T.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const q=this._iterableDiffer.diff(this._rawClass);q&&this._applyIterableChanges(q)}else if(this._keyValueDiffer){const q=this._keyValueDiffer.diff(this._rawClass);q&&this._applyKeyValueChanges(q)}}_applyKeyValueChanges(q){q.forEachAddedItem(be=>this._toggleClass(be.key,be.currentValue)),q.forEachChangedItem(be=>this._toggleClass(be.key,be.currentValue)),q.forEachRemovedItem(be=>{be.previousValue&&this._toggleClass(be.key,!1)})}_applyIterableChanges(q){q.forEachAddedItem(be=>{if("string"!=typeof be.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,T.AaK)(be.item)}`);this._toggleClass(be.item,!0)}),q.forEachRemovedItem(be=>this._toggleClass(be.item,!1))}_applyClasses(q){q&&(Array.isArray(q)||q instanceof Set?q.forEach(be=>this._toggleClass(be,!0)):Object.keys(q).forEach(be=>this._toggleClass(be,!!q[be])))}_removeClasses(q){q&&(Array.isArray(q)||q instanceof Set?q.forEach(be=>this._toggleClass(be,!1)):Object.keys(q).forEach(be=>this._toggleClass(be,!1)))}_toggleClass(q,be){(q=q.trim())&&q.split(/\s+/g).forEach(Qe=>{be?this._renderer.addClass(this._ngEl.nativeElement,Qe):this._renderer.removeClass(this._ngEl.nativeElement,Qe)})}}return U.\u0275fac=function(q){return new(q||U)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},U.\u0275dir=T.lG2({type:U,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),U})();class ki{constructor(oe,q,be,Qe){this.$implicit=oe,this.ngForOf=q,this.index=be,this.count=Qe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $r=(()=>{class U{constructor(q,be,Qe){this._viewContainer=q,this._template=be,this._differs=Qe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(q){this._ngForOf=q,this._ngForOfDirty=!0}set ngForTrackBy(q){this._trackByFn=q}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(q){q&&(this._template=q)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const q=this._ngForOf;!this._differ&&q&&(this._differ=this._differs.find(q).create(this.ngForTrackBy))}if(this._differ){const q=this._differ.diff(this._ngForOf);q&&this._applyChanges(q)}}_applyChanges(q){const be=this._viewContainer;q.forEachOperation((Qe,Mt,jt)=>{if(null==Qe.previousIndex)be.createEmbeddedView(this._template,new ki(Qe.item,this._ngForOf,-1,-1),null===jt?void 0:jt);else if(null==jt)be.remove(null===Mt?void 0:Mt);else if(null!==Mt){const Fn=be.get(Mt);be.move(Fn,jt),Or(Fn,Qe)}});for(let Qe=0,Mt=be.length;Qe<Mt;Qe++){const Fn=be.get(Qe).context;Fn.index=Qe,Fn.count=Mt,Fn.ngForOf=this._ngForOf}q.forEachIdentityChange(Qe=>{Or(be.get(Qe.currentIndex),Qe)})}static ngTemplateContextGuard(q,be){return!0}}return U.\u0275fac=function(q){return new(q||U)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},U.\u0275dir=T.lG2({type:U,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),U})();function Or(U,oe){U.context.$implicit=oe.item}let Gn=(()=>{class U{constructor(q,be){this._viewContainer=q,this._context=new ur,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=be}set ngIf(q){this._context.$implicit=this._context.ngIf=q,this._updateView()}set ngIfThen(q){dr("ngIfThen",q),this._thenTemplateRef=q,this._thenViewRef=null,this._updateView()}set ngIfElse(q){dr("ngIfElse",q),this._elseTemplateRef=q,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(q,be){return!0}}return U.\u0275fac=function(q){return new(q||U)(T.Y36(T.s_b),T.Y36(T.Rgc))},U.\u0275dir=T.lG2({type:U,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),U})();class ur{constructor(){this.$implicit=null,this.ngIf=null}}function dr(U,oe){if(oe&&!oe.createEmbeddedView)throw new Error(`${U} must be a TemplateRef, but received '${(0,T.AaK)(oe)}'.`)}class wr{constructor(oe,q){this._viewContainerRef=oe,this._templateRef=q,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(oe){oe&&!this._created?this.create():!oe&&this._created&&this.destroy()}}let $s=(()=>{class U{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(q){this._ngSwitch=q,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(q){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(q)}_matchCase(q){const be=q==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||be,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),be}_updateDefaultCases(q){if(this._defaultViews&&q!==this._defaultUsed){this._defaultUsed=q;for(let be=0;be<this._defaultViews.length;be++)this._defaultViews[be].enforceState(q)}}}return U.\u0275fac=function(q){return new(q||U)},U.\u0275dir=T.lG2({type:U,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),U})(),Gs=(()=>{class U{constructor(q,be,Qe){this.ngSwitch=Qe,Qe._addCase(),this._view=new wr(q,be)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return U.\u0275fac=function(q){return new(q||U)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36($s,9))},U.\u0275dir=T.lG2({type:U,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),U})(),fs=(()=>{class U{constructor(q,be,Qe){Qe._addDefault(new wr(q,be))}}return U.\u0275fac=function(q){return new(q||U)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36($s,9))},U.\u0275dir=T.lG2({type:U,selectors:[["","ngSwitchDefault",""]],standalone:!0}),U})(),ts=(()=>{class U{constructor(q,be,Qe){this._ngEl=q,this._differs=be,this._renderer=Qe,this._ngStyle=null,this._differ=null}set ngStyle(q){this._ngStyle=q,!this._differ&&q&&(this._differ=this._differs.find(q).create())}ngDoCheck(){if(this._differ){const q=this._differ.diff(this._ngStyle);q&&this._applyChanges(q)}}_setStyle(q,be){const[Qe,Mt]=q.split("."),jt=-1===Qe.indexOf("-")?void 0:T.JOm.DashCase;null!=be?this._renderer.setStyle(this._ngEl.nativeElement,Qe,Mt?`${be}${Mt}`:be,jt):this._renderer.removeStyle(this._ngEl.nativeElement,Qe,jt)}_applyChanges(q){q.forEachRemovedItem(be=>this._setStyle(be.key,null)),q.forEachAddedItem(be=>this._setStyle(be.key,be.currentValue)),q.forEachChangedItem(be=>this._setStyle(be.key,be.currentValue))}}return U.\u0275fac=function(q){return new(q||U)(T.Y36(T.SBq),T.Y36(T.aQg),T.Y36(T.Qsj))},U.\u0275dir=T.lG2({type:U,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),U})(),ha=(()=>{class U{constructor(q){this._viewContainerRef=q,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(q){if(q.ngTemplateOutlet||q.ngTemplateOutletInjector){const be=this._viewContainerRef;if(this._viewRef&&be.remove(be.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Qe,ngTemplateOutletContext:Mt,ngTemplateOutletInjector:jt}=this;this._viewRef=be.createEmbeddedView(Qe,Mt,jt?{injector:jt}:void 0)}else this._viewRef=null}else this._viewRef&&q.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return U.\u0275fac=function(q){return new(q||U)(T.Y36(T.s_b))},U.\u0275dir=T.lG2({type:U,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[T.TTD]}),U})();class Pl{createSubscription(oe,q){return oe.subscribe({next:q,error:be=>{throw be}})}dispose(oe){oe.unsubscribe()}}class Ol{createSubscription(oe,q){return oe.then(q,be=>{throw be})}dispose(oe){}}const kl=new Ol,Zs=new Pl;let Aa=(()=>{class U{constructor(q){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=q}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(q){return this._obj?q!==this._obj?(this._dispose(),this.transform(q)):this._latestValue:(q&&this._subscribe(q),this._latestValue)}_subscribe(q){this._obj=q,this._strategy=this._selectStrategy(q),this._subscription=this._strategy.createSubscription(q,be=>this._updateLatestValue(q,be))}_selectStrategy(q){if((0,T.QGY)(q))return kl;if((0,T.F4k)(q))return Zs;throw function so(U,oe){return new T.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(q,be){q===this._obj&&(this._latestValue=be,this._ref.markForCheck())}}return U.\u0275fac=function(q){return new(q||U)(T.Y36(T.sBO,16))},U.\u0275pipe=T.Yjl({name:"async",type:U,pure:!1,standalone:!0}),U})(),Ys=(()=>{class U{}return U.\u0275fac=function(q){return new(q||U)},U.\u0275mod=T.oAB({type:U}),U.\u0275inj=T.cJS({}),U})();const _s="browser";function ys(U){return U===_s}let Za=(()=>{class U{}return U.\u0275prov=(0,T.Yz7)({token:U,providedIn:"root",factory:()=>new Wa((0,T.LFG)($e),window)}),U})();class Wa{constructor(oe,q){this.document=oe,this.window=q,this.offset=()=>[0,0]}setOffset(oe){this.offset=Array.isArray(oe)?()=>oe:oe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(oe){this.supportsScrolling()&&this.window.scrollTo(oe[0],oe[1])}scrollToAnchor(oe){if(!this.supportsScrolling())return;const q=function hr(U,oe){const q=U.getElementById(oe)||U.getElementsByName(oe)[0];if(q)return q;if("function"==typeof U.createTreeWalker&&U.body&&(U.body.createShadowRoot||U.body.attachShadow)){const be=U.createTreeWalker(U.body,NodeFilter.SHOW_ELEMENT);let Qe=be.currentNode;for(;Qe;){const Mt=Qe.shadowRoot;if(Mt){const jt=Mt.getElementById(oe)||Mt.querySelector(`[name="${oe}"]`);if(jt)return jt}Qe=be.nextNode()}}return null}(this.document,oe);q&&(this.scrollToElement(q),q.focus())}setHistoryScrollRestoration(oe){if(this.supportScrollRestoration()){const q=this.window.history;q&&q.scrollRestoration&&(q.scrollRestoration=oe)}}scrollToElement(oe){const q=oe.getBoundingClientRect(),be=q.left+this.window.pageXOffset,Qe=q.top+this.window.pageYOffset,Mt=this.offset();this.window.scrollTo(be-Mt[0],Qe-Mt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const oe=ka(this.window.history)||ka(Object.getPrototypeOf(this.window.history));return!(!oe||!oe.writable&&!oe.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ka(U){return Object.getOwnPropertyDescriptor(U,"scrollRestoration")}class vs{}},529:(cn,ft,V)=>{"use strict";V.d(ft,{JF:()=>ee,eN:()=>Qt});var T=V(6895),l=V(4650),H=V(9646),g=V(9751),He=V(4351),he=V(9300),$e=V(4004);class Ie{}class Be{}class Ue{constructor(fe){this.normalizedNames=new Map,this.lazyUpdate=null,fe?this.lazyInit="string"==typeof fe?()=>{this.headers=new Map,fe.split("\n").forEach(le=>{const de=le.indexOf(":");if(de>0){const Ae=le.slice(0,de),ut=Ae.toLowerCase(),mt=le.slice(de+1).trim();this.maybeSetNormalizedName(Ae,ut),this.headers.has(ut)?this.headers.get(ut).push(mt):this.headers.set(ut,[mt])}})}:()=>{this.headers=new Map,Object.keys(fe).forEach(le=>{let de=fe[le];const Ae=le.toLowerCase();"string"==typeof de&&(de=[de]),de.length>0&&(this.headers.set(Ae,de),this.maybeSetNormalizedName(le,Ae))})}:this.headers=new Map}has(fe){return this.init(),this.headers.has(fe.toLowerCase())}get(fe){this.init();const le=this.headers.get(fe.toLowerCase());return le&&le.length>0?le[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(fe){return this.init(),this.headers.get(fe.toLowerCase())||null}append(fe,le){return this.clone({name:fe,value:le,op:"a"})}set(fe,le){return this.clone({name:fe,value:le,op:"s"})}delete(fe,le){return this.clone({name:fe,value:le,op:"d"})}maybeSetNormalizedName(fe,le){this.normalizedNames.has(le)||this.normalizedNames.set(le,fe)}init(){this.lazyInit&&(this.lazyInit instanceof Ue?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(fe=>this.applyUpdate(fe)),this.lazyUpdate=null))}copyFrom(fe){fe.init(),Array.from(fe.headers.keys()).forEach(le=>{this.headers.set(le,fe.headers.get(le)),this.normalizedNames.set(le,fe.normalizedNames.get(le))})}clone(fe){const le=new Ue;return le.lazyInit=this.lazyInit&&this.lazyInit instanceof Ue?this.lazyInit:this,le.lazyUpdate=(this.lazyUpdate||[]).concat([fe]),le}applyUpdate(fe){const le=fe.name.toLowerCase();switch(fe.op){case"a":case"s":let de=fe.value;if("string"==typeof de&&(de=[de]),0===de.length)return;this.maybeSetNormalizedName(fe.name,le);const Ae=("a"===fe.op?this.headers.get(le):void 0)||[];Ae.push(...de),this.headers.set(le,Ae);break;case"d":const ut=fe.value;if(ut){let mt=this.headers.get(le);if(!mt)return;mt=mt.filter(dn=>-1===ut.indexOf(dn)),0===mt.length?(this.headers.delete(le),this.normalizedNames.delete(le)):this.headers.set(le,mt)}else this.headers.delete(le),this.normalizedNames.delete(le)}}forEach(fe){this.init(),Array.from(this.normalizedNames.keys()).forEach(le=>fe(this.normalizedNames.get(le),this.headers.get(le)))}}class Re{encodeKey(fe){return Ct(fe)}encodeValue(fe){return Ct(fe)}decodeKey(fe){return decodeURIComponent(fe)}decodeValue(fe){return decodeURIComponent(fe)}}const We=/%(\d[a-f0-9])/gi,je={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ct(ue){return encodeURIComponent(ue).replace(We,(fe,le)=>je[le]??fe)}function wt(ue){return`${ue}`}class Tt{constructor(fe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=fe.encoder||new Re,fe.fromString){if(fe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function it(ue,fe){const le=new Map;return ue.length>0&&ue.replace(/^\?/,"").split("&").forEach(Ae=>{const ut=Ae.indexOf("="),[mt,dn]=-1==ut?[fe.decodeKey(Ae),""]:[fe.decodeKey(Ae.slice(0,ut)),fe.decodeValue(Ae.slice(ut+1))],Vt=le.get(mt)||[];Vt.push(dn),le.set(mt,Vt)}),le}(fe.fromString,this.encoder)}else fe.fromObject?(this.map=new Map,Object.keys(fe.fromObject).forEach(le=>{const de=fe.fromObject[le],Ae=Array.isArray(de)?de.map(wt):[wt(de)];this.map.set(le,Ae)})):this.map=null}has(fe){return this.init(),this.map.has(fe)}get(fe){this.init();const le=this.map.get(fe);return le?le[0]:null}getAll(fe){return this.init(),this.map.get(fe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(fe,le){return this.clone({param:fe,value:le,op:"a"})}appendAll(fe){const le=[];return Object.keys(fe).forEach(de=>{const Ae=fe[de];Array.isArray(Ae)?Ae.forEach(ut=>{le.push({param:de,value:ut,op:"a"})}):le.push({param:de,value:Ae,op:"a"})}),this.clone(le)}set(fe,le){return this.clone({param:fe,value:le,op:"s"})}delete(fe,le){return this.clone({param:fe,value:le,op:"d"})}toString(){return this.init(),this.keys().map(fe=>{const le=this.encoder.encodeKey(fe);return this.map.get(fe).map(de=>le+"="+this.encoder.encodeValue(de)).join("&")}).filter(fe=>""!==fe).join("&")}clone(fe){const le=new Tt({encoder:this.encoder});return le.cloneFrom=this.cloneFrom||this,le.updates=(this.updates||[]).concat(fe),le}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(fe=>this.map.set(fe,this.cloneFrom.map.get(fe))),this.updates.forEach(fe=>{switch(fe.op){case"a":case"s":const le=("a"===fe.op?this.map.get(fe.param):void 0)||[];le.push(wt(fe.value)),this.map.set(fe.param,le);break;case"d":if(void 0===fe.value){this.map.delete(fe.param);break}{let de=this.map.get(fe.param)||[];const Ae=de.indexOf(wt(fe.value));-1!==Ae&&de.splice(Ae,1),de.length>0?this.map.set(fe.param,de):this.map.delete(fe.param)}}}),this.cloneFrom=this.updates=null)}}class Xt{constructor(){this.map=new Map}set(fe,le){return this.map.set(fe,le),this}get(fe){return this.map.has(fe)||this.map.set(fe,fe.defaultValue()),this.map.get(fe)}delete(fe){return this.map.delete(fe),this}has(fe){return this.map.has(fe)}keys(){return this.map.keys()}}function Oe(ue){return typeof ArrayBuffer<"u"&&ue instanceof ArrayBuffer}function Ne(ue){return typeof Blob<"u"&&ue instanceof Blob}function Ot(ue){return typeof FormData<"u"&&ue instanceof FormData}class Ft{constructor(fe,le,de,Ae){let ut;if(this.url=le,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=fe.toUpperCase(),function Dt(ue){switch(ue){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ae?(this.body=void 0!==de?de:null,ut=Ae):ut=de,ut&&(this.reportProgress=!!ut.reportProgress,this.withCredentials=!!ut.withCredentials,ut.responseType&&(this.responseType=ut.responseType),ut.headers&&(this.headers=ut.headers),ut.context&&(this.context=ut.context),ut.params&&(this.params=ut.params)),this.headers||(this.headers=new Ue),this.context||(this.context=new Xt),this.params){const mt=this.params.toString();if(0===mt.length)this.urlWithParams=le;else{const dn=le.indexOf("?");this.urlWithParams=le+(-1===dn?"?":dn<le.length-1?"&":"")+mt}}else this.params=new Tt,this.urlWithParams=le}serializeBody(){return null===this.body?null:Oe(this.body)||Ne(this.body)||Ot(this.body)||function kt(ue){return typeof URLSearchParams<"u"&&ue instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Tt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ot(this.body)?null:Ne(this.body)?this.body.type||null:Oe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Tt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(fe={}){const le=fe.method||this.method,de=fe.url||this.url,Ae=fe.responseType||this.responseType,ut=void 0!==fe.body?fe.body:this.body,mt=void 0!==fe.withCredentials?fe.withCredentials:this.withCredentials,dn=void 0!==fe.reportProgress?fe.reportProgress:this.reportProgress;let Vt=fe.headers||this.headers,mn=fe.params||this.params;const fn=fe.context??this.context;return void 0!==fe.setHeaders&&(Vt=Object.keys(fe.setHeaders).reduce((Vi,Nt)=>Vi.set(Nt,fe.setHeaders[Nt]),Vt)),fe.setParams&&(mn=Object.keys(fe.setParams).reduce((Vi,Nt)=>Vi.set(Nt,fe.setParams[Nt]),mn)),new Ft(le,de,ut,{params:mn,headers:Vt,context:fn,reportProgress:dn,responseType:Ae,withCredentials:mt})}}var Gt=(()=>((Gt=Gt||{})[Gt.Sent=0]="Sent",Gt[Gt.UploadProgress=1]="UploadProgress",Gt[Gt.ResponseHeader=2]="ResponseHeader",Gt[Gt.DownloadProgress=3]="DownloadProgress",Gt[Gt.Response=4]="Response",Gt[Gt.User=5]="User",Gt))();class lt{constructor(fe,le=200,de="OK"){this.headers=fe.headers||new Ue,this.status=void 0!==fe.status?fe.status:le,this.statusText=fe.statusText||de,this.url=fe.url||null,this.ok=this.status>=200&&this.status<300}}class dt extends lt{constructor(fe={}){super(fe),this.type=Gt.ResponseHeader}clone(fe={}){return new dt({headers:fe.headers||this.headers,status:void 0!==fe.status?fe.status:this.status,statusText:fe.statusText||this.statusText,url:fe.url||this.url||void 0})}}class St extends lt{constructor(fe={}){super(fe),this.type=Gt.Response,this.body=void 0!==fe.body?fe.body:null}clone(fe={}){return new St({body:void 0!==fe.body?fe.body:this.body,headers:fe.headers||this.headers,status:void 0!==fe.status?fe.status:this.status,statusText:fe.statusText||this.statusText,url:fe.url||this.url||void 0})}}class Et extends lt{constructor(fe){super(fe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${fe.url||"(unknown url)"}`:`Http failure response for ${fe.url||"(unknown url)"}: ${fe.status} ${fe.statusText}`,this.error=fe.error||null}}function tn(ue,fe){return{body:fe,headers:ue.headers,context:ue.context,observe:ue.observe,params:ue.params,reportProgress:ue.reportProgress,responseType:ue.responseType,withCredentials:ue.withCredentials}}let Qt=(()=>{class ue{constructor(le){this.handler=le}request(le,de,Ae={}){let ut;if(le instanceof Ft)ut=le;else{let Vt,mn;Vt=Ae.headers instanceof Ue?Ae.headers:new Ue(Ae.headers),Ae.params&&(mn=Ae.params instanceof Tt?Ae.params:new Tt({fromObject:Ae.params})),ut=new Ft(le,de,void 0!==Ae.body?Ae.body:null,{headers:Vt,context:Ae.context,params:mn,reportProgress:Ae.reportProgress,responseType:Ae.responseType||"json",withCredentials:Ae.withCredentials})}const mt=(0,H.of)(ut).pipe((0,He.b)(Vt=>this.handler.handle(Vt)));if(le instanceof Ft||"events"===Ae.observe)return mt;const dn=mt.pipe((0,he.h)(Vt=>Vt instanceof St));switch(Ae.observe||"body"){case"body":switch(ut.responseType){case"arraybuffer":return dn.pipe((0,$e.U)(Vt=>{if(null!==Vt.body&&!(Vt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Vt.body}));case"blob":return dn.pipe((0,$e.U)(Vt=>{if(null!==Vt.body&&!(Vt.body instanceof Blob))throw new Error("Response is not a Blob.");return Vt.body}));case"text":return dn.pipe((0,$e.U)(Vt=>{if(null!==Vt.body&&"string"!=typeof Vt.body)throw new Error("Response is not a string.");return Vt.body}));default:return dn.pipe((0,$e.U)(Vt=>Vt.body))}case"response":return dn;default:throw new Error(`Unreachable: unhandled observe type ${Ae.observe}}`)}}delete(le,de={}){return this.request("DELETE",le,de)}get(le,de={}){return this.request("GET",le,de)}head(le,de={}){return this.request("HEAD",le,de)}jsonp(le,de){return this.request("JSONP",le,{params:(new Tt).append(de,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(le,de={}){return this.request("OPTIONS",le,de)}patch(le,de,Ae={}){return this.request("PATCH",le,tn(Ae,de))}post(le,de,Ae={}){return this.request("POST",le,tn(Ae,de))}put(le,de,Ae={}){return this.request("PUT",le,tn(Ae,de))}}return ue.\u0275fac=function(le){return new(le||ue)(l.LFG(Ie))},ue.\u0275prov=l.Yz7({token:ue,factory:ue.\u0275fac}),ue})();class On{constructor(fe,le){this.next=fe,this.interceptor=le}handle(fe){return this.interceptor.intercept(fe,this.next)}}const Xn=new l.OlP("HTTP_INTERCEPTORS");let mi=(()=>{class ue{intercept(le,de){return de.handle(le)}}return ue.\u0275fac=function(le){return new(le||ue)},ue.\u0275prov=l.Yz7({token:ue,factory:ue.\u0275fac}),ue})();const sn=/^\)\]\}',?\n/;let Un=(()=>{class ue{constructor(le){this.xhrFactory=le}handle(le){if("JSONP"===le.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new g.y(de=>{const Ae=this.xhrFactory.build();if(Ae.open(le.method,le.urlWithParams),le.withCredentials&&(Ae.withCredentials=!0),le.headers.forEach((bt,et)=>Ae.setRequestHeader(bt,et.join(","))),le.headers.has("Accept")||Ae.setRequestHeader("Accept","application/json, text/plain, */*"),!le.headers.has("Content-Type")){const bt=le.detectContentTypeHeader();null!==bt&&Ae.setRequestHeader("Content-Type",bt)}if(le.responseType){const bt=le.responseType.toLowerCase();Ae.responseType="json"!==bt?bt:"text"}const ut=le.serializeBody();let mt=null;const dn=()=>{if(null!==mt)return mt;const bt=Ae.statusText||"OK",et=new Ue(Ae.getAllResponseHeaders()),ot=function bn(ue){return"responseURL"in ue&&ue.responseURL?ue.responseURL:/^X-Request-URL:/m.test(ue.getAllResponseHeaders())?ue.getResponseHeader("X-Request-URL"):null}(Ae)||le.url;return mt=new dt({headers:et,status:Ae.status,statusText:bt,url:ot}),mt},Vt=()=>{let{headers:bt,status:et,statusText:ot,url:Fe}=dn(),Se=null;204!==et&&(Se=typeof Ae.response>"u"?Ae.responseText:Ae.response),0===et&&(et=Se?200:0);let Te=et>=200&&et<300;if("json"===le.responseType&&"string"==typeof Se){const J=Se;Se=Se.replace(sn,"");try{Se=""!==Se?JSON.parse(Se):null}catch($){Se=J,Te&&(Te=!1,Se={error:$,text:Se})}}Te?(de.next(new St({body:Se,headers:bt,status:et,statusText:ot,url:Fe||void 0})),de.complete()):de.error(new Et({error:Se,headers:bt,status:et,statusText:ot,url:Fe||void 0}))},mn=bt=>{const{url:et}=dn(),ot=new Et({error:bt,status:Ae.status||0,statusText:Ae.statusText||"Unknown Error",url:et||void 0});de.error(ot)};let fn=!1;const Vi=bt=>{fn||(de.next(dn()),fn=!0);let et={type:Gt.DownloadProgress,loaded:bt.loaded};bt.lengthComputable&&(et.total=bt.total),"text"===le.responseType&&!!Ae.responseText&&(et.partialText=Ae.responseText),de.next(et)},Nt=bt=>{let et={type:Gt.UploadProgress,loaded:bt.loaded};bt.lengthComputable&&(et.total=bt.total),de.next(et)};return Ae.addEventListener("load",Vt),Ae.addEventListener("error",mn),Ae.addEventListener("timeout",mn),Ae.addEventListener("abort",mn),le.reportProgress&&(Ae.addEventListener("progress",Vi),null!==ut&&Ae.upload&&Ae.upload.addEventListener("progress",Nt)),Ae.send(ut),de.next({type:Gt.Sent}),()=>{Ae.removeEventListener("error",mn),Ae.removeEventListener("abort",mn),Ae.removeEventListener("load",Vt),Ae.removeEventListener("timeout",mn),le.reportProgress&&(Ae.removeEventListener("progress",Vi),null!==ut&&Ae.upload&&Ae.upload.removeEventListener("progress",Nt)),Ae.readyState!==Ae.DONE&&Ae.abort()}})}}return ue.\u0275fac=function(le){return new(le||ue)(l.LFG(T.JF))},ue.\u0275prov=l.Yz7({token:ue,factory:ue.\u0275fac}),ue})();const Kn=new l.OlP("XSRF_COOKIE_NAME"),hi=new l.OlP("XSRF_HEADER_NAME");class Fi{}let Oi=(()=>{class ue{constructor(le,de,Ae){this.doc=le,this.platform=de,this.cookieName=Ae,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const le=this.doc.cookie||"";return le!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,T.Mx)(le,this.cookieName),this.lastCookieString=le),this.lastToken}}return ue.\u0275fac=function(le){return new(le||ue)(l.LFG(T.K0),l.LFG(l.Lbi),l.LFG(Kn))},ue.\u0275prov=l.Yz7({token:ue,factory:ue.\u0275fac}),ue})(),yi=(()=>{class ue{constructor(le,de){this.tokenService=le,this.headerName=de}intercept(le,de){const Ae=le.url.toLowerCase();if("GET"===le.method||"HEAD"===le.method||Ae.startsWith("http://")||Ae.startsWith("https://"))return de.handle(le);const ut=this.tokenService.getToken();return null!==ut&&!le.headers.has(this.headerName)&&(le=le.clone({headers:le.headers.set(this.headerName,ut)})),de.handle(le)}}return ue.\u0275fac=function(le){return new(le||ue)(l.LFG(Fi),l.LFG(hi))},ue.\u0275prov=l.Yz7({token:ue,factory:ue.\u0275fac}),ue})(),un=(()=>{class ue{constructor(le,de){this.backend=le,this.injector=de,this.chain=null}handle(le){if(null===this.chain){const de=this.injector.get(Xn,[]);this.chain=de.reduceRight((Ae,ut)=>new On(Ae,ut),this.backend)}return this.chain.handle(le)}}return ue.\u0275fac=function(le){return new(le||ue)(l.LFG(Be),l.LFG(l.zs3))},ue.\u0275prov=l.Yz7({token:ue,factory:ue.\u0275fac}),ue})(),Y=(()=>{class ue{static disable(){return{ngModule:ue,providers:[{provide:yi,useClass:mi}]}}static withOptions(le={}){return{ngModule:ue,providers:[le.cookieName?{provide:Kn,useValue:le.cookieName}:[],le.headerName?{provide:hi,useValue:le.headerName}:[]]}}}return ue.\u0275fac=function(le){return new(le||ue)},ue.\u0275mod=l.oAB({type:ue}),ue.\u0275inj=l.cJS({providers:[yi,{provide:Xn,useExisting:yi,multi:!0},{provide:Fi,useClass:Oi},{provide:Kn,useValue:"XSRF-TOKEN"},{provide:hi,useValue:"X-XSRF-TOKEN"}]}),ue})(),ee=(()=>{class ue{}return ue.\u0275fac=function(le){return new(le||ue)},ue.\u0275mod=l.oAB({type:ue}),ue.\u0275inj=l.cJS({providers:[Qt,{provide:Ie,useClass:un},Un,{provide:Be,useExisting:Un}],imports:[Y.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),ue})()},4650:(cn,ft,V)=>{"use strict";V.d(ft,{$8M:()=>lo,$Z:()=>Li,AFp:()=>s_,ALo:()=>Nv,AaK:()=>Ie,Akn:()=>hl,BQk:()=>ph,CHM:()=>La,CRH:()=>qv,CZH:()=>lm,CqO:()=>ty,D6c:()=>CC,DdM:()=>Iv,EJc:()=>xh,EiD:()=>Bc,EpF:()=>gg,F$t:()=>xg,F4k:()=>yg,FYo:()=>$u,FiY:()=>uo,G48:()=>Di,Gf:()=>Zv,GfV:()=>Wc,GkF:()=>Wf,Gpc:()=>nt,Gre:()=>Mg,Hsn:()=>sy,Ikx:()=>Sg,JOm:()=>wa,JVY:()=>_m,Jf7:()=>mf,KtG:()=>Pi,L6k:()=>Ih,LAX:()=>vd,LFG:()=>or,LSH:()=>zu,Lbi:()=>Fw,Lck:()=>Vg,MAs:()=>J_,MMx:()=>Cv,NdJ:()=>vg,O4$:()=>Fn,OlP:()=>$i,Oqu:()=>Dg,PXZ:()=>Yw,Q6J:()=>Gf,QGY:()=>_g,QP$:()=>at,QbO:()=>um,Qsj:()=>Pm,R0b:()=>Tl,RDi:()=>fm,Rgc:()=>Ip,SBq:()=>Hu,Sil:()=>Vw,Suo:()=>Wv,TTD:()=>ms,TgZ:()=>dh,Tol:()=>Kf,Udp:()=>wg,VKq:()=>Mp,WFA:()=>bg,WLB:()=>Av,XFs:()=>un,Xpm:()=>Fe,Xts:()=>Uu,Y36:()=>qr,YKP:()=>zg,YNc:()=>X_,Yjl:()=>rt,Yz7:()=>ln,Z0I:()=>en,ZZ4:()=>Qw,_Bn:()=>xv,_UZ:()=>hh,_Vd:()=>cu,_c5:()=>xC,_uU:()=>Py,aQg:()=>e1,c2e:()=>Nw,cJS:()=>gt,cg1:()=>Ig,d8E:()=>Tg,dDg:()=>rC,dqk:()=>Ae,eBb:()=>jp,eFA:()=>c,ekj:()=>Cg,eoX:()=>D0,f3M:()=>na,g9A:()=>cm,h0i:()=>yh,hGG:()=>wC,hij:()=>Xf,iGM:()=>Gv,ifc:()=>de,ip1:()=>hd,jDz:()=>jg,kEZ:()=>Pv,kL8:()=>Jy,kcU:()=>ci,lG2:()=>ke,lcZ:()=>Bv,lqb:()=>Hc,lri:()=>Sc,mCW:()=>xd,n5z:()=>Zn,n_E:()=>im,oAB:()=>$,oJD:()=>kh,oxw:()=>oy,pB0:()=>Lu,q3G:()=>ho,qLn:()=>gc,qOj:()=>Uf,qZA:()=>Zf,qzn:()=>Nc,rFY:()=>Gg,rWj:()=>E0,sBO:()=>Sa,sIi:()=>_p,s_b:()=>om,soG:()=>Op,tb:()=>a_,tp0:()=>Go,uIk:()=>$_,vHH:()=>je,vpe:()=>Mc,wAp:()=>wi,xp6:()=>M,ynx:()=>bp,z2F:()=>zt,z3N:()=>il,zSh:()=>Md,zs3:()=>st});var T=V(7579),l=V(727),H=V(9751),g=V(6451),He=V(3099);function he(n){for(let r in n)if(n[r]===he)return r;throw Error("Could not find renamed property on target object.")}function $e(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ie(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ie).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Be(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Ue=he({__forward_ref__:he});function nt(n){return n.__forward_ref__=nt,n.toString=function(){return Ie(this())},n}function Re(n){return it(n)?n():n}function it(n){return"function"==typeof n&&n.hasOwnProperty(Ue)&&n.__forward_ref__===nt}class je extends Error{constructor(r,s){super(function Ct(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function wt(n){return"string"==typeof n?n:null==n?"":String(n)}function Oe(n,r){throw new je(-201,!1)}function mi(n,r){null==n&&function nn(n,r,s,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${s} ${d} ${r} <=Actual]`))}(r,n,null,"!=")}function ln(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gt(n){return{providers:n.providers||[],imports:n.imports||[]}}function At(n){return sn(n,hi)||sn(n,Oi)}function en(n){return null!==At(n)}function sn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Kn(n){return n&&(n.hasOwnProperty(Fi)||n.hasOwnProperty(yi))?n[Fi]:null}const hi=he({\u0275prov:he}),Fi=he({\u0275inj:he}),Oi=he({ngInjectableDef:he}),yi=he({ngInjectorDef:he});var un=(()=>((un=un||{})[un.Default=0]="Default",un[un.Host=1]="Host",un[un.Self=2]="Self",un[un.SkipSelf=4]="SkipSelf",un[un.Optional=8]="Optional",un))();let Nn;function Y(n){const r=Nn;return Nn=n,r}function ee(n,r,s){const d=At(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:s&un.Optional?null:void 0!==r?r:void Oe(Ie(n))}function Je(n){return{toString:n}.toString()}var ue=(()=>((ue=ue||{})[ue.OnPush=0]="OnPush",ue[ue.Default=1]="Default",ue))(),de=(()=>{return(n=de||(de={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",de;var n})();const Ae=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),dn={},Vt=[],mn=he({\u0275cmp:he}),fn=he({\u0275dir:he}),Vi=he({\u0275pipe:he}),Nt=he({\u0275mod:he}),bt=he({\u0275fac:he}),et=he({__NG_ELEMENT_ID__:he});let ot=0;function Fe(n){return Je(()=>{const s=!0===n.standalone,d={},_={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ue.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Vt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||de.Emulated,id:"c"+ot++,styles:n.styles||Vt,_:null,setInput:null,schemas:n.schemas||null,tView:null},C=n.dependencies,P=n.features;return _.inputs=_e(n.inputs,d),_.outputs=_e(n.outputs),P&&P.forEach(F=>F(_)),_.directiveDefs=C?()=>("function"==typeof C?C():C).map(Te).filter(J):null,_.pipeDefs=C?()=>("function"==typeof C?C():C).map(Ke).filter(J):null,_})}function Te(n){return Ye(n)||Xe(n)}function J(n){return null!==n}function $(n){return Je(()=>({type:n.type,bootstrap:n.bootstrap||Vt,declarations:n.declarations||Vt,imports:n.imports||Vt,exports:n.exports||Vt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _e(n,r){if(null==n)return dn;const s={};for(const d in n)if(n.hasOwnProperty(d)){let _=n[d],C=_;Array.isArray(_)&&(C=_[1],_=_[0]),s[_]=d,r&&(r[_]=C)}return s}const ke=Fe;function rt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ye(n){return n[mn]||null}function Xe(n){return n[fn]||null}function Ke(n){return n[Vi]||null}function at(n){const r=Ye(n)||Xe(n)||Ke(n);return null!==r&&r.standalone}function Rt(n,r){const s=n[Nt]||null;if(!s&&!0===r)throw new Error(`Type ${Ie(n)} does not have '\u0275mod' property.`);return s}function dr(n){return Array.isArray(n)&&"object"==typeof n[1]}function wr(n){return Array.isArray(n)&&!0===n[1]}function $s(n){return 0!=(8&n.flags)}function Gs(n){return 2==(2&n.flags)}function fs(n){return 1==(1&n.flags)}function Kr(n){return null!==n.template}function Gr(n){return 0!=(256&n[2])}function ao(n,r){return n.hasOwnProperty(bt)?n[bt]:null}class ns{constructor(r,s,d){this.previousValue=r,this.currentValue=s,this.firstChange=d}isFirstChange(){return this.firstChange}}function ms(){return gs}function gs(n){return n.type.prototype.ngOnChanges&&(n.setInput=li),nr}function nr(){const n=Ks(this),r=n?.current;if(r){const s=n.previous;if(s===dn)n.previous=r;else for(let d in r)s[d]=r[d];n.current=null,this.ngOnChanges(r)}}function li(n,r,s,d){const _=Ks(n)||function Ys(n,r){return n[Oa]=r}(n,{previous:dn,current:null}),C=_.current||(_.current={}),P=_.previous,F=this.declaredInputs[s],j=P[F];C[F]=new ns(j&&j.currentValue,r,P===dn),n[d]=r}ms.ngInherit=!0;const Oa="__ngSimpleChanges__";function Ks(n){return n[Oa]||null}function Ji(n){for(;Array.isArray(n);)n=n[0];return n}function ka(n,r){return Ji(r[n])}function hr(n,r){return Ji(r[n.index])}function vs(n,r){return n.data[r]}function Oo(n,r){return n[r]}function ji(n,r){const s=r[n];return dr(s)?s:s[0]}function ko(n){return 64==(64&n[2])}function vr(n,r){return null==r?null:n[r]}function Ps(n){n[18]=0}function Vo(n,r){n[5]+=r;let s=n,d=n[3];for(;null!==d&&(1===r&&1===s[5]||-1===r&&0===s[5]);)d[5]+=r,s=d,d=d[3]}const ri={lFrame:Ya(null),bindingsEnabled:!0};function Ei(){return ri.bindingsEnabled}function Jt(){return ri.lFrame.lView}function Vn(){return ri.lFrame.tView}function La(n){return ri.lFrame.contextLView=n,n[8]}function Pi(n){return ri.lFrame.contextLView=null,n}function pr(){let n=Q();for(;null!==n&&64===n.type;)n=n.parent;return n}function Q(){return ri.lFrame.currentTNode}function W(n,r){const s=ri.lFrame;s.currentTNode=n,s.isParent=r}function ye(){return ri.lFrame.isParent}function Ut(){ri.lFrame.isParent=!1}function Qi(){const n=ri.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function ma(){return ri.lFrame.bindingIndex++}function ks(n){const r=ri.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Ic(n,r){const s=ri.lFrame;s.bindingIndex=s.bindingRootIndex=n,ga(r)}function ga(n){ri.lFrame.currentDirectiveIndex=n}function _a(n){const r=ri.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function gl(){return ri.lFrame.currentQueryIndex}function Fa(n){ri.lFrame.currentQueryIndex=n}function br(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Uo(n,r,s){if(s&un.SkipSelf){let _=r,C=n;for(;!(_=_.parent,null!==_||s&un.Host||(_=br(C),null===_||(C=C[15],10&_.type))););if(null===_)return!1;r=_,n=C}const d=ri.lFrame=Ka();return d.currentTNode=r,d.lView=n,!0}function jo(n){const r=Ka(),s=n[1];ri.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Ka(){const n=ri.lFrame,r=null===n?null:n.child;return null===r?Ya(n):r}function Ya(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Zr(){const n=ri.lFrame;return ri.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const U=Zr;function oe(){const n=Zr();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Qe(){return ri.lFrame.selectedIndex}function Mt(n){ri.lFrame.selectedIndex=n}function jt(){const n=ri.lFrame;return vs(n.tView,n.selectedIndex)}function Fn(){ri.lFrame.currentNamespace="svg"}function ci(){!function Mi(){ri.lFrame.currentNamespace=null}()}function ni(n,r){for(let s=r.directiveStart,d=r.directiveEnd;s<d;s++){const C=n.data[s].type.prototype,{ngAfterContentInit:P,ngAfterContentChecked:F,ngAfterViewInit:j,ngAfterViewChecked:ie,ngOnDestroy:we}=C;P&&(n.contentHooks||(n.contentHooks=[])).push(-s,P),F&&((n.contentHooks||(n.contentHooks=[])).push(s,F),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,F)),j&&(n.viewHooks||(n.viewHooks=[])).push(-s,j),ie&&((n.viewHooks||(n.viewHooks=[])).push(s,ie),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,ie)),null!=we&&(n.destroyHooks||(n.destroyHooks=[])).push(s,we)}}function vi(n,r,s){er(n,r,3,s)}function Yr(n,r,s,d){(3&n[2])===s&&er(n,r,s,d)}function Co(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function er(n,r,s,d){const C=d??-1,P=r.length-1;let F=0;for(let j=void 0!==d?65535&n[18]:0;j<P;j++)if("number"==typeof r[j+1]){if(F=r[j],null!=d&&F>=d)break}else r[j]<0&&(n[18]+=65536),(F<C||-1==C)&&(zr(n,s,r,j),n[18]=(4294901760&n[18])+j+2),j++}function zr(n,r,s,d){const _=s[d]<0,C=s[d+1],F=n[_?-s[d]:s[d]];if(_){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{C.call(F)}finally{}}}else try{C.call(F)}finally{}}class Vr{constructor(r,s,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=d}}function Fl(n,r,s){let d=0;for(;d<s.length;){const _=s[d];if("number"==typeof _){if(0!==_)break;d++;const C=s[d++],P=s[d++],F=s[d++];n.setAttribute(r,P,F,C)}else{const C=_,P=s[++d];Na(C)?n.setProperty(r,C,P):n.setAttribute(r,C,P),d++}}return d}function yl(n){return 3===n||4===n||6===n}function Na(n){return 64===n.charCodeAt(0)}function os(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let d=0;d<r.length;d++){const _=r[d];"number"==typeof _?s=_:0===s||yn(n,s,_,null,-1===s||2===s?r[++d]:null)}}return n}function yn(n,r,s,d,_){let C=0,P=n.length;if(-1===r)P=-1;else for(;C<n.length;){const F=n[C++];if("number"==typeof F){if(F===r){P=-1;break}if(F>r){P=C-1;break}}}for(;C<n.length;){const F=n[C];if("number"==typeof F)break;if(F===s){if(null===d)return void(null!==_&&(n[C+1]=_));if(d===n[C+1])return void(n[C+2]=_)}C++,null!==d&&C++,null!==_&&C++}-1!==P&&(n.splice(P,0,r),C=P+1),n.splice(C++,0,s),null!==d&&n.splice(C++,0,d),null!==_&&n.splice(C++,0,_)}function Nl(n){return-1!==n}function ss(n){return 32767&n}function as(n,r){let s=function oc(n){return n>>16}(n),d=r;for(;s>0;)d=d[15],s--;return d}let vl=!0;function Xa(n){const r=vl;return vl=n,r}let Ja=0;const ls={};function Wr(n,r){const s=sc(n,r);if(-1!==s)return s;const d=r[1];d.firstCreatePass&&(n.injectorIndex=r.length,Qs(d.data,n),Qs(r,null),Qs(d.blueprint,null));const _=ea(n,r),C=n.injectorIndex;if(Nl(_)){const P=ss(_),F=as(_,r),j=F[1].data;for(let ie=0;ie<8;ie++)r[C+ie]=F[P+ie]|j[P+ie]}return r[C+8]=_,C}function Qs(n,r){n.push(0,0,0,0,0,0,0,0,r)}function sc(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ea(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,d=null,_=r;for(;null!==_;){if(d=ta(_),null===d)return-1;if(s++,_=_[15],-1!==d.injectorIndex)return d.injectorIndex|s<<16}return-1}function Rs(n,r,s){!function zl(n,r,s){let d;"string"==typeof s?d=s.charCodeAt(0)||0:s.hasOwnProperty(et)&&(d=s[et]),null==d&&(d=s[et]=Ja++);const _=255&d;r.data[n+(_>>5)]|=1<<_}(n,r,s)}function bl(n,r,s){if(s&un.Optional||void 0!==n)return n;Oe()}function cs(n,r,s,d){if(s&un.Optional&&void 0===d&&(d=null),0==(s&(un.Self|un.Host))){const _=n[9],C=Y(void 0);try{return _?_.get(r,d,s&un.Optional):ee(r,d,s&un.Optional)}finally{Y(C)}}return bl(d,0,s)}function fr(n,r,s,d=un.Default,_){if(null!==n){if(1024&r[2]){const P=function kc(n,r,s,d,_){let C=n,P=r;for(;null!==C&&null!==P&&1024&P[2]&&!(256&P[2]);){const F=_i(C,P,s,d|un.Self,ls);if(F!==ls)return F;let j=C.parent;if(!j){const ie=P[21];if(ie){const we=ie.get(s,ls,d);if(we!==ls)return we}j=ta(P),P=P[15]}C=j}return _}(n,r,s,d,ls);if(P!==ls)return P}const C=_i(n,r,s,d,ls);if(C!==ls)return C}return cs(r,s,d,_)}function _i(n,r,s,d,_){const C=function ac(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(et)?n[et]:void 0;return"number"==typeof r?r>=0?255&r:An:r}(s);if("function"==typeof C){if(!Uo(r,n,d))return d&un.Host?bl(_,0,d):cs(r,s,d,_);try{const P=C(d);if(null!=P||d&un.Optional)return P;Oe()}finally{U()}}else if("number"==typeof C){let P=null,F=sc(n,r),j=-1,ie=d&un.Host?r[16][6]:null;for((-1===F||d&un.SkipSelf)&&(j=-1===F?ea(n,r):r[F+8],-1!==j&&Ur(d,!1)?(P=r[1],F=ss(j),r=as(j,r)):F=-1);-1!==F;){const we=r[1];if(Vl(C,F,we.data)){const Le=Rr(F,r,s,P,d,ie);if(Le!==ls)return Le}j=r[F+8],-1!==j&&Ur(d,r[1].data[F+8]===ie)&&Vl(C,F,r)?(P=we,F=ss(j),r=as(j,r)):F=-1}}return _}function Rr(n,r,s,d,_,C){const P=r[1],F=P.data[n+8],we=xl(F,P,s,null==d?Gs(F)&&vl:d!=P&&0!=(3&F.type),_&un.Host&&C===F);return null!==we?Ba(r,P,we,F):ls}function xl(n,r,s,d,_){const C=n.providerIndexes,P=r.data,F=1048575&C,j=n.directiveStart,we=C>>20,ht=_?F+we:n.directiveEnd;for(let Pt=d?F:F+we;Pt<ht;Pt++){const Wt=P[Pt];if(Pt<j&&s===Wt||Pt>=j&&Wt.type===s)return Pt}if(_){const Pt=P[j];if(Pt&&Kr(Pt)&&Pt.type===s)return j}return null}function Ba(n,r,s,d){let _=n[s];const C=r.data;if(function Do(n){return n instanceof Vr}(_)){const P=_;P.resolving&&function an(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new je(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Tt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():wt(n)}(C[s]));const F=Xa(P.canSeeViewProviders);P.resolving=!0;const j=P.injectImpl?Y(P.injectImpl):null;Uo(n,d,un.Default);try{_=n[s]=P.factory(void 0,C,n,d),r.firstCreatePass&&s>=d.directiveStart&&function rr(n,r,s){const{ngOnChanges:d,ngOnInit:_,ngDoCheck:C}=r.type.prototype;if(d){const P=gs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,P),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,P)}_&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,_),C&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,C),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,C))}(s,C[s],r)}finally{null!==j&&Y(j),Xa(F),P.resolving=!1,U()}}return _}function Vl(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ur(n,r){return!(n&un.Self||n&un.Host&&r)}class ya{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,d){return fr(this._tNode,this._lView,r,d,s)}}function An(){return new ya(pr(),Jt())}function Zn(n){return Je(()=>{const r=n.prototype.constructor,s=r[bt]||Ul(r),d=Object.prototype;let _=Object.getPrototypeOf(n.prototype).constructor;for(;_&&_!==d;){const C=_[bt]||Ul(_);if(C&&C!==s)return C;_=Object.getPrototypeOf(_)}return C=>new C})}function Ul(n){return it(n)?()=>{const r=Ul(Re(n));return r&&r()}:ao(n)}function ta(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function lo(n){return function Oc(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const d=s.length;let _=0;for(;_<d;){const C=s[_];if(yl(C))break;if(0===C)_+=2;else if("number"==typeof C)for(_++;_<d&&"string"==typeof s[_];)_++;else{if(C===r)return s[_+1];_+=2}}}return null}(pr(),n)}const Ho="__parameters__";function xr(n,r,s){return Je(()=>{const d=function ir(n){return function(...s){if(n){const d=n(...s);for(const _ in d)this[_]=d[_]}}}(r);function _(...C){if(this instanceof _)return d.apply(this,C),this;const P=new _(...C);return F.annotation=P,F;function F(j,ie,we){const Le=j.hasOwnProperty(Ho)?j[Ho]:Object.defineProperty(j,Ho,{value:[]})[Ho];for(;Le.length<=we;)Le.push(null);return(Le[we]=Le[we]||[]).push(P),j}}return s&&(_.prototype=Object.create(s.prototype)),_.prototype.ngMetadataName=n,_.annotationCls=_,_})}class $i{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=ln({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function R(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let d=n[s];Array.isArray(d)?(r===n&&(r=n.slice(0,s)),R(d,r)):r!==n&&r.push(d)}return r}function B(n,r){n.forEach(s=>Array.isArray(s)?B(s,r):r(s))}function z(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Z(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ne(n,r){const s=[];for(let d=0;d<n;d++)s.push(r);return s}function se(n,r,s){let d=me(n,r);return d>=0?n[1|d]=s:(d=~d,function E(n,r,s,d){let _=n.length;if(_==r)n.push(s,d);else if(1===_)n.push(d,n[0]),n[0]=s;else{for(_--,n.push(n[_-1],n[_]);_>r;)n[_]=n[_-2],_--;n[r]=s,n[r+1]=d}}(n,d,r,s)),d}function pe(n,r){const s=me(n,r);if(s>=0)return n[1|s]}function me(n,r){return function pt(n,r,s){let d=0,_=n.length>>s;for(;_!==d;){const C=d+(_-d>>1),P=n[C<<s];if(r===P)return C<<s;P>r?_=C:d=C+1}return~(_<<s)}(n,r,1)}const Tn={},qi="__NG_DI_FLAG__",mr="ngTempTokenPath",fi=/\n/gm,Yi="__source";let Sr;function Lr(n){const r=Sr;return Sr=n,r}function us(n,r=un.Default){if(void 0===Sr)throw new je(-203,!1);return null===Sr?ee(n,void 0,r):Sr.get(n,r&un.Optional?null:void 0,r)}function or(n,r=un.Default){return(function tt(){return Nn}()||us)(Re(n),r)}function na(n,r=un.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),or(n,r)}function Va(n){const r=[];for(let s=0;s<n.length;s++){const d=Re(n[s]);if(Array.isArray(d)){if(0===d.length)throw new je(900,!1);let _,C=un.Default;for(let P=0;P<d.length;P++){const F=d[P],j=Ro(F);"number"==typeof j?-1===j?_=F.token:C|=j:_=F}r.push(or(_,C))}else r.push(or(d))}return r}function Mo(n,r){return n[qi]=r,n.prototype[qi]=r,n}function Ro(n){return n[qi]}const uo=Mo(xr("Optional"),8),Go=Mo(xr("SkipSelf"),4);let Ou,ku,sr;function fm(n){Ou=n}function nl(n){return function _d(){if(void 0===ku&&(ku=null,Ae.trustedTypes))try{ku=Ae.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ku}()?.createHTML(n)||n}function Sh(n){return function yd(){if(void 0===sr&&(sr=null,Ae.trustedTypes))try{sr=Ae.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sr}()?.createHTML(n)||n}class xa{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Lc extends xa{getTypeName(){return"HTML"}}class Up extends xa{getTypeName(){return"Style"}}class Fc extends xa{getTypeName(){return"Script"}}class gm extends xa{getTypeName(){return"URL"}}class Gl extends xa{getTypeName(){return"ResourceURL"}}function il(n){return n instanceof xa?n.changingThisBreaksApplicationSecurity:n}function Nc(n,r){const s=function Th(n){return n instanceof xa&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function _m(n){return new Lc(n)}function Ih(n){return new Up(n)}function jp(n){return new Fc(n)}function vd(n){return new gm(n)}function Lu(n){return new Gl(n)}class bd{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(nl(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class Hp{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const d=this.inertDocument.createElement("body");s.appendChild(d)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=nl(r),s;const d=this.inertDocument.createElement("body");return d.innerHTML=nl(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(r){const s=r.attributes;for(let _=s.length-1;0<_;_--){const P=s.item(_).name;("xmlns:ns1"===P||0===P.indexOf("ns1:"))&&r.removeAttribute(P)}let d=r.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const ym=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function xd(n){return(n=String(n)).match(ym)?n:"unsafe:"+n}function rl(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function dc(...n){const r={};for(const s of n)for(const d in s)s.hasOwnProperty(d)&&(r[d]=!0);return r}const Ah=rl("area,br,col,hr,img,wbr"),hc=rl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ru=rl("rp,rt"),Ph=dc(Ah,dc(hc,rl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dc(ru,rl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dc(ru,hc)),Oh=rl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cd=dc(Oh,rl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vm=rl("script,style,template");class ou{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,d=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?d=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,d&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let _=this.checkClobberedElement(s,s.nextSibling);if(_){s=_;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Ph.hasOwnProperty(s))return this.sanitizedSomething=!0,!vm.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const d=r.attributes;for(let _=0;_<d.length;_++){const C=d.item(_),P=C.name,F=P.toLowerCase();if(!Cd.hasOwnProperty(F)){this.sanitizedSomething=!0;continue}let j=C.value;Oh[F]&&(j=xd(j)),this.buf.push(" ",P,'="',Fu(j),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Ph.hasOwnProperty(s)&&!Ah.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Fu(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const bm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,eo=/([^\#-~ |!])/g;function Fu(n){return n.replace(/&/g,"&amp;").replace(bm,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(eo,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Nu;function Bc(n,r){let s=null;try{Nu=Nu||function ia(n){const r=new Hp(n);return function $p(){try{return!!(new window.DOMParser).parseFromString(nl(""),"text/html")}catch{return!1}}()?new bd(r):r}(n);let d=r?String(r):"";s=Nu.getInertBodyElement(d);let _=5,C=d;do{if(0===_)throw new Error("Failed to sanitize html because the input is unstable");_--,d=C,C=s.innerHTML,s=Nu.getInertBodyElement(d)}while(d!==C);return nl((new ou).sanitizeChildren(su(s)||s))}finally{if(s){const d=su(s)||s;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function su(n){return"content"in n&&function pc(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ho=(()=>((ho=ho||{})[ho.NONE=0]="NONE",ho[ho.HTML=1]="HTML",ho[ho.STYLE=2]="STYLE",ho[ho.SCRIPT=3]="SCRIPT",ho[ho.URL=4]="URL",ho[ho.RESOURCE_URL=5]="RESOURCE_URL",ho))();function kh(n){const r=Vc();return r?Sh(r.sanitize(ho.HTML,n)||""):Nc(n,"HTML")?Sh(il(n)):Bc(function gd(){return void 0!==Ou?Ou:typeof document<"u"?document:void 0}(),wt(n))}function zu(n){const r=Vc();return r?r.sanitize(ho.URL,n)||"":Nc(n,"URL")?il(n):xd(wt(n))}function Vc(){const n=Jt();return n&&n[12]}const Uu=new $i("ENVIRONMENT_INITIALIZER"),Dd=new $i("INJECTOR",-1),Lh=new $i("INJECTOR_DEF_TYPES");class Fh{get(r,s=Tn){if(s===Tn){const d=new Error(`NullInjectorError: No provider for ${Ie(r)}!`);throw d.name="NullInjectorError",d}return s}}function Cm(...n){return{\u0275providers:qp(0,n)}}function qp(n,...r){const s=[],d=new Set;let _;return B(r,C=>{const P=C;Nh(P,s,[],d)&&(_||(_=[]),_.push(P))}),void 0!==_&&Kp(_,s),s}function Kp(n,r){for(let s=0;s<n.length;s++){const{providers:_}=n[s];B(_,C=>{r.push(C)})}}function Nh(n,r,s,d){if(!(n=Re(n)))return!1;let _=null,C=Kn(n);const P=!C&&Ye(n);if(C||P){if(P&&!P.standalone)return!1;_=n}else{const j=n.ngModule;if(C=Kn(j),!C)return!1;_=j}const F=d.has(_);if(P){if(F)return!1;if(d.add(_),P.dependencies){const j="function"==typeof P.dependencies?P.dependencies():P.dependencies;for(const ie of j)Nh(ie,r,s,d)}}else{if(!C)return!1;{if(null!=C.imports&&!F){let ie;d.add(_);try{B(C.imports,we=>{Nh(we,r,s,d)&&(ie||(ie=[]),ie.push(we))})}finally{}void 0!==ie&&Kp(ie,r)}if(!F){const ie=ao(_)||(()=>new _);r.push({provide:_,useFactory:ie,deps:Vt},{provide:Lh,useValue:_,multi:!0},{provide:Uu,useValue:()=>or(_),multi:!0})}const j=C.providers;null==j||F||B(j,we=>{r.push(we)})}}return _!==n&&void 0!==n.providers}const Em=he({provide:String,useValue:he});function fc(n){return null!==n&&"object"==typeof n&&Em in n}function jc(n){return"function"==typeof n}const Md=new $i("Set Injector scope."),ju={},Mm={};let Bh;function Sd(){return void 0===Bh&&(Bh=new Fh),Bh}class Hc{}class Td extends Hc{constructor(r,s,d,_){super(),this.parent=s,this.source=d,this.scopes=_,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vh(r,P=>this.processProvider(P)),this.records.set(Dd,Gc(void 0,this)),_.has("environment")&&this.records.set(Hc,Gc(void 0,this));const C=this.records.get(Md);null!=C&&"string"==typeof C.value&&this.scopes.add(C.value),this.injectorDefTypes=new Set(this.get(Lh.multi,Vt,un.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Lr(this),d=Y(void 0);try{return r()}finally{Lr(s),Y(d)}}get(r,s=Tn,d=un.Default){this.assertNotDestroyed();const _=Lr(this),C=Y(void 0);try{if(!(d&un.SkipSelf)){let F=this.records.get(r);if(void 0===F){const j=function Jp(n){return"function"==typeof n||"object"==typeof n&&n instanceof $i}(r)&&At(r);F=j&&this.injectableDefInScope(j)?Gc($c(r),ju):null,this.records.set(r,F)}if(null!=F)return this.hydrate(r,F)}return(d&un.Self?Sd():this.parent).get(r,s=d&un.Optional&&s===Tn?null:s)}catch(P){if("NullInjectorError"===P.name){if((P[mr]=P[mr]||[]).unshift(Ie(r)),_)throw P;return function Qr(n,r,s,d){const _=n[mr];throw r[Yi]&&_.unshift(r[Yi]),n.message=function Ki(n,r,s,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let _=Ie(r);if(Array.isArray(r))_=r.map(Ie).join(" -> ");else if("object"==typeof r){let C=[];for(let P in r)if(r.hasOwnProperty(P)){let F=r[P];C.push(P+":"+("string"==typeof F?JSON.stringify(F):Ie(F)))}_=`{${C.join(", ")}}`}return`${s}${d?"("+d+")":""}[${_}]: ${n.replace(fi,"\n  ")}`}("\n"+n.message,_,s,d),n.ngTokenPath=_,n[mr]=null,n}(P,r,"R3InjectorError",this.source)}throw P}finally{Y(C),Lr(_)}}resolveInjectorInitializers(){const r=Lr(this),s=Y(void 0);try{const d=this.get(Uu.multi,Vt,un.Self);for(const _ of d)_()}finally{Lr(r),Y(s)}}toString(){const r=[],s=this.records;for(const d of s.keys())r.push(Ie(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(r){let s=jc(r=Re(r))?r:Re(r&&r.provide);const d=function Sm(n){return fc(n)?Gc(void 0,n.useValue):Gc(Xp(n),ju)}(r);if(jc(r)||!0!==r.multi)this.records.get(s);else{let _=this.records.get(s);_||(_=Gc(void 0,ju,!0),_.factory=()=>Va(_.multi),this.records.set(s,_)),s=r,_.multi.push(r)}this.records.set(s,d)}hydrate(r,s){return s.value===ju&&(s.value=Mm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function lu(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Re(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function $c(n){const r=At(n),s=null!==r?r.factory:ao(n);if(null!==s)return s;if(n instanceof $i)throw new je(204,!1);if(n instanceof Function)return function zh(n){const r=n.length;if(r>0)throw ne(r,"?"),new je(204,!1);const s=function bn(n){const r=n&&(n[hi]||n[Oi]);if(r){const s=function Un(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new je(204,!1)}function Xp(n,r,s){let d;if(jc(n)){const _=Re(n);return ao(_)||$c(_)}if(fc(n))d=()=>Re(n.useValue);else if(function Yp(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Va(n.deps||[]));else if(function Uc(n){return!(!n||!n.useExisting)}(n))d=()=>or(Re(n.useExisting));else{const _=Re(n&&(n.useClass||n.provide));if(!function au(n){return!!n.deps}(n))return ao(_)||$c(_);d=()=>new _(...Va(n.deps))}return d}function Gc(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Tm(n){return!!n.\u0275providers}function Vh(n,r){for(const s of n)Array.isArray(s)?Vh(s,r):Tm(s)?Vh(s.\u0275providers,r):r(s)}class Qp{}class Uh{resolveComponentFactory(r){throw function Id(n){const r=Error(`No component factory found for ${Ie(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let cu=(()=>{class n{}return n.NULL=new Uh,n})();function tf(){return Zc(pr(),Jt())}function Zc(n,r){return new Hu(hr(n,r))}let Hu=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=tf,n})();function Ad(n){return n instanceof Hu?n.nativeElement:n}class $u{}let Pm=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Om(){const n=Jt(),s=ji(pr().index,n);return(dr(s)?s:n)[11]}(),n})(),nf=(()=>{class n{}return n.\u0275prov=ln({token:n,providedIn:"root",factory:()=>null}),n})();class Wc{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Gu=new Wc("14.2.5"),qc={};function Hh(n){return n.ngOriginalError}class gc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Hh(r);for(;s&&Hh(s);)s=Hh(s);return s||null}}const Ku=new Map;let df=0;const $h="__ngContext__";function Wo(n,r){dr(r)?(n[$h]=r[20],function Yu(n){Ku.set(n[20],n)}(r)):n[$h]=r}function mf(n){return n.ownerDocument.defaultView}function al(n){return n instanceof Function?n():n}var wa=(()=>((wa=wa||{})[wa.Important=1]="Important",wa[wa.DashCase=2]="DashCase",wa))();function Ud(n,r){return undefined(n,r)}function gu(n){const r=n[3];return wr(r)?r[3]:r}function Ml(n){return ep(n[13])}function jd(n){return ep(n[4])}function ep(n){for(;null!==n&&!wr(n);)n=n[4];return n}function Ca(n,r,s,d,_){if(null!=d){let C,P=!1;wr(d)?C=d:dr(d)&&(P=!0,d=d[0]);const F=Ji(d);0===n&&null!==s?null==_?rp(r,s,F):wc(r,s,F,_||null,!0):1===n&&null!==s?wc(r,s,F,_||null,!0):2===n?function Xc(n,r,s){const d=td(n,r);d&&function Gm(n,r,s,d){n.removeChild(r,s,d)}(n,d,r,s)}(r,F,P):3===n&&r.destroyNode(F),null!=C&&function Df(n,r,s,d,_){const C=s[7];C!==Ji(s)&&Ca(r,n,d,C,_);for(let F=10;F<s.length;F++){const j=s[F];bu(j[1],j,n,r,d,C)}}(r,n,C,s,_)}}function Qu(n,r,s){return n.createElement(r,s)}function $d(n,r){const s=n[9],d=s.indexOf(r),_=r[3];512&r[2]&&(r[2]&=-513,Vo(_,-1)),s.splice(d,1)}function Gd(n,r){if(n.length<=10)return;const s=10+r,d=n[s];if(d){const _=d[17];null!==_&&_!==n&&$d(_,d),r>0&&(n[s-1][4]=d[4]);const C=Z(n,10+r);!function _u(n,r){bu(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(d[1],d);const P=C[19];null!==P&&P.detachView(C[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function np(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&bu(n,r,s,3,null,null),function ed(n){let r=n[13];if(!r)return Zd(n[1],n);for(;r;){let s=null;if(dr(r))s=r[13];else{const d=r[10];d&&(s=d)}if(!s){for(;r&&!r[4]&&r!==n;)dr(r)&&Zd(r[1],r),r=r[3];null===r&&(r=n),dr(r)&&Zd(r[1],r),s=r&&r[4]}r=s}}(r)}}function Zd(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function xf(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let d=0;d<s.length;d+=2){const _=r[s[d]];if(!(_ instanceof Vr)){const C=s[d+1];if(Array.isArray(C))for(let P=0;P<C.length;P+=2){const F=_[C[P]],j=C[P+1];try{j.call(F)}finally{}}else try{C.call(_)}finally{}}}}(n,r),function $m(n,r){const s=n.cleanup,d=r[7];let _=-1;if(null!==s)for(let C=0;C<s.length-1;C+=2)if("string"==typeof s[C]){const P=s[C+1],F="function"==typeof P?P(r):Ji(r[P]),j=d[_=s[C+2]],ie=s[C+3];"boolean"==typeof ie?F.removeEventListener(s[C],j,ie):ie>=0?d[_=ie]():d[_=-ie].unsubscribe(),C+=2}else{const P=d[_=s[C+1]];s[C].call(P)}if(null!==d){for(let C=_+1;C<d.length;C++)(0,d[C])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&wr(r[3])){s!==r[3]&&$d(s,r);const d=r[19];null!==d&&d.detachView(n)}!function hu(n){Ku.delete(n[20])}(r)}}function Sl(n,r,s){return function ip(n,r,s){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return s[0];if(2&d.flags){const _=n.data[d.directiveStart].encapsulation;if(_===de.None||_===de.Emulated)return null}return hr(d,s)}(n,r.parent,s)}function wc(n,r,s,d,_){n.insertBefore(r,s,d,_)}function rp(n,r,s){n.appendChild(r,s)}function Wd(n,r,s,d,_){null!==d?wc(n,r,s,d,_):rp(n,r,s)}function td(n,r){return n.parentNode(r)}function Kc(n,r,s){return nd(n,r,s)}let nd=function op(n,r,s){return 40&n.type?hr(n,s):null};function qd(n,r,s,d){const _=Sl(n,d,r),C=r[11],F=Kc(d.parent||r[6],d,r);if(null!=_)if(Array.isArray(s))for(let j=0;j<s.length;j++)Wd(C,_,s[j],F,!1);else Wd(C,_,s,F,!1)}function vu(n,r){if(null!==r){const s=r.type;if(3&s)return hr(r,n);if(4&s)return sp(-1,n[r.index]);if(8&s){const d=r.child;if(null!==d)return vu(n,d);{const _=n[r.index];return wr(_)?sp(-1,_):Ji(_)}}if(32&s)return Ud(r,n)()||Ji(n[r.index]);{const d=Cf(n,r);return null!==d?Array.isArray(d)?d[0]:vu(gu(n[16]),d):vu(n,r.next)}}return null}function Cf(n,r){return null!==r?n[16][6].projection[r.projection]:null}function sp(n,r){const s=10+n+1;if(s<r.length){const d=r[s],_=d[1].firstChild;if(null!==_)return vu(d,_)}return r[7]}function id(n,r,s,d,_,C,P){for(;null!=s;){const F=d[s.index],j=s.type;if(P&&0===r&&(F&&Wo(Ji(F),d),s.flags|=4),64!=(64&s.flags))if(8&j)id(n,r,s.child,d,_,C,!1),Ca(r,n,_,F,C);else if(32&j){const ie=Ud(s,d);let we;for(;we=ie();)Ca(r,n,_,we,C);Ca(r,n,_,F,C)}else 16&j?Ef(n,r,d,s,_,C):Ca(r,n,_,F,C);s=P?s.projectionNext:s.next}}function bu(n,r,s,d,_,C){id(s,d,n.firstChild,r,_,C,!1)}function Ef(n,r,s,d,_,C){const P=s[16],j=P[6].projection[d.projection];if(Array.isArray(j))for(let ie=0;ie<j.length;ie++)Ca(r,n,_,j[ie],C);else id(n,r,j,P[3],_,C,!0)}function Sf(n,r,s){n.setAttribute(r,"style",s)}function rd(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function Kd(n,r,s){let d=n.length;for(;;){const _=n.indexOf(r,s);if(-1===_)return _;if(0===_||n.charCodeAt(_-1)<=32){const C=r.length;if(_+C===d||n.charCodeAt(_+C)<=32)return _}s=_+1}}const sd="ng-template";function Tf(n,r,s){let d=0;for(;d<n.length;){let _=n[d++];if(s&&"class"===_){if(_=n[d],-1!==Kd(_.toLowerCase(),r,0))return!0}else if(1===_){for(;d<n.length&&"string"==typeof(_=n[d++]);)if(_.toLowerCase()===r)return!0;return!1}}return!1}function If(n){return 4===n.type&&n.value!==sd}function Zm(n,r,s){return r===(4!==n.type||s?n.value:sd)}function lp(n,r,s){let d=4;const _=n.attrs||[],C=function cp(n){for(let r=0;r<n.length;r++)if(yl(n[r]))return r;return n.length}(_);let P=!1;for(let F=0;F<r.length;F++){const j=r[F];if("number"!=typeof j){if(!P)if(4&d){if(d=2|1&d,""!==j&&!Zm(n,j,s)||""===j&&1===r.length){if(Bs(d))return!1;P=!0}}else{const ie=8&d?j:r[++F];if(8&d&&null!==n.attrs){if(!Tf(n.attrs,ie,s)){if(Bs(d))return!1;P=!0}continue}const Le=ad(8&d?"class":j,_,If(n),s);if(-1===Le){if(Bs(d))return!1;P=!0;continue}if(""!==ie){let ht;ht=Le>C?"":_[Le+1].toLowerCase();const Pt=8&d?ht:null;if(Pt&&-1!==Kd(Pt,ie,0)||2&d&&ie!==ht){if(Bs(d))return!1;P=!0}}}}else{if(!P&&!Bs(d)&&!Bs(j))return!1;if(P&&Bs(j))continue;P=!1,d=j|1&d}}return Bs(d)||P}function Bs(n){return 0==(1&n)}function ad(n,r,s,d){if(null===r)return-1;let _=0;if(d||!s){let C=!1;for(;_<r.length;){const P=r[_];if(P===n)return _;if(3===P||6===P)C=!0;else{if(1===P||2===P){let F=r[++_];for(;"string"==typeof F;)F=r[++_];continue}if(4===P)break;if(0===P){_+=4;continue}}_+=C?1:2}return-1}return function Af(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const d=n[s];if("number"==typeof d)return-1;if(d===r)return s;s++}return-1}(r,n)}function Yd(n,r,s=!1){for(let d=0;d<r.length;d++)if(lp(n,r[d],s))return!0;return!1}function o(n,r){e:for(let s=0;s<r.length;s++){const d=r[s];if(n.length===d.length){for(let _=0;_<n.length;_++)if(n[_]!==d[_])continue e;return!0}}return!1}function e(n,r){return n?":not("+r.trim()+")":r}function a(n){let r=n[0],s=1,d=2,_="",C=!1;for(;s<n.length;){let P=n[s];if("string"==typeof P)if(2&d){const F=n[++s];_+="["+P+(F.length>0?'="'+F+'"':"")+"]"}else 8&d?_+="."+P:4&d&&(_+=" "+P);else""!==_&&!Bs(P)&&(r+=e(C,_),_=""),d=P,C=C||!Bs(d);s++}return""!==_&&(r+=e(C,_)),r}const w={};function M(n){O(Vn(),Jt(),Qe()+n,!1)}function O(n,r,s,d){if(!d)if(3==(3&r[2])){const C=n.preOrderCheckHooks;null!==C&&vi(r,C,s)}else{const C=n.preOrderHooks;null!==C&&Yr(r,C,0,s)}Mt(s)}function ct(n,r=null,s=null,d){const _=vt(n,r,s,d);return _.resolveInjectorInitializers(),_}function vt(n,r=null,s=null,d,_=new Set){const C=[s||Vt,Cm(n)];return d=d||("object"==typeof n?void 0:Ie(n)),new Td(C,r||Sd(),d||null,_)}let st=(()=>{class n{static create(s,d){if(Array.isArray(s))return ct({name:""},d,s,"");{const _=s.name??"";return ct({name:_},s.parent,s.providers,_)}}}return n.THROW_IF_NOT_FOUND=Tn,n.NULL=new Fh,n.\u0275prov=ln({token:n,providedIn:"any",factory:()=>or(Dd)}),n.__NG_ELEMENT_ID__=-1,n})();function qr(n,r=un.Default){const s=Jt();return null===s?or(n,r):fr(pr(),s,Re(n),r)}function Li(){throw new Error("invalid")}function xo(n,r){return n<<17|r<<2}function Tr(n){return n>>17&32767}function Ma(n){return 2|n}function ds(n){return(131068&n)>>2}function js(n,r){return-131069&n|r<<2}function hs(n){return 1|n}function ng(n,r){const s=n.contentQueries;if(null!==s)for(let d=0;d<s.length;d+=2){const _=s[d],C=s[d+1];if(-1!==C){const P=n.data[C];Fa(_),P.contentQueries(2,r[C],C)}}}function Rf(n,r,s,d,_,C,P,F,j,ie,we){const Le=r.blueprint.slice();return Le[0]=_,Le[2]=76|d,(null!==we||n&&1024&n[2])&&(Le[2]|=1024),Ps(Le),Le[3]=Le[15]=n,Le[8]=s,Le[10]=P||n&&n[10],Le[11]=F||n&&n[11],Le[12]=j||n&&n[12]||null,Le[9]=ie||n&&n[9]||null,Le[6]=C,Le[20]=function Rd(){return df++}(),Le[21]=we,Le[16]=2==r.type?n[16]:Le,Le}function nh(n,r,s,d,_){let C=n.data[r];if(null===C)C=function ig(n,r,s,d,_){const C=Q(),P=ye(),j=n.data[r]=function F0(n,r,s,d,_,C){return{type:s,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:_,attrs:C,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,P?C:C&&C.parent,s,r,d,_);return null===n.firstChild&&(n.firstChild=j),null!==C&&(P?null==C.child&&null!==j.parent&&(C.child=j):null===C.next&&(C.next=j)),j}(n,r,s,d,_),function Rl(){return ri.lFrame.inI18n}()&&(C.flags|=64);else if(64&C.type){C.type=s,C.value=d,C.attrs=_;const P=function K(){const n=ri.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();C.injectorIndex=null===P?-1:P.injectorIndex}return W(C,!0),C}function ih(n,r,s,d){if(0===s)return-1;const _=r.length;for(let C=0;C<s;C++)r.push(d),n.blueprint.push(d),n.data.push(null);return _}function rg(n,r,s){jo(r);try{const d=n.viewQuery;null!==d&&Bf(1,d,s);const _=n.template;null!==_&&D_(n,r,_,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ng(n,r),n.staticViewQueries&&Bf(2,n.viewQuery,s);const C=n.components;null!==C&&function k0(n,r){for(let s=0;s<r.length;s++)Y0(n,r[s])}(r,C)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[2]&=-5,oe()}}function hp(n,r,s,d){const _=r[2];if(128!=(128&_)){jo(r);try{Ps(r),function fa(n){return ri.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&D_(n,r,s,2,d);const P=3==(3&_);if(P){const ie=n.preOrderCheckHooks;null!==ie&&vi(r,ie,null)}else{const ie=n.preOrderHooks;null!==ie&&Yr(r,ie,0,null),Co(r,0)}if(function q0(n){for(let r=Ml(n);null!==r;r=jd(r)){if(!r[2])continue;const s=r[9];for(let d=0;d<s.length;d++){const _=s[d],C=_[3];0==(512&_[2])&&Vo(C,1),_[2]|=512}}}(r),function Ff(n){for(let r=Ml(n);null!==r;r=jd(r))for(let s=10;s<r.length;s++){const d=r[s],_=d[1];ko(d)&&hp(_,d,_.template,d[8])}}(r),null!==n.contentQueries&&ng(n,r),P){const ie=n.contentCheckHooks;null!==ie&&vi(r,ie)}else{const ie=n.contentHooks;null!==ie&&Yr(r,ie,1),Co(r,1)}!function P0(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let d=0;d<s.length;d++){const _=s[d];if(_<0)Mt(~_);else{const C=_,P=s[++d],F=s[++d];Ic(P,C),F(2,r[C])}}}finally{Mt(-1)}}(n,r);const F=n.components;null!==F&&function O0(n,r){for(let s=0;s<r.length;s++)K0(n,r[s])}(r,F);const j=n.viewQuery;if(null!==j&&Bf(2,j,d),P){const ie=n.viewCheckHooks;null!==ie&&vi(r,ie)}else{const ie=n.viewHooks;null!==ie&&Yr(r,ie,2),Co(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Vo(r[3],-1))}finally{oe()}}}function D_(n,r,s,d,_){const C=Qe(),P=2&d;try{Mt(-1),P&&r.length>22&&O(n,r,22,!1),s(d,_)}finally{Mt(C)}}function M_(n,r,s){if($s(r)){const _=r.directiveEnd;for(let C=r.directiveStart;C<_;C++){const P=n.data[C];P.contentQueries&&P.contentQueries(1,s[C],C)}}}function og(n,r,s){!Ei()||(function V0(n,r,s,d){const _=s.directiveStart,C=s.directiveEnd;n.firstCreatePass||Wr(s,r),Wo(d,r);const P=s.initialInputs;for(let F=_;F<C;F++){const j=n.data[F],ie=Kr(j);ie&&G0(r,s,j);const we=Ba(r,n,F,s);Wo(we,r),null!==P&&Z0(0,F-_,we,j,0,P),ie&&(ji(s.index,r)[8]=we)}}(n,r,s,hr(s,r)),128==(128&s.flags)&&function U0(n,r,s){const d=s.directiveStart,_=s.directiveEnd,C=s.index,P=function Ac(){return ri.lFrame.currentDirectiveIndex}();try{Mt(C);for(let F=d;F<_;F++){const j=n.data[F],ie=r[F];ga(F),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&O_(j,ie)}}finally{Mt(-1),ga(P)}}(n,r,s))}function sg(n,r,s=hr){const d=r.localNames;if(null!==d){let _=r.index+1;for(let C=0;C<d.length;C+=2){const P=d[C+1],F=-1===P?s(r,n):n[P];n[_++]=F}}}function S_(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Lf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Lf(n,r,s,d,_,C,P,F,j,ie){const we=22+d,Le=we+_,ht=function R0(n,r){const s=[];for(let d=0;d<r;d++)s.push(d<n?null:w);return s}(we,Le),Pt="function"==typeof ie?ie():ie;return ht[1]={type:n,blueprint:ht,template:s,queries:null,viewQuery:F,declTNode:r,data:ht.slice().fill(null,we),bindingStartIndex:we,expandoStartIndex:Le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof C?C():C,pipeRegistry:"function"==typeof P?P():P,firstChild:null,schemas:j,consts:Pt,incompleteFirstPass:!1}}function T_(n,r,s,d){const _=F_(r);null===s?_.push(d):(_.push(s),n.firstCreatePass&&N_(n).push(d,_.length-1))}function ag(n,r,s){for(let d in n)if(n.hasOwnProperty(d)){const _=n[d];(s=null===s?{}:s).hasOwnProperty(d)?s[d].push(r,_):s[d]=[r,_]}return s}function I_(n,r){const d=r.directiveEnd,_=n.data,C=r.attrs,P=[];let F=null,j=null;for(let ie=r.directiveStart;ie<d;ie++){const we=_[ie],Le=we.inputs,ht=null===C||If(r)?null:W0(Le,C);P.push(ht),F=ag(Le,ie,F),j=ag(we.outputs,ie,j)}null!==F&&(F.hasOwnProperty("class")&&(r.flags|=16),F.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=P,r.inputs=F,r.outputs=j}function ul(n,r,s,d,_,C,P,F){const j=hr(r,s);let we,ie=r.inputs;!F&&null!=ie&&(we=ie[d])?(zf(n,s,we,d,_),Gs(r)&&A_(s,r.index)):3&r.type&&(d=function N0(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),_=null!=P?P(_,r.value||"",d):_,C.setProperty(j,d,_))}function A_(n,r){const s=ji(r,n);16&s[2]||(s[2]|=32)}function lg(n,r,s,d){let _=!1;if(Ei()){const C=function j0(n,r,s){const d=n.directiveRegistry;let _=null;if(d)for(let C=0;C<d.length;C++){const P=d[C];Yd(s,P.selectors,!1)&&(_||(_=[]),Rs(Wr(s,r),n,P.type),Kr(P)?(k_(n,s),_.unshift(P)):_.push(P))}return _}(n,r,s),P=null===d?null:{"":-1};if(null!==C){_=!0,R_(s,n.data.length,C.length);for(let we=0;we<C.length;we++){const Le=C[we];Le.providersResolver&&Le.providersResolver(Le)}let F=!1,j=!1,ie=ih(n,r,C.length,null);for(let we=0;we<C.length;we++){const Le=C[we];s.mergedAttrs=os(s.mergedAttrs,Le.hostAttrs),L_(n,s,r,ie,Le),$0(ie,Le,P),null!==Le.contentQueries&&(s.flags|=8),(null!==Le.hostBindings||null!==Le.hostAttrs||0!==Le.hostVars)&&(s.flags|=128);const ht=Le.type.prototype;!F&&(ht.ngOnChanges||ht.ngOnInit||ht.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),F=!0),!j&&(ht.ngOnChanges||ht.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),j=!0),ie++}I_(n,s)}P&&function H0(n,r,s){if(r){const d=n.localNames=[];for(let _=0;_<r.length;_+=2){const C=s[r[_+1]];if(null==C)throw new je(-301,!1);d.push(r[_],C)}}}(s,d,P)}return s.mergedAttrs=os(s.mergedAttrs,s.attrs),_}function cg(n,r,s,d,_,C){const P=C.hostBindings;if(P){let F=n.hostBindingOpCodes;null===F&&(F=n.hostBindingOpCodes=[]);const j=~r.index;(function z0(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(F)!=j&&F.push(j),F.push(d,_,P)}}function O_(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function k_(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function $0(n,r,s){if(s){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)s[r.exportAs[d]]=n;Kr(r)&&(s[""]=n)}}function R_(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function L_(n,r,s,d,_){n.data[d]=_;const C=_.factory||(_.factory=ao(_.type)),P=new Vr(C,Kr(_),qr);n.blueprint[d]=P,s[d]=P,cg(n,r,0,d,ih(n,s,_.hostVars,w),_)}function G0(n,r,s){const d=hr(r,n),_=S_(s),C=n[10],P=pp(n,Rf(n,_,null,s.onPush?32:16,d,r,C,C.createRenderer(d,s),null,null,null));n[r.index]=P}function Cc(n,r,s,d,_,C){const P=hr(n,r);!function ug(n,r,s,d,_,C,P){if(null==C)n.removeAttribute(r,_,s);else{const F=null==P?wt(C):P(C,d||"",_);n.setAttribute(r,_,F,s)}}(r[11],P,C,n.value,s,d,_)}function Z0(n,r,s,d,_,C){const P=C[r];if(null!==P){const F=d.setInput;for(let j=0;j<P.length;){const ie=P[j++],we=P[j++],Le=P[j++];null!==F?d.setInput(s,Le,ie,we):s[we]=Le}}}function W0(n,r){let s=null,d=0;for(;d<r.length;){const _=r[d];if(0!==_)if(5!==_){if("number"==typeof _)break;n.hasOwnProperty(_)&&(null===s&&(s=[]),s.push(_,n[_],r[d+1])),d+=2}else d+=2;else d+=4}return s}function jr(n,r,s,d){return new Array(n,!0,!1,r,null,0,d,s,null,null)}function K0(n,r){const s=ji(r,n);if(ko(s)){const d=s[1];48&s[2]?hp(d,s,d.template,s[8]):s[5]>0&&dg(s)}}function dg(n){for(let d=Ml(n);null!==d;d=jd(d))for(let _=10;_<d.length;_++){const C=d[_];if(ko(C))if(512&C[2]){const P=C[1];hp(P,C,P.template,C[8])}else C[5]>0&&dg(C)}const s=n[1].components;if(null!==s)for(let d=0;d<s.length;d++){const _=ji(s[d],n);ko(_)&&_[5]>0&&dg(_)}}function Y0(n,r){const s=ji(r,n),d=s[1];(function X0(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(d,s),rg(d,s,s[8])}function pp(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Nf(n){for(;n;){n[2]|=32;const r=gu(n);if(Gr(n)&&!r)return n;n=r}return null}function rh(n,r,s,d=!0){const _=r[10];_.begin&&_.begin();try{hp(n,r,n.template,s)}catch(P){throw d&&z_(r,P),P}finally{_.end&&_.end()}}function Bf(n,r,s){Fa(0),r(n,s)}function F_(n){return n[7]||(n[7]=[])}function N_(n){return n.cleanup||(n.cleanup=[])}function B_(n,r,s){return(null===n||Kr(n))&&(s=function Za(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(s[r.index])),s[11]}function z_(n,r){const s=n[9],d=s?s.get(gc,null):null;d&&d.handleError(r)}function zf(n,r,s,d,_){for(let C=0;C<s.length;){const P=s[C++],F=s[C++],j=r[P],ie=n.data[P];null!==ie.setInput?ie.setInput(j,_,d,F):j[F]=_}}function Vf(n,r,s){let d=s?n.styles:null,_=s?n.classes:null,C=0;if(null!==r)for(let P=0;P<r.length;P++){const F=r[P];"number"==typeof F?C=F:1==C?_=Be(_,F):2==C&&(d=Be(d,F+": "+r[++P]+";"))}s?n.styles=d:n.stylesWithoutHost=d,s?n.classes=_:n.classesWithoutHost=_}function Ec(n,r,s,d,_=!1){for(;null!==s;){const C=r[s.index];if(null!==C&&d.push(Ji(C)),wr(C))for(let F=10;F<C.length;F++){const j=C[F],ie=j[1].firstChild;null!==ie&&Ec(j[1],j,ie,d)}const P=s.type;if(8&P)Ec(n,r,s.child,d);else if(32&P){const F=Ud(s,r);let j;for(;j=F();)d.push(j)}else if(16&P){const F=Cf(r,s);if(Array.isArray(F))d.push(...F);else{const j=gu(r[16]);Ec(j[1],j,F,d,!0)}}s=_?s.projectionNext:s.next}return d}class ii{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Ec(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(wr(r)){const s=r[8],d=s?s.indexOf(this):-1;d>-1&&(Gd(r,d),Z(s,d))}this._attachedToViewContainer=!1}np(this._lView[1],this._lView)}onDestroy(r){T_(this._lView[1],this._lView,null,r)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){rh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ra(n,r){bu(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=r}}class Ni extends ii{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;rh(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class dl extends cu{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Ye(r);return new mp(s,this.ngModule)}}function fp(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Q0{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,d){const _=this.injector.get(r,qc,d);return _!==qc||s===qc?_:this.parentInjector.get(r,s,d)}}class mp extends Qp{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function f(n){return n.map(a).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return fp(this.componentDef.inputs)}get outputs(){return fp(this.componentDef.outputs)}create(r,s,d,_){let C=(_=_||this.ngModule)instanceof Hc?_:_?.injector;C&&null!==this.componentDef.getStandaloneInjector&&(C=this.componentDef.getStandaloneInjector(C)||C);const P=C?new Q0(r,C):r,F=P.get($u,null);if(null===F)throw new je(407,!1);const j=P.get(nf,null),ie=F.createRenderer(null,this.componentDef),we=this.componentDef.selectors[0][0]||"div",Le=d?function L0(n,r,s){return n.selectRootElement(r,s===de.ShadowDom)}(ie,d,this.componentDef.encapsulation):Qu(F.createRenderer(null,this.componentDef),we,function ql(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(we)),ht=this.componentDef.onPush?288:272,Pt=Lf(0,null,null,1,0,null,null,null,null,null),Wt=Rf(null,Pt,null,ht,null,null,F,ie,j,P,null);let gn,Rn;jo(Wt);try{const ei=function nb(n,r,s,d,_,C){const P=s[1];s[22]=n;const j=nh(P,22,2,"#host",null),ie=j.mergedAttrs=r.hostAttrs;null!==ie&&(Vf(j,ie,!0),null!==n&&(Fl(_,n,ie),null!==j.classes&&rd(_,n,j.classes),null!==j.styles&&Sf(_,n,j.styles)));const we=d.createRenderer(n,r),Le=Rf(s,S_(r),null,r.onPush?32:16,s[22],j,d,we,C||null,null,null);return P.firstCreatePass&&(Rs(Wr(j,s),P,r.type),k_(P,j),R_(j,s.length,1)),pp(s,Le),s[22]=Le}(Le,this.componentDef,Wt,F,ie);if(Le)if(d)Fl(ie,Le,["ng-version",Gu.full]);else{const{attrs:Ci,classes:on}=function v(n){const r=[],s=[];let d=1,_=2;for(;d<n.length;){let C=n[d];if("string"==typeof C)2===_?""!==C&&r.push(C,n[++d]):8===_&&s.push(C);else{if(!Bs(_))break;_=C}d++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Ci&&Fl(ie,Le,Ci),on&&on.length>0&&rd(ie,Le,on.join(" "))}if(Rn=vs(Pt,22),void 0!==s){const Ci=Rn.projection=[];for(let on=0;on<this.ngContentSelectors.length;on++){const Ti=s[on];Ci.push(null!=Ti?Array.from(Ti):null)}}gn=function ib(n,r,s,d){const _=s[1],C=function B0(n,r,s){const d=pr();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),L_(n,d,r,ih(n,r,1,null),s),I_(n,d));const _=Ba(r,n,d.directiveStart,d);Wo(_,r);const C=hr(d,r);return C&&Wo(C,r),_}(_,s,r);if(n[8]=s[8]=C,null!==d)for(const F of d)F(C,r);if(r.contentQueries){const F=pr();r.contentQueries(1,C,F.directiveStart)}const P=pr();return!_.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Mt(P.index),cg(s[1],P,0,P.directiveStart,P.directiveEnd,r),O_(r,C)),C}(ei,this.componentDef,Wt,[rb]),rg(Pt,Wt,null)}finally{oe()}return new tb(this.componentType,gn,Zc(Rn,Wt),Wt,Rn)}}class tb extends class Im{}{constructor(r,s,d,_,C){super(),this.location=d,this._rootLView=_,this._tNode=C,this.instance=s,this.hostView=this.changeDetectorRef=new Ni(_),this.componentType=r}setInput(r,s){const d=this._tNode.inputs;let _;if(null!==d&&(_=d[r])){const C=this._rootLView;zf(C[1],C,_,r,s),A_(C,this._tNode.index)}}get injector(){return new ya(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function rb(){const n=pr();ni(Jt()[1],n)}function Uf(n){let r=function V_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const d=[n];for(;r;){let _;if(Kr(n))_=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new je(903,!1);_=r.\u0275dir}if(_){if(s){d.push(_);const P=n;P.inputs=jf(n.inputs),P.declaredInputs=jf(n.declaredInputs),P.outputs=jf(n.outputs);const F=_.hostBindings;F&&ab(n,F);const j=_.viewQuery,ie=_.contentQueries;if(j&&U_(n,j),ie&&sb(n,ie),$e(n.inputs,_.inputs),$e(n.declaredInputs,_.declaredInputs),$e(n.outputs,_.outputs),Kr(_)&&_.data.animation){const we=n.data;we.animation=(we.animation||[]).concat(_.data.animation)}}const C=_.features;if(C)for(let P=0;P<C.length;P++){const F=C[P];F&&F.ngInherit&&F(n),F===Uf&&(s=!1)}}r=Object.getPrototypeOf(r)}!function ob(n){let r=0,s=null;for(let d=n.length-1;d>=0;d--){const _=n[d];_.hostVars=r+=_.hostVars,_.hostAttrs=os(_.hostAttrs,s=os(s,_.hostAttrs))}}(d)}function jf(n){return n===dn?{}:n===Vt?[]:n}function U_(n,r){const s=n.viewQuery;n.viewQuery=s?(d,_)=>{r(d,_),s(d,_)}:r}function sb(n,r){const s=n.contentQueries;n.contentQueries=s?(d,_,C)=>{r(d,_,C),s(d,_,C)}:r}function ab(n,r){const s=n.hostBindings;n.hostBindings=s?(d,_)=>{r(d,_),s(d,_)}:r}let gp=null;function cd(){if(!gp){const n=Ae.Symbol;if(n&&n.iterator)gp=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const d=r[s];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(gp=d)}}}return gp}function _p(n){return!!Hf(n)&&(Array.isArray(n)||!(n instanceof Map)&&cd()in n)}function Hf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function aa(n,r,s){return n[r]=s}function la(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Tu(n,r,s,d){const _=la(n,r,s);return la(n,r+1,d)||_}function $_(n,r,s,d){const _=Jt();return la(_,ma(),r)&&(Vn(),Cc(jt(),_,n,r,s,d)),$_}function yp(n,r,s,d){return la(n,ma(),s)?r+wt(s)+d:w}function X_(n,r,s,d,_,C,P,F){const j=Jt(),ie=Vn(),we=n+22,Le=ie.firstCreatePass?function pb(n,r,s,d,_,C,P,F,j){const ie=r.consts,we=nh(r,n,4,P||null,vr(ie,F));lg(r,s,we,vr(ie,j)),ni(r,we);const Le=we.tViews=Lf(2,we,d,_,C,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ie);return null!==r.queries&&(r.queries.template(r,we),Le.queries=r.queries.embeddedTView(we)),we}(we,ie,j,r,s,d,_,C,P):ie.data[we];W(Le,!1);const ht=j[11].createComment("");qd(ie,j,ht,Le),Wo(ht,j),pp(j,j[we]=jr(ht,j,ht,Le)),fs(Le)&&og(ie,j,Le),null!=P&&sg(j,Le,F)}function J_(n){return Oo(function Dr(){return ri.lFrame.contextLView}(),22+n)}function Gf(n,r,s){const d=Jt();return la(d,ma(),r)&&ul(Vn(),jt(),d,n,r,d[11],s,!1),Gf}function Q_(n,r,s,d,_){const P=_?"class":"style";zf(n,s,r.inputs[P],P,d)}function dh(n,r,s,d){const _=Jt(),C=Vn(),P=22+n,F=_[11],j=_[P]=Qu(F,r,function ti(){return ri.lFrame.currentNamespace}()),ie=C.firstCreatePass?function mb(n,r,s,d,_,C,P){const F=r.consts,ie=nh(r,n,2,_,vr(F,C));return lg(r,s,ie,vr(F,P)),null!==ie.attrs&&Vf(ie,ie.attrs,!1),null!==ie.mergedAttrs&&Vf(ie,ie.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ie),ie}(P,C,_,0,r,s,d):C.data[P];W(ie,!0);const we=ie.mergedAttrs;null!==we&&Fl(F,j,we);const Le=ie.classes;null!==Le&&rd(F,j,Le);const ht=ie.styles;return null!==ht&&Sf(F,j,ht),64!=(64&ie.flags)&&qd(C,_,j,ie),0===function Cr(){return ri.lFrame.elementDepthCount}()&&Wo(j,_),function Os(){ri.lFrame.elementDepthCount++}(),fs(ie)&&(og(C,_,ie),M_(C,ie,_)),null!==d&&sg(_,ie),dh}function Zf(){let n=pr();ye()?Ut():(n=n.parent,W(n,!1));const r=n;!function Ra(){ri.lFrame.elementDepthCount--}();const s=Vn();return s.firstCreatePass&&(ni(s,n),$s(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function rc(n){return 0!=(16&n.flags)}(r)&&Q_(s,r,Jt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function _l(n){return 0!=(32&n.flags)}(r)&&Q_(s,r,Jt(),r.stylesWithoutHost,!1),Zf}function hh(n,r,s,d){return dh(n,r,s,d),Zf(),hh}function bp(n,r,s){const d=Jt(),_=Vn(),C=n+22,P=_.firstCreatePass?function ey(n,r,s,d,_){const C=r.consts,P=vr(C,d),F=nh(r,n,8,"ng-container",P);return null!==P&&Vf(F,P,!0),lg(r,s,F,vr(C,_)),null!==r.queries&&r.queries.elementStart(r,F),F}(C,_,d,r,s):_.data[C];W(P,!0);const F=d[C]=d[11].createComment("");return qd(_,d,F,P),Wo(F,d),fs(P)&&(og(_,d,P),M_(_,P,d)),null!=s&&sg(d,P),bp}function ph(){let n=pr();const r=Vn();return ye()?Ut():(n=n.parent,W(n,!1)),r.firstCreatePass&&(ni(r,n),$s(n)&&r.queries.elementEnd(n)),ph}function Wf(n,r,s){return bp(n,r,s),ph(),Wf}function gg(){return Jt()}function _g(n){return!!n&&"function"==typeof n.then}function yg(n){return!!n&&"function"==typeof n.subscribe}const ty=yg;function vg(n,r,s,d){const _=Jt(),C=Vn(),P=pr();return ny(C,_,_[11],P,n,r,0,d),vg}function bg(n,r){const s=pr(),d=Jt(),_=Vn();return ny(_,d,B_(_a(_.data),s,d),s,n,r),bg}function ny(n,r,s,d,_,C,P,F){const j=fs(d),we=n.firstCreatePass&&N_(n),Le=r[8],ht=F_(r);let Pt=!0;if(3&d.type||F){const Rn=hr(d,r),ei=F?F(Rn):Rn,Ci=ht.length,on=F?Ar=>F(Ji(Ar[d.index])):d.index;let Ti=null;if(!F&&j&&(Ti=function gb(n,r,s,d){const _=n.cleanup;if(null!=_)for(let C=0;C<_.length-1;C+=2){const P=_[C];if(P===s&&_[C+1]===d){const F=r[7],j=_[C+2];return F.length>j?F[j]:null}"string"==typeof P&&(C+=2)}return null}(n,r,_,d.index)),null!==Ti)(Ti.__ngLastListenerFn__||Ti).__ngNextListenerFn__=C,Ti.__ngLastListenerFn__=C,Pt=!1;else{C=ry(d,r,Le,C,!1);const Ar=s.listen(ei,_,C);ht.push(C,Ar),we&&we.push(_,on,Ci,Ci+1)}}else C=ry(d,r,Le,C,!1);const Wt=d.outputs;let gn;if(Pt&&null!==Wt&&(gn=Wt[_])){const Rn=gn.length;if(Rn)for(let ei=0;ei<Rn;ei+=2){const Io=r[gn[ei]][gn[ei+1]].subscribe(C),Lp=ht.length;ht.push(C,Io),we&&we.push(_,d.index,Lp,-(Lp+1))}}}function iy(n,r,s,d){try{return!1!==s(d)}catch(_){return z_(n,_),!1}}function ry(n,r,s,d,_){return function C(P){if(P===Function)return d;Nf(2&n.flags?ji(n.index,r):r);let j=iy(r,0,d,P),ie=C.__ngNextListenerFn__;for(;ie;)j=iy(r,0,ie,P)&&j,ie=ie.__ngNextListenerFn__;return _&&!1===j&&(P.preventDefault(),P.returnValue=!1),j}}function oy(n=1){return function q(n){return(ri.lFrame.contextLView=function be(n,r){for(;n>0;)r=r[15],n--;return r}(n,ri.lFrame.contextLView))[8]}(n)}function _b(n,r){let s=null;const d=function xu(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let _=0;_<r.length;_++){const C=r[_];if("*"!==C){if(null===d?Yd(n,C,!0):o(d,C))return _}else s=_}return s}function xg(n){const r=Jt()[16][6];if(!r.projection){const d=r.projection=ne(n?n.length:1,null),_=d.slice();let C=r.child;for(;null!==C;){const P=n?_b(C,n):0;null!==P&&(_[P]?_[P].projectionNext=C:d[P]=C,_[P]=C),C=C.next}}}function sy(n,r=0,s){const d=Jt(),_=Vn(),C=nh(_,22+n,16,null,s||null);null===C.projection&&(C.projection=r),Ut(),64!=(64&C.flags)&&function ap(n,r,s){Ef(r[11],0,r,s,Sl(n,s,r),Kc(s.parent||r[6],s,r))}(_,d,C)}function gy(n,r,s,d,_){const C=n[s+1],P=null===r;let F=d?Tr(C):ds(C),j=!1;for(;0!==F&&(!1===j||P);){const we=n[F+1];_y(n[F],r)&&(j=!0,n[F+1]=d?hs(we):Ma(we)),F=d?Tr(we):ds(we)}j&&(n[s+1]=d?Ma(C):hs(C))}function _y(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&me(n,r)>=0}const Jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yy(n){return n.substring(Jo.key,Jo.keyEnd)}function vy(n){return n.substring(Jo.value,Jo.valueEnd)}function by(n,r){const s=Jo.textEnd;return s===r?-1:(r=Jo.keyEnd=function xb(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,Jo.key=r,s),fh(n,r,s))}function xy(n,r){const s=Jo.textEnd;let d=Jo.key=fh(n,r,s);return s===d?-1:(d=Jo.keyEnd=function wb(n,r,s){let d;for(;r<s&&(45===(d=n.charCodeAt(r))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)r++;return r}(n,d,s),d=Cy(n,d,s),d=Jo.value=fh(n,d,s),d=Jo.valueEnd=function Cb(n,r,s){let d=-1,_=-1,C=-1,P=r,F=P;for(;P<s;){const j=n.charCodeAt(P++);if(59===j)return F;34===j||39===j?F=P=Ey(n,j,P,s):r===P-4&&85===C&&82===_&&76===d&&40===j?F=P=Ey(n,41,P,s):j>32&&(F=P),C=_,_=d,d=-33&j}return F}(n,d,s),Cy(n,d,s))}function wy(n){Jo.key=0,Jo.keyEnd=0,Jo.value=0,Jo.valueEnd=0,Jo.textEnd=n.length}function fh(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Cy(n,r,s,d){return(r=fh(n,r,s))<s&&r++,r}function Ey(n,r,s,d){let _=-1,C=s;for(;C<d;){const P=n.charCodeAt(C++);if(P==r&&92!==_)return C;_=92==P&&92===_?0:P}throw new Error}function wg(n,r,s){return Yl(n,r,s,!1),wg}function Cg(n,r){return Yl(n,r,null,!0),Cg}function hl(n){Xl(Sy,Eb,n,!1)}function Eb(n,r){for(let s=function bb(n){return wy(n),xy(n,fh(n,0,Jo.textEnd))}(r);s>=0;s=xy(r,s))Sy(n,yy(r),vy(r))}function Kf(n){Xl(se,Dc,n,!0)}function Dc(n,r){for(let s=function vb(n){return wy(n),by(n,fh(n,0,Jo.textEnd))}(r);s>=0;s=by(r,s))se(n,yy(r),!0)}function Yl(n,r,s,d){const _=Jt(),C=Vn(),P=ks(2);C.firstUpdatePass&&My(C,n,P,d),r!==w&&la(_,P,r)&&Ty(C,C.data[Qe()],_,_[11],n,_[P+1]=function Pb(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ie(il(n)))),n}(r,s),d,P)}function Xl(n,r,s,d){const _=Vn(),C=ks(2);_.firstUpdatePass&&My(_,null,C,d);const P=Jt();if(s!==w&&la(P,C,s)){const F=_.data[Qe()];if(Ay(F,d)&&!Dy(_,C)){let j=d?F.classesWithoutHost:F.stylesWithoutHost;null!==j&&(s=Be(j,s||"")),Q_(_,F,P,s,d)}else!function Ab(n,r,s,d,_,C,P,F){_===w&&(_=Vt);let j=0,ie=0,we=0<_.length?_[0]:null,Le=0<C.length?C[0]:null;for(;null!==we||null!==Le;){const ht=j<_.length?_[j+1]:void 0,Pt=ie<C.length?C[ie+1]:void 0;let gn,Wt=null;we===Le?(j+=2,ie+=2,ht!==Pt&&(Wt=Le,gn=Pt)):null===Le||null!==we&&we<Le?(j+=2,Wt=we):(ie+=2,Wt=Le,gn=Pt),null!==Wt&&Ty(n,r,s,d,Wt,gn,P,F),we=j<_.length?_[j]:null,Le=ie<C.length?C[ie]:null}}(_,F,P,P[11],P[C+1],P[C+1]=function Ib(n,r,s){if(null==s||""===s)return Vt;const d=[],_=il(s);if(Array.isArray(_))for(let C=0;C<_.length;C++)n(d,_[C],!0);else if("object"==typeof _)for(const C in _)_.hasOwnProperty(C)&&n(d,C,_[C]);else"string"==typeof _&&r(d,_);return d}(n,r,s),d,C)}}function Dy(n,r){return r>=n.expandoStartIndex}function My(n,r,s,d){const _=n.data;if(null===_[s+1]){const C=_[Qe()],P=Dy(n,s);Ay(C,d)&&null===r&&!P&&(r=!1),r=function Db(n,r,s,d){const _=_a(n);let C=d?r.residualClasses:r.residualStyles;if(null===_)0===(d?r.classBindings:r.styleBindings)&&(s=xp(s=Eg(null,n,r,s,d),r.attrs,d),C=null);else{const P=r.directiveStylingLast;if(-1===P||n[P]!==_)if(s=Eg(_,n,r,s,d),null===C){let j=function Mb(n,r,s){const d=s?r.classBindings:r.styleBindings;if(0!==ds(d))return n[Tr(d)]}(n,r,d);void 0!==j&&Array.isArray(j)&&(j=Eg(null,n,r,j[1],d),j=xp(j,r.attrs,d),function Sb(n,r,s,d){n[Tr(s?r.classBindings:r.styleBindings)]=d}(n,r,d,j))}else C=function Tb(n,r,s){let d;const _=r.directiveEnd;for(let C=1+r.directiveStylingLast;C<_;C++)d=xp(d,n[C].hostAttrs,s);return xp(d,r.attrs,s)}(n,r,d)}return void 0!==C&&(d?r.residualClasses=C:r.residualStyles=C),s}(_,C,r,d),function Hi(n,r,s,d,_,C){let P=C?r.classBindings:r.styleBindings,F=Tr(P),j=ds(P);n[d]=s;let we,ie=!1;if(Array.isArray(s)){const Le=s;we=Le[1],(null===we||me(Le,we)>0)&&(ie=!0)}else we=s;if(_)if(0!==j){const ht=Tr(n[F+1]);n[d+1]=xo(ht,F),0!==ht&&(n[ht+1]=js(n[ht+1],d)),n[F+1]=function ll(n,r){return 131071&n|r<<17}(n[F+1],d)}else n[d+1]=xo(F,0),0!==F&&(n[F+1]=js(n[F+1],d)),F=d;else n[d+1]=xo(j,0),0===F?F=d:n[j+1]=js(n[j+1],d),j=d;ie&&(n[d+1]=Ma(n[d+1])),gy(n,we,d,!0),gy(n,we,d,!1),function yb(n,r,s,d,_){const C=_?n.residualClasses:n.residualStyles;null!=C&&"string"==typeof r&&me(C,r)>=0&&(s[d+1]=hs(s[d+1]))}(r,we,n,d,C),P=xo(F,j),C?r.classBindings=P:r.styleBindings=P}(_,C,r,s,P,d)}}function Eg(n,r,s,d,_){let C=null;const P=s.directiveEnd;let F=s.directiveStylingLast;for(-1===F?F=s.directiveStart:F++;F<P&&(C=r[F],d=xp(d,C.hostAttrs,_),C!==n);)F++;return null!==n&&(s.directiveStylingLast=F),d}function xp(n,r,s){const d=s?1:2;let _=-1;if(null!==r)for(let C=0;C<r.length;C++){const P=r[C];"number"==typeof P?_=P:_===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),se(n,P,!!s||r[++C]))}return void 0===n?null:n}function Sy(n,r,s){se(n,r,il(s))}function Ty(n,r,s,d,_,C,P,F){if(!(3&r.type))return;const j=n.data,ie=j[F+1];Yf(function oa(n){return 1==(1&n)}(ie)?Iy(j,r,s,_,ds(ie),P):void 0)||(Yf(C)||function Da(n){return 2==(2&n)}(ie)&&(C=Iy(j,null,s,_,F,P)),function Mf(n,r,s,d,_){if(r)_?n.addClass(s,d):n.removeClass(s,d);else{let C=-1===d.indexOf("-")?void 0:wa.DashCase;null==_?n.removeStyle(s,d,C):("string"==typeof _&&_.endsWith("!important")&&(_=_.slice(0,-10),C|=wa.Important),n.setStyle(s,d,_,C))}}(d,P,ka(Qe(),s),_,C))}function Iy(n,r,s,d,_,C){const P=null===r;let F;for(;_>0;){const j=n[_],ie=Array.isArray(j),we=ie?j[1]:j,Le=null===we;let ht=s[_+1];ht===w&&(ht=Le?Vt:void 0);let Pt=Le?pe(ht,d):we===d?ht:void 0;if(ie&&!Yf(Pt)&&(Pt=pe(j,d)),Yf(Pt)&&(F=Pt,P))return F;const Wt=n[_+1];_=P?Tr(Wt):ds(Wt)}if(null!==r){let j=C?r.residualClasses:r.residualStyles;null!=j&&(F=pe(j,d))}return F}function Yf(n){return void 0!==n}function Ay(n,r){return 0!=(n.flags&(r?16:32))}function Py(n,r=""){const s=Jt(),d=Vn(),_=n+22,C=d.firstCreatePass?nh(d,_,1,r,null):d.data[_],P=s[_]=function xc(n,r){return n.createText(r)}(s[11],r);qd(d,s,P,C),W(C,!1)}function Dg(n){return Xf("",n,""),Dg}function Xf(n,r,s){const d=Jt(),_=yp(d,n,r,s);return _!==w&&function mo(n,r,s){const d=ka(r,n);!function Hd(n,r,s){n.setValue(r,s)}(n[11],d,s)}(d,Qe(),_),Xf}function Mg(n,r,s){Xl(se,Dc,yp(Jt(),n,r,s),!0)}function Sg(n,r,s){const d=Jt();return la(d,ma(),r)&&ul(Vn(),jt(),d,n,r,d[11],s,!0),Sg}function Tg(n,r,s){const d=Jt();if(la(d,ma(),r)){const C=Vn(),P=jt();ul(C,P,d,n,r,B_(_a(C.data),P,d),s,!0)}return Tg}const dd=void 0;var Zb=["en",[["a","p"],["AM","PM"],dd],[["AM","PM"],dd,dd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dd,"{1} 'at' {0}",dd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Gb(n){const s=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===d?1:5}];let gh={};function Ig(n){const r=function Wb(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Qy(r);if(s)return s;const d=r.split("-")[0];if(s=Qy(d),s)return s;if("en"===d)return Zb;throw new je(701,!1)}function Jy(n){return Ig(n)[wi.PluralCase]}function Qy(n){return n in gh||(gh[n]=Ae.ng&&Ae.ng.common&&Ae.ng.common.locales&&Ae.ng.common.locales[n]),gh[n]}var wi=(()=>((wi=wi||{})[wi.LocaleId=0]="LocaleId",wi[wi.DayPeriodsFormat=1]="DayPeriodsFormat",wi[wi.DayPeriodsStandalone=2]="DayPeriodsStandalone",wi[wi.DaysFormat=3]="DaysFormat",wi[wi.DaysStandalone=4]="DaysStandalone",wi[wi.MonthsFormat=5]="MonthsFormat",wi[wi.MonthsStandalone=6]="MonthsStandalone",wi[wi.Eras=7]="Eras",wi[wi.FirstDayOfWeek=8]="FirstDayOfWeek",wi[wi.WeekendRange=9]="WeekendRange",wi[wi.DateFormat=10]="DateFormat",wi[wi.TimeFormat=11]="TimeFormat",wi[wi.DateTimeFormat=12]="DateTimeFormat",wi[wi.NumberSymbols=13]="NumberSymbols",wi[wi.NumberFormats=14]="NumberFormats",wi[wi.CurrencyCode=15]="CurrencyCode",wi[wi.CurrencySymbol=16]="CurrencySymbol",wi[wi.CurrencyName=17]="CurrencyName",wi[wi.Currencies=18]="Currencies",wi[wi.Directionality=19]="Directionality",wi[wi.PluralCase=20]="PluralCase",wi[wi.ExtraData=21]="ExtraData",wi))();const _h="en-US";let Xb=_h;function Rg(n,r,s,d,_){if(n=Re(n),Array.isArray(n))for(let C=0;C<n.length;C++)Rg(n[C],r,s,d,_);else{const C=Vn(),P=Jt();let F=jc(n)?n:Re(n.provide),j=Xp(n);const ie=pr(),we=1048575&ie.providerIndexes,Le=ie.directiveStart,ht=ie.providerIndexes>>20;if(jc(n)||!n.multi){const Pt=new Vr(j,_,qr),Wt=Ng(F,r,_?we:we+ht,Le);-1===Wt?(Rs(Wr(ie,P),C,F),Lg(C,n,r.length),r.push(F),ie.directiveStart++,ie.directiveEnd++,_&&(ie.providerIndexes+=1048576),s.push(Pt),P.push(Pt)):(s[Wt]=Pt,P[Wt]=Pt)}else{const Pt=Ng(F,r,we+ht,Le),Wt=Ng(F,r,we,we+ht),gn=Pt>=0&&s[Pt],Rn=Wt>=0&&s[Wt];if(_&&!Rn||!_&&!gn){Rs(Wr(ie,P),C,F);const ei=function jx(n,r,s,d,_){const C=new Vr(n,s,qr);return C.multi=[],C.index=r,C.componentProviders=0,Fg(C,_,d&&!s),C}(_?Ux:Vx,s.length,_,d,j);!_&&Rn&&(s[Wt].providerFactory=ei),Lg(C,n,r.length,0),r.push(F),ie.directiveStart++,ie.directiveEnd++,_&&(ie.providerIndexes+=1048576),s.push(ei),P.push(ei)}else Lg(C,n,Pt>-1?Pt:Wt,Fg(s[_?Wt:Pt],j,!_&&d));!_&&d&&Rn&&s[Wt].componentProviders++}}}function Lg(n,r,s,d){const _=jc(r),C=function Dm(n){return!!n.useClass}(r);if(_||C){const j=(C?Re(r.useClass):r).prototype.ngOnDestroy;if(j){const ie=n.destroyHooks||(n.destroyHooks=[]);if(!_&&r.multi){const we=ie.indexOf(s);-1===we?ie.push(s,[d,j]):ie[we+1].push(d,j)}else ie.push(s,j)}}}function Fg(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Ng(n,r,s,d){for(let _=s;_<d;_++)if(r[_]===n)return _;return-1}function Vx(n,r,s,d){return Bg(this.multi,[])}function Ux(n,r,s,d){const _=this.multi;let C;if(this.providerFactory){const P=this.providerFactory.componentProviders,F=Ba(s,s[1],this.providerFactory.index,d);C=F.slice(0,P),Bg(_,C);for(let j=P;j<F.length;j++)C.push(F[j])}else C=[],Bg(_,C);return C}function Bg(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function xv(n,r=[]){return s=>{s.providersResolver=(d,_)=>function zx(n,r,s){const d=Vn();if(d.firstCreatePass){const _=Kr(n);Rg(s,d.data,d.blueprint,_,!0),Rg(r,d.data,d.blueprint,_,!1)}}(d,_?_(n):n,r)}}class yh{}class zg{}function Vg(n,r){return new wv(n,r??null)}class wv extends yh{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dl(this);const d=Rt(r);this._bootstrapComponents=al(d.bootstrap),this._r3Injector=vt(r,s,[{provide:yh,useValue:this},{provide:cu,useValue:this.componentFactoryResolver}],Ie(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Ug extends zg{constructor(r){super(),this.moduleType=r}create(r){return new wv(this.moduleType,r)}}class $x extends yh{constructor(r,s,d){super(),this.componentFactoryResolver=new dl(this),this.instance=null;const _=new Td([...r,{provide:yh,useValue:this},{provide:cu,useValue:this.componentFactoryResolver}],s||Sd(),d,new Set(["environment"]));this.injector=_,_.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Cv(n,r,s=null){return new $x(n,r,s).injector}let Ev=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const d=qp(0,s.type),_=d.length>0?Cv([d],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,_)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ln({token:n,providedIn:"environment",factory:()=>new n(or(Hc))}),n})();function jg(n){n.getStandaloneInjector=r=>r.get(Ev).getOrCreateStandaloneInjector(n)}function Iv(n,r,s){const d=Qi()+n,_=Jt();return _[d]===w?aa(_,d,s?r.call(s):r()):function ja(n,r){return n[r]}(_,d)}function Mp(n,r,s,d){return Ov(Jt(),Qi(),n,r,s,d)}function Av(n,r,s,d,_){return function kv(n,r,s,d,_,C,P){const F=r+s;return Tu(n,F,_,C)?aa(n,F+2,P?d.call(P,_,C):d(_,C)):Sp(n,F+2)}(Jt(),Qi(),n,r,s,d,_)}function Pv(n,r,s,d,_,C){return function Rv(n,r,s,d,_,C,P,F){const j=r+s;return function $f(n,r,s,d,_){const C=Tu(n,r,s,d);return la(n,r+2,_)||C}(n,j,_,C,P)?aa(n,j+3,F?d.call(F,_,C,P):d(_,C,P)):Sp(n,j+3)}(Jt(),Qi(),n,r,s,d,_,C)}function Gg(n,r,s,d){return function Fv(n,r,s,d,_,C){let P=r+s,F=!1;for(let j=0;j<_.length;j++)la(n,P++,_[j])&&(F=!0);return F?aa(n,P,d.apply(C,_)):Sp(n,P)}(Jt(),Qi(),n,r,s,d)}function Sp(n,r){const s=n[r];return s===w?void 0:s}function Ov(n,r,s,d,_,C){const P=r+s;return la(n,P,_)?aa(n,P+1,C?d.call(C,_):d(_)):Sp(n,P+1)}function Nv(n,r){const s=Vn();let d;const _=n+22;s.firstCreatePass?(d=function iw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const d=r[s];if(n===d.name)return d}}(r,s.pipeRegistry),s.data[_]=d,d.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(_,d.onDestroy)):d=s.data[_];const C=d.factory||(d.factory=ao(d.type)),P=Y(qr);try{const F=Xa(!1),j=C();return Xa(F),function fb(n,r,s,d){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=d}(s,Jt(),_,j),j}finally{Y(P)}}function Bv(n,r,s){const d=n+22,_=Jt(),C=Oo(_,d);return function Tp(n,r){return n[1].data[r].pure}(_,d)?Ov(_,Qi(),r,C.transform,s,C):C.transform(s)}function nm(n){return r=>{setTimeout(n,void 0,r)}}const Mc=class aw extends T.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,d){let _=r,C=s||(()=>null),P=d;if(r&&"object"==typeof r){const j=r;_=j.next?.bind(j),C=j.error?.bind(j),P=j.complete?.bind(j)}this.__isAsync&&(C=nm(C),_&&(_=nm(_)),P&&(P=nm(P)));const F=super.subscribe({next:_,error:C,complete:P});return r instanceof l.w0&&r.add(F),F}};function lw(){return this._results[cd()]()}class im{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=cd(),d=im.prototype;d[s]||(d[s]=lw)}get changes(){return this._changes||(this._changes=new Mc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const d=this;d.dirty=!1;const _=R(r);(this._changesDetected=!function S(n,r,s){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let _=n[d],C=r[d];if(s&&(_=s(_),C=s(C)),C!==_)return!1}return!0}(d._results,_,s))&&(d._results=_,d.length=_.length,d.last=_[this.length-1],d.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ip=(()=>{class n{}return n.__NG_ELEMENT_ID__=dw,n})();const cw=Ip,uw=class extends cw{constructor(r,s,d){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=d}createEmbeddedView(r,s){const d=this._declarationTContainer.tViews,_=Rf(this._declarationLView,d,r,16,null,d.declTNode,null,null,null,null,s||null);_[17]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[19];return null!==P&&(_[19]=P.createEmbeddedView(d)),rg(d,_,r),new ii(_)}};function dw(){return rm(pr(),Jt())}function rm(n,r){return 4&n.type?new uw(r,n,Zc(n,r)):null}let om=(()=>{class n{}return n.__NG_ELEMENT_ID__=hw,n})();function hw(){return Uv(pr(),Jt())}const pw=om,zv=class extends pw{constructor(r,s,d){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=d}get element(){return Zc(this._hostTNode,this._hostLView)}get injector(){return new ya(this._hostTNode,this._hostLView)}get parentInjector(){const r=ea(this._hostTNode,this._hostLView);if(Nl(r)){const s=as(r,this._hostLView),d=ss(r);return new ya(s[1].data[d+8],s)}return new ya(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Vv(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,d){let _,C;"number"==typeof d?_=d:null!=d&&(_=d.index,C=d.injector);const P=r.createEmbeddedView(s||{},C);return this.insert(P,_),P}createComponent(r,s,d,_,C){const P=r&&!function m(n){return"function"==typeof n}(r);let F;if(P)F=s;else{const Le=s||{};F=Le.index,d=Le.injector,_=Le.projectableNodes,C=Le.environmentInjector||Le.ngModuleRef}const j=P?r:new mp(Ye(r)),ie=d||this.parentInjector;if(!C&&null==j.ngModule){const ht=(P?ie:this.parentInjector).get(Hc,null);ht&&(C=ht)}const we=j.create(ie,_,void 0,C);return this.insert(we.hostView,F),we}insert(r,s){const d=r._lView,_=d[1];if(function As(n){return wr(n[3])}(d)){const we=this.indexOf(r);if(-1!==we)this.detach(we);else{const Le=d[3],ht=new zv(Le,Le[6],Le[3]);ht.detach(ht.indexOf(r))}}const C=this._adjustIndex(s),P=this._lContainer;!function bf(n,r,s,d){const _=10+d,C=s.length;d>0&&(s[_-1][4]=r),d<C-10?(r[4]=s[_],z(s,10+d,r)):(s.push(r),r[4]=null),r[3]=s;const P=r[17];null!==P&&s!==P&&function tp(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(P,r);const F=r[19];null!==F&&F.insertView(n),r[2]|=64}(_,d,P,C);const F=sp(C,P),j=d[11],ie=td(j,P[7]);return null!==ie&&function vf(n,r,s,d,_,C){d[0]=_,d[6]=r,bu(n,d,s,1,_,C)}(_,P[6],j,d,ie,F),r.attachToViewContainerRef(),z(Zg(P),C,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Vv(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),d=Gd(this._lContainer,s);d&&(Z(Zg(this._lContainer),s),np(d[1],d))}detach(r){const s=this._adjustIndex(r,-1),d=Gd(this._lContainer,s);return d&&null!=Z(Zg(this._lContainer),s)?new ii(d):null}_adjustIndex(r,s=0){return r??this.length+s}};function Vv(n){return n[8]}function Zg(n){return n[8]||(n[8]=[])}function Uv(n,r){let s;const d=r[n.index];if(wr(d))s=d;else{let _;if(8&n.type)_=Ji(d);else{const C=r[11];_=C.createComment("");const P=hr(n,r);wc(C,td(C,P),_,function wf(n,r){return n.nextSibling(r)}(C,P),!1)}r[n.index]=s=jr(d,r,_,n),pp(r,s)}return new zv(s,n,r)}class Wg{constructor(r){this.queryList=r,this.matches=null}clone(){return new Wg(this.queryList)}setDirty(){this.queryList.setDirty()}}class qg{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const d=null!==r.contentQueries?r.contentQueries[0]:s.length,_=[];for(let C=0;C<d;C++){const P=s.getByIndex(C);_.push(this.queries[P.indexInDeclarationView].clone())}return new qg(_)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Xv(r,s).matches&&this.queries[s].setDirty()}}class jv{constructor(r,s,d=null){this.predicate=r,this.flags=s,this.read=d}}class Kg{constructor(r=[]){this.queries=r}elementStart(r,s){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let d=0;d<this.length;d++){const _=null!==s?s.length:0,C=this.getByIndex(d).embeddedTView(r,_);C&&(C.indexInDeclarationView=d,null!==s?s.push(C):s=[C])}return null!==s?new Kg(s):null}template(r,s){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Yg{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new Yg(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==s;)d=d.parent;return s===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const d=this.metadata.predicate;if(Array.isArray(d))for(let _=0;_<d.length;_++){const C=d[_];this.matchTNodeWithReadOption(r,s,gw(s,C)),this.matchTNodeWithReadOption(r,s,xl(s,r,C,!1,!1))}else d===Ip?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,xl(s,r,d,!1,!1))}matchTNodeWithReadOption(r,s,d){if(null!==d){const _=this.metadata.read;if(null!==_)if(_===Hu||_===om||_===Ip&&4&s.type)this.addMatch(s.index,-2);else{const C=xl(s,r,_,!1,!1);null!==C&&this.addMatch(s.index,C)}else this.addMatch(s.index,d)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function gw(n,r){const s=n.localNames;if(null!==s)for(let d=0;d<s.length;d+=2)if(s[d]===r)return s[d+1];return null}function Hv(n,r,s,d){return-1===s?function _w(n,r){return 11&n.type?Zc(n,r):4&n.type?rm(n,r):null}(r,n):-2===s?function yw(n,r,s){return s===Hu?Zc(r,n):s===Ip?rm(r,n):s===om?Uv(r,n):void 0}(n,r,d):Ba(n,n[1],s,r)}function $v(n,r,s,d){const _=r[19].queries[d];if(null===_.matches){const C=n.data,P=s.matches,F=[];for(let j=0;j<P.length;j+=2){const ie=P[j];F.push(ie<0?null:Hv(r,C[ie],P[j+1],s.metadata.read))}_.matches=F}return _.matches}function Xg(n,r,s,d){const _=n.queries.getByIndex(s),C=_.matches;if(null!==C){const P=$v(n,r,_,s);for(let F=0;F<C.length;F+=2){const j=C[F];if(j>0)d.push(P[F/2]);else{const ie=C[F+1],we=r[-j];for(let Le=10;Le<we.length;Le++){const ht=we[Le];ht[17]===ht[3]&&Xg(ht[1],ht,ie,d)}if(null!==we[9]){const Le=we[9];for(let ht=0;ht<Le.length;ht++){const Pt=Le[ht];Xg(Pt[1],Pt,ie,d)}}}}}return d}function Gv(n){const r=Jt(),s=Vn(),d=gl();Fa(d+1);const _=Xv(s,d);if(n.dirty&&function fl(n){return 4==(4&n[2])}(r)===(2==(2&_.metadata.flags))){if(null===_.matches)n.reset([]);else{const C=_.crossesNgTemplate?Xg(s,r,d,[]):$v(s,r,_,d);n.reset(C,Ad),n.notifyOnChanges()}return!0}return!1}function Zv(n,r,s){const d=Vn();d.firstCreatePass&&(Yv(d,new jv(n,r,s),-1),2==(2&r)&&(d.staticViewQueries=!0)),Kv(d,Jt(),r)}function Wv(n,r,s,d){const _=Vn();if(_.firstCreatePass){const C=pr();Yv(_,new jv(r,s,d),C.index),function bw(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(_,n),2==(2&s)&&(_.staticContentQueries=!0)}Kv(_,Jt(),s)}function qv(){return function vw(n,r){return n[19].queries[r].queryList}(Jt(),gl())}function Kv(n,r,s){const d=new im(4==(4&s));T_(n,r,d,d.destroy),null===r[19]&&(r[19]=new qg),r[19].queries.push(new Wg(d))}function Yv(n,r,s){null===n.queries&&(n.queries=new Kg),n.queries.track(new Yg(r,s))}function Xv(n,r){return n.queries.getByIndex(r)}function am(...n){}const hd=new $i("Application Initializer");let lm=(()=>{class n{constructor(s){this.appInits=s,this.resolve=am,this.reject=am,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,_)=>{this.resolve=d,this.reject=_})}runInitializers(){if(this.initialized)return;const s=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let _=0;_<this.appInits.length;_++){const C=this.appInits[_]();if(_g(C))s.push(C);else if(ty(C)){const P=new Promise((F,j)=>{C.subscribe({complete:F,error:j})});s.push(P)}}Promise.all(s).then(()=>{d()}).catch(_=>{this.reject(_)}),0===s.length&&d(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(or(hd,8))},n.\u0275prov=ln({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const s_=new $i("AppId",{providedIn:"root",factory:function pd(){return`${Pp()}${Pp()}${Pp()}`}});function Pp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cm=new $i("Platform Initializer"),Fw=new $i("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),a_=new $i("appBootstrapListener"),um=new $i("AnimationModuleType");let Nw=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ln({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Op=new $i("LocaleId",{providedIn:"root",factory:()=>na(Op,un.Optional|un.SkipSelf)||function Bw(){return typeof $localize<"u"&&$localize.locale||_h}()}),xh=new $i("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class dm{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Vw=(()=>{class n{compileModuleSync(s){return new Ug(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const d=this.compileModuleSync(s),C=al(Rt(s).declarations).reduce((P,F)=>{const j=Ye(F);return j&&P.push(new mp(j)),P},[]);return new dm(d,C)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ln({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hw=(()=>Promise.resolve(0))();function kp(n){typeof Zone>"u"?Hw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Tl{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mc(!1),this.onMicrotaskEmpty=new Mc(!1),this.onStable=new Mc(!1),this.onError=new Mc(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();const _=this;if(_._nesting=0,_._outer=_._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const C=Zone.AsyncStackTaggingZoneSpec;_._inner=_._inner.fork(new C("Angular"))}Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!d&&s,_.shouldCoalesceRunChangeDetection=d,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function x0(){let n=Ae.requestAnimationFrame,r=Ae.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Gw(n){const r=()=>{!function d_(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ae,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,h_(n),n.isCheckStableRunning=!0,u_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),h_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,d,_,C,P,F)=>{try{return w0(n),s.invokeTask(_,C,P,F)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===C.type||n.shouldCoalesceRunChangeDetection)&&r(),C0(n)}},onInvoke:(s,d,_,C,P,F,j)=>{try{return w0(n),s.invoke(_,C,P,F,j)}finally{n.shouldCoalesceRunChangeDetection&&r(),C0(n)}},onHasTask:(s,d,_,C)=>{s.hasTask(_,C),d===_&&("microTask"==C.change?(n._hasPendingMicrotasks=C.microTask,h_(n),u_(n)):"macroTask"==C.change&&(n.hasPendingMacrotasks=C.macroTask))},onHandleError:(s,d,_,C)=>(s.handleError(_,C),n.runOutsideAngular(()=>n.onError.emit(C)),!1)})}(_)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tl.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(Tl.isInAngularZone())throw new je(909,!1)}run(r,s,d){return this._inner.run(r,s,d)}runTask(r,s,d,_){const C=this._inner,P=C.scheduleEventTask("NgZoneEvent: "+_,r,$w,am,am);try{return C.runTask(P,s,d)}finally{C.cancelTask(P)}}runGuarded(r,s,d){return this._inner.runGuarded(r,s,d)}runOutsideAngular(r){return this._outer.run(r)}}const $w={};function u_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function h_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function w0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function C0(n){n._nesting--,u_(n)}class Zw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mc,this.onMicrotaskEmpty=new Mc,this.onStable=new Mc,this.onError=new Mc}run(r,s,d){return r.apply(s,d)}runGuarded(r,s,d){return r.apply(s,d)}runOutsideAngular(r){return r()}runTask(r,s,d,_){return r.apply(s,d)}}const Sc=new $i(""),E0=new $i("");let p_,rC=(()=>{class n{constructor(s,d,_){this._ngZone=s,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,p_||(function Ww(n){p_=n}(_),_.addToWindow(d)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tl.assertNotInAngularZone(),kp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kp(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(s)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,d,_){let C=-1;d&&d>0&&(C=setTimeout(()=>{this._callbacks=this._callbacks.filter(P=>P.timeoutId!==C),s(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:s,timeoutId:C,updateCb:_})}whenStable(s,d,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,d,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,d,_){return[]}}return n.\u0275fac=function(s){return new(s||n)(or(Tl),or(D0),or(E0))},n.\u0275prov=ln({token:n,factory:n.\u0275fac}),n})(),D0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,d){this._applications.set(s,d)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,d=!0){return p_?.findTestabilityInTree(this,s,d)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ln({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ai=null;const pm=new $i("AllowMultipleToken"),f_=new $i("PlatformDestroyListeners");class Yw{constructor(r,s){this.name=r,this.token=s}}function c(n,r,s=[]){const d=`Platform: ${r}`,_=new $i(d);return(C=[])=>{let P=I();if(!P||P.injector.get(pm,!1)){const F=[...s,...C,{provide:_,useValue:!0}];n?n(F):function Xw(n){if(ai&&!ai.get(pm,!1))throw new je(400,!1);ai=n;const r=n.get(N);(function M0(n){const r=n.get(cm,null);r&&r.forEach(s=>s())})(n)}(function i(n=[],r){return st.create({name:r,providers:[{provide:Md,useValue:"platform"},{provide:f_,useValue:new Set([()=>ai=null])},...n]})}(F,d))}return function h(n){const r=I();if(!r)throw new je(401,!1);return r}()}}function I(){return ai?.get(N)??null}let N=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,d){const _=function Ee(n,r){let s;return s="noop"===n?new Zw:("zone.js"===n?void 0:n)||new Tl(r),s}(d?.ngZone,function ce(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),C=[{provide:Tl,useValue:_}];return _.run(()=>{const P=st.create({providers:C,parent:this.injector,name:s.moduleType.name}),F=s.create(P),j=F.injector.get(gc,null);if(!j)throw new je(402,!1);return _.runOutsideAngular(()=>{const ie=_.onError.subscribe({next:we=>{j.handleError(we)}});F.onDestroy(()=>{$t(this._modules,F),ie.unsubscribe()})}),function Ge(n,r,s){try{const d=s();return _g(d)?d.catch(_=>{throw r.runOutsideAngular(()=>n.handleError(_)),_}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(j,_,()=>{const ie=F.injector.get(lm);return ie.runInitializers(),ie.donePromise.then(()=>(function Jb(n){mi(n,"Expected localeId to be defined"),"string"==typeof n&&(Xb=n.toLowerCase().replace(/_/g,"-"))}(F.injector.get(Op,_h)||_h),this._moduleDoBootstrap(F),F))})})}bootstrapModule(s,d=[]){const _=yt({},d);return function qw(n,r,s){const d=new Ug(s);return Promise.resolve(d)}(0,0,s).then(C=>this.bootstrapModuleFactory(C,_))}_moduleDoBootstrap(s){const d=s.injector.get(zt);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(_=>d.bootstrap(_));else{if(!s.instance.ngDoBootstrap)throw new je(403,!1);s.instance.ngDoBootstrap(d)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const s=this._injector.get(f_,null);s&&(s.forEach(d=>d()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(or(st))},n.\u0275prov=ln({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function yt(n,r){return Array.isArray(r)?r.reduce(yt,n):{...n,...r}}let zt=(()=>{class n{constructor(s,d,_){this._zone=s,this._injector=d,this._exceptionHandler=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new H.y(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),P=new H.y(F=>{let j;this._zone.runOutsideAngular(()=>{j=this._zone.onStable.subscribe(()=>{Tl.assertNotInAngularZone(),kp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const ie=this._zone.onUnstable.subscribe(()=>{Tl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{j.unsubscribe(),ie.unsubscribe()}});this.isStable=(0,g.T)(C,P.pipe((0,He.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,d){const _=s instanceof Qp;if(!this._injector.get(lm).done)throw!_&&at(s),new je(405,false);let P;P=_?s:this._injector.get(cu).resolveComponentFactory(s),this.componentTypes.push(P.componentType);const F=function Kw(n){return n.isBoundToModule}(P)?void 0:this._injector.get(yh),ie=P.create(st.NULL,[],d||P.selector,F),we=ie.location.nativeElement,Le=ie.injector.get(Sc,null);return Le?.registerApplication(we),ie.onDestroy(()=>{this.detachView(ie.hostView),$t(this.components,ie),Le?.unregisterApplication(we)}),this._loadComponent(ie),ie}tick(){if(this._runningTick)throw new je(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const d=s;this._views.push(d),d.attachToAppRef(this)}detachView(s){const d=s;$t(this._views,d),d.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(a_,[]).concat(this._bootstrapListeners).forEach(_=>_(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>$t(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new je(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(or(Tl),or(Hc),or(gc))},n.\u0275prov=ln({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $t(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let kn=!0;function Di(){kn=!1}let Sa=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ta,n})();function Ta(n){return function Hr(n,r,s){if(Gs(n)&&!s){const d=ji(n.index,r);return new ii(d,d)}return 47&n.type?new ii(r[16],r):null}(pr(),Jt(),16==(16&n))}class md{constructor(){}supports(r){return _p(r)}create(r){return new fC(r)}}const m_=(n,r)=>r;class fC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||m_}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,d=this._removalsHead,_=0,C=null;for(;s||d;){const P=!d||s&&s.currentIndex<aC(d,_,C)?s:d,F=aC(P,_,C),j=P.currentIndex;if(P===d)_--,d=d._nextRemoved;else if(s=s._next,null==P.previousIndex)_++;else{C||(C=[]);const ie=F-_,we=j-_;if(ie!=we){for(let ht=0;ht<ie;ht++){const Pt=ht<C.length?C[ht]:C[ht]=0,Wt=Pt+ht;we<=Wt&&Wt<ie&&(C[ht]=Pt+1)}C[P.previousIndex]=we-ie}}F!==j&&r(P,F,j)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!_p(r))throw new je(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let _,C,P,s=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let F=0;F<this.length;F++)C=r[F],P=this._trackByFn(F,C),null!==s&&Object.is(s.trackById,P)?(d&&(s=this._verifyReinsertion(s,C,P,F)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,P,F),d=!0),s=s._next}else _=0,function ub(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[cd()]();let d;for(;!(d=s.next()).done;)r(d.value)}}(r,F=>{P=this._trackByFn(_,F),null!==s&&Object.is(s.trackById,P)?(d&&(s=this._verifyReinsertion(s,F,P,_)),Object.is(s.item,F)||this._addIdentityChange(s,F)):(s=this._mismatch(s,F,P,_),d=!0),s=s._next,_++}),this.length=_;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,d,_){let C;return null===r?C=this._itTail:(C=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,C,_)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,_))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,C,_)):r=this._addAfter(new mC(s,d),C,_),r}_verifyReinsertion(r,s,d,_){let C=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==C?r=this._reinsertAfter(C,r._prev,_):r.currentIndex!=_&&(r.currentIndex=_,this._addToMoves(r,_)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const _=r._prevRemoved,C=r._nextRemoved;return null===_?this._removalsHead=C:_._nextRemoved=C,null===C?this._removalsTail=_:C._prevRemoved=_,this._insertAfter(r,s,d),this._addToMoves(r,d),r}_moveAfter(r,s,d){return this._unlink(r),this._insertAfter(r,s,d),this._addToMoves(r,d),r}_addAfter(r,s,d){return this._insertAfter(r,s,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,d){const _=null===s?this._itHead:s._next;return r._next=_,r._prev=s,null===_?this._itTail=r:_._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new sC),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,d=r._next;return null===s?this._itHead=d:s._next=d,null===d?this._itTail=s:d._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class mC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===s||s<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const s=r._prevDup,d=r._nextDup;return null===s?this._head=d:s._nextDup=d,null===d?this._tail=s:d._prevDup=s,null===this._head}}class sC{constructor(){this.map=new Map}put(r){const s=r.trackById;let d=this.map.get(s);d||(d=new gC,this.map.set(s,d)),d.add(r)}get(r,s){const _=this.map.get(r);return _?_.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aC(n,r,s){const d=n.previousIndex;if(null===d)return d;let _=0;return s&&d<s.length&&(_=s[d]),d+r+_}class lC{constructor(){}supports(r){return r instanceof Map||Hf(r)}create(){return new _C}}class _C{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Hf(r)))throw new je(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,_)=>{if(s&&s.key===_)this._maybeAddToChanges(s,d),this._appendAfter=s,s=s._next;else{const C=this._getOrCreateRecordForKey(_,d);s=this._insertBeforeOrAppend(s,C)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let d=s;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const d=r._prev;return s._next=r,s._prev=d,r._prev=s,d&&(d._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const _=this._records.get(r);this._maybeAddToChanges(_,s);const C=_._prev,P=_._next;return C&&(C._next=P),P&&(P._prev=C),_._next=null,_._prev=null,_}const d=new yC(r);return this._records.set(r,d),d.currentValue=s,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(d=>s(r[d],d))}}class yC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cC(){return new Qw([new md])}let Qw=(()=>{class n{constructor(s){this.factories=s}static create(s,d){if(null!=d){const _=d.factories.slice();s=s.concat(_)}return new n(s)}static extend(s){return{provide:n,useFactory:d=>n.create(s,d||cC()),deps:[[n,new Go,new uo]]}}find(s){const d=this.factories.find(_=>_.supports(s));if(null!=d)return d;throw new je(901,!1)}}return n.\u0275prov=ln({token:n,providedIn:"root",factory:cC}),n})();function uC(){return new e1([new lC])}let e1=(()=>{class n{constructor(s){this.factories=s}static create(s,d){if(d){const _=d.factories.slice();s=s.concat(_)}return new n(s)}static extend(s){return{provide:n,useFactory:d=>n.create(s,d||uC()),deps:[[n,new Go,new uo]]}}find(s){const d=this.factories.find(_=>_.supports(s));if(d)return d;throw new je(901,!1)}}return n.\u0275prov=ln({token:n,providedIn:"root",factory:uC}),n})();const xC=c(null,"core",[]);let wC=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(or(zt))},n.\u0275mod=$({type:n}),n.\u0275inj=gt({}),n})();function CC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(cn,ft,V)=>{"use strict";V.d(ft,{Cf:()=>Tt,F:()=>Nr,Fj:()=>We,JJ:()=>un,JU:()=>Ie,On:()=>ts,Zs:()=>vs,a5:()=>hi,kI:()=>Dt,sg:()=>_o,u5:()=>Os});var T=V(4650),l=V(6895),H=V(2076),g=V(4128),He=V(4004);let he=(()=>{class Q{constructor(W,ye){this._renderer=W,this._elementRef=ye,this.onChange=Ut=>{},this.onTouched=()=>{}}setProperty(W,ye){this._renderer.setProperty(this._elementRef.nativeElement,W,ye)}registerOnTouched(W){this.onTouched=W}registerOnChange(W){this.onChange=W}setDisabledState(W){this.setProperty("disabled",W)}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(T.Qsj),T.Y36(T.SBq))},Q.\u0275dir=T.lG2({type:Q}),Q})(),$e=(()=>{class Q extends he{}return Q.\u0275fac=function(){let K;return function(ye){return(K||(K=T.n5z(Q)))(ye||Q)}}(),Q.\u0275dir=T.lG2({type:Q,features:[T.qOj]}),Q})();const Ie=new T.OlP("NgValueAccessor"),nt={provide:Ie,useExisting:(0,T.Gpc)(()=>We),multi:!0},it=new T.OlP("CompositionEventMode");let We=(()=>{class Q extends he{constructor(W,ye,Ut){super(W,ye),this._compositionMode=Ut,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Re(){const Q=(0,l.q)()?(0,l.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(W){this.setProperty("value",W??"")}_handleInput(W){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(W)}_compositionStart(){this._composing=!0}_compositionEnd(W){this._composing=!1,this._compositionMode&&this.onChange(W)}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(it,8))},Q.\u0275dir=T.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(W,ye){1&W&&T.NdJ("input",function(Yn){return ye._handleInput(Yn.target.value)})("blur",function(){return ye.onTouched()})("compositionstart",function(){return ye._compositionStart()})("compositionend",function(Yn){return ye._compositionEnd(Yn.target.value)})},features:[T._Bn([nt]),T.qOj]}),Q})();function Ct(Q){return null==Q||("string"==typeof Q||Array.isArray(Q))&&0===Q.length}function wt(Q){return null!=Q&&"number"==typeof Q.length}const Tt=new T.OlP("NgValidators"),an=new T.OlP("NgAsyncValidators"),Xt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Dt{static min(K){return function Oe(Q){return K=>{if(Ct(K.value)||Ct(Q))return null;const W=parseFloat(K.value);return!isNaN(W)&&W<Q?{min:{min:Q,actual:K.value}}:null}}(K)}static max(K){return function Ne(Q){return K=>{if(Ct(K.value)||Ct(Q))return null;const W=parseFloat(K.value);return!isNaN(W)&&W>Q?{max:{max:Q,actual:K.value}}:null}}(K)}static required(K){return Ot(K)}static requiredTrue(K){return kt(K)}static email(K){return function Ft(Q){return Ct(Q.value)||Xt.test(Q.value)?null:{email:!0}}(K)}static minLength(K){return function Gt(Q){return K=>Ct(K.value)||!wt(K.value)?null:K.value.length<Q?{minlength:{requiredLength:Q,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function lt(Q){return K=>wt(K.value)&&K.value.length>Q?{maxlength:{requiredLength:Q,actualLength:K.value.length}}:null}(K)}static pattern(K){return function dt(Q){if(!Q)return St;let K,W;return"string"==typeof Q?(W="","^"!==Q.charAt(0)&&(W+="^"),W+=Q,"$"!==Q.charAt(Q.length-1)&&(W+="$"),K=new RegExp(W)):(W=Q.toString(),K=Q),ye=>{if(Ct(ye.value))return null;const Ut=ye.value;return K.test(Ut)?null:{pattern:{requiredPattern:W,actualValue:Ut}}}}(K)}static nullValidator(K){return null}static compose(K){return nn(K)}static composeAsync(K){return Qn(K)}}function Ot(Q){return Ct(Q.value)?{required:!0}:null}function kt(Q){return!0===Q.value?null:{required:!0}}function St(Q){return null}function Et(Q){return null!=Q}function tn(Q){return(0,T.QGY)(Q)?(0,H.D)(Q):Q}function Qt(Q){let K={};return Q.forEach(W=>{K=null!=W?{...K,...W}:K}),0===Object.keys(K).length?null:K}function On(Q,K){return K.map(W=>W(Q))}function mi(Q){return Q.map(K=>function Xn(Q){return!Q.validate}(K)?K:W=>K.validate(W))}function nn(Q){if(!Q)return null;const K=Q.filter(Et);return 0==K.length?null:function(W){return Qt(On(W,K))}}function gi(Q){return null!=Q?nn(mi(Q)):null}function Qn(Q){if(!Q)return null;const K=Q.filter(Et);return 0==K.length?null:function(W){const ye=On(W,K).map(tn);return(0,g.D)(ye).pipe((0,He.U)(Qt))}}function di(Q){return null!=Q?Qn(mi(Q)):null}function ln(Q,K){return null===Q?[K]:Array.isArray(Q)?[...Q,K]:[Q,K]}function hn(Q){return Q._rawValidators}function gt(Q){return Q._rawAsyncValidators}function At(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function en(Q,K){return Array.isArray(Q)?Q.includes(K):Q===K}function sn(Q,K){const W=At(K);return At(Q).forEach(Ut=>{en(W,Ut)||W.push(Ut)}),W}function bn(Q,K){return At(K).filter(W=>!en(Q,W))}class Un{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=gi(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=di(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K){this.control&&this.control.reset(K)}hasError(K,W){return!!this.control&&this.control.hasError(K,W)}getError(K,W){return this.control?this.control.getError(K,W):null}}class Kn extends Un{get formDirective(){return null}get path(){return null}}class hi extends Un{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let un=(()=>{class Q extends class Fi{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(W){super(W)}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(hi,2))},Q.\u0275dir=T.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(W,ye){2&W&&T.ekj("ng-untouched",ye.isUntouched)("ng-touched",ye.isTouched)("ng-pristine",ye.isPristine)("ng-dirty",ye.isDirty)("ng-valid",ye.isValid)("ng-invalid",ye.isInvalid)("ng-pending",ye.isPending)},features:[T.qOj]}),Q})();const bt="VALID",et="INVALID",ot="PENDING",Fe="DISABLED";function Se(Q){return(re(Q)?Q.validators:Q)||null}function Te(Q){return Array.isArray(Q)?gi(Q):Q||null}function J(Q,K){return(re(K)?K.asyncValidators:Q)||null}function $(Q){return Array.isArray(Q)?di(Q):Q||null}function re(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}class rt{constructor(K,W){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=K,this._rawAsyncValidators=W,this._composedValidatorFn=Te(this._rawValidators),this._composedAsyncValidatorFn=$(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===bt}get invalid(){return this.status===et}get pending(){return this.status==ot}get disabled(){return this.status===Fe}get enabled(){return this.status!==Fe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._rawValidators=K,this._composedValidatorFn=Te(K)}setAsyncValidators(K){this._rawAsyncValidators=K,this._composedAsyncValidatorFn=$(K)}addValidators(K){this.setValidators(sn(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(sn(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(bn(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(bn(K,this._rawAsyncValidators))}hasValidator(K){return en(this._rawValidators,K)}hasAsyncValidator(K){return en(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(W=>{W.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(W=>{W.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=ot,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const W=this._parentMarkedDirty(K.onlySelf);this.status=Fe,this.errors=null,this._forEachChild(ye=>{ye.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:W}),this._onDisabledChange.forEach(ye=>ye(!0))}enable(K={}){const W=this._parentMarkedDirty(K.onlySelf);this.status=bt,this._forEachChild(ye=>{ye.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:W}),this._onDisabledChange.forEach(ye=>ye(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bt||this.status===ot)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(W=>W._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fe:bt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=ot,this._hasOwnPendingAsyncValidator=!0;const W=tn(this.asyncValidator(this));this._asyncValidationSubscription=W.subscribe(ye=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ye,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,W={}){this.errors=K,this._updateControlsErrors(!1!==W.emitEvent)}get(K){let W=K;return null==W||(Array.isArray(W)||(W=W.split(".")),0===W.length)?null:W.reduce((ye,Ut)=>ye&&ye._find(Ut),this)}getError(K,W){const ye=W?this.get(W):this;return ye&&ye.errors?ye.errors[K]:null}hasError(K,W){return!!this.getError(K,W)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new T.vpe,this.statusChanges=new T.vpe}_calculateStatus(){return this._allControlsDisabled()?Fe:this.errors?et:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ot)?ot:this._anyControlsHaveStatus(et)?et:bt}_anyControlsHaveStatus(K){return this._anyControls(W=>W.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){re(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}}class Ye extends rt{constructor(K,W,ye){super(Se(W),J(ye,W)),this.controls=K,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,W){return this.controls[K]?this.controls[K]:(this.controls[K]=W,W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange),W)}addControl(K,W,ye={}){this.registerControl(K,W),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}removeControl(K,W={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}setControl(K,W,ye={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],W&&this.registerControl(K,W),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,W={}){(function ke(Q,K,W){Q._forEachChild((ye,Ut)=>{if(void 0===W[Ut])throw new T.vHH(1002,"")})})(this,0,K),Object.keys(K).forEach(ye=>{(function _e(Q,K,W){const ye=Q.controls;if(!(K?Object.keys(ye):ye).length)throw new T.vHH(1e3,"");if(!ye[W])throw new T.vHH(1001,"")})(this,!0,ye),this.controls[ye].setValue(K[ye],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(K,W={}){null!=K&&(Object.keys(K).forEach(ye=>{const Ut=this.controls[ye];Ut&&Ut.patchValue(K[ye],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(K={},W={}){this._forEachChild((ye,Ut)=>{ye.reset(K[Ut],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this._reduceChildren({},(K,W,ye)=>(K[ye]=W.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(W,ye)=>!!ye._syncPendingControls()||W);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(W=>{const ye=this.controls[W];ye&&K(ye,W)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[W,ye]of Object.entries(this.controls))if(this.contains(W)&&K(ye))return!0;return!1}_reduceValue(){return this._reduceChildren({},(W,ye,Ut)=>((ye.enabled||this.disabled)&&(W[Ut]=ye.value),W))}_reduceChildren(K,W){let ye=K;return this._forEachChild((Ut,Yn)=>{ye=W(ye,Ut,Yn)}),ye}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}function xe(Q,K){_t(Q,K),K.valueAccessor.writeValue(Q.value),Q.disabled&&K.valueAccessor.setDisabledState?.(!0),function In(Q,K){K.valueAccessor.registerOnChange(W=>{Q._pendingValue=W,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&Jn(Q,K)})}(Q,K),function Bi(Q,K){const W=(ye,Ut)=>{K.valueAccessor.writeValue(ye),Ut&&K.viewToModelUpdate(ye)};Q.registerOnChange(W),K._registerOnDestroy(()=>{Q._unregisterOnChange(W)})}(Q,K),function xn(Q,K){K.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&Jn(Q,K),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,K),function Ze(Q,K){if(K.valueAccessor.setDisabledState){const W=ye=>{K.valueAccessor.setDisabledState(ye)};Q.registerOnDisabledChange(W),K._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(W)})}}(Q,K)}function Pe(Q,K,W=!0){const ye=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(ye),K.valueAccessor.registerOnTouched(ye)),qt(Q,K),Q&&(K._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function De(Q,K){Q.forEach(W=>{W.registerOnValidatorChange&&W.registerOnValidatorChange(K)})}function _t(Q,K){const W=hn(Q);null!==K.validator?Q.setValidators(ln(W,K.validator)):"function"==typeof W&&Q.setValidators([W]);const ye=gt(Q);null!==K.asyncValidator?Q.setAsyncValidators(ln(ye,K.asyncValidator)):"function"==typeof ye&&Q.setAsyncValidators([ye]);const Ut=()=>Q.updateValueAndValidity();De(K._rawValidators,Ut),De(K._rawAsyncValidators,Ut)}function qt(Q,K){let W=!1;if(null!==Q){if(null!==K.validator){const Ut=hn(Q);if(Array.isArray(Ut)&&Ut.length>0){const Yn=Ut.filter(Dr=>Dr!==K.validator);Yn.length!==Ut.length&&(W=!0,Q.setValidators(Yn))}}if(null!==K.asyncValidator){const Ut=gt(Q);if(Array.isArray(Ut)&&Ut.length>0){const Yn=Ut.filter(Dr=>Dr!==K.asyncValidator);Yn.length!==Ut.length&&(W=!0,Q.setAsyncValidators(Yn))}}}const ye=()=>{};return De(K._rawValidators,ye),De(K._rawAsyncValidators,ye),W}function Jn(Q,K){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function Ln(Q,K){_t(Q,K)}function oo(Q,K){Q._syncPendingControls(),K.forEach(W=>{const ye=W.control;"submit"===ye.updateOn&&ye._pendingChange&&(W.viewToModelUpdate(ye._pendingValue),ye._pendingChange=!1)})}const Fr={provide:Kn,useExisting:(0,T.Gpc)(()=>Nr)},ps=(()=>Promise.resolve())();let Nr=(()=>{class Q extends Kn{constructor(W,ye){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new T.vpe,this.form=new Ye({},gi(W),di(ye))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(W){ps.then(()=>{const ye=this._findContainer(W.path);W.control=ye.registerControl(W.name,W.control),xe(W.control,W),W.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(W)})}getControl(W){return this.form.get(W.path)}removeControl(W){ps.then(()=>{const ye=this._findContainer(W.path);ye&&ye.removeControl(W.name),this._directives.delete(W)})}addFormGroup(W){ps.then(()=>{const ye=this._findContainer(W.path),Ut=new Ye({});Ln(Ut,W),ye.registerControl(W.name,Ut),Ut.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(W){ps.then(()=>{const ye=this._findContainer(W.path);ye&&ye.removeControl(W.name)})}getFormGroup(W){return this.form.get(W.path)}updateModel(W,ye){ps.then(()=>{this.form.get(W.path).setValue(ye)})}setValue(W){this.control.setValue(W)}onSubmit(W){return this.submitted=!0,oo(this.form,this._directives),this.ngSubmit.emit(W),"dialog"===W?.target?.method}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(W){return W.pop(),W.length?this.form.get(W):this.form}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(Tt,10),T.Y36(an,10))},Q.\u0275dir=T.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(W,ye){1&W&&T.NdJ("submit",function(Yn){return ye.onSubmit(Yn)})("reset",function(){return ye.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([Fr]),T.qOj]}),Q})();function ki(Q,K){const W=Q.indexOf(K);W>-1&&Q.splice(W,1)}function $r(Q){return"object"==typeof Q&&null!==Q&&2===Object.keys(Q).length&&"value"in Q&&"disabled"in Q}const Or=class extends rt{constructor(K=null,W,ye){super(Se(W),J(ye,W)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(W),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),re(W)&&(W.nonNullable||W.initialValueIsDefault)&&(this.defaultValue=$r(K)?K.value:K)}setValue(K,W={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==W.emitModelToViewChange&&this._onChange.forEach(ye=>ye(this.value,!1!==W.emitViewToModelChange)),this.updateValueAndValidity(W)}patchValue(K,W={}){this.setValue(K,W)}reset(K=this.defaultValue,W={}){this._applyFormState(K),this.markAsPristine(W),this.markAsUntouched(W),this.setValue(this.value,W),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){ki(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){ki(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){$r(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}},Gr={provide:hi,useExisting:(0,T.Gpc)(()=>ts)},da=(()=>Promise.resolve())();let ts=(()=>{class Q extends hi{constructor(W,ye,Ut,Yn,Dr){super(),this._changeDetectorRef=Dr,this.control=new Or,this._registered=!1,this.update=new T.vpe,this._parent=W,this._setValidators(ye),this._setAsyncValidators(Ut),this.valueAccessor=function zo(Q,K){if(!K)return null;let W,ye,Ut;return Array.isArray(K),K.forEach(Yn=>{Yn.constructor===We?W=Yn:function Ii(Q){return Object.getPrototypeOf(Q.constructor)===$e}(Yn)?ye=Yn:Ut=Yn}),Ut||ye||W||null}(0,Yn)}ngOnChanges(W){if(this._checkForErrors(),!this._registered||"name"in W){if(this._registered&&(this._checkName(),this.formDirective)){const ye=W.name.previousValue;this.formDirective.removeControl({name:ye,path:this._getPath(ye)})}this._setUpControl()}"isDisabled"in W&&this._updateDisabled(W),function yr(Q,K){if(!Q.hasOwnProperty("model"))return!1;const W=Q.model;return!!W.isFirstChange()||!Object.is(K,W.currentValue)}(W,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xe(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(W){da.then(()=>{this.control.setValue(W,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(W){const ye=W.isDisabled.currentValue,Ut=0!==ye&&(0,T.D6c)(ye);da.then(()=>{Ut&&!this.control.disabled?this.control.disable():!Ut&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(W){return this._parent?function Bt(Q,K){return[...K.path,Q]}(W,this._parent):[W]}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(Kn,9),T.Y36(Tt,10),T.Y36(an,10),T.Y36(Ie,10),T.Y36(T.sBO,8))},Q.\u0275dir=T.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[T._Bn([Gr]),T.qOj,T.TTD]}),Q})(),kl=(()=>{class Q{}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275mod=T.oAB({type:Q}),Q.\u0275inj=T.cJS({}),Q})();const Ws={provide:Kn,useExisting:(0,T.Gpc)(()=>_o)};let _o=(()=>{class Q extends Kn{constructor(W,ye){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new T.vpe,this._setValidators(W),this._setAsyncValidators(ye)}ngOnChanges(W){this._checkFormPresent(),W.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(W){const ye=this.form.get(W.path);return xe(ye,W),ye.updateValueAndValidity({emitEvent:!1}),this.directives.push(W),ye}getControl(W){return this.form.get(W.path)}removeControl(W){Pe(W.control||null,W,!1),function Er(Q,K){const W=Q.indexOf(K);W>-1&&Q.splice(W,1)}(this.directives,W)}addFormGroup(W){this._setUpFormContainer(W)}removeFormGroup(W){this._cleanUpFormContainer(W)}getFormGroup(W){return this.form.get(W.path)}addFormArray(W){this._setUpFormContainer(W)}removeFormArray(W){this._cleanUpFormContainer(W)}getFormArray(W){return this.form.get(W.path)}updateModel(W,ye){this.form.get(W.path).setValue(ye)}onSubmit(W){return this.submitted=!0,oo(this.form,this.directives),this.ngSubmit.emit(W),"dialog"===W?.target?.method}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_updateDomValue(){this.directives.forEach(W=>{const ye=W.control,Ut=this.form.get(W.path);ye!==Ut&&(Pe(ye||null,W),(Q=>Q instanceof Or)(Ut)&&(xe(Ut,W),W.control=Ut))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(W){const ye=this.form.get(W.path);Ln(ye,W),ye.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(W){if(this.form){const ye=this.form.get(W.path);ye&&function Si(Q,K){return qt(Q,K)}(ye,W)&&ye.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_t(this.form,this),this._oldForm&&qt(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(Tt,10),T.Y36(an,10))},Q.\u0275dir=T.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(W,ye){1&W&&T.NdJ("submit",function(Yn){return ye.onSubmit(Yn)})("reset",function(){return ye.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([Ws]),T.qOj,T.TTD]}),Q})(),is=(()=>{class Q{constructor(){this._validator=St}ngOnChanges(W){if(this.inputName in W){const ye=this.normalizeInput(W[this.inputName].currentValue);this._enabled=this.enabled(ye),this._validator=this._enabled?this.createValidator(ye):St,this._onChange&&this._onChange()}}validate(W){return this._validator(W)}registerOnValidatorChange(W){this._onChange=W}enabled(W){return null!=W}}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275dir=T.lG2({type:Q,features:[T.TTD]}),Q})();const ka={provide:Tt,useExisting:(0,T.Gpc)(()=>qa),multi:!0},hr={provide:Tt,useExisting:(0,T.Gpc)(()=>vs),multi:!0};let qa=(()=>{class Q extends is{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=T.D6c,this.createValidator=W=>Ot}enabled(W){return W}}return Q.\u0275fac=function(){let K;return function(ye){return(K||(K=T.n5z(Q)))(ye||Q)}}(),Q.\u0275dir=T.lG2({type:Q,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(W,ye){2&W&&T.uIk("required",ye._enabled?"":null)},inputs:{required:"required"},features:[T._Bn([ka]),T.qOj]}),Q})(),vs=(()=>{class Q extends qa{constructor(){super(...arguments),this.createValidator=W=>kt}}return Q.\u0275fac=function(){let K;return function(ye){return(K||(K=T.n5z(Q)))(ye||Q)}}(),Q.\u0275dir=T.lG2({type:Q,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(W,ye){2&W&&T.uIk("required",ye._enabled?"":null)},features:[T._Bn([hr]),T.qOj]}),Q})(),Cr=(()=>{class Q{}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275mod=T.oAB({type:Q}),Q.\u0275inj=T.cJS({imports:[kl]}),Q})(),Os=(()=>{class Q{}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275mod=T.oAB({type:Q}),Q.\u0275inj=T.cJS({imports:[Cr]}),Q})()},4859:(cn,ft,V)=>{"use strict";V.d(ft,{lW:()=>Ue,ot:()=>Re,zs:()=>nt});var T=V(4650),l=V(3238),H=V(2687);const g=["mat-button",""],He=["*"],Ie=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Be=(0,l.pj)((0,l.Id)((0,l.Kr)(class{constructor(it){this._elementRef=it}})));let Ue=(()=>{class it extends Be{constructor(je,Ct,wt){super(je),this._focusMonitor=Ct,this._animationMode=wt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Tt of Ie)this._hasHostAttributes(Tt)&&this._getHostElement().classList.add(Tt);je.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(je,Ct){je?this._focusMonitor.focusVia(this._getHostElement(),je,Ct):this._getHostElement().focus(Ct)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...je){return je.some(Ct=>this._getHostElement().hasAttribute(Ct))}}return it.\u0275fac=function(je){return new(je||it)(T.Y36(T.SBq),T.Y36(H.tE),T.Y36(T.QbO,8))},it.\u0275cmp=T.Xpm({type:it,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(je,Ct){if(1&je&&T.Gf(l.wG,5),2&je){let wt;T.iGM(wt=T.CRH())&&(Ct.ripple=wt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(je,Ct){2&je&&(T.uIk("disabled",Ct.disabled||null),T.ekj("_mat-animation-noopable","NoopAnimations"===Ct._animationMode)("mat-button-disabled",Ct.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[T.qOj],attrs:g,ngContentSelectors:He,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(je,Ct){1&je&&(T.F$t(),T.TgZ(0,"span",0),T.Hsn(1),T.qZA(),T._UZ(2,"span",1)(3,"span",2)),2&je&&(T.xp6(2),T.ekj("mat-button-ripple-round",Ct.isRoundButton||Ct.isIconButton),T.Q6J("matRippleDisabled",Ct._isRippleDisabled())("matRippleCentered",Ct.isIconButton)("matRippleTrigger",Ct._getHostElement()))},dependencies:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),it})(),nt=(()=>{class it extends Ue{constructor(je,Ct,wt,Tt){super(Ct,je,wt),this._ngZone=Tt,this._haltDisabledEvents=an=>{this.disabled&&(an.preventDefault(),an.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return it.\u0275fac=function(je){return new(je||it)(T.Y36(H.tE),T.Y36(T.SBq),T.Y36(T.QbO,8),T.Y36(T.R0b,8))},it.\u0275cmp=T.Xpm({type:it,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(je,Ct){2&je&&(T.uIk("tabindex",Ct.disabled?-1:Ct.tabIndex)("disabled",Ct.disabled||null)("aria-disabled",Ct.disabled.toString()),T.ekj("_mat-animation-noopable","NoopAnimations"===Ct._animationMode)("mat-button-disabled",Ct.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[T.qOj],attrs:g,ngContentSelectors:He,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(je,Ct){1&je&&(T.F$t(),T.TgZ(0,"span",0),T.Hsn(1),T.qZA(),T._UZ(2,"span",1)(3,"span",2)),2&je&&(T.xp6(2),T.ekj("mat-button-ripple-round",Ct.isRoundButton||Ct.isIconButton),T.Q6J("matRippleDisabled",Ct._isRippleDisabled())("matRippleCentered",Ct.isIconButton)("matRippleTrigger",Ct._getHostElement()))},dependencies:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),it})(),Re=(()=>{class it{}return it.\u0275fac=function(je){return new(je||it)},it.\u0275mod=T.oAB({type:it}),it.\u0275inj=T.cJS({imports:[l.si,l.BQ,l.BQ]}),it})()},3238:(cn,ft,V)=>{"use strict";V.d(ft,{rD:()=>gt,K7:()=>Ae,HF:()=>ue,BQ:()=>Oe,X2:()=>At,uc:()=>bn,ey:()=>mn,Ng:()=>Nt,nP:()=>Me,us:()=>Je,wG:()=>Y,si:()=>ee,CB:()=>fn,jH:()=>Vi,pj:()=>Gt,Kr:()=>lt,Id:()=>Ft,FD:()=>St,dB:()=>Et,sb:()=>dt,E0:()=>en});var T=V(4650),l=V(2687),H=V(445),He=V(6895),he=V(3353),$e=V(1281),Ie=V(9751),Be=V(7579),Ue=V(8675),nt=V(9521);function We(bt,et){if(1&bt&&T._UZ(0,"mat-pseudo-checkbox",4),2&bt){const ot=T.oxw();T.Q6J("state",ot.selected?"checked":"unchecked")("disabled",ot.disabled)}}function je(bt,et){if(1&bt&&(T.TgZ(0,"span",5),T._uU(1),T.qZA()),2&bt){const ot=T.oxw();T.xp6(1),T.hij("(",ot.group.label,")")}}const Ct=["*"],Dt=new T.OlP("mat-sanity-checks",{providedIn:"root",factory:function Xt(){return!0}});let Oe=(()=>{class bt{constructor(ot,Fe,Se){this._sanityChecks=Fe,this._document=Se,this._hasDoneGlobalChecks=!1,ot._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(ot){return!(0,he.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[ot])}}return bt.\u0275fac=function(ot){return new(ot||bt)(T.LFG(l.qm),T.LFG(Dt,8),T.LFG(He.K0))},bt.\u0275mod=T.oAB({type:bt}),bt.\u0275inj=T.cJS({imports:[H.vT,H.vT]}),bt})();function Ft(bt){return class extends bt{constructor(...et){super(...et),this._disabled=!1}get disabled(){return this._disabled}set disabled(et){this._disabled=(0,$e.Ig)(et)}}}function Gt(bt,et){return class extends bt{constructor(...ot){super(...ot),this.defaultColor=et,this.color=et}get color(){return this._color}set color(ot){const Fe=ot||this.defaultColor;Fe!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Fe&&this._elementRef.nativeElement.classList.add(`mat-${Fe}`),this._color=Fe)}}}function lt(bt){return class extends bt{constructor(...et){super(...et),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(et){this._disableRipple=(0,$e.Ig)(et)}}}function dt(bt,et=0){return class extends bt{constructor(...ot){super(...ot),this._tabIndex=et,this.defaultTabIndex=et}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(ot){this._tabIndex=null!=ot?(0,$e.su)(ot):this.defaultTabIndex}}}function St(bt){return class extends bt{constructor(...et){super(...et),this.errorState=!1}updateErrorState(){const et=this.errorState,Te=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Te!==et&&(this.errorState=Te,this.stateChanges.next())}}}function Et(bt){return class extends bt{constructor(...et){super(...et),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Ie.y(ot=>{this._isInitialized?this._notifySubscriber(ot):this._pendingSubscribers.push(ot)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(et){et.next(),et.complete()}}}let gt=(()=>{class bt{isErrorState(ot,Fe){return!!(ot&&ot.invalid&&(ot.touched||Fe&&Fe.submitted))}}return bt.\u0275fac=function(ot){return new(ot||bt)},bt.\u0275prov=T.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),At=(()=>{class bt{}return bt.\u0275fac=function(ot){return new(ot||bt)},bt.\u0275dir=T.lG2({type:bt,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),bt})();function en(bt,et,ot="mat"){bt.changes.pipe((0,Ue.O)(bt)).subscribe(({length:Fe})=>{sn(et,`${ot}-2-line`,!1),sn(et,`${ot}-3-line`,!1),sn(et,`${ot}-multi-line`,!1),2===Fe||3===Fe?sn(et,`${ot}-${Fe}-line`,!0):Fe>3&&sn(et,`${ot}-multi-line`,!0)})}function sn(bt,et,ot){bt.nativeElement.classList.toggle(et,ot)}let bn=(()=>{class bt{}return bt.\u0275fac=function(ot){return new(ot||bt)},bt.\u0275mod=T.oAB({type:bt}),bt.\u0275inj=T.cJS({imports:[Oe,Oe]}),bt})();class Un{constructor(et,ot,Fe,Se=!1){this._renderer=et,this.element=ot,this.config=Fe,this._animationForciblyDisabledThroughCss=Se,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Kn={enterDuration:225,exitDuration:150},Fi=(0,he.i$)({passive:!0}),Oi=["mousedown","touchstart"],yi=["mouseup","mouseleave","touchend","touchcancel"];class un{constructor(et,ot,Fe,Se){this._target=et,this._ngZone=ot,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,Se.isBrowser&&(this._containerElement=(0,$e.fI)(Fe))}fadeInRipple(et,ot,Fe={}){const Se=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Te={...Kn,...Fe.animation};Fe.centered&&(et=Se.left+Se.width/2,ot=Se.top+Se.height/2);const J=Fe.radius||function Nn(bt,et,ot){const Fe=Math.max(Math.abs(bt-ot.left),Math.abs(bt-ot.right)),Se=Math.max(Math.abs(et-ot.top),Math.abs(et-ot.bottom));return Math.sqrt(Fe*Fe+Se*Se)}(et,ot,Se),$=et-Se.left,re=ot-Se.top,_e=Te.enterDuration,ke=document.createElement("div");ke.classList.add("mat-ripple-element"),ke.style.left=$-J+"px",ke.style.top=re-J+"px",ke.style.height=2*J+"px",ke.style.width=2*J+"px",null!=Fe.color&&(ke.style.backgroundColor=Fe.color),ke.style.transitionDuration=`${_e}ms`,this._containerElement.appendChild(ke);const rt=window.getComputedStyle(ke),Xe=rt.transitionDuration,Ke="none"===rt.transitionProperty||"0s"===Xe||"0s, 0s"===Xe,at=new Un(this,ke,Fe,Ke);ke.style.transform="scale3d(1, 1, 1)",at.state=0,Fe.persistent||(this._mostRecentTransientRipple=at);let Rt=null;return!Ke&&(_e||Te.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Bt=()=>this._finishRippleTransition(at),xe=()=>this._destroyRipple(at);ke.addEventListener("transitionend",Bt),ke.addEventListener("transitioncancel",xe),Rt={onTransitionEnd:Bt,onTransitionCancel:xe}}),this._activeRipples.set(at,Rt),(Ke||!_e)&&this._finishRippleTransition(at),at}fadeOutRipple(et){if(2===et.state||3===et.state)return;const ot=et.element,Fe={...Kn,...et.config.animation};ot.style.transitionDuration=`${Fe.exitDuration}ms`,ot.style.opacity="0",et.state=2,(et._animationForciblyDisabledThroughCss||!Fe.exitDuration)&&this._finishRippleTransition(et)}fadeOutAll(){this._getActiveRipples().forEach(et=>et.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(et=>{et.config.persistent||et.fadeOut()})}setupTriggerEvents(et){const ot=(0,$e.fI)(et);!ot||ot===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=ot,this._registerEvents(Oi))}handleEvent(et){"mousedown"===et.type?this._onMousedown(et):"touchstart"===et.type?this._onTouchStart(et):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(yi),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(et){0===et.state?this._startFadeOutTransition(et):2===et.state&&this._destroyRipple(et)}_startFadeOutTransition(et){const ot=et===this._mostRecentTransientRipple,{persistent:Fe}=et.config;et.state=1,!Fe&&(!ot||!this._isPointerDown)&&et.fadeOut()}_destroyRipple(et){const ot=this._activeRipples.get(et)??null;this._activeRipples.delete(et),this._activeRipples.size||(this._containerRect=null),et===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),et.state=3,null!==ot&&(et.element.removeEventListener("transitionend",ot.onTransitionEnd),et.element.removeEventListener("transitioncancel",ot.onTransitionCancel)),et.element.remove()}_onMousedown(et){const ot=(0,l.X6)(et),Fe=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!ot&&!Fe&&(this._isPointerDown=!0,this.fadeInRipple(et.clientX,et.clientY,this._target.rippleConfig))}_onTouchStart(et){if(!this._target.rippleDisabled&&!(0,l.yG)(et)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const ot=et.changedTouches;for(let Fe=0;Fe<ot.length;Fe++)this.fadeInRipple(ot[Fe].clientX,ot[Fe].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(et=>{!et.config.persistent&&(1===et.state||et.config.terminateOnPointerUp&&0===et.state)&&et.fadeOut()}))}_registerEvents(et){this._ngZone.runOutsideAngular(()=>{et.forEach(ot=>{this._triggerElement.addEventListener(ot,this,Fi)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(Oi.forEach(et=>{this._triggerElement.removeEventListener(et,this,Fi)}),this._pointerUpEventsRegistered&&yi.forEach(et=>{this._triggerElement.removeEventListener(et,this,Fi)}))}}const tt=new T.OlP("mat-ripple-global-options");let Y=(()=>{class bt{constructor(ot,Fe,Se,Te,J){this._elementRef=ot,this._animationMode=J,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Te||{},this._rippleRenderer=new un(this,Fe,ot,Se)}get disabled(){return this._disabled}set disabled(ot){ot&&this.fadeOutAllNonPersistent(),this._disabled=ot,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(ot){this._trigger=ot,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(ot,Fe=0,Se){return"number"==typeof ot?this._rippleRenderer.fadeInRipple(ot,Fe,{...this.rippleConfig,...Se}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...ot})}}return bt.\u0275fac=function(ot){return new(ot||bt)(T.Y36(T.SBq),T.Y36(T.R0b),T.Y36(he.t4),T.Y36(tt,8),T.Y36(T.QbO,8))},bt.\u0275dir=T.lG2({type:bt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(ot,Fe){2&ot&&T.ekj("mat-ripple-unbounded",Fe.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),bt})(),ee=(()=>{class bt{}return bt.\u0275fac=function(ot){return new(ot||bt)},bt.\u0275mod=T.oAB({type:bt}),bt.\u0275inj=T.cJS({imports:[Oe,Oe]}),bt})(),Me=(()=>{class bt{constructor(ot){this._animationMode=ot,this.state="unchecked",this.disabled=!1}}return bt.\u0275fac=function(ot){return new(ot||bt)(T.Y36(T.QbO,8))},bt.\u0275cmp=T.Xpm({type:bt,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(ot,Fe){2&ot&&T.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===Fe.state)("mat-pseudo-checkbox-checked","checked"===Fe.state)("mat-pseudo-checkbox-disabled",Fe.disabled)("_mat-animation-noopable","NoopAnimations"===Fe._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(ot,Fe){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),bt})(),Je=(()=>{class bt{}return bt.\u0275fac=function(ot){return new(ot||bt)},bt.\u0275mod=T.oAB({type:bt}),bt.\u0275inj=T.cJS({imports:[Oe]}),bt})();const ue=new T.OlP("MAT_OPTION_PARENT_COMPONENT"),Ae=new T.OlP("MatOptgroup");let mt=0;class dn{constructor(et,ot=!1){this.source=et,this.isUserInput=ot}}let Vt=(()=>{class bt{constructor(ot,Fe,Se,Te){this._element=ot,this._changeDetectorRef=Fe,this._parent=Se,this.group=Te,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+mt++,this.onSelectionChange=new T.vpe,this._stateChanges=new Be.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(ot){this._disabled=(0,$e.Ig)(ot)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(ot,Fe){const Se=this._getHostElement();"function"==typeof Se.focus&&Se.focus(Fe)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(ot){(ot.keyCode===nt.K5||ot.keyCode===nt.L_)&&!(0,nt.Vb)(ot)&&(this._selectViaInteraction(),ot.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const ot=this.viewValue;ot!==this._mostRecentViewValue&&(this._mostRecentViewValue=ot,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(ot=!1){this.onSelectionChange.emit(new dn(this,ot))}}return bt.\u0275fac=function(ot){T.$Z()},bt.\u0275dir=T.lG2({type:bt,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),bt})(),mn=(()=>{class bt extends Vt{constructor(ot,Fe,Se,Te){super(ot,Fe,Se,Te)}}return bt.\u0275fac=function(ot){return new(ot||bt)(T.Y36(T.SBq),T.Y36(T.sBO),T.Y36(ue,8),T.Y36(Ae,8))},bt.\u0275cmp=T.Xpm({type:bt,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(ot,Fe){1&ot&&T.NdJ("click",function(){return Fe._selectViaInteraction()})("keydown",function(Te){return Fe._handleKeydown(Te)}),2&ot&&(T.Ikx("id",Fe.id),T.uIk("tabindex",Fe._getTabIndex())("aria-selected",Fe._getAriaSelected())("aria-disabled",Fe.disabled.toString()),T.ekj("mat-selected",Fe.selected)("mat-option-multiple",Fe.multiple)("mat-active",Fe.active)("mat-option-disabled",Fe.disabled))},exportAs:["matOption"],features:[T.qOj],ngContentSelectors:Ct,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(ot,Fe){1&ot&&(T.F$t(),T.YNc(0,We,1,2,"mat-pseudo-checkbox",0),T.TgZ(1,"span",1),T.Hsn(2),T.qZA(),T.YNc(3,je,2,1,"span",2),T._UZ(4,"div",3)),2&ot&&(T.Q6J("ngIf",Fe.multiple),T.xp6(3),T.Q6J("ngIf",Fe.group&&Fe.group._inert),T.xp6(1),T.Q6J("matRippleTrigger",Fe._getHostElement())("matRippleDisabled",Fe.disabled||Fe.disableRipple))},dependencies:[Y,He.O5,Me],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),bt})();function fn(bt,et,ot){if(ot.length){let Fe=et.toArray(),Se=ot.toArray(),Te=0;for(let J=0;J<bt+1;J++)Fe[J].group&&Fe[J].group===Se[Te]&&Te++;return Te}return 0}function Vi(bt,et,ot,Fe){return bt<ot?bt:bt+et>ot+Fe?Math.max(0,bt-Fe+et):ot}let Nt=(()=>{class bt{}return bt.\u0275fac=function(ot){return new(ot||bt)},bt.\u0275mod=T.oAB({type:bt}),bt.\u0275inj=T.cJS({imports:[ee,He.ez,Oe,Je]}),bt})()},9549:(cn,ft,V)=>{"use strict";V.d(ft,{Eo:()=>Xn,G_:()=>yi,KE:()=>un,R9:()=>bn,lN:()=>Nn});var T=V(9643),l=V(6895),H=V(4650),g=V(3238),He=V(445),he=V(1281),$e=V(7579),Ie=V(6451),Be=V(4968),Ue=V(8675),nt=V(2722),Re=V(5698),it=V(7340),We=V(3353);const je=["connectionContainer"],Ct=["inputContainer"],wt=["label"];function Tt(tt,Y){1&tt&&(H.ynx(0),H.TgZ(1,"div",14),H._UZ(2,"div",15)(3,"div",16)(4,"div",17),H.qZA(),H.TgZ(5,"div",18),H._UZ(6,"div",15)(7,"div",16)(8,"div",17),H.qZA(),H.BQk())}function an(tt,Y){if(1&tt){const ee=H.EpF();H.TgZ(0,"div",19),H.NdJ("cdkObserveContent",function(){H.CHM(ee);const Je=H.oxw();return H.KtG(Je.updateOutlineGap())}),H.Hsn(1,1),H.qZA()}if(2&tt){const ee=H.oxw();H.Q6J("cdkObserveContentDisabled","outline"!=ee.appearance)}}function Xt(tt,Y){if(1&tt&&(H.ynx(0),H.Hsn(1,2),H.TgZ(2,"span"),H._uU(3),H.qZA(),H.BQk()),2&tt){const ee=H.oxw(2);H.xp6(3),H.Oqu(ee._control.placeholder)}}function Dt(tt,Y){1&tt&&H.Hsn(0,3,["*ngSwitchCase","true"])}function Oe(tt,Y){1&tt&&(H.TgZ(0,"span",23),H._uU(1," *"),H.qZA())}function Ne(tt,Y){if(1&tt){const ee=H.EpF();H.TgZ(0,"label",20,21),H.NdJ("cdkObserveContent",function(){H.CHM(ee);const Je=H.oxw();return H.KtG(Je.updateOutlineGap())}),H.YNc(2,Xt,4,1,"ng-container",12),H.YNc(3,Dt,1,0,"ng-content",12),H.YNc(4,Oe,2,0,"span",22),H.qZA()}if(2&tt){const ee=H.oxw();H.ekj("mat-empty",ee._control.empty&&!ee._shouldAlwaysFloat())("mat-form-field-empty",ee._control.empty&&!ee._shouldAlwaysFloat())("mat-accent","accent"==ee.color)("mat-warn","warn"==ee.color),H.Q6J("cdkObserveContentDisabled","outline"!=ee.appearance)("id",ee._labelId)("ngSwitch",ee._hasLabel()),H.uIk("for",ee._control.id)("aria-owns",ee._control.id),H.xp6(2),H.Q6J("ngSwitchCase",!1),H.xp6(1),H.Q6J("ngSwitchCase",!0),H.xp6(1),H.Q6J("ngIf",!ee.hideRequiredMarker&&ee._control.required&&!ee._control.disabled)}}function Ot(tt,Y){1&tt&&(H.TgZ(0,"div",24),H.Hsn(1,4),H.qZA())}function kt(tt,Y){if(1&tt&&(H.TgZ(0,"div",25),H._UZ(1,"span",26),H.qZA()),2&tt){const ee=H.oxw();H.xp6(1),H.ekj("mat-accent","accent"==ee.color)("mat-warn","warn"==ee.color)}}function Ft(tt,Y){if(1&tt&&(H.TgZ(0,"div"),H.Hsn(1,5),H.qZA()),2&tt){const ee=H.oxw();H.Q6J("@transitionMessages",ee._subscriptAnimationState)}}function Gt(tt,Y){if(1&tt&&(H.TgZ(0,"div",30),H._uU(1),H.qZA()),2&tt){const ee=H.oxw(2);H.Q6J("id",ee._hintLabelId),H.xp6(1),H.Oqu(ee.hintLabel)}}function lt(tt,Y){if(1&tt&&(H.TgZ(0,"div",27),H.YNc(1,Gt,2,2,"div",28),H.Hsn(2,6),H._UZ(3,"div",29),H.Hsn(4,7),H.qZA()),2&tt){const ee=H.oxw();H.Q6J("@transitionMessages",ee._subscriptAnimationState),H.xp6(1),H.Q6J("ngIf",ee.hintLabel)}}const dt=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],St=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],tn=new H.OlP("MatError"),On={transitionMessages:(0,it.X$)("transitionMessages",[(0,it.SB)("enter",(0,it.oB)({opacity:1,transform:"translateY(0%)"})),(0,it.eR)("void => enter",[(0,it.oB)({opacity:0,transform:"translateY(-5px)"}),(0,it.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Xn=(()=>{class tt{}return tt.\u0275fac=function(ee){return new(ee||tt)},tt.\u0275dir=H.lG2({type:tt}),tt})();const di=new H.OlP("MatHint");let hn=(()=>{class tt{}return tt.\u0275fac=function(ee){return new(ee||tt)},tt.\u0275dir=H.lG2({type:tt,selectors:[["mat-label"]]}),tt})(),gt=(()=>{class tt{}return tt.\u0275fac=function(ee){return new(ee||tt)},tt.\u0275dir=H.lG2({type:tt,selectors:[["mat-placeholder"]]}),tt})();const At=new H.OlP("MatPrefix"),sn=new H.OlP("MatSuffix");let bn=(()=>{class tt{}return tt.\u0275fac=function(ee){return new(ee||tt)},tt.\u0275dir=H.lG2({type:tt,selectors:[["","matSuffix",""]],features:[H._Bn([{provide:sn,useExisting:tt}])]}),tt})(),Un=0;const Fi=(0,g.pj)(class{constructor(tt){this._elementRef=tt}},"primary"),Oi=new H.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),yi=new H.OlP("MatFormField");let un=(()=>{class tt extends Fi{constructor(ee,Me,Je,ue,fe,le,de){super(ee),this._changeDetectorRef=Me,this._dir=Je,this._defaults=ue,this._platform=fe,this._ngZone=le,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new $e.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Un++,this._labelId="mat-form-field-label-"+Un++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==de,this.appearance=ue?.appearance||"legacy",ue&&(this._hideRequiredMarker=Boolean(ue.hideRequiredMarker),ue.color&&(this.color=this.defaultColor=ue.color))}get appearance(){return this._appearance}set appearance(ee){const Me=this._appearance;this._appearance=ee||this._defaults?.appearance||"legacy","outline"===this._appearance&&Me!==ee&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(ee){this._hideRequiredMarker=(0,he.Ig)(ee)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(ee){this._hintLabel=ee,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(ee){ee!==this._floatLabel&&(this._floatLabel=ee||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(ee){this._explicitFormFieldControl=ee}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const ee=this._control;ee.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${ee.controlType}`),ee.stateChanges.pipe((0,Ue.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),ee.ngControl&&ee.ngControl.valueChanges&&ee.ngControl.valueChanges.pipe((0,nt.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,nt.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Ie.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,Ue.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,Ue.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,nt.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(ee){const Me=this._control?this._control.ngControl:null;return Me&&Me[ee]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,Be.R)(this._label.nativeElement,"transitionend").pipe((0,Re.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let ee=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&ee.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const Me=this._hintChildren?this._hintChildren.find(ue=>"start"===ue.align):null,Je=this._hintChildren?this._hintChildren.find(ue=>"end"===ue.align):null;Me?ee.push(Me.id):this._hintLabel&&ee.push(this._hintLabelId),Je&&ee.push(Je.id)}else this._errorChildren&&ee.push(...this._errorChildren.map(Me=>Me.id));this._control.setDescribedByIds(ee)}}_validateControlChild(){}updateOutlineGap(){const ee=this._label?this._label.nativeElement:null,Me=this._connectionContainerRef.nativeElement,Je=".mat-form-field-outline-start",ue=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!ee||!ee.children.length||!ee.textContent.trim()){const ut=Me.querySelectorAll(`${Je}, ${ue}`);for(let mt=0;mt<ut.length;mt++)ut[mt].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let fe=0,le=0;const de=Me.querySelectorAll(Je),Ae=Me.querySelectorAll(ue);if(this._label&&this._label.nativeElement.children.length){const ut=Me.getBoundingClientRect();if(0===ut.width&&0===ut.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const mt=this._getStartEnd(ut),dn=ee.children,Vt=this._getStartEnd(dn[0].getBoundingClientRect());let mn=0;for(let fn=0;fn<dn.length;fn++)mn+=dn[fn].offsetWidth;fe=Math.abs(Vt-mt)-5,le=mn>0?.75*mn+10:0}for(let ut=0;ut<de.length;ut++)de[ut].style.width=`${fe}px`;for(let ut=0;ut<Ae.length;ut++)Ae[ut].style.width=`${le}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(ee){return this._dir&&"rtl"===this._dir.value?ee.right:ee.left}_isAttachedToDOM(){const ee=this._elementRef.nativeElement;if(ee.getRootNode){const Me=ee.getRootNode();return Me&&Me!==ee}return document.documentElement.contains(ee)}}return tt.\u0275fac=function(ee){return new(ee||tt)(H.Y36(H.SBq),H.Y36(H.sBO),H.Y36(He.Is,8),H.Y36(Oi,8),H.Y36(We.t4),H.Y36(H.R0b),H.Y36(H.QbO,8))},tt.\u0275cmp=H.Xpm({type:tt,selectors:[["mat-form-field"]],contentQueries:function(ee,Me,Je){if(1&ee&&(H.Suo(Je,Xn,5),H.Suo(Je,Xn,7),H.Suo(Je,hn,5),H.Suo(Je,hn,7),H.Suo(Je,gt,5),H.Suo(Je,tn,5),H.Suo(Je,di,5),H.Suo(Je,At,5),H.Suo(Je,sn,5)),2&ee){let ue;H.iGM(ue=H.CRH())&&(Me._controlNonStatic=ue.first),H.iGM(ue=H.CRH())&&(Me._controlStatic=ue.first),H.iGM(ue=H.CRH())&&(Me._labelChildNonStatic=ue.first),H.iGM(ue=H.CRH())&&(Me._labelChildStatic=ue.first),H.iGM(ue=H.CRH())&&(Me._placeholderChild=ue.first),H.iGM(ue=H.CRH())&&(Me._errorChildren=ue),H.iGM(ue=H.CRH())&&(Me._hintChildren=ue),H.iGM(ue=H.CRH())&&(Me._prefixChildren=ue),H.iGM(ue=H.CRH())&&(Me._suffixChildren=ue)}},viewQuery:function(ee,Me){if(1&ee&&(H.Gf(je,7),H.Gf(Ct,5),H.Gf(wt,5)),2&ee){let Je;H.iGM(Je=H.CRH())&&(Me._connectionContainerRef=Je.first),H.iGM(Je=H.CRH())&&(Me._inputContainerRef=Je.first),H.iGM(Je=H.CRH())&&(Me._label=Je.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(ee,Me){2&ee&&H.ekj("mat-form-field-appearance-standard","standard"==Me.appearance)("mat-form-field-appearance-fill","fill"==Me.appearance)("mat-form-field-appearance-outline","outline"==Me.appearance)("mat-form-field-appearance-legacy","legacy"==Me.appearance)("mat-form-field-invalid",Me._control.errorState)("mat-form-field-can-float",Me._canLabelFloat())("mat-form-field-should-float",Me._shouldLabelFloat())("mat-form-field-has-label",Me._hasFloatingLabel())("mat-form-field-hide-placeholder",Me._hideControlPlaceholder())("mat-form-field-disabled",Me._control.disabled)("mat-form-field-autofilled",Me._control.autofilled)("mat-focused",Me._control.focused)("ng-untouched",Me._shouldForward("untouched"))("ng-touched",Me._shouldForward("touched"))("ng-pristine",Me._shouldForward("pristine"))("ng-dirty",Me._shouldForward("dirty"))("ng-valid",Me._shouldForward("valid"))("ng-invalid",Me._shouldForward("invalid"))("ng-pending",Me._shouldForward("pending"))("_mat-animation-noopable",!Me._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[H._Bn([{provide:yi,useExisting:tt}]),H.qOj],ngContentSelectors:St,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(ee,Me){1&ee&&(H.F$t(dt),H.TgZ(0,"div",0)(1,"div",1,2),H.NdJ("click",function(ue){return Me._control.onContainerClick&&Me._control.onContainerClick(ue)}),H.YNc(3,Tt,9,0,"ng-container",3),H.YNc(4,an,2,1,"div",4),H.TgZ(5,"div",5,6),H.Hsn(7),H.TgZ(8,"span",7),H.YNc(9,Ne,5,16,"label",8),H.qZA()(),H.YNc(10,Ot,2,0,"div",9),H.qZA(),H.YNc(11,kt,2,4,"div",10),H.TgZ(12,"div",11),H.YNc(13,Ft,2,1,"div",12),H.YNc(14,lt,5,2,"div",13),H.qZA()()),2&ee&&(H.xp6(3),H.Q6J("ngIf","outline"==Me.appearance),H.xp6(1),H.Q6J("ngIf",Me._prefixChildren.length),H.xp6(5),H.Q6J("ngIf",Me._hasFloatingLabel()),H.xp6(1),H.Q6J("ngIf",Me._suffixChildren.length),H.xp6(1),H.Q6J("ngIf","outline"!=Me.appearance),H.xp6(1),H.Q6J("ngSwitch",Me._getDisplayedMessages()),H.xp6(1),H.Q6J("ngSwitchCase","error"),H.xp6(1),H.Q6J("ngSwitchCase","hint"))},dependencies:[l.O5,l.RF,l.n9,T.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[On.transitionMessages]},changeDetection:0}),tt})(),Nn=(()=>{class tt{}return tt.\u0275fac=function(ee){return new(ee||tt)},tt.\u0275mod=H.oAB({type:tt}),tt.\u0275inj=H.cJS({imports:[l.ez,g.BQ,T.Q8,g.BQ]}),tt})()},7392:(cn,ft,V)=>{"use strict";V.d(ft,{Hw:()=>Qn,Ps:()=>di,jv:()=>Ft});var T=V(4650),l=V(3238),H=V(1281),g=V(6895),He=V(9646),he=V(2843),$e=V(4128),Ie=V(727),Be=V(8505),Ue=V(4004),nt=V(262),Re=V(8746),it=V(3099),We=V(5698),je=V(529),Ct=V(1481);const wt=["*"];let Tt;function Xt(ln){return function an(){if(void 0===Tt&&(Tt=null,typeof window<"u")){const ln=window;void 0!==ln.trustedTypes&&(Tt=ln.trustedTypes.createPolicy("angular#components",{createHTML:hn=>hn}))}return Tt}()?.createHTML(ln)||ln}function Dt(ln){return Error(`Unable to find icon with the name "${ln}"`)}function Ne(ln){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${ln}".`)}function Ot(ln){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${ln}".`)}class kt{constructor(hn,gt,At){this.url=hn,this.svgText=gt,this.options=At}}let Ft=(()=>{class ln{constructor(gt,At,en,sn){this._httpClient=gt,this._sanitizer=At,this._errorHandler=sn,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=en}addSvgIcon(gt,At,en){return this.addSvgIconInNamespace("",gt,At,en)}addSvgIconLiteral(gt,At,en){return this.addSvgIconLiteralInNamespace("",gt,At,en)}addSvgIconInNamespace(gt,At,en,sn){return this._addSvgIconConfig(gt,At,new kt(en,null,sn))}addSvgIconResolver(gt){return this._resolvers.push(gt),this}addSvgIconLiteralInNamespace(gt,At,en,sn){const bn=this._sanitizer.sanitize(T.q3G.HTML,en);if(!bn)throw Ot(en);const Un=Xt(bn);return this._addSvgIconConfig(gt,At,new kt("",Un,sn))}addSvgIconSet(gt,At){return this.addSvgIconSetInNamespace("",gt,At)}addSvgIconSetLiteral(gt,At){return this.addSvgIconSetLiteralInNamespace("",gt,At)}addSvgIconSetInNamespace(gt,At,en){return this._addSvgIconSetConfig(gt,new kt(At,null,en))}addSvgIconSetLiteralInNamespace(gt,At,en){const sn=this._sanitizer.sanitize(T.q3G.HTML,At);if(!sn)throw Ot(At);const bn=Xt(sn);return this._addSvgIconSetConfig(gt,new kt("",bn,en))}registerFontClassAlias(gt,At=gt){return this._fontCssClassesByAlias.set(gt,At),this}classNameForFontAlias(gt){return this._fontCssClassesByAlias.get(gt)||gt}setDefaultFontSetClass(...gt){return this._defaultFontSetClass=gt,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(gt){const At=this._sanitizer.sanitize(T.q3G.RESOURCE_URL,gt);if(!At)throw Ne(gt);const en=this._cachedIconsByUrl.get(At);return en?(0,He.of)(dt(en)):this._loadSvgIconFromConfig(new kt(gt,null)).pipe((0,Be.b)(sn=>this._cachedIconsByUrl.set(At,sn)),(0,Ue.U)(sn=>dt(sn)))}getNamedSvgIcon(gt,At=""){const en=St(At,gt);let sn=this._svgIconConfigs.get(en);if(sn)return this._getSvgFromConfig(sn);if(sn=this._getIconConfigFromResolvers(At,gt),sn)return this._svgIconConfigs.set(en,sn),this._getSvgFromConfig(sn);const bn=this._iconSetConfigs.get(At);return bn?this._getSvgFromIconSetConfigs(gt,bn):(0,he._)(Dt(en))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(gt){return gt.svgText?(0,He.of)(dt(this._svgElementFromConfig(gt))):this._loadSvgIconFromConfig(gt).pipe((0,Ue.U)(At=>dt(At)))}_getSvgFromIconSetConfigs(gt,At){const en=this._extractIconWithNameFromAnySet(gt,At);if(en)return(0,He.of)(en);const sn=At.filter(bn=>!bn.svgText).map(bn=>this._loadSvgIconSetFromConfig(bn).pipe((0,nt.K)(Un=>{const hi=`Loading icon set URL: ${this._sanitizer.sanitize(T.q3G.RESOURCE_URL,bn.url)} failed: ${Un.message}`;return this._errorHandler.handleError(new Error(hi)),(0,He.of)(null)})));return(0,$e.D)(sn).pipe((0,Ue.U)(()=>{const bn=this._extractIconWithNameFromAnySet(gt,At);if(!bn)throw Dt(gt);return bn}))}_extractIconWithNameFromAnySet(gt,At){for(let en=At.length-1;en>=0;en--){const sn=At[en];if(sn.svgText&&sn.svgText.toString().indexOf(gt)>-1){const bn=this._svgElementFromConfig(sn),Un=this._extractSvgIconFromSet(bn,gt,sn.options);if(Un)return Un}}return null}_loadSvgIconFromConfig(gt){return this._fetchIcon(gt).pipe((0,Be.b)(At=>gt.svgText=At),(0,Ue.U)(()=>this._svgElementFromConfig(gt)))}_loadSvgIconSetFromConfig(gt){return gt.svgText?(0,He.of)(null):this._fetchIcon(gt).pipe((0,Be.b)(At=>gt.svgText=At))}_extractSvgIconFromSet(gt,At,en){const sn=gt.querySelector(`[id="${At}"]`);if(!sn)return null;const bn=sn.cloneNode(!0);if(bn.removeAttribute("id"),"svg"===bn.nodeName.toLowerCase())return this._setSvgAttributes(bn,en);if("symbol"===bn.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(bn),en);const Un=this._svgElementFromString(Xt("<svg></svg>"));return Un.appendChild(bn),this._setSvgAttributes(Un,en)}_svgElementFromString(gt){const At=this._document.createElement("DIV");At.innerHTML=gt;const en=At.querySelector("svg");if(!en)throw Error("<svg> tag not found");return en}_toSvgElement(gt){const At=this._svgElementFromString(Xt("<svg></svg>")),en=gt.attributes;for(let sn=0;sn<en.length;sn++){const{name:bn,value:Un}=en[sn];"id"!==bn&&At.setAttribute(bn,Un)}for(let sn=0;sn<gt.childNodes.length;sn++)gt.childNodes[sn].nodeType===this._document.ELEMENT_NODE&&At.appendChild(gt.childNodes[sn].cloneNode(!0));return At}_setSvgAttributes(gt,At){return gt.setAttribute("fit",""),gt.setAttribute("height","100%"),gt.setAttribute("width","100%"),gt.setAttribute("preserveAspectRatio","xMidYMid meet"),gt.setAttribute("focusable","false"),At&&At.viewBox&&gt.setAttribute("viewBox",At.viewBox),gt}_fetchIcon(gt){const{url:At,options:en}=gt,sn=en?.withCredentials??!1;if(!this._httpClient)throw function Oe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==At)throw Error(`Cannot fetch icon from URL "${At}".`);const bn=this._sanitizer.sanitize(T.q3G.RESOURCE_URL,At);if(!bn)throw Ne(At);const Un=this._inProgressUrlFetches.get(bn);if(Un)return Un;const Kn=this._httpClient.get(bn,{responseType:"text",withCredentials:sn}).pipe((0,Ue.U)(hi=>Xt(hi)),(0,Re.x)(()=>this._inProgressUrlFetches.delete(bn)),(0,it.B)());return this._inProgressUrlFetches.set(bn,Kn),Kn}_addSvgIconConfig(gt,At,en){return this._svgIconConfigs.set(St(gt,At),en),this}_addSvgIconSetConfig(gt,At){const en=this._iconSetConfigs.get(gt);return en?en.push(At):this._iconSetConfigs.set(gt,[At]),this}_svgElementFromConfig(gt){if(!gt.svgElement){const At=this._svgElementFromString(gt.svgText);this._setSvgAttributes(At,gt.options),gt.svgElement=At}return gt.svgElement}_getIconConfigFromResolvers(gt,At){for(let en=0;en<this._resolvers.length;en++){const sn=this._resolvers[en](At,gt);if(sn)return Et(sn)?new kt(sn.url,null,sn.options):new kt(sn,null)}}}return ln.\u0275fac=function(gt){return new(gt||ln)(T.LFG(je.eN,8),T.LFG(Ct.H7),T.LFG(g.K0,8),T.LFG(T.qLn))},ln.\u0275prov=T.Yz7({token:ln,factory:ln.\u0275fac,providedIn:"root"}),ln})();function dt(ln){return ln.cloneNode(!0)}function St(ln,hn){return ln+":"+hn}function Et(ln){return!(!ln.url||!ln.options)}const tn=(0,l.pj)(class{constructor(ln){this._elementRef=ln}}),Qt=new T.OlP("MAT_ICON_DEFAULT_OPTIONS"),On=new T.OlP("mat-icon-location",{providedIn:"root",factory:function Xn(){const ln=(0,T.f3M)(g.K0),hn=ln?ln.location:null;return{getPathname:()=>hn?hn.pathname+hn.search:""}}}),mi=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],nn=mi.map(ln=>`[${ln}]`).join(", "),gi=/^url\(['"]?#(.*?)['"]?\)$/;let Qn=(()=>{class ln extends tn{constructor(gt,At,en,sn,bn,Un){super(gt),this._iconRegistry=At,this._location=sn,this._errorHandler=bn,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Ie.w0.EMPTY,Un&&(Un.color&&(this.color=this.defaultColor=Un.color),Un.fontSet&&(this.fontSet=Un.fontSet)),en||gt.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(gt){this._inline=(0,H.Ig)(gt)}get svgIcon(){return this._svgIcon}set svgIcon(gt){gt!==this._svgIcon&&(gt?this._updateSvgIcon(gt):this._svgIcon&&this._clearSvgElement(),this._svgIcon=gt)}get fontSet(){return this._fontSet}set fontSet(gt){const At=this._cleanupFontValue(gt);At!==this._fontSet&&(this._fontSet=At,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(gt){const At=this._cleanupFontValue(gt);At!==this._fontIcon&&(this._fontIcon=At,this._updateFontIconClasses())}_splitIconName(gt){if(!gt)return["",""];const At=gt.split(":");switch(At.length){case 1:return["",At[0]];case 2:return At;default:throw Error(`Invalid icon name: "${gt}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const gt=this._elementsWithExternalReferences;if(gt&&gt.size){const At=this._location.getPathname();At!==this._previousPath&&(this._previousPath=At,this._prependPathToReferences(At))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(gt){this._clearSvgElement();const At=this._location.getPathname();this._previousPath=At,this._cacheChildrenWithExternalReferences(gt),this._prependPathToReferences(At),this._elementRef.nativeElement.appendChild(gt)}_clearSvgElement(){const gt=this._elementRef.nativeElement;let At=gt.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();At--;){const en=gt.childNodes[At];(1!==en.nodeType||"svg"===en.nodeName.toLowerCase())&&en.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const gt=this._elementRef.nativeElement,At=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(en=>en.length>0);this._previousFontSetClass.forEach(en=>gt.classList.remove(en)),At.forEach(en=>gt.classList.add(en)),this._previousFontSetClass=At,this.fontIcon!==this._previousFontIconClass&&!At.includes("mat-ligature-font")&&(this._previousFontIconClass&&gt.classList.remove(this._previousFontIconClass),this.fontIcon&&gt.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(gt){return"string"==typeof gt?gt.trim().split(" ")[0]:gt}_prependPathToReferences(gt){const At=this._elementsWithExternalReferences;At&&At.forEach((en,sn)=>{en.forEach(bn=>{sn.setAttribute(bn.name,`url('${gt}#${bn.value}')`)})})}_cacheChildrenWithExternalReferences(gt){const At=gt.querySelectorAll(nn),en=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let sn=0;sn<At.length;sn++)mi.forEach(bn=>{const Un=At[sn],Kn=Un.getAttribute(bn),hi=Kn?Kn.match(gi):null;if(hi){let Fi=en.get(Un);Fi||(Fi=[],en.set(Un,Fi)),Fi.push({name:bn,value:hi[1]})}})}_updateSvgIcon(gt){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),gt){const[At,en]=this._splitIconName(gt);At&&(this._svgNamespace=At),en&&(this._svgName=en),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(en,At).pipe((0,We.q)(1)).subscribe(sn=>this._setSvgElement(sn),sn=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${At}:${en}! ${sn.message}`))})}}}return ln.\u0275fac=function(gt){return new(gt||ln)(T.Y36(T.SBq),T.Y36(Ft),T.$8M("aria-hidden"),T.Y36(On),T.Y36(T.qLn),T.Y36(Qt,8))},ln.\u0275cmp=T.Xpm({type:ln,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(gt,At){2&gt&&(T.uIk("data-mat-icon-type",At._usingFontIcon()?"font":"svg")("data-mat-icon-name",At._svgName||At.fontIcon)("data-mat-icon-namespace",At._svgNamespace||At.fontSet),T.ekj("mat-icon-inline",At.inline)("mat-icon-no-color","primary"!==At.color&&"accent"!==At.color&&"warn"!==At.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[T.qOj],ngContentSelectors:wt,decls:1,vars:0,template:function(gt,At){1&gt&&(T.F$t(),T.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),ln})(),di=(()=>{class ln{}return ln.\u0275fac=function(gt){return new(gt||ln)},ln.\u0275mod=T.oAB({type:ln}),ln.\u0275inj=T.cJS({imports:[l.BQ,l.BQ]}),ln})()},4385:(cn,ft,V)=>{"use strict";V.d(ft,{LD:()=>un,gD:()=>yi});var T=V(8184),l=V(6895),H=V(4650),g=V(3238),He=V(9549),he=V(8605),$e=V(2687),Ie=V(445),Be=V(1281),Ue=V(5017),nt=V(9521),Re=V(4006),it=V(7579),We=V(9770),je=V(6451),Ct=V(8675),wt=V(3900),Tt=V(5698),an=V(9300),Xt=V(4004),Dt=V(1884),Oe=V(2722),Ne=V(7340);const Ot=["trigger"],kt=["panel"];function Ft(Nn,tt){if(1&Nn&&(H.TgZ(0,"span",8),H._uU(1),H.qZA()),2&Nn){const Y=H.oxw();H.xp6(1),H.Oqu(Y.placeholder)}}function Gt(Nn,tt){if(1&Nn&&(H.TgZ(0,"span",12),H._uU(1),H.qZA()),2&Nn){const Y=H.oxw(2);H.xp6(1),H.Oqu(Y.triggerValue)}}function lt(Nn,tt){1&Nn&&H.Hsn(0,0,["*ngSwitchCase","true"])}function dt(Nn,tt){if(1&Nn&&(H.TgZ(0,"span",9),H.YNc(1,Gt,2,1,"span",10),H.YNc(2,lt,1,0,"ng-content",11),H.qZA()),2&Nn){const Y=H.oxw();H.Q6J("ngSwitch",!!Y.customTrigger),H.xp6(2),H.Q6J("ngSwitchCase",!0)}}function St(Nn,tt){if(1&Nn){const Y=H.EpF();H.TgZ(0,"div",13)(1,"div",14,15),H.NdJ("@transformPanel.done",function(Me){H.CHM(Y);const Je=H.oxw();return H.KtG(Je._panelDoneAnimatingStream.next(Me.toState))})("keydown",function(Me){H.CHM(Y);const Je=H.oxw();return H.KtG(Je._handleKeydown(Me))}),H.Hsn(3,1),H.qZA()()}if(2&Nn){const Y=H.oxw();H.Q6J("@transformPanelWrap",void 0),H.xp6(1),H.Gre("mat-select-panel ",Y._getPanelTheme(),""),H.Udp("transform-origin",Y._transformOrigin)("font-size",Y._triggerFontSize,"px"),H.Q6J("ngClass",Y.panelClass)("@transformPanel",Y.multiple?"showing-multiple":"showing"),H.uIk("id",Y.id+"-panel")("aria-multiselectable",Y.multiple)("aria-label",Y.ariaLabel||null)("aria-labelledby",Y._getPanelAriaLabelledby())}}const Et=[[["mat-select-trigger"]],"*"],tn=["mat-select-trigger","*"],Qt={transformPanelWrap:(0,Ne.X$)("transformPanelWrap",[(0,Ne.eR)("* => void",(0,Ne.IO)("@transformPanel",[(0,Ne.pV)()],{optional:!0}))]),transformPanel:(0,Ne.X$)("transformPanel",[(0,Ne.SB)("void",(0,Ne.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,Ne.SB)("showing",(0,Ne.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,Ne.SB)("showing-multiple",(0,Ne.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,Ne.eR)("void => *",(0,Ne.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,Ne.eR)("* => void",(0,Ne.jt)("100ms 25ms linear",(0,Ne.oB)({opacity:0})))])};let nn=0;const At=new H.OlP("mat-select-scroll-strategy"),sn=new H.OlP("MAT_SELECT_CONFIG"),bn={provide:At,deps:[T.aV],useFactory:function en(Nn){return()=>Nn.scrollStrategies.reposition()}};class Un{constructor(tt,Y){this.source=tt,this.value=Y}}const Kn=(0,g.Kr)((0,g.sb)((0,g.Id)((0,g.FD)(class{constructor(Nn,tt,Y,ee,Me){this._elementRef=Nn,this._defaultErrorStateMatcher=tt,this._parentForm=Y,this._parentFormGroup=ee,this.ngControl=Me,this.stateChanges=new it.x}})))),hi=new H.OlP("MatSelectTrigger");let Oi=(()=>{class Nn extends Kn{constructor(Y,ee,Me,Je,ue,fe,le,de,Ae,ut,mt,dn,Vt,mn){super(ue,Je,le,de,ut),this._viewportRuler=Y,this._changeDetectorRef=ee,this._ngZone=Me,this._dir=fe,this._parentFormField=Ae,this._liveAnnouncer=Vt,this._defaultOptions=mn,this._panelOpen=!1,this._compareWith=(fn,Vi)=>fn===Vi,this._uid="mat-select-"+nn++,this._triggerAriaLabelledBy=null,this._destroy=new it.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+nn++,this._panelDoneAnimatingStream=new it.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,We.P)(()=>{const fn=this.options;return fn?fn.changes.pipe((0,Ct.O)(fn),(0,wt.w)(()=>(0,je.T)(...fn.map(Vi=>Vi.onSelectionChange)))):this._ngZone.onStable.pipe((0,Tt.q)(1),(0,wt.w)(()=>this.optionSelectionChanges))}),this.openedChange=new H.vpe,this._openedStream=this.openedChange.pipe((0,an.h)(fn=>fn),(0,Xt.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,an.h)(fn=>!fn),(0,Xt.U)(()=>{})),this.selectionChange=new H.vpe,this.valueChange=new H.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=mn?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=mn.typeaheadDebounceInterval),this._scrollStrategyFactory=dn,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(mt)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(Y){this._placeholder=Y,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Re.kI.required)??!1}set required(Y){this._required=(0,Be.Ig)(Y),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(Y){this._multiple=(0,Be.Ig)(Y)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(Y){this._disableOptionCentering=(0,Be.Ig)(Y)}get compareWith(){return this._compareWith}set compareWith(Y){this._compareWith=Y,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(Y){this._assignValue(Y)&&this._onChange(Y)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(Y){this._typeaheadDebounceInterval=(0,Be.su)(Y)}get id(){return this._id}set id(Y){this._id=Y||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Ue.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,Dt.x)(),(0,Oe.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Oe.R)(this._destroy)).subscribe(Y=>{Y.added.forEach(ee=>ee.select()),Y.removed.forEach(ee=>ee.deselect())}),this.options.changes.pipe((0,Ct.O)(null),(0,Oe.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const Y=this._getTriggerAriaLabelledby(),ee=this.ngControl;if(Y!==this._triggerAriaLabelledBy){const Me=this._elementRef.nativeElement;this._triggerAriaLabelledBy=Y,Y?Me.setAttribute("aria-labelledby",Y):Me.removeAttribute("aria-labelledby")}ee&&(this._previousControl!==ee.control&&(void 0!==this._previousControl&&null!==ee.disabled&&ee.disabled!==this.disabled&&(this.disabled=ee.disabled),this._previousControl=ee.control),this.updateErrorState())}ngOnChanges(Y){(Y.disabled||Y.userAriaDescribedBy)&&this.stateChanges.next(),Y.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(Y){this._assignValue(Y)}registerOnChange(Y){this._onChange=Y}registerOnTouched(Y){this._onTouched=Y}setDisabledState(Y){this.disabled=Y,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const Y=this._selectionModel.selected.map(ee=>ee.viewValue);return this._isRtl()&&Y.reverse(),Y.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(Y){this.disabled||(this.panelOpen?this._handleOpenKeydown(Y):this._handleClosedKeydown(Y))}_handleClosedKeydown(Y){const ee=Y.keyCode,Me=ee===nt.JH||ee===nt.LH||ee===nt.oh||ee===nt.SV,Je=ee===nt.K5||ee===nt.L_,ue=this._keyManager;if(!ue.isTyping()&&Je&&!(0,nt.Vb)(Y)||(this.multiple||Y.altKey)&&Me)Y.preventDefault(),this.open();else if(!this.multiple){const fe=this.selected;ue.onKeydown(Y);const le=this.selected;le&&fe!==le&&this._liveAnnouncer.announce(le.viewValue,1e4)}}_handleOpenKeydown(Y){const ee=this._keyManager,Me=Y.keyCode,Je=Me===nt.JH||Me===nt.LH,ue=ee.isTyping();if(Je&&Y.altKey)Y.preventDefault(),this.close();else if(ue||Me!==nt.K5&&Me!==nt.L_||!ee.activeItem||(0,nt.Vb)(Y))if(!ue&&this._multiple&&Me===nt.A&&Y.ctrlKey){Y.preventDefault();const fe=this.options.some(le=>!le.disabled&&!le.selected);this.options.forEach(le=>{le.disabled||(fe?le.select():le.deselect())})}else{const fe=ee.activeItemIndex;ee.onKeydown(Y),this._multiple&&Je&&Y.shiftKey&&ee.activeItem&&ee.activeItemIndex!==fe&&ee.activeItem._selectViaInteraction()}else Y.preventDefault(),ee.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Tt.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(Y){if(this._selectionModel.selected.forEach(ee=>ee.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&Y)Array.isArray(Y),Y.forEach(ee=>this._selectOptionByValue(ee)),this._sortValues();else{const ee=this._selectOptionByValue(Y);ee?this._keyManager.updateActiveItem(ee):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(Y){const ee=this.options.find(Me=>{if(this._selectionModel.isSelected(Me))return!1;try{return null!=Me.value&&this._compareWith(Me.value,Y)}catch{return!1}});return ee&&this._selectionModel.select(ee),ee}_assignValue(Y){return!!(Y!==this._value||this._multiple&&Array.isArray(Y))&&(this.options&&this._setSelectionByValue(Y),this._value=Y,!0)}_initKeyManager(){this._keyManager=new $e.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,Oe.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,Oe.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const Y=(0,je.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Oe.R)(Y)).subscribe(ee=>{this._onSelect(ee.source,ee.isUserInput),ee.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,je.T)(...this.options.map(ee=>ee._stateChanges)).pipe((0,Oe.R)(Y)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(Y,ee){const Me=this._selectionModel.isSelected(Y);null!=Y.value||this._multiple?(Me!==Y.selected&&(Y.selected?this._selectionModel.select(Y):this._selectionModel.deselect(Y)),ee&&this._keyManager.setActiveItem(Y),this.multiple&&(this._sortValues(),ee&&this.focus())):(Y.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(Y.value)),Me!==this._selectionModel.isSelected(Y)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const Y=this.options.toArray();this._selectionModel.sort((ee,Me)=>this.sortComparator?this.sortComparator(ee,Me,Y):Y.indexOf(ee)-Y.indexOf(Me)),this.stateChanges.next()}}_propagateChanges(Y){let ee=null;ee=this.multiple?this.selected.map(Me=>Me.value):this.selected?this.selected.value:Y,this._value=ee,this.valueChange.emit(ee),this._onChange(ee),this.selectionChange.emit(this._getChangeEvent(ee)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(Y){this._elementRef.nativeElement.focus(Y)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const Y=this._parentFormField?.getLabelId();return this.ariaLabelledby?(Y?Y+" ":"")+this.ariaLabelledby:Y}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const Y=this._parentFormField?.getLabelId();let ee=(Y?Y+" ":"")+this._valueId;return this.ariaLabelledby&&(ee+=" "+this.ariaLabelledby),ee}_panelDoneAnimating(Y){this.openedChange.emit(Y)}setDescribedByIds(Y){Y.length?this._elementRef.nativeElement.setAttribute("aria-describedby",Y.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Nn.\u0275fac=function(Y){return new(Y||Nn)(H.Y36(he.rL),H.Y36(H.sBO),H.Y36(H.R0b),H.Y36(g.rD),H.Y36(H.SBq),H.Y36(Ie.Is,8),H.Y36(Re.F,8),H.Y36(Re.sg,8),H.Y36(He.G_,8),H.Y36(Re.a5,10),H.$8M("tabindex"),H.Y36(At),H.Y36($e.Kd),H.Y36(sn,8))},Nn.\u0275dir=H.lG2({type:Nn,viewQuery:function(Y,ee){if(1&Y&&(H.Gf(Ot,5),H.Gf(kt,5),H.Gf(T.pI,5)),2&Y){let Me;H.iGM(Me=H.CRH())&&(ee.trigger=Me.first),H.iGM(Me=H.CRH())&&(ee.panel=Me.first),H.iGM(Me=H.CRH())&&(ee._overlayDir=Me.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[H.qOj,H.TTD]}),Nn})(),yi=(()=>{class Nn extends Oi{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(Y,ee,Me){const Je=this._getItemHeight();return Math.min(Math.max(0,Je*Y-ee+Je/2),Me)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Oe.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,Tt.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(Y){const ee=(0,g.CB)(Y,this.options,this.optionGroups),Me=this._getItemHeight();this.panel.nativeElement.scrollTop=0===Y&&1===ee?0:(0,g.jH)((Y+ee)*Me,Me,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(Y){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(Y)}_getChangeEvent(Y){return new Un(this,Y)}_calculateOverlayOffsetX(){const Y=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),ee=this._viewportRuler.getViewportSize(),Me=this._isRtl(),Je=this.multiple?56:32;let ue;if(this.multiple)ue=40;else if(this.disableOptionCentering)ue=16;else{let de=this._selectionModel.selected[0]||this.options.first;ue=de&&de.group?32:16}Me||(ue*=-1);const fe=0-(Y.left+ue-(Me?Je:0)),le=Y.right+ue-ee.width+(Me?0:Je);fe>0?ue+=fe+8:le>0&&(ue-=le+8),this._overlayDir.offsetX=Math.round(ue),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(Y,ee,Me){const Je=this._getItemHeight(),ue=(Je-this._triggerRect.height)/2,fe=Math.floor(256/Je);let le;return this.disableOptionCentering?0:(le=0===this._scrollTop?Y*Je:this._scrollTop===Me?(Y-(this._getItemCount()-fe))*Je+(Je-(this._getItemCount()*Je-256)%Je):ee-Je/2,Math.round(-1*le-ue))}_checkOverlayWithinViewport(Y){const ee=this._getItemHeight(),Me=this._viewportRuler.getViewportSize(),Je=this._triggerRect.top-8,ue=Me.height-this._triggerRect.bottom-8,fe=Math.abs(this._offsetY),de=Math.min(this._getItemCount()*ee,256)-fe-this._triggerRect.height;de>ue?this._adjustPanelUp(de,ue):fe>Je?this._adjustPanelDown(fe,Je,Y):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(Y,ee){const Me=Math.round(Y-ee);this._scrollTop-=Me,this._offsetY-=Me,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(Y,ee,Me){const Je=Math.round(Y-ee);if(this._scrollTop+=Je,this._offsetY+=Je,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=Me)return this._scrollTop=Me,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const Y=this._getItemHeight(),ee=this._getItemCount(),Me=Math.min(ee*Y,256),ue=ee*Y-Me;let fe;fe=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),fe+=(0,g.CB)(fe,this.options,this.optionGroups);const le=Me/2;this._scrollTop=this._calculateOverlayScroll(fe,le,ue),this._offsetY=this._calculateOverlayOffsetY(fe,le,ue),this._checkOverlayWithinViewport(ue)}_getOriginBasedOnOption(){const Y=this._getItemHeight(),ee=(Y-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-ee+Y/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return Nn.\u0275fac=function(){let tt;return function(ee){return(tt||(tt=H.n5z(Nn)))(ee||Nn)}}(),Nn.\u0275cmp=H.Xpm({type:Nn,selectors:[["mat-select"]],contentQueries:function(Y,ee,Me){if(1&Y&&(H.Suo(Me,hi,5),H.Suo(Me,g.ey,5),H.Suo(Me,g.K7,5)),2&Y){let Je;H.iGM(Je=H.CRH())&&(ee.customTrigger=Je.first),H.iGM(Je=H.CRH())&&(ee.options=Je),H.iGM(Je=H.CRH())&&(ee.optionGroups=Je)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(Y,ee){1&Y&&H.NdJ("keydown",function(Je){return ee._handleKeydown(Je)})("focus",function(){return ee._onFocus()})("blur",function(){return ee._onBlur()}),2&Y&&(H.uIk("id",ee.id)("tabindex",ee.tabIndex)("aria-controls",ee.panelOpen?ee.id+"-panel":null)("aria-expanded",ee.panelOpen)("aria-label",ee.ariaLabel||null)("aria-required",ee.required.toString())("aria-disabled",ee.disabled.toString())("aria-invalid",ee.errorState)("aria-activedescendant",ee._getAriaActiveDescendant()),H.ekj("mat-select-disabled",ee.disabled)("mat-select-invalid",ee.errorState)("mat-select-required",ee.required)("mat-select-empty",ee.empty)("mat-select-multiple",ee.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[H._Bn([{provide:He.Eo,useExisting:Nn},{provide:g.HF,useExisting:Nn}]),H.qOj],ngContentSelectors:tn,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(Y,ee){if(1&Y&&(H.F$t(Et),H.TgZ(0,"div",0,1),H.NdJ("click",function(){return ee.toggle()}),H.TgZ(3,"div",2),H.YNc(4,Ft,2,1,"span",3),H.YNc(5,dt,3,2,"span",4),H.qZA(),H.TgZ(6,"div",5),H._UZ(7,"div",6),H.qZA()(),H.YNc(8,St,4,14,"ng-template",7),H.NdJ("backdropClick",function(){return ee.close()})("attach",function(){return ee._onAttached()})("detach",function(){return ee.close()})),2&Y){const Me=H.MAs(1);H.uIk("aria-owns",ee.panelOpen?ee.id+"-panel":null),H.xp6(3),H.Q6J("ngSwitch",ee.empty),H.uIk("id",ee._valueId),H.xp6(1),H.Q6J("ngSwitchCase",!0),H.xp6(1),H.Q6J("ngSwitchCase",!1),H.xp6(3),H.Q6J("cdkConnectedOverlayPanelClass",ee._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",ee._scrollStrategy)("cdkConnectedOverlayOrigin",Me)("cdkConnectedOverlayOpen",ee.panelOpen)("cdkConnectedOverlayPositions",ee._positions)("cdkConnectedOverlayMinWidth",null==ee._triggerRect?null:ee._triggerRect.width)("cdkConnectedOverlayOffsetY",ee._offsetY)}},dependencies:[l.mk,l.RF,l.n9,l.ED,T.pI,T.xu],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Qt.transformPanelWrap,Qt.transformPanel]},changeDetection:0}),Nn})(),un=(()=>{class Nn{}return Nn.\u0275fac=function(Y){return new(Y||Nn)},Nn.\u0275mod=H.oAB({type:Nn}),Nn.\u0275inj=H.cJS({providers:[bn],imports:[l.ez,T.U8,g.Ng,g.BQ,he.ZD,He.lN,g.Ng,g.BQ]}),Nn})()},3683:(cn,ft,V)=>{"use strict";V.d(ft,{Ye:()=>Be,g0:()=>nt});var T=V(4650),l=V(3238),H=V(3353),g=V(6895);const He=["*",[["mat-toolbar-row"]]],he=["*","mat-toolbar-row"],$e=(0,l.pj)(class{constructor(Re){this._elementRef=Re}});let Ie=(()=>{class Re{}return Re.\u0275fac=function(We){return new(We||Re)},Re.\u0275dir=T.lG2({type:Re,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),Re})(),Be=(()=>{class Re extends $e{constructor(We,je,Ct){super(We),this._platform=je,this._document=Ct}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return Re.\u0275fac=function(We){return new(We||Re)(T.Y36(T.SBq),T.Y36(H.t4),T.Y36(g.K0))},Re.\u0275cmp=T.Xpm({type:Re,selectors:[["mat-toolbar"]],contentQueries:function(We,je,Ct){if(1&We&&T.Suo(Ct,Ie,5),2&We){let wt;T.iGM(wt=T.CRH())&&(je._toolbarRows=wt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(We,je){2&We&&T.ekj("mat-toolbar-multiple-rows",je._toolbarRows.length>0)("mat-toolbar-single-row",0===je._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[T.qOj],ngContentSelectors:he,decls:2,vars:0,template:function(We,je){1&We&&(T.F$t(He),T.Hsn(0),T.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),Re})(),nt=(()=>{class Re{}return Re.\u0275fac=function(We){return new(We||Re)},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({imports:[l.BQ,l.BQ]}),Re})()},1481:(cn,ft,V)=>{"use strict";V.d(ft,{Dx:()=>ue,H7:()=>Ke,b2:()=>tt,q6:()=>Oi,se:()=>Et});var T=V(6895),l=V(4650);class H extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class g extends H{static makeCurrent(){(0,T.HT)(new g)}onAndCancel(Pe,De,Ze){return Pe.addEventListener(De,Ze,!1),()=>{Pe.removeEventListener(De,Ze,!1)}}dispatchEvent(Pe,De){Pe.dispatchEvent(De)}remove(Pe){Pe.parentNode&&Pe.parentNode.removeChild(Pe)}createElement(Pe,De){return(De=De||this.getDefaultDocument()).createElement(Pe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Pe){return Pe.nodeType===Node.ELEMENT_NODE}isShadowRoot(Pe){return Pe instanceof DocumentFragment}getGlobalEventTarget(Pe,De){return"window"===De?window:"document"===De?Pe:"body"===De?Pe.body:null}getBaseHref(Pe){const De=function he(){return He=He||document.querySelector("base"),He?He.getAttribute("href"):null}();return null==De?null:function Ie(xe){$e=$e||document.createElement("a"),$e.setAttribute("href",xe);const Pe=$e.pathname;return"/"===Pe.charAt(0)?Pe:`/${Pe}`}(De)}resetBaseElement(){He=null}getUserAgent(){return window.navigator.userAgent}getCookie(Pe){return(0,T.Mx)(document.cookie,Pe)}}let $e,He=null;const Be=new l.OlP("TRANSITION_ID"),nt=[{provide:l.ip1,useFactory:function Ue(xe,Pe,De){return()=>{De.get(l.CZH).donePromise.then(()=>{const Ze=(0,T.q)(),_t=Pe.querySelectorAll(`style[ng-transition="${xe}"]`);for(let qt=0;qt<_t.length;qt++)Ze.remove(_t[qt])})}},deps:[Be,T.K0,l.zs3],multi:!0}];let it=(()=>{class xe{build(){return new XMLHttpRequest}}return xe.\u0275fac=function(De){return new(De||xe)},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const We=new l.OlP("EventManagerPlugins");let je=(()=>{class xe{constructor(De,Ze){this._zone=Ze,this._eventNameToPlugin=new Map,De.forEach(_t=>_t.manager=this),this._plugins=De.slice().reverse()}addEventListener(De,Ze,_t){return this._findPluginFor(Ze).addEventListener(De,Ze,_t)}addGlobalEventListener(De,Ze,_t){return this._findPluginFor(Ze).addGlobalEventListener(De,Ze,_t)}getZone(){return this._zone}_findPluginFor(De){const Ze=this._eventNameToPlugin.get(De);if(Ze)return Ze;const _t=this._plugins;for(let qt=0;qt<_t.length;qt++){const In=_t[qt];if(In.supports(De))return this._eventNameToPlugin.set(De,In),In}throw new Error(`No event manager plugin found for event ${De}`)}}return xe.\u0275fac=function(De){return new(De||xe)(l.LFG(We),l.LFG(l.R0b))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac}),xe})();class Ct{constructor(Pe){this._doc=Pe}addGlobalEventListener(Pe,De,Ze){const _t=(0,T.q)().getGlobalEventTarget(this._doc,Pe);if(!_t)throw new Error(`Unsupported event target ${_t} for event ${De}`);return this.addEventListener(_t,De,Ze)}}let wt=(()=>{class xe{constructor(){this._stylesSet=new Set}addStyles(De){const Ze=new Set;De.forEach(_t=>{this._stylesSet.has(_t)||(this._stylesSet.add(_t),Ze.add(_t))}),this.onStylesAdded(Ze)}onStylesAdded(De){}getAllStyles(){return Array.from(this._stylesSet)}}return xe.\u0275fac=function(De){return new(De||xe)},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),Tt=(()=>{class xe extends wt{constructor(De){super(),this._doc=De,this._hostNodes=new Map,this._hostNodes.set(De.head,[])}_addStylesToHost(De,Ze,_t){De.forEach(qt=>{const In=this._doc.createElement("style");In.textContent=qt,_t.push(Ze.appendChild(In))})}addHost(De){const Ze=[];this._addStylesToHost(this._stylesSet,De,Ze),this._hostNodes.set(De,Ze)}removeHost(De){const Ze=this._hostNodes.get(De);Ze&&Ze.forEach(an),this._hostNodes.delete(De)}onStylesAdded(De){this._hostNodes.forEach((Ze,_t)=>{this._addStylesToHost(De,_t,Ze)})}ngOnDestroy(){this._hostNodes.forEach(De=>De.forEach(an))}}return xe.\u0275fac=function(De){return new(De||xe)(l.LFG(T.K0))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac}),xe})();function an(xe){(0,T.q)().remove(xe)}const Xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Dt=/%COMP%/g;function lt(xe,Pe,De){for(let Ze=0;Ze<Pe.length;Ze++){let _t=Pe[Ze];Array.isArray(_t)?lt(xe,_t,De):(_t=_t.replace(Dt,xe),De.push(_t))}return De}function dt(xe){return Pe=>{if("__ngUnwrap__"===Pe)return xe;!1===xe(Pe)&&(Pe.preventDefault(),Pe.returnValue=!1)}}let Et=(()=>{class xe{constructor(De,Ze,_t){this.eventManager=De,this.sharedStylesHost=Ze,this.appId=_t,this.rendererByCompId=new Map,this.defaultRenderer=new tn(De)}createRenderer(De,Ze){if(!De||!Ze)return this.defaultRenderer;switch(Ze.encapsulation){case l.ifc.Emulated:{let _t=this.rendererByCompId.get(Ze.id);return _t||(_t=new mi(this.eventManager,this.sharedStylesHost,Ze,this.appId),this.rendererByCompId.set(Ze.id,_t)),_t.applyToHost(De),_t}case 1:case l.ifc.ShadowDom:return new nn(this.eventManager,this.sharedStylesHost,De,Ze);default:if(!this.rendererByCompId.has(Ze.id)){const _t=lt(Ze.id,Ze.styles,[]);this.sharedStylesHost.addStyles(_t),this.rendererByCompId.set(Ze.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return xe.\u0275fac=function(De){return new(De||xe)(l.LFG(je),l.LFG(Tt),l.LFG(l.AFp))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac}),xe})();class tn{constructor(Pe){this.eventManager=Pe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Pe,De){return De?document.createElementNS(Xt[De]||De,Pe):document.createElement(Pe)}createComment(Pe){return document.createComment(Pe)}createText(Pe){return document.createTextNode(Pe)}appendChild(Pe,De){(Xn(Pe)?Pe.content:Pe).appendChild(De)}insertBefore(Pe,De,Ze){Pe&&(Xn(Pe)?Pe.content:Pe).insertBefore(De,Ze)}removeChild(Pe,De){Pe&&Pe.removeChild(De)}selectRootElement(Pe,De){let Ze="string"==typeof Pe?document.querySelector(Pe):Pe;if(!Ze)throw new Error(`The selector "${Pe}" did not match any elements`);return De||(Ze.textContent=""),Ze}parentNode(Pe){return Pe.parentNode}nextSibling(Pe){return Pe.nextSibling}setAttribute(Pe,De,Ze,_t){if(_t){De=_t+":"+De;const qt=Xt[_t];qt?Pe.setAttributeNS(qt,De,Ze):Pe.setAttribute(De,Ze)}else Pe.setAttribute(De,Ze)}removeAttribute(Pe,De,Ze){if(Ze){const _t=Xt[Ze];_t?Pe.removeAttributeNS(_t,De):Pe.removeAttribute(`${Ze}:${De}`)}else Pe.removeAttribute(De)}addClass(Pe,De){Pe.classList.add(De)}removeClass(Pe,De){Pe.classList.remove(De)}setStyle(Pe,De,Ze,_t){_t&(l.JOm.DashCase|l.JOm.Important)?Pe.style.setProperty(De,Ze,_t&l.JOm.Important?"important":""):Pe.style[De]=Ze}removeStyle(Pe,De,Ze){Ze&l.JOm.DashCase?Pe.style.removeProperty(De):Pe.style[De]=""}setProperty(Pe,De,Ze){Pe[De]=Ze}setValue(Pe,De){Pe.nodeValue=De}listen(Pe,De,Ze){return"string"==typeof Pe?this.eventManager.addGlobalEventListener(Pe,De,dt(Ze)):this.eventManager.addEventListener(Pe,De,dt(Ze))}}function Xn(xe){return"TEMPLATE"===xe.tagName&&void 0!==xe.content}class mi extends tn{constructor(Pe,De,Ze,_t){super(Pe),this.component=Ze;const qt=lt(_t+"-"+Ze.id,Ze.styles,[]);De.addStyles(qt),this.contentAttr=function Ft(xe){return"_ngcontent-%COMP%".replace(Dt,xe)}(_t+"-"+Ze.id),this.hostAttr=function Gt(xe){return"_nghost-%COMP%".replace(Dt,xe)}(_t+"-"+Ze.id)}applyToHost(Pe){super.setAttribute(Pe,this.hostAttr,"")}createElement(Pe,De){const Ze=super.createElement(Pe,De);return super.setAttribute(Ze,this.contentAttr,""),Ze}}class nn extends tn{constructor(Pe,De,Ze,_t){super(Pe),this.sharedStylesHost=De,this.hostEl=Ze,this.shadowRoot=Ze.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const qt=lt(_t.id,_t.styles,[]);for(let In=0;In<qt.length;In++){const xn=document.createElement("style");xn.textContent=qt[In],this.shadowRoot.appendChild(xn)}}nodeOrShadowRoot(Pe){return Pe===this.hostEl?this.shadowRoot:Pe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Pe,De){return super.appendChild(this.nodeOrShadowRoot(Pe),De)}insertBefore(Pe,De,Ze){return super.insertBefore(this.nodeOrShadowRoot(Pe),De,Ze)}removeChild(Pe,De){return super.removeChild(this.nodeOrShadowRoot(Pe),De)}parentNode(Pe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Pe)))}}let gi=(()=>{class xe extends Ct{constructor(De){super(De)}supports(De){return!0}addEventListener(De,Ze,_t){return De.addEventListener(Ze,_t,!1),()=>this.removeEventListener(De,Ze,_t)}removeEventListener(De,Ze,_t){return De.removeEventListener(Ze,_t)}}return xe.\u0275fac=function(De){return new(De||xe)(l.LFG(T.K0))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const Qn=["alt","control","meta","shift"],di={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ln={alt:xe=>xe.altKey,control:xe=>xe.ctrlKey,meta:xe=>xe.metaKey,shift:xe=>xe.shiftKey};let hn=(()=>{class xe extends Ct{constructor(De){super(De)}supports(De){return null!=xe.parseEventName(De)}addEventListener(De,Ze,_t){const qt=xe.parseEventName(Ze),In=xe.eventCallback(qt.fullKey,_t,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(De,qt.domEventName,In))}static parseEventName(De){const Ze=De.toLowerCase().split("."),_t=Ze.shift();if(0===Ze.length||"keydown"!==_t&&"keyup"!==_t)return null;const qt=xe._normalizeKey(Ze.pop());let In="",xn=Ze.indexOf("code");if(xn>-1&&(Ze.splice(xn,1),In="code."),Qn.forEach(Bi=>{const Ln=Ze.indexOf(Bi);Ln>-1&&(Ze.splice(Ln,1),In+=Bi+".")}),In+=qt,0!=Ze.length||0===qt.length)return null;const Jn={};return Jn.domEventName=_t,Jn.fullKey=In,Jn}static matchEventFullKeyCode(De,Ze){let _t=di[De.key]||De.key,qt="";return Ze.indexOf("code.")>-1&&(_t=De.code,qt="code."),!(null==_t||!_t)&&(_t=_t.toLowerCase()," "===_t?_t="space":"."===_t&&(_t="dot"),Qn.forEach(In=>{In!==_t&&(0,ln[In])(De)&&(qt+=In+".")}),qt+=_t,qt===Ze)}static eventCallback(De,Ze,_t){return qt=>{xe.matchEventFullKeyCode(qt,De)&&_t.runGuarded(()=>Ze(qt))}}static _normalizeKey(De){return"esc"===De?"escape":De}}return xe.\u0275fac=function(De){return new(De||xe)(l.LFG(T.K0))},xe.\u0275prov=l.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const Oi=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:T.bD},{provide:l.g9A,useValue:function Un(){g.makeCurrent()},multi:!0},{provide:T.K0,useFactory:function hi(){return(0,l.RDi)(document),document},deps:[]}]),yi=new l.OlP(""),un=[{provide:l.rWj,useClass:class Re{addToWindow(Pe){l.dqk.getAngularTestability=(Ze,_t=!0)=>{const qt=Pe.findTestabilityInTree(Ze,_t);if(null==qt)throw new Error("Could not find testability for element.");return qt},l.dqk.getAllAngularTestabilities=()=>Pe.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>Pe.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(Ze=>{const _t=l.dqk.getAllAngularTestabilities();let qt=_t.length,In=!1;const xn=function(Jn){In=In||Jn,qt--,0==qt&&Ze(In)};_t.forEach(function(Jn){Jn.whenStable(xn)})})}findTestabilityInTree(Pe,De,Ze){return null==De?null:Pe.getTestability(De)??(Ze?(0,T.q)().isShadowRoot(De)?this.findTestabilityInTree(Pe,De.host,!0):this.findTestabilityInTree(Pe,De.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Nn=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Kn(){return new l.qLn},deps:[]},{provide:We,useClass:gi,multi:!0,deps:[T.K0,l.R0b,l.Lbi]},{provide:We,useClass:hn,multi:!0,deps:[T.K0]},{provide:Et,useClass:Et,deps:[je,Tt,l.AFp]},{provide:l.FYo,useExisting:Et},{provide:wt,useExisting:Tt},{provide:Tt,useClass:Tt,deps:[T.K0]},{provide:je,useClass:je,deps:[We,l.R0b]},{provide:T.JF,useClass:it,deps:[]},[]];let tt=(()=>{class xe{constructor(De){}static withServerTransition(De){return{ngModule:xe,providers:[{provide:l.AFp,useValue:De.appId},{provide:Be,useExisting:l.AFp},nt]}}}return xe.\u0275fac=function(De){return new(De||xe)(l.LFG(yi,12))},xe.\u0275mod=l.oAB({type:xe}),xe.\u0275inj=l.cJS({providers:[...Nn,...un],imports:[T.ez,l.hGG]}),xe})(),ue=(()=>{class xe{constructor(De){this._doc=De}getTitle(){return this._doc.title}setTitle(De){this._doc.title=De||""}}return xe.\u0275fac=function(De){return new(De||xe)(l.LFG(T.K0))},xe.\u0275prov=l.Yz7({token:xe,factory:function(De){let Ze=null;return Ze=De?new De:function Je(){return new ue((0,l.LFG)(T.K0))}(),Ze},providedIn:"root"}),xe})();typeof window<"u"&&window;let Ke=(()=>{class xe{}return xe.\u0275fac=function(De){return new(De||xe)},xe.\u0275prov=l.Yz7({token:xe,factory:function(De){let Ze=null;return Ze=De?new(De||xe):l.LFG(Rt),Ze},providedIn:"root"}),xe})(),Rt=(()=>{class xe extends Ke{constructor(De){super(),this._doc=De}sanitize(De,Ze){if(null==Ze)return null;switch(De){case l.q3G.NONE:return Ze;case l.q3G.HTML:return(0,l.qzn)(Ze,"HTML")?(0,l.z3N)(Ze):(0,l.EiD)(this._doc,String(Ze)).toString();case l.q3G.STYLE:return(0,l.qzn)(Ze,"Style")?(0,l.z3N)(Ze):Ze;case l.q3G.SCRIPT:if((0,l.qzn)(Ze,"Script"))return(0,l.z3N)(Ze);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(Ze,"URL")?(0,l.z3N)(Ze):(0,l.mCW)(String(Ze));case l.q3G.RESOURCE_URL:if((0,l.qzn)(Ze,"ResourceURL"))return(0,l.z3N)(Ze);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${De} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(De){return(0,l.JVY)(De)}bypassSecurityTrustStyle(De){return(0,l.L6k)(De)}bypassSecurityTrustScript(De){return(0,l.eBb)(De)}bypassSecurityTrustUrl(De){return(0,l.LAX)(De)}bypassSecurityTrustResourceUrl(De){return(0,l.pB0)(De)}}return xe.\u0275fac=function(De){return new(De||xe)(l.LFG(T.K0))},xe.\u0275prov=l.Yz7({token:xe,factory:function(De){let Ze=null;return Ze=De?new De:function at(xe){return new Rt(xe.get(T.K0))}(l.LFG(l.zs3)),Ze},providedIn:"root"}),xe})()},2510:(cn,ft,V)=>{"use strict";V.d(ft,{gz:()=>_o,F0:()=>Rr,Od:()=>Ur,yS:()=>Vl,Bz:()=>u,lC:()=>is});var T=V(4650),l=V(2076),H=V(9646),g=V(1135),He=V(6805),he=V(9841),$e=V(7272),Ie=V(9770),Be=V(9635),Ue=V(2843),nt=V(9751),Re=V(515),it=V(727),We=V(4482),je=V(5403);function Ct(){return(0,We.e)((x,D)=>{let E=null;x._refCount++;const A=(0,je.x)(D,void 0,void 0,void 0,()=>{if(!x||x._refCount<=0||0<--x._refCount)return void(E=null);const k=x._connection,G=E;E=null,k&&(!G||k===G)&&k.unsubscribe(),D.unsubscribe()});x.subscribe(A),A.closed||(E=x.connect())})}class wt extends nt.y{constructor(D,E){super(),this.source=D,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,We.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new it.w0;const E=this.getSubject();D.add(this.source.subscribe((0,je.x)(E,void 0,()=>{this._teardown(),E.complete()},A=>{this._teardown(),E.error(A)},()=>this._teardown()))),D.closed&&(this._connection=null,D=it.w0.EMPTY)}return D}refCount(){return Ct()(this)}}var Tt=V(7579),an=V(6895),Xt=V(4004),Dt=V(3900),Oe=V(5698),Ne=V(8675),Ot=V(9300),kt=V(5577),Ft=V(590),Gt=V(4351),lt=V(8505),dt=V(262);function St(x,D,E,A,k){return(G,se)=>{let pe=E,me=D,qe=0;G.subscribe((0,je.x)(se,pt=>{const xt=qe++;me=pe?x(me,pt,xt):(pe=!0,pt),A&&se.next(me)},k&&(()=>{pe&&se.next(me),se.complete()})))}}function Et(x,D){return(0,We.e)(St(x,D,arguments.length>=2,!0))}function tn(x){return x<=0?()=>Re.E:(0,We.e)((D,E)=>{let A=[];D.subscribe((0,je.x)(E,k=>{A.push(k),x<A.length&&A.shift()},()=>{for(const k of A)E.next(k);E.complete()},void 0,()=>{A=null}))})}var Qt=V(8068),On=V(6590),Xn=V(4671);function mi(x,D){const E=arguments.length>=2;return A=>A.pipe(x?(0,Ot.h)((k,G)=>x(k,G,A)):Xn.y,tn(1),E?(0,On.d)(D):(0,Qt.T)(()=>new He.K))}var nn=V(2529),gi=V(9718),Qn=V(8746),di=V(8189),ln=V(1481);const hn="primary",gt=Symbol("RouteTitle");class At{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const E=this.params[D];return Array.isArray(E)?E[0]:E}return null}getAll(D){if(this.has(D)){const E=this.params[D];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function en(x){return new At(x)}function sn(x,D,E){const A=E.path.split("/");if(A.length>x.length||"full"===E.pathMatch&&(D.hasChildren()||A.length<x.length))return null;const k={};for(let G=0;G<A.length;G++){const se=A[G],pe=x[G];if(se.startsWith(":"))k[se.substring(1)]=pe;else if(se!==pe.path)return null}return{consumed:x.slice(0,A.length),posParams:k}}function Un(x,D){const E=x?Object.keys(x):void 0,A=D?Object.keys(D):void 0;if(!E||!A||E.length!=A.length)return!1;let k;for(let G=0;G<E.length;G++)if(k=E[G],!Kn(x[k],D[k]))return!1;return!0}function Kn(x,D){if(Array.isArray(x)&&Array.isArray(D)){if(x.length!==D.length)return!1;const E=[...x].sort(),A=[...D].sort();return E.every((k,G)=>A[G]===k)}return x===D}function hi(x){return Array.prototype.concat.apply([],x)}function Fi(x){return x.length>0?x[x.length-1]:null}function yi(x,D){for(const E in x)x.hasOwnProperty(E)&&D(x[E],E)}function un(x){return(0,T.CqO)(x)?x:(0,T.QGY)(x)?(0,l.D)(Promise.resolve(x)):(0,H.of)(x)}const Y={exact:function ue(x,D,E){if(!mn(x.segments,D.segments)||!Ae(x.segments,D.segments,E)||x.numberOfChildren!==D.numberOfChildren)return!1;for(const A in D.children)if(!x.children[A]||!ue(x.children[A],D.children[A],E))return!1;return!0},subset:le},ee={exact:function Je(x,D){return Un(x,D)},subset:function fe(x,D){return Object.keys(D).length<=Object.keys(x).length&&Object.keys(D).every(E=>Kn(x[E],D[E]))},ignored:()=>!0};function Me(x,D,E){return Y[E.paths](x.root,D.root,E.matrixParams)&&ee[E.queryParams](x.queryParams,D.queryParams)&&!("exact"===E.fragment&&x.fragment!==D.fragment)}function le(x,D,E){return de(x,D,D.segments,E)}function de(x,D,E,A){if(x.segments.length>E.length){const k=x.segments.slice(0,E.length);return!(!mn(k,E)||D.hasChildren()||!Ae(k,E,A))}if(x.segments.length===E.length){if(!mn(x.segments,E)||!Ae(x.segments,E,A))return!1;for(const k in D.children)if(!x.children[k]||!le(x.children[k],D.children[k],A))return!1;return!0}{const k=E.slice(0,x.segments.length),G=E.slice(x.segments.length);return!!(mn(x.segments,k)&&Ae(x.segments,k,A)&&x.children[hn])&&de(x.children[hn],D,G,A)}}function Ae(x,D,E){return D.every((A,k)=>ee[E](x[k].parameters,A.parameters))}class ut{constructor(D,E,A){this.root=D,this.queryParams=E,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return bt.serialize(this)}}class mt{constructor(D,E){this.segments=D,this.children=E,this.parent=null,yi(E,(A,k)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return et(this)}}class dn{constructor(D,E){this.path=D,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=en(this.parameters)),this._parameterMap}toString(){return _e(this)}}function mn(x,D){return x.length===D.length&&x.every((E,A)=>E.path===D[A].path)}let Vi=(()=>{class x{}return x.\u0275fac=function(E){return new(E||x)},x.\u0275prov=T.Yz7({token:x,factory:function(){return new Nt},providedIn:"root"}),x})();class Nt{parse(D){const E=new xe(D);return new ut(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(D){const E=`/${ot(D.root,!0)}`,A=function rt(x){const D=Object.keys(x).map(E=>{const A=x[E];return Array.isArray(A)?A.map(k=>`${Se(E)}=${Se(k)}`).join("&"):`${Se(E)}=${Se(A)}`}).filter(E=>!!E);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${E}${A}${"string"==typeof D.fragment?`#${function Te(x){return encodeURI(x)}(D.fragment)}`:""}`}}const bt=new Nt;function et(x){return x.segments.map(D=>_e(D)).join("/")}function ot(x,D){if(!x.hasChildren())return et(x);if(D){const E=x.children[hn]?ot(x.children[hn],!1):"",A=[];return yi(x.children,(k,G)=>{G!==hn&&A.push(`${G}:${ot(k,!1)}`)}),A.length>0?`${E}(${A.join("//")})`:E}{const E=function fn(x,D){let E=[];return yi(x.children,(A,k)=>{k===hn&&(E=E.concat(D(A,k)))}),yi(x.children,(A,k)=>{k!==hn&&(E=E.concat(D(A,k)))}),E}(x,(A,k)=>k===hn?[ot(x.children[hn],!1)]:[`${k}:${ot(A,!1)}`]);return 1===Object.keys(x.children).length&&null!=x.children[hn]?`${et(x)}/${E[0]}`:`${et(x)}/(${E.join("//")})`}}function Fe(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Se(x){return Fe(x).replace(/%3B/gi,";")}function J(x){return Fe(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $(x){return decodeURIComponent(x)}function re(x){return $(x.replace(/\+/g,"%20"))}function _e(x){return`${J(x.path)}${function ke(x){return Object.keys(x).map(D=>`;${J(D)}=${J(x[D])}`).join("")}(x.parameters)}`}const Ye=/^[^\/()?;=#]+/;function Xe(x){const D=x.match(Ye);return D?D[0]:""}const Ke=/^[^=?&#]+/,Rt=/^[^&#]+/;class xe{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(D.length>0||Object.keys(E).length>0)&&(A[hn]=new mt(D,E)),A}parseSegment(){const D=Xe(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new T.vHH(4009,!1);return this.capture(D),new dn($(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const E=Xe(this.remaining);if(!E)return;this.capture(E);let A="";if(this.consumeOptional("=")){const k=Xe(this.remaining);k&&(A=k,this.capture(A))}D[$(E)]=$(A)}parseQueryParam(D){const E=function at(x){const D=x.match(Ke);return D?D[0]:""}(this.remaining);if(!E)return;this.capture(E);let A="";if(this.consumeOptional("=")){const se=function Bt(x){const D=x.match(Rt);return D?D[0]:""}(this.remaining);se&&(A=se,this.capture(A))}const k=re(E),G=re(A);if(D.hasOwnProperty(k)){let se=D[k];Array.isArray(se)||(se=[se],D[k]=se),se.push(G)}else D[k]=G}parseParens(D){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Xe(this.remaining),k=this.remaining[A.length];if("/"!==k&&")"!==k&&";"!==k)throw new T.vHH(4010,!1);let G;A.indexOf(":")>-1?(G=A.slice(0,A.indexOf(":")),this.capture(G),this.capture(":")):D&&(G=hn);const se=this.parseChildren();E[G]=1===Object.keys(se).length?se[hn]:new mt([],se),this.consumeOptional("//")}return E}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new T.vHH(4011,!1)}}function Pe(x){return x.segments.length>0?new mt([],{[hn]:x}):x}function De(x){const D={};for(const A of Object.keys(x.children)){const G=De(x.children[A]);(G.segments.length>0||G.hasChildren())&&(D[A]=G)}return function Ze(x){if(1===x.numberOfChildren&&x.children[hn]){const D=x.children[hn];return new mt(x.segments.concat(D.segments),D.children)}return x}(new mt(x.segments,D))}function _t(x){return x instanceof ut}function Bi(x,D,E,A,k){if(0===E.length)return Ui(D.root,D.root,D.root,A,k);const G=function _r(x){if("string"==typeof x[0]&&1===x.length&&"/"===x[0])return new ro(!0,0,x);let D=0,E=!1;const A=x.reduce((k,G,se)=>{if("object"==typeof G&&null!=G){if(G.outlets){const pe={};return yi(G.outlets,(me,qe)=>{pe[qe]="string"==typeof me?me.split("/"):me}),[...k,{outlets:pe}]}if(G.segmentPath)return[...k,G.segmentPath]}return"string"!=typeof G?[...k,G]:0===se?(G.split("/").forEach((pe,me)=>{0==me&&"."===pe||(0==me&&""===pe?E=!0:".."===pe?D++:""!=pe&&k.push(pe))}),k):[...k,G]},[]);return new ro(E,D,A)}(E);return G.toRoot()?Ui(D.root,D.root,new mt([],{}),A,k):function se(me){const qe=function oo(x,D,E,A){if(x.isAbsolute)return new yr(D.root,!0,0);if(-1===A)return new yr(E,E===D.root,0);return function zo(x,D,E){let A=x,k=D,G=E;for(;G>k;){if(G-=k,A=A.parent,!A)throw new T.vHH(4005,!1);k=A.segments.length}return new yr(A,!1,k-G)}(E,A+(Ln(x.commands[0])?0:1),x.numberOfDoubleDots)}(G,D,x.snapshot?._urlSegment,me),pt=qe.processChildren?Fr(qe.segmentGroup,qe.index,G.commands):xi(qe.segmentGroup,qe.index,G.commands);return Ui(D.root,qe.segmentGroup,pt,A,k)}(x.snapshot?._lastPathIndex)}function Ln(x){return"object"==typeof x&&null!=x&&!x.outlets&&!x.segmentPath}function Si(x){return"object"==typeof x&&null!=x&&x.outlets}function Ui(x,D,E,A,k){let se,G={};A&&yi(A,(me,qe)=>{G[qe]=Array.isArray(me)?me.map(pt=>`${pt}`):`${me}`}),se=x===D?E:Pr(x,D,E);const pe=Pe(De(se));return new ut(pe,G,k)}function Pr(x,D,E){const A={};return yi(x.children,(k,G)=>{A[G]=k===D?E:Pr(k,D,E)}),new mt(x.segments,A)}class ro{constructor(D,E,A){if(this.isAbsolute=D,this.numberOfDoubleDots=E,this.commands=A,D&&A.length>0&&Ln(A[0]))throw new T.vHH(4003,!1);const k=A.find(Si);if(k&&k!==Fi(A))throw new T.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yr{constructor(D,E,A){this.segmentGroup=D,this.processChildren=E,this.index=A}}function xi(x,D,E){if(x||(x=new mt([],{})),0===x.segments.length&&x.hasChildren())return Fr(x,D,E);const A=function ps(x,D,E){let A=0,k=D;const G={match:!1,pathIndex:0,commandIndex:0};for(;k<x.segments.length;){if(A>=E.length)return G;const se=x.segments[k],pe=E[A];if(Si(pe))break;const me=`${pe}`,qe=A<E.length-1?E[A+1]:null;if(k>0&&void 0===me)break;if(me&&qe&&"object"==typeof qe&&void 0===qe.outlets){if(!Or(me,qe,se))return G;A+=2}else{if(!Or(me,{},se))return G;A++}k++}return{match:!0,pathIndex:k,commandIndex:A}}(x,D,E),k=E.slice(A.commandIndex);if(A.match&&A.pathIndex<x.segments.length){const G=new mt(x.segments.slice(0,A.pathIndex),{});return G.children[hn]=new mt(x.segments.slice(A.pathIndex),x.children),Fr(G,0,k)}return A.match&&0===k.length?new mt(x.segments,{}):A.match&&!x.hasChildren()?Nr(x,D,E):A.match?Fr(x,0,k):Nr(x,D,E)}function Fr(x,D,E){if(0===E.length)return new mt(x.segments,{});{const A=function Er(x){return Si(x[0])?x[0].outlets:{[hn]:x}}(E),k={};return yi(A,(G,se)=>{"string"==typeof G&&(G=[G]),null!==G&&(k[se]=xi(x.children[se],D,G))}),yi(x.children,(G,se)=>{void 0===A[se]&&(k[se]=G)}),new mt(x.segments,k)}}function Nr(x,D,E){const A=x.segments.slice(0,D);let k=0;for(;k<E.length;){const G=E[k];if(Si(G)){const me=ki(G.outlets);return new mt(A,me)}if(0===k&&Ln(E[0])){A.push(new dn(x.segments[D].path,$r(E[0]))),k++;continue}const se=Si(G)?G.outlets[hn]:`${G}`,pe=k<E.length-1?E[k+1]:null;se&&pe&&Ln(pe)?(A.push(new dn(se,$r(pe))),k+=2):(A.push(new dn(se,{})),k++)}return new mt(A,{})}function ki(x){const D={};return yi(x,(E,A)=>{"string"==typeof E&&(E=[E]),null!==E&&(D[A]=Nr(new mt([],{}),0,E))}),D}function $r(x){const D={};return yi(x,(E,A)=>D[A]=`${E}`),D}function Or(x,D,E){return x==E.path&&Un(D,E.parameters)}class Ai{constructor(D,E){this.id=D,this.url=E}}class Gn extends Ai{constructor(D,E,A="imperative",k=null){super(D,E),this.type=0,this.navigationTrigger=A,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ur extends Ai{constructor(D,E,A){super(D,E),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dr extends Ai{constructor(D,E,A,k){super(D,E),this.reason=A,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wr extends Ai{constructor(D,E,A,k){super(D,E),this.error=A,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $s extends Ai{constructor(D,E,A,k){super(D,E),this.urlAfterRedirects=A,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gs extends Ai{constructor(D,E,A,k){super(D,E),this.urlAfterRedirects=A,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fs extends Ai{constructor(D,E,A,k,G){super(D,E),this.urlAfterRedirects=A,this.state=k,this.shouldActivate=G,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kr extends Ai{constructor(D,E,A,k){super(D,E),this.urlAfterRedirects=A,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gr extends Ai{constructor(D,E,A,k){super(D,E),this.urlAfterRedirects=A,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class da{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ts{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ha{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tc{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class so{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pl{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ol{constructor(D,E,A){this.routerEvent=D,this.position=E,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Zs{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const E=this.pathFromRoot(D);return E.length>1?E[E.length-2]:null}children(D){const E=Aa(D,this._root);return E?E.children.map(A=>A.value):[]}firstChild(D){const E=Aa(D,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(D){const E=Ms(D,this._root);return E.length<2?[]:E[E.length-2].children.map(k=>k.value).filter(k=>k!==D)}pathFromRoot(D){return Ms(D,this._root).map(E=>E.value)}}function Aa(x,D){if(x===D.value)return D;for(const E of D.children){const A=Aa(x,E);if(A)return A}return null}function Ms(x,D){if(x===D.value)return[D];for(const E of D.children){const A=Ms(x,E);if(A.length)return A.unshift(D),A}return[]}class wo{constructor(D,E){this.value=D,this.children=E}toString(){return`TreeNode(${this.value})`}}function Ao(x){const D={};return x&&x.children.forEach(E=>D[E.value.outlet]=E),D}class $a extends Zs{constructor(D,E){super(D),this.snapshot=E,Is(this,D)}toString(){return this.snapshot.toString()}}function Pa(x,D){const E=function Ws(x,D){const se=new qs([],{},{},"",{},hn,D,null,x.root,-1,{});return new Ts("",new wo(se,[]))}(x,D),A=new g.X([new dn("",{})]),k=new g.X({}),G=new g.X({}),se=new g.X({}),pe=new g.X(""),me=new _o(A,k,se,pe,G,hn,D,E.root);return me.snapshot=E.root,new $a(new wo(me,[]),E)}class _o{constructor(D,E,A,k,G,se,pe,me){this.url=D,this.params=E,this.queryParams=A,this.fragment=k,this.data=G,this.outlet=se,this.component=pe,this.title=this.data?.pipe((0,Xt.U)(qe=>qe[gt]))??(0,H.of)(void 0),this._futureSnapshot=me}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xt.U)(D=>en(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xt.U)(D=>en(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Br(x,D="emptyOnly"){const E=x.pathFromRoot;let A=0;if("always"!==D)for(A=E.length-1;A>=1;){const k=E[A],G=E[A-1];if(k.routeConfig&&""===k.routeConfig.path)A--;else{if(G.component)break;A--}}return function Ss(x){return x.reduce((D,E)=>({params:{...D.params,...E.params},data:{...D.data,...E.data},resolve:{...E.data,...D.resolve,...E.routeConfig?.data,...E._resolvedData}}),{params:{},data:{},resolve:{}})}(E.slice(A))}class qs{constructor(D,E,A,k,G,se,pe,me,qe,pt,xt,Ht){this.url=D,this.params=E,this.queryParams=A,this.fragment=k,this.data=G,this.outlet=se,this.component=pe,this.title=this.data?.[gt],this.routeConfig=me,this._urlSegment=qe,this._lastPathIndex=pt,this._correctedLastPathIndex=Ht??pt,this._resolve=xt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=en(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ts extends Zs{constructor(D,E){super(E),this.url=D,Is(this,E)}toString(){return ao(this._root)}}function Is(x,D){D.value._routerState=x,D.children.forEach(E=>Is(x,E))}function ao(x){const D=x.children.length>0?` { ${x.children.map(ao).join(", ")} } `:"";return`${x.value}${D}`}function ns(x){if(x.snapshot){const D=x.snapshot,E=x._futureSnapshot;x.snapshot=E,Un(D.queryParams,E.queryParams)||x.queryParams.next(E.queryParams),D.fragment!==E.fragment&&x.fragment.next(E.fragment),Un(D.params,E.params)||x.params.next(E.params),function bn(x,D){if(x.length!==D.length)return!1;for(let E=0;E<x.length;++E)if(!Un(x[E],D[E]))return!1;return!0}(D.url,E.url)||x.url.next(E.url),Un(D.data,E.data)||x.data.next(E.data)}else x.snapshot=x._futureSnapshot,x.data.next(x._futureSnapshot.data)}function ms(x,D){const E=Un(x.params,D.params)&&function Vt(x,D){return mn(x,D)&&x.every((E,A)=>Un(E.parameters,D[A].parameters))}(x.url,D.url);return E&&!(!x.parent!=!D.parent)&&(!x.parent||ms(x.parent,D.parent))}function nr(x,D,E){if(E&&x.shouldReuseRoute(D.value,E.value.snapshot)){const A=E.value;A._futureSnapshot=D.value;const k=function li(x,D,E){return D.children.map(A=>{for(const k of E.children)if(x.shouldReuseRoute(A.value,k.value.snapshot))return nr(x,A,k);return nr(x,A)})}(x,D,E);return new wo(A,k)}{if(x.shouldAttach(D.value)){const G=x.retrieve(D.value);if(null!==G){const se=G.route;return se.value._futureSnapshot=D.value,se.children=D.children.map(pe=>nr(x,pe)),se}}const A=function Oa(x){return new _o(new g.X(x.url),new g.X(x.params),new g.X(x.queryParams),new g.X(x.fragment),new g.X(x.data),x.outlet,x.component,x)}(D.value),k=D.children.map(G=>nr(x,G));return new wo(A,k)}}const Ks="ngNavigationCancelingError";function Ys(x,D){const{redirectTo:E,navigationBehaviorOptions:A}=_t(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,k=_s(!1,0,D);return k.url=E,k.navigationBehaviorOptions=A,k}function _s(x,D,E){const A=new Error("NavigationCancelingError: "+(x||""));return A[Ks]=!0,A.cancellationCode=D,E&&(A.url=E),A}function Ga(x){return kr(x)&&_t(x.url)}function kr(x){return x&&x[Ks]}class Xs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ys,this.attachRef=null}}let ys=(()=>{class x{constructor(){this.contexts=new Map}onChildOutletCreated(E,A){const k=this.getOrCreateContext(E);k.outlet=A,this.contexts.set(E,k)}onChildOutletDestroyed(E){const A=this.getContext(E);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let A=this.getContext(E);return A||(A=new Xs,this.contexts.set(E,A)),A}getContext(E){return this.contexts.get(E)||null}}return x.\u0275fac=function(E){return new(E||x)},x.\u0275prov=T.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const Po=!1;let is=(()=>{class x{constructor(E,A,k,G,se){this.parentContexts=E,this.location=A,this.changeDetector=G,this.environmentInjector=se,this.activated=null,this._activatedRoute=null,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.name=k||hn,E.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const E=this.parentContexts.getContext(this.name);E&&E.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.vHH(4012,Po);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.vHH(4012,Po);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.vHH(4012,Po);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,A){this.activated=E,this._activatedRoute=A,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,A){if(this.isActivated)throw new T.vHH(4013,Po);this._activatedRoute=E;const k=this.location,se=E._futureSnapshot.component,pe=this.parentContexts.getOrCreateContext(this.name).children,me=new tc(E,pe,k.injector);if(A&&function Ji(x){return!!x.resolveComponentFactory}(A)){const qe=A.resolveComponentFactory(se);this.activated=k.createComponent(qe,k.length,me)}else this.activated=k.createComponent(se,{index:k.length,injector:me,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return x.\u0275fac=function(E){return new(E||x)(T.Y36(ys),T.Y36(T.s_b),T.$8M("name"),T.Y36(T.sBO),T.Y36(T.lqb))},x.\u0275dir=T.lG2({type:x,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),x})();class tc{constructor(D,E,A){this.route=D,this.childContexts=E,this.parent=A}get(D,E){return D===_o?this.route:D===ys?this.childContexts:this.parent.get(D,E)}}let Za=(()=>{class x{}return x.\u0275fac=function(E){return new(E||x)},x.\u0275cmp=T.Xpm({type:x,selectors:[["ng-component"]],standalone:!0,features:[T.jDz],decls:1,vars:0,template:function(E,A){1&E&&T._UZ(0,"router-outlet")},dependencies:[is],encapsulation:2}),x})();function Wa(x,D){return x.providers&&!x._injector&&(x._injector=(0,T.MMx)(x.providers,D,`Route: ${x.path}`)),x._injector??D}function As(x){const D=x.children&&x.children.map(As),E=D?{...x,children:D}:{...x};return!E.component&&!E.loadComponent&&(D||E.loadChildren)&&E.outlet&&E.outlet!==hn&&(E.component=Za),E}function vr(x){return x.outlet||hn}function Ps(x,D){const E=x.filter(A=>vr(A)===D);return E.push(...x.filter(A=>vr(A)!==D)),E}function Vo(x){if(!x)return null;if(x.routeConfig?._injector)return x.routeConfig._injector;for(let D=x.parent;D;D=D.parent){const E=D.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class ml{constructor(D,E,A,k){this.routeReuseStrategy=D,this.futureState=E,this.currState=A,this.forwardEvent=k}activate(D){const E=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,A,D),ns(this.futureState.root),this.activateChildRoutes(E,A,D)}deactivateChildRoutes(D,E,A){const k=Ao(E);D.children.forEach(G=>{const se=G.value.outlet;this.deactivateRoutes(G,k[se],A),delete k[se]}),yi(k,(G,se)=>{this.deactivateRouteAndItsChildren(G,A)})}deactivateRoutes(D,E,A){const k=D.value,G=E?E.value:null;if(k===G)if(k.component){const se=A.getContext(k.outlet);se&&this.deactivateChildRoutes(D,E,se.children)}else this.deactivateChildRoutes(D,E,A);else G&&this.deactivateRouteAndItsChildren(E,A)}deactivateRouteAndItsChildren(D,E){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,E):this.deactivateRouteAndOutlet(D,E)}detachAndStoreRouteSubtree(D,E){const A=E.getContext(D.value.outlet),k=A&&D.value.component?A.children:E,G=Ao(D);for(const se of Object.keys(G))this.deactivateRouteAndItsChildren(G[se],k);if(A&&A.outlet){const se=A.outlet.detach(),pe=A.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:se,route:D,contexts:pe})}}deactivateRouteAndOutlet(D,E){const A=E.getContext(D.value.outlet),k=A&&D.value.component?A.children:E,G=Ao(D);for(const se of Object.keys(G))this.deactivateRouteAndItsChildren(G[se],k);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(D,E,A){const k=Ao(E);D.children.forEach(G=>{this.activateRoutes(G,k[G.value.outlet],A),this.forwardEvent(new Pl(G.value.snapshot))}),D.children.length&&this.forwardEvent(new Tc(D.value.snapshot))}activateRoutes(D,E,A){const k=D.value,G=E?E.value:null;if(ns(k),k===G)if(k.component){const se=A.getOrCreateContext(k.outlet);this.activateChildRoutes(D,E,se.children)}else this.activateChildRoutes(D,E,A);else if(k.component){const se=A.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const pe=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),se.children.onOutletReAttached(pe.contexts),se.attachRef=pe.componentRef,se.route=pe.route.value,se.outlet&&se.outlet.attach(pe.componentRef,pe.route.value),ns(pe.route.value),this.activateChildRoutes(D,null,se.children)}else{const pe=Vo(k.snapshot),me=pe?.get(T._Vd)??null;se.attachRef=null,se.route=k,se.resolver=me,se.injector=pe,se.outlet&&se.outlet.activateWith(k,se.injector),this.activateChildRoutes(D,null,se.children)}}else this.activateChildRoutes(D,null,A)}}class pa{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class Cr{constructor(D,E){this.component=D,this.route=E}}function Os(x,D,E){const A=x._root;return bs(A,D?D._root:null,E,[A.value])}function Ei(x,D){const E=Symbol(),A=D.get(x,E);return A===E?"function"!=typeof x||(0,T.Z0I)(x)?D.get(x):x:A}function bs(x,D,E,A,k={canDeactivateChecks:[],canActivateChecks:[]}){const G=Ao(D);return x.children.forEach(se=>{(function nc(x,D,E,A,k={canDeactivateChecks:[],canActivateChecks:[]}){const G=x.value,se=D?D.value:null,pe=E?E.getContext(x.value.outlet):null;if(se&&G.routeConfig===se.routeConfig){const me=function Jt(x,D,E){if("function"==typeof E)return E(x,D);switch(E){case"pathParamsChange":return!mn(x.url,D.url);case"pathParamsOrQueryParamsChange":return!mn(x.url,D.url)||!Un(x.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ms(x,D)||!Un(x.queryParams,D.queryParams);default:return!ms(x,D)}}(se,G,G.routeConfig.runGuardsAndResolvers);me?k.canActivateChecks.push(new pa(A)):(G.data=se.data,G._resolvedData=se._resolvedData),bs(x,D,G.component?pe?pe.children:null:E,A,k),me&&pe&&pe.outlet&&pe.outlet.isActivated&&k.canDeactivateChecks.push(new Cr(pe.outlet.component,se))}else se&&Vn(D,pe,k),k.canActivateChecks.push(new pa(A)),bs(x,null,G.component?pe?pe.children:null:E,A,k)})(se,G[se.value.outlet],E,A.concat([se.value]),k),delete G[se.value.outlet]}),yi(G,(se,pe)=>Vn(se,E.getContext(pe),k)),k}function Vn(x,D,E){const A=Ao(x),k=x.value;yi(A,(G,se)=>{Vn(G,k.component?D?D.children.getContext(se):null:D,E)}),E.canDeactivateChecks.push(new Cr(k.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,k))}function La(x){return"function"==typeof x}function Dr(x){return x instanceof He.K||"EmptyError"===x?.name}const yo=Symbol("INITIAL_VALUE");function Mr(){return(0,Dt.w)(x=>(0,he.a)(x.map(D=>D.pipe((0,Oe.q)(1),(0,Ne.O)(yo)))).pipe((0,Xt.U)(D=>{for(const E of D)if(!0!==E){if(E===yo)return yo;if(!1===E||E instanceof ut)return E}return!0}),(0,Ot.h)(D=>D!==yo),(0,Oe.q)(1)))}function ga(x){return(0,Be.z)((0,lt.b)(D=>{if(_t(D))throw Ys(0,D)}),(0,Xt.U)(D=>!0===D))}const gl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fa(x,D,E,A,k){const G=br(x,D,E);return G.matched?function _a(x,D,E,A){const k=D.canMatch;if(!k||0===k.length)return(0,H.of)(!0);const G=k.map(se=>{const pe=Ei(se,x);return un(function ye(x){return x&&La(x.canMatch)}(pe)?pe.canMatch(D,E):x.runInContext(()=>pe(D,E)))});return(0,H.of)(G).pipe(Mr(),ga())}(A=Wa(D,A),D,E).pipe((0,Xt.U)(se=>!0===se?G:{...gl})):(0,H.of)(G)}function br(x,D,E){if(""===D.path)return"full"===D.pathMatch&&(x.hasChildren()||E.length>0)?{...gl}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const k=(D.matcher||sn)(E,x,D);if(!k)return{...gl};const G={};yi(k.posParams,(pe,me)=>{G[me]=pe.path});const se=k.consumed.length>0?{...G,...k.consumed[k.consumed.length-1].parameters}:G;return{matched:!0,consumedSegments:k.consumed,remainingSegments:E.slice(k.consumed.length),parameters:se,positionalParamSegments:k.posParams??{}}}function Uo(x,D,E,A,k="corrected"){if(E.length>0&&function Ya(x,D,E){return E.some(A=>U(x,D,A)&&vr(A)!==hn)}(x,E,A)){const se=new mt(D,function Ka(x,D,E,A){const k={};k[hn]=A,A._sourceSegment=x,A._segmentIndexShift=D.length;for(const G of E)if(""===G.path&&vr(G)!==hn){const se=new mt([],{});se._sourceSegment=x,se._segmentIndexShift=D.length,k[vr(G)]=se}return k}(x,D,A,new mt(E,x.children)));return se._sourceSegment=x,se._segmentIndexShift=D.length,{segmentGroup:se,slicedSegments:[]}}if(0===E.length&&function Zr(x,D,E){return E.some(A=>U(x,D,A))}(x,E,A)){const se=new mt(x.segments,function jo(x,D,E,A,k,G){const se={};for(const pe of A)if(U(x,E,pe)&&!k[vr(pe)]){const me=new mt([],{});me._sourceSegment=x,me._segmentIndexShift="legacy"===G?x.segments.length:D.length,se[vr(pe)]=me}return{...k,...se}}(x,D,E,A,x.children,k));return se._sourceSegment=x,se._segmentIndexShift=D.length,{segmentGroup:se,slicedSegments:E}}const G=new mt(x.segments,x.children);return G._sourceSegment=x,G._segmentIndexShift=D.length,{segmentGroup:G,slicedSegments:E}}function U(x,D,E){return(!(x.hasChildren()||D.length>0)||"full"!==E.pathMatch)&&""===E.path}function oe(x,D,E,A){return!!(vr(x)===A||A!==hn&&U(D,E,x))&&("**"===x.path||br(D,x,E).matched)}function q(x,D,E){return 0===D.length&&!x.children[E]}const be=!1;class Qe{constructor(D){this.segmentGroup=D||null}}class Mt{constructor(D){this.urlTree=D}}function jt(x){return(0,Ue._)(new Qe(x))}function Fn(x){return(0,Ue._)(new Mt(x))}class ti{constructor(D,E,A,k,G){this.injector=D,this.configLoader=E,this.urlSerializer=A,this.urlTree=k,this.config=G,this.allowRedirects=!0}apply(){const D=Uo(this.urlTree.root,[],[],this.config).segmentGroup,E=new mt(D.segments,D.children);return this.expandSegmentGroup(this.injector,this.config,E,hn).pipe((0,Xt.U)(G=>this.createUrlTree(De(G),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,dt.K)(G=>{if(G instanceof Mt)return this.allowRedirects=!1,this.match(G.urlTree);throw G instanceof Qe?this.noMatchError(G):G}))}match(D){return this.expandSegmentGroup(this.injector,this.config,D.root,hn).pipe((0,Xt.U)(k=>this.createUrlTree(De(k),D.queryParams,D.fragment))).pipe((0,dt.K)(k=>{throw k instanceof Qe?this.noMatchError(k):k}))}noMatchError(D){return new T.vHH(4002,be)}createUrlTree(D,E,A){const k=Pe(D);return new ut(k,E,A)}expandSegmentGroup(D,E,A,k){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(D,E,A).pipe((0,Xt.U)(G=>new mt([],G))):this.expandSegment(D,A,E,A.segments,k,!0)}expandChildren(D,E,A){const k=[];for(const G of Object.keys(A.children))"primary"===G?k.unshift(G):k.push(G);return(0,l.D)(k).pipe((0,Gt.b)(G=>{const se=A.children[G],pe=Ps(E,G);return this.expandSegmentGroup(D,pe,se,G).pipe((0,Xt.U)(me=>({segment:me,outlet:G})))}),Et((G,se)=>(G[se.outlet]=se.segment,G),{}),mi())}expandSegment(D,E,A,k,G,se){return(0,l.D)(A).pipe((0,Gt.b)(pe=>this.expandSegmentAgainstRoute(D,E,A,pe,k,G,se).pipe((0,dt.K)(qe=>{if(qe instanceof Qe)return(0,H.of)(null);throw qe}))),(0,Ft.P)(pe=>!!pe),(0,dt.K)((pe,me)=>{if(Dr(pe))return q(E,k,G)?(0,H.of)(new mt([],{})):jt(E);throw pe}))}expandSegmentAgainstRoute(D,E,A,k,G,se,pe){return oe(k,E,G,se)?void 0===k.redirectTo?this.matchSegmentAgainstRoute(D,E,k,G,se):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,E,A,k,G,se):jt(E):jt(E)}expandSegmentAgainstRouteUsingRedirect(D,E,A,k,G,se){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,A,k,se):this.expandRegularSegmentAgainstRouteUsingRedirect(D,E,A,k,G,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,E,A,k){const G=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Fn(G):this.lineralizeSegments(A,G).pipe((0,kt.z)(se=>{const pe=new mt(se,{});return this.expandSegment(D,pe,E,se,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,E,A,k,G,se){const{matched:pe,consumedSegments:me,remainingSegments:qe,positionalParamSegments:pt}=br(E,k,G);if(!pe)return jt(E);const xt=this.applyRedirectCommands(me,k.redirectTo,pt);return k.redirectTo.startsWith("/")?Fn(xt):this.lineralizeSegments(k,xt).pipe((0,kt.z)(Ht=>this.expandSegment(D,E,A,Ht.concat(qe),se,!1)))}matchSegmentAgainstRoute(D,E,A,k,G){return"**"===A.path?(D=Wa(A,D),A.loadChildren?(A._loadedRoutes?(0,H.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(D,A)).pipe((0,Xt.U)(pe=>(A._loadedRoutes=pe.routes,A._loadedInjector=pe.injector,new mt(k,{})))):(0,H.of)(new mt(k,{}))):Fa(E,A,k,D).pipe((0,Dt.w)(({matched:se,consumedSegments:pe,remainingSegments:me})=>se?this.getChildConfig(D=A._injector??D,A,k).pipe((0,kt.z)(pt=>{const xt=pt.injector??D,Ht=pt.routes,{segmentGroup:Yt,slicedSegments:Kt}=Uo(E,pe,me,Ht),_n=new mt(Yt.segments,Yt.children);if(0===Kt.length&&_n.hasChildren())return this.expandChildren(xt,Ht,_n).pipe((0,Xt.U)(si=>new mt(pe,si)));if(0===Ht.length&&0===Kt.length)return(0,H.of)(new mt(pe,{}));const Sn=vr(A)===G;return this.expandSegment(xt,_n,Ht,Kt,Sn?hn:G,!0).pipe((0,Xt.U)(Dn=>new mt(pe.concat(Dn.segments),Dn.children)))})):jt(E)))}getChildConfig(D,E,A){return E.children?(0,H.of)({routes:E.children,injector:D}):E.loadChildren?void 0!==E._loadedRoutes?(0,H.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function Ac(x,D,E,A){const k=D.canLoad;if(void 0===k||0===k.length)return(0,H.of)(!0);const G=k.map(se=>{const pe=Ei(se,x);return un(function pr(x){return x&&La(x.canLoad)}(pe)?pe.canLoad(D,E):x.runInContext(()=>pe(D,E)))});return(0,H.of)(G).pipe(Mr(),ga())}(D,E,A).pipe((0,kt.z)(k=>k?this.configLoader.loadChildren(D,E).pipe((0,lt.b)(G=>{E._loadedRoutes=G.routes,E._loadedInjector=G.injector})):function ci(x){return(0,Ue._)(_s(be,3))}())):(0,H.of)({routes:[],injector:D})}lineralizeSegments(D,E){let A=[],k=E.root;for(;;){if(A=A.concat(k.segments),0===k.numberOfChildren)return(0,H.of)(A);if(k.numberOfChildren>1||!k.children[hn])return(0,Ue._)(new T.vHH(4e3,be));k=k.children[hn]}}applyRedirectCommands(D,E,A){return this.applyRedirectCreateUrlTree(E,this.urlSerializer.parse(E),D,A)}applyRedirectCreateUrlTree(D,E,A,k){const G=this.createSegmentGroup(D,E.root,A,k);return new ut(G,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(D,E){const A={};return yi(D,(k,G)=>{if("string"==typeof k&&k.startsWith(":")){const pe=k.substring(1);A[G]=E[pe]}else A[G]=k}),A}createSegmentGroup(D,E,A,k){const G=this.createSegments(D,E.segments,A,k);let se={};return yi(E.children,(pe,me)=>{se[me]=this.createSegmentGroup(D,pe,A,k)}),new mt(G,se)}createSegments(D,E,A,k){return E.map(G=>G.path.startsWith(":")?this.findPosParam(D,G,k):this.findOrReturn(G,A))}findPosParam(D,E,A){const k=A[E.path.substring(1)];if(!k)throw new T.vHH(4001,be);return k}findOrReturn(D,E){let A=0;for(const k of E){if(k.path===D.path)return E.splice(A),k;A++}return D}}class vi{}class er{constructor(D,E,A,k,G,se,pe,me){this.injector=D,this.rootComponentType=E,this.config=A,this.urlTree=k,this.url=G,this.paramsInheritanceStrategy=se,this.relativeLinkResolution=pe,this.urlSerializer=me}recognize(){const D=Uo(this.urlTree.root,[],[],this.config.filter(E=>void 0===E.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,hn).pipe((0,Xt.U)(E=>{if(null===E)return null;const A=new qs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},hn,this.rootComponentType,null,this.urlTree.root,-1,{}),k=new wo(A,E),G=new Ts(this.url,k);return this.inheritParamsAndData(G._root),G}))}inheritParamsAndData(D){const E=D.value,A=Br(E,this.paramsInheritanceStrategy);E.params=Object.freeze(A.params),E.data=Object.freeze(A.data),D.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(D,E,A,k){return 0===A.segments.length&&A.hasChildren()?this.processChildren(D,E,A):this.processSegment(D,E,A,A.segments,k)}processChildren(D,E,A){return(0,l.D)(Object.keys(A.children)).pipe((0,Gt.b)(k=>{const G=A.children[k],se=Ps(E,k);return this.processSegmentGroup(D,se,G,k)}),Et((k,G)=>k&&G?(k.push(...G),k):null),(0,nn.o)(k=>null!==k),(0,On.d)(null),mi(),(0,Xt.U)(k=>{if(null===k)return null;const G=Do(k);return function zr(x){x.sort((D,E)=>D.value.outlet===hn?-1:E.value.outlet===hn?1:D.value.outlet.localeCompare(E.value.outlet))}(G),G}))}processSegment(D,E,A,k,G){return(0,l.D)(E).pipe((0,Gt.b)(se=>this.processSegmentAgainstRoute(se._injector??D,se,A,k,G)),(0,Ft.P)(se=>!!se),(0,dt.K)(se=>{if(Dr(se))return q(A,k,G)?(0,H.of)([]):(0,H.of)(null);throw se}))}processSegmentAgainstRoute(D,E,A,k,G){if(E.redirectTo||!oe(E,A,k,G))return(0,H.of)(null);let se;if("**"===E.path){const pe=k.length>0?Fi(k).parameters:{},me=ic(A)+k.length,qe=new qs(k,pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_l(E),vr(E),E.component??E._loadedComponent??null,E,xs(A),me,Js(E),me);se=(0,H.of)({snapshot:qe,consumedSegments:[],remainingSegments:[]})}else se=Fa(A,E,k,D).pipe((0,Xt.U)(({matched:pe,consumedSegments:me,remainingSegments:qe,parameters:pt})=>{if(!pe)return null;const xt=ic(A)+me.length;return{snapshot:new qs(me,pt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_l(E),vr(E),E.component??E._loadedComponent??null,E,xs(A),xt,Js(E),xt),consumedSegments:me,remainingSegments:qe}}));return se.pipe((0,Dt.w)(pe=>{if(null===pe)return(0,H.of)(null);const{snapshot:me,consumedSegments:qe,remainingSegments:pt}=pe;D=E._injector??D;const xt=E._loadedInjector??D,Ht=function Eo(x){return x.children?x.children:x.loadChildren?x._loadedRoutes:[]}(E),{segmentGroup:Yt,slicedSegments:Kt}=Uo(A,qe,pt,Ht.filter(Sn=>void 0===Sn.redirectTo),this.relativeLinkResolution);if(0===Kt.length&&Yt.hasChildren())return this.processChildren(xt,Ht,Yt).pipe((0,Xt.U)(Sn=>null===Sn?null:[new wo(me,Sn)]));if(0===Ht.length&&0===Kt.length)return(0,H.of)([new wo(me,[])]);const _n=vr(E)===G;return this.processSegment(xt,Ht,Yt,Kt,_n?hn:G).pipe((0,Xt.U)(Sn=>null===Sn?null:[new wo(me,Sn)]))}))}}function Vr(x){const D=x.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function Do(x){const D=[],E=new Set;for(const A of x){if(!Vr(A)){D.push(A);continue}const k=D.find(G=>A.value.routeConfig===G.value.routeConfig);void 0!==k?(k.children.push(...A.children),E.add(k)):D.push(A)}for(const A of E){const k=Do(A.children);D.push(new wo(A.value,k))}return D.filter(A=>!E.has(A))}function xs(x){let D=x;for(;D._sourceSegment;)D=D._sourceSegment;return D}function ic(x){let D=x,E=D._segmentIndexShift??0;for(;D._sourceSegment;)D=D._sourceSegment,E+=D._segmentIndexShift??0;return E-1}function _l(x){return x.data||{}}function Js(x){return x.resolve||{}}function Nl(x){return"string"==typeof x.title||null===x.title}function ss(x){return(0,Dt.w)(D=>{const E=x(D);return E?(0,l.D)(E).pipe((0,Xt.U)(()=>D)):(0,H.of)(D)})}let oc=(()=>{class x{buildTitle(E){let A,k=E.root;for(;void 0!==k;)A=this.getResolvedTitleForRoute(k)??A,k=k.children.find(G=>G.outlet===hn);return A}getResolvedTitleForRoute(E){return E.data[gt]}}return x.\u0275fac=function(E){return new(E||x)},x.\u0275prov=T.Yz7({token:x,factory:function(){return(0,T.f3M)(as)},providedIn:"root"}),x})(),as=(()=>{class x extends oc{constructor(E){super(),this.title=E}updateTitle(E){const A=this.buildTitle(E);void 0!==A&&this.title.setTitle(A)}}return x.\u0275fac=function(E){return new(E||x)(T.LFG(ln.Dx))},x.\u0275prov=T.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();class Xa{}class Pc extends class eu{shouldDetach(D){return!1}store(D,E){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,E){return D.routeConfig===E.routeConfig}}{}const Ja=new T.OlP("",{providedIn:"root",factory:()=>({})}),zl=new T.OlP("ROUTES");let Wr=(()=>{class x{constructor(E,A){this.injector=E,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(E){if(this.componentLoaders.get(E))return this.componentLoaders.get(E);if(E._loadedComponent)return(0,H.of)(E._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(E);const A=un(E.loadComponent()).pipe((0,lt.b)(G=>{this.onLoadEndListener&&this.onLoadEndListener(E),E._loadedComponent=G}),(0,Qn.x)(()=>{this.componentLoaders.delete(E)})),k=new wt(A,()=>new Tt.x).pipe(Ct());return this.componentLoaders.set(E,k),k}loadChildren(E,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,H.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const G=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,Xt.U)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(A);let me,qe,pt=!1;Array.isArray(pe)?qe=pe:(me=pe.create(E).injector,qe=hi(me.get(zl,[],T.XFs.Self|T.XFs.Optional)));return{routes:qe.map(As),injector:me}}),(0,Qn.x)(()=>{this.childrenLoaders.delete(A)})),se=new wt(G,()=>new Tt.x).pipe(Ct());return this.childrenLoaders.set(A,se),se}loadModuleFactoryOrRoutes(E){return un(E()).pipe((0,kt.z)(A=>A instanceof T.YKP||Array.isArray(A)?(0,H.of)(A):(0,l.D)(this.compiler.compileModuleAsync(A))))}}return x.\u0275fac=function(E){return new(E||x)(T.LFG(T.zs3),T.LFG(T.Sil))},x.\u0275prov=T.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();class Qs{}class sc{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,E){return D}}function Rs(x){throw x}function Oc(x,D,E){return D.parse("/")}const bl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function _i(){const x=(0,T.f3M)(Vi),D=(0,T.f3M)(ys),E=(0,T.f3M)(an.Ye),A=(0,T.f3M)(T.zs3),k=(0,T.f3M)(T.Sil),G=(0,T.f3M)(zl,{optional:!0})??[],se=(0,T.f3M)(Ja,{optional:!0})??{},pe=(0,T.f3M)(as),me=(0,T.f3M)(oc,{optional:!0}),qe=(0,T.f3M)(Qs,{optional:!0}),pt=(0,T.f3M)(Xa,{optional:!0}),xt=new Rr(null,x,D,E,A,k,hi(G));return qe&&(xt.urlHandlingStrategy=qe),pt&&(xt.routeReuseStrategy=pt),xt.titleStrategy=me??pe,function fr(x,D){x.errorHandler&&(D.errorHandler=x.errorHandler),x.malformedUriErrorHandler&&(D.malformedUriErrorHandler=x.malformedUriErrorHandler),x.onSameUrlNavigation&&(D.onSameUrlNavigation=x.onSameUrlNavigation),x.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=x.paramsInheritanceStrategy),x.relativeLinkResolution&&(D.relativeLinkResolution=x.relativeLinkResolution),x.urlUpdateStrategy&&(D.urlUpdateStrategy=x.urlUpdateStrategy),x.canceledNavigationResolution&&(D.canceledNavigationResolution=x.canceledNavigationResolution)}(se,xt),xt}let Rr=(()=>{class x{constructor(E,A,k,G,se,pe,me){this.rootComponentType=E,this.urlSerializer=A,this.rootContexts=k,this.location=G,this.config=me,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tt.x,this.errorHandler=Rs,this.malformedUriErrorHandler=Oc,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,H.of)(void 0),this.urlHandlingStrategy=new sc,this.routeReuseStrategy=new Pc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=se.get(Wr),this.configLoader.onLoadEndListener=Ht=>this.triggerEvent(new ts(Ht)),this.configLoader.onLoadStartListener=Ht=>this.triggerEvent(new da(Ht)),this.ngModule=se.get(T.h0i),this.console=se.get(T.c2e);const xt=se.get(T.R0b);this.isNgZoneEnabled=xt instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(me),this.currentUrlTree=function tt(){return new ut(new mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Pa(this.currentUrlTree,this.rootComponentType),this.transitions=new g.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(E){const A=this.events;return E.pipe((0,Ot.h)(k=>0!==k.id),(0,Xt.U)(k=>({...k,extractedUrl:this.urlHandlingStrategy.extract(k.rawUrl)})),(0,Dt.w)(k=>{let G=!1,se=!1;return(0,H.of)(k).pipe((0,lt.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.rawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Dt.w)(pe=>{const me=this.browserUrlTree.toString(),qe=!this.navigated||pe.extractedUrl.toString()!==me||me!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||qe)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return Ba(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,H.of)(pe).pipe((0,Dt.w)(xt=>{const Ht=this.transitions.getValue();return A.next(new Gn(xt.id,this.serializeUrl(xt.extractedUrl),xt.source,xt.restoredState)),Ht!==this.transitions.getValue()?Re.E:Promise.resolve(xt)}),function rr(x,D,E,A){return(0,Dt.w)(k=>function Mi(x,D,E,A,k){return new ti(x,D,E,A,k).apply()}(x,D,E,k.extractedUrl,A).pipe((0,Xt.U)(G=>({...k,urlAfterRedirects:G}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,lt.b)(xt=>{this.currentNavigation={...this.currentNavigation,finalUrl:xt.urlAfterRedirects},k.urlAfterRedirects=xt.urlAfterRedirects}),function Pn(x,D,E,A,k,G){return(0,kt.z)(se=>function Co(x,D,E,A,k,G,se="emptyOnly",pe="legacy"){return new er(x,D,E,A,k,se,pe,G).recognize().pipe((0,Dt.w)(me=>null===me?function Yr(x){return new nt.y(D=>D.error(x))}(new vi):(0,H.of)(me)))}(x,D,E,se.urlAfterRedirects,A.serialize(se.urlAfterRedirects),A,k,G).pipe((0,Xt.U)(pe=>({...se,targetSnapshot:pe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,lt.b)(xt=>{if(k.targetSnapshot=xt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!xt.extras.skipLocationChange){const Yt=this.urlHandlingStrategy.merge(xt.urlAfterRedirects,xt.rawUrl);this.setBrowserUrl(Yt,xt)}this.browserUrlTree=xt.urlAfterRedirects}const Ht=new $s(xt.id,this.serializeUrl(xt.extractedUrl),this.serializeUrl(xt.urlAfterRedirects),xt.targetSnapshot);A.next(Ht)}));if(qe&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ht,extractedUrl:Yt,source:Kt,restoredState:_n,extras:Sn}=pe,pi=new Gn(Ht,this.serializeUrl(Yt),Kt,_n);A.next(pi);const Dn=Pa(Yt,this.rootComponentType).snapshot;return k={...pe,targetSnapshot:Dn,urlAfterRedirects:Yt,extras:{...Sn,skipLocationChange:!1,replaceUrl:!1}},(0,H.of)(k)}return this.rawUrlTree=pe.rawUrl,pe.resolve(null),Re.E}),(0,lt.b)(pe=>{const me=new Gs(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(me)}),(0,Xt.U)(pe=>k={...pe,guards:Os(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)}),function Qi(x,D){return(0,kt.z)(E=>{const{targetSnapshot:A,currentSnapshot:k,guards:{canActivateChecks:G,canDeactivateChecks:se}}=E;return 0===se.length&&0===G.length?(0,H.of)({...E,guardsResult:!0}):function rs(x,D,E,A){return(0,l.D)(x).pipe((0,kt.z)(k=>function Ic(x,D,E,A,k){const G=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,H.of)(!0);const se=G.map(pe=>{const me=Vo(D)??k,qe=Ei(pe,me);return un(function W(x){return x&&La(x.canDeactivate)}(qe)?qe.canDeactivate(x,D,E,A):me.runInContext(()=>qe(x,D,E,A))).pipe((0,Ft.P)())});return(0,H.of)(se).pipe(Mr())}(k.component,k.route,E,D,A)),(0,Ft.P)(k=>!0!==k,!0))}(se,A,k,x).pipe((0,kt.z)(pe=>pe&&function Pi(x){return"boolean"==typeof x}(pe)?function fa(x,D,E,A){return(0,l.D)(D).pipe((0,Gt.b)(k=>(0,$e.z)(function ks(x,D){return null!==x&&D&&D(new ha(x)),(0,H.of)(!0)}(k.route.parent,A),function ma(x,D){return null!==x&&D&&D(new so(x)),(0,H.of)(!0)}(k.route,A),function Ll(x,D,E){const A=D[D.length-1],G=D.slice(0,D.length-1).reverse().map(se=>function Ra(x){const D=x.routeConfig?x.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:x,guards:D}:null}(se)).filter(se=>null!==se).map(se=>(0,Ie.P)(()=>{const pe=se.guards.map(me=>{const qe=Vo(se.node)??E,pt=Ei(me,qe);return un(function K(x){return x&&La(x.canActivateChild)}(pt)?pt.canActivateChild(A,x):qe.runInContext(()=>pt(A,x))).pipe((0,Ft.P)())});return(0,H.of)(pe).pipe(Mr())}));return(0,H.of)(G).pipe(Mr())}(x,k.path,E),function Rl(x,D,E){const A=D.routeConfig?D.routeConfig.canActivate:null;if(!A||0===A.length)return(0,H.of)(!0);const k=A.map(G=>(0,Ie.P)(()=>{const se=Vo(D)??E,pe=Ei(G,se);return un(function Q(x){return x&&La(x.canActivate)}(pe)?pe.canActivate(D,x):se.runInContext(()=>pe(D,x))).pipe((0,Ft.P)())}));return(0,H.of)(k).pipe(Mr())}(x,k.route,E))),(0,Ft.P)(k=>!0!==k,!0))}(A,G,x,D):(0,H.of)(pe)),(0,Xt.U)(pe=>({...E,guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,lt.b)(pe=>{if(k.guardsResult=pe.guardsResult,_t(pe.guardsResult))throw Ys(0,pe.guardsResult);const me=new fs(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(me)}),(0,Ot.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,"",3),!1)),ss(pe=>{if(pe.guards.canActivateChecks.length)return(0,H.of)(pe).pipe((0,lt.b)(me=>{const qe=new Kr(me.id,this.serializeUrl(me.extractedUrl),this.serializeUrl(me.urlAfterRedirects),me.targetSnapshot);this.triggerEvent(qe)}),(0,Dt.w)(me=>{let qe=!1;return(0,H.of)(me).pipe(function Fl(x,D){return(0,kt.z)(E=>{const{targetSnapshot:A,guards:{canActivateChecks:k}}=E;if(!k.length)return(0,H.of)(E);let G=0;return(0,l.D)(k).pipe((0,Gt.b)(se=>function yl(x,D,E,A){const k=x.routeConfig,G=x._resolve;return void 0!==k?.title&&!Nl(k)&&(G[gt]=k.title),function Na(x,D,E,A){const k=function os(x){return[...Object.keys(x),...Object.getOwnPropertySymbols(x)]}(x);if(0===k.length)return(0,H.of)({});const G={};return(0,l.D)(k).pipe((0,kt.z)(se=>function yn(x,D,E,A){const k=Vo(D)??A,G=Ei(x,k);return un(G.resolve?G.resolve(D,E):k.runInContext(()=>G(D,E)))}(x[se],D,E,A).pipe((0,Ft.P)(),(0,lt.b)(pe=>{G[se]=pe}))),tn(1),(0,gi.h)(G),(0,dt.K)(se=>Dr(se)?Re.E:(0,Ue._)(se)))}(G,x,D,A).pipe((0,Xt.U)(se=>(x._resolvedData=se,x.data=Br(x,E).resolve,k&&Nl(k)&&(x.data[gt]=k.title),null)))}(se.route,A,x,D)),(0,lt.b)(()=>G++),tn(1),(0,kt.z)(se=>G===k.length?(0,H.of)(E):Re.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,lt.b)({next:()=>qe=!0,complete:()=>{qe||(this.restoreHistory(me),this.cancelNavigationTransition(me,"",2))}}))}),(0,lt.b)(me=>{const qe=new Gr(me.id,this.serializeUrl(me.extractedUrl),this.serializeUrl(me.urlAfterRedirects),me.targetSnapshot);this.triggerEvent(qe)}))}),ss(pe=>{const me=qe=>{const pt=[];qe.routeConfig?.loadComponent&&!qe.routeConfig._loadedComponent&&pt.push(this.configLoader.loadComponent(qe.routeConfig).pipe((0,lt.b)(xt=>{qe.component=xt}),(0,Xt.U)(()=>{})));for(const xt of qe.children)pt.push(...me(xt));return pt};return(0,he.a)(me(pe.targetSnapshot.root)).pipe((0,On.d)(),(0,Oe.q)(1))}),ss(()=>this.afterPreactivation()),(0,Xt.U)(pe=>{const me=function gs(x,D,E){const A=nr(x,D._root,E?E._root:void 0);return new $a(A,D)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return k={...pe,targetRouterState:me}}),(0,lt.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((x,D,E)=>(0,Xt.U)(A=>(new ml(D,A.targetRouterState,A.currentRouterState,E).activate(x),A)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,lt.b)({next(){G=!0},complete(){G=!0}}),(0,Qn.x)(()=>{G||se||this.cancelNavigationTransition(k,"",1),this.currentNavigation?.id===k.id&&(this.currentNavigation=null)}),(0,dt.K)(pe=>{if(se=!0,kr(pe)){Ga(pe)||(this.navigated=!0,this.restoreHistory(k,!0));const me=new dr(k.id,this.serializeUrl(k.extractedUrl),pe.message,pe.cancellationCode);if(A.next(me),Ga(pe)){const qe=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),pt={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ba(k.source)};this.scheduleNavigation(qe,"imperative",null,pt,{resolve:k.resolve,reject:k.reject,promise:k.promise})}else k.resolve(!1)}else{this.restoreHistory(k,!0);const me=new wr(k.id,this.serializeUrl(k.extractedUrl),pe,k.targetSnapshot??void 0);A.next(me);try{k.resolve(this.errorHandler(pe))}catch(qe){k.reject(qe)}}return Re.E}))}))}resetRootComponentType(E){this.rootComponentType=E,this.routerState.root.component=this.rootComponentType}setTransition(E){this.transitions.next({...this.transitions.value,...E})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const A="popstate"===E.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{const k={replaceUrl:!0},G=E.state?.navigationId?E.state:null;if(G){const pe={...G};delete pe.navigationId,delete pe.\u0275routerPageId,0!==Object.keys(pe).length&&(k.state=pe)}const se=this.parseUrl(E.url);this.scheduleNavigation(se,A,G,k)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(E){this.events.next(E)}resetConfig(E){this.config=E.map(As),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,A={}){const{relativeTo:k,queryParams:G,fragment:se,queryParamsHandling:pe,preserveFragment:me}=A,qe=k||this.routerState.root,pt=me?this.currentUrlTree.fragment:se;let xt=null;switch(pe){case"merge":xt={...this.currentUrlTree.queryParams,...G};break;case"preserve":xt=this.currentUrlTree.queryParams;break;default:xt=G||null}return null!==xt&&(xt=this.removeEmptyProps(xt)),Bi(qe,this.currentUrlTree,E,xt,pt??null)}navigateByUrl(E,A={skipLocationChange:!1}){const k=_t(E)?E:this.parseUrl(E),G=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation(G,"imperative",null,A)}navigate(E,A={skipLocationChange:!1}){return function xl(x){for(let D=0;D<x.length;D++){if(null==x[D])throw new T.vHH(4008,false)}}(E),this.navigateByUrl(this.createUrlTree(E,A),A)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let A;try{A=this.urlSerializer.parse(E)}catch(k){A=this.malformedUriErrorHandler(k,this.urlSerializer,E)}return A}isActive(E,A){let k;if(k=!0===A?{...bl}:!1===A?{...cs}:A,_t(E))return Me(this.currentUrlTree,E,k);const G=this.parseUrl(E);return Me(this.currentUrlTree,G,k)}removeEmptyProps(E){return Object.keys(E).reduce((A,k)=>{const G=E[k];return null!=G&&(A[k]=G),A},{})}processNavigations(){this.navigations.subscribe(E=>{this.navigated=!0,this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId,this.events.next(new ur(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),E.resolve(!0)},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}scheduleNavigation(E,A,k,G,se){if(this.disposed)return Promise.resolve(!1);let pe,me,qe;se?(pe=se.resolve,me=se.reject,qe=se.promise):qe=new Promise((Ht,Yt)=>{pe=Ht,me=Yt});const pt=++this.navigationId;let xt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(k=this.location.getState()),xt=k&&k.\u0275routerPageId?k.\u0275routerPageId:G.replaceUrl||G.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):xt=0,this.setTransition({id:pt,targetPageId:xt,source:A,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:E,extras:G,resolve:pe,reject:me,promise:qe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),qe.catch(Ht=>Promise.reject(Ht))}setBrowserUrl(E,A){const k=this.urlSerializer.serialize(E),G={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(k)||A.extras.replaceUrl?this.location.replaceState(k,"",G):this.location.go(k,"",G)}restoreHistory(E,A=!1){if("computed"===this.canceledNavigationResolution){const k=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===k?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===k&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(k)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(E,A,k){const G=new dr(E.id,this.serializeUrl(E.extractedUrl),A,k);this.triggerEvent(G),E.resolve(!1)}generateNgRouterState(E,A){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:A}:{navigationId:E}}}return x.\u0275fac=function(E){T.$Z()},x.\u0275prov=T.Yz7({token:x,factory:function(){return _i()},providedIn:"root"}),x})();function Ba(x){return"imperative"!==x}let ac=(()=>{class x{constructor(E,A,k,G,se){this.router=E,this.route=A,this.tabIndexAttribute=k,this.renderer=G,this.el=se,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Tt.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(E){this._preserveFragment=(0,T.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,T.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,T.D6c)(E)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(E){if(null!=this.tabIndexAttribute)return;const A=this.renderer,k=this.el.nativeElement;null!==E?A.setAttribute(k,"tabindex",E):A.removeAttribute(k,"tabindex")}ngOnChanges(E){this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return x.\u0275fac=function(E){return new(E||x)(T.Y36(Rr),T.Y36(_o),T.$8M("tabindex"),T.Y36(T.Qsj),T.Y36(T.SBq))},x.\u0275dir=T.lG2({type:x,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(E,A){1&E&&T.NdJ("click",function(){return A.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[T.TTD]}),x})(),Vl=(()=>{class x{constructor(E,A,k){this.router=E,this.route=A,this.locationStrategy=k,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Tt.x,this.subscription=E.events.subscribe(G=>{G instanceof ur&&this.updateTargetUrlAndHref()})}set preserveFragment(E){this._preserveFragment=(0,T.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,T.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,T.D6c)(E)}get replaceUrl(){return this._replaceUrl}set routerLink(E){this.commands=null!=E?Array.isArray(E)?E:[E]:null}ngOnChanges(E){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(E,A,k,G,se){return!!(0!==E||A||k||G||se||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return x.\u0275fac=function(E){return new(E||x)(T.Y36(Rr),T.Y36(_o),T.Y36(an.S$))},x.\u0275dir=T.lG2({type:x,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(E,A){1&E&&T.NdJ("click",function(G){return A.onClick(G.button,G.ctrlKey,G.shiftKey,G.altKey,G.metaKey)}),2&E&&T.uIk("target",A.target)("href",A.href,T.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[T.TTD]}),x})(),Ur=(()=>{class x{constructor(E,A,k,G,se,pe){this.router=E,this.element=A,this.renderer=k,this.cdr=G,this.link=se,this.linkWithHref=pe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new T.vpe,this.routerEventsSubscription=E.events.subscribe(me=>{me instanceof ur&&this.update()})}ngAfterContentInit(){(0,H.of)(this.links.changes,this.linksWithHrefs.changes,(0,H.of)(null)).pipe((0,di.J)()).subscribe(E=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const E=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(A=>!!A).map(A=>A.onChanges);this.linkInputChangesSubscription=(0,l.D)(E).pipe((0,di.J)()).subscribe(A=>{this.isActive!==this.isLinkActive(this.router)(A)&&this.update()})}set routerLinkActive(E){const A=Array.isArray(E)?E:E.split(" ");this.classes=A.filter(k=>!!k)}ngOnChanges(E){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const E=this.hasActiveLinks();this.isActive!==E&&(this.isActive=E,this.cdr.markForCheck(),this.classes.forEach(A=>{E?this.renderer.addClass(this.element.nativeElement,A):this.renderer.removeClass(this.element.nativeElement,A)}),E&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(E))})}isLinkActive(E){const A=function ya(x){return!!x.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return k=>!!k.urlTree&&E.isActive(k.urlTree,A)}hasActiveLinks(){const E=this.isLinkActive(this.router);return this.link&&E(this.link)||this.linkWithHref&&E(this.linkWithHref)||this.links.some(E)||this.linksWithHrefs.some(E)}}return x.\u0275fac=function(E){return new(E||x)(T.Y36(Rr),T.Y36(T.SBq),T.Y36(T.Qsj),T.Y36(T.sBO),T.Y36(ac,8),T.Y36(Vl,8))},x.\u0275dir=T.lG2({type:x,selectors:[["","routerLinkActive",""]],contentQueries:function(E,A,k){if(1&E&&(T.Suo(k,ac,5),T.Suo(k,Vl,5)),2&E){let G;T.iGM(G=T.CRH())&&(A.links=G),T.iGM(G=T.CRH())&&(A.linksWithHrefs=G)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[T.TTD]}),x})();class An{}let kc=(()=>{class x{constructor(E,A,k,G,se){this.router=E,this.injector=k,this.preloadingStrategy=G,this.loader=se}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ot.h)(E=>E instanceof ur),(0,Gt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,A){const k=[];for(const G of A){G.providers&&!G._injector&&(G._injector=(0,T.MMx)(G.providers,E,`Route: ${G.path}`));const se=G._injector??E,pe=G._loadedInjector??se;G.loadChildren&&!G._loadedRoutes&&void 0===G.canLoad||G.loadComponent&&!G._loadedComponent?k.push(this.preloadConfig(se,G)):(G.children||G._loadedRoutes)&&k.push(this.processRoutes(pe,G.children??G._loadedRoutes))}return(0,l.D)(k).pipe((0,di.J)())}preloadConfig(E,A){return this.preloadingStrategy.preload(A,()=>{let k;k=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(E,A):(0,H.of)(null);const G=k.pipe((0,kt.z)(se=>null===se?(0,H.of)(void 0):(A._loadedRoutes=se.routes,A._loadedInjector=se.injector,this.processRoutes(se.injector??E,se.routes))));if(A.loadComponent&&!A._loadedComponent){const se=this.loader.loadComponent(A);return(0,l.D)([G,se]).pipe((0,di.J)())}return G})}}return x.\u0275fac=function(E){return new(E||x)(T.LFG(Rr),T.LFG(T.Sil),T.LFG(T.lqb),T.LFG(An),T.LFG(Wr))},x.\u0275prov=T.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const ta=new T.OlP("");let lo=(()=>{class x{constructor(E,A,k={}){this.router=E,this.viewportScroller=A,this.options=k,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},k.scrollPositionRestoration=k.scrollPositionRestoration||"disabled",k.anchorScrolling=k.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Gn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof ur&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.router.parseUrl(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Ol&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,A){this.router.triggerEvent(new Ol(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return x.\u0275fac=function(E){T.$Z()},x.\u0275prov=T.Yz7({token:x,factory:x.\u0275fac}),x})();function Ls(x,D){return{\u0275kind:x,\u0275providers:D}}function ir(x){return[{provide:zl,multi:!0,useValue:x}]}function lc(){const x=(0,T.f3M)(T.zs3);return D=>{const E=x.get(T.z2F);if(D!==E.components[0])return;const A=x.get(Rr),k=x.get(Qa);1===x.get($i)&&A.initialNavigation(),x.get(va,null,T.XFs.Optional)?.setUpPreloading(),x.get(ta,null,T.XFs.Optional)?.init(),A.resetRootComponentType(E.componentTypes[0]),k.next(),k.complete()}}const Qa=new T.OlP("",{factory:()=>new Tt.x}),$i=new T.OlP("",{providedIn:"root",factory:()=>1});const va=new T.OlP("");function nu(x){return Ls(0,[{provide:va,useExisting:kc},{provide:An,useExisting:x}])}const jl=new T.OlP("ROUTER_FORROOT_GUARD"),y=[an.Ye,{provide:Vi,useClass:Nt},{provide:Rr,useFactory:_i},ys,{provide:_o,useFactory:function $o(x){return x.routerState.root},deps:[Rr]},Wr];function t(){return new T.PXZ("Router",Rr)}let u=(()=>{class x{constructor(E){}static forRoot(E,A){return{ngModule:x,providers:[y,[],ir(E),{provide:jl,useFactory:R,deps:[[Rr,new T.FiY,new T.tp0]]},{provide:Ja,useValue:A||{}},A?.useHash?{provide:an.S$,useClass:an.Do}:{provide:an.S$,useClass:an.b0},{provide:ta,useFactory:()=>{const x=(0,T.f3M)(Rr),D=(0,T.f3M)(an.EM),E=(0,T.f3M)(Ja);return E.scrollOffset&&D.setOffset(E.scrollOffset),new lo(x,D,E)}},A?.preloadingStrategy?nu(A.preloadingStrategy).\u0275providers:[],{provide:T.PXZ,multi:!0,useFactory:t},A?.initialNavigation?B(A):[],[{provide:z,useFactory:lc},{provide:T.tb,multi:!0,useExisting:z}]]}}static forChild(E){return{ngModule:x,providers:[ir(E)]}}}return x.\u0275fac=function(E){return new(E||x)(T.LFG(jl,8))},x.\u0275mod=T.oAB({type:x}),x.\u0275inj=T.cJS({imports:[Za]}),x})();function R(x){return"guarded"}function B(x){return["disabled"===x.initialNavigation?Ls(3,[{provide:T.ip1,multi:!0,useFactory:()=>{const D=(0,T.f3M)(Rr);return()=>{D.setUpLocationChangeListener()}}},{provide:$i,useValue:2}]).\u0275providers:[],"enabledBlocking"===x.initialNavigation?Ls(2,[{provide:$i,useValue:0},{provide:T.ip1,multi:!0,deps:[T.zs3],useFactory:D=>{const E=D.get(an.V_,Promise.resolve());let A=!1;return()=>E.then(()=>new Promise(G=>{const se=D.get(Rr),pe=D.get(Qa);(function k(G){D.get(Rr).events.pipe((0,Ot.h)(pe=>pe instanceof ur||pe instanceof dr||pe instanceof wr),(0,Xt.U)(pe=>pe instanceof ur||pe instanceof dr&&(0===pe.code||1===pe.code)&&null),(0,Ot.h)(pe=>null!==pe),(0,Oe.q)(1)).subscribe(()=>{G()})})(()=>{G(!0),A=!0}),se.afterPreactivation=()=>(G(!0),A||pe.closed?(0,H.of)(void 0):pe),se.initialNavigation()}))}}]).\u0275providers:[]]}const z=new T.OlP("")}},cn=>{cn(cn.s=3932)}]);